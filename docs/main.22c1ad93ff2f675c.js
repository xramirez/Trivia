var Z8=Object.defineProperty,X8=Object.defineProperties,$8=Object.getOwnPropertyDescriptors,Z5=Object.getOwnPropertySymbols,J8=Object.prototype.hasOwnProperty,K8=Object.prototype.propertyIsEnumerable,X5=(jl,_,ae)=>_ in jl?Z8(jl,_,{enumerable:!0,configurable:!0,writable:!0,value:ae}):jl[_]=ae,ca=(jl,_)=>{for(var ae in _||(_={}))J8.call(_,ae)&&X5(jl,ae,_[ae]);if(Z5)for(var ae of Z5(_))K8.call(_,ae)&&X5(jl,ae,_[ae]);return jl},wl=(jl,_)=>X8(jl,$8(_));(self.webpackChunkAngularAPI=self.webpackChunkAngularAPI||[]).push([[179],{724:jl=>{jl.exports=function _(ae,ie,g){function x(e,r){if(!ie[e]){if(!ae[e]){if(T)return T(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var n=ie[e]={exports:{}};ae[e][0].call(n.exports,function(d){return x(ae[e][1][d]||d)},n,n.exports,_,ae,ie,g)}return ie[e].exports}for(var T=void 0,b=0;b<g.length;b++)x(g[b]);return x}({1:[function(_,ae,ie){"use strict";var g=_("../src/lib"),x={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var T in x){var b=T.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");g.addStyleRule(b,x[T])}},{"../src/lib":503}],2:[function(_,ae,ie){"use strict";ae.exports=_("../src/transforms/aggregate")},{"../src/transforms/aggregate":1114}],3:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/box")},{"../src/traces/box":679}],6:[function(_,ae,ie){"use strict";ae.exports=_("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(_,ae,ie){"use strict";ae.exports=_("../src/core")},{"../src/core":481}],15:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(_,ae,ie){"use strict";ae.exports=_("../src/transforms/filter")},{"../src/transforms/filter":1115}],17:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(_,ae,ie){"use strict";ae.exports=_("../src/transforms/groupby")},{"../src/transforms/groupby":1116}],20:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/image")},{"../src/traces/image":852}],27:[function(_,ae,ie){"use strict";var g=_("./core");g.register([_("./bar"),_("./box"),_("./heatmap"),_("./histogram"),_("./histogram2d"),_("./histogram2dcontour"),_("./contour"),_("./scatterternary"),_("./violin"),_("./funnel"),_("./waterfall"),_("./image"),_("./pie"),_("./sunburst"),_("./treemap"),_("./icicle"),_("./funnelarea"),_("./scatter3d"),_("./surface"),_("./isosurface"),_("./volume"),_("./mesh3d"),_("./cone"),_("./streamtube"),_("./scattergeo"),_("./choropleth"),_("./scattergl"),_("./splom"),_("./pointcloud"),_("./heatmapgl"),_("./parcoords"),_("./parcats"),_("./scattermapbox"),_("./choroplethmapbox"),_("./densitymapbox"),_("./sankey"),_("./indicator"),_("./table"),_("./carpet"),_("./scattercarpet"),_("./contourcarpet"),_("./ohlc"),_("./candlestick"),_("./scatterpolar"),_("./scatterpolargl"),_("./barpolar"),_("./scattersmith"),_("./aggregate"),_("./filter"),_("./groupby"),_("./sort"),_("./calendars")]),ae.exports=g},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/parcoords")},{"../src/traces/parcoords":895}],34:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/pie")},{"../src/traces/pie":906}],35:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/pointcloud")},{"../src/traces/pointcloud":915}],36:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/sankey")},{"../src/traces/sankey":921}],37:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/scatter3d")},{"../src/traces/scatter3d":959}],38:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":966}],39:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/scattergeo")},{"../src/traces/scattergeo":974}],40:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/scattergl")},{"../src/traces/scattergl":987}],41:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":997}],42:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1005}],43:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1012}],44:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/scattersmith")},{"../src/traces/scattersmith":1019}],45:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/scatterternary")},{"../src/traces/scatterternary":1027}],46:[function(_,ae,ie){"use strict";ae.exports=_("../src/transforms/sort")},{"../src/transforms/sort":1118}],47:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/splom")},{"../src/traces/splom":1036}],48:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/streamtube")},{"../src/traces/streamtube":1044}],49:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/sunburst")},{"../src/traces/sunburst":1052}],50:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/surface")},{"../src/traces/surface":1061}],51:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/table")},{"../src/traces/table":1069}],52:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/treemap")},{"../src/traces/treemap":1080}],53:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/violin")},{"../src/traces/violin":1093}],54:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/volume")},{"../src/traces/volume":1101}],55:[function(_,ae,ie){"use strict";ae.exports=_("../src/traces/waterfall")},{"../src/traces/waterfall":1109}],56:[function(_,ae,ie){var g,x;g=this,x=function(g,x,T,b,e){"use strict";function r(le){return le.target.depth}function t(le,ue){return le.sourceLinks.length?le.depth:ue-1}function a(le){return function(){return le}}e=e&&e.hasOwnProperty("default")?e.default:e;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(le){return typeof le}:function(le){return le&&"function"==typeof Symbol&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le};function d(le,ue){return i(le.source,ue.source)||le.index-ue.index}function s(le,ue){return i(le.target,ue.target)||le.index-ue.index}function i(le,ue){return le.partOfCycle===ue.partOfCycle?le.y0-ue.y0:"top"===le.circularLinkType||"bottom"===ue.circularLinkType?-1:1}function u(le){return le.value}function f(le){return(le.y0+le.y1)/2}function p(le){return f(le.source)}function y(le){return f(le.target)}function m(le){return le.index}function l(le){return le.nodes}function w(le){return le.links}function v(le,ue){var de=le.get(ue);if(!de)throw new Error("missing: "+ue);return de}function A(le,ue){return ue(le)}function M(le,ue,de){var he=0;if(null===de){for(var be=[],ge=0;ge<le.links.length;ge++){var we=le.links[ge],ke=we.source.index,De=we.target.index;be[ke]||(be[ke]=[]),be[De]||(be[De]=[]),-1===be[ke].indexOf(De)&&be[ke].push(De)}var Ee=e(be);Ee.sort(function(Te,Ie){return Te.length-Ie.length});var Re={};for(ge=0;ge<Ee.length;ge++){var ve=Ee[ge].slice(-2);Re[ve[0]]||(Re[ve[0]]={}),Re[ve[0]][ve[1]]=!0}le.links.forEach(function(Te){var Ie=Te.target.index,Ce=Te.source.index;Ie===Ce||Re[Ce]&&Re[Ce][Ie]?(Te.circular=!0,Te.circularLinkID=he,he+=1):Te.circular=!1})}else le.links.forEach(function(Te){Te.source[de]<Te.target[de]?Te.circular=!1:(Te.circular=!0,Te.circularLinkID=he,he+=1)})}function k(le,ue){var de=0,he=0;le.links.forEach(function(be){be.circular&&(be.circularLinkType=be.source.circularLinkType||be.target.circularLinkType?be.source.circularLinkType?be.source.circularLinkType:be.target.circularLinkType:de<he?"top":"bottom","top"==be.circularLinkType?de+=1:he+=1,le.nodes.forEach(function(ge){A(ge,ue)!=A(be.source,ue)&&A(ge,ue)!=A(be.target,ue)||(ge.circularLinkType=be.circularLinkType)}))}),le.links.forEach(function(be){be.circular&&(be.source.circularLinkType==be.target.circularLinkType&&(be.circularLinkType=be.source.circularLinkType),te(be,ue)&&(be.circularLinkType=be.source.circularLinkType))})}function E(le){var ue=Math.abs(le.y1-le.y0),de=Math.abs(le.target.x0-le.source.x1);return Math.atan(de/ue)}function P(le,ue){var de=0;le.sourceLinks.forEach(function(be){de=be.circular&&!te(be,ue)?de+1:de});var he=0;return le.targetLinks.forEach(function(be){he=be.circular&&!te(be,ue)?he+1:he}),de+he}function S(le){var de=0;le.source.sourceLinks.forEach(function(ge){de=ge.circular?de+1:de});var be=0;return le.target.targetLinks.forEach(function(ge){be=ge.circular?be+1:be}),!(de>1||be>1)}function F(le,ue,de){return le.sort(D),le.forEach(function(he,be){var ge,we,ke=0;if(te(he,de)&&S(he))he.circularPathData.verticalBuffer=ke+he.width/2;else{for(var De=0;De<be;De++)if(!((ge=le[be]).source.column<(we=le[De]).target.column||ge.target.column>we.source.column)){var Ee=le[De].circularPathData.verticalBuffer+le[De].width/2+ue;ke=Ee>ke?Ee:ke}he.circularPathData.verticalBuffer=ke+he.width/2}}),le}function R(le,ue,de,he){var be=x.min(le.links,function(ge){return ge.source.y0});le.links.forEach(function(ge){ge.circular&&(ge.circularPathData={})}),F(le.links.filter(function(ge){return"top"==ge.circularLinkType}),ue,he),F(le.links.filter(function(ge){return"bottom"==ge.circularLinkType}),ue,he),le.links.forEach(function(ge){if(ge.circular){if(ge.circularPathData.arcRadius=ge.width+10,ge.circularPathData.leftNodeBuffer=5,ge.circularPathData.rightNodeBuffer=5,ge.circularPathData.sourceWidth=ge.source.x1-ge.source.x0,ge.circularPathData.sourceX=ge.source.x0+ge.circularPathData.sourceWidth,ge.circularPathData.targetX=ge.target.x0,ge.circularPathData.sourceY=ge.y0,ge.circularPathData.targetY=ge.y1,te(ge,he)&&S(ge))ge.circularPathData.leftSmallArcRadius=10+ge.width/2,ge.circularPathData.leftLargeArcRadius=10+ge.width/2,ge.circularPathData.rightSmallArcRadius=10+ge.width/2,ge.circularPathData.rightLargeArcRadius=10+ge.width/2,"bottom"==ge.circularLinkType?(ge.circularPathData.verticalFullExtent=ge.source.y1+25+ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.rightLargeArcRadius):(ge.circularPathData.verticalFullExtent=ge.source.y0-25-ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.rightLargeArcRadius);else{var we=ge.source.column,ke=ge.circularLinkType,De=le.links.filter(function(ve){return ve.source.column==we&&ve.circularLinkType==ke});De.sort("bottom"==ge.circularLinkType?B:L);var Ee=0;De.forEach(function(ve,Te){ve.circularLinkID==ge.circularLinkID&&(ge.circularPathData.leftSmallArcRadius=10+ge.width/2+Ee,ge.circularPathData.leftLargeArcRadius=10+ge.width/2+Te*ue+Ee),Ee+=ve.width}),we=ge.target.column,(De=le.links.filter(function(ve){return ve.target.column==we&&ve.circularLinkType==ke})).sort("bottom"==ge.circularLinkType?Z:V),Ee=0,De.forEach(function(ve,Te){ve.circularLinkID==ge.circularLinkID&&(ge.circularPathData.rightSmallArcRadius=10+ge.width/2+Ee,ge.circularPathData.rightLargeArcRadius=10+ge.width/2+Te*ue+Ee),Ee+=ve.width}),"bottom"==ge.circularLinkType?(ge.circularPathData.verticalFullExtent=Math.max(de,ge.source.y1,ge.target.y1)+25+ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.rightLargeArcRadius):(ge.circularPathData.verticalFullExtent=be-25-ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.rightLargeArcRadius)}ge.circularPathData.leftInnerExtent=ge.circularPathData.sourceX+ge.circularPathData.leftNodeBuffer,ge.circularPathData.rightInnerExtent=ge.circularPathData.targetX-ge.circularPathData.rightNodeBuffer,ge.circularPathData.leftFullExtent=ge.circularPathData.sourceX+ge.circularPathData.leftLargeArcRadius+ge.circularPathData.leftNodeBuffer,ge.circularPathData.rightFullExtent=ge.circularPathData.targetX-ge.circularPathData.rightLargeArcRadius-ge.circularPathData.rightNodeBuffer}if(ge.circular)ge.path="top"==(ve=ge).circularLinkType?"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 0 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY-ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 0 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 0 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY-ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 0 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY:"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 1 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY+ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 1 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 1 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY+ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 1 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY;else{var Re=b.linkHorizontal().source(function(ve){return[ve.source.x0+(ve.source.x1-ve.source.x0),ve.y0]}).target(function(ve){return[ve.target.x0,ve.y1]});ge.path=Re(ge)}var ve})}function D(le,ue){return Y(le)==Y(ue)?"bottom"==le.circularLinkType?B(le,ue):L(le,ue):Y(ue)-Y(le)}function L(le,ue){return le.y0-ue.y0}function B(le,ue){return ue.y0-le.y0}function V(le,ue){return le.y1-ue.y1}function Z(le,ue){return ue.y1-le.y1}function Y(le){return le.target.column-le.source.column}function ee(le){return le.target.x0-le.source.x1}function Q(le,ue){var de=E(le),he=ee(ue)/Math.tan(de);return"up"==q(le)?le.y1+he:le.y1-he}function $(le,ue){var de=E(le),he=ee(ue)/Math.tan(de);return"up"==q(le)?le.y1-he:le.y1+he}function K(le,ue,de,he){le.links.forEach(function(be){if(!be.circular&&be.target.column-be.source.column>1){var ge=be.source.column+1,we=be.target.column-1,ke=1,De=we-ge+1;for(ke=1;ge<=we;ge++,ke++)le.nodes.forEach(function(Ee){if(Ee.column==ge){var Re,ve=ke/(De+1),Te=Math.pow(1-ve,3),Ie=3*ve*Math.pow(1-ve,2),Ce=3*Math.pow(ve,2)*(1-ve),Pe=Math.pow(ve,3),Ve=Te*be.y0+Ie*be.y0+Ce*be.y1+Pe*be.y1,qe=Ve-be.width/2,Je=Ve+be.width/2;qe>Ee.y0&&qe<Ee.y1?(Re=Ee.y1-qe+10,Ee=j(Ee,Re="bottom"==Ee.circularLinkType?Re:-Re,ue,de),le.nodes.forEach(function(lt){A(lt,he)!=A(Ee,he)&&lt.column==Ee.column&&oe(Ee,lt)&&j(lt,Re,ue,de)})):(Je>Ee.y0&&Je<Ee.y1||qe<Ee.y0&&Je>Ee.y1)&&(Ee=j(Ee,Re=Je-Ee.y0+10,ue,de),le.nodes.forEach(function(lt){A(lt,he)!=A(Ee,he)&&lt.column==Ee.column&&lt.y0<Ee.y1&&lt.y1>Ee.y1&&j(lt,Re,ue,de)}))}})}})}function oe(le,ue){return le.y0>ue.y0&&le.y0<ue.y1||le.y1>ue.y0&&le.y1<ue.y1||le.y0<ue.y0&&le.y1>ue.y1}function j(le,ue,de,he){return le.y0+ue>=de&&le.y1+ue<=he&&(le.y0=le.y0+ue,le.y1=le.y1+ue,le.targetLinks.forEach(function(be){be.y1=be.y1+ue}),le.sourceLinks.forEach(function(be){be.y0=be.y0+ue})),le}function H(le,ue,de,he){le.nodes.forEach(function(be){he&&be.y+(be.y1-be.y0)>ue&&(be.y=be.y-(be.y+(be.y1-be.y0)-ue));var ge=le.links.filter(function(De){return A(De.source,de)==A(be,de)}),we=ge.length;we>1&&ge.sort(function(De,Ee){if(!De.circular&&!Ee.circular){if(De.target.column==Ee.target.column||!re(De,Ee))return De.y1-Ee.y1;if(De.target.column>Ee.target.column){var Re=$(Ee,De);return De.y1-Re}if(Ee.target.column>De.target.column)return $(De,Ee)-Ee.y1}return De.circular&&!Ee.circular?"top"==De.circularLinkType?-1:1:Ee.circular&&!De.circular?"top"==Ee.circularLinkType?1:-1:De.circular&&Ee.circular?De.circularLinkType===Ee.circularLinkType&&"top"==De.circularLinkType?De.target.column===Ee.target.column?De.target.y1-Ee.target.y1:Ee.target.column-De.target.column:De.circularLinkType===Ee.circularLinkType&&"bottom"==De.circularLinkType?De.target.column===Ee.target.column?Ee.target.y1-De.target.y1:De.target.column-Ee.target.column:"top"==De.circularLinkType?-1:1:void 0});var ke=be.y0;ge.forEach(function(De){De.y0=ke+De.width/2,ke+=De.width}),ge.forEach(function(De,Ee){if("bottom"==De.circularLinkType){for(var Re=Ee+1,ve=0;Re<we;Re++)ve+=ge[Re].width;De.y0=be.y1-ve-De.width/2}})})}function G(le,ue,de){le.nodes.forEach(function(he){var be=le.links.filter(function(ke){return A(ke.target,de)==A(he,de)}),ge=be.length;ge>1&&be.sort(function(ke,De){if(!ke.circular&&!De.circular){if(ke.source.column==De.source.column||!re(ke,De))return ke.y0-De.y0;if(De.source.column<ke.source.column){var Ee=Q(De,ke);return ke.y0-Ee}if(ke.source.column<De.source.column)return Q(ke,De)-De.y0}return ke.circular&&!De.circular?"top"==ke.circularLinkType?-1:1:De.circular&&!ke.circular?"top"==De.circularLinkType?1:-1:ke.circular&&De.circular?ke.circularLinkType===De.circularLinkType&&"top"==ke.circularLinkType?ke.source.column===De.source.column?ke.source.y1-De.source.y1:ke.source.column-De.source.column:ke.circularLinkType===De.circularLinkType&&"bottom"==ke.circularLinkType?ke.source.column===De.source.column?ke.source.y1-De.source.y1:De.source.column-ke.source.column:"top"==ke.circularLinkType?-1:1:void 0});var we=he.y0;be.forEach(function(ke){ke.y1=we+ke.width/2,we+=ke.width}),be.forEach(function(ke,De){if("bottom"==ke.circularLinkType){for(var Ee=De+1,Re=0;Ee<ge;Ee++)Re+=be[Ee].width;ke.y1=he.y1-Re-ke.width/2}})})}function re(le,ue){return q(le)==q(ue)}function q(le){return le.y0-le.y1>0?"up":"down"}function te(le,ue){return A(le.source,ue)==A(le.target,ue)}function ne(le,ue,de){var he=le.nodes,be=le.links,ge=!1,we=!1;if(be.forEach(function(Ee){"top"==Ee.circularLinkType?ge=!0:"bottom"==Ee.circularLinkType&&(we=!0)}),0==ge||0==we){var ke=x.min(he,function(Ee){return Ee.y0}),De=(de-ue)/(x.max(he,function(Ee){return Ee.y1})-ke);he.forEach(function(Ee){var Re=(Ee.y1-Ee.y0)*De;Ee.y0=(Ee.y0-ke)*De,Ee.y1=Ee.y0+Re}),be.forEach(function(Ee){Ee.y0=(Ee.y0-ke)*De,Ee.y1=(Ee.y1-ke)*De,Ee.width=Ee.width*De})}}g.sankeyCircular=function(){var le,ue,de=0,he=0,be=1,ge=1,we=24,ke=m,De=t,Ee=l,Re=w,ve=32,Te=2,Ie=null;function Ce(){var He={nodes:Ee.apply(null,arguments),links:Re.apply(null,arguments)};Pe(He),M(He,0,Ie),Ve(He),qe(He),k(He,ke),Je(He,ve,ke),lt(He);for(var $e=4,et=0;et<$e;et++)H(He,ge,ke),G(He,0,ke),K(He,he,ge,ke),H(He,ge,ke),G(He,0,ke);return ne(He,he,ge),R(He,Te,ge,ke),He}function Pe(He){He.nodes.forEach(function(et,tt){et.index=tt,et.sourceLinks=[],et.targetLinks=[]});var $e=T.map(He.nodes,ke);return He.links.forEach(function(et,tt){et.index=tt;var ft=et.source,bt=et.target;"object"!==(void 0===ft?"undefined":n(ft))&&(ft=et.source=v($e,ft)),"object"!==(void 0===bt?"undefined":n(bt))&&(bt=et.target=v($e,bt)),ft.sourceLinks.push(et),bt.targetLinks.push(et)}),He}function Ve(He){He.nodes.forEach(function($e){$e.partOfCycle=!1,$e.value=Math.max(x.sum($e.sourceLinks,u),x.sum($e.targetLinks,u)),$e.sourceLinks.forEach(function(et){et.circular&&($e.partOfCycle=!0,$e.circularLinkType=et.circularLinkType)}),$e.targetLinks.forEach(function(et){et.circular&&($e.partOfCycle=!0,$e.circularLinkType=et.circularLinkType)})})}function qe(He){var $e,et,tt;for($e=He.nodes,et=[],tt=0;$e.length;++tt,$e=et,et=[])$e.forEach(function(ft){ft.depth=tt,ft.sourceLinks.forEach(function(bt){et.indexOf(bt.target)<0&&!bt.circular&&et.push(bt.target)})});for($e=He.nodes,et=[],tt=0;$e.length;++tt,$e=et,et=[])$e.forEach(function(ft){ft.height=tt,ft.targetLinks.forEach(function(bt){et.indexOf(bt.source)<0&&!bt.circular&&et.push(bt.source)})});He.nodes.forEach(function(ft){ft.column=Math.floor(De.call(null,ft,tt))})}function Je(He,$e,et){var tt=T.nest().key(function(Ft){return Ft.column}).sortKeys(x.ascending).entries(He.nodes).map(function(Ft){return Ft.values});(function(Ft){if(ue){var ht=1/0;tt.forEach(function(cn){var Ze=ge*ue/(cn.length+1);ht=Ze<ht?Ze:ht}),le=ht}var ut=x.min(tt,function(cn){return(ge-he-(cn.length-1)*le)/x.sum(cn,u)});ut*=.3,He.links.forEach(function(cn){cn.width=cn.value*ut});var cn,Ze,Qe,Ge,rt,Le,Rt=(Ze=0,Qe=0,Ge=0,rt=0,Le=x.max((cn=He).nodes,function(ze){return ze.column}),cn.links.forEach(function(ze){ze.circular&&("top"==ze.circularLinkType?Ze+=ze.width:Qe+=ze.width,0==ze.target.column&&(rt+=ze.width),ze.source.column==Le&&(Ge+=ze.width))}),{top:Ze=Ze>0?Ze+25+10:Ze,bottom:Qe=Qe>0?Qe+25+10:Qe,left:rt=rt>0?rt+25+10:rt,right:Ge=Ge>0?Ge+25+10:Ge}),nn=function(cn,Ze){var Qe=x.max(cn.nodes,function(je){return je.column}),Ge=be-de,rt=ge-he,Le=Ge/(Ge+Ze.right+Ze.left),ze=rt/(rt+Ze.top+Ze.bottom);return de=de*Le+Ze.left,be=0==Ze.right?be:be*Le,he=he*ze+Ze.top,ge*=ze,cn.nodes.forEach(function(je){je.x0=de+je.column*((be-de-we)/Qe),je.x1=je.x0+we}),ze}(He,Rt);ut*=nn,He.links.forEach(function(cn){cn.width=cn.value*ut}),tt.forEach(function(cn){var Ze=cn.length;cn.forEach(function(Qe,Ge){Qe.depth==tt.length-1&&1==Ze||0==Qe.depth&&1==Ze?(Qe.y0=ge/2-Qe.value*ut,Qe.y1=Qe.y0+Qe.value*ut):Qe.partOfCycle?0==P(Qe,Ft)?(Qe.y0=ge/2+Ge,Qe.y1=Qe.y0+Qe.value*ut):"top"==Qe.circularLinkType?(Qe.y0=he+Ge,Qe.y1=Qe.y0+Qe.value*ut):(Qe.y0=ge-Qe.value*ut-Ge,Qe.y1=Qe.y0+Qe.value*ut):0==Rt.top||0==Rt.bottom?(Qe.y0=(ge-he)/Ze*Ge,Qe.y1=Qe.y0+Qe.value*ut):(Qe.y0=(ge-he)/2-Ze/2+Ge,Qe.y1=Qe.y0+Qe.value*ut)})})})(et),Vt();for(var ft=1,bt=$e;bt>0;--bt)Ct(ft*=.99,et),Vt();function Ct(Ft,ht){var ut=tt.length;tt.forEach(function(Rt){var nn=Rt.length,cn=Rt[0].depth;Rt.forEach(function(Ze){var Qe;if((Ze.sourceLinks.length||Ze.targetLinks.length)&&!(Ze.partOfCycle&&P(Ze,ht)>0))if(0==cn&&1==nn)Ze.y0=ge/2-(Qe=Ze.y1-Ze.y0)/2,Ze.y1=ge/2+Qe/2;else if(cn==ut-1&&1==nn)Ze.y0=ge/2-(Qe=Ze.y1-Ze.y0)/2,Ze.y1=ge/2+Qe/2;else{var Ge=x.mean(Ze.sourceLinks,y),rt=x.mean(Ze.targetLinks,p),Le=((Ge&&rt?(Ge+rt)/2:Ge||rt)-f(Ze))*Ft;Ze.y0+=Le,Ze.y1+=Le}})})}function Vt(){tt.forEach(function(Ft){var ht,ut,Rt,nn=he,cn=Ft.length;for(Ft.sort(i),Rt=0;Rt<cn;++Rt)(ut=nn-(ht=Ft[Rt]).y0)>0&&(ht.y0+=ut,ht.y1+=ut),nn=ht.y1+le;if((ut=nn-le-ge)>0)for(nn=ht.y0-=ut,ht.y1-=ut,Rt=cn-2;Rt>=0;--Rt)(ut=(ht=Ft[Rt]).y1+le-nn)>0&&(ht.y0-=ut,ht.y1-=ut),nn=ht.y0})}}function lt(He){He.nodes.forEach(function($e){$e.sourceLinks.sort(s),$e.targetLinks.sort(d)}),He.nodes.forEach(function($e){var et=$e.y0,tt=et,ft=$e.y1,bt=ft;$e.sourceLinks.forEach(function(Ct){Ct.circular?(Ct.y0=ft-Ct.width/2,ft-=Ct.width):(Ct.y0=et+Ct.width/2,et+=Ct.width)}),$e.targetLinks.forEach(function(Ct){Ct.circular?(Ct.y1=bt-Ct.width/2,bt-=Ct.width):(Ct.y1=tt+Ct.width/2,tt+=Ct.width)})})}return Ce.nodeId=function(He){return arguments.length?(ke="function"==typeof He?He:a(He),Ce):ke},Ce.nodeAlign=function(He){return arguments.length?(De="function"==typeof He?He:a(He),Ce):De},Ce.nodeWidth=function(He){return arguments.length?(we=+He,Ce):we},Ce.nodePadding=function(He){return arguments.length?(le=+He,Ce):le},Ce.nodes=function(He){return arguments.length?(Ee="function"==typeof He?He:a(He),Ce):Ee},Ce.links=function(He){return arguments.length?(Re="function"==typeof He?He:a(He),Ce):Re},Ce.size=function(He){return arguments.length?(de=he=0,be=+He[0],ge=+He[1],Ce):[be-de,ge-he]},Ce.extent=function(He){return arguments.length?(de=+He[0][0],be=+He[1][0],he=+He[0][1],ge=+He[1][1],Ce):[[de,he],[be,ge]]},Ce.iterations=function(He){return arguments.length?(ve=+He,Ce):ve},Ce.circularLinkGap=function(He){return arguments.length?(Te=+He,Ce):Te},Ce.nodePaddingRatio=function(He){return arguments.length?(ue=+He,Ce):ue},Ce.sortNodes=function(He){return arguments.length?(Ie=He,Ce):Ie},Ce.update=function(He){return k(He,ke),lt(He),He.links.forEach(function($e){$e.circular&&($e.circularLinkType=$e.y0+$e.y1<ge?"top":"bottom",$e.source.circularLinkType=$e.circularLinkType,$e.target.circularLinkType=$e.circularLinkType)}),H(He,ge,ke,!1),G(He,0,ke),R(He,Te,ge,ke),He},Ce},g.sankeyCenter=function(le){return le.targetLinks.length?le.depth:le.sourceLinks.length?x.min(le.sourceLinks,r)-1:0},g.sankeyLeft=function(le){return le.depth},g.sankeyRight=function(le,ue){return ue-1-le.height},g.sankeyJustify=t,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?x(ie,_("d3-array"),_("d3-collection"),_("d3-shape"),_("elementary-circuits-directed-graph")):x(g.d3=g.d3||{},g.d3,g.d3,g.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(_,ae,ie){var g,x;g=this,x=function(g,x,T,b){"use strict";function e(A){return A.target.depth}function r(A,M){return A.sourceLinks.length?A.depth:M-1}function t(A){return function(){return A}}function a(A,M){return d(A.source,M.source)||A.index-M.index}function n(A,M){return d(A.target,M.target)||A.index-M.index}function d(A,M){return A.y0-M.y0}function s(A){return A.value}function i(A){return(A.y0+A.y1)/2}function u(A){return i(A.source)*A.value}function f(A){return i(A.target)*A.value}function p(A){return A.index}function y(A){return A.nodes}function m(A){return A.links}function l(A,M){var k=A.get(M);if(!k)throw new Error("missing: "+M);return k}function w(A){return[A.source.x1,A.y0]}function v(A){return[A.target.x0,A.y1]}g.sankey=function(){var A=0,M=0,k=1,E=1,P=24,S=8,F=p,R=r,D=y,L=m,B=32;function V(){var K={nodes:D.apply(null,arguments),links:L.apply(null,arguments)};return Z(K),Y(K),ee(K),Q(K),$(K),K}function Z(K){K.nodes.forEach(function(j,H){j.index=H,j.sourceLinks=[],j.targetLinks=[]});var oe=T.map(K.nodes,F);K.links.forEach(function(j,H){j.index=H;var G=j.source,re=j.target;"object"!=typeof G&&(G=j.source=l(oe,G)),"object"!=typeof re&&(re=j.target=l(oe,re)),G.sourceLinks.push(j),re.targetLinks.push(j)})}function Y(K){K.nodes.forEach(function(oe){oe.value=Math.max(x.sum(oe.sourceLinks,s),x.sum(oe.targetLinks,s))})}function ee(K){var oe,j,H;for(oe=K.nodes,j=[],H=0;oe.length;++H,oe=j,j=[])oe.forEach(function(re){re.depth=H,re.sourceLinks.forEach(function(q){j.indexOf(q.target)<0&&j.push(q.target)})});for(oe=K.nodes,j=[],H=0;oe.length;++H,oe=j,j=[])oe.forEach(function(re){re.height=H,re.targetLinks.forEach(function(q){j.indexOf(q.source)<0&&j.push(q.source)})});var G=(k-A-P)/(H-1);K.nodes.forEach(function(re){re.x1=(re.x0=A+Math.max(0,Math.min(H-1,Math.floor(R.call(null,re,H))))*G)+P})}function Q(K){var oe=T.nest().key(function(te){return te.x0}).sortKeys(x.ascending).entries(K.nodes).map(function(te){return te.values});(function(){var te=x.max(oe,function(ue){return ue.length}),ne=2/3*(E-M)/(te-1);S>ne&&(S=ne);var le=x.min(oe,function(ue){return(E-M-(ue.length-1)*S)/x.sum(ue,s)});oe.forEach(function(ue){ue.forEach(function(de,he){de.y1=(de.y0=he)+de.value*le})}),K.links.forEach(function(ue){ue.width=ue.value*le})})(),q();for(var j=1,H=B;H>0;--H)re(j*=.99),q(),G(j),q();function G(te){oe.forEach(function(ne){ne.forEach(function(le){if(le.targetLinks.length){var ue=(x.sum(le.targetLinks,u)/x.sum(le.targetLinks,s)-i(le))*te;le.y0+=ue,le.y1+=ue}})})}function re(te){oe.slice().reverse().forEach(function(ne){ne.forEach(function(le){if(le.sourceLinks.length){var ue=(x.sum(le.sourceLinks,f)/x.sum(le.sourceLinks,s)-i(le))*te;le.y0+=ue,le.y1+=ue}})})}function q(){oe.forEach(function(te){var ne,le,ue,de=M,he=te.length;for(te.sort(d),ue=0;ue<he;++ue)(le=de-(ne=te[ue]).y0)>0&&(ne.y0+=le,ne.y1+=le),de=ne.y1+S;if((le=de-S-E)>0)for(de=ne.y0-=le,ne.y1-=le,ue=he-2;ue>=0;--ue)(le=(ne=te[ue]).y1+S-de)>0&&(ne.y0-=le,ne.y1-=le),de=ne.y0})}}function $(K){K.nodes.forEach(function(oe){oe.sourceLinks.sort(n),oe.targetLinks.sort(a)}),K.nodes.forEach(function(oe){var j=oe.y0,H=j;oe.sourceLinks.forEach(function(G){G.y0=j+G.width/2,j+=G.width}),oe.targetLinks.forEach(function(G){G.y1=H+G.width/2,H+=G.width})})}return V.update=function(K){return $(K),K},V.nodeId=function(K){return arguments.length?(F="function"==typeof K?K:t(K),V):F},V.nodeAlign=function(K){return arguments.length?(R="function"==typeof K?K:t(K),V):R},V.nodeWidth=function(K){return arguments.length?(P=+K,V):P},V.nodePadding=function(K){return arguments.length?(S=+K,V):S},V.nodes=function(K){return arguments.length?(D="function"==typeof K?K:t(K),V):D},V.links=function(K){return arguments.length?(L="function"==typeof K?K:t(K),V):L},V.size=function(K){return arguments.length?(A=M=0,k=+K[0],E=+K[1],V):[k-A,E-M]},V.extent=function(K){return arguments.length?(A=+K[0][0],k=+K[1][0],M=+K[0][1],E=+K[1][1],V):[[A,M],[k,E]]},V.iterations=function(K){return arguments.length?(B=+K,V):B},V},g.sankeyCenter=function(A){return A.targetLinks.length?A.depth:A.sourceLinks.length?x.min(A.sourceLinks,e)-1:0},g.sankeyLeft=function(A){return A.depth},g.sankeyRight=function(A,M){return M-1-A.height},g.sankeyJustify=r,g.sankeyLinkHorizontal=function(){return b.linkHorizontal().source(w).target(v)},Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?x(ie,_("d3-array"),_("d3-collection"),_("d3-shape")):x(g.d3=g.d3||{},g.d3,g.d3,g.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(_,ae,ie){(function(){var g={version:"3.8.0"},x=[].slice,T=function(pe){return x.call(pe)},b=self.document;function e(pe){return pe&&(pe.ownerDocument||pe.document||pe).documentElement}function r(pe){return pe&&(pe.ownerDocument&&pe.ownerDocument.defaultView||pe.document&&pe||pe.defaultView)}if(b)try{T(b.documentElement.childNodes)}catch(pe){T=function(O){for(var N=O.length,U=new Array(N);N--;)U[N]=O[N];return U}}if(Date.now||(Date.now=function(){return+new Date}),b)try{b.createElement("DIV").style.setProperty("opacity",0,"")}catch(pe){var t=this.Element.prototype,a=t.setAttribute,n=t.setAttributeNS,d=this.CSSStyleDeclaration.prototype,s=d.setProperty;t.setAttribute=function(O,N){a.call(this,O,N+"")},t.setAttributeNS=function(O,N,U){n.call(this,O,N,U+"")},d.setProperty=function(O,N,U){s.call(this,O,N+"",U)}}function i(pe,O){return pe<O?-1:pe>O?1:pe>=O?0:NaN}function u(pe){return null===pe?NaN:+pe}function f(pe){return!isNaN(pe)}function p(pe){return{left:function(O,N,U,X){for(arguments.length<3&&(U=0),arguments.length<4&&(X=O.length);U<X;){var fe=U+X>>>1;pe(O[fe],N)<0?U=fe+1:X=fe}return U},right:function(O,N,U,X){for(arguments.length<3&&(U=0),arguments.length<4&&(X=O.length);U<X;){var fe=U+X>>>1;pe(O[fe],N)>0?X=fe:U=fe+1}return U}}}g.ascending=i,g.descending=function(pe,O){return O<pe?-1:O>pe?1:O>=pe?0:NaN},g.min=function(pe,O){var N,U,X=-1,fe=pe.length;if(1===arguments.length){for(;++X<fe;)if(null!=(U=pe[X])&&U>=U){N=U;break}for(;++X<fe;)null!=(U=pe[X])&&N>U&&(N=U)}else{for(;++X<fe;)if(null!=(U=O.call(pe,pe[X],X))&&U>=U){N=U;break}for(;++X<fe;)null!=(U=O.call(pe,pe[X],X))&&N>U&&(N=U)}return N},g.max=function(pe,O){var N,U,X=-1,fe=pe.length;if(1===arguments.length){for(;++X<fe;)if(null!=(U=pe[X])&&U>=U){N=U;break}for(;++X<fe;)null!=(U=pe[X])&&U>N&&(N=U)}else{for(;++X<fe;)if(null!=(U=O.call(pe,pe[X],X))&&U>=U){N=U;break}for(;++X<fe;)null!=(U=O.call(pe,pe[X],X))&&U>N&&(N=U)}return N},g.extent=function(pe,O){var N,U,X,fe=-1,me=pe.length;if(1===arguments.length){for(;++fe<me;)if(null!=(U=pe[fe])&&U>=U){N=X=U;break}for(;++fe<me;)null!=(U=pe[fe])&&(N>U&&(N=U),X<U&&(X=U))}else{for(;++fe<me;)if(null!=(U=O.call(pe,pe[fe],fe))&&U>=U){N=X=U;break}for(;++fe<me;)null!=(U=O.call(pe,pe[fe],fe))&&(N>U&&(N=U),X<U&&(X=U))}return[N,X]},g.sum=function(pe,O){var N,U=0,X=pe.length,fe=-1;if(1===arguments.length)for(;++fe<X;)f(N=+pe[fe])&&(U+=N);else for(;++fe<X;)f(N=+O.call(pe,pe[fe],fe))&&(U+=N);return U},g.mean=function(pe,O){var N,U=0,X=pe.length,fe=-1,me=X;if(1===arguments.length)for(;++fe<X;)f(N=u(pe[fe]))?U+=N:--me;else for(;++fe<X;)f(N=u(O.call(pe,pe[fe],fe)))?U+=N:--me;if(me)return U/me},g.quantile=function(pe,O){var N=(pe.length-1)*O+1,U=Math.floor(N),X=+pe[U-1],fe=N-U;return fe?X+fe*(pe[U]-X):X},g.median=function(pe,O){var N,U=[],X=pe.length,fe=-1;if(1===arguments.length)for(;++fe<X;)f(N=u(pe[fe]))&&U.push(N);else for(;++fe<X;)f(N=u(O.call(pe,pe[fe],fe)))&&U.push(N);if(U.length)return g.quantile(U.sort(i),.5)},g.variance=function(pe,O){var N,U,X=pe.length,fe=0,me=0,_e=-1,Ae=0;if(1===arguments.length)for(;++_e<X;)f(N=u(pe[_e]))&&(me+=(U=N-fe)*(N-(fe+=U/++Ae)));else for(;++_e<X;)f(N=u(O.call(pe,pe[_e],_e)))&&(me+=(U=N-fe)*(N-(fe+=U/++Ae)));if(Ae>1)return me/(Ae-1)},g.deviation=function(){var pe=g.variance.apply(this,arguments);return pe&&Math.sqrt(pe)};var y=p(i);function m(pe){return pe.length}g.bisectLeft=y.left,g.bisect=g.bisectRight=y.right,g.bisector=function(pe){return p(1===pe.length?function(O,N){return i(pe(O),N)}:pe)},g.shuffle=function(pe,O,N){(fe=arguments.length)<3&&(N=pe.length,fe<2&&(O=0));for(var U,X,fe=N-O;fe;)X=Math.random()*fe--|0,U=pe[fe+O],pe[fe+O]=pe[X+O],pe[X+O]=U;return pe},g.permute=function(pe,O){for(var N=O.length,U=new Array(N);N--;)U[N]=pe[O[N]];return U},g.pairs=function(pe){for(var O=0,N=pe.length-1,U=pe[0],X=new Array(N<0?0:N);O<N;)X[O]=[U,U=pe[++O]];return X},g.transpose=function(pe){if(!(X=pe.length))return[];for(var O=-1,N=g.min(pe,m),U=new Array(N);++O<N;)for(var X,fe=-1,me=U[O]=new Array(X);++fe<X;)me[fe]=pe[fe][O];return U},g.zip=function(){return g.transpose(arguments)},g.keys=function(pe){var O=[];for(var N in pe)O.push(N);return O},g.values=function(pe){var O=[];for(var N in pe)O.push(pe[N]);return O},g.entries=function(pe){var O=[];for(var N in pe)O.push({key:N,value:pe[N]});return O},g.merge=function(pe){for(var O,N,U,X=pe.length,fe=-1,me=0;++fe<X;)me+=pe[fe].length;for(N=new Array(me);--X>=0;)for(O=(U=pe[X]).length;--O>=0;)N[--me]=U[O];return N};var l=Math.abs;function w(pe){for(var O=1;pe*O%1;)O*=10;return O}function v(pe,O){for(var N in O)Object.defineProperty(pe.prototype,N,{value:O[N],enumerable:!1})}function A(){this._=Object.create(null)}function M(pe){return"__proto__"==(pe+="")||"\0"===pe[0]?"\0"+pe:pe}function k(pe){return"\0"===(pe+="")[0]?pe.slice(1):pe}function E(pe){return M(pe)in this._}function P(pe){return(pe=M(pe))in this._&&delete this._[pe]}function S(){var pe=[];for(var O in this._)pe.push(k(O));return pe}function F(){var pe=0;for(var O in this._)++pe;return pe}function R(){for(var pe in this._)return!1;return!0}function D(){this._=Object.create(null)}function L(pe){return pe}function B(pe,O,N){return function(){var U=N.apply(O,arguments);return U===O?pe:U}}function V(pe,O){if(O in pe)return O;O=O.charAt(0).toUpperCase()+O.slice(1);for(var N=0,U=Z.length;N<U;++N){var X=Z[N]+O;if(X in pe)return X}}g.range=function(pe,O,N){if(arguments.length<3&&(N=1,arguments.length<2&&(O=pe,pe=0)),(O-pe)/N==1/0)throw new Error("infinite range");var U,X=[],fe=w(l(N)),me=-1;if(pe*=fe,O*=fe,(N*=fe)<0)for(;(U=pe+N*++me)>O;)X.push(U/fe);else for(;(U=pe+N*++me)<O;)X.push(U/fe);return X},g.map=function(pe,O){var N=new A;if(pe instanceof A)pe.forEach(function(_e,Ae){N.set(_e,Ae)});else if(Array.isArray(pe)){var U,X=-1,fe=pe.length;if(1===arguments.length)for(;++X<fe;)N.set(X,pe[X]);else for(;++X<fe;)N.set(O.call(pe,U=pe[X],X),U)}else for(var me in pe)N.set(me,pe[me]);return N},v(A,{has:E,get:function(pe){return this._[M(pe)]},set:function(pe,O){return this._[M(pe)]=O},remove:P,keys:S,values:function(){var pe=[];for(var O in this._)pe.push(this._[O]);return pe},entries:function(){var pe=[];for(var O in this._)pe.push({key:k(O),value:this._[O]});return pe},size:F,empty:R,forEach:function(pe){for(var O in this._)pe.call(this,k(O),this._[O])}}),g.nest=function(){var pe,O,N={},U=[],X=[];function fe(me,_e,Ae){if(Ae>=U.length)return O?O.call(N,_e):pe?_e.sort(pe):_e;for(var Oe,Xe,nt,dt,St=-1,Nt=_e.length,It=U[Ae++],Lt=new A;++St<Nt;)(dt=Lt.get(Oe=It(Xe=_e[St])))?dt.push(Xe):Lt.set(Oe,[Xe]);return me?(Xe=me(),nt=function(At,Zt){Xe.set(At,fe(me,Zt,Ae))}):(Xe={},nt=function(At,Zt){Xe[At]=fe(me,Zt,Ae)}),Lt.forEach(nt),Xe}return N.map=function(me,_e){return fe(_e,me,0)},N.entries=function(me){return function _e(Ae,Oe){if(Oe>=U.length)return Ae;var Xe=[],nt=X[Oe++];return Ae.forEach(function(dt,St){Xe.push({key:dt,values:_e(St,Oe)})}),nt?Xe.sort(function(dt,St){return nt(dt.key,St.key)}):Xe}(fe(g.map,me,0),0)},N.key=function(me){return U.push(me),N},N.sortKeys=function(me){return X[U.length-1]=me,N},N.sortValues=function(me){return pe=me,N},N.rollup=function(me){return O=me,N},N},g.set=function(pe){var O=new D;if(pe)for(var N=0,U=pe.length;N<U;++N)O.add(pe[N]);return O},v(D,{has:E,add:function(pe){return this._[M(pe+="")]=!0,pe},remove:P,values:S,size:F,empty:R,forEach:function(pe){for(var O in this._)pe.call(this,k(O))}}),g.behavior={},g.rebind=function(pe,O){for(var N,U=1,X=arguments.length;++U<X;)pe[N=arguments[U]]=B(pe,O,O[N]);return pe};var Z=["webkit","ms","moz","Moz","o","O"];function Y(){}function ee(){}function Q(pe){var O=[],N=new A;function U(){for(var X,fe=O,me=-1,_e=fe.length;++me<_e;)(X=fe[me].on)&&X.apply(this,arguments);return pe}return U.on=function(X,fe){var me,_e=N.get(X);return arguments.length<2?_e&&_e.on:(_e&&(_e.on=null,O=O.slice(0,me=O.indexOf(_e)).concat(O.slice(me+1)),N.remove(X)),fe&&O.push(N.set(X,{on:fe})),pe)},U}function $(){g.event.preventDefault()}function K(){for(var pe,O=g.event;pe=O.sourceEvent;)O=pe;return O}function oe(pe){for(var O=new ee,N=0,U=arguments.length;++N<U;)O[arguments[N]]=Q(O);return O.of=function(X,fe){return function(me){try{var _e=me.sourceEvent=g.event;me.target=pe,g.event=me,O[me.type].apply(X,fe)}finally{g.event=_e}}},O}g.dispatch=function(){for(var pe=new ee,O=-1,N=arguments.length;++O<N;)pe[arguments[O]]=Q(pe);return pe},ee.prototype.on=function(pe,O){var N=pe.indexOf("."),U="";if(N>=0&&(U=pe.slice(N+1),pe=pe.slice(0,N)),pe)return arguments.length<2?this[pe].on(U):this[pe].on(U,O);if(2===arguments.length){if(null==O)for(pe in this)this.hasOwnProperty(pe)&&this[pe].on(U,null);return this}},g.event=null,g.requote=function(pe){return pe.replace(j,"\\$&")};var j=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,H={}.__proto__?function(pe,O){pe.__proto__=O}:function(pe,O){for(var N in O)pe[N]=O[N]};function G(pe){return H(pe,ne),pe}var re=function(pe,O){return O.querySelector(pe)},q=function(pe,O){return O.querySelectorAll(pe)},te=function(pe,O){var N=pe.matches||pe[V(pe,"matchesSelector")];return(te=function(U,X){return N.call(U,X)})(pe,O)};"function"==typeof Sizzle&&(re=function(pe,O){return Sizzle(pe,O)[0]||null},q=Sizzle,te=Sizzle.matchesSelector),g.selection=function(){return g.select(b.documentElement)};var ne=g.selection.prototype=[];function le(pe){return"function"==typeof pe?pe:function(){return re(pe,this)}}function ue(pe){return"function"==typeof pe?pe:function(){return q(pe,this)}}ne.select=function(pe){var O,N,U,X,fe=[];pe=le(pe);for(var me=-1,_e=this.length;++me<_e;){fe.push(O=[]),O.parentNode=(U=this[me]).parentNode;for(var Ae=-1,Oe=U.length;++Ae<Oe;)(X=U[Ae])?(O.push(N=pe.call(X,X.__data__,Ae,me)),N&&"__data__"in X&&(N.__data__=X.__data__)):O.push(null)}return G(fe)},ne.selectAll=function(pe){var O,N,U=[];pe=ue(pe);for(var X=-1,fe=this.length;++X<fe;)for(var me=this[X],_e=-1,Ae=me.length;++_e<Ae;)(N=me[_e])&&(U.push(O=T(pe.call(N,N.__data__,_e,X))),O.parentNode=N);return G(U)};var de="http://www.w3.org/1999/xhtml",he={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function be(pe,O){return pe=g.ns.qualify(pe),null==O?pe.local?function(){this.removeAttributeNS(pe.space,pe.local)}:function(){this.removeAttribute(pe)}:"function"==typeof O?pe.local?function(){var N=O.apply(this,arguments);null==N?this.removeAttributeNS(pe.space,pe.local):this.setAttributeNS(pe.space,pe.local,N)}:function(){var N=O.apply(this,arguments);null==N?this.removeAttribute(pe):this.setAttribute(pe,N)}:pe.local?function(){this.setAttributeNS(pe.space,pe.local,O)}:function(){this.setAttribute(pe,O)}}function ge(pe){return pe.trim().replace(/\s+/g," ")}function we(pe){return new RegExp("(?:^|\\s+)"+g.requote(pe)+"(?:\\s+|$)","g")}function ke(pe){return(pe+"").trim().split(/^|\s+/)}function De(pe,O){var N=(pe=ke(pe).map(Ee)).length;return"function"==typeof O?function(){for(var U=-1,X=O.apply(this,arguments);++U<N;)pe[U](this,X)}:function(){for(var U=-1;++U<N;)pe[U](this,O)}}function Ee(pe){var O=we(pe);return function(N,U){if(X=N.classList)return U?X.add(pe):X.remove(pe);var X=N.getAttribute("class")||"";U?(O.lastIndex=0,O.test(X)||N.setAttribute("class",ge(X+" "+pe))):N.setAttribute("class",ge(X.replace(O," ")))}}function Re(pe,O,N){return null==O?function(){this.style.removeProperty(pe)}:"function"==typeof O?function(){var U=O.apply(this,arguments);null==U?this.style.removeProperty(pe):this.style.setProperty(pe,U,N)}:function(){this.style.setProperty(pe,O,N)}}function ve(pe,O){return null==O?function(){delete this[pe]}:"function"==typeof O?function(){var N=O.apply(this,arguments);null==N?delete this[pe]:this[pe]=N}:function(){this[pe]=O}}function Te(pe){return"function"==typeof pe?pe:(pe=g.ns.qualify(pe)).local?function(){return this.ownerDocument.createElementNS(pe.space,pe.local)}:function(){var O=this.ownerDocument,N=this.namespaceURI;return N===de&&O.documentElement.namespaceURI===de?O.createElement(pe):O.createElementNS(N,pe)}}function Ie(){var pe=this.parentNode;pe&&pe.removeChild(this)}function Ce(pe){return{__data__:pe}}function Pe(pe){return function(){return te(this,pe)}}function Ve(pe){return arguments.length||(pe=i),function(O,N){return O&&N?pe(O.__data__,N.__data__):!O-!N}}function qe(pe,O){for(var N=0,U=pe.length;N<U;N++)for(var X,fe=pe[N],me=0,_e=fe.length;me<_e;me++)(X=fe[me])&&O(X,me,N);return pe}function Je(pe){return H(pe,lt),pe}g.ns={prefix:he,qualify:function(pe){var O=pe.indexOf(":"),N=pe;return O>=0&&"xmlns"!==(N=pe.slice(0,O))&&(pe=pe.slice(O+1)),he.hasOwnProperty(N)?{space:he[N],local:pe}:pe}},ne.attr=function(pe,O){if(arguments.length<2){if("string"==typeof pe){var N=this.node();return(pe=g.ns.qualify(pe)).local?N.getAttributeNS(pe.space,pe.local):N.getAttribute(pe)}for(O in pe)this.each(be(O,pe[O]));return this}return this.each(be(pe,O))},ne.classed=function(pe,O){if(arguments.length<2){if("string"==typeof pe){var N=this.node(),U=(pe=ke(pe)).length,X=-1;if(O=N.classList){for(;++X<U;)if(!O.contains(pe[X]))return!1}else for(O=N.getAttribute("class");++X<U;)if(!we(pe[X]).test(O))return!1;return!0}for(O in pe)this.each(De(O,pe[O]));return this}return this.each(De(pe,O))},ne.style=function(pe,O,N){var U=arguments.length;if(U<3){if("string"!=typeof pe){for(N in U<2&&(O=""),pe)this.each(Re(N,pe[N],O));return this}if(U<2){var X=this.node();return r(X).getComputedStyle(X,null).getPropertyValue(pe)}N=""}return this.each(Re(pe,O,N))},ne.property=function(pe,O){if(arguments.length<2){if("string"==typeof pe)return this.node()[pe];for(O in pe)this.each(ve(O,pe[O]));return this}return this.each(ve(pe,O))},ne.text=function(pe){return arguments.length?this.each("function"==typeof pe?function(){var O=pe.apply(this,arguments);this.textContent=null==O?"":O}:null==pe?function(){this.textContent=""}:function(){this.textContent=pe}):this.node().textContent},ne.html=function(pe){return arguments.length?this.each("function"==typeof pe?function(){var O=pe.apply(this,arguments);this.innerHTML=null==O?"":O}:null==pe?function(){this.innerHTML=""}:function(){this.innerHTML=pe}):this.node().innerHTML},ne.append=function(pe){return pe=Te(pe),this.select(function(){return this.appendChild(pe.apply(this,arguments))})},ne.insert=function(pe,O){return pe=Te(pe),O=le(O),this.select(function(){return this.insertBefore(pe.apply(this,arguments),O.apply(this,arguments)||null)})},ne.remove=function(){return this.each(Ie)},ne.data=function(pe,O){var N,U,X=-1,fe=this.length;if(!arguments.length){for(pe=new Array(fe=(N=this[0]).length);++X<fe;)(U=N[X])&&(pe[X]=U.__data__);return pe}function me(Xe,nt){var dt,St,Nt,It=Xe.length,Lt=nt.length,At=Math.min(It,Lt),Zt=new Array(Lt),Gt=new Array(Lt),$t=new Array(It);if(O){var mn,En=new A,Vn=new Array(It);for(dt=-1;++dt<It;)(St=Xe[dt])&&(En.has(mn=O.call(St,St.__data__,dt))?$t[dt]=St:En.set(mn,St),Vn[dt]=mn);for(dt=-1;++dt<Lt;)(St=En.get(mn=O.call(nt,Nt=nt[dt],dt)))?!0!==St&&(Zt[dt]=St,St.__data__=Nt):Gt[dt]=Ce(Nt),En.set(mn,!0);for(dt=-1;++dt<It;)dt in Vn&&!0!==En.get(Vn[dt])&&($t[dt]=Xe[dt])}else{for(dt=-1;++dt<At;)Nt=nt[dt],(St=Xe[dt])?(St.__data__=Nt,Zt[dt]=St):Gt[dt]=Ce(Nt);for(;dt<Lt;++dt)Gt[dt]=Ce(nt[dt]);for(;dt<It;++dt)$t[dt]=Xe[dt]}Gt.update=Zt,Gt.parentNode=Zt.parentNode=$t.parentNode=Xe.parentNode,_e.push(Gt),Ae.push(Zt),Oe.push($t)}var _e=Je([]),Ae=G([]),Oe=G([]);if("function"==typeof pe)for(;++X<fe;)me(N=this[X],pe.call(N,N.parentNode.__data__,X));else for(;++X<fe;)me(N=this[X],pe);return Ae.enter=function(){return _e},Ae.exit=function(){return Oe},Ae},ne.datum=function(pe){return arguments.length?this.property("__data__",pe):this.property("__data__")},ne.filter=function(pe){var O,N,U,X=[];"function"!=typeof pe&&(pe=Pe(pe));for(var fe=0,me=this.length;fe<me;fe++){X.push(O=[]),O.parentNode=(N=this[fe]).parentNode;for(var _e=0,Ae=N.length;_e<Ae;_e++)(U=N[_e])&&pe.call(U,U.__data__,_e,fe)&&O.push(U)}return G(X)},ne.order=function(){for(var pe=-1,O=this.length;++pe<O;)for(var N,U=this[pe],X=U.length-1,fe=U[X];--X>=0;)(N=U[X])&&(fe&&fe!==N.nextSibling&&fe.parentNode.insertBefore(N,fe),fe=N);return this},ne.sort=function(pe){pe=Ve.apply(this,arguments);for(var O=-1,N=this.length;++O<N;)this[O].sort(pe);return this.order()},ne.each=function(pe){return qe(this,function(O,N,U){pe.call(O,O.__data__,N,U)})},ne.call=function(pe){var O=T(arguments);return pe.apply(O[0]=this,O),this},ne.empty=function(){return!this.node()},ne.node=function(){for(var pe=0,O=this.length;pe<O;pe++)for(var N=this[pe],U=0,X=N.length;U<X;U++){var fe=N[U];if(fe)return fe}return null},ne.size=function(){var pe=0;return qe(this,function(){++pe}),pe};var lt=[];function He(pe){var O,N;return function(U,X,fe){var me,_e=pe[fe].update,Ae=_e.length;for(fe!=N&&(N=fe,O=0),X>=O&&(O=X+1);!(me=_e[O])&&++O<Ae;);return me}}function $e(pe,O,N){var U="__on"+pe,X=pe.indexOf("."),fe=tt;X>0&&(pe=pe.slice(0,X));var me=et.get(pe);function _e(){var Ae=this[U];Ae&&(this.removeEventListener(pe,Ae,Ae.$),delete this[U])}return me&&(pe=me,fe=ft),X?O?function(){var Ae=fe(O,T(arguments));_e.call(this),this.addEventListener(pe,this[U]=Ae,Ae.$=N),Ae._=O}:_e:O?Y:function(){var Ae,Oe=new RegExp("^__on([^.]+)"+g.requote(pe)+"$");for(var Xe in this)if(Ae=Xe.match(Oe)){var nt=this[Xe];this.removeEventListener(Ae[1],nt,nt.$),delete this[Xe]}}}g.selection.enter=Je,g.selection.enter.prototype=lt,lt.append=ne.append,lt.empty=ne.empty,lt.node=ne.node,lt.call=ne.call,lt.size=ne.size,lt.select=function(pe){for(var O,N,U,X,fe,me=[],_e=-1,Ae=this.length;++_e<Ae;){U=(X=this[_e]).update,me.push(O=[]),O.parentNode=X.parentNode;for(var Oe=-1,Xe=X.length;++Oe<Xe;)(fe=X[Oe])?(O.push(U[Oe]=N=pe.call(X.parentNode,fe.__data__,Oe,_e)),N.__data__=fe.__data__):O.push(null)}return G(me)},lt.insert=function(pe,O){return arguments.length<2&&(O=He(this)),ne.insert.call(this,pe,O)},g.select=function(pe){var O;return"string"==typeof pe?(O=[re(pe,b)]).parentNode=b.documentElement:(O=[pe]).parentNode=e(pe),G([O])},g.selectAll=function(pe){var O;return"string"==typeof pe?(O=T(q(pe,b))).parentNode=b.documentElement:(O=T(pe)).parentNode=null,G([O])},ne.on=function(pe,O,N){var U=arguments.length;if(U<3){if("string"!=typeof pe){for(N in U<2&&(O=!1),pe)this.each($e(N,pe[N],O));return this}if(U<2)return(U=this.node()["__on"+pe])&&U._;N=!1}return this.each($e(pe,O,N))};var et=g.map({mouseenter:"mouseover",mouseleave:"mouseout"});function tt(pe,O){return function(N){var U=g.event;g.event=N,O[0]=this.__data__;try{pe.apply(this,O)}finally{g.event=U}}}function ft(pe,O){var N=tt(pe,O);return function(U){var X=U.relatedTarget;X&&(X===this||8&X.compareDocumentPosition(this))||N.call(this,U)}}b&&et.forEach(function(pe){"on"+pe in b&&et.remove(pe)});var bt,Ct=0;function Vt(pe){var O=".dragsuppress-"+ ++Ct,N="click"+O,U=g.select(r(pe)).on("touchmove"+O,$).on("dragstart"+O,$).on("selectstart"+O,$);if(null==bt&&(bt=!("onselectstart"in pe)&&V(pe.style,"userSelect")),bt){var X=e(pe).style,fe=X[bt];X[bt]="none"}return function(me){if(U.on(O,null),bt&&(X[bt]=fe),me){var _e=function(){U.on(N,null)};U.on(N,function(){$(),_e()},!0),setTimeout(_e,0)}}}g.mouse=function(pe){return ht(pe,K())};var Ft=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ht(pe,O){O.changedTouches&&(O=O.changedTouches[0]);var N=pe.ownerSVGElement||pe;if(N.createSVGPoint){var U=N.createSVGPoint();if(Ft<0){var X=r(pe);if(X.scrollX||X.scrollY){var fe=(N=g.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ft=!(fe.f||fe.e),N.remove()}}return Ft?(U.x=O.pageX,U.y=O.pageY):(U.x=O.clientX,U.y=O.clientY),[(U=U.matrixTransform(pe.getScreenCTM().inverse())).x,U.y]}var me=pe.getBoundingClientRect();return[O.clientX-me.left-pe.clientLeft,O.clientY-me.top-pe.clientTop]}function ut(){return g.event.changedTouches[0].identifier}g.touch=function(pe,O,N){if(arguments.length<3&&(N=O,O=K().changedTouches),O)for(var U,X=0,fe=O.length;X<fe;++X)if((U=O[X]).identifier===N)return ht(pe,U)},g.behavior.drag=function(){var pe=oe(X,"drag","dragstart","dragend"),O=null,N=fe(Y,g.mouse,r,"mousemove","mouseup"),U=fe(ut,g.touch,L,"touchmove","touchend");function X(){this.on("mousedown.drag",N).on("touchstart.drag",U)}function fe(me,_e,Ae,Oe,Xe){return function(){var nt,dt=this,St=g.event.target.correspondingElement||g.event.target,Nt=dt.parentNode,It=pe.of(dt,arguments),Lt=0,At=me(),Zt=".drag"+(null==At?"":"-"+At),Gt=g.select(Ae(St)).on(Oe+Zt,En).on(Xe+Zt,Vn),$t=Vt(St),mn=_e(Nt,At);function En(){var Nn,pr,hr=_e(Nt,At);hr&&(Lt|=(Nn=hr[0]-mn[0])|(pr=hr[1]-mn[1]),mn=hr,It({type:"drag",x:hr[0]+nt[0],y:hr[1]+nt[1],dx:Nn,dy:pr}))}function Vn(){_e(Nt,At)&&(Gt.on(Oe+Zt,null).on(Xe+Zt,null),$t(Lt),It({type:"dragend"}))}nt=O?[(nt=O.apply(dt,arguments)).x-mn[0],nt.y-mn[1]]:[0,0],It({type:"dragstart"})}}return X.origin=function(me){return arguments.length?(O=me,X):O},g.rebind(X,pe,"on")},g.touches=function(pe,O){return arguments.length<2&&(O=K().touches),O?T(O).map(function(N){var U=ht(pe,N);return U.identifier=N.identifier,U}):[]};var Rt=1e-6,nn=Math.PI,cn=2*nn,Ze=cn-Rt,Qe=nn/2,Ge=nn/180,rt=180/nn;function Le(pe){return pe>1?Qe:pe<-1?-Qe:Math.asin(pe)}function ze(pe){return((pe=Math.exp(pe))+1/pe)/2}var je=Math.SQRT2;g.interpolateZoom=function(pe,O){var N,U,X=pe[0],fe=pe[1],me=pe[2],Oe=O[2],Xe=O[0]-X,nt=O[1]-fe,dt=Xe*Xe+nt*nt;if(dt<1e-12)U=Math.log(Oe/me)/je,N=function(Zt){return[X+Zt*Xe,fe+Zt*nt,me*Math.exp(je*Zt*U)]};else{var St=Math.sqrt(dt),Nt=(Oe*Oe-me*me+4*dt)/(2*me*2*St),It=(Oe*Oe-me*me-4*dt)/(2*Oe*2*St),Lt=Math.log(Math.sqrt(Nt*Nt+1)-Nt),At=Math.log(Math.sqrt(It*It+1)-It);U=(At-Lt)/je,N=function(Zt){var Gt,Vn,$t=Zt*U,mn=ze(Lt),En=me/(2*St)*(mn*(Gt=je*$t+Lt,((Gt=Math.exp(2*Gt))-1)/(Gt+1))-(Vn=Lt,((Vn=Math.exp(Vn))-1/Vn)/2));return[X+En*Xe,fe+En*nt,me*mn/ze(je*$t+Lt)]}}return N.duration=1e3*U,N},g.behavior.zoom=function(){var pe,O,N,U,X,fe,me,_e,Ae,Oe={x:0,y:0,k:1},Xe=[960,500],nt=mt,dt=250,St=0,Nt="mousedown.zoom",It="mousemove.zoom",Lt="mouseup.zoom",At="touchstart.zoom",Zt=oe(Gt,"zoomstart","zoom","zoomend");function Gt(ar){ar.on(Nt,br).on(st+".zoom",ci).on("dblclick.zoom",Si).on(At,oi)}function $t(ar){return[(ar[0]-Oe.x)/Oe.k,(ar[1]-Oe.y)/Oe.k]}function mn(ar){Oe.k=Math.max(nt[0],Math.min(nt[1],ar))}function En(ar,jr){var gi;Oe.x+=ar[0]-(jr=[(gi=jr)[0]*Oe.k+Oe.x,gi[1]*Oe.k+Oe.y])[0],Oe.y+=ar[1]-jr[1]}function Vn(ar,jr,gi,ui){ar.__chart__={x:Oe.x,y:Oe.y,k:Oe.k},mn(Math.pow(2,ui)),En(O=jr,gi),ar=g.select(ar),dt>0&&(ar=ar.transition().duration(dt)),ar.call(Gt.event)}function Nn(){me&&me.domain(fe.range().map(function(ar){return(ar-Oe.x)/Oe.k}).map(fe.invert)),Ae&&Ae.domain(_e.range().map(function(ar){return(ar-Oe.y)/Oe.k}).map(_e.invert))}function pr(ar){St++||ar({type:"zoomstart"})}function hr(ar){Nn(),ar({type:"zoom",scale:Oe.k,translate:[Oe.x,Oe.y]})}function Er(ar){--St||(ar({type:"zoomend"}),O=null)}function br(){var ar=this,jr=Zt.of(ar,arguments),gi=0,ui=g.select(r(ar)).on(It,ia).on(Lt,yi),Ti=$t(g.mouse(ar)),Fi=Vt(ar);function ia(){gi=1,En(g.mouse(ar),Ti),hr(jr)}function yi(){ui.on(It,null).on(Lt,null),Fi(gi),Er(jr)}hl.call(ar),pr(jr)}function oi(){var ar,jr=this,gi=Zt.of(jr,arguments),ui={},Ti=0,Fi=".zoom-"+g.event.changedTouches[0].identifier,ia="touchmove"+Fi,yi="touchend"+Fi,qi=[],Gi=g.select(jr),sa=Vt(jr);function Wi(){var Oo=g.touches(jr);return ar=Oe.k,Oo.forEach(function(ao){ao.identifier in ui&&(ui[ao.identifier]=$t(ao))}),Oo}function ua(){var Oo=g.event.target;g.select(Oo).on(ia,ka).on(yi,Wa),qi.push(Oo);for(var ao=g.event.changedTouches,Ja=0,ho=ao.length;Ja<ho;++Ja)ui[ao[Ja].identifier]=null;var Mo=Wi(),ys=Date.now();if(1===Mo.length){if(ys-X<500){var jo=Mo[0];Vn(jr,jo,ui[jo.identifier],Math.floor(Math.log(Oe.k)/Math.LN2)+1),$()}X=ys}else if(Mo.length>1){var Ys=Mo[1],Ql=(jo=Mo[0])[0]-Ys[0],Rl=jo[1]-Ys[1];Ti=Ql*Ql+Rl*Rl}}function ka(){var Oo,ao,Ja,ho,Mo=g.touches(jr);hl.call(jr);for(var ys=0,jo=Mo.length;ys<jo;++ys,ho=null)if(ho=ui[(Ja=Mo[ys]).identifier]){if(ao)break;Oo=Ja,ao=ho}if(ho){var Ys=(Ys=Ja[0]-Oo[0])*Ys+(Ys=Ja[1]-Oo[1])*Ys,Ql=Ti&&Math.sqrt(Ys/Ti);Oo=[(Oo[0]+Ja[0])/2,(Oo[1]+Ja[1])/2],ao=[(ao[0]+ho[0])/2,(ao[1]+ho[1])/2],mn(Ql*ar)}X=null,En(Oo,ao),hr(gi)}function Wa(){if(g.event.touches.length){for(var Oo=g.event.changedTouches,ao=0,Ja=Oo.length;ao<Ja;++ao)delete ui[Oo[ao].identifier];for(var ho in ui)return void Wi()}g.selectAll(qi).on(Fi,null),Gi.on(Nt,br).on(At,oi),sa(),Er(gi)}ua(),pr(gi),Gi.on(Nt,null).on(At,ua)}function ci(){var ar=Zt.of(this,arguments);U?clearTimeout(U):(hl.call(this),pe=$t(O=N||g.mouse(this)),pr(ar)),U=setTimeout(function(){U=null,Er(ar)},50),$(),mn(Math.pow(2,.002*Ne())*Oe.k),En(O,pe),hr(ar)}function Si(){var ar=g.mouse(this),jr=Math.log(Oe.k)/Math.LN2;Vn(this,ar,$t(ar),g.event.shiftKey?Math.ceil(jr)-1:Math.floor(jr)+1)}return st||(st="onwheel"in b?(Ne=function(){return-g.event.deltaY*(g.event.deltaMode?120:1)},"wheel"):"onmousewheel"in b?(Ne=function(){return g.event.wheelDelta},"mousewheel"):(Ne=function(){return-g.event.detail},"MozMousePixelScroll")),Gt.event=function(ar){ar.each(function(){var jr=Zt.of(this,arguments),gi=Oe;el?g.select(this).transition().each("start.zoom",function(){Oe=this.__chart__||{x:0,y:0,k:1},pr(jr)}).tween("zoom:zoom",function(){var ui=Xe[0],Fi=O?O[0]:ui/2,ia=O?O[1]:Xe[1]/2,yi=g.interpolateZoom([(Fi-Oe.x)/Oe.k,(ia-Oe.y)/Oe.k,ui/Oe.k],[(Fi-gi.x)/gi.k,(ia-gi.y)/gi.k,ui/gi.k]);return function(qi){var Gi=yi(qi),sa=ui/Gi[2];this.__chart__=Oe={x:Fi-Gi[0]*sa,y:ia-Gi[1]*sa,k:sa},hr(jr)}}).each("interrupt.zoom",function(){Er(jr)}).each("end.zoom",function(){Er(jr)}):(this.__chart__=Oe,pr(jr),hr(jr),Er(jr))})},Gt.translate=function(ar){return arguments.length?(Oe={x:+ar[0],y:+ar[1],k:Oe.k},Nn(),Gt):[Oe.x,Oe.y]},Gt.scale=function(ar){return arguments.length?(Oe={x:Oe.x,y:Oe.y,k:null},mn(+ar),Nn(),Gt):Oe.k},Gt.scaleExtent=function(ar){return arguments.length?(nt=null==ar?mt:[+ar[0],+ar[1]],Gt):nt},Gt.center=function(ar){return arguments.length?(N=ar&&[+ar[0],+ar[1]],Gt):N},Gt.size=function(ar){return arguments.length?(Xe=ar&&[+ar[0],+ar[1]],Gt):Xe},Gt.duration=function(ar){return arguments.length?(dt=+ar,Gt):dt},Gt.x=function(ar){return arguments.length?(me=ar,fe=ar.copy(),Oe={x:0,y:0,k:1},Gt):me},Gt.y=function(ar){return arguments.length?(Ae=ar,_e=ar.copy(),Oe={x:0,y:0,k:1},Gt):Ae},g.rebind(Gt,Zt,"on")};var Ne,st,mt=[0,1/0];function Tt(){}function xt(pe,O,N){return this instanceof xt?(this.h=+pe,this.s=+O,void(this.l=+N)):arguments.length<2?pe instanceof xt?new xt(pe.h,pe.s,pe.l):Dn(""+pe,_n,xt):new xt(pe,O,N)}g.color=Tt,Tt.prototype.toString=function(){return this.rgb()+""},g.hsl=xt;var zt=xt.prototype=new Tt;function gt(pe,O,N){var U,X;function fe(me){return Math.round(255*((_e=me)>360?_e-=360:_e<0&&(_e+=360),_e<60?U+(X-U)*_e/60:_e<180?X:_e<240?U+(X-U)*(240-_e)/60:U));var _e}return pe=isNaN(pe)?0:(pe%=360)<0?pe+360:pe,O=isNaN(O)||O<0?0:O>1?1:O,U=2*(N=N<0?0:N>1?1:N)-(X=N<=.5?N*(1+O):N+O-N*O),new Jt(fe(pe+120),fe(pe),fe(pe-120))}function Bt(pe,O,N){return this instanceof Bt?(this.h=+pe,this.c=+O,void(this.l=+N)):arguments.length<2?pe instanceof Bt?new Bt(pe.h,pe.c,pe.l):Ue(pe instanceof Mt?pe.l:(pe=Tn((pe=g.rgb(pe)).r,pe.g,pe.b)).l,pe.a,pe.b):new Bt(pe,O,N)}zt.brighter=function(pe){return pe=Math.pow(.7,arguments.length?pe:1),new xt(this.h,this.s,this.l/pe)},zt.darker=function(pe){return pe=Math.pow(.7,arguments.length?pe:1),new xt(this.h,this.s,pe*this.l)},zt.rgb=function(){return gt(this.h,this.s,this.l)},g.hcl=Bt;var jt=Bt.prototype=new Tt;function it(pe,O,N){return isNaN(pe)&&(pe=0),isNaN(O)&&(O=0),new Mt(N,Math.cos(pe*=Ge)*O,Math.sin(pe)*O)}function Mt(pe,O,N){return this instanceof Mt?(this.l=+pe,this.a=+O,void(this.b=+N)):arguments.length<2?pe instanceof Mt?new Mt(pe.l,pe.a,pe.b):pe instanceof Bt?it(pe.h,pe.c,pe.l):Tn((pe=Jt(pe)).r,pe.g,pe.b):new Mt(pe,O,N)}jt.brighter=function(pe){return new Bt(this.h,this.c,Math.min(100,this.l+qt*(arguments.length?pe:1)))},jt.darker=function(pe){return new Bt(this.h,this.c,Math.max(0,this.l-qt*(arguments.length?pe:1)))},jt.rgb=function(){return it(this.h,this.c,this.l).rgb()},g.lab=Mt;var qt=18,Wt=Mt.prototype=new Tt;function an(pe,O,N){var U=(pe+16)/116,X=U+O/500,fe=U-N/200;return new Jt(Ht(3.2404542*(X=.95047*yt(X))-1.5371385*(U=1*yt(U))-.4985314*(fe=1.08883*yt(fe))),Ht(-.969266*X+1.8760108*U+.041556*fe),Ht(.0556434*X-.2040259*U+1.0572252*fe))}function Ue(pe,O,N){return pe>0?new Bt(Math.atan2(N,O)*rt,Math.sqrt(O*O+N*N),pe):new Bt(NaN,NaN,pe)}function yt(pe){return pe>.206893034?pe*pe*pe:(pe-4/29)/7.787037}function Dt(pe){return pe>.008856?Math.pow(pe,1/3):7.787037*pe+4/29}function Ht(pe){return Math.round(255*(pe<=.00304?12.92*pe:1.055*Math.pow(pe,1/2.4)-.055))}function Jt(pe,O,N){return this instanceof Jt?(this.r=~~pe,this.g=~~O,void(this.b=~~N)):arguments.length<2?pe instanceof Jt?new Jt(pe.r,pe.g,pe.b):Dn(""+pe,Jt,gt):new Jt(pe,O,N)}function gn(pe){return new Jt(pe>>16,pe>>8&255,255&pe)}function Qt(pe){return gn(pe)+""}Wt.brighter=function(pe){return new Mt(Math.min(100,this.l+qt*(arguments.length?pe:1)),this.a,this.b)},Wt.darker=function(pe){return new Mt(Math.max(0,this.l-qt*(arguments.length?pe:1)),this.a,this.b)},Wt.rgb=function(){return an(this.l,this.a,this.b)},g.rgb=Jt;var sn=Jt.prototype=new Tt;function hn(pe){return pe<16?"0"+Math.max(0,pe).toString(16):Math.min(255,pe).toString(16)}function Dn(pe,O,N){var U,X,fe,me=0,_e=0,Ae=0;if(U=/([a-z]+)\((.*)\)/.exec(pe=pe.toLowerCase()))switch(X=U[2].split(","),U[1]){case"hsl":return N(parseFloat(X[0]),parseFloat(X[1])/100,parseFloat(X[2])/100);case"rgb":return O(kn(X[0]),kn(X[1]),kn(X[2]))}return(fe=Fn.get(pe))?O(fe.r,fe.g,fe.b):(null==pe||"#"!==pe.charAt(0)||isNaN(fe=parseInt(pe.slice(1),16))||(4===pe.length?(me=(3840&fe)>>4,me|=me>>4,_e=240&fe,_e|=_e>>4,Ae=15&fe,Ae|=Ae<<4):7===pe.length&&(me=(16711680&fe)>>16,_e=(65280&fe)>>8,Ae=255&fe)),O(me,_e,Ae))}function _n(pe,O,N){var U,X,fe=Math.min(pe/=255,O/=255,N/=255),me=Math.max(pe,O,N),_e=me-fe,Ae=(me+fe)/2;return _e?(X=Ae<.5?_e/(me+fe):_e/(2-me-fe),U=pe==me?(O-N)/_e+(O<N?6:0):O==me?(N-pe)/_e+2:(pe-O)/_e+4,U*=60):(U=NaN,X=Ae>0&&Ae<1?0:U),new xt(U,X,Ae)}function Tn(pe,O,N){var U=Dt((.4124564*(pe=wn(pe))+.3575761*(O=wn(O))+.1804375*(N=wn(N)))/.95047),X=Dt((.2126729*pe+.7151522*O+.072175*N)/1);return Mt(116*X-16,500*(U-X),200*(X-Dt((.0193339*pe+.119192*O+.9503041*N)/1.08883)))}function wn(pe){return(pe/=255)<=.04045?pe/12.92:Math.pow((pe+.055)/1.055,2.4)}function kn(pe){var O=parseFloat(pe);return"%"===pe.charAt(pe.length-1)?Math.round(2.55*O):O}sn.brighter=function(pe){pe=Math.pow(.7,arguments.length?pe:1);var O=this.r,N=this.g,U=this.b,X=30;return O||N||U?(O&&O<X&&(O=X),N&&N<X&&(N=X),U&&U<X&&(U=X),new Jt(Math.min(255,O/pe),Math.min(255,N/pe),Math.min(255,U/pe))):new Jt(X,X,X)},sn.darker=function(pe){return new Jt((pe=Math.pow(.7,arguments.length?pe:1))*this.r,pe*this.g,pe*this.b)},sn.hsl=function(){return _n(this.r,this.g,this.b)},sn.toString=function(){return"#"+hn(this.r)+hn(this.g)+hn(this.b)};var Fn=g.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function On(pe){return"function"==typeof pe?pe:function(){return pe}}function Qn(pe){return function(O,N,U){return 2===arguments.length&&"function"==typeof N&&(U=N,N=null),sr(O,N,pe,U)}}function sr(pe,O,N,U){var Xe,X={},fe=g.dispatch("beforesend","progress","load","error"),me={},_e=new XMLHttpRequest,Ae=null;function Oe(){var Xe,dt,St,nt=_e.status;if(!nt&&((St=(dt=_e).responseType)&&"text"!==St?dt.response:dt.responseText)||nt>=200&&nt<300||304===nt){try{Xe=N.call(X,_e)}catch(dt){return void fe.error.call(X,dt)}fe.load.call(X,Xe)}else fe.error.call(X,_e)}return self.XDomainRequest&&!("withCredentials"in _e)&&/^(http(s)?:)?\/\//.test(pe)&&(_e=new XDomainRequest),"onload"in _e?_e.onload=_e.onerror=Oe:_e.onreadystatechange=function(){_e.readyState>3&&Oe()},_e.onprogress=function(Xe){var nt=g.event;g.event=Xe;try{fe.progress.call(X,_e)}finally{g.event=nt}},X.header=function(Xe,nt){return Xe=(Xe+"").toLowerCase(),arguments.length<2?me[Xe]:(null==nt?delete me[Xe]:me[Xe]=nt+"",X)},X.mimeType=function(Xe){return arguments.length?(O=null==Xe?null:Xe+"",X):O},X.responseType=function(Xe){return arguments.length?(Ae=Xe,X):Ae},X.response=function(Xe){return N=Xe,X},["get","post"].forEach(function(Xe){X[Xe]=function(){return X.send.apply(X,[Xe].concat(T(arguments)))}}),X.send=function(Xe,nt,dt){if(2===arguments.length&&"function"==typeof nt&&(dt=nt,nt=null),_e.open(Xe,pe,!0),null==O||"accept"in me||(me.accept=O+",*/*"),_e.setRequestHeader)for(var St in me)_e.setRequestHeader(St,me[St]);return null!=O&&_e.overrideMimeType&&_e.overrideMimeType(O),null!=Ae&&(_e.responseType=Ae),null!=dt&&X.on("error",dt).on("load",function(Nt){dt(null,Nt)}),fe.beforesend.call(X,_e),_e.send(null==nt?null:nt),X},X.abort=function(){return _e.abort(),X},g.rebind(X,fe,"on"),null==U?X:X.get(1===(Xe=U).length?function(nt,dt){Xe(null==nt?dt:null)}:Xe)}Fn.forEach(function(pe,O){Fn.set(pe,gn(O))}),g.functor=On,g.xhr=Qn(L),g.dsv=function(pe,O){var N=new RegExp('["'+pe+"\n]"),U=pe.charCodeAt(0);function X(Oe,Xe,nt){arguments.length<3&&(nt=Xe,Xe=null);var dt=sr(Oe,O,null==Xe?fe:me(Xe),nt);return dt.row=function(St){return arguments.length?dt.response(null==(Xe=St)?fe:me(St)):Xe},dt}function fe(Oe){return X.parse(Oe.responseText)}function me(Oe){return function(Xe){return X.parse(Xe.responseText,Oe)}}function _e(Oe){return Oe.map(Ae).join(pe)}function Ae(Oe){return N.test(Oe)?'"'+Oe.replace(/\"/g,'""')+'"':Oe}return X.parse=function(Oe,Xe){var nt;return X.parseRows(Oe,function(dt,St){if(nt)return nt(dt,St-1);var Nt=function(It){for(var Lt={},At=dt.length,Zt=0;Zt<At;++Zt)Lt[dt[Zt]]=It[Zt];return Lt};nt=Xe?function(It,Lt){return Xe(Nt(It),Lt)}:Nt})},X.parseRows=function(Oe,Xe){var nt,dt,St={},Nt={},It=[],Lt=Oe.length,At=0,Zt=0;function Gt(){if(At>=Lt)return Nt;if(dt)return dt=!1,St;var mn=At;if(34===Oe.charCodeAt(mn)){for(var En=mn;En++<Lt;)if(34===Oe.charCodeAt(En)){if(34!==Oe.charCodeAt(En+1))break;++En}return At=En+2,13===(Vn=Oe.charCodeAt(En+1))?(dt=!0,10===Oe.charCodeAt(En+2)&&++At):10===Vn&&(dt=!0),Oe.slice(mn+1,En).replace(/""/g,'"')}for(;At<Lt;){var Vn,Nn=1;if(10===(Vn=Oe.charCodeAt(At++)))dt=!0;else if(13===Vn)dt=!0,10===Oe.charCodeAt(At)&&(++At,++Nn);else if(Vn!==U)continue;return Oe.slice(mn,At-Nn)}return Oe.slice(mn)}for(;(nt=Gt())!==Nt;){for(var $t=[];nt!==St&&nt!==Nt;)$t.push(nt),nt=Gt();Xe&&null==($t=Xe($t,Zt++))||It.push($t)}return It},X.format=function(Oe){if(Array.isArray(Oe[0]))return X.formatRows(Oe);var Xe=new D,nt=[];return Oe.forEach(function(dt){for(var St in dt)Xe.has(St)||nt.push(Xe.add(St))}),[nt.map(Ae).join(pe)].concat(Oe.map(function(dt){return nt.map(function(St){return Ae(dt[St])}).join(pe)})).join("\n")},X.formatRows=function(Oe){return Oe.map(_e).join("\n")},X},g.csv=g.dsv(",","text/csv"),g.tsv=g.dsv("\t","text/tab-separated-values");var Mr,Wr,mr,Or,vr=this[V(this,"requestAnimationFrame")]||function(pe){setTimeout(pe,17)};function Xn(pe,O,N){var U=arguments.length;U<2&&(O=0),U<3&&(N=Date.now());var fe={c:pe,t:N+O,n:null};return Wr?Wr.n=fe:Mr=fe,Wr=fe,mr||(Or=clearTimeout(Or),mr=1,vr(jn)),fe}function jn(){var pe=nr(),O=Ur()-pe;O>24?(isFinite(O)&&(clearTimeout(Or),Or=setTimeout(jn,O)),mr=0):(mr=1,vr(jn))}function nr(){for(var pe=Date.now(),O=Mr;O;)pe>=O.t&&O.c(pe-O.t)&&(O.c=null),O=O.n;return pe}function Ur(){for(var pe,O=Mr,N=1/0;O;)O.c?(O.t<N&&(N=O.t),O=(pe=O).n):O=pe?pe.n=O.n:Mr=O.n;return Wr=pe,N}function Jn(pe){return pe[0]}function _r(pe){return pe[1]}function Hr(pe){for(var O,N,U,X=pe.length,fe=[0,1],me=2,_e=2;_e<X;_e++){for(;me>1&&((N=pe[fe[me-1]])[0]-(O=pe[fe[me-2]])[0])*((U=pe[_e])[1]-O[1])-(N[1]-O[1])*(U[0]-O[0])<=0;)--me;fe[me++]=_e}return fe.slice(0,me)}function Lr(pe,O){return pe[0]-O[0]||pe[1]-O[1]}g.timer=function(){Xn.apply(this,arguments)},g.timer.flush=function(){nr(),Ur()},g.round=function(pe,O){return O?Math.round(pe*(O=Math.pow(10,O)))/O:Math.round(pe)},g.geom={},g.geom.hull=function(pe){var O=Jn,N=_r;if(arguments.length)return U(pe);function U(X){if(X.length<3)return[];var fe,me=On(O),_e=On(N),Ae=X.length,Oe=[],Xe=[];for(fe=0;fe<Ae;fe++)Oe.push([+me.call(this,X[fe],fe),+_e.call(this,X[fe],fe),fe]);for(Oe.sort(Lr),fe=0;fe<Ae;fe++)Xe.push([Oe[fe][0],-Oe[fe][1]]);var nt=Hr(Oe),dt=Hr(Xe),St=dt[0]===nt[0],Nt=dt[dt.length-1]===nt[nt.length-1],It=[];for(fe=nt.length-1;fe>=0;--fe)It.push(X[Oe[nt[fe]][2]]);for(fe=+St;fe<dt.length-Nt;++fe)It.push(X[Oe[dt[fe]][2]]);return It}return U.x=function(X){return arguments.length?(O=X,U):O},U.y=function(X){return arguments.length?(N=X,U):N},U},g.geom.polygon=function(pe){return H(pe,$r),pe};var $r=g.geom.polygon.prototype=[];function dn(pe,O,N){return(N[0]-O[0])*(pe[1]-O[1])<(N[1]-O[1])*(pe[0]-O[0])}function Ut(pe,O,N,U){var X=pe[0],fe=N[0],me=O[0]-X,_e=U[0]-fe,Ae=pe[1],Oe=N[1],Xe=O[1]-Ae,nt=U[1]-Oe,dt=(_e*(Ae-Oe)-nt*(X-fe))/(nt*me-_e*Xe);return[X+dt*me,Ae+dt*Xe]}function Kt(pe){var O=pe[0],N=pe[pe.length-1];return!(O[0]-N[0]||O[1]-N[1])}$r.area=function(){for(var pe,O=-1,N=this.length,U=this[N-1],X=0;++O<N;)X+=(pe=U)[1]*(U=this[O])[0]-pe[0]*U[1];return.5*X},$r.centroid=function(pe){var O,N,U=-1,X=this.length,fe=0,me=0,_e=this[X-1];for(arguments.length||(pe=-1/(6*this.area()));++U<X;)fe+=((O=_e)[0]+(_e=this[U])[0])*(N=O[0]*_e[1]-_e[0]*O[1]),me+=(O[1]+_e[1])*N;return[fe*pe,me*pe]},$r.clip=function(pe){for(var O,N,U,X,fe,me,_e=Kt(pe),Ae=-1,Oe=this.length-Kt(this),Xe=this[Oe-1];++Ae<Oe;){for(O=pe.slice(),pe.length=0,X=this[Ae],fe=O[(U=O.length-_e)-1],N=-1;++N<U;)dn(me=O[N],Xe,X)?(dn(fe,Xe,X)||pe.push(Ut(fe,me,Xe,X)),pe.push(me)):dn(fe,Xe,X)&&pe.push(Ut(fe,me,Xe,X)),fe=me;_e&&pe.push(pe[0]),Xe=X}return pe};var Mn,Bn,cr,ur,Rn,Cn=[],Un=[];function Yn(){$a(this),this.edge=this.site=this.circle=null}function Hn(pe){var O=Cn.pop()||new Yn;return O.site=pe,O}function Zn(pe){Vr(pe),cr.remove(pe),Cn.push(pe),$a(pe)}function Sr(pe){var O=pe.circle,N=O.x,U=O.cy,X={x:N,y:U},fe=pe.P,me=pe.N,_e=[pe];Zn(pe);for(var Ae=fe;Ae.circle&&l(N-Ae.circle.x)<Rt&&l(U-Ae.circle.cy)<Rt;)fe=Ae.P,_e.unshift(Ae),Zn(Ae),Ae=fe;_e.unshift(Ae),Vr(Ae);for(var Oe=me;Oe.circle&&l(N-Oe.circle.x)<Rt&&l(U-Oe.circle.cy)<Rt;)me=Oe.N,_e.push(Oe),Zn(Oe),Oe=me;_e.push(Oe),Vr(Oe);var Xe,nt=_e.length;for(Xe=1;Xe<nt;++Xe)Ni((Oe=_e[Xe]).edge,(Ae=_e[Xe-1]).site,Oe.site,X);(Oe=_e[nt-1]).edge=lr((Ae=_e[0]).site,Oe.site,null,X),Ir(Ae),Ir(Oe)}function Ar(pe){for(var O,N,U,X,fe=pe.x,me=pe.y,_e=cr._;_e;)if((U=gr(_e,me)-fe)>Rt)_e=_e.L;else{if(!((X=fe-Rr(_e,me))>Rt)){U>-Rt?(O=_e.P,N=_e):X>-Rt?(O=_e,N=_e.N):O=N=_e;break}if(!_e.R){O=_e;break}_e=_e.R}var Ae=Hn(pe);if(cr.insert(O,Ae),O||N){if(O===N)return Vr(O),N=Hn(O.site),cr.insert(Ae,N),Ae.edge=N.edge=lr(O.site,Ae.site),Ir(O),void Ir(N);if(N){Vr(O),Vr(N);var Oe=O.site,Xe=Oe.x,nt=Oe.y,dt=pe.x-Xe,St=pe.y-nt,Nt=N.site,It=Nt.x-Xe,Lt=Nt.y-nt,At=2*(dt*Lt-St*It),Zt=dt*dt+St*St,Gt=It*It+Lt*Lt,$t={x:(Lt*Zt-St*Gt)/At+Xe,y:(dt*Gt-It*Zt)/At+nt};Ni(N.edge,Oe,Nt,$t),Ae.edge=lr(Oe,pe,null,$t),N.edge=lr(pe,Nt,null,$t),Ir(O),Ir(N)}else Ae.edge=lr(O.site,Ae.site)}}function gr(pe,O){var N=pe.site,U=N.x,X=N.y,fe=X-O;if(!fe)return U;var me=pe.P;if(!me)return-1/0;var _e=(N=me.site).x,Ae=N.y,Oe=Ae-O;if(!Oe)return _e;var Xe=_e-U,nt=1/fe-1/Oe,dt=Xe/Oe;return nt?(-dt+Math.sqrt(dt*dt-2*nt*(Xe*Xe/(-2*Oe)-Ae+Oe/2+X-fe/2)))/nt+U:(U+_e)/2}function Rr(pe,O){var N=pe.N;if(N)return gr(N,O);var U=pe.site;return U.y===O?U.x:1/0}function ir(pe){this.site=pe,this.edges=[]}function rr(pe,O){return O.angle-pe.angle}function wr(){$a(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ir(pe){var O=pe.P,N=pe.N;if(O&&N){var U=O.site,X=pe.site,fe=N.site;if(U!==fe){var me=X.x,_e=X.y,Ae=U.x-me,Oe=U.y-_e,Xe=fe.x-me,nt=2*(Ae*(Lt=fe.y-_e)-Oe*Xe);if(!(nt>=-1e-12)){var dt=Ae*Ae+Oe*Oe,St=Xe*Xe+Lt*Lt,Nt=(Lt*dt-Oe*St)/nt,It=(Ae*St-Xe*dt)/nt,Lt=It+_e,At=Un.pop()||new wr;At.arc=pe,At.site=X,At.x=Nt+me,At.y=Lt+Math.sqrt(Nt*Nt+It*It),At.cy=Lt,pe.circle=At;for(var Zt=null,Gt=Rn._;Gt;)if(At.y<Gt.y||At.y===Gt.y&&At.x<=Gt.x){if(!Gt.L){Zt=Gt.P;break}Gt=Gt.L}else{if(!Gt.R){Zt=Gt;break}Gt=Gt.R}Rn.insert(Zt,At),Zt||(ur=At)}}}}function Vr(pe){var O=pe.circle;O&&(O.P||(ur=O.N),Rn.remove(O),Un.push(O),$a(O),pe.circle=null)}function Ci(pe,O){var N=pe.b;if(N)return!0;var U,X,fe=pe.a,me=O[0][0],_e=O[1][0],Ae=O[0][1],Oe=O[1][1],Xe=pe.l,nt=pe.r,dt=Xe.x,St=Xe.y,Nt=nt.x,It=nt.y,Lt=(dt+Nt)/2;if(It===St){if(Lt<me||Lt>=_e)return;if(dt>Nt){if(fe){if(fe.y>=Oe)return}else fe={x:Lt,y:Ae};N={x:Lt,y:Oe}}else{if(fe){if(fe.y<Ae)return}else fe={x:Lt,y:Oe};N={x:Lt,y:Ae}}}else if(X=(St+It)/2-(U=(dt-Nt)/(It-St))*Lt,U<-1||U>1)if(dt>Nt){if(fe){if(fe.y>=Oe)return}else fe={x:(Ae-X)/U,y:Ae};N={x:(Oe-X)/U,y:Oe}}else{if(fe){if(fe.y<Ae)return}else fe={x:(Oe-X)/U,y:Oe};N={x:(Ae-X)/U,y:Ae}}else if(St<It){if(fe){if(fe.x>=_e)return}else fe={x:me,y:U*me+X};N={x:_e,y:U*_e+X}}else{if(fe){if(fe.x<me)return}else fe={x:_e,y:U*_e+X};N={x:me,y:U*me+X}}return pe.a=fe,pe.b=N,!0}function pi(pe,O){this.l=pe,this.r=O,this.a=this.b=null}function lr(pe,O,N,U){var X=new pi(pe,O);return Mn.push(X),N&&Ni(X,pe,O,N),U&&Ni(X,O,pe,U),Bn[pe.i].edges.push(new wa(X,pe,O)),Bn[O.i].edges.push(new wa(X,O,pe)),X}function bi(pe,O,N){var U=new pi(pe,null);return U.a=O,U.b=N,Mn.push(U),U}function Ni(pe,O,N,U){pe.a||pe.b?pe.l===N?pe.b=U:pe.a=U:(pe.a=U,pe.l=O,pe.r=N)}function wa(pe,O,N){var U=pe.a,X=pe.b;this.edge=pe,this.site=O,this.angle=N?Math.atan2(N.y-O.y,N.x-O.x):pe.l===O?Math.atan2(X.x-U.x,U.y-X.y):Math.atan2(U.x-X.x,X.y-U.y)}function Io(){this._=null}function $a(pe){pe.U=pe.C=pe.L=pe.R=pe.P=pe.N=null}function Ya(pe,O){var N=O,U=O.R,X=N.U;X?X.L===N?X.L=U:X.R=U:pe._=U,U.U=X,N.U=U,N.R=U.L,N.R&&(N.R.U=N),U.L=N}function Xi(pe,O){var N=O,U=O.L,X=N.U;X?X.L===N?X.L=U:X.R=U:pe._=U,U.U=X,N.U=U,N.L=U.R,N.L&&(N.L.U=N),U.R=N}function Oa(pe){for(;pe.L;)pe=pe.L;return pe}function Ds(pe,O){var N,U,X,fe=pe.sort(Bo).pop();for(Mn=[],Bn=new Array(pe.length),cr=new Io,Rn=new Io;;)if(X=ur,fe&&(!X||fe.y<X.y||fe.y===X.y&&fe.x<X.x))fe.x===N&&fe.y===U||(Bn[fe.i]=new ir(fe),Ar(fe),N=fe.x,U=fe.y),fe=pe.pop();else{if(!X)break;Sr(X.arc)}O&&(function(_e){for(var Ae,Oe,Xe,nt,dt,St=Mn,Nt=(Oe=_e[0][0],Xe=_e[0][1],nt=_e[1][0],dt=_e[1][1],function(Lt){var At,Zt=Lt.a,Gt=Lt.b,$t=Zt.x,mn=Zt.y,En=0,Vn=1,Nn=Gt.x-$t,pr=Gt.y-mn;if(At=Oe-$t,Nn||!(At>0)){if(At/=Nn,Nn<0){if(At<En)return;At<Vn&&(Vn=At)}else if(Nn>0){if(At>Vn)return;At>En&&(En=At)}if(At=nt-$t,Nn||!(At<0)){if(At/=Nn,Nn<0){if(At>Vn)return;At>En&&(En=At)}else if(Nn>0){if(At<En)return;At<Vn&&(Vn=At)}if(At=Xe-mn,pr||!(At>0)){if(At/=pr,pr<0){if(At<En)return;At<Vn&&(Vn=At)}else if(pr>0){if(At>Vn)return;At>En&&(En=At)}if(At=dt-mn,pr||!(At<0)){if(At/=pr,pr<0){if(At>Vn)return;At>En&&(En=At)}else if(pr>0){if(At<En)return;At<Vn&&(Vn=At)}return En>0&&(Lt.a={x:$t+En*Nn,y:mn+En*pr}),Vn<1&&(Lt.b={x:$t+Vn*Nn,y:mn+Vn*pr}),Lt}}}}}),It=St.length;It--;)(!Ci(Ae=St[It],_e)||!Nt(Ae)||l(Ae.a.x-Ae.b.x)<Rt&&l(Ae.a.y-Ae.b.y)<Rt)&&(Ae.a=Ae.b=null,St.splice(It,1))}(O),function(_e){for(var Ae,Oe,Xe,nt,dt,St,Nt,It,Lt,At,Zt=_e[0][0],Gt=_e[1][0],$t=_e[0][1],mn=_e[1][1],En=Bn,Vn=En.length;Vn--;)if((dt=En[Vn])&&dt.prepare())for(It=(Nt=dt.edges).length,St=0;St<It;)Xe=(At=Nt[St].end()).x,nt=At.y,Ae=(Lt=Nt[++St%It].start()).x,Oe=Lt.y,(l(Xe-Ae)>Rt||l(nt-Oe)>Rt)&&(Nt.splice(St,0,new wa(bi(dt.site,At,l(Xe-Zt)<Rt&&mn-nt>Rt?{x:Zt,y:l(Ae-Zt)<Rt?Oe:mn}:l(nt-mn)<Rt&&Gt-Xe>Rt?{x:l(Oe-mn)<Rt?Ae:Gt,y:mn}:l(Xe-Gt)<Rt&&nt-$t>Rt?{x:Gt,y:l(Ae-Gt)<Rt?Oe:$t}:l(nt-$t)<Rt&&Xe-Zt>Rt?{x:l(Oe-$t)<Rt?Ae:Zt,y:$t}:null),dt.site,null)),++It)}(O));var me={cells:Bn,edges:Mn};return cr=Rn=Mn=Bn=null,me}function Bo(pe,O){return O.y-pe.y||O.x-pe.x}ir.prototype.prepare=function(){for(var pe,O=this.edges,N=O.length;N--;)(pe=O[N].edge).b&&pe.a||O.splice(N,1);return O.sort(rr),O.length},wa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Io.prototype={insert:function(pe,O){var N,U,X;if(pe){if(O.P=pe,O.N=pe.N,pe.N&&(pe.N.P=O),pe.N=O,pe.R){for(pe=pe.R;pe.L;)pe=pe.L;pe.L=O}else pe.R=O;N=pe}else this._?(pe=Oa(this._),O.P=null,O.N=pe,pe.P=pe.L=O,N=pe):(O.P=O.N=null,this._=O,N=null);for(O.L=O.R=null,O.U=N,O.C=!0,pe=O;N&&N.C;)N===(U=N.U).L?(X=U.R)&&X.C?(N.C=X.C=!1,U.C=!0,pe=U):(pe===N.R&&(Ya(this,N),N=(pe=N).U),N.C=!1,U.C=!0,Xi(this,U)):(X=U.L)&&X.C?(N.C=X.C=!1,U.C=!0,pe=U):(pe===N.L&&(Xi(this,N),N=(pe=N).U),N.C=!1,U.C=!0,Ya(this,U)),N=pe.U;this._.C=!1},remove:function(pe){pe.N&&(pe.N.P=pe.P),pe.P&&(pe.P.N=pe.N),pe.N=pe.P=null;var O,N,U,X=pe.U,fe=pe.L,me=pe.R;if(N=fe?me?Oa(me):fe:me,X?X.L===pe?X.L=N:X.R=N:this._=N,fe&&me?(U=N.C,N.C=pe.C,N.L=fe,fe.U=N,N!==me?(X=N.U,N.U=pe.U,X.L=pe=N.R,N.R=me,me.U=N):(N.U=X,X=N,pe=N.R)):(U=pe.C,pe=N),pe&&(pe.U=X),!U)if(pe&&pe.C)pe.C=!1;else{do{if(pe===this._)break;if(pe===X.L){if((O=X.R).C&&(O.C=!1,X.C=!0,Ya(this,X),O=X.R),O.L&&O.L.C||O.R&&O.R.C){O.R&&O.R.C||(O.L.C=!1,O.C=!0,Xi(this,O),O=X.R),O.C=X.C,X.C=O.R.C=!1,Ya(this,X),pe=this._;break}}else if((O=X.L).C&&(O.C=!1,X.C=!0,Xi(this,X),O=X.L),O.L&&O.L.C||O.R&&O.R.C){O.L&&O.L.C||(O.R.C=!1,O.C=!0,Ya(this,O),O=X.L),O.C=X.C,X.C=O.L.C=!1,Xi(this,X),pe=this._;break}O.C=!0,pe=X,X=X.U}while(!pe.C);pe&&(pe.C=!1)}}},g.geom.voronoi=function(pe){var O=Jn,N=_r,U=O,X=N,fe=sl;if(pe)return me(pe);function me(Ae){var Oe=new Array(Ae.length),Xe=fe[0][0],nt=fe[0][1],dt=fe[1][0],St=fe[1][1];return Ds(_e(Ae),fe).cells.forEach(function(Nt,It){var Lt=Nt.edges,At=Nt.site;(Oe[It]=Lt.length?Lt.map(function(Zt){var Gt=Zt.start();return[Gt.x,Gt.y]}):At.x>=Xe&&At.x<=dt&&At.y>=nt&&At.y<=St?[[Xe,St],[dt,St],[dt,nt],[Xe,nt]]:[]).point=Ae[It]}),Oe}function _e(Ae){return Ae.map(function(Oe,Xe){return{x:Math.round(U(Oe,Xe)/Rt)*Rt,y:Math.round(X(Oe,Xe)/Rt)*Rt,i:Xe}})}return me.links=function(Ae){return Ds(_e(Ae)).edges.filter(function(Oe){return Oe.l&&Oe.r}).map(function(Oe){return{source:Ae[Oe.l.i],target:Ae[Oe.r.i]}})},me.triangles=function(Ae){var Oe=[];return Ds(_e(Ae)).cells.forEach(function(Xe,nt){for(var dt,St,Nt,It,Lt=Xe.site,At=Xe.edges.sort(rr),Zt=-1,Gt=At.length,$t=At[Gt-1].edge,mn=$t.l===Lt?$t.r:$t.l;++Zt<Gt;)dt=mn,mn=($t=At[Zt].edge).l===Lt?$t.r:$t.l,nt<dt.i&&nt<mn.i&&((St=Lt).x-(It=mn).x)*((Nt=dt).y-St.y)-(St.x-Nt.x)*(It.y-St.y)<0&&Oe.push([Ae[nt],Ae[dt.i],Ae[mn.i]])}),Oe},me.x=function(Ae){return arguments.length?(U=On(O=Ae),me):O},me.y=function(Ae){return arguments.length?(X=On(N=Ae),me):N},me.clipExtent=function(Ae){return arguments.length?(fe=null==Ae?sl:Ae,me):fe===sl?null:fe},me.size=function(Ae){return arguments.length?me.clipExtent(Ae&&[[0,0],Ae]):fe===sl?null:fe&&fe[1]},me};var sl=[[-1e6,-1e6],[1e6,1e6]];function Zo(pe){return pe.x}function as(pe){return pe.y}function ll(pe,O,N,U,X,fe){if(!pe(O,N,U,X,fe)){var me=.5*(N+X),_e=.5*(U+fe),Ae=O.nodes;Ae[0]&&ll(pe,Ae[0],N,U,me,_e),Ae[1]&&ll(pe,Ae[1],me,U,X,_e),Ae[2]&&ll(pe,Ae[2],N,_e,me,fe),Ae[3]&&ll(pe,Ae[3],me,_e,X,fe)}}function Bi(pe,O,N,U,X,fe,me){var _e,Ae=1/0;return function Oe(Xe,nt,dt,St,Nt){if(!(nt>fe||dt>me||St<U||Nt<X)){if(It=Xe.point){var It,Lt=O-Xe.x,At=N-Xe.y,Zt=Lt*Lt+At*At;if(Zt<Ae){var Gt=Math.sqrt(Ae=Zt);U=O-Gt,X=N-Gt,fe=O+Gt,me=N+Gt,_e=It}}for(var $t=Xe.nodes,mn=.5*(nt+St),En=.5*(dt+Nt),Vn=(N>=En)<<1|O>=mn,Nn=Vn+4;Vn<Nn;++Vn)if(Xe=$t[3&Vn])switch(3&Vn){case 0:Oe(Xe,nt,dt,mn,En);break;case 1:Oe(Xe,mn,dt,St,En);break;case 2:Oe(Xe,nt,En,mn,Nt);break;case 3:Oe(Xe,mn,En,St,Nt)}}}(pe,U,X,fe,me),_e}function Ws(pe,O){pe=g.rgb(pe),O=g.rgb(O);var N=pe.r,U=pe.g,X=pe.b,fe=O.r-N,me=O.g-U,_e=O.b-X;return function(Ae){return"#"+hn(Math.round(N+fe*Ae))+hn(Math.round(U+me*Ae))+hn(Math.round(X+_e*Ae))}}function Is(pe,O){var N,U={},X={};for(N in pe)N in O?U[N]=Lo(pe[N],O[N]):X[N]=pe[N];for(N in O)N in pe||(X[N]=O[N]);return function(fe){for(N in U)X[N]=U[N](fe);return X}}function to(pe,O){return pe=+pe,O=+O,function(N){return pe*(1-N)+O*N}}function fa(pe,O){var N,U,X,fe=Xo.lastIndex=ps.lastIndex=0,me=-1,_e=[],Ae=[];for(pe+="",O+="";(N=Xo.exec(pe))&&(U=ps.exec(O));)(X=U.index)>fe&&(X=O.slice(fe,X),_e[me]?_e[me]+=X:_e[++me]=X),(N=N[0])===(U=U[0])?_e[me]?_e[me]+=U:_e[++me]=U:(_e[++me]=null,Ae.push({i:me,x:to(N,U)})),fe=ps.lastIndex;return fe<O.length&&(X=O.slice(fe),_e[me]?_e[me]+=X:_e[++me]=X),_e.length<2?Ae[0]?(O=Ae[0].x,function(Oe){return O(Oe)+""}):function(){return O}:(O=Ae.length,function(Oe){for(var Xe,nt=0;nt<O;++nt)_e[(Xe=Ae[nt]).i]=Xe.x(Oe);return _e.join("")})}g.geom.delaunay=function(pe){return g.geom.voronoi().triangles(pe)},g.geom.quadtree=function(pe,O,N,U,X){var fe,me=Jn,_e=_r;if(fe=arguments.length)return me=Zo,_e=as,3===fe&&(X=N,U=O,N=O=0),Ae(pe);function Ae(Oe){var Xe,nt,dt,St,Nt,It,Lt,At,Zt,Gt=On(me),$t=On(_e);if(null!=O)It=O,Lt=N,At=U,Zt=X;else if(At=Zt=-(It=Lt=1/0),nt=[],dt=[],Nt=Oe.length,fe)for(St=0;St<Nt;++St)(Xe=Oe[St]).x<It&&(It=Xe.x),Xe.y<Lt&&(Lt=Xe.y),Xe.x>At&&(At=Xe.x),Xe.y>Zt&&(Zt=Xe.y),nt.push(Xe.x),dt.push(Xe.y);else for(St=0;St<Nt;++St){var mn=+Gt(Xe=Oe[St],St),En=+$t(Xe,St);mn<It&&(It=mn),En<Lt&&(Lt=En),mn>At&&(At=mn),En>Zt&&(Zt=En),nt.push(mn),dt.push(En)}var Vn=At-It,Nn=Zt-Lt;function pr(br,oi,ci,Si,ar,jr,gi,ui){if(!isNaN(ci)&&!isNaN(Si))if(br.leaf){var Ti=br.x,Fi=br.y;if(null!=Ti)if(l(Ti-ci)+l(Fi-Si)<.01)hr(br,oi,ci,Si,ar,jr,gi,ui);else{var ia=br.point;br.x=br.y=br.point=null,hr(br,ia,Ti,Fi,ar,jr,gi,ui),hr(br,oi,ci,Si,ar,jr,gi,ui)}else br.x=ci,br.y=Si,br.point=oi}else hr(br,oi,ci,Si,ar,jr,gi,ui)}function hr(br,oi,ci,Si,ar,jr,gi,ui){var Ti=.5*(ar+gi),Fi=.5*(jr+ui),ia=ci>=Ti,yi=Si>=Fi,qi=yi<<1|ia;br.leaf=!1,ia?ar=Ti:gi=Ti,yi?jr=Fi:ui=Fi,pr(br=br.nodes[qi]||(br.nodes[qi]={leaf:!0,nodes:[],point:null,x:null,y:null}),oi,ci,Si,ar,jr,gi,ui)}Vn>Nn?Zt=Lt+Vn:At=It+Nn;var Er={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(br){pr(Er,br,+Gt(br,++St),+$t(br,St),It,Lt,At,Zt)},visit:function(br){ll(br,Er,It,Lt,At,Zt)},find:function(br){return Bi(Er,br[0],br[1],It,Lt,At,Zt)}};if(St=-1,null==O){for(;++St<Nt;)pr(Er,Oe[St],nt[St],dt[St],It,Lt,At,Zt);--St}else Oe.forEach(Er.add);return nt=dt=Oe=Xe=null,Er}return Ae.x=function(Oe){return arguments.length?(me=Oe,Ae):me},Ae.y=function(Oe){return arguments.length?(_e=Oe,Ae):_e},Ae.extent=function(Oe){return arguments.length?(null==Oe?O=N=U=X=null:(O=+Oe[0][0],N=+Oe[0][1],U=+Oe[1][0],X=+Oe[1][1]),Ae):null==O?null:[[O,N],[U,X]]},Ae.size=function(Oe){return arguments.length?(null==Oe?O=N=U=X=null:(O=N=0,U=+Oe[0],X=+Oe[1]),Ae):null==O?null:[U-O,X-N]},Ae},g.interpolateRgb=Ws,g.interpolateObject=Is,g.interpolateNumber=to,g.interpolateString=fa;var Xo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ps=new RegExp(Xo.source,"g");function Lo(pe,O){for(var N,U=g.interpolators.length;--U>=0&&!(N=g.interpolators[U](pe,O)););return N}function lo(pe,O){var N,U=[],X=[],fe=pe.length,me=O.length,_e=Math.min(pe.length,O.length);for(N=0;N<_e;++N)U.push(Lo(pe[N],O[N]));for(;N<fe;++N)X[N]=pe[N];for(;N<me;++N)X[N]=O[N];return function(Ae){for(N=0;N<_e;++N)X[N]=U[N](Ae);return X}}g.interpolate=Lo,g.interpolators=[function(pe,O){var N=typeof O;return("string"===N?Fn.has(O.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(O)?Ws:fa:O instanceof Tt?Ws:Array.isArray(O)?lo:"object"===N&&isNaN(O)?Is:to)(pe,O)}],g.interpolateArray=lo;var uo=function(){return L},ul=g.map({linear:uo,poly:function(pe){return function(O){return Math.pow(O,pe)}},quad:function(){return Xl},cubic:function(){return $l},sin:function(){return uu},exp:function(){return Ls},circle:function(){return Ui},elastic:function(pe,O){var N;return arguments.length<2&&(O=.45),arguments.length?N=O/cn*Math.asin(1/pe):(pe=1,N=O/4),function(U){return 1+pe*Math.pow(2,-10*U)*Math.sin((U-N)*cn/O)}},back:function(pe){return pe||(pe=1.70158),function(O){return O*O*((pe+1)*O-pe)}},bounce:function(){return _o}}),lu=g.map({in:L,out:Vl,"in-out":cl,"out-in":function(pe){return cl(Vl(pe))}});function ga(pe){return function(O){return O<=0?0:O>=1?1:pe(O)}}function Vl(pe){return function(O){return 1-pe(1-O)}}function cl(pe){return function(O){return.5*(O<.5?pe(2*O):2-pe(2-2*O))}}function Xl(pe){return pe*pe}function $l(pe){return pe*pe*pe}function Ro(pe){if(pe<=0)return 0;if(pe>=1)return 1;var O=pe*pe,N=O*pe;return 4*(pe<.5?N:3*(pe-O)+N-.75)}function uu(pe){return 1-Math.cos(pe*Qe)}function Ls(pe){return Math.pow(2,10*(pe-1))}function Ui(pe){return 1-Math.sqrt(1-pe*pe)}function _o(pe){return pe<1/2.75?7.5625*pe*pe:pe<2/2.75?7.5625*(pe-=1.5/2.75)*pe+.75:pe<2.5/2.75?7.5625*(pe-=2.25/2.75)*pe+.9375:7.5625*(pe-=2.625/2.75)*pe+.984375}function co(pe,O){return O-=pe,function(N){return Math.round(pe+O*N)}}function $o(pe){var O,N,U,X=[pe.a,pe.b],fe=[pe.c,pe.d],me=fo(X),_e=Ms(X,fe),Ae=fo(((O=fe)[0]+=(U=-_e)*(N=X)[0],O[1]+=U*N[1],O))||0;X[0]*fe[1]<fe[0]*X[1]&&(X[0]*=-1,X[1]*=-1,me*=-1,_e*=-1),this.rotate=(me?Math.atan2(X[1],X[0]):Math.atan2(-fe[0],fe[1]))*rt,this.translate=[pe.e,pe.f],this.scale=[me,Ae],this.skew=Ae?Math.atan2(_e,Ae)*rt:0}function Ms(pe,O){return pe[0]*O[0]+pe[1]*O[1]}function fo(pe){var O=Math.sqrt(Ms(pe,pe));return O&&(pe[0]/=O,pe[1]/=O),O}g.ease=function(pe){var O=pe.indexOf("-"),N=O>=0?pe.slice(0,O):pe,U=O>=0?pe.slice(O+1):"in";return N=ul.get(N)||uo,ga((U=lu.get(U)||L)(N.apply(null,x.call(arguments,1))))},g.interpolateHcl=function(pe,O){pe=g.hcl(pe),O=g.hcl(O);var N=pe.h,U=pe.c,X=pe.l,fe=O.h-N,me=O.c-U,_e=O.l-X;return isNaN(me)&&(me=0,U=isNaN(U)?O.c:U),isNaN(fe)?(fe=0,N=isNaN(N)?O.h:N):fe>180?fe-=360:fe<-180&&(fe+=360),function(Ae){return it(N+fe*Ae,U+me*Ae,X+_e*Ae)+""}},g.interpolateHsl=function(pe,O){pe=g.hsl(pe),O=g.hsl(O);var N=pe.h,U=pe.s,X=pe.l,fe=O.h-N,me=O.s-U,_e=O.l-X;return isNaN(me)&&(me=0,U=isNaN(U)?O.s:U),isNaN(fe)?(fe=0,N=isNaN(N)?O.h:N):fe>180?fe-=360:fe<-180&&(fe+=360),function(Ae){return gt(N+fe*Ae,U+me*Ae,X+_e*Ae)+""}},g.interpolateLab=function(pe,O){pe=g.lab(pe),O=g.lab(O);var N=pe.l,U=pe.a,X=pe.b,fe=O.l-N,me=O.a-U,_e=O.b-X;return function(Ae){return an(N+fe*Ae,U+me*Ae,X+_e*Ae)+""}},g.interpolateRound=co,g.transform=function(pe){var O=b.createElementNS(g.ns.prefix.svg,"g");return(g.transform=function(N){if(null!=N){O.setAttribute("transform",N);var U=O.transform.baseVal.consolidate()}return new $o(U?U.matrix:Jo)})(pe)},$o.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Jo={a:1,b:0,c:0,d:1,e:0,f:0};function fi(pe){return pe.length?pe.pop()+",":""}function na(pe,O){var X,fe,me,N=[],U=[];return pe=g.transform(pe),O=g.transform(O),function(X,fe,me,_e){if(X[0]!==fe[0]||X[1]!==fe[1]){var Ae=me.push("translate(",null,",",null,")");_e.push({i:Ae-4,x:to(X[0],fe[0])},{i:Ae-2,x:to(X[1],fe[1])})}else(fe[0]||fe[1])&&me.push("translate("+fe+")")}(pe.translate,O.translate,N,U),me=N,(X=pe.rotate)!==(fe=O.rotate)?(X-fe>180?fe+=360:fe-X>180&&(X+=360),U.push({i:me.push(fi(me)+"rotate(",null,")")-2,x:to(X,fe)})):fe&&me.push(fi(me)+"rotate("+fe+")"),function(X,fe,me,_e){X!==fe?_e.push({i:me.push(fi(me)+"skewX(",null,")")-2,x:to(X,fe)}):fe&&me.push(fi(me)+"skewX("+fe+")")}(pe.skew,O.skew,N,U),function(X,fe,me,_e){if(X[0]!==fe[0]||X[1]!==fe[1]){var Ae=me.push(fi(me)+"scale(",null,",",null,")");_e.push({i:Ae-4,x:to(X[0],fe[0])},{i:Ae-2,x:to(X[1],fe[1])})}else 1===fe[0]&&1===fe[1]||me.push(fi(me)+"scale("+fe+")")}(pe.scale,O.scale,N,U),pe=O=null,function(X){for(var fe,me=-1,_e=U.length;++me<_e;)N[(fe=U[me]).i]=fe.x(X);return N.join("")}}function Za(pe,O){return O=(O-=pe=+pe)||1/O,function(N){return(N-pe)/O}}function yo(pe,O){return O=(O-=pe=+pe)||1/O,function(N){return Math.max(0,Math.min(1,(N-pe)/O))}}function ya(pe){for(var O=pe.source,N=pe.target,U=function(me,_e){if(me===_e)return me;for(var Ae=We(me),Oe=We(_e),Xe=Ae.pop(),nt=Oe.pop(),dt=null;Xe===nt;)dt=Xe,Xe=Ae.pop(),nt=Oe.pop();return dt}(O,N),X=[O];O!==U;)X.push(O=O.parent);for(var fe=X.length;N!==U;)X.splice(fe,0,N),N=N.parent;return X}function We(pe){for(var O=[],N=pe.parent;null!=N;)O.push(pe),pe=N,N=N.parent;return O.push(pe),O}function Ke(pe){pe.fixed|=2}function at(pe){pe.fixed&=-7}function pt(pe){pe.fixed|=4,pe.px=pe.x,pe.py=pe.y}function kt(pe){pe.fixed&=-5}g.interpolateTransform=na,g.layout={},g.layout.bundle=function(){return function(pe){for(var O=[],N=-1,U=pe.length;++N<U;)O.push(ya(pe[N]));return O}},g.layout.chord=function(){var pe,O,N,U,X,fe,me,_e={},Ae=0;function Oe(){var nt,dt,St,Nt,It,Lt={},At=[],Zt=g.range(U),Gt=[];for(pe=[],O=[],nt=0,Nt=-1;++Nt<U;){for(dt=0,It=-1;++It<U;)dt+=N[Nt][It];At.push(dt),Gt.push(g.range(U)),nt+=dt}for(X&&Zt.sort(function(Er,br){return X(At[Er],At[br])}),fe&&Gt.forEach(function(Er,br){Er.sort(function(oi,ci){return fe(N[br][oi],N[br][ci])})}),nt=(cn-Ae*U)/nt,dt=0,Nt=-1;++Nt<U;){for(St=dt,It=-1;++It<U;){var $t=Zt[Nt],mn=Gt[$t][It],En=N[$t][mn],Vn=dt,Nn=dt+=En*nt;Lt[$t+"-"+mn]={index:$t,subindex:mn,startAngle:Vn,endAngle:Nn,value:En}}O[$t]={index:$t,startAngle:St,endAngle:dt,value:At[$t]},dt+=Ae}for(Nt=-1;++Nt<U;)for(It=Nt-1;++It<U;){var pr=Lt[Nt+"-"+It],hr=Lt[It+"-"+Nt];(pr.value||hr.value)&&pe.push(pr.value<hr.value?{source:hr,target:pr}:{source:pr,target:hr})}me&&Xe()}function Xe(){pe.sort(function(nt,dt){return me((nt.source.value+nt.target.value)/2,(dt.source.value+dt.target.value)/2)})}return _e.matrix=function(nt){return arguments.length?(U=(N=nt)&&N.length,pe=O=null,_e):N},_e.padding=function(nt){return arguments.length?(Ae=nt,pe=O=null,_e):Ae},_e.sortGroups=function(nt){return arguments.length?(X=nt,pe=O=null,_e):X},_e.sortSubgroups=function(nt){return arguments.length?(fe=nt,pe=null,_e):fe},_e.sortChords=function(nt){return arguments.length?(me=nt,pe&&Xe(),_e):me},_e.chords=function(){return pe||Oe(),pe},_e.groups=function(){return O||Oe(),O},_e},g.layout.force=function(){var pe,O,N,U,X,fe,me={},_e=g.dispatch("start","tick","end"),Ae=[1,1],Oe=.9,Xe=vt,nt=Pt,dt=-30,St=un,Nt=.1,It=.64,Lt=[],At=[];function Zt($t){return function(mn,En,Vn,Nn){if(mn.point!==$t){var pr=mn.cx-$t.x,hr=mn.cy-$t.y,Er=Nn-En,br=pr*pr+hr*hr;if(Er*Er/It<br){if(br<St){var oi=mn.charge/br;$t.px-=pr*oi,$t.py-=hr*oi}return!0}mn.point&&br&&br<St&&($t.px-=pr*(oi=mn.pointCharge/br),$t.py-=hr*oi)}return!mn.charge}}function Gt($t){$t.px=g.event.x,$t.py=g.event.y,me.resume()}return me.tick=function(){if((N*=.99)<.005)return pe=null,_e.end({type:"end",alpha:N=0}),!0;var $t,mn,En,Vn,Nn,pr,hr,Er,br,oi=Lt.length,ci=At.length;for(mn=0;mn<ci;++mn)Vn=(En=At[mn]).source,(pr=(Er=(Nn=En.target).x-Vn.x)*Er+(br=Nn.y-Vn.y)*br)&&(Er*=pr=N*X[mn]*((pr=Math.sqrt(pr))-U[mn])/pr,br*=pr,Nn.x-=Er*(hr=Vn.weight+Nn.weight?Vn.weight/(Vn.weight+Nn.weight):.5),Nn.y-=br*hr,Vn.x+=Er*(hr=1-hr),Vn.y+=br*hr);if((hr=N*Nt)&&(Er=Ae[0]/2,br=Ae[1]/2,mn=-1,hr))for(;++mn<oi;)(En=Lt[mn]).x+=(Er-En.x)*hr,En.y+=(br-En.y)*hr;if(dt)for(function Si(ar,jr,gi){var ui=0,Ti=0;if(ar.charge=0,!ar.leaf)for(var Fi,ia=ar.nodes,yi=ia.length,qi=-1;++qi<yi;)null!=(Fi=ia[qi])&&(Si(Fi,jr,gi),ar.charge+=Fi.charge,ui+=Fi.charge*Fi.cx,Ti+=Fi.charge*Fi.cy);if(ar.point){ar.leaf||(ar.point.x+=Math.random()-.5,ar.point.y+=Math.random()-.5);var Gi=jr*gi[ar.point.index];ar.charge+=ar.pointCharge=Gi,ui+=Gi*ar.point.x,Ti+=Gi*ar.point.y}ar.cx=ui/ar.charge,ar.cy=Ti/ar.charge}($t=g.geom.quadtree(Lt),N,fe),mn=-1;++mn<oi;)(En=Lt[mn]).fixed||$t.visit(Zt(En));for(mn=-1;++mn<oi;)(En=Lt[mn]).fixed?(En.x=En.px,En.y=En.py):(En.x-=(En.px-(En.px=En.x))*Oe,En.y-=(En.py-(En.py=En.y))*Oe);_e.tick({type:"tick",alpha:N})},me.nodes=function($t){return arguments.length?(Lt=$t,me):Lt},me.links=function($t){return arguments.length?(At=$t,me):At},me.size=function($t){return arguments.length?(Ae=$t,me):Ae},me.linkDistance=function($t){return arguments.length?(Xe="function"==typeof $t?$t:+$t,me):Xe},me.distance=me.linkDistance,me.linkStrength=function($t){return arguments.length?(nt="function"==typeof $t?$t:+$t,me):nt},me.friction=function($t){return arguments.length?(Oe=+$t,me):Oe},me.charge=function($t){return arguments.length?(dt="function"==typeof $t?$t:+$t,me):dt},me.chargeDistance=function($t){return arguments.length?(St=$t*$t,me):Math.sqrt(St)},me.gravity=function($t){return arguments.length?(Nt=+$t,me):Nt},me.theta=function($t){return arguments.length?(It=$t*$t,me):Math.sqrt(It)},me.alpha=function($t){return arguments.length?($t=+$t,N?$t>0?N=$t:(pe.c=null,pe.t=NaN,pe=null,_e.end({type:"end",alpha:N=0})):$t>0&&(_e.start({type:"start",alpha:N=$t}),pe=Xn(me.tick)),me):N},me.start=function(){var $t,mn,En,Vn=Lt.length,Nn=At.length,pr=Ae[0],hr=Ae[1];for($t=0;$t<Vn;++$t)(En=Lt[$t]).index=$t,En.weight=0;for($t=0;$t<Nn;++$t)"number"==typeof(En=At[$t]).source&&(En.source=Lt[En.source]),"number"==typeof En.target&&(En.target=Lt[En.target]),++En.source.weight,++En.target.weight;for($t=0;$t<Vn;++$t)En=Lt[$t],isNaN(En.x)&&(En.x=Er("x",pr)),isNaN(En.y)&&(En.y=Er("y",hr)),isNaN(En.px)&&(En.px=En.x),isNaN(En.py)&&(En.py=En.y);if(U=[],"function"==typeof Xe)for($t=0;$t<Nn;++$t)U[$t]=+Xe.call(this,At[$t],$t);else for($t=0;$t<Nn;++$t)U[$t]=Xe;if(X=[],"function"==typeof nt)for($t=0;$t<Nn;++$t)X[$t]=+nt.call(this,At[$t],$t);else for($t=0;$t<Nn;++$t)X[$t]=nt;if(fe=[],"function"==typeof dt)for($t=0;$t<Vn;++$t)fe[$t]=+dt.call(this,Lt[$t],$t);else for($t=0;$t<Vn;++$t)fe[$t]=dt;function Er(br,oi){if(!mn){for(mn=new Array(Vn),jr=0;jr<Vn;++jr)mn[jr]=[];for(jr=0;jr<Nn;++jr){var ci=At[jr];mn[ci.source.index].push(ci.target),mn[ci.target.index].push(ci.source)}}for(var Si,ar=mn[$t],jr=-1,gi=ar.length;++jr<gi;)if(!isNaN(Si=ar[jr][br]))return Si;return Math.random()*oi}return me.resume()},me.resume=function(){return me.alpha(.1)},me.stop=function(){return me.alpha(0)},me.drag=function(){if(O||(O=g.behavior.drag().origin(L).on("dragstart.force",Ke).on("drag.force",Gt).on("dragend.force",at)),!arguments.length)return O;this.on("mouseover.force",pt).on("mouseout.force",kt).call(O)},g.rebind(me,_e,"on")};var vt=20,Pt=1,un=1/0;function fn(pe,O){return g.rebind(pe,O,"sort","children","value"),pe.nodes=pe,pe.links=zn,pe}function on(pe,O){for(var N=[pe];null!=(pe=N.pop());)if(O(pe),(X=pe.children)&&(U=X.length))for(var U,X;--U>=0;)N.push(X[U])}function pn(pe,O){for(var N=[pe],U=[];null!=(pe=N.pop());)if(U.push(pe),(fe=pe.children)&&(X=fe.length))for(var X,fe,me=-1;++me<X;)N.push(fe[me]);for(;null!=(pe=U.pop());)O(pe)}function An(pe){return pe.children}function Ln(pe){return pe.value}function Pn(pe,O){return O.value-pe.value}function zn(pe){return g.merge(pe.map(function(O){return(O.children||[]).map(function(N){return{source:O,target:N}})}))}g.layout.hierarchy=function(){var pe=Pn,O=An,N=Ln;function U(X){var fe,me=[X],_e=[];for(X.depth=0;null!=(fe=me.pop());)if(_e.push(fe),(Oe=O.call(U,fe,fe.depth))&&(Ae=Oe.length)){for(var Ae,Oe,Xe;--Ae>=0;)me.push(Xe=Oe[Ae]),Xe.parent=fe,Xe.depth=fe.depth+1;N&&(fe.value=0),fe.children=Oe}else N&&(fe.value=+N.call(U,fe,fe.depth)||0),delete fe.children;return pn(X,function(nt){var dt,St;pe&&(dt=nt.children)&&dt.sort(pe),N&&(St=nt.parent)&&(St.value+=nt.value)}),_e}return U.sort=function(X){return arguments.length?(pe=X,U):pe},U.children=function(X){return arguments.length?(O=X,U):O},U.value=function(X){return arguments.length?(N=X,U):N},U.revalue=function(X){return N&&(on(X,function(fe){fe.children&&(fe.value=0)}),pn(X,function(fe){var me;fe.children||(fe.value=+N.call(U,fe,fe.depth)||0),(me=fe.parent)&&(me.value+=fe.value)})),X},U},g.layout.partition=function(){var pe=g.layout.hierarchy(),O=[1,1];function N(U,X){var fe=pe.call(this,U,X);return function me(_e,Ae,Oe,Xe){var nt=_e.children;if(_e.x=Ae,_e.y=_e.depth*Xe,_e.dx=Oe,_e.dy=Xe,nt&&(dt=nt.length)){var dt,St,Nt,It=-1;for(Oe=_e.value?Oe/_e.value:0;++It<dt;)me(St=nt[It],Ae,Nt=St.value*Oe,Xe),Ae+=Nt}}(fe[0],0,O[0],O[1]/function me(_e){var Ae=_e.children,Oe=0;if(Ae&&(Xe=Ae.length))for(var Xe,nt=-1;++nt<Xe;)Oe=Math.max(Oe,me(Ae[nt]));return 1+Oe}(fe[0])),fe}return N.size=function(U){return arguments.length?(O=U,N):O},fn(N,pe)},g.layout.pie=function(){var pe=Number,O=yr,N=0,U=cn,X=0;function fe(me){var _e,Ae=me.length,Oe=me.map(function(Zt,Gt){return+pe.call(fe,Zt,Gt)}),Xe=+("function"==typeof N?N.apply(this,arguments):N),nt=("function"==typeof U?U.apply(this,arguments):U)-Xe,dt=Math.min(Math.abs(nt)/Ae,+("function"==typeof X?X.apply(this,arguments):X)),St=dt*(nt<0?-1:1),Nt=g.sum(Oe),It=Nt?(nt-Ae*St)/Nt:0,Lt=g.range(Ae),At=[];return null!=O&&Lt.sort(O===yr?function(Zt,Gt){return Oe[Gt]-Oe[Zt]}:function(Zt,Gt){return O(me[Zt],me[Gt])}),Lt.forEach(function(Zt){At[Zt]={data:me[Zt],value:_e=Oe[Zt],startAngle:Xe,endAngle:Xe+=_e*It+St,padAngle:dt}}),At}return fe.value=function(me){return arguments.length?(pe=me,fe):pe},fe.sort=function(me){return arguments.length?(O=me,fe):O},fe.startAngle=function(me){return arguments.length?(N=me,fe):N},fe.endAngle=function(me){return arguments.length?(U=me,fe):U},fe.padAngle=function(me){return arguments.length?(X=me,fe):X},fe};var yr={};function Dr(pe){return pe.x}function Yr(pe){return pe.y}function Kr(pe,O,N){pe.y0=O,pe.y=N}g.layout.stack=function(){var pe=L,O=Li,N=Pi,U=Kr,X=Dr,fe=Yr;function me(_e,Ae){if(!(dt=_e.length))return _e;var Oe=_e.map(function(Zt,Gt){return pe.call(me,Zt,Gt)}),Xe=Oe.map(function(Zt){return Zt.map(function(Gt,$t){return[X.call(me,Gt,$t),fe.call(me,Gt,$t)]})}),nt=O.call(me,Xe,Ae);Oe=g.permute(Oe,nt),Xe=g.permute(Xe,nt);var dt,St,Nt,It,Lt=N.call(me,Xe,Ae),At=Oe[0].length;for(Nt=0;Nt<At;++Nt)for(U.call(me,Oe[0][Nt],It=Lt[Nt],Xe[0][Nt][1]),St=1;St<dt;++St)U.call(me,Oe[St][Nt],It+=Xe[St-1][Nt][1],Xe[St][Nt][1]);return _e}return me.values=function(_e){return arguments.length?(pe=_e,me):pe},me.order=function(_e){return arguments.length?(O="function"==typeof _e?_e:si.get(_e)||Li,me):O},me.offset=function(_e){return arguments.length?(N="function"==typeof _e?_e:Jr.get(_e)||Pi,me):N},me.x=function(_e){return arguments.length?(X=_e,me):X},me.y=function(_e){return arguments.length?(fe=_e,me):fe},me.out=function(_e){return arguments.length?(U=_e,me):U},me};var si=g.map({"inside-out":function(pe){var O,N,U=pe.length,X=pe.map(Aa),fe=pe.map(ra),me=g.range(U).sort(function(nt,dt){return X[nt]-X[dt]}),_e=0,Ae=0,Oe=[],Xe=[];for(O=0;O<U;++O)N=me[O],_e<Ae?(_e+=fe[N],Oe.push(N)):(Ae+=fe[N],Xe.push(N));return Xe.reverse().concat(Oe)},reverse:function(pe){return g.range(pe.length).reverse()},default:Li}),Jr=g.map({silhouette:function(pe){var O,N,U,X=pe.length,fe=pe[0].length,me=[],_e=0,Ae=[];for(N=0;N<fe;++N){for(O=0,U=0;O<X;O++)U+=pe[O][N][1];U>_e&&(_e=U),me.push(U)}for(N=0;N<fe;++N)Ae[N]=(_e-me[N])/2;return Ae},wiggle:function(pe){var O,N,U,X,fe,me,_e,Ae,Oe,Xe=pe.length,nt=pe[0],dt=nt.length,St=[];for(St[0]=Ae=Oe=0,N=1;N<dt;++N){for(O=0,X=0;O<Xe;++O)X+=pe[O][N][1];for(O=0,fe=0,_e=nt[N][0]-nt[N-1][0];O<Xe;++O){for(U=0,me=(pe[O][N][1]-pe[O][N-1][1])/(2*_e);U<O;++U)me+=(pe[U][N][1]-pe[U][N-1][1])/_e;fe+=me*pe[O][N][1]}St[N]=Ae-=X?fe/X*_e:0,Ae<Oe&&(Oe=Ae)}for(N=0;N<dt;++N)St[N]-=Oe;return St},expand:function(pe){var O,N,U,X=pe.length,fe=pe[0].length,me=1/X,_e=[];for(N=0;N<fe;++N){for(O=0,U=0;O<X;O++)U+=pe[O][N][1];if(U)for(O=0;O<X;O++)pe[O][N][1]/=U;else for(O=0;O<X;O++)pe[O][N][1]=me}for(N=0;N<fe;++N)_e[N]=0;return _e},zero:Pi});function Li(pe){return g.range(pe.length)}function Pi(pe){for(var O=-1,N=pe[0].length,U=[];++O<N;)U[O]=0;return U}function Aa(pe){for(var O,N=1,U=0,X=pe[0][1],fe=pe.length;N<fe;++N)(O=pe[N][1])>X&&(U=N,X=O);return U}function ra(pe){return pe.reduce(aa,0)}function aa(pe,O){return pe+O[1]}function xo(pe,O){return io(pe,Math.ceil(Math.log(O.length)/Math.LN2+1))}function io(pe,O){for(var N=-1,U=+pe[0],X=(pe[1]-U)/O,fe=[];++N<=O;)fe[N]=X*N+U;return fe}function ja(pe){return[g.min(pe),g.max(pe)]}function Ta(pe,O){return pe.value-O.value}function wo(pe,O){var N=pe._pack_next;pe._pack_next=O,O._pack_prev=pe,O._pack_next=N,N._pack_prev=O}function Go(pe,O){pe._pack_next=O,O._pack_prev=pe}function os(pe,O){var N=O.x-pe.x,U=O.y-pe.y,X=pe.r+O.r;return.999*X*X>N*N+U*U}function ss(pe){if((O=pe.children)&&(Ae=O.length)){var O,N,U,X,fe,me,_e,Ae,Oe=1/0,Xe=-1/0,nt=1/0,dt=-1/0;if(O.forEach(gs),(N=O[0]).x=-N.r,N.y=0,Gt(N),Ae>1&&((U=O[1]).x=U.r,U.y=0,Gt(U),Ae>2))for(Ma(N,U,X=O[2]),Gt(X),wo(N,X),N._pack_prev=X,wo(X,U),U=N._pack_next,fe=3;fe<Ae;fe++){Ma(N,U,X=O[fe]);var St=0,Nt=1,It=1;for(me=U._pack_next;me!==U;me=me._pack_next,Nt++)if(os(me,X)){St=1;break}if(1==St)for(_e=N._pack_prev;_e!==me._pack_prev&&!os(_e,X);_e=_e._pack_prev,It++);St?(Nt<It||Nt==It&&U.r<N.r?Go(N,U=me):Go(N=_e,U),fe--):(wo(N,X),U=X,Gt(X))}var Lt=(Oe+Xe)/2,At=(nt+dt)/2,Zt=0;for(fe=0;fe<Ae;fe++)(X=O[fe]).x-=Lt,X.y-=At,Zt=Math.max(Zt,X.r+Math.sqrt(X.x*X.x+X.y*X.y));pe.r=Zt,O.forEach(ms)}function Gt($t){Oe=Math.min($t.x-$t.r,Oe),Xe=Math.max($t.x+$t.r,Xe),nt=Math.min($t.y-$t.r,nt),dt=Math.max($t.y+$t.r,dt)}}function gs(pe){pe._pack_next=pe._pack_prev=pe}function ms(pe){delete pe._pack_next,delete pe._pack_prev}function Ma(pe,O,N){var U=pe.r+N.r,X=O.x-pe.x,fe=O.y-pe.y;if(U&&(X||fe)){var me=O.r+N.r,_e=X*X+fe*fe,Ae=.5+((U*=U)-(me*=me))/(2*_e),Oe=Math.sqrt(Math.max(0,2*me*(U+_e)-(U-=_e)*U-me*me))/(2*_e);N.x=pe.x+Ae*X+Oe*fe,N.y=pe.y+Ae*fe-Oe*X}else N.x=pe.x+U,N.y=pe.y}function wt(pe,O){return pe.parent==O.parent?1:2}function Yt(pe){var O=pe.children;return O.length?O[0]:pe.t}function yn(pe){var O,N=pe.children;return(O=N.length)?N[O-1]:pe.t}function rn(pe,O,N){var U=N/(O.i-pe.i);O.c-=U,O.s+=N,pe.c+=U,O.z+=N,O.m+=N}function xn(pe,O,N){return pe.a.parent===O.parent?pe.a:N}function Wn(pe){return{x:pe.x,y:pe.y,dx:pe.dx,dy:pe.dy}}function $n(pe,O){var N=pe.x+O[3],U=pe.y+O[0],X=pe.dx-O[1]-O[3],fe=pe.dy-O[0]-O[2];return X<0&&(N+=X/2,X=0),fe<0&&(U+=fe/2,fe=0),{x:N,y:U,dx:X,dy:fe}}function fr(pe){var O=pe[0],N=pe[pe.length-1];return O<N?[O,N]:[N,O]}function kr(pe){return pe.rangeExtent?pe.rangeExtent():fr(pe.range())}function xr(pe,O,N,U){var X=N(pe[0],pe[1]),fe=U(O[0],O[1]);return function(me){return fe(X(me))}}function Pr(pe,O){var N,U=0,X=pe.length-1,fe=pe[U],me=pe[X];return me<fe&&(N=U,U=X,X=N,N=fe,fe=me,me=N),pe[U]=O.floor(fe),pe[X]=O.ceil(me),pe}function zr(pe){return pe?{floor:function(O){return Math.floor(O/pe)*pe},ceil:function(O){return Math.ceil(O/pe)*pe}}:Tr}g.layout.histogram=function(){var pe=!0,O=Number,N=ja,U=xo;function X(fe,me){for(var _e,Ae,Oe=[],Xe=fe.map(O,this),nt=N.call(this,Xe,me),dt=U.call(this,nt,Xe,me),St=(me=-1,Xe.length),Nt=dt.length-1,It=pe?1:1/St;++me<Nt;)(_e=Oe[me]=[]).dx=dt[me+1]-(_e.x=dt[me]),_e.y=0;if(Nt>0)for(me=-1;++me<St;)(Ae=Xe[me])>=nt[0]&&Ae<=nt[1]&&((_e=Oe[g.bisect(dt,Ae,1,Nt)-1]).y+=It,_e.push(fe[me]));return Oe}return X.value=function(fe){return arguments.length?(O=fe,X):O},X.range=function(fe){return arguments.length?(N=On(fe),X):N},X.bins=function(fe){return arguments.length?(U="number"==typeof fe?function(me){return io(me,fe)}:On(fe),X):U},X.frequency=function(fe){return arguments.length?(pe=!!fe,X):pe},X},g.layout.pack=function(){var pe,O=g.layout.hierarchy().sort(Ta),N=0,U=[1,1];function X(fe,me){var _e=O.call(this,fe,me),Ae=_e[0],Oe=U[0],Xe=U[1],nt=null==pe?Math.sqrt:"function"==typeof pe?pe:function(){return pe};if(Ae.x=Ae.y=0,pn(Ae,function(St){St.r=+nt(St.value)}),pn(Ae,ss),N){var dt=N*(pe?1:Math.max(2*Ae.r/Oe,2*Ae.r/Xe))/2;pn(Ae,function(St){St.r+=dt}),pn(Ae,ss),pn(Ae,function(St){St.r-=dt})}return function St(Nt,It,Lt,At){var Zt=Nt.children;if(Nt.x=It+=At*Nt.x,Nt.y=Lt+=At*Nt.y,Nt.r*=At,Zt)for(var Gt=-1,$t=Zt.length;++Gt<$t;)St(Zt[Gt],It,Lt,At)}(Ae,Oe/2,Xe/2,pe?1:1/Math.max(2*Ae.r/Oe,2*Ae.r/Xe)),_e}return X.size=function(fe){return arguments.length?(U=fe,X):U},X.radius=function(fe){return arguments.length?(pe=null==fe||"function"==typeof fe?fe:+fe,X):pe},X.padding=function(fe){return arguments.length?(N=+fe,X):N},fn(X,O)},g.layout.tree=function(){var pe=g.layout.hierarchy().sort(null).value(null),O=wt,N=[1,1],U=null;function X(Ae,Oe){var Xe=pe.call(this,Ae,Oe),nt=Xe[0],dt=function(Gt){for(var $t,mn={A:null,children:[Gt]},En=[mn];null!=($t=En.pop());)for(var Vn,Nn=$t.children,pr=0,hr=Nn.length;pr<hr;++pr)En.push((Nn[pr]=Vn={_:Nn[pr],parent:$t,children:(Vn=Nn[pr].children)&&Vn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:pr}).a=Vn);return mn.children[0]}(nt);if(pn(dt,fe),dt.parent.m=-dt.z,on(dt,me),U)on(nt,_e);else{var St=nt,Nt=nt,It=nt;on(nt,function(Gt){Gt.x<St.x&&(St=Gt),Gt.x>Nt.x&&(Nt=Gt),Gt.depth>It.depth&&(It=Gt)});var Lt=O(St,Nt)/2-St.x,At=N[0]/(Nt.x+O(Nt,St)/2+Lt),Zt=N[1]/(It.depth||1);on(nt,function(Gt){Gt.x=(Gt.x+Lt)*At,Gt.y=Gt.depth*Zt})}return Xe}function fe(Ae){var Oe=Ae.children,Xe=Ae.parent.children,nt=Ae.i?Xe[Ae.i-1]:null;if(Oe.length){!function(St){for(var Nt,It=0,Lt=0,At=St.children,Zt=At.length;--Zt>=0;)(Nt=At[Zt]).z+=It,Nt.m+=It,It+=Nt.s+(Lt+=Nt.c)}(Ae);var dt=(Oe[0].z+Oe[Oe.length-1].z)/2;nt?(Ae.z=nt.z+O(Ae._,nt._),Ae.m=Ae.z-dt):Ae.z=dt}else nt&&(Ae.z=nt.z+O(Ae._,nt._));Ae.parent.A=function(St,Nt,It){if(Nt){for(var Lt,At=St,Zt=St,Gt=Nt,$t=At.parent.children[0],mn=At.m,En=Zt.m,Vn=Gt.m,Nn=$t.m;Gt=yn(Gt),At=Yt(At),Gt&&At;)$t=Yt($t),(Zt=yn(Zt)).a=St,(Lt=Gt.z+Vn-At.z-mn+O(Gt._,At._))>0&&(rn(xn(Gt,St,It),St,Lt),mn+=Lt,En+=Lt),Vn+=Gt.m,mn+=At.m,Nn+=$t.m,En+=Zt.m;Gt&&!yn(Zt)&&(Zt.t=Gt,Zt.m+=Vn-En),At&&!Yt($t)&&($t.t=At,$t.m+=mn-Nn,It=St)}return It}(Ae,nt,Ae.parent.A||Xe[0])}function me(Ae){Ae._.x=Ae.z+Ae.parent.m,Ae.m+=Ae.parent.m}function _e(Ae){Ae.x*=N[0],Ae.y=Ae.depth*N[1]}return X.separation=function(Ae){return arguments.length?(O=Ae,X):O},X.size=function(Ae){return arguments.length?(U=null==(N=Ae)?_e:null,X):U?null:N},X.nodeSize=function(Ae){return arguments.length?(U=null==(N=Ae)?null:_e,X):U?N:null},fn(X,pe)},g.layout.cluster=function(){var pe=g.layout.hierarchy().sort(null).value(null),O=wt,N=[1,1],U=!1;function X(fe,me){var _e,Ae=pe.call(this,fe,me),Oe=Ae[0],Xe=0;pn(Oe,function(It){var At,Lt=It.children;Lt&&Lt.length?(It.x=(At=Lt).reduce(function(Zt,Gt){return Zt+Gt.x},0)/At.length,It.y=function(At){return 1+g.max(At,function(Zt){return Zt.y})}(Lt)):(It.x=_e?Xe+=O(It,_e):0,It.y=0,_e=It)});var nt=function It(Lt){var At=Lt.children;return At&&At.length?It(At[0]):Lt}(Oe),dt=function It(Lt){var At,Zt=Lt.children;return Zt&&(At=Zt.length)?It(Zt[At-1]):Lt}(Oe),St=nt.x-O(nt,dt)/2,Nt=dt.x+O(dt,nt)/2;return pn(Oe,U?function(It){It.x=(It.x-Oe.x)*N[0],It.y=(Oe.y-It.y)*N[1]}:function(It){It.x=(It.x-St)/(Nt-St)*N[0],It.y=(1-(Oe.y?It.y/Oe.y:1))*N[1]}),Ae}return X.separation=function(fe){return arguments.length?(O=fe,X):O},X.size=function(fe){return arguments.length?(U=null==(N=fe),X):U?null:N},X.nodeSize=function(fe){return arguments.length?(U=null!=(N=fe),X):U?N:null},fn(X,pe)},g.layout.treemap=function(){var pe,O=g.layout.hierarchy(),N=Math.round,U=[1,1],X=null,fe=Wn,me=!1,_e="squarify",Ae=.5*(1+Math.sqrt(5));function Oe(It,Lt){for(var At,Zt,Gt=-1,$t=It.length;++Gt<$t;)Zt=(At=It[Gt]).value*(Lt<0?0:Lt),At.area=isNaN(Zt)||Zt<=0?0:Zt}function Xe(It){var Lt=It.children;if(Lt&&Lt.length){var At,Zt,Gt,$t=fe(It),mn=[],En=Lt.slice(),Vn=1/0,Nn="slice"===_e?$t.dx:"dice"===_e?$t.dy:"slice-dice"===_e?1&It.depth?$t.dy:$t.dx:Math.min($t.dx,$t.dy);for(Oe(En,$t.dx*$t.dy/It.value),mn.area=0;(Gt=En.length)>0;)mn.push(At=En[Gt-1]),mn.area+=At.area,"squarify"!==_e||(Zt=dt(mn,Nn))<=Vn?(En.pop(),Vn=Zt):(mn.area-=mn.pop().area,St(mn,Nn,$t,!1),Nn=Math.min($t.dx,$t.dy),mn.length=mn.area=0,Vn=1/0);mn.length&&(St(mn,Nn,$t,!0),mn.length=mn.area=0),Lt.forEach(Xe)}}function nt(It){var Lt=It.children;if(Lt&&Lt.length){var At,Zt=fe(It),Gt=Lt.slice(),$t=[];for(Oe(Gt,Zt.dx*Zt.dy/It.value),$t.area=0;At=Gt.pop();)$t.push(At),$t.area+=At.area,null!=At.z&&(St($t,At.z?Zt.dx:Zt.dy,Zt,!Gt.length),$t.length=$t.area=0);Lt.forEach(nt)}}function dt(It,Lt){for(var At,Zt=It.area,Gt=0,$t=1/0,mn=-1,En=It.length;++mn<En;)(At=It[mn].area)&&(At<$t&&($t=At),At>Gt&&(Gt=At));return Lt*=Lt,(Zt*=Zt)?Math.max(Lt*Gt*Ae/Zt,Zt/(Lt*$t*Ae)):1/0}function St(It,Lt,At,Zt){var Gt,$t=-1,mn=It.length,En=At.x,Vn=At.y,Nn=Lt?N(It.area/Lt):0;if(Lt==At.dx){for((Zt||Nn>At.dy)&&(Nn=At.dy);++$t<mn;)(Gt=It[$t]).x=En,Gt.y=Vn,Gt.dy=Nn,En+=Gt.dx=Math.min(At.x+At.dx-En,Nn?N(Gt.area/Nn):0);Gt.z=!0,Gt.dx+=At.x+At.dx-En,At.y+=Nn,At.dy-=Nn}else{for((Zt||Nn>At.dx)&&(Nn=At.dx);++$t<mn;)(Gt=It[$t]).x=En,Gt.y=Vn,Gt.dx=Nn,Vn+=Gt.dy=Math.min(At.y+At.dy-Vn,Nn?N(Gt.area/Nn):0);Gt.z=!1,Gt.dy+=At.y+At.dy-Vn,At.x+=Nn,At.dx-=Nn}}function Nt(It){var Lt=pe||O(It),At=Lt[0];return At.x=At.y=0,At.value?(At.dx=U[0],At.dy=U[1]):At.dx=At.dy=0,pe&&O.revalue(At),Oe([At],At.dx*At.dy/At.value),(pe?nt:Xe)(At),me&&(pe=Lt),Lt}return Nt.size=function(It){return arguments.length?(U=It,Nt):U},Nt.padding=function(It){if(!arguments.length)return X;function Lt(Gt){var $t=It.call(Nt,Gt,Gt.depth);return null==$t?Wn(Gt):$n(Gt,"number"==typeof $t?[$t,$t,$t,$t]:$t)}function At(Gt){return $n(Gt,It)}var Zt;return fe=null==(X=It)?Wn:"function"==(Zt=typeof It)?Lt:("number"===Zt&&(It=[It,It,It,It]),At),Nt},Nt.round=function(It){return arguments.length?(N=It?Math.round:Number,Nt):N!=Number},Nt.sticky=function(It){return arguments.length?(me=It,pe=null,Nt):me},Nt.ratio=function(It){return arguments.length?(Ae=It,Nt):Ae},Nt.mode=function(It){return arguments.length?(_e=It+"",Nt):_e},fn(Nt,O)},g.random={normal:function(pe,O){var N=arguments.length;return N<2&&(O=1),N<1&&(pe=0),function(){var U,X,fe;do{fe=(U=2*Math.random()-1)*U+(X=2*Math.random()-1)*X}while(!fe||fe>1);return pe+O*U*Math.sqrt(-2*Math.log(fe)/fe)}},logNormal:function(){var pe=g.random.normal.apply(g,arguments);return function(){return Math.exp(pe())}},bates:function(pe){var O=g.random.irwinHall(pe);return function(){return O()/pe}},irwinHall:function(pe){return function(){for(var O=0,N=0;N<pe;N++)O+=Math.random();return O}}},g.scale={};var Tr={floor:L,ceil:L};function Br(pe,O,N,U){var X=[],fe=[],me=0,_e=Math.min(pe.length,O.length)-1;for(pe[_e]<pe[0]&&(pe=pe.slice().reverse(),O=O.slice().reverse());++me<=_e;)X.push(N(pe[me-1],pe[me])),fe.push(U(O[me-1],O[me]));return function(Ae){var Oe=g.bisect(pe,Ae,1,_e)-1;return fe[Oe](X[Oe](Ae))}}function ti(pe,O){return g.rebind(pe,O,"range","rangeRound","interpolate","clamp")}function li(pe,O){return Pr(pe,zr(vi(pe,O)[2])),Pr(pe,zr(vi(pe,O)[2])),pe}function vi(pe,O){null==O&&(O=10);var N=fr(pe),U=N[1]-N[0],X=Math.pow(10,Math.floor(Math.log(U/O)/Math.LN10)),fe=O/U*X;return fe<=.15?X*=10:fe<=.35?X*=5:fe<=.75&&(X*=2),N[0]=Math.ceil(N[0]/X)*X,N[1]=Math.floor(N[1]/X)*X+.5*X,N[2]=X,N}function dr(pe,O){return g.range.apply(g,vi(pe,O))}g.scale.linear=function(){return function pe(O,N,U,X){var fe,me;function _e(){var Oe=Math.min(O.length,N.length)>2?Br:xr,Xe=X?yo:Za;return fe=Oe(O,N,Xe,U),me=Oe(N,O,Xe,Lo),Ae}function Ae(Oe){return fe(Oe)}return Ae.invert=function(Oe){return me(Oe)},Ae.domain=function(Oe){return arguments.length?(O=Oe.map(Number),_e()):O},Ae.range=function(Oe){return arguments.length?(N=Oe,_e()):N},Ae.rangeRound=function(Oe){return Ae.range(Oe).interpolate(co)},Ae.clamp=function(Oe){return arguments.length?(X=Oe,_e()):X},Ae.interpolate=function(Oe){return arguments.length?(U=Oe,_e()):U},Ae.ticks=function(Oe){return dr(O,Oe)},Ae.tickFormat=function(Oe,Xe){return d3_scale_linearTickFormat(O,Oe,Xe)},Ae.nice=function(Oe){return li(O,Oe),_e()},Ae.copy=function(){return pe(O,N,U,X)},_e()}([0,1],[0,1],Lo,!1)},g.scale.log=function(){return function pe(O,N,U,X){function fe(Ae){return(U?Math.log(Ae<0?0:Ae):-Math.log(Ae>0?0:-Ae))/Math.log(N)}function me(Ae){return U?Math.pow(N,Ae):-Math.pow(N,-Ae)}function _e(Ae){return O(fe(Ae))}return _e.invert=function(Ae){return me(O.invert(Ae))},_e.domain=function(Ae){return arguments.length?(U=Ae[0]>=0,O.domain((X=Ae.map(Number)).map(fe)),_e):X},_e.base=function(Ae){return arguments.length?(N=+Ae,O.domain(X.map(fe)),_e):N},_e.nice=function(){var Ae=Pr(X.map(fe),U?Math:hi);return O.domain(Ae),X=Ae.map(me),_e},_e.ticks=function(){var Ae=fr(X),Oe=[],Xe=Ae[0],nt=Ae[1],dt=Math.floor(fe(Xe)),St=Math.ceil(fe(nt)),Nt=N%1?2:N;if(isFinite(St-dt)){if(U){for(;dt<St;dt++)for(var It=1;It<Nt;It++)Oe.push(me(dt)*It);Oe.push(me(dt))}else for(Oe.push(me(dt));dt++<St;)for(It=Nt-1;It>0;It--)Oe.push(me(dt)*It);for(dt=0;Oe[dt]<Xe;dt++);for(St=Oe.length;Oe[St-1]>nt;St--);Oe=Oe.slice(dt,St)}return Oe},_e.copy=function(){return pe(O.copy(),N,U,X)},ti(_e,O)}(g.scale.linear().domain([0,1]),10,!0,[1,10])};var hi={floor:function(pe){return-Math.ceil(-pe)},ceil:function(pe){return-Math.floor(-pe)}};function Xr(pe){return function(O){return O<0?-Math.pow(-O,pe):Math.pow(O,pe)}}g.scale.pow=function(){return function pe(O,N,U){var X=Xr(N),fe=Xr(1/N);function me(_e){return O(X(_e))}return me.invert=function(_e){return fe(O.invert(_e))},me.domain=function(_e){return arguments.length?(O.domain((U=_e.map(Number)).map(X)),me):U},me.ticks=function(_e){return dr(U,_e)},me.tickFormat=function(_e,Ae){return d3_scale_linearTickFormat(U,_e,Ae)},me.nice=function(_e){return me.domain(li(U,_e))},me.exponent=function(_e){return arguments.length?(X=Xr(N=_e),fe=Xr(1/N),O.domain(U.map(X)),me):N},me.copy=function(){return pe(O.copy(),N,U)},ti(me,O)}(g.scale.linear(),1,[0,1])},g.scale.sqrt=function(){return g.scale.pow().exponent(.5)},g.scale.ordinal=function(){return function pe(O,N){var U,X,fe;function me(Ae){return X[((U.get(Ae)||("range"===N.t?U.set(Ae,O.push(Ae)):NaN))-1)%X.length]}function _e(Ae,Oe){return g.range(O.length).map(function(Xe){return Ae+Oe*Xe})}return me.domain=function(Ae){if(!arguments.length)return O;O=[],U=new A;for(var Oe,Xe=-1,nt=Ae.length;++Xe<nt;)U.has(Oe=Ae[Xe])||U.set(Oe,O.push(Oe));return me[N.t].apply(me,N.a)},me.range=function(Ae){return arguments.length?(X=Ae,fe=0,N={t:"range",a:arguments},me):X},me.rangePoints=function(Ae,Oe){arguments.length<2&&(Oe=0);var Xe=Ae[0],nt=Ae[1],dt=O.length<2?(Xe=(Xe+nt)/2,0):(nt-Xe)/(O.length-1+Oe);return X=_e(Xe+dt*Oe/2,dt),fe=0,N={t:"rangePoints",a:arguments},me},me.rangeRoundPoints=function(Ae,Oe){arguments.length<2&&(Oe=0);var Xe=Ae[0],nt=Ae[1],dt=O.length<2?(Xe=nt=Math.round((Xe+nt)/2),0):(nt-Xe)/(O.length-1+Oe)|0;return X=_e(Xe+Math.round(dt*Oe/2+(nt-Xe-(O.length-1+Oe)*dt)/2),dt),fe=0,N={t:"rangeRoundPoints",a:arguments},me},me.rangeBands=function(Ae,Oe,Xe){arguments.length<2&&(Oe=0),arguments.length<3&&(Xe=Oe);var nt=Ae[1]<Ae[0],dt=Ae[nt-0],Nt=(Ae[1-nt]-dt)/(O.length-Oe+2*Xe);return X=_e(dt+Nt*Xe,Nt),nt&&X.reverse(),fe=Nt*(1-Oe),N={t:"rangeBands",a:arguments},me},me.rangeRoundBands=function(Ae,Oe,Xe){arguments.length<2&&(Oe=0),arguments.length<3&&(Xe=Oe);var nt=Ae[1]<Ae[0],dt=Ae[nt-0],St=Ae[1-nt],Nt=Math.floor((St-dt)/(O.length-Oe+2*Xe));return X=_e(dt+Math.round((St-dt-(O.length-Oe)*Nt)/2),Nt),nt&&X.reverse(),fe=Math.round(Nt*(1-Oe)),N={t:"rangeRoundBands",a:arguments},me},me.rangeBand=function(){return fe},me.rangeExtent=function(){return fr(N.a[0])},me.copy=function(){return pe(O,N)},me.domain(O)}([],{t:"range",a:[[]]})},g.scale.category10=function(){return g.scale.ordinal().range(ii)},g.scale.category20=function(){return g.scale.ordinal().range(xi)},g.scale.category20b=function(){return g.scale.ordinal().range(Ji)},g.scale.category20c=function(){return g.scale.ordinal().range(la)};var ii=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Qt),xi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Qt),Ji=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Qt),la=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Qt);function Gr(){return 0}g.scale.quantile=function(){return function pe(O,N){var U;function X(){var me=0,_e=N.length;for(U=[];++me<_e;)U[me-1]=g.quantile(O,me/_e);return fe}function fe(me){if(!isNaN(me=+me))return N[g.bisect(U,me)]}return fe.domain=function(me){return arguments.length?(O=me.map(u).filter(f).sort(i),X()):O},fe.range=function(me){return arguments.length?(N=me,X()):N},fe.quantiles=function(){return U},fe.invertExtent=function(me){return(me=N.indexOf(me))<0?[NaN,NaN]:[me>0?U[me-1]:O[0],me<U.length?U[me]:O[O.length-1]]},fe.copy=function(){return pe(O,N)},X()}([],[])},g.scale.quantize=function(){return function pe(O,N,U){var X,fe;function me(Ae){return U[Math.max(0,Math.min(fe,Math.floor(X*(Ae-O))))]}function _e(){return X=U.length/(N-O),fe=U.length-1,me}return me.domain=function(Ae){return arguments.length?(O=+Ae[0],N=+Ae[Ae.length-1],_e()):[O,N]},me.range=function(Ae){return arguments.length?(U=Ae,_e()):U},me.invertExtent=function(Ae){return[Ae=(Ae=U.indexOf(Ae))<0?NaN:Ae/X+O,Ae+1/X]},me.copy=function(){return pe(O,N,U)},_e()}(0,1,[0,1])},g.scale.threshold=function(){return function pe(O,N){function U(X){if(X<=X)return N[g.bisect(O,X)]}return U.domain=function(X){return arguments.length?(O=X,U):O},U.range=function(X){return arguments.length?(N=X,U):N},U.invertExtent=function(X){return X=N.indexOf(X),[O[X-1],O[X]]},U.copy=function(){return pe(O,N)},U}([.5],[0,1])},g.scale.identity=function(){return function pe(O){function N(U){return+U}return N.invert=N,N.domain=N.range=function(U){return arguments.length?(O=U.map(N),N):O},N.ticks=function(U){return dr(O,U)},N.tickFormat=function(U,X){return d3_scale_linearTickFormat(O,U,X)},N.copy=function(){return pe(O)},N}([0,1])},g.svg={},g.svg.arc=function(){var pe=oa,O=Ai,N=Gr,U=ha,X=ma,fe=ta,me=Ra;function _e(){var Oe=Math.max(0,+pe.apply(this,arguments)),Xe=Math.max(0,+O.apply(this,arguments)),nt=X.apply(this,arguments)-Qe,dt=fe.apply(this,arguments)-Qe,St=Math.abs(dt-nt),Nt=nt>dt?0:1;if(Xe<Oe&&(It=Xe,Xe=Oe,Oe=It),St>=Ze)return Ae(Xe,Nt)+(Oe?Ae(Oe,1-Nt):"")+"Z";var It,Lt,At,Zt,Gt,$t,mn,En,Vn,Nn,pr,hr,Er=0,br=0,oi=[];if((Zt=(+me.apply(this,arguments)||0)/2)&&(At=U===ha?Math.sqrt(Oe*Oe+Xe*Xe):+U.apply(this,arguments),Nt||(br*=-1),Xe&&(br=Le(At/Xe*Math.sin(Zt))),Oe&&(Er=Le(At/Oe*Math.sin(Zt)))),Xe){Gt=Xe*Math.cos(nt+br),$t=Xe*Math.sin(nt+br),mn=Xe*Math.cos(dt-br),En=Xe*Math.sin(dt-br);var ci=Math.abs(dt-nt-2*br)<=nn?0:1;if(br&&_i(Gt,$t,mn,En)===Nt^ci){var Si=(nt+dt)/2;Gt=Xe*Math.cos(Si),$t=Xe*Math.sin(Si),mn=En=null}}else Gt=$t=0;if(Oe){Vn=Oe*Math.cos(dt-Er),Nn=Oe*Math.sin(dt-Er),pr=Oe*Math.cos(nt+Er),hr=Oe*Math.sin(nt+Er);var ar=Math.abs(nt-dt+2*Er)<=nn?0:1;if(Er&&_i(Vn,Nn,pr,hr)===1-Nt^ar){var jr=(nt+dt)/2;Vn=Oe*Math.cos(jr),Nn=Oe*Math.sin(jr),pr=hr=null}}else Vn=Nn=0;if(St>Rt&&(It=Math.min(Math.abs(Xe-Oe)/2,+N.apply(this,arguments)))>.001){Lt=Oe<Xe^Nt?0:1;var gi=It,ui=It;if(St<nn){var Ti=null==pr?[Vn,Nn]:null==mn?[Gt,$t]:Ut([Gt,$t],[pr,hr],[mn,En],[Vn,Nn]),Fi=Gt-Ti[0],ia=$t-Ti[1],yi=mn-Ti[0],qi=En-Ti[1],Gi=1/Math.sin(Math.acos((Fi*yi+ia*qi)/(Math.sqrt(Fi*Fi+ia*ia)*Math.sqrt(yi*yi+qi*qi)))/2),sa=Math.sqrt(Ti[0]*Ti[0]+Ti[1]*Ti[1]);ui=Math.min(It,(Oe-sa)/(Gi-1)),gi=Math.min(It,(Xe-sa)/(Gi+1))}if(null!=mn){var Wi=La(null==pr?[Vn,Nn]:[pr,hr],[Gt,$t],Xe,gi,Nt),ua=La([mn,En],[Vn,Nn],Xe,gi,Nt);It===gi?oi.push("M",Wi[0],"A",gi,",",gi," 0 0,",Lt," ",Wi[1],"A",Xe,",",Xe," 0 ",1-Nt^_i(Wi[1][0],Wi[1][1],ua[1][0],ua[1][1]),",",Nt," ",ua[1],"A",gi,",",gi," 0 0,",Lt," ",ua[0]):oi.push("M",Wi[0],"A",gi,",",gi," 0 1,",Lt," ",ua[0])}else oi.push("M",Gt,",",$t);if(null!=pr){var ka=La([Gt,$t],[pr,hr],Oe,-ui,Nt),Wa=La([Vn,Nn],null==mn?[Gt,$t]:[mn,En],Oe,-ui,Nt);It===ui?oi.push("L",Wa[0],"A",ui,",",ui," 0 0,",Lt," ",Wa[1],"A",Oe,",",Oe," 0 ",Nt^_i(Wa[1][0],Wa[1][1],ka[1][0],ka[1][1]),",",1-Nt," ",ka[1],"A",ui,",",ui," 0 0,",Lt," ",ka[0]):oi.push("L",Wa[0],"A",ui,",",ui," 0 0,",Lt," ",ka[0])}else oi.push("L",Vn,",",Nn)}else oi.push("M",Gt,",",$t),null!=mn&&oi.push("A",Xe,",",Xe," 0 ",ci,",",Nt," ",mn,",",En),oi.push("L",Vn,",",Nn),null!=pr&&oi.push("A",Oe,",",Oe," 0 ",ar,",",1-Nt," ",pr,",",hr);return oi.push("Z"),oi.join("")}function Ae(Oe,Xe){return"M0,"+Oe+"A"+Oe+","+Oe+" 0 1,"+Xe+" 0,"+-Oe+"A"+Oe+","+Oe+" 0 1,"+Xe+" 0,"+Oe}return _e.innerRadius=function(Oe){return arguments.length?(pe=On(Oe),_e):pe},_e.outerRadius=function(Oe){return arguments.length?(O=On(Oe),_e):O},_e.cornerRadius=function(Oe){return arguments.length?(N=On(Oe),_e):N},_e.padRadius=function(Oe){return arguments.length?(U=Oe==ha?ha:On(Oe),_e):U},_e.startAngle=function(Oe){return arguments.length?(X=On(Oe),_e):X},_e.endAngle=function(Oe){return arguments.length?(fe=On(Oe),_e):fe},_e.padAngle=function(Oe){return arguments.length?(me=On(Oe),_e):me},_e.centroid=function(){var Oe=(+pe.apply(this,arguments)+ +O.apply(this,arguments))/2,Xe=(+X.apply(this,arguments)+ +fe.apply(this,arguments))/2-Qe;return[Math.cos(Xe)*Oe,Math.sin(Xe)*Oe]},_e};var ha="auto";function oa(pe){return pe.innerRadius}function Ai(pe){return pe.outerRadius}function ma(pe){return pe.startAngle}function ta(pe){return pe.endAngle}function Ra(pe){return pe&&pe.padAngle}function _i(pe,O,N,U){return(pe-N)*O-(O-U)*pe>0?0:1}function La(pe,O,N,U,X){var fe=pe[0]-O[0],me=pe[1]-O[1],_e=(X?U:-U)/Math.sqrt(fe*fe+me*me),Ae=_e*me,Oe=-_e*fe,Xe=pe[0]+Ae,nt=pe[1]+Oe,dt=O[0]+Ae,St=O[1]+Oe,Nt=(Xe+dt)/2,It=(nt+St)/2,Lt=dt-Xe,At=St-nt,Zt=Lt*Lt+At*At,Gt=N-U,$t=Xe*St-dt*nt,mn=(At<0?-1:1)*Math.sqrt(Math.max(0,Gt*Gt*Zt-$t*$t)),En=($t*At-Lt*mn)/Zt,Vn=(-$t*Lt-At*mn)/Zt,Nn=($t*At+Lt*mn)/Zt,pr=(-$t*Lt+At*mn)/Zt,hr=En-Nt,Er=Vn-It,br=Nn-Nt,oi=pr-It;return hr*hr+Er*Er>br*br+oi*oi&&(En=Nn,Vn=pr),[[En-Ae,Vn-Oe],[En*N/Gt,Vn*N/Gt]]}function Wo(){return!0}function Ga(pe){var O=Jn,N=_r,U=Wo,X=As,fe=X.key,me=.7;function _e(Ae){var Oe,Xe=[],nt=[],dt=-1,St=Ae.length,Nt=On(O),It=On(N);function Lt(){Xe.push("M",X(pe(nt),me))}for(;++dt<St;)U.call(this,Oe=Ae[dt],dt)?nt.push([+Nt.call(this,Oe,dt),+It.call(this,Oe,dt)]):nt.length&&(Lt(),nt=[]);return nt.length&&Lt(),Xe.length?Xe.join(""):null}return _e.x=function(Ae){return arguments.length?(O=Ae,_e):O},_e.y=function(Ae){return arguments.length?(N=Ae,_e):N},_e.defined=function(Ae){return arguments.length?(U=Ae,_e):U},_e.interpolate=function(Ae){return arguments.length?(fe="function"==typeof Ae?X=Ae:(X=Ns.get(Ae)||As).key,_e):fe},_e.tension=function(Ae){return arguments.length?(me=Ae,_e):me},_e}g.svg.line=function(){return Ga(L)};var Ns=g.map({linear:As,"linear-closed":wi,step:function(pe){for(var O=0,N=pe.length,U=pe[0],X=[U[0],",",U[1]];++O<N;)X.push("H",(U[0]+(U=pe[O])[0])/2,"V",U[1]);return N>1&&X.push("H",U[0]),X.join("")},"step-before":bo,"step-after":Ps,basis:Yo,"basis-open":function(pe){if(pe.length<4)return As(pe);for(var O,N=[],U=-1,X=pe.length,fe=[0],me=[0];++U<3;)fe.push((O=pe[U])[0]),me.push(O[1]);for(N.push(Va(Ko,fe)+","+Va(Ko,me)),--U;++U<X;)O=pe[U],fe.shift(),fe.push(O[0]),me.shift(),me.push(O[1]),fl(N,fe,me);return N.join("")},"basis-closed":function(pe){for(var O,N,U=-1,X=pe.length,fe=X+4,me=[],_e=[];++U<4;)me.push((N=pe[U%X])[0]),_e.push(N[1]);for(O=[Va(Ko,me),",",Va(Ko,_e)],--U;++U<fe;)N=pe[U%X],me.shift(),me.push(N[0]),_e.shift(),_e.push(N[1]),fl(O,me,_e);return O.join("")},bundle:function(pe,O){var N=pe.length-1;if(N)for(var U,X,fe=pe[0][0],me=pe[0][1],_e=pe[N][0]-fe,Ae=pe[N][1]-me,Oe=-1;++Oe<=N;)(U=pe[Oe])[0]=O*U[0]+(1-O)*(fe+(X=Oe/N)*_e),U[1]=O*U[1]+(1-O)*(me+X*Ae);return Yo(pe)},cardinal:function(pe,O){return pe.length<3?As(pe):pe[0]+Ea(pe,Fa(pe,O))},"cardinal-open":function(pe,O){return pe.length<4?As(pe):pe[1]+Ea(pe.slice(1,-1),Fa(pe,O))},"cardinal-closed":function(pe,O){return pe.length<3?wi(pe):pe[0]+Ea((pe.push(pe[0]),pe),Fa([pe[pe.length-2]].concat(pe,[pe[1]]),O))},monotone:function(pe){return pe.length<3?As(pe):pe[0]+Ea(pe,function(O){for(var N,U,X,fe,me=[],_e=function(Xe){for(var nt=0,dt=Xe.length-1,St=[],Nt=Xe[0],It=Xe[1],Lt=St[0]=Tl(Nt,It);++nt<dt;)St[nt]=(Lt+(Lt=Tl(Nt=It,It=Xe[nt+1])))/2;return St[nt]=Lt,St}(O),Ae=-1,Oe=O.length-1;++Ae<Oe;)N=Tl(O[Ae],O[Ae+1]),l(N)<Rt?_e[Ae]=_e[Ae+1]=0:(fe=(U=_e[Ae]/N)*U+(X=_e[Ae+1]/N)*X)>9&&(fe=3*N/Math.sqrt(fe),_e[Ae]=fe*U,_e[Ae+1]=fe*X);for(Ae=-1;++Ae<=Oe;)fe=(O[Math.min(Oe,Ae+1)][0]-O[Math.max(0,Ae-1)][0])/(6*(1+_e[Ae]*_e[Ae])),me.push([fe||0,_e[Ae]*fe||0]);return me}(pe))}});function As(pe){return pe.length>1?pe.join("L"):pe+"Z"}function wi(pe){return pe.join("L")+"Z"}function bo(pe){for(var O=0,N=pe.length,U=pe[0],X=[U[0],",",U[1]];++O<N;)X.push("V",(U=pe[O])[1],"H",U[0]);return X.join("")}function Ps(pe){for(var O=0,N=pe.length,U=pe[0],X=[U[0],",",U[1]];++O<N;)X.push("H",(U=pe[O])[0],"V",U[1]);return X.join("")}function Ea(pe,O){if(O.length<1||pe.length!=O.length&&pe.length!=O.length+2)return As(pe);var N=pe.length!=O.length,U="",X=pe[0],fe=pe[1],me=O[0],_e=me,Ae=1;if(N&&(U+="Q"+(fe[0]-2*me[0]/3)+","+(fe[1]-2*me[1]/3)+","+fe[0]+","+fe[1],X=pe[1],Ae=2),O.length>1){fe=pe[Ae],Ae++,U+="C"+(X[0]+me[0])+","+(X[1]+me[1])+","+(fe[0]-(_e=O[1])[0])+","+(fe[1]-_e[1])+","+fe[0]+","+fe[1];for(var Oe=2;Oe<O.length;Oe++,Ae++)U+="S"+((fe=pe[Ae])[0]-(_e=O[Oe])[0])+","+(fe[1]-_e[1])+","+fe[0]+","+fe[1]}if(N){var Xe=pe[Ae];U+="Q"+(fe[0]+2*_e[0]/3)+","+(fe[1]+2*_e[1]/3)+","+Xe[0]+","+Xe[1]}return U}function Fa(pe,O){for(var N,U=[],X=(1-O)/2,fe=pe[0],me=pe[1],_e=1,Ae=pe.length;++_e<Ae;)N=fe,fe=me,U.push([X*((me=pe[_e])[0]-N[0]),X*(me[1]-N[1])]);return U}function Yo(pe){if(pe.length<3)return As(pe);var O=1,N=pe.length,U=pe[0],X=U[0],fe=U[1],me=[X,X,X,(U=pe[1])[0]],_e=[fe,fe,fe,U[1]],Ae=[X,",",fe,"L",Va(Ko,me),",",Va(Ko,_e)];for(pe.push(pe[N-1]);++O<=N;)U=pe[O],me.shift(),me.push(U[0]),_e.shift(),_e.push(U[1]),fl(Ae,me,_e);return pe.pop(),Ae.push("L",U),Ae.join("")}function Va(pe,O){return pe[0]*O[0]+pe[1]*O[1]+pe[2]*O[2]+pe[3]*O[3]}Ns.forEach(function(pe,O){O.key=pe,O.closed=/-closed$/.test(pe)});var Fo=[0,2/3,1/3,0],da=[0,1/3,2/3,0],Ko=[0,1/6,2/3,1/6];function fl(pe,O,N){pe.push("C",Va(Fo,O),",",Va(Fo,N),",",Va(da,O),",",Va(da,N),",",Va(Ko,O),",",Va(Ko,N))}function Tl(pe,O){return(O[1]-pe[1])/(O[0]-pe[0])}function Qs(pe){for(var O,N,U,X=-1,fe=pe.length;++X<fe;)N=(O=pe[X])[0],U=O[1]-Qe,O[0]=N*Math.cos(U),O[1]=N*Math.sin(U);return pe}function Po(pe){var O=Jn,N=Jn,U=0,X=_r,fe=Wo,me=As,_e=me.key,Ae=me,Oe="L",Xe=.7;function nt(dt){var St,Nt,It,Lt=[],At=[],Zt=[],Gt=-1,$t=dt.length,mn=On(O),En=On(U),Vn=O===N?function(){return Nt}:On(N),Nn=U===X?function(){return It}:On(X);function pr(){Lt.push("M",me(pe(Zt),Xe),Oe,Ae(pe(At.reverse()),Xe),"Z")}for(;++Gt<$t;)fe.call(this,St=dt[Gt],Gt)?(At.push([Nt=+mn.call(this,St,Gt),It=+En.call(this,St,Gt)]),Zt.push([+Vn.call(this,St,Gt),+Nn.call(this,St,Gt)])):At.length&&(pr(),At=[],Zt=[]);return At.length&&pr(),Lt.length?Lt.join(""):null}return nt.x=function(dt){return arguments.length?(O=N=dt,nt):N},nt.x0=function(dt){return arguments.length?(O=dt,nt):O},nt.x1=function(dt){return arguments.length?(N=dt,nt):N},nt.y=function(dt){return arguments.length?(U=X=dt,nt):X},nt.y0=function(dt){return arguments.length?(U=dt,nt):U},nt.y1=function(dt){return arguments.length?(X=dt,nt):X},nt.defined=function(dt){return arguments.length?(fe=dt,nt):fe},nt.interpolate=function(dt){return arguments.length?(_e="function"==typeof dt?me=dt:(me=Ns.get(dt)||As).key,Ae=me.reverse||me,Oe=me.closed?"M":"L",nt):_e},nt.tension=function(dt){return arguments.length?(Xe=dt,nt):Xe},nt}function Jl(pe){return pe.source}function Oi(pe){return pe.target}function Ll(pe){return pe.radius}function Di(pe){return[pe.x,pe.y]}function Yi(pe){return function(){var O=pe.apply(this,arguments),N=O[0],U=O[1]-Qe;return[N*Math.cos(U),N*Math.sin(U)]}}function xu(){return 64}function cu(){return"circle"}function Ml(pe){var O=Math.sqrt(pe/nn);return"M0,"+O+"A"+O+","+O+" 0 1,1 0,"+-O+"A"+O+","+O+" 0 1,1 0,"+O+"Z"}g.svg.line.radial=function(){var pe=Ga(Qs);return pe.radius=pe.x,delete pe.x,pe.angle=pe.y,delete pe.y,pe},bo.reverse=Ps,Ps.reverse=bo,g.svg.area=function(){return Po(L)},g.svg.area.radial=function(){var pe=Po(Qs);return pe.radius=pe.x,delete pe.x,pe.innerRadius=pe.x0,delete pe.x0,pe.outerRadius=pe.x1,delete pe.x1,pe.angle=pe.y,delete pe.y,pe.startAngle=pe.y0,delete pe.y0,pe.endAngle=pe.y1,delete pe.y1,pe},g.svg.chord=function(){var pe=Jl,O=Oi,N=Ll,U=ma,X=ta;function fe(Oe,Xe){var nt,dt,St=me(this,pe,Oe,Xe),Nt=me(this,O,Oe,Xe);return"M"+St.p0+_e(St.r,St.p1,St.a1-St.a0)+((nt=St).a0==(dt=Nt).a0&&nt.a1==dt.a1?Ae(0,0,0,St.p0):Ae(0,0,0,Nt.p0)+_e(Nt.r,Nt.p1,Nt.a1-Nt.a0)+Ae(0,0,0,St.p0))+"Z"}function me(Oe,Xe,nt,dt){var St=Xe.call(Oe,nt,dt),Nt=N.call(Oe,St,dt),It=U.call(Oe,St,dt)-Qe,Lt=X.call(Oe,St,dt)-Qe;return{r:Nt,a0:It,a1:Lt,p0:[Nt*Math.cos(It),Nt*Math.sin(It)],p1:[Nt*Math.cos(Lt),Nt*Math.sin(Lt)]}}function _e(Oe,Xe,nt){return"A"+Oe+","+Oe+" 0 "+ +(nt>nn)+",1 "+Xe}function Ae(Oe,Xe,nt,dt){return"Q 0,0 "+dt}return fe.radius=function(Oe){return arguments.length?(N=On(Oe),fe):N},fe.source=function(Oe){return arguments.length?(pe=On(Oe),fe):pe},fe.target=function(Oe){return arguments.length?(O=On(Oe),fe):O},fe.startAngle=function(Oe){return arguments.length?(U=On(Oe),fe):U},fe.endAngle=function(Oe){return arguments.length?(X=On(Oe),fe):X},fe},g.svg.diagonal=function(){var pe=Jl,O=Oi,N=Di;function U(X,fe){var me=pe.call(this,X,fe),_e=O.call(this,X,fe),Ae=(me.y+_e.y)/2,Oe=[me,{x:me.x,y:Ae},{x:_e.x,y:Ae},_e];return"M"+(Oe=Oe.map(N))[0]+"C"+Oe[1]+" "+Oe[2]+" "+Oe[3]}return U.source=function(X){return arguments.length?(pe=On(X),U):pe},U.target=function(X){return arguments.length?(O=On(X),U):O},U.projection=function(X){return arguments.length?(N=X,U):N},U},g.svg.diagonal.radial=function(){var pe=g.svg.diagonal(),O=Di,N=pe.projection;return pe.projection=function(U){return arguments.length?N(Yi(O=U)):O},pe},g.svg.symbol=function(){var pe=cu,O=xu;function N(U,X){return(Bs.get(pe.call(this,U,X))||Ml)(O.call(this,U,X))}return N.type=function(U){return arguments.length?(pe=On(U),N):pe},N.size=function(U){return arguments.length?(O=On(U),N):O},N};var Bs=g.map({circle:Ml,cross:function(pe){var O=Math.sqrt(pe/5)/2;return"M"+-3*O+","+-O+"H"+-O+"V"+-3*O+"H"+O+"V"+-O+"H"+3*O+"V"+O+"H"+O+"V"+3*O+"H"+-O+"V"+O+"H"+-3*O+"Z"},diamond:function(pe){var O=Math.sqrt(pe/(2*Pa)),N=O*Pa;return"M0,"+-O+"L"+N+",0 0,"+O+" "+-N+",0Z"},square:function(pe){var O=Math.sqrt(pe)/2;return"M"+-O+","+-O+"L"+O+","+-O+" "+O+","+O+" "+-O+","+O+"Z"},"triangle-down":function(pe){var O=Math.sqrt(pe/Zr),N=O*Zr/2;return"M0,"+N+"L"+O+","+-N+" "+-O+","+-N+"Z"},"triangle-up":function(pe){var O=Math.sqrt(pe/Zr),N=O*Zr/2;return"M0,"+-N+"L"+O+","+N+" "+-O+","+N+"Z"}});g.svg.symbolTypes=Bs.keys();var Zr=Math.sqrt(3),Pa=Math.tan(30*Ge);ne.transition=function(pe){for(var O,N,U=el||++Al,X=Pl(pe),fe=[],me=ls||{time:Date.now(),ease:Ro,delay:0,duration:250},_e=-1,Ae=this.length;++_e<Ae;){fe.push(O=[]);for(var Oe=this[_e],Xe=-1,nt=Oe.length;++Xe<nt;)(N=Oe[Xe])&&tl(N,Xe,X,U,me),O.push(N)}return Ha(fe,X,U)},ne.interrupt=function(pe){return this.each(null==pe?hl:Qi(Pl(pe)))};var hl=Qi(Pl());function Qi(pe){return function(){var O,N,U;(O=this[pe])&&(U=O[N=O.active])&&(U.timer.c=null,U.timer.t=NaN,--O.count?delete O[N]:delete this[pe],O.active+=.5,U.event&&U.event.interrupt.call(this,this.__data__,U.index))}}function Ha(pe,O,N){return H(pe,To),pe.namespace=O,pe.id=N,pe}var el,ls,To=[],Al=0;function bu(pe,O,N,U){var X=pe.id,fe=pe.namespace;return qe(pe,"function"==typeof N?function(me,_e,Ae){me[fe][X].tween.set(O,U(N.call(me,me.__data__,_e,Ae)))}:(N=U(N),function(me){me[fe][X].tween.set(O,N)}))}function Kl(pe){return null==pe&&(pe=""),function(){this.textContent=pe}}function Pl(pe){return null==pe?"__transition__":"__transition_"+pe+"__"}function tl(pe,O,N,U,X){var fe,me,_e,Ae,Oe,Xe=pe[N]||(pe[N]={active:0,count:0}),nt=Xe[U];function dt(Nt){var It=Xe.active,Lt=Xe[It];for(var At in Lt&&(Lt.timer.c=null,Lt.timer.t=NaN,--Xe.count,delete Xe[It],Lt.event&&Lt.event.interrupt.call(pe,pe.__data__,Lt.index)),Xe)if(+At<U){var Zt=Xe[At];Zt.timer.c=null,Zt.timer.t=NaN,--Xe.count,delete Xe[At]}me.c=St,Xn(function(){return me.c&&St(Nt||1)&&(me.c=null,me.t=NaN),1},0,fe),Xe.active=U,nt.event&&nt.event.start.call(pe,pe.__data__,O),Oe=[],nt.tween.forEach(function(Gt,$t){($t=$t.call(pe,pe.__data__,O))&&Oe.push($t)}),Ae=nt.ease,_e=nt.duration}function St(Nt){for(var It=Nt/_e,Lt=Ae(It),At=Oe.length;At>0;)Oe[--At].call(pe,Lt);if(It>=1)return nt.event&&nt.event.end.call(pe,pe.__data__,O),--Xe.count?delete Xe[U]:delete pe[N],1}nt||(me=Xn(function(Nt){var It=nt.delay;if(me.t=It+fe,It<=Nt)return dt(Nt-It);me.c=dt},0,fe=X.time),nt=Xe[U]={tween:new A,time:fe,timer:me,delay:X.delay,duration:X.duration,ease:X.ease,index:O},X=null,++Xe.count)}To.call=ne.call,To.empty=ne.empty,To.node=ne.node,To.size=ne.size,g.transition=function(pe,O){return pe&&pe.transition?el?pe.transition(O):pe:g.selection().transition(pe)},g.transition.prototype=To,To.select=function(pe){var O,N,U,X=this.id,fe=this.namespace,me=[];pe=le(pe);for(var _e=-1,Ae=this.length;++_e<Ae;){me.push(O=[]);for(var Oe=this[_e],Xe=-1,nt=Oe.length;++Xe<nt;)(U=Oe[Xe])&&(N=pe.call(U,U.__data__,Xe,_e))?("__data__"in U&&(N.__data__=U.__data__),tl(N,Xe,fe,X,U[fe][X]),O.push(N)):O.push(null)}return Ha(me,fe,X)},To.selectAll=function(pe){var O,N,U,X,fe,me=this.id,_e=this.namespace,Ae=[];pe=ue(pe);for(var Oe=-1,Xe=this.length;++Oe<Xe;)for(var nt=this[Oe],dt=-1,St=nt.length;++dt<St;)if(U=nt[dt]){fe=U[_e][me],N=pe.call(U,U.__data__,dt,Oe),Ae.push(O=[]);for(var Nt=-1,It=N.length;++Nt<It;)(X=N[Nt])&&tl(X,Nt,_e,me,fe),O.push(X)}return Ha(Ae,_e,me)},To.filter=function(pe){var O,N,U=[];"function"!=typeof pe&&(pe=Pe(pe));for(var X=0,fe=this.length;X<fe;X++){U.push(O=[]);for(var me,_e=0,Ae=(me=this[X]).length;_e<Ae;_e++)(N=me[_e])&&pe.call(N,N.__data__,_e,X)&&O.push(N)}return Ha(U,this.namespace,this.id)},To.tween=function(pe,O){var N=this.id,U=this.namespace;return arguments.length<2?this.node()[U][N].tween.get(pe):qe(this,null==O?function(X){X[U][N].tween.remove(pe)}:function(X){X[U][N].tween.set(pe,O)})},To.attr=function(pe,O){if(arguments.length<2){for(O in pe)this.attr(O,pe[O]);return this}var N="transform"==pe?na:Lo,U=g.ns.qualify(pe);function X(){this.removeAttribute(U)}function fe(){this.removeAttributeNS(U.space,U.local)}function me(Ae){return null==Ae?X:(Ae+="",function(){var Oe,Xe=this.getAttribute(U);return Xe!==Ae&&(Oe=N(Xe,Ae),function(nt){this.setAttribute(U,Oe(nt))})})}function _e(Ae){return null==Ae?fe:(Ae+="",function(){var Oe,Xe=this.getAttributeNS(U.space,U.local);return Xe!==Ae&&(Oe=N(Xe,Ae),function(nt){this.setAttributeNS(U.space,U.local,Oe(nt))})})}return bu(this,"attr."+pe,O,U.local?_e:me)},To.attrTween=function(pe,O){var N=g.ns.qualify(pe);return this.tween("attr."+pe,N.local?function(U,X){var fe=O.call(this,U,X,this.getAttributeNS(N.space,N.local));return fe&&function(me){this.setAttributeNS(N.space,N.local,fe(me))}}:function(U,X){var fe=O.call(this,U,X,this.getAttribute(N));return fe&&function(me){this.setAttribute(N,fe(me))}})},To.style=function(pe,O,N){var U=arguments.length;if(U<3){if("string"!=typeof pe){for(N in U<2&&(O=""),pe)this.style(N,pe[N],O);return this}N=""}function X(){this.style.removeProperty(pe)}function fe(me){return null==me?X:(me+="",function(){var _e,Ae=r(this).getComputedStyle(this,null).getPropertyValue(pe);return Ae!==me&&(_e=Lo(Ae,me),function(Oe){this.style.setProperty(pe,_e(Oe),N)})})}return bu(this,"style."+pe,O,fe)},To.styleTween=function(pe,O,N){function U(X,fe){var me=O.call(this,X,fe,r(this).getComputedStyle(this,null).getPropertyValue(pe));return me&&function(_e){this.style.setProperty(pe,me(_e),N)}}return arguments.length<3&&(N=""),this.tween("style."+pe,U)},To.text=function(pe){return bu(this,"text",pe,Kl)},To.remove=function(){var pe=this.namespace;return this.each("end.transition",function(){var O;this[pe].count<2&&(O=this.parentNode)&&O.removeChild(this)})},To.ease=function(pe){var O=this.id,N=this.namespace;return arguments.length<1?this.node()[N][O].ease:("function"!=typeof pe&&(pe=g.ease.apply(g,arguments)),qe(this,function(U){U[N][O].ease=pe}))},To.delay=function(pe){var O=this.id,N=this.namespace;return arguments.length<1?this.node()[N][O].delay:qe(this,"function"==typeof pe?function(U,X,fe){U[N][O].delay=+pe.call(U,U.__data__,X,fe)}:(pe=+pe,function(U){U[N][O].delay=pe}))},To.duration=function(pe){var O=this.id,N=this.namespace;return arguments.length<1?this.node()[N][O].duration:qe(this,"function"==typeof pe?function(U,X,fe){U[N][O].duration=Math.max(1,pe.call(U,U.__data__,X,fe))}:(pe=Math.max(1,pe),function(U){U[N][O].duration=pe}))},To.each=function(pe,O){var N=this.id,U=this.namespace;if(arguments.length<2){var X=ls,fe=el;try{el=N,qe(this,function(me,_e,Ae){ls=me[U][N],pe.call(me,me.__data__,_e,Ae)})}finally{ls=X,el=fe}}else qe(this,function(me){var _e=me[U][N];(_e.event||(_e.event=g.dispatch("start","end","interrupt"))).on(pe,O)});return this},To.transition=function(){for(var pe,O,N,U=this.id,X=++Al,fe=this.namespace,me=[],_e=0,Ae=this.length;_e<Ae;_e++){me.push(pe=[]);for(var Oe,Xe=0,nt=(Oe=this[_e]).length;Xe<nt;Xe++)(O=Oe[Xe])&&tl(O,Xe,fe,X,{time:(N=O[fe][U]).time,ease:N.ease,delay:N.delay+N.duration,duration:N.duration}),pe.push(O)}return Ha(me,fe,X)},g.svg.axis=function(){var pe,O=g.scale.linear(),N=vs,U=6,X=6,fe=3,me=[10],_e=null;function Ae(Oe){Oe.each(function(){var Xe,nt=g.select(this),dt=this.__chart__||O,St=this.__chart__=O.copy(),Nt=null==_e?St.ticks?St.ticks.apply(St,me):St.domain():_e,It=null==pe?St.tickFormat?St.tickFormat.apply(St,me):L:pe,Lt=nt.selectAll(".tick").data(Nt,St),At=Lt.enter().insert("g",".domain").attr("class","tick").style("opacity",Rt),Zt=g.transition(Lt.exit()).style("opacity",Rt).remove(),Gt=g.transition(Lt.order()).style("opacity",1),$t=Math.max(U,0)+fe,mn=kr(St),En=nt.selectAll(".domain").data([0]),Vn=(En.enter().append("path").attr("class","domain"),g.transition(En));At.append("line"),At.append("text");var Nn,pr,hr,Er,br=At.select("line"),oi=Gt.select("line"),ci=Lt.select("text").text(It),Si=At.select("text"),ar=Gt.select("text"),jr="top"===N||"left"===N?-1:1;if("bottom"===N||"top"===N?(Xe=Ol,Nn="x",hr="y",pr="x2",Er="y2",ci.attr("dy",jr<0?"0em":".71em").style("text-anchor","middle"),Vn.attr("d","M"+mn[0]+","+jr*X+"V0H"+mn[1]+"V"+jr*X)):(Xe=Ul,Nn="y",hr="x",pr="y2",Er="x2",ci.attr("dy",".32em").style("text-anchor",jr<0?"end":"start"),Vn.attr("d","M"+jr*X+","+mn[0]+"H0V"+mn[1]+"H"+jr*X)),br.attr(Er,jr*U),Si.attr(hr,jr*$t),oi.attr(pr,0).attr(Er,jr*U),ar.attr(Nn,0).attr(hr,jr*$t),St.rangeBand){var gi=St,ui=gi.rangeBand()/2;dt=St=function(Ti){return gi(Ti)+ui}}else dt.rangeBand?dt=St:Zt.call(Xe,St,dt);At.call(Xe,dt,St),Gt.call(Xe,St,St)})}return Ae.scale=function(Oe){return arguments.length?(O=Oe,Ae):O},Ae.orient=function(Oe){return arguments.length?(N=Oe in kl?Oe+"":vs,Ae):N},Ae.ticks=function(){return arguments.length?(me=T(arguments),Ae):me},Ae.tickValues=function(Oe){return arguments.length?(_e=Oe,Ae):_e},Ae.tickFormat=function(Oe){return arguments.length?(pe=Oe,Ae):pe},Ae.tickSize=function(Oe){var Xe=arguments.length;return Xe?(U=+Oe,X=+arguments[Xe-1],Ae):U},Ae.innerTickSize=function(Oe){return arguments.length?(U=+Oe,Ae):U},Ae.outerTickSize=function(Oe){return arguments.length?(X=+Oe,Ae):X},Ae.tickPadding=function(Oe){return arguments.length?(fe=+Oe,Ae):fe},Ae.tickSubdivide=function(){return arguments.length&&Ae},Ae};var vs="bottom",kl={top:1,right:1,bottom:1,left:1};function Ol(pe,O,N){pe.attr("transform",function(U){var X=O(U);return"translate("+(isFinite(X)?X:N(U))+",0)"})}function Ul(pe,O,N){pe.attr("transform",function(U){var X=O(U);return"translate(0,"+(isFinite(X)?X:N(U))+")"})}g.svg.brush=function(){var pe,O,N=oe(Xe,"brushstart","brush","brushend"),U=null,X=null,fe=[0,0],me=[0,0],_e=!0,Ae=!0,Oe=us[0];function Xe(It){It.each(function(){var Lt=g.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Nt).on("touchstart.brush",Nt),At=Lt.selectAll(".background").data([0]);At.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Lt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Zt=Lt.selectAll(".resize").data(Oe,L);Zt.exit().remove(),Zt.enter().append("g").attr("class",function(En){return"resize "+En}).style("cursor",function(En){return js[En]}).append("rect").attr("x",function(En){return/[ew]$/.test(En)?-3:null}).attr("y",function(En){return/^[ns]/.test(En)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Zt.style("display",Xe.empty()?"none":null);var Gt,$t=g.transition(Lt),mn=g.transition(At);U&&(Gt=kr(U),mn.attr("x",Gt[0]).attr("width",Gt[1]-Gt[0]),dt($t)),X&&(Gt=kr(X),mn.attr("y",Gt[0]).attr("height",Gt[1]-Gt[0]),St($t)),nt($t)})}function nt(It){It.selectAll(".resize").attr("transform",function(Lt){return"translate("+fe[+/e$/.test(Lt)]+","+me[+/^s/.test(Lt)]+")"})}function dt(It){It.select(".extent").attr("x",fe[0]),It.selectAll(".extent,.n>rect,.s>rect").attr("width",fe[1]-fe[0])}function St(It){It.select(".extent").attr("y",me[0]),It.selectAll(".extent,.e>rect,.w>rect").attr("height",me[1]-me[0])}function Nt(){var It,Lt,At=this,Zt=g.select(g.event.target),Gt=N.of(At,arguments),$t=g.select(At),mn=Zt.datum(),En=!/^(n|s)$/.test(mn)&&U,Vn=!/^(e|w)$/.test(mn)&&X,Nn=Zt.classed("extent"),pr=Vt(At),hr=g.mouse(At),Er=g.select(r(At)).on("keydown.brush",ci).on("keyup.brush",Si);if(g.event.changedTouches?Er.on("touchmove.brush",ar).on("touchend.brush",gi):Er.on("mousemove.brush",ar).on("mouseup.brush",gi),$t.interrupt().selectAll("*").interrupt(),Nn)hr[0]=fe[0]-hr[0],hr[1]=me[0]-hr[1];else if(mn){var br=+/w$/.test(mn),oi=+/^n/.test(mn);Lt=[fe[1-br]-hr[0],me[1-oi]-hr[1]],hr[0]=fe[br],hr[1]=me[oi]}else g.event.altKey&&(It=hr.slice());function ci(){32==g.event.keyCode&&(Nn||(It=null,hr[0]-=fe[1],hr[1]-=me[1],Nn=2),$())}function Si(){32==g.event.keyCode&&2==Nn&&(hr[0]+=fe[1],hr[1]+=me[1],Nn=0,$())}function ar(){var ui=g.mouse(At),Ti=!1;Lt&&(ui[0]+=Lt[0],ui[1]+=Lt[1]),Nn||(g.event.altKey?(It||(It=[(fe[0]+fe[1])/2,(me[0]+me[1])/2]),hr[0]=fe[+(ui[0]<It[0])],hr[1]=me[+(ui[1]<It[1])]):It=null),En&&jr(ui,U,0)&&(dt($t),Ti=!0),Vn&&jr(ui,X,1)&&(St($t),Ti=!0),Ti&&(nt($t),Gt({type:"brush",mode:Nn?"move":"resize"}))}function jr(ui,Ti,Fi){var ia,yi,qi=kr(Ti),Gi=qi[0],sa=qi[1],Wi=hr[Fi],ua=Fi?me:fe,ka=ua[1]-ua[0];if(Nn&&(Gi-=Wi,sa-=ka+Wi),ia=(Fi?Ae:_e)?Math.max(Gi,Math.min(sa,ui[Fi])):ui[Fi],Nn?yi=(ia+=Wi)+ka:(It&&(Wi=Math.max(Gi,Math.min(sa,2*It[Fi]-ia))),Wi<ia?(yi=ia,ia=Wi):yi=Wi),ua[0]!=ia||ua[1]!=yi)return Fi?O=null:pe=null,ua[0]=ia,ua[1]=yi,!0}function gi(){ar(),$t.style("pointer-events","all").selectAll(".resize").style("display",Xe.empty()?"none":null),g.select("body").style("cursor",null),Er.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),pr(),Gt({type:"brushend"})}$t.style("pointer-events","none").selectAll(".resize").style("display",null),g.select("body").style("cursor",Zt.style("cursor")),Gt({type:"brushstart"}),ar()}return Xe.event=function(It){It.each(function(){var Lt=N.of(this,arguments),At={x:fe,y:me,i:pe,j:O},Zt=this.__chart__||At;this.__chart__=At,el?g.select(this).transition().each("start.brush",function(){pe=Zt.i,O=Zt.j,fe=Zt.x,me=Zt.y,Lt({type:"brushstart"})}).tween("brush:brush",function(){var Gt=lo(fe,At.x),$t=lo(me,At.y);return pe=O=null,function(mn){fe=At.x=Gt(mn),me=At.y=$t(mn),Lt({type:"brush",mode:"resize"})}}).each("end.brush",function(){pe=At.i,O=At.j,Lt({type:"brush",mode:"resize"}),Lt({type:"brushend"})}):(Lt({type:"brushstart"}),Lt({type:"brush",mode:"resize"}),Lt({type:"brushend"}))})},Xe.x=function(It){return arguments.length?(Oe=us[!(U=It)<<1|!X],Xe):U},Xe.y=function(It){return arguments.length?(Oe=us[!U<<1|!(X=It)],Xe):X},Xe.clamp=function(It){return arguments.length?(U&&X?(_e=!!It[0],Ae=!!It[1]):U?_e=!!It:X&&(Ae=!!It),Xe):U&&X?[_e,Ae]:U?_e:X?Ae:null},Xe.extent=function(It){var Lt,At,Zt,Gt,$t;return arguments.length?(U&&(Lt=It[0],At=It[1],X&&(Lt=Lt[0],At=At[0]),pe=[Lt,At],U.invert&&(Lt=U(Lt),At=U(At)),At<Lt&&($t=Lt,Lt=At,At=$t),Lt==fe[0]&&At==fe[1]||(fe=[Lt,At])),X&&(Zt=It[0],Gt=It[1],U&&(Zt=Zt[1],Gt=Gt[1]),O=[Zt,Gt],X.invert&&(Zt=X(Zt),Gt=X(Gt)),Gt<Zt&&($t=Zt,Zt=Gt,Gt=$t),Zt==me[0]&&Gt==me[1]||(me=[Zt,Gt])),Xe):(U&&(pe?(Lt=pe[0],At=pe[1]):(Lt=fe[0],At=fe[1],U.invert&&(Lt=U.invert(Lt),At=U.invert(At)),At<Lt&&($t=Lt,Lt=At,At=$t))),X&&(O?(Zt=O[0],Gt=O[1]):(Zt=me[0],Gt=me[1],X.invert&&(Zt=X.invert(Zt),Gt=X.invert(Gt)),Gt<Zt&&($t=Zt,Zt=Gt,Gt=$t))),U&&X?[[Lt,Zt],[At,Gt]]:U?[Lt,At]:X&&[Zt,Gt])},Xe.clear=function(){return Xe.empty()||(fe=[0,0],me=[0,0],pe=O=null),Xe},Xe.empty=function(){return!!U&&fe[0]==fe[1]||!!X&&me[0]==me[1]},g.rebind(Xe,N,"on")};var js={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},us=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function rc(pe){return JSON.parse(pe.responseText)}function wc(pe){var O=b.createRange();return O.selectNode(b.body),O.createContextualFragment(pe.responseText)}g.text=Qn(function(pe){return pe.responseText}),g.json=function(pe,O){return sr(pe,"application/json",rc,O)},g.html=function(pe,O){return sr(pe,"text/html",wc,O)},g.xml=Qn(function(pe){return pe.responseXML}),"object"==typeof ae&&ae.exports?ae.exports=g:this.d3=g}).apply(self)},{}],59:[function(_,ae,ie){"use strict";ae.exports=_("./quad")},{"./quad":60}],60:[function(_,ae,ie){"use strict";var g=_("binary-search-bounds"),x=_("clamp"),T=_("parse-rect"),b=_("array-bounds"),e=_("pick-by-alias"),r=_("defined"),t=_("flatten-vertex-data"),a=_("is-obj"),n=_("dtype"),d=_("math-log2");function s(i,u){for(var f=u[0],p=u[1],y=1/(u[2]-f),m=1/(u[3]-p),l=new Array(i.length),w=0,v=i.length/2;w<v;w++)l[2*w]=x((i[2*w]-f)*y,0,1),l[2*w+1]=x((i[2*w+1]-p)*m,0,1);return l}ae.exports=function(i,u){u||(u={}),i=t(i,"float64"),u=e(u,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var f=r(u.maxDepth,255),p=r(u.bounds,b(i,2));p[0]===p[2]&&p[2]++,p[1]===p[3]&&p[3]++;var y,m=s(i,p),l=i.length>>>1;u.dtype||(u.dtype="array"),"string"==typeof u.dtype?y=new(n(u.dtype))(l):u.dtype&&(y=u.dtype,Array.isArray(y)&&(y.length=l));for(var w=0;w<l;++w)y[w]=w;var v=[],A=[],M=[],k=[];!function V(Z,Y,ee,Q,$,K){if(!Q.length)return null;var oe=v[$]||(v[$]=[]),j=M[$]||(M[$]=[]),H=A[$]||(A[$]=[]),G=oe.length;if(++$>f||K>1073741824){for(var re=0;re<Q.length;re++)oe.push(Q[re]),j.push(K),H.push(null,null,null,null);return G}if(oe.push(Q[0]),j.push(K),Q.length<=1)return H.push(null,null,null,null),G;for(var q=.5*ee,te=Z+q,ne=Y+q,le=[],ue=[],de=[],he=[],be=1,ge=Q.length;be<ge;be++){var we=Q[be],De=m[2*we+1];m[2*we]<te?De<ne?le.push(we):ue.push(we):De<ne?de.push(we):he.push(we)}return H.push(V(Z,Y,q,le,$,K<<=2),V(Z,ne,q,ue,$,K+1),V(te,Y,q,de,$,K+2),V(te,ne,q,he,$,K+3)),G}(0,0,1,y,0,1);for(var E=0,P=0;P<v.length;P++){var S=v[P];if(y.set)y.set(S,E);else for(var F=0,R=S.length;F<R;F++)y[F+E]=S[F];var D=E+v[P].length;k[P]=[E,D],E=D}return y.range=function(){for(var V,Z=[],Y=arguments.length;Y--;)Z[Y]=arguments[Y];if(a(Z[Z.length-1])){var ee=Z.pop();Z.length||null==ee.x&&null==ee.l&&null==ee.left||(Z=[ee],V={}),V=e(ee,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else V={};Z.length||(Z=p);var ue,Q=T.apply(void 0,Z),$=[Math.min(Q.x,Q.x+Q.width),Math.min(Q.y,Q.y+Q.height),Math.max(Q.x,Q.x+Q.width),Math.max(Q.y,Q.y+Q.height)],K=$[0],oe=$[1],j=$[2],H=$[3],G=s([K,oe,j,H],p),re=G[0],q=G[1],te=G[2],ne=G[3],le=r(V.level,v.length);if(null!=V.d&&("number"==typeof V.d?ue=[V.d,V.d]:V.d.length&&(ue=V.d),le=Math.min(Math.max(Math.ceil(-d(Math.abs(ue[0])/(p[2]-p[0]))),Math.ceil(-d(Math.abs(ue[1])/(p[3]-p[1])))),le)),le=Math.min(le,v.length),V.lod)return L(re,q,te,ne,le);var de=[];function he(ge,we,ke,De,Ee,Re){if(null!==Ee&&null!==Re&&!(re>ge+ke||q>we+ke||te<ge||ne<we||De>=le||Ee===Re)){var ve=v[De];void 0===Re&&(Re=ve.length);for(var Te=Ee;Te<Re;Te++){var Ie=ve[Te],Ce=i[2*Ie],Pe=i[2*Ie+1];Ce>=K&&Ce<=j&&Pe>=oe&&Pe<=H&&de.push(Ie)}var Ve=A[De],qe=Ve[4*Ee+0],Je=Ve[4*Ee+1],lt=Ve[4*Ee+2],He=Ve[4*Ee+3],$e=be(Ve,Ee+1),et=.5*ke,tt=De+1;he(ge,we,et,tt,qe,Je||lt||He||$e),he(ge,we+et,et,tt,Je,lt||He||$e),he(ge+et,we,et,tt,lt,He||$e),he(ge+et,we+et,et,tt,He,$e)}}function be(ge,we){for(var ke=null,De=0;null===ke;)if(ke=ge[4*we+De],++De>ge.length)return null;return ke}return he(0,0,1,0,0,1),de},y;function L(V,Z,Y,ee,Q){for(var $=[],K=0;K<Q;K++){var oe=M[K],j=k[K][0],H=B(V,Z,K),G=B(Y,ee,K),re=g.ge(oe,H),q=g.gt(oe,G,re,oe.length-1);$[K]=[re+j,q+j]}return $}function B(V,Z,Y){for(var ee=1,Q=.5,$=.5,K=.5,oe=0;oe<Y;oe++)ee<<=2,ee+=V<Q?Z<$?0:1:Z<$?2:3,K*=.5,Q+=V<Q?-K:K,$+=Z<$?-K:K;return ee}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(_,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var g=_("@turf/meta");function x(e){var r=0;if(e&&e.length>0){r+=Math.abs(T(e[0]));for(var t=1;t<e.length;t++)r-=Math.abs(T(e[t]))}return r}function T(e){var r,t,a,n,d,s,i=0,u=e.length;if(u>2){for(s=0;s<u;s++)s===u-2?(a=u-2,n=u-1,d=0):s===u-1?(a=u-1,n=0,d=1):(a=s,n=s+1,d=s+2),r=e[a],t=e[n],i+=(b(e[d][0])-b(r[0]))*Math.sin(b(t[1]));i=6378137*i*6378137/2}return i}function b(e){return e*Math.PI/180}ie.default=function(e){return g.geomReduce(e,function(r,t){return r+function(a){var n,d=0;switch(a.type){case"Polygon":return x(a.coordinates);case"MultiPolygon":for(n=0;n<a.coordinates.length;n++)d+=x(a.coordinates[n]);return d;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},{"@turf/meta":63}],62:[function(_,ae,ie){"use strict";function g(u,f,p){void 0===p&&(p={});var y={type:"Feature"};return(0===p.id||p.id)&&(y.id=p.id),p.bbox&&(y.bbox=p.bbox),y.properties=f||{},y.geometry=u,y}function x(u,f,p){if(void 0===p&&(p={}),!u)throw new Error("coordinates is required");if(!Array.isArray(u))throw new Error("coordinates must be an Array");if(u.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(u[0])||!i(u[1]))throw new Error("coordinates must contain numbers");return g({type:"Point",coordinates:u},f,p)}function T(u,f,p){void 0===p&&(p={});for(var y=0,m=u;y<m.length;y++){var l=m[y];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var w=0;w<l[l.length-1].length;w++)if(l[l.length-1][w]!==l[0][w])throw new Error("First and last Position are not equivalent.")}return g({type:"Polygon",coordinates:u},f,p)}function b(u,f,p){if(void 0===p&&(p={}),u.length<2)throw new Error("coordinates must be an array of two or more positions");return g({type:"LineString",coordinates:u},f,p)}function e(u,f){void 0===f&&(f={});var p={type:"FeatureCollection"};return f.id&&(p.id=f.id),f.bbox&&(p.bbox=f.bbox),p.features=u,p}function r(u,f,p){return void 0===p&&(p={}),g({type:"MultiLineString",coordinates:u},f,p)}function t(u,f,p){return void 0===p&&(p={}),g({type:"MultiPoint",coordinates:u},f,p)}function a(u,f,p){return void 0===p&&(p={}),g({type:"MultiPolygon",coordinates:u},f,p)}function n(u,f){void 0===f&&(f="kilometers");var p=ie.factors[f];if(!p)throw new Error(f+" units is invalid");return u*p}function d(u,f){void 0===f&&(f="kilometers");var p=ie.factors[f];if(!p)throw new Error(f+" units is invalid");return u/p}function s(u){return u%(2*Math.PI)*180/Math.PI}function i(u){return!isNaN(u)&&null!==u&&!Array.isArray(u)}Object.defineProperty(ie,"__esModule",{value:!0}),ie.earthRadius=6371008.8,ie.factors={centimeters:100*ie.earthRadius,centimetres:100*ie.earthRadius,degrees:ie.earthRadius/111325,feet:3.28084*ie.earthRadius,inches:39.37*ie.earthRadius,kilometers:ie.earthRadius/1e3,kilometres:ie.earthRadius/1e3,meters:ie.earthRadius,metres:ie.earthRadius,miles:ie.earthRadius/1609.344,millimeters:1e3*ie.earthRadius,millimetres:1e3*ie.earthRadius,nauticalmiles:ie.earthRadius/1852,radians:1,yards:1.0936*ie.earthRadius},ie.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ie.earthRadius,yards:1.0936133},ie.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ie.feature=g,ie.geometry=function(u,f,p){switch(void 0===p&&(p={}),u){case"Point":return x(f).geometry;case"LineString":return b(f).geometry;case"Polygon":return T(f).geometry;case"MultiPoint":return t(f).geometry;case"MultiLineString":return r(f).geometry;case"MultiPolygon":return a(f).geometry;default:throw new Error(u+" is invalid")}},ie.point=x,ie.points=function(u,f,p){return void 0===p&&(p={}),e(u.map(function(y){return x(y,f)}),p)},ie.polygon=T,ie.polygons=function(u,f,p){return void 0===p&&(p={}),e(u.map(function(y){return T(y,f)}),p)},ie.lineString=b,ie.lineStrings=function(u,f,p){return void 0===p&&(p={}),e(u.map(function(y){return b(y,f)}),p)},ie.featureCollection=e,ie.multiLineString=r,ie.multiPoint=t,ie.multiPolygon=a,ie.geometryCollection=function(u,f,p){return void 0===p&&(p={}),g({type:"GeometryCollection",geometries:u},f,p)},ie.round=function(u,f){if(void 0===f&&(f=0),f&&!(f>=0))throw new Error("precision must be a positive number");var p=Math.pow(10,f||0);return Math.round(u*p)/p},ie.radiansToLength=n,ie.lengthToRadians=d,ie.lengthToDegrees=function(u,f){return s(d(u,f))},ie.bearingToAzimuth=function(u){var f=u%360;return f<0&&(f+=360),f},ie.radiansToDegrees=s,ie.degreesToRadians=function(u){return u%360*Math.PI/180},ie.convertLength=function(u,f,p){if(void 0===f&&(f="kilometers"),void 0===p&&(p="kilometers"),!(u>=0))throw new Error("length must be a positive number");return n(d(u,f),p)},ie.convertArea=function(u,f,p){if(void 0===f&&(f="meters"),void 0===p&&(p="kilometers"),!(u>=0))throw new Error("area must be a positive number");var y=ie.areaFactors[f];if(!y)throw new Error("invalid original units");var m=ie.areaFactors[p];if(!m)throw new Error("invalid final units");return u/y*m},ie.isNumber=i,ie.isObject=function(u){return!!u&&u.constructor===Object},ie.validateBBox=function(u){if(!u)throw new Error("bbox is required");if(!Array.isArray(u))throw new Error("bbox must be an Array");if(4!==u.length&&6!==u.length)throw new Error("bbox must be an Array of 4 or 6 numbers");u.forEach(function(f){if(!i(f))throw new Error("bbox must only contain numbers")})},ie.validateId=function(u){if(!u)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof u))throw new Error("id must be a number or a string")}},{}],63:[function(_,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var g=_("@turf/helpers");function x(n,d,s){if(null!==n)for(var i,u,f,p,y,m,l,w,v=0,A=0,M=n.type,k="FeatureCollection"===M,E="Feature"===M,P=k?n.features.length:1,S=0;S<P;S++){y=(w=!!(l=k?n.features[S].geometry:E?n.geometry:n)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var F=0;F<y;F++){var R=0,D=0;if(null!==(p=w?l.geometries[F]:l)){m=p.coordinates;var L=p.type;switch(v=!s||"Polygon"!==L&&"MultiPolygon"!==L?0:1,L){case null:break;case"Point":if(!1===d(m,A,S,R,D))return!1;A++,R++;break;case"LineString":case"MultiPoint":for(i=0;i<m.length;i++){if(!1===d(m[i],A,S,R,D))return!1;A++,"MultiPoint"===L&&R++}"LineString"===L&&R++;break;case"Polygon":case"MultiLineString":for(i=0;i<m.length;i++){for(u=0;u<m[i].length-v;u++){if(!1===d(m[i][u],A,S,R,D))return!1;A++}"MultiLineString"===L&&R++,"Polygon"===L&&D++}"Polygon"===L&&R++;break;case"MultiPolygon":for(i=0;i<m.length;i++){for(D=0,u=0;u<m[i].length;u++){for(f=0;f<m[i][u].length-v;f++){if(!1===d(m[i][u][f],A,S,R,D))return!1;A++}D++}R++}break;case"GeometryCollection":for(i=0;i<p.geometries.length;i++)if(!1===x(p.geometries[i],d,s))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(n,d){var s;switch(n.type){case"FeatureCollection":for(s=0;s<n.features.length&&!1!==d(n.features[s].properties,s);s++);break;case"Feature":d(n.properties,0)}}function b(n,d){if("Feature"===n.type)d(n,0);else if("FeatureCollection"===n.type)for(var s=0;s<n.features.length&&!1!==d(n.features[s],s);s++);}function e(n,d){var s,i,u,f,p,y,m,l,w,v,A=0,M="FeatureCollection"===n.type,k="Feature"===n.type,E=M?n.features.length:1;for(s=0;s<E;s++){for(l=M?n.features[s].properties:k?n.properties:{},w=M?n.features[s].bbox:k?n.bbox:void 0,v=M?n.features[s].id:k?n.id:void 0,p=(m=!!(y=M?n.features[s].geometry:k?n.geometry:n)&&"GeometryCollection"===y.type)?y.geometries.length:1,u=0;u<p;u++)if(null!==(f=m?y.geometries[u]:y))switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===d(f,A,l,w,v))return!1;break;case"GeometryCollection":for(i=0;i<f.geometries.length;i++)if(!1===d(f.geometries[i],A,l,w,v))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===d(null,A,l,w,v))return!1;A++}}function r(n,d){e(n,function(s,i,u,f,p){var y,m=null===s?null:s.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return!1!==d(g.feature(s,u,{bbox:f,id:p}),i,0)&&void 0}switch(m){case"MultiPoint":y="Point";break;case"MultiLineString":y="LineString";break;case"MultiPolygon":y="Polygon"}for(var l=0;l<s.coordinates.length;l++)if(!1===d(g.feature({type:y,coordinates:s.coordinates[l]},u),i,l))return!1})}function t(n,d){r(n,function(s,i,u){var f=0;if(s.geometry){var p=s.geometry.type;if("Point"!==p&&"MultiPoint"!==p){var y,m=0,l=0,w=0;return!1!==x(s,function(v,A,M,k,E){if(void 0===y||i>m||k>l||E>w)return y=v,m=i,l=k,w=E,void(f=0);var P=g.lineString([y,v],s.properties);if(!1===d(P,i,u,E,f))return!1;f++,y=v})&&void 0}}})}function a(n,d){if(!n)throw new Error("geojson is required");r(n,function(s,i,u){if(null!==s.geometry){var p=s.geometry.coordinates;switch(s.geometry.type){case"LineString":if(!1===d(s,i,u,0,0))return!1;break;case"Polygon":for(var y=0;y<p.length;y++)if(!1===d(g.lineString(p[y],s.properties),i,u,y))return!1}}})}ie.coordEach=x,ie.coordReduce=function(n,d,s,i){var u=s;return x(n,function(f,p,y,m,l){u=0===p&&void 0===s?f:d(u,f,p,y,m,l)},i),u},ie.propEach=T,ie.propReduce=function(n,d,s){var i=s;return T(n,function(u,f){i=0===f&&void 0===s?u:d(i,u,f)}),i},ie.featureEach=b,ie.featureReduce=function(n,d,s){var i=s;return b(n,function(u,f){i=0===f&&void 0===s?u:d(i,u,f)}),i},ie.coordAll=function(n){var d=[];return x(n,function(s){d.push(s)}),d},ie.geomEach=e,ie.geomReduce=function(n,d,s){var i=s;return e(n,function(u,f,p,y,m){i=0===f&&void 0===s?u:d(i,u,f,p,y,m)}),i},ie.flattenEach=r,ie.flattenReduce=function(n,d,s){var i=s;return r(n,function(u,f,p){i=0===f&&0===p&&void 0===s?u:d(i,u,f,p)}),i},ie.segmentEach=t,ie.segmentReduce=function(n,d,s){var i=s,u=!1;return t(n,function(f,p,y,m,l){i=!1===u&&void 0===s?f:d(i,f,p,y,m,l),u=!0}),i},ie.lineEach=a,ie.lineReduce=function(n,d,s){var i=s;return a(n,function(u,f,p,y){i=0===f&&void 0===s?u:d(i,u,f,p,y)}),i},ie.findSegment=function(n,d){if(!g.isObject(d=d||{}))throw new Error("options is invalid");var s,i=d.featureIndex||0,u=d.multiFeatureIndex||0,f=d.geometryIndex||0,p=d.segmentIndex||0,y=d.properties;switch(n.type){case"FeatureCollection":i<0&&(i=n.features.length+i),y=y||n.features[i].properties,s=n.features[i].geometry;break;case"Feature":y=y||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var m=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=m.length+p-1),g.lineString([m[p],m[p+1]],y,d);case"Polygon":return f<0&&(f=m.length+f),p<0&&(p=m[f].length+p-1),g.lineString([m[f][p],m[f][p+1]],y,d);case"MultiLineString":return u<0&&(u=m.length+u),p<0&&(p=m[u].length+p-1),g.lineString([m[u][p],m[u][p+1]],y,d);case"MultiPolygon":return u<0&&(u=m.length+u),f<0&&(f=m[u].length+f),p<0&&(p=m[u][f].length-p-1),g.lineString([m[u][f][p],m[u][f][p+1]],y,d)}throw new Error("geojson is invalid")},ie.findPoint=function(n,d){if(!g.isObject(d=d||{}))throw new Error("options is invalid");var s,i=d.featureIndex||0,u=d.multiFeatureIndex||0,f=d.geometryIndex||0,p=d.coordIndex||0,y=d.properties;switch(n.type){case"FeatureCollection":i<0&&(i=n.features.length+i),y=y||n.features[i].properties,s=n.features[i].geometry;break;case"Feature":y=y||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var m=s.coordinates;switch(s.type){case"Point":return g.point(m,y,d);case"MultiPoint":return u<0&&(u=m.length+u),g.point(m[u],y,d);case"LineString":return p<0&&(p=m.length+p),g.point(m[p],y,d);case"Polygon":return f<0&&(f=m.length+f),p<0&&(p=m[f].length+p),g.point(m[f][p],y,d);case"MultiLineString":return u<0&&(u=m.length+u),p<0&&(p=m[u].length+p),g.point(m[u][p],y,d);case"MultiPolygon":return u<0&&(u=m.length+u),f<0&&(f=m[u].length+f),p<0&&(p=m[u][f].length-p),g.point(m[u][f][p],y,d)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(_,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var g=_("@turf/meta");function x(T){var b=[1/0,1/0,-1/0,-1/0];return g.coordEach(T,function(e){b[0]>e[0]&&(b[0]=e[0]),b[1]>e[1]&&(b[1]=e[1]),b[2]<e[0]&&(b[2]=e[0]),b[3]<e[1]&&(b[3]=e[1])}),b}x.default=x,ie.default=x},{"@turf/meta":66}],65:[function(_,ae,ie){arguments[4][62][0].apply(ie,arguments)},{dup:62}],66:[function(_,ae,ie){arguments[4][63][0].apply(ie,arguments)},{"@turf/helpers":65,dup:63}],67:[function(_,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var g=_("@turf/meta"),x=_("@turf/helpers");ie.default=function(T,b){void 0===b&&(b={});var e=0,r=0,t=0;return g.coordEach(T,function(a){e+=a[0],r+=a[1],t++}),x.point([e/t,r/t],b.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(_,ae,ie){"use strict";function g(u,f,p){void 0===p&&(p={});var y={type:"Feature"};return(0===p.id||p.id)&&(y.id=p.id),p.bbox&&(y.bbox=p.bbox),y.properties=f||{},y.geometry=u,y}function x(u,f,p){return void 0===p&&(p={}),g({type:"Point",coordinates:u},f,p)}function T(u,f,p){void 0===p&&(p={});for(var y=0,m=u;y<m.length;y++){var l=m[y];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var w=0;w<l[l.length-1].length;w++)if(l[l.length-1][w]!==l[0][w])throw new Error("First and last Position are not equivalent.")}return g({type:"Polygon",coordinates:u},f,p)}function b(u,f,p){if(void 0===p&&(p={}),u.length<2)throw new Error("coordinates must be an array of two or more positions");return g({type:"LineString",coordinates:u},f,p)}function e(u,f){void 0===f&&(f={});var p={type:"FeatureCollection"};return f.id&&(p.id=f.id),f.bbox&&(p.bbox=f.bbox),p.features=u,p}function r(u,f,p){return void 0===p&&(p={}),g({type:"MultiLineString",coordinates:u},f,p)}function t(u,f,p){return void 0===p&&(p={}),g({type:"MultiPoint",coordinates:u},f,p)}function a(u,f,p){return void 0===p&&(p={}),g({type:"MultiPolygon",coordinates:u},f,p)}function n(u,f){void 0===f&&(f="kilometers");var p=ie.factors[f];if(!p)throw new Error(f+" units is invalid");return u*p}function d(u,f){void 0===f&&(f="kilometers");var p=ie.factors[f];if(!p)throw new Error(f+" units is invalid");return u/p}function s(u){return u%(2*Math.PI)*180/Math.PI}function i(u){return!isNaN(u)&&null!==u&&!Array.isArray(u)&&!/^\s*$/.test(u)}Object.defineProperty(ie,"__esModule",{value:!0}),ie.earthRadius=6371008.8,ie.factors={centimeters:100*ie.earthRadius,centimetres:100*ie.earthRadius,degrees:ie.earthRadius/111325,feet:3.28084*ie.earthRadius,inches:39.37*ie.earthRadius,kilometers:ie.earthRadius/1e3,kilometres:ie.earthRadius/1e3,meters:ie.earthRadius,metres:ie.earthRadius,miles:ie.earthRadius/1609.344,millimeters:1e3*ie.earthRadius,millimetres:1e3*ie.earthRadius,nauticalmiles:ie.earthRadius/1852,radians:1,yards:ie.earthRadius/1.0936},ie.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ie.earthRadius,yards:1/1.0936},ie.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ie.feature=g,ie.geometry=function(u,f,p){switch(void 0===p&&(p={}),u){case"Point":return x(f).geometry;case"LineString":return b(f).geometry;case"Polygon":return T(f).geometry;case"MultiPoint":return t(f).geometry;case"MultiLineString":return r(f).geometry;case"MultiPolygon":return a(f).geometry;default:throw new Error(u+" is invalid")}},ie.point=x,ie.points=function(u,f,p){return void 0===p&&(p={}),e(u.map(function(y){return x(y,f)}),p)},ie.polygon=T,ie.polygons=function(u,f,p){return void 0===p&&(p={}),e(u.map(function(y){return T(y,f)}),p)},ie.lineString=b,ie.lineStrings=function(u,f,p){return void 0===p&&(p={}),e(u.map(function(y){return b(y,f)}),p)},ie.featureCollection=e,ie.multiLineString=r,ie.multiPoint=t,ie.multiPolygon=a,ie.geometryCollection=function(u,f,p){return void 0===p&&(p={}),g({type:"GeometryCollection",geometries:u},f,p)},ie.round=function(u,f){if(void 0===f&&(f=0),f&&!(f>=0))throw new Error("precision must be a positive number");var p=Math.pow(10,f||0);return Math.round(u*p)/p},ie.radiansToLength=n,ie.lengthToRadians=d,ie.lengthToDegrees=function(u,f){return s(d(u,f))},ie.bearingToAzimuth=function(u){var f=u%360;return f<0&&(f+=360),f},ie.radiansToDegrees=s,ie.degreesToRadians=function(u){return u%360*Math.PI/180},ie.convertLength=function(u,f,p){if(void 0===f&&(f="kilometers"),void 0===p&&(p="kilometers"),!(u>=0))throw new Error("length must be a positive number");return n(d(u,f),p)},ie.convertArea=function(u,f,p){if(void 0===f&&(f="meters"),void 0===p&&(p="kilometers"),!(u>=0))throw new Error("area must be a positive number");var y=ie.areaFactors[f];if(!y)throw new Error("invalid original units");var m=ie.areaFactors[p];if(!m)throw new Error("invalid final units");return u/y*m},ie.isNumber=i,ie.isObject=function(u){return!!u&&u.constructor===Object},ie.validateBBox=function(u){if(!u)throw new Error("bbox is required");if(!Array.isArray(u))throw new Error("bbox must be an Array");if(4!==u.length&&6!==u.length)throw new Error("bbox must be an Array of 4 or 6 numbers");u.forEach(function(f){if(!i(f))throw new Error("bbox must only contain numbers")})},ie.validateId=function(u){if(!u)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof u))throw new Error("id must be a number or a string")},ie.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},ie.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},ie.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},ie.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},ie.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},ie.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},ie.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(_,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var g=_("@turf/helpers");function x(n,d,s){if(null!==n)for(var i,u,f,p,y,m,l,w,v=0,A=0,M=n.type,k="FeatureCollection"===M,E="Feature"===M,P=k?n.features.length:1,S=0;S<P;S++){y=(w=!!(l=k?n.features[S].geometry:E?n.geometry:n)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var F=0;F<y;F++){var R=0,D=0;if(null!==(p=w?l.geometries[F]:l)){m=p.coordinates;var L=p.type;switch(v=!s||"Polygon"!==L&&"MultiPolygon"!==L?0:1,L){case null:break;case"Point":if(!1===d(m,A,S,R,D))return!1;A++,R++;break;case"LineString":case"MultiPoint":for(i=0;i<m.length;i++){if(!1===d(m[i],A,S,R,D))return!1;A++,"MultiPoint"===L&&R++}"LineString"===L&&R++;break;case"Polygon":case"MultiLineString":for(i=0;i<m.length;i++){for(u=0;u<m[i].length-v;u++){if(!1===d(m[i][u],A,S,R,D))return!1;A++}"MultiLineString"===L&&R++,"Polygon"===L&&D++}"Polygon"===L&&R++;break;case"MultiPolygon":for(i=0;i<m.length;i++){for(D=0,u=0;u<m[i].length;u++){for(f=0;f<m[i][u].length-v;f++){if(!1===d(m[i][u][f],A,S,R,D))return!1;A++}D++}R++}break;case"GeometryCollection":for(i=0;i<p.geometries.length;i++)if(!1===x(p.geometries[i],d,s))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(n,d){var s;switch(n.type){case"FeatureCollection":for(s=0;s<n.features.length&&!1!==d(n.features[s].properties,s);s++);break;case"Feature":d(n.properties,0)}}function b(n,d){if("Feature"===n.type)d(n,0);else if("FeatureCollection"===n.type)for(var s=0;s<n.features.length&&!1!==d(n.features[s],s);s++);}function e(n,d){var s,i,u,f,p,y,m,l,w,v,A=0,M="FeatureCollection"===n.type,k="Feature"===n.type,E=M?n.features.length:1;for(s=0;s<E;s++){for(l=M?n.features[s].properties:k?n.properties:{},w=M?n.features[s].bbox:k?n.bbox:void 0,v=M?n.features[s].id:k?n.id:void 0,p=(m=!!(y=M?n.features[s].geometry:k?n.geometry:n)&&"GeometryCollection"===y.type)?y.geometries.length:1,u=0;u<p;u++)if(null!==(f=m?y.geometries[u]:y))switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===d(f,A,l,w,v))return!1;break;case"GeometryCollection":for(i=0;i<f.geometries.length;i++)if(!1===d(f.geometries[i],A,l,w,v))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===d(null,A,l,w,v))return!1;A++}}function r(n,d){e(n,function(s,i,u,f,p){var y,m=null===s?null:s.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return!1!==d(g.feature(s,u,{bbox:f,id:p}),i,0)&&void 0}switch(m){case"MultiPoint":y="Point";break;case"MultiLineString":y="LineString";break;case"MultiPolygon":y="Polygon"}for(var l=0;l<s.coordinates.length;l++)if(!1===d(g.feature({type:y,coordinates:s.coordinates[l]},u),i,l))return!1})}function t(n,d){r(n,function(s,i,u){var f=0;if(s.geometry){var p=s.geometry.type;if("Point"!==p&&"MultiPoint"!==p){var y,m=0,l=0,w=0;return!1!==x(s,function(v,A,M,k,E){if(void 0===y||i>m||k>l||E>w)return y=v,m=i,l=k,w=E,void(f=0);var P=g.lineString([y,v],s.properties);if(!1===d(P,i,u,E,f))return!1;f++,y=v})&&void 0}}})}function a(n,d){if(!n)throw new Error("geojson is required");r(n,function(s,i,u){if(null!==s.geometry){var p=s.geometry.coordinates;switch(s.geometry.type){case"LineString":if(!1===d(s,i,u,0,0))return!1;break;case"Polygon":for(var y=0;y<p.length;y++)if(!1===d(g.lineString(p[y],s.properties),i,u,y))return!1}}})}ie.coordEach=x,ie.coordReduce=function(n,d,s,i){var u=s;return x(n,function(f,p,y,m,l){u=0===p&&void 0===s?f:d(u,f,p,y,m,l)},i),u},ie.propEach=T,ie.propReduce=function(n,d,s){var i=s;return T(n,function(u,f){i=0===f&&void 0===s?u:d(i,u,f)}),i},ie.featureEach=b,ie.featureReduce=function(n,d,s){var i=s;return b(n,function(u,f){i=0===f&&void 0===s?u:d(i,u,f)}),i},ie.coordAll=function(n){var d=[];return x(n,function(s){d.push(s)}),d},ie.geomEach=e,ie.geomReduce=function(n,d,s){var i=s;return e(n,function(u,f,p,y,m){i=0===f&&void 0===s?u:d(i,u,f,p,y,m)}),i},ie.flattenEach=r,ie.flattenReduce=function(n,d,s){var i=s;return r(n,function(u,f,p){i=0===f&&0===p&&void 0===s?u:d(i,u,f,p)}),i},ie.segmentEach=t,ie.segmentReduce=function(n,d,s){var i=s,u=!1;return t(n,function(f,p,y,m,l){i=!1===u&&void 0===s?f:d(i,f,p,y,m,l),u=!0}),i},ie.lineEach=a,ie.lineReduce=function(n,d,s){var i=s;return a(n,function(u,f,p,y){i=0===f&&void 0===s?u:d(i,u,f,p,y)}),i},ie.findSegment=function(n,d){if(!g.isObject(d=d||{}))throw new Error("options is invalid");var s,i=d.featureIndex||0,u=d.multiFeatureIndex||0,f=d.geometryIndex||0,p=d.segmentIndex||0,y=d.properties;switch(n.type){case"FeatureCollection":i<0&&(i=n.features.length+i),y=y||n.features[i].properties,s=n.features[i].geometry;break;case"Feature":y=y||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var m=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=m.length+p-1),g.lineString([m[p],m[p+1]],y,d);case"Polygon":return f<0&&(f=m.length+f),p<0&&(p=m[f].length+p-1),g.lineString([m[f][p],m[f][p+1]],y,d);case"MultiLineString":return u<0&&(u=m.length+u),p<0&&(p=m[u].length+p-1),g.lineString([m[u][p],m[u][p+1]],y,d);case"MultiPolygon":return u<0&&(u=m.length+u),f<0&&(f=m[u].length+f),p<0&&(p=m[u][f].length-p-1),g.lineString([m[u][f][p],m[u][f][p+1]],y,d)}throw new Error("geojson is invalid")},ie.findPoint=function(n,d){if(!g.isObject(d=d||{}))throw new Error("options is invalid");var s,i=d.featureIndex||0,u=d.multiFeatureIndex||0,f=d.geometryIndex||0,p=d.coordIndex||0,y=d.properties;switch(n.type){case"FeatureCollection":i<0&&(i=n.features.length+i),y=y||n.features[i].properties,s=n.features[i].geometry;break;case"Feature":y=y||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var m=s.coordinates;switch(s.type){case"Point":return g.point(m,y,d);case"MultiPoint":return u<0&&(u=m.length+u),g.point(m[u],y,d);case"LineString":return p<0&&(p=m.length+p),g.point(m[p],y,d);case"Polygon":return f<0&&(f=m.length+f),p<0&&(p=m[f].length+p),g.point(m[f][p],y,d);case"MultiLineString":return u<0&&(u=m.length+u),p<0&&(p=m[u].length+p),g.point(m[u][p],y,d);case"MultiPolygon":return u<0&&(u=m.length+u),f<0&&(f=m[u].length+f),p<0&&(p=m[u][f].length-p),g.point(m[u][f][p],y,d)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(_,ae,ie){ae.exports=function(g){var x=0,T=0,b=0,e=0;return g.map(function(r){var t=(r=r.slice())[0],a=t.toUpperCase();if(t!=a)switch(r[0]=a,t){case"a":r[6]+=b,r[7]+=e;break;case"v":r[1]+=e;break;case"h":r[1]+=b;break;default:for(var n=1;n<r.length;)r[n++]+=b,r[n++]+=e}switch(a){case"Z":b=x,e=T;break;case"H":b=r[1];break;case"V":e=r[1];break;case"M":b=x=r[1],e=T=r[2];break;default:b=r[r.length-2],e=r[r.length-1]}return r})}},{}],71:[function(_,ae,ie){"use strict";ae.exports=function(g,x){if(!g||null==g.length)throw Error("Argument should be an array");x=null==x?1:Math.floor(x);for(var T=Array(2*x),b=0;b<x;b++){for(var e=-1/0,r=1/0,t=b,a=g.length;t<a;t+=x)g[t]>e&&(e=g[t]),g[t]<r&&(r=g[t]);T[b]=r,T[x+b]=e}return T}},{}],72:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T){if("function"==typeof Array.prototype.findIndex)return g.findIndex(x,T);if("function"!=typeof x)throw new TypeError("predicate must be a function");var b=Object(g),e=b.length;if(0===e)return-1;for(var r=0;r<e;r++)if(x.call(T,b[r],r,b))return r;return-1}},{}],73:[function(_,ae,ie){"use strict";var g=_("array-bounds");ae.exports=function(x,T,b){if(!x||null==x.length)throw Error("Argument should be an array");null==T&&(T=1),null==b&&(b=g(x,T));for(var e=0;e<T;e++){var r=b[T+e],t=b[e],a=e,n=x.length;if(r===1/0&&t===-1/0)for(a=e;a<n;a+=T)x[a]=x[a]===r?1:x[a]===t?0:.5;else if(r===1/0)for(a=e;a<n;a+=T)x[a]=x[a]===r?1:0;else if(t===-1/0)for(a=e;a<n;a+=T)x[a]=x[a]===t?0:1;else{var d=r-t;for(a=e;a<n;a+=T)isNaN(x[a])||(x[a]=0===d?.5:(x[a]-t)/d)}}return x}},{"array-bounds":71}],74:[function(_,ae,ie){ae.exports=function(g,x){var T="number"==typeof g,b="number"==typeof x;T&&!b?(x=g,g=0):T||b||(g=0,x=0);var e=(x|=0)-(g|=0);if(e<0)throw new Error("array length must be positive");for(var r=new Array(e),t=0,a=g;t<e;t++,a++)r[t]=a;return r}},{}],75:[function(_,ae,ie){(function(g){(function(){"use strict";var x=_("object-assign");function T(k,E){if(k===E)return 0;for(var P=k.length,S=E.length,F=0,R=Math.min(P,S);F<R;++F)if(k[F]!==E[F]){P=k[F],S=E[F];break}return P<S?-1:S<P?1:0}function b(k){return g.Buffer&&"function"==typeof g.Buffer.isBuffer?g.Buffer.isBuffer(k):!(null==k||!k._isBuffer)}var e=_("util/"),r=Object.prototype.hasOwnProperty,t=Array.prototype.slice,a="foo"===function(){}.name;function n(k){return Object.prototype.toString.call(k)}function d(k){return!b(k)&&"function"==typeof g.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(k):!!k&&(k instanceof DataView||!!(k.buffer&&k.buffer instanceof ArrayBuffer)))}var s=ae.exports=m,i=/\s*function\s+([^\(\s]*)\s*/;function u(k){if(e.isFunction(k)){if(a)return k.name;var E=k.toString().match(i);return E&&E[1]}}function f(k,E){return"string"==typeof k?k.length<E?k:k.slice(0,E):k}function p(k){if(a||!e.isFunction(k))return e.inspect(k);var E=u(k);return"[Function"+(E?": "+E:"")+"]"}function y(k,E,P,S,F){throw new s.AssertionError({message:P,actual:k,expected:E,operator:S,stackStartFunction:F})}function m(k,E){k||y(k,!0,E,"==",s.ok)}function l(k,E,P,S){if(k===E)return!0;if(b(k)&&b(E))return 0===T(k,E);if(e.isDate(k)&&e.isDate(E))return k.getTime()===E.getTime();if(e.isRegExp(k)&&e.isRegExp(E))return k.source===E.source&&k.global===E.global&&k.multiline===E.multiline&&k.lastIndex===E.lastIndex&&k.ignoreCase===E.ignoreCase;if(null!==k&&"object"==typeof k||null!==E&&"object"==typeof E){if(d(k)&&d(E)&&n(k)===n(E)&&!(k instanceof Float32Array||k instanceof Float64Array))return 0===T(new Uint8Array(k.buffer),new Uint8Array(E.buffer));if(b(k)!==b(E))return!1;var F=(S=S||{actual:[],expected:[]}).actual.indexOf(k);return-1!==F&&F===S.expected.indexOf(E)||(S.actual.push(k),S.expected.push(E),function(R,D,L,B){if(null==R||null==D)return!1;if(e.isPrimitive(R)||e.isPrimitive(D))return R===D;if(L&&Object.getPrototypeOf(R)!==Object.getPrototypeOf(D))return!1;var V=w(R),Z=w(D);if(V&&!Z||!V&&Z)return!1;if(V)return l(R=t.call(R),D=t.call(D),L);var Y,ee,Q=M(R),$=M(D);if(Q.length!==$.length)return!1;for(Q.sort(),$.sort(),ee=Q.length-1;ee>=0;ee--)if(Q[ee]!==$[ee])return!1;for(ee=Q.length-1;ee>=0;ee--)if(!l(R[Y=Q[ee]],D[Y],L,B))return!1;return!0}(k,E,P,S))}return P?k===E:k==E}function w(k){return"[object Arguments]"==Object.prototype.toString.call(k)}function v(k,E){if(!k||!E)return!1;if("[object RegExp]"==Object.prototype.toString.call(E))return E.test(k);try{if(k instanceof E)return!0}catch(P){}return!Error.isPrototypeOf(E)&&!0===E.call({},k)}function A(k,E,P,S){var F;if("function"!=typeof E)throw new TypeError('"block" argument must be a function');"string"==typeof P&&(S=P,P=null),F=function(L){var B;try{L()}catch(V){B=V}return B}(E),S=(P&&P.name?" ("+P.name+").":".")+(S?" "+S:"."),k&&!F&&y(F,P,"Missing expected exception"+S);var R="string"==typeof S,D=!k&&F&&!P;if((!k&&e.isError(F)&&R&&v(F,P)||D)&&y(F,P,"Got unwanted exception"+S),k&&F&&P&&!v(F,P)||!k&&F)throw F}s.AssertionError=function(k){this.name="AssertionError",this.actual=k.actual,this.expected=k.expected,this.operator=k.operator,k.message?(this.message=k.message,this.generatedMessage=!1):(this.message=f(p(this.actual),128)+" "+this.operator+" "+f(p(this.expected),128),this.generatedMessage=!0);var E=k.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,E);else{var P=new Error;if(P.stack){var S=P.stack,F=u(E),R=S.indexOf("\n"+F);if(R>=0){var D=S.indexOf("\n",R+1);S=S.substring(D+1)}this.stack=S}}},e.inherits(s.AssertionError,Error),s.fail=y,s.ok=m,s.equal=function(k,E,P){k!=E&&y(k,E,P,"==",s.equal)},s.notEqual=function(k,E,P){k==E&&y(k,E,P,"!=",s.notEqual)},s.deepEqual=function(k,E,P){l(k,E,!1)||y(k,E,P,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(k,E,P){l(k,E,!0)||y(k,E,P,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(k,E,P){l(k,E,!1)&&y(k,E,P,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=function k(E,P,S){l(E,P,!0)&&y(E,P,S,"notDeepStrictEqual",k)},s.strictEqual=function(k,E,P){k!==E&&y(k,E,P,"===",s.strictEqual)},s.notStrictEqual=function(k,E,P){k===E&&y(k,E,P,"!==",s.notStrictEqual)},s.throws=function(k,E,P){A(!0,k,E,P)},s.doesNotThrow=function(k,E,P){A(!1,k,E,P)},s.ifError=function(k){if(k)throw k},s.strict=x(function k(E,P){E||y(E,!0,P,"==",k)},s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var M=Object.keys||function(k){var E=[];for(var P in k)r.call(k,P)&&E.push(P);return E}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":247,"util/":78}],76:[function(_,ae,ie){ae.exports="function"==typeof Object.create?function(g,x){g.super_=x,g.prototype=Object.create(x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}})}:function(g,x){g.super_=x;var T=function(){};T.prototype=x.prototype,g.prototype=new T,g.prototype.constructor=g}},{}],77:[function(_,ae,ie){ae.exports=function(g){return g&&"object"==typeof g&&"function"==typeof g.copy&&"function"==typeof g.fill&&"function"==typeof g.readUInt8}},{}],78:[function(_,ae,ie){(function(g,x){(function(){var T=/%[sdj%]/g;ie.format=function(R){if(!y(R)){for(var D=[],L=0;L<arguments.length;L++)D.push(r(arguments[L]));return D.join(" ")}L=1;for(var B=arguments,V=B.length,Z=String(R).replace(T,function(ee){if("%%"===ee)return"%";if(L>=V)return ee;switch(ee){case"%s":return String(B[L++]);case"%d":return Number(B[L++]);case"%j":try{return JSON.stringify(B[L++])}catch(Q){return"[Circular]"}default:return ee}}),Y=B[L];L<V;Y=B[++L])f(Y)||!w(Y)?Z+=" "+Y:Z+=" "+r(Y);return Z},ie.deprecate=function(R,D){if(m(x.process))return function(){return ie.deprecate(R,D).apply(this,arguments)};if(!0===g.noDeprecation)return R;var L=!1;return function(){if(!L){if(g.throwDeprecation)throw new Error(D);g.traceDeprecation?console.trace(D):console.error(D),L=!0}return R.apply(this,arguments)}};var b,e={};function r(R,D){var L={seen:[],stylize:a};return arguments.length>=3&&(L.depth=arguments[2]),arguments.length>=4&&(L.colors=arguments[3]),u(D)?L.showHidden=D:D&&ie._extend(L,D),m(L.showHidden)&&(L.showHidden=!1),m(L.depth)&&(L.depth=2),m(L.colors)&&(L.colors=!1),m(L.customInspect)&&(L.customInspect=!0),L.colors&&(L.stylize=t),n(L,R,L.depth)}function t(R,D){var L=r.styles[D];return L?"\x1b["+r.colors[L][0]+"m"+R+"\x1b["+r.colors[L][1]+"m":R}function a(R,D){return R}function n(R,D,L){if(R.customInspect&&D&&M(D.inspect)&&D.inspect!==ie.inspect&&(!D.constructor||D.constructor.prototype!==D)){var B=D.inspect(L,R);return y(B)||(B=n(R,B,L)),B}var V=function(j,H){if(m(H))return j.stylize("undefined","undefined");if(y(H)){var G="'"+JSON.stringify(H).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return j.stylize(G,"string")}return p(H)?j.stylize(""+H,"number"):u(H)?j.stylize(""+H,"boolean"):f(H)?j.stylize("null","null"):void 0}(R,D);if(V)return V;var H,Z=Object.keys(D),Y=(H={},Z.forEach(function(G,re){H[G]=!0}),H);if(R.showHidden&&(Z=Object.getOwnPropertyNames(D)),A(D)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return d(D);if(0===Z.length){if(M(D))return R.stylize("[Function"+(D.name?": "+D.name:"")+"]","special");if(l(D))return R.stylize(RegExp.prototype.toString.call(D),"regexp");if(v(D))return R.stylize(Date.prototype.toString.call(D),"date");if(A(D))return d(D)}var Q,$="",K=!1,oe=["{","}"];return i(D)&&(K=!0,oe=["[","]"]),M(D)&&($=" [Function"+(D.name?": "+D.name:"")+"]"),l(D)&&($=" "+RegExp.prototype.toString.call(D)),v(D)&&($=" "+Date.prototype.toUTCString.call(D)),A(D)&&($=" "+d(D)),0!==Z.length||K&&0!=D.length?L<0?l(D)?R.stylize(RegExp.prototype.toString.call(D),"regexp"):R.stylize("[Object]","special"):(R.seen.push(D),Q=K?function(j,H,G,re,q){for(var te=[],ne=0,le=H.length;ne<le;++ne)F(H,String(ne))?te.push(s(j,H,G,re,String(ne),!0)):te.push("");return q.forEach(function(ue){ue.match(/^\d+$/)||te.push(s(j,H,G,re,ue,!0))}),te}(R,D,L,Y,Z):Z.map(function(j){return s(R,D,L,Y,j,K)}),R.seen.pop(),function(j,H,G){return j.reduce(function(re,q){return q.indexOf("\n"),re+q.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?G[0]+(""===H?"":H+"\n ")+" "+j.join(",\n  ")+" "+G[1]:G[0]+H+" "+j.join(", ")+" "+G[1]}(Q,$,oe)):oe[0]+$+oe[1]}function d(R){return"["+Error.prototype.toString.call(R)+"]"}function s(R,D,L,B,V,Z){var Y,ee,Q;if((Q=Object.getOwnPropertyDescriptor(D,V)||{value:D[V]}).get?ee=R.stylize(Q.set?"[Getter/Setter]":"[Getter]","special"):Q.set&&(ee=R.stylize("[Setter]","special")),F(B,V)||(Y="["+V+"]"),ee||(R.seen.indexOf(Q.value)<0?(ee=f(L)?n(R,Q.value,null):n(R,Q.value,L-1)).indexOf("\n")>-1&&(ee=Z?ee.split("\n").map(function($){return"  "+$}).join("\n").substr(2):"\n"+ee.split("\n").map(function($){return"   "+$}).join("\n")):ee=R.stylize("[Circular]","special")),m(Y)){if(Z&&V.match(/^\d+$/))return ee;(Y=JSON.stringify(""+V)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Y=Y.substr(1,Y.length-2),Y=R.stylize(Y,"name")):(Y=Y.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Y=R.stylize(Y,"string"))}return Y+": "+ee}function i(R){return Array.isArray(R)}function u(R){return"boolean"==typeof R}function f(R){return null===R}function p(R){return"number"==typeof R}function y(R){return"string"==typeof R}function m(R){return void 0===R}function l(R){return w(R)&&"[object RegExp]"===k(R)}function w(R){return"object"==typeof R&&null!==R}function v(R){return w(R)&&"[object Date]"===k(R)}function A(R){return w(R)&&("[object Error]"===k(R)||R instanceof Error)}function M(R){return"function"==typeof R}function k(R){return Object.prototype.toString.call(R)}function E(R){return R<10?"0"+R.toString(10):R.toString(10)}ie.debuglog=function(R){if(m(b)&&(b=g.env.NODE_DEBUG||""),R=R.toUpperCase(),!e[R])if(new RegExp("\\b"+R+"\\b","i").test(b)){var D=g.pid;e[R]=function(){var L=ie.format.apply(ie,arguments);console.error("%s %d: %s",R,D,L)}}else e[R]=function(){};return e[R]},ie.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ie.isArray=i,ie.isBoolean=u,ie.isNull=f,ie.isNullOrUndefined=function(R){return null==R},ie.isNumber=p,ie.isString=y,ie.isSymbol=function(R){return"symbol"==typeof R},ie.isUndefined=m,ie.isRegExp=l,ie.isObject=w,ie.isDate=v,ie.isError=A,ie.isFunction=M,ie.isPrimitive=function(R){return null===R||"boolean"==typeof R||"number"==typeof R||"string"==typeof R||"symbol"==typeof R||void 0===R},ie.isBuffer=_("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(){var R=new Date,D=[E(R.getHours()),E(R.getMinutes()),E(R.getSeconds())].join(":");return[R.getDate(),P[R.getMonth()],D].join(" ")}function F(R,D){return Object.prototype.hasOwnProperty.call(R,D)}ie.log=function(){console.log("%s - %s",S(),ie.format.apply(ie,arguments))},ie.inherits=_("inherits"),ie._extend=function(R,D){if(!D||!w(D))return R;for(var L=Object.keys(D),B=L.length;B--;)R[L[B]]=D[L[B]];return R}}).call(this)}).call(this,_("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(_,ae,ie){"use strict";ie.byteLength=function(n){var d=t(n),i=d[1];return 3*(d[0]+i)/4-i},ie.toByteArray=function(n){var d,s,v,i=t(n),u=i[0],f=i[1],p=new T(3*(u+(v=f))/4-v),y=0,m=f>0?u-4:u;for(s=0;s<m;s+=4)d=x[n.charCodeAt(s)]<<18|x[n.charCodeAt(s+1)]<<12|x[n.charCodeAt(s+2)]<<6|x[n.charCodeAt(s+3)],p[y++]=d>>16&255,p[y++]=d>>8&255,p[y++]=255&d;return 2===f&&(d=x[n.charCodeAt(s)]<<2|x[n.charCodeAt(s+1)]>>4,p[y++]=255&d),1===f&&(d=x[n.charCodeAt(s)]<<10|x[n.charCodeAt(s+1)]<<4|x[n.charCodeAt(s+2)]>>2,p[y++]=d>>8&255,p[y++]=255&d),p},ie.fromByteArray=function(n){for(var d,s=n.length,i=s%3,u=[],f=0,p=s-i;f<p;f+=16383)u.push(a(n,f,f+16383>p?p:f+16383));return 1===i?u.push(g[(d=n[s-1])>>2]+g[d<<4&63]+"=="):2===i&&u.push(g[(d=(n[s-2]<<8)+n[s-1])>>10]+g[d>>4&63]+g[d<<2&63]+"="),u.join("")};for(var g=[],x=[],T="undefined"!=typeof Uint8Array?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=b.length;e<r;++e)g[e]=b[e],x[b.charCodeAt(e)]=e;function t(n){var d=n.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=n.indexOf("=");return-1===s&&(s=d),[s,s===d?0:4-s%4]}function a(n,d,s){for(var u,f=[],p=d;p<s;p+=3)f.push(g[(u=(n[p]<<16&16711680)+(n[p+1]<<8&65280)+(255&n[p+2]))>>18&63]+g[u>>12&63]+g[u>>6&63]+g[63&u]);return f.join("")}x["-".charCodeAt(0)]=62,x["_".charCodeAt(0)]=63},{}],80:[function(_,ae,ie){"use strict";function g(t,a,n,d,s){for(var i=s+1;d<=s;){var u=d+s>>>1,f=t[u];(void 0!==n?n(f,a):f-a)>=0?(i=u,s=u-1):d=u+1}return i}function x(t,a,n,d,s){for(var i=s+1;d<=s;){var u=d+s>>>1,f=t[u];(void 0!==n?n(f,a):f-a)>0?(i=u,s=u-1):d=u+1}return i}function T(t,a,n,d,s){for(var i=d-1;d<=s;){var u=d+s>>>1,f=t[u];(void 0!==n?n(f,a):f-a)<0?(i=u,d=u+1):s=u-1}return i}function b(t,a,n,d,s){for(var i=d-1;d<=s;){var u=d+s>>>1,f=t[u];(void 0!==n?n(f,a):f-a)<=0?(i=u,d=u+1):s=u-1}return i}function e(t,a,n,d,s){for(;d<=s;){var i=d+s>>>1,u=t[i],f=void 0!==n?n(u,a):u-a;if(0===f)return i;f<=0?d=i+1:s=i-1}return-1}function r(t,a,n,d,s,i){return"function"==typeof n?i(t,a,n,void 0===d?0:0|d,void 0===s?t.length-1:0|s):i(t,a,void 0,void 0===n?0:0|n,void 0===d?t.length-1:0|d)}ae.exports={ge:function(t,a,n,d,s){return r(t,a,n,d,s,g)},gt:function(t,a,n,d,s){return r(t,a,n,d,s,x)},lt:function(t,a,n,d,s){return r(t,a,n,d,s,T)},le:function(t,a,n,d,s){return r(t,a,n,d,s,b)},eq:function(t,a,n,d,s){return r(t,a,n,d,s,e)}}},{}],81:[function(_,ae,ie){"use strict";function g(T){var b=32;return(T&=-T)&&b--,65535&T&&(b-=16),16711935&T&&(b-=8),252645135&T&&(b-=4),858993459&T&&(b-=2),1431655765&T&&(b-=1),b}ie.INT_BITS=32,ie.INT_MAX=2147483647,ie.INT_MIN=-1<<31,ie.sign=function(T){return(T>0)-(T<0)},ie.abs=function(T){var b=T>>31;return(T^b)-b},ie.min=function(T,b){return b^(T^b)&-(T<b)},ie.max=function(T,b){return T^(T^b)&-(T<b)},ie.isPow2=function(T){return!(T&T-1||!T)},ie.log2=function(T){var b,e;return b=(T>65535)<<4,b|=e=((T>>>=b)>255)<<3,b|=e=((T>>>=e)>15)<<2,(b|=e=((T>>>=e)>3)<<1)|(T>>>=e)>>1},ie.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},ie.popCount=function(T){return 16843009*((T=(858993459&(T-=T>>>1&1431655765))+(T>>>2&858993459))+(T>>>4)&252645135)>>>24},ie.countTrailingZeros=g,ie.nextPow2=function(T){return T+=0===T,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,1+((T|=T>>>8)|T>>>16)},ie.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,(T|=T>>>16)-(T>>>1)},ie.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,27030>>>(T&=15)&1};var x=new Array(256);(function(T){for(var b=0;b<256;++b){var e=b,r=b,t=7;for(e>>>=1;e;e>>>=1)r<<=1,r|=1&e,--t;T[b]=r<<t&255}})(x),ie.reverse=function(T){return x[255&T]<<24|x[T>>>8&255]<<16|x[T>>>16&255]<<8|x[T>>>24&255]},ie.interleave2=function(T,b){return(T=1431655765&((T=858993459&((T=252645135&((T=16711935&((T&=65535)|T<<8))|T<<4))|T<<2))|T<<1))|(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b&=65535)|b<<8))|b<<4))|b<<2))|b<<1))<<1},ie.deinterleave2=function(T,b){return(T=65535&((T=16711935&((T=252645135&((T=858993459&((T=T>>>b&1431655765)|T>>>1))|T>>>2))|T>>>4))|T>>>16))<<16>>16},ie.interleave3=function(T,b,e){return T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2),(T|=(b=1227133513&((b=3272356035&((b=251719695&((b=4278190335&((b&=1023)|b<<16))|b<<8))|b<<4))|b<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},ie.deinterleave3=function(T,b){return(T=1023&((T=4278190335&((T=251719695&((T=3272356035&((T=T>>>b&1227133513)|T>>>2))|T>>>4))|T>>>8))|T>>>16))<<22>>22},ie.nextCombination=function(T){var b=T|T-1;return b+1|(~b&-~b)-1>>>g(T)+1}},{}],82:[function(_,ae,ie){"use strict";var g=_("clamp");ae.exports=function(e,r){r||(r={});var t,a,n,d,s,i,f,y,m,l=null==r.cutoff?.25:r.cutoff,w=null==r.radius?8:r.radius,v=r.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!r.width||!r.height)throw Error("For raw data width and height should be provided by options");t=r.width,a=r.height,d=e,i=r.stride?r.stride:Math.floor(e.length/t/a)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(d=(f=e).getContext("2d").getImageData(0,0,t=f.width,a=f.height).data,i=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(d=e.getImageData(0,0,t=(f=e.canvas).width,a=f.height).data,i=4):window.ImageData&&e instanceof window.ImageData&&(t=e.width,a=e.height,d=e.data,i=4);if(n=Math.max(t,a),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(s=d,d=Array(t*a),y=0,m=s.length;y<m;y++)d[y]=s[y*i+v]/255;else if(1!==i)throw Error("Raw data can have only 1 value per pixel");var A=Array(t*a),M=Array(t*a),k=Array(n),E=Array(n),P=Array(n+1),S=Array(n);for(y=0,m=t*a;y<m;y++){var F=d[y];A[y]=1===F?0:0===F?x:Math.pow(Math.max(0,.5-F),2),M[y]=1===F?x:0===F?0:Math.pow(Math.max(0,F-.5),2)}T(A,t,a,k,E,S,P),T(M,t,a,k,E,S,P);var R=window.Float32Array?new Float32Array(t*a):new Array(t*a);for(y=0,m=t*a;y<m;y++)R[y]=g(1-((A[y]-M[y])/w+l),0,1);return R};var x=1e20;function T(e,r,t,a,n,d,s){for(var i=0;i<r;i++){for(var u=0;u<t;u++)a[u]=e[u*r+i];for(b(a,n,d,s,t),u=0;u<t;u++)e[u*r+i]=n[u]}for(u=0;u<t;u++){for(i=0;i<r;i++)a[i]=e[u*r+i];for(b(a,n,d,s,r),i=0;i<r;i++)e[u*r+i]=Math.sqrt(n[i])}}function b(e,r,t,a,n){t[0]=0,a[0]=-x,a[1]=+x;for(var d=1,s=0;d<n;d++){for(var i=(e[d]+d*d-(e[t[s]]+t[s]*t[s]))/(2*d-2*t[s]);i<=a[s];)s--,i=(e[d]+d*d-(e[t[s]]+t[s]*t[s]))/(2*d-2*t[s]);t[++s]=d,a[s]=i,a[s+1]=+x}for(d=0,s=0;d<n;d++){for(;a[s+1]<d;)s++;r[d]=(d-t[s])*(d-t[s])+e[t[s]]}}},{clamp:86}],83:[function(_,ae,ie){},{}],84:[function(_,ae,ie){"use strict";var g,x="object"==typeof Reflect?Reflect:null,T=x&&"function"==typeof x.apply?x.apply:function(p,y,m){return Function.prototype.apply.call(p,y,m)};g=x&&"function"==typeof x.ownKeys?x.ownKeys:Object.getOwnPropertySymbols?function(p){return Object.getOwnPropertyNames(p).concat(Object.getOwnPropertySymbols(p))}:function(p){return Object.getOwnPropertyNames(p)};var b=Number.isNaN||function(p){return p!=p};function e(){e.init.call(this)}ae.exports=e,ae.exports.once=function(p,y){return new Promise(function(m,l){function w(){void 0!==v&&p.removeListener("error",v),m([].slice.call(arguments))}var v;"error"!==y&&(v=function(A){p.removeListener(y,w),l(A)},p.once("error",v)),p.once(y,w)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function t(p){if("function"!=typeof p)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof p)}function a(p){return void 0===p._maxListeners?e.defaultMaxListeners:p._maxListeners}function n(p,y,m,l){var w,v,A;if(t(m),void 0===(v=p._events)?(v=p._events=Object.create(null),p._eventsCount=0):(void 0!==v.newListener&&(p.emit("newListener",y,m.listener?m.listener:m),v=p._events),A=v[y]),void 0===A)A=v[y]=m,++p._eventsCount;else if("function"==typeof A?A=v[y]=l?[m,A]:[A,m]:l?A.unshift(m):A.push(m),(w=a(p))>0&&A.length>w&&!A.warned){A.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=p,k.type=y,k.count=A.length,console&&console.warn&&console.warn(k)}return p}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(p,y,m){var l={fired:!1,wrapFn:void 0,target:p,type:y,listener:m},w=d.bind(l);return w.listener=m,l.wrapFn=w,w}function i(p,y,m){var l=p._events;if(void 0===l)return[];var w=l[y];return void 0===w?[]:"function"==typeof w?m?[w.listener||w]:[w]:m?function(v){for(var A=new Array(v.length),M=0;M<A.length;++M)A[M]=v[M].listener||v[M];return A}(w):f(w,w.length)}function u(p){var y=this._events;if(void 0!==y){var m=y[p];if("function"==typeof m)return 1;if(void 0!==m)return m.length}return 0}function f(p,y){for(var m=new Array(y),l=0;l<y;++l)m[l]=p[l];return m}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(p){if("number"!=typeof p||p<0||b(p))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+p+".");r=p}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(p){if("number"!=typeof p||p<0||b(p))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+p+".");return this._maxListeners=p,this},e.prototype.getMaxListeners=function(){return a(this)},e.prototype.emit=function(p){for(var y=[],m=1;m<arguments.length;m++)y.push(arguments[m]);var l="error"===p,w=this._events;if(void 0!==w)l=l&&void 0===w.error;else if(!l)return!1;if(l){var v;if(y.length>0&&(v=y[0]),v instanceof Error)throw v;var A=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw A.context=v,A}var M=w[p];if(void 0===M)return!1;if("function"==typeof M)T(M,this,y);else{var k=M.length,E=f(M,k);for(m=0;m<k;++m)T(E[m],this,y)}return!0},e.prototype.on=e.prototype.addListener=function(p,y){return n(this,p,y,!1)},e.prototype.prependListener=function(p,y){return n(this,p,y,!0)},e.prototype.once=function(p,y){return t(y),this.on(p,s(this,p,y)),this},e.prototype.prependOnceListener=function(p,y){return t(y),this.prependListener(p,s(this,p,y)),this},e.prototype.off=e.prototype.removeListener=function(p,y){var m,l,w,v,A;if(t(y),void 0===(l=this._events))return this;if(void 0===(m=l[p]))return this;if(m===y||m.listener===y)0==--this._eventsCount?this._events=Object.create(null):(delete l[p],l.removeListener&&this.emit("removeListener",p,m.listener||y));else if("function"!=typeof m){for(w=-1,v=m.length-1;v>=0;v--)if(m[v]===y||m[v].listener===y){A=m[v].listener,w=v;break}if(w<0)return this;0===w?m.shift():function(M,k){for(;k+1<M.length;k++)M[k]=M[k+1];M.pop()}(m,w),1===m.length&&(l[p]=m[0]),void 0!==l.removeListener&&this.emit("removeListener",p,A||y)}return this},e.prototype.removeAllListeners=function(p){var y,m,l;if(void 0===(m=this._events))return this;if(void 0===m.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==m[p]&&(0==--this._eventsCount?this._events=Object.create(null):delete m[p]),this;if(0===arguments.length){var w,v=Object.keys(m);for(l=0;l<v.length;++l)"removeListener"!==(w=v[l])&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(y=m[p]))this.removeListener(p,y);else if(void 0!==y)for(l=y.length-1;l>=0;l--)this.removeListener(p,y[l]);return this},e.prototype.listeners=function(p){return i(this,p,!0)},e.prototype.rawListeners=function(p){return i(this,p,!1)},e.listenerCount=function(p,y){return"function"==typeof p.listenerCount?p.listenerCount(y):u.call(p,y)},e.prototype.listenerCount=u,e.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},{}],85:[function(_,ae,ie){(function(g){(function(){"use strict";var x=_("base64-js"),T=_("ieee754");function b(j){if(j>2147483647)throw new RangeError('The value "'+j+'" is invalid for option "size"');var H=new Uint8Array(j);return H.__proto__=e.prototype,H}function e(j,H,G){if("number"==typeof j){if("string"==typeof H)throw new TypeError('The "string" argument must be of type string. Received type number');return a(j)}return r(j,H,G)}function r(j,H,G){if("string"==typeof j)return function(te,ne){if("string"==typeof ne&&""!==ne||(ne="utf8"),!e.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);var le=0|s(te,ne),ue=b(le),de=ue.write(te,ne);return de!==le&&(ue=ue.slice(0,de)),ue}(j,H);if(ArrayBuffer.isView(j))return n(j);if(null==j)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(K(j,ArrayBuffer)||j&&K(j.buffer,ArrayBuffer))return function(te,ne,le){if(ne<0||te.byteLength<ne)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<ne+(le||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return(ue=void 0===ne&&void 0===le?new Uint8Array(te):void 0===le?new Uint8Array(te,ne):new Uint8Array(te,ne,le)).__proto__=e.prototype,ue}(j,H,G);if("number"==typeof j)throw new TypeError('The "value" argument must not be of type number. Received type number');var re=j.valueOf&&j.valueOf();if(null!=re&&re!==j)return e.from(re,H,G);var q=function(te){if(e.isBuffer(te)){var ne=0|d(te.length),le=b(ne);return 0===le.length||te.copy(le,0,0,ne),le}return void 0!==te.length?"number"!=typeof te.length||oe(te.length)?b(0):n(te):"Buffer"===te.type&&Array.isArray(te.data)?n(te.data):void 0}(j);if(q)return q;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof j[Symbol.toPrimitive])return e.from(j[Symbol.toPrimitive]("string"),H,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function t(j){if("number"!=typeof j)throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function a(j){return t(j),b(j<0?0:0|d(j))}function n(j){for(var H=j.length<0?0:0|d(j.length),G=b(H),re=0;re<H;re+=1)G[re]=255&j[re];return G}function d(j){if(j>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|j}function s(j,H){if(e.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||K(j,ArrayBuffer))return j.byteLength;if("string"!=typeof j)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var G=j.length,re=arguments.length>2&&!0===arguments[2];if(!re&&0===G)return 0;for(var q=!1;;)switch(H){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return ee(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return Q(j).length;default:if(q)return re?-1:ee(j).length;H=(""+H).toLowerCase(),q=!0}}function i(j,H,G){var re=!1;if((void 0===H||H<0)&&(H=0),H>this.length||((void 0===G||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(H>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return S(this,H,G);case"utf8":case"utf-8":return k(this,H,G);case"ascii":return E(this,H,G);case"latin1":case"binary":return P(this,H,G);case"base64":return M(this,H,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,H,G);default:if(re)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),re=!0}}function u(j,H,G){var re=j[H];j[H]=j[G],j[G]=re}function f(j,H,G,re,q){if(0===j.length)return-1;if("string"==typeof G?(re=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),oe(G=+G)&&(G=q?0:j.length-1),G<0&&(G=j.length+G),G>=j.length){if(q)return-1;G=j.length-1}else if(G<0){if(!q)return-1;G=0}if("string"==typeof H&&(H=e.from(H,re)),e.isBuffer(H))return 0===H.length?-1:p(j,H,G,re,q);if("number"==typeof H)return H&=255,"function"==typeof Uint8Array.prototype.indexOf?q?Uint8Array.prototype.indexOf.call(j,H,G):Uint8Array.prototype.lastIndexOf.call(j,H,G):p(j,[H],G,re,q);throw new TypeError("val must be string, number or Buffer")}function p(j,H,G,re,q){var te,ne=1,le=j.length,ue=H.length;if(void 0!==re&&("ucs2"===(re=String(re).toLowerCase())||"ucs-2"===re||"utf16le"===re||"utf-16le"===re)){if(j.length<2||H.length<2)return-1;ne=2,le/=2,ue/=2,G/=2}function de(we,ke){return 1===ne?we[ke]:we.readUInt16BE(ke*ne)}if(q){var he=-1;for(te=G;te<le;te++)if(de(j,te)===de(H,-1===he?0:te-he)){if(-1===he&&(he=te),te-he+1===ue)return he*ne}else-1!==he&&(te-=te-he),he=-1}else for(G+ue>le&&(G=le-ue),te=G;te>=0;te--){for(var be=!0,ge=0;ge<ue;ge++)if(de(j,te+ge)!==de(H,ge)){be=!1;break}if(be)return te}return-1}function y(j,H,G,re){G=Number(G)||0;var q=j.length-G;re?(re=Number(re))>q&&(re=q):re=q;var te=H.length;re>te/2&&(re=te/2);for(var ne=0;ne<re;++ne){var le=parseInt(H.substr(2*ne,2),16);if(oe(le))return ne;j[G+ne]=le}return ne}function m(j,H,G,re){return $(ee(H,j.length-G),j,G,re)}function l(j,H,G,re){return $(function(q){for(var te=[],ne=0;ne<q.length;++ne)te.push(255&q.charCodeAt(ne));return te}(H),j,G,re)}function w(j,H,G,re){return l(j,H,G,re)}function v(j,H,G,re){return $(Q(H),j,G,re)}function A(j,H,G,re){return $(function(q,te){for(var ne,le,de=[],he=0;he<q.length&&!((te-=2)<0);++he)le=(ne=q.charCodeAt(he))>>8,de.push(ne%256),de.push(le);return de}(H,j.length-G),j,G,re)}function M(j,H,G){return x.fromByteArray(0===H&&G===j.length?j:j.slice(H,G))}function k(j,H,G){G=Math.min(j.length,G);for(var re=[],q=H;q<G;){var te,ne,le,ue,de=j[q],he=null,be=de>239?4:de>223?3:de>191?2:1;if(q+be<=G)switch(be){case 1:de<128&&(he=de);break;case 2:128==(192&(te=j[q+1]))&&(ue=(31&de)<<6|63&te)>127&&(he=ue);break;case 3:ne=j[q+2],128==(192&(te=j[q+1]))&&128==(192&ne)&&(ue=(15&de)<<12|(63&te)<<6|63&ne)>2047&&(ue<55296||ue>57343)&&(he=ue);break;case 4:ne=j[q+2],le=j[q+3],128==(192&(te=j[q+1]))&&128==(192&ne)&&128==(192&le)&&(ue=(15&de)<<18|(63&te)<<12|(63&ne)<<6|63&le)>65535&&ue<1114112&&(he=ue)}null===he?(he=65533,be=1):he>65535&&(re.push((he-=65536)>>>10&1023|55296),he=56320|1023&he),re.push(he),q+=be}return function(ge){var we=ge.length;if(we<=4096)return String.fromCharCode.apply(String,ge);for(var ke="",De=0;De<we;)ke+=String.fromCharCode.apply(String,ge.slice(De,De+=4096));return ke}(re)}function E(j,H,G){var re="";G=Math.min(j.length,G);for(var q=H;q<G;++q)re+=String.fromCharCode(127&j[q]);return re}function P(j,H,G){var re="";G=Math.min(j.length,G);for(var q=H;q<G;++q)re+=String.fromCharCode(j[q]);return re}function S(j,H,G){var re=j.length;(!H||H<0)&&(H=0),(!G||G<0||G>re)&&(G=re);for(var q="",te=H;te<G;++te)q+=Y(j[te]);return q}function F(j,H,G){for(var re=j.slice(H,G),q="",te=0;te<re.length;te+=2)q+=String.fromCharCode(re[te]+256*re[te+1]);return q}function R(j,H,G){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+H>G)throw new RangeError("Trying to access beyond buffer length")}function D(j,H,G,re,q,te){if(!e.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>q||H<te)throw new RangeError('"value" argument is out of bounds');if(G+re>j.length)throw new RangeError("Index out of range")}function L(j,H,G,re,q,te){if(G+re>j.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function B(j,H,G,re,q){return H=+H,G>>>=0,q||L(j,0,G,4),T.write(j,H,G,re,23,4),G+4}function V(j,H,G,re,q){return H=+H,G>>>=0,q||L(j,0,G,8),T.write(j,H,G,re,52,8),G+8}ie.Buffer=e,ie.SlowBuffer=function(j){return+j!=j&&(j=0),e.alloc(+j)},ie.INSPECT_MAX_BYTES=50,ie.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===j.foo()}catch(H){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(j,H,G){return r(j,H,G)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(j,H,G){return q=H,te=G,t(re=j),re<=0?b(re):void 0!==q?"string"==typeof te?b(re).fill(q,te):b(re).fill(q):b(re);var re,q,te},e.allocUnsafe=function(j){return a(j)},e.allocUnsafeSlow=function(j){return a(j)},e.isBuffer=function(j){return null!=j&&!0===j._isBuffer&&j!==e.prototype},e.compare=function(j,H){if(K(j,Uint8Array)&&(j=e.from(j,j.offset,j.byteLength)),K(H,Uint8Array)&&(H=e.from(H,H.offset,H.byteLength)),!e.isBuffer(j)||!e.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===H)return 0;for(var G=j.length,re=H.length,q=0,te=Math.min(G,re);q<te;++q)if(j[q]!==H[q]){G=j[q],re=H[q];break}return G<re?-1:re<G?1:0},e.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(j,H){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(0===j.length)return e.alloc(0);var G;if(void 0===H)for(H=0,G=0;G<j.length;++G)H+=j[G].length;var re=e.allocUnsafe(H),q=0;for(G=0;G<j.length;++G){var te=j[G];if(K(te,Uint8Array)&&(te=e.from(te)),!e.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(re,q),q+=te.length}return re},e.byteLength=s,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var H=0;H<j;H+=2)u(this,H,H+1);return this},e.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var H=0;H<j;H+=4)u(this,H,H+3),u(this,H+1,H+2);return this},e.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var H=0;H<j;H+=8)u(this,H,H+7),u(this,H+1,H+6),u(this,H+2,H+5),u(this,H+3,H+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var j=this.length;return 0===j?"":0===arguments.length?k(this,0,j):i.apply(this,arguments)},e.prototype.equals=function(j){if(!e.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||0===e.compare(this,j)},e.prototype.inspect=function(){var j="",H=ie.INSPECT_MAX_BYTES;return j=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(j+=" ... "),"<Buffer "+j+">"},e.prototype.compare=function(j,H,G,re,q){if(K(j,Uint8Array)&&(j=e.from(j,j.offset,j.byteLength)),!e.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(void 0===H&&(H=0),void 0===G&&(G=j?j.length:0),void 0===re&&(re=0),void 0===q&&(q=this.length),H<0||G>j.length||re<0||q>this.length)throw new RangeError("out of range index");if(re>=q&&H>=G)return 0;if(re>=q)return-1;if(H>=G)return 1;if(this===j)return 0;for(var te=(q>>>=0)-(re>>>=0),ne=(G>>>=0)-(H>>>=0),le=Math.min(te,ne),ue=this.slice(re,q),de=j.slice(H,G),he=0;he<le;++he)if(ue[he]!==de[he]){te=ue[he],ne=de[he];break}return te<ne?-1:ne<te?1:0},e.prototype.includes=function(j,H,G){return-1!==this.indexOf(j,H,G)},e.prototype.indexOf=function(j,H,G){return f(this,j,H,G,!0)},e.prototype.lastIndexOf=function(j,H,G){return f(this,j,H,G,!1)},e.prototype.write=function(j,H,G,re){if(void 0===H)re="utf8",G=this.length,H=0;else if(void 0===G&&"string"==typeof H)re=H,G=this.length,H=0;else{if(!isFinite(H))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");H>>>=0,isFinite(G)?(G>>>=0,void 0===re&&(re="utf8")):(re=G,G=void 0)}var q=this.length-H;if((void 0===G||G>q)&&(G=q),j.length>0&&(G<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var te=!1;;)switch(re){case"hex":return y(this,j,H,G);case"utf8":case"utf-8":return m(this,j,H,G);case"ascii":return l(this,j,H,G);case"latin1":case"binary":return w(this,j,H,G);case"base64":return v(this,j,H,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,j,H,G);default:if(te)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),te=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(j,H){var G=this.length;(j=~~j)<0?(j+=G)<0&&(j=0):j>G&&(j=G),(H=void 0===H?G:~~H)<0?(H+=G)<0&&(H=0):H>G&&(H=G),H<j&&(H=j);var re=this.subarray(j,H);return re.__proto__=e.prototype,re},e.prototype.readUIntLE=function(j,H,G){j>>>=0,H>>>=0,G||R(j,H,this.length);for(var re=this[j],q=1,te=0;++te<H&&(q*=256);)re+=this[j+te]*q;return re},e.prototype.readUIntBE=function(j,H,G){j>>>=0,H>>>=0,G||R(j,H,this.length);for(var re=this[j+--H],q=1;H>0&&(q*=256);)re+=this[j+--H]*q;return re},e.prototype.readUInt8=function(j,H){return j>>>=0,H||R(j,1,this.length),this[j]},e.prototype.readUInt16LE=function(j,H){return j>>>=0,H||R(j,2,this.length),this[j]|this[j+1]<<8},e.prototype.readUInt16BE=function(j,H){return j>>>=0,H||R(j,2,this.length),this[j]<<8|this[j+1]},e.prototype.readUInt32LE=function(j,H){return j>>>=0,H||R(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},e.prototype.readUInt32BE=function(j,H){return j>>>=0,H||R(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},e.prototype.readIntLE=function(j,H,G){j>>>=0,H>>>=0,G||R(j,H,this.length);for(var re=this[j],q=1,te=0;++te<H&&(q*=256);)re+=this[j+te]*q;return re>=(q*=128)&&(re-=Math.pow(2,8*H)),re},e.prototype.readIntBE=function(j,H,G){j>>>=0,H>>>=0,G||R(j,H,this.length);for(var re=H,q=1,te=this[j+--re];re>0&&(q*=256);)te+=this[j+--re]*q;return te>=(q*=128)&&(te-=Math.pow(2,8*H)),te},e.prototype.readInt8=function(j,H){return j>>>=0,H||R(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},e.prototype.readInt16LE=function(j,H){j>>>=0,H||R(j,2,this.length);var G=this[j]|this[j+1]<<8;return 32768&G?4294901760|G:G},e.prototype.readInt16BE=function(j,H){j>>>=0,H||R(j,2,this.length);var G=this[j+1]|this[j]<<8;return 32768&G?4294901760|G:G},e.prototype.readInt32LE=function(j,H){return j>>>=0,H||R(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},e.prototype.readInt32BE=function(j,H){return j>>>=0,H||R(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},e.prototype.readFloatLE=function(j,H){return j>>>=0,H||R(j,4,this.length),T.read(this,j,!0,23,4)},e.prototype.readFloatBE=function(j,H){return j>>>=0,H||R(j,4,this.length),T.read(this,j,!1,23,4)},e.prototype.readDoubleLE=function(j,H){return j>>>=0,H||R(j,8,this.length),T.read(this,j,!0,52,8)},e.prototype.readDoubleBE=function(j,H){return j>>>=0,H||R(j,8,this.length),T.read(this,j,!1,52,8)},e.prototype.writeUIntLE=function(j,H,G,re){j=+j,H>>>=0,G>>>=0,re||D(this,j,H,G,Math.pow(2,8*G)-1,0);var q=1,te=0;for(this[H]=255&j;++te<G&&(q*=256);)this[H+te]=j/q&255;return H+G},e.prototype.writeUIntBE=function(j,H,G,re){j=+j,H>>>=0,G>>>=0,re||D(this,j,H,G,Math.pow(2,8*G)-1,0);var q=G-1,te=1;for(this[H+q]=255&j;--q>=0&&(te*=256);)this[H+q]=j/te&255;return H+G},e.prototype.writeUInt8=function(j,H,G){return j=+j,H>>>=0,G||D(this,j,H,1,255,0),this[H]=255&j,H+1},e.prototype.writeUInt16LE=function(j,H,G){return j=+j,H>>>=0,G||D(this,j,H,2,65535,0),this[H]=255&j,this[H+1]=j>>>8,H+2},e.prototype.writeUInt16BE=function(j,H,G){return j=+j,H>>>=0,G||D(this,j,H,2,65535,0),this[H]=j>>>8,this[H+1]=255&j,H+2},e.prototype.writeUInt32LE=function(j,H,G){return j=+j,H>>>=0,G||D(this,j,H,4,4294967295,0),this[H+3]=j>>>24,this[H+2]=j>>>16,this[H+1]=j>>>8,this[H]=255&j,H+4},e.prototype.writeUInt32BE=function(j,H,G){return j=+j,H>>>=0,G||D(this,j,H,4,4294967295,0),this[H]=j>>>24,this[H+1]=j>>>16,this[H+2]=j>>>8,this[H+3]=255&j,H+4},e.prototype.writeIntLE=function(j,H,G,re){if(j=+j,H>>>=0,!re){var q=Math.pow(2,8*G-1);D(this,j,H,G,q-1,-q)}var te=0,ne=1,le=0;for(this[H]=255&j;++te<G&&(ne*=256);)j<0&&0===le&&0!==this[H+te-1]&&(le=1),this[H+te]=(j/ne>>0)-le&255;return H+G},e.prototype.writeIntBE=function(j,H,G,re){if(j=+j,H>>>=0,!re){var q=Math.pow(2,8*G-1);D(this,j,H,G,q-1,-q)}var te=G-1,ne=1,le=0;for(this[H+te]=255&j;--te>=0&&(ne*=256);)j<0&&0===le&&0!==this[H+te+1]&&(le=1),this[H+te]=(j/ne>>0)-le&255;return H+G},e.prototype.writeInt8=function(j,H,G){return j=+j,H>>>=0,G||D(this,j,H,1,127,-128),j<0&&(j=255+j+1),this[H]=255&j,H+1},e.prototype.writeInt16LE=function(j,H,G){return j=+j,H>>>=0,G||D(this,j,H,2,32767,-32768),this[H]=255&j,this[H+1]=j>>>8,H+2},e.prototype.writeInt16BE=function(j,H,G){return j=+j,H>>>=0,G||D(this,j,H,2,32767,-32768),this[H]=j>>>8,this[H+1]=255&j,H+2},e.prototype.writeInt32LE=function(j,H,G){return j=+j,H>>>=0,G||D(this,j,H,4,2147483647,-2147483648),this[H]=255&j,this[H+1]=j>>>8,this[H+2]=j>>>16,this[H+3]=j>>>24,H+4},e.prototype.writeInt32BE=function(j,H,G){return j=+j,H>>>=0,G||D(this,j,H,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[H]=j>>>24,this[H+1]=j>>>16,this[H+2]=j>>>8,this[H+3]=255&j,H+4},e.prototype.writeFloatLE=function(j,H,G){return B(this,j,H,!0,G)},e.prototype.writeFloatBE=function(j,H,G){return B(this,j,H,!1,G)},e.prototype.writeDoubleLE=function(j,H,G){return V(this,j,H,!0,G)},e.prototype.writeDoubleBE=function(j,H,G){return V(this,j,H,!1,G)},e.prototype.copy=function(j,H,G,re){if(!e.isBuffer(j))throw new TypeError("argument should be a Buffer");if(G||(G=0),re||0===re||(re=this.length),H>=j.length&&(H=j.length),H||(H=0),re>0&&re<G&&(re=G),re===G||0===j.length||0===this.length)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),j.length-H<re-G&&(re=j.length-H+G);var q=re-G;if(this===j&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(H,G,re);else if(this===j&&G<H&&H<re)for(var te=q-1;te>=0;--te)j[te+H]=this[te+G];else Uint8Array.prototype.set.call(j,this.subarray(G,re),H);return q},e.prototype.fill=function(j,H,G,re){if("string"==typeof j){if("string"==typeof H?(re=H,H=0,G=this.length):"string"==typeof G&&(re=G,G=this.length),void 0!==re&&"string"!=typeof re)throw new TypeError("encoding must be a string");if("string"==typeof re&&!e.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(1===j.length){var q=j.charCodeAt(0);("utf8"===re&&q<128||"latin1"===re)&&(j=q)}}else"number"==typeof j&&(j&=255);if(H<0||this.length<H||this.length<G)throw new RangeError("Out of range index");if(G<=H)return this;var te;if(H>>>=0,G=void 0===G?this.length:G>>>0,j||(j=0),"number"==typeof j)for(te=H;te<G;++te)this[te]=j;else{var ne=e.isBuffer(j)?j:e.from(j,re),le=ne.length;if(0===le)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(te=0;te<G-H;++te)this[te+H]=ne[te%le]}return this};var Z=/[^+/0-9A-Za-z-_]/g;function Y(j){return j<16?"0"+j.toString(16):j.toString(16)}function ee(j,H){var G;H=H||1/0;for(var re=j.length,q=null,te=[],ne=0;ne<re;++ne){if((G=j.charCodeAt(ne))>55295&&G<57344){if(!q){if(G>56319){(H-=3)>-1&&te.push(239,191,189);continue}if(ne+1===re){(H-=3)>-1&&te.push(239,191,189);continue}q=G;continue}if(G<56320){(H-=3)>-1&&te.push(239,191,189),q=G;continue}G=65536+(q-55296<<10|G-56320)}else q&&(H-=3)>-1&&te.push(239,191,189);if(q=null,G<128){if((H-=1)<0)break;te.push(G)}else if(G<2048){if((H-=2)<0)break;te.push(G>>6|192,63&G|128)}else if(G<65536){if((H-=3)<0)break;te.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((H-=4)<0)break;te.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return te}function Q(j){return x.toByteArray(function(H){if((H=(H=H.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;H.length%4!=0;)H+="=";return H}(j))}function $(j,H,G,re){for(var q=0;q<re&&!(q+G>=H.length||q>=j.length);++q)H[q+G]=j[q];return q}function K(j,H){return j instanceof H||null!=j&&null!=j.constructor&&null!=j.constructor.name&&j.constructor.name===H.name}function oe(j){return j!=j}}).call(this)}).call(this,_("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(_,ae,ie){ae.exports=function(g,x,T){return x<T?g<x?x:g>T?T:g:g<T?T:g>x?x:g}},{}],87:[function(_,ae,ie){"use strict";var g=_("clamp");function x(T,b){null==b&&(b=!0);var e=T[0],r=T[1],t=T[2],a=T[3];return null==a&&(a=b?1:255),b&&(e*=255,r*=255,t*=255,a*=255),16777216*(e=255&g(e,0,255))+((r=255&g(r,0,255))<<16)+((t=255&g(t,0,255))<<8)+(255&g(a,0,255))}ae.exports=x,ae.exports.to=x,ae.exports.from=function(T,b){var e=(T=+T)>>>24,r=(16711680&T)>>>16,t=(65280&T)>>>8,a=255&T;return!1===b?[e,r,t,a]:[e/255,r/255,t/255,a/255]}},{clamp:86}],88:[function(_,ae,ie){"use strict";ae.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(_,ae,ie){"use strict";var g=_("color-rgba"),x=_("clamp"),T=_("dtype");ae.exports=function(b,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var a,r=new(T(e))(4),t="uint8"!==e&&"uint8_clamped"!==e;return b.length&&"string"!=typeof b||((b=g(b))[0]/=255,b[1]/=255,b[2]/=255),(a=b)instanceof Uint8Array||a instanceof Uint8ClampedArray||Array.isArray(a)&&(a[0]>1||0===a[0])&&(a[1]>1||0===a[1])&&(a[2]>1||0===a[2])&&(!a[3]||a[3]>1)?(r[0]=b[0],r[1]=b[1],r[2]=b[2],r[3]=null!=b[3]?b[3]:255,t&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(t?(r[0]=b[0],r[1]=b[1],r[2]=b[2],r[3]=null!=b[3]?b[3]:1):(r[0]=x(Math.floor(255*b[0]),0,255),r[1]=x(Math.floor(255*b[1]),0,255),r[2]=x(Math.floor(255*b[2]),0,255),r[3]=null==b[3]?255:x(Math.floor(255*b[3]),0,255)),r)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(_,ae,ie){(function(g){(function(){"use strict";var x=_("color-name"),T=_("is-plain-obj"),b=_("defined");ae.exports=function(r){var t,a,n=[],d=1;if("string"==typeof r)if(x[r])n=x[r].slice(),a="rgb";else if("transparent"===r)d=0,a="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var s=(f=r.slice(1)).length;d=1,s<=4?(n=[parseInt(f[0]+f[0],16),parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16)],4===s&&(d=parseInt(f[3]+f[3],16)/255)):(n=[parseInt(f[0]+f[1],16),parseInt(f[2]+f[3],16),parseInt(f[4]+f[5],16)],8===s&&(d=parseInt(f[6]+f[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),a="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var i=t[1],u="rgb"===i,f=i.replace(/a$/,"");a=f,s="cmyk"===f?4:"gray"===f?1:3,n=t[2].trim().split(/\s*,\s*/).map(function(y,m){if(/%$/.test(y))return m===s?parseFloat(y)/100:"rgb"===f?255*parseFloat(y)/100:parseFloat(y);if("h"===f[m]){if(/deg$/.test(y))return parseFloat(y);if(void 0!==e[y])return e[y]}return parseFloat(y)}),i===f&&n.push(1),d=u||void 0===n[s]?1:n[s],n=n.slice(0,s)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(n=r.match(/([0-9]+)/g).map(function(y){return parseFloat(y)}),a=r.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(r))if(T(r)){var p=b(r.r,r.red,r.R,null);null!==p?(a="rgb",n=[p,b(r.g,r.green,r.G),b(r.b,r.blue,r.B)]):(a="hsl",n=[b(r.h,r.hue,r.H),b(r.s,r.saturation,r.S),b(r.l,r.lightness,r.L,r.b,r.brightness)]),d=b(r.a,r.alpha,r.opacity,1),null!=r.opacity&&(d/=100)}else(Array.isArray(r)||g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(r))&&(n=[r[0],r[1],r[2]],a="rgb",d=4===r.length?r[3]:1);else a="rgb",n=[r>>>16,(65280&r)>>>8,255&r];return{space:a,values:n,alpha:d}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(_,ae,ie){"use strict";var g=_("color-parse"),x=_("color-space/hsl"),T=_("clamp");ae.exports=function(b){var e,r=g(b);return r.space?((e=Array(3))[0]=T(r.values[0],0,255),e[1]=T(r.values[1],0,255),e[2]=T(r.values[2],0,255),"h"===r.space[0]&&(e=x.rgb(e)),e.push(T(r.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(_,ae,ie){"use strict";var g=_("./rgb");ae.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(x){var T,b,e,r,t,a=x[0]/360,n=x[1]/100,d=x[2]/100;if(0===n)return[t=255*d,t,t];T=2*d-(b=d<.5?d*(1+n):d+n-d*n),r=[0,0,0];for(var s=0;s<3;s++)(e=a+1/3*-(s-1))<0?e++:e>1&&e--,r[s]=255*(t=6*e<1?T+6*(b-T)*e:2*e<1?b:3*e<2?T+(b-T)*(2/3-e)*6:T);return r}},g.hsl=function(x){var T,b,e=x[0]/255,r=x[1]/255,t=x[2]/255,a=Math.min(e,r,t),n=Math.max(e,r,t),d=n-a;return n===a?T=0:e===n?T=(r-t)/d:r===n?T=2+(t-e)/d:t===n&&(T=4+(e-r)/d),(T=Math.min(60*T,360))<0&&(T+=360),b=(a+n)/2,[T,100*(n===a?0:b<=.5?d/(n+a):d/(2-n-a)),100*b]}},{"./rgb":93}],93:[function(_,ae,ie){"use strict";ae.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(_,ae,ie){ae.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(_,ae,ie){ae.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(_,ae,ie){ae.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(_,ae,ie){ae.exports=["normal","italic","oblique"]},{}],98:[function(_,ae,ie){ae.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(_,ae,ie){"use strict";ae.exports={parse:_("./parse"),stringify:_("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(_,ae,ie){"use strict";var g=_("css-font-size-keywords");ae.exports={isSize:function(x){return/^[\d\.]/.test(x)||-1!==x.indexOf("/")||-1!==g.indexOf(x)}}},{"css-font-size-keywords":95}],101:[function(_,ae,ie){"use strict";var g=_("unquote"),x=_("css-global-keywords"),T=_("css-system-font-keywords"),b=_("css-font-weight-keywords"),e=_("css-font-style-keywords"),r=_("css-font-stretch-keywords"),t=_("string-split-by"),a=_("./lib/util").isSize;ae.exports=d;var n=d.cache={};function d(i){if("string"!=typeof i)throw new Error("Font argument must be a string.");if(n[i])return n[i];if(""===i)throw new Error("Cannot parse an empty string.");if(-1!==T.indexOf(i))return n[i]={system:i};for(var u,f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},p=t(i,/\s+/);u=p.shift();){if(-1!==x.indexOf(u))return["style","variant","weight","stretch"].forEach(function(m){f[m]=u}),n[i]=f;if(-1===e.indexOf(u))if("normal"!==u&&"small-caps"!==u)if(-1===r.indexOf(u)){if(-1===b.indexOf(u)){if(a(u)){var y=t(u,"/");if(f.size=y[0],null!=y[1]?f.lineHeight=s(y[1]):"/"===p[0]&&(p.shift(),f.lineHeight=s(p.shift())),!p.length)throw new Error("Missing required font-family.");return f.family=t(p.join(" "),/\s*,\s*/).map(g),n[i]=f}throw new Error("Unknown or unsupported font token: "+u)}f.weight=u}else f.stretch=u;else f.variant=u;else f.style=u}throw new Error("Missing required font-size.")}function s(i){var u=parseFloat(i);return u.toString()===i?u:i}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(_,ae,ie){"use strict";var g=_("pick-by-alias"),x=_("./lib/util").isSize,T=u(_("css-global-keywords")),b=u(_("css-system-font-keywords")),e=u(_("css-font-weight-keywords")),r=u(_("css-font-style-keywords")),t=u(_("css-font-stretch-keywords")),a={normal:1,"small-caps":1},n={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},s="serif";function i(f,p){if(f&&!p[f]&&!T[f])throw Error("Unknown keyword `"+f+"`");return f}function u(f){for(var p={},y=0;y<f.length;y++)p[f[y]]=1;return p}ae.exports=function(f){if((f=g(f,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return f.system&&i(f.system,b),f.system;if(i(f.style,r),i(f.variant,a),i(f.weight,e),i(f.stretch,t),null==f.size&&(f.size="1rem"),"number"==typeof f.size&&(f.size+="px"),!x)throw Error("Bad size value `"+f.size+"`");f.family||(f.family=s),Array.isArray(f.family)&&(f.family.length||(f.family=[s]),f.family=f.family.map(function(y){return n[y]?y:'"'+y+'"'}).join(", "));var p=[];return p.push(f.style),f.variant!==f.style&&p.push(f.variant),f.weight!==f.variant&&f.weight!==f.style&&p.push(f.weight),f.stretch!==f.weight&&f.stretch!==f.variant&&f.stretch!==f.style&&p.push(f.stretch),p.push(f.size+(null==f.lineHeight||"normal"===f.lineHeight||f.lineHeight+""=="1"?"":"/"+f.lineHeight)),p.push(f.family),p.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(_,ae,ie){ae.exports=["inherit","initial","unset"]},{}],104:[function(_,ae,ie){ae.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(_,ae,ie){"use strict";var g,x=_("type/value/is"),T=_("type/value/ensure"),b=_("type/plain-function/ensure"),e=_("es5-ext/object/copy"),r=_("es5-ext/object/normalize-options"),t=_("es5-ext/object/map"),a=Function.prototype.bind,n=Object.defineProperty,d=Object.prototype.hasOwnProperty;g=function(s,i,u){var f,p=T(i)&&b(i.value);return delete(f=e(i)).writable,delete f.value,f.get=function(){return!u.overwriteDefinition&&d.call(this,s)?p:(i.value=a.call(p,u.resolveContext?u.resolveContext(this):this),n(this,s,i),this[s])},f},ae.exports=function(s){var i=r(arguments[1]);return x(i.resolveContext)&&b(i.resolveContext),t(s,function(u,f){return g(f,u,i)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(_,ae,ie){"use strict";var g=_("type/value/is"),x=_("type/plain-function/is"),T=_("es5-ext/object/assign"),b=_("es5-ext/object/normalize-options"),e=_("es5-ext/string/#/contains");(ae.exports=function(r,t){var a,n,d,s,i;return arguments.length<2||"string"!=typeof r?(s=t,t=r,r=null):s=arguments[2],g(r)?(a=e.call(r,"c"),n=e.call(r,"e"),d=e.call(r,"w")):(a=d=!0,n=!1),i={value:t,configurable:a,enumerable:n,writable:d},s?T(b(s),i):i}).gs=function(r,t,a){var n,d,s,i;return"string"!=typeof r?(s=a,a=t,t=r,r=null):s=arguments[3],g(t)?x(t)?g(a)?x(a)||(s=a,a=void 0):a=void 0:(s=t,t=a=void 0):t=void 0,g(r)?(n=e.call(r,"c"),d=e.call(r,"e")):(n=!0,d=!1),i={get:t,set:a,configurable:n,enumerable:d},s?T(b(s),i):i}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(_,ae,ie){var x;x=function(g){"use strict";function x(R,D){return R<D?-1:R>D?1:R>=D?0:NaN}function T(R){var D;return 1===R.length&&(D=R,R=function(L,B){return x(D(L),B)}),{left:function(L,B,V,Z){for(null==V&&(V=0),null==Z&&(Z=L.length);V<Z;){var Y=V+Z>>>1;R(L[Y],B)<0?V=Y+1:Z=Y}return V},right:function(L,B,V,Z){for(null==V&&(V=0),null==Z&&(Z=L.length);V<Z;){var Y=V+Z>>>1;R(L[Y],B)>0?Z=Y:V=Y+1}return V}}}var b=T(x),e=b.right,r=b.left;function t(R,D){return[R,D]}function a(R){return null===R?NaN:+R}function n(R,D){var L,B,V=R.length,Z=0,Y=-1,ee=0,Q=0;if(null==D)for(;++Y<V;)isNaN(L=a(R[Y]))||(Q+=(B=L-ee)*(L-(ee+=B/++Z)));else for(;++Y<V;)isNaN(L=a(D(R[Y],Y,R)))||(Q+=(B=L-ee)*(L-(ee+=B/++Z)));if(Z>1)return Q/(Z-1)}function d(R,D){var L=n(R,D);return L&&Math.sqrt(L)}function s(R,D){var L,B,V,Z=R.length,Y=-1;if(null==D){for(;++Y<Z;)if(null!=(L=R[Y])&&L>=L)for(B=V=L;++Y<Z;)null!=(L=R[Y])&&(B>L&&(B=L),V<L&&(V=L))}else for(;++Y<Z;)if(null!=(L=D(R[Y],Y,R))&&L>=L)for(B=V=L;++Y<Z;)null!=(L=D(R[Y],Y,R))&&(B>L&&(B=L),V<L&&(V=L));return[B,V]}var i=Array.prototype,u=i.slice,f=i.map;function p(R){return function(){return R}}function y(R){return R}function m(R,D,L){R=+R,D=+D,L=(V=arguments.length)<2?(D=R,R=0,1):V<3?1:+L;for(var B=-1,V=0|Math.max(0,Math.ceil((D-R)/L)),Z=new Array(V);++B<V;)Z[B]=R+B*L;return Z}var l=Math.sqrt(50),w=Math.sqrt(10),v=Math.sqrt(2);function A(R,D,L){var B=(D-R)/Math.max(0,L),V=Math.floor(Math.log(B)/Math.LN10),Z=B/Math.pow(10,V);return V>=0?(Z>=l?10:Z>=w?5:Z>=v?2:1)*Math.pow(10,V):-Math.pow(10,-V)/(Z>=l?10:Z>=w?5:Z>=v?2:1)}function M(R,D,L){var B=Math.abs(D-R)/Math.max(0,L),V=Math.pow(10,Math.floor(Math.log(B)/Math.LN10)),Z=B/V;return Z>=l?V*=10:Z>=w?V*=5:Z>=v&&(V*=2),D<R?-V:V}function k(R){return Math.ceil(Math.log(R.length)/Math.LN2)+1}function E(R,D,L){if(null==L&&(L=a),B=R.length){if((D=+D)<=0||B<2)return+L(R[0],0,R);if(D>=1)return+L(R[B-1],B-1,R);var B,V=(B-1)*D,Z=Math.floor(V),Y=+L(R[Z],Z,R);return Y+(+L(R[Z+1],Z+1,R)-Y)*(V-Z)}}function P(R,D){var L,B,V=R.length,Z=-1;if(null==D){for(;++Z<V;)if(null!=(L=R[Z])&&L>=L)for(B=L;++Z<V;)null!=(L=R[Z])&&B>L&&(B=L)}else for(;++Z<V;)if(null!=(L=D(R[Z],Z,R))&&L>=L)for(B=L;++Z<V;)null!=(L=D(R[Z],Z,R))&&B>L&&(B=L);return B}function S(R){if(!(V=R.length))return[];for(var D=-1,L=P(R,F),B=new Array(L);++D<L;)for(var V,Z=-1,Y=B[D]=new Array(V);++Z<V;)Y[Z]=R[Z][D];return B}function F(R){return R.length}g.bisect=e,g.bisectRight=e,g.bisectLeft=r,g.ascending=x,g.bisector=T,g.cross=function(R,D,L){var B,V,Z,Y,ee=R.length,Q=D.length,$=new Array(ee*Q);for(null==L&&(L=t),B=Z=0;B<ee;++B)for(Y=R[B],V=0;V<Q;++V,++Z)$[Z]=L(Y,D[V]);return $},g.descending=function(R,D){return D<R?-1:D>R?1:D>=R?0:NaN},g.deviation=d,g.extent=s,g.histogram=function(){var R=y,D=s,L=k;function B(V){var Z,Y,ee=V.length,Q=new Array(ee);for(Z=0;Z<ee;++Z)Q[Z]=R(V[Z],Z,V);var $=D(Q),K=$[0],oe=$[1],j=L(Q,K,oe);Array.isArray(j)||(j=M(K,oe,j),j=m(Math.ceil(K/j)*j,oe,j));for(var H=j.length;j[0]<=K;)j.shift(),--H;for(;j[H-1]>oe;)j.pop(),--H;var G,re=new Array(H+1);for(Z=0;Z<=H;++Z)(G=re[Z]=[]).x0=Z>0?j[Z-1]:K,G.x1=Z<H?j[Z]:oe;for(Z=0;Z<ee;++Z)K<=(Y=Q[Z])&&Y<=oe&&re[e(j,Y,0,H)].push(V[Z]);return re}return B.value=function(V){return arguments.length?(R="function"==typeof V?V:p(V),B):R},B.domain=function(V){return arguments.length?(D="function"==typeof V?V:p([V[0],V[1]]),B):D},B.thresholds=function(V){return arguments.length?(L="function"==typeof V?V:Array.isArray(V)?p(u.call(V)):p(V),B):L},B},g.thresholdFreedmanDiaconis=function(R,D,L){return R=f.call(R,a).sort(x),Math.ceil((L-D)/(2*(E(R,.75)-E(R,.25))*Math.pow(R.length,-1/3)))},g.thresholdScott=function(R,D,L){return Math.ceil((L-D)/(3.5*d(R)*Math.pow(R.length,-1/3)))},g.thresholdSturges=k,g.max=function(R,D){var L,B,V=R.length,Z=-1;if(null==D){for(;++Z<V;)if(null!=(L=R[Z])&&L>=L)for(B=L;++Z<V;)null!=(L=R[Z])&&L>B&&(B=L)}else for(;++Z<V;)if(null!=(L=D(R[Z],Z,R))&&L>=L)for(B=L;++Z<V;)null!=(L=D(R[Z],Z,R))&&L>B&&(B=L);return B},g.mean=function(R,D){var L,B=R.length,V=B,Z=-1,Y=0;if(null==D)for(;++Z<B;)isNaN(L=a(R[Z]))?--V:Y+=L;else for(;++Z<B;)isNaN(L=a(D(R[Z],Z,R)))?--V:Y+=L;if(V)return Y/V},g.median=function(R,D){var L,B=R.length,V=-1,Z=[];if(null==D)for(;++V<B;)isNaN(L=a(R[V]))||Z.push(L);else for(;++V<B;)isNaN(L=a(D(R[V],V,R)))||Z.push(L);return E(Z.sort(x),.5)},g.merge=function(R){for(var D,L,B,V=R.length,Z=-1,Y=0;++Z<V;)Y+=R[Z].length;for(L=new Array(Y);--V>=0;)for(D=(B=R[V]).length;--D>=0;)L[--Y]=B[D];return L},g.min=P,g.pairs=function(R,D){null==D&&(D=t);for(var L=0,B=R.length-1,V=R[0],Z=new Array(B<0?0:B);L<B;)Z[L]=D(V,V=R[++L]);return Z},g.permute=function(R,D){for(var L=D.length,B=new Array(L);L--;)B[L]=R[D[L]];return B},g.quantile=E,g.range=m,g.scan=function(R,D){if(L=R.length){var L,B,V=0,Z=0,Y=R[Z];for(null==D&&(D=x);++V<L;)(D(B=R[V],Y)<0||0!==D(Y,Y))&&(Y=B,Z=V);return 0===D(Y,Y)?Z:void 0}},g.shuffle=function(R,D,L){for(var B,V,Z=(null==L?R.length:L)-(D=null==D?0:+D);Z;)V=Math.random()*Z--|0,B=R[Z+D],R[Z+D]=R[V+D],R[V+D]=B;return R},g.sum=function(R,D){var L,B=R.length,V=-1,Z=0;if(null==D)for(;++V<B;)(L=+R[V])&&(Z+=L);else for(;++V<B;)(L=+D(R[V],V,R))&&(Z+=L);return Z},g.ticks=function(R,D,L){var B,V,Z,Y,ee=-1;if(L=+L,(R=+R)==(D=+D)&&L>0)return[R];if((B=D<R)&&(V=R,R=D,D=V),0===(Y=A(R,D,L))||!isFinite(Y))return[];if(Y>0)for(R=Math.ceil(R/Y),D=Math.floor(D/Y),Z=new Array(V=Math.ceil(D-R+1));++ee<V;)Z[ee]=(R+ee)*Y;else for(R=Math.floor(R*Y),D=Math.ceil(D*Y),Z=new Array(V=Math.ceil(R-D+1));++ee<V;)Z[ee]=(R-ee)/Y;return B&&Z.reverse(),Z},g.tickIncrement=A,g.tickStep=M,g.transpose=S,g.variance=n,g.zip=function(){return S(arguments)},Object.defineProperty(g,"__esModule",{value:!0})},x("object"==typeof ie&&void 0!==ae?ie:this.d3=this.d3||{})},{}],108:[function(_,ae,ie){var x;x=function(g){"use strict";function x(){}function T(s,i){var u=new x;if(s instanceof x)s.each(function(l,w){u.set(w,l)});else if(Array.isArray(s)){var f,p=-1,y=s.length;if(null==i)for(;++p<y;)u.set(p,s[p]);else for(;++p<y;)u.set(i(f=s[p],p,s),f)}else if(s)for(var m in s)u.set(m,s[m]);return u}function b(){return{}}function e(s,i,u){s[i]=u}function r(){return T()}function t(s,i,u){s.set(i,u)}function a(){}x.prototype=T.prototype={constructor:x,has:function(s){return"$"+s in this},get:function(s){return this["$"+s]},set:function(s,i){return this["$"+s]=i,this},remove:function(s){var i="$"+s;return i in this&&delete this[i]},clear:function(){for(var s in this)"$"===s[0]&&delete this[s]},keys:function(){var s=[];for(var i in this)"$"===i[0]&&s.push(i.slice(1));return s},values:function(){var s=[];for(var i in this)"$"===i[0]&&s.push(this[i]);return s},entries:function(){var s=[];for(var i in this)"$"===i[0]&&s.push({key:i.slice(1),value:this[i]});return s},size:function(){var s=0;for(var i in this)"$"===i[0]&&++s;return s},empty:function(){for(var s in this)if("$"===s[0])return!1;return!0},each:function(s){for(var i in this)"$"===i[0]&&s(this[i],i.slice(1),this)}};var n=T.prototype;function d(s,i){var u=new a;if(s instanceof a)s.each(function(y){u.add(y)});else if(s){var f=-1,p=s.length;if(null==i)for(;++f<p;)u.add(s[f]);else for(;++f<p;)u.add(i(s[f],f,s))}return u}a.prototype=d.prototype={constructor:a,has:n.has,add:function(s){return this["$"+(s+="")]=s,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each},g.nest=function(){var s,i,u,f=[],p=[];function y(m,l,w,v){if(l>=f.length)return null!=s&&m.sort(s),null!=i?i(m):m;for(var A,M,k,E=-1,P=m.length,S=f[l++],F=T(),R=w();++E<P;)(k=F.get(A=S(M=m[E])+""))?k.push(M):F.set(A,[M]);return F.each(function(D,L){v(R,L,y(D,l,w,v))}),R}return u={object:function(m){return y(m,0,b,e)},map:function(m){return y(m,0,r,t)},entries:function(m){return function l(w,v){if(++v>f.length)return w;var A,M=p[v-1];return null!=i&&v>=f.length?A=w.entries():(A=[],w.each(function(k,E){A.push({key:E,values:l(k,v)})})),null!=M?A.sort(function(k,E){return M(k.key,E.key)}):A}(y(m,0,r,t),0)},key:function(m){return f.push(m),u},sortKeys:function(m){return p[f.length-1]=m,u},sortValues:function(m){return s=m,u},rollup:function(m){return i=m,u}}},g.set=d,g.map=T,g.keys=function(s){var i=[];for(var u in s)i.push(u);return i},g.values=function(s){var i=[];for(var u in s)i.push(s[u]);return i},g.entries=function(s){var i=[];for(var u in s)i.push({key:u,value:s[u]});return i},Object.defineProperty(g,"__esModule",{value:!0})},x("object"==typeof ie&&void 0!==ae?ie:this.d3=this.d3||{})},{}],109:[function(_,ae,ie){var g,x;g=this,x=function(g){"use strict";function x(ve,Te,Ie){ve.prototype=Te.prototype=Ie,Ie.constructor=ve}function T(ve,Te){var Ie=Object.create(ve.prototype);for(var Ce in Te)Ie[Ce]=Te[Ce];return Ie}function b(){}var e="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",a=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),d=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),s=new RegExp("^rgba\\("+[e,e,e,r]+"\\)$"),i=new RegExp("^rgba\\("+[t,t,t,r]+"\\)$"),u=new RegExp("^hsl\\("+[r,t,t]+"\\)$"),f=new RegExp("^hsla\\("+[r,t,t,r]+"\\)$"),p={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function l(ve){var Te,Ie;return ve=(ve+"").trim().toLowerCase(),(Te=a.exec(ve))?(Ie=Te[1].length,Te=parseInt(Te[1],16),6===Ie?w(Te):3===Ie?new k(Te>>8&15|Te>>4&240,Te>>4&15|240&Te,(15&Te)<<4|15&Te,1):8===Ie?v(Te>>24&255,Te>>16&255,Te>>8&255,(255&Te)/255):4===Ie?v(Te>>12&15|Te>>8&240,Te>>8&15|Te>>4&240,Te>>4&15|240&Te,((15&Te)<<4|15&Te)/255):null):(Te=n.exec(ve))?new k(Te[1],Te[2],Te[3],1):(Te=d.exec(ve))?new k(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,1):(Te=s.exec(ve))?v(Te[1],Te[2],Te[3],Te[4]):(Te=i.exec(ve))?v(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,Te[4]):(Te=u.exec(ve))?F(Te[1],Te[2]/100,Te[3]/100,1):(Te=f.exec(ve))?F(Te[1],Te[2]/100,Te[3]/100,Te[4]):p.hasOwnProperty(ve)?w(p[ve]):"transparent"===ve?new k(NaN,NaN,NaN,0):null}function w(ve){return new k(ve>>16&255,ve>>8&255,255&ve,1)}function v(ve,Te,Ie,Ce){return Ce<=0&&(ve=Te=Ie=NaN),new k(ve,Te,Ie,Ce)}function A(ve){return ve instanceof b||(ve=l(ve)),ve?new k((ve=ve.rgb()).r,ve.g,ve.b,ve.opacity):new k}function M(ve,Te,Ie,Ce){return 1===arguments.length?A(ve):new k(ve,Te,Ie,null==Ce?1:Ce)}function k(ve,Te,Ie,Ce){this.r=+ve,this.g=+Te,this.b=+Ie,this.opacity=+Ce}function E(){return"#"+S(this.r)+S(this.g)+S(this.b)}function P(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===ve?")":", "+ve+")")}function S(ve){return((ve=Math.max(0,Math.min(255,Math.round(ve)||0)))<16?"0":"")+ve.toString(16)}function F(ve,Te,Ie,Ce){return Ce<=0?ve=Te=Ie=NaN:Ie<=0||Ie>=1?ve=Te=NaN:Te<=0&&(ve=NaN),new L(ve,Te,Ie,Ce)}function R(ve){if(ve instanceof L)return new L(ve.h,ve.s,ve.l,ve.opacity);if(ve instanceof b||(ve=l(ve)),!ve)return new L;if(ve instanceof L)return ve;var Te=(ve=ve.rgb()).r/255,Ie=ve.g/255,Ce=ve.b/255,Pe=Math.min(Te,Ie,Ce),Ve=Math.max(Te,Ie,Ce),qe=NaN,Je=Ve-Pe,lt=(Ve+Pe)/2;return Je?(qe=Te===Ve?(Ie-Ce)/Je+6*(Ie<Ce):Ie===Ve?(Ce-Te)/Je+2:(Te-Ie)/Je+4,Je/=lt<.5?Ve+Pe:2-Ve-Pe,qe*=60):Je=lt>0&&lt<1?0:qe,new L(qe,Je,lt,ve.opacity)}function D(ve,Te,Ie,Ce){return 1===arguments.length?R(ve):new L(ve,Te,Ie,null==Ce?1:Ce)}function L(ve,Te,Ie,Ce){this.h=+ve,this.s=+Te,this.l=+Ie,this.opacity=+Ce}function B(ve,Te,Ie){return 255*(ve<60?Te+(Ie-Te)*ve/60:ve<180?Ie:ve<240?Te+(Ie-Te)*(240-ve)/60:Te)}x(b,l,{copy:function(ve){return Object.assign(new this.constructor,this,ve)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHsl:function(){return R(this).formatHsl()},formatRgb:m,toString:m}),x(k,M,T(b,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new k(this.r*ve,this.g*ve,this.b*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new k(this.r*ve,this.g*ve,this.b*ve,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E,formatHex:E,formatRgb:P,toString:P})),x(L,D,T(b,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new L(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new L(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=this.h%360+360*(this.h<0),Te=isNaN(ve)||isNaN(this.s)?0:this.s,Ie=this.l,Ce=Ie+(Ie<.5?Ie:1-Ie)*Te,Pe=2*Ie-Ce;return new k(B(ve>=240?ve-240:ve+120,Pe,Ce),B(ve,Pe,Ce),B(ve<120?ve+240:ve-120,Pe,Ce),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===ve?")":", "+ve+")")}}));var V=Math.PI/180,Z=180/Math.PI,Y=6/29,ee=3*Y*Y;function Q(ve){if(ve instanceof K)return new K(ve.l,ve.a,ve.b,ve.opacity);if(ve instanceof te)return ne(ve);ve instanceof k||(ve=A(ve));var Te,Ie,Ce=G(ve.r),Pe=G(ve.g),Ve=G(ve.b),qe=oe((.2225045*Ce+.7168786*Pe+.0606169*Ve)/1);return Ce===Pe&&Pe===Ve?Te=Ie=qe:(Te=oe((.4360747*Ce+.3850649*Pe+.1430804*Ve)/.96422),Ie=oe((.0139322*Ce+.0971045*Pe+.7141733*Ve)/.82521)),new K(116*qe-16,500*(Te-qe),200*(qe-Ie),ve.opacity)}function $(ve,Te,Ie,Ce){return 1===arguments.length?Q(ve):new K(ve,Te,Ie,null==Ce?1:Ce)}function K(ve,Te,Ie,Ce){this.l=+ve,this.a=+Te,this.b=+Ie,this.opacity=+Ce}function oe(ve){return ve>.008856451679035631?Math.pow(ve,1/3):ve/ee+4/29}function j(ve){return ve>Y?ve*ve*ve:ee*(ve-4/29)}function H(ve){return 255*(ve<=.0031308?12.92*ve:1.055*Math.pow(ve,1/2.4)-.055)}function G(ve){return(ve/=255)<=.04045?ve/12.92:Math.pow((ve+.055)/1.055,2.4)}function re(ve){if(ve instanceof te)return new te(ve.h,ve.c,ve.l,ve.opacity);if(ve instanceof K||(ve=Q(ve)),0===ve.a&&0===ve.b)return new te(NaN,0<ve.l&&ve.l<100?0:NaN,ve.l,ve.opacity);var Te=Math.atan2(ve.b,ve.a)*Z;return new te(Te<0?Te+360:Te,Math.sqrt(ve.a*ve.a+ve.b*ve.b),ve.l,ve.opacity)}function q(ve,Te,Ie,Ce){return 1===arguments.length?re(ve):new te(ve,Te,Ie,null==Ce?1:Ce)}function te(ve,Te,Ie,Ce){this.h=+ve,this.c=+Te,this.l=+Ie,this.opacity=+Ce}function ne(ve){if(isNaN(ve.h))return new K(ve.l,0,0,ve.opacity);var Te=ve.h*V;return new K(ve.l,Math.cos(Te)*ve.c,Math.sin(Te)*ve.c,ve.opacity)}x(K,$,T(b,{brighter:function(ve){return new K(this.l+18*(null==ve?1:ve),this.a,this.b,this.opacity)},darker:function(ve){return new K(this.l-18*(null==ve?1:ve),this.a,this.b,this.opacity)},rgb:function(){var ve=(this.l+16)/116,Te=isNaN(this.a)?ve:ve+this.a/500,Ie=isNaN(this.b)?ve:ve-this.b/200;return new k(H(3.1338561*(Te=.96422*j(Te))-1.6168667*(ve=1*j(ve))-.4906146*(Ie=.82521*j(Ie))),H(-.9787684*Te+1.9161415*ve+.033454*Ie),H(.0719453*Te-.2289914*ve+1.4052427*Ie),this.opacity)}})),x(te,q,T(b,{brighter:function(ve){return new te(this.h,this.c,this.l+18*(null==ve?1:ve),this.opacity)},darker:function(ve){return new te(this.h,this.c,this.l-18*(null==ve?1:ve),this.opacity)},rgb:function(){return ne(this).rgb()}}));var ue=1.78277,de=-.29227,he=-.90649,be=1.97294,ge=be*he,we=be*ue,ke=ue*de- -.14861*he;function De(ve){if(ve instanceof Re)return new Re(ve.h,ve.s,ve.l,ve.opacity);ve instanceof k||(ve=A(ve));var Ie=ve.g/255,Ce=ve.b/255,Pe=(ke*Ce+ge*(ve.r/255)-we*Ie)/(ke+ge-we),Ve=Ce-Pe,qe=(be*(Ie-Pe)-de*Ve)/he,Je=Math.sqrt(qe*qe+Ve*Ve)/(be*Pe*(1-Pe)),lt=Je?Math.atan2(qe,Ve)*Z-120:NaN;return new Re(lt<0?lt+360:lt,Je,Pe,ve.opacity)}function Ee(ve,Te,Ie,Ce){return 1===arguments.length?De(ve):new Re(ve,Te,Ie,null==Ce?1:Ce)}function Re(ve,Te,Ie,Ce){this.h=+ve,this.s=+Te,this.l=+Ie,this.opacity=+Ce}x(Re,Ee,T(b,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new Re(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new Re(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=isNaN(this.h)?0:(this.h+120)*V,Te=+this.l,Ie=isNaN(this.s)?0:this.s*Te*(1-Te),Ce=Math.cos(ve),Pe=Math.sin(ve);return new k(255*(Te+Ie*(-.14861*Ce+ue*Pe)),255*(Te+Ie*(de*Ce+he*Pe)),255*(Te+Ie*(be*Ce)),this.opacity)}})),g.color=l,g.cubehelix=Ee,g.gray=function(ve,Te){return new K(ve,0,0,null==Te?1:Te)},g.hcl=q,g.hsl=D,g.lab=$,g.lch=function(ve,Te,Ie,Ce){return 1===arguments.length?re(ve):new te(Ie,Te,ve,null==Ce?1:Ce)},g.rgb=M,Object.defineProperty(g,"__esModule",{value:!0})},x("object"==typeof ie&&void 0!==ae?ie:(g=g||self).d3=g.d3||{})},{}],110:[function(_,ae,ie){var g,x;g=this,x=function(g){"use strict";var x={value:function(){}};function T(){for(var a,n=0,d=arguments.length,s={};n<d;++n){if(!(a=arguments[n]+"")||a in s||/[\s.]/.test(a))throw new Error("illegal type: "+a);s[a]=[]}return new b(s)}function b(a){this._=a}function e(a,n){return a.trim().split(/^|\s+/).map(function(d){var s="",i=d.indexOf(".");if(i>=0&&(s=d.slice(i+1),d=d.slice(0,i)),d&&!n.hasOwnProperty(d))throw new Error("unknown type: "+d);return{type:d,name:s}})}function r(a,n){for(var d,s=0,i=a.length;s<i;++s)if((d=a[s]).name===n)return d.value}function t(a,n,d){for(var s=0,i=a.length;s<i;++s)if(a[s].name===n){a[s]=x,a=a.slice(0,s).concat(a.slice(s+1));break}return null!=d&&a.push({name:n,value:d}),a}b.prototype=T.prototype={constructor:b,on:function(a,n){var d,s=this._,i=e(a+"",s),u=-1,f=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++u<f;)if(d=(a=i[u]).type)s[d]=t(s[d],a.name,n);else if(null==n)for(d in s)s[d]=t(s[d],a.name,null);return this}for(;++u<f;)if((d=(a=i[u]).type)&&(d=r(s[d],a.name)))return d},copy:function(){var a={},n=this._;for(var d in n)a[d]=n[d].slice();return new b(a)},call:function(a,n){if((d=arguments.length-2)>0)for(var d,s,i=new Array(d),u=0;u<d;++u)i[u]=arguments[u+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(u=0,d=(s=this._[a]).length;u<d;++u)s[u].value.apply(n,i)},apply:function(a,n,d){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var s=this._[a],i=0,u=s.length;i<u;++i)s[i].value.apply(n,d)}},g.dispatch=T,Object.defineProperty(g,"__esModule",{value:!0})},x("object"==typeof ie&&void 0!==ae?ie:(g=g||self).d3=g.d3||{})},{}],111:[function(_,ae,ie){var g,x;g=this,x=function(g,x,T,b,e){"use strict";function r(p){return function(){return p}}function t(){return 1e-6*(Math.random()-.5)}function a(p){return p.x+p.vx}function n(p){return p.y+p.vy}function d(p){return p.index}function s(p,y){var m=p.get(y);if(!m)throw new Error("missing: "+y);return m}function i(p){return p.x}function u(p){return p.y}var f=Math.PI*(3-Math.sqrt(5));g.forceCenter=function(p,y){var m;function l(){var w,v,A=m.length,M=0,k=0;for(w=0;w<A;++w)M+=(v=m[w]).x,k+=v.y;for(M=M/A-p,k=k/A-y,w=0;w<A;++w)(v=m[w]).x-=M,v.y-=k}return null==p&&(p=0),null==y&&(y=0),l.initialize=function(w){m=w},l.x=function(w){return arguments.length?(p=+w,l):p},l.y=function(w){return arguments.length?(y=+w,l):y},l},g.forceCollide=function(p){var y,m,l=1,w=1;function v(){for(var k,E,P,S,F,R,D,L=y.length,B=0;B<w;++B)for(E=x.quadtree(y,a,n).visitAfter(A),k=0;k<L;++k)D=(R=m[(P=y[k]).index])*R,S=P.x+P.vx,F=P.y+P.vy,E.visit(V);function V(Z,Y,ee,Q,$){var K=Z.data,oe=Z.r,j=R+oe;if(!K)return Y>S+j||Q<S-j||ee>F+j||$<F-j;if(K.index>P.index){var H=S-K.x-K.vx,G=F-K.y-K.vy,re=H*H+G*G;re<j*j&&(0===H&&(re+=(H=t())*H),0===G&&(re+=(G=t())*G),re=(j-(re=Math.sqrt(re)))/re*l,P.vx+=(H*=re)*(j=(oe*=oe)/(D+oe)),P.vy+=(G*=re)*j,K.vx-=H*(j=1-j),K.vy-=G*j)}}}function A(k){if(k.data)return k.r=m[k.data.index];for(var E=k.r=0;E<4;++E)k[E]&&k[E].r>k.r&&(k.r=k[E].r)}function M(){if(y){var k,E,P=y.length;for(m=new Array(P),k=0;k<P;++k)m[(E=y[k]).index]=+p(E,k,y)}}return"function"!=typeof p&&(p=r(null==p?1:+p)),v.initialize=function(k){y=k,M()},v.iterations=function(k){return arguments.length?(w=+k,v):w},v.strength=function(k){return arguments.length?(l=+k,v):l},v.radius=function(k){return arguments.length?(p="function"==typeof k?k:r(+k),M(),v):p},v},g.forceLink=function(p){var y,m,l,w,v,A=d,M=function(D){return 1/Math.min(w[D.source.index],w[D.target.index])},k=r(30),E=1;function P(D){for(var L=0,B=p.length;L<E;++L)for(var V,Z,Y,ee,Q,$,K,oe=0;oe<B;++oe)Z=(V=p[oe]).source,ee=(Y=V.target).x+Y.vx-Z.x-Z.vx||t(),Q=Y.y+Y.vy-Z.y-Z.vy||t(),ee*=$=(($=Math.sqrt(ee*ee+Q*Q))-m[oe])/$*D*y[oe],Q*=$,Y.vx-=ee*(K=v[oe]),Y.vy-=Q*K,Z.vx+=ee*(K=1-K),Z.vy+=Q*K}function S(){if(l){var D,L,B=l.length,V=p.length,Z=T.map(l,A);for(D=0,w=new Array(B);D<V;++D)(L=p[D]).index=D,"object"!=typeof L.source&&(L.source=s(Z,L.source)),"object"!=typeof L.target&&(L.target=s(Z,L.target)),w[L.source.index]=(w[L.source.index]||0)+1,w[L.target.index]=(w[L.target.index]||0)+1;for(D=0,v=new Array(V);D<V;++D)v[D]=w[(L=p[D]).source.index]/(w[L.source.index]+w[L.target.index]);y=new Array(V),F(),m=new Array(V),R()}}function F(){if(l)for(var D=0,L=p.length;D<L;++D)y[D]=+M(p[D],D,p)}function R(){if(l)for(var D=0,L=p.length;D<L;++D)m[D]=+k(p[D],D,p)}return null==p&&(p=[]),P.initialize=function(D){l=D,S()},P.links=function(D){return arguments.length?(p=D,S(),P):p},P.id=function(D){return arguments.length?(A=D,P):A},P.iterations=function(D){return arguments.length?(E=+D,P):E},P.strength=function(D){return arguments.length?(M="function"==typeof D?D:r(+D),F(),P):M},P.distance=function(D){return arguments.length?(k="function"==typeof D?D:r(+D),R(),P):k},P},g.forceManyBody=function(){var p,y,m,l,w=r(-30),v=1,A=1/0,M=.81;function k(F){var R,D=p.length,L=x.quadtree(p,i,u).visitAfter(P);for(m=F,R=0;R<D;++R)y=p[R],L.visit(S)}function E(){if(p){var F,R,D=p.length;for(l=new Array(D),F=0;F<D;++F)l[(R=p[F]).index]=+w(R,F,p)}}function P(F){var R,D,L,B,V,Z=0,Y=0;if(F.length){for(L=B=V=0;V<4;++V)(R=F[V])&&(D=Math.abs(R.value))&&(Z+=R.value,Y+=D,L+=D*R.x,B+=D*R.y);F.x=L/Y,F.y=B/Y}else{(R=F).x=R.data.x,R.y=R.data.y;do{Z+=l[R.data.index]}while(R=R.next)}F.value=Z}function S(F,R,D,L){if(!F.value)return!0;var B=F.x-y.x,V=F.y-y.y,Z=L-R,Y=B*B+V*V;if(Z*Z/M<Y)return Y<A&&(0===B&&(Y+=(B=t())*B),0===V&&(Y+=(V=t())*V),Y<v&&(Y=Math.sqrt(v*Y)),y.vx+=B*F.value*m/Y,y.vy+=V*F.value*m/Y),!0;if(!(F.length||Y>=A)){(F.data!==y||F.next)&&(0===B&&(Y+=(B=t())*B),0===V&&(Y+=(V=t())*V),Y<v&&(Y=Math.sqrt(v*Y)));do{F.data!==y&&(y.vx+=B*(Z=l[F.data.index]*m/Y),y.vy+=V*Z)}while(F=F.next)}}return k.initialize=function(F){p=F,E()},k.strength=function(F){return arguments.length?(w="function"==typeof F?F:r(+F),E(),k):w},k.distanceMin=function(F){return arguments.length?(v=F*F,k):Math.sqrt(v)},k.distanceMax=function(F){return arguments.length?(A=F*F,k):Math.sqrt(A)},k.theta=function(F){return arguments.length?(M=F*F,k):Math.sqrt(M)},k},g.forceRadial=function(p,y,m){var l,w,v,A=r(.1);function M(E){for(var P=0,S=l.length;P<S;++P){var F=l[P],R=F.x-y||1e-6,D=F.y-m||1e-6,L=Math.sqrt(R*R+D*D),B=(v[P]-L)*w[P]*E/L;F.vx+=R*B,F.vy+=D*B}}function k(){if(l){var E,P=l.length;for(w=new Array(P),v=new Array(P),E=0;E<P;++E)v[E]=+p(l[E],E,l),w[E]=isNaN(v[E])?0:+A(l[E],E,l)}}return"function"!=typeof p&&(p=r(+p)),null==y&&(y=0),null==m&&(m=0),M.initialize=function(E){l=E,k()},M.strength=function(E){return arguments.length?(A="function"==typeof E?E:r(+E),k(),M):A},M.radius=function(E){return arguments.length?(p="function"==typeof E?E:r(+E),k(),M):p},M.x=function(E){return arguments.length?(y=+E,M):y},M.y=function(E){return arguments.length?(m=+E,M):m},M},g.forceSimulation=function(p){var y,m=1,l=.001,w=1-Math.pow(l,1/300),v=0,A=.6,M=T.map(),k=e.timer(P),E=b.dispatch("tick","end");function P(){S(),E.call("tick",y),m<l&&(k.stop(),E.call("end",y))}function S(D){var L,B,V=p.length;void 0===D&&(D=1);for(var Z=0;Z<D;++Z)for(m+=(v-m)*w,M.each(function(Y){Y(m)}),L=0;L<V;++L)null==(B=p[L]).fx?B.x+=B.vx*=A:(B.x=B.fx,B.vx=0),null==B.fy?B.y+=B.vy*=A:(B.y=B.fy,B.vy=0);return y}function F(){for(var D,L=0,B=p.length;L<B;++L){if((D=p[L]).index=L,null!=D.fx&&(D.x=D.fx),null!=D.fy&&(D.y=D.fy),isNaN(D.x)||isNaN(D.y)){var V=10*Math.sqrt(L),Z=L*f;D.x=V*Math.cos(Z),D.y=V*Math.sin(Z)}(isNaN(D.vx)||isNaN(D.vy))&&(D.vx=D.vy=0)}}function R(D){return D.initialize&&D.initialize(p),D}return null==p&&(p=[]),F(),y={tick:S,restart:function(){return k.restart(P),y},stop:function(){return k.stop(),y},nodes:function(D){return arguments.length?(p=D,F(),M.each(R),y):p},alpha:function(D){return arguments.length?(m=+D,y):m},alphaMin:function(D){return arguments.length?(l=+D,y):l},alphaDecay:function(D){return arguments.length?(w=+D,y):+w},alphaTarget:function(D){return arguments.length?(v=+D,y):v},velocityDecay:function(D){return arguments.length?(A=1-D,y):1-A},force:function(D,L){return arguments.length>1?(null==L?M.remove(D):M.set(D,R(L)),y):M.get(D)},find:function(D,L,B){var V,Z,Y,ee,Q,$=0,K=p.length;for(null==B?B=1/0:B*=B,$=0;$<K;++$)(Y=(V=D-(ee=p[$]).x)*V+(Z=L-ee.y)*Z)<B&&(Q=ee,B=Y);return Q},on:function(D,L){return arguments.length>1?(E.on(D,L),y):E.on(D)}}},g.forceX=function(p){var y,m,l,w=r(.1);function v(M){for(var k,E=0,P=y.length;E<P;++E)(k=y[E]).vx+=(l[E]-k.x)*m[E]*M}function A(){if(y){var M,k=y.length;for(m=new Array(k),l=new Array(k),M=0;M<k;++M)m[M]=isNaN(l[M]=+p(y[M],M,y))?0:+w(y[M],M,y)}}return"function"!=typeof p&&(p=r(null==p?0:+p)),v.initialize=function(M){y=M,A()},v.strength=function(M){return arguments.length?(w="function"==typeof M?M:r(+M),A(),v):w},v.x=function(M){return arguments.length?(p="function"==typeof M?M:r(+M),A(),v):p},v},g.forceY=function(p){var y,m,l,w=r(.1);function v(M){for(var k,E=0,P=y.length;E<P;++E)(k=y[E]).vy+=(l[E]-k.y)*m[E]*M}function A(){if(y){var M,k=y.length;for(m=new Array(k),l=new Array(k),M=0;M<k;++M)m[M]=isNaN(l[M]=+p(y[M],M,y))?0:+w(y[M],M,y)}}return"function"!=typeof p&&(p=r(null==p?0:+p)),v.initialize=function(M){y=M,A()},v.strength=function(M){return arguments.length?(w="function"==typeof M?M:r(+M),A(),v):w},v.y=function(M){return arguments.length?(p="function"==typeof M?M:r(+M),A(),v):p},v},Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?x(ie,_("d3-quadtree"),_("d3-collection"),_("d3-dispatch"),_("d3-timer")):x(g.d3=g.d3||{},g.d3,g.d3,g.d3,g.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(_,ae,ie){var g,x;g=this,x=function(g){"use strict";function x(y,m){if((l=(y=m?y.toExponential(m-1):y.toExponential()).indexOf("e"))<0)return null;var l,w=y.slice(0,l);return[w.length>1?w[0]+w.slice(2):w,+y.slice(l+1)]}function T(y){return(y=x(Math.abs(y)))?y[1]:NaN}var b,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(y){if(!(m=e.exec(y)))throw new Error("invalid format: "+y);var m;return new t({fill:m[1],align:m[2],sign:m[3],symbol:m[4],zero:m[5],width:m[6],comma:m[7],precision:m[8]&&m[8].slice(1),trim:m[9],type:m[10]})}function t(y){this.fill=void 0===y.fill?" ":y.fill+"",this.align=void 0===y.align?">":y.align+"",this.sign=void 0===y.sign?"-":y.sign+"",this.symbol=void 0===y.symbol?"":y.symbol+"",this.zero=!!y.zero,this.width=void 0===y.width?void 0:+y.width,this.comma=!!y.comma,this.precision=void 0===y.precision?void 0:+y.precision,this.trim=!!y.trim,this.type=void 0===y.type?"":y.type+""}function a(y,m){var l=x(y,m);if(!l)return y+"";var w=l[0],v=l[1];return v<0?"0."+new Array(-v).join("0")+w:w.length>v+1?w.slice(0,v+1)+"."+w.slice(v+1):w+new Array(v-w.length+2).join("0")}r.prototype=t.prototype,t.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var n={"%":function(y,m){return(100*y).toFixed(m)},b:function(y){return Math.round(y).toString(2)},c:function(y){return y+""},d:function(y){return Math.abs(y=Math.round(y))>=1e21?y.toLocaleString("en").replace(/,/g,""):y.toString(10)},e:function(y,m){return y.toExponential(m)},f:function(y,m){return y.toFixed(m)},g:function(y,m){return y.toPrecision(m)},o:function(y){return Math.round(y).toString(8)},p:function(y,m){return a(100*y,m)},r:a,s:function(y,m){var l=x(y,m);if(!l)return y+"";var w=l[0],v=l[1],A=v-(b=3*Math.max(-8,Math.min(8,Math.floor(v/3))))+1,M=w.length;return A===M?w:A>M?w+new Array(A-M+1).join("0"):A>0?w.slice(0,A)+"."+w.slice(A):"0."+new Array(1-A).join("0")+x(y,Math.max(0,m+A-1))[0]},X:function(y){return Math.round(y).toString(16).toUpperCase()},x:function(y){return Math.round(y).toString(16)}};function d(y){return y}var s,i=Array.prototype.map,u=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function f(y){var m,l,R,w=void 0===y.grouping||void 0===y.thousands?d:(m=i.call(y.grouping,Number),l=y.thousands+"",function(R,D){for(var L=R.length,B=[],V=0,Z=m[0],Y=0;L>0&&Z>0&&(Y+Z+1>D&&(Z=Math.max(1,D-Y)),B.push(R.substring(L-=Z,L+Z)),!((Y+=Z+1)>D));)Z=m[V=(V+1)%m.length];return B.reverse().join(l)}),v=void 0===y.currency?"":y.currency[0]+"",A=void 0===y.currency?"":y.currency[1]+"",M=void 0===y.decimal?".":y.decimal+"",k=void 0===y.numerals?d:(R=i.call(y.numerals,String),function(D){return D.replace(/[0-9]/g,function(L){return R[+L]})}),E=void 0===y.percent?"%":y.percent+"",P=void 0===y.minus?"-":y.minus+"",S=void 0===y.nan?"NaN":y.nan+"";function F(R){var D=(R=r(R)).fill,L=R.align,B=R.sign,V=R.symbol,Z=R.zero,Y=R.width,ee=R.comma,Q=R.precision,$=R.trim,K=R.type;"n"===K?(ee=!0,K="g"):n[K]||(void 0===Q&&(Q=12),$=!0,K="g"),(Z||"0"===D&&"="===L)&&(Z=!0,D="0",L="=");var oe="$"===V?v:"#"===V&&/[boxX]/.test(K)?"0"+K.toLowerCase():"",j="$"===V?A:/[%p]/.test(K)?E:"",H=n[K],G=/[defgprs%]/.test(K);function re(q){var te,ne,le,ue=oe,de=j;if("c"===K)de=H(q)+de,q="";else{var he=(q=+q)<0||1/q<0;if(q=isNaN(q)?S:H(Math.abs(q),Q),$&&(q=function(we){e:for(var ke,De=we.length,Ee=1,Re=-1;Ee<De;++Ee)switch(we[Ee]){case".":Re=ke=Ee;break;case"0":0===Re&&(Re=Ee),ke=Ee;break;default:if(!+we[Ee])break e;Re>0&&(Re=0)}return Re>0?we.slice(0,Re)+we.slice(ke+1):we}(q)),he&&0==+q&&"+"!==B&&(he=!1),ue=(he?"("===B?B:P:"-"===B||"("===B?"":B)+ue,de=("s"===K?u[8+b/3]:"")+de+(he&&"("===B?")":""),G)for(te=-1,ne=q.length;++te<ne;)if(48>(le=q.charCodeAt(te))||le>57){de=(46===le?M+q.slice(te+1):q.slice(te))+de,q=q.slice(0,te);break}}ee&&!Z&&(q=w(q,1/0));var be=ue.length+q.length+de.length,ge=be<Y?new Array(Y-be+1).join(D):"";switch(ee&&Z&&(q=w(ge+q,ge.length?Y-de.length:1/0),ge=""),L){case"<":q=ue+q+de+ge;break;case"=":q=ue+ge+q+de;break;case"^":q=ge.slice(0,be=ge.length>>1)+ue+q+de+ge.slice(be);break;default:q=ge+ue+q+de}return k(q)}return Q=void 0===Q?6:/[gprs]/.test(K)?Math.max(1,Math.min(21,Q)):Math.max(0,Math.min(20,Q)),re.toString=function(){return R+""},re}return{format:F,formatPrefix:function(R,D){var L=F(((R=r(R)).type="f",R)),B=3*Math.max(-8,Math.min(8,Math.floor(T(D)/3))),V=Math.pow(10,-B),Z=u[8+B/3];return function(Y){return L(V*Y)+Z}}}}function p(y){return s=f(y),g.format=s.format,g.formatPrefix=s.formatPrefix,s}p({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),g.FormatSpecifier=t,g.formatDefaultLocale=p,g.formatLocale=f,g.formatSpecifier=r,g.precisionFixed=function(y){return Math.max(0,-T(Math.abs(y)))},g.precisionPrefix=function(y,m){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(T(m)/3)))-T(Math.abs(y)))},g.precisionRound=function(y,m){return y=Math.abs(y),m=Math.abs(m)-y,Math.max(0,T(m)-T(y))+1},Object.defineProperty(g,"__esModule",{value:!0})},x("object"==typeof ie&&void 0!==ae?ie:(g="undefined"!=typeof globalThis?globalThis:g||self).d3=g.d3||{})},{}],113:[function(_,ae,ie){var g,x;g=this,x=function(g,x,T){"use strict";var b=Math.abs,e=Math.atan,r=Math.atan2,t=Math.cos,a=Math.exp,n=Math.floor,d=Math.log,s=Math.max,i=Math.min,u=Math.pow,f=Math.round,p=Math.sign||function(We){return We>0?1:We<0?-1:0},y=Math.sin,m=Math.tan,l=1e-6,w=Math.PI,v=w/2,A=w/4,M=Math.SQRT1_2,k=L(2),E=L(w),P=2*w,S=180/w,F=w/180;function R(We){return We>1?v:We<-1?-v:Math.asin(We)}function D(We){return We>1?0:We<-1?w:Math.acos(We)}function L(We){return We>0?Math.sqrt(We):0}function B(We){return(a(We)-a(-We))/2}function V(We){return(a(We)+a(-We))/2}function Z(We){var Ke=m(We/2),at=2*d(t(We/2))/(Ke*Ke);function pt(kt,vt){var Pt=t(kt),un=t(vt),fn=y(vt),on=un*Pt,pn=-((1-on?d((1+on)/2)/(1-on):-.5)+at/(1+on));return[pn*un*y(kt),pn*fn]}return pt.invert=function(kt,vt){var Pt,un=L(kt*kt+vt*vt),fn=-We/2,on=50;if(!un)return[0,0];do{var pn=fn/2,An=t(pn),Ln=y(pn),Pn=Ln/An,zn=-d(b(An));fn-=Pt=(2/Pn*zn-at*Pn-un)/(-zn/(Ln*Ln)+1-at/(2*An*An))*(An<0?.7:1)}while(b(Pt)>l&&--on>0);var yr=y(fn);return[r(kt*yr,un*t(fn)),R(vt*yr/un)]},pt}function Y(We,Ke){var kt,at=t(Ke),pt=(kt=D(at*t(We/=2)))?kt/Math.sin(kt):1;return[2*at*y(We)*pt,y(Ke)*pt]}function ee(We){var Ke=y(We),at=t(We),pt=We>=0?1:-1,kt=m(pt*We),vt=(1+Ke-at)/2;function Pt(un,fn){var on=t(fn),pn=t(un/=2);return[(1+on)*y(un),(pt*fn>-r(pn,kt)-.001?0:10*-pt)+vt+y(fn)*at-(1+on)*Ke*pn]}return Pt.invert=function(un,fn){var on=0,pn=0,An=50;do{var Ln=t(on),Pn=y(on),zn=t(pn),yr=y(pn),Dr=1+zn,Yr=Dr*Pn-un,Kr=vt+yr*at-Dr*Ke*Ln-fn,si=Dr*Ln/2,Jr=-Pn*yr,Li=Ke*Dr*Pn/2,Pi=at*zn+Ke*Ln*yr,Aa=Jr*Li-Pi*si,ra=(Kr*Jr-Yr*Pi)/Aa/2,aa=(Yr*Li-Kr*si)/Aa;b(aa)>2&&(aa/=2),on-=ra,pn-=aa}while((b(ra)>l||b(aa)>l)&&--An>0);return pt*pn>-r(t(on),kt)-.001?[2*on,pn]:null},Pt}function Q(We,Ke){var at=m(Ke/2),pt=L(1-at*at),kt=1+pt*t(We/=2),vt=y(We)*pt/kt,Pt=at/kt,un=vt*vt,fn=Pt*Pt;return[4/3*vt*(3+un-3*fn),4/3*Pt*(3+3*un-fn)]}Y.invert=function(We,Ke){if(!(We*We+4*Ke*Ke>w*w+l)){var at=We,pt=Ke,kt=25;do{var vt,Pt=y(at),un=y(at/2),fn=t(at/2),on=y(pt),pn=t(pt),An=y(2*pt),Ln=on*on,Pn=pn*pn,zn=un*un,yr=1-Pn*fn*fn,Dr=yr?D(pn*fn)*L(vt=1/yr):vt=0,Yr=2*Dr*pn*un-We,Kr=Dr*on-Ke,si=vt*(Pn*zn+Dr*pn*fn*Ln),Jr=vt*(.5*Pt*An-2*Dr*on*un),Li=.25*vt*(An*un-Dr*on*Pn*Pt),Pi=vt*(Ln*fn+Dr*zn*pn),Aa=Jr*Li-Pi*si;if(!Aa)break;var ra=(Kr*Jr-Yr*Pi)/Aa,aa=(Yr*Li-Kr*si)/Aa;at-=ra,pt-=aa}while((b(ra)>l||b(aa)>l)&&--kt>0);return[at,pt]}},Q.invert=function(We,Ke){if(Ke*=3/8,!(We*=3/8)&&b(Ke)>1)return null;var on,at=1+We*We+Ke*Ke,pt=L((at-L(at*at-4*Ke*Ke))/2),kt=R(pt)/3,vt=pt?(on=b(Ke/pt),d(on+L(on*on-1))/3):function(on){return d(on+L(on*on+1))}(b(We))/3,Pt=t(kt),un=V(vt),fn=un*un-Pt*Pt;return[2*p(We)*r(B(vt)*Pt,.25-fn),2*p(Ke)*r(un*y(kt),.25+fn)]};var $=L(8),K=d(1+k);function oe(We,Ke){var at=b(Ke);return at<A?[We,d(m(A+Ke/2))]:[We*t(at)*(2*k-1/y(at)),p(Ke)*(2*k*(at-A)-d(m(at/2)))]}function j(We){var Ke=2*w/We;function at(pt,kt){var vt=x.geoAzimuthalEquidistantRaw(pt,kt);if(b(pt)>v){var Pt=r(vt[1],vt[0]),un=L(vt[0]*vt[0]+vt[1]*vt[1]),fn=Ke*f((Pt-v)/Ke)+v,on=r(y(Pt-=fn),2-t(Pt));Pt=fn+R(w/un*y(on))-on,vt[0]=un*t(Pt),vt[1]=un*y(Pt)}return vt}return at.invert=function(pt,kt){var vt=L(pt*pt+kt*kt);if(vt>v){var Pt=r(kt,pt),un=Ke*f((Pt-v)/Ke)+v,fn=Pt>un?-1:1,on=vt*t(un-Pt),pn=1/m(fn*D((on-w)/L(w*(w-2*on)+vt*vt)));Pt=un+2*e((pn+fn*L(pn*pn-3))/3),pt=vt*t(Pt),kt=vt*y(Pt)}return x.geoAzimuthalEquidistantRaw.invert(pt,kt)},at}function H(We,Ke){if(arguments.length<2&&(Ke=We),1===Ke)return x.geoAzimuthalEqualAreaRaw;if(Ke===1/0)return G;function at(pt,kt){var vt=x.geoAzimuthalEqualAreaRaw(pt/Ke,kt);return vt[0]*=We,vt}return at.invert=function(pt,kt){var vt=x.geoAzimuthalEqualAreaRaw.invert(pt/We,kt);return vt[0]*=Ke,vt},at}function G(We,Ke){return[We*t(Ke)/t(Ke/=2),2*y(Ke)]}function re(We,Ke,at){var pt,kt,vt,Pt=100;at=void 0===at?0:+at,Ke=+Ke;do{(kt=We(at))===(vt=We(at+l))&&(vt=kt+l),at-=pt=-1*l*(kt-Ke)/(kt-vt)}while(Pt-- >0&&b(pt)>l);return Pt<0?NaN:at}function q(We,Ke,at){return void 0===Ke&&(Ke=40),void 0===at&&(at=1e-12),function(pt,kt,vt,Pt){var un,fn,on;vt=void 0===vt?0:+vt,Pt=void 0===Pt?0:+Pt;for(var pn=0;pn<Ke;pn++){var An=We(vt,Pt),Ln=An[0]-pt,Pn=An[1]-kt;if(b(Ln)<at&&b(Pn)<at)break;var zn=Ln*Ln+Pn*Pn;if(zn>un)vt-=fn/=2,Pt-=on/=2;else{un=zn;var yr=(vt>0?-1:1)*at,Dr=(Pt>0?-1:1)*at,Yr=We(vt+yr,Pt),Kr=We(vt,Pt+Dr),si=(Yr[0]-An[0])/yr,Jr=(Yr[1]-An[1])/yr,Li=(Kr[0]-An[0])/Dr,Pi=(Kr[1]-An[1])/Dr,Aa=Pi*si-Jr*Li,ra=(b(Aa)<.5?.5:1)/Aa;if(vt+=fn=(Pn*Li-Ln*Pi)*ra,Pt+=on=(Ln*Jr-Pn*si)*ra,b(fn)<at&&b(on)<at)break}}return[vt,Pt]}}function te(){var We=H(1.68,2);function Ke(at,pt){if(at+pt<-1.4){var kt=(at-pt+1.6)*(at+pt+1.4)/8;at+=kt,pt-=.8*kt*y(pt+w/2)}var vt=We(at,pt),Pt=(1-t(at*pt))/12;return vt[1]<0&&(vt[0]*=1+Pt),vt[1]>0&&(vt[1]*=1+Pt/1.5*vt[0]*vt[0]),vt}return Ke.invert=q(Ke),Ke}function ne(We,Ke){var at,pt=We*y(Ke),kt=30;do{Ke-=at=(Ke+y(Ke)-pt)/(1+t(Ke))}while(b(at)>l&&--kt>0);return Ke/2}function le(We,Ke,at){function pt(kt,vt){return[We*kt*t(vt=ne(at,vt)),Ke*y(vt)]}return pt.invert=function(kt,vt){return vt=R(vt/Ke),[kt/(We*t(vt)),R((2*vt+y(2*vt))/at)]},pt}oe.invert=function(We,Ke){if((pt=b(Ke))<K)return[We,2*e(a(Ke))-v];var at,pt,kt=A,vt=25;do{var Pt=t(kt/2),un=m(kt/2);kt-=at=($*(kt-A)-d(un)-pt)/($-Pt*Pt/(2*un))}while(b(at)>1e-12&&--vt>0);return[We/(t(kt)*($-1/y(kt))),p(Ke)*kt]},G.invert=function(We,Ke){var at=2*R(Ke/2);return[We*t(at/2)/t(at),at]};var ue=le(k/v,k,w),de=2.00276;function be(We,Ke){var at=ne(w,Ke);return[de*We/(1/t(Ke)+1.11072/t(at)),(Ke+k*y(at))/de]}function ge(We){var Ke=0,at=x.geoProjectionMutator(We),pt=at(Ke);return pt.parallel=function(kt){return arguments.length?at(Ke=kt*F):Ke*S},pt}function we(We,Ke){return[We*t(Ke),Ke]}function ke(We){if(!We)return we;var Ke=1/m(We);function at(pt,kt){var vt=Ke+We-kt,Pt=vt&&pt*t(kt)/vt;return[vt*y(Pt),Ke-vt*t(Pt)]}return at.invert=function(pt,kt){var vt=L(pt*pt+(kt=Ke-kt)*kt),Pt=Ke+We-vt;return[vt/t(Pt)*r(pt,kt),Pt]},at}function De(We){function Ke(at,pt){var kt=v-pt,vt=kt&&at*We*y(kt)/kt;return[kt*y(vt)/We,v-kt*t(vt)]}return Ke.invert=function(at,pt){var kt=at*We,vt=v-pt,Pt=L(kt*kt+vt*vt),un=r(kt,vt);return[(Pt?Pt/y(Pt):1)*un/We,v-Pt]},Ke}be.invert=function(We,Ke){var at,pt,kt=de*Ke,vt=Ke<0?-A:A,Pt=25;do{pt=kt-k*y(vt),vt-=at=(y(2*vt)+2*vt-w*y(pt))/(2*t(2*vt)+2+w*t(pt)*k*t(vt))}while(b(at)>l&&--Pt>0);return pt=kt-k*y(vt),[We*(1/t(pt)+1.11072/t(vt))/de,pt]},we.invert=function(We,Ke){return[We/t(Ke),Ke]};var Ee=le(1,4/w,w);function Re(We,Ke,at,pt,kt,vt){var Pt,un=t(vt);if(b(We)>1||b(vt)>1)Pt=D(at*kt+Ke*pt*un);else{var fn=y(We/2),on=y(vt/2);Pt=2*R(L(fn*fn+Ke*pt*on*on))}return b(Pt)>l?[Pt,r(pt*y(vt),Ke*kt-at*pt*un)]:[0,0]}function ve(We,Ke,at){return D((We*We+Ke*Ke-at*at)/(2*We*Ke))}function Te(We){return We-2*w*n((We+w)/(2*w))}function Ie(We,Ke,at){for(var pt,kt=[[We[0],We[1],y(We[1]),t(We[1])],[Ke[0],Ke[1],y(Ke[1]),t(Ke[1])],[at[0],at[1],y(at[1]),t(at[1])]],vt=kt[2],Pt=0;Pt<3;++Pt,vt=pt)vt.v=Re((pt=kt[Pt])[1]-vt[1],vt[3],vt[2],pt[3],pt[2],pt[0]-vt[0]),vt.point=[0,0];var un=ve(kt[0].v[0],kt[2].v[0],kt[1].v[0]),fn=ve(kt[0].v[0],kt[1].v[0],kt[2].v[0]),on=w-un;kt[2].point[1]=0,kt[0].point[0]=-(kt[1].point[0]=kt[0].v[0]/2);var pn=[kt[2].point[0]=kt[0].point[0]+kt[2].v[0]*t(un),2*(kt[0].point[1]=kt[1].point[1]=kt[2].v[0]*y(un))];return function(An,Ln){var Pn,zn=y(Ln),yr=t(Ln),Dr=new Array(3);for(Pn=0;Pn<3;++Pn){var Yr=kt[Pn];if(Dr[Pn]=Re(Ln-Yr[1],Yr[3],Yr[2],yr,zn,An-Yr[0]),!Dr[Pn][0])return Yr.point;Dr[Pn][1]=Te(Dr[Pn][1]-Yr.v[1])}var Kr=pn.slice();for(Pn=0;Pn<3;++Pn){var Jr=ve(kt[Pn].v[0],Dr[Pn][0],Dr[2==Pn?0:Pn+1][0]);Dr[Pn][1]<0&&(Jr=-Jr),Pn?1==Pn?(Kr[0]-=Dr[Pn][0]*t(Jr=fn-Jr),Kr[1]-=Dr[Pn][0]*y(Jr)):(Kr[0]+=Dr[Pn][0]*t(Jr=on-Jr),Kr[1]+=Dr[Pn][0]*y(Jr)):(Kr[0]+=Dr[Pn][0]*t(Jr),Kr[1]-=Dr[Pn][0]*y(Jr))}return Kr[0]/=3,Kr[1]/=3,Kr}}function Ce(We){return We[0]*=F,We[1]*=F,We}function Pe(We,Ke,at){var pt=x.geoCentroid({type:"MultiPoint",coordinates:[We,Ke,at]}),kt=[-pt[0],-pt[1]],vt=x.geoRotation(kt),Pt=Ie(Ce(vt(We)),Ce(vt(Ke)),Ce(vt(at)));Pt.invert=q(Pt);var un=x.geoProjection(Pt).rotate(kt),fn=un.center;return delete un.rotate,un.center=function(on){return arguments.length?fn(vt(on)):vt.invert(fn())},un.clipAngle(90)}function Ve(We,Ke){var at=L(1-y(Ke));return[2/E*We*at,E*(1-at)]}function qe(We){var Ke=m(We);function at(pt,kt){return[pt,(pt?pt/y(pt):1)*(y(kt)*t(pt)-Ke*t(kt))]}return at.invert=Ke?function(pt,kt){pt&&(kt*=y(pt)/pt);var vt=t(pt);return[pt,2*r(L(vt*vt+Ke*Ke-kt*kt)-vt,Ke-kt)]}:function(pt,kt){return[pt,R(pt?kt*m(pt)/pt:kt)]},at}Ve.invert=function(We,Ke){var at=(at=Ke/E-1)*at;return[at>0?We*L(w/at)/2:0,R(1-at)]};var Je=L(3);function lt(We,Ke){return[Je*We*(2*t(2*Ke/3)-1)/E,Je*E*y(Ke/3)]}function He(We){var Ke=t(We);function at(pt,kt){return[pt*Ke,y(kt)/Ke]}return at.invert=function(pt,kt){return[pt/Ke,R(kt*Ke)]},at}function $e(We){var Ke=t(We);function at(pt,kt){return[pt*Ke,(1+Ke)*m(kt/2)]}return at.invert=function(pt,kt){return[pt/Ke,2*e(kt/(1+Ke))]},at}function et(We,Ke){var at=L(8/(3*w));return[at*We*(1-b(Ke)/w),at*Ke]}function tt(We,Ke){var at=L(4-3*y(b(Ke)));return[2/L(6*w)*We*at,p(Ke)*L(2*w/3)*(2-at)]}function ft(We,Ke){var at=L(w*(4+w));return[2/at*We*(1+L(1-4*Ke*Ke/(w*w))),4/at*Ke]}function bt(We,Ke){var at=(2+v)*y(Ke);Ke/=2;for(var pt=0,kt=1/0;pt<10&&b(kt)>l;pt++){var vt=t(Ke);Ke-=kt=(Ke+y(Ke)*(vt+2)-at)/(2*vt*(1+vt))}return[2/L(w*(4+w))*We*(1+t(Ke)),2*L(w/(4+w))*y(Ke)]}function Ct(We,Ke){return[We*(1+t(Ke))/L(2+w),2*Ke/L(2+w)]}function Vt(We,Ke){for(var at=(1+v)*y(Ke),pt=0,kt=1/0;pt<10&&b(kt)>l;pt++)Ke-=kt=(Ke+y(Ke)-at)/(1+t(Ke));return at=L(2+w),[We*(1+t(Ke))/at,2*Ke/at]}lt.invert=function(We,Ke){var at=3*R(Ke/(Je*E));return[E*We/(Je*(2*t(2*at/3)-1)),at]},et.invert=function(We,Ke){var at=L(8/(3*w)),pt=Ke/at;return[We/(at*(1-b(pt)/w)),pt]},tt.invert=function(We,Ke){var at=2-b(Ke)/L(2*w/3);return[We*L(6*w)/(2*at),p(Ke)*R((4-at*at)/3)]},ft.invert=function(We,Ke){var at=L(w*(4+w))/2;return[We*at/(1+L(1-Ke*Ke*(4+w)/(4*w))),Ke*at/2]},bt.invert=function(We,Ke){var at=Ke*L((4+w)/w)/2,pt=R(at),kt=t(pt);return[We/(2/L(w*(4+w))*(1+kt)),R((pt+at*(kt+2))/(2+v))]},Ct.invert=function(We,Ke){var at=L(2+w),pt=Ke*at/2;return[at*We/(1+t(pt)),pt]},Vt.invert=function(We,Ke){var at=1+v,pt=L(at/2);return[2*We*pt/(1+t(Ke*=pt)),R((Ke+y(Ke))/at)]};var Ft=3+2*k;function ht(We,Ke){var at=y(We/=2),pt=t(We),kt=L(t(Ke)),vt=t(Ke/=2),Pt=y(Ke)/(vt+k*pt*kt),un=L(2/(1+Pt*Pt)),fn=L((k*vt+(pt+at)*kt)/(k*vt+(pt-at)*kt));return[Ft*(un*(fn-1/fn)-2*d(fn)),Ft*(un*Pt*(fn+1/fn)-2*e(Pt))]}ht.invert=function(We,Ke){if(!(at=Q.invert(We/1.2,1.065*Ke)))return null;var at,pt=at[0],kt=at[1],vt=20;We/=Ft,Ke/=Ft;do{var Pt=pt/2,un=kt/2,fn=y(Pt),on=t(Pt),pn=y(un),An=t(un),Ln=t(kt),Pn=L(Ln),zn=pn/(An+k*on*Pn),yr=zn*zn,Dr=L(2/(1+yr)),Yr=(k*An+(on+fn)*Pn)/(k*An+(on-fn)*Pn),Kr=L(Yr),si=Kr-1/Kr,Jr=Kr+1/Kr,Li=Dr*si-2*d(Kr)-We,Pi=Dr*zn*Jr-2*e(zn)-Ke,Aa=pn&&M*Pn*fn*yr/pn,ra=(k*on*An+Pn)/(2*(An+k*on*Pn)*(An+k*on*Pn)*Pn),aa=-.5*zn*Dr*Dr*Dr,xo=aa*Aa,io=aa*ra,ja=(ja=2*An+k*Pn*(on-fn))*ja*Kr,Ta=(k*on*An*Pn+Ln)/ja,wo=-k*fn*pn/(Pn*ja),Go=si*xo-2*Ta/Kr+Dr*(Ta+Ta/Yr),os=si*io-2*wo/Kr+Dr*(wo+wo/Yr),ss=zn*Jr*xo-2*Aa/(1+yr)+Dr*Jr*Aa+Dr*zn*(Ta-Ta/Yr),gs=zn*Jr*io-2*ra/(1+yr)+Dr*Jr*ra+Dr*zn*(wo-wo/Yr),ms=os*ss-gs*Go;if(!ms)break;var Ma=(Pi*os-Li*gs)/ms,wt=(Li*ss-Pi*Go)/ms;pt-=Ma,kt=s(-v,i(v,kt-wt))}while((b(Ma)>l||b(wt)>l)&&--vt>0);return b(b(kt)-v)<l?[0,kt]:vt&&[pt,kt]};var ut=t(35*F);function Rt(We,Ke){var at=m(Ke/2);return[We*ut*L(1-at*at),(1+ut)*at]}function nn(We,Ke){var at=Ke/2,pt=t(at);return[2*We/E*t(Ke)*pt*pt,E*m(at)]}function cn(We){var Ke=1-We,at=kt(w,0)[0]-kt(-w,0)[0],pt=L(2*(kt(0,v)[1]-kt(0,-v)[1])/at);function kt(un,fn){var on=t(fn),pn=y(fn);return[on/(Ke+We*on)*un,Ke*fn+We*pn]}function vt(un,fn){var on=kt(un,fn);return[on[0]*pt,on[1]/pt]}function Pt(un){return vt(0,un)[1]}return vt.invert=function(un,fn){var on=re(Pt,fn);return[un/pt*(We+Ke/t(on)),on]},vt}function Ze(We){return[We[0]/2,R(m(We[1]/2*F))*S]}function Qe(We){return[2*We[0],2*e(y(We[1]*F))*S]}function Ge(We,Ke){var at=2*w/Ke,pt=We*We;function kt(vt,Pt){var un=x.geoAzimuthalEquidistantRaw(vt,Pt),fn=un[0],on=un[1],pn=fn*fn+on*on;if(pn>pt){var An=L(pn),Ln=r(on,fn),Pn=at*f(Ln/at),zn=Ln-Pn,yr=We*t(zn),Dr=(We*y(zn)-zn*y(yr))/(v-yr),Yr=rt(zn,Dr),Kr=(w-We)/Le(Yr,yr,w);fn=An;var si,Jr=50;do{fn-=si=(We+Le(Yr,yr,fn)*Kr-An)/(Yr(fn)*Kr)}while(b(si)>l&&--Jr>0);on=zn*y(fn),fn<v&&(on-=Dr*(fn-v));var Li=y(Pn),Pi=t(Pn);un[0]=fn*Pi-on*Li,un[1]=fn*Li+on*Pi}return un}return kt.invert=function(vt,Pt){var un=vt*vt+Pt*Pt;if(un>pt){var fn=L(un),on=r(Pt,vt),pn=at*f(on/at),An=on-pn;vt=fn*t(An),Pt=fn*y(An);for(var Ln=vt-v,Pn=y(vt),zn=Pt/Pn,yr=vt<v?1/0:0,Dr=10;;){var Yr=We*y(zn),Kr=We*t(zn),si=y(Kr),Jr=v-Kr,Li=(Yr-zn*si)/Jr,Pi=rt(zn,Li);if(b(yr)<1e-12||!--Dr)break;zn-=yr=(zn*Pn-Li*Ln-Pt)/(Pn-2*Ln*(Jr*(Kr+zn*Yr*t(Kr)-si)-Yr*(Yr-zn*si))/(Jr*Jr))}vt=(fn=We+Le(Pi,Kr,vt)*(w-We)/Le(Pi,Kr,w))*t(on=pn+zn),Pt=fn*y(on)}return x.geoAzimuthalEquidistantRaw.invert(vt,Pt)},kt}function rt(We,Ke){return function(at){var pt=We*t(at);return at<v&&(pt-=Ke),L(1+pt*pt)}}function Le(We,Ke,at){for(var pt=(at-Ke)/50,kt=We(Ke)+We(at),vt=1,Pt=Ke;vt<50;++vt)kt+=2*We(Pt+=pt);return.5*kt*pt}function ze(We,Ke,at,pt,kt,vt,Pt,un){function fn(on,pn){if(!pn)return[We*on/w,0];var An=pn*pn,Ln=We+An*(Ke+An*(at+An*pt)),Pn=pn*(kt-1+An*(vt-un+An*Pt)),zn=(Ln*Ln+Pn*Pn)/(2*Pn),yr=on*R(Ln/zn)/w;return[zn*y(yr),pn*(1+An*un)+zn*(1-t(yr))]}return arguments.length<8&&(un=0),fn.invert=function(on,pn){var An,Ln,Pn=w*on/We,zn=pn,yr=50;do{var Dr=zn*zn,Yr=We+Dr*(Ke+Dr*(at+Dr*pt)),Kr=zn*(kt-1+Dr*(vt-un+Dr*Pt)),si=Yr*Yr+Kr*Kr,Jr=2*Kr,Li=si/Jr,Pi=Li*Li,Aa=R(Yr/Li)/w,ra=Pn*Aa,aa=Yr*Yr,xo=(2*Ke+Dr*(4*at+6*Dr*pt))*zn,io=kt+Dr*(3*vt+5*Dr*Pt),ja=(2*(Yr*xo+Kr*(io-1))*Jr-si*(2*(io-1)))/(Jr*Jr),Ta=t(ra),wo=y(ra),Go=Li*Ta,os=Li*wo,ss=Pn/w*(1/L(1-aa/Pi))*(xo*Li-Yr*ja)/Pi,gs=os-on,ms=zn*(1+Dr*un)+Li-Go-pn,Ma=ja*wo+Go*ss,wt=Go*Aa,Yt=1+ja-(ja*Ta-os*ss),yn=os*Aa,rn=Ma*yn-Yt*wt;if(!rn)break;Pn-=An=(ms*Ma-gs*Yt)/rn,zn-=Ln=(gs*yn-ms*wt)/rn}while((b(An)>l||b(Ln)>l)&&--yr>0);return[Pn,zn]},fn}Rt.invert=function(We,Ke){var at=Ke/(1+ut);return[We&&We/(ut*L(1-at*at)),2*e(at)]},nn.invert=function(We,Ke){var at=e(Ke/E),pt=t(at),kt=2*at;return[We*E/2/(t(kt)*pt*pt),kt]};var je=ze(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Ne=ze(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),st=ze(5/6*w,-.62636,-.0344,0,1.3493,-.05524,0,.045);function mt(We,Ke){var at=We*We,pt=Ke*Ke;return[We*(1-.162388*pt)*(.87-952426e-9*at*at),Ke*(1+pt/12)]}mt.invert=function(We,Ke){var at,pt=We,kt=Ke,vt=50;do{var Pt=kt*kt;kt-=at=(kt*(1+Pt/12)-Ke)/(1+Pt/4)}while(b(at)>l&&--vt>0);vt=50,We/=1-.162388*Pt;do{var un=(un=pt*pt)*un;pt-=at=(pt*(.87-952426e-9*un)-We)/(.87-.00476213*un)}while(b(at)>l&&--vt>0);return[pt,kt]};var Tt=ze(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function xt(We){var Ke=We(v,0)[0]-We(-v,0)[0];function at(pt,kt){var vt=pt>0?-.5:.5,Pt=We(pt+vt*w,kt);return Pt[0]-=vt*Ke,Pt}return We.invert&&(at.invert=function(pt,kt){var vt=pt>0?-.5:.5,Pt=We.invert(pt+vt*Ke,kt),un=Pt[0]-vt*w;return un<-w?un+=2*w:un>w&&(un-=2*w),Pt[0]=un,Pt}),at}function zt(We,Ke){var at=p(We),pt=p(Ke),kt=t(Ke),vt=t(We)*kt,Pt=y(We)*kt,un=y(pt*Ke);We=b(r(Pt,un)),Ke=R(vt),b(We-v)>l&&(We%=v);var fn=function(on,pn){if(pn===v)return[0,0];var An,Ln,Pn=y(pn),zn=Pn*Pn,yr=zn*zn,Dr=1+yr,Yr=1+3*yr,Kr=1-yr,si=R(1/L(Dr)),Jr=Kr+zn*Dr*si,Li=(1-Pn)/Jr,Pi=L(Li),Aa=Li*Dr,ra=L(Aa),aa=Pi*Kr;if(0===on)return[0,-(aa+zn*ra)];var xo,io=t(pn),ja=1/io,Ta=2*Pn*io,wo=(-Jr*io-(-3*zn+si*Yr)*Ta*(1-Pn))/(Jr*Jr),Go=-ja*Ta,os=-ja*(zn*Dr*wo+Li*Yr*Ta),ss=-2*ja*(Kr*(.5*wo/Pi)-2*zn*Pi*Ta),gs=4*on/w;if(on>.222*w||pn<w/4&&on>.175*w){if(An=(aa+zn*L(Aa*(1+yr)-aa*aa))/(1+yr),on>w/4)return[An,An];var ms=An,Ma=.5*An;An=.5*(Ma+ms),Ln=50;do{var Yt=An*(ss+Go*L(Aa-An*An))+os*R(An/ra)-gs;if(!Yt)break;Yt<0?Ma=An:ms=An,An=.5*(Ma+ms)}while(b(ms-Ma)>l&&--Ln>0)}else{An=l,Ln=25;do{var yn=An*An,rn=L(Aa-yn),xn=ss+Go*rn,Wn=An*xn+os*R(An/ra)-gs;An-=xo=rn?Wn/(xn+(os-Go*yn)/rn):0}while(b(xo)>l&&--Ln>0)}return[An,-aa-zn*L(Aa-An*An)]}(We>w/4?v-We:We,Ke);return We>w/4&&(un=fn[0],fn[0]=-fn[1],fn[1]=-un),fn[0]*=at,fn[1]*=-pt,fn}function gt(We,Ke){var at,pt,kt,vt,Pt,un;if(Ke<l)return[(vt=y(We))-(at=Ke*(We-vt*(pt=t(We)))/4)*pt,pt+at*vt,1-Ke*vt*vt/2,We-at];if(Ke>=1-l)return at=(1-Ke)/4,kt=1/(pt=V(We)),[(vt=((un=a(2*(un=We)))-1)/(un+1))+at*((Pt=pt*B(We))-We)/(pt*pt),kt-at*vt*kt*(Pt-We),kt+at*vt*kt*(Pt+We),2*e(a(We))-v+at*(Pt-We)/pt];var fn=[1,0,0,0,0,0,0,0,0],on=[L(Ke),0,0,0,0,0,0,0,0],pn=0;for(pt=L(1-Ke),Pt=1;b(on[pn]/fn[pn])>l&&pn<8;)at=fn[pn++],on[pn]=(at-pt)/2,fn[pn]=(at+pt)/2,pt=L(at*pt),Pt*=2;kt=Pt*fn[pn]*We;do{kt=(R(vt=on[pn]*y(pt=kt)/fn[pn])+kt)/2}while(--pn);return[y(kt),vt=t(kt),vt/t(kt-pt),kt]}function Bt(We,Ke){if(!Ke)return We;if(1===Ke)return d(m(We/2+A));for(var at=1,pt=L(1-Ke),kt=L(Ke),vt=0;b(kt)>l;vt++){if(We%w){var Pt=e(pt*m(We)/at);Pt<0&&(Pt+=w),We+=Pt+~~(We/w)*w}else We+=We;kt=(at+pt)/2,pt=L(at*pt),kt=((at=kt)-pt)/2}return We/(u(2,vt)*at)}function jt(We,Ke){var on,pn,An,Ln,Pn,at=(k-1)/(k+1),pt=L(1-at*at),kt=Bt(v,pt*pt),vt=d(m(w/4+b(Ke)/2)),Pt=a(-1*vt)/L(at),un=(on=Pt*t(-1*We),Ln=(pn=Pt*y(-1*We))+1,[.5*((on>=0?v:-v)-r(Pn=1-(An=on*on)-pn*pn,2*on)),-.25*d(Pn*Pn+4*An)+.5*d(Ln*Ln+An)]),fn=function(on,pn,An){var Ln=b(on),Pn=B(b(pn));if(Ln){var zn=1/y(Ln),yr=1/(m(Ln)*m(Ln)),Dr=-(yr+An*(Pn*Pn*zn*zn)-1+An),Yr=(-Dr+L(Dr*Dr-(An-1)*yr*4))/2;return[Bt(e(1/L(Yr)),An)*p(on),Bt(e(L((Yr/yr-1)/An)),1-An)*p(pn)]}return[0,Bt(e(Pn),1-An)*p(pn)]}(un[0],un[1],pt*pt);return[-fn[1],(Ke>=0?1:-1)*(.5*kt-fn[0])]}function it(We){var Ke=y(We),at=t(We),pt=Mt(We);function kt(vt,Pt){var un=pt(vt,Pt);vt=un[0];var fn=y(Pt=un[1]),on=t(Pt),pn=t(vt),An=D(Ke*fn+at*on*pn),Ln=y(An),Pn=b(Ln)>l?An/Ln:1;return[Pn*at*y(vt),(b(vt)>v?Pn:-Pn)*(Ke*on-at*fn*pn)]}return pt.invert=Mt(-We),kt.invert=function(vt,Pt){var un=L(vt*vt+Pt*Pt),fn=-y(un),on=t(un),pn=un*on,An=-Pt*fn,Ln=un*Ke,Pn=L(pn*pn+An*An-Ln*Ln),zn=r(pn*Ln+An*Pn,An*Ln-pn*Pn),yr=(un>v?-1:1)*r(vt*fn,un*t(zn)*on+Pt*y(zn)*fn);return pt.invert(yr,zn)},kt}function Mt(We){var Ke=y(We),at=t(We);return function(pt,kt){var vt=t(kt),Pt=t(pt)*vt,un=y(pt)*vt,fn=y(kt);return[r(un,Pt*at-fn*Ke),R(fn*at+Pt*Ke)]}}zt.invert=function(We,Ke){b(We)>1&&(We=2*p(We)-We),b(Ke)>1&&(Ke=2*p(Ke)-Ke);var at=p(We),pt=p(Ke),kt=-at*We,vt=-pt*Ke,Pt=vt/kt<1,un=function(An,Ln){for(var Pn=0,zn=1,yr=.5,Dr=50;;){var Yr=yr*yr,Kr=L(yr),si=R(1/L(1+Yr)),Jr=1-Yr+yr*(1+Yr)*si,Li=(1-Kr)/Jr,Pi=L(Li),Aa=Li*(1+Yr),ra=Pi*(1-Yr),aa=L(Aa-An*An),xo=Ln+ra+yr*aa;if(b(zn-Pn)<1e-12||0==--Dr||0===xo)break;xo>0?Pn=yr:zn=yr,yr=.5*(Pn+zn)}if(!Dr)return null;var io=R(Kr),ja=t(io),Ta=1/ja,wo=2*Kr*ja,Go=(-Jr*ja-(-3*yr+si*(1+3*Yr))*wo*(1-Kr))/(Jr*Jr);return[w/4*(An*(-2*Ta*(.5*Go/Pi*(1-Yr)-2*yr*Pi*wo)+-Ta*wo*aa)+-Ta*(yr*(1+Yr)*Go+Li*(1+3*Yr)*wo)*R(An/L(Aa))),io]}(Pt?vt:kt,Pt?kt:vt),fn=un[0],on=un[1],pn=t(on);return Pt&&(fn=-v-fn),[at*(r(y(fn)*pn,-y(on))+w),pt*R(t(fn)*pn)]},jt.invert=function(We,Ke){var at,pt,kt,vt,Pt,un,Pn,zn,yr,fn=(k-1)/(k+1),on=L(1-fn*fn),An=(pt=-We,kt=on*on,(at=.5*Bt(v,on*on)-Ke)?(vt=gt(at,kt),pt?(un=(Pt=gt(pt,1-kt))[1]*Pt[1]+kt*vt[0]*vt[0]*Pt[0]*Pt[0],[[vt[0]*Pt[2]/un,vt[1]*vt[2]*Pt[0]*Pt[1]/un],[vt[1]*Pt[1]/un,-vt[0]*vt[2]*Pt[0]*Pt[2]/un],[vt[2]*Pt[1]*Pt[2]/un,-kt*vt[0]*vt[1]*Pt[0]/un]]):[[vt[0],0],[vt[1],0],[vt[2],0]]):[[0,(Pt=gt(pt,1-kt))[0]/Pt[1]],[1/Pt[1],0],[Pt[2]/Pt[1],0]]),Ln=[((Pn=An[0])[0]*(zn=An[1])[0]+Pn[1]*zn[1])/(yr=zn[0]*zn[0]+zn[1]*zn[1]),(Pn[1]*zn[0]-Pn[0]*zn[1])/yr];return[r(Ln[1],Ln[0])/-1,2*e(a(-.5*d(fn*Ln[0]*Ln[0]+fn*Ln[1]*Ln[1])))-v]};var qt=R(1-1/3)*S,Wt=He(0);function an(We){var Ke=qt*F,at=Ve(w,Ke)[0]-Ve(-w,Ke)[0],pt=Wt(0,Ke)[1],kt=Ve(0,Ke)[1],vt=E-kt,Pt=P/We,un=4/P,fn=pt+vt*vt*4/P;function on(pn,An){var Ln,Pn=b(An);if(Pn>Ke){var zn=i(We-1,s(0,n((pn+w)/Pt)));(Ln=Ve(pn+=w*(We-1)/We-zn*Pt,Pn))[0]=Ln[0]*P/at-P*(We-1)/(2*We)+zn*P/We,Ln[1]=pt+4*(Ln[1]-kt)*vt/P,An<0&&(Ln[1]=-Ln[1])}else Ln=Wt(pn,An);return Ln[0]*=un,Ln[1]/=fn,Ln}return on.invert=function(pn,An){pn/=un;var Ln=b(An*=fn);if(Ln>pt){var Pn=i(We-1,s(0,n((pn+w)/Pt))),zn=Ve.invert(pn=(pn+w*(We-1)/We-Pn*Pt)*at/P,.25*(Ln-pt)*P/vt+kt);return zn[0]-=w*(We-1)/We-Pn*Pt,An<0&&(zn[1]=-zn[1]),zn}return Wt.invert(pn,An)},on}function Ue(We,Ke){return[We,1&Ke?90-l:qt]}function yt(We,Ke){return[We,1&Ke?-90+l:-qt]}function Dt(We){return[We[0]*(1-l),We[1]]}function Ht(We){var Ke,at=1+We,pt=R(y(1/at)),kt=2*L(w/(Ke=w+4*pt*at)),vt=.5*kt*(at+L(We*(2+We))),Pt=We*We,un=at*at;function fn(on,pn){var An,Ln,Pn=1-y(pn);if(Pn&&Pn<2){var zn,yr=v-pn,Dr=25;do{var Yr=y(yr),Kr=t(yr),si=pt+r(Yr,at-Kr),Jr=1+un-2*at*Kr;yr-=zn=(yr-Pt*pt-at*Yr+Jr*si-.5*Pn*Ke)/(2*at*Yr*si)}while(b(zn)>1e-12&&--Dr>0);An=kt*L(Jr),Ln=on*si/w}else An=kt*(We+Pn),Ln=on*pt/w;return[An*y(Ln),vt-An*t(Ln)]}return fn.invert=function(on,pn){var An=on*on+(pn-=vt)*pn,Ln=(1+un-An/(kt*kt))/(2*at),Pn=D(Ln),zn=y(Pn),yr=pt+r(zn,at-Ln);return[R(on/L(An))*w/yr,R(1-2*(Pn-Pt*pt-at*zn+(1+un-2*at*Ln)*yr)/Ke)]},fn}function Jt(We,Ke){return Ke>-.7109889596207567?((We=ue(We,Ke))[1]+=.0528035274542,We):we(We,Ke)}function gn(We,Ke){return b(Ke)>.7109889596207567?((We=ue(We,Ke))[1]-=Ke>0?.0528035274542:-.0528035274542,We):we(We,Ke)}function Qt(We,Ke,at,pt){var kt=L(4*w/(2*at+(1+We-Ke/2)*y(2*at)+(We+Ke)/2*y(4*at)+Ke/2*y(6*at))),vt=L(pt*y(at)*L((1+We*t(2*at)+Ke*t(4*at))/(1+We+Ke))),Pt=at*fn(1);function un(An){return L(1+We*t(2*An)+Ke*t(4*An))}function fn(An){var Ln=An*at;return(2*Ln+(1+We-Ke/2)*y(2*Ln)+(We+Ke)/2*y(4*Ln)+Ke/2*y(6*Ln))/at}function on(An){return un(An)*y(An)}var pn=function(An,Ln){var Pn=at*re(fn,Pt*y(Ln)/at,Ln/w);isNaN(Pn)&&(Pn=at*p(Ln));var zn=kt*un(Pn);return[zn*vt*An/w*t(Pn),zn/vt*y(Pn)]};return pn.invert=function(An,Ln){var Pn=re(on,Ln*vt/kt);return[An*w/(t(Pn)*kt*vt*un(Pn)),R(at*fn(Pn/at)/Pt)]},0===at&&(kt=L(pt/w),(pn=function(An,Ln){return[An*kt,y(Ln)/kt]}).invert=function(An,Ln){return[An/kt,R(Ln*kt)]}),pn}function hn(We,Ke,at){function pt(Pn){return We+(1-We)*u(1-u(Pn,Ke),1/Ke)}function kt(Pn){return function(We,Ke,at,pt,kt){void 0===pt&&(pt=1e-8),void 0===kt&&(kt=20);var vt=We(Ke),Pt=We(.5*(Ke+at)),un=We(at);return function fn(on,pn,An,Ln,Pn,zn,yr,Dr,Yr,Kr,si){if(si.nanEncountered)return NaN;var Jr,Li,Pi,Aa,ra,aa,xo,io,ja,Ta;if(Li=on(pn+.25*(Jr=An-pn)),Pi=on(An-.25*Jr),isNaN(Li))si.nanEncountered=!0;else{if(!isNaN(Pi))return Ta=((aa=(Aa=Jr*(Ln+4*Li+Pn)/12)+(ra=Jr*(Pn+4*Pi+zn)/12))-yr)/15,Kr>Yr?(si.maxDepthCount++,aa+Ta):Math.abs(Ta)<Dr?aa+Ta:(io=fn(on,pn,xo=pn+.5*Jr,Ln,Li,Pn,Aa,.5*Dr,Yr,Kr+1,si),isNaN(io)?(si.nanEncountered=!0,NaN):(ja=fn(on,xo,An,Pn,Pi,zn,ra,.5*Dr,Yr,Kr+1,si),isNaN(ja)?(si.nanEncountered=!0,NaN):io+ja));si.nanEncountered=!0}}(We,Ke,at,vt,Pt,un,(vt+4*Pt+un)*(at-Ke)/6,pt,kt,1,{maxDepthCount:0,nanEncountered:!1})}(pt,0,Pn,1e-4)}for(var vt=1/kt(1),un=(1+1e-8)*vt,fn=[],on=0;on<=1e3;on++)fn.push(kt(on/1e3)*un);function pn(Pn){var zn=0,yr=1e3,Dr=500;do{fn[Dr]>Pn?yr=Dr:zn=Dr,Dr=zn+yr>>1}while(Dr>zn);var Yr=fn[Dr+1]-fn[Dr];return Yr&&(Yr=(Pn-fn[Dr+1])/Yr),(Dr+1+Yr)/1e3}var An=2*pn(1)/w*vt/at,Ln=function(Pn,zn){var yr=pn(b(y(zn))),Dr=pt(yr)*Pn;return yr/=An,[Dr,zn>=0?yr:-yr]};return Ln.invert=function(Pn,zn){var yr;return b(zn*=An)<1&&(yr=p(zn)*R(kt(b(zn))*vt)),[Pn/pt(b(zn)),yr]},Ln}function Dn(We,Ke){return b(We[0]-Ke[0])<l&&b(We[1]-Ke[1])<l}function _n(We,Ke){for(var at,pt,kt,vt=-1,Pt=We.length,un=We[0],fn=[];++vt<Pt;){pt=((at=We[vt])[0]-un[0])/Ke,kt=(at[1]-un[1])/Ke;for(var on=0;on<Ke;++on)fn.push([un[0]+on*pt,un[1]+on*kt]);un=at}return fn.push(at),fn}function Tn(We){var Ke,at,kt,vt,un,fn=[],on=We[0].length;for(un=0;un<on;++un)at=(Ke=We[0][un])[0][0],fn.push(_n([[at+l,Ke[0][1]+l],[at+l,(kt=Ke[1][1])-l],[(vt=Ke[2][0])-l,kt-l],[vt-l,Ke[2][1]+l]],30));for(un=We[1].length-1;un>=0;--un)at=(Ke=We[1][un])[0][0],fn.push(_n([[(vt=Ke[2][0])-l,Ke[2][1]-l],[vt-l,(kt=Ke[1][1])+l],[at+l,kt+l],[at+l,Ke[0][1]-l]],30));return{type:"Polygon",coordinates:[T.merge(fn)]}}function wn(We,Ke,at){var pt,kt;function vt(fn,on){for(var pn=on<0?-1:1,An=Ke[+(on<0)],Ln=0,Pn=An.length-1;Ln<Pn&&fn>An[Ln][2][0];++Ln);var zn=We(fn-An[Ln][1][0],on);return zn[0]+=We(An[Ln][1][0],pn*on>pn*An[Ln][0][1]?An[Ln][0][1]:on)[0],zn}at?vt.invert=at(vt):We.invert&&(vt.invert=function(fn,on){for(var pn=kt[+(on<0)],An=Ke[+(on<0)],Ln=0,Pn=pn.length;Ln<Pn;++Ln){var zn=pn[Ln];if(zn[0][0]<=fn&&fn<zn[1][0]&&zn[0][1]<=on&&on<zn[1][1]){var yr=We.invert(fn-We(An[Ln][1][0],0)[0],on);return yr[0]+=An[Ln][1][0],Dn(vt(yr[0],yr[1]),[fn,on])?yr:null}}});var Pt=x.geoProjection(vt),un=Pt.stream;return Pt.stream=function(fn){var on=Pt.rotate(),pn=un(fn),An=(Pt.rotate([0,0]),un(fn));return Pt.rotate(on),pn.sphere=function(){x.geoStream(pt,An)},pn},Pt.lobes=function(fn){return arguments.length?(pt=Tn(fn),Ke=fn.map(function(on){return on.map(function(pn){return[[pn[0][0]*F,pn[0][1]*F],[pn[1][0]*F,pn[1][1]*F],[pn[2][0]*F,pn[2][1]*F]]})}),kt=Ke.map(function(on){return on.map(function(pn){var An,Ln=We(pn[0][0],pn[0][1])[0],Pn=We(pn[2][0],pn[2][1])[0],zn=We(pn[1][0],pn[0][1])[1],yr=We(pn[1][0],pn[1][1])[1];return zn>yr&&(An=zn,zn=yr,yr=An),[[Ln,zn],[Pn,yr]]})}),Pt):Ke.map(function(on){return on.map(function(pn){return[[pn[0][0]*S,pn[0][1]*S],[pn[1][0]*S,pn[1][1]*S],[pn[2][0]*S,pn[2][1]*S]]})})},null!=Ke&&Pt.lobes(Ke),Pt}Jt.invert=function(We,Ke){return Ke>-.7109889596207567?ue.invert(We,Ke-.0528035274542):we.invert(We,Ke)},gn.invert=function(We,Ke){return b(Ke)>.7109889596207567?ue.invert(We,Ke+(Ke>0?.0528035274542:-.0528035274542)):we.invert(We,Ke)};var kn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Fn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],On=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Qn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],sr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Mr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Wr(We,Ke){return[3/P*We*L(w*w/3-Ke*Ke),Ke]}function mr(We){function Ke(at,pt){if(b(b(pt)-v)<l)return[0,pt<0?-2:2];var kt=y(pt),vt=u((1+kt)/(1-kt),We/2),Pt=.5*(vt+1/vt)+t(at*=We);return[2*y(at)/Pt,(vt-1/vt)/Pt]}return Ke.invert=function(at,pt){var kt=b(pt);if(b(kt-2)<l)return at?null:[0,p(pt)*v];if(kt>2)return null;var vt=(at/=2)*at,Pt=(pt/=2)*pt,un=2*pt/(1+vt+Pt);return un=u((1+un)/(1-un),1/We),[r(2*at,1-vt-Pt)/We,R((un-1)/(un+1))]},Ke}Wr.invert=function(We,Ke){return[P/3*We/L(w*w/3-Ke*Ke),Ke]};var Or=w/k;function vr(We,Ke){return[We*(1+L(t(Ke)))/2,Ke/(t(Ke/2)*t(We/6))]}function Xn(We,Ke){var at=We*We,pt=Ke*Ke;return[We*(.975534+pt*(-.0143059*at-.119161+-.0547009*pt)),Ke*(1.00384+at*(.0802894+-.02855*pt+199025e-9*at)+pt*(.0998909+-.0491032*pt))]}function jn(We,Ke){return[y(We)/t(Ke),m(Ke)*t(We)]}function nr(We){var Ke=t(We),at=m(A+We/2);function pt(kt,vt){var Pt=vt-We,un=b(Pt)<l?kt*Ke:b(un=A+vt/2)<l||b(b(un)-v)<l?0:kt*Pt/d(m(un)/at);return[un,Pt]}return pt.invert=function(kt,vt){var Pt,un=vt+We;return[b(vt)<l?kt/Ke:b(Pt=A+un/2)<l||b(b(Pt)-v)<l?0:kt*d(m(Pt)/at)/vt,un]},pt}function Ur(We,Ke){return[We,1.25*d(m(A+.4*Ke))]}function Jn(We){var Ke=We.length-1;function at(pt,kt){for(var vt,Pt=t(kt),un=2/(1+Pt*t(pt)),fn=un*Pt*y(pt),on=un*y(kt),pn=Ke,An=We[pn],Ln=An[0],Pn=An[1];--pn>=0;)Ln=(An=We[pn])[0]+fn*(vt=Ln)-on*Pn,Pn=An[1]+fn*Pn+on*vt;return[Ln=fn*(vt=Ln)-on*Pn,Pn=fn*Pn+on*vt]}return at.invert=function(pt,kt){var vt=20,Pt=pt,un=kt;do{for(var fn,on=Ke,pn=We[on],An=pn[0],Ln=pn[1],Pn=0,zn=0;--on>=0;)Pn=An+Pt*(fn=Pn)-un*zn,zn=Ln+Pt*zn+un*fn,An=(pn=We[on])[0]+Pt*(fn=An)-un*Ln,Ln=pn[1]+Pt*Ln+un*fn;var yr,Dr,Yr=(Pn=An+Pt*(fn=Pn)-un*zn)*Pn+(zn=Ln+Pt*zn+un*fn)*zn;Pt-=yr=((An=Pt*(fn=An)-un*Ln-pt)*Pn+(Ln=Pt*Ln+un*fn-kt)*zn)/Yr,un-=Dr=(Ln*Pn-An*zn)/Yr}while(b(yr)+b(Dr)>1e-12&&--vt>0);if(vt){var Kr=L(Pt*Pt+un*un),si=2*e(.5*Kr),Jr=y(si);return[r(Pt*Jr,Kr*t(si)),Kr?R(un*Jr/Kr):0]}},at}vr.invert=function(We,Ke){var at=b(We),pt=b(Ke),kt=l,vt=v;pt<Or?vt*=pt/Or:kt+=6*D(Or/pt);for(var Pt=0;Pt<25;Pt++){var un=y(vt),fn=L(t(vt)),on=y(vt/2),pn=t(vt/2),An=y(kt/6),Ln=t(kt/6),Pn=.5*kt*(1+fn)-at,zn=vt/(pn*Ln)-pt,yr=fn?-.25*kt*un/fn:0,Dr=.5*(1+fn),Yr=(1+.5*vt*on/pn)/(pn*Ln),Kr=vt/pn*(An/6)/(Ln*Ln),si=yr*Kr-Yr*Dr,Jr=(Pn*Kr-zn*Dr)/si,Li=(zn*yr-Pn*Yr)/si;if(vt-=Jr,kt-=Li,b(Jr)<l&&b(Li)<l)break}return[We<0?-kt:kt,Ke<0?-vt:vt]},Xn.invert=function(We,Ke){var at=p(We)*w,pt=Ke/2,kt=50;do{var vt=at*at,Pt=pt*pt,un=at*pt,fn=at*(.975534+Pt*(-.0143059*vt-.119161+-.0547009*Pt))-We,on=pt*(1.00384+vt*(.0802894+-.02855*Pt+199025e-9*vt)+Pt*(.0998909+-.0491032*Pt))-Ke,pn=.975534-Pt*(.119161+3*vt*.0143059+.0547009*Pt),An=-un*(.238322+.2188036*Pt+.0286118*vt),Ln=un*(.1605788+7961e-7*vt+-.0571*Pt),Pn=1.00384+vt*(.0802894+199025e-9*vt)+Pt*(3*(.0998909-.02855*vt)-.245516*Pt),zn=An*Ln-Pn*pn,yr=(on*An-fn*Pn)/zn,Dr=(fn*Ln-on*pn)/zn;at-=yr,pt-=Dr}while((b(yr)>l||b(Dr)>l)&&--kt>0);return kt&&[at,pt]},jn.invert=function(We,Ke){var at=We*We,pt=Ke*Ke+1,kt=at+pt,vt=We?M*L((kt-L(kt*kt-4*at))/at):1/L(pt);return[R(We*vt),p(Ke)*D(vt)]},Ur.invert=function(We,Ke){return[We,2.5*e(a(.8*Ke))-.625*w]};var _r=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Hr=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Lr=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],$r=[[.9245,0],[0,0],[.01943,0]],dn=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Ut(We,Ke){var at=x.geoProjection(Jn(We)).rotate(Ke).clipAngle(90),pt=x.geoRotation(Ke),kt=at.center;return delete at.rotate,at.center=function(vt){return arguments.length?kt(pt(vt)):pt.invert(kt())},at}var Kt=L(6),Mn=L(7);function Bn(We,Ke){var at=R(7*y(Ke)/(3*Kt));return[Kt*We*(2*t(2*at/3)-1)/Mn,9*y(at/3)/Mn]}function cr(We,Ke){for(var at,pt=(1+M)*y(Ke),kt=Ke,vt=0;vt<25&&(kt-=at=(y(kt/2)+y(kt)-pt)/(.5*t(kt/2)+t(kt)),!(b(at)<l));vt++);return[We*(1+2*t(kt)/t(kt/2))/(3*k),2*L(3)*y(kt/2)/L(2+k)]}function ur(We,Ke){for(var at,pt=L(6/(4+w)),kt=(1+w/4)*y(Ke),vt=Ke/2,Pt=0;Pt<25&&(vt-=at=(vt/2+y(vt)-kt)/(.5+t(vt)),!(b(at)<l));Pt++);return[pt*(.5+t(vt))*We/1.5,pt*vt]}function Rn(We,Ke){var at=Ke*Ke,pt=at*at,kt=at*pt;return[We*(.84719-.13063*at+kt*kt*(.05494*at-.04515-.02326*pt+.00331*kt)),Ke*(1.01183+pt*pt*(.01926*at-.02625-.00396*pt))]}function Cn(We,Ke){return[We*(1+t(Ke))/2,2*(Ke-m(Ke/2))]}Bn.invert=function(We,Ke){var at=3*R(Ke*Mn/9);return[We*Mn/(Kt*(2*t(2*at/3)-1)),R(3*y(at)*Kt/7)]},cr.invert=function(We,Ke){var at=Ke*L(2+k)/(2*L(3)),pt=2*R(at);return[3*k*We/(1+2*t(pt)/t(pt/2)),R((at+y(pt))/(1+M))]},ur.invert=function(We,Ke){var at=L(6/(4+w)),pt=Ke/at;return b(b(pt)-v)<l&&(pt=pt<0?-v:v),[1.5*We/(at*(.5+t(pt))),R((pt/2+y(pt))/(1+w/4))]},Rn.invert=function(We,Ke){var at,pt,kt,vt,Pt=Ke,un=25;do{Pt-=at=(Pt*(1.01183+(kt=(pt=Pt*Pt)*pt)*kt*(.01926*pt-.02625-.00396*kt))-Ke)/(1.01183+kt*kt*(.21186*pt-.23625+-.05148*kt))}while(b(at)>1e-12&&--un>0);return[We/(.84719-.13063*(pt=Pt*Pt)+(vt=pt*(kt=pt*pt))*vt*(.05494*pt-.04515-.02326*kt+.00331*vt)),Pt]},Cn.invert=function(We,Ke){for(var at=Ke/2,pt=0,kt=1/0;pt<10&&b(kt)>l;++pt){var vt=t(Ke/2);Ke-=kt=(Ke-m(Ke/2)-at)/(1-.5/(vt*vt))}return[2*We/(1+t(Ke)),Ke]};var Un=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Yn(We,Ke){var at=y(Ke),pt=t(Ke),kt=p(We);if(0===We||b(Ke)===v)return[0,Ke];if(0===Ke)return[We,0];if(b(We)===v)return[We*pt,v*at];var vt=w/(2*We)-2*We/w,Pt=2*Ke/w,un=(1-Pt*Pt)/(at-Pt),fn=vt*vt,on=un*un,pn=1+fn/on,An=1+on/fn,Ln=(vt*at/un-vt/2)/pn,Pn=(on*at/fn+un/2)/An,zn=Pn*Pn-(on*at*at/fn+un*at-1)/An;return[v*(Ln+L(Ln*Ln+pt*pt/pn)*kt),v*(Pn+L(zn<0?0:zn)*p(-Ke*vt)*kt)]}function Hn(We,Ke){var at=Ke*Ke;return[We,Ke*(1.0148+at*at*(.23185+at*(.02406*at-.14499)))]}function Zn(We,Ke){if(b(Ke)<l)return[We,0];var at=m(Ke),pt=We*y(Ke);return[y(pt)/at,Ke+(1-t(pt))/at]}function Ar(We,Ke){return[We[0]*Ke[0]+We[1]*Ke[3],We[0]*Ke[1]+We[1]*Ke[4],We[0]*Ke[2]+We[1]*Ke[5]+We[2],We[3]*Ke[0]+We[4]*Ke[3],We[3]*Ke[1]+We[4]*Ke[4],We[3]*Ke[2]+We[4]*Ke[5]+We[5]]}function gr(We,Ke){return[We[0]-Ke[0],We[1]-Ke[1]]}function Rr(We){return L(We[0]*We[0]+We[1]*We[1])}function ir(We,Ke,at){function pt(Pt,un){var fn,on=Ke(Pt,un),pn=on.project([Pt*S,un*S]);return(fn=on.transform)?[fn[0]*pn[0]+fn[1]*pn[1]+fn[2],-(fn[3]*pn[0]+fn[4]*pn[1]+fn[5])]:(pn[1]=-pn[1],pn)}(function Pt(un,fn){if(un.edges=function(zn){for(var yr=zn.length,Dr=[],Yr=zn[yr-1],Kr=0;Kr<yr;++Kr)Dr.push([Yr,Yr=zn[Kr]]);return Dr}(un.face),fn.face){var on=un.shared=function(zn,yr){for(var Dr,Yr,Kr=zn.length,si=null,Jr=0;Jr<Kr;++Jr){Dr=zn[Jr];for(var Li=yr.length;--Li>=0;)if(Dr[0]===(Yr=yr[Li])[0]&&Dr[1]===Yr[1]){if(si)return[si,Dr];si=Dr}}}(un.face,fn.face),pn=function(We,Ke){var Pt,un,at=gr(We[1],We[0]),pt=gr(Ke[1],Ke[0]),kt=r((Pt=at)[0]*(un=pt)[1]-Pt[1]*un[0],Pt[0]*un[0]+Pt[1]*un[1]),vt=Rr(at)/Rr(pt);return Ar([1,0,We[0][0],0,1,We[0][1]],Ar([vt,0,0,0,vt,0],Ar([t(kt),y(kt),0,-y(kt),t(kt),0],[1,0,-Ke[0][0],0,1,-Ke[0][1]])))}(on.map(fn.project),on.map(un.project));un.transform=fn.transform?Ar(fn.transform,pn):pn;for(var An=fn.edges,Ln=0,Pn=An.length;Ln<Pn;++Ln)rr(on[0],An[Ln][1])&&rr(on[1],An[Ln][0])&&(An[Ln]=un),rr(on[0],An[Ln][0])&&rr(on[1],An[Ln][1])&&(An[Ln]=un);for(Ln=0,Pn=(An=un.edges).length;Ln<Pn;++Ln)rr(on[0],An[Ln][0])&&rr(on[1],An[Ln][1])&&(An[Ln]=fn),rr(on[0],An[Ln][1])&&rr(on[1],An[Ln][0])&&(An[Ln]=fn)}else un.transform=fn.transform;return un.children&&un.children.forEach(function(zn){Pt(zn,un)}),un})(We,{transform:null}),wr(We)&&(pt.invert=function(Pt,un){var fn=function on(pn,An){var si,Jr,Ln=pn.project.invert,Pn=pn.transform,zn=An;if(Pn&&(zn=[(Pn=[(Jr=1/((si=Pn)[0]*si[4]-si[1]*si[3]))*si[4],-Jr*si[1],Jr*(si[1]*si[5]-si[2]*si[4]),-Jr*si[3],Jr*si[0],Jr*(si[2]*si[3]-si[0]*si[5])])[0]*zn[0]+Pn[1]*zn[1]+Pn[2],Pn[3]*zn[0]+Pn[4]*zn[1]+Pn[5]]),Ln&&pn===function(si){return Ke(si[0]*F,si[1]*F)}(yr=Ln(zn)))return yr;for(var yr,Dr=pn.children,Yr=0,Kr=Dr&&Dr.length;Yr<Kr;++Yr)if(yr=on(Dr[Yr],An))return yr}(We,[Pt,-un]);return fn&&(fn[0]*=F,fn[1]*=F,fn)});var kt=x.geoProjection(pt),vt=kt.stream;return kt.stream=function(Pt){var un=kt.rotate(),fn=vt(Pt),on=(kt.rotate([0,0]),vt(Pt));return kt.rotate(un),fn.sphere=function(){on.polygonStart(),on.lineStart(),function pn(An,Ln,Pn){var zn,yr,Dr=Ln.edges,Yr=Dr.length,Kr={type:"MultiPoint",coordinates:Ln.face},si=Ln.face.filter(function(xo){return 90!==b(xo[1])}),Jr=x.geoBounds({type:"MultiPoint",coordinates:si}),Li=!1,Pi=-1,Aa=Jr[1][0]-Jr[0][0],ra=180===Aa||360===Aa?[(Jr[0][0]+Jr[1][0])/2,(Jr[0][1]+Jr[1][1])/2]:x.geoCentroid(Kr);if(Pn)for(;++Pi<Yr&&Dr[Pi]!==Pn;);++Pi;for(var aa=0;aa<Yr;++aa)yr=Dr[(aa+Pi)%Yr],Array.isArray(yr)?(Li||(An.point((zn=x.geoInterpolate(yr[0],ra)(l))[0],zn[1]),Li=!0),An.point((zn=x.geoInterpolate(yr[1],ra)(l))[0],zn[1])):(Li=!1,yr!==Pn&&pn(An,yr,Ln))}(on,We),on.lineEnd(),on.polygonEnd()},fn},kt.angle(null==at?-30:at*S)}function rr(We,Ke){return We&&Ke&&We[0]===Ke[0]&&We[1]===Ke[1]}function wr(We){return We.project.invert||We.children&&We.children.some(wr)}Yn.invert=function(We,Ke){var at=(We/=v)*We,pt=at+(Ke/=v)*Ke,kt=w*w;return[We?(pt-1+L((1-pt)*(1-pt)+4*at))/(2*We)*v:0,re(function(vt){return pt*(w*y(vt)-2*vt)*w+4*vt*vt*(Ke-y(vt))+2*w*vt-kt*Ke},0)]},Hn.invert=function(We,Ke){Ke>1.790857183?Ke=1.790857183:Ke<-1.790857183&&(Ke=-1.790857183);var at,pt=Ke;do{var kt=pt*pt;pt-=at=(pt*(1.0148+kt*kt*(.23185+kt*(.02406*kt-.14499)))-Ke)/(1.0148+kt*kt*(5*.23185+kt*(.21654*kt-1.01493)))}while(b(at)>l);return[We,pt]},Zn.invert=function(We,Ke){if(b(Ke)<l)return[We,0];var at,pt=We*We+Ke*Ke,kt=.5*Ke,vt=10;do{var Pt=m(kt),un=1/t(kt),fn=pt-2*Ke*kt+kt*kt;kt-=at=(Pt*fn+2*(kt-Ke))/(2+fn*un*un+2*(kt-Ke)*Pt)}while(b(at)>l&&--vt>0);return Pt=m(kt),[(b(Ke)<b(kt+1/Pt)?R(We*Pt):p(Ke)*p(We)*(D(b(We*Pt))+v))/y(kt),kt]};var Ir=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Vr=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(We){return We.map(function(Ke){return Ir[Ke]})}),Ci=2/L(3);function pi(We,Ke){var at=Ve(We,Ke);return[at[0]*Ci,at[1]]}function lr(We,Ke){for(var at=0,pt=We.length,kt=0;at<pt;++at)kt+=We[at]*Ke[at];return kt}function bi(We){return[r(We[1],We[0])*S,R(s(-1,i(1,We[2])))*S]}function Ni(We){var Ke=We[0]*F,at=We[1]*F,pt=t(at);return[pt*t(Ke),pt*y(Ke),y(at)]}function wa(){}function Io(We,Ke){return{type:"FeatureCollection",features:We.features.map(function(at){return $a(at,Ke)})}}function $a(We,Ke){return{type:"Feature",id:We.id,properties:We.properties,geometry:Ya(We.geometry,Ke)}}function Ya(We,Ke){if(!We)return null;if("GeometryCollection"===We.type)return kt=Ke,{type:"GeometryCollection",geometries:We.geometries.map(function(vt){return Ya(vt,kt)})};var kt,at;switch(We.type){case"Point":case"MultiPoint":at=Ds;break;case"LineString":case"MultiLineString":at=Bo;break;case"Polygon":case"MultiPolygon":case"Sphere":at=sl;break;default:return null}return x.geoStream(We,Ke(at)),at.result()}pi.invert=function(We,Ke){return Ve.invert(We/Ci,Ke)};var Xi=[],Oa=[],Ds={point:function(We,Ke){Xi.push([We,Ke])},result:function(){var We=Xi.length?Xi.length<2?{type:"Point",coordinates:Xi[0]}:{type:"MultiPoint",coordinates:Xi}:null;return Xi=[],We}},Bo={lineStart:wa,point:function(We,Ke){Xi.push([We,Ke])},lineEnd:function(){Xi.length&&(Oa.push(Xi),Xi=[])},result:function(){var We=Oa.length?Oa.length<2?{type:"LineString",coordinates:Oa[0]}:{type:"MultiLineString",coordinates:Oa}:null;return Oa=[],We}},sl={polygonStart:wa,lineStart:wa,point:function(We,Ke){Xi.push([We,Ke])},lineEnd:function(){var We=Xi.length;if(We){do{Xi.push(Xi[0].slice())}while(++We<4);Oa.push(Xi),Xi=[]}},polygonEnd:wa,result:function(){if(!Oa.length)return null;var We=[],Ke=[];return Oa.forEach(function(at){!function(pt){if((kt=pt.length)<4)return!1;for(var kt,vt=0,Pt=pt[kt-1][1]*pt[0][0]-pt[kt-1][0]*pt[0][1];++vt<kt;)Pt+=pt[vt-1][1]*pt[vt][0]-pt[vt-1][0]*pt[vt][1];return Pt<=0}(at)?Ke.push(at):We.push([at])}),Ke.forEach(function(at){var pt=at[0];We.some(function(kt){if(function(vt,Pt){for(var un=Pt[0],fn=Pt[1],on=!1,pn=0,An=vt.length,Ln=An-1;pn<An;Ln=pn++){var Pn=vt[pn],zn=Pn[0],yr=Pn[1],Dr=vt[Ln],Kr=Dr[1];yr>fn^Kr>fn&&un<(Dr[0]-zn)*(fn-yr)/(Kr-yr)+zn&&(on=!on)}return on}(kt[0],pt))return kt.push(at),!0})||We.push([at])}),Oa=[],We.length?We.length>1?{type:"MultiPolygon",coordinates:We}:{type:"Polygon",coordinates:We[0]}:null}};function Zo(We){var Ke=We(v,0)[0]-We(-v,0)[0];function at(pt,kt){var vt=b(pt)<v,Pt=We(vt?pt:pt>0?pt-w:pt+w,kt),un=(Pt[0]-Pt[1])*M,fn=(Pt[0]+Pt[1])*M;if(vt)return[un,fn];var on=Ke*M,pn=un>0^fn>0?-1:1;return[pn*un-p(fn)*on,pn*fn-p(un)*on]}return We.invert&&(at.invert=function(pt,kt){var vt=(pt+kt)*M,Pt=(kt-pt)*M,un=b(vt)<.5*Ke&&b(Pt)<.5*Ke;if(!un){var fn=Ke*M,on=vt>0^Pt>0?-1:1,pn=-on*pt+(Pt>0?1:-1)*fn,An=-on*kt+(vt>0?1:-1)*fn;vt=(-pn-An)*M,Pt=(pn-An)*M}var Ln=We.invert(vt,Pt);return un||(Ln[0]+=vt>0?w:-w),Ln}),x.geoProjection(at).rotate([-90,-90,45]).clipAngle(179.999)}function as(){return Zo(jt).scale(111.48)}function ll(We){var Ke=y(We);function at(pt,kt){var vt=Ke?m(pt*Ke/2)/Ke:pt/2;if(!kt)return[2*vt,-We];var Pt=2*e(vt*y(kt)),un=1/m(kt);return[y(Pt)*un,kt+(1-t(Pt))*un-We]}return at.invert=function(pt,kt){if(b(kt+=We)<l)return[Ke?2*e(Ke*pt/2)/Ke:pt,0];var vt,Pt=pt*pt+kt*kt,un=0,fn=10;do{var on=m(un),pn=1/t(un),An=Pt-2*kt*un+un*un;un-=vt=(on*An+2*(un-kt))/(2+An*pn*pn+2*(un-kt)*on)}while(b(vt)>l&&--fn>0);var Ln=pt*(on=m(un)),Pn=m(b(kt)<b(un+1/on)?.5*R(Ln):.5*D(Ln)+w/4)/y(un);return[Ke?2*e(Ke*Pn)/Ke:2*Pn,un]},at}var Bi=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Ws(We,Ke){var at,pt=i(18,36*b(Ke)/w),kt=n(pt),vt=pt-kt,Pt=(at=Bi[kt])[0],un=at[1],fn=(at=Bi[++kt])[0],on=at[1],pn=(at=Bi[i(19,++kt)])[0],An=at[1];return[We*(fn+vt*(pn-Pt)/2+vt*vt*(pn-2*fn+Pt)/2),(Ke>0?v:-v)*(on+vt*(An-un)/2+vt*vt*(An-2*on+un)/2)]}function Is(We,Ke){var at=function(Pt){function un(fn,on){var pn=t(on),An=(Pt-1)/(Pt-pn*t(fn));return[An*pn*y(fn),An*y(on)]}return un.invert=function(fn,on){var pn=fn*fn+on*on,An=L(pn),Ln=(Pt-L(1-pn*(Pt+1)/(Pt-1)))/((Pt-1)/An+An/(Pt-1));return[r(fn*Ln,An*L(1-Ln*Ln)),An?R(on*Ln/An):0]},un}(We);if(!Ke)return at;var pt=t(Ke),kt=y(Ke);function vt(Pt,un){var fn=at(Pt,un),on=fn[1],pn=on*kt/(We-1)+pt;return[fn[0]*pt/pn,on/pn]}return vt.invert=function(Pt,un){var fn=(We-1)/(We-1-un*kt);return at.invert(fn*Pt,fn*un*pt)},vt}Bi.forEach(function(We){We[1]*=1.0144}),Ws.invert=function(We,Ke){var at=Ke/v,pt=90*at,kt=i(18,b(pt/5)),vt=s(0,n(kt));do{var Pt=Bi[vt][1],un=Bi[vt+1][1],fn=Bi[i(19,vt+2)][1],on=fn-Pt,pn=fn-2*un+Pt,An=2*(b(at)-un)/on,Ln=pn/on,Pn=An*(1-Ln*An*(1-2*Ln*An));if(Pn>=0||1===vt){pt=(Ke>=0?5:-5)*(Pn+kt);var zn,yr=50;do{Pn=(kt=i(18,b(pt)/5))-(vt=n(kt)),Pt=Bi[vt][1],un=Bi[vt+1][1],fn=Bi[i(19,vt+2)][1],pt-=(zn=(Ke>=0?v:-v)*(un+Pn*(fn-Pt)/2+Pn*Pn*(fn-2*un+Pt)/2)-Ke)*S}while(b(zn)>1e-12&&--yr>0);break}}while(--vt>=0);var Dr=Bi[vt][0],Yr=Bi[vt+1][0],Kr=Bi[i(19,vt+2)][0];return[We/(Yr+Pn*(Kr-Dr)/2+Pn*Pn*(Kr-2*Yr+Dr)/2),pt*F]};var to=-179.9999,fa=179.9999,Xo=-89.9999;function ps(We){return We.length>0}function Lo(We){return-90===We||90===We?[0,We]:[-180,(Ke=We,Math.floor(1e4*Ke)/1e4)];var Ke}function lo(We){var Ke=We[0],at=We[1],pt=!1;return Ke<=to?(Ke=-180,pt=!0):Ke>=fa&&(Ke=180,pt=!0),at<=Xo?(at=-90,pt=!0):at>=89.9999&&(at=90,pt=!0),pt?[Ke,at]:We}function uo(We){return We.map(lo)}function ul(We,Ke,at){for(var pt=0,kt=We.length;pt<kt;++pt){var vt=We[pt].slice();at.push({index:-1,polygon:Ke,ring:vt});for(var Pt=0,un=vt.length;Pt<un;++Pt){var fn=vt[Pt],on=fn[0],pn=fn[1];if(on<=to||on>=fa||pn<=Xo||pn>=89.9999){vt[Pt]=lo(fn);for(var An=Pt+1;An<un;++An){var Ln=vt[An],Pn=Ln[0],zn=Ln[1];if(Pn>to&&Pn<fa&&zn>Xo&&zn<89.9999)break}if(An===Pt+1)continue;if(Pt){var yr={index:-1,polygon:Ke,ring:vt.slice(0,Pt+1)};yr.ring[yr.ring.length-1]=Lo(pn),at[at.length-1]=yr}else at.pop();if(An>=un)break;at.push({index:-1,polygon:Ke,ring:vt=vt.slice(An-1)}),vt[0]=Lo(vt[0][1]),Pt=-1,un=vt.length}}}}function lu(We){var Ke,at,pt,kt,vt,Pt,un=We.length,fn={},on={};for(Ke=0;Ke<un;++Ke)(pt=(at=We[Ke]).ring[0])[0]!==(vt=at.ring[at.ring.length-1])[0]||pt[1]!==vt[1]?(at.index=Ke,fn[pt]=on[vt]=at):(at.polygon.push(at.ring),We[Ke]=null);for(Ke=0;Ke<un;++Ke)if(at=We[Ke]){if(kt=on[pt=at.ring[0]],Pt=fn[vt=at.ring[at.ring.length-1]],delete fn[pt],delete on[vt],pt[0]===vt[0]&&pt[1]===vt[1]){at.polygon.push(at.ring);continue}kt?(delete on[pt],delete fn[kt.ring[0]],kt.ring.pop(),We[kt.index]=null,at={index:-1,polygon:kt.polygon,ring:kt.ring.concat(at.ring)},kt===Pt?at.polygon.push(at.ring):(at.index=un++,We.push(fn[at.ring[0]]=on[at.ring[at.ring.length-1]]=at))):Pt?(delete fn[vt],delete on[Pt.ring[Pt.ring.length-1]],at.ring.pop(),at={index:un++,polygon:Pt.polygon,ring:at.ring.concat(Pt.ring)},We[Pt.index]=null,We.push(fn[at.ring[0]]=on[at.ring[at.ring.length-1]]=at)):(at.ring.push(at.ring[0]),at.polygon.push(at.ring))}}function ga(We){var Ke={type:"Feature",geometry:Vl(We.geometry)};return null!=We.id&&(Ke.id=We.id),null!=We.bbox&&(Ke.bbox=We.bbox),null!=We.properties&&(Ke.properties=We.properties),Ke}function Vl(We){if(null==We)return We;var Ke,at,pt,kt;switch(We.type){case"GeometryCollection":Ke={type:"GeometryCollection",geometries:We.geometries.map(Vl)};break;case"Point":Ke={type:"Point",coordinates:lo(We.coordinates)};break;case"MultiPoint":case"LineString":Ke={type:We.type,coordinates:uo(We.coordinates)};break;case"MultiLineString":Ke={type:"MultiLineString",coordinates:We.coordinates.map(uo)};break;case"Polygon":var vt=[];ul(We.coordinates,vt,at=[]),lu(at),Ke={type:"Polygon",coordinates:vt};break;case"MultiPolygon":at=[],pt=-1,kt=We.coordinates.length;for(var Pt=new Array(kt);++pt<kt;)ul(We.coordinates[pt],Pt[pt]=[],at);lu(at),Ke={type:"MultiPolygon",coordinates:Pt.filter(ps)};break;default:return We}return null!=We.bbox&&(Ke.bbox=We.bbox),Ke}function cl(We,Ke){var at=m(Ke/2),pt=y(A*at);return[We*(.74482-.34588*pt*pt),1.70711*at]}function Xl(We,Ke,at){var pt=x.geoInterpolate(Ke,at),kt=pt(.5),vt=x.geoRotation([-kt[0],-kt[1]])(Ke),Pt=pt.distance/2,un=-R(y(vt[1]*F)/y(Pt)),fn=[-kt[0],-kt[1],-(vt[0]>0?w-un:un)*S],on=x.geoProjection(We(Pt)).rotate(fn),pn=x.geoRotation(fn),An=on.center;return delete on.rotate,on.center=function(Ln){return arguments.length?An(pn(Ln)):pn.invert(An())},on.clipAngle(90)}function $l(We){var Ke=t(We);function at(pt,kt){var vt=x.geoGnomonicRaw(pt,kt);return vt[0]*=Ke,vt}return at.invert=function(pt,kt){return x.geoGnomonicRaw.invert(pt/Ke,kt)},at}function Ro(We,Ke){return Xl($l,We,Ke)}function uu(We){if(!(We*=2))return x.geoAzimuthalEquidistantRaw;var Ke=-We/2,at=-Ke,pt=We*We,kt=m(at),vt=.5/y(at);function Pt(un,fn){var on=D(t(fn)*t(un-Ke)),pn=D(t(fn)*t(un-at));return[((on*=on)-(pn*=pn))/(2*We),(fn<0?-1:1)*L(4*pt*pn-(pt-on+pn)*(pt-on+pn))/(2*We)]}return Pt.invert=function(un,fn){var on,pn,An=fn*fn,Ln=t(L(An+(on=un+Ke)*on)),Pn=t(L(An+(on=un+at)*on));return[r(pn=Ln-Pn,on=(Ln+Pn)*kt),(fn<0?-1:1)*D(L(on*on+pn*pn)*vt)]},Pt}function Ls(We,Ke){return Xl(uu,We,Ke)}function Ui(We,Ke){if(b(Ke)<l)return[We,0];var at=b(Ke/v),pt=R(at);if(b(We)<l||b(b(Ke)-v)<l)return[0,p(Ke)*w*m(pt/2)];var kt=t(pt),vt=b(w/We-We/w)/2,Pt=vt*vt,un=kt/(at+kt-1),fn=un*(2/at-1),on=fn*fn,pn=on+Pt,An=un-on,Ln=Pt+un;return[p(We)*w*(vt*An+L(Pt*An*An-pn*(un*un-on)))/pn,p(Ke)*w*(fn*Ln-vt*L((Pt+1)*pn-Ln*Ln))/pn]}function _o(We,Ke){if(b(Ke)<l)return[We,0];var at=b(Ke/v),pt=R(at);if(b(We)<l||b(b(Ke)-v)<l)return[0,p(Ke)*w*m(pt/2)];var kt=t(pt),vt=b(w/We-We/w)/2,Pt=vt*vt,un=kt*(L(1+Pt)-vt*kt)/(1+Pt*at*at);return[p(We)*w*un,p(Ke)*w*L(1-un*(2*vt+un))]}function co(We,Ke){if(b(Ke)<l)return[We,0];var at=Ke/v,pt=R(at);if(b(We)<l||b(b(Ke)-v)<l)return[0,w*m(pt/2)];var kt=(w/We-We/w)/2,vt=at/(1+t(pt));return[w*(p(We)*L(kt*kt+1-vt*vt)-kt),w*vt]}function $o(We,Ke){if(!Ke)return[We,0];var at=b(Ke);if(!We||at===v)return[0,Ke];var pt=at/v,kt=pt*pt,vt=(8*pt-kt*(kt+2)-5)/(2*kt*(pt-1)),Pt=vt*vt,un=pt*vt,fn=kt+Pt+2*un,on=pt+3*vt,pn=We/v,An=pn+1/pn,Ln=p(b(We)-v)*L(An*An-4),Pn=Ln*Ln,zn=(Ln*(fn+Pt-1)+2*L(fn*(kt+Pt*Pn-1)+(1-kt)*(kt*(on*on+4*Pt)+12*un*Pt+4*Pt*Pt)))/(4*fn+Pn);return[p(We)*v*zn,p(Ke)*v*L(1+Ln*b(zn)-zn*zn)]}function Ms(We,Ke,at,pt){var kt=w/3;We=s(We,l),Ke=s(Ke,l),We=i(We,v),Ke=i(Ke,w-l),at=s(at,0),at=i(at,100-l);var vt=(pt=s(pt,l))/100,Pt=D((at/100+1)*t(kt))/kt,un=y(We)/y(Pt*v),fn=Ke/w,on=L(vt*y(We/2)/y(Ke/2));return function(pn,An,Ln,Pn,zn){function yr(Dr,Yr){var Kr=Ln*y(Pn*Yr),si=L(1-Kr*Kr),Jr=L(2/(1+si*t(Dr*=zn)));return[pn*si*Jr*y(Dr),An*Kr*Jr]}return yr.invert=function(Dr,Yr){var Kr=Dr/pn,si=Yr/An,Jr=L(Kr*Kr+si*si),Li=2*R(Jr/2);return[r(Dr*m(Li),pn*Jr)/zn,Jr&&R(Yr*y(Li)/(An*Ln*Jr))/Pn]},yr}(on/L(fn*un*Pt),1/(on*L(fn*un*Pt)),un,Pt,fn)}function fo(){var We=65*F,Ke=60*F,at=20,pt=200,kt=x.geoProjectionMutator(Ms),vt=kt(We,Ke,at,pt);return vt.poleline=function(Pt){return arguments.length?kt(We=+Pt*F,Ke,at,pt):We*S},vt.parallels=function(Pt){return arguments.length?kt(We,Ke=+Pt*F,at,pt):Ke*S},vt.inflation=function(Pt){return arguments.length?kt(We,Ke,at=+Pt,pt):at},vt.ratio=function(Pt){return arguments.length?kt(We,Ke,at,pt=+Pt):pt},vt.scale(163.775)}cl.invert=function(We,Ke){var at=Ke/1.70711,pt=y(A*at);return[We/(.74482-.34588*pt*pt),2*e(at)]},Ui.invert=function(We,Ke){if(b(Ke)<l)return[We,0];if(b(We)<l)return[0,v*y(2*e(Ke/w))];var at=(We/=w)*We,pt=(Ke/=w)*Ke,kt=at+pt,vt=kt*kt,Pt=-b(Ke)*(1+kt),un=Pt-2*pt+at,fn=-2*Pt+1+2*pt+vt,on=pt/fn+(2*un*un*un/(fn*fn*fn)-9*Pt*un/(fn*fn))/27,pn=(Pt-un*un/(3*fn))/fn,An=2*L(-pn/3),Ln=D(3*on/(pn*An))/3;return[w*(kt-1+L(1+2*(at-pt)+vt))/(2*We),p(Ke)*w*(-An*t(Ln+w/3)-un/(3*fn))]},_o.invert=function(We,Ke){if(!We)return[0,v*y(2*e(Ke/w))];var at=b(We/w),pt=(1-at*at-(Ke/=w)*Ke)/(2*at),kt=L(pt*pt+1);return[p(We)*w*(kt-pt),p(Ke)*v*y(2*r(L((1-2*pt*at)*(pt+kt)-at),L(kt+pt+at)))]},co.invert=function(We,Ke){if(!Ke)return[We,0];var at=Ke/w,pt=(w*w*(1-at*at)-We*We)/(2*w*We);return[We?w*(p(We)*L(pt*pt+1)-pt):0,v*y(2*e(at))]},$o.invert=function(We,Ke){var at;if(!We||!Ke)return[We,Ke];Ke/=w;var pt=p(We)*We/v,kt=(pt*pt-1+4*Ke*Ke)/b(pt),vt=kt*kt,Pt=2*Ke,un=50;do{var fn=Pt*Pt,on=(8*Pt-fn*(fn+2)-5)/(2*fn*(Pt-1)),pn=(3*Pt-fn*Pt-10)/(2*fn*Pt),An=on*on,Ln=Pt*on,Pn=Pt+on,zn=Pn*Pn,yr=Pt+3*on,Dr=-2*Pn*(4*Ln*An+(1-4*fn+3*fn*fn)*(1+pn)+An*(14*fn-6-vt+(8*fn-8-2*vt)*pn)+Ln*(12*fn-8+(10*fn-10-vt)*pn)),Yr=L(zn*(fn+An*vt-1)+(1-fn)*(fn*(yr*yr+4*An)+An*(12*Ln+4*An)));Pt-=at=(kt*(zn+An-1)+2*Yr-pt*(4*zn+vt))/(kt*(2*on*pn+2*Pn*(1+pn))+Dr/Yr-8*Pn*(kt*(-1+An+zn)+2*Yr)*(1+pn)/(vt+4*zn))}while(at>l&&--un>0);return[p(We)*(L(kt*kt+4)+kt)*w/4,v*Pt]};var Jo=4*w+3*L(3),fi=2*L(2*w*L(3)/Jo),na=le(fi*L(3)/w,fi,Jo/6);function Za(We,Ke){return[We*L(1-3*Ke*Ke/(w*w)),Ke]}function yo(We,Ke){var at=t(Ke),pt=t(We)*at,kt=1-pt,vt=t(We=r(y(We)*at,-y(Ke))),Pt=y(We);return[Pt*(at=L(1-pt*pt))-vt*kt,-vt*at-Pt*kt]}function ya(We,Ke){var at=Y(We,Ke);return[(at[0]+We/v)/2,(at[1]+Ke)/2]}Za.invert=function(We,Ke){return[We/L(1-3*Ke*Ke/(w*w)),Ke]},yo.invert=function(We,Ke){var at=(We*We+Ke*Ke)/-2,pt=L(-at*(2+at)),kt=Ke*at+We*pt,vt=We*at-Ke*pt,Pt=L(vt*vt+kt*kt);return[r(pt*kt,Pt*(1+at)),Pt?-R(pt*vt/Pt):0]},ya.invert=function(We,Ke){var at=We,pt=Ke,kt=25;do{var vt,Pt=t(pt),un=y(pt),fn=y(2*pt),on=un*un,pn=Pt*Pt,An=y(at),Ln=t(at/2),Pn=y(at/2),zn=Pn*Pn,yr=1-pn*Ln*Ln,Dr=yr?D(Pt*Ln)*L(vt=1/yr):vt=0,Yr=.5*(2*Dr*Pt*Pn+at/v)-We,Kr=.5*(Dr*un+pt)-Ke,si=.5*vt*(pn*zn+Dr*Pt*Ln*on)+.5/v,Jr=vt*(An*fn/4-Dr*un*Pn),Li=.125*vt*(fn*Pn-Dr*un*pn*An),Pi=.5*vt*(on*Ln+Dr*zn*Pt)+.5,Aa=Jr*Li-Pi*si,ra=(Kr*Jr-Yr*Pi)/Aa,aa=(Yr*Li-Kr*si)/Aa;at-=ra,pt-=aa}while((b(ra)>l||b(aa)>l)&&--kt>0);return[at,pt]},g.geoNaturalEarth=x.geoNaturalEarth1,g.geoNaturalEarthRaw=x.geoNaturalEarth1Raw,g.geoAiry=function(){var We=v,Ke=x.geoProjectionMutator(Z),at=Ke(We);return at.radius=function(pt){return arguments.length?Ke(We=pt*F):We*S},at.scale(179.976).clipAngle(147)},g.geoAiryRaw=Z,g.geoAitoff=function(){return x.geoProjection(Y).scale(152.63)},g.geoAitoffRaw=Y,g.geoArmadillo=function(){var We=20*F,Ke=We>=0?1:-1,at=m(Ke*We),pt=x.geoProjectionMutator(ee),kt=pt(We),vt=kt.stream;return kt.parallel=function(Pt){return arguments.length?(at=m((Ke=(We=Pt*F)>=0?1:-1)*We),pt(We)):We*S},kt.stream=function(Pt){var un=kt.rotate(),fn=vt(Pt),on=(kt.rotate([0,0]),vt(Pt)),pn=kt.precision();return kt.rotate(un),fn.sphere=function(){on.polygonStart(),on.lineStart();for(var An=-180*Ke;Ke*An<180;An+=90*Ke)on.point(An,90*Ke);if(We)for(;Ke*(An-=3*Ke*pn)>=-180;)on.point(An,Ke*-r(t(An*F/2),at)*S);on.lineEnd(),on.polygonEnd()},fn},kt.scale(218.695).center([0,28.0974])},g.geoArmadilloRaw=ee,g.geoAugust=function(){return x.geoProjection(Q).scale(66.1603)},g.geoAugustRaw=Q,g.geoBaker=function(){return x.geoProjection(oe).scale(112.314)},g.geoBakerRaw=oe,g.geoBerghaus=function(){var We=5,Ke=x.geoProjectionMutator(j),at=Ke(We),pt=at.stream,kt=-t(.01*F),vt=y(.01*F);return at.lobes=function(Pt){return arguments.length?Ke(We=+Pt):We},at.stream=function(Pt){var un=at.rotate(),fn=pt(Pt),on=(at.rotate([0,0]),pt(Pt));return at.rotate(un),fn.sphere=function(){on.polygonStart(),on.lineStart();for(var pn=0,An=360/We,Ln=2*w/We,Pn=90-180/We,zn=v;pn<We;++pn,Pn-=An,zn-=Ln)on.point(r(vt*t(zn),kt)*S,R(vt*y(zn))*S),Pn<-90?(on.point(-90,-180-Pn-.01),on.point(-90,-180-Pn+.01)):(on.point(90,Pn+.01),on.point(90,Pn-.01));on.lineEnd(),on.polygonEnd()},fn},at.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},g.geoBerghausRaw=j,g.geoBertin1953=function(){return x.geoProjection(te()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},g.geoBertin1953Raw=te,g.geoBoggs=function(){return x.geoProjection(be).scale(160.857)},g.geoBoggsRaw=be,g.geoBonne=function(){return ge(ke).scale(123.082).center([0,26.1441]).parallel(45)},g.geoBonneRaw=ke,g.geoBottomley=function(){var We=.5,Ke=x.geoProjectionMutator(De),at=Ke(We);return at.fraction=function(pt){return arguments.length?Ke(We=+pt):We},at.scale(158.837)},g.geoBottomleyRaw=De,g.geoBromley=function(){return x.geoProjection(Ee).scale(152.63)},g.geoBromleyRaw=Ee,g.geoChamberlin=Pe,g.geoChamberlinRaw=Ie,g.geoChamberlinAfrica=function(){return Pe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},g.geoCollignon=function(){return x.geoProjection(Ve).scale(95.6464).center([0,30])},g.geoCollignonRaw=Ve,g.geoCraig=function(){return ge(qe).scale(249.828).clipAngle(90)},g.geoCraigRaw=qe,g.geoCraster=function(){return x.geoProjection(lt).scale(156.19)},g.geoCrasterRaw=lt,g.geoCylindricalEqualArea=function(){return ge(He).parallel(38.58).scale(195.044)},g.geoCylindricalEqualAreaRaw=He,g.geoCylindricalStereographic=function(){return ge($e).scale(124.75)},g.geoCylindricalStereographicRaw=$e,g.geoEckert1=function(){return x.geoProjection(et).scale(165.664)},g.geoEckert1Raw=et,g.geoEckert2=function(){return x.geoProjection(tt).scale(165.664)},g.geoEckert2Raw=tt,g.geoEckert3=function(){return x.geoProjection(ft).scale(180.739)},g.geoEckert3Raw=ft,g.geoEckert4=function(){return x.geoProjection(bt).scale(180.739)},g.geoEckert4Raw=bt,g.geoEckert5=function(){return x.geoProjection(Ct).scale(173.044)},g.geoEckert5Raw=Ct,g.geoEckert6=function(){return x.geoProjection(Vt).scale(173.044)},g.geoEckert6Raw=Vt,g.geoEisenlohr=function(){return x.geoProjection(ht).scale(62.5271)},g.geoEisenlohrRaw=ht,g.geoFahey=function(){return x.geoProjection(Rt).scale(137.152)},g.geoFaheyRaw=Rt,g.geoFoucaut=function(){return x.geoProjection(nn).scale(135.264)},g.geoFoucautRaw=nn,g.geoFoucautSinusoidal=function(){var We=.5,Ke=x.geoProjectionMutator(cn),at=Ke(We);return at.alpha=function(pt){return arguments.length?Ke(We=+pt):We},at.scale(168.725)},g.geoFoucautSinusoidalRaw=cn,g.geoGilbert=function(We){null==We&&(We=x.geoOrthographic);var Ke=We(),at=x.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function pt(vt){return Ke(Ze(vt))}function kt(vt){pt[vt]=function(){return arguments.length?(Ke[vt].apply(Ke,arguments),pt):Ke[vt]()}}return Ke.invert&&(pt.invert=function(vt){return Qe(Ke.invert(vt))}),pt.stream=function(vt){var Pt=Ke.stream(vt),un=at.stream({point:function(fn,on){Pt.point(fn/2,R(m(-on/2*F))*S)},lineStart:function(){Pt.lineStart()},lineEnd:function(){Pt.lineEnd()},polygonStart:function(){Pt.polygonStart()},polygonEnd:function(){Pt.polygonEnd()}});return un.sphere=Pt.sphere,un},pt.rotate=function(vt){return arguments.length?(at.rotate(vt),pt):at.rotate()},pt.center=function(vt){return arguments.length?(Ke.center(Ze(vt)),pt):Qe(Ke.center())},kt("angle"),kt("clipAngle"),kt("clipExtent"),kt("fitExtent"),kt("fitHeight"),kt("fitSize"),kt("fitWidth"),kt("scale"),kt("translate"),kt("precision"),pt.scale(249.5)},g.geoGingery=function(){var We=6,Ke=30*F,at=t(Ke),pt=y(Ke),kt=x.geoProjectionMutator(Ge),vt=kt(Ke,We),Pt=vt.stream,un=-t(.01*F),fn=y(.01*F);return vt.radius=function(on){return arguments.length?(at=t(Ke=on*F),pt=y(Ke),kt(Ke,We)):Ke*S},vt.lobes=function(on){return arguments.length?kt(Ke,We=+on):We},vt.stream=function(on){var pn=vt.rotate(),An=Pt(on),Ln=(vt.rotate([0,0]),Pt(on));return vt.rotate(pn),An.sphere=function(){Ln.polygonStart(),Ln.lineStart();for(var Pn=0,zn=2*w/We,yr=0;Pn<We;++Pn,yr-=zn)Ln.point(r(fn*t(yr),un)*S,R(fn*y(yr))*S),Ln.point(r(pt*t(yr-zn/2),at)*S,R(pt*y(yr-zn/2))*S);Ln.lineEnd(),Ln.polygonEnd()},An},vt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},g.geoGingeryRaw=Ge,g.geoGinzburg4=function(){return x.geoProjection(je).scale(149.995)},g.geoGinzburg4Raw=je,g.geoGinzburg5=function(){return x.geoProjection(Ne).scale(153.93)},g.geoGinzburg5Raw=Ne,g.geoGinzburg6=function(){return x.geoProjection(st).scale(130.945)},g.geoGinzburg6Raw=st,g.geoGinzburg8=function(){return x.geoProjection(mt).scale(131.747)},g.geoGinzburg8Raw=mt,g.geoGinzburg9=function(){return x.geoProjection(Tt).scale(131.087)},g.geoGinzburg9Raw=Tt,g.geoGringorten=function(){return x.geoProjection(xt(zt)).scale(239.75)},g.geoGringortenRaw=zt,g.geoGuyou=function(){return x.geoProjection(xt(jt)).scale(151.496)},g.geoGuyouRaw=jt,g.geoHammer=function(){var We=2,Ke=x.geoProjectionMutator(H),at=Ke(We);return at.coefficient=function(pt){return arguments.length?Ke(We=+pt):We},at.scale(169.529)},g.geoHammerRaw=H,g.geoHammerRetroazimuthal=function(){var We=0,Ke=x.geoProjectionMutator(it),at=Ke(We),pt=at.rotate,kt=at.stream,vt=x.geoCircle();return at.parallel=function(Pt){if(!arguments.length)return We*S;var un=at.rotate();return Ke(We=Pt*F).rotate(un)},at.rotate=function(Pt){return arguments.length?(pt.call(at,[Pt[0],Pt[1]-We*S]),vt.center([-Pt[0],-Pt[1]]),at):((Pt=pt.call(at))[1]+=We*S,Pt)},at.stream=function(Pt){return(Pt=kt(Pt)).sphere=function(){Pt.polygonStart();var un,fn=vt.radius(89.99)().coordinates[0],on=fn.length-1,pn=-1;for(Pt.lineStart();++pn<on;)Pt.point((un=fn[pn])[0],un[1]);for(Pt.lineEnd(),on=(fn=vt.radius(90.01)().coordinates[0]).length-1,Pt.lineStart();--pn>=0;)Pt.point((un=fn[pn])[0],un[1]);Pt.lineEnd(),Pt.polygonEnd()},Pt},at.scale(79.4187).parallel(45).clipAngle(179.999)},g.geoHammerRetroazimuthalRaw=it,g.geoHealpix=function(){var We=4,Ke=x.geoProjectionMutator(an),at=Ke(We),pt=at.stream;return at.lobes=function(kt){return arguments.length?Ke(We=+kt):We},at.stream=function(kt){var vt=at.rotate(),Pt=pt(kt),un=(at.rotate([0,0]),pt(kt));return at.rotate(vt),Pt.sphere=function(){var fn,on;x.geoStream((on=[].concat(T.range(-180,180+(fn=180/We)/2,fn).map(Ue),T.range(180,-180-fn/2,-fn).map(yt)),{type:"Polygon",coordinates:[180===fn?on.map(Dt):on]}),un)},Pt},at.scale(239.75)},g.geoHealpixRaw=an,g.geoHill=function(){var We=1,Ke=x.geoProjectionMutator(Ht),at=Ke(We);return at.ratio=function(pt){return arguments.length?Ke(We=+pt):We},at.scale(167.774).center([0,18.67])},g.geoHillRaw=Ht,g.geoHomolosine=function(){return x.geoProjection(gn).scale(152.63)},g.geoHomolosineRaw=gn,g.geoHufnagel=function(){var We=1,Ke=0,at=45*F,pt=2,kt=x.geoProjectionMutator(Qt),vt=kt(We,Ke,at,pt);return vt.a=function(Pt){return arguments.length?kt(We=+Pt,Ke,at,pt):We},vt.b=function(Pt){return arguments.length?kt(We,Ke=+Pt,at,pt):Ke},vt.psiMax=function(Pt){return arguments.length?kt(We,Ke,at=+Pt*F,pt):at*S},vt.ratio=function(Pt){return arguments.length?kt(We,Ke,at,pt=+Pt):pt},vt.scale(180.739)},g.geoHufnagelRaw=Qt,g.geoHyperelliptical=function(){var We=0,Ke=2.5,at=1.183136,pt=x.geoProjectionMutator(hn),kt=pt(We,Ke,at);return kt.alpha=function(vt){return arguments.length?pt(We=+vt,Ke,at):We},kt.k=function(vt){return arguments.length?pt(We,Ke=+vt,at):Ke},kt.gamma=function(vt){return arguments.length?pt(We,Ke,at=+vt):at},kt.scale(152.63)},g.geoHyperellipticalRaw=hn,g.geoInterrupt=wn,g.geoInterruptedBoggs=function(){return wn(be,kn).scale(160.857)},g.geoInterruptedHomolosine=function(){return wn(gn,Fn).scale(152.63)},g.geoInterruptedMollweide=function(){return wn(ue,On).scale(169.529)},g.geoInterruptedMollweideHemispheres=function(){return wn(ue,Qn).scale(169.529).rotate([20,0])},g.geoInterruptedSinuMollweide=function(){return wn(Jt,sr,q).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},g.geoInterruptedSinusoidal=function(){return wn(we,Mr).scale(152.63).rotate([-20,0])},g.geoKavrayskiy7=function(){return x.geoProjection(Wr).scale(158.837)},g.geoKavrayskiy7Raw=Wr,g.geoLagrange=function(){var We=.5,Ke=x.geoProjectionMutator(mr),at=Ke(We);return at.spacing=function(pt){return arguments.length?Ke(We=+pt):We},at.scale(124.75)},g.geoLagrangeRaw=mr,g.geoLarrivee=function(){return x.geoProjection(vr).scale(97.2672)},g.geoLarriveeRaw=vr,g.geoLaskowski=function(){return x.geoProjection(Xn).scale(139.98)},g.geoLaskowskiRaw=Xn,g.geoLittrow=function(){return x.geoProjection(jn).scale(144.049).clipAngle(89.999)},g.geoLittrowRaw=jn,g.geoLoximuthal=function(){return ge(nr).parallel(40).scale(158.837)},g.geoLoximuthalRaw=nr,g.geoMiller=function(){return x.geoProjection(Ur).scale(108.318)},g.geoMillerRaw=Ur,g.geoModifiedStereographic=Ut,g.geoModifiedStereographicRaw=Jn,g.geoModifiedStereographicAlaska=function(){return Ut(_r,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},g.geoModifiedStereographicGs48=function(){return Ut(Hr,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},g.geoModifiedStereographicGs50=function(){return Ut(Lr,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},g.geoModifiedStereographicMiller=function(){return Ut($r,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},g.geoModifiedStereographicLee=function(){return Ut(dn,[165,10]).scale(250).clipAngle(130).center([-165,-10])},g.geoMollweide=function(){return x.geoProjection(ue).scale(169.529)},g.geoMollweideRaw=ue,g.geoMtFlatPolarParabolic=function(){return x.geoProjection(Bn).scale(164.859)},g.geoMtFlatPolarParabolicRaw=Bn,g.geoMtFlatPolarQuartic=function(){return x.geoProjection(cr).scale(188.209)},g.geoMtFlatPolarQuarticRaw=cr,g.geoMtFlatPolarSinusoidal=function(){return x.geoProjection(ur).scale(166.518)},g.geoMtFlatPolarSinusoidalRaw=ur,g.geoNaturalEarth2=function(){return x.geoProjection(Rn).scale(175.295)},g.geoNaturalEarth2Raw=Rn,g.geoNellHammer=function(){return x.geoProjection(Cn).scale(152.63)},g.geoNellHammerRaw=Cn,g.geoInterruptedQuarticAuthalic=function(){return wn(H(1/0),Un).rotate([20,0]).scale(152.63)},g.geoNicolosi=function(){return x.geoProjection(Yn).scale(127.267)},g.geoNicolosiRaw=Yn,g.geoPatterson=function(){return x.geoProjection(Hn).scale(139.319)},g.geoPattersonRaw=Hn,g.geoPolyconic=function(){return x.geoProjection(Zn).scale(103.74)},g.geoPolyconicRaw=Zn,g.geoPolyhedral=ir,g.geoPolyhedralButterfly=function(We){We=We||function(at){var pt=x.geoCentroid({type:"MultiPoint",coordinates:at});return x.geoGnomonic().scale(1).translate([0,0]).rotate([-pt[0],-pt[1]])};var Ke=Vr.map(function(at){return{face:at,project:We(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,pt){var kt=Ke[at];kt&&(kt.children||(kt.children=[])).push(Ke[pt])}),ir(Ke[0],function(at,pt){return Ke[at<-w/2?pt<0?6:4:at<0?pt<0?2:0:at<w/2?pt<0?3:1:pt<0?7:5]}).angle(-30).scale(101.858).center([0,45])},g.geoPolyhedralCollignon=function(We){We=We||function(at){var pt=x.geoCentroid({type:"MultiPoint",coordinates:at});return x.geoProjection(pi).translate([0,0]).scale(1).rotate(pt[1]>0?[-pt[0],0]:[180-pt[0],180])};var Ke=Vr.map(function(at){return{face:at,project:We(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,pt){var kt=Ke[at];kt&&(kt.children||(kt.children=[])).push(Ke[pt])}),ir(Ke[0],function(at,pt){return Ke[at<-w/2?pt<0?6:4:at<0?pt<0?2:0:at<w/2?pt<0?3:1:pt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},g.geoPolyhedralWaterman=function(We){We=We||function(vt){var Pt=6===vt.length?x.geoCentroid({type:"MultiPoint",coordinates:vt}):vt[0];return x.geoGnomonic().scale(1).translate([0,0]).rotate([-Pt[0],-Pt[1]])};var Ke=Vr.map(function(vt){for(var Pt,un=vt.map(Ni),fn=un.length,on=un[fn-1],pn=[],An=0;An<fn;++An)pn.push(bi([.9486832980505138*on[0]+.31622776601683794*(Pt=un[An])[0],.9486832980505138*on[1]+.31622776601683794*Pt[1],.9486832980505138*on[2]+.31622776601683794*Pt[2]]),bi([.9486832980505138*Pt[0]+.31622776601683794*on[0],.9486832980505138*Pt[1]+.31622776601683794*on[1],.9486832980505138*Pt[2]+.31622776601683794*on[2]])),on=Pt;return pn}),at=[],pt=[-1,0,0,1,0,1,4,5];Ke.forEach(function(vt,Pt){for(var un,fn,on=Vr[Pt],pn=on.length,An=at[Pt]=[],Ln=0;Ln<pn;++Ln)Ke.push([on[Ln],vt[(2*Ln+2)%(2*pn)],vt[(2*Ln+1)%(2*pn)]]),pt.push(Pt),An.push((un=Ni(vt[(2*Ln+2)%(2*pn)]),fn=Ni(vt[(2*Ln+1)%(2*pn)]),[un[1]*fn[2]-un[2]*fn[1],un[2]*fn[0]-un[0]*fn[2],un[0]*fn[1]-un[1]*fn[0]]))});var kt=Ke.map(function(vt){return{project:We(vt),face:vt}});return pt.forEach(function(vt,Pt){var un=kt[vt];un&&(un.children||(un.children=[])).push(kt[Pt])}),ir(kt[0],function(vt,Pt){var un=t(Pt),fn=[un*t(vt),un*y(vt),y(Pt)],on=vt<-w/2?Pt<0?6:4:vt<0?Pt<0?2:0:vt<w/2?Pt<0?3:1:Pt<0?7:5,pn=at[on];return kt[lr(pn[0],fn)<0?8+3*on:lr(pn[1],fn)<0?8+3*on+1:lr(pn[2],fn)<0?8+3*on+2:on]}).angle(-30).scale(110.625).center([0,45])},g.geoProject=function(We,Ke){var at,pt=Ke.stream;if(!pt)throw new Error("invalid projection");switch(We&&We.type){case"Feature":at=$a;break;case"FeatureCollection":at=Io;break;default:at=Ya}return at(We,pt)},g.geoGringortenQuincuncial=function(){return Zo(zt).scale(176.423)},g.geoPeirceQuincuncial=as,g.geoPierceQuincuncial=as,g.geoQuantize=function(We,Ke){if(!(0<=(Ke=+Ke)&&Ke<=20))throw new Error("invalid digits");function at(on){var pn=on.length,An=2,Ln=new Array(pn);for(Ln[0]=+on[0].toFixed(Ke),Ln[1]=+on[1].toFixed(Ke);An<pn;)Ln[An]=on[An],++An;return Ln}function pt(on){return on.map(at)}function kt(on){for(var pn=at(on[0]),An=[pn],Ln=1;Ln<on.length;Ln++){var Pn=at(on[Ln]);(Pn.length>2||Pn[0]!=pn[0]||Pn[1]!=pn[1])&&(An.push(Pn),pn=Pn)}return 1===An.length&&on.length>1&&An.push(at(on[on.length-1])),An}function vt(on){return on.map(kt)}function Pt(on){if(null==on)return on;var pn;switch(on.type){case"GeometryCollection":pn={type:"GeometryCollection",geometries:on.geometries.map(Pt)};break;case"Point":pn={type:"Point",coordinates:at(on.coordinates)};break;case"MultiPoint":pn={type:on.type,coordinates:pt(on.coordinates)};break;case"LineString":pn={type:on.type,coordinates:kt(on.coordinates)};break;case"MultiLineString":case"Polygon":pn={type:on.type,coordinates:vt(on.coordinates)};break;case"MultiPolygon":pn={type:"MultiPolygon",coordinates:on.coordinates.map(vt)};break;default:return on}return null!=on.bbox&&(pn.bbox=on.bbox),pn}function un(on){var pn={type:"Feature",properties:on.properties,geometry:Pt(on.geometry)};return null!=on.id&&(pn.id=on.id),null!=on.bbox&&(pn.bbox=on.bbox),pn}if(null!=We)switch(We.type){case"Feature":return un(We);case"FeatureCollection":var fn={type:"FeatureCollection",features:We.features.map(un)};return null!=We.bbox&&(fn.bbox=We.bbox),fn;default:return Pt(We)}return We},g.geoQuincuncial=Zo,g.geoRectangularPolyconic=function(){return ge(ll).scale(131.215)},g.geoRectangularPolyconicRaw=ll,g.geoRobinson=function(){return x.geoProjection(Ws).scale(152.63)},g.geoRobinsonRaw=Ws,g.geoSatellite=function(){var We=2,Ke=0,at=x.geoProjectionMutator(Is),pt=at(We,Ke);return pt.distance=function(kt){return arguments.length?at(We=+kt,Ke):We},pt.tilt=function(kt){return arguments.length?at(We,Ke=kt*F):Ke*S},pt.scale(432.147).clipAngle(D(1/We)*S-1e-6)},g.geoSatelliteRaw=Is,g.geoSinuMollweide=function(){return x.geoProjection(Jt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},g.geoSinuMollweideRaw=Jt,g.geoSinusoidal=function(){return x.geoProjection(we).scale(152.63)},g.geoSinusoidalRaw=we,g.geoStitch=function(We){if(null==We)return We;switch(We.type){case"Feature":return ga(We);case"FeatureCollection":var Ke={type:"FeatureCollection",features:We.features.map(ga)};return null!=We.bbox&&(Ke.bbox=We.bbox),Ke;default:return Vl(We)}},g.geoTimes=function(){return x.geoProjection(cl).scale(146.153)},g.geoTimesRaw=cl,g.geoTwoPointAzimuthal=Ro,g.geoTwoPointAzimuthalRaw=$l,g.geoTwoPointAzimuthalUsa=function(){return Ro([-158,21.5],[-77,39]).clipAngle(60).scale(400)},g.geoTwoPointEquidistant=Ls,g.geoTwoPointEquidistantRaw=uu,g.geoTwoPointEquidistantUsa=function(){return Ls([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},g.geoVanDerGrinten=function(){return x.geoProjection(Ui).scale(79.4183)},g.geoVanDerGrintenRaw=Ui,g.geoVanDerGrinten2=function(){return x.geoProjection(_o).scale(79.4183)},g.geoVanDerGrinten2Raw=_o,g.geoVanDerGrinten3=function(){return x.geoProjection(co).scale(79.4183)},g.geoVanDerGrinten3Raw=co,g.geoVanDerGrinten4=function(){return x.geoProjection($o).scale(127.16)},g.geoVanDerGrinten4Raw=$o,g.geoWagner=fo,g.geoWagner7=function(){return fo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},g.geoWagnerRaw=Ms,g.geoWagner4=function(){return x.geoProjection(na).scale(176.84)},g.geoWagner4Raw=na,g.geoWagner6=function(){return x.geoProjection(Za).scale(152.63)},g.geoWagner6Raw=Za,g.geoWiechel=function(){return x.geoProjection(yo).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},g.geoWiechelRaw=yo,g.geoWinkel3=function(){return x.geoProjection(ya).scale(158.837)},g.geoWinkel3Raw=ya,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?x(ie,_("d3-geo"),_("d3-array")):x(g.d3=g.d3||{},g.d3,g.d3)},{"d3-array":107,"d3-geo":114}],114:[function(_,ae,ie){var g,x;g=this,x=function(g,x){"use strict";function T(){return new b}function b(){this.reset()}b.prototype={constructor:b,reset:function(){this.s=this.t=0},add:function(wt){r(e,wt,this.t),r(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new b;function r(wt,Yt,yn){var rn=wt.s=Yt+yn,xn=rn-Yt;wt.t=Yt-(rn-xn)+(yn-xn)}var t=1e-6,a=Math.PI,n=a/2,d=a/4,s=2*a,i=180/a,u=a/180,f=Math.abs,p=Math.atan,y=Math.atan2,m=Math.cos,l=Math.ceil,w=Math.exp,v=Math.log,A=Math.pow,M=Math.sin,k=Math.sign||function(wt){return wt>0?1:wt<0?-1:0},E=Math.sqrt,P=Math.tan;function S(wt){return wt>1?0:wt<-1?a:Math.acos(wt)}function F(wt){return wt>1?n:wt<-1?-n:Math.asin(wt)}function R(wt){return(wt=M(wt/2))*wt}function D(){}function L(wt,Yt){wt&&V.hasOwnProperty(wt.type)&&V[wt.type](wt,Yt)}var B={Feature:function(wt,Yt){L(wt.geometry,Yt)},FeatureCollection:function(wt,Yt){for(var yn=wt.features,rn=-1,xn=yn.length;++rn<xn;)L(yn[rn].geometry,Yt)}},V={Sphere:function(wt,Yt){Yt.sphere()},Point:function(wt,Yt){Yt.point((wt=wt.coordinates)[0],wt[1],wt[2])},MultiPoint:function(wt,Yt){for(var yn=wt.coordinates,rn=-1,xn=yn.length;++rn<xn;)Yt.point((wt=yn[rn])[0],wt[1],wt[2])},LineString:function(wt,Yt){Z(wt.coordinates,Yt,0)},MultiLineString:function(wt,Yt){for(var yn=wt.coordinates,rn=-1,xn=yn.length;++rn<xn;)Z(yn[rn],Yt,0)},Polygon:function(wt,Yt){Y(wt.coordinates,Yt)},MultiPolygon:function(wt,Yt){for(var yn=wt.coordinates,rn=-1,xn=yn.length;++rn<xn;)Y(yn[rn],Yt)},GeometryCollection:function(wt,Yt){for(var yn=wt.geometries,rn=-1,xn=yn.length;++rn<xn;)L(yn[rn],Yt)}};function Z(wt,Yt,yn){var rn,xn=-1,Wn=wt.length-yn;for(Yt.lineStart();++xn<Wn;)Yt.point((rn=wt[xn])[0],rn[1],rn[2]);Yt.lineEnd()}function Y(wt,Yt){var yn=-1,rn=wt.length;for(Yt.polygonStart();++yn<rn;)Z(wt[yn],Yt,1);Yt.polygonEnd()}function ee(wt,Yt){wt&&B.hasOwnProperty(wt.type)?B[wt.type](wt,Yt):L(wt,Yt)}var Q,$,K,oe,j,H=T(),G=T(),re={point:D,lineStart:D,lineEnd:D,polygonStart:function(){H.reset(),re.lineStart=q,re.lineEnd=te},polygonEnd:function(){var wt=+H;G.add(wt<0?s+wt:wt),this.lineStart=this.lineEnd=this.point=D},sphere:function(){G.add(s)}};function q(){re.point=ne}function te(){le(Q,$)}function ne(wt,Yt){re.point=le,Q=wt,$=Yt,K=wt*=u,oe=m(Yt=(Yt*=u)/2+d),j=M(Yt)}function le(wt,Yt){var yn=(wt*=u)-K,rn=yn>=0?1:-1,xn=rn*yn,Wn=m(Yt=(Yt*=u)/2+d),$n=M(Yt),fr=j*$n,kr=oe*Wn+fr*m(xn),xr=fr*rn*M(xn);H.add(y(xr,kr)),K=wt,oe=Wn,j=$n}function ue(wt){return[y(wt[1],wt[0]),F(wt[2])]}function de(wt){var Yt=wt[0],yn=wt[1],rn=m(yn);return[rn*m(Yt),rn*M(Yt),M(yn)]}function he(wt,Yt){return wt[0]*Yt[0]+wt[1]*Yt[1]+wt[2]*Yt[2]}function be(wt,Yt){return[wt[1]*Yt[2]-wt[2]*Yt[1],wt[2]*Yt[0]-wt[0]*Yt[2],wt[0]*Yt[1]-wt[1]*Yt[0]]}function ge(wt,Yt){wt[0]+=Yt[0],wt[1]+=Yt[1],wt[2]+=Yt[2]}function we(wt,Yt){return[wt[0]*Yt,wt[1]*Yt,wt[2]*Yt]}function ke(wt){var Yt=E(wt[0]*wt[0]+wt[1]*wt[1]+wt[2]*wt[2]);wt[0]/=Yt,wt[1]/=Yt,wt[2]/=Yt}var De,Ee,Re,ve,Te,Ie,Ce,Pe,Ve,qe,Je,lt,He,$e,et,tt,ft,bt,Ct,Vt,Ft,ht,ut,Rt,nn,cn,Ze=T(),Qe={point:Ge,lineStart:Le,lineEnd:ze,polygonStart:function(){Qe.point=je,Qe.lineStart=Ne,Qe.lineEnd=st,Ze.reset(),re.polygonStart()},polygonEnd:function(){re.polygonEnd(),Qe.point=Ge,Qe.lineStart=Le,Qe.lineEnd=ze,H<0?(De=-(Re=180),Ee=-(ve=90)):Ze>t?ve=90:Ze<-t&&(Ee=-90),qe[0]=De,qe[1]=Re},sphere:function(){De=-(Re=180),Ee=-(ve=90)}};function Ge(wt,Yt){Ve.push(qe=[De=wt,Re=wt]),Yt<Ee&&(Ee=Yt),Yt>ve&&(ve=Yt)}function rt(wt,Yt){var yn=de([wt*u,Yt*u]);if(Pe){var rn=be(Pe,yn),xn=be([rn[1],-rn[0],0],rn);ke(xn),xn=ue(xn);var Wn,$n=wt-Te,fr=$n>0?1:-1,kr=xn[0]*i*fr,xr=f($n)>180;xr^(fr*Te<kr&&kr<fr*wt)?(Wn=xn[1]*i)>ve&&(ve=Wn):xr^(fr*Te<(kr=(kr+360)%360-180)&&kr<fr*wt)?(Wn=-xn[1]*i)<Ee&&(Ee=Wn):(Yt<Ee&&(Ee=Yt),Yt>ve&&(ve=Yt)),xr?wt<Te?mt(De,wt)>mt(De,Re)&&(Re=wt):mt(wt,Re)>mt(De,Re)&&(De=wt):Re>=De?(wt<De&&(De=wt),wt>Re&&(Re=wt)):wt>Te?mt(De,wt)>mt(De,Re)&&(Re=wt):mt(wt,Re)>mt(De,Re)&&(De=wt)}else Ve.push(qe=[De=wt,Re=wt]);Yt<Ee&&(Ee=Yt),Yt>ve&&(ve=Yt),Pe=yn,Te=wt}function Le(){Qe.point=rt}function ze(){qe[0]=De,qe[1]=Re,Qe.point=Ge,Pe=null}function je(wt,Yt){if(Pe){var yn=wt-Te;Ze.add(f(yn)>180?yn+(yn>0?360:-360):yn)}else Ie=wt,Ce=Yt;re.point(wt,Yt),rt(wt,Yt)}function Ne(){re.lineStart()}function st(){je(Ie,Ce),re.lineEnd(),f(Ze)>t&&(De=-(Re=180)),qe[0]=De,qe[1]=Re,Pe=null}function mt(wt,Yt){return(Yt-=wt)<0?Yt+360:Yt}function Tt(wt,Yt){return wt[0]-Yt[0]}function xt(wt,Yt){return wt[0]<=wt[1]?wt[0]<=Yt&&Yt<=wt[1]:Yt<wt[0]||wt[1]<Yt}var zt={sphere:D,point:gt,lineStart:jt,lineEnd:qt,polygonStart:function(){zt.lineStart=Wt,zt.lineEnd=an},polygonEnd:function(){zt.lineStart=jt,zt.lineEnd=qt}};function gt(wt,Yt){wt*=u;var yn=m(Yt*=u);Bt(yn*m(wt),yn*M(wt),M(Yt))}function Bt(wt,Yt,yn){++Je,He+=(wt-He)/Je,$e+=(Yt-$e)/Je,et+=(yn-et)/Je}function jt(){zt.point=it}function it(wt,Yt){wt*=u;var yn=m(Yt*=u);Rt=yn*m(wt),nn=yn*M(wt),cn=M(Yt),zt.point=Mt,Bt(Rt,nn,cn)}function Mt(wt,Yt){wt*=u;var yn=m(Yt*=u),rn=yn*m(wt),xn=yn*M(wt),Wn=M(Yt),$n=y(E(($n=nn*Wn-cn*xn)*$n+($n=cn*rn-Rt*Wn)*$n+($n=Rt*xn-nn*rn)*$n),Rt*rn+nn*xn+cn*Wn);lt+=$n,tt+=$n*(Rt+(Rt=rn)),ft+=$n*(nn+(nn=xn)),bt+=$n*(cn+(cn=Wn)),Bt(Rt,nn,cn)}function qt(){zt.point=gt}function Wt(){zt.point=Ue}function an(){yt(ht,ut),zt.point=gt}function Ue(wt,Yt){ht=wt,ut=Yt,wt*=u,Yt*=u,zt.point=yt;var yn=m(Yt);Rt=yn*m(wt),nn=yn*M(wt),cn=M(Yt),Bt(Rt,nn,cn)}function yt(wt,Yt){wt*=u;var yn=m(Yt*=u),rn=yn*m(wt),xn=yn*M(wt),Wn=M(Yt),$n=nn*Wn-cn*xn,fr=cn*rn-Rt*Wn,kr=Rt*xn-nn*rn,xr=E($n*$n+fr*fr+kr*kr),Pr=F(xr),zr=xr&&-Pr/xr;Ct+=zr*$n,Vt+=zr*fr,Ft+=zr*kr,lt+=Pr,tt+=Pr*(Rt+(Rt=rn)),ft+=Pr*(nn+(nn=xn)),bt+=Pr*(cn+(cn=Wn)),Bt(Rt,nn,cn)}function Dt(wt){return function(){return wt}}function Ht(wt,Yt){function yn(rn,xn){return rn=wt(rn,xn),Yt(rn[0],rn[1])}return wt.invert&&Yt.invert&&(yn.invert=function(rn,xn){return(rn=Yt.invert(rn,xn))&&wt.invert(rn[0],rn[1])}),yn}function Jt(wt,Yt){return[f(wt)>a?wt+Math.round(-wt/s)*s:wt,Yt]}function gn(wt,Yt,yn){return(wt%=s)?Yt||yn?Ht(sn(wt),hn(Yt,yn)):sn(wt):Yt||yn?hn(Yt,yn):Jt}function Qt(wt){return function(Yt,yn){return[(Yt+=wt)>a?Yt-s:Yt<-a?Yt+s:Yt,yn]}}function sn(wt){var Yt=Qt(wt);return Yt.invert=Qt(-wt),Yt}function hn(wt,Yt){var yn=m(wt),rn=M(wt),xn=m(Yt),Wn=M(Yt);function $n(fr,kr){var xr=m(kr),Pr=m(fr)*xr,zr=M(fr)*xr,Tr=M(kr),Br=Tr*yn+Pr*rn;return[y(zr*xn-Br*Wn,Pr*yn-Tr*rn),F(Br*xn+zr*Wn)]}return $n.invert=function(fr,kr){var xr=m(kr),Pr=m(fr)*xr,zr=M(fr)*xr,Tr=M(kr),Br=Tr*xn-zr*Wn;return[y(zr*xn+Tr*Wn,Pr*yn+Br*rn),F(Br*yn-Pr*rn)]},$n}function Dn(wt){function Yt(yn){return(yn=wt(yn[0]*u,yn[1]*u))[0]*=i,yn[1]*=i,yn}return wt=gn(wt[0]*u,wt[1]*u,wt.length>2?wt[2]*u:0),Yt.invert=function(yn){return(yn=wt.invert(yn[0]*u,yn[1]*u))[0]*=i,yn[1]*=i,yn},Yt}function _n(wt,Yt,yn,rn,xn,Wn){if(yn){var $n=m(Yt),fr=M(Yt),kr=rn*yn;null==xn?(xn=Yt+rn*s,Wn=Yt-kr/2):(xn=Tn($n,xn),Wn=Tn($n,Wn),(rn>0?xn<Wn:xn>Wn)&&(xn+=rn*s));for(var xr,Pr=xn;rn>0?Pr>Wn:Pr<Wn;Pr-=kr)xr=ue([$n,-fr*m(Pr),-fr*M(Pr)]),wt.point(xr[0],xr[1])}}function Tn(wt,Yt){(Yt=de(Yt))[0]-=wt,ke(Yt);var yn=S(-Yt[1]);return((-Yt[2]<0?-yn:yn)+s-t)%s}function wn(){var wt,Yt=[];return{point:function(yn,rn,xn){wt.push([yn,rn,xn])},lineStart:function(){Yt.push(wt=[])},lineEnd:D,rejoin:function(){Yt.length>1&&Yt.push(Yt.pop().concat(Yt.shift()))},result:function(){var yn=Yt;return Yt=[],wt=null,yn}}}function kn(wt,Yt){return f(wt[0]-Yt[0])<t&&f(wt[1]-Yt[1])<t}function Fn(wt,Yt,yn,rn){this.x=wt,this.z=Yt,this.o=yn,this.e=rn,this.v=!1,this.n=this.p=null}function On(wt,Yt,yn,rn,xn){var Wn,$n,fr=[],kr=[];if(wt.forEach(function(ti){if(!((li=ti.length-1)<=0)){var li,vi,dr=ti[0],hi=ti[li];if(kn(dr,hi)){if(!dr[2]&&!hi[2]){for(xn.lineStart(),Wn=0;Wn<li;++Wn)xn.point((dr=ti[Wn])[0],dr[1]);return void xn.lineEnd()}hi[0]+=2*t}fr.push(vi=new Fn(dr,ti,null,!0)),kr.push(vi.o=new Fn(dr,null,vi,!1)),fr.push(vi=new Fn(hi,ti,null,!1)),kr.push(vi.o=new Fn(hi,null,vi,!0))}}),fr.length){for(kr.sort(Yt),Qn(fr),Qn(kr),Wn=0,$n=kr.length;Wn<$n;++Wn)kr[Wn].e=yn=!yn;for(var xr,Pr,zr=fr[0];;){for(var Tr=zr,Br=!0;Tr.v;)if((Tr=Tr.n)===zr)return;xr=Tr.z,xn.lineStart();do{if(Tr.v=Tr.o.v=!0,Tr.e){if(Br)for(Wn=0,$n=xr.length;Wn<$n;++Wn)xn.point((Pr=xr[Wn])[0],Pr[1]);else rn(Tr.x,Tr.n.x,1,xn);Tr=Tr.n}else{if(Br)for(Wn=(xr=Tr.p.z).length-1;Wn>=0;--Wn)xn.point((Pr=xr[Wn])[0],Pr[1]);else rn(Tr.x,Tr.p.x,-1,xn);Tr=Tr.p}xr=(Tr=Tr.o).z,Br=!Br}while(!Tr.v);xn.lineEnd()}}}function Qn(wt){if(Yt=wt.length){for(var Yt,yn,rn=0,xn=wt[0];++rn<Yt;)xn.n=yn=wt[rn],yn.p=xn,xn=yn;xn.n=yn=wt[0],yn.p=xn}}Jt.invert=Jt;var sr=T();function Mr(wt){return f(wt[0])<=a?wt[0]:k(wt[0])*((f(wt[0])+a)%s-a)}function Wr(wt,Yt){var yn=Mr(Yt),rn=Yt[1],xn=M(rn),Wn=[M(yn),-m(yn),0],$n=0,fr=0;sr.reset(),1===xn?rn=n+t:-1===xn&&(rn=-n-t);for(var kr=0,xr=wt.length;kr<xr;++kr)if(zr=(Pr=wt[kr]).length)for(var Pr,zr,Tr=Pr[zr-1],Br=Mr(Tr),ti=Tr[1]/2+d,li=M(ti),vi=m(ti),dr=0;dr<zr;++dr,Br=Xr,li=xi,vi=Ji,Tr=hi){var hi=Pr[dr],Xr=Mr(hi),ii=hi[1]/2+d,xi=M(ii),Ji=m(ii),la=Xr-Br,Gr=la>=0?1:-1,ha=Gr*la,oa=ha>a,Ai=li*xi;if(sr.add(y(Ai*Gr*M(ha),vi*Ji+Ai*m(ha))),$n+=oa?la+Gr*s:la,oa^Br>=yn^Xr>=yn){var ma=be(de(Tr),de(hi));ke(ma);var ta=be(Wn,ma);ke(ta);var Ra=(oa^la>=0?-1:1)*F(ta[2]);(rn>Ra||rn===Ra&&(ma[0]||ma[1]))&&(fr+=oa^la>=0?1:-1)}}return($n<-t||$n<t&&sr<-t)^1&fr}function mr(wt,Yt,yn,rn){return function(xn){var Wn,$n,fr,kr=Yt(xn),xr=wn(),Pr=Yt(xr),zr=!1,Tr={point:Br,lineStart:li,lineEnd:vi,polygonStart:function(){Tr.point=dr,Tr.lineStart=hi,Tr.lineEnd=Xr,$n=[],Wn=[]},polygonEnd:function(){Tr.point=Br,Tr.lineStart=li,Tr.lineEnd=vi,$n=x.merge($n);var ii=Wr(Wn,rn);$n.length?(zr||(xn.polygonStart(),zr=!0),On($n,vr,ii,yn,xn)):ii&&(zr||(xn.polygonStart(),zr=!0),xn.lineStart(),yn(null,null,1,xn),xn.lineEnd()),zr&&(xn.polygonEnd(),zr=!1),$n=Wn=null},sphere:function(){xn.polygonStart(),xn.lineStart(),yn(null,null,1,xn),xn.lineEnd(),xn.polygonEnd()}};function Br(ii,xi){wt(ii,xi)&&xn.point(ii,xi)}function ti(ii,xi){kr.point(ii,xi)}function li(){Tr.point=ti,kr.lineStart()}function vi(){Tr.point=Br,kr.lineEnd()}function dr(ii,xi){fr.push([ii,xi]),Pr.point(ii,xi)}function hi(){Pr.lineStart(),fr=[]}function Xr(){dr(fr[0][0],fr[0][1]),Pr.lineEnd();var ii,xi,Ji,la,Gr=Pr.clean(),ha=xr.result(),oa=ha.length;if(fr.pop(),Wn.push(fr),fr=null,oa)if(1&Gr){if((xi=(Ji=ha[0]).length-1)>0){for(zr||(xn.polygonStart(),zr=!0),xn.lineStart(),ii=0;ii<xi;++ii)xn.point((la=Ji[ii])[0],la[1]);xn.lineEnd()}}else oa>1&&2&Gr&&ha.push(ha.pop().concat(ha.shift())),$n.push(ha.filter(Or))}return Tr}}function Or(wt){return wt.length>1}function vr(wt,Yt){return((wt=wt.x)[0]<0?wt[1]-n-t:n-wt[1])-((Yt=Yt.x)[0]<0?Yt[1]-n-t:n-Yt[1])}var Xn=mr(function(){return!0},function(wt){var Yt,yn=NaN,rn=NaN,xn=NaN;return{lineStart:function(){wt.lineStart(),Yt=1},point:function(Wn,$n){var xr,Pr,zr,Tr,Br,ti,li,fr=Wn>0?a:-a,kr=f(Wn-yn);f(kr-a)<t?(wt.point(yn,rn=(rn+$n)/2>0?n:-n),wt.point(xn,rn),wt.lineEnd(),wt.lineStart(),wt.point(fr,rn),wt.point(Wn,rn),Yt=0):xn!==fr&&kr>=a&&(f(yn-xn)<t&&(yn-=xn*t),f(Wn-fr)<t&&(Wn-=fr*t),Pr=rn,Tr=$n,li=M((xr=yn)-(zr=Wn)),rn=f(li)>t?p((M(Pr)*(ti=m(Tr))*M(zr)-M(Tr)*(Br=m(Pr))*M(xr))/(Br*ti*li)):(Pr+Tr)/2,wt.point(xn,rn),wt.lineEnd(),wt.lineStart(),wt.point(fr,rn),Yt=0),wt.point(yn=Wn,rn=$n),xn=fr},lineEnd:function(){wt.lineEnd(),yn=rn=NaN},clean:function(){return 2-Yt}}},function(wt,Yt,yn,rn){var xn;if(null==wt)rn.point(-a,xn=yn*n),rn.point(0,xn),rn.point(a,xn),rn.point(a,0),rn.point(a,-xn),rn.point(0,-xn),rn.point(-a,-xn),rn.point(-a,0),rn.point(-a,xn);else if(f(wt[0]-Yt[0])>t){var Wn=wt[0]<Yt[0]?a:-a;rn.point(-Wn,xn=yn*Wn/2),rn.point(0,xn),rn.point(Wn,xn)}else rn.point(Yt[0],Yt[1])},[-a,-n]);function jn(wt){var Yt=m(wt),yn=6*u,rn=Yt>0,xn=f(Yt)>t;function Wn(kr,xr){return m(kr)*m(xr)>Yt}function $n(kr,xr,Pr){var zr=[1,0,0],Tr=be(de(kr),de(xr)),Br=he(Tr,Tr),ti=Tr[0],li=Br-ti*ti;if(!li)return!Pr&&kr;var vi=Yt*Br/li,dr=-Yt*ti/li,hi=be(zr,Tr),Xr=we(zr,vi);ge(Xr,we(Tr,dr));var ii=hi,xi=he(Xr,ii),Ji=he(ii,ii),la=xi*xi-Ji*(he(Xr,Xr)-1);if(!(la<0)){var Gr=E(la),ha=we(ii,(-xi-Gr)/Ji);if(ge(ha,Xr),ha=ue(ha),!Pr)return ha;var oa,Ai=kr[0],ma=xr[0],ta=kr[1],Ra=xr[1];ma<Ai&&(oa=Ai,Ai=ma,ma=oa);var _i=ma-Ai,La=f(_i-a)<t;if(!La&&Ra<ta&&(oa=ta,ta=Ra,Ra=oa),La||_i<t?La?ta+Ra>0^ha[1]<(f(ha[0]-Ai)<t?ta:Ra):ta<=ha[1]&&ha[1]<=Ra:_i>a^(Ai<=ha[0]&&ha[0]<=ma)){var Wo=we(ii,(-xi+Gr)/Ji);return ge(Wo,Xr),[ha,ue(Wo)]}}}function fr(kr,xr){var Pr=rn?wt:a-wt,zr=0;return kr<-Pr?zr|=1:kr>Pr&&(zr|=2),xr<-Pr?zr|=4:xr>Pr&&(zr|=8),zr}return mr(Wn,function(kr){var xr,Pr,zr,Tr,Br;return{lineStart:function(){Tr=zr=!1,Br=1},point:function(ti,li){var vi,dr=[ti,li],hi=Wn(ti,li),Xr=rn?hi?0:fr(ti,li):hi?fr(ti+(ti<0?a:-a),li):0;if(!xr&&(Tr=zr=hi)&&kr.lineStart(),hi!==zr&&(!(vi=$n(xr,dr))||kn(xr,vi)||kn(dr,vi))&&(dr[2]=1),hi!==zr)Br=0,hi?(kr.lineStart(),vi=$n(dr,xr),kr.point(vi[0],vi[1])):(vi=$n(xr,dr),kr.point(vi[0],vi[1],2),kr.lineEnd()),xr=vi;else if(xn&&xr&&rn^hi){var ii;Xr&Pr||!(ii=$n(dr,xr,!0))||(Br=0,rn?(kr.lineStart(),kr.point(ii[0][0],ii[0][1]),kr.point(ii[1][0],ii[1][1]),kr.lineEnd()):(kr.point(ii[1][0],ii[1][1]),kr.lineEnd(),kr.lineStart(),kr.point(ii[0][0],ii[0][1],3)))}!hi||xr&&kn(xr,dr)||kr.point(dr[0],dr[1]),xr=dr,zr=hi,Pr=Xr},lineEnd:function(){zr&&kr.lineEnd(),xr=null},clean:function(){return Br|(Tr&&zr)<<1}}},function(kr,xr,Pr,zr){_n(zr,wt,yn,Pr,kr,xr)},rn?[0,-wt]:[-a,wt-a])}function nr(wt,Yt,yn,rn){function xn(xr,Pr){return wt<=xr&&xr<=yn&&Yt<=Pr&&Pr<=rn}function Wn(xr,Pr,zr,Tr){var Br=0,ti=0;if(null==xr||(Br=$n(xr,zr))!==(ti=$n(Pr,zr))||kr(xr,Pr)<0^zr>0)do{Tr.point(0===Br||3===Br?wt:yn,Br>1?rn:Yt)}while((Br=(Br+zr+4)%4)!==ti);else Tr.point(Pr[0],Pr[1])}function $n(xr,Pr){return f(xr[0]-wt)<t?Pr>0?0:3:f(xr[0]-yn)<t?Pr>0?2:1:f(xr[1]-Yt)<t?Pr>0?1:0:Pr>0?3:2}function fr(xr,Pr){return kr(xr.x,Pr.x)}function kr(xr,Pr){var zr=$n(xr,1),Tr=$n(Pr,1);return zr!==Tr?zr-Tr:0===zr?Pr[1]-xr[1]:1===zr?xr[0]-Pr[0]:2===zr?xr[1]-Pr[1]:Pr[0]-xr[0]}return function(xr){var Pr,zr,Tr,Br,ti,li,vi,dr,hi,Xr,ii,xi=xr,Ji=wn(),la={point:Gr,lineStart:function(){la.point=ha,zr&&zr.push(Tr=[]),Xr=!0,hi=!1,vi=dr=NaN},lineEnd:function(){Pr&&(ha(Br,ti),li&&hi&&Ji.rejoin(),Pr.push(Ji.result())),la.point=Gr,hi&&xi.lineEnd()},polygonStart:function(){xi=Ji,Pr=[],zr=[],ii=!0},polygonEnd:function(){var oa=function(){for(var ta=0,Ra=0,_i=zr.length;Ra<_i;++Ra)for(var La,Wo,Ga=zr[Ra],Ns=1,As=Ga.length,wi=Ga[0],bo=wi[0],Ps=wi[1];Ns<As;++Ns)La=bo,Wo=Ps,bo=(wi=Ga[Ns])[0],Ps=wi[1],Wo<=rn?Ps>rn&&(bo-La)*(rn-Wo)>(Ps-Wo)*(wt-La)&&++ta:Ps<=rn&&(bo-La)*(rn-Wo)<(Ps-Wo)*(wt-La)&&--ta;return ta}(),Ai=ii&&oa,ma=(Pr=x.merge(Pr)).length;(Ai||ma)&&(xr.polygonStart(),Ai&&(xr.lineStart(),Wn(null,null,1,xr),xr.lineEnd()),ma&&On(Pr,fr,oa,Wn,xr),xr.polygonEnd()),xi=xr,Pr=zr=Tr=null}};function Gr(oa,Ai){xn(oa,Ai)&&xi.point(oa,Ai)}function ha(oa,Ai){var ma=xn(oa,Ai);if(zr&&Tr.push([oa,Ai]),Xr)Br=oa,ti=Ai,li=ma,Xr=!1,ma&&(xi.lineStart(),xi.point(oa,Ai));else if(ma&&hi)xi.point(oa,Ai);else{var ta=[vi=Math.max(-1e9,Math.min(1e9,vi)),dr=Math.max(-1e9,Math.min(1e9,dr))],Ra=[oa=Math.max(-1e9,Math.min(1e9,oa)),Ai=Math.max(-1e9,Math.min(1e9,Ai))];!function(_i,La,Wo,Ga,Ns,As){var wi,bo=_i[0],Ps=_i[1],Ea=0,Fa=1,Yo=La[0]-bo,Va=La[1]-Ps;if(wi=Wo-bo,Yo||!(wi>0)){if(wi/=Yo,Yo<0){if(wi<Ea)return;wi<Fa&&(Fa=wi)}else if(Yo>0){if(wi>Fa)return;wi>Ea&&(Ea=wi)}if(wi=Ns-bo,Yo||!(wi<0)){if(wi/=Yo,Yo<0){if(wi>Fa)return;wi>Ea&&(Ea=wi)}else if(Yo>0){if(wi<Ea)return;wi<Fa&&(Fa=wi)}if(wi=Ga-Ps,Va||!(wi>0)){if(wi/=Va,Va<0){if(wi<Ea)return;wi<Fa&&(Fa=wi)}else if(Va>0){if(wi>Fa)return;wi>Ea&&(Ea=wi)}if(wi=As-Ps,Va||!(wi<0)){if(wi/=Va,Va<0){if(wi>Fa)return;wi>Ea&&(Ea=wi)}else if(Va>0){if(wi<Ea)return;wi<Fa&&(Fa=wi)}return Ea>0&&(_i[0]=bo+Ea*Yo,_i[1]=Ps+Ea*Va),Fa<1&&(La[0]=bo+Fa*Yo,La[1]=Ps+Fa*Va),!0}}}}}(ta,Ra,wt,Yt,yn,rn)?ma&&(xi.lineStart(),xi.point(oa,Ai),ii=!1):(hi||(xi.lineStart(),xi.point(ta[0],ta[1])),xi.point(Ra[0],Ra[1]),ma||xi.lineEnd(),ii=!1)}vi=oa,dr=Ai,hi=ma}return la}}var Ur,Jn,_r,Hr=T(),Lr={sphere:D,point:D,lineStart:function(){Lr.point=dn,Lr.lineEnd=$r},lineEnd:D,polygonStart:D,polygonEnd:D};function $r(){Lr.point=Lr.lineEnd=D}function dn(wt,Yt){Ur=wt*=u,Jn=M(Yt*=u),_r=m(Yt),Lr.point=Ut}function Ut(wt,Yt){wt*=u;var yn=M(Yt*=u),rn=m(Yt),xn=f(wt-Ur),Wn=m(xn),$n=rn*M(xn),fr=_r*yn-Jn*rn*Wn,kr=Jn*yn+_r*rn*Wn;Hr.add(y(E($n*$n+fr*fr),kr)),Ur=wt,Jn=yn,_r=rn}function Kt(wt){return Hr.reset(),ee(wt,Lr),+Hr}var Mn=[null,null],Bn={type:"LineString",coordinates:Mn};function cr(wt,Yt){return Mn[0]=wt,Mn[1]=Yt,Kt(Bn)}var ur={Feature:function(wt,Yt){return Cn(wt.geometry,Yt)},FeatureCollection:function(wt,Yt){for(var yn=wt.features,rn=-1,xn=yn.length;++rn<xn;)if(Cn(yn[rn].geometry,Yt))return!0;return!1}},Rn={Sphere:function(){return!0},Point:function(wt,Yt){return Un(wt.coordinates,Yt)},MultiPoint:function(wt,Yt){for(var yn=wt.coordinates,rn=-1,xn=yn.length;++rn<xn;)if(Un(yn[rn],Yt))return!0;return!1},LineString:function(wt,Yt){return Yn(wt.coordinates,Yt)},MultiLineString:function(wt,Yt){for(var yn=wt.coordinates,rn=-1,xn=yn.length;++rn<xn;)if(Yn(yn[rn],Yt))return!0;return!1},Polygon:function(wt,Yt){return Hn(wt.coordinates,Yt)},MultiPolygon:function(wt,Yt){for(var yn=wt.coordinates,rn=-1,xn=yn.length;++rn<xn;)if(Hn(yn[rn],Yt))return!0;return!1},GeometryCollection:function(wt,Yt){for(var yn=wt.geometries,rn=-1,xn=yn.length;++rn<xn;)if(Cn(yn[rn],Yt))return!0;return!1}};function Cn(wt,Yt){return!(!wt||!Rn.hasOwnProperty(wt.type))&&Rn[wt.type](wt,Yt)}function Un(wt,Yt){return 0===cr(wt,Yt)}function Yn(wt,Yt){for(var yn,rn,xn,Wn=0,$n=wt.length;Wn<$n;Wn++){if(0===(rn=cr(wt[Wn],Yt))||Wn>0&&(xn=cr(wt[Wn],wt[Wn-1]))>0&&yn<=xn&&rn<=xn&&(yn+rn-xn)*(1-Math.pow((yn-rn)/xn,2))<1e-12*xn)return!0;yn=rn}return!1}function Hn(wt,Yt){return!!Wr(wt.map(Zn),Sr(Yt))}function Zn(wt){return(wt=wt.map(Sr)).pop(),wt}function Sr(wt){return[wt[0]*u,wt[1]*u]}function Ar(wt,Yt,yn){var rn=x.range(wt,Yt-t,yn).concat(Yt);return function(xn){return rn.map(function(Wn){return[xn,Wn]})}}function gr(wt,Yt,yn){var rn=x.range(wt,Yt-t,yn).concat(Yt);return function(xn){return rn.map(function(Wn){return[Wn,xn]})}}function Rr(){var wt,Yt,yn,rn,xn,Wn,$n,fr,kr,xr,Pr,zr,Tr=10,Br=Tr,ti=90,li=360,vi=2.5;function dr(){return{type:"MultiLineString",coordinates:hi()}}function hi(){return x.range(l(rn/ti)*ti,yn,ti).map(Pr).concat(x.range(l(fr/li)*li,$n,li).map(zr)).concat(x.range(l(Yt/Tr)*Tr,wt,Tr).filter(function(Xr){return f(Xr%ti)>t}).map(kr)).concat(x.range(l(Wn/Br)*Br,xn,Br).filter(function(Xr){return f(Xr%li)>t}).map(xr))}return dr.lines=function(){return hi().map(function(Xr){return{type:"LineString",coordinates:Xr}})},dr.outline=function(){return{type:"Polygon",coordinates:[Pr(rn).concat(zr($n).slice(1),Pr(yn).reverse().slice(1),zr(fr).reverse().slice(1))]}},dr.extent=function(Xr){return arguments.length?dr.extentMajor(Xr).extentMinor(Xr):dr.extentMinor()},dr.extentMajor=function(Xr){return arguments.length?(fr=+Xr[0][1],$n=+Xr[1][1],(rn=+Xr[0][0])>(yn=+Xr[1][0])&&(Xr=rn,rn=yn,yn=Xr),fr>$n&&(Xr=fr,fr=$n,$n=Xr),dr.precision(vi)):[[rn,fr],[yn,$n]]},dr.extentMinor=function(Xr){return arguments.length?(Wn=+Xr[0][1],xn=+Xr[1][1],(Yt=+Xr[0][0])>(wt=+Xr[1][0])&&(Xr=Yt,Yt=wt,wt=Xr),Wn>xn&&(Xr=Wn,Wn=xn,xn=Xr),dr.precision(vi)):[[Yt,Wn],[wt,xn]]},dr.step=function(Xr){return arguments.length?dr.stepMajor(Xr).stepMinor(Xr):dr.stepMinor()},dr.stepMajor=function(Xr){return arguments.length?(ti=+Xr[0],li=+Xr[1],dr):[ti,li]},dr.stepMinor=function(Xr){return arguments.length?(Tr=+Xr[0],Br=+Xr[1],dr):[Tr,Br]},dr.precision=function(Xr){return arguments.length?(vi=+Xr,kr=Ar(Wn,xn,90),xr=gr(Yt,wt,vi),Pr=Ar(fr,$n,90),zr=gr(rn,yn,vi),dr):vi},dr.extentMajor([[-180,-90+t],[180,90-t]]).extentMinor([[-180,-80-t],[180,80+t]])}function ir(wt){return wt}var rr,wr,Ir,Vr,Ci=T(),pi=T(),lr={point:D,lineStart:D,lineEnd:D,polygonStart:function(){lr.lineStart=bi,lr.lineEnd=Io},polygonEnd:function(){lr.lineStart=lr.lineEnd=lr.point=D,Ci.add(f(pi)),pi.reset()},result:function(){var wt=Ci/2;return Ci.reset(),wt}};function bi(){lr.point=Ni}function Ni(wt,Yt){lr.point=wa,rr=Ir=wt,wr=Vr=Yt}function wa(wt,Yt){pi.add(Vr*wt-Ir*Yt),Ir=wt,Vr=Yt}function Io(){wa(rr,wr)}var Bo,sl,Zo,as,$a=1/0,Ya=$a,Xi=-$a,Oa=Xi,Ds={point:function(wt,Yt){wt<$a&&($a=wt),wt>Xi&&(Xi=wt),Yt<Ya&&(Ya=Yt),Yt>Oa&&(Oa=Yt)},lineStart:D,lineEnd:D,polygonStart:D,polygonEnd:D,result:function(){var wt=[[$a,Ya],[Xi,Oa]];return Xi=Oa=-(Ya=$a=1/0),wt}},ll=0,Bi=0,Ws=0,Is=0,to=0,fa=0,Xo=0,ps=0,Lo=0,lo={point:uo,lineStart:ul,lineEnd:Vl,polygonStart:function(){lo.lineStart=cl,lo.lineEnd=Xl},polygonEnd:function(){lo.point=uo,lo.lineStart=ul,lo.lineEnd=Vl},result:function(){var wt=Lo?[Xo/Lo,ps/Lo]:fa?[Is/fa,to/fa]:Ws?[ll/Ws,Bi/Ws]:[NaN,NaN];return ll=Bi=Ws=Is=to=fa=Xo=ps=Lo=0,wt}};function uo(wt,Yt){ll+=wt,Bi+=Yt,++Ws}function ul(){lo.point=lu}function lu(wt,Yt){lo.point=ga,uo(Zo=wt,as=Yt)}function ga(wt,Yt){var yn=wt-Zo,rn=Yt-as,xn=E(yn*yn+rn*rn);Is+=xn*(Zo+wt)/2,to+=xn*(as+Yt)/2,fa+=xn,uo(Zo=wt,as=Yt)}function Vl(){lo.point=uo}function cl(){lo.point=$l}function Xl(){Ro(Bo,sl)}function $l(wt,Yt){lo.point=Ro,uo(Bo=Zo=wt,sl=as=Yt)}function Ro(wt,Yt){var yn=wt-Zo,rn=Yt-as,xn=E(yn*yn+rn*rn);Is+=xn*(Zo+wt)/2,to+=xn*(as+Yt)/2,fa+=xn,Xo+=(xn=as*wt-Zo*Yt)*(Zo+wt),ps+=xn*(as+Yt),Lo+=3*xn,uo(Zo=wt,as=Yt)}function uu(wt){this._context=wt}uu.prototype={_radius:4.5,pointRadius:function(wt){return this._radius=wt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(wt,Yt){switch(this._point){case 0:this._context.moveTo(wt,Yt),this._point=1;break;case 1:this._context.lineTo(wt,Yt);break;default:this._context.moveTo(wt+this._radius,Yt),this._context.arc(wt,Yt,this._radius,0,s)}},result:D};var Ls,Ui,_o,co,$o,Ms=T(),fo={point:D,lineStart:function(){fo.point=Jo},lineEnd:function(){Ls&&fi(Ui,_o),fo.point=D},polygonStart:function(){Ls=!0},polygonEnd:function(){Ls=null},result:function(){var wt=+Ms;return Ms.reset(),wt}};function Jo(wt,Yt){fo.point=fi,Ui=co=wt,_o=$o=Yt}function fi(wt,Yt){Ms.add(E((co-=wt)*co+($o-=Yt)*$o)),co=wt,$o=Yt}function na(){this._string=[]}function Za(wt){return"m0,"+wt+"a"+wt+","+wt+" 0 1,1 0,"+-2*wt+"a"+wt+","+wt+" 0 1,1 0,"+2*wt+"z"}function yo(wt){return function(Yt){var yn=new ya;for(var rn in wt)yn[rn]=wt[rn];return yn.stream=Yt,yn}}function ya(){}function We(wt,Yt,yn){var rn=wt.clipExtent&&wt.clipExtent();return wt.scale(150).translate([0,0]),null!=rn&&wt.clipExtent(null),ee(yn,wt.stream(Ds)),Yt(Ds.result()),null!=rn&&wt.clipExtent(rn),wt}function Ke(wt,Yt,yn){return We(wt,function(rn){var xn=Yt[1][0]-Yt[0][0],Wn=Yt[1][1]-Yt[0][1],$n=Math.min(xn/(rn[1][0]-rn[0][0]),Wn/(rn[1][1]-rn[0][1])),fr=+Yt[0][0]+(xn-$n*(rn[1][0]+rn[0][0]))/2,kr=+Yt[0][1]+(Wn-$n*(rn[1][1]+rn[0][1]))/2;wt.scale(150*$n).translate([fr,kr])},yn)}function at(wt,Yt,yn){return Ke(wt,[[0,0],Yt],yn)}function pt(wt,Yt,yn){return We(wt,function(rn){var xn=+Yt,Wn=xn/(rn[1][0]-rn[0][0]),$n=(xn-Wn*(rn[1][0]+rn[0][0]))/2,fr=-Wn*rn[0][1];wt.scale(150*Wn).translate([$n,fr])},yn)}function kt(wt,Yt,yn){return We(wt,function(rn){var xn=+Yt,Wn=xn/(rn[1][1]-rn[0][1]),$n=-Wn*rn[0][0],fr=(xn-Wn*(rn[1][1]+rn[0][1]))/2;wt.scale(150*Wn).translate([$n,fr])},yn)}na.prototype={_radius:4.5,_circle:Za(4.5),pointRadius:function(wt){return(wt=+wt)!==this._radius&&(this._radius=wt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(wt,Yt){switch(this._point){case 0:this._string.push("M",wt,",",Yt),this._point=1;break;case 1:this._string.push("L",wt,",",Yt);break;default:null==this._circle&&(this._circle=Za(this._radius)),this._string.push("M",wt,",",Yt,this._circle)}},result:function(){if(this._string.length){var wt=this._string.join("");return this._string=[],wt}return null}},ya.prototype={constructor:ya,point:function(wt,Yt){this.stream.point(wt,Yt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var vt=m(30*u);function Pt(wt,Yt){return+Yt?function(yn,rn){function xn(Wn,$n,fr,kr,xr,Pr,zr,Tr,Br,ti,li,vi,dr,hi){var Xr=zr-Wn,ii=Tr-$n,xi=Xr*Xr+ii*ii;if(xi>4*rn&&dr--){var Ji=kr+ti,la=xr+li,Gr=Pr+vi,ha=E(Ji*Ji+la*la+Gr*Gr),oa=F(Gr/=ha),Ai=f(f(Gr)-1)<t||f(fr-Br)<t?(fr+Br)/2:y(la,Ji),ma=yn(Ai,oa),ta=ma[0],Ra=ma[1],_i=ta-Wn,La=Ra-$n,Wo=ii*_i-Xr*La;(Wo*Wo/xi>rn||f((Xr*_i+ii*La)/xi-.5)>.3||kr*ti+xr*li+Pr*vi<vt)&&(xn(Wn,$n,fr,kr,xr,Pr,ta,Ra,Ai,Ji/=ha,la/=ha,Gr,dr,hi),hi.point(ta,Ra),xn(ta,Ra,Ai,Ji,la,Gr,zr,Tr,Br,ti,li,vi,dr,hi))}}return function(Wn){var $n,fr,kr,xr,Pr,zr,Tr,Br,ti,li,vi,dr,hi={point:Xr,lineStart:ii,lineEnd:Ji,polygonStart:function(){Wn.polygonStart(),hi.lineStart=la},polygonEnd:function(){Wn.polygonEnd(),hi.lineStart=ii}};function Xr(oa,Ai){oa=yn(oa,Ai),Wn.point(oa[0],oa[1])}function ii(){Br=NaN,hi.point=xi,Wn.lineStart()}function xi(oa,Ai){var ma=de([oa,Ai]),ta=yn(oa,Ai);xn(Br,ti,Tr,li,vi,dr,Br=ta[0],ti=ta[1],Tr=oa,li=ma[0],vi=ma[1],dr=ma[2],16,Wn),Wn.point(Br,ti)}function Ji(){hi.point=Xr,Wn.lineEnd()}function la(){ii(),hi.point=Gr,hi.lineEnd=ha}function Gr(oa,Ai){xi($n=oa,Ai),fr=Br,kr=ti,xr=li,Pr=vi,zr=dr,hi.point=xi}function ha(){xn(Br,ti,Tr,li,vi,dr,fr,kr,$n,xr,Pr,zr,16,Wn),hi.lineEnd=Ji,Ji()}return hi}}(wt,Yt):(yn=wt,yo({point:function(rn,xn){rn=yn(rn,xn),this.stream.point(rn[0],rn[1])}}));var yn}var un=yo({point:function(wt,Yt){this.stream.point(wt*u,Yt*u)}});function fn(wt,Yt,yn,rn,xn){function Wn($n,fr){return[Yt+wt*($n*=rn),yn-wt*(fr*=xn)]}return Wn.invert=function($n,fr){return[($n-Yt)/wt*rn,(yn-fr)/wt*xn]},Wn}function on(wt,Yt,yn,rn,xn,Wn){var $n=m(Wn),fr=M(Wn),kr=$n*wt,xr=fr*wt,Pr=$n/wt,zr=fr/wt,Tr=(fr*yn-$n*Yt)/wt,Br=(fr*Yt+$n*yn)/wt;function ti(li,vi){return[kr*(li*=rn)-xr*(vi*=xn)+Yt,yn-xr*li-kr*vi]}return ti.invert=function(li,vi){return[rn*(Pr*li-zr*vi+Tr),xn*(Br-zr*li-Pr*vi)]},ti}function pn(wt){return An(function(){return wt})()}function An(wt){var Yt,yn,rn,xn,Wn,$n,fr,kr,xr,Pr,zr=150,Tr=480,Br=250,ti=0,li=0,vi=0,dr=0,hi=0,Xr=0,ii=1,xi=1,Ji=null,la=Xn,Gr=null,ha=ir,oa=.5;function Ai(_i){return kr(_i[0]*u,_i[1]*u)}function ma(_i){return(_i=kr.invert(_i[0],_i[1]))&&[_i[0]*i,_i[1]*i]}function ta(){var _i=on(zr,0,0,ii,xi,Xr).apply(null,Yt(ti,li)),La=(Xr?on:fn)(zr,Tr-_i[0],Br-_i[1],ii,xi,Xr);return yn=gn(vi,dr,hi),fr=Ht(Yt,La),kr=Ht(yn,fr),$n=Pt(fr,oa),Ra()}function Ra(){return xr=Pr=null,Ai}return Ai.stream=function(_i){return xr&&Pr===_i?xr:xr=un((La=yn,yo({point:function(Wo,Ga){var Ns=La(Wo,Ga);return this.stream.point(Ns[0],Ns[1])}}))(la($n(ha(Pr=_i)))));var La},Ai.preclip=function(_i){return arguments.length?(la=_i,Ji=void 0,Ra()):la},Ai.postclip=function(_i){return arguments.length?(ha=_i,Gr=rn=xn=Wn=null,Ra()):ha},Ai.clipAngle=function(_i){return arguments.length?(la=+_i?jn(Ji=_i*u):(Ji=null,Xn),Ra()):Ji*i},Ai.clipExtent=function(_i){return arguments.length?(ha=null==_i?(Gr=rn=xn=Wn=null,ir):nr(Gr=+_i[0][0],rn=+_i[0][1],xn=+_i[1][0],Wn=+_i[1][1]),Ra()):null==Gr?null:[[Gr,rn],[xn,Wn]]},Ai.scale=function(_i){return arguments.length?(zr=+_i,ta()):zr},Ai.translate=function(_i){return arguments.length?(Tr=+_i[0],Br=+_i[1],ta()):[Tr,Br]},Ai.center=function(_i){return arguments.length?(ti=_i[0]%360*u,li=_i[1]%360*u,ta()):[ti*i,li*i]},Ai.rotate=function(_i){return arguments.length?(vi=_i[0]%360*u,dr=_i[1]%360*u,hi=_i.length>2?_i[2]%360*u:0,ta()):[vi*i,dr*i,hi*i]},Ai.angle=function(_i){return arguments.length?(Xr=_i%360*u,ta()):Xr*i},Ai.reflectX=function(_i){return arguments.length?(ii=_i?-1:1,ta()):ii<0},Ai.reflectY=function(_i){return arguments.length?(xi=_i?-1:1,ta()):xi<0},Ai.precision=function(_i){return arguments.length?($n=Pt(fr,oa=_i*_i),Ra()):E(oa)},Ai.fitExtent=function(_i,La){return Ke(Ai,_i,La)},Ai.fitSize=function(_i,La){return at(Ai,_i,La)},Ai.fitWidth=function(_i,La){return pt(Ai,_i,La)},Ai.fitHeight=function(_i,La){return kt(Ai,_i,La)},function(){return Yt=wt.apply(this,arguments),Ai.invert=Yt.invert&&ma,ta()}}function Ln(wt){var Yt=0,yn=a/3,rn=An(wt),xn=rn(Yt,yn);return xn.parallels=function(Wn){return arguments.length?rn(Yt=Wn[0]*u,yn=Wn[1]*u):[Yt*i,yn*i]},xn}function Pn(wt,Yt){var yn=M(wt),rn=(yn+M(Yt))/2;if(f(rn)<t)return function(fr){var kr=m(fr);function xr(Pr,zr){return[Pr*kr,M(zr)/kr]}return xr.invert=function(Pr,zr){return[Pr/kr,F(zr*kr)]},xr}(wt);var xn=1+yn*(2*rn-yn),Wn=E(xn)/rn;function $n(fr,kr){var xr=E(xn-2*rn*M(kr))/rn;return[xr*M(fr*=rn),Wn-xr*m(fr)]}return $n.invert=function(fr,kr){var xr=Wn-kr,Pr=y(fr,f(xr))*k(xr);return xr*rn<0&&(Pr-=a*k(fr)*k(xr)),[Pr/rn,F((xn-(fr*fr+xr*xr)*rn*rn)/(2*rn))]},$n}function zn(){return Ln(Pn).scale(155.424).center([0,33.6442])}function yr(){return zn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Dr(wt){return function(Yt,yn){var rn=m(Yt),xn=m(yn),Wn=wt(rn*xn);return[Wn*xn*M(Yt),Wn*M(yn)]}}function Yr(wt){return function(Yt,yn){var rn=E(Yt*Yt+yn*yn),xn=wt(rn),Wn=M(xn),$n=m(xn);return[y(Yt*Wn,rn*$n),F(rn&&yn*Wn/rn)]}}var Kr=Dr(function(wt){return E(2/(1+wt))});Kr.invert=Yr(function(wt){return 2*F(wt/2)});var si=Dr(function(wt){return(wt=S(wt))&&wt/M(wt)});function Jr(wt,Yt){return[wt,v(P((n+Yt)/2))]}function Li(wt){var Yt,yn,rn,xn=pn(wt),Wn=xn.center,$n=xn.scale,fr=xn.translate,kr=xn.clipExtent,xr=null;function Pr(){var zr=a*$n(),Tr=xn(Dn(xn.rotate()).invert([0,0]));return kr(null==xr?[[Tr[0]-zr,Tr[1]-zr],[Tr[0]+zr,Tr[1]+zr]]:wt===Jr?[[Math.max(Tr[0]-zr,xr),Yt],[Math.min(Tr[0]+zr,yn),rn]]:[[xr,Math.max(Tr[1]-zr,Yt)],[yn,Math.min(Tr[1]+zr,rn)]])}return xn.scale=function(zr){return arguments.length?($n(zr),Pr()):$n()},xn.translate=function(zr){return arguments.length?(fr(zr),Pr()):fr()},xn.center=function(zr){return arguments.length?(Wn(zr),Pr()):Wn()},xn.clipExtent=function(zr){return arguments.length?(null==zr?xr=Yt=yn=rn=null:(xr=+zr[0][0],Yt=+zr[0][1],yn=+zr[1][0],rn=+zr[1][1]),Pr()):null==xr?null:[[xr,Yt],[yn,rn]]},Pr()}function Pi(wt){return P((n+wt)/2)}function Aa(wt,Yt){var yn=m(wt),rn=wt===Yt?M(wt):v(yn/m(Yt))/v(Pi(Yt)/Pi(wt)),xn=yn*A(Pi(wt),rn)/rn;if(!rn)return Jr;function Wn($n,fr){xn>0?fr<-n+t&&(fr=-n+t):fr>n-t&&(fr=n-t);var kr=xn/A(Pi(fr),rn);return[kr*M(rn*$n),xn-kr*m(rn*$n)]}return Wn.invert=function($n,fr){var kr=xn-fr,xr=k(rn)*E($n*$n+kr*kr),Pr=y($n,f(kr))*k(kr);return kr*rn<0&&(Pr-=a*k($n)*k(kr)),[Pr/rn,2*p(A(xn/xr,1/rn))-n]},Wn}function ra(wt,Yt){return[wt,Yt]}function aa(wt,Yt){var yn=m(wt),rn=wt===Yt?M(wt):(yn-m(Yt))/(Yt-wt),xn=yn/rn+wt;if(f(rn)<t)return ra;function Wn($n,fr){var kr=xn-fr,xr=rn*$n;return[kr*M(xr),xn-kr*m(xr)]}return Wn.invert=function($n,fr){var kr=xn-fr,xr=y($n,f(kr))*k(kr);return kr*rn<0&&(xr-=a*k($n)*k(kr)),[xr/rn,xn-k(rn)*E($n*$n+kr*kr)]},Wn}si.invert=Yr(function(wt){return wt}),Jr.invert=function(wt,Yt){return[wt,2*p(w(Yt))-n]},ra.invert=ra;var xo=1.340264,io=-.081106,ja=893e-6,Ta=.003796,wo=E(3)/2;function Go(wt,Yt){var yn=F(wo*M(Yt)),rn=yn*yn,xn=rn*rn*rn;return[wt*m(yn)/(wo*(xo+3*io*rn+xn*(7*ja+9*Ta*rn))),yn*(xo+io*rn+xn*(ja+Ta*rn))]}function os(wt,Yt){var yn=m(Yt),rn=m(wt)*yn;return[yn*M(wt)/rn,M(Yt)/rn]}function ss(wt,Yt){var yn=Yt*Yt,rn=yn*yn;return[wt*(.8707-.131979*yn+rn*(rn*(.003971*yn-.001529*rn)-.013791)),Yt*(1.007226+yn*(.015085+rn*(.028874*yn-.044475-.005916*rn)))]}function gs(wt,Yt){return[m(Yt)*M(wt),M(Yt)]}function ms(wt,Yt){var yn=m(Yt),rn=1+m(wt)*yn;return[yn*M(wt)/rn,M(Yt)/rn]}function Ma(wt,Yt){return[v(P((n+Yt)/2)),-wt]}Go.invert=function(wt,Yt){for(var yn,rn=Yt,xn=rn*rn,Wn=xn*xn*xn,$n=0;$n<12&&(Wn=(xn=(rn-=yn=(rn*(xo+io*xn+Wn*(ja+Ta*xn))-Yt)/(xo+3*io*xn+Wn*(7*ja+9*Ta*xn)))*rn)*xn*xn,!(f(yn)<1e-12));++$n);return[wo*wt*(xo+3*io*xn+Wn*(7*ja+9*Ta*xn))/m(rn),F(M(rn)/wo)]},os.invert=Yr(p),ss.invert=function(wt,Yt){var yn,rn=Yt,xn=25;do{var Wn=rn*rn,$n=Wn*Wn;rn-=yn=(rn*(1.007226+Wn*(.015085+$n*(.028874*Wn-.044475-.005916*$n)))-Yt)/(1.007226+Wn*(.045255+$n*(.259866*Wn-.311325-.005916*11*$n)))}while(f(yn)>t&&--xn>0);return[wt/(.8707+(Wn=rn*rn)*(Wn*(Wn*Wn*Wn*(.003971-.001529*Wn)-.013791)-.131979)),rn]},gs.invert=Yr(F),ms.invert=Yr(function(wt){return 2*p(wt)}),Ma.invert=function(wt,Yt){return[-Yt,2*p(w(wt))-n]},g.geoAlbers=yr,g.geoAlbersUsa=function(){var wt,Yt,yn,rn,xn,Wn,$n=yr(),fr=zn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),kr=zn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),xr={point:function(Tr,Br){Wn=[Tr,Br]}};function Pr(Tr){var Br=Tr[0],ti=Tr[1];return Wn=null,yn.point(Br,ti),Wn||(rn.point(Br,ti),Wn)||(xn.point(Br,ti),Wn)}function zr(){return wt=Yt=null,Pr}return Pr.invert=function(Tr){var Br=$n.scale(),ti=$n.translate(),li=(Tr[0]-ti[0])/Br,vi=(Tr[1]-ti[1])/Br;return(vi>=.12&&vi<.234&&li>=-.425&&li<-.214?fr:vi>=.166&&vi<.234&&li>=-.214&&li<-.115?kr:$n).invert(Tr)},Pr.stream=function(Tr){return wt&&Yt===Tr?wt:(Br=[$n.stream(Yt=Tr),fr.stream(Tr),kr.stream(Tr)],ti=Br.length,wt={point:function(li,vi){for(var dr=-1;++dr<ti;)Br[dr].point(li,vi)},sphere:function(){for(var li=-1;++li<ti;)Br[li].sphere()},lineStart:function(){for(var li=-1;++li<ti;)Br[li].lineStart()},lineEnd:function(){for(var li=-1;++li<ti;)Br[li].lineEnd()},polygonStart:function(){for(var li=-1;++li<ti;)Br[li].polygonStart()},polygonEnd:function(){for(var li=-1;++li<ti;)Br[li].polygonEnd()}});var Br,ti},Pr.precision=function(Tr){return arguments.length?($n.precision(Tr),fr.precision(Tr),kr.precision(Tr),zr()):$n.precision()},Pr.scale=function(Tr){return arguments.length?($n.scale(Tr),fr.scale(.35*Tr),kr.scale(Tr),Pr.translate($n.translate())):$n.scale()},Pr.translate=function(Tr){if(!arguments.length)return $n.translate();var Br=$n.scale(),ti=+Tr[0],li=+Tr[1];return yn=$n.translate(Tr).clipExtent([[ti-.455*Br,li-.238*Br],[ti+.455*Br,li+.238*Br]]).stream(xr),rn=fr.translate([ti-.307*Br,li+.201*Br]).clipExtent([[ti-.425*Br+t,li+.12*Br+t],[ti-.214*Br-t,li+.234*Br-t]]).stream(xr),xn=kr.translate([ti-.205*Br,li+.212*Br]).clipExtent([[ti-.214*Br+t,li+.166*Br+t],[ti-.115*Br-t,li+.234*Br-t]]).stream(xr),zr()},Pr.fitExtent=function(Tr,Br){return Ke(Pr,Tr,Br)},Pr.fitSize=function(Tr,Br){return at(Pr,Tr,Br)},Pr.fitWidth=function(Tr,Br){return pt(Pr,Tr,Br)},Pr.fitHeight=function(Tr,Br){return kt(Pr,Tr,Br)},Pr.scale(1070)},g.geoArea=function(wt){return G.reset(),ee(wt,re),2*G},g.geoAzimuthalEqualArea=function(){return pn(Kr).scale(124.75).clipAngle(179.999)},g.geoAzimuthalEqualAreaRaw=Kr,g.geoAzimuthalEquidistant=function(){return pn(si).scale(79.4188).clipAngle(179.999)},g.geoAzimuthalEquidistantRaw=si,g.geoBounds=function(wt){var Yt,yn,rn,xn,Wn,$n,fr;if(ve=Re=-(De=Ee=1/0),Ve=[],ee(wt,Qe),yn=Ve.length){for(Ve.sort(Tt),Yt=1,Wn=[rn=Ve[0]];Yt<yn;++Yt)xt(rn,(xn=Ve[Yt])[0])||xt(rn,xn[1])?(mt(rn[0],xn[1])>mt(rn[0],rn[1])&&(rn[1]=xn[1]),mt(xn[0],rn[1])>mt(rn[0],rn[1])&&(rn[0]=xn[0])):Wn.push(rn=xn);for($n=-1/0,Yt=0,rn=Wn[yn=Wn.length-1];Yt<=yn;rn=xn,++Yt)(fr=mt(rn[1],(xn=Wn[Yt])[0]))>$n&&($n=fr,De=xn[0],Re=rn[1])}return Ve=qe=null,De===1/0||Ee===1/0?[[NaN,NaN],[NaN,NaN]]:[[De,Ee],[Re,ve]]},g.geoCentroid=function(wt){Je=lt=He=$e=et=tt=ft=bt=Ct=Vt=Ft=0,ee(wt,zt);var Yt=Ct,yn=Vt,rn=Ft,xn=Yt*Yt+yn*yn+rn*rn;return xn<1e-12&&(Yt=tt,yn=ft,rn=bt,lt<t&&(Yt=He,yn=$e,rn=et),(xn=Yt*Yt+yn*yn+rn*rn)<1e-12)?[NaN,NaN]:[y(yn,Yt)*i,F(rn/E(xn))*i]},g.geoCircle=function(){var wt,Yt,yn=Dt([0,0]),rn=Dt(90),xn=Dt(6),Wn={point:function(fr,kr){wt.push(fr=Yt(fr,kr)),fr[0]*=i,fr[1]*=i}};function $n(){var fr=yn.apply(this,arguments),kr=rn.apply(this,arguments)*u,xr=xn.apply(this,arguments)*u;return wt=[],Yt=gn(-fr[0]*u,-fr[1]*u,0).invert,_n(Wn,kr,xr,1),fr={type:"Polygon",coordinates:[wt]},wt=Yt=null,fr}return $n.center=function(fr){return arguments.length?(yn="function"==typeof fr?fr:Dt([+fr[0],+fr[1]]),$n):yn},$n.radius=function(fr){return arguments.length?(rn="function"==typeof fr?fr:Dt(+fr),$n):rn},$n.precision=function(fr){return arguments.length?(xn="function"==typeof fr?fr:Dt(+fr),$n):xn},$n},g.geoClipAntimeridian=Xn,g.geoClipCircle=jn,g.geoClipExtent=function(){var wt,Yt,yn,rn=0,xn=0,Wn=960,$n=500;return yn={stream:function(fr){return wt&&Yt===fr?wt:wt=nr(rn,xn,Wn,$n)(Yt=fr)},extent:function(fr){return arguments.length?(rn=+fr[0][0],xn=+fr[0][1],Wn=+fr[1][0],$n=+fr[1][1],wt=Yt=null,yn):[[rn,xn],[Wn,$n]]}}},g.geoClipRectangle=nr,g.geoConicConformal=function(){return Ln(Aa).scale(109.5).parallels([30,30])},g.geoConicConformalRaw=Aa,g.geoConicEqualArea=zn,g.geoConicEqualAreaRaw=Pn,g.geoConicEquidistant=function(){return Ln(aa).scale(131.154).center([0,13.9389])},g.geoConicEquidistantRaw=aa,g.geoContains=function(wt,Yt){return(wt&&ur.hasOwnProperty(wt.type)?ur[wt.type]:Cn)(wt,Yt)},g.geoDistance=cr,g.geoEqualEarth=function(){return pn(Go).scale(177.158)},g.geoEqualEarthRaw=Go,g.geoEquirectangular=function(){return pn(ra).scale(152.63)},g.geoEquirectangularRaw=ra,g.geoGnomonic=function(){return pn(os).scale(144.049).clipAngle(60)},g.geoGnomonicRaw=os,g.geoGraticule=Rr,g.geoGraticule10=function(){return Rr()()},g.geoIdentity=function(){var wt,Yt,yn,rn,xn,Wn,$n,fr=1,kr=0,xr=0,Pr=1,zr=1,Tr=0,Br=null,ti=1,li=1,vi=yo({point:function(ii,xi){var Ji=Xr([ii,xi]);this.stream.point(Ji[0],Ji[1])}}),dr=ir;function hi(){return ti=fr*Pr,li=fr*zr,Wn=$n=null,Xr}function Xr(ii){var xi=ii[0]*ti,Ji=ii[1]*li;if(Tr){var la=Ji*wt-xi*Yt;xi=xi*wt+Ji*Yt,Ji=la}return[xi+kr,Ji+xr]}return Xr.invert=function(ii){var xi=ii[0]-kr,Ji=ii[1]-xr;if(Tr){var la=Ji*wt+xi*Yt;xi=xi*wt-Ji*Yt,Ji=la}return[xi/ti,Ji/li]},Xr.stream=function(ii){return Wn&&$n===ii?Wn:Wn=vi(dr($n=ii))},Xr.postclip=function(ii){return arguments.length?(dr=ii,Br=yn=rn=xn=null,hi()):dr},Xr.clipExtent=function(ii){return arguments.length?(dr=null==ii?(Br=yn=rn=xn=null,ir):nr(Br=+ii[0][0],yn=+ii[0][1],rn=+ii[1][0],xn=+ii[1][1]),hi()):null==Br?null:[[Br,yn],[rn,xn]]},Xr.scale=function(ii){return arguments.length?(fr=+ii,hi()):fr},Xr.translate=function(ii){return arguments.length?(kr=+ii[0],xr=+ii[1],hi()):[kr,xr]},Xr.angle=function(ii){return arguments.length?(Yt=M(Tr=ii%360*u),wt=m(Tr),hi()):Tr*i},Xr.reflectX=function(ii){return arguments.length?(Pr=ii?-1:1,hi()):Pr<0},Xr.reflectY=function(ii){return arguments.length?(zr=ii?-1:1,hi()):zr<0},Xr.fitExtent=function(ii,xi){return Ke(Xr,ii,xi)},Xr.fitSize=function(ii,xi){return at(Xr,ii,xi)},Xr.fitWidth=function(ii,xi){return pt(Xr,ii,xi)},Xr.fitHeight=function(ii,xi){return kt(Xr,ii,xi)},Xr},g.geoInterpolate=function(wt,Yt){var yn=wt[0]*u,rn=wt[1]*u,xn=Yt[0]*u,Wn=Yt[1]*u,$n=m(rn),fr=M(rn),kr=m(Wn),xr=M(Wn),Pr=$n*m(yn),zr=$n*M(yn),Tr=kr*m(xn),Br=kr*M(xn),ti=2*F(E(R(Wn-rn)+$n*kr*R(xn-yn))),li=M(ti),vi=ti?function(dr){var hi=M(dr*=ti)/li,Xr=M(ti-dr)/li,ii=Xr*Pr+hi*Tr,xi=Xr*zr+hi*Br,Ji=Xr*fr+hi*xr;return[y(xi,ii)*i,y(Ji,E(ii*ii+xi*xi))*i]}:function(){return[yn*i,rn*i]};return vi.distance=ti,vi},g.geoLength=Kt,g.geoMercator=function(){return Li(Jr).scale(961/s)},g.geoMercatorRaw=Jr,g.geoNaturalEarth1=function(){return pn(ss).scale(175.295)},g.geoNaturalEarth1Raw=ss,g.geoOrthographic=function(){return pn(gs).scale(249.5).clipAngle(90+t)},g.geoOrthographicRaw=gs,g.geoPath=function(wt,Yt){var yn,rn,xn=4.5;function Wn($n){return $n&&("function"==typeof xn&&rn.pointRadius(+xn.apply(this,arguments)),ee($n,yn(rn))),rn.result()}return Wn.area=function($n){return ee($n,yn(lr)),lr.result()},Wn.measure=function($n){return ee($n,yn(fo)),fo.result()},Wn.bounds=function($n){return ee($n,yn(Ds)),Ds.result()},Wn.centroid=function($n){return ee($n,yn(lo)),lo.result()},Wn.projection=function($n){return arguments.length?(yn=null==$n?(wt=null,ir):(wt=$n).stream,Wn):wt},Wn.context=function($n){return arguments.length?(rn=null==$n?(Yt=null,new na):new uu(Yt=$n),"function"!=typeof xn&&rn.pointRadius(xn),Wn):Yt},Wn.pointRadius=function($n){return arguments.length?(xn="function"==typeof $n?$n:(rn.pointRadius(+$n),+$n),Wn):xn},Wn.projection(wt).context(Yt)},g.geoProjection=pn,g.geoProjectionMutator=An,g.geoRotation=Dn,g.geoStereographic=function(){return pn(ms).scale(250).clipAngle(142)},g.geoStereographicRaw=ms,g.geoStream=ee,g.geoTransform=function(wt){return{stream:yo(wt)}},g.geoTransverseMercator=function(){var wt=Li(Ma),Yt=wt.center,yn=wt.rotate;return wt.center=function(rn){return arguments.length?Yt([-rn[1],rn[0]]):[(rn=Yt())[1],-rn[0]]},wt.rotate=function(rn){return arguments.length?yn([rn[0],rn[1],rn.length>2?rn[2]+90:90]):[(rn=yn())[0],rn[1],rn[2]-90]},yn([0,0,90]).scale(159.155)},g.geoTransverseMercatorRaw=Ma,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?x(ie,_("d3-array")):x((g=g||self).d3=g.d3||{},g.d3)},{"d3-array":107}],115:[function(_,ae,ie){var g,x;g=this,x=function(g){"use strict";function x(he,be){return he.parent===be.parent?1:2}function T(he,be){return he+be.x}function b(he,be){return Math.max(he,be.y)}function e(he){var be=0,ge=he.children,we=ge&&ge.length;if(we)for(;--we>=0;)be+=ge[we].value;else be=1;he.value=be}function r(he,be){var ge,we,ke,De,Ee,Re=new d(he),ve=+he.value&&(Re.value=he.value),Te=[Re];for(null==be&&(be=t);ge=Te.pop();)if(ve&&(ge.value=+ge.data.value),(ke=be(ge.data))&&(Ee=ke.length))for(ge.children=new Array(Ee),De=Ee-1;De>=0;--De)Te.push(we=ge.children[De]=new d(ke[De])),we.parent=ge,we.depth=ge.depth+1;return Re.eachBefore(n)}function t(he){return he.children}function a(he){he.data=he.data.data}function n(he){var be=0;do{he.height=be}while((he=he.parent)&&he.height<++be)}function d(he){this.data=he,this.depth=this.height=0,this.parent=null}d.prototype=r.prototype={constructor:d,count:function(){return this.eachAfter(e)},each:function(he){var be,ge,we,ke,De=this,Ee=[De];do{for(be=Ee.reverse(),Ee=[];De=be.pop();)if(he(De),ge=De.children)for(we=0,ke=ge.length;we<ke;++we)Ee.push(ge[we])}while(Ee.length);return this},eachAfter:function(he){for(var be,ge,we,ke=this,De=[ke],Ee=[];ke=De.pop();)if(Ee.push(ke),be=ke.children)for(ge=0,we=be.length;ge<we;++ge)De.push(be[ge]);for(;ke=Ee.pop();)he(ke);return this},eachBefore:function(he){for(var be,ge,we=this,ke=[we];we=ke.pop();)if(he(we),be=we.children)for(ge=be.length-1;ge>=0;--ge)ke.push(be[ge]);return this},sum:function(he){return this.eachAfter(function(be){for(var ge=+he(be.data)||0,we=be.children,ke=we&&we.length;--ke>=0;)ge+=we[ke].value;be.value=ge})},sort:function(he){return this.eachBefore(function(be){be.children&&be.children.sort(he)})},path:function(he){for(var be=this,ge=function(De,Ee){if(De===Ee)return De;var Re=De.ancestors(),ve=Ee.ancestors(),Te=null;for(De=Re.pop(),Ee=ve.pop();De===Ee;)Te=De,De=Re.pop(),Ee=ve.pop();return Te}(be,he),we=[be];be!==ge;)we.push(be=be.parent);for(var ke=we.length;he!==ge;)we.splice(ke,0,he),he=he.parent;return we},ancestors:function(){for(var he=this,be=[he];he=he.parent;)be.push(he);return be},descendants:function(){var he=[];return this.each(function(be){he.push(be)}),he},leaves:function(){var he=[];return this.eachBefore(function(be){be.children||he.push(be)}),he},links:function(){var he=this,be=[];return he.each(function(ge){ge!==he&&be.push({source:ge.parent,target:ge})}),be},copy:function(){return r(this).eachBefore(a)}};var s=Array.prototype.slice;function i(he){for(var be,ge,we=0,ke=(he=function(Ee){for(var Re,ve,Te=Ee.length;Te;)ve=Math.random()*Te--|0,Re=Ee[Te],Ee[Te]=Ee[ve],Ee[ve]=Re;return Ee}(s.call(he))).length,De=[];we<ke;)be=he[we],ge&&p(ge,be)?++we:(ge=m(De=u(De,be)),we=0);return ge}function u(he,be){var ge,we;if(y(be,he))return[be];for(ge=0;ge<he.length;++ge)if(f(be,he[ge])&&y(l(he[ge],be),he))return[he[ge],be];for(ge=0;ge<he.length-1;++ge)for(we=ge+1;we<he.length;++we)if(f(l(he[ge],he[we]),be)&&f(l(he[ge],be),he[we])&&f(l(he[we],be),he[ge])&&y(w(he[ge],he[we],be),he))return[he[ge],he[we],be];throw new Error}function f(he,be){var ge=he.r-be.r,we=be.x-he.x,ke=be.y-he.y;return ge<0||ge*ge<we*we+ke*ke}function p(he,be){var ge=he.r-be.r+1e-6,we=be.x-he.x,ke=be.y-he.y;return ge>0&&ge*ge>we*we+ke*ke}function y(he,be){for(var ge=0;ge<be.length;++ge)if(!p(he,be[ge]))return!1;return!0}function m(he){switch(he.length){case 1:return{x:(be=he[0]).x,y:be.y,r:be.r};case 2:return l(he[0],he[1]);case 3:return w(he[0],he[1],he[2])}var be}function l(he,be){var ge=he.x,we=he.y,ke=he.r,De=be.x,Ee=be.y,Re=be.r,ve=De-ge,Te=Ee-we,Ie=Re-ke,Ce=Math.sqrt(ve*ve+Te*Te);return{x:(ge+De+ve/Ce*Ie)/2,y:(we+Ee+Te/Ce*Ie)/2,r:(Ce+ke+Re)/2}}function w(he,be,ge){var we=he.x,ke=he.y,De=he.r,Ee=be.x,Re=be.y,ve=be.r,Te=ge.x,Ie=ge.y,Ce=ge.r,Pe=we-Ee,Ve=we-Te,qe=ke-Re,Je=ke-Ie,lt=ve-De,He=Ce-De,$e=we*we+ke*ke-De*De,et=$e-Ee*Ee-Re*Re+ve*ve,tt=$e-Te*Te-Ie*Ie+Ce*Ce,ft=Ve*qe-Pe*Je,bt=(qe*tt-Je*et)/(2*ft)-we,Ct=(Je*lt-qe*He)/ft,Vt=(Ve*et-Pe*tt)/(2*ft)-ke,Ft=(Pe*He-Ve*lt)/ft,ht=Ct*Ct+Ft*Ft-1,ut=2*(De+bt*Ct+Vt*Ft),Rt=bt*bt+Vt*Vt-De*De,nn=-(ht?(ut+Math.sqrt(ut*ut-4*ht*Rt))/(2*ht):Rt/ut);return{x:we+bt+Ct*nn,y:ke+Vt+Ft*nn,r:nn}}function v(he,be,ge){var we,ke,De,Ee,Re=he.x-be.x,ve=he.y-be.y,Te=Re*Re+ve*ve;Te?(ke=be.r+ge.r,Ee=he.r+ge.r,(ke*=ke)>(Ee*=Ee)?(we=(Te+Ee-ke)/(2*Te),De=Math.sqrt(Math.max(0,Ee/Te-we*we)),ge.x=he.x-we*Re-De*ve,ge.y=he.y-we*ve+De*Re):(we=(Te+ke-Ee)/(2*Te),De=Math.sqrt(Math.max(0,ke/Te-we*we)),ge.x=be.x+we*Re-De*ve,ge.y=be.y+we*ve+De*Re)):(ge.x=be.x+ge.r,ge.y=be.y)}function A(he,be){var ge=he.r+be.r-1e-6,we=be.x-he.x,ke=be.y-he.y;return ge>0&&ge*ge>we*we+ke*ke}function M(he){var be=he._,ge=he.next._,we=be.r+ge.r,ke=(be.x*ge.r+ge.x*be.r)/we,De=(be.y*ge.r+ge.y*be.r)/we;return ke*ke+De*De}function k(he){this._=he,this.next=null,this.previous=null}function E(he){if(!(ke=he.length))return 0;var be,ge,we,ke,De,Ee,Re,ve,Te,Ie,Ce;if((be=he[0]).x=0,be.y=0,!(ke>1))return be.r;if(be.x=-(ge=he[1]).r,ge.x=be.r,ge.y=0,!(ke>2))return be.r+ge.r;v(ge,be,we=he[2]),be=new k(be),ge=new k(ge),we=new k(we),be.next=we.previous=ge,ge.next=be.previous=we,we.next=ge.previous=be;e:for(Re=3;Re<ke;++Re){v(be._,ge._,we=he[Re]),we=new k(we),ve=ge.next,Te=be.previous,Ie=ge._.r,Ce=be._.r;do{if(Ie<=Ce){if(A(ve._,we._)){be.next=ge=ve,ge.previous=be,--Re;continue e}Ie+=ve._.r,ve=ve.next}else{if(A(Te._,we._)){(be=Te).next=ge,ge.previous=be,--Re;continue e}Ce+=Te._.r,Te=Te.previous}}while(ve!==Te.next);for(we.previous=be,we.next=ge,be.next=ge.previous=ge=we,De=M(be);(we=we.next)!==ge;)(Ee=M(we))<De&&(be=we,De=Ee);ge=be.next}for(be=[ge._],we=ge;(we=we.next)!==ge;)be.push(we._);for(we=i(be),Re=0;Re<ke;++Re)(be=he[Re]).x-=we.x,be.y-=we.y;return we.r}function P(he){return null==he?null:S(he)}function S(he){if("function"!=typeof he)throw new Error;return he}function F(){return 0}function R(he){return function(){return he}}function D(he){return Math.sqrt(he.value)}function L(he){return function(be){be.children||(be.r=Math.max(0,+he(be)||0))}}function B(he,be){return function(ge){if(we=ge.children){var we,ke,De,Ee=we.length,Re=he(ge)*be||0;if(Re)for(ke=0;ke<Ee;++ke)we[ke].r+=Re;if(De=E(we),Re)for(ke=0;ke<Ee;++ke)we[ke].r-=Re;ge.r=De+Re}}}function V(he){return function(be){var ge=be.parent;be.r*=he,ge&&(be.x=ge.x+he*be.x,be.y=ge.y+he*be.y)}}function Z(he){he.x0=Math.round(he.x0),he.y0=Math.round(he.y0),he.x1=Math.round(he.x1),he.y1=Math.round(he.y1)}function Y(he,be,ge,we,ke){for(var De,Ee=he.children,Re=-1,ve=Ee.length,Te=he.value&&(we-be)/he.value;++Re<ve;)(De=Ee[Re]).y0=ge,De.y1=ke,De.x0=be,De.x1=be+=De.value*Te}var ee={depth:-1},Q={};function $(he){return he.id}function K(he){return he.parentId}function oe(he,be){return he.parent===be.parent?1:2}function j(he){var be=he.children;return be?be[0]:he.t}function H(he){var be=he.children;return be?be[be.length-1]:he.t}function G(he,be,ge){var we=ge/(be.i-he.i);be.c-=we,be.s+=ge,he.c+=we,be.z+=ge,be.m+=ge}function re(he,be,ge){return he.a.parent===be.parent?he.a:ge}function q(he,be){this._=he,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=be}function te(he,be,ge,we,ke){for(var De,Ee=he.children,Re=-1,ve=Ee.length,Te=he.value&&(ke-ge)/he.value;++Re<ve;)(De=Ee[Re]).x0=be,De.x1=we,De.y0=ge,De.y1=ge+=De.value*Te}q.prototype=Object.create(d.prototype);var ne=(1+Math.sqrt(5))/2;function le(he,be,ge,we,ke,De){for(var Ee,Re,ve,Te,Ie,Ce,Pe,Ve,qe,Je,lt,He=[],$e=be.children,et=0,tt=0,ft=$e.length,bt=be.value;et<ft;){ve=ke-ge,Te=De-we;do{Ie=$e[tt++].value}while(!Ie&&tt<ft);for(Ce=Pe=Ie,lt=Ie*Ie*(Je=Math.max(Te/ve,ve/Te)/(bt*he)),qe=Math.max(Pe/lt,lt/Ce);tt<ft;++tt){if(Ie+=Re=$e[tt].value,Re<Ce&&(Ce=Re),Re>Pe&&(Pe=Re),lt=Ie*Ie*Je,(Ve=Math.max(Pe/lt,lt/Ce))>qe){Ie-=Re;break}qe=Ve}He.push(Ee={value:Ie,dice:ve<Te,children:$e.slice(et,tt)}),Ee.dice?Y(Ee,ge,we,ke,bt?we+=Te*Ie/bt:De):te(Ee,ge,we,bt?ge+=ve*Ie/bt:ke,De),bt-=Ie,et=tt}return He}var ue=function he(be){function ge(we,ke,De,Ee,Re){le(be,we,ke,De,Ee,Re)}return ge.ratio=function(we){return he((we=+we)>1?we:1)},ge}(ne),de=function he(be){function ge(we,ke,De,Ee,Re){if((ve=we._squarify)&&ve.ratio===be)for(var ve,Te,Ie,Ce,Pe,Ve=-1,qe=ve.length,Je=we.value;++Ve<qe;){for(Ie=(Te=ve[Ve]).children,Ce=Te.value=0,Pe=Ie.length;Ce<Pe;++Ce)Te.value+=Ie[Ce].value;Te.dice?Y(Te,ke,De,Ee,De+=(Re-De)*Te.value/Je):te(Te,ke,De,ke+=(Ee-ke)*Te.value/Je,Re),Je-=Te.value}else we._squarify=ve=le(be,we,ke,De,Ee,Re),ve.ratio=be}return ge.ratio=function(we){return he((we=+we)>1?we:1)},ge}(ne);g.cluster=function(){var he=x,be=1,ge=1,we=!1;function ke(De){var Ee,Re=0;De.eachAfter(function(Pe){var qe,Ve=Pe.children;Ve?(Pe.x=(qe=Ve).reduce(T,0)/qe.length,Pe.y=function(qe){return 1+qe.reduce(b,0)}(Ve)):(Pe.x=Ee?Re+=he(Pe,Ee):0,Pe.y=0,Ee=Pe)});var ve=function(Pe){for(var Ve;Ve=Pe.children;)Pe=Ve[0];return Pe}(De),Te=function(Pe){for(var Ve;Ve=Pe.children;)Pe=Ve[Ve.length-1];return Pe}(De),Ie=ve.x-he(ve,Te)/2,Ce=Te.x+he(Te,ve)/2;return De.eachAfter(we?function(Pe){Pe.x=(Pe.x-De.x)*be,Pe.y=(De.y-Pe.y)*ge}:function(Pe){Pe.x=(Pe.x-Ie)/(Ce-Ie)*be,Pe.y=(1-(De.y?Pe.y/De.y:1))*ge})}return ke.separation=function(De){return arguments.length?(he=De,ke):he},ke.size=function(De){return arguments.length?(we=!1,be=+De[0],ge=+De[1],ke):we?null:[be,ge]},ke.nodeSize=function(De){return arguments.length?(we=!0,be=+De[0],ge=+De[1],ke):we?[be,ge]:null},ke},g.hierarchy=r,g.pack=function(){var he=null,be=1,ge=1,we=F;function ke(De){return De.x=be/2,De.y=ge/2,he?De.eachBefore(L(he)).eachAfter(B(we,.5)).eachBefore(V(1)):De.eachBefore(L(D)).eachAfter(B(F,1)).eachAfter(B(we,De.r/Math.min(be,ge))).eachBefore(V(Math.min(be,ge)/(2*De.r))),De}return ke.radius=function(De){return arguments.length?(he=P(De),ke):he},ke.size=function(De){return arguments.length?(be=+De[0],ge=+De[1],ke):[be,ge]},ke.padding=function(De){return arguments.length?(we="function"==typeof De?De:R(+De),ke):we},ke},g.packEnclose=i,g.packSiblings=function(he){return E(he),he},g.partition=function(){var he=1,be=1,ge=0,we=!1;function ke(De){var Re,ve,Ee=De.height+1;return De.x0=De.y0=ge,De.x1=he,De.y1=be/Ee,De.eachBefore((Re=be,ve=Ee,function(Te){Te.children&&Y(Te,Te.x0,Re*(Te.depth+1)/ve,Te.x1,Re*(Te.depth+2)/ve);var Ie=Te.x0,Ce=Te.y0,Pe=Te.x1-ge,Ve=Te.y1-ge;Pe<Ie&&(Ie=Pe=(Ie+Pe)/2),Ve<Ce&&(Ce=Ve=(Ce+Ve)/2),Te.x0=Ie,Te.y0=Ce,Te.x1=Pe,Te.y1=Ve})),we&&De.eachBefore(Z),De}return ke.round=function(De){return arguments.length?(we=!!De,ke):we},ke.size=function(De){return arguments.length?(he=+De[0],be=+De[1],ke):[he,be]},ke.padding=function(De){return arguments.length?(ge=+De,ke):ge},ke},g.stratify=function(){var he=$,be=K;function ge(we){var ke,De,Ee,Re,ve,Te,Ie,Ce=we.length,Pe=new Array(Ce),Ve={};for(De=0;De<Ce;++De)ve=Pe[De]=new d(ke=we[De]),null!=(Te=he(ke,De,we))&&(Te+="")&&(Ve[Ie="$"+(ve.id=Te)]=Ie in Ve?Q:ve);for(De=0;De<Ce;++De)if(ve=Pe[De],null!=(Te=be(we[De],De,we))&&(Te+="")){if(!(Re=Ve["$"+Te]))throw new Error("missing: "+Te);if(Re===Q)throw new Error("ambiguous: "+Te);Re.children?Re.children.push(ve):Re.children=[ve],ve.parent=Re}else{if(Ee)throw new Error("multiple roots");Ee=ve}if(!Ee)throw new Error("no root");if(Ee.parent=ee,Ee.eachBefore(function(qe){qe.depth=qe.parent.depth+1,--Ce}).eachBefore(n),Ee.parent=null,Ce>0)throw new Error("cycle");return Ee}return ge.id=function(we){return arguments.length?(he=S(we),ge):he},ge.parentId=function(we){return arguments.length?(be=S(we),ge):be},ge},g.tree=function(){var he=oe,be=1,ge=1,we=null;function ke(ve){var Te=function(He){for(var $e,et,tt,ft,bt,Ct=new q(He,0),Vt=[Ct];$e=Vt.pop();)if(tt=$e._.children)for($e.children=new Array(bt=tt.length),ft=bt-1;ft>=0;--ft)Vt.push(et=$e.children[ft]=new q(tt[ft],ft)),et.parent=$e;return(Ct.parent=new q(null,0)).children=[Ct],Ct}(ve);if(Te.eachAfter(De),Te.parent.m=-Te.z,Te.eachBefore(Ee),we)ve.eachBefore(Re);else{var Ie=ve,Ce=ve,Pe=ve;ve.eachBefore(function(He){He.x<Ie.x&&(Ie=He),He.x>Ce.x&&(Ce=He),He.depth>Pe.depth&&(Pe=He)});var Ve=Ie===Ce?1:he(Ie,Ce)/2,qe=Ve-Ie.x,Je=be/(Ce.x+Ve+qe),lt=ge/(Pe.depth||1);ve.eachBefore(function(He){He.x=(He.x+qe)*Je,He.y=He.depth*lt})}return ve}function De(ve){var Te=ve.children,Ie=ve.parent.children,Ce=ve.i?Ie[ve.i-1]:null;if(Te){!function(Ve){for(var qe,Je=0,lt=0,He=Ve.children,$e=He.length;--$e>=0;)(qe=He[$e]).z+=Je,qe.m+=Je,Je+=qe.s+(lt+=qe.c)}(ve);var Pe=(Te[0].z+Te[Te.length-1].z)/2;Ce?(ve.z=Ce.z+he(ve._,Ce._),ve.m=ve.z-Pe):ve.z=Pe}else Ce&&(ve.z=Ce.z+he(ve._,Ce._));ve.parent.A=function(Ve,qe,Je){if(qe){for(var lt,He=Ve,$e=Ve,et=qe,tt=He.parent.children[0],ft=He.m,bt=$e.m,Ct=et.m,Vt=tt.m;et=H(et),He=j(He),et&&He;)tt=j(tt),($e=H($e)).a=Ve,(lt=et.z+Ct-He.z-ft+he(et._,He._))>0&&(G(re(et,Ve,Je),Ve,lt),ft+=lt,bt+=lt),Ct+=et.m,ft+=He.m,Vt+=tt.m,bt+=$e.m;et&&!H($e)&&($e.t=et,$e.m+=Ct-bt),He&&!j(tt)&&(tt.t=He,tt.m+=ft-Vt,Je=Ve)}return Je}(ve,Ce,ve.parent.A||Ie[0])}function Ee(ve){ve._.x=ve.z+ve.parent.m,ve.m+=ve.parent.m}function Re(ve){ve.x*=be,ve.y=ve.depth*ge}return ke.separation=function(ve){return arguments.length?(he=ve,ke):he},ke.size=function(ve){return arguments.length?(we=!1,be=+ve[0],ge=+ve[1],ke):we?null:[be,ge]},ke.nodeSize=function(ve){return arguments.length?(we=!0,be=+ve[0],ge=+ve[1],ke):we?[be,ge]:null},ke},g.treemap=function(){var he=ue,be=!1,ge=1,we=1,ke=[0],De=F,Ee=F,Re=F,ve=F,Te=F;function Ie(Pe){return Pe.x0=Pe.y0=0,Pe.x1=ge,Pe.y1=we,Pe.eachBefore(Ce),ke=[0],be&&Pe.eachBefore(Z),Pe}function Ce(Pe){var Ve=ke[Pe.depth],qe=Pe.x0+Ve,Je=Pe.y0+Ve,lt=Pe.x1-Ve,He=Pe.y1-Ve;lt<qe&&(qe=lt=(qe+lt)/2),He<Je&&(Je=He=(Je+He)/2),Pe.x0=qe,Pe.y0=Je,Pe.x1=lt,Pe.y1=He,Pe.children&&(Ve=ke[Pe.depth+1]=De(Pe)/2,qe+=Te(Pe)-Ve,Je+=Ee(Pe)-Ve,(lt-=Re(Pe)-Ve)<qe&&(qe=lt=(qe+lt)/2),(He-=ve(Pe)-Ve)<Je&&(Je=He=(Je+He)/2),he(Pe,qe,Je,lt,He))}return Ie.round=function(Pe){return arguments.length?(be=!!Pe,Ie):be},Ie.size=function(Pe){return arguments.length?(ge=+Pe[0],we=+Pe[1],Ie):[ge,we]},Ie.tile=function(Pe){return arguments.length?(he=S(Pe),Ie):he},Ie.padding=function(Pe){return arguments.length?Ie.paddingInner(Pe).paddingOuter(Pe):Ie.paddingInner()},Ie.paddingInner=function(Pe){return arguments.length?(De="function"==typeof Pe?Pe:R(+Pe),Ie):De},Ie.paddingOuter=function(Pe){return arguments.length?Ie.paddingTop(Pe).paddingRight(Pe).paddingBottom(Pe).paddingLeft(Pe):Ie.paddingTop()},Ie.paddingTop=function(Pe){return arguments.length?(Ee="function"==typeof Pe?Pe:R(+Pe),Ie):Ee},Ie.paddingRight=function(Pe){return arguments.length?(Re="function"==typeof Pe?Pe:R(+Pe),Ie):Re},Ie.paddingBottom=function(Pe){return arguments.length?(ve="function"==typeof Pe?Pe:R(+Pe),Ie):ve},Ie.paddingLeft=function(Pe){return arguments.length?(Te="function"==typeof Pe?Pe:R(+Pe),Ie):Te},Ie},g.treemapBinary=function(he,be,ge,we,ke){var De,Ee,Re=he.children,ve=Re.length,Te=new Array(ve+1);for(Te[0]=Ee=De=0;De<ve;++De)Te[De+1]=Ee+=Re[De].value;!function Ie(Ce,Pe,Ve,qe,Je,lt,He){if(Ce>=Pe-1){var $e=Re[Ce];return $e.x0=qe,$e.y0=Je,$e.x1=lt,void($e.y1=He)}for(var et=Te[Ce],tt=Ve/2+et,ft=Ce+1,bt=Pe-1;ft<bt;){var Ct=ft+bt>>>1;Te[Ct]<tt?ft=Ct+1:bt=Ct}tt-Te[ft-1]<Te[ft]-tt&&Ce+1<ft&&--ft;var Vt=Te[ft]-et,Ft=Ve-Vt;if(lt-qe>He-Je){var ht=(qe*Ft+lt*Vt)/Ve;Ie(Ce,ft,Vt,qe,Je,ht,He),Ie(ft,Pe,Ft,ht,Je,lt,He)}else{var ut=(Je*Ft+He*Vt)/Ve;Ie(Ce,ft,Vt,qe,Je,lt,ut),Ie(ft,Pe,Ft,qe,ut,lt,He)}}(0,ve,he.value,be,ge,we,ke)},g.treemapDice=Y,g.treemapResquarify=de,g.treemapSlice=te,g.treemapSliceDice=function(he,be,ge,we,ke){(1&he.depth?te:Y)(he,be,ge,we,ke)},g.treemapSquarify=ue,Object.defineProperty(g,"__esModule",{value:!0})},x("object"==typeof ie&&void 0!==ae?ie:(g=g||self).d3=g.d3||{})},{}],116:[function(_,ae,ie){var g,x;g=this,x=function(g,x){"use strict";function T(ne,le,ue,de,he){var be=ne*ne,ge=be*ne;return((1-3*ne+3*be-ge)*le+(4-6*be+3*ge)*ue+(1+3*ne+3*be-3*ge)*de+ge*he)/6}function b(ne){var le=ne.length-1;return function(ue){var de=ue<=0?ue=0:ue>=1?(ue=1,le-1):Math.floor(ue*le),he=ne[de],be=ne[de+1];return T((ue-de/le)*le,de>0?ne[de-1]:2*he-be,he,be,de<le-1?ne[de+2]:2*be-he)}}function e(ne){var le=ne.length;return function(ue){var de=Math.floor(((ue%=1)<0?++ue:ue)*le);return T((ue-de/le)*le,ne[(de+le-1)%le],ne[de%le],ne[(de+1)%le],ne[(de+2)%le])}}function r(ne){return function(){return ne}}function t(ne,le){return function(ue){return ne+ue*le}}function a(ne,le){var ue=le-ne;return ue?t(ne,ue>180||ue<-180?ue-360*Math.round(ue/360):ue):r(isNaN(ne)?le:ne)}function d(ne,le){var ue=le-ne;return ue?t(ne,ue):r(isNaN(ne)?le:ne)}var s=function ne(le){var ue=function(ne){return 1==(ne=+ne)?d:function(le,ue){return ue-le?(de=le,he=ue,be=ne,de=Math.pow(de,be),he=Math.pow(he,be)-de,be=1/be,function(ge){return Math.pow(de+ge*he,be)}):r(isNaN(le)?ue:le);var de,he,be}}(le);function de(he,be){var ge=ue((he=x.rgb(he)).r,(be=x.rgb(be)).r),we=ue(he.g,be.g),ke=ue(he.b,be.b),De=d(he.opacity,be.opacity);return function(Ee){return he.r=ge(Ee),he.g=we(Ee),he.b=ke(Ee),he.opacity=De(Ee),he+""}}return de.gamma=ne,de}(1);function i(ne){return function(le){var ue,de,he=le.length,be=new Array(he),ge=new Array(he),we=new Array(he);for(ue=0;ue<he;++ue)de=x.rgb(le[ue]),be[ue]=de.r||0,ge[ue]=de.g||0,we[ue]=de.b||0;return be=ne(be),ge=ne(ge),we=ne(we),de.opacity=1,function(ke){return de.r=be(ke),de.g=ge(ke),de.b=we(ke),de+""}}}var u=i(b),f=i(e);function p(ne,le){le||(le=[]);var ue,de=ne?Math.min(le.length,ne.length):0,he=le.slice();return function(be){for(ue=0;ue<de;++ue)he[ue]=ne[ue]*(1-be)+le[ue]*be;return he}}function y(ne){return ArrayBuffer.isView(ne)&&!(ne instanceof DataView)}function m(ne,le){var ue,de=le?le.length:0,he=ne?Math.min(de,ne.length):0,be=new Array(he),ge=new Array(de);for(ue=0;ue<he;++ue)be[ue]=E(ne[ue],le[ue]);for(;ue<de;++ue)ge[ue]=le[ue];return function(we){for(ue=0;ue<he;++ue)ge[ue]=be[ue](we);return ge}}function l(ne,le){var ue=new Date;return ne=+ne,le=+le,function(de){return ue.setTime(ne*(1-de)+le*de),ue}}function w(ne,le){return ne=+ne,le=+le,function(ue){return ne*(1-ue)+le*ue}}function v(ne,le){var ue,de={},he={};for(ue in null!==ne&&"object"==typeof ne||(ne={}),null!==le&&"object"==typeof le||(le={}),le)ue in ne?de[ue]=E(ne[ue],le[ue]):he[ue]=le[ue];return function(be){for(ue in de)he[ue]=de[ue](be);return he}}var A=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M=new RegExp(A.source,"g");function k(ne,le){var ue,de,he,De,be=A.lastIndex=M.lastIndex=0,ge=-1,we=[],ke=[];for(ne+="",le+="";(ue=A.exec(ne))&&(de=M.exec(le));)(he=de.index)>be&&(he=le.slice(be,he),we[ge]?we[ge]+=he:we[++ge]=he),(ue=ue[0])===(de=de[0])?we[ge]?we[ge]+=de:we[++ge]=de:(we[++ge]=null,ke.push({i:ge,x:w(ue,de)})),be=M.lastIndex;return be<le.length&&(he=le.slice(be),we[ge]?we[ge]+=he:we[++ge]=he),we.length<2?ke[0]?(De=ke[0].x,function(Ee){return De(Ee)+""}):function(De){return function(){return De}}(le):(le=ke.length,function(De){for(var Ee,Re=0;Re<le;++Re)we[(Ee=ke[Re]).i]=Ee.x(De);return we.join("")})}function E(ne,le){var ue,de=typeof le;return null==le||"boolean"===de?r(le):("number"===de?w:"string"===de?(ue=x.color(le))?(le=ue,s):k:le instanceof x.color?s:le instanceof Date?l:y(le)?p:Array.isArray(le)?m:"function"!=typeof le.valueOf&&"function"!=typeof le.toString||isNaN(le)?v:w)(ne,le)}var P,S,F,R,D=180/Math.PI,L={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function B(ne,le,ue,de,he,be){var ge,we,ke;return(ge=Math.sqrt(ne*ne+le*le))&&(ne/=ge,le/=ge),(ke=ne*ue+le*de)&&(ue-=ne*ke,de-=le*ke),(we=Math.sqrt(ue*ue+de*de))&&(ue/=we,de/=we,ke/=we),ne*de<le*ue&&(ne=-ne,le=-le,ke=-ke,ge=-ge),{translateX:he,translateY:be,rotate:Math.atan2(le,ne)*D,skewX:Math.atan(ke)*D,scaleX:ge,scaleY:we}}function V(ne,le,ue,de){function he(be){return be.length?be.pop()+" ":""}return function(be,ge){var De,Ee,Re,we=[],ke=[];return be=ne(be),ge=ne(ge),function(De,Ee,Re,ve,Te,Ie){if(De!==Re||Ee!==ve){var Ce=Te.push("translate(",null,le,null,ue);Ie.push({i:Ce-4,x:w(De,Re)},{i:Ce-2,x:w(Ee,ve)})}else(Re||ve)&&Te.push("translate("+Re+le+ve+ue)}(be.translateX,be.translateY,ge.translateX,ge.translateY,we,ke),Re=we,(De=be.rotate)!==(Ee=ge.rotate)?(De-Ee>180?Ee+=360:Ee-De>180&&(De+=360),ke.push({i:Re.push(he(Re)+"rotate(",null,de)-2,x:w(De,Ee)})):Ee&&Re.push(he(Re)+"rotate("+Ee+de),function(De,Ee,Re,ve){De!==Ee?ve.push({i:Re.push(he(Re)+"skewX(",null,de)-2,x:w(De,Ee)}):Ee&&Re.push(he(Re)+"skewX("+Ee+de)}(be.skewX,ge.skewX,we,ke),function(De,Ee,Re,ve,Te,Ie){if(De!==Re||Ee!==ve){var Ce=Te.push(he(Te)+"scale(",null,",",null,")");Ie.push({i:Ce-4,x:w(De,Re)},{i:Ce-2,x:w(Ee,ve)})}else 1===Re&&1===ve||Te.push(he(Te)+"scale("+Re+","+ve+")")}(be.scaleX,be.scaleY,ge.scaleX,ge.scaleY,we,ke),be=ge=null,function(De){for(var Ee,Re=-1,ve=ke.length;++Re<ve;)we[(Ee=ke[Re]).i]=Ee.x(De);return we.join("")}}}var Z=V(function(ne){return"none"===ne?L:(P||(P=document.createElement("DIV"),S=document.documentElement,F=document.defaultView),P.style.transform=ne,ne=F.getComputedStyle(S.appendChild(P),null).getPropertyValue("transform"),S.removeChild(P),B(+(ne=ne.slice(7,-1).split(","))[0],+ne[1],+ne[2],+ne[3],+ne[4],+ne[5]))},"px, ","px)","deg)"),Y=V(function(ne){return null==ne?L:(R||(R=document.createElementNS("http://www.w3.org/2000/svg","g")),R.setAttribute("transform",ne),(ne=R.transform.baseVal.consolidate())?B((ne=ne.matrix).a,ne.b,ne.c,ne.d,ne.e,ne.f):L)},", ",")",")"),ee=Math.SQRT2;function Q(ne){return((ne=Math.exp(ne))+1/ne)/2}function $(ne){return function(le,ue){var de=ne((le=x.hsl(le)).h,(ue=x.hsl(ue)).h),he=d(le.s,ue.s),be=d(le.l,ue.l),ge=d(le.opacity,ue.opacity);return function(we){return le.h=de(we),le.s=he(we),le.l=be(we),le.opacity=ge(we),le+""}}}var K=$(a),oe=$(d);function j(ne){return function(le,ue){var de=ne((le=x.hcl(le)).h,(ue=x.hcl(ue)).h),he=d(le.c,ue.c),be=d(le.l,ue.l),ge=d(le.opacity,ue.opacity);return function(we){return le.h=de(we),le.c=he(we),le.l=be(we),le.opacity=ge(we),le+""}}}var H=j(a),G=j(d);function re(ne){return function le(ue){function de(he,be){var ge=ne((he=x.cubehelix(he)).h,(be=x.cubehelix(be)).h),we=d(he.s,be.s),ke=d(he.l,be.l),De=d(he.opacity,be.opacity);return function(Ee){return he.h=ge(Ee),he.s=we(Ee),he.l=ke(Math.pow(Ee,ue)),he.opacity=De(Ee),he+""}}return ue=+ue,de.gamma=le,de}(1)}var q=re(a),te=re(d);g.interpolate=E,g.interpolateArray=function(ne,le){return(y(le)?p:m)(ne,le)},g.interpolateBasis=b,g.interpolateBasisClosed=e,g.interpolateCubehelix=q,g.interpolateCubehelixLong=te,g.interpolateDate=l,g.interpolateDiscrete=function(ne){var le=ne.length;return function(ue){return ne[Math.max(0,Math.min(le-1,Math.floor(ue*le)))]}},g.interpolateHcl=H,g.interpolateHclLong=G,g.interpolateHsl=K,g.interpolateHslLong=oe,g.interpolateHue=function(ne,le){var ue=a(+ne,+le);return function(de){var he=ue(de);return he-360*Math.floor(he/360)}},g.interpolateLab=function(ne,le){var ue=d((ne=x.lab(ne)).l,(le=x.lab(le)).l),de=d(ne.a,le.a),he=d(ne.b,le.b),be=d(ne.opacity,le.opacity);return function(ge){return ne.l=ue(ge),ne.a=de(ge),ne.b=he(ge),ne.opacity=be(ge),ne+""}},g.interpolateNumber=w,g.interpolateNumberArray=p,g.interpolateObject=v,g.interpolateRgb=s,g.interpolateRgbBasis=u,g.interpolateRgbBasisClosed=f,g.interpolateRound=function(ne,le){return ne=+ne,le=+le,function(ue){return Math.round(ne*(1-ue)+le*ue)}},g.interpolateString=k,g.interpolateTransformCss=Z,g.interpolateTransformSvg=Y,g.interpolateZoom=function(ne,le){var ue,de,he=ne[0],be=ne[1],ge=ne[2],De=le[2],Ee=le[0]-he,Re=le[1]-be,ve=Ee*Ee+Re*Re;if(ve<1e-12)de=Math.log(De/ge)/ee,ue=function(qe){return[he+qe*Ee,be+qe*Re,ge*Math.exp(ee*qe*de)]};else{var Te=Math.sqrt(ve),Ie=(De*De-ge*ge+4*ve)/(2*ge*2*Te),Ce=(De*De-ge*ge-4*ve)/(2*De*2*Te),Pe=Math.log(Math.sqrt(Ie*Ie+1)-Ie),Ve=Math.log(Math.sqrt(Ce*Ce+1)-Ce);de=(Ve-Pe)/ee,ue=function(qe){var Je,et,lt=qe*de,He=Q(Pe),$e=ge/(2*Te)*(He*(Je=ee*lt+Pe,((Je=Math.exp(2*Je))-1)/(Je+1))-(et=Pe,((et=Math.exp(et))-1/et)/2));return[he+$e*Ee,be+$e*Re,ge*He/Q(ee*lt+Pe)]}}return ue.duration=1e3*de,ue},g.piecewise=function(ne,le){for(var ue=0,de=le.length-1,he=le[0],be=new Array(de<0?0:de);ue<de;)be[ue]=ne(he,he=le[++ue]);return function(ge){var we=Math.max(0,Math.min(de-1,Math.floor(ge*=de)));return be[we](ge-we)}},g.quantize=function(ne,le){for(var ue=new Array(le),de=0;de<le;++de)ue[de]=ne(de/(le-1));return ue},Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?x(ie,_("d3-color")):x((g=g||self).d3=g.d3||{},g.d3)},{"d3-color":109}],117:[function(_,ae,ie){var g,x;g=this,x=function(g){"use strict";var x=Math.PI,T=2*x,b=T-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function r(){return new e}e.prototype=r.prototype={constructor:e,moveTo:function(t,a){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+a)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,a){this._+="L"+(this._x1=+t)+","+(this._y1=+a)},quadraticCurveTo:function(t,a,n,d){this._+="Q"+ +t+","+ +a+","+(this._x1=+n)+","+(this._y1=+d)},bezierCurveTo:function(t,a,n,d,s,i){this._+="C"+ +t+","+ +a+","+ +n+","+ +d+","+(this._x1=+s)+","+(this._y1=+i)},arcTo:function(t,a,n,d,s){var i=this._x1,u=this._y1,f=(n=+n)-(t=+t),p=(d=+d)-(a=+a),y=i-t,m=u-a,l=y*y+m*m;if((s=+s)<0)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=a);else if(l>1e-6)if(Math.abs(m*f-p*y)>1e-6&&s){var w=n-i,v=d-u,A=f*f+p*p,M=w*w+v*v,k=Math.sqrt(A),E=Math.sqrt(l),P=s*Math.tan((x-Math.acos((A+l-M)/(2*k*E)))/2),S=P/E,F=P/k;Math.abs(S-1)>1e-6&&(this._+="L"+(t+S*y)+","+(a+S*m)),this._+="A"+s+","+s+",0,0,"+ +(m*w>y*v)+","+(this._x1=t+F*f)+","+(this._y1=a+F*p)}else this._+="L"+(this._x1=t)+","+(this._y1=a)},arc:function(t,a,n,d,s,i){t=+t,a=+a,i=!!i;var u=(n=+n)*Math.cos(d),f=n*Math.sin(d),p=t+u,y=a+f,m=1^i,l=i?d-s:s-d;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+p+","+y:(Math.abs(this._x1-p)>1e-6||Math.abs(this._y1-y)>1e-6)&&(this._+="L"+p+","+y),n&&(l<0&&(l=l%T+T),l>b?this._+="A"+n+","+n+",0,1,"+m+","+(t-u)+","+(a-f)+"A"+n+","+n+",0,1,"+m+","+(this._x1=p)+","+(this._y1=y):l>1e-6&&(this._+="A"+n+","+n+",0,"+ +(l>=x)+","+m+","+(this._x1=t+n*Math.cos(s))+","+(this._y1=a+n*Math.sin(s))))},rect:function(t,a,n,d){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+a)+"h"+ +n+"v"+ +d+"h"+-n+"Z"},toString:function(){return this._}},g.path=r,Object.defineProperty(g,"__esModule",{value:!0})},x("object"==typeof ie&&void 0!==ae?ie:(g=g||self).d3=g.d3||{})},{}],118:[function(_,ae,ie){var g,x;g=this,x=function(g){"use strict";function x(d,s,i,u){if(isNaN(s)||isNaN(i))return d;var f,p,y,m,l,w,v,A,M,k=d._root,E={data:u},P=d._x0,S=d._y0,F=d._x1,R=d._y1;if(!k)return d._root=E,d;for(;k.length;)if((w=s>=(p=(P+F)/2))?P=p:F=p,(v=i>=(y=(S+R)/2))?S=y:R=y,f=k,!(k=k[A=v<<1|w]))return f[A]=E,d;if(m=+d._x.call(null,k.data),l=+d._y.call(null,k.data),s===m&&i===l)return E.next=k,f?f[A]=E:d._root=E,d;do{f=f?f[A]=new Array(4):d._root=new Array(4),(w=s>=(p=(P+F)/2))?P=p:F=p,(v=i>=(y=(S+R)/2))?S=y:R=y}while((A=v<<1|w)==(M=(l>=y)<<1|m>=p));return f[M]=k,f[A]=E,d}function T(d,s,i,u,f){this.node=d,this.x0=s,this.y0=i,this.x1=u,this.y1=f}function b(d){return d[0]}function e(d){return d[1]}function r(d,s,i){var u=new t(null==s?b:s,null==i?e:i,NaN,NaN,NaN,NaN);return null==d?u:u.addAll(d)}function t(d,s,i,u,f,p){this._x=d,this._y=s,this._x0=i,this._y0=u,this._x1=f,this._y1=p,this._root=void 0}function a(d){for(var s={data:d.data},i=s;d=d.next;)i=i.next={data:d.data};return s}var n=r.prototype=t.prototype;n.copy=function(){var d,s,i=new t(this._x,this._y,this._x0,this._y0,this._x1,this._y1),u=this._root;if(!u)return i;if(!u.length)return i._root=a(u),i;for(d=[{source:u,target:i._root=new Array(4)}];u=d.pop();)for(var f=0;f<4;++f)(s=u.source[f])&&(s.length?d.push({source:s,target:u.target[f]=new Array(4)}):u.target[f]=a(s));return i},n.add=function(d){var s=+this._x.call(null,d),i=+this._y.call(null,d);return x(this.cover(s,i),s,i,d)},n.addAll=function(d){var s,i,u,f,p=d.length,y=new Array(p),m=new Array(p),l=1/0,w=1/0,v=-1/0,A=-1/0;for(i=0;i<p;++i)isNaN(u=+this._x.call(null,s=d[i]))||isNaN(f=+this._y.call(null,s))||(y[i]=u,m[i]=f,u<l&&(l=u),u>v&&(v=u),f<w&&(w=f),f>A&&(A=f));if(l>v||w>A)return this;for(this.cover(l,w).cover(v,A),i=0;i<p;++i)x(this,y[i],m[i],d[i]);return this},n.cover=function(d,s){if(isNaN(d=+d)||isNaN(s=+s))return this;var i=this._x0,u=this._y0,f=this._x1,p=this._y1;if(isNaN(i))f=(i=Math.floor(d))+1,p=(u=Math.floor(s))+1;else{for(var y,m,l=f-i,w=this._root;i>d||d>=f||u>s||s>=p;)switch(m=(s<u)<<1|d<i,(y=new Array(4))[m]=w,w=y,l*=2,m){case 0:f=i+l,p=u+l;break;case 1:i=f-l,p=u+l;break;case 2:f=i+l,u=p-l;break;case 3:i=f-l,u=p-l}this._root&&this._root.length&&(this._root=w)}return this._x0=i,this._y0=u,this._x1=f,this._y1=p,this},n.data=function(){var d=[];return this.visit(function(s){if(!s.length)do{d.push(s.data)}while(s=s.next)}),d},n.extent=function(d){return arguments.length?this.cover(+d[0][0],+d[0][1]).cover(+d[1][0],+d[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(d,s,i){var u,f,p,y,m,l,w,v=this._x0,A=this._y0,M=this._x1,k=this._y1,E=[],P=this._root;for(P&&E.push(new T(P,v,A,M,k)),null==i?i=1/0:(v=d-i,A=s-i,M=d+i,k=s+i,i*=i);l=E.pop();)if(!(!(P=l.node)||(f=l.x0)>M||(p=l.y0)>k||(y=l.x1)<v||(m=l.y1)<A))if(P.length){var S=(f+y)/2,F=(p+m)/2;E.push(new T(P[3],S,F,y,m),new T(P[2],f,F,S,m),new T(P[1],S,p,y,F),new T(P[0],f,p,S,F)),(w=(s>=F)<<1|d>=S)&&(l=E[E.length-1],E[E.length-1]=E[E.length-1-w],E[E.length-1-w]=l)}else{var R=d-+this._x.call(null,P.data),D=s-+this._y.call(null,P.data),L=R*R+D*D;if(L<i){var B=Math.sqrt(i=L);v=d-B,A=s-B,M=d+B,k=s+B,u=P.data}}return u},n.remove=function(d){if(isNaN(p=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;var s,i,u,f,p,y,m,l,w,v,A,M,k=this._root,E=this._x0,P=this._y0,S=this._x1,F=this._y1;if(!k)return this;if(k.length)for(;;){if((w=p>=(m=(E+S)/2))?E=m:S=m,(v=y>=(l=(P+F)/2))?P=l:F=l,s=k,!(k=k[A=v<<1|w]))return this;if(!k.length)break;(s[A+1&3]||s[A+2&3]||s[A+3&3])&&(i=s,M=A)}for(;k.data!==d;)if(u=k,!(k=k.next))return this;return(f=k.next)&&delete k.next,u?(f?u.next=f:delete u.next,this):s?(f?s[A]=f:delete s[A],(k=s[0]||s[1]||s[2]||s[3])&&k===(s[3]||s[2]||s[1]||s[0])&&!k.length&&(i?i[M]=k:this._root=k),this):(this._root=f,this)},n.removeAll=function(d){for(var s=0,i=d.length;s<i;++s)this.remove(d[s]);return this},n.root=function(){return this._root},n.size=function(){var d=0;return this.visit(function(s){if(!s.length)do{++d}while(s=s.next)}),d},n.visit=function(d){var s,i,u,f,p,y,m=[],l=this._root;for(l&&m.push(new T(l,this._x0,this._y0,this._x1,this._y1));s=m.pop();)if(!d(l=s.node,u=s.x0,f=s.y0,p=s.x1,y=s.y1)&&l.length){var w=(u+p)/2,v=(f+y)/2;(i=l[3])&&m.push(new T(i,w,v,p,y)),(i=l[2])&&m.push(new T(i,u,v,w,y)),(i=l[1])&&m.push(new T(i,w,f,p,v)),(i=l[0])&&m.push(new T(i,u,f,w,v))}return this},n.visitAfter=function(d){var s,i=[],u=[];for(this._root&&i.push(new T(this._root,this._x0,this._y0,this._x1,this._y1));s=i.pop();){var f=s.node;if(f.length){var p,y=s.x0,m=s.y0,l=s.x1,w=s.y1,v=(y+l)/2,A=(m+w)/2;(p=f[0])&&i.push(new T(p,y,m,v,A)),(p=f[1])&&i.push(new T(p,v,m,l,A)),(p=f[2])&&i.push(new T(p,y,A,v,w)),(p=f[3])&&i.push(new T(p,v,A,l,w))}u.push(s)}for(;s=u.pop();)d(s.node,s.x0,s.y0,s.x1,s.y1);return this},n.x=function(d){return arguments.length?(this._x=d,this):this._x},n.y=function(d){return arguments.length?(this._y=d,this):this._y},g.quadtree=r,Object.defineProperty(g,"__esModule",{value:!0})},x("object"==typeof ie&&void 0!==ae?ie:(g=g||self).d3=g.d3||{})},{}],119:[function(_,ae,ie){var g,x;g=this,x=function(g,x){"use strict";function T(Ue){return function(){return Ue}}var b=Math.abs,e=Math.atan2,r=Math.cos,t=Math.max,a=Math.min,n=Math.sin,d=Math.sqrt,s=Math.PI,i=s/2,u=2*s;function f(Ue){return Ue>1?0:Ue<-1?s:Math.acos(Ue)}function p(Ue){return Ue>=1?i:Ue<=-1?-i:Math.asin(Ue)}function y(Ue){return Ue.innerRadius}function m(Ue){return Ue.outerRadius}function l(Ue){return Ue.startAngle}function w(Ue){return Ue.endAngle}function v(Ue){return Ue&&Ue.padAngle}function A(Ue,yt,Dt,Ht,Jt,gn,Qt,sn){var hn=Dt-Ue,Dn=Ht-yt,_n=Qt-Jt,Tn=sn-gn,wn=Tn*hn-_n*Dn;if(!(wn*wn<1e-12))return[Ue+(wn=(_n*(yt-gn)-Tn*(Ue-Jt))/wn)*hn,yt+wn*Dn]}function M(Ue,yt,Dt,Ht,Jt,gn,Qt){var sn=Ue-Dt,hn=yt-Ht,Dn=(Qt?gn:-gn)/d(sn*sn+hn*hn),_n=Dn*hn,Tn=-Dn*sn,wn=Ue+_n,kn=yt+Tn,Fn=Dt+_n,On=Ht+Tn,Qn=(wn+Fn)/2,sr=(kn+On)/2,Mr=Fn-wn,Wr=On-kn,mr=Mr*Mr+Wr*Wr,Or=Jt-gn,vr=wn*On-Fn*kn,Xn=(Wr<0?-1:1)*d(t(0,Or*Or*mr-vr*vr)),jn=(vr*Wr-Mr*Xn)/mr,nr=(-vr*Mr-Wr*Xn)/mr,Ur=(vr*Wr+Mr*Xn)/mr,Jn=(-vr*Mr+Wr*Xn)/mr,_r=jn-Qn,Hr=nr-sr,Lr=Ur-Qn,$r=Jn-sr;return _r*_r+Hr*Hr>Lr*Lr+$r*$r&&(jn=Ur,nr=Jn),{cx:jn,cy:nr,x01:-_n,y01:-Tn,x11:jn*(Jt/Or-1),y11:nr*(Jt/Or-1)}}function k(Ue){this._context=Ue}function E(Ue){return new k(Ue)}function P(Ue){return Ue[0]}function S(Ue){return Ue[1]}function F(){var Ue=P,yt=S,Dt=T(!0),Ht=null,Jt=E,gn=null;function Qt(sn){var hn,Dn,_n,Tn=sn.length,wn=!1;for(null==Ht&&(gn=Jt(_n=x.path())),hn=0;hn<=Tn;++hn)!(hn<Tn&&Dt(Dn=sn[hn],hn,sn))===wn&&((wn=!wn)?gn.lineStart():gn.lineEnd()),wn&&gn.point(+Ue(Dn,hn,sn),+yt(Dn,hn,sn));if(_n)return gn=null,_n+""||null}return Qt.x=function(sn){return arguments.length?(Ue="function"==typeof sn?sn:T(+sn),Qt):Ue},Qt.y=function(sn){return arguments.length?(yt="function"==typeof sn?sn:T(+sn),Qt):yt},Qt.defined=function(sn){return arguments.length?(Dt="function"==typeof sn?sn:T(!!sn),Qt):Dt},Qt.curve=function(sn){return arguments.length?(Jt=sn,null!=Ht&&(gn=Jt(Ht)),Qt):Jt},Qt.context=function(sn){return arguments.length?(null==sn?Ht=gn=null:gn=Jt(Ht=sn),Qt):Ht},Qt}function R(){var Ue=P,yt=null,Dt=T(0),Ht=S,Jt=T(!0),gn=null,Qt=E,sn=null;function hn(_n){var Tn,wn,kn,Fn,On,Qn=_n.length,sr=!1,Mr=new Array(Qn),Wr=new Array(Qn);for(null==gn&&(sn=Qt(On=x.path())),Tn=0;Tn<=Qn;++Tn){if(!(Tn<Qn&&Jt(Fn=_n[Tn],Tn,_n))===sr)if(sr=!sr)wn=Tn,sn.areaStart(),sn.lineStart();else{for(sn.lineEnd(),sn.lineStart(),kn=Tn-1;kn>=wn;--kn)sn.point(Mr[kn],Wr[kn]);sn.lineEnd(),sn.areaEnd()}sr&&(Mr[Tn]=+Ue(Fn,Tn,_n),Wr[Tn]=+Dt(Fn,Tn,_n),sn.point(yt?+yt(Fn,Tn,_n):Mr[Tn],Ht?+Ht(Fn,Tn,_n):Wr[Tn]))}if(On)return sn=null,On+""||null}function Dn(){return F().defined(Jt).curve(Qt).context(gn)}return hn.x=function(_n){return arguments.length?(Ue="function"==typeof _n?_n:T(+_n),yt=null,hn):Ue},hn.x0=function(_n){return arguments.length?(Ue="function"==typeof _n?_n:T(+_n),hn):Ue},hn.x1=function(_n){return arguments.length?(yt=null==_n?null:"function"==typeof _n?_n:T(+_n),hn):yt},hn.y=function(_n){return arguments.length?(Dt="function"==typeof _n?_n:T(+_n),Ht=null,hn):Dt},hn.y0=function(_n){return arguments.length?(Dt="function"==typeof _n?_n:T(+_n),hn):Dt},hn.y1=function(_n){return arguments.length?(Ht=null==_n?null:"function"==typeof _n?_n:T(+_n),hn):Ht},hn.lineX0=hn.lineY0=function(){return Dn().x(Ue).y(Dt)},hn.lineY1=function(){return Dn().x(Ue).y(Ht)},hn.lineX1=function(){return Dn().x(yt).y(Dt)},hn.defined=function(_n){return arguments.length?(Jt="function"==typeof _n?_n:T(!!_n),hn):Jt},hn.curve=function(_n){return arguments.length?(Qt=_n,null!=gn&&(sn=Qt(gn)),hn):Qt},hn.context=function(_n){return arguments.length?(null==_n?gn=sn=null:sn=Qt(gn=_n),hn):gn},hn}function D(Ue,yt){return yt<Ue?-1:yt>Ue?1:yt>=Ue?0:NaN}function L(Ue){return Ue}k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,yt){switch(Ue=+Ue,yt=+yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,yt):this._context.moveTo(Ue,yt);break;case 1:this._point=2;default:this._context.lineTo(Ue,yt)}}};var B=Z(E);function V(Ue){this._curve=Ue}function Z(Ue){function yt(Dt){return new V(Ue(Dt))}return yt._curve=Ue,yt}function Y(Ue){var yt=Ue.curve;return Ue.angle=Ue.x,delete Ue.x,Ue.radius=Ue.y,delete Ue.y,Ue.curve=function(Dt){return arguments.length?yt(Z(Dt)):yt()._curve},Ue}function ee(){return Y(F().curve(B))}function Q(){var Ue=R().curve(B),yt=Ue.curve,Dt=Ue.lineX0,Ht=Ue.lineX1,Jt=Ue.lineY0,gn=Ue.lineY1;return Ue.angle=Ue.x,delete Ue.x,Ue.startAngle=Ue.x0,delete Ue.x0,Ue.endAngle=Ue.x1,delete Ue.x1,Ue.radius=Ue.y,delete Ue.y,Ue.innerRadius=Ue.y0,delete Ue.y0,Ue.outerRadius=Ue.y1,delete Ue.y1,Ue.lineStartAngle=function(){return Y(Dt())},delete Ue.lineX0,Ue.lineEndAngle=function(){return Y(Ht())},delete Ue.lineX1,Ue.lineInnerRadius=function(){return Y(Jt())},delete Ue.lineY0,Ue.lineOuterRadius=function(){return Y(gn())},delete Ue.lineY1,Ue.curve=function(Qt){return arguments.length?yt(Z(Qt)):yt()._curve},Ue}function $(Ue,yt){return[(yt=+yt)*Math.cos(Ue-=Math.PI/2),yt*Math.sin(Ue)]}V.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Ue,yt){this._curve.point(yt*Math.sin(Ue),yt*-Math.cos(Ue))}};var K=Array.prototype.slice;function oe(Ue){return Ue.source}function j(Ue){return Ue.target}function H(Ue){var yt=oe,Dt=j,Ht=P,Jt=S,gn=null;function Qt(){var sn,hn=K.call(arguments),Dn=yt.apply(this,hn),_n=Dt.apply(this,hn);if(gn||(gn=sn=x.path()),Ue(gn,+Ht.apply(this,(hn[0]=Dn,hn)),+Jt.apply(this,hn),+Ht.apply(this,(hn[0]=_n,hn)),+Jt.apply(this,hn)),sn)return gn=null,sn+""||null}return Qt.source=function(sn){return arguments.length?(yt=sn,Qt):yt},Qt.target=function(sn){return arguments.length?(Dt=sn,Qt):Dt},Qt.x=function(sn){return arguments.length?(Ht="function"==typeof sn?sn:T(+sn),Qt):Ht},Qt.y=function(sn){return arguments.length?(Jt="function"==typeof sn?sn:T(+sn),Qt):Jt},Qt.context=function(sn){return arguments.length?(gn=null==sn?null:sn,Qt):gn},Qt}function G(Ue,yt,Dt,Ht,Jt){Ue.moveTo(yt,Dt),Ue.bezierCurveTo(yt=(yt+Ht)/2,Dt,yt,Jt,Ht,Jt)}function re(Ue,yt,Dt,Ht,Jt){Ue.moveTo(yt,Dt),Ue.bezierCurveTo(yt,Dt=(Dt+Jt)/2,Ht,Dt,Ht,Jt)}function q(Ue,yt,Dt,Ht,Jt){var gn=$(yt,Dt),Qt=$(yt,Dt=(Dt+Jt)/2),sn=$(Ht,Dt),hn=$(Ht,Jt);Ue.moveTo(gn[0],gn[1]),Ue.bezierCurveTo(Qt[0],Qt[1],sn[0],sn[1],hn[0],hn[1])}var te={draw:function(Ue,yt){var Dt=Math.sqrt(yt/s);Ue.moveTo(Dt,0),Ue.arc(0,0,Dt,0,u)}},ne={draw:function(Ue,yt){var Dt=Math.sqrt(yt/5)/2;Ue.moveTo(-3*Dt,-Dt),Ue.lineTo(-Dt,-Dt),Ue.lineTo(-Dt,-3*Dt),Ue.lineTo(Dt,-3*Dt),Ue.lineTo(Dt,-Dt),Ue.lineTo(3*Dt,-Dt),Ue.lineTo(3*Dt,Dt),Ue.lineTo(Dt,Dt),Ue.lineTo(Dt,3*Dt),Ue.lineTo(-Dt,3*Dt),Ue.lineTo(-Dt,Dt),Ue.lineTo(-3*Dt,Dt),Ue.closePath()}},le=Math.sqrt(1/3),ue=2*le,de={draw:function(Ue,yt){var Dt=Math.sqrt(yt/ue),Ht=Dt*le;Ue.moveTo(0,-Dt),Ue.lineTo(Ht,0),Ue.lineTo(0,Dt),Ue.lineTo(-Ht,0),Ue.closePath()}},he=Math.sin(s/10)/Math.sin(7*s/10),be=Math.sin(u/10)*he,ge=-Math.cos(u/10)*he,we={draw:function(Ue,yt){var Dt=Math.sqrt(.8908130915292852*yt),Ht=be*Dt,Jt=ge*Dt;Ue.moveTo(0,-Dt),Ue.lineTo(Ht,Jt);for(var gn=1;gn<5;++gn){var Qt=u*gn/5,sn=Math.cos(Qt),hn=Math.sin(Qt);Ue.lineTo(hn*Dt,-sn*Dt),Ue.lineTo(sn*Ht-hn*Jt,hn*Ht+sn*Jt)}Ue.closePath()}},ke={draw:function(Ue,yt){var Dt=Math.sqrt(yt),Ht=-Dt/2;Ue.rect(Ht,Ht,Dt,Dt)}},De=Math.sqrt(3),Ee={draw:function(Ue,yt){var Dt=-Math.sqrt(yt/(3*De));Ue.moveTo(0,2*Dt),Ue.lineTo(-De*Dt,-Dt),Ue.lineTo(De*Dt,-Dt),Ue.closePath()}},Re=-.5,ve=Math.sqrt(3)/2,Te=1/Math.sqrt(12),Ie=3*(Te/2+1),Ce={draw:function(Ue,yt){var Dt=Math.sqrt(yt/Ie),Ht=Dt/2,Jt=Dt*Te,gn=Ht,Qt=Dt*Te+Dt,sn=-gn,hn=Qt;Ue.moveTo(Ht,Jt),Ue.lineTo(gn,Qt),Ue.lineTo(sn,hn),Ue.lineTo(Re*Ht-ve*Jt,ve*Ht+Re*Jt),Ue.lineTo(Re*gn-ve*Qt,ve*gn+Re*Qt),Ue.lineTo(Re*sn-ve*hn,ve*sn+Re*hn),Ue.lineTo(Re*Ht+ve*Jt,Re*Jt-ve*Ht),Ue.lineTo(Re*gn+ve*Qt,Re*Qt-ve*gn),Ue.lineTo(Re*sn+ve*hn,Re*hn-ve*sn),Ue.closePath()}},Pe=[te,ne,de,ke,we,Ee,Ce];function Ve(){}function qe(Ue,yt,Dt){Ue._context.bezierCurveTo((2*Ue._x0+Ue._x1)/3,(2*Ue._y0+Ue._y1)/3,(Ue._x0+2*Ue._x1)/3,(Ue._y0+2*Ue._y1)/3,(Ue._x0+4*Ue._x1+yt)/6,(Ue._y0+4*Ue._y1+Dt)/6)}function Je(Ue){this._context=Ue}function lt(Ue){this._context=Ue}function He(Ue){this._context=Ue}function $e(Ue,yt){this._basis=new Je(Ue),this._beta=yt}Je.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,yt){switch(Ue=+Ue,yt=+yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,yt):this._context.moveTo(Ue,yt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qe(this,Ue,yt)}this._x0=this._x1,this._x1=Ue,this._y0=this._y1,this._y1=yt}},lt.prototype={areaStart:Ve,areaEnd:Ve,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Ue,yt){switch(Ue=+Ue,yt=+yt,this._point){case 0:this._point=1,this._x2=Ue,this._y2=yt;break;case 1:this._point=2,this._x3=Ue,this._y3=yt;break;case 2:this._point=3,this._x4=Ue,this._y4=yt,this._context.moveTo((this._x0+4*this._x1+Ue)/6,(this._y0+4*this._y1+yt)/6);break;default:qe(this,Ue,yt)}this._x0=this._x1,this._x1=Ue,this._y0=this._y1,this._y1=yt}},He.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,yt){switch(Ue=+Ue,yt=+yt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Dt=(this._x0+4*this._x1+Ue)/6,Ht=(this._y0+4*this._y1+yt)/6;this._line?this._context.lineTo(Dt,Ht):this._context.moveTo(Dt,Ht);break;case 3:this._point=4;default:qe(this,Ue,yt)}this._x0=this._x1,this._x1=Ue,this._y0=this._y1,this._y1=yt}},$e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Ue=this._x,yt=this._y,Dt=Ue.length-1;if(Dt>0)for(var Ht,Jt=Ue[0],gn=yt[0],Qt=Ue[Dt]-Jt,sn=yt[Dt]-gn,hn=-1;++hn<=Dt;)this._basis.point(this._beta*Ue[hn]+(1-this._beta)*(Jt+(Ht=hn/Dt)*Qt),this._beta*yt[hn]+(1-this._beta)*(gn+Ht*sn));this._x=this._y=null,this._basis.lineEnd()},point:function(Ue,yt){this._x.push(+Ue),this._y.push(+yt)}};var et=function Ue(yt){function Dt(Ht){return 1===yt?new Je(Ht):new $e(Ht,yt)}return Dt.beta=function(Ht){return Ue(+Ht)},Dt}(.85);function tt(Ue,yt,Dt){Ue._context.bezierCurveTo(Ue._x1+Ue._k*(Ue._x2-Ue._x0),Ue._y1+Ue._k*(Ue._y2-Ue._y0),Ue._x2+Ue._k*(Ue._x1-yt),Ue._y2+Ue._k*(Ue._y1-Dt),Ue._x2,Ue._y2)}function ft(Ue,yt){this._context=Ue,this._k=(1-yt)/6}ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:tt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,yt){switch(Ue=+Ue,yt=+yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,yt):this._context.moveTo(Ue,yt);break;case 1:this._point=2,this._x1=Ue,this._y1=yt;break;case 2:this._point=3;default:tt(this,Ue,yt)}this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=yt}};var bt=function Ue(yt){function Dt(Ht){return new ft(Ht,yt)}return Dt.tension=function(Ht){return Ue(+Ht)},Dt}(0);function Ct(Ue,yt){this._context=Ue,this._k=(1-yt)/6}Ct.prototype={areaStart:Ve,areaEnd:Ve,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Ue,yt){switch(Ue=+Ue,yt=+yt,this._point){case 0:this._point=1,this._x3=Ue,this._y3=yt;break;case 1:this._point=2,this._context.moveTo(this._x4=Ue,this._y4=yt);break;case 2:this._point=3,this._x5=Ue,this._y5=yt;break;default:tt(this,Ue,yt)}this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=yt}};var Vt=function Ue(yt){function Dt(Ht){return new Ct(Ht,yt)}return Dt.tension=function(Ht){return Ue(+Ht)},Dt}(0);function Ft(Ue,yt){this._context=Ue,this._k=(1-yt)/6}Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,yt){switch(Ue=+Ue,yt=+yt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tt(this,Ue,yt)}this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=yt}};var ht=function Ue(yt){function Dt(Ht){return new Ft(Ht,yt)}return Dt.tension=function(Ht){return Ue(+Ht)},Dt}(0);function ut(Ue,yt,Dt){var Ht=Ue._x1,Jt=Ue._y1,gn=Ue._x2,Qt=Ue._y2;if(Ue._l01_a>1e-12){var sn=2*Ue._l01_2a+3*Ue._l01_a*Ue._l12_a+Ue._l12_2a,hn=3*Ue._l01_a*(Ue._l01_a+Ue._l12_a);Ht=(Ht*sn-Ue._x0*Ue._l12_2a+Ue._x2*Ue._l01_2a)/hn,Jt=(Jt*sn-Ue._y0*Ue._l12_2a+Ue._y2*Ue._l01_2a)/hn}if(Ue._l23_a>1e-12){var Dn=2*Ue._l23_2a+3*Ue._l23_a*Ue._l12_a+Ue._l12_2a,_n=3*Ue._l23_a*(Ue._l23_a+Ue._l12_a);gn=(gn*Dn+Ue._x1*Ue._l23_2a-yt*Ue._l12_2a)/_n,Qt=(Qt*Dn+Ue._y1*Ue._l23_2a-Dt*Ue._l12_2a)/_n}Ue._context.bezierCurveTo(Ht,Jt,gn,Qt,Ue._x2,Ue._y2)}function Rt(Ue,yt){this._context=Ue,this._alpha=yt}Rt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,yt){if(Ue=+Ue,yt=+yt,this._point){var Dt=this._x2-Ue,Ht=this._y2-yt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Dt*Dt+Ht*Ht,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,yt):this._context.moveTo(Ue,yt);break;case 1:this._point=2;break;case 2:this._point=3;default:ut(this,Ue,yt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=yt}};var nn=function Ue(yt){function Dt(Ht){return yt?new Rt(Ht,yt):new ft(Ht,0)}return Dt.alpha=function(Ht){return Ue(+Ht)},Dt}(.5);function cn(Ue,yt){this._context=Ue,this._alpha=yt}cn.prototype={areaStart:Ve,areaEnd:Ve,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Ue,yt){if(Ue=+Ue,yt=+yt,this._point){var Dt=this._x2-Ue,Ht=this._y2-yt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Dt*Dt+Ht*Ht,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Ue,this._y3=yt;break;case 1:this._point=2,this._context.moveTo(this._x4=Ue,this._y4=yt);break;case 2:this._point=3,this._x5=Ue,this._y5=yt;break;default:ut(this,Ue,yt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=yt}};var Ze=function Ue(yt){function Dt(Ht){return yt?new cn(Ht,yt):new Ct(Ht,0)}return Dt.alpha=function(Ht){return Ue(+Ht)},Dt}(.5);function Qe(Ue,yt){this._context=Ue,this._alpha=yt}Qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,yt){if(Ue=+Ue,yt=+yt,this._point){var Dt=this._x2-Ue,Ht=this._y2-yt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Dt*Dt+Ht*Ht,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ut(this,Ue,yt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=yt}};var Ge=function Ue(yt){function Dt(Ht){return yt?new Qe(Ht,yt):new Ft(Ht,0)}return Dt.alpha=function(Ht){return Ue(+Ht)},Dt}(.5);function rt(Ue){this._context=Ue}function Le(Ue){return Ue<0?-1:1}function ze(Ue,yt,Dt){var Ht=Ue._x1-Ue._x0,Jt=yt-Ue._x1,gn=(Ue._y1-Ue._y0)/(Ht||Jt<0&&-0),Qt=(Dt-Ue._y1)/(Jt||Ht<0&&-0),sn=(gn*Jt+Qt*Ht)/(Ht+Jt);return(Le(gn)+Le(Qt))*Math.min(Math.abs(gn),Math.abs(Qt),.5*Math.abs(sn))||0}function je(Ue,yt){var Dt=Ue._x1-Ue._x0;return Dt?(3*(Ue._y1-Ue._y0)/Dt-yt)/2:yt}function Ne(Ue,yt,Dt){var Ht=Ue._x0,gn=Ue._x1,Qt=Ue._y1,sn=(gn-Ht)/3;Ue._context.bezierCurveTo(Ht+sn,Ue._y0+sn*yt,gn-sn,Qt-sn*Dt,gn,Qt)}function st(Ue){this._context=Ue}function mt(Ue){this._context=new Tt(Ue)}function Tt(Ue){this._context=Ue}function xt(Ue){this._context=Ue}function zt(Ue){var yt,Dt,Ht=Ue.length-1,Jt=new Array(Ht),gn=new Array(Ht),Qt=new Array(Ht);for(Jt[0]=0,gn[0]=2,Qt[0]=Ue[0]+2*Ue[1],yt=1;yt<Ht-1;++yt)Jt[yt]=1,gn[yt]=4,Qt[yt]=4*Ue[yt]+2*Ue[yt+1];for(Jt[Ht-1]=2,gn[Ht-1]=7,Qt[Ht-1]=8*Ue[Ht-1]+Ue[Ht],yt=1;yt<Ht;++yt)gn[yt]-=Dt=Jt[yt]/gn[yt-1],Qt[yt]-=Dt*Qt[yt-1];for(Jt[Ht-1]=Qt[Ht-1]/gn[Ht-1],yt=Ht-2;yt>=0;--yt)Jt[yt]=(Qt[yt]-Jt[yt+1])/gn[yt];for(gn[Ht-1]=(Ue[Ht]+Jt[Ht-1])/2,yt=0;yt<Ht-1;++yt)gn[yt]=2*Ue[yt+1]-Jt[yt+1];return[Jt,gn]}function gt(Ue,yt){this._context=Ue,this._t=yt}function Bt(Ue,yt){if((Jt=Ue.length)>1)for(var Dt,Ht,Jt,gn=1,Qt=Ue[yt[0]],sn=Qt.length;gn<Jt;++gn)for(Ht=Qt,Qt=Ue[yt[gn]],Dt=0;Dt<sn;++Dt)Qt[Dt][1]+=Qt[Dt][0]=isNaN(Ht[Dt][1])?Ht[Dt][0]:Ht[Dt][1]}function jt(Ue){for(var yt=Ue.length,Dt=new Array(yt);--yt>=0;)Dt[yt]=yt;return Dt}function it(Ue,yt){return Ue[yt]}function Mt(Ue){var yt=Ue.map(qt);return jt(Ue).sort(function(Dt,Ht){return yt[Dt]-yt[Ht]})}function qt(Ue){for(var yt,Dt=-1,Ht=0,Jt=Ue.length,gn=-1/0;++Dt<Jt;)(yt=+Ue[Dt][1])>gn&&(gn=yt,Ht=Dt);return Ht}function Wt(Ue){var yt=Ue.map(an);return jt(Ue).sort(function(Dt,Ht){return yt[Dt]-yt[Ht]})}function an(Ue){for(var yt,Dt=0,Ht=-1,Jt=Ue.length;++Ht<Jt;)(yt=+Ue[Ht][1])&&(Dt+=yt);return Dt}rt.prototype={areaStart:Ve,areaEnd:Ve,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Ue,yt){Ue=+Ue,yt=+yt,this._point?this._context.lineTo(Ue,yt):(this._point=1,this._context.moveTo(Ue,yt))}},st.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ne(this,this._t0,je(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,yt){var Dt=NaN;if(yt=+yt,(Ue=+Ue)!==this._x1||yt!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,yt):this._context.moveTo(Ue,yt);break;case 1:this._point=2;break;case 2:this._point=3,Ne(this,je(this,Dt=ze(this,Ue,yt)),Dt);break;default:Ne(this,this._t0,Dt=ze(this,Ue,yt))}this._x0=this._x1,this._x1=Ue,this._y0=this._y1,this._y1=yt,this._t0=Dt}}},(mt.prototype=Object.create(st.prototype)).point=function(Ue,yt){st.prototype.point.call(this,yt,Ue)},Tt.prototype={moveTo:function(Ue,yt){this._context.moveTo(yt,Ue)},closePath:function(){this._context.closePath()},lineTo:function(Ue,yt){this._context.lineTo(yt,Ue)},bezierCurveTo:function(Ue,yt,Dt,Ht,Jt,gn){this._context.bezierCurveTo(yt,Ue,Ht,Dt,gn,Jt)}},xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Ue=this._x,yt=this._y,Dt=Ue.length;if(Dt)if(this._line?this._context.lineTo(Ue[0],yt[0]):this._context.moveTo(Ue[0],yt[0]),2===Dt)this._context.lineTo(Ue[1],yt[1]);else for(var Ht=zt(Ue),Jt=zt(yt),gn=0,Qt=1;Qt<Dt;++gn,++Qt)this._context.bezierCurveTo(Ht[0][gn],Jt[0][gn],Ht[1][gn],Jt[1][gn],Ue[Qt],yt[Qt]);(this._line||0!==this._line&&1===Dt)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Ue,yt){this._x.push(+Ue),this._y.push(+yt)}},gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Ue,yt){switch(Ue=+Ue,yt=+yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,yt):this._context.moveTo(Ue,yt);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,yt),this._context.lineTo(Ue,yt);else{var Dt=this._x*(1-this._t)+Ue*this._t;this._context.lineTo(Dt,this._y),this._context.lineTo(Dt,yt)}}this._x=Ue,this._y=yt}},g.arc=function(){var Ue=y,yt=m,Dt=T(0),Ht=null,Jt=l,gn=w,Qt=v,sn=null;function hn(){var Dn,_n,Tn=+Ue.apply(this,arguments),wn=+yt.apply(this,arguments),kn=Jt.apply(this,arguments)-i,Fn=gn.apply(this,arguments)-i,On=b(Fn-kn),Qn=Fn>kn;if(sn||(sn=Dn=x.path()),wn<Tn&&(_n=wn,wn=Tn,Tn=_n),wn>1e-12)if(On>u-1e-12)sn.moveTo(wn*r(kn),wn*n(kn)),sn.arc(0,0,wn,kn,Fn,!Qn),Tn>1e-12&&(sn.moveTo(Tn*r(Fn),Tn*n(Fn)),sn.arc(0,0,Tn,Fn,kn,Qn));else{var sr,Mr,Wr=kn,mr=Fn,Or=kn,vr=Fn,Xn=On,jn=On,nr=Qt.apply(this,arguments)/2,Ur=nr>1e-12&&(Ht?+Ht.apply(this,arguments):d(Tn*Tn+wn*wn)),Jn=a(b(wn-Tn)/2,+Dt.apply(this,arguments)),_r=Jn,Hr=Jn;if(Ur>1e-12){var Lr=p(Ur/Tn*n(nr)),$r=p(Ur/wn*n(nr));(Xn-=2*Lr)>1e-12?(Or+=Lr*=Qn?1:-1,vr-=Lr):(Xn=0,Or=vr=(kn+Fn)/2),(jn-=2*$r)>1e-12?(Wr+=$r*=Qn?1:-1,mr-=$r):(jn=0,Wr=mr=(kn+Fn)/2)}var dn=wn*r(Wr),Ut=wn*n(Wr),Kt=Tn*r(vr),Mn=Tn*n(vr);if(Jn>1e-12){var Bn,cr=wn*r(mr),ur=wn*n(mr),Rn=Tn*r(Or),Cn=Tn*n(Or);if(On<s&&(Bn=A(dn,Ut,Rn,Cn,cr,ur,Kt,Mn))){var Un=dn-Bn[0],Yn=Ut-Bn[1],Hn=cr-Bn[0],Zn=ur-Bn[1],Sr=1/n(f((Un*Hn+Yn*Zn)/(d(Un*Un+Yn*Yn)*d(Hn*Hn+Zn*Zn)))/2),Ar=d(Bn[0]*Bn[0]+Bn[1]*Bn[1]);_r=a(Jn,(Tn-Ar)/(Sr-1)),Hr=a(Jn,(wn-Ar)/(Sr+1))}}jn>1e-12?Hr>1e-12?(sr=M(Rn,Cn,dn,Ut,wn,Hr,Qn),Mr=M(cr,ur,Kt,Mn,wn,Hr,Qn),sn.moveTo(sr.cx+sr.x01,sr.cy+sr.y01),Hr<Jn?sn.arc(sr.cx,sr.cy,Hr,e(sr.y01,sr.x01),e(Mr.y01,Mr.x01),!Qn):(sn.arc(sr.cx,sr.cy,Hr,e(sr.y01,sr.x01),e(sr.y11,sr.x11),!Qn),sn.arc(0,0,wn,e(sr.cy+sr.y11,sr.cx+sr.x11),e(Mr.cy+Mr.y11,Mr.cx+Mr.x11),!Qn),sn.arc(Mr.cx,Mr.cy,Hr,e(Mr.y11,Mr.x11),e(Mr.y01,Mr.x01),!Qn))):(sn.moveTo(dn,Ut),sn.arc(0,0,wn,Wr,mr,!Qn)):sn.moveTo(dn,Ut),Tn>1e-12&&Xn>1e-12?_r>1e-12?(sr=M(Kt,Mn,cr,ur,Tn,-_r,Qn),Mr=M(dn,Ut,Rn,Cn,Tn,-_r,Qn),sn.lineTo(sr.cx+sr.x01,sr.cy+sr.y01),_r<Jn?sn.arc(sr.cx,sr.cy,_r,e(sr.y01,sr.x01),e(Mr.y01,Mr.x01),!Qn):(sn.arc(sr.cx,sr.cy,_r,e(sr.y01,sr.x01),e(sr.y11,sr.x11),!Qn),sn.arc(0,0,Tn,e(sr.cy+sr.y11,sr.cx+sr.x11),e(Mr.cy+Mr.y11,Mr.cx+Mr.x11),Qn),sn.arc(Mr.cx,Mr.cy,_r,e(Mr.y11,Mr.x11),e(Mr.y01,Mr.x01),!Qn))):sn.arc(0,0,Tn,vr,Or,Qn):sn.lineTo(Kt,Mn)}else sn.moveTo(0,0);if(sn.closePath(),Dn)return sn=null,Dn+""||null}return hn.centroid=function(){var Dn=(+Ue.apply(this,arguments)+ +yt.apply(this,arguments))/2,_n=(+Jt.apply(this,arguments)+ +gn.apply(this,arguments))/2-s/2;return[r(_n)*Dn,n(_n)*Dn]},hn.innerRadius=function(Dn){return arguments.length?(Ue="function"==typeof Dn?Dn:T(+Dn),hn):Ue},hn.outerRadius=function(Dn){return arguments.length?(yt="function"==typeof Dn?Dn:T(+Dn),hn):yt},hn.cornerRadius=function(Dn){return arguments.length?(Dt="function"==typeof Dn?Dn:T(+Dn),hn):Dt},hn.padRadius=function(Dn){return arguments.length?(Ht=null==Dn?null:"function"==typeof Dn?Dn:T(+Dn),hn):Ht},hn.startAngle=function(Dn){return arguments.length?(Jt="function"==typeof Dn?Dn:T(+Dn),hn):Jt},hn.endAngle=function(Dn){return arguments.length?(gn="function"==typeof Dn?Dn:T(+Dn),hn):gn},hn.padAngle=function(Dn){return arguments.length?(Qt="function"==typeof Dn?Dn:T(+Dn),hn):Qt},hn.context=function(Dn){return arguments.length?(sn=null==Dn?null:Dn,hn):sn},hn},g.area=R,g.areaRadial=Q,g.curveBasis=function(Ue){return new Je(Ue)},g.curveBasisClosed=function(Ue){return new lt(Ue)},g.curveBasisOpen=function(Ue){return new He(Ue)},g.curveBundle=et,g.curveCardinal=bt,g.curveCardinalClosed=Vt,g.curveCardinalOpen=ht,g.curveCatmullRom=nn,g.curveCatmullRomClosed=Ze,g.curveCatmullRomOpen=Ge,g.curveLinear=E,g.curveLinearClosed=function(Ue){return new rt(Ue)},g.curveMonotoneX=function(Ue){return new st(Ue)},g.curveMonotoneY=function(Ue){return new mt(Ue)},g.curveNatural=function(Ue){return new xt(Ue)},g.curveStep=function(Ue){return new gt(Ue,.5)},g.curveStepAfter=function(Ue){return new gt(Ue,1)},g.curveStepBefore=function(Ue){return new gt(Ue,0)},g.line=F,g.lineRadial=ee,g.linkHorizontal=function(){return H(G)},g.linkRadial=function(){var Ue=H(q);return Ue.angle=Ue.x,delete Ue.x,Ue.radius=Ue.y,delete Ue.y,Ue},g.linkVertical=function(){return H(re)},g.pie=function(){var Ue=L,yt=D,Dt=null,Ht=T(0),Jt=T(u),gn=T(0);function Qt(sn){var hn,Dn,_n,Tn,wn,kn=sn.length,Fn=0,On=new Array(kn),Qn=new Array(kn),sr=+Ht.apply(this,arguments),Mr=Math.min(u,Math.max(-u,Jt.apply(this,arguments)-sr)),Wr=Math.min(Math.abs(Mr)/kn,gn.apply(this,arguments)),mr=Wr*(Mr<0?-1:1);for(hn=0;hn<kn;++hn)(wn=Qn[On[hn]=hn]=+Ue(sn[hn],hn,sn))>0&&(Fn+=wn);for(null!=yt?On.sort(function(Or,vr){return yt(Qn[Or],Qn[vr])}):null!=Dt&&On.sort(function(Or,vr){return Dt(sn[Or],sn[vr])}),hn=0,_n=Fn?(Mr-kn*mr)/Fn:0;hn<kn;++hn,sr=Tn)Tn=sr+((wn=Qn[Dn=On[hn]])>0?wn*_n:0)+mr,Qn[Dn]={data:sn[Dn],index:hn,value:wn,startAngle:sr,endAngle:Tn,padAngle:Wr};return Qn}return Qt.value=function(sn){return arguments.length?(Ue="function"==typeof sn?sn:T(+sn),Qt):Ue},Qt.sortValues=function(sn){return arguments.length?(yt=sn,Dt=null,Qt):yt},Qt.sort=function(sn){return arguments.length?(Dt=sn,yt=null,Qt):Dt},Qt.startAngle=function(sn){return arguments.length?(Ht="function"==typeof sn?sn:T(+sn),Qt):Ht},Qt.endAngle=function(sn){return arguments.length?(Jt="function"==typeof sn?sn:T(+sn),Qt):Jt},Qt.padAngle=function(sn){return arguments.length?(gn="function"==typeof sn?sn:T(+sn),Qt):gn},Qt},g.pointRadial=$,g.radialArea=Q,g.radialLine=ee,g.stack=function(){var Ue=T([]),yt=jt,Dt=Bt,Ht=it;function Jt(gn){var Qt,sn,hn=Ue.apply(this,arguments),Dn=gn.length,_n=hn.length,Tn=new Array(_n);for(Qt=0;Qt<_n;++Qt){for(var wn,kn=hn[Qt],Fn=Tn[Qt]=new Array(Dn),On=0;On<Dn;++On)Fn[On]=wn=[0,+Ht(gn[On],kn,On,gn)],wn.data=gn[On];Fn.key=kn}for(Qt=0,sn=yt(Tn);Qt<_n;++Qt)Tn[sn[Qt]].index=Qt;return Dt(Tn,sn),Tn}return Jt.keys=function(gn){return arguments.length?(Ue="function"==typeof gn?gn:T(K.call(gn)),Jt):Ue},Jt.value=function(gn){return arguments.length?(Ht="function"==typeof gn?gn:T(+gn),Jt):Ht},Jt.order=function(gn){return arguments.length?(yt=null==gn?jt:"function"==typeof gn?gn:T(K.call(gn)),Jt):yt},Jt.offset=function(gn){return arguments.length?(Dt=null==gn?Bt:gn,Jt):Dt},Jt},g.stackOffsetDiverging=function(Ue,yt){if((sn=Ue.length)>0)for(var Dt,Ht,Jt,gn,Qt,sn,hn=0,Dn=Ue[yt[0]].length;hn<Dn;++hn)for(gn=Qt=0,Dt=0;Dt<sn;++Dt)(Jt=(Ht=Ue[yt[Dt]][hn])[1]-Ht[0])>0?(Ht[0]=gn,Ht[1]=gn+=Jt):Jt<0?(Ht[1]=Qt,Ht[0]=Qt+=Jt):(Ht[0]=0,Ht[1]=Jt)},g.stackOffsetExpand=function(Ue,yt){if((Ht=Ue.length)>0){for(var Dt,Ht,Jt,gn=0,Qt=Ue[0].length;gn<Qt;++gn){for(Jt=Dt=0;Dt<Ht;++Dt)Jt+=Ue[Dt][gn][1]||0;if(Jt)for(Dt=0;Dt<Ht;++Dt)Ue[Dt][gn][1]/=Jt}Bt(Ue,yt)}},g.stackOffsetNone=Bt,g.stackOffsetSilhouette=function(Ue,yt){if((Dt=Ue.length)>0){for(var Dt,Ht=0,Jt=Ue[yt[0]],gn=Jt.length;Ht<gn;++Ht){for(var Qt=0,sn=0;Qt<Dt;++Qt)sn+=Ue[Qt][Ht][1]||0;Jt[Ht][1]+=Jt[Ht][0]=-sn/2}Bt(Ue,yt)}},g.stackOffsetWiggle=function(Ue,yt){if((Jt=Ue.length)>0&&(Ht=(Dt=Ue[yt[0]]).length)>0){for(var Dt,Ht,Jt,gn=0,Qt=1;Qt<Ht;++Qt){for(var sn=0,hn=0,Dn=0;sn<Jt;++sn){for(var _n=Ue[yt[sn]],Tn=_n[Qt][1]||0,wn=(Tn-(_n[Qt-1][1]||0))/2,kn=0;kn<sn;++kn){var Fn=Ue[yt[kn]];wn+=(Fn[Qt][1]||0)-(Fn[Qt-1][1]||0)}hn+=Tn,Dn+=wn*Tn}Dt[Qt-1][1]+=Dt[Qt-1][0]=gn,hn&&(gn-=Dn/hn)}Dt[Qt-1][1]+=Dt[Qt-1][0]=gn,Bt(Ue,yt)}},g.stackOrderAppearance=Mt,g.stackOrderAscending=Wt,g.stackOrderDescending=function(Ue){return Wt(Ue).reverse()},g.stackOrderInsideOut=function(Ue){var yt,Dt,Ht=Ue.length,Jt=Ue.map(an),gn=Mt(Ue),Qt=0,sn=0,hn=[],Dn=[];for(yt=0;yt<Ht;++yt)Dt=gn[yt],Qt<sn?(Qt+=Jt[Dt],hn.push(Dt)):(sn+=Jt[Dt],Dn.push(Dt));return Dn.reverse().concat(hn)},g.stackOrderNone=jt,g.stackOrderReverse=function(Ue){return jt(Ue).reverse()},g.symbol=function(){var Ue=T(te),yt=T(64),Dt=null;function Ht(){var Jt;if(Dt||(Dt=Jt=x.path()),Ue.apply(this,arguments).draw(Dt,+yt.apply(this,arguments)),Jt)return Dt=null,Jt+""||null}return Ht.type=function(Jt){return arguments.length?(Ue="function"==typeof Jt?Jt:T(Jt),Ht):Ue},Ht.size=function(Jt){return arguments.length?(yt="function"==typeof Jt?Jt:T(+Jt),Ht):yt},Ht.context=function(Jt){return arguments.length?(Dt=null==Jt?null:Jt,Ht):Dt},Ht},g.symbolCircle=te,g.symbolCross=ne,g.symbolDiamond=de,g.symbolSquare=ke,g.symbolStar=we,g.symbolTriangle=Ee,g.symbolWye=Ce,g.symbols=Pe,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?x(ie,_("d3-path")):x((g=g||self).d3=g.d3||{},g.d3)},{"d3-path":117}],120:[function(_,ae,ie){var g,x;g=this,x=function(g,x){"use strict";function T(ht){if(0<=ht.y&&ht.y<100){var ut=new Date(-1,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L);return ut.setFullYear(ht.y),ut}return new Date(ht.y,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L)}function b(ht){if(0<=ht.y&&ht.y<100){var ut=new Date(Date.UTC(-1,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L));return ut.setUTCFullYear(ht.y),ut}return new Date(Date.UTC(ht.y,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L))}function e(ht,ut,Rt){return{y:ht,m:ut,d:Rt,H:0,M:0,S:0,L:0}}function r(ht){var ut=ht.dateTime,Rt=ht.date,nn=ht.time,cn=ht.periods,Ze=ht.days,Qe=ht.shortDays,Ge=ht.months,rt=ht.shortMonths,Le=f(cn),ze=p(cn),je=f(Ze),Ne=p(Ze),st=f(Qe),mt=p(Qe),Tt=f(Ge),xt=p(Ge),zt=f(rt),gt=p(rt),Bt={a:function(an){return Qe[an.getDay()]},A:function(an){return Ze[an.getDay()]},b:function(an){return rt[an.getMonth()]},B:function(an){return Ge[an.getMonth()]},c:null,d:Q,e:Q,f:H,H:$,I:K,j:oe,L:j,m:G,M:re,p:function(an){return cn[+(an.getHours()>=12)]},q:function(an){return 1+~~(an.getMonth()/3)},Q:ft,s:bt,S:q,u:te,U:ne,V:le,w:ue,W:de,x:null,X:null,y:he,Y:be,Z:ge,"%":tt},jt={a:function(an){return Qe[an.getUTCDay()]},A:function(an){return Ze[an.getUTCDay()]},b:function(an){return rt[an.getUTCMonth()]},B:function(an){return Ge[an.getUTCMonth()]},c:null,d:we,e:we,f:ve,H:ke,I:De,j:Ee,L:Re,m:Te,M:Ie,p:function(an){return cn[+(an.getUTCHours()>=12)]},q:function(an){return 1+~~(an.getUTCMonth()/3)},Q:ft,s:bt,S:Ce,u:Pe,U:Ve,V:qe,w:Je,W:lt,x:null,X:null,y:He,Y:$e,Z:et,"%":tt},it={a:function(an,Ue,yt){var Dt=st.exec(Ue.slice(yt));return Dt?(an.w=mt[Dt[0].toLowerCase()],yt+Dt[0].length):-1},A:function(an,Ue,yt){var Dt=je.exec(Ue.slice(yt));return Dt?(an.w=Ne[Dt[0].toLowerCase()],yt+Dt[0].length):-1},b:function(an,Ue,yt){var Dt=zt.exec(Ue.slice(yt));return Dt?(an.m=gt[Dt[0].toLowerCase()],yt+Dt[0].length):-1},B:function(an,Ue,yt){var Dt=Tt.exec(Ue.slice(yt));return Dt?(an.m=xt[Dt[0].toLowerCase()],yt+Dt[0].length):-1},c:function(an,Ue,yt){return Wt(an,ut,Ue,yt)},d:S,e:S,f:V,H:R,I:R,j:F,L:B,m:P,M:D,p:function(an,Ue,yt){var Dt=Le.exec(Ue.slice(yt));return Dt?(an.p=ze[Dt[0].toLowerCase()],yt+Dt[0].length):-1},q:E,Q:Y,s:ee,S:L,u:m,U:l,V:w,w:y,W:v,x:function(an,Ue,yt){return Wt(an,Rt,Ue,yt)},X:function(an,Ue,yt){return Wt(an,nn,Ue,yt)},y:M,Y:A,Z:k,"%":Z};function Mt(an,Ue){return function(yt){var Dt,Ht,Jt,gn=[],Qt=-1,sn=0,hn=an.length;for(yt instanceof Date||(yt=new Date(+yt));++Qt<hn;)37===an.charCodeAt(Qt)&&(gn.push(an.slice(sn,Qt)),null!=(Ht=a[Dt=an.charAt(++Qt)])?Dt=an.charAt(++Qt):Ht="e"===Dt?" ":"0",(Jt=Ue[Dt])&&(Dt=Jt(yt,Ht)),gn.push(Dt),sn=Qt+1);return gn.push(an.slice(sn,Qt)),gn.join("")}}function qt(an,Ue){return function(yt){var Dt,Ht,Jt=e(1900,void 0,1);if(Wt(Jt,an,yt+="",0)!=yt.length)return null;if("Q"in Jt)return new Date(Jt.Q);if("s"in Jt)return new Date(1e3*Jt.s+("L"in Jt?Jt.L:0));if(Ue&&!("Z"in Jt)&&(Jt.Z=0),"p"in Jt&&(Jt.H=Jt.H%12+12*Jt.p),void 0===Jt.m&&(Jt.m="q"in Jt?Jt.q:0),"V"in Jt){if(Jt.V<1||Jt.V>53)return null;"w"in Jt||(Jt.w=1),"Z"in Jt?(Ht=(Dt=b(e(Jt.y,0,1))).getUTCDay(),Dt=Ht>4||0===Ht?x.utcMonday.ceil(Dt):x.utcMonday(Dt),Dt=x.utcDay.offset(Dt,7*(Jt.V-1)),Jt.y=Dt.getUTCFullYear(),Jt.m=Dt.getUTCMonth(),Jt.d=Dt.getUTCDate()+(Jt.w+6)%7):(Ht=(Dt=T(e(Jt.y,0,1))).getDay(),Dt=Ht>4||0===Ht?x.timeMonday.ceil(Dt):x.timeMonday(Dt),Dt=x.timeDay.offset(Dt,7*(Jt.V-1)),Jt.y=Dt.getFullYear(),Jt.m=Dt.getMonth(),Jt.d=Dt.getDate()+(Jt.w+6)%7)}else("W"in Jt||"U"in Jt)&&("w"in Jt||(Jt.w="u"in Jt?Jt.u%7:"W"in Jt?1:0),Ht="Z"in Jt?b(e(Jt.y,0,1)).getUTCDay():T(e(Jt.y,0,1)).getDay(),Jt.m=0,Jt.d="W"in Jt?(Jt.w+6)%7+7*Jt.W-(Ht+5)%7:Jt.w+7*Jt.U-(Ht+6)%7);return"Z"in Jt?(Jt.H+=Jt.Z/100|0,Jt.M+=Jt.Z%100,b(Jt)):T(Jt)}}function Wt(an,Ue,yt,Dt){for(var Ht,Jt,gn=0,Qt=Ue.length,sn=yt.length;gn<Qt;){if(Dt>=sn)return-1;if(37===(Ht=Ue.charCodeAt(gn++))){if(Ht=Ue.charAt(gn++),!(Jt=it[Ht in a?Ue.charAt(gn++):Ht])||(Dt=Jt(an,yt,Dt))<0)return-1}else if(Ht!=yt.charCodeAt(Dt++))return-1}return Dt}return Bt.x=Mt(Rt,Bt),Bt.X=Mt(nn,Bt),Bt.c=Mt(ut,Bt),jt.x=Mt(Rt,jt),jt.X=Mt(nn,jt),jt.c=Mt(ut,jt),{format:function(an){var Ue=Mt(an+="",Bt);return Ue.toString=function(){return an},Ue},parse:function(an){var Ue=qt(an+="",!1);return Ue.toString=function(){return an},Ue},utcFormat:function(an){var Ue=Mt(an+="",jt);return Ue.toString=function(){return an},Ue},utcParse:function(an){var Ue=qt(an+="",!0);return Ue.toString=function(){return an},Ue}}}var t,a={"-":"",_:" ",0:"0"},n=/^\s*\d+/,d=/^%/,s=/[\\^$*+?|[\]().{}]/g;function i(ht,ut,Rt){var nn=ht<0?"-":"",cn=(nn?-ht:ht)+"",Ze=cn.length;return nn+(Ze<Rt?new Array(Rt-Ze+1).join(ut)+cn:cn)}function u(ht){return ht.replace(s,"\\$&")}function f(ht){return new RegExp("^(?:"+ht.map(u).join("|")+")","i")}function p(ht){for(var ut={},Rt=-1,nn=ht.length;++Rt<nn;)ut[ht[Rt].toLowerCase()]=Rt;return ut}function y(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+1));return nn?(ht.w=+nn[0],Rt+nn[0].length):-1}function m(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+1));return nn?(ht.u=+nn[0],Rt+nn[0].length):-1}function l(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+2));return nn?(ht.U=+nn[0],Rt+nn[0].length):-1}function w(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+2));return nn?(ht.V=+nn[0],Rt+nn[0].length):-1}function v(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+2));return nn?(ht.W=+nn[0],Rt+nn[0].length):-1}function A(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+4));return nn?(ht.y=+nn[0],Rt+nn[0].length):-1}function M(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+2));return nn?(ht.y=+nn[0]+(+nn[0]>68?1900:2e3),Rt+nn[0].length):-1}function k(ht,ut,Rt){var nn=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ut.slice(Rt,Rt+6));return nn?(ht.Z=nn[1]?0:-(nn[2]+(nn[3]||"00")),Rt+nn[0].length):-1}function E(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+1));return nn?(ht.q=3*nn[0]-3,Rt+nn[0].length):-1}function P(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+2));return nn?(ht.m=nn[0]-1,Rt+nn[0].length):-1}function S(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+2));return nn?(ht.d=+nn[0],Rt+nn[0].length):-1}function F(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+3));return nn?(ht.m=0,ht.d=+nn[0],Rt+nn[0].length):-1}function R(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+2));return nn?(ht.H=+nn[0],Rt+nn[0].length):-1}function D(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+2));return nn?(ht.M=+nn[0],Rt+nn[0].length):-1}function L(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+2));return nn?(ht.S=+nn[0],Rt+nn[0].length):-1}function B(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+3));return nn?(ht.L=+nn[0],Rt+nn[0].length):-1}function V(ht,ut,Rt){var nn=n.exec(ut.slice(Rt,Rt+6));return nn?(ht.L=Math.floor(nn[0]/1e3),Rt+nn[0].length):-1}function Z(ht,ut,Rt){var nn=d.exec(ut.slice(Rt,Rt+1));return nn?Rt+nn[0].length:-1}function Y(ht,ut,Rt){var nn=n.exec(ut.slice(Rt));return nn?(ht.Q=+nn[0],Rt+nn[0].length):-1}function ee(ht,ut,Rt){var nn=n.exec(ut.slice(Rt));return nn?(ht.s=+nn[0],Rt+nn[0].length):-1}function Q(ht,ut){return i(ht.getDate(),ut,2)}function $(ht,ut){return i(ht.getHours(),ut,2)}function K(ht,ut){return i(ht.getHours()%12||12,ut,2)}function oe(ht,ut){return i(1+x.timeDay.count(x.timeYear(ht),ht),ut,3)}function j(ht,ut){return i(ht.getMilliseconds(),ut,3)}function H(ht,ut){return j(ht,ut)+"000"}function G(ht,ut){return i(ht.getMonth()+1,ut,2)}function re(ht,ut){return i(ht.getMinutes(),ut,2)}function q(ht,ut){return i(ht.getSeconds(),ut,2)}function te(ht){var ut=ht.getDay();return 0===ut?7:ut}function ne(ht,ut){return i(x.timeSunday.count(x.timeYear(ht)-1,ht),ut,2)}function le(ht,ut){var Rt=ht.getDay();return ht=Rt>=4||0===Rt?x.timeThursday(ht):x.timeThursday.ceil(ht),i(x.timeThursday.count(x.timeYear(ht),ht)+(4===x.timeYear(ht).getDay()),ut,2)}function ue(ht){return ht.getDay()}function de(ht,ut){return i(x.timeMonday.count(x.timeYear(ht)-1,ht),ut,2)}function he(ht,ut){return i(ht.getFullYear()%100,ut,2)}function be(ht,ut){return i(ht.getFullYear()%1e4,ut,4)}function ge(ht){var ut=ht.getTimezoneOffset();return(ut>0?"-":(ut*=-1,"+"))+i(ut/60|0,"0",2)+i(ut%60,"0",2)}function we(ht,ut){return i(ht.getUTCDate(),ut,2)}function ke(ht,ut){return i(ht.getUTCHours(),ut,2)}function De(ht,ut){return i(ht.getUTCHours()%12||12,ut,2)}function Ee(ht,ut){return i(1+x.utcDay.count(x.utcYear(ht),ht),ut,3)}function Re(ht,ut){return i(ht.getUTCMilliseconds(),ut,3)}function ve(ht,ut){return Re(ht,ut)+"000"}function Te(ht,ut){return i(ht.getUTCMonth()+1,ut,2)}function Ie(ht,ut){return i(ht.getUTCMinutes(),ut,2)}function Ce(ht,ut){return i(ht.getUTCSeconds(),ut,2)}function Pe(ht){var ut=ht.getUTCDay();return 0===ut?7:ut}function Ve(ht,ut){return i(x.utcSunday.count(x.utcYear(ht)-1,ht),ut,2)}function qe(ht,ut){var Rt=ht.getUTCDay();return ht=Rt>=4||0===Rt?x.utcThursday(ht):x.utcThursday.ceil(ht),i(x.utcThursday.count(x.utcYear(ht),ht)+(4===x.utcYear(ht).getUTCDay()),ut,2)}function Je(ht){return ht.getUTCDay()}function lt(ht,ut){return i(x.utcMonday.count(x.utcYear(ht)-1,ht),ut,2)}function He(ht,ut){return i(ht.getUTCFullYear()%100,ut,2)}function $e(ht,ut){return i(ht.getUTCFullYear()%1e4,ut,4)}function et(){return"+0000"}function tt(){return"%"}function ft(ht){return+ht}function bt(ht){return Math.floor(+ht/1e3)}function Ct(ht){return t=r(ht),g.timeFormat=t.format,g.timeParse=t.parse,g.utcFormat=t.utcFormat,g.utcParse=t.utcParse,t}Ct({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Vt=Date.prototype.toISOString?function(ht){return ht.toISOString()}:g.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Ft=+new Date("2000-01-01T00:00:00.000Z")?function(ht){var ut=new Date(ht);return isNaN(ut)?null:ut}:g.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");g.isoFormat=Vt,g.isoParse=Ft,g.timeFormatDefaultLocale=Ct,g.timeFormatLocale=r,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?x(ie,_("d3-time")):x((g=g||self).d3=g.d3||{},g.d3)},{"d3-time":121}],121:[function(_,ae,ie){var g,x;g=this,x=function(g){"use strict";var x=new Date,T=new Date;function b(Te,Ie,Ce,Pe){function Ve(qe){return Te(qe=0===arguments.length?new Date:new Date(+qe)),qe}return Ve.floor=function(qe){return Te(qe=new Date(+qe)),qe},Ve.ceil=function(qe){return Te(qe=new Date(qe-1)),Ie(qe,1),Te(qe),qe},Ve.round=function(qe){var Je=Ve(qe),lt=Ve.ceil(qe);return qe-Je<lt-qe?Je:lt},Ve.offset=function(qe,Je){return Ie(qe=new Date(+qe),null==Je?1:Math.floor(Je)),qe},Ve.range=function(qe,Je,lt){var He,$e=[];if(qe=Ve.ceil(qe),lt=null==lt?1:Math.floor(lt),!(qe<Je&&lt>0))return $e;do{$e.push(He=new Date(+qe)),Ie(qe,lt),Te(qe)}while(He<qe&&qe<Je);return $e},Ve.filter=function(qe){return b(function(Je){if(Je>=Je)for(;Te(Je),!qe(Je);)Je.setTime(Je-1)},function(Je,lt){if(Je>=Je)if(lt<0)for(;++lt<=0;)for(;Ie(Je,-1),!qe(Je););else for(;--lt>=0;)for(;Ie(Je,1),!qe(Je););})},Ce&&(Ve.count=function(qe,Je){return x.setTime(+qe),T.setTime(+Je),Te(x),Te(T),Math.floor(Ce(x,T))},Ve.every=function(qe){return qe=Math.floor(qe),isFinite(qe)&&qe>0?qe>1?Ve.filter(Pe?function(Je){return Pe(Je)%qe==0}:function(Je){return Ve.count(0,Je)%qe==0}):Ve:null}),Ve}var e=b(function(){},function(Te,Ie){Te.setTime(+Te+Ie)},function(Te,Ie){return Ie-Te});e.every=function(Te){return Te=Math.floor(Te),isFinite(Te)&&Te>0?Te>1?b(function(Ie){Ie.setTime(Math.floor(Ie/Te)*Te)},function(Ie,Ce){Ie.setTime(+Ie+Ce*Te)},function(Ie,Ce){return(Ce-Ie)/Te}):e:null};var r=e.range,t=b(function(Te){Te.setTime(Te-Te.getMilliseconds())},function(Te,Ie){Te.setTime(+Te+1e3*Ie)},function(Te,Ie){return(Ie-Te)/1e3},function(Te){return Te.getUTCSeconds()}),a=t.range,n=b(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds())},function(Te,Ie){Te.setTime(+Te+6e4*Ie)},function(Te,Ie){return(Ie-Te)/6e4},function(Te){return Te.getMinutes()}),d=n.range,s=b(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds()-6e4*Te.getMinutes())},function(Te,Ie){Te.setTime(+Te+36e5*Ie)},function(Te,Ie){return(Ie-Te)/36e5},function(Te){return Te.getHours()}),i=s.range,u=b(function(Te){Te.setHours(0,0,0,0)},function(Te,Ie){Te.setDate(Te.getDate()+Ie)},function(Te,Ie){return(Ie-Te-6e4*(Ie.getTimezoneOffset()-Te.getTimezoneOffset()))/864e5},function(Te){return Te.getDate()-1}),f=u.range;function p(Te){return b(function(Ie){Ie.setDate(Ie.getDate()-(Ie.getDay()+7-Te)%7),Ie.setHours(0,0,0,0)},function(Ie,Ce){Ie.setDate(Ie.getDate()+7*Ce)},function(Ie,Ce){return(Ce-Ie-6e4*(Ce.getTimezoneOffset()-Ie.getTimezoneOffset()))/6048e5})}var y=p(0),m=p(1),l=p(2),w=p(3),v=p(4),A=p(5),M=p(6),k=y.range,E=m.range,P=l.range,S=w.range,F=v.range,R=A.range,D=M.range,L=b(function(Te){Te.setDate(1),Te.setHours(0,0,0,0)},function(Te,Ie){Te.setMonth(Te.getMonth()+Ie)},function(Te,Ie){return Ie.getMonth()-Te.getMonth()+12*(Ie.getFullYear()-Te.getFullYear())},function(Te){return Te.getMonth()}),B=L.range,V=b(function(Te){Te.setMonth(0,1),Te.setHours(0,0,0,0)},function(Te,Ie){Te.setFullYear(Te.getFullYear()+Ie)},function(Te,Ie){return Ie.getFullYear()-Te.getFullYear()},function(Te){return Te.getFullYear()});V.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?b(function(Ie){Ie.setFullYear(Math.floor(Ie.getFullYear()/Te)*Te),Ie.setMonth(0,1),Ie.setHours(0,0,0,0)},function(Ie,Ce){Ie.setFullYear(Ie.getFullYear()+Ce*Te)}):null};var Z=V.range,Y=b(function(Te){Te.setUTCSeconds(0,0)},function(Te,Ie){Te.setTime(+Te+6e4*Ie)},function(Te,Ie){return(Ie-Te)/6e4},function(Te){return Te.getUTCMinutes()}),ee=Y.range,Q=b(function(Te){Te.setUTCMinutes(0,0,0)},function(Te,Ie){Te.setTime(+Te+36e5*Ie)},function(Te,Ie){return(Ie-Te)/36e5},function(Te){return Te.getUTCHours()}),$=Q.range,K=b(function(Te){Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCDate(Te.getUTCDate()+Ie)},function(Te,Ie){return(Ie-Te)/864e5},function(Te){return Te.getUTCDate()-1}),oe=K.range;function j(Te){return b(function(Ie){Ie.setUTCDate(Ie.getUTCDate()-(Ie.getUTCDay()+7-Te)%7),Ie.setUTCHours(0,0,0,0)},function(Ie,Ce){Ie.setUTCDate(Ie.getUTCDate()+7*Ce)},function(Ie,Ce){return(Ce-Ie)/6048e5})}var H=j(0),G=j(1),re=j(2),q=j(3),te=j(4),ne=j(5),le=j(6),ue=H.range,de=G.range,he=re.range,be=q.range,ge=te.range,we=ne.range,ke=le.range,De=b(function(Te){Te.setUTCDate(1),Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCMonth(Te.getUTCMonth()+Ie)},function(Te,Ie){return Ie.getUTCMonth()-Te.getUTCMonth()+12*(Ie.getUTCFullYear()-Te.getUTCFullYear())},function(Te){return Te.getUTCMonth()}),Ee=De.range,Re=b(function(Te){Te.setUTCMonth(0,1),Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCFullYear(Te.getUTCFullYear()+Ie)},function(Te,Ie){return Ie.getUTCFullYear()-Te.getUTCFullYear()},function(Te){return Te.getUTCFullYear()});Re.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?b(function(Ie){Ie.setUTCFullYear(Math.floor(Ie.getUTCFullYear()/Te)*Te),Ie.setUTCMonth(0,1),Ie.setUTCHours(0,0,0,0)},function(Ie,Ce){Ie.setUTCFullYear(Ie.getUTCFullYear()+Ce*Te)}):null};var ve=Re.range;g.timeDay=u,g.timeDays=f,g.timeFriday=A,g.timeFridays=R,g.timeHour=s,g.timeHours=i,g.timeInterval=b,g.timeMillisecond=e,g.timeMilliseconds=r,g.timeMinute=n,g.timeMinutes=d,g.timeMonday=m,g.timeMondays=E,g.timeMonth=L,g.timeMonths=B,g.timeSaturday=M,g.timeSaturdays=D,g.timeSecond=t,g.timeSeconds=a,g.timeSunday=y,g.timeSundays=k,g.timeThursday=v,g.timeThursdays=F,g.timeTuesday=l,g.timeTuesdays=P,g.timeWednesday=w,g.timeWednesdays=S,g.timeWeek=y,g.timeWeeks=k,g.timeYear=V,g.timeYears=Z,g.utcDay=K,g.utcDays=oe,g.utcFriday=ne,g.utcFridays=we,g.utcHour=Q,g.utcHours=$,g.utcMillisecond=e,g.utcMilliseconds=r,g.utcMinute=Y,g.utcMinutes=ee,g.utcMonday=G,g.utcMondays=de,g.utcMonth=De,g.utcMonths=Ee,g.utcSaturday=le,g.utcSaturdays=ke,g.utcSecond=t,g.utcSeconds=a,g.utcSunday=H,g.utcSundays=ue,g.utcThursday=te,g.utcThursdays=ge,g.utcTuesday=re,g.utcTuesdays=he,g.utcWednesday=q,g.utcWednesdays=be,g.utcWeek=H,g.utcWeeks=ue,g.utcYear=Re,g.utcYears=ve,Object.defineProperty(g,"__esModule",{value:!0})},x("object"==typeof ie&&void 0!==ae?ie:(g=g||self).d3=g.d3||{})},{}],122:[function(_,ae,ie){arguments[4][121][0].apply(ie,arguments)},{dup:121}],123:[function(_,ae,ie){var g,x;g=this,x=function(g){"use strict";var x,T,b=0,e=0,r=0,t=0,a=0,n=0,d="object"==typeof performance&&performance.now?performance:Date,s="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(v){setTimeout(v,17)};function i(){return a||(s(u),a=d.now()+n)}function u(){a=0}function f(){this._call=this._time=this._next=null}function p(v,A,M){var k=new f;return k.restart(v,A,M),k}function y(){i(),++b;for(var v,A=x;A;)(v=a-A._time)>=0&&A._call.call(null,v),A=A._next;--b}function m(){a=(t=d.now())+n,b=e=0;try{y()}finally{b=0,function(){for(var v,A,M=x,k=1/0;M;)M._call?(k>M._time&&(k=M._time),v=M,M=M._next):(A=M._next,M._next=null,M=v?v._next=A:x=A);T=v,w(k)}(),a=0}}function l(){var v=d.now(),A=v-t;A>1e3&&(n-=A,t=v)}function w(v){b||(e&&(e=clearTimeout(e)),v-a>24?(v<1/0&&(e=setTimeout(m,v-d.now()-n)),r&&(r=clearInterval(r))):(r||(t=d.now(),r=setInterval(l,1e3)),b=1,s(m)))}f.prototype=p.prototype={constructor:f,restart:function(v,A,M){if("function"!=typeof v)throw new TypeError("callback is not a function");M=(null==M?i():+M)+(null==A?0:+A),this._next||T===this||(T?T._next=this:x=this,T=this),this._call=v,this._time=M,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}},g.interval=function(v,A,M){var k=new f,E=A;return null==A?(k.restart(v,A,M),k):(A=+A,M=null==M?i():+M,k.restart(function P(S){S+=E,k.restart(P,E+=A,M),v(S)},A,M),k)},g.now=i,g.timeout=function(v,A,M){var k=new f;return k.restart(function(E){k.stop(),v(E+A)},A=null==A?0:+A,M),k},g.timer=p,g.timerFlush=y,Object.defineProperty(g,"__esModule",{value:!0})},x("object"==typeof ie&&void 0!==ae?ie:(g=g||self).d3=g.d3||{})},{}],124:[function(_,ae,ie){ae.exports=function(){for(var g=0;g<arguments.length;g++)if(void 0!==arguments[g])return arguments[g]}},{}],125:[function(_,ae,ie){"use strict";ae.exports=T;var g=(T.canvas=document.createElement("canvas")).getContext("2d"),x=b([32,126]);function T(e,r){Array.isArray(e)&&(e=e.join(", "));var t,a={},n=16,d=.05;r&&(2===r.length&&"number"==typeof r[0]?t=b(r):Array.isArray(r)?t=r:(r.o?t=b(r.o):r.pairs&&(t=r.pairs),r.fontSize&&(n=r.fontSize),null!=r.threshold&&(d=r.threshold))),t||(t=x),g.font=n+"px "+e;for(var s=0;s<t.length;s++){var i=t[s],u=g.measureText(i[0]).width+g.measureText(i[1]).width,f=g.measureText(i).width;Math.abs(u-f)>n*d&&(a[i]=(f-u)/n*1e3)}return a}function b(e){for(var r=[],t=e[0];t<=e[1];t++)for(var a=String.fromCharCode(t),n=e[0];n<e[1];n++){var d=a+String.fromCharCode(n);r.push(d)}return r}T.createPairs=b,T.ascii=x},{}],126:[function(_,ae,ie){var g=_("abs-svg-path"),x=_("normalize-svg-path"),T={M:"moveTo",C:"bezierCurveTo"};ae.exports=function(b,e){b.beginPath(),x(g(e)).forEach(function(r){var t=r[0],a=r.slice(1);b[T[t]].apply(b,a)}),b.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(_,ae,ie){ae.exports=function(g){switch(g){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(_,ae,ie){"use strict";ae.exports=function(g,x){switch(void 0===x&&(x=0),typeof g){case"number":if(g>0)return function(T,b){var e,r;for(e=new Array(T),r=0;r<T;++r)e[r]=b;return e}(0|g,x);break;case"object":if("number"==typeof g.length)return function T(b,e,r){var t=0|b[r];if(t<=0)return[];var a,n=new Array(t);if(r===b.length-1)for(a=0;a<t;++a)n[a]=e;else for(a=0;a<t;++a)n[a]=T(b,e,r+1);return n}(g,x,0)}return[]}},{}],129:[function(_,ae,ie){"use strict";function g(F,R,D){D=D||2;var L,B,V,Z,Y,ee,Q,$=R&&R.length,K=$?R[0]*D:F.length,oe=x(F,0,K,D,!0),j=[];if(!oe||oe.next===oe.prev)return j;if($&&(oe=function(G,re,q,te){var ne,le,he,be=[];for(ne=0,le=re.length;ne<le;ne++)(he=x(G,re[ne]*te,ne<le-1?re[ne+1]*te:G.length,te,!1))===he.next&&(he.steiner=!0),be.push(u(he));for(be.sort(n),ne=0;ne<be.length;ne++)d(be[ne],q),q=T(q,q.next);return q}(F,R,oe,D)),F.length>80*D){L=V=F[0],B=Z=F[1];for(var H=D;H<K;H+=D)(Y=F[H])<L&&(L=Y),(ee=F[H+1])<B&&(B=ee),Y>V&&(V=Y),ee>Z&&(Z=ee);Q=0!==(Q=Math.max(V-L,Z-B))?1/Q:0}return b(oe,j,D,L,B,Q),j}function x(F,R,D,L,B){var V,Z;if(B===S(F,R,D,L)>0)for(V=R;V<D;V+=L)Z=k(V,F[V],F[V+1],Z);else for(V=D-L;V>=R;V-=L)Z=k(V,F[V],F[V+1],Z);return Z&&m(Z,Z.next)&&(E(Z),Z=Z.next),Z}function T(F,R){if(!F)return F;R||(R=F);var D,L=F;do{if(D=!1,L.steiner||!m(L,L.next)&&0!==y(L.prev,L,L.next))L=L.next;else{if(E(L),(L=R=L.prev)===L.next)break;D=!0}}while(D||L!==R);return R}function b(F,R,D,L,B,V,Z){if(F){!Z&&V&&function($,K,oe,j){var H=$;do{null===H.z&&(H.z=i(H.x,H.y,K,oe,j)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next}while(H!==$);H.prevZ.nextZ=null,H.prevZ=null,function(G){var re,q,te,ne,le,ue,de,he,be=1;do{for(q=G,G=null,le=null,ue=0;q;){for(ue++,te=q,de=0,re=0;re<be&&(de++,te=te.nextZ);re++);for(he=be;de>0||he>0&&te;)0!==de&&(0===he||!te||q.z<=te.z)?(ne=q,q=q.nextZ,de--):(ne=te,te=te.nextZ,he--),le?le.nextZ=ne:G=ne,ne.prevZ=le,le=ne;q=te}le.nextZ=null,be*=2}while(ue>1)}(H)}(F,L,B,V);for(var Y,ee,Q=F;F.prev!==F.next;)if(Y=F.prev,ee=F.next,V?r(F,L,B,V):e(F))R.push(Y.i/D),R.push(F.i/D),R.push(ee.i/D),E(F),F=ee.next,Q=ee.next;else if((F=ee)===Q){Z?1===Z?b(F=t(T(F),R,D),R,D,L,B,V,2):2===Z&&a(F,R,D,L,B,V):b(T(F),R,D,L,B,V,1);break}}}function e(F){var R=F.prev,D=F,L=F.next;if(y(R,D,L)>=0)return!1;for(var B=F.next.next;B!==F.prev;){if(f(R.x,R.y,D.x,D.y,L.x,L.y,B.x,B.y)&&y(B.prev,B,B.next)>=0)return!1;B=B.next}return!0}function r(F,R,D,L){var B=F.prev,V=F,Z=F.next;if(y(B,V,Z)>=0)return!1;for(var Q=B.x>V.x?B.x>Z.x?B.x:Z.x:V.x>Z.x?V.x:Z.x,$=B.y>V.y?B.y>Z.y?B.y:Z.y:V.y>Z.y?V.y:Z.y,K=i(B.x<V.x?B.x<Z.x?B.x:Z.x:V.x<Z.x?V.x:Z.x,B.y<V.y?B.y<Z.y?B.y:Z.y:V.y<Z.y?V.y:Z.y,R,D,L),oe=i(Q,$,R,D,L),j=F.prevZ,H=F.nextZ;j&&j.z>=K&&H&&H.z<=oe;){if(j!==F.prev&&j!==F.next&&f(B.x,B.y,V.x,V.y,Z.x,Z.y,j.x,j.y)&&y(j.prev,j,j.next)>=0||(j=j.prevZ,H!==F.prev&&H!==F.next&&f(B.x,B.y,V.x,V.y,Z.x,Z.y,H.x,H.y)&&y(H.prev,H,H.next)>=0))return!1;H=H.nextZ}for(;j&&j.z>=K;){if(j!==F.prev&&j!==F.next&&f(B.x,B.y,V.x,V.y,Z.x,Z.y,j.x,j.y)&&y(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;H&&H.z<=oe;){if(H!==F.prev&&H!==F.next&&f(B.x,B.y,V.x,V.y,Z.x,Z.y,H.x,H.y)&&y(H.prev,H,H.next)>=0)return!1;H=H.nextZ}return!0}function t(F,R,D){var L=F;do{var B=L.prev,V=L.next.next;!m(B,V)&&l(B,L,L.next,V)&&A(B,V)&&A(V,B)&&(R.push(B.i/D),R.push(L.i/D),R.push(V.i/D),E(L),E(L.next),L=F=V),L=L.next}while(L!==F);return T(L)}function a(F,R,D,L,B,V){var Z=F;do{for(var Y=Z.next.next;Y!==Z.prev;){if(Z.i!==Y.i&&p(Z,Y)){var ee=M(Z,Y);return Z=T(Z,Z.next),ee=T(ee,ee.next),b(Z,R,D,L,B,V),void b(ee,R,D,L,B,V)}Y=Y.next}Z=Z.next}while(Z!==F)}function n(F,R){return F.x-R.x}function d(F,R){if(R=function(L,B){var V,Z=B,Y=L.x,ee=L.y,Q=-1/0;do{if(ee<=Z.y&&ee>=Z.next.y&&Z.next.y!==Z.y){var $=Z.x+(ee-Z.y)*(Z.next.x-Z.x)/(Z.next.y-Z.y);if($<=Y&&$>Q){if(Q=$,$===Y){if(ee===Z.y)return Z;if(ee===Z.next.y)return Z.next}V=Z.x<Z.next.x?Z:Z.next}}Z=Z.next}while(Z!==B);if(!V)return null;if(Y===Q)return V;var K,oe=V,j=V.x,H=V.y,G=1/0;Z=V;do{Y>=Z.x&&Z.x>=j&&Y!==Z.x&&f(ee<H?Y:Q,ee,j,H,ee<H?Q:Y,ee,Z.x,Z.y)&&(K=Math.abs(ee-Z.y)/(Y-Z.x),A(Z,L)&&(K<G||K===G&&(Z.x>V.x||Z.x===V.x&&s(V,Z)))&&(V=Z,G=K)),Z=Z.next}while(Z!==oe);return V}(F,R)){var D=M(R,F);T(R,R.next),T(D,D.next)}}function s(F,R){return y(F.prev,F,R.prev)<0&&y(R.next,F,F.next)<0}function i(F,R,D,L,B){return(F=1431655765&((F=858993459&((F=252645135&((F=16711935&((F=32767*(F-D)*B)|F<<8))|F<<4))|F<<2))|F<<1))|(R=1431655765&((R=858993459&((R=252645135&((R=16711935&((R=32767*(R-L)*B)|R<<8))|R<<4))|R<<2))|R<<1))<<1}function u(F){var R=F,D=F;do{(R.x<D.x||R.x===D.x&&R.y<D.y)&&(D=R),R=R.next}while(R!==F);return D}function f(F,R,D,L,B,V,Z,Y){return(B-Z)*(R-Y)-(F-Z)*(V-Y)>=0&&(F-Z)*(L-Y)-(D-Z)*(R-Y)>=0&&(D-Z)*(V-Y)-(B-Z)*(L-Y)>=0}function p(F,R){return F.next.i!==R.i&&F.prev.i!==R.i&&!function(D,L){var B=D;do{if(B.i!==D.i&&B.next.i!==D.i&&B.i!==L.i&&B.next.i!==L.i&&l(B,B.next,D,L))return!0;B=B.next}while(B!==D);return!1}(F,R)&&(A(F,R)&&A(R,F)&&function(D,L){var B=D,V=!1,Z=(D.x+L.x)/2,Y=(D.y+L.y)/2;do{B.y>Y!=B.next.y>Y&&B.next.y!==B.y&&Z<(B.next.x-B.x)*(Y-B.y)/(B.next.y-B.y)+B.x&&(V=!V),B=B.next}while(B!==D);return V}(F,R)&&(y(F.prev,F,R.prev)||y(F,R.prev,R))||m(F,R)&&y(F.prev,F,F.next)>0&&y(R.prev,R,R.next)>0)}function y(F,R,D){return(R.y-F.y)*(D.x-R.x)-(R.x-F.x)*(D.y-R.y)}function m(F,R){return F.x===R.x&&F.y===R.y}function l(F,R,D,L){var B=v(y(F,R,D)),V=v(y(F,R,L)),Z=v(y(D,L,F)),Y=v(y(D,L,R));return B!==V&&Z!==Y||!(0!==B||!w(F,D,R))||!(0!==V||!w(F,L,R))||!(0!==Z||!w(D,F,L))||!(0!==Y||!w(D,R,L))}function w(F,R,D){return R.x<=Math.max(F.x,D.x)&&R.x>=Math.min(F.x,D.x)&&R.y<=Math.max(F.y,D.y)&&R.y>=Math.min(F.y,D.y)}function v(F){return F>0?1:F<0?-1:0}function A(F,R){return y(F.prev,F,F.next)<0?y(F,R,F.next)>=0&&y(F,F.prev,R)>=0:y(F,R,F.prev)<0||y(F,F.next,R)<0}function M(F,R){var D=new P(F.i,F.x,F.y),L=new P(R.i,R.x,R.y),B=F.next,V=R.prev;return F.next=R,R.prev=F,D.next=B,B.prev=D,L.next=D,D.prev=L,V.next=L,L.prev=V,L}function k(F,R,D,L){var B=new P(F,R,D);return L?(B.next=L.next,B.prev=L,L.next.prev=B,L.next=B):(B.prev=B,B.next=B),B}function E(F){F.next.prev=F.prev,F.prev.next=F.next,F.prevZ&&(F.prevZ.nextZ=F.nextZ),F.nextZ&&(F.nextZ.prevZ=F.prevZ)}function P(F,R,D){this.i=F,this.x=R,this.y=D,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(F,R,D,L){for(var B=0,V=R,Z=D-L;V<D;V+=L)B+=(F[Z]-F[V])*(F[V+1]+F[Z+1]),Z=V;return B}ae.exports=g,ae.exports.default=g,g.deviation=function(F,R,D,L){var B=R&&R.length,Z=Math.abs(S(F,0,B?R[0]*D:F.length,D));if(B)for(var Y=0,ee=R.length;Y<ee;Y++)Z-=Math.abs(S(F,R[Y]*D,Y<ee-1?R[Y+1]*D:F.length,D));var K=0;for(Y=0;Y<L.length;Y+=3){var oe=L[Y]*D,j=L[Y+1]*D,H=L[Y+2]*D;K+=Math.abs((F[oe]-F[H])*(F[j+1]-F[oe+1])-(F[oe]-F[j])*(F[H+1]-F[oe+1]))}return 0===Z&&0===K?0:Math.abs((K-Z)/Z)},g.flatten=function(F){for(var R=F[0][0].length,D={vertices:[],holes:[],dimensions:R},L=0,B=0;B<F.length;B++){for(var V=0;V<F[B].length;V++)for(var Z=0;Z<R;Z++)D.vertices.push(F[B][V][Z]);B>0&&D.holes.push(L+=F[B-1].length)}return D}},{}],130:[function(_,ae,ie){var g=_("strongly-connected-components");ae.exports=function(x,T){var b,e=[],r=[],t=[],a={},n=[];function d(l){var w,v,A=!1;for(r.push(l),t[l]=!0,w=0;w<n[l].length;w++)(v=n[l][w])===b?(s(b,r),A=!0):t[v]||(A=d(v));if(A)!function k(E){t[E]=!1,a.hasOwnProperty(E)&&Object.keys(a[E]).forEach(function(P){delete a[E][P],t[P]&&k(P)})}(l);else for(w=0;w<n[l].length;w++){var M=a[v=n[l][w]];M||(a[v]=M={}),M[v]=!0}return r.pop(),A}function s(l,w){var v=[].concat(w).concat(l);T?T(d):e.push(v)}function i(l){!function(P){for(var S=0;S<x.length;S++)S<P&&(x[S]=[]),x[S]=x[S].filter(function(F){return F>=P})}(l);for(var w,v=g(x).components.filter(function(P){return P.length>1}),A=1/0,M=0;M<v.length;M++)for(var k=0;k<v[M].length;k++)v[M][k]<A&&(A=v[M][k],w=M);var E=v[w];return!!E&&{leastVertex:A,adjList:x.map(function(P,S){return-1===E.indexOf(S)?[]:P.filter(function(F){return-1!==E.indexOf(F)})})}}b=0;for(var u=x.length;b<u;){var f=i(b);if(b=f.leastVertex,n=f.adjList){for(var p=0;p<n.length;p++)for(var y=0;y<n[p].length;y++){var m=n[p][y];t[+m]=!1,a[m]={}}d(b),b+=1}else b=u}return T?void 0:e}},{"strongly-connected-components":306}],131:[function(_,ae,ie){"use strict";var g=_("../../object/valid-value");ae.exports=function(){return g(this).length=0,this}},{"../../object/valid-value":162}],132:[function(_,ae,ie){"use strict";ae.exports=_("./is-implemented")()?Array.from:_("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(_,ae,ie){"use strict";ae.exports=function(){var g,x,T=Array.from;return"function"==typeof T&&(x=T(g=["raz","dwa"]),Boolean(x&&x!==g&&"dwa"===x[1]))}},{}],134:[function(_,ae,ie){"use strict";var g=_("es6-symbol").iterator,x=_("../../function/is-arguments"),T=_("../../function/is-function"),b=_("../../number/to-pos-integer"),e=_("../../object/valid-callable"),r=_("../../object/valid-value"),t=_("../../object/is-value"),a=_("../../string/is-string"),n=Array.isArray,d=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;ae.exports=function(u){var f,p,y,m,l,w,v,A,M,k,E=arguments[1],P=arguments[2];if(u=Object(r(u)),t(E)&&e(E),this&&this!==Array&&T(this))f=this;else{if(!E){if(x(u))return 1!==(l=u.length)?Array.apply(null,u):((m=new Array(1))[0]=u[0],m);if(n(u)){for(m=new Array(l=u.length),p=0;p<l;++p)m[p]=u[p];return m}}m=[]}if(!n(u))if(void 0!==(M=u[g])){for(v=e(M).call(u),f&&(m=new f),A=v.next(),p=0;!A.done;)k=E?d.call(E,P,A.value,p):A.value,f?(s.value=k,i(m,p,s)):m[p]=k,A=v.next(),++p;l=p}else if(a(u)){for(l=u.length,f&&(m=new f),p=0,y=0;p<l;++p)k=u[p],p+1<l&&(w=k.charCodeAt(0))>=55296&&w<=56319&&(k+=u[++p]),k=E?d.call(E,P,k,y):k,f?(s.value=k,i(m,y,s)):m[y]=k,++y;l=y}if(void 0===l)for(l=b(u.length),f&&(m=new f(l)),p=0;p<l;++p)k=E?d.call(E,P,u[p],p):u[p],f?(s.value=k,i(m,p,s)):m[p]=k;return f&&(s.value=null,m.length=l),m}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(_,ae,ie){"use strict";var g=Object.prototype.toString,x=g.call(function(){return arguments}());ae.exports=function(T){return g.call(T)===x}},{}],136:[function(_,ae,ie){"use strict";var g=Object.prototype.toString,x=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ae.exports=function(T){return"function"==typeof T&&x(g.call(T))}},{}],137:[function(_,ae,ie){"use strict";ae.exports=function(){}},{}],138:[function(_,ae,ie){"use strict";ae.exports=_("./is-implemented")()?Math.sign:_("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(_,ae,ie){"use strict";ae.exports=function(){var g=Math.sign;return"function"==typeof g&&1===g(10)&&-1===g(-20)}},{}],140:[function(_,ae,ie){"use strict";ae.exports=function(g){return g=Number(g),isNaN(g)||0===g?g:g>0?1:-1}},{}],141:[function(_,ae,ie){"use strict";var g=_("../math/sign"),x=Math.abs,T=Math.floor;ae.exports=function(b){return isNaN(b)?0:0!==(b=Number(b))&&isFinite(b)?g(b)*T(x(b)):b}},{"../math/sign":138}],142:[function(_,ae,ie){"use strict";var g=_("./to-integer"),x=Math.max;ae.exports=function(T){return x(0,g(T))}},{"./to-integer":141}],143:[function(_,ae,ie){"use strict";var g=_("./valid-callable"),x=_("./valid-value"),T=Function.prototype.bind,b=Function.prototype.call,e=Object.keys,r=Object.prototype.propertyIsEnumerable;ae.exports=function(t,a){return function(n,d){var s,i=arguments[2],u=arguments[3];return n=Object(x(n)),g(d),s=e(n),u&&s.sort("function"==typeof u?T.call(u,n):void 0),"function"!=typeof t&&(t=s[t]),b.call(t,s,function(f,p){return r.call(n,f)?b.call(d,i,n[f],f,n,p):a})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(_,ae,ie){"use strict";ae.exports=_("./is-implemented")()?Object.assign:_("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(_,ae,ie){"use strict";ae.exports=function(){var g,x=Object.assign;return"function"==typeof x&&(x(g={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),g.foo+g.bar+g.trzy==="razdwatrzy")}},{}],146:[function(_,ae,ie){"use strict";var g=_("../keys"),x=_("../valid-value"),T=Math.max;ae.exports=function(b,e){var r,t,a,n=T(arguments.length,2);for(b=Object(x(b)),a=function(d){try{b[d]=e[d]}catch(s){r||(r=s)}},t=1;t<n;++t)g(e=arguments[t]).forEach(a);if(void 0!==r)throw r;return b}},{"../keys":152,"../valid-value":162}],147:[function(_,ae,ie){"use strict";var g=_("../array/from"),x=_("./assign"),T=_("./valid-value");ae.exports=function(b){var e=Object(T(b)),r=arguments[1],t=Object(arguments[2]);if(e!==b&&!r)return e;var a={};return r?g(r,function(n){(t.ensure||n in b)&&(a[n]=b[n])}):x(a,b),a}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(_,ae,ie){"use strict";var g,x,T,b,e=Object.create;_("./set-prototype-of/is-implemented")()||(g=_("./set-prototype-of/shim")),ae.exports=g?1!==g.level?e:(x={},T={},b={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(r){T[r]="__proto__"!==r?b:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(x,T),Object.defineProperty(g,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:x}),function(r,t){return e(null===r?x:r,t)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(_,ae,ie){"use strict";ae.exports=_("./_iterate")("forEach")},{"./_iterate":143}],150:[function(_,ae,ie){"use strict";var g=_("./is-value"),x={function:!0,object:!0};ae.exports=function(T){return g(T)&&x[typeof T]||!1}},{"./is-value":151}],151:[function(_,ae,ie){"use strict";var g=_("../function/noop")();ae.exports=function(x){return x!==g&&null!==x}},{"../function/noop":137}],152:[function(_,ae,ie){"use strict";ae.exports=_("./is-implemented")()?Object.keys:_("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(_,ae,ie){"use strict";ae.exports=function(){try{return Object.keys("primitive"),!0}catch(g){return!1}}},{}],154:[function(_,ae,ie){"use strict";var g=_("../is-value"),x=Object.keys;ae.exports=function(T){return x(g(T)?Object(T):T)}},{"../is-value":151}],155:[function(_,ae,ie){"use strict";var g=_("./valid-callable"),x=_("./for-each"),T=Function.prototype.call;ae.exports=function(b,e){var r={},t=arguments[2];return g(e),x(b,function(a,n,d,s){r[n]=T.call(e,t,a,n,d,s)}),r}},{"./for-each":149,"./valid-callable":160}],156:[function(_,ae,ie){"use strict";var g=_("./is-value"),x=Array.prototype.forEach,T=Object.create,b=function(e,r){var t;for(t in e)r[t]=e[t]};ae.exports=function(e){var r=T(null);return x.call(arguments,function(t){g(t)&&b(Object(t),r)}),r}},{"./is-value":151}],157:[function(_,ae,ie){"use strict";ae.exports=_("./is-implemented")()?Object.setPrototypeOf:_("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(_,ae,ie){"use strict";var g=Object.create,x=Object.getPrototypeOf,T={};ae.exports=function(){var b=Object.setPrototypeOf;return"function"==typeof b&&x(b((arguments[0]||g)(null),T))===T}},{}],159:[function(_,ae,ie){"use strict";var g,t,a,n,x=_("../is-object"),T=_("../valid-value"),b=Object.prototype.isPrototypeOf,e=Object.defineProperty,r={configurable:!0,enumerable:!1,writable:!0,value:void 0};g=function(t,a){if(T(t),null===a||x(a))return t;throw new TypeError("Prototype must be null or an object")},ae.exports=(t=function(){var t,a=Object.create(null),n={},d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(d){try{(t=d.set).call(a,n)}catch(s){}if(Object.getPrototypeOf(a)===n)return{set:t,level:2}}return a.__proto__=n,Object.getPrototypeOf(a)===n?{level:2}:((a={}).__proto__=n,Object.getPrototypeOf(a)===n&&{level:1})}(),t?(2===t.level?t.set?(n=t.set,a=function(d,s){return n.call(g(d,s),s),d}):a=function(d,s){return g(d,s).__proto__=s,d}:a=function d(s,i){var u;return g(s,i),(u=b.call(d.nullPolyfill,s))&&delete d.nullPolyfill.__proto__,null===i&&(i=d.nullPolyfill),s.__proto__=i,u&&e(d.nullPolyfill,"__proto__",r),s},Object.defineProperty(a,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null),_("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(_,ae,ie){"use strict";ae.exports=function(g){if("function"!=typeof g)throw new TypeError(g+" is not a function");return g}},{}],161:[function(_,ae,ie){"use strict";var g=_("./is-object");ae.exports=function(x){if(!g(x))throw new TypeError(x+" is not an Object");return x}},{"./is-object":150}],162:[function(_,ae,ie){"use strict";var g=_("./is-value");ae.exports=function(x){if(!g(x))throw new TypeError("Cannot use null or undefined");return x}},{"./is-value":151}],163:[function(_,ae,ie){"use strict";ae.exports=_("./is-implemented")()?String.prototype.contains:_("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(_,ae,ie){"use strict";var g="razdwatrzy";ae.exports=function(){return"function"==typeof g.contains&&!0===g.contains("dwa")&&!1===g.contains("foo")}},{}],165:[function(_,ae,ie){"use strict";var g=String.prototype.indexOf;ae.exports=function(x){return g.call(this,x,arguments[1])>-1}},{}],166:[function(_,ae,ie){"use strict";var g=Object.prototype.toString,x=g.call("");ae.exports=function(T){return"string"==typeof T||T&&"object"==typeof T&&(T instanceof String||g.call(T)===x)||!1}},{}],167:[function(_,ae,ie){"use strict";var g=Object.create(null),x=Math.random;ae.exports=function(){var T;do{T=x().toString(36).slice(2)}while(g[T]);return T}},{}],168:[function(_,ae,ie){"use strict";var g,x=_("es5-ext/object/set-prototype-of"),T=_("es5-ext/string/#/contains"),b=_("d"),e=_("es6-symbol"),r=_("./"),t=Object.defineProperty;g=ae.exports=function(a,n){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");r.call(this,a),n=n?T.call(n,"key+value")?"key+value":T.call(n,"key")?"key":"value":"value",t(this,"__kind__",b("",n))},x&&x(g,r),delete g.prototype.constructor,g.prototype=Object.create(r.prototype,{_resolve:b(function(a){return"value"===this.__kind__?this.__list__[a]:"key+value"===this.__kind__?[a,this.__list__[a]]:a})}),t(g.prototype,e.toStringTag,b("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(_,ae,ie){"use strict";var g=_("es5-ext/function/is-arguments"),x=_("es5-ext/object/valid-callable"),T=_("es5-ext/string/is-string"),b=_("./get"),e=Array.isArray,r=Function.prototype.call,t=Array.prototype.some;ae.exports=function(a,n){var d,s,i,u,f,p,y,m,l=arguments[2];if(e(a)||g(a)?d="array":T(a)?d="string":a=b(a),x(n),i=function(){u=!0},"array"!==d)if("string"!==d)for(s=a.next();!s.done;){if(r.call(n,l,s.value,i),u)return;s=a.next()}else for(p=a.length,f=0;f<p&&(y=a[f],f+1<p&&(m=y.charCodeAt(0))>=55296&&m<=56319&&(y+=a[++f]),r.call(n,l,y,i),!u);++f);else t.call(a,function(w){return r.call(n,l,w,i),u})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(_,ae,ie){"use strict";var g=_("es5-ext/function/is-arguments"),x=_("es5-ext/string/is-string"),T=_("./array"),b=_("./string"),e=_("./valid-iterable"),r=_("es6-symbol").iterator;ae.exports=function(t){return"function"==typeof e(t)[r]?t[r]():g(t)?new T(t):x(t)?new b(t):new T(t)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(_,ae,ie){"use strict";var g,x=_("es5-ext/array/#/clear"),T=_("es5-ext/object/assign"),b=_("es5-ext/object/valid-callable"),e=_("es5-ext/object/valid-value"),r=_("d"),t=_("d/auto-bind"),a=_("es6-symbol"),n=Object.defineProperty,d=Object.defineProperties;ae.exports=g=function(s,i){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");d(this,{__list__:r("w",e(s)),__context__:r("w",i),__nextIndex__:r("w",0)}),i&&(b(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete g.prototype.constructor,d(g.prototype,T({_next:r(function(){var s;if(this.__list__)return this.__redo__&&void 0!==(s=this.__redo__.shift())?s:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:r(function(){return this._createResult(this._next())}),_createResult:r(function(s){return void 0===s?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:r(function(s){return this.__list__[s]}),_unBind:r(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:r(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},t({_onAdd:r(function(s){s>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(i,u){i>=s&&(this.__redo__[u]=++i)},this),this.__redo__.push(s)):n(this,"__redo__",r("c",[s])))}),_onDelete:r(function(s){var i;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(i=this.__redo__.indexOf(s))&&this.__redo__.splice(i,1),this.__redo__.forEach(function(u,f){u>s&&(this.__redo__[f]=--u)},this)))}),_onClear:r(function(){this.__redo__&&x.call(this.__redo__),this.__nextIndex__=0})}))),n(g.prototype,a.iterator,r(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(_,ae,ie){"use strict";var g=_("es5-ext/function/is-arguments"),x=_("es5-ext/object/is-value"),T=_("es5-ext/string/is-string"),b=_("es6-symbol").iterator,e=Array.isArray;ae.exports=function(r){return!(!x(r)||!e(r)&&!T(r)&&!g(r)&&"function"!=typeof r[b])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(_,ae,ie){"use strict";var g,x=_("es5-ext/object/set-prototype-of"),T=_("d"),b=_("es6-symbol"),e=_("./"),r=Object.defineProperty;g=ae.exports=function(t){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");t=String(t),e.call(this,t),r(this,"__length__",T("",t.length))},x&&x(g,e),delete g.prototype.constructor,g.prototype=Object.create(e.prototype,{_next:T(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:T(function(t){var a,n=this.__list__[t];return this.__nextIndex__===this.__length__?n:(a=n.charCodeAt(0))>=55296&&a<=56319?n+this.__list__[this.__nextIndex__++]:n})}),r(g.prototype,b.toStringTag,T("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(_,ae,ie){"use strict";var g=_("./is-iterable");ae.exports=function(x){if(!g(x))throw new TypeError(x+" is not iterable");return x}},{"./is-iterable":172}],175:[function(_,ae,ie){"use strict";ae.exports=_("./is-implemented")()?_("ext/global-this").Symbol:_("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(_,ae,ie){"use strict";var g=_("ext/global-this"),x={object:!0,symbol:!0};ae.exports=function(){var T,b=g.Symbol;if("function"!=typeof b)return!1;T=b("test symbol");try{String(T)}catch(e){return!1}return!!x[typeof b.iterator]&&!!x[typeof b.toPrimitive]&&!!x[typeof b.toStringTag]}},{"ext/global-this":188}],177:[function(_,ae,ie){"use strict";ae.exports=function(g){return!!g&&("symbol"==typeof g||!!g.constructor&&"Symbol"===g.constructor.name&&"Symbol"===g[g.constructor.toStringTag])}},{}],178:[function(_,ae,ie){"use strict";var g=_("d"),T=Object.defineProperty,b=Object.prototype,e=(0,Object.create)(null);ae.exports=function(r){for(var t,a,n=0;e[r+(n||"")];)++n;return e[r+=n||""]=!0,T(b,t="@@"+r,g.gs(null,function(d){a||(a=!0,T(this,t,g(d)),a=!1)})),t}},{d:106}],179:[function(_,ae,ie){"use strict";var g=_("d"),x=_("ext/global-this").Symbol;ae.exports=function(T){return Object.defineProperties(T,{hasInstance:g("",x&&x.hasInstance||T("hasInstance")),isConcatSpreadable:g("",x&&x.isConcatSpreadable||T("isConcatSpreadable")),iterator:g("",x&&x.iterator||T("iterator")),match:g("",x&&x.match||T("match")),replace:g("",x&&x.replace||T("replace")),search:g("",x&&x.search||T("search")),species:g("",x&&x.species||T("species")),split:g("",x&&x.split||T("split")),toPrimitive:g("",x&&x.toPrimitive||T("toPrimitive")),toStringTag:g("",x&&x.toStringTag||T("toStringTag")),unscopables:g("",x&&x.unscopables||T("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(_,ae,ie){"use strict";var g=_("d"),x=_("../../../validate-symbol"),T=Object.create(null);ae.exports=function(b){return Object.defineProperties(b,{for:g(function(e){return T[e]?T[e]:T[e]=b(String(e))}),keyFor:g(function(e){var r;for(r in x(e),T)if(T[r]===e)return r})})}},{"../../../validate-symbol":182,d:106}],181:[function(_,ae,ie){"use strict";var g,x,T,b=_("d"),e=_("./validate-symbol"),r=_("ext/global-this").Symbol,t=_("./lib/private/generate-name"),a=_("./lib/private/setup/standard-symbols"),n=_("./lib/private/setup/symbol-registry"),d=Object.create,s=Object.defineProperties,i=Object.defineProperty;if("function"==typeof r)try{String(r()),T=!0}catch(u){}else r=null;x=function(u){if(this instanceof x)throw new TypeError("Symbol is not a constructor");return g(u)},ae.exports=g=function u(f){var p;if(this instanceof u)throw new TypeError("Symbol is not a constructor");return T?r(f):(p=d(x.prototype),f=void 0===f?"":String(f),s(p,{__description__:b("",f),__name__:b("",t(f))}))},a(g),n(g),s(x.prototype,{constructor:b(g),toString:b("",function(){return this.__name__})}),s(g.prototype,{toString:b(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:b(function(){return e(this)})}),i(g.prototype,g.toPrimitive,b("",function(){var u=e(this);return"symbol"==typeof u?u:u.toString()})),i(g.prototype,g.toStringTag,b("c","Symbol")),i(x.prototype,g.toStringTag,b("c",g.prototype[g.toStringTag])),i(x.prototype,g.toPrimitive,b("c",g.prototype[g.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(_,ae,ie){"use strict";var g=_("./is-symbol");ae.exports=function(x){if(!g(x))throw new TypeError(x+" is not a symbol");return x}},{"./is-symbol":177}],183:[function(_,ae,ie){"use strict";ae.exports=_("./is-implemented")()?WeakMap:_("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(_,ae,ie){"use strict";ae.exports=function(){var g,x;if("function"!=typeof WeakMap)return!1;try{g=new WeakMap([[x={},"one"],[{},"two"],[{},"three"]])}catch(T){return!1}return"[object WeakMap]"===String(g)&&"function"==typeof g.set&&g.set({},1)===g&&"function"==typeof g.delete&&"function"==typeof g.has&&"one"===g.get(x)}},{}],185:[function(_,ae,ie){"use strict";ae.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(_,ae,ie){"use strict";var g,x=_("es5-ext/object/is-value"),T=_("es5-ext/object/set-prototype-of"),b=_("es5-ext/object/valid-object"),e=_("es5-ext/object/valid-value"),r=_("es5-ext/string/random-uniq"),t=_("d"),a=_("es6-iterator/get"),n=_("es6-iterator/for-of"),d=_("es6-symbol").toStringTag,s=_("./is-native-implemented"),i=Array.isArray,u=Object.defineProperty,f=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf;ae.exports=g=function(){var y,m=arguments[0];if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");return y=s&&T&&WeakMap!==g?T(new WeakMap,p(this)):this,x(m)&&(i(m)||(m=a(m))),u(y,"__weakMapData__",t("c","$weakMap$"+r())),m&&n(m,function(l){e(l),y.set(l[0],l[1])}),y},s&&(T&&T(g,WeakMap),g.prototype=Object.create(WeakMap.prototype,{constructor:t(g)})),Object.defineProperties(g.prototype,{delete:t(function(y){return!!f.call(b(y),this.__weakMapData__)&&(delete y[this.__weakMapData__],!0)}),get:t(function(y){if(f.call(b(y),this.__weakMapData__))return y[this.__weakMapData__]}),has:t(function(y){return f.call(b(y),this.__weakMapData__)}),set:t(function(y,m){return u(b(y),this.__weakMapData__,t("c",m)),this}),toString:t(function(){return"[object WeakMap]"})}),u(g.prototype,d,t("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(_,ae,ie){var g=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};ae.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(x){return g()}try{return __global__||g()}finally{delete Object.prototype.__global__}}()},{}],188:[function(_,ae,ie){"use strict";ae.exports=_("./is-implemented")()?globalThis:_("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(_,ae,ie){"use strict";ae.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(_,ae,ie){"use strict";var g=_("is-string-blank");ae.exports=function(x){var T=typeof x;if("string"===T){var b=x;if(0==(x=+x)&&g(b))return!1}else if("number"!==T)return!1;return x-x<1}},{"is-string-blank":237}],191:[function(_,ae,ie){var g=_("dtype");ae.exports=function(x,T,b){if(!x)throw new TypeError("must specify data as first parameter");if(b=0|+(b||0),Array.isArray(x)&&x[0]&&"number"==typeof x[0][0]){var e,r,t,a,n=x[0].length,d=x.length*n;T&&"string"!=typeof T||(T=new(g(T||"float32"))(d+b));var s=T.length-b;if(d!==s)throw new Error("source length "+d+" ("+n+"x"+x.length+") does not match destination length "+s);for(e=0,t=b;e<x.length;e++)for(r=0;r<n;r++)T[t++]=null===x[e][r]?NaN:x[e][r]}else if(T&&"string"!=typeof T)T.set(x,b);else{var i=g(T||"float32");if(Array.isArray(x)||"array"===T)for(e=0,t=b,a=(T=new i(x.length+b)).length;t<a;t++,e++)T[t]=null===x[e]?NaN:x[e];else 0===b?T=new i(x):(T=new i(x.length+b)).set(x,b)}return T}},{dtype:127}],192:[function(_,ae,ie){"use strict";var g=_("css-font/stringify"),x=[32,126];ae.exports=function(T){var b=(T=T||{}).shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],e=T.canvas||document.createElement("canvas"),r=T.font,t="number"==typeof T.step?[T.step,T.step]:T.step||[32,32],a=T.chars||x;if(r&&"string"!=typeof r&&(r=g(r)),Array.isArray(a)){if(2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1]){for(var n=[],d=a[0],s=0;d<=a[1];d++)n[s++]=String.fromCharCode(d);a=n}}else a=String(a).split("");b=b.slice(),e.width=b[0],e.height=b[1];var i=e.getContext("2d");i.fillStyle="#000",i.fillRect(0,0,e.width,e.height),i.font=r,i.textAlign="center",i.textBaseline="middle",i.fillStyle="#fff";var u=t[0]/2,f=t[1]/2;for(d=0;d<a.length;d++)i.fillText(a[d],u,f),(u+=t[0])>b[0]-t[0]/2&&(u=t[0]/2,f+=t[1]);return e}},{"css-font/stringify":102}],193:[function(_,ae,ie){"use strict";function g(e,r){r||(r={}),("string"==typeof e||Array.isArray(e))&&(r.family=e);var t=Array.isArray(r.family)?r.family.join(", "):r.family;if(!t)throw Error("`family` must be defined");var a=r.size||r.fontSize||r.em||48,d=(e=[r.style||r.fontStyle||"",r.weight||r.fontWeight||"",a].join(" ")+"px "+t,r.origin||"top");if(g.cache[t]&&a<=g.cache[t].em)return x(g.cache[t],d);var s=r.canvas||g.canvas,i=s.getContext("2d"),u={upper:void 0!==r.upper?r.upper:"H",lower:void 0!==r.lower?r.lower:"x",descent:void 0!==r.descent?r.descent:"p",ascent:void 0!==r.ascent?r.ascent:"h",tittle:void 0!==r.tittle?r.tittle:"i",overshoot:void 0!==r.overshoot?r.overshoot:"O"},f=Math.ceil(1.5*a);s.height=f,s.width=.5*f,i.font=e;var p={top:0};i.clearRect(0,0,f,f),i.textBaseline="top",i.fillStyle="black",i.fillText("H",0,0);var y=T(i.getImageData(0,0,f,f));i.clearRect(0,0,f,f),i.textBaseline="bottom",i.fillText("H",0,f);var m=T(i.getImageData(0,0,f,f));p.lineHeight=p.bottom=f-m+y,i.clearRect(0,0,f,f),i.textBaseline="alphabetic",i.fillText("H",0,f);var l=f-T(i.getImageData(0,0,f,f))-1+y;p.baseline=p.alphabetic=l,i.clearRect(0,0,f,f),i.textBaseline="middle",i.fillText("H",0,.5*f);var w=T(i.getImageData(0,0,f,f));p.median=p.middle=f-w-1+y-.5*f,i.clearRect(0,0,f,f),i.textBaseline="hanging",i.fillText("H",0,.5*f);var v=T(i.getImageData(0,0,f,f));p.hanging=f-v-1+y-.5*f,i.clearRect(0,0,f,f),i.textBaseline="ideographic",i.fillText("H",0,f);var A=T(i.getImageData(0,0,f,f));if(p.ideographic=f-A-1+y,u.upper&&(i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(u.upper,0,0),p.upper=T(i.getImageData(0,0,f,f)),p.capHeight=p.baseline-p.upper),u.lower&&(i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(u.lower,0,0),p.lower=T(i.getImageData(0,0,f,f)),p.xHeight=p.baseline-p.lower),u.tittle&&(i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(u.tittle,0,0),p.tittle=T(i.getImageData(0,0,f,f))),u.ascent&&(i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(u.ascent,0,0),p.ascent=T(i.getImageData(0,0,f,f))),u.descent&&(i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(u.descent,0,0),p.descent=b(i.getImageData(0,0,f,f))),u.overshoot){i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(u.overshoot,0,0);var M=b(i.getImageData(0,0,f,f));p.overshoot=M-l}for(var k in p)p[k]/=a;return p.em=a,g.cache[t]=p,x(p,d)}function x(e,r){var t={};for(var a in"string"==typeof r&&(r=e[r]),e)"em"!==a&&(t[a]=e[a]-r);return t}function T(e){for(var r=e.height,t=e.data,a=3;a<t.length;a+=4)if(0!==t[a])return Math.floor(.25*(a-3)/r)}function b(e){for(var r=e.height,t=e.data,a=t.length-1;a>0;a-=4)if(0!==t[a])return Math.floor(.25*(a-3)/r)}ae.exports=g,g.canvas=document.createElement("canvas"),g.cache={}},{}],194:[function(_,ae,ie){ae.exports=function(g,x){if("string"!=typeof g)throw new TypeError("must specify type string");if(x=x||{},"undefined"==typeof document&&!x.canvas)return null;var T=x.canvas||document.createElement("canvas");"number"==typeof x.width&&(T.width=x.width),"number"==typeof x.height&&(T.height=x.height);var b,e=x;try{var r=[g];0===g.indexOf("webgl")&&r.push("experimental-"+g);for(var t=0;t<r.length;t++)if(b=T.getContext(r[t],e))return b}catch(a){b=null}return b||null}},{}],195:[function(_,ae,ie){ae.exports=function(g,x){var T=x[0],b=x[1],e=x[2],r=x[3],t=x[4],a=x[5],n=x[6],d=x[7],s=x[8],i=x[9],u=x[10],f=x[11],p=x[12],y=x[13],m=x[14],l=x[15];return g[0]=a*(u*l-f*m)-i*(n*l-d*m)+y*(n*f-d*u),g[1]=-(b*(u*l-f*m)-i*(e*l-r*m)+y*(e*f-r*u)),g[2]=b*(n*l-d*m)-a*(e*l-r*m)+y*(e*d-r*n),g[3]=-(b*(n*f-d*u)-a*(e*f-r*u)+i*(e*d-r*n)),g[4]=-(t*(u*l-f*m)-s*(n*l-d*m)+p*(n*f-d*u)),g[5]=T*(u*l-f*m)-s*(e*l-r*m)+p*(e*f-r*u),g[6]=-(T*(n*l-d*m)-t*(e*l-r*m)+p*(e*d-r*n)),g[7]=T*(n*f-d*u)-t*(e*f-r*u)+s*(e*d-r*n),g[8]=t*(i*l-f*y)-s*(a*l-d*y)+p*(a*f-d*i),g[9]=-(T*(i*l-f*y)-s*(b*l-r*y)+p*(b*f-r*i)),g[10]=T*(a*l-d*y)-t*(b*l-r*y)+p*(b*d-r*a),g[11]=-(T*(a*f-d*i)-t*(b*f-r*i)+s*(b*d-r*a)),g[12]=-(t*(i*m-u*y)-s*(a*m-n*y)+p*(a*u-n*i)),g[13]=T*(i*m-u*y)-s*(b*m-e*y)+p*(b*u-e*i),g[14]=-(T*(a*m-n*y)-t*(b*m-e*y)+p*(b*n-e*a)),g[15]=T*(a*u-n*i)-t*(b*u-e*i)+s*(b*n-e*a),g}},{}],196:[function(_,ae,ie){ae.exports=function(g){var x=new Float32Array(16);return x[0]=g[0],x[1]=g[1],x[2]=g[2],x[3]=g[3],x[4]=g[4],x[5]=g[5],x[6]=g[6],x[7]=g[7],x[8]=g[8],x[9]=g[9],x[10]=g[10],x[11]=g[11],x[12]=g[12],x[13]=g[13],x[14]=g[14],x[15]=g[15],x}},{}],197:[function(_,ae,ie){ae.exports=function(g,x){return g[0]=x[0],g[1]=x[1],g[2]=x[2],g[3]=x[3],g[4]=x[4],g[5]=x[5],g[6]=x[6],g[7]=x[7],g[8]=x[8],g[9]=x[9],g[10]=x[10],g[11]=x[11],g[12]=x[12],g[13]=x[13],g[14]=x[14],g[15]=x[15],g}},{}],198:[function(_,ae,ie){ae.exports=function(){var g=new Float32Array(16);return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],199:[function(_,ae,ie){ae.exports=function(g){var x=g[0],T=g[1],b=g[2],e=g[3],r=g[4],t=g[5],a=g[6],n=g[7],d=g[8],s=g[9],i=g[10],u=g[11],f=g[12],p=g[13],y=g[14],m=g[15];return(x*t-T*r)*(i*m-u*y)-(x*a-b*r)*(s*m-u*p)+(x*n-e*r)*(s*y-i*p)+(T*a-b*t)*(d*m-u*f)-(T*n-e*t)*(d*y-i*f)+(b*n-e*a)*(d*p-s*f)}},{}],200:[function(_,ae,ie){ae.exports=function(g,x){var T=x[0],b=x[1],e=x[2],r=x[3],t=T+T,a=b+b,n=e+e,d=T*t,s=b*t,i=b*a,u=e*t,f=e*a,p=e*n,y=r*t,m=r*a,l=r*n;return g[0]=1-i-p,g[1]=s+l,g[2]=u-m,g[3]=0,g[4]=s-l,g[5]=1-d-p,g[6]=f+y,g[7]=0,g[8]=u+m,g[9]=f-y,g[10]=1-d-i,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],201:[function(_,ae,ie){ae.exports=function(g,x,T){var b,e,r,t=T[0],a=T[1],n=T[2],d=Math.sqrt(t*t+a*a+n*n);return Math.abs(d)<1e-6?null:(t*=d=1/d,a*=d,n*=d,b=Math.sin(x),e=Math.cos(x),g[0]=t*t*(r=1-e)+e,g[1]=a*t*r+n*b,g[2]=n*t*r-a*b,g[3]=0,g[4]=t*a*r-n*b,g[5]=a*a*r+e,g[6]=n*a*r+t*b,g[7]=0,g[8]=t*n*r+a*b,g[9]=a*n*r-t*b,g[10]=n*n*r+e,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g)}},{}],202:[function(_,ae,ie){ae.exports=function(g,x,T){var b=x[0],e=x[1],r=x[2],t=x[3],a=b+b,n=e+e,d=r+r,s=b*a,i=b*n,u=b*d,f=e*n,p=e*d,y=r*d,m=t*a,l=t*n,w=t*d;return g[0]=1-(f+y),g[1]=i+w,g[2]=u-l,g[3]=0,g[4]=i-w,g[5]=1-(s+y),g[6]=p+m,g[7]=0,g[8]=u+l,g[9]=p-m,g[10]=1-(s+f),g[11]=0,g[12]=T[0],g[13]=T[1],g[14]=T[2],g[15]=1,g}},{}],203:[function(_,ae,ie){ae.exports=function(g,x){return g[0]=x[0],g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=x[1],g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=x[2],g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],204:[function(_,ae,ie){ae.exports=function(g,x){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=x[0],g[13]=x[1],g[14]=x[2],g[15]=1,g}},{}],205:[function(_,ae,ie){ae.exports=function(g,x){var T=Math.sin(x),b=Math.cos(x);return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=b,g[6]=T,g[7]=0,g[8]=0,g[9]=-T,g[10]=b,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],206:[function(_,ae,ie){ae.exports=function(g,x){var T=Math.sin(x),b=Math.cos(x);return g[0]=b,g[1]=0,g[2]=-T,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=T,g[9]=0,g[10]=b,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],207:[function(_,ae,ie){ae.exports=function(g,x){var T=Math.sin(x),b=Math.cos(x);return g[0]=b,g[1]=T,g[2]=0,g[3]=0,g[4]=-T,g[5]=b,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],208:[function(_,ae,ie){ae.exports=function(g,x,T,b,e,r,t){var a=1/(T-x),n=1/(e-b),d=1/(r-t);return g[0]=2*r*a,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2*r*n,g[6]=0,g[7]=0,g[8]=(T+x)*a,g[9]=(e+b)*n,g[10]=(t+r)*d,g[11]=-1,g[12]=0,g[13]=0,g[14]=t*r*2*d,g[15]=0,g}},{}],209:[function(_,ae,ie){ae.exports=function(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],210:[function(_,ae,ie){ae.exports={create:_("./create"),clone:_("./clone"),copy:_("./copy"),identity:_("./identity"),transpose:_("./transpose"),invert:_("./invert"),adjoint:_("./adjoint"),determinant:_("./determinant"),multiply:_("./multiply"),translate:_("./translate"),scale:_("./scale"),rotate:_("./rotate"),rotateX:_("./rotateX"),rotateY:_("./rotateY"),rotateZ:_("./rotateZ"),fromRotation:_("./fromRotation"),fromRotationTranslation:_("./fromRotationTranslation"),fromScaling:_("./fromScaling"),fromTranslation:_("./fromTranslation"),fromXRotation:_("./fromXRotation"),fromYRotation:_("./fromYRotation"),fromZRotation:_("./fromZRotation"),fromQuat:_("./fromQuat"),frustum:_("./frustum"),perspective:_("./perspective"),perspectiveFromFieldOfView:_("./perspectiveFromFieldOfView"),ortho:_("./ortho"),lookAt:_("./lookAt"),str:_("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(_,ae,ie){ae.exports=function(g,x){var T=x[0],b=x[1],e=x[2],r=x[3],t=x[4],a=x[5],n=x[6],d=x[7],s=x[8],i=x[9],u=x[10],f=x[11],p=x[12],y=x[13],m=x[14],l=x[15],w=T*a-b*t,v=T*n-e*t,A=T*d-r*t,M=b*n-e*a,k=b*d-r*a,E=e*d-r*n,P=s*y-i*p,S=s*m-u*p,F=s*l-f*p,R=i*m-u*y,D=i*l-f*y,L=u*l-f*m,B=w*L-v*D+A*R+M*F-k*S+E*P;return B?(g[0]=(a*L-n*D+d*R)*(B=1/B),g[1]=(e*D-b*L-r*R)*B,g[2]=(y*E-m*k+l*M)*B,g[3]=(u*k-i*E-f*M)*B,g[4]=(n*F-t*L-d*S)*B,g[5]=(T*L-e*F+r*S)*B,g[6]=(m*A-p*E-l*v)*B,g[7]=(s*E-u*A+f*v)*B,g[8]=(t*D-a*F+d*P)*B,g[9]=(b*F-T*D-r*P)*B,g[10]=(p*k-y*A+l*w)*B,g[11]=(i*A-s*k-f*w)*B,g[12]=(a*S-t*R-n*P)*B,g[13]=(T*R-b*S+e*P)*B,g[14]=(y*v-p*M-m*w)*B,g[15]=(s*M-i*v+u*w)*B,g):null}},{}],212:[function(_,ae,ie){var g=_("./identity");ae.exports=function(x,T,b,e){var r,t,a,n,d,s,i,u,f,p,y=T[0],m=T[1],l=T[2],w=e[0],v=e[1],A=e[2],M=b[0],k=b[1],E=b[2];return Math.abs(y-M)<1e-6&&Math.abs(m-k)<1e-6&&Math.abs(l-E)<1e-6?g(x):(i=y-M,u=m-k,f=l-E,r=v*(f*=p=1/Math.sqrt(i*i+u*u+f*f))-A*(u*=p),t=A*(i*=p)-w*f,a=w*u-v*i,(p=Math.sqrt(r*r+t*t+a*a))?(r*=p=1/p,t*=p,a*=p):(r=0,t=0,a=0),n=u*a-f*t,d=f*r-i*a,s=i*t-u*r,(p=Math.sqrt(n*n+d*d+s*s))?(n*=p=1/p,d*=p,s*=p):(n=0,d=0,s=0),x[0]=r,x[1]=n,x[2]=i,x[3]=0,x[4]=t,x[5]=d,x[6]=u,x[7]=0,x[8]=a,x[9]=s,x[10]=f,x[11]=0,x[12]=-(r*y+t*m+a*l),x[13]=-(n*y+d*m+s*l),x[14]=-(i*y+u*m+f*l),x[15]=1,x)}},{"./identity":209}],213:[function(_,ae,ie){ae.exports=function(g,x,T){var b=x[0],e=x[1],r=x[2],t=x[3],a=x[4],n=x[5],d=x[6],s=x[7],i=x[8],u=x[9],f=x[10],p=x[11],y=x[12],m=x[13],l=x[14],w=x[15],v=T[0],A=T[1],M=T[2],k=T[3];return g[0]=v*b+A*a+M*i+k*y,g[1]=v*e+A*n+M*u+k*m,g[2]=v*r+A*d+M*f+k*l,g[3]=v*t+A*s+M*p+k*w,g[4]=(v=T[4])*b+(A=T[5])*a+(M=T[6])*i+(k=T[7])*y,g[5]=v*e+A*n+M*u+k*m,g[6]=v*r+A*d+M*f+k*l,g[7]=v*t+A*s+M*p+k*w,g[8]=(v=T[8])*b+(A=T[9])*a+(M=T[10])*i+(k=T[11])*y,g[9]=v*e+A*n+M*u+k*m,g[10]=v*r+A*d+M*f+k*l,g[11]=v*t+A*s+M*p+k*w,g[12]=(v=T[12])*b+(A=T[13])*a+(M=T[14])*i+(k=T[15])*y,g[13]=v*e+A*n+M*u+k*m,g[14]=v*r+A*d+M*f+k*l,g[15]=v*t+A*s+M*p+k*w,g}},{}],214:[function(_,ae,ie){ae.exports=function(g,x,T,b,e,r,t){var a=1/(x-T),n=1/(b-e),d=1/(r-t);return g[0]=-2*a,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=-2*n,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=2*d,g[11]=0,g[12]=(x+T)*a,g[13]=(e+b)*n,g[14]=(t+r)*d,g[15]=1,g}},{}],215:[function(_,ae,ie){ae.exports=function(g,x,T,b,e){var r=1/Math.tan(x/2),t=1/(b-e);return g[0]=r/T,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=r,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=(e+b)*t,g[11]=-1,g[12]=0,g[13]=0,g[14]=2*e*b*t,g[15]=0,g}},{}],216:[function(_,ae,ie){ae.exports=function(g,x,T,b){var e=Math.tan(x.upDegrees*Math.PI/180),r=Math.tan(x.downDegrees*Math.PI/180),t=Math.tan(x.leftDegrees*Math.PI/180),a=Math.tan(x.rightDegrees*Math.PI/180),n=2/(t+a),d=2/(e+r);return g[0]=n,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=d,g[6]=0,g[7]=0,g[8]=-(t-a)*n*.5,g[9]=(e-r)*d*.5,g[10]=b/(T-b),g[11]=-1,g[12]=0,g[13]=0,g[14]=b*T/(T-b),g[15]=0,g}},{}],217:[function(_,ae,ie){ae.exports=function(g,x,T,b){var e,r,t,a,n,d,s,i,u,f,p,y,m,l,w,v,A,M,k,E,P,S,F,R,D=b[0],L=b[1],B=b[2],V=Math.sqrt(D*D+L*L+B*B);return Math.abs(V)<1e-6?null:(D*=V=1/V,L*=V,B*=V,e=Math.sin(T),r=Math.cos(T),n=x[1],d=x[2],s=x[3],u=x[5],f=x[6],p=x[7],m=x[9],l=x[10],w=x[11],k=D*L*(t=1-r)-B*e,E=L*L*t+r,P=B*L*t+D*e,S=D*B*t+L*e,F=L*B*t-D*e,R=B*B*t+r,g[0]=(a=x[0])*(v=D*D*t+r)+(i=x[4])*(A=L*D*t+B*e)+(y=x[8])*(M=B*D*t-L*e),g[1]=n*v+u*A+m*M,g[2]=d*v+f*A+l*M,g[3]=s*v+p*A+w*M,g[4]=a*k+i*E+y*P,g[5]=n*k+u*E+m*P,g[6]=d*k+f*E+l*P,g[7]=s*k+p*E+w*P,g[8]=a*S+i*F+y*R,g[9]=n*S+u*F+m*R,g[10]=d*S+f*F+l*R,g[11]=s*S+p*F+w*R,x!==g&&(g[12]=x[12],g[13]=x[13],g[14]=x[14],g[15]=x[15]),g)}},{}],218:[function(_,ae,ie){ae.exports=function(g,x,T){var b=Math.sin(T),e=Math.cos(T),r=x[4],t=x[5],a=x[6],n=x[7],d=x[8],s=x[9],i=x[10],u=x[11];return x!==g&&(g[0]=x[0],g[1]=x[1],g[2]=x[2],g[3]=x[3],g[12]=x[12],g[13]=x[13],g[14]=x[14],g[15]=x[15]),g[4]=r*e+d*b,g[5]=t*e+s*b,g[6]=a*e+i*b,g[7]=n*e+u*b,g[8]=d*e-r*b,g[9]=s*e-t*b,g[10]=i*e-a*b,g[11]=u*e-n*b,g}},{}],219:[function(_,ae,ie){ae.exports=function(g,x,T){var b=Math.sin(T),e=Math.cos(T),r=x[0],t=x[1],a=x[2],n=x[3],d=x[8],s=x[9],i=x[10],u=x[11];return x!==g&&(g[4]=x[4],g[5]=x[5],g[6]=x[6],g[7]=x[7],g[12]=x[12],g[13]=x[13],g[14]=x[14],g[15]=x[15]),g[0]=r*e-d*b,g[1]=t*e-s*b,g[2]=a*e-i*b,g[3]=n*e-u*b,g[8]=r*b+d*e,g[9]=t*b+s*e,g[10]=a*b+i*e,g[11]=n*b+u*e,g}},{}],220:[function(_,ae,ie){ae.exports=function(g,x,T){var b=Math.sin(T),e=Math.cos(T),r=x[0],t=x[1],a=x[2],n=x[3],d=x[4],s=x[5],i=x[6],u=x[7];return x!==g&&(g[8]=x[8],g[9]=x[9],g[10]=x[10],g[11]=x[11],g[12]=x[12],g[13]=x[13],g[14]=x[14],g[15]=x[15]),g[0]=r*e+d*b,g[1]=t*e+s*b,g[2]=a*e+i*b,g[3]=n*e+u*b,g[4]=d*e-r*b,g[5]=s*e-t*b,g[6]=i*e-a*b,g[7]=u*e-n*b,g}},{}],221:[function(_,ae,ie){ae.exports=function(g,x,T){var b=T[0],e=T[1],r=T[2];return g[0]=x[0]*b,g[1]=x[1]*b,g[2]=x[2]*b,g[3]=x[3]*b,g[4]=x[4]*e,g[5]=x[5]*e,g[6]=x[6]*e,g[7]=x[7]*e,g[8]=x[8]*r,g[9]=x[9]*r,g[10]=x[10]*r,g[11]=x[11]*r,g[12]=x[12],g[13]=x[13],g[14]=x[14],g[15]=x[15],g}},{}],222:[function(_,ae,ie){ae.exports=function(g){return"mat4("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+", "+g[4]+", "+g[5]+", "+g[6]+", "+g[7]+", "+g[8]+", "+g[9]+", "+g[10]+", "+g[11]+", "+g[12]+", "+g[13]+", "+g[14]+", "+g[15]+")"}},{}],223:[function(_,ae,ie){ae.exports=function(g,x,T){var b,e,r,t,a,n,d,s,i,u,f,p,y=T[0],m=T[1],l=T[2];return x===g?(g[12]=x[0]*y+x[4]*m+x[8]*l+x[12],g[13]=x[1]*y+x[5]*m+x[9]*l+x[13],g[14]=x[2]*y+x[6]*m+x[10]*l+x[14],g[15]=x[3]*y+x[7]*m+x[11]*l+x[15]):(e=x[1],r=x[2],t=x[3],a=x[4],n=x[5],d=x[6],s=x[7],i=x[8],u=x[9],f=x[10],p=x[11],g[0]=b=x[0],g[1]=e,g[2]=r,g[3]=t,g[4]=a,g[5]=n,g[6]=d,g[7]=s,g[8]=i,g[9]=u,g[10]=f,g[11]=p,g[12]=b*y+a*m+i*l+x[12],g[13]=e*y+n*m+u*l+x[13],g[14]=r*y+d*m+f*l+x[14],g[15]=t*y+s*m+p*l+x[15]),g}},{}],224:[function(_,ae,ie){ae.exports=function(g,x){if(g===x){var T=x[1],b=x[2],e=x[3],r=x[6],t=x[7],a=x[11];g[1]=x[4],g[2]=x[8],g[3]=x[12],g[4]=T,g[6]=x[9],g[7]=x[13],g[8]=b,g[9]=r,g[11]=x[14],g[12]=e,g[13]=t,g[14]=a}else g[0]=x[0],g[1]=x[4],g[2]=x[8],g[3]=x[12],g[4]=x[1],g[5]=x[5],g[6]=x[9],g[7]=x[13],g[8]=x[2],g[9]=x[6],g[10]=x[10],g[11]=x[14],g[12]=x[3],g[13]=x[7],g[14]=x[11],g[15]=x[15];return g}},{}],225:[function(_,ae,ie){"use strict";var g=_("css-font"),x=_("pick-by-alias"),T=_("regl"),b=_("gl-util/context"),e=_("es6-weak-map"),r=_("color-normalize"),t=_("font-atlas"),a=_("typedarray-pool"),n=_("parse-rect"),d=_("is-plain-obj"),s=_("parse-unit"),i=_("to-px"),u=_("detect-kerning"),f=_("object-assign"),p=_("font-measure"),y=_("flatten-vertex-data"),m=_("bit-twiddle").nextPow2,l=new e,w=!1;if(document.body){var v=document.body.appendChild(document.createElement("div"));v.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(v).fontStretch&&(w=!0),document.body.removeChild(v)}var A=function(M){var k;this.gl="function"==typeof(k=M)&&k._gl&&k.prop&&k.texture&&k.buffer?(M={regl:M}).regl._gl:b(M),this.shader=l.get(this.gl),this.regl=this.shader?this.shader.regl:M.regl||T({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),l.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(d(M)?M:{})};A.prototype.createShader=function(){var M=this.regl,k=M({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:M.prop("count"),offset:M.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:M.this("sizeBuffer")},width:{offset:0,stride:8,buffer:M.this("sizeBuffer")},char:M.this("charBuffer"),position:M.this("position")},uniforms:{atlasSize:function(E,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(E,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(E,P){return P.atlas.texture},charStep:function(E,P){return P.atlas.step},em:function(E,P){return P.atlas.em},color:M.prop("color"),opacity:M.prop("opacity"),viewport:M.this("viewportArray"),scale:M.this("scale"),align:M.prop("align"),baseline:M.prop("baseline"),translate:M.this("translate"),positionOffset:M.prop("positionOffset")},primitive:"points",viewport:M.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:M,draw:k,atlas:{}}},A.prototype.update=function(M){var k=this;if("string"==typeof M)M={text:M};else if(!M)return;null!=(M=x(M,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(M.opacity)?M.opacity.map(function(Te){return parseFloat(Te)}):parseFloat(M.opacity)),null!=M.viewport&&(this.viewport=n(M.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=M.kerning&&(this.kerning=M.kerning),null!=M.offset&&("number"==typeof M.offset&&(M.offset=[M.offset,0]),this.positionOffset=y(M.offset)),M.direction&&(this.direction=M.direction),M.range&&(this.range=M.range,this.scale=[1/(M.range[2]-M.range[0]),1/(M.range[3]-M.range[1])],this.translate=[-M.range[0],-M.range[1]]),M.scale&&(this.scale=M.scale),M.translate&&(this.translate=M.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||M.font||(M.font=A.baseFontSize+"px sans-serif");var E,P=!1,S=!1;if(M.font&&(Array.isArray(M.font)?M.font:[M.font]).forEach(function(Te,Ie){if("string"==typeof Te)try{Te=g.parse(Te)}catch(lt){Te=g.parse(A.baseFontSize+"px "+Te)}else Te=g.parse(g.stringify(Te));var Ce=g.stringify({size:A.baseFontSize,family:Te.family,stretch:w?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style}),Pe=s(Te.size),Ve=Math.round(Pe[0]*i(Pe[1]));if(Ve!==k.fontSize[Ie]&&(S=!0,k.fontSize[Ie]=Ve),!(k.font[Ie]&&Ce==k.font[Ie].baseString||(P=!0,k.font[Ie]=A.fonts[Ce],k.font[Ie]))){var qe=Te.family.join(", "),Je=[Te.style];Te.style!=Te.variant&&Je.push(Te.variant),Te.variant!=Te.weight&&Je.push(Te.weight),w&&Te.weight!=Te.stretch&&Je.push(Te.stretch),k.font[Ie]={baseString:Ce,family:qe,weight:Te.weight,stretch:Te.stretch,style:Te.style,variant:Te.variant,width:{},kerning:{},metrics:p(qe,{origin:"top",fontSize:A.baseFontSize,fontStyle:Je.join(" ")})},A.fonts[Ce]=k.font[Ie]}}),(P||S)&&this.font.forEach(function(Te,Ie){var Ce=g.stringify({size:k.fontSize[Ie],family:Te.family,stretch:w?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style});k.fontAtlas[Ie]=k.shader.atlas[Ce],k.fontAtlas[Ie]||(k.shader.atlas[Ce]=k.fontAtlas[Ie]={fontString:Ce,step:2*Math.ceil(k.fontSize[Ie]*Te.metrics.bottom*.5),em:k.fontSize[Ie],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:k.regl.texture()}),null==M.text&&(M.text=k.text)}),"string"==typeof M.text&&M.position&&M.position.length>2){for(var F=Array(.5*M.position.length),R=0;R<F.length;R++)F[R]=M.text;M.text=F}if(null!=M.text||P){if(this.textOffsets=[0],Array.isArray(M.text)){this.count=M.text[0].length,this.counts=[this.count];for(var D=1;D<M.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+M.text[D-1].length,this.count+=M.text[D].length,this.counts.push(M.text[D].length);this.text=M.text.join("")}else this.text=M.text,this.count=this.text.length,this.counts=[this.count];E=[],this.font.forEach(function(Te,Ie){A.atlasContext.font=Te.baseString;for(var Ce=k.fontAtlas[Ie],Pe=0;Pe<k.text.length;Pe++){var Ve=k.text.charAt(Pe);if(null==Ce.ids[Ve]&&(Ce.ids[Ve]=Ce.chars.length,Ce.chars.push(Ve),E.push(Ve)),null==Te.width[Ve]&&(Te.width[Ve]=A.atlasContext.measureText(Ve).width/A.baseFontSize,k.kerning)){var qe=[];for(var Je in Te.width)qe.push(Je+Ve,Ve+Je);f(Te.kerning,u(Te.family,{pairs:qe}))}}})}if(M.position)if(M.position.length>2){for(var L=!M.position[0].length,B=a.mallocFloat(2*this.count),V=0,Z=0;V<this.counts.length;V++){var Y=this.counts[V];if(L)for(var ee=0;ee<Y;ee++)B[Z++]=M.position[2*V],B[Z++]=M.position[2*V+1];else for(var Q=0;Q<Y;Q++)B[Z++]=M.position[V][0],B[Z++]=M.position[V][1]}this.position.call?this.position({type:"float",data:B}):this.position=this.regl.buffer({type:"float",data:B}),a.freeFloat(B)}else this.position.destroy&&this.position.destroy(),this.position={constant:M.position};if(M.text||P){var $=a.mallocUint8(this.count),K=a.mallocFloat(2*this.count);this.textWidth=[];for(var oe=0,j=0;oe<this.counts.length;oe++){for(var H=this.counts[oe],G=this.font[oe]||this.font[0],re=this.fontAtlas[oe]||this.fontAtlas[0],q=0;q<H;q++){var te=this.text.charAt(j),ne=this.text.charAt(j-1);if($[j]=re.ids[te],K[2*j]=G.width[te],q){var de=K[2*j-1]+.5*K[2*j-2]+.5*K[2*j];if(this.kerning){var he=G.kerning[ne+te];he&&(de+=.001*he)}K[2*j+1]=de}else K[2*j+1]=.5*K[2*j];j++}this.textWidth.push(K.length?.5*K[2*j-2]+K[2*j-1]:0)}M.align||(M.align=this.align),this.charBuffer({data:$,type:"uint8",usage:"stream"}),this.sizeBuffer({data:K,type:"float",usage:"stream"}),a.freeUint8($),a.freeFloat(K),E.length&&this.font.forEach(function(Te,Ie){var Ce=k.fontAtlas[Ie],Pe=Ce.step,Ve=Math.floor(A.maxAtlasSize/Pe),qe=Math.min(Ve,Ce.chars.length),Je=Math.ceil(Ce.chars.length/qe),lt=m(qe*Pe),He=m(Je*Pe);Ce.width=lt,Ce.height=He,Ce.rows=Je,Ce.cols=qe,Ce.em&&Ce.texture({data:t({canvas:A.atlasCanvas,font:Ce.fontString,chars:Ce.chars,shape:[lt,He],step:[Pe,Pe]})})})}if(M.align&&(this.align=M.align,this.alignOffset=this.textWidth.map(function(Te,Ie){var Ce=Array.isArray(k.align)?k.align.length>1?k.align[Ie]:k.align[0]:k.align;if("number"==typeof Ce)return Ce;switch(Ce){case"right":case"end":return-Te;case"center":case"centre":case"middle":return.5*-Te}return 0})),null==this.baseline&&null==M.baseline&&(M.baseline=0),null!=M.baseline&&(this.baseline=M.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Te,Ie){var Ce=(k.font[Ie]||k.font[0]).metrics,Pe=0;return-1*((Pe+=.5*Ce.bottom)+("number"==typeof Te?Te-Ce.baseline:-Ce[Te]))})),null!=M.color)if(M.color||(M.color="transparent"),"string"!=typeof M.color&&isNaN(M.color)){var be;if("number"==typeof M.color[0]&&M.color.length>this.counts.length){var ge=M.color.length;be=a.mallocUint8(ge);for(var we=(M.color.subarray||M.color.slice).bind(M.color),ke=0;ke<ge;ke+=4)be.set(r(we(ke,ke+4),"uint8"),ke)}else{var De=M.color.length;be=a.mallocUint8(4*De);for(var Ee=0;Ee<De;Ee++)be.set(r(M.color[Ee]||0,"uint8"),4*Ee)}this.color=be}else this.color=r(M.color,"uint8");if(M.position||M.text||M.color||M.baseline||M.align||M.font||M.offset||M.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Re=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Re);for(var ve=0;ve<this.batch.length;ve++)this.batch[ve]={count:this.counts.length>1?this.counts[ve]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ve]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ve,4*ve+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ve]:this.opacity,baseline:null!=this.baselineOffset[ve]?this.baselineOffset[ve]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[ve]?this.alignOffset[ve]:this.alignOffset[0]:0,atlas:this.fontAtlas[ve]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ve,2*ve+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},A.prototype.destroy=function(){},A.prototype.kerning=!0,A.prototype.position={constant:new Float32Array(2)},A.prototype.translate=null,A.prototype.scale=null,A.prototype.font=null,A.prototype.text="",A.prototype.positionOffset=[0,0],A.prototype.opacity=1,A.prototype.color=new Uint8Array([0,0,0,255]),A.prototype.alignOffset=[0,0],A.maxAtlasSize=1024,A.atlasCanvas=document.createElement("canvas"),A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1}),A.baseFontSize=64,A.fonts={},ae.exports=A},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(_,ae,ie){(function(g){(function(){"use strict";var x=_("pick-by-alias");function T(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*g.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*g.innerHeight);else{var t=r.container.getBoundingClientRect();r.canvas.width=r.width||t.right-t.left,r.canvas.height=r.height||t.bottom-t.top}}function b(r){return"function"==typeof r.getContext&&"width"in r&&"height"in r}function e(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}ae.exports=function(r){var t,n;if(r?"string"==typeof r&&(r={container:r}):r={},(r=b(r)||"string"==typeof(t=r).nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect?{container:r}:"function"==typeof(n=r).drawArrays||"function"==typeof n.drawElements?{gl:r}:x(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(r.pixelRatio=g.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if("string"==typeof r.container){var a=document.querySelector(r.container);if(!a)throw Error("Element "+r.container+" is not found");r.container=a}b(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=e(),r.container.appendChild(r.canvas),T(r))}else if(!r.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");r.container=document.body||document.documentElement,r.canvas=e(),r.container.appendChild(r.canvas),T(r)}return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(n){try{r.gl=r.canvas.getContext(n,r.attrs)}catch(d){}return r.gl}),r.gl}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pick-by-alias":253}],227:[function(_,ae,ie){ae.exports=function(g){"string"==typeof g&&(g=[g]);for(var x=[].slice.call(arguments,1),T=[],b=0;b<g.length-1;b++)T.push(g[b],x[b]||"");return T.push(g[b]),T.join("")}},{}],228:[function(_,ae,ie){(function(g){(function(){"use strict";var x,T=_("is-browser");x="function"==typeof g.matchMedia?!g.matchMedia("(hover: none)").matches:T,ae.exports=x}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":232}],229:[function(_,ae,ie){"use strict";var g=_("is-browser");ae.exports=g&&function(){var x=!1;try{var T=Object.defineProperty({},"passive",{get:function(){x=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch(b){x=!1}return x}()},{"is-browser":232}],230:[function(_,ae,ie){ie.read=function(g,x,T,b,e){var r,t,a=8*e-b-1,n=(1<<a)-1,d=n>>1,s=-7,i=T?e-1:0,u=T?-1:1,f=g[x+i];for(i+=u,r=f&(1<<-s)-1,f>>=-s,s+=a;s>0;r=256*r+g[x+i],i+=u,s-=8);for(t=r&(1<<-s)-1,r>>=-s,s+=b;s>0;t=256*t+g[x+i],i+=u,s-=8);if(0===r)r=1-d;else{if(r===n)return t?NaN:1/0*(f?-1:1);t+=Math.pow(2,b),r-=d}return(f?-1:1)*t*Math.pow(2,r-b)},ie.write=function(g,x,T,b,e,r){var t,a,n,d=8*r-e-1,s=(1<<d)-1,i=s>>1,u=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,f=b?0:r-1,p=b?1:-1,y=x<0||0===x&&1/x<0?1:0;for(x=Math.abs(x),isNaN(x)||x===1/0?(a=isNaN(x)?1:0,t=s):(t=Math.floor(Math.log(x)/Math.LN2),x*(n=Math.pow(2,-t))<1&&(t--,n*=2),(x+=t+i>=1?u/n:u*Math.pow(2,1-i))*n>=2&&(t++,n/=2),t+i>=s?(a=0,t=s):t+i>=1?(a=(x*n-1)*Math.pow(2,e),t+=i):(a=x*Math.pow(2,i-1)*Math.pow(2,e),t=0));e>=8;g[T+f]=255&a,f+=p,a/=256,e-=8);for(t=t<<e|a,d+=e;d>0;g[T+f]=255&t,f+=p,t/=256,d-=8);g[T+f-p]|=128*y}},{}],231:[function(_,ae,ie){ae.exports="function"==typeof Object.create?function(g,x){x&&(g.super_=x,g.prototype=Object.create(x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,x){if(x){g.super_=x;var T=function(){};T.prototype=x.prototype,g.prototype=new T,g.prototype.constructor=g}}},{}],232:[function(_,ae,ie){ae.exports=!0},{}],233:[function(_,ae,ie){"use strict";ae.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(_,ae,ie){"use strict";ae.exports=T,ae.exports.isMobile=T,ae.exports.default=T;var g=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,x=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function T(b){b||(b={});var e=b.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var r=b.tablet?x.test(e):g.test(e);return!r&&b.tablet&&b.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(r=!0),r}},{}],235:[function(_,ae,ie){"use strict";ae.exports=function(g){var x=typeof g;return null!==g&&("object"===x||"function"===x)}},{}],236:[function(_,ae,ie){"use strict";var g=Object.prototype.toString;ae.exports=function(x){var T;return"[object Object]"===g.call(x)&&(null===(T=Object.getPrototypeOf(x))||T===Object.getPrototypeOf({}))}},{}],237:[function(_,ae,ie){"use strict";ae.exports=function(g){for(var x,T=g.length,b=0;b<T;b++)if(((x=g.charCodeAt(b))<9||x>13)&&32!==x&&133!==x&&160!==x&&5760!==x&&6158!==x&&(x<8192||x>8205)&&8232!==x&&8233!==x&&8239!==x&&8287!==x&&8288!==x&&12288!==x&&65279!==x)return!1;return!0}},{}],238:[function(_,ae,ie){"use strict";ae.exports=function(g){return"string"==typeof g&&(g=g.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(g)&&/[\dz]$/i.test(g)&&g.length>4))}},{}],239:[function(_,ae,ie){var g,x;g=this,x=function(){"use strict";var g,x,T;function b(e,r){if(g)if(x){var t="var sharedChunk = {}; ("+g+")(sharedChunk); ("+x+")(sharedChunk);",a={};g(a),(T=r(a)).workerUrl=window.URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}else x=r;else g=r}return b(0,function(e){function r(C,z){return C(z={exports:{}},z.exports),z.exports}var t=a;function a(C,z,J,ce){this.cx=3*C,this.bx=3*(J-C)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*z,this.by=3*(ce-z)-this.cy,this.ay=1-this.cy-this.by,this.p1x=C,this.p1y=ce,this.p2x=J,this.p2y=ce}a.prototype.sampleCurveX=function(C){return((this.ax*C+this.bx)*C+this.cx)*C},a.prototype.sampleCurveY=function(C){return((this.ay*C+this.by)*C+this.cy)*C},a.prototype.sampleCurveDerivativeX=function(C){return(3*this.ax*C+2*this.bx)*C+this.cx},a.prototype.solveCurveX=function(C,z){var J,ce,ye,Me,Fe;for(void 0===z&&(z=1e-6),ye=C,Fe=0;Fe<8;Fe++){if(Me=this.sampleCurveX(ye)-C,Math.abs(Me)<z)return ye;var Ye=this.sampleCurveDerivativeX(ye);if(Math.abs(Ye)<1e-6)break;ye-=Me/Ye}if((ye=C)<(J=0))return J;if(ye>(ce=1))return ce;for(;J<ce;){if(Me=this.sampleCurveX(ye),Math.abs(Me-C)<z)return ye;C>Me?J=ye:ce=ye,ye=.5*(ce-J)+J}return ye},a.prototype.solve=function(C,z){return this.sampleCurveY(this.solveCurveX(C,z))};var n=d;function d(C,z){this.x=C,this.y=z}function s(C,z,J,ce){var ye=new t(C,z,J,ce);return function(Me){return ye.solve(Me)}}d.prototype={clone:function(){return new d(this.x,this.y)},add:function(C){return this.clone()._add(C)},sub:function(C){return this.clone()._sub(C)},multByPoint:function(C){return this.clone()._multByPoint(C)},divByPoint:function(C){return this.clone()._divByPoint(C)},mult:function(C){return this.clone()._mult(C)},div:function(C){return this.clone()._div(C)},rotate:function(C){return this.clone()._rotate(C)},rotateAround:function(C,z){return this.clone()._rotateAround(C,z)},matMult:function(C){return this.clone()._matMult(C)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(C){return this.x===C.x&&this.y===C.y},dist:function(C){return Math.sqrt(this.distSqr(C))},distSqr:function(C){var z=C.x-this.x,J=C.y-this.y;return z*z+J*J},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(C){return Math.atan2(this.y-C.y,this.x-C.x)},angleWith:function(C){return this.angleWithSep(C.x,C.y)},angleWithSep:function(C,z){return Math.atan2(this.x*z-this.y*C,this.x*C+this.y*z)},_matMult:function(C){var J=C[2]*this.x+C[3]*this.y;return this.x=C[0]*this.x+C[1]*this.y,this.y=J,this},_add:function(C){return this.x+=C.x,this.y+=C.y,this},_sub:function(C){return this.x-=C.x,this.y-=C.y,this},_mult:function(C){return this.x*=C,this.y*=C,this},_div:function(C){return this.x/=C,this.y/=C,this},_multByPoint:function(C){return this.x*=C.x,this.y*=C.y,this},_divByPoint:function(C){return this.x/=C.x,this.y/=C.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var C=this.y;return this.y=this.x,this.x=-C,this},_rotate:function(C){var z=Math.cos(C),J=Math.sin(C),ye=J*this.x+z*this.y;return this.x=z*this.x-J*this.y,this.y=ye,this},_rotateAround:function(C,z){var J=Math.cos(C),ce=Math.sin(C),Me=z.y+ce*(this.x-z.x)+J*(this.y-z.y);return this.x=z.x+J*(this.x-z.x)-ce*(this.y-z.y),this.y=Me,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(C){return C instanceof d?C:Array.isArray(C)?new d(C[0],C[1]):C};var i=s(.25,.1,.25,1);function u(C,z,J){return Math.min(J,Math.max(z,C))}function f(C,z,J){var ce=J-z,ye=((C-z)%ce+ce)%ce+z;return ye===z?J:ye}function p(C){for(var z=[],J=arguments.length-1;J-- >0;)z[J]=arguments[J+1];for(var ce=0,ye=z;ce<ye.length;ce+=1){var Me=ye[ce];for(var Fe in Me)C[Fe]=Me[Fe]}return C}var y=1;function m(){return y++}function l(){return function C(z){return z?(z^16*Math.random()>>z/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,C)}()}function w(C){return!!C&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(C)}function v(C,z){C.forEach(function(J){z[J]&&(z[J]=z[J].bind(z))})}function A(C,z){return-1!==C.indexOf(z,C.length-z.length)}function M(C,z,J){var ce={};for(var ye in C)ce[ye]=z.call(J||this,C[ye],ye,C);return ce}function k(C,z,J){var ce={};for(var ye in C)z.call(J||this,C[ye],ye,C)&&(ce[ye]=C[ye]);return ce}function E(C){return Array.isArray(C)?C.map(E):"object"==typeof C&&C?M(C,E):C}var P={};function S(C){P[C]||("undefined"!=typeof console&&console.warn(C),P[C]=!0)}function F(C,z,J){return(J.y-C.y)*(z.x-C.x)>(z.y-C.y)*(J.x-C.x)}function R(C){for(var z=0,J=0,ce=C.length,ye=ce-1,Me=void 0,Fe=void 0;J<ce;ye=J++)z+=((Fe=C[ye]).x-(Me=C[J]).x)*(Me.y+Fe.y);return z}function D(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function L(C){var z={};if(C.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ce,ye,Me,Fe){var Ye=Me||Fe;return z[ye]=!Ye||Ye.toLowerCase(),""}),z["max-age"]){var J=parseInt(z["max-age"],10);isNaN(J)?delete z["max-age"]:z["max-age"]=J}return z}var B=null;function V(C){if(null==B){var z=C.navigator?C.navigator.userAgent:null;B=!!C.safari||!(!z||!(/\b(iPad|iPhone|iPod)\b/.test(z)||z.match("Safari")&&!z.match("Chrome")))}return B}function Z(C){try{var z=self[C];return z.setItem("_mapbox_test_",1),z.removeItem("_mapbox_test_"),!0}catch(J){return!1}}var Y,ee,Q,$,K=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),oe=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,j=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,H={now:K,frame:function(C){var z=oe(C);return{cancel:function(){return j(z)}}},getImageData:function(C,z){void 0===z&&(z=0);var J=self.document.createElement("canvas"),ce=J.getContext("2d");if(!ce)throw new Error("failed to create canvas 2d context");return J.width=C.width,J.height=C.height,ce.drawImage(C,0,0,C.width,C.height),ce.getImageData(-z,-z,C.width+2*z,C.height+2*z)},resolveURL:function(C){return Y||(Y=self.document.createElement("a")),Y.href=C,Y.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==ee&&(ee=self.matchMedia("(prefers-reduced-motion: reduce)")),ee.matches)}},G={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},re={supported:!1,testSupport:function(C){q||!$||(te?ne(C):Q=C)}},q=!1,te=!1;function ne(C){var z=C.createTexture();C.bindTexture(C.TEXTURE_2D,z);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,$),C.isContextLost())return;re.supported=!0}catch(J){}C.deleteTexture(z),q=!0}self.document&&(($=self.document.createElement("img")).onload=function(){Q&&ne(Q),Q=null,te=!0},$.onerror=function(){q=!0,Q=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var le="01",ue=function(C,z){this._transformRequestFn=C,this._customAccessToken=z,this._createSkuToken()};function de(C){return 0===C.indexOf("mapbox:")}ue.prototype._createSkuToken=function(){var C=function(){for(var z="",J=0;J<10;J++)z+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",le,z].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},ue.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ue.prototype.transformRequest=function(C,z){return this._transformRequestFn&&this._transformRequestFn(C,z)||{url:C}},ue.prototype.normalizeStyleURL=function(C,z){if(!de(C))return C;var J=we(C);return J.path="/styles/v1"+J.path,this._makeAPIURL(J,this._customAccessToken||z)},ue.prototype.normalizeGlyphsURL=function(C,z){if(!de(C))return C;var J=we(C);return J.path="/fonts/v1"+J.path,this._makeAPIURL(J,this._customAccessToken||z)},ue.prototype.normalizeSourceURL=function(C,z){if(!de(C))return C;var J=we(C);return J.path="/v4/"+J.authority+".json",J.params.push("secure"),this._makeAPIURL(J,this._customAccessToken||z)},ue.prototype.normalizeSpriteURL=function(C,z,J,ce){var ye=we(C);return de(C)?(ye.path="/styles/v1"+ye.path+"/sprite"+z+J,this._makeAPIURL(ye,this._customAccessToken||ce)):(ye.path+=""+z+J,ke(ye))},ue.prototype.normalizeTileURL=function(C,z){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!de(C))return C;var J=we(C);J.path=J.path.replace(/(\.(png|jpg)\d*)(?=$)/,(H.devicePixelRatio>=2||512===z?"@2x":"")+(re.supported?".webp":"$1")),J.path=J.path.replace(/^.+\/v4\//,"/"),J.path="/v4"+J.path;var Me=this._customAccessToken||function(Fe){for(var Ye=0,ot=Fe;Ye<ot.length;Ye+=1){var _t=ot[Ye].match(/^access_token=(.*)$/);if(_t)return _t[1]}return null}(J.params)||G.ACCESS_TOKEN;return G.REQUIRE_ACCESS_TOKEN&&Me&&this._skuToken&&J.params.push("sku="+this._skuToken),this._makeAPIURL(J,Me)},ue.prototype.canonicalizeTileURL=function(C,z){var J=we(C);if(!J.path.match(/(^\/v4\/)/)||!J.path.match(/\.[\w]+$/))return C;var ce="mapbox://tiles/";ce+=J.path.replace("/v4/","");var ye=J.params;return z&&(ye=ye.filter(function(Me){return!Me.match(/^access_token=/)})),ye.length&&(ce+="?"+ye.join("&")),ce},ue.prototype.canonicalizeTileset=function(C,z){for(var J=!!z&&de(z),ce=[],ye=0,Me=C.tiles||[];ye<Me.length;ye+=1){var Fe=Me[ye];be(Fe)?ce.push(this.canonicalizeTileURL(Fe,J)):ce.push(Fe)}return ce},ue.prototype._makeAPIURL=function(C,z){var J="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ce=we(G.API_URL);if(C.protocol=ce.protocol,C.authority=ce.authority,"/"!==ce.path&&(C.path=""+ce.path+C.path),!G.REQUIRE_ACCESS_TOKEN)return ke(C);if(!(z=z||G.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+J);if("s"===z[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+J);return C.params=C.params.filter(function(ye){return-1===ye.indexOf("access_token")}),C.params.push("access_token="+z),ke(C)};var he=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function be(C){return he.test(C)}var ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function we(C){var z=C.match(ge);if(!z)throw new Error("Unable to parse URL object");return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("&"):[]}}function ke(C){var z=C.params.length?"?"+C.params.join("&"):"";return C.protocol+"://"+C.authority+C.path+z}function De(C){if(!C)return null;var J=C.split(".");if(!J||3!==J.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(J[1]).split("").map(function(ce){return"%"+("00"+ce.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(ce){return null}}var Ee=function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ee.prototype.getStorageKey=function(C){var ce,J=De(G.ACCESS_TOKEN);return ce=J&&J.u?self.btoa(encodeURIComponent(J.u).replace(/%([0-9A-F]{2})/g,function(ye,Me){return String.fromCharCode(Number("0x"+Me))})):G.ACCESS_TOKEN||"",C?"mapbox.eventData."+C+":"+ce:"mapbox.eventData:"+ce},Ee.prototype.fetchEventData=function(){var C=Z("localStorage"),z=this.getStorageKey(),J=this.getStorageKey("uuid");if(C)try{var ce=self.localStorage.getItem(z);ce&&(this.eventData=JSON.parse(ce));var ye=self.localStorage.getItem(J);ye&&(this.anonId=ye)}catch(Me){S("Unable to read from LocalStorage")}},Ee.prototype.saveEventData=function(){var C=Z("localStorage"),z=this.getStorageKey(),J=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem(J,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(z,JSON.stringify(this.eventData))}catch(ce){S("Unable to write to LocalStorage")}},Ee.prototype.processRequests=function(C){},Ee.prototype.postEvent=function(C,z,J,ce){var ye=this;if(G.EVENTS_URL){var Me=we(G.EVENTS_URL);Me.params.push("access_token="+(ce||G.ACCESS_TOKEN||""));var Fe={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:le,userId:this.anonId},Ye=z?p(Fe,z):Fe,ot={url:ke(Me),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ye])};this.pendingRequest=nn(ot,function(_t){ye.pendingRequest=null,J(_t),ye.saveEventData(),ye.processRequests(ce)})}},Ee.prototype.queueRequest=function(C,z){this.queue.push(C),this.processRequests(z)};var Re,ve,Te=function(C){function z(){C.call(this,"map.load"),this.success={},this.skuToken=""}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.postMapLoadEvent=function(J,ce,ye,Me){this.skuToken=ye,(G.EVENTS_URL&&Me||G.ACCESS_TOKEN&&Array.isArray(J)&&J.some(function(Fe){return de(Fe)||be(Fe)}))&&this.queueRequest({id:ce,timestamp:Date.now()},Me)},z.prototype.processRequests=function(J){var ce=this;if(!this.pendingRequest&&0!==this.queue.length){var ye=this.queue.shift(),Me=ye.id,Fe=ye.timestamp;Me&&this.success[Me]||(this.anonId||this.fetchEventData(),w(this.anonId)||(this.anonId=l()),this.postEvent(Fe,{skuToken:this.skuToken},function(Ye){Ye||Me&&(ce.success[Me]=!0)},J))}},z}(Ee),Ie=new(function(C){function z(J){C.call(this,"appUserTurnstile"),this._customAccessToken=J}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.postTurnstileEvent=function(J,ce){G.EVENTS_URL&&G.ACCESS_TOKEN&&Array.isArray(J)&&J.some(function(ye){return de(ye)||be(ye)})&&this.queueRequest(Date.now(),ce)},z.prototype.processRequests=function(J){var ce=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var ye=De(G.ACCESS_TOKEN),Me=ye?ye.u:G.ACCESS_TOKEN,Fe=Me!==this.eventData.tokenU;w(this.anonId)||(this.anonId=l(),Fe=!0);var Ye=this.queue.shift();if(this.eventData.lastSuccess){var ot=new Date(this.eventData.lastSuccess),_t=new Date(Ye),Et=(Ye-this.eventData.lastSuccess)/864e5;Fe=Fe||Et>=1||Et<-1||ot.getDate()!==_t.getDate()}else Fe=!0;if(!Fe)return this.processRequests();this.postEvent(Ye,{"enabled.telemetry":!1},function(Xt){Xt||(ce.eventData.lastSuccess=Ye,ce.eventData.tokenU=Me)},J)}},z}(Ee)),Ce=Ie.postTurnstileEvent.bind(Ie),Pe=new Te,Ve=Pe.postMapLoadEvent.bind(Pe),qe=500,Je=50;function lt(){self.caches&&!Re&&(Re=self.caches.open("mapbox-tiles"))}function $e(C){var z=C.indexOf("?");return z<0?C:C.slice(0,z)}var tt,ft=1/0;function bt(){return null==tt&&(tt=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),tt}var Ct={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ct);var Vt=function(C){function z(J,ce,ye){401===ce&&be(ye)&&(J+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),C.call(this,J),this.status=ce,this.url=ye,this.name=this.constructor.name,this.message=J}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},z}(Error),Ft=D()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function ht(C,z){var J,ce=new self.AbortController,ye=new self.Request(C.url,{method:C.method||"GET",body:C.body,credentials:C.credentials,headers:C.headers,referrer:Ft(),signal:ce.signal}),Me=!1,Fe=!1,Ye=(J=ye.url).indexOf("sku=")>0&&be(J);"json"===C.type&&ye.headers.set("Accept","application/json");var ot=function(Et,Xt,ln){if(!Fe){if(Et&&"SecurityError"!==Et.message&&S(Et),Xt&&ln)return _t(Xt);var tn=Date.now();self.fetch(ye).then(function(vn){if(vn.ok){var In=Ye?vn.clone():null;return _t(vn,In,tn)}return z(new Vt(vn.statusText,vn.status,C.url))}).catch(function(vn){20!==vn.code&&z(new Error(vn.message))})}},_t=function(Et,Xt,ln){("arrayBuffer"===C.type?Et.arrayBuffer():"json"===C.type?Et.json():Et.text()).then(function(tn){Fe||(Xt&&ln&&function(C,z,J){if(lt(),Re){var ce={status:z.status,statusText:z.statusText,headers:new self.Headers};z.headers.forEach(function(Me,Fe){return ce.headers.set(Fe,Me)});var ye=L(z.headers.get("Cache-Control")||"");ye["no-store"]||(ye["max-age"]&&ce.headers.set("Expires",new Date(J+1e3*ye["max-age"]).toUTCString()),new Date(ce.headers.get("Expires")).getTime()-J<42e4||function(Me,Fe){if(void 0===ve)try{new Response(new ReadableStream),ve=!0}catch(Ye){ve=!1}ve?Fe(Me.body):Me.blob().then(Fe)}(z,function(Me){var Fe=new self.Response(Me,ce);lt(),Re&&Re.then(function(Ye){return Ye.put($e(C.url),Fe)}).catch(function(Ye){return S(Ye.message)})}))}}(ye,Xt,ln),Me=!0,z(null,tn,Et.headers.get("Cache-Control"),Et.headers.get("Expires")))}).catch(function(tn){Fe||z(new Error(tn.message))})};return Ye?function(C,z){if(lt(),!Re)return z(null);var J=$e(C.url);Re.then(function(ce){ce.match(J).then(function(ye){var Me=function(Fe){if(!Fe)return!1;var Ye=new Date(Fe.headers.get("Expires")||0),ot=L(Fe.headers.get("Cache-Control")||"");return Ye>Date.now()&&!ot["no-cache"]}(ye);ce.delete(J),Me&&ce.put(J,ye.clone()),z(null,ye,Me)}).catch(z)}).catch(z)}(ye,ot):ot(null,null),{cancel:function(){Fe=!0,Me||ce.abort()}}}var cn,Ze,ut=function(C,z){if(!(/^file:/.test(J=C.url)||/^file:/.test(Ft())&&!/^\w+:/.test(J))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ht(C,z);if(D()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",C,z,void 0,!0)}var J;return function(ce,ye){var Me=new self.XMLHttpRequest;for(var Fe in Me.open(ce.method||"GET",ce.url,!0),"arrayBuffer"===ce.type&&(Me.responseType="arraybuffer"),ce.headers)Me.setRequestHeader(Fe,ce.headers[Fe]);return"json"===ce.type&&(Me.responseType="text",Me.setRequestHeader("Accept","application/json")),Me.withCredentials="include"===ce.credentials,Me.onerror=function(){ye(new Error(Me.statusText))},Me.onload=function(){if((Me.status>=200&&Me.status<300||0===Me.status)&&null!==Me.response){var Ye=Me.response;if("json"===ce.type)try{Ye=JSON.parse(Me.response)}catch(ot){return ye(ot)}ye(null,Ye,Me.getResponseHeader("Cache-Control"),Me.getResponseHeader("Expires"))}else ye(new Vt(Me.statusText,Me.status,ce.url))},Me.send(ce.body),{cancel:function(){return Me.abort()}}}(C,z)},Rt=function(C,z){return ut(p(C,{type:"arrayBuffer"}),z)},nn=function(C,z){return ut(p(C,{method:"POST"}),z)};cn=[],Ze=0;var Qe=function(C,z){if(re.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),Ze>=G.MAX_PARALLEL_IMAGE_REQUESTS){var J={requestParameters:C,callback:z,cancelled:!1,cancel:function(){this.cancelled=!0}};return cn.push(J),J}Ze++;var ce=!1,ye=function(){if(!ce)for(ce=!0,Ze--;cn.length&&Ze<G.MAX_PARALLEL_IMAGE_REQUESTS;){var Fe=cn.shift();Fe.cancelled||(Fe.cancel=Qe(Fe.requestParameters,Fe.callback).cancel)}},Me=Rt(C,function(Fe,Ye,ot,_t){var Xt,ln;ye(),Fe?z(Fe):Ye&&(bt()?(Xt=z,ln=new self.Blob([new Uint8Array(Ye)],{type:"image/png"}),self.createImageBitmap(ln).then(function(tn){Xt(null,tn)}).catch(function(tn){Xt(new Error("Could not load image because of "+tn.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Et,Xt,ln,tn){var vn=new self.Image,In=self.URL;vn.onload=function(){Xt(null,vn),In.revokeObjectURL(vn.src)},vn.onerror=function(){return Xt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Gn=new self.Blob([new Uint8Array(Et)],{type:"image/png"});vn.cacheControl=ln,vn.expires=tn,vn.src=Et.byteLength?In.createObjectURL(Gn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ye,z,ot,_t))});return{cancel:function(){Me.cancel(),ye()}}};function Ge(C,z,J){J[C]&&-1!==J[C].indexOf(z)||(J[C]=J[C]||[],J[C].push(z))}function rt(C,z,J){if(J&&J[C]){var ce=J[C].indexOf(z);-1!==ce&&J[C].splice(ce,1)}}var Le=function(C,z){void 0===z&&(z={}),p(this,z),this.type=C},ze=function(C){function z(J,ce){void 0===ce&&(ce={}),C.call(this,"error",p({error:J},ce))}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z}(Le),je=function(){};je.prototype.on=function(C,z){return this._listeners=this._listeners||{},Ge(C,z,this._listeners),this},je.prototype.off=function(C,z){return rt(C,z,this._listeners),rt(C,z,this._oneTimeListeners),this},je.prototype.once=function(C,z){return this._oneTimeListeners=this._oneTimeListeners||{},Ge(C,z,this._oneTimeListeners),this},je.prototype.fire=function(C,z){"string"==typeof C&&(C=new Le(C,z||{}));var J=C.type;if(this.listens(J)){C.target=this;for(var ce=0,ye=this._listeners&&this._listeners[J]?this._listeners[J].slice():[];ce<ye.length;ce+=1)ye[ce].call(this,C);for(var Me=0,Fe=this._oneTimeListeners&&this._oneTimeListeners[J]?this._oneTimeListeners[J].slice():[];Me<Fe.length;Me+=1){var Ye=Fe[Me];rt(J,Ye,this._oneTimeListeners),Ye.call(this,C)}var ot=this._eventedParent;ot&&(p(C,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),ot.fire(C))}else C instanceof ze&&console.error(C.error);return this},je.prototype.listens=function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},je.prototype.setEventedParent=function(C,z){return this._eventedParent=C,this._eventedParentData=z,this};var Ne={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},st=function(C,z,J,ce){this.message=(C?C+": ":"")+J,ce&&(this.identifier=ce),null!=z&&z.__line__&&(this.line=z.__line__)};function mt(C){var J=C.value;return J?[new st(C.key,J,"constants have been deprecated as of v8")]:[]}function Tt(C){for(var z=[],J=arguments.length-1;J-- >0;)z[J]=arguments[J+1];for(var ce=0,ye=z;ce<ye.length;ce+=1){var Me=ye[ce];for(var Fe in Me)C[Fe]=Me[Fe]}return C}function xt(C){return C instanceof Number||C instanceof String||C instanceof Boolean?C.valueOf():C}function zt(C){if(Array.isArray(C))return C.map(zt);if(C instanceof Object&&!(C instanceof Number||C instanceof String||C instanceof Boolean)){var z={};for(var J in C)z[J]=zt(C[J]);return z}return xt(C)}var gt=function(C){function z(J,ce){C.call(this,ce),this.message=ce,this.key=J}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z}(Error),Bt=function(C,z){void 0===z&&(z=[]),this.parent=C,this.bindings={};for(var J=0,ce=z;J<ce.length;J+=1){var ye=ce[J];this.bindings[ye[0]]=ye[1]}};Bt.prototype.concat=function(C){return new Bt(this,C)},Bt.prototype.get=function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},Bt.prototype.has=function(C){return!!this.bindings[C]||!!this.parent&&this.parent.has(C)};var jt={kind:"null"},it={kind:"number"},Mt={kind:"string"},qt={kind:"boolean"},Wt={kind:"color"},an={kind:"object"},Ue={kind:"value"},yt={kind:"collator"},Dt={kind:"formatted"},Ht={kind:"resolvedImage"};function Jt(C,z){return{kind:"array",itemType:C,N:z}}function gn(C){if("array"===C.kind){var z=gn(C.itemType);return"number"==typeof C.N?"array<"+z+", "+C.N+">":"value"===C.itemType.kind?"array":"array<"+z+">"}return C.kind}var Qt=[jt,it,Mt,qt,Wt,Dt,an,Jt(Ue),Ht];function sn(C,z){if("error"===z.kind)return null;if("array"===C.kind){if("array"===z.kind&&(0===z.N&&"value"===z.itemType.kind||!sn(C.itemType,z.itemType))&&("number"!=typeof C.N||C.N===z.N))return null}else{if(C.kind===z.kind)return null;if("value"===C.kind)for(var J=0,ce=Qt;J<ce.length;J+=1)if(!sn(ce[J],z))return null}return"Expected "+gn(C)+" but found "+gn(z)+" instead."}function hn(C,z){return z.some(function(J){return J.kind===C.kind})}function Dn(C,z){return z.some(function(J){return"null"===J?null===C:"array"===J?Array.isArray(C):"object"===J?C&&!Array.isArray(C)&&"object"==typeof C:J===typeof C})}var _n=r(function(C,z){var J={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ce(ot){return(ot=Math.round(ot))<0?0:ot>255?255:ot}function Me(ot){return ce("%"===ot[ot.length-1]?parseFloat(ot)/100*255:parseInt(ot))}function Fe(ot){return function(ot){return ot<0?0:ot>1?1:ot}("%"===ot[ot.length-1]?parseFloat(ot)/100:parseFloat(ot))}function Ye(ot,_t,Et){return Et<0?Et+=1:Et>1&&(Et-=1),6*Et<1?ot+(_t-ot)*Et*6:2*Et<1?_t:3*Et<2?ot+(_t-ot)*(2/3-Et)*6:ot}try{z.parseCSSColor=function(ot){var _t,Et=ot.replace(/ /g,"").toLowerCase();if(Et in J)return J[Et].slice();if("#"===Et[0])return 4===Et.length?(_t=parseInt(Et.substr(1),16))>=0&&_t<=4095?[(3840&_t)>>4|(3840&_t)>>8,240&_t|(240&_t)>>4,15&_t|(15&_t)<<4,1]:null:7===Et.length&&(_t=parseInt(Et.substr(1),16))>=0&&_t<=16777215?[(16711680&_t)>>16,(65280&_t)>>8,255&_t,1]:null;var Xt=Et.indexOf("("),ln=Et.indexOf(")");if(-1!==Xt&&ln+1===Et.length){var tn=Et.substr(0,Xt),vn=Et.substr(Xt+1,ln-(Xt+1)).split(","),In=1;switch(tn){case"rgba":if(4!==vn.length)return null;In=Fe(vn.pop());case"rgb":return 3!==vn.length?null:[Me(vn[0]),Me(vn[1]),Me(vn[2]),In];case"hsla":if(4!==vn.length)return null;In=Fe(vn.pop());case"hsl":if(3!==vn.length)return null;var Gn=(parseFloat(vn[0])%360+360)%360/360,qn=Fe(vn[1]),Kn=Fe(vn[2]),er=Kn<=.5?Kn*(qn+1):Kn+qn-Kn*qn,or=2*Kn-er;return[ce(255*Ye(or,er,Gn+1/3)),ce(255*Ye(or,er,Gn)),ce(255*Ye(or,er,Gn-1/3)),In];default:return null}}return null}}catch(ot){}}).parseCSSColor,Tn=function(C,z,J,ce){void 0===ce&&(ce=1),this.r=C,this.g=z,this.b=J,this.a=ce};Tn.parse=function(C){if(C){if(C instanceof Tn)return C;if("string"==typeof C){var z=_n(C);if(z)return new Tn(z[0]/255*z[3],z[1]/255*z[3],z[2]/255*z[3],z[3])}}},Tn.prototype.toString=function(){var C=this.toArray(),J=C[1],ce=C[2],ye=C[3];return"rgba("+Math.round(C[0])+","+Math.round(J)+","+Math.round(ce)+","+ye+")"},Tn.prototype.toArray=function(){var ce=this.a;return 0===ce?[0,0,0,0]:[255*this.r/ce,255*this.g/ce,255*this.b/ce,ce]},Tn.black=new Tn(0,0,0,1),Tn.white=new Tn(1,1,1,1),Tn.transparent=new Tn(0,0,0,0),Tn.red=new Tn(1,0,0,1);var wn=function(C,z,J){this.sensitivity=C?z?"variant":"case":z?"accent":"base",this.locale=J,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};wn.prototype.compare=function(C,z){return this.collator.compare(C,z)},wn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var kn=function(C,z,J,ce,ye){this.text=C,this.image=z,this.scale=J,this.fontStack=ce,this.textColor=ye},Fn=function(C){this.sections=C};Fn.fromString=function(C){return new Fn([new kn(C,null,null,null,null)])},Fn.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(C){return 0!==C.text.length||C.image&&0!==C.image.name.length})},Fn.factory=function(C){return C instanceof Fn?C:Fn.fromString(C)},Fn.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(C){return C.text}).join("")},Fn.prototype.serialize=function(){for(var C=["format"],z=0,J=this.sections;z<J.length;z+=1){var ce=J[z];if(ce.image)C.push(["image",ce.image.name]);else{C.push(ce.text);var ye={};ce.fontStack&&(ye["text-font"]=["literal",ce.fontStack.split(",")]),ce.scale&&(ye["font-scale"]=ce.scale),ce.textColor&&(ye["text-color"]=["rgba"].concat(ce.textColor.toArray())),C.push(ye)}}return C};var On=function(C){this.name=C.name,this.available=C.available};function Qn(C,z,J,ce){return"number"==typeof C&&C>=0&&C<=255&&"number"==typeof z&&z>=0&&z<=255&&"number"==typeof J&&J>=0&&J<=255?void 0===ce||"number"==typeof ce&&ce>=0&&ce<=1?null:"Invalid rgba value ["+[C,z,J,ce].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ce?[C,z,J,ce]:[C,z,J]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function sr(C){if(null===C||"string"==typeof C||"boolean"==typeof C||"number"==typeof C||C instanceof Tn||C instanceof wn||C instanceof Fn||C instanceof On)return!0;if(Array.isArray(C)){for(var z=0,J=C;z<J.length;z+=1)if(!sr(J[z]))return!1;return!0}if("object"==typeof C){for(var ce in C)if(!sr(C[ce]))return!1;return!0}return!1}function Mr(C){if(null===C)return jt;if("string"==typeof C)return Mt;if("boolean"==typeof C)return qt;if("number"==typeof C)return it;if(C instanceof Tn)return Wt;if(C instanceof wn)return yt;if(C instanceof Fn)return Dt;if(C instanceof On)return Ht;if(Array.isArray(C)){for(var z,J=C.length,ce=0,ye=C;ce<ye.length;ce+=1){var Me=Mr(ye[ce]);if(z){if(z===Me)continue;z=Ue;break}z=Me}return Jt(z||Ue,J)}return an}function Wr(C){var z=typeof C;return null===C?"":"string"===z||"number"===z||"boolean"===z?String(C):C instanceof Tn||C instanceof Fn||C instanceof On?C.toString():JSON.stringify(C)}On.prototype.toString=function(){return this.name},On.fromString=function(C){return C?new On({name:C,available:!1}):null},On.prototype.serialize=function(){return["image",this.name]};var mr=function(C,z){this.type=C,this.value=z};mr.parse=function(C,z){if(2!==C.length)return z.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!sr(C[1]))return z.error("invalid value");var J=C[1],ce=Mr(J),ye=z.expectedType;return"array"!==ce.kind||0!==ce.N||!ye||"array"!==ye.kind||"number"==typeof ye.N&&0!==ye.N||(ce=ye),new mr(ce,J)},mr.prototype.evaluate=function(){return this.value},mr.prototype.eachChild=function(){},mr.prototype.outputDefined=function(){return!0},mr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Tn?["rgba"].concat(this.value.toArray()):this.value instanceof Fn?this.value.serialize():this.value};var Or=function(C){this.name="ExpressionEvaluationError",this.message=C};Or.prototype.toJSON=function(){return this.message};var vr={string:Mt,number:it,boolean:qt,object:an},Xn=function(C,z){this.type=C,this.args=z};Xn.parse=function(C,z){if(C.length<2)return z.error("Expected at least one argument.");var J,ce=1,ye=C[0];if("array"===ye){var Me,Fe;if(C.length>2){var Ye=C[1];if("string"!=typeof Ye||!(Ye in vr)||"object"===Ye)return z.error('The item type argument of "array" must be one of string, number, boolean',1);Me=vr[Ye],ce++}else Me=Ue;if(C.length>3){if(null!==C[2]&&("number"!=typeof C[2]||C[2]<0||C[2]!==Math.floor(C[2])))return z.error('The length argument to "array" must be a positive integer literal',2);Fe=C[2],ce++}J=Jt(Me,Fe)}else J=vr[ye];for(var ot=[];ce<C.length;ce++){var _t=z.parse(C[ce],ce,Ue);if(!_t)return null;ot.push(_t)}return new Xn(J,ot)},Xn.prototype.evaluate=function(C){for(var z=0;z<this.args.length;z++){var J=this.args[z].evaluate(C);if(!sn(this.type,Mr(J)))return J;if(z===this.args.length-1)throw new Or("Expected value to be of type "+gn(this.type)+", but found "+gn(Mr(J))+" instead.")}return null},Xn.prototype.eachChild=function(C){this.args.forEach(C)},Xn.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Xn.prototype.serialize=function(){var C=this.type,z=[C.kind];if("array"===C.kind){var J=C.itemType;if("string"===J.kind||"number"===J.kind||"boolean"===J.kind){z.push(J.kind);var ce=C.N;("number"==typeof ce||this.args.length>1)&&z.push(ce)}}return z.concat(this.args.map(function(ye){return ye.serialize()}))};var jn=function(C){this.type=Dt,this.sections=C};jn.parse=function(C,z){if(C.length<2)return z.error("Expected at least one argument.");var J=C[1];if(!Array.isArray(J)&&"object"==typeof J)return z.error("First argument must be an image or text section.");for(var ce=[],ye=!1,Me=1;Me<=C.length-1;++Me){var Fe=C[Me];if(ye&&"object"==typeof Fe&&!Array.isArray(Fe)){ye=!1;var Ye=null;if(Fe["font-scale"]&&!(Ye=z.parse(Fe["font-scale"],1,it)))return null;var ot=null;if(Fe["text-font"]&&!(ot=z.parse(Fe["text-font"],1,Jt(Mt))))return null;var _t=null;if(Fe["text-color"]&&!(_t=z.parse(Fe["text-color"],1,Wt)))return null;var Et=ce[ce.length-1];Et.scale=Ye,Et.font=ot,Et.textColor=_t}else{var Xt=z.parse(C[Me],1,Ue);if(!Xt)return null;var ln=Xt.type.kind;if("string"!==ln&&"value"!==ln&&"null"!==ln&&"resolvedImage"!==ln)return z.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ye=!0,ce.push({content:Xt,scale:null,font:null,textColor:null})}}return new jn(ce)},jn.prototype.evaluate=function(C){return new Fn(this.sections.map(function(z){var J=z.content.evaluate(C);return Mr(J)===Ht?new kn("",J,null,null,null):new kn(Wr(J),null,z.scale?z.scale.evaluate(C):null,z.font?z.font.evaluate(C).join(","):null,z.textColor?z.textColor.evaluate(C):null)}))},jn.prototype.eachChild=function(C){for(var z=0,J=this.sections;z<J.length;z+=1){var ce=J[z];C(ce.content),ce.scale&&C(ce.scale),ce.font&&C(ce.font),ce.textColor&&C(ce.textColor)}},jn.prototype.outputDefined=function(){return!1},jn.prototype.serialize=function(){for(var C=["format"],z=0,J=this.sections;z<J.length;z+=1){var ce=J[z];C.push(ce.content.serialize());var ye={};ce.scale&&(ye["font-scale"]=ce.scale.serialize()),ce.font&&(ye["text-font"]=ce.font.serialize()),ce.textColor&&(ye["text-color"]=ce.textColor.serialize()),C.push(ye)}return C};var nr=function(C){this.type=Ht,this.input=C};nr.parse=function(C,z){if(2!==C.length)return z.error("Expected two arguments.");var J=z.parse(C[1],1,Mt);return J?new nr(J):z.error("No image name provided.")},nr.prototype.evaluate=function(C){var z=this.input.evaluate(C),J=On.fromString(z);return J&&C.availableImages&&(J.available=C.availableImages.indexOf(z)>-1),J},nr.prototype.eachChild=function(C){C(this.input)},nr.prototype.outputDefined=function(){return!1},nr.prototype.serialize=function(){return["image",this.input.serialize()]};var Ur={"to-boolean":qt,"to-color":Wt,"to-number":it,"to-string":Mt},Jn=function(C,z){this.type=C,this.args=z};Jn.parse=function(C,z){if(C.length<2)return z.error("Expected at least one argument.");var J=C[0];if(("to-boolean"===J||"to-string"===J)&&2!==C.length)return z.error("Expected one argument.");for(var ce=Ur[J],ye=[],Me=1;Me<C.length;Me++){var Fe=z.parse(C[Me],Me,Ue);if(!Fe)return null;ye.push(Fe)}return new Jn(ce,ye)},Jn.prototype.evaluate=function(C){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(C));if("color"===this.type.kind){for(var z,J,ce=0,ye=this.args;ce<ye.length;ce+=1){if(J=null,(z=ye[ce].evaluate(C))instanceof Tn)return z;if("string"==typeof z){var Me=C.parseColor(z);if(Me)return Me}else if(Array.isArray(z)&&!(J=z.length<3||z.length>4?"Invalid rbga value "+JSON.stringify(z)+": expected an array containing either three or four numeric values.":Qn(z[0],z[1],z[2],z[3])))return new Tn(z[0]/255,z[1]/255,z[2]/255,z[3])}throw new Or(J||"Could not parse color from value '"+("string"==typeof z?z:String(JSON.stringify(z)))+"'")}if("number"===this.type.kind){for(var Fe=null,Ye=0,ot=this.args;Ye<ot.length;Ye+=1){if(null===(Fe=ot[Ye].evaluate(C)))return 0;var _t=Number(Fe);if(!isNaN(_t))return _t}throw new Or("Could not convert "+JSON.stringify(Fe)+" to number.")}return"formatted"===this.type.kind?Fn.fromString(Wr(this.args[0].evaluate(C))):"resolvedImage"===this.type.kind?On.fromString(Wr(this.args[0].evaluate(C))):Wr(this.args[0].evaluate(C))},Jn.prototype.eachChild=function(C){this.args.forEach(C)},Jn.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Jn.prototype.serialize=function(){if("formatted"===this.type.kind)return new jn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new nr(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(z){C.push(z.serialize())}),C};var _r=["Unknown","Point","LineString","Polygon"],Hr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Hr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Hr.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?_r[this.feature.type]:this.feature.type:null},Hr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Hr.prototype.canonicalID=function(){return this.canonical},Hr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Hr.prototype.parseColor=function(C){var z=this._parseColorCache[C];return z||(z=this._parseColorCache[C]=Tn.parse(C)),z};var Lr=function(C,z,J,ce){this.name=C,this.type=z,this._evaluate=J,this.args=ce};Lr.prototype.evaluate=function(C){return this._evaluate(C,this.args)},Lr.prototype.eachChild=function(C){this.args.forEach(C)},Lr.prototype.outputDefined=function(){return!1},Lr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},Lr.parse=function(C,z){var J,ce=C[0],ye=Lr.definitions[ce];if(!ye)return z.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Me=Array.isArray(ye)?ye[0]:ye.type,Fe=Array.isArray(ye)?[[ye[1],ye[2]]]:ye.overloads,Ye=Fe.filter(function(Ei){var mi=Ei[0];return!Array.isArray(mi)||mi.length===C.length-1}),ot=null,_t=0,Et=Ye;_t<Et.length;_t+=1){var Xt=Et[_t],ln=Xt[0],tn=Xt[1];ot=new Ir(z.registry,z.path,null,z.scope);for(var vn=[],In=!1,Gn=1;Gn<C.length;Gn++){var qn=C[Gn],Kn=Array.isArray(ln)?ln[Gn-1]:ln.type,er=ot.parse(qn,1+vn.length,Kn);if(!er){In=!0;break}vn.push(er)}if(!In)if(Array.isArray(ln)&&ln.length!==vn.length)ot.error("Expected "+ln.length+" arguments, but found "+vn.length+" instead.");else{for(var or=0;or<vn.length;or++){var Cr=Array.isArray(ln)?ln[or]:ln.type,Fr=vn[or];ot.concat(or+1).checkSubtype(Cr,Fr.type)}if(0===ot.errors.length)return new Lr(ce,Me,tn,vn)}}if(1===Ye.length)(J=z.errors).push.apply(J,ot.errors);else{for(var ni=(Ye.length?Ye:Fe).map(function(Ei){var mi;return mi=Ei[0],Array.isArray(mi)?"("+mi.map(gn).join(", ")+")":"("+gn(mi.type)+"...)"}).join(" | "),Qr=[],di=1;di<C.length;di++){var ki=z.parse(C[di],1+Qr.length);if(!ki)return null;Qr.push(gn(ki.type))}z.error("Expected arguments of type "+ni+", but found ("+Qr.join(", ")+") instead.")}return null},Lr.register=function(C,z){for(var J in Lr.definitions=z,z)C[J]=Lr};var $r=function(C,z,J){this.type=yt,this.locale=J,this.caseSensitive=C,this.diacriticSensitive=z};function dn(C,z){C[0]=Math.min(C[0],z[0]),C[1]=Math.min(C[1],z[1]),C[2]=Math.max(C[2],z[0]),C[3]=Math.max(C[3],z[1])}function Ut(C,z){return!(C[0]<=z[0]||C[2]>=z[2]||C[1]<=z[1]||C[3]>=z[3])}function Kt(C,z){var ce=(180+C[0])/360,ye=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C[1]*Math.PI/360)))/360,Me=Math.pow(2,z.z);return[Math.round(ce*Me*8192),Math.round(ye*Me*8192)]}function Mn(C,z,J){return z[1]>C[1]!=J[1]>C[1]&&C[0]<(J[0]-z[0])*(C[1]-z[1])/(J[1]-z[1])+z[0]}function Bn(C,z){for(var J,ce,ye,Me,Fe,Ye,ot,_t=!1,Et=0,Xt=z.length;Et<Xt;Et++)for(var ln=z[Et],tn=0,vn=ln.length;tn<vn-1;tn++){if(void 0,void 0,void 0,void 0,(Me=(J=C)[0]-(ce=ln[tn])[0])*(ot=J[1]-(ye=ln[tn+1])[1])-(Ye=J[0]-ye[0])*(Fe=J[1]-ce[1])==0&&Me*Ye<=0&&Fe*ot<=0)return!1;Mn(C,ln[tn],ln[tn+1])&&(_t=!_t)}return _t}function cr(C,z){for(var J=0;J<z.length;J++)if(Bn(C,z[J]))return!0;return!1}function ur(C,z,J,ce){var ot=ce[0]-J[0],_t=ce[1]-J[1],Et=(C[0]-J[0])*_t-ot*(C[1]-J[1]),Xt=(z[0]-J[0])*_t-ot*(z[1]-J[1]);return Et>0&&Xt<0||Et<0&&Xt>0}function Rn(C,z,J){for(var ce=0,ye=J;ce<ye.length;ce+=1)for(var Me=ye[ce],Fe=0;Fe<Me.length-1;++Fe)if(void 0,void 0,(Xt=[(Et=Me[Fe+1])[0]-(_t=Me[Fe])[0],Et[1]-_t[1]])[0]*(ln=[(ot=z)[0]-(Ye=C)[0],ot[1]-Ye[1]])[1]-Xt[1]*ln[0]!=0&&ur(Ye,ot,_t,Et)&&ur(_t,Et,Ye,ot))return!0;var Ye,ot,_t,Et,Xt,ln;return!1}function Cn(C,z){for(var J=0;J<C.length;++J)if(!Bn(C[J],z))return!1;for(var ce=0;ce<C.length-1;++ce)if(Rn(C[ce],C[ce+1],z))return!1;return!0}function Un(C,z){for(var J=0;J<z.length;J++)if(Cn(C,z[J]))return!0;return!1}function Yn(C,z,J){for(var ce=[],ye=0;ye<C.length;ye++){for(var Me=[],Fe=0;Fe<C[ye].length;Fe++){var Ye=Kt(C[ye][Fe],J);dn(z,Ye),Me.push(Ye)}ce.push(Me)}return ce}function Hn(C,z,J){for(var ce=[],ye=0;ye<C.length;ye++){var Me=Yn(C[ye],z,J);ce.push(Me)}return ce}function Zn(C,z,J,ce){if(C[0]<J[0]||C[0]>J[2]){var ye=.5*ce,Me=C[0]-J[0]>ye?-ce:J[0]-C[0]>ye?ce:0;0===Me&&(Me=C[0]-J[2]>ye?-ce:J[2]-C[0]>ye?ce:0),C[0]+=Me}dn(z,C)}function Sr(C,z,J,ce){for(var ye=8192*Math.pow(2,ce.z),Me=[8192*ce.x,8192*ce.y],Fe=[],Ye=0,ot=C;Ye<ot.length;Ye+=1)for(var _t=0,Et=ot[Ye];_t<Et.length;_t+=1){var Xt=Et[_t],ln=[Xt.x+Me[0],Xt.y+Me[1]];Zn(ln,z,J,ye),Fe.push(ln)}return Fe}function Ar(C,z,J,ce){for(var ye,Me=8192*Math.pow(2,ce.z),Fe=[8192*ce.x,8192*ce.y],Ye=[],ot=0,_t=C;ot<_t.length;ot+=1){for(var Et=[],Xt=0,ln=_t[ot];Xt<ln.length;Xt+=1){var tn=ln[Xt],vn=[tn.x+Fe[0],tn.y+Fe[1]];dn(z,vn),Et.push(vn)}Ye.push(Et)}if(z[2]-z[0]<=Me/2){(ye=z)[0]=ye[1]=1/0,ye[2]=ye[3]=-1/0;for(var In=0,Gn=Ye;In<Gn.length;In+=1)for(var qn=0,Kn=Gn[In];qn<Kn.length;qn+=1)Zn(Kn[qn],z,J,Me)}return Ye}$r.parse=function(C,z){if(2!==C.length)return z.error("Expected one argument.");var J=C[1];if("object"!=typeof J||Array.isArray(J))return z.error("Collator options argument must be an object.");var ce=z.parse(void 0!==J["case-sensitive"]&&J["case-sensitive"],1,qt);if(!ce)return null;var ye=z.parse(void 0!==J["diacritic-sensitive"]&&J["diacritic-sensitive"],1,qt);if(!ye)return null;var Me=null;return J.locale&&!(Me=z.parse(J.locale,1,Mt))?null:new $r(ce,ye,Me)},$r.prototype.evaluate=function(C){return new wn(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},$r.prototype.eachChild=function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},$r.prototype.outputDefined=function(){return!1},$r.prototype.serialize=function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]};var gr=function(C,z){this.type=qt,this.geojson=C,this.geometries=z};function Rr(C){if(C instanceof Lr&&("get"===C.name&&1===C.args.length||"feature-state"===C.name||"has"===C.name&&1===C.args.length||"properties"===C.name||"geometry-type"===C.name||"id"===C.name||/^filter-/.test(C.name))||C instanceof gr)return!1;var z=!0;return C.eachChild(function(J){z&&!Rr(J)&&(z=!1)}),z}function ir(C){if(C instanceof Lr&&"feature-state"===C.name)return!1;var z=!0;return C.eachChild(function(J){z&&!ir(J)&&(z=!1)}),z}function rr(C,z){if(C instanceof Lr&&z.indexOf(C.name)>=0)return!1;var J=!0;return C.eachChild(function(ce){J&&!rr(ce,z)&&(J=!1)}),J}gr.parse=function(C,z){if(2!==C.length)return z.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(sr(C[1])){var J=C[1];if("FeatureCollection"===J.type)for(var ce=0;ce<J.features.length;++ce){var ye=J.features[ce].geometry.type;if("Polygon"===ye||"MultiPolygon"===ye)return new gr(J,J.features[ce].geometry)}else if("Feature"===J.type){var Me=J.geometry.type;if("Polygon"===Me||"MultiPolygon"===Me)return new gr(J,J.geometry)}else if("Polygon"===J.type||"MultiPolygon"===J.type)return new gr(J,J)}return z.error("'within' expression requires valid geojson object that contains polygon geometry type.")},gr.prototype.evaluate=function(C){if(null!=C.geometry()&&null!=C.canonicalID()){if("Point"===C.geometryType())return function(z,J){var ce=[1/0,1/0,-1/0,-1/0],ye=[1/0,1/0,-1/0,-1/0],Me=z.canonicalID();if("Polygon"===J.type){var Fe=Yn(J.coordinates,ye,Me),Ye=Sr(z.geometry(),ce,ye,Me);if(!Ut(ce,ye))return!1;for(var ot=0,_t=Ye;ot<_t.length;ot+=1)if(!Bn(_t[ot],Fe))return!1}if("MultiPolygon"===J.type){var Et=Hn(J.coordinates,ye,Me),Xt=Sr(z.geometry(),ce,ye,Me);if(!Ut(ce,ye))return!1;for(var ln=0,tn=Xt;ln<tn.length;ln+=1)if(!cr(tn[ln],Et))return!1}return!0}(C,this.geometries);if("LineString"===C.geometryType())return function(z,J){var ce=[1/0,1/0,-1/0,-1/0],ye=[1/0,1/0,-1/0,-1/0],Me=z.canonicalID();if("Polygon"===J.type){var Fe=Yn(J.coordinates,ye,Me),Ye=Ar(z.geometry(),ce,ye,Me);if(!Ut(ce,ye))return!1;for(var ot=0,_t=Ye;ot<_t.length;ot+=1)if(!Cn(_t[ot],Fe))return!1}if("MultiPolygon"===J.type){var Et=Hn(J.coordinates,ye,Me),Xt=Ar(z.geometry(),ce,ye,Me);if(!Ut(ce,ye))return!1;for(var ln=0,tn=Xt;ln<tn.length;ln+=1)if(!Un(tn[ln],Et))return!1}return!0}(C,this.geometries)}return!1},gr.prototype.eachChild=function(){},gr.prototype.outputDefined=function(){return!0},gr.prototype.serialize=function(){return["within",this.geojson]};var wr=function(C,z){this.type=z.type,this.name=C,this.boundExpression=z};wr.parse=function(C,z){if(2!==C.length||"string"!=typeof C[1])return z.error("'var' expression requires exactly one string literal argument.");var J=C[1];return z.scope.has(J)?new wr(J,z.scope.get(J)):z.error('Unknown variable "'+J+'". Make sure "'+J+'" has been bound in an enclosing "let" expression before using it.',1)},wr.prototype.evaluate=function(C){return this.boundExpression.evaluate(C)},wr.prototype.eachChild=function(){},wr.prototype.outputDefined=function(){return!1},wr.prototype.serialize=function(){return["var",this.name]};var Ir=function(C,z,J,ce,ye){void 0===z&&(z=[]),void 0===ce&&(ce=new Bt),void 0===ye&&(ye=[]),this.registry=C,this.path=z,this.key=z.map(function(Me){return"["+Me+"]"}).join(""),this.scope=ce,this.errors=ye,this.expectedType=J};function Vr(C,z){for(var J,ye=C.length-1,Me=0,Fe=ye,Ye=0;Me<=Fe;)if((J=C[Ye=Math.floor((Me+Fe)/2)])<=z){if(Ye===ye||z<C[Ye+1])return Ye;Me=Ye+1}else{if(!(J>z))throw new Or("Input is not a number.");Fe=Ye-1}return 0}Ir.prototype.parse=function(C,z,J,ce,ye){return void 0===ye&&(ye={}),z?this.concat(z,J,ce)._parse(C,ye):this._parse(C,ye)},Ir.prototype._parse=function(C,z){function J(_t,Et,Xt){return"assert"===Xt?new Xn(Et,[_t]):"coerce"===Xt?new Jn(Et,[_t]):_t}if(null!==C&&"string"!=typeof C&&"boolean"!=typeof C&&"number"!=typeof C||(C=["literal",C]),Array.isArray(C)){if(0===C.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ce=C[0];if("string"!=typeof ce)return this.error("Expression name must be a string, but found "+typeof ce+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var ye=this.registry[ce];if(ye){var Me=ye.parse(C,this);if(!Me)return null;if(this.expectedType){var Fe=this.expectedType,Ye=Me.type;if("string"!==Fe.kind&&"number"!==Fe.kind&&"boolean"!==Fe.kind&&"object"!==Fe.kind&&"array"!==Fe.kind||"value"!==Ye.kind)if("color"!==Fe.kind&&"formatted"!==Fe.kind&&"resolvedImage"!==Fe.kind||"value"!==Ye.kind&&"string"!==Ye.kind){if(this.checkSubtype(Fe,Ye))return null}else Me=J(Me,Fe,z.typeAnnotation||"coerce");else Me=J(Me,Fe,z.typeAnnotation||"assert")}if(!(Me instanceof mr)&&"resolvedImage"!==Me.type.kind&&function _t(Et){if(Et instanceof wr)return _t(Et.boundExpression);if(Et instanceof Lr&&"error"===Et.name||Et instanceof $r||Et instanceof gr)return!1;var Xt=Et instanceof Jn||Et instanceof Xn,ln=!0;return Et.eachChild(function(tn){ln=Xt?ln&&_t(tn):ln&&tn instanceof mr}),!!ln&&Rr(Et)&&rr(Et,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(Me)){var ot=new Hr;try{Me=new mr(Me.type,Me.evaluate(ot))}catch(_t){return this.error(_t.message),null}}return Me}return this.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===C?"'undefined' value invalid. Use null instead.":"object"==typeof C?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof C+" instead.")},Ir.prototype.concat=function(C,z,J){var ce="number"==typeof C?this.path.concat(C):this.path,ye=J?this.scope.concat(J):this.scope;return new Ir(this.registry,ce,z||null,ye,this.errors)},Ir.prototype.error=function(C){for(var z=[],J=arguments.length-1;J-- >0;)z[J]=arguments[J+1];var ce=""+this.key+z.map(function(ye){return"["+ye+"]"}).join("");this.errors.push(new gt(ce,C))},Ir.prototype.checkSubtype=function(C,z){var J=sn(C,z);return J&&this.error(J),J};var Ci=function(C,z,J){this.type=C,this.input=z,this.labels=[],this.outputs=[];for(var ce=0,ye=J;ce<ye.length;ce+=1){var Me=ye[ce],Ye=Me[1];this.labels.push(Me[0]),this.outputs.push(Ye)}};function pi(C,z,J){return C*(1-J)+z*J}Ci.parse=function(C,z){if(C.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return z.error("Expected an even number of arguments.");var J=z.parse(C[1],1,it);if(!J)return null;var ce=[],ye=null;z.expectedType&&"value"!==z.expectedType.kind&&(ye=z.expectedType);for(var Me=1;Me<C.length;Me+=2){var Fe=1===Me?-1/0:C[Me],Ye=C[Me+1],ot=Me,_t=Me+1;if("number"!=typeof Fe)return z.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ot);if(ce.length&&ce[ce.length-1][0]>=Fe)return z.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ot);var Et=z.parse(Ye,_t,ye);if(!Et)return null;ye=ye||Et.type,ce.push([Fe,Et])}return new Ci(ye,J,ce)},Ci.prototype.evaluate=function(C){var z=this.labels,J=this.outputs;if(1===z.length)return J[0].evaluate(C);var ce=this.input.evaluate(C);if(ce<=z[0])return J[0].evaluate(C);var ye=z.length;return ce>=z[ye-1]?J[ye-1].evaluate(C):J[Vr(z,ce)].evaluate(C)},Ci.prototype.eachChild=function(C){C(this.input);for(var z=0,J=this.outputs;z<J.length;z+=1)C(J[z])},Ci.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},Ci.prototype.serialize=function(){for(var C=["step",this.input.serialize()],z=0;z<this.labels.length;z++)z>0&&C.push(this.labels[z]),C.push(this.outputs[z].serialize());return C};var lr=Object.freeze({__proto__:null,number:pi,color:function(C,z,J){return new Tn(pi(C.r,z.r,J),pi(C.g,z.g,J),pi(C.b,z.b,J),pi(C.a,z.a,J))},array:function(C,z,J){return C.map(function(ce,ye){return pi(ce,z[ye],J)})}}),bi=6/29,Ni=3*bi*bi,wa=Math.PI/180,Io=180/Math.PI;function $a(C){return C>.008856451679035631?Math.pow(C,1/3):C/Ni+4/29}function Ya(C){return C>bi?C*C*C:Ni*(C-4/29)}function Xi(C){return 255*(C<=.0031308?12.92*C:1.055*Math.pow(C,1/2.4)-.055)}function Oa(C){return(C/=255)<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4)}function Ds(C){var z=Oa(C.r),J=Oa(C.g),ce=Oa(C.b),ye=$a((.4124564*z+.3575761*J+.1804375*ce)/.95047),Me=$a((.2126729*z+.7151522*J+.072175*ce)/1);return{l:116*Me-16,a:500*(ye-Me),b:200*(Me-$a((.0193339*z+.119192*J+.9503041*ce)/1.08883)),alpha:C.a}}function Bo(C){var z=(C.l+16)/116,J=isNaN(C.a)?z:z+C.a/500,ce=isNaN(C.b)?z:z-C.b/200;return z=1*Ya(z),J=.95047*Ya(J),ce=1.08883*Ya(ce),new Tn(Xi(3.2404542*J-1.5371385*z-.4985314*ce),Xi(-.969266*J+1.8760108*z+.041556*ce),Xi(.0556434*J-.2040259*z+1.0572252*ce),C.alpha)}function sl(C,z,J){var ce=z-C;return C+J*(ce>180||ce<-180?ce-360*Math.round(ce/360):ce)}var Zo={forward:Ds,reverse:Bo,interpolate:function(C,z,J){return{l:pi(C.l,z.l,J),a:pi(C.a,z.a,J),b:pi(C.b,z.b,J),alpha:pi(C.alpha,z.alpha,J)}}},as={forward:function(C){var z=Ds(C),J=z.l,ce=z.a,ye=z.b,Me=Math.atan2(ye,ce)*Io;return{h:Me<0?Me+360:Me,c:Math.sqrt(ce*ce+ye*ye),l:J,alpha:C.a}},reverse:function(C){var z=C.h*wa,J=C.c;return Bo({l:C.l,a:Math.cos(z)*J,b:Math.sin(z)*J,alpha:C.alpha})},interpolate:function(C,z,J){return{h:sl(C.h,z.h,J),c:pi(C.c,z.c,J),l:pi(C.l,z.l,J),alpha:pi(C.alpha,z.alpha,J)}}},ll=Object.freeze({__proto__:null,lab:Zo,hcl:as}),Bi=function(C,z,J,ce,ye){this.type=C,this.operator=z,this.interpolation=J,this.input=ce,this.labels=[],this.outputs=[];for(var Me=0,Fe=ye;Me<Fe.length;Me+=1){var Ye=Fe[Me],_t=Ye[1];this.labels.push(Ye[0]),this.outputs.push(_t)}};function Ws(C,z,J,ce){var ye=ce-J,Me=C-J;return 0===ye?0:1===z?Me/ye:(Math.pow(z,Me)-1)/(Math.pow(z,ye)-1)}Bi.interpolationFactor=function(C,z,J,ce){var ye=0;if("exponential"===C.name)ye=Ws(z,C.base,J,ce);else if("linear"===C.name)ye=Ws(z,1,J,ce);else if("cubic-bezier"===C.name){var Me=C.controlPoints;ye=new t(Me[0],Me[1],Me[2],Me[3]).solve(Ws(z,1,J,ce))}return ye},Bi.parse=function(C,z){var J=C[0],ce=C[1],ye=C[2],Me=C.slice(3);if(!Array.isArray(ce)||0===ce.length)return z.error("Expected an interpolation type expression.",1);if("linear"===ce[0])ce={name:"linear"};else if("exponential"===ce[0]){var Fe=ce[1];if("number"!=typeof Fe)return z.error("Exponential interpolation requires a numeric base.",1,1);ce={name:"exponential",base:Fe}}else{if("cubic-bezier"!==ce[0])return z.error("Unknown interpolation type "+String(ce[0]),1,0);var Ye=ce.slice(1);if(4!==Ye.length||Ye.some(function(Gn){return"number"!=typeof Gn||Gn<0||Gn>1}))return z.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ce={name:"cubic-bezier",controlPoints:Ye}}if(C.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return z.error("Expected an even number of arguments.");if(!(ye=z.parse(ye,2,it)))return null;var ot=[],_t=null;"interpolate-hcl"===J||"interpolate-lab"===J?_t=Wt:z.expectedType&&"value"!==z.expectedType.kind&&(_t=z.expectedType);for(var Et=0;Et<Me.length;Et+=2){var Xt=Me[Et],ln=Me[Et+1],tn=Et+3,vn=Et+4;if("number"!=typeof Xt)return z.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',tn);if(ot.length&&ot[ot.length-1][0]>=Xt)return z.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',tn);var In=z.parse(ln,vn,_t);if(!In)return null;_t=_t||In.type,ot.push([Xt,In])}return"number"===_t.kind||"color"===_t.kind||"array"===_t.kind&&"number"===_t.itemType.kind&&"number"==typeof _t.N?new Bi(_t,J,ce,ye,ot):z.error("Type "+gn(_t)+" is not interpolatable.")},Bi.prototype.evaluate=function(C){var z=this.labels,J=this.outputs;if(1===z.length)return J[0].evaluate(C);var ce=this.input.evaluate(C);if(ce<=z[0])return J[0].evaluate(C);var ye=z.length;if(ce>=z[ye-1])return J[ye-1].evaluate(C);var Me=Vr(z,ce),ot=Bi.interpolationFactor(this.interpolation,ce,z[Me],z[Me+1]),_t=J[Me].evaluate(C),Et=J[Me+1].evaluate(C);return"interpolate"===this.operator?lr[this.type.kind.toLowerCase()](_t,Et,ot):"interpolate-hcl"===this.operator?as.reverse(as.interpolate(as.forward(_t),as.forward(Et),ot)):Zo.reverse(Zo.interpolate(Zo.forward(_t),Zo.forward(Et),ot))},Bi.prototype.eachChild=function(C){C(this.input);for(var z=0,J=this.outputs;z<J.length;z+=1)C(J[z])},Bi.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},Bi.prototype.serialize=function(){var C;C="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var z=[this.operator,C,this.input.serialize()],J=0;J<this.labels.length;J++)z.push(this.labels[J],this.outputs[J].serialize());return z};var Is=function(C,z){this.type=C,this.args=z};Is.parse=function(C,z){if(C.length<2)return z.error("Expectected at least one argument.");var J=null,ce=z.expectedType;ce&&"value"!==ce.kind&&(J=ce);for(var ye=[],Me=0,Fe=C.slice(1);Me<Fe.length;Me+=1){var ot=z.parse(Fe[Me],1+ye.length,J,void 0,{typeAnnotation:"omit"});if(!ot)return null;J=J||ot.type,ye.push(ot)}var _t=ce&&ye.some(function(Et){return sn(ce,Et.type)});return new Is(_t?Ue:J,ye)},Is.prototype.evaluate=function(C){for(var z,J=null,ce=0,ye=0,Me=this.args;ye<Me.length&&(ce++,(J=Me[ye].evaluate(C))&&J instanceof On&&!J.available&&(z||(z=J.name),J=null,ce===this.args.length&&(J=z)),null===J);ye+=1);return J},Is.prototype.eachChild=function(C){this.args.forEach(C)},Is.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Is.prototype.serialize=function(){var C=["coalesce"];return this.eachChild(function(z){C.push(z.serialize())}),C};var to=function(C,z){this.type=z.type,this.bindings=[].concat(C),this.result=z};to.prototype.evaluate=function(C){return this.result.evaluate(C)},to.prototype.eachChild=function(C){for(var z=0,J=this.bindings;z<J.length;z+=1)C(J[z][1]);C(this.result)},to.parse=function(C,z){if(C.length<4)return z.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var J=[],ce=1;ce<C.length-1;ce+=2){var ye=C[ce];if("string"!=typeof ye)return z.error("Expected string, but found "+typeof ye+" instead.",ce);if(/[^a-zA-Z0-9_]/.test(ye))return z.error("Variable names must contain only alphanumeric characters or '_'.",ce);var Me=z.parse(C[ce+1],ce+1);if(!Me)return null;J.push([ye,Me])}var Fe=z.parse(C[C.length-1],C.length-1,z.expectedType,J);return Fe?new to(J,Fe):null},to.prototype.outputDefined=function(){return this.result.outputDefined()},to.prototype.serialize=function(){for(var C=["let"],z=0,J=this.bindings;z<J.length;z+=1){var ce=J[z];C.push(ce[0],ce[1].serialize())}return C.push(this.result.serialize()),C};var fa=function(C,z,J){this.type=C,this.index=z,this.input=J};fa.parse=function(C,z){if(3!==C.length)return z.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var J=z.parse(C[1],1,it),ce=z.parse(C[2],2,Jt(z.expectedType||Ue));return J&&ce?new fa(ce.type.itemType,J,ce):null},fa.prototype.evaluate=function(C){var z=this.index.evaluate(C),J=this.input.evaluate(C);if(z<0)throw new Or("Array index out of bounds: "+z+" < 0.");if(z>=J.length)throw new Or("Array index out of bounds: "+z+" > "+(J.length-1)+".");if(z!==Math.floor(z))throw new Or("Array index must be an integer, but found "+z+" instead.");return J[z]},fa.prototype.eachChild=function(C){C(this.index),C(this.input)},fa.prototype.outputDefined=function(){return!1},fa.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Xo=function(C,z){this.type=qt,this.needle=C,this.haystack=z};Xo.parse=function(C,z){if(3!==C.length)return z.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var J=z.parse(C[1],1,Ue),ce=z.parse(C[2],2,Ue);return J&&ce?hn(J.type,[qt,Mt,it,jt,Ue])?new Xo(J,ce):z.error("Expected first argument to be of type boolean, string, number or null, but found "+gn(J.type)+" instead"):null},Xo.prototype.evaluate=function(C){var z=this.needle.evaluate(C),J=this.haystack.evaluate(C);if(!J)return!1;if(!Dn(z,["boolean","string","number","null"]))throw new Or("Expected first argument to be of type boolean, string, number or null, but found "+gn(Mr(z))+" instead.");if(!Dn(J,["string","array"]))throw new Or("Expected second argument to be of type array or string, but found "+gn(Mr(J))+" instead.");return J.indexOf(z)>=0},Xo.prototype.eachChild=function(C){C(this.needle),C(this.haystack)},Xo.prototype.outputDefined=function(){return!0},Xo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ps=function(C,z,J){this.type=it,this.needle=C,this.haystack=z,this.fromIndex=J};ps.parse=function(C,z){if(C.length<=2||C.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var J=z.parse(C[1],1,Ue),ce=z.parse(C[2],2,Ue);if(!J||!ce)return null;if(!hn(J.type,[qt,Mt,it,jt,Ue]))return z.error("Expected first argument to be of type boolean, string, number or null, but found "+gn(J.type)+" instead");if(4===C.length){var ye=z.parse(C[3],3,it);return ye?new ps(J,ce,ye):null}return new ps(J,ce)},ps.prototype.evaluate=function(C){var z=this.needle.evaluate(C),J=this.haystack.evaluate(C);if(!Dn(z,["boolean","string","number","null"]))throw new Or("Expected first argument to be of type boolean, string, number or null, but found "+gn(Mr(z))+" instead.");if(!Dn(J,["string","array"]))throw new Or("Expected second argument to be of type array or string, but found "+gn(Mr(J))+" instead.");if(this.fromIndex){var ce=this.fromIndex.evaluate(C);return J.indexOf(z,ce)}return J.indexOf(z)},ps.prototype.eachChild=function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Lo=function(C,z,J,ce,ye,Me){this.inputType=C,this.type=z,this.input=J,this.cases=ce,this.outputs=ye,this.otherwise=Me};Lo.parse=function(C,z){if(C.length<5)return z.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!=1)return z.error("Expected an even number of arguments.");var J,ce;z.expectedType&&"value"!==z.expectedType.kind&&(ce=z.expectedType);for(var ye={},Me=[],Fe=2;Fe<C.length-1;Fe+=2){var Ye=C[Fe],ot=C[Fe+1];Array.isArray(Ye)||(Ye=[Ye]);var _t=z.concat(Fe);if(0===Ye.length)return _t.error("Expected at least one branch label.");for(var Et=0,Xt=Ye;Et<Xt.length;Et+=1){var ln=Xt[Et];if("number"!=typeof ln&&"string"!=typeof ln)return _t.error("Branch labels must be numbers or strings.");if("number"==typeof ln&&Math.abs(ln)>Number.MAX_SAFE_INTEGER)return _t.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof ln&&Math.floor(ln)!==ln)return _t.error("Numeric branch labels must be integer values.");if(J){if(_t.checkSubtype(J,Mr(ln)))return null}else J=Mr(ln);if(void 0!==ye[String(ln)])return _t.error("Branch labels must be unique.");ye[String(ln)]=Me.length}var tn=z.parse(ot,Fe,ce);if(!tn)return null;ce=ce||tn.type,Me.push(tn)}var vn=z.parse(C[1],1,Ue);if(!vn)return null;var In=z.parse(C[C.length-1],C.length-1,ce);return In?"value"!==vn.type.kind&&z.concat(1).checkSubtype(J,vn.type)?null:new Lo(J,ce,vn,ye,Me,In):null},Lo.prototype.evaluate=function(C){var z=this.input.evaluate(C);return(Mr(z)===this.inputType&&this.outputs[this.cases[z]]||this.otherwise).evaluate(C)},Lo.prototype.eachChild=function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},Lo.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},Lo.prototype.serialize=function(){for(var C=this,z=["match",this.input.serialize()],J=[],ce={},ye=0,Me=Object.keys(this.cases).sort();ye<Me.length;ye+=1){var Fe=Me[ye];void 0===(Xt=ce[this.cases[Fe]])?(ce[this.cases[Fe]]=J.length,J.push([this.cases[Fe],[Fe]])):J[Xt][1].push(Fe)}for(var Ye=function(tn){return"number"===C.inputType.kind?Number(tn):tn},ot=0,_t=J;ot<_t.length;ot+=1){var Et=_t[ot],Xt=Et[0],ln=Et[1];z.push(1===ln.length?Ye(ln[0]):ln.map(Ye)),z.push(this.outputs[outputIndex$1].serialize())}return z.push(this.otherwise.serialize()),z};var lo=function(C,z,J){this.type=C,this.branches=z,this.otherwise=J};lo.parse=function(C,z){if(C.length<4)return z.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!=0)return z.error("Expected an odd number of arguments.");var J;z.expectedType&&"value"!==z.expectedType.kind&&(J=z.expectedType);for(var ce=[],ye=1;ye<C.length-1;ye+=2){var Me=z.parse(C[ye],ye,qt);if(!Me)return null;var Fe=z.parse(C[ye+1],ye+1,J);if(!Fe)return null;ce.push([Me,Fe]),J=J||Fe.type}var Ye=z.parse(C[C.length-1],C.length-1,J);return Ye?new lo(J,ce,Ye):null},lo.prototype.evaluate=function(C){for(var z=0,J=this.branches;z<J.length;z+=1){var ce=J[z],Me=ce[1];if(ce[0].evaluate(C))return Me.evaluate(C)}return this.otherwise.evaluate(C)},lo.prototype.eachChild=function(C){for(var z=0,J=this.branches;z<J.length;z+=1){var ce=J[z],Me=ce[1];C(ce[0]),C(Me)}C(this.otherwise)},lo.prototype.outputDefined=function(){return this.branches.every(function(C){return C[1].outputDefined()})&&this.otherwise.outputDefined()},lo.prototype.serialize=function(){var C=["case"];return this.eachChild(function(z){C.push(z.serialize())}),C};var uo=function(C,z,J,ce){this.type=C,this.input=z,this.beginIndex=J,this.endIndex=ce};function ul(C,z){return"=="===C||"!="===C?"boolean"===z.kind||"string"===z.kind||"number"===z.kind||"null"===z.kind||"value"===z.kind:"string"===z.kind||"number"===z.kind||"value"===z.kind}function lu(C,z,J,ce){return 0===ce.compare(z,J)}function ga(C,z,J){var ce="=="!==C&&"!="!==C;return function(){function ye(Me,Fe,Ye){this.type=qt,this.lhs=Me,this.rhs=Fe,this.collator=Ye,this.hasUntypedArgument="value"===Me.type.kind||"value"===Fe.type.kind}return ye.parse=function(Me,Fe){if(3!==Me.length&&4!==Me.length)return Fe.error("Expected two or three arguments.");var Ye=Me[0],ot=Fe.parse(Me[1],1,Ue);if(!ot)return null;if(!ul(Ye,ot.type))return Fe.concat(1).error('"'+Ye+"\" comparisons are not supported for type '"+gn(ot.type)+"'.");var _t=Fe.parse(Me[2],2,Ue);if(!_t)return null;if(!ul(Ye,_t.type))return Fe.concat(2).error('"'+Ye+"\" comparisons are not supported for type '"+gn(_t.type)+"'.");if(ot.type.kind!==_t.type.kind&&"value"!==ot.type.kind&&"value"!==_t.type.kind)return Fe.error("Cannot compare types '"+gn(ot.type)+"' and '"+gn(_t.type)+"'.");ce&&("value"===ot.type.kind&&"value"!==_t.type.kind?ot=new Xn(_t.type,[ot]):"value"!==ot.type.kind&&"value"===_t.type.kind&&(_t=new Xn(ot.type,[_t])));var Et=null;if(4===Me.length){if("string"!==ot.type.kind&&"string"!==_t.type.kind&&"value"!==ot.type.kind&&"value"!==_t.type.kind)return Fe.error("Cannot use collator to compare non-string types.");if(!(Et=Fe.parse(Me[3],3,yt)))return null}return new ye(ot,_t,Et)},ye.prototype.evaluate=function(Me){var Fe=this.lhs.evaluate(Me),Ye=this.rhs.evaluate(Me);if(ce&&this.hasUntypedArgument){var ot=Mr(Fe),_t=Mr(Ye);if(ot.kind!==_t.kind||"string"!==ot.kind&&"number"!==ot.kind)throw new Or('Expected arguments for "'+C+'" to be (string, string) or (number, number), but found ('+ot.kind+", "+_t.kind+") instead.")}if(this.collator&&!ce&&this.hasUntypedArgument){var Et=Mr(Fe),Xt=Mr(Ye);if("string"!==Et.kind||"string"!==Xt.kind)return z(Me,Fe,Ye)}return this.collator?J(Me,Fe,Ye,this.collator.evaluate(Me)):z(Me,Fe,Ye)},ye.prototype.eachChild=function(Me){Me(this.lhs),Me(this.rhs),this.collator&&Me(this.collator)},ye.prototype.outputDefined=function(){return!0},ye.prototype.serialize=function(){var Me=[C];return this.eachChild(function(Fe){Me.push(Fe.serialize())}),Me},ye}()}uo.parse=function(C,z){if(C.length<=2||C.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var J=z.parse(C[1],1,Ue),ce=z.parse(C[2],2,it);if(!J||!ce)return null;if(!hn(J.type,[Jt(Ue),Mt,Ue]))return z.error("Expected first argument to be of type array or string, but found "+gn(J.type)+" instead");if(4===C.length){var ye=z.parse(C[3],3,it);return ye?new uo(J.type,J,ce,ye):null}return new uo(J.type,J,ce)},uo.prototype.evaluate=function(C){var z=this.input.evaluate(C),J=this.beginIndex.evaluate(C);if(!Dn(z,["string","array"]))throw new Or("Expected first argument to be of type array or string, but found "+gn(Mr(z))+" instead.");if(this.endIndex){var ce=this.endIndex.evaluate(C);return z.slice(J,ce)}return z.slice(J)},uo.prototype.eachChild=function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},uo.prototype.outputDefined=function(){return!1},uo.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Vl=ga("==",function(C,z,J){return z===J},lu),cl=ga("!=",function(C,z,J){return z!==J},function(C,z,J,ce){return!lu(0,z,J,ce)}),Xl=ga("<",function(C,z,J){return z<J},function(C,z,J,ce){return ce.compare(z,J)<0}),$l=ga(">",function(C,z,J){return z>J},function(C,z,J,ce){return ce.compare(z,J)>0}),Ro=ga("<=",function(C,z,J){return z<=J},function(C,z,J,ce){return ce.compare(z,J)<=0}),uu=ga(">=",function(C,z,J){return z>=J},function(C,z,J,ce){return ce.compare(z,J)>=0}),Ls=function(C,z,J,ce,ye){this.type=Mt,this.number=C,this.locale=z,this.currency=J,this.minFractionDigits=ce,this.maxFractionDigits=ye};Ls.parse=function(C,z){if(3!==C.length)return z.error("Expected two arguments.");var J=z.parse(C[1],1,it);if(!J)return null;var ce=C[2];if("object"!=typeof ce||Array.isArray(ce))return z.error("NumberFormat options argument must be an object.");var ye=null;if(ce.locale&&!(ye=z.parse(ce.locale,1,Mt)))return null;var Me=null;if(ce.currency&&!(Me=z.parse(ce.currency,1,Mt)))return null;var Fe=null;if(ce["min-fraction-digits"]&&!(Fe=z.parse(ce["min-fraction-digits"],1,it)))return null;var Ye=null;return ce["max-fraction-digits"]&&!(Ye=z.parse(ce["max-fraction-digits"],1,it))?null:new Ls(J,ye,Me,Fe,Ye)},Ls.prototype.evaluate=function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},Ls.prototype.eachChild=function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},Ls.prototype.outputDefined=function(){return!1},Ls.prototype.serialize=function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]};var Ui=function(C){this.type=it,this.input=C};Ui.parse=function(C,z){if(2!==C.length)return z.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var J=z.parse(C[1],1);return J?"array"!==J.type.kind&&"string"!==J.type.kind&&"value"!==J.type.kind?z.error("Expected argument of type string or array, but found "+gn(J.type)+" instead."):new Ui(J):null},Ui.prototype.evaluate=function(C){var z=this.input.evaluate(C);if("string"==typeof z||Array.isArray(z))return z.length;throw new Or("Expected value to be of type string or array, but found "+gn(Mr(z))+" instead.")},Ui.prototype.eachChild=function(C){C(this.input)},Ui.prototype.outputDefined=function(){return!1},Ui.prototype.serialize=function(){var C=["length"];return this.eachChild(function(z){C.push(z.serialize())}),C};var _o={"==":Vl,"!=":cl,">":$l,"<":Xl,">=":uu,"<=":Ro,array:Xn,at:fa,boolean:Xn,case:lo,coalesce:Is,collator:$r,format:jn,image:nr,in:Xo,"index-of":ps,interpolate:Bi,"interpolate-hcl":Bi,"interpolate-lab":Bi,length:Ui,let:to,literal:mr,match:Lo,number:Xn,"number-format":Ls,object:Xn,slice:uo,step:Ci,string:Xn,"to-boolean":Jn,"to-color":Jn,"to-number":Jn,"to-string":Jn,var:wr,within:gr};function co(C,z){var J=z[0],ce=z[1],ye=z[2],Me=z[3];J=J.evaluate(C),ce=ce.evaluate(C),ye=ye.evaluate(C);var Fe=Me?Me.evaluate(C):1,Ye=Qn(J,ce,ye,Fe);if(Ye)throw new Or(Ye);return new Tn(J/255*Fe,ce/255*Fe,ye/255*Fe,Fe)}function $o(C,z){return C in z}function Ms(C,z){var J=z[C];return void 0===J?null:J}function fo(C){return{type:C}}function Jo(C){return{result:"success",value:C}}function fi(C){return{result:"error",value:C}}function na(C){return"data-driven"===C["property-type"]||"cross-faded-data-driven"===C["property-type"]}function Za(C){return!!C.expression&&C.expression.parameters.indexOf("zoom")>-1}function yo(C){return!!C.expression&&C.expression.interpolated}function ya(C){return C instanceof Number?"number":C instanceof String?"string":C instanceof Boolean?"boolean":Array.isArray(C)?"array":null===C?"null":typeof C}function We(C){return"object"==typeof C&&null!==C&&!Array.isArray(C)}function Ke(C){return C}function at(C,z,J){return void 0!==C?C:void 0!==z?z:void 0!==J?J:void 0}function pt(C,z,J,ce,ye){return at(typeof J===ye?ce[J]:void 0,C.default,z.default)}function kt(C,z,J){if("number"!==ya(J))return at(C.default,z.default);var ce=C.stops.length;if(1===ce||J<=C.stops[0][0])return C.stops[0][1];if(J>=C.stops[ce-1][0])return C.stops[ce-1][1];var ye=Vr(C.stops.map(function(Me){return Me[0]}),J);return C.stops[ye][1]}function vt(C,z,J){var ce=void 0!==C.base?C.base:1;if("number"!==ya(J))return at(C.default,z.default);var ye=C.stops.length;if(1===ye||J<=C.stops[0][0])return C.stops[0][1];if(J>=C.stops[ye-1][0])return C.stops[ye-1][1];var ln,tn,In,Gn,Me=Vr(C.stops.map(function(Xt){return Xt[0]}),J),Fe=(ln=ce,Gn=J-(tn=C.stops[Me][0]),0==(In=C.stops[Me+1][0]-tn)?0:1===ln?Gn/In:(Math.pow(ln,Gn)-1)/(Math.pow(ln,In)-1)),Ye=C.stops[Me][1],ot=C.stops[Me+1][1],_t=lr[z.type]||Ke;if(C.colorSpace&&"rgb"!==C.colorSpace){var Et=ll[C.colorSpace];_t=function(Xt,ln){return Et.reverse(Et.interpolate(Et.forward(Xt),Et.forward(ln),Fe))}}return"function"==typeof Ye.evaluate?{evaluate:function(){for(var Xt=[],ln=arguments.length;ln--;)Xt[ln]=arguments[ln];var tn=Ye.evaluate.apply(void 0,Xt),vn=ot.evaluate.apply(void 0,Xt);if(void 0!==tn&&void 0!==vn)return _t(tn,vn,Fe)}}:_t(Ye,ot,Fe)}function Pt(C,z,J){return"color"===z.type?J=Tn.parse(J):"formatted"===z.type?J=Fn.fromString(J.toString()):"resolvedImage"===z.type?J=On.fromString(J.toString()):ya(J)===z.type||"enum"===z.type&&z.values[J]||(J=void 0),at(J,C.default,z.default)}Lr.register(_o,{error:[{kind:"error"},[Mt],function(C,z){throw new Or(z[0].evaluate(C))}],typeof:[Mt,[Ue],function(C,z){return gn(Mr(z[0].evaluate(C)))}],"to-rgba":[Jt(it,4),[Wt],function(C,z){return z[0].evaluate(C).toArray()}],rgb:[Wt,[it,it,it],co],rgba:[Wt,[it,it,it,it],co],has:{type:qt,overloads:[[[Mt],function(C,z){return $o(z[0].evaluate(C),C.properties())}],[[Mt,an],function(C,z){var ce=z[1];return $o(z[0].evaluate(C),ce.evaluate(C))}]]},get:{type:Ue,overloads:[[[Mt],function(C,z){return Ms(z[0].evaluate(C),C.properties())}],[[Mt,an],function(C,z){var ce=z[1];return Ms(z[0].evaluate(C),ce.evaluate(C))}]]},"feature-state":[Ue,[Mt],function(C,z){return Ms(z[0].evaluate(C),C.featureState||{})}],properties:[an,[],function(C){return C.properties()}],"geometry-type":[Mt,[],function(C){return C.geometryType()}],id:[Ue,[],function(C){return C.id()}],zoom:[it,[],function(C){return C.globals.zoom}],"heatmap-density":[it,[],function(C){return C.globals.heatmapDensity||0}],"line-progress":[it,[],function(C){return C.globals.lineProgress||0}],accumulated:[Ue,[],function(C){return void 0===C.globals.accumulated?null:C.globals.accumulated}],"+":[it,fo(it),function(C,z){for(var J=0,ce=0,ye=z;ce<ye.length;ce+=1)J+=ye[ce].evaluate(C);return J}],"*":[it,fo(it),function(C,z){for(var J=1,ce=0,ye=z;ce<ye.length;ce+=1)J*=ye[ce].evaluate(C);return J}],"-":{type:it,overloads:[[[it,it],function(C,z){var ce=z[1];return z[0].evaluate(C)-ce.evaluate(C)}],[[it],function(C,z){return-z[0].evaluate(C)}]]},"/":[it,[it,it],function(C,z){var ce=z[1];return z[0].evaluate(C)/ce.evaluate(C)}],"%":[it,[it,it],function(C,z){var ce=z[1];return z[0].evaluate(C)%ce.evaluate(C)}],ln2:[it,[],function(){return Math.LN2}],pi:[it,[],function(){return Math.PI}],e:[it,[],function(){return Math.E}],"^":[it,[it,it],function(C,z){var ce=z[1];return Math.pow(z[0].evaluate(C),ce.evaluate(C))}],sqrt:[it,[it],function(C,z){return Math.sqrt(z[0].evaluate(C))}],log10:[it,[it],function(C,z){return Math.log(z[0].evaluate(C))/Math.LN10}],ln:[it,[it],function(C,z){return Math.log(z[0].evaluate(C))}],log2:[it,[it],function(C,z){return Math.log(z[0].evaluate(C))/Math.LN2}],sin:[it,[it],function(C,z){return Math.sin(z[0].evaluate(C))}],cos:[it,[it],function(C,z){return Math.cos(z[0].evaluate(C))}],tan:[it,[it],function(C,z){return Math.tan(z[0].evaluate(C))}],asin:[it,[it],function(C,z){return Math.asin(z[0].evaluate(C))}],acos:[it,[it],function(C,z){return Math.acos(z[0].evaluate(C))}],atan:[it,[it],function(C,z){return Math.atan(z[0].evaluate(C))}],min:[it,fo(it),function(C,z){return Math.min.apply(Math,z.map(function(J){return J.evaluate(C)}))}],max:[it,fo(it),function(C,z){return Math.max.apply(Math,z.map(function(J){return J.evaluate(C)}))}],abs:[it,[it],function(C,z){return Math.abs(z[0].evaluate(C))}],round:[it,[it],function(C,z){var J=z[0].evaluate(C);return J<0?-Math.round(-J):Math.round(J)}],floor:[it,[it],function(C,z){return Math.floor(z[0].evaluate(C))}],ceil:[it,[it],function(C,z){return Math.ceil(z[0].evaluate(C))}],"filter-==":[qt,[Mt,Ue],function(C,z){var J=z[0],ce=z[1];return C.properties()[J.value]===ce.value}],"filter-id-==":[qt,[Ue],function(C,z){var J=z[0];return C.id()===J.value}],"filter-type-==":[qt,[Mt],function(C,z){var J=z[0];return C.geometryType()===J.value}],"filter-<":[qt,[Mt,Ue],function(C,z){var J=z[0],ce=z[1],ye=C.properties()[J.value],Me=ce.value;return typeof ye==typeof Me&&ye<Me}],"filter-id-<":[qt,[Ue],function(C,z){var J=z[0],ce=C.id(),ye=J.value;return typeof ce==typeof ye&&ce<ye}],"filter->":[qt,[Mt,Ue],function(C,z){var J=z[0],ce=z[1],ye=C.properties()[J.value],Me=ce.value;return typeof ye==typeof Me&&ye>Me}],"filter-id->":[qt,[Ue],function(C,z){var J=z[0],ce=C.id(),ye=J.value;return typeof ce==typeof ye&&ce>ye}],"filter-<=":[qt,[Mt,Ue],function(C,z){var J=z[0],ce=z[1],ye=C.properties()[J.value],Me=ce.value;return typeof ye==typeof Me&&ye<=Me}],"filter-id-<=":[qt,[Ue],function(C,z){var J=z[0],ce=C.id(),ye=J.value;return typeof ce==typeof ye&&ce<=ye}],"filter->=":[qt,[Mt,Ue],function(C,z){var J=z[0],ce=z[1],ye=C.properties()[J.value],Me=ce.value;return typeof ye==typeof Me&&ye>=Me}],"filter-id->=":[qt,[Ue],function(C,z){var J=z[0],ce=C.id(),ye=J.value;return typeof ce==typeof ye&&ce>=ye}],"filter-has":[qt,[Ue],function(C,z){return z[0].value in C.properties()}],"filter-has-id":[qt,[],function(C){return null!==C.id()&&void 0!==C.id()}],"filter-type-in":[qt,[Jt(Mt)],function(C,z){return z[0].value.indexOf(C.geometryType())>=0}],"filter-id-in":[qt,[Jt(Ue)],function(C,z){return z[0].value.indexOf(C.id())>=0}],"filter-in-small":[qt,[Mt,Jt(Ue)],function(C,z){var J=z[0];return z[1].value.indexOf(C.properties()[J.value])>=0}],"filter-in-large":[qt,[Mt,Jt(Ue)],function(C,z){var J=z[0],ce=z[1];return function(ye,Me,Fe,Ye){for(;Fe<=Ye;){var ot=Fe+Ye>>1;if(Me[ot]===ye)return!0;Me[ot]>ye?Ye=ot-1:Fe=ot+1}return!1}(C.properties()[J.value],ce.value,0,ce.value.length-1)}],all:{type:qt,overloads:[[[qt,qt],function(C,z){var ce=z[1];return z[0].evaluate(C)&&ce.evaluate(C)}],[fo(qt),function(C,z){for(var J=0,ce=z;J<ce.length;J+=1)if(!ce[J].evaluate(C))return!1;return!0}]]},any:{type:qt,overloads:[[[qt,qt],function(C,z){var ce=z[1];return z[0].evaluate(C)||ce.evaluate(C)}],[fo(qt),function(C,z){for(var J=0,ce=z;J<ce.length;J+=1)if(ce[J].evaluate(C))return!0;return!1}]]},"!":[qt,[qt],function(C,z){return!z[0].evaluate(C)}],"is-supported-script":[qt,[Mt],function(C,z){var ce=C.globals&&C.globals.isSupportedScript;return!ce||ce(z[0].evaluate(C))}],upcase:[Mt,[Mt],function(C,z){return z[0].evaluate(C).toUpperCase()}],downcase:[Mt,[Mt],function(C,z){return z[0].evaluate(C).toLowerCase()}],concat:[Mt,fo(Ue),function(C,z){return z.map(function(J){return Wr(J.evaluate(C))}).join("")}],"resolved-locale":[Mt,[yt],function(C,z){return z[0].evaluate(C).resolvedLocale()}]});var un=function(C,z){var J;this.expression=C,this._warningHistory={},this._evaluator=new Hr,this._defaultValue=z?"color"===(J=z).type&&We(J.default)?new Tn(0,0,0,0):"color"===J.type?Tn.parse(J.default)||null:void 0===J.default?null:J.default:null,this._enumValues=z&&"enum"===z.type?z.values:null};function fn(C){return Array.isArray(C)&&C.length>0&&"string"==typeof C[0]&&C[0]in _o}function on(C,z){var ye,Me,J=new Ir(_o,[],z?(Me={color:Wt,string:Mt,number:it,enum:Mt,boolean:qt,formatted:Dt,resolvedImage:Ht},"array"===(ye=z).type?Jt(Me[ye.value]||Ue,ye.length):Me[ye.type]):void 0),ce=J.parse(C,void 0,void 0,void 0,z&&"string"===z.type?{typeAnnotation:"coerce"}:void 0);return ce?Jo(new un(ce,z)):fi(J.errors)}un.prototype.evaluateWithoutErrorHandling=function(C,z,J,ce,ye,Me){return this._evaluator.globals=C,this._evaluator.feature=z,this._evaluator.featureState=J,this._evaluator.canonical=ce,this._evaluator.availableImages=ye||null,this._evaluator.formattedSection=Me,this.expression.evaluate(this._evaluator)},un.prototype.evaluate=function(C,z,J,ce,ye,Me){this._evaluator.globals=C,this._evaluator.feature=z||null,this._evaluator.featureState=J||null,this._evaluator.canonical=ce,this._evaluator.availableImages=ye||null,this._evaluator.formattedSection=Me||null;try{var Fe=this.expression.evaluate(this._evaluator);if(null==Fe||"number"==typeof Fe&&Fe!=Fe)return this._defaultValue;if(this._enumValues&&!(Fe in this._enumValues))throw new Or("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ye){return JSON.stringify(Ye)}).join(", ")+", but found "+JSON.stringify(Fe)+" instead.");return Fe}catch(Ye){return this._warningHistory[Ye.message]||(this._warningHistory[Ye.message]=!0,"undefined"!=typeof console&&console.warn(Ye.message)),this._defaultValue}};var pn=function(C,z){this.kind=C,this._styleExpression=z,this.isStateDependent="constant"!==C&&!ir(z.expression)};pn.prototype.evaluateWithoutErrorHandling=function(C,z,J,ce,ye,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,z,J,ce,ye,Me)},pn.prototype.evaluate=function(C,z,J,ce,ye,Me){return this._styleExpression.evaluate(C,z,J,ce,ye,Me)};var An=function(C,z,J,ce){this.kind=C,this.zoomStops=J,this._styleExpression=z,this.isStateDependent="camera"!==C&&!ir(z.expression),this.interpolationType=ce};function Ln(C,z){if("error"===(C=on(C,z)).result)return C;var J=C.value.expression,ce=Rr(J);if(!ce&&!na(z))return fi([new gt("","data expressions not supported")]);var ye=rr(J,["zoom"]);if(!ye&&!Za(z))return fi([new gt("","zoom expressions not supported")]);var Me=function Ye(ot){var _t=null;if(ot instanceof to)_t=Ye(ot.result);else if(ot instanceof Is)for(var Et=0,Xt=ot.args;Et<Xt.length&&!(_t=Ye(Xt[Et]));Et+=1);else(ot instanceof Ci||ot instanceof Bi)&&ot.input instanceof Lr&&"zoom"===ot.input.name&&(_t=ot);return _t instanceof gt||ot.eachChild(function(tn){var vn=Ye(tn);vn instanceof gt?_t=vn:!_t&&vn?_t=new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):_t&&vn&&_t!==vn&&(_t=new gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),_t}(J);return Me||ye?Me instanceof gt?fi([Me]):Me instanceof Bi&&!yo(z)?fi([new gt("",'"interpolate" expressions cannot be used with this property')]):Jo(Me?new An(ce?"camera":"composite",C.value,Me.labels,Me instanceof Bi?Me.interpolation:void 0):new pn(ce?"constant":"source",C.value)):fi([new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}An.prototype.evaluateWithoutErrorHandling=function(C,z,J,ce,ye,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,z,J,ce,ye,Me)},An.prototype.evaluate=function(C,z,J,ce,ye,Me){return this._styleExpression.evaluate(C,z,J,ce,ye,Me)},An.prototype.interpolationFactor=function(C,z,J){return this.interpolationType?Bi.interpolationFactor(this.interpolationType,C,z,J):0};var Pn=function(C,z){this._parameters=C,this._specification=z,Tt(this,function J(ce,ye){var Me,Fe,Ye,ot="color"===ye.type,_t=ce.stops&&"object"==typeof ce.stops[0][0],Xt=_t||!(_t||void 0!==ce.property),ln=ce.type||(yo(ye)?"exponential":"interval");if(ot&&((ce=Tt({},ce)).stops&&(ce.stops=ce.stops.map(function(Ei){return[Ei[0],Tn.parse(Ei[1])]})),ce.default=Tn.parse(ce.default?ce.default:ye.default)),ce.colorSpace&&"rgb"!==ce.colorSpace&&!ll[ce.colorSpace])throw new Error("Unknown color space: "+ce.colorSpace);if("exponential"===ln)Me=vt;else if("interval"===ln)Me=kt;else if("categorical"===ln){Me=pt,Fe=Object.create(null);for(var tn=0,vn=ce.stops;tn<vn.length;tn+=1){var In=vn[tn];Fe[In[0]]=In[1]}Ye=typeof ce.stops[0][0]}else{if("identity"!==ln)throw new Error('Unknown function type "'+ln+'"');Me=Pt}if(_t){for(var Gn={},qn=[],Kn=0;Kn<ce.stops.length;Kn++){var er=ce.stops[Kn],or=er[0].zoom;void 0===Gn[or]&&(Gn[or]={zoom:or,type:ce.type,property:ce.property,default:ce.default,stops:[]},qn.push(or)),Gn[or].stops.push([er[0].value,er[1]])}for(var Cr=[],Fr=0,ni=qn;Fr<ni.length;Fr+=1){var Qr=ni[Fr];Cr.push([Gn[Qr].zoom,J(Gn[Qr],ye)])}var di={name:"linear"};return{kind:"composite",interpolationType:di,interpolationFactor:Bi.interpolationFactor.bind(void 0,di),zoomStops:Cr.map(function(Ei){return Ei[0]}),evaluate:function(Ei,mi){var Ri=Ei.zoom;return vt({stops:Cr,base:ce.base},ye,Ri).evaluate(Ri,mi)}}}if(Xt){var ki="exponential"===ln?{name:"exponential",base:void 0!==ce.base?ce.base:1}:null;return{kind:"camera",interpolationType:ki,interpolationFactor:Bi.interpolationFactor.bind(void 0,ki),zoomStops:ce.stops.map(function(Ei){return Ei[0]}),evaluate:function(Ei){return Me(ce,ye,Ei.zoom,Fe,Ye)}}}return{kind:"source",evaluate:function(Ei,mi){var Ri=mi&&mi.properties?mi.properties[ce.property]:void 0;return void 0===Ri?at(ce.default,ye.default):Me(ce,ye,Ri,Fe,Ye)}}}(this._parameters,this._specification))};function zn(C){var z=C.key,J=C.value,ce=C.valueSpec||{},ye=C.objectElementValidators||{},Me=C.style,Fe=C.styleSpec,Ye=[],ot=ya(J);if("object"!==ot)return[new st(z,J,"object expected, "+ot+" found")];for(var _t in J){var Et=_t.split(".")[0],Xt=ce[Et]||ce["*"],ln=void 0;if(ye[Et])ln=ye[Et];else if(ce[Et])ln=yn;else if(ye["*"])ln=ye["*"];else{if(!ce["*"]){Ye.push(new st(z,J[_t],'unknown property "'+_t+'"'));continue}ln=yn}Ye=Ye.concat(ln({key:(z&&z+".")+_t,value:J[_t],valueSpec:Xt,style:Me,styleSpec:Fe,object:J,objectKey:_t},J))}for(var tn in ce)ye[tn]||ce[tn].required&&void 0===ce[tn].default&&void 0===J[tn]&&Ye.push(new st(z,J,'missing required property "'+tn+'"'));return Ye}function yr(C){var z=C.value,J=C.valueSpec,ce=C.style,ye=C.styleSpec,Me=C.key,Fe=C.arrayElementValidator||yn;if("array"!==ya(z))return[new st(Me,z,"array expected, "+ya(z)+" found")];if(J.length&&z.length!==J.length)return[new st(Me,z,"array length "+J.length+" expected, length "+z.length+" found")];if(J["min-length"]&&z.length<J["min-length"])return[new st(Me,z,"array length at least "+J["min-length"]+" expected, length "+z.length+" found")];var Ye={type:J.value,values:J.values};ye.$version<7&&(Ye.function=J.function),"object"===ya(J.value)&&(Ye=J.value);for(var ot=[],_t=0;_t<z.length;_t++)ot=ot.concat(Fe({array:z,arrayIndex:_t,value:z[_t],valueSpec:Ye,style:ce,styleSpec:ye,key:Me+"["+_t+"]"}));return ot}function Dr(C){var z=C.key,J=C.value,ce=C.valueSpec,ye=ya(J);return"number"===ye&&J!=J&&(ye="NaN"),"number"!==ye?[new st(z,J,"number expected, "+ye+" found")]:"minimum"in ce&&J<ce.minimum?[new st(z,J,J+" is less than the minimum value "+ce.minimum)]:"maximum"in ce&&J>ce.maximum?[new st(z,J,J+" is greater than the maximum value "+ce.maximum)]:[]}function Yr(C){var z,J,ce,ye=C.valueSpec,Me=xt(C.value.type),Fe={},Ye="categorical"!==Me&&void 0===C.value.property,ot=!Ye,_t="array"===ya(C.value.stops)&&"array"===ya(C.value.stops[0])&&"object"===ya(C.value.stops[0][0]),Et=zn({key:C.key,value:C.value,valueSpec:C.styleSpec.function,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{stops:function(tn){if("identity"===Me)return[new st(tn.key,tn.value,'identity function may not have a "stops" property')];var vn=[],In=tn.value;return vn=vn.concat(yr({key:tn.key,value:In,valueSpec:tn.valueSpec,style:tn.style,styleSpec:tn.styleSpec,arrayElementValidator:Xt})),"array"===ya(In)&&0===In.length&&vn.push(new st(tn.key,In,"array must have at least one stop")),vn},default:function(tn){return yn({key:tn.key,value:tn.value,valueSpec:ye,style:tn.style,styleSpec:tn.styleSpec})}}});return"identity"===Me&&Ye&&Et.push(new st(C.key,C.value,'missing required property "property"')),"identity"===Me||C.value.stops||Et.push(new st(C.key,C.value,'missing required property "stops"')),"exponential"===Me&&C.valueSpec.expression&&!yo(C.valueSpec)&&Et.push(new st(C.key,C.value,"exponential functions not supported")),C.styleSpec.$version>=8&&(ot&&!na(C.valueSpec)?Et.push(new st(C.key,C.value,"property functions not supported")):Ye&&!Za(C.valueSpec)&&Et.push(new st(C.key,C.value,"zoom functions not supported"))),"categorical"!==Me&&!_t||void 0!==C.value.property||Et.push(new st(C.key,C.value,'"property" property is required')),Et;function Xt(tn){var vn=[],In=tn.value,Gn=tn.key;if("array"!==ya(In))return[new st(Gn,In,"array expected, "+ya(In)+" found")];if(2!==In.length)return[new st(Gn,In,"array length 2 expected, length "+In.length+" found")];if(_t){if("object"!==ya(In[0]))return[new st(Gn,In,"object expected, "+ya(In[0])+" found")];if(void 0===In[0].zoom)return[new st(Gn,In,"object stop key must have zoom")];if(void 0===In[0].value)return[new st(Gn,In,"object stop key must have value")];if(ce&&ce>xt(In[0].zoom))return[new st(Gn,In[0].zoom,"stop zoom values must appear in ascending order")];xt(In[0].zoom)!==ce&&(ce=xt(In[0].zoom),J=void 0,Fe={}),vn=vn.concat(zn({key:Gn+"[0]",value:In[0],valueSpec:{zoom:{}},style:tn.style,styleSpec:tn.styleSpec,objectElementValidators:{zoom:Dr,value:ln}}))}else vn=vn.concat(ln({key:Gn+"[0]",value:In[0],valueSpec:{},style:tn.style,styleSpec:tn.styleSpec},In));return fn(zt(In[1]))?vn.concat([new st(Gn+"[1]",In[1],"expressions are not allowed in function stops.")]):vn.concat(yn({key:Gn+"[1]",value:In[1],valueSpec:ye,style:tn.style,styleSpec:tn.styleSpec}))}function ln(tn,vn){var In=ya(tn.value),Gn=xt(tn.value),qn=null!==tn.value?tn.value:vn;if(z){if(In!==z)return[new st(tn.key,qn,In+" stop domain type must match previous stop domain type "+z)]}else z=In;if("number"!==In&&"string"!==In&&"boolean"!==In)return[new st(tn.key,qn,"stop domain value must be a number, string, or boolean")];if("number"!==In&&"categorical"!==Me){var Kn="number expected, "+In+" found";return na(ye)&&void 0===Me&&(Kn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new st(tn.key,qn,Kn)]}return"categorical"!==Me||"number"!==In||isFinite(Gn)&&Math.floor(Gn)===Gn?"categorical"!==Me&&"number"===In&&void 0!==J&&Gn<J?[new st(tn.key,qn,"stop domain values must appear in ascending order")]:(J=Gn,"categorical"===Me&&Gn in Fe?[new st(tn.key,qn,"stop domain values must be unique")]:(Fe[Gn]=!0,[])):[new st(tn.key,qn,"integer expected, found "+Gn)]}}function Kr(C){var z=("property"===C.expressionContext?Ln:on)(zt(C.value),C.valueSpec);if("error"===z.result)return z.value.map(function(ce){return new st(""+C.key+ce.key,C.value,ce.message)});var J=z.value.expression||z.value._styleExpression.expression;if("property"===C.expressionContext&&"text-font"===C.propertyKey&&!J.outputDefined())return[new st(C.key,C.value,'Invalid data expression for "'+C.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===C.expressionContext&&"layout"===C.propertyType&&!ir(J))return[new st(C.key,C.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===C.expressionContext&&!ir(J))return[new st(C.key,C.value,'"feature-state" data expressions are not supported with filters.')];if(C.expressionContext&&0===C.expressionContext.indexOf("cluster")){if(!rr(J,["zoom","feature-state"]))return[new st(C.key,C.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===C.expressionContext&&!Rr(J))return[new st(C.key,C.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function si(C){var z=C.key,J=C.value,ce=C.valueSpec,ye=[];return Array.isArray(ce.values)?-1===ce.values.indexOf(xt(J))&&ye.push(new st(z,J,"expected one of ["+ce.values.join(", ")+"], "+JSON.stringify(J)+" found")):-1===Object.keys(ce.values).indexOf(xt(J))&&ye.push(new st(z,J,"expected one of ["+Object.keys(ce.values).join(", ")+"], "+JSON.stringify(J)+" found")),ye}function Jr(C){if(!0===C||!1===C)return!0;if(!Array.isArray(C)||0===C.length)return!1;switch(C[0]){case"has":return C.length>=2&&"$id"!==C[1]&&"$type"!==C[1];case"in":return C.length>=3&&("string"!=typeof C[1]||Array.isArray(C[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==C.length||Array.isArray(C[1])||Array.isArray(C[2]);case"any":case"all":for(var z=0,J=C.slice(1);z<J.length;z+=1){var ce=J[z];if(!Jr(ce)&&"boolean"!=typeof ce)return!1}return!0;default:return!0}}Pn.deserialize=function(C){return new Pn(C._parameters,C._specification)},Pn.serialize=function(C){return{_parameters:C._parameters,_specification:C._specification}};var Li={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pi(C){if(null==C)return{filter:function(){return!0},needGeometry:!1};Jr(C)||(C=ra(C));var z=on(C,Li);if("error"===z.result)throw new Error(z.value.map(function(J){return J.key+": "+J.message}).join(", "));return{filter:function(J,ce,ye){return z.value.evaluate(J,ce,{},ye)},needGeometry:function J(ce){if(!Array.isArray(ce))return!1;if("within"===ce[0])return!0;for(var ye=1;ye<ce.length;ye++)if(J(ce[ye]))return!0;return!1}(C)}}function Aa(C,z){return C<z?-1:C>z?1:0}function ra(C){if(!C)return!0;var z,J=C[0];return C.length<=1?"any"!==J:"=="===J?aa(C[1],C[2],"=="):"!="===J?ja(aa(C[1],C[2],"==")):"<"===J||">"===J||"<="===J||">="===J?aa(C[1],C[2],J):"any"===J?(z=C.slice(1),["any"].concat(z.map(ra))):"all"===J?["all"].concat(C.slice(1).map(ra)):"none"===J?["all"].concat(C.slice(1).map(ra).map(ja)):"in"===J?xo(C[1],C.slice(2)):"!in"===J?ja(xo(C[1],C.slice(2))):"has"===J?io(C[1]):"!has"===J?ja(io(C[1])):"within"!==J||C}function aa(C,z,J){switch(C){case"$type":return["filter-type-"+J,z];case"$id":return["filter-id-"+J,z];default:return["filter-"+J,C,z]}}function xo(C,z){if(0===z.length)return!1;switch(C){case"$type":return["filter-type-in",["literal",z]];case"$id":return["filter-id-in",["literal",z]];default:return z.length>200&&!z.some(function(J){return typeof J!=typeof z[0]})?["filter-in-large",C,["literal",z.sort(Aa)]]:["filter-in-small",C,["literal",z]]}}function io(C){switch(C){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",C]}}function ja(C){return["!",C]}function Ta(C){return Jr(zt(C.value))?Kr(Tt({},C,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function z(J){var ce=J.value,ye=J.key;if("array"!==ya(ce))return[new st(ye,ce,"array expected, "+ya(ce)+" found")];var Me,Fe=J.styleSpec,Ye=[];if(ce.length<1)return[new st(ye,ce,"filter array must have at least 1 element")];switch(Ye=Ye.concat(si({key:ye+"[0]",value:ce[0],valueSpec:Fe.filter_operator,style:J.style,styleSpec:J.styleSpec})),xt(ce[0])){case"<":case"<=":case">":case">=":ce.length>=2&&"$type"===xt(ce[1])&&Ye.push(new st(ye,ce,'"$type" cannot be use with operator "'+ce[0]+'"'));case"==":case"!=":3!==ce.length&&Ye.push(new st(ye,ce,'filter array for operator "'+ce[0]+'" must have 3 elements'));case"in":case"!in":ce.length>=2&&"string"!==(Me=ya(ce[1]))&&Ye.push(new st(ye+"[1]",ce[1],"string expected, "+Me+" found"));for(var ot=2;ot<ce.length;ot++)Me=ya(ce[ot]),"$type"===xt(ce[1])?Ye=Ye.concat(si({key:ye+"["+ot+"]",value:ce[ot],valueSpec:Fe.geometry_type,style:J.style,styleSpec:J.styleSpec})):"string"!==Me&&"number"!==Me&&"boolean"!==Me&&Ye.push(new st(ye+"["+ot+"]",ce[ot],"string, number, or boolean expected, "+Me+" found"));break;case"any":case"all":case"none":for(var _t=1;_t<ce.length;_t++)Ye=Ye.concat(z({key:ye+"["+_t+"]",value:ce[_t],style:J.style,styleSpec:J.styleSpec}));break;case"has":case"!has":Me=ya(ce[1]),2!==ce.length?Ye.push(new st(ye,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):"string"!==Me&&Ye.push(new st(ye+"[1]",ce[1],"string expected, "+Me+" found"));break;case"within":Me=ya(ce[1]),2!==ce.length?Ye.push(new st(ye,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):"object"!==Me&&Ye.push(new st(ye+"[1]",ce[1],"object expected, "+Me+" found"))}return Ye}(C)}function wo(C,z){var J=C.key,ce=C.style,ye=C.styleSpec,Me=C.value,Fe=C.objectKey,Ye=ye[z+"_"+C.layerType];if(!Ye)return[];var ot=Fe.match(/^(.*)-transition$/);if("paint"===z&&ot&&Ye[ot[1]]&&Ye[ot[1]].transition)return yn({key:J,value:Me,valueSpec:ye.transition,style:ce,styleSpec:ye});var _t,Et=C.valueSpec||Ye[Fe];if(!Et)return[new st(J,Me,'unknown property "'+Fe+'"')];if("string"===ya(Me)&&na(Et)&&!Et.tokens&&(_t=/^{([^}]+)}$/.exec(Me)))return[new st(J,Me,'"'+Fe+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(_t[1])+" }`.")];var Xt=[];return"symbol"===C.layerType&&("text-field"===Fe&&ce&&!ce.glyphs&&Xt.push(new st(J,Me,'use of "text-field" requires a style "glyphs" property')),"text-font"===Fe&&We(zt(Me))&&"identity"===xt(Me.type)&&Xt.push(new st(J,Me,'"text-font" does not support identity functions'))),Xt.concat(yn({key:C.key,value:Me,valueSpec:Et,style:ce,styleSpec:ye,expressionContext:"property",propertyType:z,propertyKey:Fe}))}function Go(C){return wo(C,"paint")}function os(C){return wo(C,"layout")}function ss(C){var z=[],J=C.value,ce=C.key,ye=C.style,Me=C.styleSpec;J.type||J.ref||z.push(new st(ce,J,'either "type" or "ref" is required'));var Fe,Ye=xt(J.type),ot=xt(J.ref);if(J.id)for(var _t=xt(J.id),Et=0;Et<C.arrayIndex;Et++){var Xt=ye.layers[Et];xt(Xt.id)===_t&&z.push(new st(ce,J.id,'duplicate layer id "'+J.id+'", previously used at line '+Xt.id.__line__))}if("ref"in J)["type","source","source-layer","filter","layout"].forEach(function(vn){vn in J&&z.push(new st(ce,J[vn],'"'+vn+'" is prohibited for ref layers'))}),ye.layers.forEach(function(vn){xt(vn.id)===ot&&(Fe=vn)}),Fe?Fe.ref?z.push(new st(ce,J.ref,"ref cannot reference another ref layer")):Ye=xt(Fe.type):z.push(new st(ce,J.ref,'ref layer "'+ot+'" not found'));else if("background"!==Ye)if(J.source){var ln=ye.sources&&ye.sources[J.source],tn=ln&&xt(ln.type);ln?"vector"===tn&&"raster"===Ye?z.push(new st(ce,J.source,'layer "'+J.id+'" requires a raster source')):"raster"===tn&&"raster"!==Ye?z.push(new st(ce,J.source,'layer "'+J.id+'" requires a vector source')):"vector"!==tn||J["source-layer"]?"raster-dem"===tn&&"hillshade"!==Ye?z.push(new st(ce,J.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ye||!J.paint||!J.paint["line-gradient"]||"geojson"===tn&&ln.lineMetrics||z.push(new st(ce,J,'layer "'+J.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):z.push(new st(ce,J,'layer "'+J.id+'" must specify a "source-layer"')):z.push(new st(ce,J.source,'source "'+J.source+'" not found'))}else z.push(new st(ce,J,'missing required property "source"'));return z=z.concat(zn({key:ce,value:J,valueSpec:Me.layer,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return yn({key:ce+".type",value:J.type,valueSpec:Me.layer.type,style:C.style,styleSpec:C.styleSpec,object:J,objectKey:"type"})},filter:Ta,layout:function(vn){return zn({layer:J,key:vn.key,value:vn.value,style:vn.style,styleSpec:vn.styleSpec,objectElementValidators:{"*":function(In){return os(Tt({layerType:Ye},In))}}})},paint:function(vn){return zn({layer:J,key:vn.key,value:vn.value,style:vn.style,styleSpec:vn.styleSpec,objectElementValidators:{"*":function(In){return Go(Tt({layerType:Ye},In))}}})}}}))}function gs(C){var z=C.value,J=C.key,ce=ya(z);return"string"!==ce?[new st(J,z,"string expected, "+ce+" found")]:[]}var ms={promoteId:function(C){var z=C.key,J=C.value;if("string"===ya(J))return gs({key:z,value:J});var ce=[];for(var ye in J)ce.push.apply(ce,gs({key:z+"."+ye,value:J[ye]}));return ce}};function Ma(C){var z=C.value,J=C.key,ce=C.styleSpec,ye=C.style;if(!z.type)return[new st(J,z,'"type" is required')];var Me,Fe=xt(z.type);switch(Fe){case"vector":case"raster":case"raster-dem":return zn({key:J,value:z,valueSpec:ce["source_"+Fe.replace("-","_")],style:C.style,styleSpec:ce,objectElementValidators:ms});case"geojson":if(Me=zn({key:J,value:z,valueSpec:ce.source_geojson,style:ye,styleSpec:ce,objectElementValidators:ms}),z.cluster)for(var Ye in z.clusterProperties){var ot=z.clusterProperties[Ye],_t=ot[0],Xt="string"==typeof _t?[_t,["accumulated"],["get",Ye]]:_t;Me.push.apply(Me,Kr({key:J+"."+Ye+".map",value:ot[1],expressionContext:"cluster-map"})),Me.push.apply(Me,Kr({key:J+"."+Ye+".reduce",value:Xt,expressionContext:"cluster-reduce"}))}return Me;case"video":return zn({key:J,value:z,valueSpec:ce.source_video,style:ye,styleSpec:ce});case"image":return zn({key:J,value:z,valueSpec:ce.source_image,style:ye,styleSpec:ce});case"canvas":return[new st(J,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return si({key:J+".type",value:z.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:ye,styleSpec:ce})}}function wt(C){var z=C.value,J=C.styleSpec,ce=J.light,ye=C.style,Me=[],Fe=ya(z);if(void 0===z)return Me;if("object"!==Fe)return Me.concat([new st("light",z,"object expected, "+Fe+" found")]);for(var Ye in z){var ot=Ye.match(/^(.*)-transition$/);Me=Me.concat(ot&&ce[ot[1]]&&ce[ot[1]].transition?yn({key:Ye,value:z[Ye],valueSpec:J.transition,style:ye,styleSpec:J}):ce[Ye]?yn({key:Ye,value:z[Ye],valueSpec:ce[Ye],style:ye,styleSpec:J}):[new st(Ye,z[Ye],'unknown property "'+Ye+'"')])}return Me}var Yt={"*":function(){return[]},array:yr,boolean:function(C){var z=C.value,J=C.key,ce=ya(z);return"boolean"!==ce?[new st(J,z,"boolean expected, "+ce+" found")]:[]},number:Dr,color:function(C){var z=C.key,J=C.value,ce=ya(J);return"string"!==ce?[new st(z,J,"color expected, "+ce+" found")]:null===_n(J)?[new st(z,J,'color expected, "'+J+'" found')]:[]},constants:mt,enum:si,filter:Ta,function:Yr,layer:ss,object:zn,source:Ma,light:wt,string:gs,formatted:function(C){return 0===gs(C).length?[]:Kr(C)},resolvedImage:function(C){return 0===gs(C).length?[]:Kr(C)}};function yn(C){var z=C.value,J=C.valueSpec,ce=C.styleSpec;return J.expression&&We(xt(z))?Yr(C):J.expression&&fn(zt(z))?Kr(C):J.type&&Yt[J.type]?Yt[J.type](C):zn(Tt({},C,{valueSpec:J.type?ce[J.type]:J}))}function rn(C){var z=C.value,J=C.key,ce=gs(C);return ce.length||(-1===z.indexOf("{fontstack}")&&ce.push(new st(J,z,'"glyphs" url must include a "{fontstack}" token')),-1===z.indexOf("{range}")&&ce.push(new st(J,z,'"glyphs" url must include a "{range}" token'))),ce}function xn(C,z){void 0===z&&(z=Ne);var J=[];return J=J.concat(yn({key:"",value:C,valueSpec:z.$root,styleSpec:z,style:C,objectElementValidators:{glyphs:rn,"*":function(){return[]}}})),C.constants&&(J=J.concat(mt({key:"constants",value:C.constants,style:C,styleSpec:z}))),Wn(J)}function Wn(C){return[].concat(C).sort(function(z,J){return z.line-J.line})}function $n(C){return function(){for(var z=[],J=arguments.length;J--;)z[J]=arguments[J];return Wn(C.apply(this,z))}}xn.source=$n(Ma),xn.light=$n(wt),xn.layer=$n(ss),xn.filter=$n(Ta),xn.paintProperty=$n(Go),xn.layoutProperty=$n(os);var fr=xn,kr=fr.light,xr=fr.paintProperty,Pr=fr.layoutProperty;function zr(C,z){var J=!1;if(z&&z.length)for(var ce=0,ye=z;ce<ye.length;ce+=1)C.fire(new ze(new Error(ye[ce].message))),J=!0;return J}var Tr=Br;function Br(C,z,J){var ce=this.cells=[];if(C instanceof ArrayBuffer){this.arrayBuffer=C;var ye=new Int32Array(this.arrayBuffer);C=ye[0],this.d=(z=ye[1])+2*(J=ye[2]);for(var Me=0;Me<this.d*this.d;Me++){var Fe=ye[3+Me],Ye=ye[3+Me+1];ce.push(Fe===Ye?null:ye.subarray(Fe,Ye))}var _t=ye[3+ce.length+1];this.keys=ye.subarray(ye[3+ce.length],_t),this.bboxes=ye.subarray(_t),this.insert=this._insertReadonly}else{this.d=z+2*J;for(var Et=0;Et<this.d*this.d;Et++)ce.push([]);this.keys=[],this.bboxes=[]}this.n=z,this.extent=C,this.padding=J,this.scale=z/C,this.uid=0;var Xt=J/z*C;this.min=-Xt,this.max=C+Xt}Br.prototype.insert=function(C,z,J,ce,ye){this._forEachCell(z,J,ce,ye,this._insertCell,this.uid++),this.keys.push(C),this.bboxes.push(z),this.bboxes.push(J),this.bboxes.push(ce),this.bboxes.push(ye)},Br.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Br.prototype._insertCell=function(C,z,J,ce,ye,Me){this.cells[ye].push(Me)},Br.prototype.query=function(C,z,J,ce,ye){var Me=this.min,Fe=this.max;if(C<=Me&&z<=Me&&Fe<=J&&Fe<=ce&&!ye)return Array.prototype.slice.call(this.keys);var Ye=[];return this._forEachCell(C,z,J,ce,this._queryCell,Ye,{},ye),Ye},Br.prototype._queryCell=function(C,z,J,ce,ye,Me,Fe,Ye){var ot=this.cells[ye];if(null!==ot)for(var _t=this.keys,Et=this.bboxes,Xt=0;Xt<ot.length;Xt++){var ln=ot[Xt];if(void 0===Fe[ln]){var tn=4*ln;(Ye?Ye(Et[tn+0],Et[tn+1],Et[tn+2],Et[tn+3]):C<=Et[tn+2]&&z<=Et[tn+3]&&J>=Et[tn+0]&&ce>=Et[tn+1])?(Fe[ln]=!0,Me.push(_t[ln])):Fe[ln]=!1}}},Br.prototype._forEachCell=function(C,z,J,ce,ye,Me,Fe,Ye){for(var ot=this._convertToCellCoord(C),_t=this._convertToCellCoord(z),Et=this._convertToCellCoord(J),Xt=this._convertToCellCoord(ce),ln=ot;ln<=Et;ln++)for(var tn=_t;tn<=Xt;tn++){var vn=this.d*tn+ln;if((!Ye||Ye(this._convertFromCellCoord(ln),this._convertFromCellCoord(tn),this._convertFromCellCoord(ln+1),this._convertFromCellCoord(tn+1)))&&ye.call(this,C,z,J,ce,vn,Me,Fe,Ye))return}},Br.prototype._convertFromCellCoord=function(C){return(C-this.padding)/this.scale},Br.prototype._convertToCellCoord=function(C){return Math.max(0,Math.min(this.d-1,Math.floor(C*this.scale)+this.padding))},Br.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var C=this.cells,z=3+this.cells.length+1+1,J=0,ce=0;ce<this.cells.length;ce++)J+=this.cells[ce].length;var ye=new Int32Array(z+J+this.keys.length+this.bboxes.length);ye[0]=this.extent,ye[1]=this.n,ye[2]=this.padding;for(var Me=z,Fe=0;Fe<C.length;Fe++){var Ye=C[Fe];ye[3+Fe]=Me,ye.set(Ye,Me),Me+=Ye.length}return ye[3+C.length]=Me,ye.set(this.keys,Me),ye[3+C.length+1]=Me+=this.keys.length,ye.set(this.bboxes,Me),Me+=this.bboxes.length,ye.buffer};var ti=self.ImageData,li=self.ImageBitmap,vi={};function dr(C,z,J){void 0===J&&(J={}),Object.defineProperty(z,"_classRegistryKey",{value:C,writeable:!1}),vi[C]={klass:z,omit:J.omit||[],shallow:J.shallow||[]}}for(var hi in dr("Object",Object),Tr.serialize=function(C,z){var J=C.toArrayBuffer();return z&&z.push(J),{buffer:J}},Tr.deserialize=function(C){return new Tr(C.buffer)},dr("Grid",Tr),dr("Color",Tn),dr("Error",Error),dr("ResolvedImage",On),dr("StylePropertyFunction",Pn),dr("StyleExpression",un,{omit:["_evaluator"]}),dr("ZoomDependentExpression",An),dr("ZoomConstantExpression",pn),dr("CompoundExpression",Lr,{omit:["_evaluate"]}),_o)_o[hi]._classRegistryKey||dr("Expression_"+hi,_o[hi]);function Xr(C){return C&&"undefined"!=typeof ArrayBuffer&&(C instanceof ArrayBuffer||C.constructor&&"ArrayBuffer"===C.constructor.name)}function ii(C){return li&&C instanceof li}function xi(C,z){if(null==C||"boolean"==typeof C||"number"==typeof C||"string"==typeof C||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp)return C;if(Xr(C)||ii(C))return z&&z.push(C),C;if(ArrayBuffer.isView(C)){var J=C;return z&&z.push(J.buffer),J}if(C instanceof ti)return z&&z.push(C.data.buffer),C;if(Array.isArray(C)){for(var ce=[],ye=0,Me=C;ye<Me.length;ye+=1)ce.push(xi(Me[ye],z));return ce}if("object"==typeof C){var Ye=C.constructor,ot=Ye._classRegistryKey;if(!ot)throw new Error("can't serialize object of unregistered class");var _t=Ye.serialize?Ye.serialize(C,z):{};if(!Ye.serialize){for(var Et in C)if(C.hasOwnProperty(Et)&&!(vi[ot].omit.indexOf(Et)>=0)){var Xt=C[Et];_t[Et]=vi[ot].shallow.indexOf(Et)>=0?Xt:xi(Xt,z)}C instanceof Error&&(_t.message=C.message)}if(_t.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==ot&&(_t.$name=ot),_t}throw new Error("can't serialize object of type "+typeof C)}function Ji(C){if(null==C||"boolean"==typeof C||"number"==typeof C||"string"==typeof C||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp||Xr(C)||ii(C)||ArrayBuffer.isView(C)||C instanceof ti)return C;if(Array.isArray(C))return C.map(Ji);if("object"==typeof C){var z=C.$name||"Object",J=vi[z].klass;if(!J)throw new Error("can't deserialize unregistered class "+z);if(J.deserialize)return J.deserialize(C);for(var ce=Object.create(J.prototype),ye=0,Me=Object.keys(C);ye<Me.length;ye+=1){var Fe=Me[ye];if("$name"!==Fe){var Ye=C[Fe];ce[Fe]=vi[z].shallow.indexOf(Fe)>=0?Ye:Ji(Ye)}}return ce}throw new Error("can't deserialize object of type "+typeof C)}var la=function(){this.first=!0};la.prototype.update=function(C,z){var J=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=J,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=J,!0):(this.lastFloorZoom>J?(this.lastIntegerZoom=J+1,this.lastIntegerZoomTime=z):this.lastFloorZoom<J&&(this.lastIntegerZoom=J,this.lastIntegerZoomTime=z),C!==this.lastZoom&&(this.lastZoom=C,this.lastFloorZoom=J,!0))};var Gr={"Latin-1 Supplement":function(C){return C>=128&&C<=255},Arabic:function(C){return C>=1536&&C<=1791},"Arabic Supplement":function(C){return C>=1872&&C<=1919},"Arabic Extended-A":function(C){return C>=2208&&C<=2303},"Hangul Jamo":function(C){return C>=4352&&C<=4607},"Unified Canadian Aboriginal Syllabics":function(C){return C>=5120&&C<=5759},Khmer:function(C){return C>=6016&&C<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(C){return C>=6320&&C<=6399},"General Punctuation":function(C){return C>=8192&&C<=8303},"Letterlike Symbols":function(C){return C>=8448&&C<=8527},"Number Forms":function(C){return C>=8528&&C<=8591},"Miscellaneous Technical":function(C){return C>=8960&&C<=9215},"Control Pictures":function(C){return C>=9216&&C<=9279},"Optical Character Recognition":function(C){return C>=9280&&C<=9311},"Enclosed Alphanumerics":function(C){return C>=9312&&C<=9471},"Geometric Shapes":function(C){return C>=9632&&C<=9727},"Miscellaneous Symbols":function(C){return C>=9728&&C<=9983},"Miscellaneous Symbols and Arrows":function(C){return C>=11008&&C<=11263},"CJK Radicals Supplement":function(C){return C>=11904&&C<=12031},"Kangxi Radicals":function(C){return C>=12032&&C<=12255},"Ideographic Description Characters":function(C){return C>=12272&&C<=12287},"CJK Symbols and Punctuation":function(C){return C>=12288&&C<=12351},Hiragana:function(C){return C>=12352&&C<=12447},Katakana:function(C){return C>=12448&&C<=12543},Bopomofo:function(C){return C>=12544&&C<=12591},"Hangul Compatibility Jamo":function(C){return C>=12592&&C<=12687},Kanbun:function(C){return C>=12688&&C<=12703},"Bopomofo Extended":function(C){return C>=12704&&C<=12735},"CJK Strokes":function(C){return C>=12736&&C<=12783},"Katakana Phonetic Extensions":function(C){return C>=12784&&C<=12799},"Enclosed CJK Letters and Months":function(C){return C>=12800&&C<=13055},"CJK Compatibility":function(C){return C>=13056&&C<=13311},"CJK Unified Ideographs Extension A":function(C){return C>=13312&&C<=19903},"Yijing Hexagram Symbols":function(C){return C>=19904&&C<=19967},"CJK Unified Ideographs":function(C){return C>=19968&&C<=40959},"Yi Syllables":function(C){return C>=40960&&C<=42127},"Yi Radicals":function(C){return C>=42128&&C<=42191},"Hangul Jamo Extended-A":function(C){return C>=43360&&C<=43391},"Hangul Syllables":function(C){return C>=44032&&C<=55215},"Hangul Jamo Extended-B":function(C){return C>=55216&&C<=55295},"Private Use Area":function(C){return C>=57344&&C<=63743},"CJK Compatibility Ideographs":function(C){return C>=63744&&C<=64255},"Arabic Presentation Forms-A":function(C){return C>=64336&&C<=65023},"Vertical Forms":function(C){return C>=65040&&C<=65055},"CJK Compatibility Forms":function(C){return C>=65072&&C<=65103},"Small Form Variants":function(C){return C>=65104&&C<=65135},"Arabic Presentation Forms-B":function(C){return C>=65136&&C<=65279},"Halfwidth and Fullwidth Forms":function(C){return C>=65280&&C<=65519}};function ha(C){for(var z=0,J=C;z<J.length;z+=1)if(Ai(J[z].charCodeAt(0)))return!0;return!1}function oa(C){return!(Gr.Arabic(C)||Gr["Arabic Supplement"](C)||Gr["Arabic Extended-A"](C)||Gr["Arabic Presentation Forms-A"](C)||Gr["Arabic Presentation Forms-B"](C))}function Ai(C){return!(746!==C&&747!==C&&(C<4352||!(Gr["Bopomofo Extended"](C)||Gr.Bopomofo(C)||Gr["CJK Compatibility Forms"](C)&&!(C>=65097&&C<=65103)||Gr["CJK Compatibility Ideographs"](C)||Gr["CJK Compatibility"](C)||Gr["CJK Radicals Supplement"](C)||Gr["CJK Strokes"](C)||!(!Gr["CJK Symbols and Punctuation"](C)||C>=12296&&C<=12305||C>=12308&&C<=12319||12336===C)||Gr["CJK Unified Ideographs Extension A"](C)||Gr["CJK Unified Ideographs"](C)||Gr["Enclosed CJK Letters and Months"](C)||Gr["Hangul Compatibility Jamo"](C)||Gr["Hangul Jamo Extended-A"](C)||Gr["Hangul Jamo Extended-B"](C)||Gr["Hangul Jamo"](C)||Gr["Hangul Syllables"](C)||Gr.Hiragana(C)||Gr["Ideographic Description Characters"](C)||Gr.Kanbun(C)||Gr["Kangxi Radicals"](C)||Gr["Katakana Phonetic Extensions"](C)||Gr.Katakana(C)&&12540!==C||!(!Gr["Halfwidth and Fullwidth Forms"](C)||65288===C||65289===C||65293===C||C>=65306&&C<=65310||65339===C||65341===C||65343===C||C>=65371&&C<=65503||65507===C||C>=65512&&C<=65519)||!(!Gr["Small Form Variants"](C)||C>=65112&&C<=65118||C>=65123&&C<=65126)||Gr["Unified Canadian Aboriginal Syllabics"](C)||Gr["Unified Canadian Aboriginal Syllabics Extended"](C)||Gr["Vertical Forms"](C)||Gr["Yijing Hexagram Symbols"](C)||Gr["Yi Syllables"](C)||Gr["Yi Radicals"](C))))}function ma(C){return!(Ai(C)||(z=C,Gr["Latin-1 Supplement"](z)&&(167===z||169===z||174===z||177===z||188===z||189===z||190===z||215===z||247===z)||Gr["General Punctuation"](z)&&(8214===z||8224===z||8225===z||8240===z||8241===z||8251===z||8252===z||8258===z||8263===z||8264===z||8265===z||8273===z)||Gr["Letterlike Symbols"](z)||Gr["Number Forms"](z)||Gr["Miscellaneous Technical"](z)&&(z>=8960&&z<=8967||z>=8972&&z<=8991||z>=8996&&z<=9e3||9003===z||z>=9085&&z<=9114||z>=9150&&z<=9165||9167===z||z>=9169&&z<=9179||z>=9186&&z<=9215)||Gr["Control Pictures"](z)&&9251!==z||Gr["Optical Character Recognition"](z)||Gr["Enclosed Alphanumerics"](z)||Gr["Geometric Shapes"](z)||Gr["Miscellaneous Symbols"](z)&&!(z>=9754&&z<=9759)||Gr["Miscellaneous Symbols and Arrows"](z)&&(z>=11026&&z<=11055||z>=11088&&z<=11097||z>=11192&&z<=11243)||Gr["CJK Symbols and Punctuation"](z)||Gr.Katakana(z)||Gr["Private Use Area"](z)||Gr["CJK Compatibility Forms"](z)||Gr["Small Form Variants"](z)||Gr["Halfwidth and Fullwidth Forms"](z)||8734===z||8756===z||8757===z||z>=9984&&z<=10087||z>=10102&&z<=10131||65532===z||65533===z));var z}function ta(C){return C>=1424&&C<=2303||Gr["Arabic Presentation Forms-A"](C)||Gr["Arabic Presentation Forms-B"](C)}function Ra(C,z){return!(!z&&ta(C)||C>=2304&&C<=3583||C>=3840&&C<=4255||Gr.Khmer(C))}function _i(C){for(var z=0,J=C;z<J.length;z+=1)if(ta(J[z].charCodeAt(0)))return!0;return!1}var La="deferred",Wo="loading",Ga="loaded",As=null,wi="unavailable",bo=null,Ps=function(C){C&&"string"==typeof C&&C.indexOf("NetworkError")>-1&&(wi="error"),As&&As(C)};function Ea(){Fa.fire(new Le("pluginStateChange",{pluginStatus:wi,pluginURL:bo}))}var Fa=new je,Yo=function(){return wi},Va=function(){if(wi!==La||!bo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");wi=Wo,Ea(),bo&&Rt({url:bo},function(C){C?Ps(C):(wi=Ga,Ea())})},Fo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return wi===Ga||null!=Fo.applyArabicShaping},isLoading:function(){return wi===Wo},setState:function(C){wi=C.pluginStatus,bo=C.pluginURL},isParsed:function(){return null!=Fo.applyArabicShaping&&null!=Fo.processBidirectionalText&&null!=Fo.processStyledBidirectionalText},getPluginURL:function(){return bo}},da=function(C,z){this.zoom=C,z?(this.now=z.now,this.fadeDuration=z.fadeDuration,this.zoomHistory=z.zoomHistory,this.transition=z.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new la,this.transition={})};da.prototype.isSupportedScript=function(C){return function(z,J){for(var ce=0,ye=z;ce<ye.length;ce+=1)if(!Ra(ye[ce].charCodeAt(0),J))return!1;return!0}(C,Fo.isLoaded())},da.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},da.prototype.getCrossfadeParameters=function(){var C=this.zoom,z=C-Math.floor(C),J=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:z+(1-z)*J}:{fromScale:.5,toScale:1,t:1-(1-J)*z}};var Ko=function(C,z){this.property=C,this.value=z,this.expression=function(J,ce){if(We(J))return new Pn(J,ce);if(fn(J)){var ye=Ln(J,ce);if("error"===ye.result)throw new Error(ye.value.map(function(Fe){return Fe.key+": "+Fe.message}).join(", "));return ye.value}var Me=J;return"string"==typeof J&&"color"===ce.type&&(Me=Tn.parse(J)),{kind:"constant",evaluate:function(){return Me}}}(void 0===z?C.specification.default:z,C.specification)};Ko.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ko.prototype.possiblyEvaluate=function(C,z,J){return this.property.possiblyEvaluate(this,C,z,J)};var fl=function(C){this.property=C,this.value=new Ko(C,void 0)};fl.prototype.transitioned=function(C,z){return new Qs(this.property,this.value,z,p({},C.transition,this.transition),C.now)},fl.prototype.untransitioned=function(){return new Qs(this.property,this.value,null,{},0)};var Tl=function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)};Tl.prototype.getValue=function(C){return E(this._values[C].value.value)},Tl.prototype.setValue=function(C,z){this._values.hasOwnProperty(C)||(this._values[C]=new fl(this._values[C].property)),this._values[C].value=new Ko(this._values[C].property,null===z?void 0:E(z))},Tl.prototype.getTransition=function(C){return E(this._values[C].transition)},Tl.prototype.setTransition=function(C,z){this._values.hasOwnProperty(C)||(this._values[C]=new fl(this._values[C].property)),this._values[C].transition=E(z)||void 0},Tl.prototype.serialize=function(){for(var C={},z=0,J=Object.keys(this._values);z<J.length;z+=1){var ce=J[z],ye=this.getValue(ce);void 0!==ye&&(C[ce]=ye);var Me=this.getTransition(ce);void 0!==Me&&(C[ce+"-transition"]=Me)}return C},Tl.prototype.transitioned=function(C,z){for(var J=new Po(this._properties),ce=0,ye=Object.keys(this._values);ce<ye.length;ce+=1){var Me=ye[ce];J._values[Me]=this._values[Me].transitioned(C,z._values[Me])}return J},Tl.prototype.untransitioned=function(){for(var C=new Po(this._properties),z=0,J=Object.keys(this._values);z<J.length;z+=1){var ce=J[z];C._values[ce]=this._values[ce].untransitioned()}return C};var Qs=function(C,z,J,ce,ye){this.property=C,this.value=z,this.begin=ye+ce.delay||0,this.end=this.begin+ce.duration||0,C.specification.transition&&(ce.delay||ce.duration)&&(this.prior=J)};Qs.prototype.possiblyEvaluate=function(C,z,J){var ce=C.now||0,ye=this.value.possiblyEvaluate(C,z,J),Me=this.prior;if(Me){if(ce>this.end)return this.prior=null,ye;if(this.value.isDataDriven())return this.prior=null,ye;if(ce<this.begin)return Me.possiblyEvaluate(C,z,J);var Fe=(ce-this.begin)/(this.end-this.begin);return this.property.interpolate(Me.possiblyEvaluate(C,z,J),ye,function(Ye){if(Ye<=0)return 0;if(Ye>=1)return 1;var ot=Ye*Ye,_t=ot*Ye;return 4*(Ye<.5?_t:3*(Ye-ot)+_t-.75)}(Fe))}return ye};var Po=function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)};Po.prototype.possiblyEvaluate=function(C,z,J){for(var ce=new Ll(this._properties),ye=0,Me=Object.keys(this._values);ye<Me.length;ye+=1){var Fe=Me[ye];ce._values[Fe]=this._values[Fe].possiblyEvaluate(C,z,J)}return ce},Po.prototype.hasTransition=function(){for(var C=0,z=Object.keys(this._values);C<z.length;C+=1)if(this._values[z[C]].prior)return!0;return!1};var Jl=function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)};Jl.prototype.getValue=function(C){return E(this._values[C].value)},Jl.prototype.setValue=function(C,z){this._values[C]=new Ko(this._values[C].property,null===z?void 0:E(z))},Jl.prototype.serialize=function(){for(var C={},z=0,J=Object.keys(this._values);z<J.length;z+=1){var ce=J[z],ye=this.getValue(ce);void 0!==ye&&(C[ce]=ye)}return C},Jl.prototype.possiblyEvaluate=function(C,z,J){for(var ce=new Ll(this._properties),ye=0,Me=Object.keys(this._values);ye<Me.length;ye+=1){var Fe=Me[ye];ce._values[Fe]=this._values[Fe].possiblyEvaluate(C,z,J)}return ce};var Oi=function(C,z,J){this.property=C,this.value=z,this.parameters=J};Oi.prototype.isConstant=function(){return"constant"===this.value.kind},Oi.prototype.constantOr=function(C){return"constant"===this.value.kind?this.value.value:C},Oi.prototype.evaluate=function(C,z,J,ce){return this.property.evaluate(this.value,this.parameters,C,z,J,ce)};var Ll=function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)};Ll.prototype.get=function(C){return this._values[C]};var Di=function(C){this.specification=C};Di.prototype.possiblyEvaluate=function(C,z){return C.expression.evaluate(z)},Di.prototype.interpolate=function(C,z,J){var ce=lr[this.specification.type];return ce?ce(C,z,J):C};var Yi=function(C,z){this.specification=C,this.overrides=z};Yi.prototype.possiblyEvaluate=function(C,z,J,ce){return new Oi(this,"constant"===C.expression.kind||"camera"===C.expression.kind?{kind:"constant",value:C.expression.evaluate(z,null,{},J,ce)}:C.expression,z)},Yi.prototype.interpolate=function(C,z,J){if("constant"!==C.value.kind||"constant"!==z.value.kind)return C;if(void 0===C.value.value||void 0===z.value.value)return new Oi(this,{kind:"constant",value:void 0},C.parameters);var ce=lr[this.specification.type];return ce?new Oi(this,{kind:"constant",value:ce(C.value.value,z.value.value,J)},C.parameters):C},Yi.prototype.evaluate=function(C,z,J,ce,ye,Me){return"constant"===C.kind?C.value:C.evaluate(z,J,ce,ye,Me)};var xu=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.possiblyEvaluate=function(J,ce,ye,Me){if(void 0===J.value)return new Oi(this,{kind:"constant",value:void 0},ce);if("constant"===J.expression.kind){var Fe=J.expression.evaluate(ce,null,{},ye,Me),Ye="resolvedImage"===J.property.specification.type&&"string"!=typeof Fe?Fe.name:Fe,ot=this._calculate(Ye,Ye,Ye,ce);return new Oi(this,{kind:"constant",value:ot},ce)}if("camera"===J.expression.kind){var _t=this._calculate(J.expression.evaluate({zoom:ce.zoom-1}),J.expression.evaluate({zoom:ce.zoom}),J.expression.evaluate({zoom:ce.zoom+1}),ce);return new Oi(this,{kind:"constant",value:_t},ce)}return new Oi(this,J.expression,ce)},z.prototype.evaluate=function(J,ce,ye,Me,Fe,Ye){if("source"===J.kind){var ot=J.evaluate(ce,ye,Me,Fe,Ye);return this._calculate(ot,ot,ot,ce)}return"composite"===J.kind?this._calculate(J.evaluate({zoom:Math.floor(ce.zoom)-1},ye,Me),J.evaluate({zoom:Math.floor(ce.zoom)},ye,Me),J.evaluate({zoom:Math.floor(ce.zoom)+1},ye,Me),ce):J.value},z.prototype._calculate=function(J,ce,ye,Me){return Me.zoom>Me.zoomHistory.lastIntegerZoom?{from:J,to:ce}:{from:ye,to:ce}},z.prototype.interpolate=function(J){return J},z}(Yi),cu=function(C){this.specification=C};cu.prototype.possiblyEvaluate=function(C,z,J,ce){if(void 0!==C.value){if("constant"===C.expression.kind){var ye=C.expression.evaluate(z,null,{},J,ce);return this._calculate(ye,ye,ye,z)}return this._calculate(C.expression.evaluate(new da(Math.floor(z.zoom-1),z)),C.expression.evaluate(new da(Math.floor(z.zoom),z)),C.expression.evaluate(new da(Math.floor(z.zoom+1),z)),z)}},cu.prototype._calculate=function(C,z,J,ce){return ce.zoom>ce.zoomHistory.lastIntegerZoom?{from:C,to:z}:{from:J,to:z}},cu.prototype.interpolate=function(C){return C};var Ml=function(C){this.specification=C};Ml.prototype.possiblyEvaluate=function(C,z,J,ce){return!!C.expression.evaluate(z,null,{},J,ce)},Ml.prototype.interpolate=function(){return!1};var Bs=function(C){for(var z in this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],C){var J=C[z];J.specification.overridable&&this.overridableProperties.push(z);var ce=this.defaultPropertyValues[z]=new Ko(J,void 0),ye=this.defaultTransitionablePropertyValues[z]=new fl(J);this.defaultTransitioningPropertyValues[z]=ye.untransitioned(),this.defaultPossiblyEvaluatedValues[z]=ce.possiblyEvaluate({})}};dr("DataDrivenProperty",Yi),dr("DataConstantProperty",Di),dr("CrossFadedDataDrivenProperty",xu),dr("CrossFadedProperty",cu),dr("ColorRampProperty",Ml);var Zr=function(C){function z(J,ce){if(C.call(this),this.id=J.id,this.type=J.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==J.type&&(this.metadata=(J=J).metadata,this.minzoom=J.minzoom,this.maxzoom=J.maxzoom,"background"!==J.type&&(this.source=J.source,this.sourceLayer=J["source-layer"],this.filter=J.filter),ce.layout&&(this._unevaluatedLayout=new Jl(ce.layout)),ce.paint)){for(var ye in this._transitionablePaint=new Tl(ce.paint),J.paint)this.setPaintProperty(ye,J.paint[ye],{validate:!1});for(var Me in J.layout)this.setLayoutProperty(Me,J.layout[Me],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ll(ce.paint)}}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},z.prototype.getLayoutProperty=function(J){return"visibility"===J?this.visibility:this._unevaluatedLayout.getValue(J)},z.prototype.setLayoutProperty=function(J,ce,ye){void 0===ye&&(ye={}),null!=ce&&this._validate(Pr,"layers."+this.id+".layout."+J,J,ce,ye)||("visibility"!==J?this._unevaluatedLayout.setValue(J,ce):this.visibility=ce)},z.prototype.getPaintProperty=function(J){return A(J,"-transition")?this._transitionablePaint.getTransition(J.slice(0,-"-transition".length)):this._transitionablePaint.getValue(J)},z.prototype.setPaintProperty=function(J,ce,ye){if(void 0===ye&&(ye={}),null!=ce&&this._validate(xr,"layers."+this.id+".paint."+J,J,ce,ye))return!1;if(A(J,"-transition"))return this._transitionablePaint.setTransition(J.slice(0,-"-transition".length),ce||void 0),!1;var Fe=this._transitionablePaint._values[J],Ye="cross-faded-data-driven"===Fe.property.specification["property-type"],ot=Fe.value.isDataDriven(),_t=Fe.value;this._transitionablePaint.setValue(J,ce),this._handleSpecialPaintPropertyUpdate(J);var Et=this._transitionablePaint._values[J].value;return Et.isDataDriven()||ot||Ye||this._handleOverridablePaintPropertyUpdate(J,_t,Et)},z.prototype._handleSpecialPaintPropertyUpdate=function(J){},z.prototype._handleOverridablePaintPropertyUpdate=function(J,ce,ye){return!1},z.prototype.isHidden=function(J){return!!(this.minzoom&&J<this.minzoom)||!!(this.maxzoom&&J>=this.maxzoom)||"none"===this.visibility},z.prototype.updateTransitions=function(J){this._transitioningPaint=this._transitionablePaint.transitioned(J,this._transitioningPaint)},z.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},z.prototype.recalculate=function(J,ce){J.getCrossfadeParameters&&(this._crossfadeParameters=J.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(J,void 0,ce)),this.paint=this._transitioningPaint.possiblyEvaluate(J,void 0,ce)},z.prototype.serialize=function(){var J={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(J.layout=J.layout||{},J.layout.visibility=this.visibility),k(J,function(ce,ye){return!(void 0===ce||"layout"===ye&&!Object.keys(ce).length||"paint"===ye&&!Object.keys(ce).length)})},z.prototype._validate=function(J,ce,ye,Me,Fe){return void 0===Fe&&(Fe={}),(!Fe||!1!==Fe.validate)&&zr(this,J.call(fr,{key:ce,layerType:this.type,objectKey:ye,value:Me,styleSpec:Ne,style:{glyphs:!0,sprite:!0}}))},z.prototype.is3D=function(){return!1},z.prototype.isTileClipped=function(){return!1},z.prototype.hasOffscreenPass=function(){return!1},z.prototype.resize=function(){},z.prototype.isStateDependent=function(){for(var J in this.paint._values){var ce=this.paint.get(J);if(ce instanceof Oi&&na(ce.property.specification)&&("source"===ce.value.kind||"composite"===ce.value.kind)&&ce.value.isStateDependent)return!0}return!1},z}(je),Pa={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},hl=function(C,z){this._structArray=C,this._pos1=z*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Qi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ha(C,z){void 0===z&&(z=1);var J=0,ce=0;return{members:C.map(function(ye){var Fe=Pa[ye.type].BYTES_PER_ELEMENT,Ye=J=el(J,Math.max(z,Fe)),ot=ye.components||1;return ce=Math.max(ce,Fe),J+=Fe*ot,{name:ye.name,type:ye.type,components:ot,offset:Ye}}),size:el(J,Math.max(ce,z)),alignment:z}}function el(C,z){return Math.ceil(C/z)*z}Qi.serialize=function(C,z){return C._trim(),z&&(C.isTransferred=!0,z.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},Qi.deserialize=function(C){var z=Object.create(this.prototype);return z.arrayBuffer=C.arrayBuffer,z.length=C.length,z.capacity=C.arrayBuffer.byteLength/z.bytesPerElement,z._refreshViews(),z},Qi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Qi.prototype.clear=function(){this.length=0},Qi.prototype.resize=function(C){this.reserve(C),this.length=C},Qi.prototype.reserve=function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var z=this.uint8;this._refreshViews(),z&&this.uint8.set(z)}},Qi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ls=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce){var ye=this.length;return this.resize(ye+1),this.emplace(ye,J,ce)},z.prototype.emplace=function(J,ce,ye){var Me=2*J;return this.int16[Me+0]=ce,this.int16[Me+1]=ye,J},z}(Qi);ls.prototype.bytesPerElement=4,dr("StructArrayLayout2i4",ls);var To=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,J,ce,ye,Me)},z.prototype.emplace=function(J,ce,ye,Me,Fe){var Ye=4*J;return this.int16[Ye+0]=ce,this.int16[Ye+1]=ye,this.int16[Ye+2]=Me,this.int16[Ye+3]=Fe,J},z}(Qi);To.prototype.bytesPerElement=8,dr("StructArrayLayout4i8",To);var Al=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me,Fe,Ye){var ot=this.length;return this.resize(ot+1),this.emplace(ot,J,ce,ye,Me,Fe,Ye)},z.prototype.emplace=function(J,ce,ye,Me,Fe,Ye,ot){var _t=6*J;return this.int16[_t+0]=ce,this.int16[_t+1]=ye,this.int16[_t+2]=Me,this.int16[_t+3]=Fe,this.int16[_t+4]=Ye,this.int16[_t+5]=ot,J},z}(Qi);Al.prototype.bytesPerElement=12,dr("StructArrayLayout2i4i12",Al);var bu=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me,Fe,Ye){var ot=this.length;return this.resize(ot+1),this.emplace(ot,J,ce,ye,Me,Fe,Ye)},z.prototype.emplace=function(J,ce,ye,Me,Fe,Ye,ot){var _t=4*J,Et=8*J;return this.int16[_t+0]=ce,this.int16[_t+1]=ye,this.uint8[Et+4]=Me,this.uint8[Et+5]=Fe,this.uint8[Et+6]=Ye,this.uint8[Et+7]=ot,J},z}(Qi);bu.prototype.bytesPerElement=8,dr("StructArrayLayout2i4ub8",bu);var Kl=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt){var ln=this.length;return this.resize(ln+1),this.emplace(ln,J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt)},z.prototype.emplace=function(J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln){var tn=9*J,vn=18*J;return this.uint16[tn+0]=ce,this.uint16[tn+1]=ye,this.uint16[tn+2]=Me,this.uint16[tn+3]=Fe,this.uint16[tn+4]=Ye,this.uint16[tn+5]=ot,this.uint16[tn+6]=_t,this.uint16[tn+7]=Et,this.uint8[vn+16]=Xt,this.uint8[vn+17]=ln,J},z}(Qi);Kl.prototype.bytesPerElement=18,dr("StructArrayLayout8ui2ub18",Kl);var Pl=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn){var vn=this.length;return this.resize(vn+1),this.emplace(vn,J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn)},z.prototype.emplace=function(J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn,vn){var In=12*J;return this.int16[In+0]=ce,this.int16[In+1]=ye,this.int16[In+2]=Me,this.int16[In+3]=Fe,this.uint16[In+4]=Ye,this.uint16[In+5]=ot,this.uint16[In+6]=_t,this.uint16[In+7]=Et,this.int16[In+8]=Xt,this.int16[In+9]=ln,this.int16[In+10]=tn,this.int16[In+11]=vn,J},z}(Qi);Pl.prototype.bytesPerElement=24,dr("StructArrayLayout4i4ui4i24",Pl);var tl=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye){var Me=this.length;return this.resize(Me+1),this.emplace(Me,J,ce,ye)},z.prototype.emplace=function(J,ce,ye,Me){var Fe=3*J;return this.float32[Fe+0]=ce,this.float32[Fe+1]=ye,this.float32[Fe+2]=Me,J},z}(Qi);tl.prototype.bytesPerElement=12,dr("StructArrayLayout3f12",tl);var vs=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J){var ce=this.length;return this.resize(ce+1),this.emplace(ce,J)},z.prototype.emplace=function(J,ce){return this.uint32[1*J+0]=ce,J},z}(Qi);vs.prototype.bytesPerElement=4,dr("StructArrayLayout1ul4",vs);var kl=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me,Fe,Ye,ot,_t,Et){var Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,J,ce,ye,Me,Fe,Ye,ot,_t,Et)},z.prototype.emplace=function(J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt){var ln=10*J,tn=5*J;return this.int16[ln+0]=ce,this.int16[ln+1]=ye,this.int16[ln+2]=Me,this.int16[ln+3]=Fe,this.int16[ln+4]=Ye,this.int16[ln+5]=ot,this.uint32[tn+3]=_t,this.uint16[ln+8]=Et,this.uint16[ln+9]=Xt,J},z}(Qi);kl.prototype.bytesPerElement=20,dr("StructArrayLayout6i1ul2ui20",kl);var Ol=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me,Fe,Ye){var ot=this.length;return this.resize(ot+1),this.emplace(ot,J,ce,ye,Me,Fe,Ye)},z.prototype.emplace=function(J,ce,ye,Me,Fe,Ye,ot){var _t=6*J;return this.int16[_t+0]=ce,this.int16[_t+1]=ye,this.int16[_t+2]=Me,this.int16[_t+3]=Fe,this.int16[_t+4]=Ye,this.int16[_t+5]=ot,J},z}(Qi);Ol.prototype.bytesPerElement=12,dr("StructArrayLayout2i2i2i12",Ol);var Ul=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me,Fe){var Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,J,ce,ye,Me,Fe)},z.prototype.emplace=function(J,ce,ye,Me,Fe,Ye){var ot=4*J,_t=8*J;return this.float32[ot+0]=ce,this.float32[ot+1]=ye,this.float32[ot+2]=Me,this.int16[_t+6]=Fe,this.int16[_t+7]=Ye,J},z}(Qi);Ul.prototype.bytesPerElement=16,dr("StructArrayLayout2f1f2i16",Ul);var js=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,J,ce,ye,Me)},z.prototype.emplace=function(J,ce,ye,Me,Fe){var Ye=12*J,ot=3*J;return this.uint8[Ye+0]=ce,this.uint8[Ye+1]=ye,this.float32[ot+1]=Me,this.float32[ot+2]=Fe,J},z}(Qi);js.prototype.bytesPerElement=12,dr("StructArrayLayout2ub2f12",js);var us=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye){var Me=this.length;return this.resize(Me+1),this.emplace(Me,J,ce,ye)},z.prototype.emplace=function(J,ce,ye,Me){var Fe=3*J;return this.uint16[Fe+0]=ce,this.uint16[Fe+1]=ye,this.uint16[Fe+2]=Me,J},z}(Qi);us.prototype.bytesPerElement=6,dr("StructArrayLayout3ui6",us);var rc=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn,vn,In,Gn,qn,Kn){var er=this.length;return this.resize(er+1),this.emplace(er,J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn,vn,In,Gn,qn,Kn)},z.prototype.emplace=function(J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn,vn,In,Gn,qn,Kn,er){var or=24*J,Cr=12*J,Fr=48*J;return this.int16[or+0]=ce,this.int16[or+1]=ye,this.uint16[or+2]=Me,this.uint16[or+3]=Fe,this.uint32[Cr+2]=Ye,this.uint32[Cr+3]=ot,this.uint32[Cr+4]=_t,this.uint16[or+10]=Et,this.uint16[or+11]=Xt,this.uint16[or+12]=ln,this.float32[Cr+7]=tn,this.float32[Cr+8]=vn,this.uint8[Fr+36]=In,this.uint8[Fr+37]=Gn,this.uint8[Fr+38]=qn,this.uint32[Cr+10]=Kn,this.int16[or+22]=er,J},z}(Qi);rc.prototype.bytesPerElement=48,dr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",rc);var wc=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn,vn,In,Gn,qn,Kn,er,or,Cr,Fr,ni,Qr,di,ki,Ei,mi,Ri){var Ii=this.length;return this.resize(Ii+1),this.emplace(Ii,J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn,vn,In,Gn,qn,Kn,er,or,Cr,Fr,ni,Qr,di,ki,Ei,mi,Ri)},z.prototype.emplace=function(J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn,vn,In,Gn,qn,Kn,er,or,Cr,Fr,ni,Qr,di,ki,Ei,mi,Ri,Ii){var Mi=34*J,Ca=17*J;return this.int16[Mi+0]=ce,this.int16[Mi+1]=ye,this.int16[Mi+2]=Me,this.int16[Mi+3]=Fe,this.int16[Mi+4]=Ye,this.int16[Mi+5]=ot,this.int16[Mi+6]=_t,this.int16[Mi+7]=Et,this.uint16[Mi+8]=Xt,this.uint16[Mi+9]=ln,this.uint16[Mi+10]=tn,this.uint16[Mi+11]=vn,this.uint16[Mi+12]=In,this.uint16[Mi+13]=Gn,this.uint16[Mi+14]=qn,this.uint16[Mi+15]=Kn,this.uint16[Mi+16]=er,this.uint16[Mi+17]=or,this.uint16[Mi+18]=Cr,this.uint16[Mi+19]=Fr,this.uint16[Mi+20]=ni,this.uint16[Mi+21]=Qr,this.uint16[Mi+22]=di,this.uint32[Ca+12]=ki,this.float32[Ca+13]=Ei,this.float32[Ca+14]=mi,this.float32[Ca+15]=Ri,this.float32[Ca+16]=Ii,J},z}(Qi);wc.prototype.bytesPerElement=68,dr("StructArrayLayout8i15ui1ul4f68",wc);var pe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J){var ce=this.length;return this.resize(ce+1),this.emplace(ce,J)},z.prototype.emplace=function(J,ce){return this.float32[1*J+0]=ce,J},z}(Qi);pe.prototype.bytesPerElement=4,dr("StructArrayLayout1f4",pe);var O=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye){var Me=this.length;return this.resize(Me+1),this.emplace(Me,J,ce,ye)},z.prototype.emplace=function(J,ce,ye,Me){var Fe=3*J;return this.int16[Fe+0]=ce,this.int16[Fe+1]=ye,this.int16[Fe+2]=Me,J},z}(Qi);O.prototype.bytesPerElement=6,dr("StructArrayLayout3i6",O);var N=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye){var Me=this.length;return this.resize(Me+1),this.emplace(Me,J,ce,ye)},z.prototype.emplace=function(J,ce,ye,Me){var Ye=4*J;return this.uint32[2*J+0]=ce,this.uint16[Ye+2]=ye,this.uint16[Ye+3]=Me,J},z}(Qi);N.prototype.bytesPerElement=8,dr("StructArrayLayout1ul2ui8",N);var U=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce){var ye=this.length;return this.resize(ye+1),this.emplace(ye,J,ce)},z.prototype.emplace=function(J,ce,ye){var Me=2*J;return this.uint16[Me+0]=ce,this.uint16[Me+1]=ye,J},z}(Qi);U.prototype.bytesPerElement=4,dr("StructArrayLayout2ui4",U);var X=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J){var ce=this.length;return this.resize(ce+1),this.emplace(ce,J)},z.prototype.emplace=function(J,ce){return this.uint16[1*J+0]=ce,J},z}(Qi);X.prototype.bytesPerElement=2,dr("StructArrayLayout1ui2",X);var fe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce){var ye=this.length;return this.resize(ye+1),this.emplace(ye,J,ce)},z.prototype.emplace=function(J,ce,ye){var Me=2*J;return this.float32[Me+0]=ce,this.float32[Me+1]=ye,J},z}(Qi);fe.prototype.bytesPerElement=8,dr("StructArrayLayout2f8",fe);var me=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,ye,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,J,ce,ye,Me)},z.prototype.emplace=function(J,ce,ye,Me,Fe){var Ye=4*J;return this.float32[Ye+0]=ce,this.float32[Ye+1]=ye,this.float32[Ye+2]=Me,this.float32[Ye+3]=Fe,J},z}(Qi);me.prototype.bytesPerElement=16,dr("StructArrayLayout4f16",me);var _e=function(C){function z(){C.apply(this,arguments)}C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z;var J={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return J.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},J.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},J.x1.get=function(){return this._structArray.int16[this._pos2+2]},J.y1.get=function(){return this._structArray.int16[this._pos2+3]},J.x2.get=function(){return this._structArray.int16[this._pos2+4]},J.y2.get=function(){return this._structArray.int16[this._pos2+5]},J.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},J.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},J.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},J.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(z.prototype,J),z}(hl);_e.prototype.size=20;var Ae=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.get=function(J){return new _e(this,J)},z}(kl);dr("CollisionBoxArray",Ae);var Oe=function(C){function z(){C.apply(this,arguments)}C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z;var J={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return J.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},J.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},J.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},J.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},J.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},J.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},J.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},J.segment.get=function(){return this._structArray.uint16[this._pos2+10]},J.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},J.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},J.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},J.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},J.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},J.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},J.placedOrientation.set=function(ce){this._structArray.uint8[this._pos1+37]=ce},J.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},J.hidden.set=function(ce){this._structArray.uint8[this._pos1+38]=ce},J.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},J.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+10]=ce},J.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(z.prototype,J),z}(hl);Oe.prototype.size=48;var Xe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.get=function(J){return new Oe(this,J)},z}(rc);dr("PlacedSymbolArray",Xe);var nt=function(C){function z(){C.apply(this,arguments)}C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z;var J={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return J.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},J.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},J.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},J.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},J.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},J.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},J.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},J.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},J.key.get=function(){return this._structArray.uint16[this._pos2+8]},J.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},J.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},J.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},J.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},J.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},J.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},J.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},J.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},J.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},J.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},J.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},J.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},J.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},J.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},J.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},J.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+12]=ce},J.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},J.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},J.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},J.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(z.prototype,J),z}(hl);nt.prototype.size=68;var dt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.get=function(J){return new nt(this,J)},z}(wc);dr("SymbolInstanceArray",dt);var St=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getoffsetX=function(J){return this.float32[1*J+0]},z}(pe);dr("GlyphOffsetArray",St);var Nt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getx=function(J){return this.int16[3*J+0]},z.prototype.gety=function(J){return this.int16[3*J+1]},z.prototype.gettileUnitDistanceFromAnchor=function(J){return this.int16[3*J+2]},z}(O);dr("SymbolLineVertexArray",Nt);var It=function(C){function z(){C.apply(this,arguments)}C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z;var J={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return J.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},J.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},J.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(z.prototype,J),z}(hl);It.prototype.size=8;var Lt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.get=function(J){return new It(this,J)},z}(N);dr("FeatureIndexArray",Lt);var At=Ha([{name:"a_pos",components:2,type:"Int16"}],4).members,Zt=function(C){void 0===C&&(C=[]),this.segments=C};function Gt(C,z){return 256*(C=u(Math.floor(C),0,255))+u(Math.floor(z),0,255)}Zt.prototype.prepareSegment=function(C,z,J,ce){var ye=this.segments[this.segments.length-1];return C>Zt.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+Zt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!ye||ye.vertexLength+C>Zt.MAX_VERTEX_ARRAY_LENGTH||ye.sortKey!==ce)&&(ye={vertexOffset:z.length,primitiveOffset:J.length,vertexLength:0,primitiveLength:0},void 0!==ce&&(ye.sortKey=ce),this.segments.push(ye)),ye},Zt.prototype.get=function(){return this.segments},Zt.prototype.destroy=function(){for(var C=0,z=this.segments;C<z.length;C+=1){var J=z[C];for(var ce in J.vaos)J.vaos[ce].destroy()}},Zt.simpleSegment=function(C,z,J,ce){return new Zt([{vertexOffset:C,primitiveOffset:z,vertexLength:J,primitiveLength:ce,vaos:{},sortKey:0}])},Zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dr("SegmentVector",Zt);var $t=Ha([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),mn=r(function(C){C.exports=function(z,J){var ce,ye,Me,Fe,Ye,ot,_t,Et;for(ye=z.length-(ce=3&z.length),Me=J,Ye=3432918353,ot=461845907,Et=0;Et<ye;)_t=255&z.charCodeAt(Et)|(255&z.charCodeAt(++Et))<<8|(255&z.charCodeAt(++Et))<<16|(255&z.charCodeAt(++Et))<<24,++Et,Me=27492+(65535&(Fe=5*(65535&(Me=(Me^=_t=(65535&(_t=(_t=(65535&_t)*Ye+(((_t>>>16)*Ye&65535)<<16)&4294967295)<<15|_t>>>17))*ot+(((_t>>>16)*ot&65535)<<16)&4294967295)<<13|Me>>>19))+((5*(Me>>>16)&65535)<<16)&4294967295))+((58964+(Fe>>>16)&65535)<<16);switch(_t=0,ce){case 3:_t^=(255&z.charCodeAt(Et+2))<<16;case 2:_t^=(255&z.charCodeAt(Et+1))<<8;case 1:Me^=_t=(65535&(_t=(_t=(65535&(_t^=255&z.charCodeAt(Et)))*Ye+(((_t>>>16)*Ye&65535)<<16)&4294967295)<<15|_t>>>17))*ot+(((_t>>>16)*ot&65535)<<16)&4294967295}return Me^=z.length,Me=2246822507*(65535&(Me^=Me>>>16))+((2246822507*(Me>>>16)&65535)<<16)&4294967295,Me=3266489909*(65535&(Me^=Me>>>13))+((3266489909*(Me>>>16)&65535)<<16)&4294967295,(Me^=Me>>>16)>>>0}}),En=r(function(C){C.exports=function(z,J){for(var ce,ye=z.length,Me=J^ye,Fe=0;ye>=4;)ce=1540483477*(65535&(ce=255&z.charCodeAt(Fe)|(255&z.charCodeAt(++Fe))<<8|(255&z.charCodeAt(++Fe))<<16|(255&z.charCodeAt(++Fe))<<24))+((1540483477*(ce>>>16)&65535)<<16),Me=1540483477*(65535&Me)+((1540483477*(Me>>>16)&65535)<<16)^(ce=1540483477*(65535&(ce^=ce>>>24))+((1540483477*(ce>>>16)&65535)<<16)),ye-=4,++Fe;switch(ye){case 3:Me^=(255&z.charCodeAt(Fe+2))<<16;case 2:Me^=(255&z.charCodeAt(Fe+1))<<8;case 1:Me=1540483477*(65535&(Me^=255&z.charCodeAt(Fe)))+((1540483477*(Me>>>16)&65535)<<16)}return Me=1540483477*(65535&(Me^=Me>>>13))+((1540483477*(Me>>>16)&65535)<<16),(Me^=Me>>>15)>>>0}}),Vn=mn,pr=En;Vn.murmur3=mn,Vn.murmur2=pr;var hr=function(){this.ids=[],this.positions=[],this.indexed=!1};hr.prototype.add=function(C,z,J,ce){this.ids.push(br(C)),this.positions.push(z,J,ce)},hr.prototype.getPositions=function(C){for(var z=br(C),J=0,ce=this.ids.length-1;J<ce;){var ye=J+ce>>1;this.ids[ye]>=z?ce=ye:J=ye+1}for(var Me=[];this.ids[J]===z;)Me.push({index:this.positions[3*J],start:this.positions[3*J+1],end:this.positions[3*J+2]}),J++;return Me},hr.serialize=function(C,z){var J=new Float64Array(C.ids),ce=new Uint32Array(C.positions);return function ye(Me,Fe,Ye,ot){for(;Ye<ot;){for(var _t=Me[Ye+ot>>1],Et=Ye-1,Xt=ot+1;;){do{Et++}while(Me[Et]<_t);do{Xt--}while(Me[Xt]>_t);if(Et>=Xt)break;oi(Me,Et,Xt),oi(Fe,3*Et,3*Xt),oi(Fe,3*Et+1,3*Xt+1),oi(Fe,3*Et+2,3*Xt+2)}Xt-Ye<ot-Xt?(ye(Me,Fe,Ye,Xt),Ye=Xt+1):(ye(Me,Fe,Xt+1,ot),ot=Xt)}}(J,ce,0,J.length-1),z&&z.push(J.buffer,ce.buffer),{ids:J,positions:ce}},hr.deserialize=function(C){var z=new hr;return z.ids=C.ids,z.positions=C.positions,z.indexed=!0,z};var Er=Math.pow(2,53)-1;function br(C){var z=+C;return!isNaN(z)&&z<=Er?z:Vn(String(C))}function oi(C,z,J){var ce=C[z];C[z]=C[J],C[J]=ce}dr("FeaturePositionMap",hr);var ci=function(C,z){this.gl=C.gl,this.location=z},Si=function(C){function z(J,ce){C.call(this,J,ce),this.current=0}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.set=function(J){this.current!==J&&(this.current=J,this.gl.uniform1i(this.location,J))},z}(ci),ar=function(C){function z(J,ce){C.call(this,J,ce),this.current=0}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.set=function(J){this.current!==J&&(this.current=J,this.gl.uniform1f(this.location,J))},z}(ci),jr=function(C){function z(J,ce){C.call(this,J,ce),this.current=[0,0]}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.set=function(J){J[0]===this.current[0]&&J[1]===this.current[1]||(this.current=J,this.gl.uniform2f(this.location,J[0],J[1]))},z}(ci),gi=function(C){function z(J,ce){C.call(this,J,ce),this.current=[0,0,0]}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.set=function(J){J[0]===this.current[0]&&J[1]===this.current[1]&&J[2]===this.current[2]||(this.current=J,this.gl.uniform3f(this.location,J[0],J[1],J[2]))},z}(ci),ui=function(C){function z(J,ce){C.call(this,J,ce),this.current=[0,0,0,0]}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.set=function(J){J[0]===this.current[0]&&J[1]===this.current[1]&&J[2]===this.current[2]&&J[3]===this.current[3]||(this.current=J,this.gl.uniform4f(this.location,J[0],J[1],J[2],J[3]))},z}(ci),Ti=function(C){function z(J,ce){C.call(this,J,ce),this.current=Tn.transparent}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.set=function(J){J.r===this.current.r&&J.g===this.current.g&&J.b===this.current.b&&J.a===this.current.a||(this.current=J,this.gl.uniform4f(this.location,J.r,J.g,J.b,J.a))},z}(ci),Fi=new Float32Array(16),ia=function(C){function z(J,ce){C.call(this,J,ce),this.current=Fi}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.set=function(J){if(J[12]!==this.current[12]||J[0]!==this.current[0])return this.current=J,void this.gl.uniformMatrix4fv(this.location,!1,J);for(var ce=1;ce<16;ce++)if(J[ce]!==this.current[ce]){this.current=J,this.gl.uniformMatrix4fv(this.location,!1,J);break}},z}(ci);function yi(C){return[Gt(255*C.r,255*C.g),Gt(255*C.b,255*C.a)]}var qi=function(C,z,J){this.value=C,this.uniformNames=z.map(function(ce){return"u_"+ce}),this.type=J};qi.prototype.setUniform=function(C,z,J){C.set(J.constantOr(this.value))},qi.prototype.getBinding=function(C,z,J){return"color"===this.type?new Ti(C,z):new ar(C,z)};var Gi=function(C,z){this.uniformNames=z.map(function(J){return"u_"+J}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Gi.prototype.setConstantPatternPositions=function(C,z){this.pixelRatioFrom=z.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=z.tlbr,this.patternTo=C.tlbr},Gi.prototype.setUniform=function(C,z,J,ce){var ye="u_pattern_to"===ce?this.patternTo:"u_pattern_from"===ce?this.patternFrom:"u_pixel_ratio_to"===ce?this.pixelRatioTo:"u_pixel_ratio_from"===ce?this.pixelRatioFrom:null;ye&&C.set(ye)},Gi.prototype.getBinding=function(C,z,J){return"u_pattern"===J.substr(0,9)?new ui(C,z):new ar(C,z)};var sa=function(C,z,J,ce){this.expression=C,this.type=J,this.maxValue=0,this.paintVertexAttributes=z.map(function(ye){return{name:"a_"+ye,type:"Float32",components:"color"===J?2:1,offset:0}}),this.paintVertexArray=new ce};sa.prototype.populatePaintArray=function(C,z,J,ce,ye){var Me=this.paintVertexArray.length,Fe=this.expression.evaluate(new da(0),z,{},ce,[],ye);this.paintVertexArray.resize(C),this._setPaintValue(Me,C,Fe)},sa.prototype.updatePaintArray=function(C,z,J,ce){var ye=this.expression.evaluate({zoom:0},J,ce);this._setPaintValue(C,z,ye)},sa.prototype._setPaintValue=function(C,z,J){if("color"===this.type)for(var ce=yi(J),ye=C;ye<z;ye++)this.paintVertexArray.emplace(ye,ce[0],ce[1]);else{for(var Me=C;Me<z;Me++)this.paintVertexArray.emplace(Me,J);this.maxValue=Math.max(this.maxValue,Math.abs(J))}},sa.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},sa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Wi=function(C,z,J,ce,ye,Me){this.expression=C,this.uniformNames=z.map(function(Fe){return"u_"+Fe+"_t"}),this.type=J,this.useIntegerZoom=ce,this.zoom=ye,this.maxValue=0,this.paintVertexAttributes=z.map(function(Fe){return{name:"a_"+Fe,type:"Float32",components:"color"===J?4:2,offset:0}}),this.paintVertexArray=new Me};Wi.prototype.populatePaintArray=function(C,z,J,ce,ye){var Me=this.expression.evaluate(new da(this.zoom),z,{},ce,[],ye),Fe=this.expression.evaluate(new da(this.zoom+1),z,{},ce,[],ye),Ye=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue(Ye,C,Me,Fe)},Wi.prototype.updatePaintArray=function(C,z,J,ce){var ye=this.expression.evaluate({zoom:this.zoom},J,ce),Me=this.expression.evaluate({zoom:this.zoom+1},J,ce);this._setPaintValue(C,z,ye,Me)},Wi.prototype._setPaintValue=function(C,z,J,ce){if("color"===this.type)for(var ye=yi(J),Me=yi(ce),Fe=C;Fe<z;Fe++)this.paintVertexArray.emplace(Fe,ye[0],ye[1],Me[0],Me[1]);else{for(var Ye=C;Ye<z;Ye++)this.paintVertexArray.emplace(Ye,J,ce);this.maxValue=Math.max(this.maxValue,Math.abs(J),Math.abs(ce))}},Wi.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Wi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Wi.prototype.setUniform=function(C,z){var J=this.useIntegerZoom?Math.floor(z.zoom):z.zoom,ce=u(this.expression.interpolationFactor(J,this.zoom,this.zoom+1),0,1);C.set(ce)},Wi.prototype.getBinding=function(C,z,J){return new ar(C,z)};var ua=function(C,z,J,ce,ye,Me){this.expression=C,this.type=z,this.useIntegerZoom=J,this.zoom=ce,this.layerId=Me,this.zoomInPaintVertexArray=new ye,this.zoomOutPaintVertexArray=new ye};ua.prototype.populatePaintArray=function(C,z,J){var ce=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(ce,C,z.patterns&&z.patterns[this.layerId],J)},ua.prototype.updatePaintArray=function(C,z,J,ce,ye){this._setPaintValues(C,z,J.patterns&&J.patterns[this.layerId],ye)},ua.prototype._setPaintValues=function(C,z,J,ce){if(ce&&J){var Ye=ce[J.min],ot=ce[J.mid],_t=ce[J.max];if(Ye&&ot&&_t)for(var Et=C;Et<z;Et++)this.zoomInPaintVertexArray.emplace(Et,ot.tl[0],ot.tl[1],ot.br[0],ot.br[1],Ye.tl[0],Ye.tl[1],Ye.br[0],Ye.br[1],ot.pixelRatio,Ye.pixelRatio),this.zoomOutPaintVertexArray.emplace(Et,ot.tl[0],ot.tl[1],ot.br[0],ot.br[1],_t.tl[0],_t.tl[1],_t.br[0],_t.br[1],ot.pixelRatio,_t.pixelRatio)}},ua.prototype.upload=function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,$t.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,$t.members,this.expression.isStateDependent))},ua.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ka=function(C,z,J,ce){this.binders={},this.layoutAttributes=ce,this._buffers=[];var ye=[];for(var Me in C.paint._values)if(J(Me)){var Fe=C.paint.get(Me);if(Fe instanceof Oi&&na(Fe.property.specification)){var Ye=Oo(Me,C.type),ot=Fe.value,_t=Fe.property.specification.type,Et=Fe.property.useIntegerZoom,Xt=Fe.property.specification["property-type"],ln="cross-faded"===Xt||"cross-faded-data-driven"===Xt;if("constant"===ot.kind)this.binders[Me]=ln?new Gi(ot.value,Ye):new qi(ot.value,Ye,_t),ye.push("/u_"+Me);else if("source"===ot.kind||ln){var tn=ao(Me,_t,"source");this.binders[Me]=ln?new ua(ot,_t,Et,z,tn,C.id):new sa(ot,Ye,_t,tn),ye.push("/a_"+Me)}else{var vn=ao(Me,_t,"composite");this.binders[Me]=new Wi(ot,Ye,_t,Et,z,vn),ye.push("/z_"+Me)}}}this.cacheKey=ye.sort().join("")};ka.prototype.getMaxValue=function(C){var z=this.binders[C];return z instanceof sa||z instanceof Wi?z.maxValue:0},ka.prototype.populatePaintArrays=function(C,z,J,ce,ye){for(var Me in this.binders){var Fe=this.binders[Me];(Fe instanceof sa||Fe instanceof Wi||Fe instanceof ua)&&Fe.populatePaintArray(C,z,J,ce,ye)}},ka.prototype.setConstantPatternPositions=function(C,z){for(var J in this.binders){var ce=this.binders[J];ce instanceof Gi&&ce.setConstantPatternPositions(C,z)}},ka.prototype.updatePaintArrays=function(C,z,J,ce,ye){var Me=!1;for(var Fe in C)for(var Ye=0,ot=z.getPositions(Fe);Ye<ot.length;Ye+=1){var _t=ot[Ye],Et=J.feature(_t.index);for(var Xt in this.binders){var ln=this.binders[Xt];if((ln instanceof sa||ln instanceof Wi||ln instanceof ua)&&!0===ln.expression.isStateDependent){var tn=ce.paint.get(Xt);ln.expression=tn.value,ln.updatePaintArray(_t.start,_t.end,Et,C[Fe],ye),Me=!0}}}return Me},ka.prototype.defines=function(){var C=[];for(var z in this.binders){var J=this.binders[z];(J instanceof qi||J instanceof Gi)&&C.push.apply(C,J.uniformNames.map(function(ce){return"#define HAS_UNIFORM_"+ce}))}return C},ka.prototype.getPaintVertexBuffers=function(){return this._buffers},ka.prototype.getUniforms=function(C,z){var J=[];for(var ce in this.binders){var ye=this.binders[ce];if(ye instanceof qi||ye instanceof Gi||ye instanceof Wi)for(var Me=0,Fe=ye.uniformNames;Me<Fe.length;Me+=1){var Ye=Fe[Me];if(z[Ye]){var ot=ye.getBinding(C,z[Ye],Ye);J.push({name:Ye,property:ce,binding:ot})}}}return J},ka.prototype.setUniforms=function(C,z,J,ce){for(var ye=0,Me=z;ye<Me.length;ye+=1){var Fe=Me[ye],Ye=Fe.name,ot=Fe.property;this.binders[ot].setUniform(Fe.binding,ce,J.get(ot),Ye)}},ka.prototype.updatePaintBuffers=function(C){for(var z in this._buffers=[],this.binders){var J=this.binders[z];if(C&&J instanceof ua){var ce=2===C.fromScale?J.zoomInPaintVertexBuffer:J.zoomOutPaintVertexBuffer;ce&&this._buffers.push(ce)}else(J instanceof sa||J instanceof Wi)&&J.paintVertexBuffer&&this._buffers.push(J.paintVertexBuffer)}},ka.prototype.upload=function(C){for(var z in this.binders){var J=this.binders[z];(J instanceof sa||J instanceof Wi||J instanceof ua)&&J.upload(C)}this.updatePaintBuffers()},ka.prototype.destroy=function(){for(var C in this.binders){var z=this.binders[C];(z instanceof sa||z instanceof Wi||z instanceof ua)&&z.destroy()}};var Wa=function(C,z,J,ce){void 0===ce&&(ce=function(){return!0}),this.programConfigurations={};for(var ye=0,Me=z;ye<Me.length;ye+=1){var Fe=Me[ye];this.programConfigurations[Fe.id]=new ka(Fe,J,ce,C)}this.needsUpload=!1,this._featureMap=new hr,this._bufferOffset=0};function Oo(C,z){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[C]||[C.replace(z+"-","").replace(/-/g,"_")]}function ao(C,z,J){var ye={"line-pattern":{source:Kl,composite:Kl},"fill-pattern":{source:Kl,composite:Kl},"fill-extrusion-pattern":{source:Kl,composite:Kl}}[C];return ye&&ye[J]||{color:{source:fe,composite:me},number:{source:pe,composite:fe}}[z][J]}Wa.prototype.populatePaintArrays=function(C,z,J,ce,ye,Me){for(var Fe in this.programConfigurations)this.programConfigurations[Fe].populatePaintArrays(C,z,ce,ye,Me);void 0!==z.id&&this._featureMap.add(z.id,J,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},Wa.prototype.updatePaintArrays=function(C,z,J,ce){for(var ye=0,Me=J;ye<Me.length;ye+=1){var Fe=Me[ye];this.needsUpload=this.programConfigurations[Fe.id].updatePaintArrays(C,this._featureMap,z,Fe,ce)||this.needsUpload}},Wa.prototype.get=function(C){return this.programConfigurations[C]},Wa.prototype.upload=function(C){if(this.needsUpload){for(var z in this.programConfigurations)this.programConfigurations[z].upload(C);this.needsUpload=!1}},Wa.prototype.destroy=function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()},dr("ConstantBinder",qi),dr("CrossFadedConstantBinder",Gi),dr("SourceExpressionBinder",sa),dr("CrossFadedCompositeBinder",ua),dr("CompositeExpressionBinder",Wi),dr("ProgramConfiguration",ka,{omit:["_buffers"]}),dr("ProgramConfigurationSet",Wa);var ho=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function Mo(C){for(var z=8192/C.extent,J=C.loadGeometry(),ce=0;ce<J.length;ce++)for(var ye=J[ce],Me=0;Me<ye.length;Me++){var Fe=ye[Me];Fe.x=Math.round(Fe.x*z),Fe.y=Math.round(Fe.y*z),(Fe.x<ho.min||Fe.x>ho.max||Fe.y<ho.min||Fe.y>ho.max)&&(S("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Fe.x=u(Fe.x,ho.min,ho.max),Fe.y=u(Fe.y,ho.min,ho.max))}return J}function ys(C,z,J,ce,ye){C.emplaceBack(2*z+(ce+1)/2,2*J+(ye+1)/2)}var jo=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new ls,this.indexArray=new us,this.segments=new Zt,this.programConfigurations=new Wa(At,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function Ys(C,z){for(var J=0;J<C.length;J++)if(dl(z,C[J]))return!0;for(var ce=0;ce<z.length;ce++)if(dl(C,z[ce]))return!0;return!!_u(C,z)}function Ql(C,z,J){return!!dl(C,z)||!!Qo(z,C,J)}function Rl(C,z){if(1===C.length)return ic(z,C[0]);for(var J=0;J<z.length;J++)for(var ce=z[J],ye=0;ye<ce.length;ye++)if(dl(C,ce[ye]))return!0;for(var Me=0;Me<C.length;Me++)if(ic(z,C[Me]))return!0;for(var Fe=0;Fe<z.length;Fe++)if(_u(C,z[Fe]))return!0;return!1}function zu(C,z,J){if(C.length>1){if(_u(C,z))return!0;for(var ce=0;ce<z.length;ce++)if(Qo(z[ce],C,J))return!0}for(var ye=0;ye<C.length;ye++)if(Qo(C[ye],z,J))return!0;return!1}function _u(C,z){if(0===C.length||0===z.length)return!1;for(var J=0;J<C.length-1;J++)for(var ce=C[J],ye=C[J+1],Me=0;Me<z.length-1;Me++)if(fu(ce,ye,z[Me],z[Me+1]))return!0;return!1}function fu(C,z,J,ce){return F(C,J,ce)!==F(z,J,ce)&&F(C,z,J)!==F(C,z,ce)}function Qo(C,z,J){var ce=J*J;if(1===z.length)return C.distSqr(z[0])<ce;for(var ye=1;ye<z.length;ye++)if(Nu(C,z[ye-1],z[ye])<ce)return!0;return!1}function Nu(C,z,J){var ce=z.distSqr(J);if(0===ce)return C.distSqr(z);var ye=((C.x-z.x)*(J.x-z.x)+(C.y-z.y)*(J.y-z.y))/ce;return C.distSqr(ye<0?z:ye>1?J:J.sub(z)._mult(ye)._add(z))}function ic(C,z){for(var J,ce,ye,Me=!1,Fe=0;Fe<C.length;Fe++)for(var Ye=0,ot=(J=C[Fe]).length-1;Ye<J.length;ot=Ye++)(ce=J[Ye]).y>z.y!=(ye=J[ot]).y>z.y&&z.x<(ye.x-ce.x)*(z.y-ce.y)/(ye.y-ce.y)+ce.x&&(Me=!Me);return Me}function dl(C,z){for(var J=!1,ce=0,ye=C.length-1;ce<C.length;ye=ce++){var Me=C[ce],Fe=C[ye];Me.y>z.y!=Fe.y>z.y&&z.x<(Fe.x-Me.x)*(z.y-Me.y)/(Fe.y-Me.y)+Me.x&&(J=!J)}return J}function ac(C,z,J){var ce=J[0],ye=J[2];if(C.x<ce.x&&z.x<ce.x||C.x>ye.x&&z.x>ye.x||C.y<ce.y&&z.y<ce.y||C.y>ye.y&&z.y>ye.y)return!1;var Me=F(C,z,J[0]);return Me!==F(C,z,J[1])||Me!==F(C,z,J[2])||Me!==F(C,z,J[3])}function Ao(C,z,J){var ce=z.paint.get(C).value;return"constant"===ce.kind?ce.value:J.programConfigurations.get(z.id).getMaxValue(C)}function Vs(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1])}function Us(C,z,J,ce,ye){if(!z[0]&&!z[1])return C;var Me=n.convert(z)._mult(ye);"viewport"===J&&Me._rotate(-ce);for(var Fe=[],Ye=0;Ye<C.length;Ye++)Fe.push(C[Ye].sub(Me));return Fe}jo.prototype.populate=function(C,z,J){var ce=this.layers[0],ye=[],Me=null;"circle"===ce.type&&(Me=ce.layout.get("circle-sort-key"));for(var Fe=0,Ye=C;Fe<Ye.length;Fe+=1){var ot=Ye[Fe],_t=ot.feature,Et=ot.id,Xt=ot.index,ln=ot.sourceLayerIndex,tn=this.layers[0]._featureFilter.needGeometry,vn={type:_t.type,id:Et,properties:_t.properties,geometry:tn?Mo(_t):[]};if(this.layers[0]._featureFilter.filter(new da(this.zoom),vn,J)){tn||(vn.geometry=Mo(_t));var In=Me?Me.evaluate(vn,{},J):void 0;ye.push({id:Et,properties:_t.properties,type:_t.type,sourceLayerIndex:ln,index:Xt,geometry:vn.geometry,patterns:{},sortKey:In})}}Me&&ye.sort(function(di,ki){return di.sortKey-ki.sortKey});for(var qn=0,Kn=ye;qn<Kn.length;qn+=1){var er=Kn[qn],Cr=er.geometry,Fr=er.index,ni=er.sourceLayerIndex,Qr=C[Fr].feature;this.addFeature(er,Cr,Fr,J),z.featureIndex.insert(Qr,Cr,Fr,ni,this.index)}},jo.prototype.update=function(C,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(C,z,this.stateDependentLayers,J)},jo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},jo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jo.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,At),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},jo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},jo.prototype.addFeature=function(C,z,J,ce){for(var ye=0,Me=z;ye<Me.length;ye+=1)for(var Fe=0,Ye=Me[ye];Fe<Ye.length;Fe+=1){var ot=Ye[Fe],_t=ot.x,Et=ot.y;if(!(_t<0||_t>=8192||Et<0||Et>=8192)){var Xt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),ln=Xt.vertexLength;ys(this.layoutVertexArray,_t,Et,-1,-1),ys(this.layoutVertexArray,_t,Et,1,-1),ys(this.layoutVertexArray,_t,Et,1,1),ys(this.layoutVertexArray,_t,Et,-1,1),this.indexArray.emplaceBack(ln,ln+1,ln+2),this.indexArray.emplaceBack(ln,ln+3,ln+2),Xt.vertexLength+=4,Xt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,J,{},ce)},dr("CircleBucket",jo,{omit:["layers"]});var Bu=new Bs({"circle-sort-key":new Yi(Ne.layout_circle["circle-sort-key"])}),Tc={paint:new Bs({"circle-radius":new Yi(Ne.paint_circle["circle-radius"]),"circle-color":new Yi(Ne.paint_circle["circle-color"]),"circle-blur":new Yi(Ne.paint_circle["circle-blur"]),"circle-opacity":new Yi(Ne.paint_circle["circle-opacity"]),"circle-translate":new Di(Ne.paint_circle["circle-translate"]),"circle-translate-anchor":new Di(Ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Di(Ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Di(Ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yi(Ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yi(Ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yi(Ne.paint_circle["circle-stroke-opacity"])}),layout:Bu},pl="undefined"!=typeof Float32Array?Float32Array:Array;function nf(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function oc(C,z,J){var ce=z[0],ye=z[1],Me=z[2],Fe=z[3],Ye=z[4],ot=z[5],_t=z[6],Et=z[7],Xt=z[8],ln=z[9],tn=z[10],vn=z[11],In=z[12],Gn=z[13],qn=z[14],Kn=z[15],er=J[0],or=J[1],Cr=J[2],Fr=J[3];return C[0]=er*ce+or*Ye+Cr*Xt+Fr*In,C[1]=er*ye+or*ot+Cr*ln+Fr*Gn,C[2]=er*Me+or*_t+Cr*tn+Fr*qn,C[3]=er*Fe+or*Et+Cr*vn+Fr*Kn,C[4]=(er=J[4])*ce+(or=J[5])*Ye+(Cr=J[6])*Xt+(Fr=J[7])*In,C[5]=er*ye+or*ot+Cr*ln+Fr*Gn,C[6]=er*Me+or*_t+Cr*tn+Fr*qn,C[7]=er*Fe+or*Et+Cr*vn+Fr*Kn,C[8]=(er=J[8])*ce+(or=J[9])*Ye+(Cr=J[10])*Xt+(Fr=J[11])*In,C[9]=er*ye+or*ot+Cr*ln+Fr*Gn,C[10]=er*Me+or*_t+Cr*tn+Fr*qn,C[11]=er*Fe+or*Et+Cr*vn+Fr*Kn,C[12]=(er=J[12])*ce+(or=J[13])*Ye+(Cr=J[14])*Xt+(Fr=J[15])*In,C[13]=er*ye+or*ot+Cr*ln+Fr*Gn,C[14]=er*Me+or*_t+Cr*tn+Fr*qn,C[15]=er*Fe+or*Et+Cr*vn+Fr*Kn,C}Math.hypot||(Math.hypot=function(){for(var C=arguments,z=0,J=arguments.length;J--;)z+=C[J]*C[J];return Math.sqrt(z)});var xs,z,sc=oc;function Hl(C,z,J){var ce=z[0],ye=z[1],Me=z[2],Fe=z[3];return C[0]=J[0]*ce+J[4]*ye+J[8]*Me+J[12]*Fe,C[1]=J[1]*ce+J[5]*ye+J[9]*Me+J[13]*Fe,C[2]=J[2]*ce+J[6]*ye+J[10]*Me+J[14]*Fe,C[3]=J[3]*ce+J[7]*ye+J[11]*Me+J[15]*Fe,C}xs=new pl(3),pl!=Float32Array&&(xs[0]=0,xs[1]=0,xs[2]=0),z=new pl(4),pl!=Float32Array&&(z[0]=0,z[1]=0,z[2]=0,z[3]=0);var af=(function(){var z=new pl(2);pl!=Float32Array&&(z[0]=0,z[1]=0)}(),function(C){function z(J){C.call(this,J,Tc)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.createBucket=function(J){return new jo(J)},z.prototype.queryRadius=function(J){var ce=J;return Ao("circle-radius",this,ce)+Ao("circle-stroke-width",this,ce)+Vs(this.paint.get("circle-translate"))},z.prototype.queryIntersectsFeature=function(J,ce,ye,Me,Fe,Ye,ot,_t){for(var Et=Us(J,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ye.angle,ot),Xt=this.paint.get("circle-radius").evaluate(ce,ye)+this.paint.get("circle-stroke-width").evaluate(ce,ye),ln="map"===this.paint.get("circle-pitch-alignment"),tn=ln?Et:function(ni,Qr){return ni.map(function(di){return of(di,Qr)})}(Et,_t),vn=ln?Xt*ot:Xt,In=0,Gn=Me;In<Gn.length;In+=1)for(var qn=0,Kn=Gn[In];qn<Kn.length;qn+=1){var er=Kn[qn],or=ln?er:of(er,_t),Cr=vn,Fr=Hl([],[er.x,er.y,0,1],_t);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Cr*=Fr[3]/Ye.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Cr*=Ye.cameraToCenterDistance/Fr[3]),Ql(tn,or,Cr))return!0}return!1},z}(Zr));function of(C,z){var J=Hl([],[C.x,C.y,0,1],z);return new n(J[0]/J[3],J[1]/J[3])}var Fh=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z}(jo);function lc(C,z,J,ce){var ye=z.width,Me=z.height;if(ce){if(ce instanceof Uint8ClampedArray)ce=new Uint8Array(ce.buffer);else if(ce.length!==ye*Me*J)throw new RangeError("mismatched image size")}else ce=new Uint8Array(ye*Me*J);return C.width=ye,C.height=Me,C.data=ce,C}function km(C,z,J){var ce=z.width,ye=z.height;if(ce!==C.width||ye!==C.height){var Me=lc({},{width:ce,height:ye},J);zd(C,Me,{x:0,y:0},{x:0,y:0},{width:Math.min(C.width,ce),height:Math.min(C.height,ye)},J),C.width=ce,C.height=ye,C.data=Me.data}}function zd(C,z,J,ce,ye,Me){if(0===ye.width||0===ye.height)return z;if(ye.width>C.width||ye.height>C.height||J.x>C.width-ye.width||J.y>C.height-ye.height)throw new RangeError("out of range source coordinates for image copy");if(ye.width>z.width||ye.height>z.height||ce.x>z.width-ye.width||ce.y>z.height-ye.height)throw new RangeError("out of range destination coordinates for image copy");for(var Fe=C.data,Ye=z.data,ot=0;ot<ye.height;ot++)for(var _t=((J.y+ot)*C.width+J.x)*Me,Et=((ce.y+ot)*z.width+ce.x)*Me,Xt=0;Xt<ye.width*Me;Xt++)Ye[Et+Xt]=Fe[_t+Xt];return z}dr("HeatmapBucket",Fh,{omit:["layers"]});var xa=function(C,z){lc(this,C,1,z)};xa.prototype.resize=function(C){km(this,C,1)},xa.prototype.clone=function(){return new xa({width:this.width,height:this.height},new Uint8Array(this.data))},xa.copy=function(C,z,J,ce,ye){zd(C,z,J,ce,ye,1)};var ml=function(C,z){lc(this,C,4,z)};ml.prototype.resize=function(C){km(this,C,4)},ml.prototype.replace=function(C,z){z?this.data.set(C):this.data=C instanceof Uint8ClampedArray?new Uint8Array(C.buffer):C},ml.prototype.clone=function(){return new ml({width:this.width,height:this.height},new Uint8Array(this.data))},ml.copy=function(C,z,J,ce,ye){zd(C,z,J,ce,ye,4)},dr("AlphaImage",xa),dr("RGBAImage",ml);var tx={paint:new Bs({"heatmap-radius":new Yi(Ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yi(Ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Di(Ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ml(Ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Di(Ne.paint_heatmap["heatmap-opacity"])})};function Em(C,z){for(var J=new Uint8Array(1024),ce={},ye=0,Me=0;ye<256;ye++,Me+=4){ce[z]=ye/255;var Fe=C.evaluate(ce);J[Me+0]=Math.floor(255*Fe.r/Fe.a),J[Me+1]=Math.floor(255*Fe.g/Fe.a),J[Me+2]=Math.floor(255*Fe.b/Fe.a),J[Me+3]=Math.floor(255*Fe.a)}return new ml({width:256,height:1},J)}var nx=function(C){function z(J){C.call(this,J,tx),this._updateColorRamp()}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.createBucket=function(J){return new Fh(J)},z.prototype._handleSpecialPaintPropertyUpdate=function(J){"heatmap-color"===J&&this._updateColorRamp()},z.prototype._updateColorRamp=function(){this.colorRamp=Em(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},z.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},z}(Zr),rx={paint:new Bs({"hillshade-illumination-direction":new Di(Ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Di(Ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Di(Ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Di(Ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Di(Ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Di(Ne.paint_hillshade["hillshade-accent-color"])})},ix=function(C){function z(J){C.call(this,J,rx)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},z}(Zr),Cm=Ha([{name:"a_pos",components:2,type:"Int16"}],4).members,Ac=bs,ax=bs;function bs(C,z,J){J=J||2;var ce,ye,Me,Fe,Ye,ot,_t,Et=z&&z.length,Xt=Et?z[0]*J:C.length,ln=zh(C,0,Xt,J,!0),tn=[];if(!ln||ln.next===ln.prev)return tn;if(Et&&(ln=function(In,Gn,qn,Kn){var er,or,ni,Qr=[];for(er=0,or=Gn.length;er<or;er++)(ni=zh(In,Gn[er]*Kn,er<or-1?Gn[er+1]*Kn:In.length,Kn,!1))===ni.next&&(ni.steiner=!0),Qr.push(Dm(ni));for(Qr.sort(Bh),er=0;er<Qr.length;er++)Vf(Qr[er],qn),qn=eu(qn,qn.next);return qn}(C,z,ln,J)),C.length>80*J){ce=Me=C[0],ye=Fe=C[1];for(var vn=J;vn<Xt;vn+=J)(Ye=C[vn])<ce&&(ce=Ye),(ot=C[vn+1])<ye&&(ye=ot),Ye>Me&&(Me=Ye),ot>Fe&&(Fe=ot);_t=0!==(_t=Math.max(Me-ce,Fe-ye))?1/_t:0}return Nh(ln,tn,J,ce,ye,_t),tn}function zh(C,z,J,ce,ye){var Me,Fe;if(ye===Vd(C,z,J,ce)>0)for(Me=z;Me<J;Me+=ce)Fe=x0(Me,C[Me],C[Me+1],Fe);else for(Me=J-ce;Me>=z;Me-=ce)Fe=x0(Me,C[Me],C[Me+1],Fe);return Fe&&vl(Fe,Fe.next)&&(Hf(Fe),Fe=Fe.next),Fe}function eu(C,z){if(!C)return C;z||(z=C);var J,ce=C;do{if(J=!1,ce.steiner||!vl(ce,ce.next)&&0!==es(ce.prev,ce,ce.next))ce=ce.next;else{if(Hf(ce),(ce=z=ce.prev)===ce.next)break;J=!0}}while(J||ce!==z);return z}function Nh(C,z,J,ce,ye,Me,Fe){if(C){!Fe&&Me&&function(Et,Xt,ln,tn){var vn=Et;do{null===vn.z&&(vn.z=Nd(vn.x,vn.y,Xt,ln,tn)),vn.prevZ=vn.prev,vn.nextZ=vn.next,vn=vn.next}while(vn!==Et);vn.prevZ.nextZ=null,vn.prevZ=null,function(In){var Gn,qn,Kn,er,or,Cr,Fr,ni,Qr=1;do{for(qn=In,In=null,or=null,Cr=0;qn;){for(Cr++,Kn=qn,Fr=0,Gn=0;Gn<Qr&&(Fr++,Kn=Kn.nextZ);Gn++);for(ni=Qr;Fr>0||ni>0&&Kn;)0!==Fr&&(0===ni||!Kn||qn.z<=Kn.z)?(er=qn,qn=qn.nextZ,Fr--):(er=Kn,Kn=Kn.nextZ,ni--),or?or.nextZ=er:In=er,er.prevZ=or,or=er;qn=Kn}or.nextZ=null,Qr*=2}while(Cr>1)}(vn)}(C,ce,ye,Me);for(var Ye,ot,_t=C;C.prev!==C.next;)if(Ye=C.prev,ot=C.next,Me?tu(C,ce,ye,Me):Sm(C))z.push(Ye.i/J),z.push(C.i/J),z.push(ot.i/J),Hf(C),C=ot.next,_t=ot.next;else if((C=ot)===_t){Fe?1===Fe?Nh(C=wu(eu(C),z,J),z,J,ce,ye,Me,2):2===Fe&&m0(C,z,J,ce,ye,Me):Nh(eu(C),z,J,ce,ye,Me,1);break}}}function Sm(C){var z=C.prev,J=C,ce=C.next;if(es(z,J,ce)>=0)return!1;for(var ye=C.next.next;ye!==C.prev;){if(Uf(z.x,z.y,J.x,J.y,ce.x,ce.y,ye.x,ye.y)&&es(ye.prev,ye,ye.next)>=0)return!1;ye=ye.next}return!0}function tu(C,z,J,ce){var ye=C.prev,Me=C,Fe=C.next;if(es(ye,Me,Fe)>=0)return!1;for(var _t=ye.x>Me.x?ye.x>Fe.x?ye.x:Fe.x:Me.x>Fe.x?Me.x:Fe.x,Et=ye.y>Me.y?ye.y>Fe.y?ye.y:Fe.y:Me.y>Fe.y?Me.y:Fe.y,Xt=Nd(ye.x<Me.x?ye.x<Fe.x?ye.x:Fe.x:Me.x<Fe.x?Me.x:Fe.x,ye.y<Me.y?ye.y<Fe.y?ye.y:Fe.y:Me.y<Fe.y?Me.y:Fe.y,z,J,ce),ln=Nd(_t,Et,z,J,ce),tn=C.prevZ,vn=C.nextZ;tn&&tn.z>=Xt&&vn&&vn.z<=ln;){if(tn!==C.prev&&tn!==C.next&&Uf(ye.x,ye.y,Me.x,Me.y,Fe.x,Fe.y,tn.x,tn.y)&&es(tn.prev,tn,tn.next)>=0||(tn=tn.prevZ,vn!==C.prev&&vn!==C.next&&Uf(ye.x,ye.y,Me.x,Me.y,Fe.x,Fe.y,vn.x,vn.y)&&es(vn.prev,vn,vn.next)>=0))return!1;vn=vn.nextZ}for(;tn&&tn.z>=Xt;){if(tn!==C.prev&&tn!==C.next&&Uf(ye.x,ye.y,Me.x,Me.y,Fe.x,Fe.y,tn.x,tn.y)&&es(tn.prev,tn,tn.next)>=0)return!1;tn=tn.prevZ}for(;vn&&vn.z<=ln;){if(vn!==C.prev&&vn!==C.next&&Uf(ye.x,ye.y,Me.x,Me.y,Fe.x,Fe.y,vn.x,vn.y)&&es(vn.prev,vn,vn.next)>=0)return!1;vn=vn.nextZ}return!0}function wu(C,z,J){var ce=C;do{var ye=ce.prev,Me=ce.next.next;!vl(ye,Me)&&jh(ye,ce,ce.next,Me)&&sf(ye,Me)&&sf(Me,ye)&&(z.push(ye.i/J),z.push(ce.i/J),z.push(Me.i/J),Hf(ce),Hf(ce.next),ce=C=Me),ce=ce.next}while(ce!==C);return eu(ce)}function m0(C,z,J,ce,ye,Me){var Fe=C;do{for(var Ye=Fe.next.next;Ye!==Fe.prev;){if(Fe.i!==Ye.i&&ox(Fe,Ye)){var ot=y0(Fe,Ye);return Fe=eu(Fe,Fe.next),ot=eu(ot,ot.next),Nh(Fe,z,J,ce,ye,Me),void Nh(ot,z,J,ce,ye,Me)}Ye=Ye.next}Fe=Fe.next}while(Fe!==C)}function Bh(C,z){return C.x-z.x}function Vf(C,z){if(z=function(ce,ye){var Me,Fe=ye,Ye=ce.x,ot=ce.y,_t=-1/0;do{if(ot<=Fe.y&&ot>=Fe.next.y&&Fe.next.y!==Fe.y){var Et=Fe.x+(ot-Fe.y)*(Fe.next.x-Fe.x)/(Fe.next.y-Fe.y);if(Et<=Ye&&Et>_t){if(_t=Et,Et===Ye){if(ot===Fe.y)return Fe;if(ot===Fe.next.y)return Fe.next}Me=Fe.x<Fe.next.x?Fe:Fe.next}}Fe=Fe.next}while(Fe!==ye);if(!Me)return null;if(Ye===_t)return Me;var Xt,ln=Me,tn=Me.x,vn=Me.y,In=1/0;Fe=Me;do{Ye>=Fe.x&&Fe.x>=tn&&Ye!==Fe.x&&Uf(ot<vn?Ye:_t,ot,tn,vn,ot<vn?_t:Ye,ot,Fe.x,Fe.y)&&(Xt=Math.abs(ot-Fe.y)/(Ye-Fe.x),sf(Fe,ce)&&(Xt<In||Xt===In&&(Fe.x>Me.x||Fe.x===Me.x&&v0(Me,Fe)))&&(Me=Fe,In=Xt)),Fe=Fe.next}while(Fe!==ln);return Me}(C,z)){var J=y0(z,C);eu(z,z.next),eu(J,J.next)}}function v0(C,z){return es(C.prev,C,z.prev)<0&&es(z.next,C,C.next)<0}function Nd(C,z,J,ce,ye){return(C=1431655765&((C=858993459&((C=252645135&((C=16711935&((C=32767*(C-J)*ye)|C<<8))|C<<4))|C<<2))|C<<1))|(z=1431655765&((z=858993459&((z=252645135&((z=16711935&((z=32767*(z-ce)*ye)|z<<8))|z<<4))|z<<2))|z<<1))<<1}function Dm(C){var z=C,J=C;do{(z.x<J.x||z.x===J.x&&z.y<J.y)&&(J=z),z=z.next}while(z!==C);return J}function Uf(C,z,J,ce,ye,Me,Fe,Ye){return(ye-Fe)*(z-Ye)-(C-Fe)*(Me-Ye)>=0&&(C-Fe)*(ce-Ye)-(J-Fe)*(z-Ye)>=0&&(J-Fe)*(Me-Ye)-(ye-Fe)*(ce-Ye)>=0}function ox(C,z){return C.next.i!==z.i&&C.prev.i!==z.i&&!function(J,ce){var ye=J;do{if(ye.i!==J.i&&ye.next.i!==J.i&&ye.i!==ce.i&&ye.next.i!==ce.i&&jh(ye,ye.next,J,ce))return!0;ye=ye.next}while(ye!==J);return!1}(C,z)&&(sf(C,z)&&sf(z,C)&&function(J,ce){var ye=J,Me=!1,Fe=(J.x+ce.x)/2,Ye=(J.y+ce.y)/2;do{ye.y>Ye!=ye.next.y>Ye&&ye.next.y!==ye.y&&Fe<(ye.next.x-ye.x)*(Ye-ye.y)/(ye.next.y-ye.y)+ye.x&&(Me=!Me),ye=ye.next}while(ye!==J);return Me}(C,z)&&(es(C.prev,C,z.prev)||es(C,z.prev,z))||vl(C,z)&&es(C.prev,C,C.next)>0&&es(z.prev,z,z.next)>0)}function es(C,z,J){return(z.y-C.y)*(J.x-z.x)-(z.x-C.x)*(J.y-z.y)}function vl(C,z){return C.x===z.x&&C.y===z.y}function jh(C,z,J,ce){var ye=Bd(es(C,z,J)),Me=Bd(es(C,z,ce)),Fe=Bd(es(J,ce,C)),Ye=Bd(es(J,ce,z));return ye!==Me&&Fe!==Ye||!(0!==ye||!ju(C,J,z))||!(0!==Me||!ju(C,ce,z))||!(0!==Fe||!ju(J,C,ce))||!(0!==Ye||!ju(J,z,ce))}function ju(C,z,J){return z.x<=Math.max(C.x,J.x)&&z.x>=Math.min(C.x,J.x)&&z.y<=Math.max(C.y,J.y)&&z.y>=Math.min(C.y,J.y)}function Bd(C){return C>0?1:C<0?-1:0}function sf(C,z){return es(C.prev,C,C.next)<0?es(C,z,C.next)>=0&&es(C,C.prev,z)>=0:es(C,z,C.prev)<0||es(C,C.next,z)<0}function y0(C,z){var J=new jd(C.i,C.x,C.y),ce=new jd(z.i,z.x,z.y),ye=C.next,Me=z.prev;return C.next=z,z.prev=C,J.next=ye,ye.prev=J,ce.next=J,J.prev=ce,Me.next=ce,ce.prev=Me,ce}function x0(C,z,J,ce){var ye=new jd(C,z,J);return ce?(ye.next=ce.next,ye.prev=ce,ce.next.prev=ye,ce.next=ye):(ye.prev=ye,ye.next=ye),ye}function Hf(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function jd(C,z,J){this.i=C,this.x=z,this.y=J,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vd(C,z,J,ce){for(var ye=0,Me=z,Fe=J-ce;Me<J;Me+=ce)ye+=(C[Fe]-C[Me])*(C[Me+1]+C[Fe+1]),Fe=Me;return ye}function b0(C,z,J,ce,ye){!function Me(Fe,Ye,ot,_t,Et){for(;_t>ot;){if(_t-ot>600){var Xt=_t-ot+1,ln=Ye-ot+1,tn=Math.log(Xt),vn=.5*Math.exp(2*tn/3),In=.5*Math.sqrt(tn*vn*(Xt-vn)/Xt)*(ln-Xt/2<0?-1:1);Me(Fe,Ye,Math.max(ot,Math.floor(Ye-ln*vn/Xt+In)),Math.min(_t,Math.floor(Ye+(Xt-ln)*vn/Xt+In)),Et)}var Kn=Fe[Ye],er=ot,or=_t;for(kc(Fe,ot,Ye),Et(Fe[_t],Kn)>0&&kc(Fe,ot,_t);er<or;){for(kc(Fe,er,or),er++,or--;Et(Fe[er],Kn)<0;)er++;for(;Et(Fe[or],Kn)>0;)or--}0===Et(Fe[ot],Kn)?kc(Fe,ot,or):kc(Fe,++or,_t),or<=Ye&&(ot=or+1),Ye<=or&&(_t=or-1)}}(C,z,J||0,ce||C.length-1,ye||Vh)}function kc(C,z,J){var ce=C[z];C[z]=C[J],C[J]=ce}function Vh(C,z){return C<z?-1:C>z?1:0}function _0(C,z){var J=C.length;if(J<=1)return[C];for(var ce,ye,Me=[],Fe=0;Fe<J;Fe++){var Ye=R(C[Fe]);0!==Ye&&(C[Fe].area=Math.abs(Ye),void 0===ye&&(ye=Ye<0),ye===Ye<0?(ce&&Me.push(ce),ce=[C[Fe]]):ce.push(C[Fe]))}if(ce&&Me.push(ce),z>1)for(var ot=0;ot<Me.length;ot++)Me[ot].length<=z||(b0(Me[ot],z,1,Me[ot].length-1,qf),Me[ot]=Me[ot].slice(0,z));return Me}function qf(C,z){return z.area-C.area}function Gf(C,z,J){for(var ce=J.patternDependencies,ye=!1,Me=0,Fe=z;Me<Fe.length;Me+=1){var Ye=Fe[Me].paint.get(C+"-pattern");Ye.isConstant()||(ye=!0);var ot=Ye.constantOr(null);ot&&(ye=!0,ce[ot.to]=!0,ce[ot.from]=!0)}return ye}function lf(C,z,J,ce,ye){for(var Me=ye.patternDependencies,Fe=0,Ye=z;Fe<Ye.length;Fe+=1){var ot=Ye[Fe],_t=ot.paint.get(C+"-pattern").value;if("constant"!==_t.kind){var Et=_t.evaluate({zoom:ce-1},J,{},ye.availableImages),Xt=_t.evaluate({zoom:ce},J,{},ye.availableImages),ln=_t.evaluate({zoom:ce+1},J,{},ye.availableImages);Xt=Xt&&Xt.name?Xt.name:Xt,ln=ln&&ln.name?ln.name:ln,Me[Et=Et&&Et.name?Et.name:Et]=!0,Me[Xt]=!0,Me[ln]=!0,J.patterns[ot.id]={min:Et,mid:Xt,max:ln}}}return J}bs.deviation=function(C,z,J,ce){var ye=z&&z.length,Fe=Math.abs(Vd(C,0,ye?z[0]*J:C.length,J));if(ye)for(var Ye=0,ot=z.length;Ye<ot;Ye++)Fe-=Math.abs(Vd(C,z[Ye]*J,Ye<ot-1?z[Ye+1]*J:C.length,J));var Xt=0;for(Ye=0;Ye<ce.length;Ye+=3){var ln=ce[Ye]*J,tn=ce[Ye+1]*J,vn=ce[Ye+2]*J;Xt+=Math.abs((C[ln]-C[vn])*(C[tn+1]-C[ln+1])-(C[ln]-C[tn])*(C[vn+1]-C[ln+1]))}return 0===Fe&&0===Xt?0:Math.abs((Xt-Fe)/Fe)},bs.flatten=function(C){for(var z=C[0][0].length,J={vertices:[],holes:[],dimensions:z},ce=0,ye=0;ye<C.length;ye++){for(var Me=0;Me<C[ye].length;Me++)for(var Fe=0;Fe<z;Fe++)J.vertices.push(C[ye][Me][Fe]);ye>0&&J.holes.push(ce+=C[ye-1].length)}return J},Ac.default=ax;var hu=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ls,this.indexArray=new us,this.indexArray2=new U,this.programConfigurations=new Wa(Cm,C.layers,C.zoom),this.segments=new Zt,this.segments2=new Zt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};hu.prototype.populate=function(C,z,J){this.hasPattern=Gf("fill",this.layers,z);for(var ce=this.layers[0].layout.get("fill-sort-key"),ye=[],Me=0,Fe=C;Me<Fe.length;Me+=1){var Ye=Fe[Me],ot=Ye.feature,_t=Ye.id,Et=Ye.index,Xt=Ye.sourceLayerIndex,ln=this.layers[0]._featureFilter.needGeometry,tn={type:ot.type,id:_t,properties:ot.properties,geometry:ln?Mo(ot):[]};if(this.layers[0]._featureFilter.filter(new da(this.zoom),tn,J)){ln||(tn.geometry=Mo(ot));var vn=ce?ce.evaluate(tn,{},J,z.availableImages):void 0;ye.push({id:_t,properties:ot.properties,type:ot.type,sourceLayerIndex:Xt,index:Et,geometry:tn.geometry,patterns:{},sortKey:vn})}}ce&&ye.sort(function(di,ki){return di.sortKey-ki.sortKey});for(var Gn=0,qn=ye;Gn<qn.length;Gn+=1){var Kn=qn[Gn],or=Kn.geometry,Cr=Kn.index,Fr=Kn.sourceLayerIndex;if(this.hasPattern){var ni=lf("fill",this.layers,Kn,this.zoom,z);this.patternFeatures.push(ni)}else this.addFeature(Kn,or,Cr,J,{});z.featureIndex.insert(C[Cr].feature,or,Cr,Fr,this.index)}},hu.prototype.update=function(C,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(C,z,this.stateDependentLayers,J)},hu.prototype.addFeatures=function(C,z,J){for(var ce=0,ye=this.patternFeatures;ce<ye.length;ce+=1){var Me=ye[ce];this.addFeature(Me,Me.geometry,Me.index,z,J)}},hu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},hu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hu.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Cm),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},hu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},hu.prototype.addFeature=function(C,z,J,ce,ye){for(var Me=0,Fe=_0(z,500);Me<Fe.length;Me+=1){for(var Ye=Fe[Me],ot=0,_t=0,Et=Ye;_t<Et.length;_t+=1)ot+=Et[_t].length;for(var Xt=this.segments.prepareSegment(ot,this.layoutVertexArray,this.indexArray),ln=Xt.vertexLength,tn=[],vn=[],In=0,Gn=Ye;In<Gn.length;In+=1){var qn=Gn[In];if(0!==qn.length){qn!==Ye[0]&&vn.push(tn.length/2);var Kn=this.segments2.prepareSegment(qn.length,this.layoutVertexArray,this.indexArray2),er=Kn.vertexLength;this.layoutVertexArray.emplaceBack(qn[0].x,qn[0].y),this.indexArray2.emplaceBack(er+qn.length-1,er),tn.push(qn[0].x),tn.push(qn[0].y);for(var or=1;or<qn.length;or++)this.layoutVertexArray.emplaceBack(qn[or].x,qn[or].y),this.indexArray2.emplaceBack(er+or-1,er+or),tn.push(qn[or].x),tn.push(qn[or].y);Kn.vertexLength+=qn.length,Kn.primitiveLength+=qn.length}}for(var Cr=Ac(tn,vn),Fr=0;Fr<Cr.length;Fr+=3)this.indexArray.emplaceBack(ln+Cr[Fr],ln+Cr[Fr+1],ln+Cr[Fr+2]);Xt.vertexLength+=ot,Xt.primitiveLength+=Cr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,J,ye,ce)},dr("FillBucket",hu,{omit:["layers","patternFeatures"]});var Im=new Bs({"fill-sort-key":new Yi(Ne.layout_fill["fill-sort-key"])}),Lm={paint:new Bs({"fill-antialias":new Di(Ne.paint_fill["fill-antialias"]),"fill-opacity":new Yi(Ne.paint_fill["fill-opacity"]),"fill-color":new Yi(Ne.paint_fill["fill-color"]),"fill-outline-color":new Yi(Ne.paint_fill["fill-outline-color"]),"fill-translate":new Di(Ne.paint_fill["fill-translate"]),"fill-translate-anchor":new Di(Ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new xu(Ne.paint_fill["fill-pattern"])}),layout:Im},w0=function(C){function z(J){C.call(this,J,Lm)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.recalculate=function(J,ce){C.prototype.recalculate.call(this,J,ce);var ye=this.paint._values["fill-outline-color"];"constant"===ye.value.kind&&void 0===ye.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},z.prototype.createBucket=function(J){return new hu(J)},z.prototype.queryRadius=function(){return Vs(this.paint.get("fill-translate"))},z.prototype.queryIntersectsFeature=function(J,ce,ye,Me,Fe,Ye,ot){return Rl(Us(J,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ye.angle,ot),Me)},z.prototype.isTileClipped=function(){return!0},z}(Zr),T0=Ha([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,uf=Ec;function Ec(C,z,J,ce,ye){this.properties={},this.extent=J,this.type=0,this._pbf=C,this._geometry=-1,this._keys=ce,this._values=ye,C.readFields(Pm,this,z)}function Pm(C,z,J){1==C?z.id=J.readVarint():2==C?function(ce,ye){for(var Me=ce.readVarint()+ce.pos;ce.pos<Me;){var Fe=ye._keys[ce.readVarint()],Ye=ye._values[ce.readVarint()];ye.properties[Fe]=Ye}}(J,z):3==C?z.type=J.readVarint():4==C&&(z._geometry=J.pos)}function Ki(C){for(var z,J,ce=0,ye=0,Me=C.length,Fe=Me-1;ye<Me;Fe=ye++)ce+=((J=C[Fe]).x-(z=C[ye]).x)*(z.y+J.y);return ce}Ec.types=["Unknown","Point","LineString","Polygon"],Ec.prototype.loadGeometry=function(){var C=this._pbf;C.pos=this._geometry;for(var z,J=C.readVarint()+C.pos,ce=1,ye=0,Me=0,Fe=0,Ye=[];C.pos<J;){if(ye<=0){var ot=C.readVarint();ce=7&ot,ye=ot>>3}if(ye--,1===ce||2===ce)Me+=C.readSVarint(),Fe+=C.readSVarint(),1===ce&&(z&&Ye.push(z),z=[]),z.push(new n(Me,Fe));else{if(7!==ce)throw new Error("unknown command "+ce);z&&z.push(z[0].clone())}}return z&&Ye.push(z),Ye},Ec.prototype.bbox=function(){var C=this._pbf;C.pos=this._geometry;for(var z=C.readVarint()+C.pos,J=1,ce=0,ye=0,Me=0,Fe=1/0,Ye=-1/0,ot=1/0,_t=-1/0;C.pos<z;){if(ce<=0){var Et=C.readVarint();J=7&Et,ce=Et>>3}if(ce--,1===J||2===J)(ye+=C.readSVarint())<Fe&&(Fe=ye),ye>Ye&&(Ye=ye),(Me+=C.readSVarint())<ot&&(ot=Me),Me>_t&&(_t=Me);else if(7!==J)throw new Error("unknown command "+J)}return[Fe,ot,Ye,_t]},Ec.prototype.toGeoJSON=function(C,z,J){var ce,ye,Me=this.extent*Math.pow(2,J),Fe=this.extent*C,Ye=this.extent*z,ot=this.loadGeometry(),_t=Ec.types[this.type];function Et(tn){for(var vn=0;vn<tn.length;vn++){var In=tn[vn];tn[vn]=[360*(In.x+Fe)/Me-180,360/Math.PI*Math.atan(Math.exp((180-360*(In.y+Ye)/Me)*Math.PI/180))-90]}}switch(this.type){case 1:var Xt=[];for(ce=0;ce<ot.length;ce++)Xt[ce]=ot[ce][0];Et(ot=Xt);break;case 2:for(ce=0;ce<ot.length;ce++)Et(ot[ce]);break;case 3:for(ot=function(tn){var vn=tn.length;if(vn<=1)return[tn];for(var In,Gn,qn=[],Kn=0;Kn<vn;Kn++){var er=Ki(tn[Kn]);0!==er&&(void 0===Gn&&(Gn=er<0),Gn===er<0?(In&&qn.push(In),In=[tn[Kn]]):In.push(tn[Kn]))}return In&&qn.push(In),qn}(ot),ce=0;ce<ot.length;ce++)for(ye=0;ye<ot[ce].length;ye++)Et(ot[ce][ye])}1===ot.length?ot=ot[0]:_t="Multi"+_t;var ln={type:"Feature",geometry:{type:_t,coordinates:ot},properties:this.properties};return"id"in this&&(ln.id=this.id),ln};var Ud=Om;function Om(C,z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=C,this._keys=[],this._values=[],this._features=[],C.readFields(Hd,this,z),this.length=this._features.length}function Hd(C,z,J){15===C?z.version=J.readVarint():1===C?z.name=J.readString():5===C?z.extent=J.readVarint():2===C?z._features.push(J.pos):3===C?z._keys.push(J.readString()):4===C&&z._values.push(function(ce){for(var ye=null,Me=ce.readVarint()+ce.pos;ce.pos<Me;){var Fe=ce.readVarint()>>3;ye=1===Fe?ce.readString():2===Fe?ce.readFloat():3===Fe?ce.readDouble():4===Fe?ce.readVarint64():5===Fe?ce.readVarint():6===Fe?ce.readSVarint():7===Fe?ce.readBoolean():null}return ye}(J))}function Wf(C,z,J){if(3===C){var ce=new Ud(J,J.readVarint()+J.pos);ce.length&&(z[ce.name]=ce)}}Om.prototype.feature=function(C){if(C<0||C>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[C];var z=this._pbf.readVarint()+this._pbf.pos;return new uf(this._pbf,z,this.extent,this._keys,this._values)};var cf={VectorTile:function(C,z){this.layers=C.readFields(Wf,{},z)},VectorTileFeature:uf,VectorTileLayer:Ud},Rm=cf.VectorTileFeature.types,qd=Math.pow(2,13);function Vu(C,z,J,ce,ye,Me,Fe,Ye){C.emplaceBack(z,J,2*Math.floor(ce*qd)+Fe,ye*qd*2,Me*qd*2,Math.round(Ye))}var Os=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new Al,this.indexArray=new us,this.programConfigurations=new Wa(T0,C.layers,C.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function M0(C,z){return C.x===z.x&&(C.x<0||C.x>8192)||C.y===z.y&&(C.y<0||C.y>8192)}function ff(C){return C.every(function(z){return z.x<0})||C.every(function(z){return z.x>8192})||C.every(function(z){return z.y<0})||C.every(function(z){return z.y>8192})}Os.prototype.populate=function(C,z,J){this.features=[],this.hasPattern=Gf("fill-extrusion",this.layers,z);for(var ce=0,ye=C;ce<ye.length;ce+=1){var Me=ye[ce],Fe=Me.feature,Ye=Me.id,ot=Me.index,_t=Me.sourceLayerIndex,Et=this.layers[0]._featureFilter.needGeometry,Xt={type:Fe.type,id:Ye,properties:Fe.properties,geometry:Et?Mo(Fe):[]};if(this.layers[0]._featureFilter.filter(new da(this.zoom),Xt,J)){var ln={id:Ye,sourceLayerIndex:_t,index:ot,geometry:Et?Xt.geometry:Mo(Fe),properties:Fe.properties,type:Fe.type,patterns:{}};void 0!==Fe.id&&(ln.id=Fe.id),this.hasPattern?this.features.push(lf("fill-extrusion",this.layers,ln,this.zoom,z)):this.addFeature(ln,ln.geometry,ot,J,{}),z.featureIndex.insert(Fe,ln.geometry,ot,_t,this.index,!0)}}},Os.prototype.addFeatures=function(C,z,J){for(var ce=0,ye=this.features;ce<ye.length;ce+=1){var Me=ye[ce];this.addFeature(Me,Me.geometry,Me.index,z,J)}},Os.prototype.update=function(C,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(C,z,this.stateDependentLayers,J)},Os.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Os.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Os.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,T0),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Os.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Os.prototype.addFeature=function(C,z,J,ce,ye){for(var Me=0,Fe=_0(z,500);Me<Fe.length;Me+=1){for(var Ye=Fe[Me],ot=0,_t=0,Et=Ye;_t<Et.length;_t+=1)ot+=Et[_t].length;for(var Xt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),ln=0,tn=Ye;ln<tn.length;ln+=1){var vn=tn[ln];if(0!==vn.length&&!ff(vn))for(var In=0,Gn=0;Gn<vn.length;Gn++){var qn=vn[Gn];if(Gn>=1){var Kn=vn[Gn-1];if(!M0(qn,Kn)){Xt.vertexLength+4>Zt.MAX_VERTEX_ARRAY_LENGTH&&(Xt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var er=qn.sub(Kn)._perp()._unit(),or=Kn.dist(qn);In+or>32768&&(In=0),Vu(this.layoutVertexArray,qn.x,qn.y,er.x,er.y,0,0,In),Vu(this.layoutVertexArray,qn.x,qn.y,er.x,er.y,0,1,In),Vu(this.layoutVertexArray,Kn.x,Kn.y,er.x,er.y,0,0,In+=or),Vu(this.layoutVertexArray,Kn.x,Kn.y,er.x,er.y,0,1,In);var Cr=Xt.vertexLength;this.indexArray.emplaceBack(Cr,Cr+2,Cr+1),this.indexArray.emplaceBack(Cr+1,Cr+2,Cr+3),Xt.vertexLength+=4,Xt.primitiveLength+=2}}}}if(Xt.vertexLength+ot>Zt.MAX_VERTEX_ARRAY_LENGTH&&(Xt=this.segments.prepareSegment(ot,this.layoutVertexArray,this.indexArray)),"Polygon"===Rm[C.type]){for(var Fr=[],ni=[],Qr=Xt.vertexLength,di=0,ki=Ye;di<ki.length;di+=1){var Ei=ki[di];if(0!==Ei.length){Ei!==Ye[0]&&ni.push(Fr.length/2);for(var mi=0;mi<Ei.length;mi++){var Ri=Ei[mi];Vu(this.layoutVertexArray,Ri.x,Ri.y,0,0,1,1,0),Fr.push(Ri.x),Fr.push(Ri.y)}}}for(var Ii=Ac(Fr,ni),Mi=0;Mi<Ii.length;Mi+=3)this.indexArray.emplaceBack(Qr+Ii[Mi],Qr+Ii[Mi+2],Qr+Ii[Mi+1]);Xt.primitiveLength+=Ii.length/3,Xt.vertexLength+=ot}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,J,ye,ce)},dr("FillExtrusionBucket",Os,{omit:["layers","features"]});var Fm={paint:new Bs({"fill-extrusion-opacity":new Di(Ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yi(Ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Di(Ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Di(Ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xu(Ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yi(Ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yi(Ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Di(Ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},A0=function(C){function z(J){C.call(this,J,Fm)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.createBucket=function(J){return new Os(J)},z.prototype.queryRadius=function(){return Vs(this.paint.get("fill-extrusion-translate"))},z.prototype.is3D=function(){return!0},z.prototype.queryIntersectsFeature=function(J,ce,ye,Me,Fe,Ye,ot,_t){var Et=Us(J,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ye.angle,ot),Xt=this.paint.get("fill-extrusion-height").evaluate(ce,ye),ln=this.paint.get("fill-extrusion-base").evaluate(ce,ye),tn=function(In,Gn,qn,Kn){for(var er=[],or=0,Cr=In;or<Cr.length;or+=1){var Fr=Cr[or],ni=[Fr.x,Fr.y,0,1];Hl(ni,ni,Gn),er.push(new n(ni[0]/ni[3],ni[1]/ni[3]))}return er}(Et,_t),vn=function(In,Gn,qn,Kn){for(var er=[],or=[],Cr=Kn[8]*Gn,Fr=Kn[9]*Gn,ni=Kn[10]*Gn,Qr=Kn[11]*Gn,di=Kn[8]*qn,ki=Kn[9]*qn,Ei=Kn[10]*qn,mi=Kn[11]*qn,Ri=0,Ii=In;Ri<Ii.length;Ri+=1){for(var Ca=[],Sa=[],za=0,Zi=Ii[Ri];za<Zi.length;za+=1){var Da=Zi[za],Qa=Da.x,po=Da.y,ko=Kn[0]*Qa+Kn[4]*po+Kn[12],go=Kn[1]*Qa+Kn[5]*po+Kn[13],hs=Kn[2]*Qa+Kn[6]*po+Kn[14],Eo=Kn[3]*Qa+Kn[7]*po+Kn[15],Es=hs+ni,ws=Eo+Qr,qs=ko+di,Zs=go+ki,Xs=hs+Ei,ts=Eo+mi,Fs=new n((ko+Cr)/ws,(go+Fr)/ws);Fs.z=Es/ws,Ca.push(Fs);var ns=new n(qs/ts,Zs/ts);ns.z=Xs/ts,Sa.push(ns)}er.push(Ca),or.push(Sa)}return[er,or]}(Me,ln,Xt,_t);return function(In,Gn,qn){var Kn=1/0;Rl(qn,Gn)&&(Kn=Yf(qn,Gn[0]));for(var er=0;er<Gn.length;er++)for(var or=Gn[er],Cr=In[er],Fr=0;Fr<or.length-1;Fr++){var ni=or[Fr],Ei=[ni,or[Fr+1],Cr[Fr+1],Cr[Fr],ni];Ys(qn,Ei)&&(Kn=Math.min(Kn,Yf(qn,Ei)))}return Kn!==1/0&&Kn}(vn[0],vn[1],tn)},z}(Zr);function Cc(C,z){return C.x*z.x+C.y*z.y}function Yf(C,z){if(1===C.length){for(var J,ce=0,ye=z[ce++];!J||ye.equals(J);)if(!(J=z[ce++]))return 1/0;for(;ce<z.length;ce++){var Me=z[ce],Fe=C[0],Ye=J.sub(ye),ot=Me.sub(ye),_t=Fe.sub(ye),Et=Cc(Ye,Ye),Xt=Cc(Ye,ot),ln=Cc(ot,ot),tn=Cc(_t,Ye),vn=Cc(_t,ot),In=Et*ln-Xt*Xt,Gn=(ln*tn-Xt*vn)/In,qn=(Et*vn-Xt*tn)/In,er=ye.z*(1-Gn-qn)+J.z*Gn+Me.z*qn;if(isFinite(er))return er}return 1/0}for(var or=1/0,Cr=0,Fr=z;Cr<Fr.length;Cr+=1)or=Math.min(or,Fr[Cr].z);return or}var Gd=Ha([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,zm=cf.VectorTileFeature.types,Nm=Math.cos(Math.PI/180*37.5),Sc=Math.pow(2,14)/.5,Rs=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new bu,this.indexArray=new us,this.programConfigurations=new Wa(Gd,C.layers,C.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};Rs.prototype.populate=function(C,z,J){this.hasPattern=Gf("line",this.layers,z);for(var ce=this.layers[0].layout.get("line-sort-key"),ye=[],Me=0,Fe=C;Me<Fe.length;Me+=1){var Ye=Fe[Me],ot=Ye.feature,_t=Ye.id,Et=Ye.index,Xt=Ye.sourceLayerIndex,ln=this.layers[0]._featureFilter.needGeometry,tn={type:ot.type,id:_t,properties:ot.properties,geometry:ln?Mo(ot):[]};if(this.layers[0]._featureFilter.filter(new da(this.zoom),tn,J)){ln||(tn.geometry=Mo(ot));var vn=ce?ce.evaluate(tn,{},J):void 0;ye.push({id:_t,properties:ot.properties,type:ot.type,sourceLayerIndex:Xt,index:Et,geometry:tn.geometry,patterns:{},sortKey:vn})}}ce&&ye.sort(function(di,ki){return di.sortKey-ki.sortKey});for(var Gn=0,qn=ye;Gn<qn.length;Gn+=1){var Kn=qn[Gn],or=Kn.geometry,Cr=Kn.index,Fr=Kn.sourceLayerIndex;if(this.hasPattern){var ni=lf("line",this.layers,Kn,this.zoom,z);this.patternFeatures.push(ni)}else this.addFeature(Kn,or,Cr,J,{});z.featureIndex.insert(C[Cr].feature,or,Cr,Fr,this.index)}},Rs.prototype.update=function(C,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(C,z,this.stateDependentLayers,J)},Rs.prototype.addFeatures=function(C,z,J){for(var ce=0,ye=this.patternFeatures;ce<ye.length;ce+=1){var Me=ye[ce];this.addFeature(Me,Me.geometry,Me.index,z,J)}},Rs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Rs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Rs.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Gd),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Rs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Rs.prototype.addFeature=function(C,z,J,ce,ye){for(var Me=this.layers[0].layout,Fe=Me.get("line-join").evaluate(C,{}),Ye=Me.get("line-cap"),ot=Me.get("line-miter-limit"),_t=Me.get("line-round-limit"),Et=0,Xt=z;Et<Xt.length;Et+=1)this.addLine(Xt[Et],C,Fe,Ye,ot,_t);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,J,ye,ce)},Rs.prototype.addLine=function(C,z,J,ce,ye,Me){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,z.properties&&z.properties.hasOwnProperty("mapbox_clip_start")&&z.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+z.properties.mapbox_clip_start,this.clipEnd=+z.properties.mapbox_clip_end;for(var Fe=0;Fe<C.length-1;Fe++)this.totalDistance+=C[Fe].dist(C[Fe+1]);this.updateScaledDistance()}for(var Ye="Polygon"===zm[z.type],ot=C.length;ot>=2&&C[ot-1].equals(C[ot-2]);)ot--;for(var _t=0;_t<ot-1&&C[_t].equals(C[_t+1]);)_t++;if(!(ot<(Ye?3:2))){"bevel"===J&&(ye=1.05);var Et,Xt=this.overscaling<=16?122880/(512*this.overscaling):0,ln=this.segments.prepareSegment(10*ot,this.layoutVertexArray,this.indexArray),tn=void 0,vn=void 0,In=void 0,Gn=void 0;this.e1=this.e2=-1,Ye&&(Gn=C[_t].sub(Et=C[ot-2])._unit()._perp());for(var qn=_t;qn<ot;qn++)if(!(vn=qn===ot-1?Ye?C[_t+1]:void 0:C[qn+1])||!C[qn].equals(vn)){Gn&&(In=Gn),Et&&(tn=Et),Et=C[qn],Gn=vn?vn.sub(Et)._unit()._perp():In;var Kn=(In=In||Gn).add(Gn);0===Kn.x&&0===Kn.y||Kn._unit();var er=In.x*Gn.x+In.y*Gn.y,or=Kn.x*Gn.x+Kn.y*Gn.y,Cr=0!==or?1/or:1/0,Fr=2*Math.sqrt(2-2*or),ni=or<Nm&&tn&&vn,Qr=In.x*Gn.y-In.y*Gn.x>0;if(ni&&qn>_t){var di=Et.dist(tn);if(di>2*Xt){var ki=Et.sub(Et.sub(tn)._mult(Xt/di)._round());this.updateDistance(tn,ki),this.addCurrentVertex(ki,In,0,0,ln),tn=ki}}var Ei=tn&&vn,mi=Ei?J:Ye?"butt":ce;if(Ei&&"round"===mi&&(Cr<Me?mi="miter":Cr<=2&&(mi="fakeround")),"miter"===mi&&Cr>ye&&(mi="bevel"),"bevel"===mi&&(Cr>2&&(mi="flipbevel"),Cr<ye&&(mi="miter")),tn&&this.updateDistance(tn,Et),"miter"===mi)Kn._mult(Cr),this.addCurrentVertex(Et,Kn,0,0,ln);else if("flipbevel"===mi){if(Cr>100)Kn=Gn.mult(-1);else{var Ri=Cr*In.add(Gn).mag()/In.sub(Gn).mag();Kn._perp()._mult(Ri*(Qr?-1:1))}this.addCurrentVertex(Et,Kn,0,0,ln),this.addCurrentVertex(Et,Kn.mult(-1),0,0,ln)}else if("bevel"===mi||"fakeround"===mi){var Ii=-Math.sqrt(Cr*Cr-1),Mi=Qr?Ii:0,Ca=Qr?0:Ii;if(tn&&this.addCurrentVertex(Et,In,Mi,Ca,ln),"fakeround"===mi)for(var Sa=Math.round(180*Fr/Math.PI/20),za=1;za<Sa;za++){var Zi=za/Sa;if(.5!==Zi){var Da=Zi-.5;Zi+=Zi*Da*(Zi-1)*((1.0904+er*(er*(3.55645-1.43519*er)-3.2452))*Da*Da+(.848013+er*(.215638*er-1.06021)))}var Qa=Gn.sub(In)._mult(Zi)._add(In)._unit()._mult(Qr?-1:1);this.addHalfVertex(Et,Qa.x,Qa.y,!1,Qr,0,ln)}vn&&this.addCurrentVertex(Et,Gn,-Mi,-Ca,ln)}else if("butt"===mi)this.addCurrentVertex(Et,Kn,0,0,ln);else if("square"===mi){var po=tn?1:-1;this.addCurrentVertex(Et,Kn,po,po,ln)}else"round"===mi&&(tn&&(this.addCurrentVertex(Et,In,0,0,ln),this.addCurrentVertex(Et,In,1,1,ln,!0)),vn&&(this.addCurrentVertex(Et,Gn,-1,-1,ln,!0),this.addCurrentVertex(Et,Gn,0,0,ln)));if(ni&&qn<ot-1){var ko=Et.dist(vn);if(ko>2*Xt){var go=Et.add(vn.sub(Et)._mult(Xt/ko)._round());this.updateDistance(Et,go),this.addCurrentVertex(go,Gn,0,0,ln),Et=go}}}}},Rs.prototype.addCurrentVertex=function(C,z,J,ce,ye,Me){void 0===Me&&(Me=!1);var ot=z.y*ce-z.x,_t=-z.y-z.x*ce;this.addHalfVertex(C,z.x+z.y*J,z.y-z.x*J,Me,!1,J,ye),this.addHalfVertex(C,ot,_t,Me,!0,-ce,ye),this.distance>Sc/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(C,z,J,ce,ye,Me))},Rs.prototype.addHalfVertex=function(C,z,J,ce,ye,Me,Fe){var _t=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((C.x<<1)+(ce?1:0),(C.y<<1)+(ye?1:0),Math.round(63*z)+128,Math.round(63*J)+128,1+(0===Me?0:Me<0?-1:1)|(63&_t)<<2,_t>>6);var Et=Fe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Et),Fe.primitiveLength++),ye?this.e2=Et:this.e1=Et},Rs.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Sc-1):this.distance},Rs.prototype.updateDistance=function(C,z){this.distance+=C.dist(z),this.updateScaledDistance()},dr("LineBucket",Rs,{omit:["layers","patternFeatures"]});var Bm=new Bs({"line-cap":new Di(Ne.layout_line["line-cap"]),"line-join":new Yi(Ne.layout_line["line-join"]),"line-miter-limit":new Di(Ne.layout_line["line-miter-limit"]),"line-round-limit":new Di(Ne.layout_line["line-round-limit"]),"line-sort-key":new Yi(Ne.layout_line["line-sort-key"])}),jm={paint:new Bs({"line-opacity":new Yi(Ne.paint_line["line-opacity"]),"line-color":new Yi(Ne.paint_line["line-color"]),"line-translate":new Di(Ne.paint_line["line-translate"]),"line-translate-anchor":new Di(Ne.paint_line["line-translate-anchor"]),"line-width":new Yi(Ne.paint_line["line-width"]),"line-gap-width":new Yi(Ne.paint_line["line-gap-width"]),"line-offset":new Yi(Ne.paint_line["line-offset"]),"line-blur":new Yi(Ne.paint_line["line-blur"]),"line-dasharray":new cu(Ne.paint_line["line-dasharray"]),"line-pattern":new xu(Ne.paint_line["line-pattern"]),"line-gradient":new Ml(Ne.paint_line["line-gradient"])}),layout:Bm},Wd=new(function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.possiblyEvaluate=function(J,ce){return ce=new da(Math.floor(ce.zoom),{now:ce.now,fadeDuration:ce.fadeDuration,zoomHistory:ce.zoomHistory,transition:ce.transition}),C.prototype.possiblyEvaluate.call(this,J,ce)},z.prototype.evaluate=function(J,ce,ye,Me){return ce=p({},ce,{zoom:Math.floor(ce.zoom)}),C.prototype.evaluate.call(this,J,ce,ye,Me)},z}(Yi))(jm.paint.properties["line-width"].specification);Wd.useIntegerZoom=!0;var Vm=function(C){function z(J){C.call(this,J,jm)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._handleSpecialPaintPropertyUpdate=function(J){"line-gradient"===J&&this._updateGradient()},z.prototype._updateGradient=function(){this.gradient=Em(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},z.prototype.recalculate=function(J,ce){C.prototype.recalculate.call(this,J,ce),this.paint._values["line-floorwidth"]=Wd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,J)},z.prototype.createBucket=function(J){return new Rs(J)},z.prototype.queryRadius=function(J){var ce=J,ye=Um(Ao("line-width",this,ce),Ao("line-gap-width",this,ce)),Me=Ao("line-offset",this,ce);return ye/2+Math.abs(Me)+Vs(this.paint.get("line-translate"))},z.prototype.queryIntersectsFeature=function(J,ce,ye,Me,Fe,Ye,ot){var _t=Us(J,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ye.angle,ot),Et=ot/2*Um(this.paint.get("line-width").evaluate(ce,ye),this.paint.get("line-gap-width").evaluate(ce,ye)),Xt=this.paint.get("line-offset").evaluate(ce,ye);return Xt&&(Me=function(ln,tn){for(var vn=[],In=new n(0,0),Gn=0;Gn<ln.length;Gn++){for(var qn=ln[Gn],Kn=[],er=0;er<qn.length;er++){var Cr=qn[er],Fr=qn[er+1],ni=0===er?In:Cr.sub(qn[er-1])._unit()._perp(),Qr=er===qn.length-1?In:Fr.sub(Cr)._unit()._perp(),di=ni._add(Qr)._unit();di._mult(1/(di.x*Qr.x+di.y*Qr.y)),Kn.push(di._mult(tn)._add(Cr))}vn.push(Kn)}return vn}(Me,Xt*ot)),function(ln,tn,vn){for(var In=0;In<tn.length;In++){var Gn=tn[In];if(ln.length>=3)for(var qn=0;qn<Gn.length;qn++)if(dl(ln,Gn[qn]))return!0;if(zu(ln,Gn,vn))return!0}return!1}(_t,Me,Et)},z.prototype.isTileClipped=function(){return!0},z}(Zr);function Um(C,z){return z>0?z+2*C:C}var Yd=Ha([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hm=Ha([{name:"a_projected_pos",components:3,type:"Float32"}],4),qm=(Ha([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ha([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Zf=(Ha([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ha([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Zd=Ha([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hf(C,z,J){return C.sections.forEach(function(ce){var ye,Fe,Ye;ce.text=(ye=ce.text,Fe=J,"uppercase"===(Ye=z.layout.get("text-transform").evaluate(Fe,{}))?ye=ye.toLocaleUpperCase():"lowercase"===Ye&&(ye=ye.toLocaleLowerCase()),Fo.applyArabicShaping&&(ye=Fo.applyArabicShaping(ye)),ye)}),C}Ha([{name:"triangle",components:3,type:"Uint16"}]),Ha([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ha([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ha([{type:"Float32",name:"offsetX"}]),Ha([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Xf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},k0=function(C,z,J,ce,ye){var Me,Fe,Ye=8*ye-ce-1,ot=(1<<Ye)-1,_t=ot>>1,Et=-7,Xt=J?ye-1:0,ln=J?-1:1,tn=C[z+Xt];for(Xt+=ln,Me=tn&(1<<-Et)-1,tn>>=-Et,Et+=Ye;Et>0;Me=256*Me+C[z+Xt],Xt+=ln,Et-=8);for(Fe=Me&(1<<-Et)-1,Me>>=-Et,Et+=ce;Et>0;Fe=256*Fe+C[z+Xt],Xt+=ln,Et-=8);if(0===Me)Me=1-_t;else{if(Me===ot)return Fe?NaN:1/0*(tn?-1:1);Fe+=Math.pow(2,ce),Me-=_t}return(tn?-1:1)*Fe*Math.pow(2,Me-ce)},Gm=function(C,z,J,ce,ye,Me){var Fe,Ye,ot,_t=8*Me-ye-1,Et=(1<<_t)-1,Xt=Et>>1,ln=23===ye?Math.pow(2,-24)-Math.pow(2,-77):0,tn=ce?0:Me-1,vn=ce?1:-1,In=z<0||0===z&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(Ye=isNaN(z)?1:0,Fe=Et):(Fe=Math.floor(Math.log(z)/Math.LN2),z*(ot=Math.pow(2,-Fe))<1&&(Fe--,ot*=2),(z+=Fe+Xt>=1?ln/ot:ln*Math.pow(2,1-Xt))*ot>=2&&(Fe++,ot/=2),Fe+Xt>=Et?(Ye=0,Fe=Et):Fe+Xt>=1?(Ye=(z*ot-1)*Math.pow(2,ye),Fe+=Xt):(Ye=z*Math.pow(2,Xt-1)*Math.pow(2,ye),Fe=0));ye>=8;C[J+tn]=255&Ye,tn+=vn,Ye/=256,ye-=8);for(Fe=Fe<<ye|Ye,_t+=ye;_t>0;C[J+tn]=255&Fe,tn+=vn,Fe/=256,_t-=8);C[J+tn-vn]|=128*In},Dc=oo;function oo(C){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(C)?C:new Uint8Array(C||0),this.pos=0,this.type=0,this.length=this.buf.length}oo.Varint=0,oo.Fixed64=1,oo.Bytes=2,oo.Fixed32=5;var Xd="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Tu(C){return C.type===oo.Bytes?C.readVarint()+C.pos:C.pos+1}function $d(C,z,J){var ce=z<=16383?1:z<=2097151?2:z<=268435455?3:Math.floor(Math.log(z)/(7*Math.LN2));J.realloc(ce);for(var ye=J.pos-1;ye>=C;ye--)J.buf[ye+ce]=J.buf[ye]}function Wm(C,z){for(var J=0;J<C.length;J++)z.writeVarint(C[J])}function Ym(C,z){for(var J=0;J<C.length;J++)z.writeSVarint(C[J])}function Zm(C,z){for(var J=0;J<C.length;J++)z.writeFloat(C[J])}function Xm(C,z){for(var J=0;J<C.length;J++)z.writeDouble(C[J])}function $m(C,z){for(var J=0;J<C.length;J++)z.writeBoolean(C[J])}function uc(C,z){for(var J=0;J<C.length;J++)z.writeFixed32(C[J])}function $f(C,z){for(var J=0;J<C.length;J++)z.writeSFixed32(C[J])}function Jm(C,z){for(var J=0;J<C.length;J++)z.writeFixed64(C[J])}function sx(C,z){for(var J=0;J<C.length;J++)z.writeSFixed64(C[J])}function Jd(C,z){return(C[z]|C[z+1]<<8|C[z+2]<<16)+16777216*C[z+3]}function Jf(C,z,J){C[J]=z,C[J+1]=z>>>8,C[J+2]=z>>>16,C[J+3]=z>>>24}function Km(C,z){return(C[z]|C[z+1]<<8|C[z+2]<<16)+(C[z+3]<<24)}function lx(C,z,J){1===C&&J.readMessage(E0,z)}function E0(C,z,J){if(3===C){var ce=J.readMessage(Qm,{}),Fe=ce.width,Ye=ce.height,ot=ce.left,_t=ce.top,Et=ce.advance;z.push({id:ce.id,bitmap:new xa({width:Fe+6,height:Ye+6},ce.bitmap),metrics:{width:Fe,height:Ye,left:ot,top:_t,advance:Et}})}}function Qm(C,z,J){1===C?z.id=J.readVarint():2===C?z.bitmap=J.readBytes():3===C?z.width=J.readVarint():4===C?z.height=J.readVarint():5===C?z.left=J.readSVarint():6===C?z.top=J.readSVarint():7===C&&(z.advance=J.readVarint())}function C0(C){for(var z=0,J=0,ce=0,ye=C;ce<ye.length;ce+=1){var Me=ye[ce];z+=Me.w*Me.h,J=Math.max(J,Me.w)}C.sort(function(In,Gn){return Gn.h-In.h});for(var Fe=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(z/.95)),J),h:1/0}],Ye=0,ot=0,_t=0,Et=C;_t<Et.length;_t+=1)for(var Xt=Et[_t],ln=Fe.length-1;ln>=0;ln--){var tn=Fe[ln];if(!(Xt.w>tn.w||Xt.h>tn.h)){if(Xt.x=tn.x,Xt.y=tn.y,ot=Math.max(ot,Xt.y+Xt.h),Ye=Math.max(Ye,Xt.x+Xt.w),Xt.w===tn.w&&Xt.h===tn.h){var vn=Fe.pop();ln<Fe.length&&(Fe[ln]=vn)}else Xt.h===tn.h?(tn.x+=Xt.w,tn.w-=Xt.w):Xt.w===tn.w?(tn.y+=Xt.h,tn.h-=Xt.h):(Fe.push({x:tn.x+Xt.w,y:tn.y,w:tn.w-Xt.w,h:Xt.h}),tn.y+=Xt.h,tn.h-=Xt.h);break}}return{w:Ye,h:ot,fill:z/(Ye*ot)||0}}oo.prototype={destroy:function(){this.buf=null},readFields:function(C,z,J){for(J=J||this.length;this.pos<J;){var ce=this.readVarint(),ye=ce>>3,Me=this.pos;this.type=7&ce,C(ye,z,this),this.pos===Me&&this.skip(ce)}return z},readMessage:function(C,z){return this.readFields(C,z,this.readVarint()+this.pos)},readFixed32:function(){var C=Jd(this.buf,this.pos);return this.pos+=4,C},readSFixed32:function(){var C=Km(this.buf,this.pos);return this.pos+=4,C},readFixed64:function(){var C=Jd(this.buf,this.pos)+4294967296*Jd(this.buf,this.pos+4);return this.pos+=8,C},readSFixed64:function(){var C=Jd(this.buf,this.pos)+4294967296*Km(this.buf,this.pos+4);return this.pos+=8,C},readFloat:function(){var C=k0(this.buf,this.pos,!0,23,4);return this.pos+=4,C},readDouble:function(){var C=k0(this.buf,this.pos,!0,52,8);return this.pos+=8,C},readVarint:function(C){var z,J,ce=this.buf;return z=127&(J=ce[this.pos++]),J<128?z:(z|=(127&(J=ce[this.pos++]))<<7,J<128?z:(z|=(127&(J=ce[this.pos++]))<<14,J<128?z:(z|=(127&(J=ce[this.pos++]))<<21,J<128?z:function(ye,Me,Fe){var Ye,ot,_t=Fe.buf;if(Ye=(112&(ot=_t[Fe.pos++]))>>4,ot<128||(Ye|=(127&(ot=_t[Fe.pos++]))<<3,ot<128)||(Ye|=(127&(ot=_t[Fe.pos++]))<<10,ot<128)||(Ye|=(127&(ot=_t[Fe.pos++]))<<17,ot<128)||(Ye|=(127&(ot=_t[Fe.pos++]))<<24,ot<128)||(Ye|=(1&(ot=_t[Fe.pos++]))<<31,ot<128))return function(C,z,J){return J?4294967296*z+(C>>>0):4294967296*(z>>>0)+(C>>>0)}(ye,Ye,Me);throw new Error("Expected varint not more than 10 bytes")}(z|=(15&(J=ce[this.pos]))<<28,C,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var C=this.readVarint();return C%2==1?(C+1)/-2:C/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var C=this.readVarint()+this.pos,z=this.pos;return this.pos=C,C-z>=12&&Xd?Xd.decode(this.buf.subarray(z,C)):function(J,ce,ye){for(var Me="",Fe=ce;Fe<ye;){var Ye,ot,_t,Et=J[Fe],Xt=null,ln=Et>239?4:Et>223?3:Et>191?2:1;if(Fe+ln>ye)break;1===ln?Et<128&&(Xt=Et):2===ln?128==(192&(Ye=J[Fe+1]))&&(Xt=(31&Et)<<6|63&Ye)<=127&&(Xt=null):3===ln?(ot=J[Fe+2],128==(192&(Ye=J[Fe+1]))&&128==(192&ot)&&((Xt=(15&Et)<<12|(63&Ye)<<6|63&ot)<=2047||Xt>=55296&&Xt<=57343)&&(Xt=null)):4===ln&&(ot=J[Fe+2],_t=J[Fe+3],128==(192&(Ye=J[Fe+1]))&&128==(192&ot)&&128==(192&_t)&&((Xt=(15&Et)<<18|(63&Ye)<<12|(63&ot)<<6|63&_t)<=65535||Xt>=1114112)&&(Xt=null)),null===Xt?(Xt=65533,ln=1):Xt>65535&&(Xt-=65536,Me+=String.fromCharCode(Xt>>>10&1023|55296),Xt=56320|1023&Xt),Me+=String.fromCharCode(Xt),Fe+=ln}return Me}(this.buf,z,C)},readBytes:function(){var C=this.readVarint()+this.pos,z=this.buf.subarray(this.pos,C);return this.pos=C,z},readPackedVarint:function(C,z){if(this.type!==oo.Bytes)return C.push(this.readVarint(z));var J=Tu(this);for(C=C||[];this.pos<J;)C.push(this.readVarint(z));return C},readPackedSVarint:function(C){if(this.type!==oo.Bytes)return C.push(this.readSVarint());var z=Tu(this);for(C=C||[];this.pos<z;)C.push(this.readSVarint());return C},readPackedBoolean:function(C){if(this.type!==oo.Bytes)return C.push(this.readBoolean());var z=Tu(this);for(C=C||[];this.pos<z;)C.push(this.readBoolean());return C},readPackedFloat:function(C){if(this.type!==oo.Bytes)return C.push(this.readFloat());var z=Tu(this);for(C=C||[];this.pos<z;)C.push(this.readFloat());return C},readPackedDouble:function(C){if(this.type!==oo.Bytes)return C.push(this.readDouble());var z=Tu(this);for(C=C||[];this.pos<z;)C.push(this.readDouble());return C},readPackedFixed32:function(C){if(this.type!==oo.Bytes)return C.push(this.readFixed32());var z=Tu(this);for(C=C||[];this.pos<z;)C.push(this.readFixed32());return C},readPackedSFixed32:function(C){if(this.type!==oo.Bytes)return C.push(this.readSFixed32());var z=Tu(this);for(C=C||[];this.pos<z;)C.push(this.readSFixed32());return C},readPackedFixed64:function(C){if(this.type!==oo.Bytes)return C.push(this.readFixed64());var z=Tu(this);for(C=C||[];this.pos<z;)C.push(this.readFixed64());return C},readPackedSFixed64:function(C){if(this.type!==oo.Bytes)return C.push(this.readSFixed64());var z=Tu(this);for(C=C||[];this.pos<z;)C.push(this.readSFixed64());return C},skip:function(C){var z=7&C;if(z===oo.Varint)for(;this.buf[this.pos++]>127;);else if(z===oo.Bytes)this.pos=this.readVarint()+this.pos;else if(z===oo.Fixed32)this.pos+=4;else{if(z!==oo.Fixed64)throw new Error("Unimplemented type: "+z);this.pos+=8}},writeTag:function(C,z){this.writeVarint(C<<3|z)},realloc:function(C){for(var z=this.length||16;z<this.pos+C;)z*=2;if(z!==this.length){var J=new Uint8Array(z);J.set(this.buf),this.buf=J,this.length=z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(C){this.realloc(4),Jf(this.buf,C,this.pos),this.pos+=4},writeSFixed32:function(C){this.realloc(4),Jf(this.buf,C,this.pos),this.pos+=4},writeFixed64:function(C){this.realloc(8),Jf(this.buf,-1&C,this.pos),Jf(this.buf,Math.floor(C*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(C){this.realloc(8),Jf(this.buf,-1&C,this.pos),Jf(this.buf,Math.floor(C*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(C){(C=+C||0)>268435455||C<0?function(z,J){var ce,ye,Me,Ye;if(z>=0?(ce=z%4294967296|0,ye=z/4294967296|0):(ye=~(-z/4294967296),4294967295^(ce=~(-z%4294967296))?ce=ce+1|0:(ce=0,ye=ye+1|0)),z>=0x10000000000000000||z<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");J.realloc(10),Me=ce,(Ye=J).buf[Ye.pos++]=127&Me|128,Me>>>=7,Ye.buf[Ye.pos++]=127&Me|128,Me>>>=7,Ye.buf[Ye.pos++]=127&Me|128,Me>>>=7,Ye.buf[Ye.pos++]=127&Me|128,Ye.buf[Ye.pos]=127&(Me>>>=7),function(Me,Fe){var Ye=(7&Me)<<4;Fe.buf[Fe.pos++]|=Ye|((Me>>>=3)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me)))))}(ye,J)}(C,this):(this.realloc(4),this.buf[this.pos++]=127&C|(C>127?128:0),C<=127||(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),C<=127||(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),C<=127||(this.buf[this.pos++]=C>>>7&127))))},writeSVarint:function(C){this.writeVarint(C<0?2*-C-1:2*C)},writeBoolean:function(C){this.writeVarint(Boolean(C))},writeString:function(C){C=String(C),this.realloc(4*C.length),this.pos++;var z=this.pos;this.pos=function(ce,ye,Me){for(var Fe,Ye,ot=0;ot<ye.length;ot++){if((Fe=ye.charCodeAt(ot))>55295&&Fe<57344){if(!Ye){Fe>56319||ot+1===ye.length?(ce[Me++]=239,ce[Me++]=191,ce[Me++]=189):Ye=Fe;continue}if(Fe<56320){ce[Me++]=239,ce[Me++]=191,ce[Me++]=189,Ye=Fe;continue}Fe=Ye-55296<<10|Fe-56320|65536,Ye=null}else Ye&&(ce[Me++]=239,ce[Me++]=191,ce[Me++]=189,Ye=null);Fe<128?ce[Me++]=Fe:(Fe<2048?ce[Me++]=Fe>>6|192:(Fe<65536?ce[Me++]=Fe>>12|224:(ce[Me++]=Fe>>18|240,ce[Me++]=Fe>>12&63|128),ce[Me++]=Fe>>6&63|128),ce[Me++]=63&Fe|128)}return Me}(this.buf,C,this.pos);var J=this.pos-z;J>=128&&$d(z,J,this),this.pos=z-1,this.writeVarint(J),this.pos+=J},writeFloat:function(C){this.realloc(4),Gm(this.buf,C,this.pos,!0,23,4),this.pos+=4},writeDouble:function(C){this.realloc(8),Gm(this.buf,C,this.pos,!0,52,8),this.pos+=8},writeBytes:function(C){var z=C.length;this.writeVarint(z),this.realloc(z);for(var J=0;J<z;J++)this.buf[this.pos++]=C[J]},writeRawMessage:function(C,z){this.pos++;var J=this.pos;C(z,this);var ce=this.pos-J;ce>=128&&$d(J,ce,this),this.pos=J-1,this.writeVarint(ce),this.pos+=ce},writeMessage:function(C,z,J){this.writeTag(C,oo.Bytes),this.writeRawMessage(z,J)},writePackedVarint:function(C,z){z.length&&this.writeMessage(C,Wm,z)},writePackedSVarint:function(C,z){z.length&&this.writeMessage(C,Ym,z)},writePackedBoolean:function(C,z){z.length&&this.writeMessage(C,$m,z)},writePackedFloat:function(C,z){z.length&&this.writeMessage(C,Zm,z)},writePackedDouble:function(C,z){z.length&&this.writeMessage(C,Xm,z)},writePackedFixed32:function(C,z){z.length&&this.writeMessage(C,uc,z)},writePackedSFixed32:function(C,z){z.length&&this.writeMessage(C,$f,z)},writePackedFixed64:function(C,z){z.length&&this.writeMessage(C,Jm,z)},writePackedSFixed64:function(C,z){z.length&&this.writeMessage(C,sx,z)},writeBytesField:function(C,z){this.writeTag(C,oo.Bytes),this.writeBytes(z)},writeFixed32Field:function(C,z){this.writeTag(C,oo.Fixed32),this.writeFixed32(z)},writeSFixed32Field:function(C,z){this.writeTag(C,oo.Fixed32),this.writeSFixed32(z)},writeFixed64Field:function(C,z){this.writeTag(C,oo.Fixed64),this.writeFixed64(z)},writeSFixed64Field:function(C,z){this.writeTag(C,oo.Fixed64),this.writeSFixed64(z)},writeVarintField:function(C,z){this.writeTag(C,oo.Varint),this.writeVarint(z)},writeSVarintField:function(C,z){this.writeTag(C,oo.Varint),this.writeSVarint(z)},writeStringField:function(C,z){this.writeTag(C,oo.Bytes),this.writeString(z)},writeFloatField:function(C,z){this.writeTag(C,oo.Fixed32),this.writeFloat(z)},writeDoubleField:function(C,z){this.writeTag(C,oo.Fixed64),this.writeDouble(z)},writeBooleanField:function(C,z){this.writeVarintField(C,Boolean(z))}};var Uh=function(C,z){var J=z.pixelRatio,ce=z.version,ye=z.stretchX,Me=z.stretchY,Fe=z.content;this.paddedRect=C,this.pixelRatio=J,this.stretchX=ye,this.stretchY=Me,this.content=Fe,this.version=ce},Kf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Kf.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Kf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Kf.tlbr.get=function(){return this.tl.concat(this.br)},Kf.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Uh.prototype,Kf);var Hh=function(C,z){var J={},ce={};this.haveRenderCallbacks=[];var ye=[];this.addImages(C,J,ye),this.addImages(z,ce,ye);var Me=C0(ye),ot=new ml({width:Me.w||1,height:Me.h||1});for(var _t in C){var Et=C[_t],Xt=J[_t].paddedRect;ml.copy(Et.data,ot,{x:0,y:0},{x:Xt.x+1,y:Xt.y+1},Et.data)}for(var ln in z){var tn=z[ln],vn=ce[ln].paddedRect,In=vn.x+1,Gn=vn.y+1,qn=tn.data.width,Kn=tn.data.height;ml.copy(tn.data,ot,{x:0,y:0},{x:In,y:Gn},tn.data),ml.copy(tn.data,ot,{x:0,y:Kn-1},{x:In,y:Gn-1},{width:qn,height:1}),ml.copy(tn.data,ot,{x:0,y:0},{x:In,y:Gn+Kn},{width:qn,height:1}),ml.copy(tn.data,ot,{x:qn-1,y:0},{x:In-1,y:Gn},{width:1,height:Kn}),ml.copy(tn.data,ot,{x:0,y:0},{x:In+qn,y:Gn},{width:1,height:Kn})}this.image=ot,this.iconPositions=J,this.patternPositions=ce};Hh.prototype.addImages=function(C,z,J){for(var ce in C){var ye=C[ce],Me={x:0,y:0,w:ye.data.width+2,h:ye.data.height+2};J.push(Me),z[ce]=new Uh(Me,ye),ye.hasRenderCallback&&this.haveRenderCallbacks.push(ce)}},Hh.prototype.patchUpdatedImages=function(C,z){for(var J in C.dispatchRenderCallbacks(this.haveRenderCallbacks),C.updatedImages)this.patchUpdatedImage(this.iconPositions[J],C.getImage(J),z),this.patchUpdatedImage(this.patternPositions[J],C.getImage(J),z)},Hh.prototype.patchUpdatedImage=function(C,z,J){if(C&&z&&C.version!==z.version){C.version=z.version;var ce=C.tl;J.update(z.data,void 0,{x:ce[0],y:ce[1]})}},dr("ImagePosition",Uh),dr("ImageAtlas",Hh);var Fl={horizontal:1,vertical:2,horizontalOnly:3},Uu=function(){this.scale=1,this.fontStack="",this.imageName=null};Uu.forText=function(C,z){var J=new Uu;return J.scale=C||1,J.fontStack=z,J},Uu.forImage=function(C){var z=new Uu;return z.imageName=C,z};var Hs=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ql(C,z,J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn,vn,In){var Gn,qn=Hs.fromFeature(C,ye);Xt===Fl.vertical&&qn.verticalizePunctuation();var Kn=Fo.processBidirectionalText,er=Fo.processStyledBidirectionalText;if(Kn&&1===qn.sections.length){Gn=[];for(var or=0,Cr=Kn(qn.toString(),S0(qn,_t,Me,z,ce,tn,vn));or<Cr.length;or+=1){var Fr=Cr[or],ni=new Hs;ni.text=Fr,ni.sections=qn.sections;for(var Qr=0;Qr<Fr.length;Qr++)ni.sectionIndex.push(0);Gn.push(ni)}}else if(er){Gn=[];for(var di=0,ki=er(qn.text,qn.sectionIndex,S0(qn,_t,Me,z,ce,tn,vn));di<ki.length;di+=1){var Ei=ki[di],mi=new Hs;mi.text=Ei[0],mi.sectionIndex=Ei[1],mi.sections=qn.sections,Gn.push(mi)}}else Gn=function(Mi,Ca){for(var Sa=[],za=Mi.text,Zi=0,Da=0,Qa=Ca;Da<Qa.length;Da+=1){var po=Qa[Da];Sa.push(Mi.substring(Zi,po)),Zi=po}return Zi<za.length&&Sa.push(Mi.substring(Zi,za.length)),Sa}(qn,S0(qn,_t,Me,z,ce,tn,vn));var Ri=[],Ii={positionedLines:Ri,text:qn.toString(),top:Et[1],bottom:Et[1],left:Et[0],right:Et[0],writingMode:Xt,iconsInText:!1,verticalizable:!1};return function(Mi,Ca,Sa,za,Zi,Da,Qa,po,ko,go,hs,Eo){for(var Es=0,ws=-17,qs=0,Zs=0,Xs="right"===po?1:"left"===po?0:.5,ts=0,Fs=0,ns=Zi;Fs<ns.length;Fs+=1){var mo=ns[Fs];mo.trim();var ba=mo.getMaxScale(),Na=24*(ba-1),Vo={positionedGlyphs:[],lineOffset:0};Mi.positionedLines[ts]=Vo;var Uo=Vo.positionedGlyphs,zo=0;if(mo.length()){for(var Do=0;Do<mo.length();Do++){var qa=mo.getSection(Do),Ho=mo.getSectionIndex(Do),rl=mo.getCharCode(Do),El=0,$i=null,Ia=null,ku=null,Ts=24,zl=!(ko===Fl.horizontal||!hs&&!Ai(rl)||hs&&(cc[rl]||(Fc=rl,Gr.Arabic(Fc)||Gr["Arabic Supplement"](Fc)||Gr["Arabic Extended-A"](Fc)||Gr["Arabic Presentation Forms-A"](Fc)||Gr["Arabic Presentation Forms-B"](Fc))));if(qa.imageName){var Cs=za[qa.imageName];if(!Cs)continue;ku=qa.imageName,Mi.iconsInText=Mi.iconsInText||!0,Ia=Cs.paddedRect;var ru=Cs.displaySize;qa.scale=24*qa.scale/Eo,El=Na+(24-ru[1]*qa.scale),Ts=($i={width:ru[0],height:ru[1],left:1,top:-3,advance:zl?ru[1]:ru[0]}).advance;var hc=zl?ru[0]*qa.scale-24*ba:ru[1]*qa.scale-24*ba;hc>0&&hc>zo&&(zo=hc)}else{var iu=Sa[qa.fontStack],Hu=iu&&iu[rl];if(Hu&&Hu.rect)Ia=Hu.rect,$i=Hu.metrics;else{var sh=Ca[qa.fontStack],Tf=sh&&sh[rl];if(!Tf)continue;$i=Tf.metrics}El=24*(ba-qa.scale)}zl?(Mi.verticalizable=!0,Uo.push({glyph:rl,imageName:ku,x:Es,y:ws+El,vertical:zl,scale:qa.scale,fontStack:qa.fontStack,sectionIndex:Ho,metrics:$i,rect:Ia}),Es+=Ts*qa.scale+go):(Uo.push({glyph:rl,imageName:ku,x:Es,y:ws+El,vertical:zl,scale:qa.scale,fontStack:qa.fontStack,sectionIndex:Ho,metrics:$i,rect:Ia}),Es+=$i.advance*qa.scale+go)}0!==Uo.length&&(qs=Math.max(Es-go,qs),ep(Uo,0,Uo.length-1,Xs,zo)),Es=0;var lh=Da*ba+zo;Vo.lineOffset=Math.max(zo,Na),ws+=lh,Zs=Math.max(lh,Zs),++ts}else ws+=Da,++ts}var Fc,qu=ws- -17,zc=Qf(Qa),dc=zc.horizontalAlign,Eu=zc.verticalAlign;(function(Nc,mp,Xh,$h,uh,Jh,Mf,vp,ch){var Bc,yp=(mp-Xh)*uh;Bc=Jh!==Mf?-vp*$h- -17:(-$h*ch+.5)*Mf;for(var jc=0,Af=Nc;jc<Af.length;jc+=1)for(var fh=0,Kh=Af[jc].positionedGlyphs;fh<Kh.length;fh+=1){var hh=Kh[fh];hh.x+=yp,hh.y+=Bc}})(Mi.positionedLines,Xs,dc,Eu,qs,Zs,Da,qu,Zi.length),Mi.top+=-Eu*qu,Mi.bottom=Mi.top+qu,Mi.left+=-dc*qs,Mi.right=Mi.left+qs}(Ii,z,J,ce,Gn,Fe,Ye,ot,Xt,_t,ln,In),!function(Mi){for(var Ca=0,Sa=Mi;Ca<Sa.length;Ca+=1)if(0!==Sa[Ca].positionedGlyphs.length)return!1;return!0}(Ri)&&Ii}Hs.fromFeature=function(C,z){for(var J=new Hs,ce=0;ce<C.sections.length;ce++){var ye=C.sections[ce];ye.image?J.addImageSection(ye):J.addTextSection(ye,z)}return J},Hs.prototype.length=function(){return this.text.length},Hs.prototype.getSection=function(C){return this.sections[this.sectionIndex[C]]},Hs.prototype.getSectionIndex=function(C){return this.sectionIndex[C]},Hs.prototype.getCharCode=function(C){return this.text.charCodeAt(C)},Hs.prototype.verticalizePunctuation=function(){this.text=function(C){for(var z="",J=0;J<C.length;J++){var ce=C.charCodeAt(J+1)||null,ye=C.charCodeAt(J-1)||null;ce&&ma(ce)&&!Xf[C[J+1]]||ye&&ma(ye)&&!Xf[C[J-1]]||!Xf[C[J]]?z+=C[J]:z+=Xf[C[J]]}return z}(this.text)},Hs.prototype.trim=function(){for(var C=0,z=0;z<this.text.length&&cc[this.text.charCodeAt(z)];z++)C++;for(var J=this.text.length,ce=this.text.length-1;ce>=0&&ce>=C&&cc[this.text.charCodeAt(ce)];ce--)J--;this.text=this.text.substring(C,J),this.sectionIndex=this.sectionIndex.slice(C,J)},Hs.prototype.substring=function(C,z){var J=new Hs;return J.text=this.text.substring(C,z),J.sectionIndex=this.sectionIndex.slice(C,z),J.sections=this.sections,J},Hs.prototype.toString=function(){return this.text},Hs.prototype.getMaxScale=function(){var C=this;return this.sectionIndex.reduce(function(z,J){return Math.max(z,C.sections[J].scale)},0)},Hs.prototype.addTextSection=function(C,z){this.text+=C.text,this.sections.push(Uu.forText(C.scale,C.fontStack||z));for(var J=this.sections.length-1,ce=0;ce<C.text.length;++ce)this.sectionIndex.push(J)},Hs.prototype.addImageSection=function(C){var z=C.image?C.image.name:"";if(0!==z.length){var J=this.getNextImageSectionCharCode();J?(this.text+=String.fromCharCode(J),this.sections.push(Uu.forImage(z)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},Hs.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var cc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yl={};function Kd(C,z,J,ce,ye,Me){if(z.imageName){var Fe=ce[z.imageName];return Fe?Fe.displaySize[0]*z.scale*24/Me+ye:0}var Ye=J[z.fontStack],ot=Ye&&Ye[C];return ot?ot.metrics.advance*z.scale+ye:0}function Qd(C,z,J,ce){var ye=Math.pow(C-z,2);return ce?C<z?ye/2:2*ye:ye+Math.abs(J)*J}function ux(C,z,J){var ce=0;return 10===C&&(ce-=1e4),J&&(ce+=150),40!==C&&65288!==C||(ce+=50),41!==z&&65289!==z||(ce+=50),ce}function ev(C,z,J,ce,ye,Me){for(var Fe=null,Ye=Qd(z,J,ye,Me),ot=0,_t=ce;ot<_t.length;ot+=1){var Et=_t[ot],Xt=Qd(z-Et.x,J,ye,Me)+Et.badness;Xt<=Ye&&(Fe=Et,Ye=Xt)}return{index:C,x:z,priorBreak:Fe,badness:Ye}}function S0(C,z,J,ce,ye,Me,Fe){if("point"!==Me)return[];if(!C)return[];for(var Ye,ot=[],_t=function(Gn,qn,Kn,er,or,Cr){for(var Fr=0,ni=0;ni<Gn.length();ni++){var Qr=Gn.getSection(ni);Fr+=Kd(Gn.getCharCode(ni),Qr,er,or,qn,Cr)}return Fr/Math.max(1,Math.ceil(Fr/Kn))}(C,z,J,ce,ye,Fe),Et=C.text.indexOf("\u200b")>=0,Xt=0,ln=0;ln<C.length();ln++){var tn=C.getSection(ln),vn=C.getCharCode(ln);if(cc[vn]||(Xt+=Kd(vn,tn,ce,ye,z,Fe)),ln<C.length()-1){var In=!((Ye=vn)<11904||!(Gr["Bopomofo Extended"](Ye)||Gr.Bopomofo(Ye)||Gr["CJK Compatibility Forms"](Ye)||Gr["CJK Compatibility Ideographs"](Ye)||Gr["CJK Compatibility"](Ye)||Gr["CJK Radicals Supplement"](Ye)||Gr["CJK Strokes"](Ye)||Gr["CJK Symbols and Punctuation"](Ye)||Gr["CJK Unified Ideographs Extension A"](Ye)||Gr["CJK Unified Ideographs"](Ye)||Gr["Enclosed CJK Letters and Months"](Ye)||Gr["Halfwidth and Fullwidth Forms"](Ye)||Gr.Hiragana(Ye)||Gr["Ideographic Description Characters"](Ye)||Gr["Kangxi Radicals"](Ye)||Gr["Katakana Phonetic Extensions"](Ye)||Gr.Katakana(Ye)||Gr["Vertical Forms"](Ye)||Gr["Yi Radicals"](Ye)||Gr["Yi Syllables"](Ye)));(yl[vn]||In||tn.imageName)&&ot.push(ev(ln+1,Xt,_t,ot,ux(vn,C.getCharCode(ln+1),In&&Et),!1))}}return function Gn(qn){return qn?Gn(qn.priorBreak).concat(qn.index):[]}(ev(C.length(),Xt,_t,ot,0,!0))}function Qf(C){var z=.5,J=.5;switch(C){case"right":case"top-right":case"bottom-right":z=1;break;case"left":case"top-left":case"bottom-left":z=0}switch(C){case"bottom":case"bottom-right":case"bottom-left":J=1;break;case"top":case"top-right":case"top-left":J=0}return{horizontalAlign:z,verticalAlign:J}}function ep(C,z,J,ce,ye){if(ce||ye)for(var Me=C[J],Ye=(C[J].x+Me.metrics.advance*Me.scale)*ce,ot=z;ot<=J;ot++)C[ot].x-=Ye,C[ot].y+=ye}function qh(C,z,J,ce,ye,Me){var Fe,Ye=C.image;if(Ye.content){var ot=Ye.content,_t=Ye.pixelRatio||1;Fe=[ot[0]/_t,ot[1]/_t,Ye.displaySize[0]-ot[2]/_t,Ye.displaySize[1]-ot[3]/_t]}var Et,Xt,ln,tn,vn=z.left*Me,In=z.right*Me;"width"===J||"both"===J?(tn=ye[0]+vn-ce[3],Xt=ye[0]+In+ce[1]):Xt=(tn=ye[0]+(vn+In-Ye.displaySize[0])/2)+Ye.displaySize[0];var Gn=z.top*Me,qn=z.bottom*Me;return"height"===J||"both"===J?(Et=ye[1]+Gn-ce[0],ln=ye[1]+qn+ce[2]):ln=(Et=ye[1]+(Gn+qn-Ye.displaySize[1])/2)+Ye.displaySize[1],{image:Ye,top:Et,right:Xt,bottom:ln,left:tn,collisionPadding:Fe}}yl[10]=!0,yl[32]=!0,yl[38]=!0,yl[40]=!0,yl[41]=!0,yl[43]=!0,yl[45]=!0,yl[47]=!0,yl[173]=!0,yl[183]=!0,yl[8203]=!0,yl[8208]=!0,yl[8211]=!0,yl[8231]=!0;var eh=function(C){function z(J,ce,ye,Me){C.call(this,J,ce),this.angle=ye,void 0!==Me&&(this.segment=Me)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.clone=function(){return new z(this.x,this.y,this.angle,this.segment)},z}(n);function D0(C,z){var J=z.expression;if("constant"===J.kind)return{kind:"constant",layoutSize:J.evaluate(new da(C+1))};if("source"===J.kind)return{kind:"source"};for(var ce=J.zoomStops,ye=J.interpolationType,Me=0;Me<ce.length&&ce[Me]<=C;)Me++;for(var Fe=Me=Math.max(0,Me-1);Fe<ce.length&&ce[Fe]<C+1;)Fe++;Fe=Math.min(ce.length-1,Fe);var Ye=ce[Me],ot=ce[Fe];return"composite"===J.kind?{kind:"composite",minZoom:Ye,maxZoom:ot,interpolationType:ye}:{kind:"camera",minZoom:Ye,maxZoom:ot,minSize:J.evaluate(new da(Ye)),maxSize:J.evaluate(new da(ot)),interpolationType:ye}}function tp(C,z,J){var ce=z.uSize,Me=J.lowerSize;return"source"===C.kind?Me/128:"composite"===C.kind?pi(Me/128,J.upperSize/128,z.uSizeT):ce}function I0(C,z){var J=0,ce=0;if("constant"===C.kind)ce=C.layoutSize;else if("source"!==C.kind){var ye=C.interpolationType,Ye=ye?u(Bi.interpolationFactor(ye,z,C.minZoom,C.maxZoom),0,1):0;"camera"===C.kind?ce=pi(C.minSize,C.maxSize,Ye):J=Ye}return{uSizeT:J,uSize:ce}}dr("Anchor",eh);var tv=Object.freeze({__proto__:null,getSizeData:D0,evaluateSizeForFeature:tp,evaluateSizeForZoom:I0,SIZE_PACK_FACTOR:128});function L0(C,z,J,ce,ye){if(void 0===z.segment)return!0;for(var Me=z,Fe=z.segment+1,Ye=0;Ye>-J/2;){if(--Fe<0)return!1;Ye-=C[Fe].dist(Me),Me=C[Fe]}Ye+=C[Fe].dist(C[Fe+1]),Fe++;for(var ot=[],_t=0;Ye<J/2;){var Xt=C[Fe],ln=C[Fe+1];if(!ln)return!1;var tn=C[Fe-1].angleTo(Xt)-Xt.angleTo(ln);for(tn=Math.abs((tn+3*Math.PI)%(2*Math.PI)-Math.PI),ot.push({distance:Ye,angleDelta:tn}),_t+=tn;Ye-ot[0].distance>ce;)_t-=ot.shift().angleDelta;if(_t>ye)return!1;Fe++,Ye+=Xt.dist(ln)}return!0}function P0(C){for(var z=0,J=0;J<C.length-1;J++)z+=C[J].dist(C[J+1]);return z}function np(C,z,J){return C?.6*z*J:0}function th(C,z){return Math.max(C?C.right-C.left:0,z?z.right-z.left:0)}function nv(C,z,J,ce,ye,Me){for(var Fe=np(J,ye,Me),Ye=th(J,ce)*Me,ot=0,_t=P0(C)/2,Et=0;Et<C.length-1;Et++){var Xt=C[Et],ln=C[Et+1],tn=Xt.dist(ln);if(ot+tn>_t){var vn=(_t-ot)/tn,In=pi(Xt.x,ln.x,vn),Gn=pi(Xt.y,ln.y,vn),qn=new eh(In,Gn,ln.angleTo(Xt),Et);return qn._round(),!Fe||L0(C,qn,Ye,Fe,z)?qn:void 0}ot+=tn}}function rp(C,z,J,ce,ye,Me,Fe,Ye,ot){var _t=np(ce,Me,Fe),Et=th(ce,ye),Xt=Et*Fe,ln=0===C[0].x||C[0].x===ot||0===C[0].y||C[0].y===ot;return z-Xt<z/4&&(z=Xt+z/4),function tn(vn,In,Gn,qn,Kn,er,or,Cr,Fr){for(var ni=er/2,Qr=P0(vn),di=0,ki=In-Gn,Ei=[],mi=0;mi<vn.length-1;mi++){for(var Ri=vn[mi],Ii=vn[mi+1],Mi=Ri.dist(Ii),Ca=Ii.angleTo(Ri);ki+Gn<di+Mi;){var Sa=((ki+=Gn)-di)/Mi,za=pi(Ri.x,Ii.x,Sa),Zi=pi(Ri.y,Ii.y,Sa);if(za>=0&&za<Fr&&Zi>=0&&Zi<Fr&&ki-ni>=0&&ki+ni<=Qr){var Da=new eh(za,Zi,Ca,mi);Da._round(),qn&&!L0(vn,Da,er,qn,Kn)||Ei.push(Da)}}di+=Mi}return Cr||Ei.length||or||(Ei=tn(vn,di/2,Gn,qn,Kn,er,or,!0,Fr)),Ei}(C,ln?z/2*Ye%z:(Et/2+2*Me)*Fe*Ye%z,z,_t,J,Xt,ln,!1,ot)}function O0(C,z,J,ce,ye){for(var Me=[],Fe=0;Fe<C.length;Fe++)for(var Ye=C[Fe],ot=void 0,_t=0;_t<Ye.length-1;_t++){var Et=Ye[_t],Xt=Ye[_t+1];Et.x<z&&Xt.x<z||(Et.x<z?Et=new n(z,Et.y+(z-Et.x)/(Xt.x-Et.x)*(Xt.y-Et.y))._round():Xt.x<z&&(Xt=new n(z,Et.y+(z-Et.x)/(Xt.x-Et.x)*(Xt.y-Et.y))._round()),Et.y<J&&Xt.y<J||(Et.y<J?Et=new n(Et.x+(J-Et.y)/(Xt.y-Et.y)*(Xt.x-Et.x),J)._round():Xt.y<J&&(Xt=new n(Et.x+(J-Et.y)/(Xt.y-Et.y)*(Xt.x-Et.x),J)._round()),Et.x>=ce&&Xt.x>=ce||(Et.x>=ce?Et=new n(ce,Et.y+(ce-Et.x)/(Xt.x-Et.x)*(Xt.y-Et.y))._round():Xt.x>=ce&&(Xt=new n(ce,Et.y+(ce-Et.x)/(Xt.x-Et.x)*(Xt.y-Et.y))._round()),Et.y>=ye&&Xt.y>=ye||(Et.y>=ye?Et=new n(Et.x+(ye-Et.y)/(Xt.y-Et.y)*(Xt.x-Et.x),ye)._round():Xt.y>=ye&&(Xt=new n(Et.x+(ye-Et.y)/(Xt.y-Et.y)*(Xt.x-Et.x),ye)._round()),ot&&Et.equals(ot[ot.length-1])||Me.push(ot=[Et]),ot.push(Xt)))))}return Me}function ks(C,z,J,ce){var ye=[],Me=C.image,Fe=Me.pixelRatio,Ye=Me.paddedRect.w-2,ot=Me.paddedRect.h-2,_t=C.right-C.left,Et=C.bottom-C.top,Xt=Me.stretchX||[[0,Ye]],ln=Me.stretchY||[[0,ot]],tn=function(Da,Qa){return Da+Qa[1]-Qa[0]},vn=Xt.reduce(tn,0),In=ln.reduce(tn,0),Gn=Ye-vn,qn=ot-In,Kn=0,er=vn,or=0,Cr=In,Fr=0,ni=Gn,Qr=0,di=qn;if(Me.content&&ce){var ki=Me.content;Kn=Lc(Xt,0,ki[0]),or=Lc(ln,0,ki[1]),er=Lc(Xt,ki[0],ki[2]),Cr=Lc(ln,ki[1],ki[3]),Fr=ki[0]-Kn,Qr=ki[1]-or,ni=ki[2]-ki[0]-er,di=ki[3]-ki[1]-Cr}var Ei=function(Da,Qa,po,ko){var go=df(Da.stretch-Kn,er,_t,C.left),hs=nh(Da.fixed-Fr,ni,Da.stretch,vn),Eo=df(Qa.stretch-or,Cr,Et,C.top),Es=nh(Qa.fixed-Qr,di,Qa.stretch,In),ws=df(po.stretch-Kn,er,_t,C.left),qs=nh(po.fixed-Fr,ni,po.stretch,vn),Zs=df(ko.stretch-or,Cr,Et,C.top),Xs=nh(ko.fixed-Qr,di,ko.stretch,In),ts=new n(go,Eo),Fs=new n(ws,Eo),ns=new n(ws,Zs),mo=new n(go,Zs),ba=new n(hs/Fe,Es/Fe),Na=new n(qs/Fe,Xs/Fe),Vo=z*Math.PI/180;if(Vo){var Uo=Math.sin(Vo),zo=Math.cos(Vo),Do=[zo,-Uo,Uo,zo];ts._matMult(Do),Fs._matMult(Do),mo._matMult(Do),ns._matMult(Do)}var qa=Da.stretch+Da.fixed,rl=Qa.stretch+Qa.fixed;return{tl:ts,tr:Fs,bl:mo,br:ns,tex:{x:Me.paddedRect.x+1+qa,y:Me.paddedRect.y+1+rl,w:po.stretch+po.fixed-qa,h:ko.stretch+ko.fixed-rl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ba,pixelOffsetBR:Na,minFontScaleX:ni/Fe/_t,minFontScaleY:di/Fe/Et,isSDF:J}};if(ce&&(Me.stretchX||Me.stretchY))for(var mi=R0(Xt,Gn,vn),Ri=R0(ln,qn,In),Ii=0;Ii<mi.length-1;Ii++)for(var Mi=mi[Ii],Ca=mi[Ii+1],Sa=0;Sa<Ri.length-1;Sa++)ye.push(Ei(Mi,Ri[Sa],Ca,Ri[Sa+1]));else ye.push(Ei({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ye+1},{fixed:0,stretch:ot+1}));return ye}function Lc(C,z,J){for(var ce=0,ye=0,Me=C;ye<Me.length;ye+=1){var Fe=Me[ye];ce+=Math.max(z,Math.min(J,Fe[1]))-Math.max(z,Math.min(J,Fe[0]))}return ce}function R0(C,z,J){for(var ce=[{fixed:-1,stretch:0}],ye=0,Me=C;ye<Me.length;ye+=1){var Fe=Me[ye],Ye=Fe[0],ot=Fe[1],_t=ce[ce.length-1];ce.push({fixed:Ye-_t.stretch,stretch:_t.stretch}),ce.push({fixed:Ye-_t.stretch,stretch:_t.stretch+(ot-Ye)})}return ce.push({fixed:z+1,stretch:J}),ce}function df(C,z,J,ce){return C/z*J+ce}function nh(C,z,J,ce){return C-z*J/ce}var Gh=function(C,z,J,ce,ye,Me,Fe,Ye,ot,_t){if(this.boxStartIndex=C.length,ot){var Et=Me.top,Xt=Me.bottom,ln=Me.collisionPadding;ln&&(Et-=ln[1],Xt+=ln[3]);var tn=Xt-Et;tn>0&&(tn=Math.max(10,tn),this.circleDiameter=tn)}else{var vn=Me.top*Fe-Ye,In=Me.bottom*Fe+Ye,Gn=Me.left*Fe-Ye,qn=Me.right*Fe+Ye,Kn=Me.collisionPadding;if(Kn&&(Gn-=Kn[0]*Fe,vn-=Kn[1]*Fe,qn+=Kn[2]*Fe,In+=Kn[3]*Fe),_t){var er=new n(Gn,vn),or=new n(qn,vn),Cr=new n(Gn,In),Fr=new n(qn,In),ni=_t*Math.PI/180;er._rotate(ni),or._rotate(ni),Cr._rotate(ni),Fr._rotate(ni),Gn=Math.min(er.x,or.x,Cr.x,Fr.x),qn=Math.max(er.x,or.x,Cr.x,Fr.x),vn=Math.min(er.y,or.y,Cr.y,Fr.y),In=Math.max(er.y,or.y,Cr.y,Fr.y)}C.emplaceBack(z.x,z.y,Gn,vn,qn,In,J,ce,ye)}this.boxEndIndex=C.length},pf=function(C,z){if(void 0===C&&(C=[]),void 0===z&&(z=rv),this.data=C,this.length=this.data.length,this.compare=z,this.length>0)for(var J=(this.length>>1)-1;J>=0;J--)this._down(J)};function rv(C,z){return C<z?-1:C>z?1:0}function iv(C,z,J){void 0===z&&(z=1),void 0===J&&(J=!1);for(var ce=1/0,ye=1/0,Me=-1/0,Fe=-1/0,Ye=C[0],ot=0;ot<Ye.length;ot++){var _t=Ye[ot];(!ot||_t.x<ce)&&(ce=_t.x),(!ot||_t.y<ye)&&(ye=_t.y),(!ot||_t.x>Me)&&(Me=_t.x),(!ot||_t.y>Fe)&&(Fe=_t.y)}var ln=Math.min(Me-ce,Fe-ye),tn=ln/2,vn=new pf([],av);if(0===ln)return new n(ce,ye);for(var In=ce;In<Me;In+=ln)for(var Gn=ye;Gn<Fe;Gn+=ln)vn.push(new rh(In+tn,Gn+tn,tn,C));for(var qn=function(or){for(var Cr=0,Fr=0,ni=0,Qr=or[0],di=0,ki=Qr.length,Ei=ki-1;di<ki;Ei=di++){var mi=Qr[di],Ri=Qr[Ei],Ii=mi.x*Ri.y-Ri.x*mi.y;Fr+=(mi.x+Ri.x)*Ii,ni+=(mi.y+Ri.y)*Ii,Cr+=3*Ii}return new rh(Fr/Cr,ni/Cr,0,or)}(C),Kn=vn.length;vn.length;){var er=vn.pop();(er.d>qn.d||!qn.d)&&(qn=er,J&&console.log("found best %d after %d probes",Math.round(1e4*er.d)/1e4,Kn)),er.max-qn.d<=z||(vn.push(new rh(er.p.x-(tn=er.h/2),er.p.y-tn,tn,C)),vn.push(new rh(er.p.x+tn,er.p.y-tn,tn,C)),vn.push(new rh(er.p.x-tn,er.p.y+tn,tn,C)),vn.push(new rh(er.p.x+tn,er.p.y+tn,tn,C)),Kn+=4)}return J&&(console.log("num probes: "+Kn),console.log("best distance: "+qn.d)),qn.p}function av(C,z){return z.max-C.max}function rh(C,z,J,ce){this.p=new n(C,z),this.h=J,this.d=function(ye,Me){for(var Fe=!1,Ye=1/0,ot=0;ot<Me.length;ot++)for(var _t=Me[ot],Et=0,Xt=_t.length,ln=Xt-1;Et<Xt;ln=Et++){var tn=_t[Et],vn=_t[ln];tn.y>ye.y!=vn.y>ye.y&&ye.x<(vn.x-tn.x)*(ye.y-tn.y)/(vn.y-tn.y)+tn.x&&(Fe=!Fe),Ye=Math.min(Ye,Nu(ye,tn,vn))}return(Fe?1:-1)*Math.sqrt(Ye)}(this.p,ce),this.max=this.d+this.h*Math.SQRT2}pf.prototype.push=function(C){this.data.push(C),this.length++,this._up(this.length-1)},pf.prototype.pop=function(){if(0!==this.length){var C=this.data[0],z=this.data.pop();return this.length--,this.length>0&&(this.data[0]=z,this._down(0)),C}},pf.prototype.peek=function(){return this.data[0]},pf.prototype._up=function(C){for(var z=this.data,J=this.compare,ce=z[C];C>0;){var ye=C-1>>1,Me=z[ye];if(J(ce,Me)>=0)break;z[C]=Me,C=ye}z[C]=ce},pf.prototype._down=function(C){for(var z=this.data,J=this.compare,ce=this.length>>1,ye=z[C];C<ce;){var Me=1+(C<<1),Fe=z[Me],Ye=Me+1;if(Ye<this.length&&J(z[Ye],Fe)<0&&(Me=Ye,Fe=z[Ye]),J(Fe,ye)>=0)break;z[C]=Fe,C=Me}z[C]=ye};var F0=Number.POSITIVE_INFINITY;function gf(C,z){return z[1]!==F0?function(J,ce,ye){var Me=0,Fe=0;switch(ce=Math.abs(ce),ye=Math.abs(ye),J){case"top-right":case"top-left":case"top":Fe=ye-7;break;case"bottom-right":case"bottom-left":case"bottom":Fe=7-ye}switch(J){case"top-right":case"bottom-right":case"right":Me=-ce;break;case"top-left":case"bottom-left":case"left":Me=ce}return[Me,Fe]}(C,z[0],z[1]):function(J,ce){var ye=0,Me=0;ce<0&&(ce=0);var Fe=ce/Math.sqrt(2);switch(J){case"top-right":case"top-left":Me=Fe-7;break;case"bottom-right":case"bottom-left":Me=7-Fe;break;case"bottom":Me=7-ce;break;case"top":Me=ce-7}switch(J){case"top-right":case"bottom-right":ye=-Fe;break;case"top-left":case"bottom-left":ye=Fe;break;case"left":ye=ce;break;case"right":ye=-ce}return[ye,Me]}(C,z[0])}function nl(C){switch(C){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Wh(C,z,J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn,vn){var In=function(or,Cr,Fr,ni,Qr,di,ki,Ei){for(var mi=ni.layout.get("text-rotate").evaluate(di,{})*Math.PI/180,Ri=[],Ii=0,Mi=Cr.positionedLines;Ii<Mi.length;Ii+=1)for(var Ca=Mi[Ii],Sa=0,za=Ca.positionedGlyphs;Sa<za.length;Sa+=1){var Zi=za[Sa];if(Zi.rect){var Da=Zi.rect||{},Qa=4,po=!0,ko=1,go=0,hs=(Qr||Ei)&&Zi.vertical,Eo=Zi.metrics.advance*Zi.scale/2;if(Ei&&Cr.verticalizable&&(go=Ca.lineOffset/2-(Zi.imageName?-(24-Zi.metrics.width*Zi.scale)/2:24*(Zi.scale-1))),Zi.imageName){var qs=ki[Zi.imageName];po=qs.sdf,Qa=1/(ko=qs.pixelRatio)}var Zs=Qr?[Zi.x+Eo,Zi.y]:[0,0],Xs=Qr?[0,0]:[Zi.x+Eo+Fr[0],Zi.y+Fr[1]-go],ts=[0,0];hs&&(ts=Xs,Xs=[0,0]);var Fs=(Zi.metrics.left-Qa)*Zi.scale-Eo+Xs[0],ns=(-Zi.metrics.top-Qa)*Zi.scale+Xs[1],mo=Fs+Da.w*Zi.scale/ko,ba=ns+Da.h*Zi.scale/ko,Na=new n(Fs,ns),Vo=new n(mo,ns),Uo=new n(Fs,ba),zo=new n(mo,ba);if(hs){var Do=new n(-Eo,Eo- -17),qa=-Math.PI/2,Ho=12-Eo,El=new n(22-Ho,-(Zi.imageName?Ho:0)),$i=new(Function.prototype.bind.apply(n,[null].concat(ts)));Na._rotateAround(qa,Do)._add(El)._add($i),Vo._rotateAround(qa,Do)._add(El)._add($i),Uo._rotateAround(qa,Do)._add(El)._add($i),zo._rotateAround(qa,Do)._add(El)._add($i)}if(mi){var Ia=Math.sin(mi),ku=Math.cos(mi),Ts=[ku,-Ia,Ia,ku];Na._matMult(Ts),Vo._matMult(Ts),Uo._matMult(Ts),zo._matMult(Ts)}var zl=new n(0,0),Cs=new n(0,0);Ri.push({tl:Na,tr:Vo,bl:Uo,br:zo,tex:Da,writingMode:Cr.writingMode,glyphOffset:Zs,sectionIndex:Zi.sectionIndex,isSDF:po,pixelOffsetTL:zl,pixelOffsetBR:Cs,minFontScaleX:0,minFontScaleY:0})}}return Ri}(0,J,Ye,ye,Me,Fe,ce,C.allowVerticalPlacement),Gn=C.textSizeData,qn=null;"source"===Gn.kind?(qn=[128*ye.layout.get("text-size").evaluate(Fe,{})])[0]>32640&&S(C.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Gn.kind&&((qn=[128*tn.compositeTextSizes[0].evaluate(Fe,{},vn),128*tn.compositeTextSizes[1].evaluate(Fe,{},vn)])[0]>32640||qn[1]>32640)&&S(C.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),C.addSymbols(C.text,In,qn,Ye,Me,Fe,_t,z,ot.lineStartIndex,ot.lineLength,ln,vn);for(var Kn=0,er=Et;Kn<er.length;Kn+=1)Xt[er[Kn]]=C.text.placedSymbolArray.length-1;return 4*In.length}function ip(C){for(var z in C)return C[z];return null}function z0(C,z,J,ce){var ye=C.compareText;if(z in ye){for(var Me=ye[z],Fe=Me.length-1;Fe>=0;Fe--)if(ce.dist(Me[Fe])<J)return!0}else ye[z]=[];return ye[z].push(ce),!1}var xl=cf.VectorTileFeature.types,ih=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function mf(C,z,J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln){var tn=Ye?Math.min(32640,Math.round(Ye[0])):0,vn=Ye?Math.min(32640,Math.round(Ye[1])):0;C.emplaceBack(z,J,Math.round(32*ce),Math.round(32*ye),Me,Fe,(tn<<1)+(ot?1:0),vn,16*_t,16*Et,256*Xt,256*ln)}function ap(C,z,J){C.emplaceBack(z.x,z.y,J),C.emplaceBack(z.x,z.y,J),C.emplaceBack(z.x,z.y,J),C.emplaceBack(z.x,z.y,J)}function ov(C){for(var z=0,J=C.sections;z<J.length;z+=1)if(_i(J[z].text))return!0;return!1}var Pc=function(C){this.layoutVertexArray=new Pl,this.indexArray=new us,this.programConfigurations=C,this.segments=new Zt,this.dynamicLayoutVertexArray=new tl,this.opacityVertexArray=new vs,this.placedSymbolArray=new Xe};Pc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Pc.prototype.upload=function(C,z,J,ce){this.isEmpty()||(J&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Yd.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,z),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,Hm.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,ih,!0),this.opacityVertexBuffer.itemSize=1),(J||ce)&&this.programConfigurations.upload(C))},Pc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},dr("SymbolBuffers",Pc);var ah=function(C,z,J){this.layoutVertexArray=new C,this.layoutAttributes=z,this.indexArray=new J,this.segments=new Zt,this.collisionVertexArray=new js};ah.prototype.upload=function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,qm.members,!0)},ah.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},dr("CollisionBuffers",ah);var Ka=function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(Fe){return Fe.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=nf([]),this.placementViewportMatrix=nf([]);var z=this.layers[0]._unevaluatedLayout._values;this.textSizeData=D0(this.zoom,z["text-size"]),this.iconSizeData=D0(this.zoom,z["icon-size"]);var J=this.layers[0].layout,ce=J.get("symbol-sort-key"),ye=J.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==ye&&void 0!==ce.constantOr(1),this.sortFeaturesByY=("viewport-y"===ye||"auto"===ye&&!this.sortFeaturesByKey)&&(J.get("text-allow-overlap")||J.get("icon-allow-overlap")||J.get("text-ignore-placement")||J.get("icon-ignore-placement")),"point"===J.get("symbol-placement")&&(this.writingModes=J.get("text-writing-mode").map(function(Fe){return Fl[Fe]})),this.stateDependentLayerIds=this.layers.filter(function(Fe){return Fe.isStateDependent()}).map(function(Fe){return Fe.id}),this.sourceID=C.sourceID};Ka.prototype.createArrays=function(){this.text=new Pc(new Wa(Yd.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new Pc(new Wa(Yd.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new St,this.lineVertexArray=new Nt,this.symbolInstances=new dt},Ka.prototype.calculateGlyphDependencies=function(C,z,J,ce,ye){for(var Me=0;Me<C.length;Me++)if(z[C.charCodeAt(Me)]=!0,(J||ce)&&ye){var Fe=Xf[C.charAt(Me)];Fe&&(z[Fe.charCodeAt(0)]=!0)}},Ka.prototype.populate=function(C,z,J){var ce=this.layers[0],ye=ce.layout,Me=ye.get("text-font"),Fe=ye.get("text-field"),Ye=ye.get("icon-image"),ot=("constant"!==Fe.value.kind||Fe.value.value instanceof Fn&&!Fe.value.value.isEmpty()||Fe.value.value.toString().length>0)&&("constant"!==Me.value.kind||Me.value.value.length>0),_t="constant"!==Ye.value.kind||!!Ye.value.value||Object.keys(Ye.parameters).length>0,Et=ye.get("symbol-sort-key");if(this.features=[],ot||_t){for(var Xt=z.iconDependencies,ln=z.glyphDependencies,tn=z.availableImages,vn=new da(this.zoom),In=0,Gn=C;In<Gn.length;In+=1){var qn=Gn[In],Kn=qn.feature,er=qn.id,or=qn.index,Cr=qn.sourceLayerIndex,Fr=ce._featureFilter.needGeometry,ni={type:Kn.type,id:er,properties:Kn.properties,geometry:Fr?Mo(Kn):[]};if(ce._featureFilter.filter(vn,ni,J)){Fr||(ni.geometry=Mo(Kn));var Qr=void 0;if(ot){var di=ce.getValueAndResolveTokens("text-field",ni,J,tn),ki=Fn.factory(di);ov(ki)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Yo()||this.hasRTLText&&Fo.isParsed())&&(Qr=hf(ki,ce,ni))}var Ei=void 0;if(_t){var mi=ce.getValueAndResolveTokens("icon-image",ni,J,tn);Ei=mi instanceof On?mi:On.fromString(mi)}if(Qr||Ei){var Ri=this.sortFeaturesByKey?Et.evaluate(ni,{},J):void 0,Ii={id:er,text:Qr,icon:Ei,index:or,sourceLayerIndex:Cr,geometry:Mo(Kn),properties:Kn.properties,type:xl[Kn.type],sortKey:Ri};if(this.features.push(Ii),Ei&&(Xt[Ei.name]=!0),Qr){var Mi=Me.evaluate(ni,{},J).join(","),Ca="map"===ye.get("text-rotation-alignment")&&"point"!==ye.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Fl.vertical)>=0;for(var Sa=0,za=Qr.sections;Sa<za.length;Sa+=1){var Zi=za[Sa];if(Zi.image)Xt[Zi.image.name]=!0;else{var Da=ha(Qr.toString()),Qa=Zi.fontStack||Mi,po=ln[Qa]=ln[Qa]||{};this.calculateGlyphDependencies(Zi.text,po,Ca,this.allowVerticalPlacement,Da)}}}}}}"line"===ye.get("symbol-placement")&&(this.features=function(ko){var go={},hs={},Eo=[],Es=0;function ws(zo){Eo.push(ko[zo]),Es++}function qs(zo,Do,qa){var Ho=hs[zo];return delete hs[zo],hs[Do]=Ho,Eo[Ho].geometry[0].pop(),Eo[Ho].geometry[0]=Eo[Ho].geometry[0].concat(qa[0]),Ho}function Zs(zo,Do,qa){var Ho=go[Do];return delete go[Do],go[zo]=Ho,Eo[Ho].geometry[0].shift(),Eo[Ho].geometry[0]=qa[0].concat(Eo[Ho].geometry[0]),Ho}function Xs(zo,Do,qa){var Ho=qa?Do[0][Do[0].length-1]:Do[0][0];return zo+":"+Ho.x+":"+Ho.y}for(var ts=0;ts<ko.length;ts++){var Fs=ko[ts],ns=Fs.geometry,mo=Fs.text?Fs.text.toString():null;if(mo){var ba=Xs(mo,ns),Na=Xs(mo,ns,!0);if(ba in hs&&Na in go&&hs[ba]!==go[Na]){var Vo=Zs(ba,Na,ns),Uo=qs(ba,Na,Eo[Vo].geometry);delete go[ba],delete hs[Na],hs[Xs(mo,Eo[Uo].geometry,!0)]=Uo,Eo[Vo].geometry=null}else ba in hs?qs(ba,Na,ns):Na in go?Zs(ba,Na,ns):(ws(ts),go[ba]=Es-1,hs[Na]=Es-1)}else ws(ts)}return Eo.filter(function(zo){return zo.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ko,go){return ko.sortKey-go.sortKey})}},Ka.prototype.update=function(C,z,J){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(C,z,this.layers,J),this.icon.programConfigurations.updatePaintArrays(C,z,this.layers,J))},Ka.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Ka.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ka.prototype.upload=function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ka.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ka.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ka.prototype.addToLineVertexArray=function(C,z){var J=this.lineVertexArray.length;if(void 0!==C.segment){for(var ce=C.dist(z[C.segment+1]),ye=C.dist(z[C.segment]),Me={},Fe=C.segment+1;Fe<z.length;Fe++)Me[Fe]={x:z[Fe].x,y:z[Fe].y,tileUnitDistanceFromAnchor:ce},Fe<z.length-1&&(ce+=z[Fe+1].dist(z[Fe]));for(var Ye=C.segment||0;Ye>=0;Ye--)Me[Ye]={x:z[Ye].x,y:z[Ye].y,tileUnitDistanceFromAnchor:ye},Ye>0&&(ye+=z[Ye-1].dist(z[Ye]));for(var ot=0;ot<z.length;ot++){var _t=Me[ot];this.lineVertexArray.emplaceBack(_t.x,_t.y,_t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:J,lineLength:this.lineVertexArray.length-J}},Ka.prototype.addSymbols=function(C,z,J,ce,ye,Me,Fe,Ye,ot,_t,Et,Xt){for(var ln=C.indexArray,tn=C.layoutVertexArray,vn=C.segments.prepareSegment(4*z.length,tn,ln,Me.sortKey),In=this.glyphOffsetArray.length,Gn=vn.vertexLength,qn=this.allowVerticalPlacement&&Fe===Fl.vertical?Math.PI/2:0,Kn=Me.text&&Me.text.sections,er=0;er<z.length;er++){var or=z[er],Cr=or.tl,Fr=or.tr,ni=or.bl,Qr=or.br,di=or.tex,ki=or.pixelOffsetTL,Ei=or.pixelOffsetBR,mi=or.minFontScaleX,Ri=or.minFontScaleY,Ii=or.glyphOffset,Mi=or.isSDF,Ca=or.sectionIndex,Sa=vn.vertexLength,za=Ii[1];mf(tn,Ye.x,Ye.y,Cr.x,za+Cr.y,di.x,di.y,J,Mi,ki.x,ki.y,mi,Ri),mf(tn,Ye.x,Ye.y,Fr.x,za+Fr.y,di.x+di.w,di.y,J,Mi,Ei.x,ki.y,mi,Ri),mf(tn,Ye.x,Ye.y,ni.x,za+ni.y,di.x,di.y+di.h,J,Mi,ki.x,Ei.y,mi,Ri),mf(tn,Ye.x,Ye.y,Qr.x,za+Qr.y,di.x+di.w,di.y+di.h,J,Mi,Ei.x,Ei.y,mi,Ri),ap(C.dynamicLayoutVertexArray,Ye,qn),ln.emplaceBack(Sa,Sa+1,Sa+2),ln.emplaceBack(Sa+1,Sa+2,Sa+3),vn.vertexLength+=4,vn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ii[0]),er!==z.length-1&&Ca===z[er+1].sectionIndex||C.programConfigurations.populatePaintArrays(tn.length,Me,Me.index,{},Xt,Kn&&Kn[Ca])}C.placedSymbolArray.emplaceBack(Ye.x,Ye.y,In,this.glyphOffsetArray.length-In,Gn,ot,_t,Ye.segment,J?J[0]:0,J?J[1]:0,ce[0],ce[1],Fe,0,!1,0,Et)},Ka.prototype._addCollisionDebugVertex=function(C,z,J,ce,ye,Me){return z.emplaceBack(0,0),C.emplaceBack(J.x,J.y,ce,ye,Math.round(Me.x),Math.round(Me.y))},Ka.prototype.addCollisionDebugVertices=function(C,z,J,ce,ye,Me,Fe){var Ye=ye.segments.prepareSegment(4,ye.layoutVertexArray,ye.indexArray),ot=Ye.vertexLength,_t=ye.layoutVertexArray,Et=ye.collisionVertexArray,Xt=Fe.anchorX,ln=Fe.anchorY;this._addCollisionDebugVertex(_t,Et,Me,Xt,ln,new n(C,z)),this._addCollisionDebugVertex(_t,Et,Me,Xt,ln,new n(J,z)),this._addCollisionDebugVertex(_t,Et,Me,Xt,ln,new n(J,ce)),this._addCollisionDebugVertex(_t,Et,Me,Xt,ln,new n(C,ce)),Ye.vertexLength+=4;var tn=ye.indexArray;tn.emplaceBack(ot,ot+1),tn.emplaceBack(ot+1,ot+2),tn.emplaceBack(ot+2,ot+3),tn.emplaceBack(ot+3,ot),Ye.primitiveLength+=4},Ka.prototype.addDebugCollisionBoxes=function(C,z,J,ce){for(var ye=C;ye<z;ye++){var Me=this.collisionBoxArray.get(ye);this.addCollisionDebugVertices(Me.x1,Me.y1,Me.x2,Me.y2,ce?this.textCollisionBox:this.iconCollisionBox,Me.anchorPoint,J)}},Ka.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ah(Ol,Zf.members,U),this.iconCollisionBox=new ah(Ol,Zf.members,U);for(var C=0;C<this.symbolInstances.length;C++){var z=this.symbolInstances.get(C);this.addDebugCollisionBoxes(z.textBoxStartIndex,z.textBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.verticalTextBoxStartIndex,z.verticalTextBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.iconBoxStartIndex,z.iconBoxEndIndex,z,!1),this.addDebugCollisionBoxes(z.verticalIconBoxStartIndex,z.verticalIconBoxEndIndex,z,!1)}},Ka.prototype._deserializeCollisionBoxesForSymbol=function(C,z,J,ce,ye,Me,Fe,Ye,ot){for(var _t={},Et=z;Et<J;Et++){var Xt=C.get(Et);_t.textBox={x1:Xt.x1,y1:Xt.y1,x2:Xt.x2,y2:Xt.y2,anchorPointX:Xt.anchorPointX,anchorPointY:Xt.anchorPointY},_t.textFeatureIndex=Xt.featureIndex;break}for(var ln=ce;ln<ye;ln++){var tn=C.get(ln);_t.verticalTextBox={x1:tn.x1,y1:tn.y1,x2:tn.x2,y2:tn.y2,anchorPointX:tn.anchorPointX,anchorPointY:tn.anchorPointY},_t.verticalTextFeatureIndex=tn.featureIndex;break}for(var vn=Me;vn<Fe;vn++){var In=C.get(vn);_t.iconBox={x1:In.x1,y1:In.y1,x2:In.x2,y2:In.y2,anchorPointX:In.anchorPointX,anchorPointY:In.anchorPointY},_t.iconFeatureIndex=In.featureIndex;break}for(var Gn=Ye;Gn<ot;Gn++){var qn=C.get(Gn);_t.verticalIconBox={x1:qn.x1,y1:qn.y1,x2:qn.x2,y2:qn.y2,anchorPointX:qn.anchorPointX,anchorPointY:qn.anchorPointY},_t.verticalIconFeatureIndex=qn.featureIndex;break}return _t},Ka.prototype.deserializeCollisionBoxes=function(C){this.collisionArrays=[];for(var z=0;z<this.symbolInstances.length;z++){var J=this.symbolInstances.get(z);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,J.textBoxStartIndex,J.textBoxEndIndex,J.verticalTextBoxStartIndex,J.verticalTextBoxEndIndex,J.iconBoxStartIndex,J.iconBoxEndIndex,J.verticalIconBoxStartIndex,J.verticalIconBoxEndIndex))}},Ka.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ka.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ka.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ka.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ka.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ka.prototype.addIndicesForPlacedSymbol=function(C,z){for(var J=C.placedSymbolArray.get(z),ce=J.vertexStartIndex+4*J.numGlyphs,ye=J.vertexStartIndex;ye<ce;ye+=4)C.indexArray.emplaceBack(ye,ye+1,ye+2),C.indexArray.emplaceBack(ye+1,ye+2,ye+3)},Ka.prototype.getSortedSymbolIndexes=function(C){if(this.sortedAngle===C&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var z=Math.sin(C),J=Math.cos(C),ce=[],ye=[],Me=[],Fe=0;Fe<this.symbolInstances.length;++Fe){Me.push(Fe);var Ye=this.symbolInstances.get(Fe);ce.push(0|Math.round(z*Ye.anchorX+J*Ye.anchorY)),ye.push(Ye.featureIndex)}return Me.sort(function(ot,_t){return ce[ot]-ce[_t]||ye[_t]-ye[ot]}),Me},Ka.prototype.addToSortKeyRanges=function(C,z){var J=this.sortKeyRanges[this.sortKeyRanges.length-1];J&&J.sortKey===z?J.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:z,symbolInstanceStart:C,symbolInstanceEnd:C+1})},Ka.prototype.sortFeatures=function(C){var z=this;if(this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var J=0,ce=this.symbolInstanceIndexes;J<ce.length;J+=1){var Me=this.symbolInstances.get(ce[J]);this.featureSortOrder.push(Me.featureIndex),[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(function(Fe,Ye,ot){Fe>=0&&ot.indexOf(Fe)===Ye&&z.addIndicesForPlacedSymbol(z.text,Fe)}),Me.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Me.verticalPlacedTextSymbolIndex),Me.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.placedIconSymbolIndex),Me.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},dr("SymbolBucket",Ka,{omit:["layers","collisionBoxArray","features","compareText"]}),Ka.MAX_GLYPHS=65535,Ka.addDynamicAttributes=ap;var sv=new Bs({"symbol-placement":new Di(Ne.layout_symbol["symbol-placement"]),"symbol-spacing":new Di(Ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Di(Ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yi(Ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Di(Ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Di(Ne.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Di(Ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new Di(Ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Di(Ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yi(Ne.layout_symbol["icon-size"]),"icon-text-fit":new Di(Ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Di(Ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yi(Ne.layout_symbol["icon-image"]),"icon-rotate":new Yi(Ne.layout_symbol["icon-rotate"]),"icon-padding":new Di(Ne.layout_symbol["icon-padding"]),"icon-keep-upright":new Di(Ne.layout_symbol["icon-keep-upright"]),"icon-offset":new Yi(Ne.layout_symbol["icon-offset"]),"icon-anchor":new Yi(Ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Di(Ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Di(Ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Di(Ne.layout_symbol["text-rotation-alignment"]),"text-field":new Yi(Ne.layout_symbol["text-field"]),"text-font":new Yi(Ne.layout_symbol["text-font"]),"text-size":new Yi(Ne.layout_symbol["text-size"]),"text-max-width":new Yi(Ne.layout_symbol["text-max-width"]),"text-line-height":new Di(Ne.layout_symbol["text-line-height"]),"text-letter-spacing":new Yi(Ne.layout_symbol["text-letter-spacing"]),"text-justify":new Yi(Ne.layout_symbol["text-justify"]),"text-radial-offset":new Yi(Ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Di(Ne.layout_symbol["text-variable-anchor"]),"text-anchor":new Yi(Ne.layout_symbol["text-anchor"]),"text-max-angle":new Di(Ne.layout_symbol["text-max-angle"]),"text-writing-mode":new Di(Ne.layout_symbol["text-writing-mode"]),"text-rotate":new Yi(Ne.layout_symbol["text-rotate"]),"text-padding":new Di(Ne.layout_symbol["text-padding"]),"text-keep-upright":new Di(Ne.layout_symbol["text-keep-upright"]),"text-transform":new Yi(Ne.layout_symbol["text-transform"]),"text-offset":new Yi(Ne.layout_symbol["text-offset"]),"text-allow-overlap":new Di(Ne.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Di(Ne.layout_symbol["text-ignore-placement"]),"text-optional":new Di(Ne.layout_symbol["text-optional"])}),Yh={paint:new Bs({"icon-opacity":new Yi(Ne.paint_symbol["icon-opacity"]),"icon-color":new Yi(Ne.paint_symbol["icon-color"]),"icon-halo-color":new Yi(Ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yi(Ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yi(Ne.paint_symbol["icon-halo-blur"]),"icon-translate":new Di(Ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new Di(Ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yi(Ne.paint_symbol["text-opacity"]),"text-color":new Yi(Ne.paint_symbol["text-color"],{runtimeType:Wt,getOverride:function(C){return C.textColor},hasOverride:function(C){return!!C.textColor}}),"text-halo-color":new Yi(Ne.paint_symbol["text-halo-color"]),"text-halo-width":new Yi(Ne.paint_symbol["text-halo-width"]),"text-halo-blur":new Yi(Ne.paint_symbol["text-halo-blur"]),"text-translate":new Di(Ne.paint_symbol["text-translate"]),"text-translate-anchor":new Di(Ne.paint_symbol["text-translate-anchor"])}),layout:sv},vf=function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:jt,this.defaultValue=C};vf.prototype.evaluate=function(C){if(C.formattedSection){var z=this.defaultValue.property.overrides;if(z&&z.hasOverride(C.formattedSection))return z.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},vf.prototype.eachChild=function(C){this.defaultValue.isConstant()||C(this.defaultValue.value._styleExpression.expression)},vf.prototype.outputDefined=function(){return!1},vf.prototype.serialize=function(){return null},dr("FormatSectionOverride",vf,{omit:["defaultValue"]});var lv=function(C){function z(J){C.call(this,J,Yh)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.recalculate=function(J,ce){if(C.prototype.recalculate.call(this,J,ce),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var ye=this.layout.get("text-writing-mode");if(ye){for(var Me=[],Fe=0,Ye=ye;Fe<Ye.length;Fe+=1){var ot=Ye[Fe];Me.indexOf(ot)<0&&Me.push(ot)}this.layout._values["text-writing-mode"]=Me}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},z.prototype.getValueAndResolveTokens=function(J,ce,ye,Me){var ot,Fe=this.layout.get(J).evaluate(ce,{},ye,Me),Ye=this._unevaluatedLayout._values[J];return Ye.isDataDriven()||fn(Ye.value)||!Fe?Fe:(ot=ce.properties,Fe.replace(/{([^{}]+)}/g,function(Et,Xt){return Xt in ot?String(ot[Xt]):""}))},z.prototype.createBucket=function(J){return new Ka(J)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype._setPaintOverrides=function(){for(var J=0,ce=Yh.paint.overridableProperties;J<ce.length;J+=1){var ye=ce[J];if(z.hasPaintOverride(this.layout,ye)){var ot,Me=this.paint.get(ye),Fe=new vf(Me),Ye=new un(Fe,Me.property.specification);ot="constant"===Me.value.kind||"source"===Me.value.kind?new pn("source",Ye):new An("composite",Ye,Me.value.zoomStops,Me.value._interpolationType),this.paint._values[ye]=new Oi(Me.property,ot,Me.parameters)}}},z.prototype._handleOverridablePaintPropertyUpdate=function(J,ce,ye){return!(!this.layout||ce.isDataDriven()||ye.isDataDriven())&&z.hasPaintOverride(this.layout,J)},z.hasPaintOverride=function(J,ce){var ye=J.get("text-field"),Me=Yh.paint.properties[ce],Fe=!1,Ye=function(Et){for(var Xt=0,ln=Et;Xt<ln.length;Xt+=1)if(Me.overrides&&Me.overrides.hasOverride(ln[Xt]))return void(Fe=!0)};if("constant"===ye.value.kind&&ye.value.value instanceof Fn)Ye(ye.value.value.sections);else if("source"===ye.value.kind){var ot=function(Et){Fe||(Et instanceof mr&&Mr(Et.value)===Dt?Ye(Et.value.sections):Et instanceof jn?Ye(Et.sections):Et.eachChild(ot))},_t=ye.value;_t._styleExpression&&ot(_t._styleExpression.expression)}return Fe},z}(Zr),uv={paint:new Bs({"background-color":new Di(Ne.paint_background["background-color"]),"background-pattern":new cu(Ne.paint_background["background-pattern"]),"background-opacity":new Di(Ne.paint_background["background-opacity"])})},op=function(C){function z(J){C.call(this,J,uv)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z}(Zr),cv={paint:new Bs({"raster-opacity":new Di(Ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new Di(Ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Di(Ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Di(Ne.paint_raster["raster-brightness-max"]),"raster-saturation":new Di(Ne.paint_raster["raster-saturation"]),"raster-contrast":new Di(Ne.paint_raster["raster-contrast"]),"raster-resampling":new Di(Ne.paint_raster["raster-resampling"]),"raster-fade-duration":new Di(Ne.paint_raster["raster-fade-duration"])})},fv=function(C){function z(J){C.call(this,J,cv)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z}(Zr),cx=function(C){function z(J){C.call(this,J,{}),this.implementation=J}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},z.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},z.prototype.recalculate=function(){},z.prototype.updateTransitions=function(){},z.prototype.hasTransition=function(){},z.prototype.serialize=function(){},z.prototype.onAdd=function(J){this.implementation.onAdd&&this.implementation.onAdd(J,J.painter.context.gl)},z.prototype.onRemove=function(J){this.implementation.onRemove&&this.implementation.onRemove(J,J.painter.context.gl)},z}(Zr),sp={circle:af,heatmap:nx,hillshade:ix,fill:w0,"fill-extrusion":A0,line:Vm,symbol:lv,background:op,raster:fv},N0=self.HTMLImageElement,B0=self.HTMLCanvasElement,Oc=self.HTMLVideoElement,j0=self.ImageData,Zh=self.ImageBitmap,Rc=function(C,z,J,ce){this.context=C,this.format=J,this.texture=C.gl.createTexture(),this.update(z,ce)};Rc.prototype.update=function(C,z,J){var ce=C.width,ye=C.height,Me=!(this.size&&this.size[0]===ce&&this.size[1]===ye||J),Fe=this.context,Ye=Fe.gl;if(this.useMipmap=Boolean(z&&z.useMipmap),Ye.bindTexture(Ye.TEXTURE_2D,this.texture),Fe.pixelStoreUnpackFlipY.set(!1),Fe.pixelStoreUnpack.set(1),Fe.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ye.RGBA&&(!z||!1!==z.premultiply)),Me)this.size=[ce,ye],C instanceof N0||C instanceof B0||C instanceof Oc||C instanceof j0||Zh&&C instanceof Zh?Ye.texImage2D(Ye.TEXTURE_2D,0,this.format,this.format,Ye.UNSIGNED_BYTE,C):Ye.texImage2D(Ye.TEXTURE_2D,0,this.format,ce,ye,0,this.format,Ye.UNSIGNED_BYTE,C.data);else{var ot=J||{x:0,y:0},_t=ot.x,Et=ot.y;C instanceof N0||C instanceof B0||C instanceof Oc||C instanceof j0||Zh&&C instanceof Zh?Ye.texSubImage2D(Ye.TEXTURE_2D,0,_t,Et,Ye.RGBA,Ye.UNSIGNED_BYTE,C):Ye.texSubImage2D(Ye.TEXTURE_2D,0,_t,Et,ce,ye,Ye.RGBA,Ye.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ye.generateMipmap(Ye.TEXTURE_2D)},Rc.prototype.bind=function(C,z,J){var ce=this.context.gl;ce.bindTexture(ce.TEXTURE_2D,this.texture),J!==ce.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(J=ce.LINEAR),C!==this.filter&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,C),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,J||C),this.filter=C),z!==this.wrap&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,z),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,z),this.wrap=z)},Rc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Rc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var lp=function(C){var z=this;this._callback=C,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){z._triggered=!1,z._callback()})};lp.prototype.trigger=function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},lp.prototype.remove=function(){delete this._channel,this._callback=function(){}};var yf=function(C,z,J){this.target=C,this.parent=z,this.mapId=J,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},v(["receive","process"],this),this.invoker=new lp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=D()?C:self};function up(C,z,J){var ce=2*Math.PI*6378137/256/Math.pow(2,J);return[C*ce-2*Math.PI*6378137/2,z*ce-2*Math.PI*6378137/2]}yf.prototype.send=function(C,z,J,ce,ye){var Me=this;void 0===ye&&(ye=!1);var Fe=Math.round(1e18*Math.random()).toString(36).substring(0,10);J&&(this.callbacks[Fe]=J);var Ye=V(this.globalScope)?void 0:[];return this.target.postMessage({id:Fe,type:C,hasCallback:!!J,targetMapId:ce,mustQueue:ye,sourceMapId:this.mapId,data:xi(z,Ye)},Ye),{cancel:function(){J&&delete Me.callbacks[Fe],Me.target.postMessage({id:Fe,type:"<cancel>",targetMapId:ce,sourceMapId:Me.mapId})}}},yf.prototype.receive=function(C){var z=C.data,J=z.id;if(J&&(!z.targetMapId||this.mapId===z.targetMapId))if("<cancel>"===z.type){delete this.tasks[J];var ce=this.cancelCallbacks[J];delete this.cancelCallbacks[J],ce&&ce()}else D()||z.mustQueue?(this.tasks[J]=z,this.taskQueue.push(J),this.invoker.trigger()):this.processTask(J,z)},yf.prototype.process=function(){if(this.taskQueue.length){var C=this.taskQueue.shift(),z=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),z&&this.processTask(C,z)}},yf.prototype.processTask=function(C,z){var J=this;if("<response>"===z.type){var ce=this.callbacks[C];delete this.callbacks[C],ce&&(z.error?ce(Ji(z.error)):ce(null,Ji(z.data)))}else{var ye=!1,Me=V(this.globalScope)?void 0:[],Fe=z.hasCallback?function(Et,Xt){ye=!0,delete J.cancelCallbacks[C],J.target.postMessage({id:C,type:"<response>",sourceMapId:J.mapId,error:Et?xi(Et):null,data:xi(Xt,Me)},Me)}:function(Et){ye=!0},Ye=null,ot=Ji(z.data);if(this.parent[z.type])Ye=this.parent[z.type](z.sourceMapId,ot,Fe);else if(this.parent.getWorkerSource){var _t=z.type.split(".");Ye=this.parent.getWorkerSource(z.sourceMapId,_t[0],ot.source)[_t[1]](ot,Fe)}else Fe(new Error("Could not find function "+z.type));!ye&&Ye&&Ye.cancel&&(this.cancelCallbacks[C]=Ye.cancel)}},yf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var cs=function(C,z){C&&(z?this.setSouthWest(C).setNorthEast(z):4===C.length?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))};cs.prototype.setNorthEast=function(C){return this._ne=C instanceof So?new So(C.lng,C.lat):So.convert(C),this},cs.prototype.setSouthWest=function(C){return this._sw=C instanceof So?new So(C.lng,C.lat):So.convert(C),this},cs.prototype.extend=function(C){var z,J,ce=this._sw,ye=this._ne;if(C instanceof So)z=C,J=C;else{if(!(C instanceof cs))return Array.isArray(C)?4===C.length||C.every(Array.isArray)?this.extend(cs.convert(C)):this.extend(So.convert(C)):this;if(J=C._ne,!(z=C._sw)||!J)return this}return ce||ye?(ce.lng=Math.min(z.lng,ce.lng),ce.lat=Math.min(z.lat,ce.lat),ye.lng=Math.max(J.lng,ye.lng),ye.lat=Math.max(J.lat,ye.lat)):(this._sw=new So(z.lng,z.lat),this._ne=new So(J.lng,J.lat)),this},cs.prototype.getCenter=function(){return new So((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},cs.prototype.getSouthWest=function(){return this._sw},cs.prototype.getNorthEast=function(){return this._ne},cs.prototype.getNorthWest=function(){return new So(this.getWest(),this.getNorth())},cs.prototype.getSouthEast=function(){return new So(this.getEast(),this.getSouth())},cs.prototype.getWest=function(){return this._sw.lng},cs.prototype.getSouth=function(){return this._sw.lat},cs.prototype.getEast=function(){return this._ne.lng},cs.prototype.getNorth=function(){return this._ne.lat},cs.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},cs.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},cs.prototype.isEmpty=function(){return!(this._sw&&this._ne)},cs.prototype.contains=function(C){var z=So.convert(C),J=z.lng,ce=z.lat,Me=this._sw.lng<=J&&J<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Me=this._sw.lng>=J&&J>=this._ne.lng),this._sw.lat<=ce&&ce<=this._ne.lat&&Me},cs.convert=function(C){return!C||C instanceof cs?C:new cs(C)};var So=function(C,z){if(isNaN(C)||isNaN(z))throw new Error("Invalid LngLat object: ("+C+", "+z+")");if(this.lng=+C,this.lat=+z,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};So.prototype.wrap=function(){return new So(f(this.lng,-180,180),this.lat)},So.prototype.toArray=function(){return[this.lng,this.lat]},So.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},So.prototype.distanceTo=function(C){var z=Math.PI/180,J=this.lat*z,ce=C.lat*z,ye=Math.sin(J)*Math.sin(ce)+Math.cos(J)*Math.cos(ce)*Math.cos((C.lng-this.lng)*z);return 6371008.8*Math.acos(Math.min(ye,1))},So.prototype.toBounds=function(C){void 0===C&&(C=0);var z=360*C/40075017,J=z/Math.cos(Math.PI/180*this.lat);return new cs(new So(this.lng-J,this.lat-z),new So(this.lng+J,this.lat+z))},So.convert=function(C){if(C instanceof So)return C;if(Array.isArray(C)&&(2===C.length||3===C.length))return new So(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&"object"==typeof C&&null!==C)return new So(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var V0=2*Math.PI*6371008.8;function U0(C){return V0*Math.cos(C*Math.PI/180)}function cp(C){return(180+C)/360}function H0(C){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C*Math.PI/360)))/360}function q0(C,z){return C/U0(z)}function fp(C){return 360/Math.PI*Math.atan(Math.exp((180-360*C)*Math.PI/180))-90}var nu=function(C,z,J){void 0===J&&(J=0),this.x=+C,this.y=+z,this.z=+J};nu.fromLngLat=function(C,z){void 0===z&&(z=0);var J=So.convert(C);return new nu(cp(J.lng),H0(J.lat),q0(z,J.lat))},nu.prototype.toLngLat=function(){return new So(360*this.x-180,fp(this.y))},nu.prototype.toAltitude=function(){return this.z*U0(fp(this.y))},nu.prototype.meterInMercatorCoordinateUnits=function(){return 1/V0*(C=fp(this.y),1/Math.cos(C*Math.PI/180));var C};var bl=function(C,z,J){this.z=C,this.x=z,this.y=J,this.key=xf(0,C,C,z,J)};bl.prototype.equals=function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},bl.prototype.url=function(C,z){var J,ce,ye,Me,Fe,Ye=(ce=this.y,ye=this.z,Me=up(256*(J=this.x),256*(ce=Math.pow(2,ye)-ce-1),ye),Fe=up(256*(J+1),256*(ce+1),ye),Me[0]+","+Me[1]+","+Fe[0]+","+Fe[1]),ot=function(_t,Et,Xt){for(var ln,tn="",vn=_t;vn>0;vn--)tn+=(Et&(ln=1<<vn-1)?1:0)+(Xt&ln?2:0);return tn}(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===z?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ot).replace("{bbox-epsg-3857}",Ye)},bl.prototype.getTilePoint=function(C){var z=Math.pow(2,this.z);return new n(8192*(C.x*z-this.x),8192*(C.y*z-this.y))},bl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var hv=function(C,z){this.wrap=C,this.canonical=z,this.key=xf(C,z.z,z.z,z.x,z.y)},_s=function(C,z,J,ce,ye){this.overscaledZ=C,this.wrap=z,this.canonical=new bl(J,+ce,+ye),this.key=xf(z,C,J,ce,ye)};function xf(C,z,J,ce,ye){(C*=2)<0&&(C=-1*C-1);var Me=1<<J;return(Me*Me*C+Me*ye+ce).toString(36)+J.toString(36)+z.toString(36)}_s.prototype.equals=function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},_s.prototype.scaledTo=function(C){var z=this.canonical.z-C;return C>this.canonical.z?new _s(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new _s(C,this.wrap,C,this.canonical.x>>z,this.canonical.y>>z)},_s.prototype.calculateScaledKey=function(C,z){var J=this.canonical.z-C;return C>this.canonical.z?xf(this.wrap*+z,C,this.canonical.z,this.canonical.x,this.canonical.y):xf(this.wrap*+z,C,C,this.canonical.x>>J,this.canonical.y>>J)},_s.prototype.isChildOf=function(C){if(C.wrap!==this.wrap)return!1;var z=this.canonical.z-C.canonical.z;return 0===C.overscaledZ||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>z&&C.canonical.y===this.canonical.y>>z},_s.prototype.children=function(C){if(this.overscaledZ>=C)return[new _s(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var z=this.canonical.z+1,J=2*this.canonical.x,ce=2*this.canonical.y;return[new _s(z,this.wrap,z,J,ce),new _s(z,this.wrap,z,J+1,ce),new _s(z,this.wrap,z,J,ce+1),new _s(z,this.wrap,z,J+1,ce+1)]},_s.prototype.isLessThan=function(C){return this.wrap<C.wrap||!(this.wrap>C.wrap)&&(this.overscaledZ<C.overscaledZ||!(this.overscaledZ>C.overscaledZ)&&(this.canonical.x<C.canonical.x||!(this.canonical.x>C.canonical.x)&&this.canonical.y<C.canonical.y))},_s.prototype.wrapped=function(){return new _s(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},_s.prototype.unwrapTo=function(C){return new _s(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},_s.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},_s.prototype.toUnwrapped=function(){return new hv(this.wrap,this.canonical)},_s.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},_s.prototype.getTilePoint=function(C){return this.canonical.getTilePoint(new nu(C.x-this.wrap,C.y))},dr("CanonicalTileID",bl),dr("OverscaledTileID",_s,{omit:["posMatrix"]});var fc=function(C,z,J){if(this.uid=C,z.height!==z.width)throw new RangeError("DEM tiles must be square");if(J&&"mapbox"!==J&&"terrarium"!==J)return S('"'+J+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=z.height;var ce=this.dim=z.height-2;this.data=new Uint32Array(z.data.buffer),this.encoding=J||"mapbox";for(var ye=0;ye<ce;ye++)this.data[this._idx(-1,ye)]=this.data[this._idx(0,ye)],this.data[this._idx(ce,ye)]=this.data[this._idx(ce-1,ye)],this.data[this._idx(ye,-1)]=this.data[this._idx(ye,0)],this.data[this._idx(ye,ce)]=this.data[this._idx(ye,ce-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ce,-1)]=this.data[this._idx(ce-1,0)],this.data[this._idx(-1,ce)]=this.data[this._idx(0,ce-1)],this.data[this._idx(ce,ce)]=this.data[this._idx(ce-1,ce-1)]};fc.prototype.get=function(C,z){var J=new Uint8Array(this.data.buffer),ce=4*this._idx(C,z);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(J[ce],J[ce+1],J[ce+2])},fc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},fc.prototype._idx=function(C,z){if(C<-1||C>=this.dim+1||z<-1||z>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(z+1)*this.stride+(C+1)},fc.prototype._unpackMapbox=function(C,z,J){return(256*C*256+256*z+J)/10-1e4},fc.prototype._unpackTerrarium=function(C,z,J){return 256*C+z+J/256-32768},fc.prototype.getPixels=function(){return new ml({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},fc.prototype.backfillBorder=function(C,z,J){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var ce=z*this.dim,ye=z*this.dim+this.dim,Me=J*this.dim,Fe=J*this.dim+this.dim;switch(z){case-1:ce=ye-1;break;case 1:ye=ce+1}switch(J){case-1:Me=Fe-1;break;case 1:Fe=Me+1}for(var Ye=-z*this.dim,ot=-J*this.dim,_t=Me;_t<Fe;_t++)for(var Et=ce;Et<ye;Et++)this.data[this._idx(Et,_t)]=C.data[this._idx(Et+Ye,_t+ot)]},dr("DEMData",fc);var _l=function(C){this._stringToNumber={},this._numberToString=[];for(var z=0;z<C.length;z++){var J=C[z];this._stringToNumber[J]=z,this._numberToString[z]=J}};_l.prototype.encode=function(C){return this._stringToNumber[C]},_l.prototype.decode=function(C){return this._numberToString[C]};var bf=function(C,z,J,ce,ye){this.type="Feature",this._vectorTileFeature=C,C._z=z,C._x=J,C._y=ce,this.properties=C.properties,this.id=ye},oh={geometry:{configurable:!0}};oh.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},oh.geometry.set=function(C){this._geometry=C},bf.prototype.toJSON=function(){var C={geometry:this.geometry};for(var z in this)"_geometry"!==z&&"_vectorTileFeature"!==z&&(C[z]=this[z]);return C},Object.defineProperties(bf.prototype,oh);var _f=function(){this.state={},this.stateChanges={},this.deletedStates={}};_f.prototype.updateState=function(C,z,J){var ce=String(z);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][ce]=this.stateChanges[C][ce]||{},p(this.stateChanges[C][ce],J),null===this.deletedStates[C])for(var ye in this.deletedStates[C]={},this.state[C])ye!==ce&&(this.deletedStates[C][ye]=null);else if(this.deletedStates[C]&&null===this.deletedStates[C][ce])for(var Me in this.deletedStates[C][ce]={},this.state[C][ce])J[Me]||(this.deletedStates[C][ce][Me]=null);else for(var Fe in J)this.deletedStates[C]&&this.deletedStates[C][ce]&&null===this.deletedStates[C][ce][Fe]&&delete this.deletedStates[C][ce][Fe]},_f.prototype.removeFeatureState=function(C,z,J){if(null!==this.deletedStates[C]){var ce=String(z);if(this.deletedStates[C]=this.deletedStates[C]||{},J&&void 0!==z)null!==this.deletedStates[C][ce]&&(this.deletedStates[C][ce]=this.deletedStates[C][ce]||{},this.deletedStates[C][ce][J]=null);else if(void 0!==z)if(this.stateChanges[C]&&this.stateChanges[C][ce])for(J in this.deletedStates[C][ce]={},this.stateChanges[C][ce])this.deletedStates[C][ce][J]=null;else this.deletedStates[C][ce]=null;else this.deletedStates[C]=null}},_f.prototype.getState=function(C,z){var J=String(z),Me=p({},(this.state[C]||{})[J],(this.stateChanges[C]||{})[J]);if(null===this.deletedStates[C])return{};if(this.deletedStates[C]){var Fe=this.deletedStates[C][z];if(null===Fe)return{};for(var Ye in Fe)delete Me[Ye]}return Me},_f.prototype.initializeTileState=function(C,z){C.setFeatureState(this.state,z)},_f.prototype.coalesceChanges=function(C,z){var J={};for(var ce in this.stateChanges){this.state[ce]=this.state[ce]||{};var ye={};for(var Me in this.stateChanges[ce])this.state[ce][Me]||(this.state[ce][Me]={}),p(this.state[ce][Me],this.stateChanges[ce][Me]),ye[Me]=this.state[ce][Me];J[ce]=ye}for(var Fe in this.deletedStates){this.state[Fe]=this.state[Fe]||{};var Ye={};if(null===this.deletedStates[Fe])for(var ot in this.state[Fe])Ye[ot]={},this.state[Fe][ot]={};else for(var _t in this.deletedStates[Fe]){if(null===this.deletedStates[Fe][_t])this.state[Fe][_t]={};else for(var Et=0,Xt=Object.keys(this.deletedStates[Fe][_t]);Et<Xt.length;Et+=1)delete this.state[Fe][_t][Xt[Et]];Ye[_t]=this.state[Fe][_t]}J[Fe]=J[Fe]||{},p(J[Fe],Ye)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(J).length)for(var tn in C)C[tn].setFeatureState(J,z)};var Mu=function(C,z){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new Tr(8192,16,0),this.grid3D=new Tr(8192,16,0),this.featureIndexArray=new Lt,this.promoteId=z};function wf(C,z,J,ce,ye){return M(C,function(Me,Fe){var Ye=z instanceof Ll?z.get(Fe):null;return Ye&&Ye.evaluate?Ye.evaluate(J,ce,ye):Ye})}function hp(C){for(var z=1/0,J=1/0,ce=-1/0,ye=-1/0,Me=0,Fe=C;Me<Fe.length;Me+=1){var Ye=Fe[Me];z=Math.min(z,Ye.x),J=Math.min(J,Ye.y),ce=Math.max(ce,Ye.x),ye=Math.max(ye,Ye.y)}return{minX:z,minY:J,maxX:ce,maxY:ye}}function G0(C,z){return z-C}Mu.prototype.insert=function(C,z,J,ce,ye,Me){var Fe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(J,ce,ye);for(var Ye=Me?this.grid3D:this.grid,ot=0;ot<z.length;ot++){for(var _t=z[ot],Et=[1/0,1/0,-1/0,-1/0],Xt=0;Xt<_t.length;Xt++){var ln=_t[Xt];Et[0]=Math.min(Et[0],ln.x),Et[1]=Math.min(Et[1],ln.y),Et[2]=Math.max(Et[2],ln.x),Et[3]=Math.max(Et[3],ln.y)}Et[0]<8192&&Et[1]<8192&&Et[2]>=0&&Et[3]>=0&&Ye.insert(Fe,Et[0],Et[1],Et[2],Et[3])}},Mu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new cf.VectorTile(new Dc(this.rawTileData)).layers,this.sourceLayerCoder=new _l(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Mu.prototype.query=function(C,z,J,ce){var ye=this;this.loadVTLayers();for(var Me=C.params||{},Fe=8192/C.tileSize/C.scale,Ye=Pi(Me.filter),ot=C.queryGeometry,_t=C.queryPadding*Fe,Et=hp(ot),Xt=this.grid.query(Et.minX-_t,Et.minY-_t,Et.maxX+_t,Et.maxY+_t),ln=hp(C.cameraQueryGeometry),vn=0,In=this.grid3D.query(ln.minX-_t,ln.minY-_t,ln.maxX+_t,ln.maxY+_t,function(Cr,Fr,ni,Qr){return function(di,ki,Ei,mi,Ri){for(var Ii=0,Mi=di;Ii<Mi.length;Ii+=1){var Ca=Mi[Ii];if(ki<=Ca.x&&Ei<=Ca.y&&mi>=Ca.x&&Ri>=Ca.y)return!0}var Sa=[new n(ki,Ei),new n(ki,Ri),new n(mi,Ri),new n(mi,Ei)];if(di.length>2)for(var za=0,Zi=Sa;za<Zi.length;za+=1)if(dl(di,Zi[za]))return!0;for(var Da=0;Da<di.length-1;Da++)if(ac(di[Da],di[Da+1],Sa))return!0;return!1}(C.cameraQueryGeometry,Cr-_t,Fr-_t,ni+_t,Qr+_t)});vn<In.length;vn+=1)Xt.push(In[vn]);Xt.sort(G0);for(var qn,Kn={},er=function(Cr){var Fr=Xt[Cr];if(Fr!==qn){qn=Fr;var ni=ye.featureIndexArray.get(Fr),Qr=null;ye.loadMatchingFeature(Kn,ni.bucketIndex,ni.sourceLayerIndex,ni.featureIndex,Ye,Me.layers,Me.availableImages,z,J,ce,function(di,ki,Ei){return Qr||(Qr=Mo(di)),ki.queryIntersectsFeature(ot,di,Ei,Qr,ye.z,C.transform,Fe,C.pixelPosMatrix)})}},or=0;or<Xt.length;or++)er(or);return Kn},Mu.prototype.loadMatchingFeature=function(C,z,J,ce,ye,Me,Fe,Ye,ot,_t,Et){var Xt=this.bucketLayerIDs[z];if(!Me||function(ni,Qr){for(var di=0;di<ni.length;di++)if(Qr.indexOf(ni[di])>=0)return!0;return!1}(Me,Xt)){var ln=this.sourceLayerCoder.decode(J),tn=this.vtLayers[ln].feature(ce);if(ye.filter(new da(this.tileID.overscaledZ),tn))for(var vn=this.getId(tn,ln),In=0;In<Xt.length;In++){var Gn=Xt[In];if(!(Me&&Me.indexOf(Gn)<0)){var qn=Ye[Gn];if(qn){var Kn={};void 0!==vn&&_t&&(Kn=_t.getState(qn.sourceLayer||"_geojsonTileLayer",vn));var er=ot[Gn];er.paint=wf(er.paint,qn.paint,tn,Kn,Fe),er.layout=wf(er.layout,qn.layout,tn,Kn,Fe);var or=!Et||Et(tn,qn,Kn);if(or){var Cr=new bf(tn,this.z,this.x,this.y,vn);Cr.layer=er;var Fr=C[Gn];void 0===Fr&&(Fr=C[Gn]=[]),Fr.push({featureIndex:ce,feature:Cr,intersectionZ:or})}}}}}},Mu.prototype.lookupSymbolFeatures=function(C,z,J,ce,ye,Me,Fe,Ye){var ot={};this.loadVTLayers();for(var _t=Pi(ye),Et=0,Xt=C;Et<Xt.length;Et+=1)this.loadMatchingFeature(ot,J,ce,Xt[Et],_t,Me,Fe,Ye,z);return ot},Mu.prototype.hasLayer=function(C){for(var z=0,J=this.bucketLayerIDs;z<J.length;z+=1)for(var ce=0,ye=J[z];ce<ye.length;ce+=1)if(C===ye[ce])return!0;return!1},Mu.prototype.getId=function(C,z){var J=C.id;return this.promoteId&&"boolean"==typeof(J=C.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[z]])&&(J=Number(J)),J},dr("FeatureIndex",Mu,{omit:["rawTileData","sourceLayerCoder"]});var fs=function(C,z){this.tileID=C,this.uid=m(),this.uses=0,this.tileSize=z,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};fs.prototype.registerFadeDuration=function(C){var z=C+this.timeAdded;z<H.now()||this.fadeEndTime&&z<this.fadeEndTime||(this.fadeEndTime=z)},fs.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},fs.prototype.loadVectorData=function(C,z,J){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",C){for(var ce in C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=function(_t,Et){var Xt={};if(!Et)return Xt;for(var ln=function(){var In=vn[tn],Gn=In.layerIds.map(function(or){return Et.getLayer(or)}).filter(Boolean);if(0!==Gn.length){In.layers=Gn,In.stateDependentLayerIds&&(In.stateDependentLayers=In.stateDependentLayerIds.map(function(or){return Gn.filter(function(Cr){return Cr.id===or})[0]}));for(var qn=0,Kn=Gn;qn<Kn.length;qn+=1)Xt[Kn[qn].id]=In}},tn=0,vn=_t;tn<vn.length;tn+=1)ln();return Xt}(C.buckets,z.style),this.hasSymbolBuckets=!1,this.buckets){var ye=this.buckets[ce];if(ye instanceof Ka){if(this.hasSymbolBuckets=!0,!J)break;ye.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Me in this.buckets){var Fe=this.buckets[Me];if(Fe instanceof Ka&&Fe.hasRTLText){this.hasRTLText=!0,Fo.isLoading()||Fo.isLoaded()||"deferred"!==Yo()||Va();break}}for(var Ye in this.queryPadding=0,this.buckets){var ot=this.buckets[Ye];this.queryPadding=Math.max(this.queryPadding,z.style.getLayer(Ye).queryRadius(ot))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)}else this.collisionBoxArray=new Ae},fs.prototype.unloadVectorData=function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},fs.prototype.getBucket=function(C){return this.buckets[C.id]},fs.prototype.upload=function(C){for(var z in this.buckets){var J=this.buckets[z];J.uploadPending()&&J.upload(C)}var ce=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Rc(C,this.imageAtlas.image,ce.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Rc(C,this.glyphAtlasImage,ce.ALPHA),this.glyphAtlasImage=null)},fs.prototype.prepare=function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},fs.prototype.queryRenderedFeatures=function(C,z,J,ce,ye,Me,Fe,Ye,ot,_t){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ce,cameraQueryGeometry:ye,scale:Me,tileSize:this.tileSize,pixelPosMatrix:_t,transform:Ye,params:Fe,queryPadding:this.queryPadding*ot},C,z,J):{}},fs.prototype.querySourceFeatures=function(C,z){var J=this.latestFeatureIndex;if(J&&J.rawTileData){var ce=J.loadVTLayers(),ye=z?z.sourceLayer:"",Me=ce._geojsonTileLayer||ce[ye];if(Me)for(var Fe=Pi(z&&z.filter),Ye=this.tileID.canonical,ot=Ye.z,_t=Ye.x,Et=Ye.y,Xt={z:ot,x:_t,y:Et},ln=0;ln<Me.length;ln++){var tn=Me.feature(ln);if(Fe.filter(new da(this.tileID.overscaledZ),tn)){var vn=J.getId(tn,ye),In=new bf(tn,ot,_t,Et,vn);In.tile=Xt,C.push(In)}}}},fs.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},fs.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},fs.prototype.setExpiryData=function(C){var z=this.expirationTime;if(C.cacheControl){var J=L(C.cacheControl);J["max-age"]&&(this.expirationTime=Date.now()+1e3*J["max-age"])}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var ce=Date.now(),ye=!1;if(this.expirationTime>ce)ye=!1;else if(z)if(this.expirationTime<z)ye=!0;else{var Me=this.expirationTime-z;Me?this.expirationTime=ce+Math.max(Me,3e4):ye=!0}else ye=!0;ye?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},fs.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},fs.prototype.setFeatureState=function(C,z){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(C).length){var J=this.latestFeatureIndex.loadVTLayers();for(var ce in this.buckets)if(z.style.hasLayer(ce)){var ye=this.buckets[ce],Me=ye.layers[0].sourceLayer||"_geojsonTileLayer",Fe=J[Me],Ye=C[Me];if(Fe&&Ye&&0!==Object.keys(Ye).length){ye.update(Ye,Fe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ot=z&&z.style&&z.style.getLayer(ce);ot&&(this.queryPadding=Math.max(this.queryPadding,ot.queryRadius(ye)))}}}},fs.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},fs.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<H.now()},fs.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},fs.prototype.setHoldDuration=function(C){this.symbolFadeHoldUntil=H.now()+C},fs.prototype.setDependencies=function(C,z){for(var J={},ce=0,ye=z;ce<ye.length;ce+=1)J[ye[ce]]=!0;this.dependencies[C]=J},fs.prototype.hasDependency=function(C,z){for(var J=0,ce=C;J<ce.length;J+=1){var Me=this.dependencies[ce[J]];if(Me)for(var Fe=0,Ye=z;Fe<Ye.length;Fe+=1)if(Me[Ye[Fe]])return!0}return!1};var Au=self.performance,dp=function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},Au.mark(this._marks.start)};dp.prototype.finish=function(){Au.mark(this._marks.end);var C=Au.getEntriesByName(this._marks.measure);return 0===C.length&&(Au.measure(this._marks.measure,this._marks.start,this._marks.end),C=Au.getEntriesByName(this._marks.measure),Au.clearMarks(this._marks.start),Au.clearMarks(this._marks.end),Au.clearMeasures(this._marks.measure)),C},e.Actor=yf,e.AlphaImage=xa,e.CanonicalTileID=bl,e.CollisionBoxArray=Ae,e.Color=Tn,e.DEMData=fc,e.DataConstantProperty=Di,e.DictionaryCoder=_l,e.EXTENT=8192,e.ErrorEvent=ze,e.EvaluationParameters=da,e.Event=Le,e.Evented=je,e.FeatureIndex=Mu,e.FillBucket=hu,e.FillExtrusionBucket=Os,e.ImageAtlas=Hh,e.ImagePosition=Uh,e.LineBucket=Rs,e.LngLat=So,e.LngLatBounds=cs,e.MercatorCoordinate=nu,e.ONE_EM=24,e.OverscaledTileID=_s,e.Point=n,e.Point$1=n,e.Properties=Bs,e.Protobuf=Dc,e.RGBAImage=ml,e.RequestManager=ue,e.RequestPerformance=dp,e.ResourceType=Ct,e.SegmentVector=Zt,e.SourceFeatureState=_f,e.StructArrayLayout1ui2=X,e.StructArrayLayout2f1f2i16=Ul,e.StructArrayLayout2i4=ls,e.StructArrayLayout3ui6=us,e.StructArrayLayout4i8=To,e.SymbolBucket=Ka,e.Texture=Rc,e.Tile=fs,e.Transitionable=Tl,e.Uniform1f=ar,e.Uniform1i=Si,e.Uniform2f=jr,e.Uniform3f=gi,e.Uniform4f=ui,e.UniformColor=Ti,e.UniformMatrix4f=ia,e.UnwrappedTileID=hv,e.ValidationError=st,e.WritingMode=Fl,e.ZoomHistory=la,e.add=function(C,z,J){return C[0]=z[0]+J[0],C[1]=z[1]+J[1],C[2]=z[2]+J[2],C},e.addDynamicAttributes=ap,e.asyncAll=function(C,z,J){if(!C.length)return J(null,[]);var ce=C.length,ye=new Array(C.length),Me=null;C.forEach(function(Fe,Ye){z(Fe,function(ot,_t){ot&&(Me=ot),ye[Ye]=_t,0==--ce&&J(Me,ye)})})},e.bezier=s,e.bindAll=v,e.browser=H,e.cacheEntryPossiblyAdded=function(C){++ft>Je&&(C.getActor().send("enforceCacheSizeLimit",qe),ft=0)},e.clamp=u,e.clearTileCache=function(C){var z=self.caches.delete("mapbox-tiles");C&&z.catch(C).then(function(){return C()})},e.clipLine=O0,e.clone=function(C){var z=new pl(16);return z[0]=C[0],z[1]=C[1],z[2]=C[2],z[3]=C[3],z[4]=C[4],z[5]=C[5],z[6]=C[6],z[7]=C[7],z[8]=C[8],z[9]=C[9],z[10]=C[10],z[11]=C[11],z[12]=C[12],z[13]=C[13],z[14]=C[14],z[15]=C[15],z},e.clone$1=E,e.clone$2=function(C){var z=new pl(3);return z[0]=C[0],z[1]=C[1],z[2]=C[2],z},e.collisionCircleLayout=Zd,e.config=G,e.create=function(){var C=new pl(16);return pl!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C},e.create$1=function(){var C=new pl(9);return pl!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[5]=0,C[6]=0,C[7]=0),C[0]=1,C[4]=1,C[8]=1,C},e.create$2=function(){var C=new pl(4);return pl!=Float32Array&&(C[1]=0,C[2]=0),C[0]=1,C[3]=1,C},e.createCommonjsModule=r,e.createExpression=on,e.createLayout=Ha,e.createStyleLayer=function(C){return"custom"===C.type?new cx(C):new sp[C.type](C)},e.cross=function(C,z,J){var ce=z[0],ye=z[1],Me=z[2],Fe=J[0],Ye=J[1],ot=J[2];return C[0]=ye*ot-Me*Ye,C[1]=Me*Fe-ce*ot,C[2]=ce*Ye-ye*Fe,C},e.deepEqual=function C(z,J){if(Array.isArray(z)){if(!Array.isArray(J)||z.length!==J.length)return!1;for(var ce=0;ce<z.length;ce++)if(!C(z[ce],J[ce]))return!1;return!0}if("object"==typeof z&&null!==z&&null!==J){if("object"!=typeof J||Object.keys(z).length!==Object.keys(J).length)return!1;for(var ye in z)if(!C(z[ye],J[ye]))return!1;return!0}return z===J},e.dot=function(C,z){return C[0]*z[0]+C[1]*z[1]+C[2]*z[2]},e.dot$1=function(C,z){return C[0]*z[0]+C[1]*z[1]+C[2]*z[2]+C[3]*z[3]},e.ease=i,e.emitValidationErrors=zr,e.endsWith=A,e.enforceCacheSizeLimit=function(C){lt(),Re&&Re.then(function(z){z.keys().then(function(J){for(var ce=0;ce<J.length-C;ce++)z.delete(J[ce])})})},e.evaluateSizeForFeature=tp,e.evaluateSizeForZoom=I0,e.evaluateVariableOffset=gf,e.evented=Fa,e.extend=p,e.featureFilter=Pi,e.filterObject=k,e.fromRotation=function(C,z){var J=Math.sin(z),ce=Math.cos(z);return C[0]=ce,C[1]=J,C[2]=0,C[3]=-J,C[4]=ce,C[5]=0,C[6]=0,C[7]=0,C[8]=1,C},e.getAnchorAlignment=Qf,e.getAnchorJustification=nl,e.getArrayBuffer=Rt,e.getImage=Qe,e.getJSON=function(C,z){return ut(p(C,{type:"json"}),z)},e.getRTLTextPluginStatus=Yo,e.getReferrer=Ft,e.getVideo=function(C,z){var J,ce,ye=self.document.createElement("video");ye.muted=!0,ye.onloadstart=function(){z(null,ye)};for(var Me=0;Me<C.length;Me++){var Fe=self.document.createElement("source");J=C[Me],ce=void 0,(ce=self.document.createElement("a")).href=J,(ce.protocol!==self.document.location.protocol||ce.host!==self.document.location.host)&&(ye.crossOrigin="Anonymous"),Fe.src=C[Me],ye.appendChild(Fe)}return{cancel:function(){}}},e.identity=nf,e.invert=function(C,z){var J=z[0],ce=z[1],ye=z[2],Me=z[3],Fe=z[4],Ye=z[5],ot=z[6],_t=z[7],Et=z[8],Xt=z[9],ln=z[10],tn=z[11],vn=z[12],In=z[13],Gn=z[14],qn=z[15],Kn=J*Ye-ce*Fe,er=J*ot-ye*Fe,or=J*_t-Me*Fe,Cr=ce*ot-ye*Ye,Fr=ce*_t-Me*Ye,ni=ye*_t-Me*ot,Qr=Et*In-Xt*vn,di=Et*Gn-ln*vn,ki=Et*qn-tn*vn,Ei=Xt*Gn-ln*In,mi=Xt*qn-tn*In,Ri=ln*qn-tn*Gn,Ii=Kn*Ri-er*mi+or*Ei+Cr*ki-Fr*di+ni*Qr;return Ii?(C[0]=(Ye*Ri-ot*mi+_t*Ei)*(Ii=1/Ii),C[1]=(ye*mi-ce*Ri-Me*Ei)*Ii,C[2]=(In*ni-Gn*Fr+qn*Cr)*Ii,C[3]=(ln*Fr-Xt*ni-tn*Cr)*Ii,C[4]=(ot*ki-Fe*Ri-_t*di)*Ii,C[5]=(J*Ri-ye*ki+Me*di)*Ii,C[6]=(Gn*or-vn*ni-qn*er)*Ii,C[7]=(Et*ni-ln*or+tn*er)*Ii,C[8]=(Fe*mi-Ye*ki+_t*Qr)*Ii,C[9]=(ce*ki-J*mi-Me*Qr)*Ii,C[10]=(vn*Fr-In*or+qn*Kn)*Ii,C[11]=(Xt*or-Et*Fr-tn*Kn)*Ii,C[12]=(Ye*di-Fe*Ei-ot*Qr)*Ii,C[13]=(J*Ei-ce*di+ye*Qr)*Ii,C[14]=(In*er-vn*Cr-Gn*Kn)*Ii,C[15]=(Et*Cr-Xt*er+ln*Kn)*Ii,C):null},e.isChar=Gr,e.isMapboxURL=de,e.keysDifference=function(C,z){var J=[];for(var ce in C)ce in z||J.push(ce);return J},e.makeRequest=ut,e.mapObject=M,e.mercatorXfromLng=cp,e.mercatorYfromLat=H0,e.mercatorZfromAltitude=q0,e.mul=sc,e.multiply=oc,e.mvt=cf,e.normalize=function(C,z){var J=z[0],ce=z[1],ye=z[2],Me=J*J+ce*ce+ye*ye;return Me>0&&(Me=1/Math.sqrt(Me)),C[0]=z[0]*Me,C[1]=z[1]*Me,C[2]=z[2]*Me,C},e.number=pi,e.offscreenCanvasSupported=bt,e.ortho=function(C,z,J,ce,ye,Me,Fe){var Ye=1/(z-J),ot=1/(ce-ye),_t=1/(Me-Fe);return C[0]=-2*Ye,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*ot,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*_t,C[11]=0,C[12]=(z+J)*Ye,C[13]=(ye+ce)*ot,C[14]=(Fe+Me)*_t,C[15]=1,C},e.parseGlyphPBF=function(C){return new Dc(C).readFields(lx,[])},e.pbf=Dc,e.performSymbolLayout=function(C,z,J,ce,ye,Me,Fe){C.createArrays(),C.tilePixelRatio=8192/(512*C.overscaling),C.compareText={},C.iconsNeedLinear=!1;var ot=C.layers[0].layout,_t=C.layers[0]._unevaluatedLayout._values,Et={};if("composite"===C.textSizeData.kind){var Xt=C.textSizeData,tn=Xt.maxZoom;Et.compositeTextSizes=[_t["text-size"].possiblyEvaluate(new da(Xt.minZoom),Fe),_t["text-size"].possiblyEvaluate(new da(tn),Fe)]}if("composite"===C.iconSizeData.kind){var vn=C.iconSizeData,Gn=vn.maxZoom;Et.compositeIconSizes=[_t["icon-size"].possiblyEvaluate(new da(vn.minZoom),Fe),_t["icon-size"].possiblyEvaluate(new da(Gn),Fe)]}Et.layoutTextSize=_t["text-size"].possiblyEvaluate(new da(C.zoom+1),Fe),Et.layoutIconSize=_t["icon-size"].possiblyEvaluate(new da(C.zoom+1),Fe),Et.textMaxSize=_t["text-size"].possiblyEvaluate(new da(18));for(var qn=24*ot.get("text-line-height"),Kn="map"===ot.get("text-rotation-alignment")&&"point"!==ot.get("symbol-placement"),er=ot.get("text-keep-upright"),or=ot.get("text-size"),Cr=function(){var Qr=ni[Fr],di=ot.get("text-font").evaluate(Qr,{},Fe).join(","),ki=or.evaluate(Qr,{},Fe),Ei=Et.layoutTextSize.evaluate(Qr,{},Fe),mi=Et.layoutIconSize.evaluate(Qr,{},Fe),Ri={horizontal:{},vertical:void 0},Ii=Qr.text,Mi=[0,0];if(Ii){var Ca=Ii.toString(),Sa=24*ot.get("text-letter-spacing").evaluate(Qr,{},Fe),za=function(ba){for(var Na=0,Vo=ba;Na<Vo.length;Na+=1)if(!oa(Vo[Na].charCodeAt(0)))return!1;return!0}(Ca)?Sa:0,Zi=ot.get("text-anchor").evaluate(Qr,{},Fe),Da=ot.get("text-variable-anchor");if(!Da){var Qa=ot.get("text-radial-offset").evaluate(Qr,{},Fe);Mi=Qa?gf(Zi,[24*Qa,F0]):ot.get("text-offset").evaluate(Qr,{},Fe).map(function(ba){return 24*ba})}var po=Kn?"center":ot.get("text-justify").evaluate(Qr,{},Fe),ko=ot.get("symbol-placement"),go="point"===ko?24*ot.get("text-max-width").evaluate(Qr,{},Fe):0,hs=function(){C.allowVerticalPlacement&&ha(Ca)&&(Ri.vertical=ql(Ii,z,J,ye,di,go,qn,Zi,"left",za,Mi,Fl.vertical,!0,ko,Ei,ki))};if(!Kn&&Da){for(var Eo="auto"===po?Da.map(function(ba){return nl(ba)}):[po],Es=!1,ws=0;ws<Eo.length;ws++){var qs=Eo[ws];if(!Ri.horizontal[qs])if(Es)Ri.horizontal[qs]=Ri.horizontal[0];else{var Zs=ql(Ii,z,J,ye,di,go,qn,"center",qs,za,Mi,Fl.horizontal,!1,ko,Ei,ki);Zs&&(Ri.horizontal[qs]=Zs,Es=1===Zs.positionedLines.length)}}hs()}else{"auto"===po&&(po=nl(Zi));var Xs=ql(Ii,z,J,ye,di,go,qn,Zi,po,za,Mi,Fl.horizontal,!1,ko,Ei,ki);Xs&&(Ri.horizontal[po]=Xs),hs(),ha(Ca)&&Kn&&er&&(Ri.vertical=ql(Ii,z,J,ye,di,go,qn,Zi,po,za,Mi,Fl.vertical,!1,ko,Ei,ki))}}var ba,Na,Uo,rl,$i,ts=void 0,Fs=!1;if(Qr.icon&&Qr.icon.name){var ns=ce[Qr.icon.name];ns&&(ba=ye[Qr.icon.name],Na=ot.get("icon-offset").evaluate(Qr,{},Fe),Uo=Qf(ot.get("icon-anchor").evaluate(Qr,{},Fe)),ts={image:ba,top:$i=Na[1]-ba.displaySize[1]*Uo.verticalAlign,bottom:$i+ba.displaySize[1],left:rl=Na[0]-ba.displaySize[0]*Uo.horizontalAlign,right:rl+ba.displaySize[0]},Fs=ns.sdf,void 0===C.sdfIcons?C.sdfIcons=ns.sdf:C.sdfIcons!==ns.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ns.pixelRatio!==C.pixelRatio||0!==ot.get("icon-rotate").constantOr(1))&&(C.iconsNeedLinear=!0))}var mo=ip(Ri.horizontal)||Ri.vertical;C.iconsInText=!!mo&&mo.iconsInText,(mo||ts)&&function(ba,Na,Vo,Uo,zo,Do,qa,Ho,rl,El,$i){var Ia=Do.textMaxSize.evaluate(Na,{});void 0===Ia&&(Ia=qa);var ku,Ts=ba.layers[0].layout,zl=Ts.get("icon-offset").evaluate(Na,{},$i),Cs=ip(Vo.horizontal),ru=qa/24,pp=ba.tilePixelRatio*ru,hc=ba.tilePixelRatio*Ia/24,iu=ba.tilePixelRatio*Ho,Hu=ba.tilePixelRatio*Ts.get("symbol-spacing"),sh=Ts.get("text-padding")*ba.tilePixelRatio,Tf=Ts.get("icon-padding")*ba.tilePixelRatio,gp=Ts.get("text-max-angle")/180*Math.PI,lh="map"===Ts.get("text-rotation-alignment")&&"point"!==Ts.get("symbol-placement"),Fc="map"===Ts.get("icon-rotation-alignment")&&"point"!==Ts.get("symbol-placement"),qu=Ts.get("symbol-placement"),zc=Hu/2,dc=Ts.get("icon-text-fit");Uo&&"none"!==dc&&(ba.allowVerticalPlacement&&Vo.vertical&&(ku=qh(Uo,Vo.vertical,dc,Ts.get("icon-text-fit-padding"),zl,ru)),Cs&&(Uo=qh(Uo,Cs,dc,Ts.get("icon-text-fit-padding"),zl,ru)));var Eu=function(xp,dh){dh.x<0||dh.x>=8192||dh.y<0||dh.y>=8192||function(qo,Gl,X0,Su,bp,Gu,ph,Du,Ef,gh,mh,Qh,_p,Cf,Iu,ed,Vc,Sf,Uc,$0,Cl,vh,td,au,J0){var Df,Hc,qc,yh,Gc,Wc=qo.addToLineVertexArray(Gl,X0),K0=0,wp=0,Q0=0,eg=0,Sl=-1,Tp=-1,Wu={},mv=Vn(""),tg=0,nd=0;if(void 0===Du._unevaluatedLayout.getValue("text-radial-offset")?(tg=(Df=Du.layout.get("text-offset").evaluate(Cl,{},au).map(function(_h){return 24*_h}))[0],nd=Df[1]):(tg=24*Du.layout.get("text-radial-offset").evaluate(Cl,{},au),nd=F0),qo.allowVerticalPlacement&&Su.vertical){var vv=Du.layout.get("text-rotate").evaluate(Cl,{},au)+90;yh=new Gh(Ef,Gl,gh,mh,Qh,Su.vertical,_p,Cf,Iu,vv),ph&&(Gc=new Gh(Ef,Gl,gh,mh,Qh,ph,Vc,Sf,Iu,vv))}if(bp){var xh=Du.layout.get("icon-rotate").evaluate(Cl,{}),Mp="none"!==Du.layout.get("icon-text-fit"),ng=ks(bp,xh,td,Mp),Ap=ph?ks(ph,xh,td,Mp):void 0;qc=new Gh(Ef,Gl,gh,mh,Qh,bp,Vc,Sf,!1,xh),K0=4*ng.length;var rg=qo.iconSizeData,If=null;"source"===rg.kind?(If=[128*Du.layout.get("icon-size").evaluate(Cl,{})])[0]>32640&&S(qo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===rg.kind&&((If=[128*vh.compositeIconSizes[0].evaluate(Cl,{},au),128*vh.compositeIconSizes[1].evaluate(Cl,{},au)])[0]>32640||If[1]>32640)&&S(qo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),qo.addSymbols(qo.icon,ng,If,$0,Uc,Cl,!1,Gl,Wc.lineStartIndex,Wc.lineLength,-1,au),Sl=qo.icon.placedSymbolArray.length-1,Ap&&(wp=4*Ap.length,qo.addSymbols(qo.icon,Ap,If,$0,Uc,Cl,Fl.vertical,Gl,Wc.lineStartIndex,Wc.lineLength,-1,au),Tp=qo.icon.placedSymbolArray.length-1)}for(var ig in Su.horizontal){var bh=Su.horizontal[ig];if(!Hc){mv=Vn(bh.text);var xv=Du.layout.get("text-rotate").evaluate(Cl,{},au);Hc=new Gh(Ef,Gl,gh,mh,Qh,bh,_p,Cf,Iu,xv)}var ag=1===bh.positionedLines.length;if(Q0+=Wh(qo,Gl,bh,Gu,Du,Iu,Cl,ed,Wc,Su.vertical?Fl.horizontal:Fl.horizontalOnly,ag?Object.keys(Su.horizontal):[ig],Wu,Sl,vh,au),ag)break}Su.vertical&&(eg+=Wh(qo,Gl,Su.vertical,Gu,Du,Iu,Cl,ed,Wc,Fl.vertical,["vertical"],Wu,Tp,vh,au));var og=Hc?Hc.boxStartIndex:qo.collisionBoxArray.length,sg=Hc?Hc.boxEndIndex:qo.collisionBoxArray.length,bv=yh?yh.boxStartIndex:qo.collisionBoxArray.length,Lu=yh?yh.boxEndIndex:qo.collisionBoxArray.length,kp=qc?qc.boxStartIndex:qo.collisionBoxArray.length,_v=qc?qc.boxEndIndex:qo.collisionBoxArray.length,wv=Gc?Gc.boxStartIndex:qo.collisionBoxArray.length,hx=Gc?Gc.boxEndIndex:qo.collisionBoxArray.length,du=-1,rd=function(_h,id){return _h&&_h.circleDiameter?Math.max(_h.circleDiameter,id):id};du=rd(Hc,du),du=rd(yh,du),du=rd(qc,du);var lg=(du=rd(Gc,du))>-1?1:0;lg&&(du*=J0/24),qo.glyphOffsetArray.length>=Ka.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Cl.sortKey&&qo.addToSortKeyRanges(qo.symbolInstances.length,Cl.sortKey),qo.symbolInstances.emplaceBack(Gl.x,Gl.y,Wu.right>=0?Wu.right:-1,Wu.center>=0?Wu.center:-1,Wu.left>=0?Wu.left:-1,Wu.vertical||-1,Sl,Tp,mv,og,sg,bv,Lu,kp,_v,wv,hx,gh,Q0,eg,K0,wp,lg,0,_p,tg,nd,du)}(ba,dh,xp,Vo,Uo,zo,ku,ba.layers[0],ba.collisionBoxArray,Na.index,Na.sourceLayerIndex,ba.index,pp,sh,lh,rl,iu,Tf,Fc,zl,Na,Do,El,$i,qa)};if("line"===qu)for(var Nc=0,mp=O0(Na.geometry,0,0,8192,8192);Nc<mp.length;Nc+=1)for(var Xh=mp[Nc],uh=0,Jh=rp(Xh,Hu,gp,Vo.vertical||Cs,Uo,24,hc,ba.overscaling,8192);uh<Jh.length;uh+=1){var Mf=Jh[uh];Cs&&z0(ba,Cs.text,zc,Mf)||Eu(Xh,Mf)}else if("line-center"===qu)for(var ch=0,yp=Na.geometry;ch<yp.length;ch+=1){var Bc=yp[ch];if(Bc.length>1){var jc=nv(Bc,gp,Vo.vertical||Cs,Uo,24,hc);jc&&Eu(Bc,jc)}}else if("Polygon"===Na.type)for(var Af=0,kf=_0(Na.geometry,0);Af<kf.length;Af+=1){var fh=kf[Af],Kh=iv(fh,16);Eu(fh[0],new eh(Kh.x,Kh.y,0))}else if("LineString"===Na.type)for(var hh=0,dv=Na.geometry;hh<dv.length;hh+=1){var W0=dv[hh];Eu(W0,new eh(W0[0].x,W0[0].y,0))}else if("Point"===Na.type)for(var Y0=0,pv=Na.geometry;Y0<pv.length;Y0+=1)for(var Z0=0,gv=pv[Y0];Z0<gv.length;Z0+=1){var Cu=gv[Z0];Eu([Cu],new eh(Cu.x,Cu.y,0))}}(C,Qr,Ri,ts,ce,Et,Ei,mi,Mi,Fs,Fe)},Fr=0,ni=C.features;Fr<ni.length;Fr+=1)Cr();Me&&C.generateCollisionDebugBuffers()},e.perspective=function(C,z,J,ce,ye){var Me,Fe=1/Math.tan(z/2);return C[0]=Fe/J,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=Fe,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,null!=ye&&ye!==1/0?(C[10]=(ye+ce)*(Me=1/(ce-ye)),C[14]=2*ye*ce*Me):(C[10]=-1,C[14]=-2*ce),C},e.pick=function(C,z){for(var J={},ce=0;ce<z.length;ce++){var ye=z[ce];ye in C&&(J[ye]=C[ye])}return J},e.plugin=Fo,e.polygonIntersectsPolygon=Ys,e.postMapLoadEvent=Ve,e.postTurnstileEvent=Ce,e.potpack=C0,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=dr,e.registerForPluginStateChange=function(C){return C({pluginStatus:wi,pluginURL:bo}),Fa.on("pluginStateChange",C),C},e.rotate=function(C,z,J){var ce=z[0],ye=z[1],Me=z[2],Fe=z[3],Ye=Math.sin(J),ot=Math.cos(J);return C[0]=ce*ot+Me*Ye,C[1]=ye*ot+Fe*Ye,C[2]=ce*-Ye+Me*ot,C[3]=ye*-Ye+Fe*ot,C},e.rotateX=function(C,z,J){var ce=Math.sin(J),ye=Math.cos(J),Me=z[4],Fe=z[5],Ye=z[6],ot=z[7],_t=z[8],Et=z[9],Xt=z[10],ln=z[11];return z!==C&&(C[0]=z[0],C[1]=z[1],C[2]=z[2],C[3]=z[3],C[12]=z[12],C[13]=z[13],C[14]=z[14],C[15]=z[15]),C[4]=Me*ye+_t*ce,C[5]=Fe*ye+Et*ce,C[6]=Ye*ye+Xt*ce,C[7]=ot*ye+ln*ce,C[8]=_t*ye-Me*ce,C[9]=Et*ye-Fe*ce,C[10]=Xt*ye-Ye*ce,C[11]=ln*ye-ot*ce,C},e.rotateZ=function(C,z,J){var ce=Math.sin(J),ye=Math.cos(J),Me=z[0],Fe=z[1],Ye=z[2],ot=z[3],_t=z[4],Et=z[5],Xt=z[6],ln=z[7];return z!==C&&(C[8]=z[8],C[9]=z[9],C[10]=z[10],C[11]=z[11],C[12]=z[12],C[13]=z[13],C[14]=z[14],C[15]=z[15]),C[0]=Me*ye+_t*ce,C[1]=Fe*ye+Et*ce,C[2]=Ye*ye+Xt*ce,C[3]=ot*ye+ln*ce,C[4]=_t*ye-Me*ce,C[5]=Et*ye-Fe*ce,C[6]=Xt*ye-Ye*ce,C[7]=ln*ye-ot*ce,C},e.scale=function(C,z,J){var ce=J[0],ye=J[1],Me=J[2];return C[0]=z[0]*ce,C[1]=z[1]*ce,C[2]=z[2]*ce,C[3]=z[3]*ce,C[4]=z[4]*ye,C[5]=z[5]*ye,C[6]=z[6]*ye,C[7]=z[7]*ye,C[8]=z[8]*Me,C[9]=z[9]*Me,C[10]=z[10]*Me,C[11]=z[11]*Me,C[12]=z[12],C[13]=z[13],C[14]=z[14],C[15]=z[15],C},e.scale$1=function(C,z,J){return C[0]=z[0]*J,C[1]=z[1]*J,C[2]=z[2]*J,C[3]=z[3]*J,C},e.scale$2=function(C,z,J){return C[0]=z[0]*J,C[1]=z[1]*J,C[2]=z[2]*J,C},e.setCacheLimits=function(C,z){qe=C,Je=z},e.setRTLTextPlugin=function(C,z,J){if(void 0===J&&(J=!1),wi===La||wi===Wo||wi===Ga)throw new Error("setRTLTextPlugin cannot be called multiple times.");bo=H.resolveURL(C),wi=La,As=z,Ea(),J||Va()},e.sphericalToCartesian=function(C){var z=C[0],J=C[1],ce=C[2];return J+=90,J*=Math.PI/180,ce*=Math.PI/180,{x:z*Math.cos(J)*Math.sin(ce),y:z*Math.sin(J)*Math.sin(ce),z:z*Math.cos(ce)}},e.sqrLen=function(C){var z=C[0],J=C[1];return z*z+J*J},e.styleSpec=Ne,e.sub=function(C,z,J){return C[0]=z[0]-J[0],C[1]=z[1]-J[1],C[2]=z[2]-J[2],C},e.symbolSize=tv,e.transformMat3=function(C,z,J){var ce=z[0],ye=z[1],Me=z[2];return C[0]=ce*J[0]+ye*J[3]+Me*J[6],C[1]=ce*J[1]+ye*J[4]+Me*J[7],C[2]=ce*J[2]+ye*J[5]+Me*J[8],C},e.transformMat4=Hl,e.translate=function(C,z,J){var ce,ye,Me,Fe,Ye,ot,_t,Et,Xt,ln,tn,vn,In=J[0],Gn=J[1],qn=J[2];return z===C?(C[12]=z[0]*In+z[4]*Gn+z[8]*qn+z[12],C[13]=z[1]*In+z[5]*Gn+z[9]*qn+z[13],C[14]=z[2]*In+z[6]*Gn+z[10]*qn+z[14],C[15]=z[3]*In+z[7]*Gn+z[11]*qn+z[15]):(ye=z[1],Me=z[2],Fe=z[3],Ye=z[4],ot=z[5],_t=z[6],Et=z[7],Xt=z[8],ln=z[9],tn=z[10],vn=z[11],C[0]=ce=z[0],C[1]=ye,C[2]=Me,C[3]=Fe,C[4]=Ye,C[5]=ot,C[6]=_t,C[7]=Et,C[8]=Xt,C[9]=ln,C[10]=tn,C[11]=vn,C[12]=ce*In+Ye*Gn+Xt*qn+z[12],C[13]=ye*In+ot*Gn+ln*qn+z[13],C[14]=Me*In+_t*Gn+tn*qn+z[14],C[15]=Fe*In+Et*Gn+vn*qn+z[15]),C},e.triggerPluginCompletionEvent=Ps,e.uniqueId=m,e.validateCustomStyleLayer=function(C){var z=[],J=C.id;return void 0===J&&z.push({message:"layers."+J+': missing required property "id"'}),void 0===C.render&&z.push({message:"layers."+J+': missing required method "render"'}),C.renderingMode&&"2d"!==C.renderingMode&&"3d"!==C.renderingMode&&z.push({message:"layers."+J+': property "renderingMode" must be either "2d" or "3d"'}),z},e.validateLight=kr,e.validateStyle=fr,e.values=function(C){var z=[];for(var J in C)z.push(C[J]);return z},e.vectorTile=cf,e.version="1.10.1",e.warnOnce=S,e.webpSupported=re,e.window=self,e.wrap=f}),b(0,function(e){function r(Le){var ze=typeof Le;if("number"===ze||"boolean"===ze||"string"===ze||null==Le)return JSON.stringify(Le);if(Array.isArray(Le)){for(var je="[",Ne=0,st=Le;Ne<st.length;Ne+=1)je+=r(st[Ne])+",";return je+"]"}for(var mt=Object.keys(Le).sort(),Tt="{",xt=0;xt<mt.length;xt++)Tt+=JSON.stringify(mt[xt])+":"+r(Le[mt[xt]])+",";return Tt+"}"}function t(Le){for(var ze="",je=0,Ne=e.refProperties;je<Ne.length;je+=1)ze+="/"+r(Le[Ne[je]]);return ze}var a=function(Le){this.keyCache={},Le&&this.replace(Le)};a.prototype.replace=function(Le){this._layerConfigs={},this._layers={},this.update(Le,[])},a.prototype.update=function(Le,ze){for(var je=this,Ne=0,st=Le;Ne<st.length;Ne+=1){var mt=st[Ne];this._layerConfigs[mt.id]=mt;var Tt=this._layers[mt.id]=e.createStyleLayer(mt);Tt._featureFilter=e.featureFilter(Tt.filter),this.keyCache[mt.id]&&delete this.keyCache[mt.id]}for(var xt=0,zt=ze;xt<zt.length;xt+=1){var gt=zt[xt];delete this.keyCache[gt],delete this._layerConfigs[gt],delete this._layers[gt]}this.familiesBySource={};for(var Bt=0,jt=function(yt,Dt){for(var Ht={},Jt=0;Jt<yt.length;Jt++){var gn=Dt&&Dt[yt[Jt].id]||t(yt[Jt]);Dt&&(Dt[yt[Jt].id]=gn);var Qt=Ht[gn];Qt||(Qt=Ht[gn]=[]),Qt.push(yt[Jt])}var sn=[];for(var hn in Ht)sn.push(Ht[hn]);return sn}(e.values(this._layerConfigs),this.keyCache);Bt<jt.length;Bt+=1){var it=jt[Bt].map(function(yt){return je._layers[yt.id]}),Mt=it[0];if("none"!==Mt.visibility){var qt=Mt.source||"",Wt=this.familiesBySource[qt];Wt||(Wt=this.familiesBySource[qt]={});var an=Mt.sourceLayer||"_geojsonTileLayer",Ue=Wt[an];Ue||(Ue=Wt[an]=[]),Ue.push(it)}}};var n=function(Le){var ze={},je=[];for(var Ne in Le){var st=Le[Ne],mt=ze[Ne]={};for(var Tt in st){var xt=st[+Tt];if(xt&&0!==xt.bitmap.width&&0!==xt.bitmap.height){var zt={x:0,y:0,w:xt.bitmap.width+2,h:xt.bitmap.height+2};je.push(zt),mt[Tt]={rect:zt,metrics:xt.metrics}}}}var gt=e.potpack(je),it=new e.AlphaImage({width:gt.w||1,height:gt.h||1});for(var Mt in Le){var qt=Le[Mt];for(var Wt in qt){var an=qt[+Wt];if(an&&0!==an.bitmap.width&&0!==an.bitmap.height){var Ue=ze[Mt][Wt].rect;e.AlphaImage.copy(an.bitmap,it,{x:0,y:0},{x:Ue.x+1,y:Ue.y+1},an.bitmap)}}}this.image=it,this.positions=ze};e.register("GlyphAtlas",n);var d=function(Le){this.tileID=new e.OverscaledTileID(Le.tileID.overscaledZ,Le.tileID.wrap,Le.tileID.canonical.z,Le.tileID.canonical.x,Le.tileID.canonical.y),this.uid=Le.uid,this.zoom=Le.zoom,this.pixelRatio=Le.pixelRatio,this.tileSize=Le.tileSize,this.source=Le.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Le.showCollisionBoxes,this.collectResourceTiming=!!Le.collectResourceTiming,this.returnDependencies=!!Le.returnDependencies,this.promoteId=Le.promoteId};function s(Le,ze,je){for(var Ne=new e.EvaluationParameters(ze),st=0,mt=Le;st<mt.length;st+=1)mt[st].recalculate(Ne,je)}function i(Le,ze){var je=e.getArrayBuffer(Le.request,function(Ne,st,mt,Tt){Ne?ze(Ne):st&&ze(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(st)),rawData:st,cacheControl:mt,expires:Tt})});return function(){je.cancel(),ze()}}d.prototype.parse=function(Le,ze,je,Ne,st){var mt=this;this.status="parsing",this.data=Le,this.collisionBoxArray=new e.CollisionBoxArray;var Tt=new e.DictionaryCoder(Object.keys(Le.layers).sort()),xt=new e.FeatureIndex(this.tileID,this.promoteId);xt.bucketLayerIDs=[];var zt,gt,Bt,jt,it={},Mt={featureIndex:xt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:je},qt=ze.familiesBySource[this.source];for(var Wt in qt){var an=Le.layers[Wt];if(an){1===an.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+Wt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ue=Tt.encode(Wt),yt=[],Dt=0;Dt<an.length;Dt++){var Ht=an.feature(Dt),Jt=xt.getId(Ht,Wt);yt.push({feature:Ht,id:Jt,index:Dt,sourceLayerIndex:Ue})}for(var gn=0,Qt=qt[Wt];gn<Qt.length;gn+=1){var sn=Qt[gn],hn=sn[0];hn.minzoom&&this.zoom<Math.floor(hn.minzoom)||hn.maxzoom&&this.zoom>=hn.maxzoom||"none"!==hn.visibility&&(s(sn,this.zoom,je),(it[hn.id]=hn.createBucket({index:xt.bucketLayerIDs.length,layers:sn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ue,sourceID:this.source})).populate(yt,Mt,this.tileID.canonical),xt.bucketLayerIDs.push(sn.map(function(kn){return kn.id})))}}}var Dn=e.mapObject(Mt.glyphDependencies,function(kn){return Object.keys(kn).map(Number)});Object.keys(Dn).length?Ne.send("getGlyphs",{uid:this.uid,stacks:Dn},function(kn,Fn){zt||(zt=kn,gt=Fn,wn.call(mt))}):gt={};var _n=Object.keys(Mt.iconDependencies);_n.length?Ne.send("getImages",{icons:_n,source:this.source,tileID:this.tileID,type:"icons"},function(kn,Fn){zt||(zt=kn,Bt=Fn,wn.call(mt))}):Bt={};var Tn=Object.keys(Mt.patternDependencies);function wn(){if(zt)return st(zt);if(gt&&Bt&&jt){var kn=new n(gt),Fn=new e.ImageAtlas(Bt,jt);for(var On in it){var Qn=it[On];Qn instanceof e.SymbolBucket?(s(Qn.layers,this.zoom,je),e.performSymbolLayout(Qn,gt,kn.positions,Bt,Fn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Qn.hasPattern&&(Qn instanceof e.LineBucket||Qn instanceof e.FillBucket||Qn instanceof e.FillExtrusionBucket)&&(s(Qn.layers,this.zoom,je),Qn.addFeatures(Mt,this.tileID.canonical,Fn.patternPositions))}this.status="done",st(null,{buckets:e.values(it).filter(function(sr){return!sr.isEmpty()}),featureIndex:xt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:kn.image,imageAtlas:Fn,glyphMap:this.returnDependencies?gt:null,iconMap:this.returnDependencies?Bt:null,glyphPositions:this.returnDependencies?kn.positions:null})}}Tn.length?Ne.send("getImages",{icons:Tn,source:this.source,tileID:this.tileID,type:"patterns"},function(kn,Fn){zt||(zt=kn,jt=Fn,wn.call(mt))}):jt={},wn.call(this)};var u=function(Le,ze,je,Ne){this.actor=Le,this.layerIndex=ze,this.availableImages=je,this.loadVectorData=Ne||i,this.loading={},this.loaded={}};u.prototype.loadTile=function(Le,ze){var je=this,Ne=Le.uid;this.loading||(this.loading={});var st=!!(Le&&Le.request&&Le.request.collectResourceTiming)&&new e.RequestPerformance(Le.request),mt=this.loading[Ne]=new d(Le);mt.abort=this.loadVectorData(Le,function(Tt,xt){if(delete je.loading[Ne],Tt||!xt)return mt.status="done",je.loaded[Ne]=mt,ze(Tt);var zt=xt.rawData,gt={};xt.expires&&(gt.expires=xt.expires),xt.cacheControl&&(gt.cacheControl=xt.cacheControl);var Bt={};if(st){var jt=st.finish();jt&&(Bt.resourceTiming=JSON.parse(JSON.stringify(jt)))}mt.vectorTile=xt.vectorTile,mt.parse(xt.vectorTile,je.layerIndex,je.availableImages,je.actor,function(it,Mt){if(it||!Mt)return ze(it);ze(null,e.extend({rawTileData:zt.slice(0)},Mt,gt,Bt))}),je.loaded=je.loaded||{},je.loaded[Ne]=mt})},u.prototype.reloadTile=function(Le,ze){var je=this,Ne=this.loaded,st=Le.uid,mt=this;if(Ne&&Ne[st]){var Tt=Ne[st];Tt.showCollisionBoxes=Le.showCollisionBoxes;var xt=function(zt,gt){var Bt=Tt.reloadCallback;Bt&&(delete Tt.reloadCallback,Tt.parse(Tt.vectorTile,mt.layerIndex,je.availableImages,mt.actor,Bt)),ze(zt,gt)};"parsing"===Tt.status?Tt.reloadCallback=xt:"done"===Tt.status&&(Tt.vectorTile?Tt.parse(Tt.vectorTile,this.layerIndex,this.availableImages,this.actor,xt):xt())}},u.prototype.abortTile=function(Le,ze){var je=this.loading,Ne=Le.uid;je&&je[Ne]&&je[Ne].abort&&(je[Ne].abort(),delete je[Ne]),ze()},u.prototype.removeTile=function(Le,ze){var je=this.loaded,Ne=Le.uid;je&&je[Ne]&&delete je[Ne],ze()};var f=e.window.ImageBitmap,p=function(){this.loaded={}};p.prototype.loadTile=function(Le,ze){var je=Le.uid,Ne=Le.encoding,st=Le.rawImageData,mt=f&&st instanceof f?this.getImageData(st):st,Tt=new e.DEMData(je,mt,Ne);this.loaded=this.loaded||{},this.loaded[je]=Tt,ze(null,Tt)},p.prototype.getImageData=function(Le){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Le.width,Le.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Le.width,this.offscreenCanvas.height=Le.height,this.offscreenCanvasContext.drawImage(Le,0,0,Le.width,Le.height);var ze=this.offscreenCanvasContext.getImageData(-1,-1,Le.width+2,Le.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:ze.width,height:ze.height},ze.data)},p.prototype.removeTile=function(Le){var ze=this.loaded,je=Le.uid;ze&&ze[je]&&delete ze[je]};var y=function Le(ze,je){var Ne,st=ze&&ze.type;if("FeatureCollection"===st)for(Ne=0;Ne<ze.features.length;Ne++)Le(ze.features[Ne],je);else if("GeometryCollection"===st)for(Ne=0;Ne<ze.geometries.length;Ne++)Le(ze.geometries[Ne],je);else if("Feature"===st)Le(ze.geometry,je);else if("Polygon"===st)m(ze.coordinates,je);else if("MultiPolygon"===st)for(Ne=0;Ne<ze.coordinates.length;Ne++)m(ze.coordinates[Ne],je);return ze};function m(Le,ze){if(0!==Le.length){l(Le[0],ze);for(var je=1;je<Le.length;je++)l(Le[je],!ze)}}function l(Le,ze){for(var je=0,Ne=0,st=Le.length,mt=st-1;Ne<st;mt=Ne++)je+=(Le[Ne][0]-Le[mt][0])*(Le[mt][1]+Le[Ne][1]);je>=0!=!!ze&&Le.reverse()}var w=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,v=function(Le){this._feature=Le,this.extent=e.EXTENT,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))};v.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Le=[],ze=0,je=this._feature.geometry;ze<je.length;ze+=1){var Ne=je[ze];Le.push([new e.Point$1(Ne[0],Ne[1])])}return Le}for(var st=[],mt=0,Tt=this._feature.geometry;mt<Tt.length;mt+=1){for(var xt=[],zt=0,gt=Tt[mt];zt<gt.length;zt+=1){var Bt=gt[zt];xt.push(new e.Point$1(Bt[0],Bt[1]))}st.push(xt)}return st},v.prototype.toGeoJSON=function(Le,ze,je){return w.call(this,Le,ze,je)};var A=function(Le){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Le.length,this._features=Le};A.prototype.feature=function(Le){return new v(this._features[Le])};var M=e.vectorTile.VectorTileFeature,k=E;function E(Le,ze){this.options=ze||{},this.features=Le,this.length=Le.length}function P(Le,ze){this.id="number"==typeof Le.id?Le.id:void 0,this.type=Le.type,this.rawGeometry=1===Le.type?[Le.geometry]:Le.geometry,this.properties=Le.tags,this.extent=ze||4096}E.prototype.feature=function(Le){return new P(this.features[Le],this.options.extent)},P.prototype.loadGeometry=function(){var Le=this.rawGeometry;this.geometry=[];for(var ze=0;ze<Le.length;ze++){for(var je=Le[ze],Ne=[],st=0;st<je.length;st++)Ne.push(new e.Point$1(je[st][0],je[st][1]));this.geometry.push(Ne)}return this.geometry},P.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Le=this.geometry,ze=1/0,je=-1/0,Ne=1/0,st=-1/0,mt=0;mt<Le.length;mt++)for(var Tt=Le[mt],xt=0;xt<Tt.length;xt++){var zt=Tt[xt];ze=Math.min(ze,zt.x),je=Math.max(je,zt.x),Ne=Math.min(Ne,zt.y),st=Math.max(st,zt.y)}return[ze,Ne,je,st]},P.prototype.toGeoJSON=M.prototype.toGeoJSON;var S=L,D=k;function L(Le){var ze=new e.pbf;return function(je,Ne){for(var st in je.layers)Ne.writeMessage(3,B,je.layers[st])}(Le,ze),ze.finish()}function B(Le,ze){var je;ze.writeVarintField(15,Le.version||1),ze.writeStringField(1,Le.name||""),ze.writeVarintField(5,Le.extent||4096);var Ne={keys:[],values:[],keycache:{},valuecache:{}};for(je=0;je<Le.length;je++)Ne.feature=Le.feature(je),ze.writeMessage(2,V,Ne);var st=Ne.keys;for(je=0;je<st.length;je++)ze.writeStringField(3,st[je]);var mt=Ne.values;for(je=0;je<mt.length;je++)ze.writeMessage(4,$,mt[je])}function V(Le,ze){var je=Le.feature;void 0!==je.id&&ze.writeVarintField(1,je.id),ze.writeMessage(2,Z,Le),ze.writeVarintField(3,je.type),ze.writeMessage(4,Q,je)}function Z(Le,ze){var je=Le.feature,Ne=Le.keys,st=Le.values,mt=Le.keycache,Tt=Le.valuecache;for(var xt in je.properties){var zt=mt[xt];void 0===zt&&(Ne.push(xt),mt[xt]=zt=Ne.length-1),ze.writeVarint(zt);var gt=je.properties[xt],Bt=typeof gt;"string"!==Bt&&"boolean"!==Bt&&"number"!==Bt&&(gt=JSON.stringify(gt));var jt=Bt+":"+gt,it=Tt[jt];void 0===it&&(st.push(gt),Tt[jt]=it=st.length-1),ze.writeVarint(it)}}function Y(Le,ze){return(ze<<3)+(7&Le)}function ee(Le){return Le<<1^Le>>31}function Q(Le,ze){for(var je=Le.loadGeometry(),Ne=Le.type,st=0,mt=0,Tt=je.length,xt=0;xt<Tt;xt++){var zt=je[xt],gt=1;1===Ne&&(gt=zt.length),ze.writeVarint(Y(1,gt));for(var Bt=3===Ne?zt.length-1:zt.length,jt=0;jt<Bt;jt++){1===jt&&1!==Ne&&ze.writeVarint(Y(2,Bt-1));var it=zt[jt].x-st,Mt=zt[jt].y-mt;ze.writeVarint(ee(it)),ze.writeVarint(ee(Mt)),st+=it,mt+=Mt}3===Ne&&ze.writeVarint(Y(7,1))}}function $(Le,ze){var je=typeof Le;"string"===je?ze.writeStringField(1,Le):"boolean"===je?ze.writeBooleanField(7,Le):"number"===je&&(Le%1!=0?ze.writeDoubleField(3,Le):Le<0?ze.writeSVarintField(6,Le):ze.writeVarintField(5,Le))}function K(Le,ze,je,Ne,st,mt){if(!(st-Ne<=je)){var Tt=Ne+st>>1;(function xt(zt,gt,Bt,jt,it,Mt){for(;it>jt;){if(it-jt>600){var qt=it-jt+1,Wt=Bt-jt+1,an=Math.log(qt),Ue=.5*Math.exp(2*an/3),yt=.5*Math.sqrt(an*Ue*(qt-Ue)/qt)*(Wt-qt/2<0?-1:1);xt(zt,gt,Bt,Math.max(jt,Math.floor(Bt-Wt*Ue/qt+yt)),Math.min(it,Math.floor(Bt+(qt-Wt)*Ue/qt+yt)),Mt)}var Jt=gt[2*Bt+Mt],gn=jt,Qt=it;for(oe(zt,gt,jt,Bt),gt[2*it+Mt]>Jt&&oe(zt,gt,jt,it);gn<Qt;){for(oe(zt,gt,gn,Qt),gn++,Qt--;gt[2*gn+Mt]<Jt;)gn++;for(;gt[2*Qt+Mt]>Jt;)Qt--}gt[2*jt+Mt]===Jt?oe(zt,gt,jt,Qt):oe(zt,gt,++Qt,it),Qt<=Bt&&(jt=Qt+1),Bt<=Qt&&(it=Qt-1)}})(Le,ze,Tt,Ne,st,mt%2),K(Le,ze,je,Ne,Tt-1,mt+1),K(Le,ze,je,Tt+1,st,mt+1)}}function oe(Le,ze,je,Ne){j(Le,je,Ne),j(ze,2*je,2*Ne),j(ze,2*je+1,2*Ne+1)}function j(Le,ze,je){var Ne=Le[ze];Le[ze]=Le[je],Le[je]=Ne}function H(Le,ze,je,Ne){var st=Le-je,mt=ze-Ne;return st*st+mt*mt}S.fromVectorTileJs=L,S.fromGeojsonVt=function(Le,ze){ze=ze||{};var je={};for(var Ne in Le)je[Ne]=new k(Le[Ne].features,ze),je[Ne].name=Ne,je[Ne].version=ze.version,je[Ne].extent=ze.extent;return L({layers:je})},S.GeoJSONWrapper=D;var G=function(Le){return Le[0]},re=function(Le){return Le[1]},q=function(Le,ze,je,Ne,st){void 0===ze&&(ze=G),void 0===je&&(je=re),void 0===Ne&&(Ne=64),void 0===st&&(st=Float64Array),this.nodeSize=Ne,this.points=Le;for(var mt=Le.length<65536?Uint16Array:Uint32Array,Tt=this.ids=new mt(Le.length),xt=this.coords=new st(2*Le.length),zt=0;zt<Le.length;zt++)Tt[zt]=zt,xt[2*zt]=ze(Le[zt]),xt[2*zt+1]=je(Le[zt]);K(Tt,xt,Ne,0,Tt.length-1,0)};q.prototype.range=function(Le,ze,je,Ne){return function(st,mt,Tt,xt,zt,gt,Bt){for(var jt,it,Mt=[0,st.length-1,0],qt=[];Mt.length;){var Wt=Mt.pop(),an=Mt.pop(),Ue=Mt.pop();if(an-Ue<=Bt)for(var yt=Ue;yt<=an;yt++)it=mt[2*yt+1],(jt=mt[2*yt])>=Tt&&jt<=zt&&it>=xt&&it<=gt&&qt.push(st[yt]);else{var Dt=Math.floor((Ue+an)/2);it=mt[2*Dt+1],(jt=mt[2*Dt])>=Tt&&jt<=zt&&it>=xt&&it<=gt&&qt.push(st[Dt]);var Ht=(Wt+1)%2;(0===Wt?Tt<=jt:xt<=it)&&(Mt.push(Ue),Mt.push(Dt-1),Mt.push(Ht)),(0===Wt?zt>=jt:gt>=it)&&(Mt.push(Dt+1),Mt.push(an),Mt.push(Ht))}}return qt}(this.ids,this.coords,Le,ze,je,Ne,this.nodeSize)},q.prototype.within=function(Le,ze,je){return function(Ne,st,mt,Tt,xt,zt){for(var gt=[0,Ne.length-1,0],Bt=[],jt=xt*xt;gt.length;){var it=gt.pop(),Mt=gt.pop(),qt=gt.pop();if(Mt-qt<=zt)for(var Wt=qt;Wt<=Mt;Wt++)H(st[2*Wt],st[2*Wt+1],mt,Tt)<=jt&&Bt.push(Ne[Wt]);else{var an=Math.floor((qt+Mt)/2),Ue=st[2*an],yt=st[2*an+1];H(Ue,yt,mt,Tt)<=jt&&Bt.push(Ne[an]);var Dt=(it+1)%2;(0===it?mt-xt<=Ue:Tt-xt<=yt)&&(gt.push(qt),gt.push(an-1),gt.push(Dt)),(0===it?mt+xt>=Ue:Tt+xt>=yt)&&(gt.push(an+1),gt.push(Mt),gt.push(Dt))}}return Bt}(this.ids,this.coords,Le,ze,je,this.nodeSize)};var te={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Le){return Le}},ne=function(Le){this.options=we(Object.create(te),Le),this.trees=new Array(this.options.maxZoom+1)};function le(Le,ze,je,Ne,st){return{x:Le,y:ze,zoom:1/0,id:je,parentId:-1,numPoints:Ne,properties:st}}function ue(Le,ze){var je=Le.geometry.coordinates,st=je[1];return{x:be(je[0]),y:ge(st),zoom:1/0,index:ze,parentId:-1}}function de(Le){return{type:"Feature",id:Le.id,properties:he(Le),geometry:{type:"Point",coordinates:[(Ne=Le.x,360*(Ne-.5)),(ze=Le.y,je=(180-360*ze)*Math.PI/180,360*Math.atan(Math.exp(je))/Math.PI-90)]}};var ze,je,Ne}function he(Le){var ze=Le.numPoints,je=ze>=1e4?Math.round(ze/1e3)+"k":ze>=1e3?Math.round(ze/100)/10+"k":ze;return we(we({},Le.properties),{cluster:!0,cluster_id:Le.id,point_count:ze,point_count_abbreviated:je})}function be(Le){return Le/360+.5}function ge(Le){var ze=Math.sin(Le*Math.PI/180),je=.5-.25*Math.log((1+ze)/(1-ze))/Math.PI;return je<0?0:je>1?1:je}function we(Le,ze){for(var je in ze)Le[je]=ze[je];return Le}function ke(Le){return Le.x}function De(Le){return Le.y}function Ee(Le,ze,je,Ne,st,mt){var Tt=st-je,xt=mt-Ne;if(0!==Tt||0!==xt){var zt=((Le-je)*Tt+(ze-Ne)*xt)/(Tt*Tt+xt*xt);zt>1?(je=st,Ne=mt):zt>0&&(je+=Tt*zt,Ne+=xt*zt)}return(Tt=Le-je)*Tt+(xt=ze-Ne)*xt}function Re(Le,ze,je,Ne){var st={id:void 0===Le?null:Le,type:ze,geometry:je,tags:Ne,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(mt){var Tt=mt.geometry,xt=mt.type;if("Point"===xt||"MultiPoint"===xt||"LineString"===xt)ve(mt,Tt);else if("Polygon"===xt||"MultiLineString"===xt)for(var zt=0;zt<Tt.length;zt++)ve(mt,Tt[zt]);else if("MultiPolygon"===xt)for(zt=0;zt<Tt.length;zt++)for(var gt=0;gt<Tt[zt].length;gt++)ve(mt,Tt[zt][gt])}(st),st}function ve(Le,ze){for(var je=0;je<ze.length;je+=3)Le.minX=Math.min(Le.minX,ze[je]),Le.minY=Math.min(Le.minY,ze[je+1]),Le.maxX=Math.max(Le.maxX,ze[je]),Le.maxY=Math.max(Le.maxY,ze[je+1])}function Te(Le,ze,je,Ne){if(ze.geometry){var st=ze.geometry.coordinates,mt=ze.geometry.type,Tt=Math.pow(je.tolerance/((1<<je.maxZoom)*je.extent),2),xt=[],zt=ze.id;if(je.promoteId?zt=ze.properties[je.promoteId]:je.generateId&&(zt=Ne||0),"Point"===mt)Ie(st,xt);else if("MultiPoint"===mt)for(var gt=0;gt<st.length;gt++)Ie(st[gt],xt);else if("LineString"===mt)Ce(st,xt,Tt,!1);else if("MultiLineString"===mt){if(je.lineMetrics){for(gt=0;gt<st.length;gt++)Ce(st[gt],xt=[],Tt,!1),Le.push(Re(zt,"LineString",xt,ze.properties));return}Pe(st,xt,Tt,!1)}else if("Polygon"===mt)Pe(st,xt,Tt,!0);else{if("MultiPolygon"!==mt){if("GeometryCollection"===mt){for(gt=0;gt<ze.geometry.geometries.length;gt++)Te(Le,{id:zt,geometry:ze.geometry.geometries[gt],properties:ze.properties},je,Ne);return}throw new Error("Input data is not a valid GeoJSON object.")}for(gt=0;gt<st.length;gt++){var Bt=[];Pe(st[gt],Bt,Tt,!0),xt.push(Bt)}}Le.push(Re(zt,mt,xt,ze.properties))}}function Ie(Le,ze){ze.push(Ve(Le[0])),ze.push(qe(Le[1])),ze.push(0)}function Ce(Le,ze,je,Ne){for(var st,mt,Tt=0,xt=0;xt<Le.length;xt++){var zt=Ve(Le[xt][0]),gt=qe(Le[xt][1]);ze.push(zt),ze.push(gt),ze.push(0),xt>0&&(Tt+=Ne?(st*gt-zt*mt)/2:Math.sqrt(Math.pow(zt-st,2)+Math.pow(gt-mt,2))),st=zt,mt=gt}var Bt=ze.length-3;ze[2]=1,function jt(it,Mt,qt,Wt){for(var an,Ue=Wt,yt=qt-Mt>>1,Dt=qt-Mt,Ht=it[Mt],Jt=it[Mt+1],gn=it[qt],Qt=it[qt+1],sn=Mt+3;sn<qt;sn+=3){var hn=Ee(it[sn],it[sn+1],Ht,Jt,gn,Qt);if(hn>Ue)an=sn,Ue=hn;else if(hn===Ue){var Dn=Math.abs(sn-yt);Dn<Dt&&(an=sn,Dt=Dn)}}Ue>Wt&&(an-Mt>3&&jt(it,Mt,an,Wt),it[an+2]=Ue,qt-an>3&&jt(it,an,qt,Wt))}(ze,0,Bt,je),ze[Bt+2]=1,ze.size=Math.abs(Tt),ze.start=0,ze.end=ze.size}function Pe(Le,ze,je,Ne){for(var st=0;st<Le.length;st++){var mt=[];Ce(Le[st],mt,je,Ne),ze.push(mt)}}function Ve(Le){return Le/360+.5}function qe(Le){var ze=Math.sin(Le*Math.PI/180),je=.5-.25*Math.log((1+ze)/(1-ze))/Math.PI;return je<0?0:je>1?1:je}function Je(Le,ze,je,Ne,st,mt,Tt,xt){if(Ne/=ze,mt>=(je/=ze)&&Tt<Ne)return Le;if(Tt<je||mt>=Ne)return null;for(var zt=[],gt=0;gt<Le.length;gt++){var Bt=Le[gt],jt=Bt.geometry,it=Bt.type,Mt=0===st?Bt.minX:Bt.minY,qt=0===st?Bt.maxX:Bt.maxY;if(Mt>=je&&qt<Ne)zt.push(Bt);else if(!(qt<je||Mt>=Ne)){var Wt=[];if("Point"===it||"MultiPoint"===it)lt(jt,Wt,je,Ne,st);else if("LineString"===it)He(jt,Wt,je,Ne,st,!1,xt.lineMetrics);else if("MultiLineString"===it)et(jt,Wt,je,Ne,st,!1);else if("Polygon"===it)et(jt,Wt,je,Ne,st,!0);else if("MultiPolygon"===it)for(var an=0;an<jt.length;an++){var Ue=[];et(jt[an],Ue,je,Ne,st,!0),Ue.length&&Wt.push(Ue)}if(Wt.length){if(xt.lineMetrics&&"LineString"===it){for(an=0;an<Wt.length;an++)zt.push(Re(Bt.id,it,Wt[an],Bt.tags));continue}"LineString"!==it&&"MultiLineString"!==it||(1===Wt.length?(it="LineString",Wt=Wt[0]):it="MultiLineString"),"Point"!==it&&"MultiPoint"!==it||(it=3===Wt.length?"Point":"MultiPoint"),zt.push(Re(Bt.id,it,Wt,Bt.tags))}}}return zt.length?zt:null}function lt(Le,ze,je,Ne,st){for(var mt=0;mt<Le.length;mt+=3){var Tt=Le[mt+st];Tt>=je&&Tt<=Ne&&(ze.push(Le[mt]),ze.push(Le[mt+1]),ze.push(Le[mt+2]))}}function He(Le,ze,je,Ne,st,mt,Tt){for(var xt,zt,gt=$e(Le),Bt=0===st?ft:bt,jt=Le.start,it=0;it<Le.length-3;it+=3){var Mt=Le[it],qt=Le[it+1],Wt=Le[it+2],an=Le[it+3],Ue=Le[it+4],yt=0===st?Mt:qt,Dt=0===st?an:Ue,Ht=!1;Tt&&(xt=Math.sqrt(Math.pow(Mt-an,2)+Math.pow(qt-Ue,2))),yt<je?Dt>je&&(zt=Bt(gt,Mt,qt,an,Ue,je),Tt&&(gt.start=jt+xt*zt)):yt>Ne?Dt<Ne&&(zt=Bt(gt,Mt,qt,an,Ue,Ne),Tt&&(gt.start=jt+xt*zt)):tt(gt,Mt,qt,Wt),Dt<je&&yt>=je&&(zt=Bt(gt,Mt,qt,an,Ue,je),Ht=!0),Dt>Ne&&yt<=Ne&&(zt=Bt(gt,Mt,qt,an,Ue,Ne),Ht=!0),!mt&&Ht&&(Tt&&(gt.end=jt+xt*zt),ze.push(gt),gt=$e(Le)),Tt&&(jt+=xt)}var Jt=Le.length-3;Mt=Le[Jt],qt=Le[Jt+1],Wt=Le[Jt+2],(yt=0===st?Mt:qt)>=je&&yt<=Ne&&tt(gt,Mt,qt,Wt),Jt=gt.length-3,mt&&Jt>=3&&(gt[Jt]!==gt[0]||gt[Jt+1]!==gt[1])&&tt(gt,gt[0],gt[1],gt[2]),gt.length&&ze.push(gt)}function $e(Le){var ze=[];return ze.size=Le.size,ze.start=Le.start,ze.end=Le.end,ze}function et(Le,ze,je,Ne,st,mt){for(var Tt=0;Tt<Le.length;Tt++)He(Le[Tt],ze,je,Ne,st,mt,!1)}function tt(Le,ze,je,Ne){Le.push(ze),Le.push(je),Le.push(Ne)}function ft(Le,ze,je,Ne,st,mt){var Tt=(mt-ze)/(Ne-ze);return Le.push(mt),Le.push(je+(st-je)*Tt),Le.push(1),Tt}function bt(Le,ze,je,Ne,st,mt){var Tt=(mt-je)/(st-je);return Le.push(ze+(Ne-ze)*Tt),Le.push(mt),Le.push(1),Tt}function Ct(Le,ze){for(var je=[],Ne=0;Ne<Le.length;Ne++){var st,mt=Le[Ne],Tt=mt.type;if("Point"===Tt||"MultiPoint"===Tt||"LineString"===Tt)st=Vt(mt.geometry,ze);else if("MultiLineString"===Tt||"Polygon"===Tt){st=[];for(var xt=0;xt<mt.geometry.length;xt++)st.push(Vt(mt.geometry[xt],ze))}else if("MultiPolygon"===Tt)for(st=[],xt=0;xt<mt.geometry.length;xt++){for(var zt=[],gt=0;gt<mt.geometry[xt].length;gt++)zt.push(Vt(mt.geometry[xt][gt],ze));st.push(zt)}je.push(Re(mt.id,Tt,st,mt.tags))}return je}function Vt(Le,ze){var je=[];je.size=Le.size,void 0!==Le.start&&(je.start=Le.start,je.end=Le.end);for(var Ne=0;Ne<Le.length;Ne+=3)je.push(Le[Ne]+ze,Le[Ne+1],Le[Ne+2]);return je}function Ft(Le,ze){if(Le.transformed)return Le;var je,Ne,st,mt=1<<Le.z,Tt=Le.x,xt=Le.y;for(je=0;je<Le.features.length;je++){var zt=Le.features[je],gt=zt.geometry,Bt=zt.type;if(zt.geometry=[],1===Bt)for(Ne=0;Ne<gt.length;Ne+=2)zt.geometry.push(ht(gt[Ne],gt[Ne+1],ze,mt,Tt,xt));else for(Ne=0;Ne<gt.length;Ne++){var jt=[];for(st=0;st<gt[Ne].length;st+=2)jt.push(ht(gt[Ne][st],gt[Ne][st+1],ze,mt,Tt,xt));zt.geometry.push(jt)}}return Le.transformed=!0,Le}function ht(Le,ze,je,Ne,st,mt){return[Math.round(je*(Le*Ne-st)),Math.round(je*(ze*Ne-mt))]}function ut(Le,ze,je,Ne,st){for(var mt=ze===st.maxZoom?0:st.tolerance/((1<<ze)*st.extent),Tt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:je,y:Ne,z:ze,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},xt=0;xt<Le.length;xt++){Tt.numFeatures++,Rt(Tt,Le[xt],mt,st);var zt=Le[xt].minX,gt=Le[xt].minY,Bt=Le[xt].maxX,jt=Le[xt].maxY;zt<Tt.minX&&(Tt.minX=zt),gt<Tt.minY&&(Tt.minY=gt),Bt>Tt.maxX&&(Tt.maxX=Bt),jt>Tt.maxY&&(Tt.maxY=jt)}return Tt}function Rt(Le,ze,je,Ne){var st=ze.geometry,mt=ze.type,Tt=[];if("Point"===mt||"MultiPoint"===mt)for(var xt=0;xt<st.length;xt+=3)Tt.push(st[xt]),Tt.push(st[xt+1]),Le.numPoints++,Le.numSimplified++;else if("LineString"===mt)nn(Tt,st,Le,je,!1,!1);else if("MultiLineString"===mt||"Polygon"===mt)for(xt=0;xt<st.length;xt++)nn(Tt,st[xt],Le,je,"Polygon"===mt,0===xt);else if("MultiPolygon"===mt)for(var zt=0;zt<st.length;zt++){var gt=st[zt];for(xt=0;xt<gt.length;xt++)nn(Tt,gt[xt],Le,je,!0,0===xt)}if(Tt.length){var Bt=ze.tags||null;if("LineString"===mt&&Ne.lineMetrics){for(var jt in Bt={},ze.tags)Bt[jt]=ze.tags[jt];Bt.mapbox_clip_start=st.start/st.size,Bt.mapbox_clip_end=st.end/st.size}var it={geometry:Tt,type:"Polygon"===mt||"MultiPolygon"===mt?3:"LineString"===mt||"MultiLineString"===mt?2:1,tags:Bt};null!==ze.id&&(it.id=ze.id),Le.features.push(it)}}function nn(Le,ze,je,Ne,st,mt){var Tt=Ne*Ne;if(Ne>0&&ze.size<(st?Tt:Ne))je.numPoints+=ze.length/3;else{for(var xt=[],zt=0;zt<ze.length;zt+=3)(0===Ne||ze[zt+2]>Tt)&&(je.numSimplified++,xt.push(ze[zt]),xt.push(ze[zt+1])),je.numPoints++;st&&function(gt,Bt){for(var jt=0,it=0,Mt=gt.length,qt=Mt-2;it<Mt;qt=it,it+=2)jt+=(gt[it]-gt[qt])*(gt[it+1]+gt[qt+1]);if(jt>0===Bt)for(it=0,Mt=gt.length;it<Mt/2;it+=2){var Wt=gt[it],an=gt[it+1];gt[it]=gt[Mt-2-it],gt[it+1]=gt[Mt-1-it],gt[Mt-2-it]=Wt,gt[Mt-1-it]=an}}(xt,mt),Le.push(xt)}}function cn(Le,ze){var je=(ze=this.options=function(st,mt){for(var Tt in mt)st[Tt]=mt[Tt];return st}(Object.create(this.options),ze)).debug;if(je&&console.time("preprocess data"),ze.maxZoom<0||ze.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ze.promoteId&&ze.generateId)throw new Error("promoteId and generateId cannot be used together.");var st,mt,Tt,xt,zt,gt,Ne=function(st,mt){var Tt=[];if("FeatureCollection"===st.type)for(var xt=0;xt<st.features.length;xt++)Te(Tt,st.features[xt],mt,xt);else Te(Tt,"Feature"===st.type?st:{geometry:st},mt);return Tt}(Le,ze);this.tiles={},this.tileCoords=[],je&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ze.indexMaxZoom,ze.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(st=Ne,mt=ze,Tt=mt.buffer/mt.extent,xt=st,zt=Je(st,1,-1-Tt,Tt,0,-1,2,mt),gt=Je(st,1,1-Tt,2+Tt,0,-1,2,mt),(zt||gt)&&(xt=Je(st,1,-Tt,1+Tt,0,-1,2,mt)||[],zt&&(xt=Ct(zt,1).concat(xt)),gt&&(xt=xt.concat(Ct(gt,-1)))),Ne=xt).length&&this.splitTile(Ne,0,0,0),je&&(Ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ze(Le,ze,je){return 32*((1<<Le)*je+ze)+Le}function Qe(Le,ze){var je=Le.tileID.canonical;if(!this._geoJSONIndex)return ze(null,null);var Ne=this._geoJSONIndex.getTile(je.z,je.x,je.y);if(!Ne)return ze(null,null);var st=new A(Ne.features),mt=S(st);0===mt.byteOffset&&mt.byteLength===mt.buffer.byteLength||(mt=new Uint8Array(mt)),ze(null,{vectorTile:st,rawData:mt.buffer})}ne.prototype.load=function(Le){var ze=this.options,je=ze.log,Ne=ze.minZoom,st=ze.maxZoom,mt=ze.nodeSize;je&&console.time("total time");var Tt="prepare "+Le.length+" points";je&&console.time(Tt),this.points=Le;for(var xt=[],zt=0;zt<Le.length;zt++)Le[zt].geometry&&xt.push(ue(Le[zt],zt));this.trees[st+1]=new q(xt,ke,De,mt,Float32Array),je&&console.timeEnd(Tt);for(var gt=st;gt>=Ne;gt--){var Bt=+Date.now();xt=this._cluster(xt,gt),this.trees[gt]=new q(xt,ke,De,mt,Float32Array),je&&console.log("z%d: %d clusters in %dms",gt,xt.length,+Date.now()-Bt)}return je&&console.timeEnd("total time"),this},ne.prototype.getClusters=function(Le,ze){var je=((Le[0]+180)%360+360)%360-180,Ne=Math.max(-90,Math.min(90,Le[1])),st=180===Le[2]?180:((Le[2]+180)%360+360)%360-180,mt=Math.max(-90,Math.min(90,Le[3]));if(Le[2]-Le[0]>=360)je=-180,st=180;else if(je>st){var Tt=this.getClusters([je,Ne,180,mt],ze),xt=this.getClusters([-180,Ne,st,mt],ze);return Tt.concat(xt)}for(var zt=this.trees[this._limitZoom(ze)],gt=[],Bt=0,jt=zt.range(be(je),ge(mt),be(st),ge(Ne));Bt<jt.length;Bt+=1){var Mt=zt.points[jt[Bt]];gt.push(Mt.numPoints?de(Mt):this.points[Mt.index])}return gt},ne.prototype.getChildren=function(Le){var ze=this._getOriginId(Le),je=this._getOriginZoom(Le),Ne="No cluster with the specified id.",st=this.trees[je];if(!st)throw new Error(Ne);var mt=st.points[ze];if(!mt)throw new Error(Ne);for(var Tt=this.options.radius/(this.options.extent*Math.pow(2,je-1)),xt=[],zt=0,gt=st.within(mt.x,mt.y,Tt);zt<gt.length;zt+=1){var jt=st.points[gt[zt]];jt.parentId===Le&&xt.push(jt.numPoints?de(jt):this.points[jt.index])}if(0===xt.length)throw new Error(Ne);return xt},ne.prototype.getLeaves=function(Le,ze,je){var Ne=[];return this._appendLeaves(Ne,Le,ze=ze||10,je=je||0,0),Ne},ne.prototype.getTile=function(Le,ze,je){var Ne=this.trees[this._limitZoom(Le)],st=Math.pow(2,Le),mt=this.options,xt=mt.radius/mt.extent,zt=(je-xt)/st,gt=(je+1+xt)/st,Bt={features:[]};return this._addTileFeatures(Ne.range((ze-xt)/st,zt,(ze+1+xt)/st,gt),Ne.points,ze,je,st,Bt),0===ze&&this._addTileFeatures(Ne.range(1-xt/st,zt,1,gt),Ne.points,st,je,st,Bt),ze===st-1&&this._addTileFeatures(Ne.range(0,zt,xt/st,gt),Ne.points,-1,je,st,Bt),Bt.features.length?Bt:null},ne.prototype.getClusterExpansionZoom=function(Le){for(var ze=this._getOriginZoom(Le)-1;ze<=this.options.maxZoom;){var je=this.getChildren(Le);if(ze++,1!==je.length)break;Le=je[0].properties.cluster_id}return ze},ne.prototype._appendLeaves=function(Le,ze,je,Ne,st){for(var mt=0,Tt=this.getChildren(ze);mt<Tt.length;mt+=1){var xt=Tt[mt],zt=xt.properties;if(zt&&zt.cluster?st+zt.point_count<=Ne?st+=zt.point_count:st=this._appendLeaves(Le,zt.cluster_id,je,Ne,st):st<Ne?st++:Le.push(xt),Le.length===je)break}return st},ne.prototype._addTileFeatures=function(Le,ze,je,Ne,st,mt){for(var Tt=0,xt=Le;Tt<xt.length;Tt+=1){var zt=ze[xt[Tt]],gt=zt.numPoints,Bt={type:1,geometry:[[Math.round(this.options.extent*(zt.x*st-je)),Math.round(this.options.extent*(zt.y*st-Ne))]],tags:gt?he(zt):this.points[zt.index].properties},jt=void 0;gt?jt=zt.id:this.options.generateId?jt=zt.index:this.points[zt.index].id&&(jt=this.points[zt.index].id),void 0!==jt&&(Bt.id=jt),mt.features.push(Bt)}},ne.prototype._limitZoom=function(Le){return Math.max(this.options.minZoom,Math.min(Le,this.options.maxZoom+1))},ne.prototype._cluster=function(Le,ze){for(var je=[],Ne=this.options,Tt=Ne.reduce,xt=Ne.radius/(Ne.extent*Math.pow(2,ze)),zt=0;zt<Le.length;zt++){var gt=Le[zt];if(!(gt.zoom<=ze)){gt.zoom=ze;for(var Bt=this.trees[ze+1],jt=Bt.within(gt.x,gt.y,xt),it=gt.numPoints||1,Mt=gt.x*it,qt=gt.y*it,Wt=Tt&&it>1?this._map(gt,!0):null,an=(zt<<5)+(ze+1)+this.points.length,Ue=0,yt=jt;Ue<yt.length;Ue+=1){var Ht=Bt.points[yt[Ue]];if(!(Ht.zoom<=ze)){Ht.zoom=ze;var Jt=Ht.numPoints||1;Mt+=Ht.x*Jt,qt+=Ht.y*Jt,it+=Jt,Ht.parentId=an,Tt&&(Wt||(Wt=this._map(gt,!0)),Tt(Wt,this._map(Ht)))}}1===it?je.push(gt):(gt.parentId=an,je.push(le(Mt/it,qt/it,an,it,Wt)))}}return je},ne.prototype._getOriginId=function(Le){return Le-this.points.length>>5},ne.prototype._getOriginZoom=function(Le){return(Le-this.points.length)%32},ne.prototype._map=function(Le,ze){if(Le.numPoints)return ze?we({},Le.properties):Le.properties;var je=this.points[Le.index].properties,Ne=this.options.map(je);return ze&&Ne===je?we({},Ne):Ne},cn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},cn.prototype.splitTile=function(Le,ze,je,Ne,st,mt,Tt){for(var xt=[Le,ze,je,Ne],zt=this.options,gt=zt.debug;xt.length;){Ne=xt.pop(),je=xt.pop(),ze=xt.pop(),Le=xt.pop();var Bt=1<<ze,jt=Ze(ze,je,Ne),it=this.tiles[jt];if(!it&&(gt>1&&console.time("creation"),it=this.tiles[jt]=ut(Le,ze,je,Ne,zt),this.tileCoords.push({z:ze,x:je,y:Ne}),gt)){gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ze,je,Ne,it.numFeatures,it.numPoints,it.numSimplified),console.timeEnd("creation"));var Mt="z"+ze;this.stats[Mt]=(this.stats[Mt]||0)+1,this.total++}if(it.source=Le,st){if(ze===zt.maxZoom||ze===st)continue;var qt=1<<st-ze;if(je!==Math.floor(mt/qt)||Ne!==Math.floor(Tt/qt))continue}else if(ze===zt.indexMaxZoom||it.numPoints<=zt.indexMaxPoints)continue;if(it.source=null,0!==Le.length){gt>1&&console.time("clipping");var Wt,an,Ue,yt,Dt,Ht,Jt=.5*zt.buffer/zt.extent,gn=.5-Jt,Qt=.5+Jt,sn=1+Jt;Wt=an=Ue=yt=null,Dt=Je(Le,Bt,je-Jt,je+Qt,0,it.minX,it.maxX,zt),Ht=Je(Le,Bt,je+gn,je+sn,0,it.minX,it.maxX,zt),Le=null,Dt&&(Wt=Je(Dt,Bt,Ne-Jt,Ne+Qt,1,it.minY,it.maxY,zt),an=Je(Dt,Bt,Ne+gn,Ne+sn,1,it.minY,it.maxY,zt),Dt=null),Ht&&(Ue=Je(Ht,Bt,Ne-Jt,Ne+Qt,1,it.minY,it.maxY,zt),yt=Je(Ht,Bt,Ne+gn,Ne+sn,1,it.minY,it.maxY,zt),Ht=null),gt>1&&console.timeEnd("clipping"),xt.push(Wt||[],ze+1,2*je,2*Ne),xt.push(an||[],ze+1,2*je,2*Ne+1),xt.push(Ue||[],ze+1,2*je+1,2*Ne),xt.push(yt||[],ze+1,2*je+1,2*Ne+1)}}},cn.prototype.getTile=function(Le,ze,je){var Ne=this.options,st=Ne.extent,mt=Ne.debug;if(Le<0||Le>24)return null;var Tt=1<<Le,xt=Ze(Le,ze=(ze%Tt+Tt)%Tt,je);if(this.tiles[xt])return Ft(this.tiles[xt],st);mt>1&&console.log("drilling down to z%d-%d-%d",Le,ze,je);for(var zt,gt=Le,Bt=ze,jt=je;!zt&&gt>0;)gt--,Bt=Math.floor(Bt/2),jt=Math.floor(jt/2),zt=this.tiles[Ze(gt,Bt,jt)];return zt&&zt.source?(mt>1&&console.log("found parent tile z%d-%d-%d",gt,Bt,jt),mt>1&&console.time("drilling down"),this.splitTile(zt.source,gt,Bt,jt,Le,ze,je),mt>1&&console.timeEnd("drilling down"),this.tiles[xt]?Ft(this.tiles[xt],st):null):null};var Ge=function(Le){function ze(je,Ne,st,mt){Le.call(this,je,Ne,st,Qe),mt&&(this.loadGeoJSON=mt)}return Le&&(ze.__proto__=Le),(ze.prototype=Object.create(Le&&Le.prototype)).constructor=ze,ze.prototype.loadData=function(je,Ne){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ne,this._pendingLoadDataParams=je,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ze.prototype._loadData=function(){var je=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ne=this._pendingCallback,st=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var mt=!!(st&&st.request&&st.request.collectResourceTiming)&&new e.RequestPerformance(st.request);this.loadGeoJSON(st,function(Tt,xt){if(Tt||!xt)return Ne(Tt);if("object"!=typeof xt)return Ne(new Error("Input data given to '"+st.source+"' is not a valid GeoJSON object."));y(xt,!0);try{je._geoJSONIndex=st.cluster?new ne(function(Bt){var jt=Bt.superclusterOptions,it=Bt.clusterProperties;if(!it||!jt)return jt;for(var Mt={},qt={},Wt={accumulated:null,zoom:0},an={properties:null},Ue=Object.keys(it),yt=0,Dt=Ue;yt<Dt.length;yt+=1){var Ht=Dt[yt],Jt=it[Ht],gn=Jt[0],sn=e.createExpression(Jt[1]),hn=e.createExpression("string"==typeof gn?[gn,["accumulated"],["get",Ht]]:gn);Mt[Ht]=sn.value,qt[Ht]=hn.value}return jt.map=function(Dn){an.properties=Dn;for(var _n={},Tn=0,wn=Ue;Tn<wn.length;Tn+=1){var kn=wn[Tn];_n[kn]=Mt[kn].evaluate(Wt,an)}return _n},jt.reduce=function(Dn,_n){an.properties=_n;for(var Tn=0,wn=Ue;Tn<wn.length;Tn+=1){var kn=wn[Tn];Wt.accumulated=Dn[kn],Dn[kn]=qt[kn].evaluate(Wt,an)}},jt}(st)).load(xt.features):new cn(Bt=xt,st.geojsonVtOptions)}catch(Bt){return Ne(Bt)}var Bt;je.loaded={};var zt={};if(mt){var gt=mt.finish();gt&&(zt.resourceTiming={},zt.resourceTiming[st.source]=JSON.parse(JSON.stringify(gt)))}Ne(null,zt)})}},ze.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},ze.prototype.reloadTile=function(je,Ne){var st=this.loaded;return st&&st[je.uid]?Le.prototype.reloadTile.call(this,je,Ne):this.loadTile(je,Ne)},ze.prototype.loadGeoJSON=function(je,Ne){if(je.request)e.getJSON(je.request,Ne);else{if("string"!=typeof je.data)return Ne(new Error("Input data given to '"+je.source+"' is not a valid GeoJSON object."));try{return Ne(null,JSON.parse(je.data))}catch(st){return Ne(new Error("Input data given to '"+je.source+"' is not a valid GeoJSON object."))}}},ze.prototype.removeSource=function(je,Ne){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ne()},ze.prototype.getClusterExpansionZoom=function(je,Ne){try{Ne(null,this._geoJSONIndex.getClusterExpansionZoom(je.clusterId))}catch(st){Ne(st)}},ze.prototype.getClusterChildren=function(je,Ne){try{Ne(null,this._geoJSONIndex.getChildren(je.clusterId))}catch(st){Ne(st)}},ze.prototype.getClusterLeaves=function(je,Ne){try{Ne(null,this._geoJSONIndex.getLeaves(je.clusterId,je.limit,je.offset))}catch(st){Ne(st)}},ze}(u),rt=function(Le){var ze=this;this.self=Le,this.actor=new e.Actor(Le,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:u,geojson:Ge},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(je,Ne){if(ze.workerSourceTypes[je])throw new Error('Worker source with name "'+je+'" already registered.');ze.workerSourceTypes[je]=Ne},this.self.registerRTLTextPlugin=function(je){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=je.applyArabicShaping,e.plugin.processBidirectionalText=je.processBidirectionalText,e.plugin.processStyledBidirectionalText=je.processStyledBidirectionalText}};return rt.prototype.setReferrer=function(Le,ze){this.referrer=ze},rt.prototype.setImages=function(Le,ze,je){for(var Ne in this.availableImages[Le]=ze,this.workerSources[Le]){var st=this.workerSources[Le][Ne];for(var mt in st)st[mt].availableImages=ze}je()},rt.prototype.setLayers=function(Le,ze,je){this.getLayerIndex(Le).replace(ze),je()},rt.prototype.updateLayers=function(Le,ze,je){this.getLayerIndex(Le).update(ze.layers,ze.removedIds),je()},rt.prototype.loadTile=function(Le,ze,je){this.getWorkerSource(Le,ze.type,ze.source).loadTile(ze,je)},rt.prototype.loadDEMTile=function(Le,ze,je){this.getDEMWorkerSource(Le,ze.source).loadTile(ze,je)},rt.prototype.reloadTile=function(Le,ze,je){this.getWorkerSource(Le,ze.type,ze.source).reloadTile(ze,je)},rt.prototype.abortTile=function(Le,ze,je){this.getWorkerSource(Le,ze.type,ze.source).abortTile(ze,je)},rt.prototype.removeTile=function(Le,ze,je){this.getWorkerSource(Le,ze.type,ze.source).removeTile(ze,je)},rt.prototype.removeDEMTile=function(Le,ze){this.getDEMWorkerSource(Le,ze.source).removeTile(ze)},rt.prototype.removeSource=function(Le,ze,je){if(this.workerSources[Le]&&this.workerSources[Le][ze.type]&&this.workerSources[Le][ze.type][ze.source]){var Ne=this.workerSources[Le][ze.type][ze.source];delete this.workerSources[Le][ze.type][ze.source],void 0!==Ne.removeSource?Ne.removeSource(ze,je):je()}},rt.prototype.loadWorkerSource=function(Le,ze,je){try{this.self.importScripts(ze.url),je()}catch(Ne){je(Ne.toString())}},rt.prototype.syncRTLPluginState=function(Le,ze,je){try{e.plugin.setState(ze);var Ne=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=Ne){this.self.importScripts(Ne);var st=e.plugin.isParsed();je(st?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ne),st)}}catch(mt){je(mt.toString())}},rt.prototype.getAvailableImages=function(Le){var ze=this.availableImages[Le];return ze||(ze=[]),ze},rt.prototype.getLayerIndex=function(Le){var ze=this.layerIndexes[Le];return ze||(ze=this.layerIndexes[Le]=new a),ze},rt.prototype.getWorkerSource=function(Le,ze,je){var Ne=this;return this.workerSources[Le]||(this.workerSources[Le]={}),this.workerSources[Le][ze]||(this.workerSources[Le][ze]={}),this.workerSources[Le][ze][je]||(this.workerSources[Le][ze][je]=new this.workerSourceTypes[ze]({send:function(mt,Tt,xt){Ne.actor.send(mt,Tt,xt,Le)}},this.getLayerIndex(Le),this.getAvailableImages(Le))),this.workerSources[Le][ze][je]},rt.prototype.getDEMWorkerSource=function(Le,ze){return this.demWorkerSources[Le]||(this.demWorkerSources[Le]={}),this.demWorkerSources[Le][ze]||(this.demWorkerSources[Le][ze]=new p),this.demWorkerSources[Le][ze]},rt.prototype.enforceCacheSizeLimit=function(Le,ze){e.enforceCacheSizeLimit(ze)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new rt(e.window)),rt}),b(0,function(e){var r=e.createCommonjsModule(function(O){function N(fe){return!U(fe)}function U(fe){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var me,_e,Ae=new Blob([""],{type:"text/javascript"}),Oe=URL.createObjectURL(Ae);try{_e=new Worker(Oe),me=!0}catch(Xe){me=!1}return _e&&_e.terminate(),URL.revokeObjectURL(Oe),me}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var me=document.createElement("canvas");me.width=me.height=1;var _e=me.getContext("2d");if(!_e)return!1;var Ae=_e.getImageData(0,0,1,1);return Ae&&Ae.width===me.width}()?(void 0===X[me=fe&&fe.failIfMajorPerformanceCaveat]&&(X[me]=function(_e){var Xe,nt,dt,Ae=(Xe=_e,nt=document.createElement("canvas"),(dt=Object.create(N.webGLContextAttributes)).failIfMajorPerformanceCaveat=Xe,nt.probablySupportsContext?nt.probablySupportsContext("webgl",dt)||nt.probablySupportsContext("experimental-webgl",dt):nt.supportsContext?nt.supportsContext("webgl",dt)||nt.supportsContext("experimental-webgl",dt):nt.getContext("webgl",dt)||nt.getContext("experimental-webgl",dt));if(!Ae)return!1;var Oe=Ae.createShader(Ae.VERTEX_SHADER);return!(!Oe||Ae.isContextLost())&&(Ae.shaderSource(Oe,"void main() {}"),Ae.compileShader(Oe),!0===Ae.getShaderParameter(Oe,Ae.COMPILE_STATUS))}(me)),X[me]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var me}O.exports?O.exports=N:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=N,window.mapboxgl.notSupportedReason=U);var X={};N.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),t={create:function(O,N,U){var X=e.window.document.createElement(O);return void 0!==N&&(X.className=N),U&&U.appendChild(X),X},createNS:function(O,N){return e.window.document.createElementNS(O,N)}},a=e.window.document.documentElement.style;function n(O){if(!a)return O[0];for(var N=0;N<O.length;N++)if(O[N]in a)return O[N];return O[0]}var d,s=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);t.disableDrag=function(){a&&s&&(d=a[s],a[s]="none")},t.enableDrag=function(){a&&s&&(a[s]=d)};var i=n(["transform","WebkitTransform"]);t.setTransform=function(O,N){O.style[i]=N};var u=!1;try{var f=Object.defineProperty({},"passive",{get:function(){u=!0}});e.window.addEventListener("test",f,f),e.window.removeEventListener("test",f,f)}catch(O){u=!1}t.addEventListener=function(O,N,U,X){void 0===X&&(X={}),O.addEventListener(N,U,"passive"in X&&u?X:X.capture)},t.removeEventListener=function(O,N,U,X){void 0===X&&(X={}),O.removeEventListener(N,U,"passive"in X&&u?X:X.capture)};var p=function(O){O.preventDefault(),O.stopPropagation(),e.window.removeEventListener("click",p,!0)};function y(O){var N=O.userImage;return!!(N&&N.render&&N.render())&&(O.data.replace(new Uint8Array(N.data.buffer)),!0)}t.suppressClick=function(){e.window.addEventListener("click",p,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",p,!0)},0)},t.mousePos=function(O,N){var U=O.getBoundingClientRect();return new e.Point(N.clientX-U.left-O.clientLeft,N.clientY-U.top-O.clientTop)},t.touchPos=function(O,N){for(var U=O.getBoundingClientRect(),X=[],fe=0;fe<N.length;fe++)X.push(new e.Point(N[fe].clientX-U.left-O.clientLeft,N[fe].clientY-U.top-O.clientTop));return X},t.mouseButton=function(O){return void 0!==e.window.InstallTrigger&&2===O.button&&O.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:O.button},t.remove=function(O){O.parentNode&&O.parentNode.removeChild(O)};var m=function(O){function N(){O.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.isLoaded=function(){return this.loaded},N.prototype.setLoaded=function(U){if(this.loaded!==U&&(this.loaded=U,U)){for(var X=0,fe=this.requestors;X<fe.length;X+=1){var me=fe[X];this._notify(me.ids,me.callback)}this.requestors=[]}},N.prototype.getImage=function(U){return this.images[U]},N.prototype.addImage=function(U,X){this._validate(U,X)&&(this.images[U]=X)},N.prototype._validate=function(U,X){var fe=!0;return this._validateStretch(X.stretchX,X.data&&X.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+U+'" has invalid "stretchX" value'))),fe=!1),this._validateStretch(X.stretchY,X.data&&X.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+U+'" has invalid "stretchY" value'))),fe=!1),this._validateContent(X.content,X)||(this.fire(new e.ErrorEvent(new Error('Image "'+U+'" has invalid "content" value'))),fe=!1),fe},N.prototype._validateStretch=function(U,X){if(!U)return!0;for(var fe=0,me=0,_e=U;me<_e.length;me+=1){var Ae=_e[me];if(Ae[0]<fe||Ae[1]<Ae[0]||X<Ae[1])return!1;fe=Ae[1]}return!0},N.prototype._validateContent=function(U,X){return!(U&&(4!==U.length||U[0]<0||X.data.width<U[0]||U[1]<0||X.data.height<U[1]||U[2]<0||X.data.width<U[2]||U[3]<0||X.data.height<U[3]||U[2]<U[0]||U[3]<U[1]))},N.prototype.updateImage=function(U,X){X.version=this.images[U].version+1,this.images[U]=X,this.updatedImages[U]=!0},N.prototype.removeImage=function(U){var X=this.images[U];delete this.images[U],delete this.patterns[U],X.userImage&&X.userImage.onRemove&&X.userImage.onRemove()},N.prototype.listImages=function(){return Object.keys(this.images)},N.prototype.getImages=function(U,X){var fe=!0;if(!this.isLoaded())for(var me=0,_e=U;me<_e.length;me+=1)this.images[_e[me]]||(fe=!1);this.isLoaded()||fe?this._notify(U,X):this.requestors.push({ids:U,callback:X})},N.prototype._notify=function(U,X){for(var fe={},me=0,_e=U;me<_e.length;me+=1){var Ae=_e[me];this.images[Ae]||this.fire(new e.Event("styleimagemissing",{id:Ae}));var Oe=this.images[Ae];Oe?fe[Ae]={data:Oe.data.clone(),pixelRatio:Oe.pixelRatio,sdf:Oe.sdf,version:Oe.version,stretchX:Oe.stretchX,stretchY:Oe.stretchY,content:Oe.content,hasRenderCallback:Boolean(Oe.userImage&&Oe.userImage.render)}:e.warnOnce('Image "'+Ae+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}X(null,fe)},N.prototype.getPixelSize=function(){var U=this.atlasImage;return{width:U.width,height:U.height}},N.prototype.getPattern=function(U){var X=this.patterns[U],fe=this.getImage(U);if(!fe)return null;if(X&&X.position.version===fe.version)return X.position;if(X)X.position.version=fe.version;else{var me={w:fe.data.width+2,h:fe.data.height+2,x:0,y:0},_e=new e.ImagePosition(me,fe);this.patterns[U]={bin:me,position:_e}}return this._updatePatternAtlas(),this.patterns[U].position},N.prototype.bind=function(U){var X=U.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(U,this.atlasImage,X.RGBA),this.atlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE)},N.prototype._updatePatternAtlas=function(){var U=[];for(var X in this.patterns)U.push(this.patterns[X].bin);var fe=e.potpack(U),me=fe.w,_e=fe.h,Ae=this.atlasImage;for(var Oe in Ae.resize({width:me||1,height:_e||1}),this.patterns){var Xe=this.patterns[Oe].bin,nt=Xe.x+1,dt=Xe.y+1,St=this.images[Oe].data,Nt=St.width,It=St.height;e.RGBAImage.copy(St,Ae,{x:0,y:0},{x:nt,y:dt},{width:Nt,height:It}),e.RGBAImage.copy(St,Ae,{x:0,y:It-1},{x:nt,y:dt-1},{width:Nt,height:1}),e.RGBAImage.copy(St,Ae,{x:0,y:0},{x:nt,y:dt+It},{width:Nt,height:1}),e.RGBAImage.copy(St,Ae,{x:Nt-1,y:0},{x:nt-1,y:dt},{width:1,height:It}),e.RGBAImage.copy(St,Ae,{x:0,y:0},{x:nt+Nt,y:dt},{width:1,height:It})}this.dirty=!0},N.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},N.prototype.dispatchRenderCallbacks=function(U){for(var X=0,fe=U;X<fe.length;X+=1){var me=fe[X];if(!this.callbackDispatchedThisFrame[me]){this.callbackDispatchedThisFrame[me]=!0;var _e=this.images[me];y(_e)&&this.updateImage(me,_e)}}},N}(e.Evented),l=A,w=A,v=1e20;function A(O,N,U,X,fe,me){this.fontSize=O||24,this.buffer=void 0===N?3:N,this.cutoff=X||.25,this.fontFamily=fe||"sans-serif",this.fontWeight=me||"normal",this.radius=U||8;var _e=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=_e,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(_e*_e),this.gridInner=new Float64Array(_e*_e),this.f=new Float64Array(_e),this.d=new Float64Array(_e),this.z=new Float64Array(_e+1),this.v=new Int16Array(_e),this.middle=Math.round(_e/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function M(O,N,U,X,fe,me,_e){for(var Ae=0;Ae<N;Ae++){for(var Oe=0;Oe<U;Oe++)X[Oe]=O[Oe*N+Ae];for(k(X,fe,me,_e,U),Oe=0;Oe<U;Oe++)O[Oe*N+Ae]=fe[Oe]}for(Oe=0;Oe<U;Oe++){for(Ae=0;Ae<N;Ae++)X[Ae]=O[Oe*N+Ae];for(k(X,fe,me,_e,N),Ae=0;Ae<N;Ae++)O[Oe*N+Ae]=Math.sqrt(fe[Ae])}}function k(O,N,U,X,fe){U[0]=0,X[0]=-v,X[1]=+v;for(var me=1,_e=0;me<fe;me++){for(var Ae=(O[me]+me*me-(O[U[_e]]+U[_e]*U[_e]))/(2*me-2*U[_e]);Ae<=X[_e];)_e--,Ae=(O[me]+me*me-(O[U[_e]]+U[_e]*U[_e]))/(2*me-2*U[_e]);U[++_e]=me,X[_e]=Ae,X[_e+1]=+v}for(me=0,_e=0;me<fe;me++){for(;X[_e+1]<me;)_e++;N[me]=(me-U[_e])*(me-U[_e])+O[U[_e]]}}A.prototype.draw=function(O){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(O,this.buffer,this.middle);for(var N=this.ctx.getImageData(0,0,this.size,this.size),U=new Uint8ClampedArray(this.size*this.size),X=0;X<this.size*this.size;X++){var fe=N.data[4*X+3]/255;this.gridOuter[X]=1===fe?0:0===fe?v:Math.pow(Math.max(0,.5-fe),2),this.gridInner[X]=1===fe?v:0===fe?0:Math.pow(Math.max(0,fe-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),X=0;X<this.size*this.size;X++)U[X]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[X]-this.gridInner[X])/this.radius+this.cutoff))));return U},l.default=w;var E=function(O,N){this.requestManager=O,this.localIdeographFontFamily=N,this.entries={}};E.prototype.setURL=function(O){this.url=O},E.prototype.getGlyphs=function(O,N){var U=this,X=[];for(var fe in O)for(var me=0,_e=O[fe];me<_e.length;me+=1)X.push({stack:fe,id:_e[me]});e.asyncAll(X,function(Oe,Xe){var nt=Oe.stack,dt=Oe.id,St=U.entries[nt];St||(St=U.entries[nt]={glyphs:{},requests:{},ranges:{}});var Nt=St.glyphs[dt];if(void 0===Nt){if(Nt=U._tinySDF(St,nt,dt))return St.glyphs[dt]=Nt,void Xe(null,{stack:nt,id:dt,glyph:Nt});var It=Math.floor(dt/256);if(256*It>65535)Xe(new Error("glyphs > 65535 not supported"));else if(St.ranges[It])Xe(null,{stack:nt,id:dt,glyph:Nt});else{var Lt=St.requests[It];Lt||(Lt=St.requests[It]=[],E.loadGlyphRange(nt,It,U.url,U.requestManager,function(At,Zt){if(Zt){for(var Gt in Zt)U._doesCharSupportLocalGlyph(+Gt)||(St.glyphs[+Gt]=Zt[+Gt]);St.ranges[It]=!0}for(var $t=0,mn=Lt;$t<mn.length;$t+=1)(0,mn[$t])(At,Zt);delete St.requests[It]})),Lt.push(function(At,Zt){At?Xe(At):Zt&&Xe(null,{stack:nt,id:dt,glyph:Zt[dt]||null})})}}else Xe(null,{stack:nt,id:dt,glyph:Nt})},function(Oe,Xe){if(Oe)N(Oe);else if(Xe){for(var nt={},dt=0,St=Xe;dt<St.length;dt+=1){var Nt=St[dt],It=Nt.stack,Lt=Nt.id,At=Nt.glyph;(nt[It]||(nt[It]={}))[Lt]=At&&{id:At.id,bitmap:At.bitmap.clone(),metrics:At.metrics}}N(null,nt)}})},E.prototype._doesCharSupportLocalGlyph=function(O){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](O)||e.isChar["Hangul Syllables"](O)||e.isChar.Hiragana(O)||e.isChar.Katakana(O))},E.prototype._tinySDF=function(O,N,U){var X=this.localIdeographFontFamily;if(X&&this._doesCharSupportLocalGlyph(U)){var fe=O.tinySDF;if(!fe){var me="400";/bold/i.test(N)?me="900":/medium/i.test(N)?me="500":/light/i.test(N)&&(me="200"),fe=O.tinySDF=new E.TinySDF(24,3,8,.25,X,me)}return{id:U,bitmap:new e.AlphaImage({width:30,height:30},fe.draw(String.fromCharCode(U))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},E.loadGlyphRange=function(O,N,U,X,fe){var me=256*N,_e=me+255,Ae=X.transformRequest(X.normalizeGlyphsURL(U).replace("{fontstack}",O).replace("{range}",me+"-"+_e),e.ResourceType.Glyphs);e.getArrayBuffer(Ae,function(Oe,Xe){if(Oe)fe(Oe);else if(Xe){for(var nt={},dt=0,St=e.parseGlyphPBF(Xe);dt<St.length;dt+=1){var Nt=St[dt];nt[Nt.id]=Nt}fe(null,nt)}})},E.TinySDF=l;var P=function(){this.specification=e.styleSpec.light.position};P.prototype.possiblyEvaluate=function(O,N){return e.sphericalToCartesian(O.expression.evaluate(N))},P.prototype.interpolate=function(O,N,U){return{x:e.number(O.x,N.x,U),y:e.number(O.y,N.y,U),z:e.number(O.z,N.z,U)}};var S=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new P,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),F=function(O){function N(U){O.call(this),this._transitionable=new e.Transitionable(S),this.setLight(U),this._transitioning=this._transitionable.untransitioned()}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getLight=function(){return this._transitionable.serialize()},N.prototype.setLight=function(U,X){if(void 0===X&&(X={}),!this._validate(e.validateLight,U,X))for(var fe in U){var me=U[fe];e.endsWith(fe,"-transition")?this._transitionable.setTransition(fe.slice(0,-"-transition".length),me):this._transitionable.setValue(fe,me)}},N.prototype.updateTransitions=function(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)},N.prototype.hasTransition=function(){return this._transitioning.hasTransition()},N.prototype.recalculate=function(U){this.properties=this._transitioning.possiblyEvaluate(U)},N.prototype._validate=function(U,X,fe){return(!fe||!1!==fe.validate)&&e.emitValidationErrors(this,U.call(e.validateStyle,e.extend({value:X,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},N}(e.Evented),R=function(O,N){this.width=O,this.height=N,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};R.prototype.getDash=function(O,N){var U=O.join(",")+String(N);return this.dashEntry[U]||(this.dashEntry[U]=this.addDash(O,N)),this.dashEntry[U]},R.prototype.getDashRanges=function(O,N,U){var X=[],fe=O.length%2==1?-O[O.length-1]*U:0,me=O[0]*U,_e=!0;X.push({left:fe,right:me,isDash:_e,zeroLength:0===O[0]});for(var Ae=O[0],Oe=1;Oe<O.length;Oe++){var Xe=O[Oe];fe=Ae*U,me=(Ae+=Xe)*U,X.push({left:fe,right:me,isDash:_e=!_e,zeroLength:0===Xe})}return X},R.prototype.addRoundDash=function(O,N,U){for(var X=N/2,fe=-U;fe<=U;fe++)for(var _e=this.width*(this.nextRow+U+fe),Ae=0,Oe=O[Ae],Xe=0;Xe<this.width;Xe++){Xe/Oe.right>1&&(Oe=O[++Ae]);var nt=Math.abs(Xe-Oe.left),dt=Math.abs(Xe-Oe.right),St=Math.min(nt,dt),Nt=void 0,It=fe/U*(X+1);if(Oe.isDash){var Lt=X-Math.abs(It);Nt=Math.sqrt(St*St+Lt*Lt)}else Nt=X-Math.sqrt(St*St+It*It);this.data[_e+Xe]=Math.max(0,Math.min(255,Nt+128))}},R.prototype.addRegularDash=function(O){for(var N=O.length-1;N>=0;--N){var U=O[N],X=O[N+1];U.zeroLength?O.splice(N,1):X&&X.isDash===U.isDash&&(X.left=U.left,O.splice(N,1))}var fe=O[0],me=O[O.length-1];fe.isDash===me.isDash&&(fe.left=me.left-this.width,me.right=fe.right+this.width);for(var _e=this.width*this.nextRow,Ae=0,Oe=O[Ae],Xe=0;Xe<this.width;Xe++){Xe/Oe.right>1&&(Oe=O[++Ae]);var nt=Math.abs(Xe-Oe.left),dt=Math.abs(Xe-Oe.right),St=Math.min(nt,dt);this.data[_e+Xe]=Math.max(0,Math.min(255,(Oe.isDash?St:-St)+128))}},R.prototype.addDash=function(O,N){var U=N?7:0,X=2*U+1;if(this.nextRow+X>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var fe=0,me=0;me<O.length;me++)fe+=O[me];if(0!==fe){var _e=this.width/fe,Ae=this.getDashRanges(O,this.width,_e);N?this.addRoundDash(Ae,_e,U):this.addRegularDash(Ae)}var Oe={y:(this.nextRow+U+.5)/this.height,height:2*U/this.height,width:fe};return this.nextRow+=X,this.dirty=!0,Oe},R.prototype.bind=function(O){var N=O.gl;this.texture?(N.bindTexture(N.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,N.texSubImage2D(N.TEXTURE_2D,0,0,0,this.width,this.height,N.ALPHA,N.UNSIGNED_BYTE,this.data))):(this.texture=N.createTexture(),N.bindTexture(N.TEXTURE_2D,this.texture),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.REPEAT),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.REPEAT),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR),N.texImage2D(N.TEXTURE_2D,0,N.ALPHA,this.width,this.height,0,N.ALPHA,N.UNSIGNED_BYTE,this.data))};var D=function O(N,U){this.workerPool=N,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var X=this.workerPool.acquire(this.id),fe=0;fe<X.length;fe++){var _e=new O.Actor(X[fe],U,this.id);_e.name="Worker "+fe,this.actors.push(_e)}};function L(O,N,U){var X=function(fe,me){if(fe)return U(fe);if(me){var _e=e.pick(e.extend(me,O),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);me.vector_layers&&(_e.vectorLayers=me.vector_layers,_e.vectorLayerIds=_e.vectorLayers.map(function(Ae){return Ae.id})),_e.tiles=N.canonicalizeTileset(_e,O.url),U(null,_e)}};return O.url?e.getJSON(N.transformRequest(N.normalizeSourceURL(O.url),e.ResourceType.Source),X):e.browser.frame(function(){return X(null,O)})}D.prototype.broadcast=function(O,N,U){e.asyncAll(this.actors,function(X,fe){X.send(O,N,fe)},U=U||function(){})},D.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},D.prototype.remove=function(){this.actors.forEach(function(O){O.remove()}),this.actors=[],this.workerPool.release(this.id)},D.Actor=e.Actor;var B=function(O,N,U){this.bounds=e.LngLatBounds.convert(this.validateBounds(O)),this.minzoom=N||0,this.maxzoom=U||24};B.prototype.validateBounds=function(O){return Array.isArray(O)&&4===O.length?[Math.max(-180,O[0]),Math.max(-90,O[1]),Math.min(180,O[2]),Math.min(90,O[3])]:[-180,-90,180,90]},B.prototype.contains=function(O){var N=Math.pow(2,O.z),U=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*N),X=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*N),fe=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*N),me=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*N);return O.x>=U&&O.x<fe&&O.y>=X&&O.y<me};var V=function(O){function N(U,X,fe,me){if(O.call(this),this.id=U,this.dispatcher=fe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(X,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},X),this._collectResourceTiming=X.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(me)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(){var U=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,function(X,fe){U._tileJSONRequest=null,U._loaded=!0,X?U.fire(new e.ErrorEvent(X)):fe&&(e.extend(U,fe),fe.bounds&&(U.tileBounds=new B(fe.bounds,U.minzoom,U.maxzoom)),e.postTurnstileEvent(fe.tiles,U.map._requestManager._customAccessToken),e.postMapLoadEvent(fe.tiles,U.map._getMapId(),U.map._requestManager._skuToken,U.map._requestManager._customAccessToken),U.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),U.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},N.prototype.loaded=function(){return this._loaded},N.prototype.hasTile=function(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)},N.prototype.onAdd=function(U){this.map=U,this.load()},N.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},N.prototype.serialize=function(){return e.extend({},this._options)},N.prototype.loadTile=function(U,X){var fe=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme)),me={request:this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),uid:U.uid,tileID:U.tileID,zoom:U.tileID.overscaledZ,tileSize:this.tileSize*U.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _e(Ae,Oe){return delete U.request,U.aborted?X(null):Ae&&404!==Ae.status?X(Ae):(Oe&&Oe.resourceTiming&&(U.resourceTiming=Oe.resourceTiming),this.map._refreshExpiredTiles&&Oe&&U.setExpiryData(Oe),U.loadVectorData(Oe,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),X(null),void(U.reloadCallback&&(this.loadTile(U,U.reloadCallback),U.reloadCallback=null)))}me.request.collectResourceTiming=this._collectResourceTiming,U.actor&&"expired"!==U.state?"loading"===U.state?U.reloadCallback=X:U.request=U.actor.send("reloadTile",me,_e.bind(this)):(U.actor=this.dispatcher.getActor(),U.request=U.actor.send("loadTile",me,_e.bind(this)))},N.prototype.abortTile=function(U){U.request&&(U.request.cancel(),delete U.request),U.actor&&U.actor.send("abortTile",{uid:U.uid,type:this.type,source:this.id},void 0)},N.prototype.unloadTile=function(U){U.unloadVectorData(),U.actor&&U.actor.send("removeTile",{uid:U.uid,type:this.type,source:this.id},void 0)},N.prototype.hasTransition=function(){return!1},N}(e.Evented),Z=function(O){function N(U,X,fe,me){O.call(this),this.id=U,this.dispatcher=fe,this.setEventedParent(me),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},X),e.extend(this,e.pick(X,["url","scheme","tileSize"]))}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(){var U=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,function(X,fe){U._tileJSONRequest=null,U._loaded=!0,X?U.fire(new e.ErrorEvent(X)):fe&&(e.extend(U,fe),fe.bounds&&(U.tileBounds=new B(fe.bounds,U.minzoom,U.maxzoom)),e.postTurnstileEvent(fe.tiles),e.postMapLoadEvent(fe.tiles,U.map._getMapId(),U.map._requestManager._skuToken),U.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),U.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},N.prototype.loaded=function(){return this._loaded},N.prototype.onAdd=function(U){this.map=U,this.load()},N.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},N.prototype.serialize=function(){return e.extend({},this._options)},N.prototype.hasTile=function(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)},N.prototype.loadTile=function(U,X){var fe=this,me=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);U.request=e.getImage(this.map._requestManager.transformRequest(me,e.ResourceType.Tile),function(_e,Ae){if(delete U.request,U.aborted)U.state="unloaded",X(null);else if(_e)U.state="errored",X(_e);else if(Ae){fe.map._refreshExpiredTiles&&U.setExpiryData(Ae),delete Ae.cacheControl,delete Ae.expires;var Oe=fe.map.painter.context,Xe=Oe.gl;U.texture=fe.map.painter.getTileTexture(Ae.width),U.texture?U.texture.update(Ae,{useMipmap:!0}):(U.texture=new e.Texture(Oe,Ae,Xe.RGBA,{useMipmap:!0}),U.texture.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE,Xe.LINEAR_MIPMAP_NEAREST),Oe.extTextureFilterAnisotropic&&Xe.texParameterf(Xe.TEXTURE_2D,Oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Oe.extTextureFilterAnisotropicMax)),U.state="loaded",e.cacheEntryPossiblyAdded(fe.dispatcher),X(null)}})},N.prototype.abortTile=function(U,X){U.request&&(U.request.cancel(),delete U.request),X()},N.prototype.unloadTile=function(U,X){U.texture&&this.map.painter.saveTileTexture(U.texture),X()},N.prototype.hasTransition=function(){return!1},N}(e.Evented),Y=function(O){function N(U,X,fe,me){O.call(this,U,X,fe,me),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},X),this.encoding=X.encoding||"mapbox"}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},N.prototype.loadTile=function(U,X){var fe=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function me(_e,Ae){_e&&(U.state="errored",X(_e)),Ae&&(U.dem=Ae,U.needsHillshadePrepare=!0,U.state="loaded",X(null))}U.request=e.getImage(this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),function(_e,Ae){if(delete U.request,U.aborted)U.state="unloaded",X(null);else if(_e)U.state="errored",X(_e);else if(Ae){this.map._refreshExpiredTiles&&U.setExpiryData(Ae),delete Ae.cacheControl,delete Ae.expires;var Oe=e.window.ImageBitmap&&Ae instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?Ae:e.browser.getImageData(Ae,1),Xe={uid:U.uid,coord:U.tileID,source:this.id,rawImageData:Oe,encoding:this.encoding};U.actor&&"expired"!==U.state||(U.actor=this.dispatcher.getActor(),U.actor.send("loadDEMTile",Xe,me.bind(this)))}}.bind(this)),U.neighboringTiles=this._getNeighboringTiles(U.tileID)},N.prototype._getNeighboringTiles=function(U){var X=U.canonical,fe=Math.pow(2,X.z),me=(X.x-1+fe)%fe,_e=0===X.x?U.wrap-1:U.wrap,Ae=(X.x+1+fe)%fe,Oe=X.x+1===fe?U.wrap+1:U.wrap,Xe={};return Xe[new e.OverscaledTileID(U.overscaledZ,_e,X.z,me,X.y).key]={backfilled:!1},Xe[new e.OverscaledTileID(U.overscaledZ,Oe,X.z,Ae,X.y).key]={backfilled:!1},X.y>0&&(Xe[new e.OverscaledTileID(U.overscaledZ,_e,X.z,me,X.y-1).key]={backfilled:!1},Xe[new e.OverscaledTileID(U.overscaledZ,U.wrap,X.z,X.x,X.y-1).key]={backfilled:!1},Xe[new e.OverscaledTileID(U.overscaledZ,Oe,X.z,Ae,X.y-1).key]={backfilled:!1}),X.y+1<fe&&(Xe[new e.OverscaledTileID(U.overscaledZ,_e,X.z,me,X.y+1).key]={backfilled:!1},Xe[new e.OverscaledTileID(U.overscaledZ,U.wrap,X.z,X.x,X.y+1).key]={backfilled:!1},Xe[new e.OverscaledTileID(U.overscaledZ,Oe,X.z,Ae,X.y+1).key]={backfilled:!1}),Xe},N.prototype.unloadTile=function(U){U.demTexture&&this.map.painter.saveTileTexture(U.demTexture),U.fbo&&(U.fbo.destroy(),delete U.fbo),U.dem&&delete U.dem,delete U.neighboringTiles,U.state="unloaded",U.actor&&U.actor.send("removeDEMTile",{uid:U.uid,source:this.id})},N}(Z),ee=function(O){function N(U,X,fe,me){O.call(this),this.id=U,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=fe.getActor(),this.setEventedParent(me),this._data=X.data,this._options=e.extend({},X),this._collectResourceTiming=X.collectResourceTiming,this._resourceTiming=[],void 0!==X.maxzoom&&(this.maxzoom=X.maxzoom),X.type&&(this.type=X.type),X.attribution&&(this.attribution=X.attribution),this.promoteId=X.promoteId;var _e=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:X.cluster||!1,geojsonVtOptions:{buffer:(void 0!==X.buffer?X.buffer:128)*_e,tolerance:(void 0!==X.tolerance?X.tolerance:.375)*_e,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:X.lineMetrics||!1,generateId:X.generateId||!1},superclusterOptions:{maxZoom:void 0!==X.clusterMaxZoom?Math.min(X.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(X.clusterRadius||50)*_e,log:!1,generateId:X.generateId||!1},clusterProperties:X.clusterProperties},X.workerOptions)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(){var U=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(X){if(X)U.fire(new e.ErrorEvent(X));else{var fe={dataType:"source",sourceDataType:"metadata"};U._collectResourceTiming&&U._resourceTiming&&U._resourceTiming.length>0&&(fe.resourceTiming=U._resourceTiming,U._resourceTiming=[]),U.fire(new e.Event("data",fe))}})},N.prototype.onAdd=function(U){this.map=U,this.load()},N.prototype.setData=function(U){var X=this;return this._data=U,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(fe){if(fe)X.fire(new e.ErrorEvent(fe));else{var me={dataType:"source",sourceDataType:"content"};X._collectResourceTiming&&X._resourceTiming&&X._resourceTiming.length>0&&(me.resourceTiming=X._resourceTiming,X._resourceTiming=[]),X.fire(new e.Event("data",me))}}),this},N.prototype.getClusterExpansionZoom=function(U,X){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:U,source:this.id},X),this},N.prototype.getClusterChildren=function(U,X){return this.actor.send("geojson.getClusterChildren",{clusterId:U,source:this.id},X),this},N.prototype.getClusterLeaves=function(U,X,fe,me){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:U,limit:X,offset:fe},me),this},N.prototype._updateWorkerData=function(U){var X=this;this._loaded=!1;var fe=e.extend({},this.workerOptions),me=this._data;"string"==typeof me?(fe.request=this.map._requestManager.transformRequest(e.browser.resolveURL(me),e.ResourceType.Source),fe.request.collectResourceTiming=this._collectResourceTiming):fe.data=JSON.stringify(me),this.actor.send(this.type+".loadData",fe,function(_e,Ae){X._removed||Ae&&Ae.abandoned||(X._loaded=!0,Ae&&Ae.resourceTiming&&Ae.resourceTiming[X.id]&&(X._resourceTiming=Ae.resourceTiming[X.id].slice(0)),X.actor.send(X.type+".coalesce",{source:fe.source},null),U(_e))})},N.prototype.loaded=function(){return this._loaded},N.prototype.loadTile=function(U,X){var fe=this,me=U.actor?"reloadTile":"loadTile";U.actor=this.actor,U.request=this.actor.send(me,{type:this.type,uid:U.uid,tileID:U.tileID,zoom:U.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Ae,Oe){return delete U.request,U.unloadVectorData(),U.aborted?X(null):Ae?X(Ae):(U.loadVectorData(Oe,fe.map.painter,"reloadTile"===me),X(null))})},N.prototype.abortTile=function(U){U.request&&(U.request.cancel(),delete U.request),U.aborted=!0},N.prototype.unloadTile=function(U){U.unloadVectorData(),this.actor.send("removeTile",{uid:U.uid,type:this.type,source:this.id})},N.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},N.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},N.prototype.hasTransition=function(){return!1},N}(e.Evented),Q=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),$=function(O){function N(U,X,fe,me){O.call(this),this.id=U,this.dispatcher=fe,this.coordinates=X.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(me),this.options=X}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(U,X){var fe=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(me,_e){fe._loaded=!0,me?fe.fire(new e.ErrorEvent(me)):_e&&(fe.image=_e,U&&(fe.coordinates=U),X&&X(),fe._finishLoading())})},N.prototype.loaded=function(){return this._loaded},N.prototype.updateImage=function(U){var X=this;return this.image&&U.url?(this.options.url=U.url,this.load(U.coordinates,function(){X.texture=null}),this):this},N.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},N.prototype.onAdd=function(U){this.map=U,this.load()},N.prototype.setCoordinates=function(U){var X=this;this.coordinates=U;var fe=U.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(_e){for(var Ae=1/0,Oe=1/0,Xe=-1/0,nt=-1/0,dt=0,St=_e;dt<St.length;dt+=1){var Nt=St[dt];Ae=Math.min(Ae,Nt.x),Oe=Math.min(Oe,Nt.y),Xe=Math.max(Xe,Nt.x),nt=Math.max(nt,Nt.y)}var At=Math.max(Xe-Ae,nt-Oe),Zt=Math.max(0,Math.floor(-Math.log(At)/Math.LN2)),Gt=Math.pow(2,Zt);return new e.CanonicalTileID(Zt,Math.floor((Ae+Xe)/2*Gt),Math.floor((Oe+nt)/2*Gt))}(fe),this.minzoom=this.maxzoom=this.tileID.z;var me=fe.map(function(_e){return X.tileID.getTilePoint(_e)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(me[0].x,me[0].y,0,0),this._boundsArray.emplaceBack(me[1].x,me[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(me[3].x,me[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(me[2].x,me[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},N.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var U=this.map.painter.context,X=U.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=U.createVertexBuffer(this._boundsArray,Q.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(U,this.image,X.RGBA),this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE)),this.tiles){var me=this.tiles[fe];"loaded"!==me.state&&(me.state="loaded",me.texture=this.texture)}}},N.prototype.loadTile=function(U,X){this.tileID&&this.tileID.equals(U.tileID.canonical)?(this.tiles[String(U.tileID.wrap)]=U,U.buckets={},X(null)):(U.state="errored",X(null))},N.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},N.prototype.hasTransition=function(){return!1},N}(e.Evented),K=function(O){function N(U,X,fe,me){O.call(this,U,X,fe,me),this.roundZoom=!0,this.type="video",this.options=X}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(){var U=this;this._loaded=!1;var X=this.options;this.urls=[];for(var fe=0,me=X.urls;fe<me.length;fe+=1)this.urls.push(this.map._requestManager.transformRequest(me[fe],e.ResourceType.Source).url);e.getVideo(this.urls,function(Ae,Oe){U._loaded=!0,Ae?U.fire(new e.ErrorEvent(Ae)):Oe&&(U.video=Oe,U.video.loop=!0,U.video.addEventListener("playing",function(){U.map.triggerRepaint()}),U.map&&U.video.play(),U._finishLoading())})},N.prototype.pause=function(){this.video&&this.video.pause()},N.prototype.play=function(){this.video&&this.video.play()},N.prototype.seek=function(U){if(this.video){var X=this.video.seekable;U<X.start(0)||U>X.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+X.start(0)+" and "+X.end(0)+"-second mark."))):this.video.currentTime=U}},N.prototype.getVideo=function(){return this.video},N.prototype.onAdd=function(U){this.map||(this.map=U,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},N.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var U=this.map.painter.context,X=U.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=U.createVertexBuffer(this._boundsArray,Q.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE),X.texSubImage2D(X.TEXTURE_2D,0,0,0,X.RGBA,X.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(U,this.video,X.RGBA),this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE)),this.tiles){var me=this.tiles[fe];"loaded"!==me.state&&(me.state="loaded",me.texture=this.texture)}}},N.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},N.prototype.hasTransition=function(){return this.video&&!this.video.paused},N}($),oe=function(O){function N(U,X,fe,me){O.call(this,U,X,fe,me),X.coordinates?Array.isArray(X.coordinates)&&4===X.coordinates.length&&!X.coordinates.some(function(_e){return!Array.isArray(_e)||2!==_e.length||_e.some(function(Ae){return"number"!=typeof Ae})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+U,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+U,null,'missing required property "coordinates"'))),X.animate&&"boolean"!=typeof X.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+U,null,'optional "animate" property must be a boolean value'))),X.canvas?"string"==typeof X.canvas||X.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+U,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+U,null,'missing required property "canvas"'))),this.options=X,this.animate=void 0===X.animate||X.animate}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},N.prototype.getCanvas=function(){return this.canvas},N.prototype.onAdd=function(U){this.map=U,this.load(),this.canvas&&this.animate&&this.play()},N.prototype.onRemove=function(){this.pause()},N.prototype.prepare=function(){var U=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,U=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,U=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var X=this.map.painter.context,fe=X.gl;for(var me in this.boundsBuffer||(this.boundsBuffer=X.createVertexBuffer(this._boundsArray,Q.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(U||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(X,this.canvas,fe.RGBA,{premultiply:!0}),this.tiles){var _e=this.tiles[me];"loaded"!==_e.state&&(_e.state="loaded",_e.texture=this.texture)}}},N.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},N.prototype.hasTransition=function(){return this._playing},N.prototype._hasInvalidDimensions=function(){for(var U=0,X=[this.canvas.width,this.canvas.height];U<X.length;U+=1){var fe=X[U];if(isNaN(fe)||fe<=0)return!0}return!1},N}($),j={vector:V,raster:Z,"raster-dem":Y,geojson:ee,video:K,image:$,canvas:oe};function H(O,N){var U=e.identity([]);return e.translate(U,U,[1,1,0]),e.scale(U,U,[.5*O.width,.5*O.height,1]),e.multiply(U,U,O.calculatePosMatrix(N.toUnwrapped()))}function G(O,N,U,X,fe,me){var _e=function(Lt,At,Zt){if(Lt)for(var Gt=0,$t=Lt;Gt<$t.length;Gt+=1){var mn=At[$t[Gt]];if(mn&&mn.source===Zt&&"fill-extrusion"===mn.type)return!0}else for(var En in At){var Vn=At[En];if(Vn.source===Zt&&"fill-extrusion"===Vn.type)return!0}return!1}(fe&&fe.layers,N,O.id),Ae=me.maxPitchScaleFactor(),Oe=O.tilesIn(X,Ae,_e);Oe.sort(re);for(var Xe=[],nt=0,dt=Oe;nt<dt.length;nt+=1){var St=dt[nt];Xe.push({wrappedTileID:St.tileID.wrapped().key,queryResults:St.tile.queryRenderedFeatures(N,U,O._state,St.queryGeometry,St.cameraQueryGeometry,St.scale,fe,me,Ae,H(O.transform,St.tileID))})}var Nt=function(Lt){for(var At={},Zt={},Gt=0,$t=Lt;Gt<$t.length;Gt+=1){var mn=$t[Gt],En=mn.queryResults,Vn=mn.wrappedTileID,Nn=Zt[Vn]=Zt[Vn]||{};for(var pr in En)for(var hr=En[pr],Er=Nn[pr]=Nn[pr]||{},br=At[pr]=At[pr]||[],oi=0,ci=hr;oi<ci.length;oi+=1){var Si=ci[oi];Er[Si.featureIndex]||(Er[Si.featureIndex]=!0,br.push(Si))}}return At}(Xe);for(var It in Nt)Nt[It].forEach(function(Lt){var At=Lt.feature,Zt=O.getFeatureState(At.layer["source-layer"],At.id);At.source=At.layer.source,At.layer["source-layer"]&&(At.sourceLayer=At.layer["source-layer"]),At.state=Zt});return Nt}function re(O,N){var U=O.tileID,X=N.tileID;return U.overscaledZ-X.overscaledZ||U.canonical.y-X.canonical.y||U.wrap-X.wrap||U.canonical.x-X.canonical.x}var q=function(O,N){this.max=O,this.onRemove=N,this.reset()};q.prototype.reset=function(){for(var O in this.data)for(var N=0,U=this.data[O];N<U.length;N+=1){var X=U[N];X.timeout&&clearTimeout(X.timeout),this.onRemove(X.value)}return this.data={},this.order=[],this},q.prototype.add=function(O,N,U){var X=this,fe=O.wrapped().key;void 0===this.data[fe]&&(this.data[fe]=[]);var me={value:N,timeout:void 0};if(void 0!==U&&(me.timeout=setTimeout(function(){X.remove(O,me)},U)),this.data[fe].push(me),this.order.push(fe),this.order.length>this.max){var _e=this._getAndRemoveByKey(this.order[0]);_e&&this.onRemove(_e)}return this},q.prototype.has=function(O){return O.wrapped().key in this.data},q.prototype.getAndRemove=function(O){return this.has(O)?this._getAndRemoveByKey(O.wrapped().key):null},q.prototype._getAndRemoveByKey=function(O){var N=this.data[O].shift();return N.timeout&&clearTimeout(N.timeout),0===this.data[O].length&&delete this.data[O],this.order.splice(this.order.indexOf(O),1),N.value},q.prototype.getByKey=function(O){var N=this.data[O];return N?N[0].value:null},q.prototype.get=function(O){return this.has(O)?this.data[O.wrapped().key][0].value:null},q.prototype.remove=function(O,N){if(!this.has(O))return this;var U=O.wrapped().key,X=void 0===N?0:this.data[U].indexOf(N),fe=this.data[U][X];return this.data[U].splice(X,1),fe.timeout&&clearTimeout(fe.timeout),0===this.data[U].length&&delete this.data[U],this.onRemove(fe.value),this.order.splice(this.order.indexOf(U),1),this},q.prototype.setMaxSize=function(O){for(this.max=O;this.order.length>this.max;){var N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this},q.prototype.filter=function(O){var N=[];for(var U in this.data)for(var X=0,fe=this.data[U];X<fe.length;X+=1){var me=fe[X];O(me.value)||N.push(me)}for(var _e=0,Ae=N;_e<Ae.length;_e+=1){var Oe=Ae[_e];this.remove(Oe.value.tileID,Oe)}};var te=function(O,N,U){this.context=O;var X=O.gl;this.buffer=X.createBuffer(),this.dynamicDraw=Boolean(U),this.context.unbindVAO(),O.bindElementBuffer.set(this.buffer),X.bufferData(X.ELEMENT_ARRAY_BUFFER,N.arrayBuffer,this.dynamicDraw?X.DYNAMIC_DRAW:X.STATIC_DRAW),this.dynamicDraw||delete N.arrayBuffer};te.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},te.prototype.updateData=function(O){var N=this.context.gl;this.context.unbindVAO(),this.bind(),N.bufferSubData(N.ELEMENT_ARRAY_BUFFER,0,O.arrayBuffer)},te.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ne={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},le=function(O,N,U,X){this.length=N.length,this.attributes=U,this.itemSize=N.bytesPerElement,this.dynamicDraw=X,this.context=O;var fe=O.gl;this.buffer=fe.createBuffer(),O.bindVertexBuffer.set(this.buffer),fe.bufferData(fe.ARRAY_BUFFER,N.arrayBuffer,this.dynamicDraw?fe.DYNAMIC_DRAW:fe.STATIC_DRAW),this.dynamicDraw||delete N.arrayBuffer};le.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},le.prototype.updateData=function(O){var N=this.context.gl;this.bind(),N.bufferSubData(N.ARRAY_BUFFER,0,O.arrayBuffer)},le.prototype.enableAttributes=function(O,N){for(var U=0;U<this.attributes.length;U++){var fe=N.attributes[this.attributes[U].name];void 0!==fe&&O.enableVertexAttribArray(fe)}},le.prototype.setVertexAttribPointers=function(O,N,U){for(var X=0;X<this.attributes.length;X++){var fe=this.attributes[X],me=N.attributes[fe.name];void 0!==me&&O.vertexAttribPointer(me,fe.components,O[ne[fe.type]],!1,this.itemSize,fe.offset+this.itemSize*(U||0))}},le.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ue=function(O){this.gl=O.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ue.prototype.get=function(){return this.current},ue.prototype.set=function(O){},ue.prototype.getDefault=function(){return this.default},ue.prototype.setDefault=function(){this.set(this.default)};var de=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return e.Color.transparent},N.prototype.set=function(U){var X=this.current;(U.r!==X.r||U.g!==X.g||U.b!==X.b||U.a!==X.a||this.dirty)&&(this.gl.clearColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)},N}(ue),he=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return 1},N.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.clearDepth(U),this.current=U,this.dirty=!1)},N}(ue),be=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return 0},N.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.clearStencil(U),this.current=U,this.dirty=!1)},N}(ue),ge=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return[!0,!0,!0,!0]},N.prototype.set=function(U){var X=this.current;(U[0]!==X[0]||U[1]!==X[1]||U[2]!==X[2]||U[3]!==X[3]||this.dirty)&&(this.gl.colorMask(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)},N}(ue),we=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!0},N.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.depthMask(U),this.current=U,this.dirty=!1)},N}(ue),ke=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return 255},N.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.stencilMask(U),this.current=U,this.dirty=!1)},N}(ue),De=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},N.prototype.set=function(U){var X=this.current;(U.func!==X.func||U.ref!==X.ref||U.mask!==X.mask||this.dirty)&&(this.gl.stencilFunc(U.func,U.ref,U.mask),this.current=U,this.dirty=!1)},N}(ue),Ee=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){var U=this.gl;return[U.KEEP,U.KEEP,U.KEEP]},N.prototype.set=function(U){var X=this.current;(U[0]!==X[0]||U[1]!==X[1]||U[2]!==X[2]||this.dirty)&&(this.gl.stencilOp(U[0],U[1],U[2]),this.current=U,this.dirty=!1)},N}(ue),Re=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;U?X.enable(X.STENCIL_TEST):X.disable(X.STENCIL_TEST),this.current=U,this.dirty=!1}},N}(ue),ve=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return[0,1]},N.prototype.set=function(U){var X=this.current;(U[0]!==X[0]||U[1]!==X[1]||this.dirty)&&(this.gl.depthRange(U[0],U[1]),this.current=U,this.dirty=!1)},N}(ue),Te=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;U?X.enable(X.DEPTH_TEST):X.disable(X.DEPTH_TEST),this.current=U,this.dirty=!1}},N}(ue),Ie=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.LESS},N.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.depthFunc(U),this.current=U,this.dirty=!1)},N}(ue),Ce=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;U?X.enable(X.BLEND):X.disable(X.BLEND),this.current=U,this.dirty=!1}},N}(ue),Pe=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){var U=this.gl;return[U.ONE,U.ZERO]},N.prototype.set=function(U){var X=this.current;(U[0]!==X[0]||U[1]!==X[1]||this.dirty)&&(this.gl.blendFunc(U[0],U[1]),this.current=U,this.dirty=!1)},N}(ue),Ve=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return e.Color.transparent},N.prototype.set=function(U){var X=this.current;(U.r!==X.r||U.g!==X.g||U.b!==X.b||U.a!==X.a||this.dirty)&&(this.gl.blendColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)},N}(ue),qe=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.FUNC_ADD},N.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.blendEquation(U),this.current=U,this.dirty=!1)},N}(ue),Je=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;U?X.enable(X.CULL_FACE):X.disable(X.CULL_FACE),this.current=U,this.dirty=!1}},N}(ue),lt=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.BACK},N.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.cullFace(U),this.current=U,this.dirty=!1)},N}(ue),He=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.CCW},N.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.frontFace(U),this.current=U,this.dirty=!1)},N}(ue),$e=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.useProgram(U),this.current=U,this.dirty=!1)},N}(ue),et=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.TEXTURE0},N.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.activeTexture(U),this.current=U,this.dirty=!1)},N}(ue),tt=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){var U=this.gl;return[0,0,U.drawingBufferWidth,U.drawingBufferHeight]},N.prototype.set=function(U){var X=this.current;(U[0]!==X[0]||U[1]!==X[1]||U[2]!==X[2]||U[3]!==X[3]||this.dirty)&&(this.gl.viewport(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)},N}(ue),ft=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.bindFramebuffer(X.FRAMEBUFFER,U),this.current=U,this.dirty=!1}},N}(ue),bt=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.bindRenderbuffer(X.RENDERBUFFER,U),this.current=U,this.dirty=!1}},N}(ue),Ct=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.bindTexture(X.TEXTURE_2D,U),this.current=U,this.dirty=!1}},N}(ue),Vt=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.bindBuffer(X.ARRAY_BUFFER,U),this.current=U,this.dirty=!1}},N}(ue),Ft=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(U){var X=this.gl;X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,U),this.current=U,this.dirty=!1},N}(ue),ht=function(O){function N(U){O.call(this,U),this.vao=U.extVertexArrayObject}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(U){this.vao&&(U!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(U),this.current=U,this.dirty=!1)},N}(ue),ut=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return 4},N.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_ALIGNMENT,U),this.current=U,this.dirty=!1}},N}(ue),Rt=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U),this.current=U,this.dirty=!1}},N}(ue),nn=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,U),this.current=U,this.dirty=!1}},N}(ue),cn=function(O){function N(U,X){O.call(this,U),this.context=U,this.parent=X}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N}(ue),Ze=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.setDirty=function(){this.dirty=!0},N.prototype.set=function(U){if(U!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var X=this.gl;X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,U,0),this.current=U,this.dirty=!1}},N}(cn),Qe=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.set=function(U){if(U!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var X=this.gl;X.framebufferRenderbuffer(X.FRAMEBUFFER,X.DEPTH_ATTACHMENT,X.RENDERBUFFER,U),this.current=U,this.dirty=!1}},N}(cn),Ge=function(O,N,U,X){this.context=O,this.width=N,this.height=U;var me=this.framebuffer=O.gl.createFramebuffer();this.colorAttachment=new Ze(O,me),X&&(this.depthAttachment=new Qe(O,me))};Ge.prototype.destroy=function(){var O=this.context.gl,N=this.colorAttachment.get();if(N&&O.deleteTexture(N),this.depthAttachment){var U=this.depthAttachment.get();U&&O.deleteRenderbuffer(U)}O.deleteFramebuffer(this.framebuffer)};var rt=function(O,N,U){this.func=O,this.mask=N,this.range=U};rt.ReadOnly=!1,rt.ReadWrite=!0,rt.disabled=new rt(519,rt.ReadOnly,[0,1]);var Le=function(O,N,U,X,fe,me){this.test=O,this.ref=N,this.mask=U,this.fail=X,this.depthFail=fe,this.pass=me};Le.disabled=new Le({func:519,mask:0},0,0,7680,7680,7680);var ze=function(O,N,U){this.blendFunction=O,this.blendColor=N,this.mask=U};ze.disabled=new ze(ze.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),ze.unblended=new ze(ze.Replace,e.Color.transparent,[!0,!0,!0,!0]),ze.alphaBlended=new ze([1,771],e.Color.transparent,[!0,!0,!0,!0]);var je=function(O,N,U){this.enable=O,this.mode=N,this.frontFace=U};je.disabled=new je(!1,1029,2305),je.backCCW=new je(!0,1029,2305);var Ne=function(O){this.gl=O,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new de(this),this.clearDepth=new he(this),this.clearStencil=new be(this),this.colorMask=new ge(this),this.depthMask=new we(this),this.stencilMask=new ke(this),this.stencilFunc=new De(this),this.stencilOp=new Ee(this),this.stencilTest=new Re(this),this.depthRange=new ve(this),this.depthTest=new Te(this),this.depthFunc=new Ie(this),this.blend=new Ce(this),this.blendFunc=new Pe(this),this.blendColor=new Ve(this),this.blendEquation=new qe(this),this.cullFace=new Je(this),this.cullFaceSide=new lt(this),this.frontFace=new He(this),this.program=new $e(this),this.activeTexture=new et(this),this.viewport=new tt(this),this.bindFramebuffer=new ft(this),this.bindRenderbuffer=new bt(this),this.bindTexture=new Ct(this),this.bindVertexBuffer=new Vt(this),this.bindElementBuffer=new Ft(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ht(this),this.pixelStoreUnpack=new ut(this),this.pixelStoreUnpackPremultiplyAlpha=new Rt(this),this.pixelStoreUnpackFlipY=new nn(this),this.extTextureFilterAnisotropic=O.getExtension("EXT_texture_filter_anisotropic")||O.getExtension("MOZ_EXT_texture_filter_anisotropic")||O.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=O.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=O.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(O.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=O.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=O.getExtension("EXT_disjoint_timer_query")};Ne.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ne.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ne.prototype.createIndexBuffer=function(O,N){return new te(this,O,N)},Ne.prototype.createVertexBuffer=function(O,N,U){return new le(this,O,N,U)},Ne.prototype.createRenderbuffer=function(O,N,U){var X=this.gl,fe=X.createRenderbuffer();return this.bindRenderbuffer.set(fe),X.renderbufferStorage(X.RENDERBUFFER,O,N,U),this.bindRenderbuffer.set(null),fe},Ne.prototype.createFramebuffer=function(O,N,U){return new Ge(this,O,N,U)},Ne.prototype.clear=function(O){var N=O.color,U=O.depth,X=this.gl,fe=0;N&&(fe|=X.COLOR_BUFFER_BIT,this.clearColor.set(N),this.colorMask.set([!0,!0,!0,!0])),void 0!==U&&(fe|=X.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(U),this.depthMask.set(!0)),X.clear(fe)},Ne.prototype.setCullFace=function(O){!1===O.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(O.mode),this.frontFace.set(O.frontFace))},Ne.prototype.setDepthMode=function(O){O.func!==this.gl.ALWAYS||O.mask?(this.depthTest.set(!0),this.depthFunc.set(O.func),this.depthMask.set(O.mask),this.depthRange.set(O.range)):this.depthTest.set(!1)},Ne.prototype.setStencilMode=function(O){O.test.func!==this.gl.ALWAYS||O.mask?(this.stencilTest.set(!0),this.stencilMask.set(O.mask),this.stencilOp.set([O.fail,O.depthFail,O.pass]),this.stencilFunc.set({func:O.test.func,ref:O.ref,mask:O.test.mask})):this.stencilTest.set(!1)},Ne.prototype.setColorMode=function(O){e.deepEqual(O.blendFunction,ze.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(O.blendFunction),this.blendColor.set(O.blendColor)),this.colorMask.set(O.mask)},Ne.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var st=function(O){function N(U,X,fe){var me=this;O.call(this),this.id=U,this.dispatcher=fe,this.on("data",function(_e){"source"===_e.dataType&&"metadata"===_e.sourceDataType&&(me._sourceLoaded=!0),me._sourceLoaded&&!me._paused&&"source"===_e.dataType&&"content"===_e.sourceDataType&&(me.reload(),me.transform&&me.update(me.transform))}),this.on("error",function(){me._sourceErrored=!0}),this._source=function(_e,Ae,Oe,Xe){var nt=new j[Ae.type](_e,Ae,Oe,Xe);if(nt.id!==_e)throw new Error("Expected Source id to be "+_e+" instead of "+nt.id);return e.bindAll(["load","abort","unload","serialize","prepare"],nt),nt}(U,X,fe,this),this._tiles={},this._cache=new q(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.onAdd=function(U){this.map=U,this._maxTileCacheSize=U?U._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(U)},N.prototype.onRemove=function(U){this._source&&this._source.onRemove&&this._source.onRemove(U)},N.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var U in this._tiles){var X=this._tiles[U];if("loaded"!==X.state&&"errored"!==X.state)return!1}return!0},N.prototype.getSource=function(){return this._source},N.prototype.pause=function(){this._paused=!0},N.prototype.resume=function(){if(this._paused){var U=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,U&&this.reload(),this.transform&&this.update(this.transform)}},N.prototype._loadTile=function(U,X){return this._source.loadTile(U,X)},N.prototype._unloadTile=function(U){if(this._source.unloadTile)return this._source.unloadTile(U,function(){})},N.prototype._abortTile=function(U){if(this._source.abortTile)return this._source.abortTile(U,function(){})},N.prototype.serialize=function(){return this._source.serialize()},N.prototype.prepare=function(U){for(var X in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var fe=this._tiles[X];fe.upload(U),fe.prepare(this.map.style.imageManager)}},N.prototype.getIds=function(){return e.values(this._tiles).map(function(U){return U.tileID}).sort(mt).map(function(U){return U.key})},N.prototype.getRenderableIds=function(U){var X=this,fe=[];for(var me in this._tiles)this._isIdRenderable(me,U)&&fe.push(this._tiles[me]);return U?fe.sort(function(_e,Ae){var Oe=_e.tileID,Xe=Ae.tileID,nt=new e.Point(Oe.canonical.x,Oe.canonical.y)._rotate(X.transform.angle),dt=new e.Point(Xe.canonical.x,Xe.canonical.y)._rotate(X.transform.angle);return Oe.overscaledZ-Xe.overscaledZ||dt.y-nt.y||dt.x-nt.x}).map(function(_e){return _e.tileID.key}):fe.map(function(_e){return _e.tileID}).sort(mt).map(function(_e){return _e.key})},N.prototype.hasRenderableParent=function(U){var X=this.findLoadedParent(U,0);return!!X&&this._isIdRenderable(X.tileID.key)},N.prototype._isIdRenderable=function(U,X){return this._tiles[U]&&this._tiles[U].hasData()&&!this._coveredTiles[U]&&(X||!this._tiles[U].holdingForFade())},N.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var U in this._cache.reset(),this._tiles)"errored"!==this._tiles[U].state&&this._reloadTile(U,"reloading")},N.prototype._reloadTile=function(U,X){var fe=this._tiles[U];fe&&("loading"!==fe.state&&(fe.state=X),this._loadTile(fe,this._tileLoaded.bind(this,fe,U,X)))},N.prototype._tileLoaded=function(U,X,fe,me){if(me)return U.state="errored",void(404!==me.status?this._source.fire(new e.ErrorEvent(me,{tile:U})):this.update(this.transform));U.timeAdded=e.browser.now(),"expired"===fe&&(U.refreshedUponExpiration=!0),this._setTileReloadTimer(X,U),"raster-dem"===this.getSource().type&&U.dem&&this._backfillDEM(U),this._state.initializeTileState(U,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:U,coord:U.tileID}))},N.prototype._backfillDEM=function(U){for(var X=this.getRenderableIds(),fe=0;fe<X.length;fe++){var me=X[fe];if(U.neighboringTiles&&U.neighboringTiles[me]){var _e=this.getTileByID(me);Ae(U,_e),Ae(_e,U)}}function Ae(Oe,Xe){Oe.needsHillshadePrepare=!0;var nt=Xe.tileID.canonical.x-Oe.tileID.canonical.x,dt=Xe.tileID.canonical.y-Oe.tileID.canonical.y,St=Math.pow(2,Oe.tileID.canonical.z),Nt=Xe.tileID.key;0===nt&&0===dt||Math.abs(dt)>1||(Math.abs(nt)>1&&(1===Math.abs(nt+St)?nt+=St:1===Math.abs(nt-St)&&(nt-=St)),Xe.dem&&Oe.dem&&(Oe.dem.backfillBorder(Xe.dem,nt,dt),Oe.neighboringTiles&&Oe.neighboringTiles[Nt]&&(Oe.neighboringTiles[Nt].backfilled=!0)))}},N.prototype.getTile=function(U){return this.getTileByID(U.key)},N.prototype.getTileByID=function(U){return this._tiles[U]},N.prototype._retainLoadedChildren=function(U,X,fe,me){for(var _e in this._tiles){var Ae=this._tiles[_e];if(!(me[_e]||!Ae.hasData()||Ae.tileID.overscaledZ<=X||Ae.tileID.overscaledZ>fe)){for(var Oe=Ae.tileID;Ae&&Ae.tileID.overscaledZ>X+1;){var Xe=Ae.tileID.scaledTo(Ae.tileID.overscaledZ-1);(Ae=this._tiles[Xe.key])&&Ae.hasData()&&(Oe=Xe)}for(var nt=Oe;nt.overscaledZ>X;)if(U[(nt=nt.scaledTo(nt.overscaledZ-1)).key]){me[Oe.key]=Oe;break}}}},N.prototype.findLoadedParent=function(U,X){if(U.key in this._loadedParentTiles){var fe=this._loadedParentTiles[U.key];return fe&&fe.tileID.overscaledZ>=X?fe:null}for(var me=U.overscaledZ-1;me>=X;me--){var _e=U.scaledTo(me),Ae=this._getLoadedTile(_e);if(Ae)return Ae}},N.prototype._getLoadedTile=function(U){var X=this._tiles[U.key];return X&&X.hasData()?X:this._cache.getByKey(U.wrapped().key)},N.prototype.updateCacheSize=function(U){var X=(Math.ceil(U.width/this._source.tileSize)+1)*(Math.ceil(U.height/this._source.tileSize)+1),fe=Math.floor(5*X),me="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,fe):fe;this._cache.setMaxSize(me)},N.prototype.handleWrapJump=function(U){var fe=Math.round((U-(void 0===this._prevLng?U:this._prevLng))/360);if(this._prevLng=U,fe){var me={};for(var _e in this._tiles){var Ae=this._tiles[_e];Ae.tileID=Ae.tileID.unwrapTo(Ae.tileID.wrap+fe),me[Ae.tileID.key]=Ae}for(var Oe in this._tiles=me,this._timers)clearTimeout(this._timers[Oe]),delete this._timers[Oe];for(var Xe in this._tiles)this._setTileReloadTimer(Xe,this._tiles[Xe])}},N.prototype.update=function(U){var X=this;if(this.transform=U,this._sourceLoaded&&!this._paused){var fe;this.updateCacheSize(U),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?fe=U.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Nn){return new e.OverscaledTileID(Nn.canonical.z,Nn.wrap,Nn.canonical.z,Nn.canonical.x,Nn.canonical.y)}):(fe=U.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(fe=fe.filter(function(Nn){return X._source.hasTile(Nn)}))):fe=[];var me=U.coveringZoomLevel(this._source),_e=Math.max(me-N.maxOverzooming,this._source.minzoom),Ae=Math.max(me+N.maxUnderzooming,this._source.minzoom),Oe=this._updateRetainedTiles(fe,me);if(Tt(this._source.type)){for(var Xe={},nt={},dt=0,St=Object.keys(Oe);dt<St.length;dt+=1){var Nt=St[dt],It=Oe[Nt],Lt=this._tiles[Nt];if(Lt&&!(Lt.fadeEndTime&&Lt.fadeEndTime<=e.browser.now())){var At=this.findLoadedParent(It,_e);At&&(this._addTile(At.tileID),Xe[At.tileID.key]=At.tileID),nt[Nt]=It}}for(var Zt in this._retainLoadedChildren(nt,me,Ae,Oe),Xe)Oe[Zt]||(this._coveredTiles[Zt]=!0,Oe[Zt]=Xe[Zt])}for(var Gt in Oe)this._tiles[Gt].clearFadeHold();for(var $t=0,mn=e.keysDifference(this._tiles,Oe);$t<mn.length;$t+=1){var En=mn[$t],Vn=this._tiles[En];Vn.hasSymbolBuckets&&!Vn.holdingForFade()?Vn.setHoldDuration(this.map._fadeDuration):Vn.hasSymbolBuckets&&!Vn.symbolFadeFinished()||this._removeTile(En)}this._updateLoadedParentTileCache()}},N.prototype.releaseSymbolFadeTiles=function(){for(var U in this._tiles)this._tiles[U].holdingForFade()&&this._removeTile(U)},N.prototype._updateRetainedTiles=function(U,X){for(var fe={},me={},_e=Math.max(X-N.maxOverzooming,this._source.minzoom),Ae=Math.max(X+N.maxUnderzooming,this._source.minzoom),Oe={},Xe=0,nt=U;Xe<nt.length;Xe+=1){var dt=nt[Xe],St=this._addTile(dt);fe[dt.key]=dt,St.hasData()||X<this._source.maxzoom&&(Oe[dt.key]=dt)}this._retainLoadedChildren(Oe,X,Ae,fe);for(var Nt=0,It=U;Nt<It.length;Nt+=1){var Lt=It[Nt],At=this._tiles[Lt.key];if(!At.hasData()){if(X+1>this._source.maxzoom){var Zt=Lt.children(this._source.maxzoom)[0],Gt=this.getTile(Zt);if(Gt&&Gt.hasData()){fe[Zt.key]=Zt;continue}}else{var $t=Lt.children(this._source.maxzoom);if(fe[$t[0].key]&&fe[$t[1].key]&&fe[$t[2].key]&&fe[$t[3].key])continue}for(var mn=At.wasRequested(),En=Lt.overscaledZ-1;En>=_e;--En){var Vn=Lt.scaledTo(En);if(me[Vn.key]||(me[Vn.key]=!0,!(At=this.getTile(Vn))&&mn&&(At=this._addTile(Vn)),At&&(fe[Vn.key]=Vn,mn=At.wasRequested(),At.hasData())))break}}}return fe},N.prototype._updateLoadedParentTileCache=function(){for(var U in this._loadedParentTiles={},this._tiles){for(var X=[],fe=void 0,me=this._tiles[U].tileID;me.overscaledZ>0;){if(me.key in this._loadedParentTiles){fe=this._loadedParentTiles[me.key];break}X.push(me.key);var _e=me.scaledTo(me.overscaledZ-1);if(fe=this._getLoadedTile(_e))break;me=_e}for(var Ae=0,Oe=X;Ae<Oe.length;Ae+=1)this._loadedParentTiles[Oe[Ae]]=fe}},N.prototype._addTile=function(U){var X=this._tiles[U.key];if(X)return X;(X=this._cache.getAndRemove(U))&&(this._setTileReloadTimer(U.key,X),X.tileID=U,this._state.initializeTileState(X,this.map?this.map.painter:null),this._cacheTimers[U.key]&&(clearTimeout(this._cacheTimers[U.key]),delete this._cacheTimers[U.key],this._setTileReloadTimer(U.key,X)));var fe=Boolean(X);return fe||(X=new e.Tile(U,this._source.tileSize*U.overscaleFactor()),this._loadTile(X,this._tileLoaded.bind(this,X,U.key,X.state))),X?(X.uses++,this._tiles[U.key]=X,fe||this._source.fire(new e.Event("dataloading",{tile:X,coord:X.tileID,dataType:"source"})),X):null},N.prototype._setTileReloadTimer=function(U,X){var fe=this;U in this._timers&&(clearTimeout(this._timers[U]),delete this._timers[U]);var me=X.getExpiryTimeout();me&&(this._timers[U]=setTimeout(function(){fe._reloadTile(U,"expired"),delete fe._timers[U]},me))},N.prototype._removeTile=function(U){var X=this._tiles[U];X&&(X.uses--,delete this._tiles[U],this._timers[U]&&(clearTimeout(this._timers[U]),delete this._timers[U]),X.uses>0||(X.hasData()&&"reloading"!==X.state?this._cache.add(X.tileID,X,X.getExpiryTimeout()):(X.aborted=!0,this._abortTile(X),this._unloadTile(X))))},N.prototype.clearTiles=function(){for(var U in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(U);this._cache.reset()},N.prototype.tilesIn=function(U,X,fe){var me=this,_e=[],Ae=this.transform;if(!Ae)return _e;for(var Oe=fe?Ae.getCameraQueryGeometry(U):U,Xe=U.map(function(En){return Ae.pointCoordinate(En)}),nt=Oe.map(function(En){return Ae.pointCoordinate(En)}),dt=this.getIds(),St=1/0,Nt=1/0,It=-1/0,Lt=-1/0,At=0,Zt=nt;At<Zt.length;At+=1){var Gt=Zt[At];St=Math.min(St,Gt.x),Nt=Math.min(Nt,Gt.y),It=Math.max(It,Gt.x),Lt=Math.max(Lt,Gt.y)}for(var $t=function(En){var Vn=me._tiles[dt[En]];if(!Vn.holdingForFade()){var Nn=Vn.tileID,pr=Math.pow(2,Ae.zoom-Vn.tileID.overscaledZ),hr=X*Vn.queryPadding*e.EXTENT/Vn.tileSize/pr,Er=[Nn.getTilePoint(new e.MercatorCoordinate(St,Nt)),Nn.getTilePoint(new e.MercatorCoordinate(It,Lt))];if(Er[0].x-hr<e.EXTENT&&Er[0].y-hr<e.EXTENT&&Er[1].x+hr>=0&&Er[1].y+hr>=0){var br=Xe.map(function(ci){return Nn.getTilePoint(ci)}),oi=nt.map(function(ci){return Nn.getTilePoint(ci)});_e.push({tile:Vn,tileID:Nn,queryGeometry:br,cameraQueryGeometry:oi,scale:pr})}}},mn=0;mn<dt.length;mn++)$t(mn);return _e},N.prototype.getVisibleCoordinates=function(U){for(var X=this,fe=this.getRenderableIds(U).map(function(Oe){return X._tiles[Oe].tileID}),me=0,_e=fe;me<_e.length;me+=1){var Ae=_e[me];Ae.posMatrix=this.transform.calculatePosMatrix(Ae.toUnwrapped())}return fe},N.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Tt(this._source.type))for(var U in this._tiles){var X=this._tiles[U];if(void 0!==X.fadeEndTime&&X.fadeEndTime>=e.browser.now())return!0}return!1},N.prototype.setFeatureState=function(U,X,fe){this._state.updateState(U=U||"_geojsonTileLayer",X,fe)},N.prototype.removeFeatureState=function(U,X,fe){this._state.removeFeatureState(U=U||"_geojsonTileLayer",X,fe)},N.prototype.getFeatureState=function(U,X){return this._state.getState(U=U||"_geojsonTileLayer",X)},N.prototype.setDependencies=function(U,X,fe){var me=this._tiles[U];me&&me.setDependencies(X,fe)},N.prototype.reloadTilesForDependencies=function(U,X){for(var fe in this._tiles)this._tiles[fe].hasDependency(U,X)&&this._reloadTile(fe,"reloading");this._cache.filter(function(me){return!me.hasDependency(U,X)})},N}(e.Evented);function mt(O,N){var U=Math.abs(2*O.wrap)-+(O.wrap<0),X=Math.abs(2*N.wrap)-+(N.wrap<0);return O.overscaledZ-N.overscaledZ||X-U||N.canonical.y-O.canonical.y||N.canonical.x-O.canonical.x}function Tt(O){return"raster"===O||"image"===O||"video"===O}function xt(){return new e.window.Worker(pe.workerUrl)}st.maxOverzooming=10,st.maxUnderzooming=3;var zt="mapboxgl_preloaded_worker_pool",gt=function(){this.active={}};gt.prototype.acquire=function(O){if(!this.workers)for(this.workers=[];this.workers.length<gt.workerCount;)this.workers.push(new xt);return this.active[O]=!0,this.workers.slice()},gt.prototype.release=function(O){delete this.active[O],0===this.numActive()&&(this.workers.forEach(function(N){N.terminate()}),this.workers=null)},gt.prototype.isPreloaded=function(){return!!this.active[zt]},gt.prototype.numActive=function(){return Object.keys(this.active).length};var Bt,jt=Math.floor(e.browser.hardwareConcurrency/2);function it(){return Bt||(Bt=new gt),Bt}function Mt(O,N){var U={};for(var X in O)"ref"!==X&&(U[X]=O[X]);return e.refProperties.forEach(function(fe){fe in N&&(U[fe]=N[fe])}),U}function qt(O){O=O.slice();for(var N=Object.create(null),U=0;U<O.length;U++)N[O[U].id]=O[U];for(var X=0;X<O.length;X++)"ref"in O[X]&&(O[X]=Mt(O[X],N[O[X].ref]));return O}gt.workerCount=Math.max(Math.min(jt,6),1);var Wt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function an(O,N,U){U.push({command:Wt.addSource,args:[O,N[O]]})}function Ue(O,N,U){N.push({command:Wt.removeSource,args:[O]}),U[O]=!0}function yt(O,N,U,X){Ue(O,U,X),an(O,N,U)}function Dt(O,N,U){var X;for(X in O[U])if(O[U].hasOwnProperty(X)&&"data"!==X&&!e.deepEqual(O[U][X],N[U][X]))return!1;for(X in N[U])if(N[U].hasOwnProperty(X)&&"data"!==X&&!e.deepEqual(O[U][X],N[U][X]))return!1;return!0}function Ht(O,N,U,X,fe,me){var _e;for(_e in N=N||{},O=O||{})O.hasOwnProperty(_e)&&(e.deepEqual(O[_e],N[_e])||U.push({command:me,args:[X,_e,N[_e],fe]}));for(_e in N)N.hasOwnProperty(_e)&&!O.hasOwnProperty(_e)&&(e.deepEqual(O[_e],N[_e])||U.push({command:me,args:[X,_e,N[_e],fe]}))}function Jt(O){return O.id}function gn(O,N){return O[N.id]=N,O}var sn=function(O,N){this.reset(O,N)};sn.prototype.reset=function(O,N){this.points=O||[],this._distances=[0];for(var U=1;U<this.points.length;U++)this._distances[U]=this._distances[U-1]+this.points[U].dist(this.points[U-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(N||0,.5*this.length),this.paddedLength=this.length-2*this.padding},sn.prototype.lerp=function(O){if(1===this.points.length)return this.points[0];O=e.clamp(O,0,1);for(var N=1,U=this._distances[N],X=O*this.paddedLength+this.padding;U<X&&N<this._distances.length;)U=this._distances[++N];var fe=N-1,me=this._distances[fe],_e=U-me,Ae=_e>0?(X-me)/_e:0;return this.points[fe].mult(1-Ae).add(this.points[N].mult(Ae))};var hn=function(O,N,U){var X=this.boxCells=[],fe=this.circleCells=[];this.xCellCount=Math.ceil(O/U),this.yCellCount=Math.ceil(N/U);for(var me=0;me<this.xCellCount*this.yCellCount;me++)X.push([]),fe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=O,this.height=N,this.xScale=this.xCellCount/O,this.yScale=this.yCellCount/N,this.boxUid=0,this.circleUid=0};function Dn(O,N,U,X,fe){var me=e.create();return N?(e.scale(me,me,[1/fe,1/fe,1]),U||e.rotateZ(me,me,X.angle)):e.multiply(me,X.labelPlaneMatrix,O),me}function _n(O,N,U,X,fe){if(N){var me=e.clone(O);return e.scale(me,me,[fe,fe,1]),U||e.rotateZ(me,me,-X.angle),me}return X.glCoordMatrix}function Tn(O,N){var U=[O.x,O.y,0,1];vr(U,U,N);var X=U[3];return{point:new e.Point(U[0]/X,U[1]/X),signedDistanceFromCamera:X}}function wn(O,N){return.5+O/N*.5}function kn(O,N){var U=O[0]/O[3],X=O[1]/O[3];return U>=-N[0]&&U<=N[0]&&X>=-N[1]&&X<=N[1]}function Fn(O,N,U,X,fe,me,_e,Ae){var Oe=X?O.textSizeData:O.iconSizeData,Xe=e.evaluateSizeForZoom(Oe,U.transform.zoom),nt=[256/U.width*2+1,256/U.height*2+1],dt=X?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;dt.clear();for(var St=O.lineVertexArray,Nt=X?O.text.placedSymbolArray:O.icon.placedSymbolArray,It=U.transform.width/U.transform.height,Lt=!1,At=0;At<Nt.length;At++){var Zt=Nt.get(At);if(Zt.hidden||Zt.writingMode===e.WritingMode.vertical&&!Lt)Or(Zt.numGlyphs,dt);else{Lt=!1;var Gt=[Zt.anchorX,Zt.anchorY,0,1];if(e.transformMat4(Gt,Gt,N),kn(Gt,nt)){var mn=wn(U.transform.cameraToCenterDistance,Gt[3]),En=e.evaluateSizeForFeature(Oe,Xe,Zt),Vn=_e?En/mn:En*mn,Nn=new e.Point(Zt.anchorX,Zt.anchorY),pr=Tn(Nn,fe).point,hr={},Er=sr(Zt,Vn,!1,Ae,N,fe,me,O.glyphOffsetArray,St,dt,pr,Nn,hr,It);Lt=Er.useVertical,(Er.notEnoughRoom||Lt||Er.needsFlipping&&sr(Zt,Vn,!0,Ae,N,fe,me,O.glyphOffsetArray,St,dt,pr,Nn,hr,It).notEnoughRoom)&&Or(Zt.numGlyphs,dt)}else Or(Zt.numGlyphs,dt)}}X?O.text.dynamicLayoutVertexBuffer.updateData(dt):O.icon.dynamicLayoutVertexBuffer.updateData(dt)}function On(O,N,U,X,fe,me,_e,Ae,Oe,Xe,nt){var dt=Ae.glyphStartIndex+Ae.numGlyphs,St=Ae.lineStartIndex,Nt=Ae.lineStartIndex+Ae.lineLength,It=N.getoffsetX(Ae.glyphStartIndex),Lt=N.getoffsetX(dt-1),At=Wr(O*It,U,X,fe,me,_e,Ae.segment,St,Nt,Oe,Xe,nt);if(!At)return null;var Zt=Wr(O*Lt,U,X,fe,me,_e,Ae.segment,St,Nt,Oe,Xe,nt);return Zt?{first:At,last:Zt}:null}function Qn(O,N,U,X){return O===e.WritingMode.horizontal&&Math.abs(U.y-N.y)>Math.abs(U.x-N.x)*X?{useVertical:!0}:(O===e.WritingMode.vertical?N.y<U.y:N.x>U.x)?{needsFlipping:!0}:null}function sr(O,N,U,X,fe,me,_e,Ae,Oe,Xe,nt,dt,St,Nt){var It,Lt=N/24,At=O.lineOffsetX*Lt,Zt=O.lineOffsetY*Lt;if(O.numGlyphs>1){var Gt=O.glyphStartIndex+O.numGlyphs,$t=O.lineStartIndex,mn=O.lineStartIndex+O.lineLength,En=On(Lt,Ae,At,Zt,U,nt,dt,O,Oe,me,St);if(!En)return{notEnoughRoom:!0};var Vn=Tn(En.first.point,_e).point,Nn=Tn(En.last.point,_e).point;if(X&&!U){var pr=Qn(O.writingMode,Vn,Nn,Nt);if(pr)return pr}It=[En.first];for(var hr=O.glyphStartIndex+1;hr<Gt-1;hr++)It.push(Wr(Lt*Ae.getoffsetX(hr),At,Zt,U,nt,dt,O.segment,$t,mn,Oe,me,St));It.push(En.last)}else{if(X&&!U){var Er=Tn(dt,fe).point,br=O.lineStartIndex+O.segment+1,oi=new e.Point(Oe.getx(br),Oe.gety(br)),ci=Tn(oi,fe),Si=ci.signedDistanceFromCamera>0?ci.point:Mr(dt,oi,Er,1,fe),ar=Qn(O.writingMode,Er,Si,Nt);if(ar)return ar}var jr=Wr(Lt*Ae.getoffsetX(O.glyphStartIndex),At,Zt,U,nt,dt,O.segment,O.lineStartIndex,O.lineStartIndex+O.lineLength,Oe,me,St);if(!jr)return{notEnoughRoom:!0};It=[jr]}for(var gi=0,ui=It;gi<ui.length;gi+=1){var Ti=ui[gi];e.addDynamicAttributes(Xe,Ti.point,Ti.angle)}return{}}function Mr(O,N,U,X,fe){var me=Tn(O.add(O.sub(N)._unit()),fe).point,_e=U.sub(me);return U.add(_e._mult(X/_e.mag()))}function Wr(O,N,U,X,fe,me,_e,Ae,Oe,Xe,nt,dt){var St=X?O-N:O+N,Nt=St>0?1:-1,It=0;X&&(Nt*=-1,It=Math.PI),Nt<0&&(It+=Math.PI);for(var Lt=Nt>0?Ae+_e:Ae+_e+1,At=fe,Zt=fe,Gt=0,$t=0,mn=Math.abs(St),En=[];Gt+$t<=mn;){if((Lt+=Nt)<Ae||Lt>=Oe)return null;if(Zt=At,En.push(At),void 0===(At=dt[Lt])){var Vn=new e.Point(Xe.getx(Lt),Xe.gety(Lt)),Nn=Tn(Vn,nt);if(Nn.signedDistanceFromCamera>0)At=dt[Lt]=Nn.point;else{var pr=Lt-Nt;At=Mr(0===Gt?me:new e.Point(Xe.getx(pr),Xe.gety(pr)),Vn,Zt,mn-Gt+1,nt)}}Gt+=$t,$t=Zt.dist(At)}var hr=(mn-Gt)/$t,Er=At.sub(Zt),br=Er.mult(hr)._add(Zt);br._add(Er._unit()._perp()._mult(U*Nt));var oi=It+Math.atan2(At.y-Zt.y,At.x-Zt.x);return En.push(br),{point:br,angle:oi,path:En}}hn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},hn.prototype.insert=function(O,N,U,X,fe){this._forEachCell(N,U,X,fe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(O),this.bboxes.push(N),this.bboxes.push(U),this.bboxes.push(X),this.bboxes.push(fe)},hn.prototype.insertCircle=function(O,N,U,X){this._forEachCell(N-X,U-X,N+X,U+X,this._insertCircleCell,this.circleUid++),this.circleKeys.push(O),this.circles.push(N),this.circles.push(U),this.circles.push(X)},hn.prototype._insertBoxCell=function(O,N,U,X,fe,me){this.boxCells[fe].push(me)},hn.prototype._insertCircleCell=function(O,N,U,X,fe,me){this.circleCells[fe].push(me)},hn.prototype._query=function(O,N,U,X,fe,me){if(U<0||O>this.width||X<0||N>this.height)return!fe&&[];var _e=[];if(O<=0&&N<=0&&this.width<=U&&this.height<=X){if(fe)return!0;for(var Ae=0;Ae<this.boxKeys.length;Ae++)_e.push({key:this.boxKeys[Ae],x1:this.bboxes[4*Ae],y1:this.bboxes[4*Ae+1],x2:this.bboxes[4*Ae+2],y2:this.bboxes[4*Ae+3]});for(var Oe=0;Oe<this.circleKeys.length;Oe++){var Xe=this.circles[3*Oe],nt=this.circles[3*Oe+1],dt=this.circles[3*Oe+2];_e.push({key:this.circleKeys[Oe],x1:Xe-dt,y1:nt-dt,x2:Xe+dt,y2:nt+dt})}return me?_e.filter(me):_e}return this._forEachCell(O,N,U,X,this._queryCell,_e,{hitTest:fe,seenUids:{box:{},circle:{}}},me),fe?_e.length>0:_e},hn.prototype._queryCircle=function(O,N,U,X,fe){var me=O-U,_e=O+U,Ae=N-U,Oe=N+U;if(_e<0||me>this.width||Oe<0||Ae>this.height)return!X&&[];var Xe=[];return this._forEachCell(me,Ae,_e,Oe,this._queryCellCircle,Xe,{hitTest:X,circle:{x:O,y:N,radius:U},seenUids:{box:{},circle:{}}},fe),X?Xe.length>0:Xe},hn.prototype.query=function(O,N,U,X,fe){return this._query(O,N,U,X,!1,fe)},hn.prototype.hitTest=function(O,N,U,X,fe){return this._query(O,N,U,X,!0,fe)},hn.prototype.hitTestCircle=function(O,N,U,X){return this._queryCircle(O,N,U,!0,X)},hn.prototype._queryCell=function(O,N,U,X,fe,me,_e,Ae){var Oe=_e.seenUids,Xe=this.boxCells[fe];if(null!==Xe)for(var nt=this.bboxes,dt=0,St=Xe;dt<St.length;dt+=1){var Nt=St[dt];if(!Oe.box[Nt]){Oe.box[Nt]=!0;var It=4*Nt;if(O<=nt[It+2]&&N<=nt[It+3]&&U>=nt[It+0]&&X>=nt[It+1]&&(!Ae||Ae(this.boxKeys[Nt]))){if(_e.hitTest)return me.push(!0),!0;me.push({key:this.boxKeys[Nt],x1:nt[It],y1:nt[It+1],x2:nt[It+2],y2:nt[It+3]})}}}var Lt=this.circleCells[fe];if(null!==Lt)for(var At=this.circles,Zt=0,Gt=Lt;Zt<Gt.length;Zt+=1){var $t=Gt[Zt];if(!Oe.circle[$t]){Oe.circle[$t]=!0;var mn=3*$t;if(this._circleAndRectCollide(At[mn],At[mn+1],At[mn+2],O,N,U,X)&&(!Ae||Ae(this.circleKeys[$t]))){if(_e.hitTest)return me.push(!0),!0;var En=At[mn],Vn=At[mn+1],Nn=At[mn+2];me.push({key:this.circleKeys[$t],x1:En-Nn,y1:Vn-Nn,x2:En+Nn,y2:Vn+Nn})}}}},hn.prototype._queryCellCircle=function(O,N,U,X,fe,me,_e,Ae){var Oe=_e.circle,Xe=_e.seenUids,nt=this.boxCells[fe];if(null!==nt)for(var dt=this.bboxes,St=0,Nt=nt;St<Nt.length;St+=1){var It=Nt[St];if(!Xe.box[It]){Xe.box[It]=!0;var Lt=4*It;if(this._circleAndRectCollide(Oe.x,Oe.y,Oe.radius,dt[Lt+0],dt[Lt+1],dt[Lt+2],dt[Lt+3])&&(!Ae||Ae(this.boxKeys[It])))return me.push(!0),!0}}var At=this.circleCells[fe];if(null!==At)for(var Zt=this.circles,Gt=0,$t=At;Gt<$t.length;Gt+=1){var mn=$t[Gt];if(!Xe.circle[mn]){Xe.circle[mn]=!0;var En=3*mn;if(this._circlesCollide(Zt[En],Zt[En+1],Zt[En+2],Oe.x,Oe.y,Oe.radius)&&(!Ae||Ae(this.circleKeys[mn])))return me.push(!0),!0}}},hn.prototype._forEachCell=function(O,N,U,X,fe,me,_e,Ae){for(var Oe=this._convertToXCellCoord(O),Xe=this._convertToYCellCoord(N),nt=this._convertToXCellCoord(U),dt=this._convertToYCellCoord(X),St=Oe;St<=nt;St++)for(var Nt=Xe;Nt<=dt;Nt++)if(fe.call(this,O,N,U,X,this.xCellCount*Nt+St,me,_e,Ae))return},hn.prototype._convertToXCellCoord=function(O){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(O*this.xScale)))},hn.prototype._convertToYCellCoord=function(O){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(O*this.yScale)))},hn.prototype._circlesCollide=function(O,N,U,X,fe,me){var _e=X-O,Ae=fe-N,Oe=U+me;return Oe*Oe>_e*_e+Ae*Ae},hn.prototype._circleAndRectCollide=function(O,N,U,X,fe,me,_e){var Ae=(me-X)/2,Oe=Math.abs(O-(X+Ae));if(Oe>Ae+U)return!1;var Xe=(_e-fe)/2,nt=Math.abs(N-(fe+Xe));if(nt>Xe+U)return!1;if(Oe<=Ae||nt<=Xe)return!0;var dt=Oe-Ae,St=nt-Xe;return dt*dt+St*St<=U*U};var mr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Or(O,N){for(var U=0;U<O;U++){var X=N.length;N.resize(X+4),N.float32.set(mr,3*X)}}function vr(O,N,U){var X=N[0],fe=N[1];return O[0]=U[0]*X+U[4]*fe+U[12],O[1]=U[1]*X+U[5]*fe+U[13],O[3]=U[3]*X+U[7]*fe+U[15],O}var Xn=function(O,N,U){void 0===N&&(N=new hn(O.width+200,O.height+200,25)),void 0===U&&(U=new hn(O.width+200,O.height+200,25)),this.transform=O,this.grid=N,this.ignoredGrid=U,this.pitchfactor=Math.cos(O._pitch)*O.cameraToCenterDistance,this.screenRightBoundary=O.width+100,this.screenBottomBoundary=O.height+100,this.gridRightBoundary=O.width+200,this.gridBottomBoundary=O.height+200};function jn(O,N,U){return N*(e.EXTENT/(O.tileSize*Math.pow(2,U-O.tileID.overscaledZ)))}Xn.prototype.placeCollisionBox=function(O,N,U,X,fe){var me=this.projectAndGetPerspectiveRatio(X,O.anchorPointX,O.anchorPointY),_e=U*me.perspectiveRatio,Ae=O.x1*_e+me.point.x,Oe=O.y1*_e+me.point.y,Xe=O.x2*_e+me.point.x,nt=O.y2*_e+me.point.y;return!this.isInsideGrid(Ae,Oe,Xe,nt)||!N&&this.grid.hitTest(Ae,Oe,Xe,nt,fe)?{box:[],offscreen:!1}:{box:[Ae,Oe,Xe,nt],offscreen:this.isOffscreen(Ae,Oe,Xe,nt)}},Xn.prototype.placeCollisionCircles=function(O,N,U,X,fe,me,_e,Ae,Oe,Xe,nt,dt,St){var Nt=[],It=new e.Point(N.anchorX,N.anchorY),Lt=Tn(It,me),At=wn(this.transform.cameraToCenterDistance,Lt.signedDistanceFromCamera),Zt=(Xe?fe/At:fe*At)/e.ONE_EM,Gt=Tn(It,_e).point,$t=On(Zt,X,N.lineOffsetX*Zt,N.lineOffsetY*Zt,!1,Gt,It,N,U,_e,{}),mn=!1,En=!1,Vn=!0;if($t){for(var Nn=.5*dt*At+St,pr=new e.Point(-100,-100),hr=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Er=new sn,br=$t.first,oi=$t.last,ci=[],Si=br.path.length-1;Si>=1;Si--)ci.push(br.path[Si]);for(var ar=1;ar<oi.path.length;ar++)ci.push(oi.path[ar]);var jr=2.5*Nn;if(Ae){var gi=ci.map(function(ys){return Tn(ys,Ae)});ci=gi.some(function(ys){return ys.signedDistanceFromCamera<=0})?[]:gi.map(function(ys){return ys.point})}var ui=[];if(ci.length>0){for(var Ti=ci[0].clone(),Fi=ci[0].clone(),ia=1;ia<ci.length;ia++)Ti.x=Math.min(Ti.x,ci[ia].x),Ti.y=Math.min(Ti.y,ci[ia].y),Fi.x=Math.max(Fi.x,ci[ia].x),Fi.y=Math.max(Fi.y,ci[ia].y);ui=Ti.x>=pr.x&&Fi.x<=hr.x&&Ti.y>=pr.y&&Fi.y<=hr.y?[ci]:Fi.x<pr.x||Ti.x>hr.x||Fi.y<pr.y||Ti.y>hr.y?[]:e.clipLine([ci],pr.x,pr.y,hr.x,hr.y)}for(var yi=0,qi=ui;yi<qi.length;yi+=1){Er.reset(qi[yi],.25*Nn);var sa;sa=Er.length<=.5*Nn?1:Math.ceil(Er.paddedLength/jr)+1;for(var Wi=0;Wi<sa;Wi++){var ua=Wi/Math.max(sa-1,1),ka=Er.lerp(ua),Wa=ka.x+100,Oo=ka.y+100;Nt.push(Wa,Oo,Nn,0);var ao=Wa-Nn,Ja=Oo-Nn,ho=Wa+Nn,Mo=Oo+Nn;if(Vn=Vn&&this.isOffscreen(ao,Ja,ho,Mo),En=En||this.isInsideGrid(ao,Ja,ho,Mo),!O&&this.grid.hitTestCircle(Wa,Oo,Nn,nt)&&(mn=!0,!Oe))return{circles:[],offscreen:!1,collisionDetected:mn}}}}return{circles:!Oe&&mn||!En?[]:Nt,offscreen:Vn,collisionDetected:mn}},Xn.prototype.queryRenderedSymbols=function(O){if(0===O.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var N=[],U=1/0,X=1/0,fe=-1/0,me=-1/0,_e=0,Ae=O;_e<Ae.length;_e+=1){var Oe=Ae[_e],Xe=new e.Point(Oe.x+100,Oe.y+100);U=Math.min(U,Xe.x),X=Math.min(X,Xe.y),fe=Math.max(fe,Xe.x),me=Math.max(me,Xe.y),N.push(Xe)}for(var nt={},dt={},St=0,Nt=this.grid.query(U,X,fe,me).concat(this.ignoredGrid.query(U,X,fe,me));St<Nt.length;St+=1){var It=Nt[St],Lt=It.key;if(void 0===nt[Lt.bucketInstanceId]&&(nt[Lt.bucketInstanceId]={}),!nt[Lt.bucketInstanceId][Lt.featureIndex]){var At=[new e.Point(It.x1,It.y1),new e.Point(It.x2,It.y1),new e.Point(It.x2,It.y2),new e.Point(It.x1,It.y2)];e.polygonIntersectsPolygon(N,At)&&(nt[Lt.bucketInstanceId][Lt.featureIndex]=!0,void 0===dt[Lt.bucketInstanceId]&&(dt[Lt.bucketInstanceId]=[]),dt[Lt.bucketInstanceId].push(Lt.featureIndex))}}return dt},Xn.prototype.insertCollisionBox=function(O,N,U,X,fe){(N?this.ignoredGrid:this.grid).insert({bucketInstanceId:U,featureIndex:X,collisionGroupID:fe},O[0],O[1],O[2],O[3])},Xn.prototype.insertCollisionCircles=function(O,N,U,X,fe){for(var me=N?this.ignoredGrid:this.grid,_e={bucketInstanceId:U,featureIndex:X,collisionGroupID:fe},Ae=0;Ae<O.length;Ae+=4)me.insertCircle(_e,O[Ae],O[Ae+1],O[Ae+2])},Xn.prototype.projectAndGetPerspectiveRatio=function(O,N,U){var X=[N,U,0,1];return vr(X,X,O),{point:new e.Point((X[0]/X[3]+1)/2*this.transform.width+100,(-X[1]/X[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/X[3]*.5}},Xn.prototype.isOffscreen=function(O,N,U,X){return U<100||O>=this.screenRightBoundary||X<100||N>this.screenBottomBoundary},Xn.prototype.isInsideGrid=function(O,N,U,X){return U>=0&&O<this.gridRightBoundary&&X>=0&&N<this.gridBottomBoundary},Xn.prototype.getViewportMatrix=function(){var O=e.identity([]);return e.translate(O,O,[-100,-100,0]),O};var nr=function(O,N,U,X){this.opacity=O?Math.max(0,Math.min(1,O.opacity+(O.placed?N:-N))):X&&U?1:0,this.placed=U};nr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Ur=function(O,N,U,X,fe){this.text=new nr(O?O.text:null,N,U,fe),this.icon=new nr(O?O.icon:null,N,X,fe)};Ur.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Jn=function(O,N,U){this.text=O,this.icon=N,this.skipFade=U},_r=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Hr=function(O,N,U,X,fe){this.bucketInstanceId=O,this.featureIndex=N,this.sourceLayerIndex=U,this.bucketIndex=X,this.tileID=fe},Lr=function(O){this.crossSourceCollisions=O,this.maxGroupID=0,this.collisionGroups={}};function $r(O,N,U,X,fe){var me=e.getAnchorAlignment(O),_e=-(me.horizontalAlign-.5)*N,Ae=-(me.verticalAlign-.5)*U,Oe=e.evaluateVariableOffset(O,X);return new e.Point(_e+Oe[0]*fe,Ae+Oe[1]*fe)}function dn(O,N,U,X,fe,me){var _e=O.x1,Ae=O.x2,Oe=O.y1,Xe=O.y2,nt=O.anchorPointX,dt=O.anchorPointY,St=new e.Point(N,U);return X&&St._rotate(fe?me:-me),{x1:_e+St.x,y1:Oe+St.y,x2:Ae+St.x,y2:Xe+St.y,anchorPointX:nt,anchorPointY:dt}}Lr.prototype.get=function(O){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[O]){var N=++this.maxGroupID;this.collisionGroups[O]={ID:N,predicate:function(U){return U.collisionGroupID===N}}}return this.collisionGroups[O]};var Ut=function(O,N,U,X){this.transform=O.clone(),this.collisionIndex=new Xn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=N,this.retainedQueryData={},this.collisionGroups=new Lr(U),this.collisionCircleArrays={},this.prevPlacement=X,X&&(X.prevPlacement=void 0),this.placedOrientations={}};function Kt(O,N,U,X,fe){O.emplaceBack(N?1:0,U?1:0,X||0,fe||0),O.emplaceBack(N?1:0,U?1:0,X||0,fe||0),O.emplaceBack(N?1:0,U?1:0,X||0,fe||0),O.emplaceBack(N?1:0,U?1:0,X||0,fe||0)}Ut.prototype.getBucketParts=function(O,N,U,X){var fe=U.getBucket(N),me=U.latestFeatureIndex;if(fe&&me&&N.id===fe.layerIds[0]){var _e=U.collisionBoxArray,Ae=fe.layers[0].layout,Oe=Math.pow(2,this.transform.zoom-U.tileID.overscaledZ),Xe=U.tileSize/e.EXTENT,nt=this.transform.calculatePosMatrix(U.tileID.toUnwrapped()),dt="map"===Ae.get("text-pitch-alignment"),St="map"===Ae.get("text-rotation-alignment"),Nt=jn(U,1,this.transform.zoom),It=Dn(nt,dt,St,this.transform,Nt),Lt=null;if(dt){var At=_n(nt,dt,St,this.transform,Nt);Lt=e.multiply([],this.transform.labelPlaneMatrix,At)}this.retainedQueryData[fe.bucketInstanceId]=new Hr(fe.bucketInstanceId,me,fe.sourceLayerIndex,fe.index,U.tileID);var Zt={bucket:fe,layout:Ae,posMatrix:nt,textLabelPlaneMatrix:It,labelToScreenMatrix:Lt,scale:Oe,textPixelRatio:Xe,holdingForFade:U.holdingForFade(),collisionBoxArray:_e,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(fe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(fe.sourceID)};if(X)for(var Gt=0,$t=fe.sortKeyRanges;Gt<$t.length;Gt+=1){var mn=$t[Gt];O.push({sortKey:mn.sortKey,symbolInstanceStart:mn.symbolInstanceStart,symbolInstanceEnd:mn.symbolInstanceEnd,parameters:Zt})}else O.push({symbolInstanceStart:0,symbolInstanceEnd:fe.symbolInstances.length,parameters:Zt})}},Ut.prototype.attemptAnchorPlacement=function(O,N,U,X,fe,me,_e,Ae,Oe,Xe,nt,dt,St,Nt,It){var Lt,At=[dt.textOffset0,dt.textOffset1],Zt=$r(O,U,X,At,fe),Gt=this.collisionIndex.placeCollisionBox(dn(N,Zt.x,Zt.y,me,_e,this.transform.angle),nt,Ae,Oe,Xe.predicate);if((!It||0!==this.collisionIndex.placeCollisionBox(dn(It,Zt.x,Zt.y,me,_e,this.transform.angle),nt,Ae,Oe,Xe.predicate).box.length)&&Gt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID].text&&(Lt=this.prevPlacement.variableOffsets[dt.crossTileID].anchor),this.variableOffsets[dt.crossTileID]={textOffset:At,width:U,height:X,anchor:O,textBoxScale:fe,prevAnchor:Lt},this.markUsedJustification(St,O,dt,Nt),St.allowVerticalPlacement&&(this.markUsedOrientation(St,Nt,dt),this.placedOrientations[dt.crossTileID]=Nt),{shift:Zt,placedGlyphBoxes:Gt}},Ut.prototype.placeLayerBucketPart=function(O,N,U){var X=this,fe=O.parameters,me=fe.bucket,_e=fe.layout,Ae=fe.posMatrix,Oe=fe.textLabelPlaneMatrix,Xe=fe.labelToScreenMatrix,nt=fe.textPixelRatio,dt=fe.holdingForFade,St=fe.collisionBoxArray,Nt=fe.partiallyEvaluatedTextSize,It=fe.collisionGroup,Lt=_e.get("text-optional"),At=_e.get("icon-optional"),Zt=_e.get("text-allow-overlap"),Gt=_e.get("icon-allow-overlap"),$t="map"===_e.get("text-rotation-alignment"),mn="map"===_e.get("text-pitch-alignment"),En="none"!==_e.get("icon-text-fit"),Vn="viewport-y"===_e.get("symbol-z-order"),Nn=Zt&&(Gt||!me.hasIconData()||At),pr=Gt&&(Zt||!me.hasTextData()||Lt);!me.collisionArrays&&St&&me.deserializeCollisionBoxes(St);var hr=function(ar,jr){if(!N[ar.crossTileID])if(dt)X.placements[ar.crossTileID]=new Jn(!1,!1,!1);else{var gi,ui=!1,Ti=!1,Fi=!0,ia=null,yi={box:null,offscreen:null},qi={box:null,offscreen:null},Gi=null,sa=null,Wi=0,ua=0,ka=0;jr.textFeatureIndex?Wi=jr.textFeatureIndex:ar.useRuntimeCollisionCircles&&(Wi=ar.featureIndex),jr.verticalTextFeatureIndex&&(ua=jr.verticalTextFeatureIndex);var Wa=jr.textBox;if(Wa){var Oo=function(Ao){var Vs=e.WritingMode.horizontal;if(me.allowVerticalPlacement&&!Ao&&X.prevPlacement){var Us=X.prevPlacement.placedOrientations[ar.crossTileID];Us&&(X.placedOrientations[ar.crossTileID]=Us,X.markUsedOrientation(me,Vs=Us,ar))}return Vs},ao=function(Ao,Vs){if(me.allowVerticalPlacement&&ar.numVerticalGlyphVertices>0&&jr.verticalTextBox)for(var Us=0,Bu=me.writingModes;Us<Bu.length&&(Bu[Us]===e.WritingMode.vertical?(yi=Vs(),qi=yi):yi=Ao(),!(yi&&yi.box&&yi.box.length));Us+=1);else yi=Ao()};if(_e.get("text-variable-anchor")){var Ja=_e.get("text-variable-anchor");if(X.prevPlacement&&X.prevPlacement.variableOffsets[ar.crossTileID]){var ho=X.prevPlacement.variableOffsets[ar.crossTileID];Ja.indexOf(ho.anchor)>0&&(Ja=Ja.filter(function(Ao){return Ao!==ho.anchor})).unshift(ho.anchor)}var Mo=function(Ao,Vs,Us){for(var Bu=Ao.x2-Ao.x1,Tc=Ao.y2-Ao.y1,pl=ar.textBoxScale,nf=En&&!Gt?Vs:null,oc={box:[],offscreen:!1},sc=Zt?2*Ja.length:Ja.length,xs=0;xs<sc;++xs){var Hl=X.attemptAnchorPlacement(Ja[xs%Ja.length],Ao,Bu,Tc,pl,$t,mn,nt,Ae,It,xs>=Ja.length,ar,me,Us,nf);if(Hl&&(oc=Hl.placedGlyphBoxes)&&oc.box&&oc.box.length){ui=!0,ia=Hl.shift;break}}return oc};ao(function(){return Mo(Wa,jr.iconBox,e.WritingMode.horizontal)},function(){var Ao=jr.verticalTextBox;return me.allowVerticalPlacement&&!(yi&&yi.box&&yi.box.length)&&ar.numVerticalGlyphVertices>0&&Ao?Mo(Ao,jr.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),yi&&(ui=yi.box,Fi=yi.offscreen);var ys=Oo(yi&&yi.box);if(!ui&&X.prevPlacement){var jo=X.prevPlacement.variableOffsets[ar.crossTileID];jo&&(X.variableOffsets[ar.crossTileID]=jo,X.markUsedJustification(me,jo.anchor,ar,ys))}}else{var Ys=function(Ao,Vs){var Us=X.collisionIndex.placeCollisionBox(Ao,Zt,nt,Ae,It.predicate);return Us&&Us.box&&Us.box.length&&(X.markUsedOrientation(me,Vs,ar),X.placedOrientations[ar.crossTileID]=Vs),Us};ao(function(){return Ys(Wa,e.WritingMode.horizontal)},function(){var Ao=jr.verticalTextBox;return me.allowVerticalPlacement&&ar.numVerticalGlyphVertices>0&&Ao?Ys(Ao,e.WritingMode.vertical):{box:null,offscreen:null}}),Oo(yi&&yi.box&&yi.box.length)}}if(ui=(gi=yi)&&gi.box&&gi.box.length>0,Fi=gi&&gi.offscreen,ar.useRuntimeCollisionCircles){var Ql=me.text.placedSymbolArray.get(ar.centerJustifiedTextSymbolIndex),Rl=e.evaluateSizeForFeature(me.textSizeData,Nt,Ql),zu=_e.get("text-padding");Gi=X.collisionIndex.placeCollisionCircles(Zt,Ql,me.lineVertexArray,me.glyphOffsetArray,Rl,Ae,Oe,Xe,U,mn,It.predicate,ar.collisionCircleDiameter,zu),ui=Zt||Gi.circles.length>0&&!Gi.collisionDetected,Fi=Fi&&Gi.offscreen}if(jr.iconFeatureIndex&&(ka=jr.iconFeatureIndex),jr.iconBox){var fu=function(Ao){var Vs=En&&ia?dn(Ao,ia.x,ia.y,$t,mn,X.transform.angle):Ao;return X.collisionIndex.placeCollisionBox(Vs,Gt,nt,Ae,It.predicate)};Ti=qi&&qi.box&&qi.box.length&&jr.verticalIconBox?(sa=fu(jr.verticalIconBox)).box.length>0:(sa=fu(jr.iconBox)).box.length>0,Fi=Fi&&sa.offscreen}var Qo=Lt||0===ar.numHorizontalGlyphVertices&&0===ar.numVerticalGlyphVertices,Nu=At||0===ar.numIconVertices;if(Qo||Nu?Nu?Qo||(Ti=Ti&&ui):ui=Ti&&ui:Ti=ui=Ti&&ui,ui&&gi&&gi.box&&X.collisionIndex.insertCollisionBox(gi.box,_e.get("text-ignore-placement"),me.bucketInstanceId,qi&&qi.box&&ua?ua:Wi,It.ID),Ti&&sa&&X.collisionIndex.insertCollisionBox(sa.box,_e.get("icon-ignore-placement"),me.bucketInstanceId,ka,It.ID),Gi&&(ui&&X.collisionIndex.insertCollisionCircles(Gi.circles,_e.get("text-ignore-placement"),me.bucketInstanceId,Wi,It.ID),U)){var ic=me.bucketInstanceId,dl=X.collisionCircleArrays[ic];void 0===dl&&(dl=X.collisionCircleArrays[ic]=new _r);for(var ac=0;ac<Gi.circles.length;ac+=4)dl.circles.push(Gi.circles[ac+0]),dl.circles.push(Gi.circles[ac+1]),dl.circles.push(Gi.circles[ac+2]),dl.circles.push(Gi.collisionDetected?1:0)}X.placements[ar.crossTileID]=new Jn(ui||Nn,Ti||pr,Fi||me.justReloaded),N[ar.crossTileID]=!0}};if(Vn)for(var Er=me.getSortedSymbolIndexes(this.transform.angle),br=Er.length-1;br>=0;--br){var oi=Er[br];hr(me.symbolInstances.get(oi),me.collisionArrays[oi])}else for(var ci=O.symbolInstanceStart;ci<O.symbolInstanceEnd;ci++)hr(me.symbolInstances.get(ci),me.collisionArrays[ci]);if(U&&me.bucketInstanceId in this.collisionCircleArrays){var Si=this.collisionCircleArrays[me.bucketInstanceId];e.invert(Si.invProjMatrix,Ae),Si.viewportMatrix=this.collisionIndex.getViewportMatrix()}me.justReloaded=!1},Ut.prototype.markUsedJustification=function(O,N,U,X){var fe;fe=X===e.WritingMode.vertical?U.verticalPlacedTextSymbolIndex:{left:U.leftJustifiedTextSymbolIndex,center:U.centerJustifiedTextSymbolIndex,right:U.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(N)];for(var _e=0,Ae=[U.leftJustifiedTextSymbolIndex,U.centerJustifiedTextSymbolIndex,U.rightJustifiedTextSymbolIndex,U.verticalPlacedTextSymbolIndex];_e<Ae.length;_e+=1){var Oe=Ae[_e];Oe>=0&&(O.text.placedSymbolArray.get(Oe).crossTileID=fe>=0&&Oe!==fe?0:U.crossTileID)}},Ut.prototype.markUsedOrientation=function(O,N,U){for(var X=N===e.WritingMode.horizontal||N===e.WritingMode.horizontalOnly?N:0,fe=N===e.WritingMode.vertical?N:0,me=0,_e=[U.leftJustifiedTextSymbolIndex,U.centerJustifiedTextSymbolIndex,U.rightJustifiedTextSymbolIndex];me<_e.length;me+=1)O.text.placedSymbolArray.get(_e[me]).placedOrientation=X;U.verticalPlacedTextSymbolIndex&&(O.text.placedSymbolArray.get(U.verticalPlacedTextSymbolIndex).placedOrientation=fe)},Ut.prototype.commit=function(O){this.commitTime=O,this.zoomAtLastRecencyCheck=this.transform.zoom;var N=this.prevPlacement,U=!1;this.prevZoomAdjustment=N?N.zoomAdjustment(this.transform.zoom):0;var X=N?N.symbolFadeChange(O):1,fe=N?N.opacities:{},me=N?N.variableOffsets:{},_e=N?N.placedOrientations:{};for(var Ae in this.placements){var Oe=this.placements[Ae],Xe=fe[Ae];Xe?(this.opacities[Ae]=new Ur(Xe,X,Oe.text,Oe.icon),U=U||Oe.text!==Xe.text.placed||Oe.icon!==Xe.icon.placed):(this.opacities[Ae]=new Ur(null,X,Oe.text,Oe.icon,Oe.skipFade),U=U||Oe.text||Oe.icon)}for(var nt in fe){var dt=fe[nt];if(!this.opacities[nt]){var St=new Ur(dt,X,!1,!1);St.isHidden()||(this.opacities[nt]=St,U=U||dt.text.placed||dt.icon.placed)}}for(var Nt in me)this.variableOffsets[Nt]||!this.opacities[Nt]||this.opacities[Nt].isHidden()||(this.variableOffsets[Nt]=me[Nt]);for(var It in _e)this.placedOrientations[It]||!this.opacities[It]||this.opacities[It].isHidden()||(this.placedOrientations[It]=_e[It]);U?this.lastPlacementChangeTime=O:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=N?N.lastPlacementChangeTime:O)},Ut.prototype.updateLayerOpacities=function(O,N){for(var U={},X=0,fe=N;X<fe.length;X+=1){var me=fe[X],_e=me.getBucket(O);_e&&me.latestFeatureIndex&&O.id===_e.layerIds[0]&&this.updateBucketOpacities(_e,U,me.collisionBoxArray)}},Ut.prototype.updateBucketOpacities=function(O,N,U){var X=this;O.hasTextData()&&O.text.opacityVertexArray.clear(),O.hasIconData()&&O.icon.opacityVertexArray.clear(),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexArray.clear(),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexArray.clear();var fe=O.layers[0].layout,me=new Ur(null,0,!1,!1,!0),_e=fe.get("text-allow-overlap"),Ae=fe.get("icon-allow-overlap"),Oe=fe.get("text-variable-anchor"),Xe="map"===fe.get("text-rotation-alignment"),nt="map"===fe.get("text-pitch-alignment"),dt="none"!==fe.get("icon-text-fit"),St=new Ur(null,0,_e&&(Ae||!O.hasIconData()||fe.get("icon-optional")),Ae&&(_e||!O.hasTextData()||fe.get("text-optional")),!0);!O.collisionArrays&&U&&(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData())&&O.deserializeCollisionBoxes(U);for(var Nt=function(Zt,Gt,$t){for(var mn=0;mn<Gt/4;mn++)Zt.opacityVertexArray.emplaceBack($t)},It=function(Zt){var Gt=O.symbolInstances.get(Zt),$t=Gt.numHorizontalGlyphVertices,mn=Gt.numVerticalGlyphVertices,En=Gt.crossTileID,Nn=X.opacities[En];N[En]?Nn=me:Nn||(X.opacities[En]=Nn=St),N[En]=!0;var hr=Gt.numIconVertices>0,Er=X.placedOrientations[Gt.crossTileID],br=Er===e.WritingMode.vertical,oi=Er===e.WritingMode.horizontal||Er===e.WritingMode.horizontalOnly;if($t>0||mn>0){var ci=Yn(Nn.text);Nt(O.text,$t,br?Hn:ci),Nt(O.text,mn,oi?Hn:ci);var jr=Nn.text.isHidden();[Gt.rightJustifiedTextSymbolIndex,Gt.centerJustifiedTextSymbolIndex,Gt.leftJustifiedTextSymbolIndex].forEach(function(ka){ka>=0&&(O.text.placedSymbolArray.get(ka).hidden=jr||br?1:0)}),Gt.verticalPlacedTextSymbolIndex>=0&&(O.text.placedSymbolArray.get(Gt.verticalPlacedTextSymbolIndex).hidden=jr||oi?1:0);var gi=X.variableOffsets[Gt.crossTileID];gi&&X.markUsedJustification(O,gi.anchor,Gt,Er);var ui=X.placedOrientations[Gt.crossTileID];ui&&(X.markUsedJustification(O,"left",Gt,ui),X.markUsedOrientation(O,ui,Gt))}if(hr){var Ti=Yn(Nn.icon),Fi=!(dt&&Gt.verticalPlacedIconSymbolIndex&&br);Gt.placedIconSymbolIndex>=0&&(Nt(O.icon,Gt.numIconVertices,Fi?Ti:Hn),O.icon.placedSymbolArray.get(Gt.placedIconSymbolIndex).hidden=Nn.icon.isHidden()),Gt.verticalPlacedIconSymbolIndex>=0&&(Nt(O.icon,Gt.numVerticalIconVertices,Fi?Hn:Ti),O.icon.placedSymbolArray.get(Gt.verticalPlacedIconSymbolIndex).hidden=Nn.icon.isHidden())}if(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData()){var qi=O.collisionArrays[Zt];if(qi){var Gi=new e.Point(0,0);if(qi.textBox||qi.verticalTextBox){var sa=!0;if(Oe){var Wi=X.variableOffsets[En];Wi?(Gi=$r(Wi.anchor,Wi.width,Wi.height,Wi.textOffset,Wi.textBoxScale),Xe&&Gi._rotate(nt?X.transform.angle:-X.transform.angle)):sa=!1}qi.textBox&&Kt(O.textCollisionBox.collisionVertexArray,Nn.text.placed,!sa||br,Gi.x,Gi.y),qi.verticalTextBox&&Kt(O.textCollisionBox.collisionVertexArray,Nn.text.placed,!sa||oi,Gi.x,Gi.y)}var ua=Boolean(!oi&&qi.verticalIconBox);qi.iconBox&&Kt(O.iconCollisionBox.collisionVertexArray,Nn.icon.placed,ua,dt?Gi.x:0,dt?Gi.y:0),qi.verticalIconBox&&Kt(O.iconCollisionBox.collisionVertexArray,Nn.icon.placed,!ua,dt?Gi.x:0,dt?Gi.y:0)}}},Lt=0;Lt<O.symbolInstances.length;Lt++)It(Lt);if(O.sortFeatures(this.transform.angle),this.retainedQueryData[O.bucketInstanceId]&&(this.retainedQueryData[O.bucketInstanceId].featureSortOrder=O.featureSortOrder),O.hasTextData()&&O.text.opacityVertexBuffer&&O.text.opacityVertexBuffer.updateData(O.text.opacityVertexArray),O.hasIconData()&&O.icon.opacityVertexBuffer&&O.icon.opacityVertexBuffer.updateData(O.icon.opacityVertexArray),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexBuffer&&O.iconCollisionBox.collisionVertexBuffer.updateData(O.iconCollisionBox.collisionVertexArray),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexBuffer&&O.textCollisionBox.collisionVertexBuffer.updateData(O.textCollisionBox.collisionVertexArray),O.bucketInstanceId in this.collisionCircleArrays){var At=this.collisionCircleArrays[O.bucketInstanceId];O.placementInvProjMatrix=At.invProjMatrix,O.placementViewportMatrix=At.viewportMatrix,O.collisionCircleArray=At.circles,delete this.collisionCircleArrays[O.bucketInstanceId]}},Ut.prototype.symbolFadeChange=function(O){return 0===this.fadeDuration?1:(O-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ut.prototype.zoomAdjustment=function(O){return Math.max(0,(this.transform.zoom-O)/1.5)},Ut.prototype.hasTransitions=function(O){return this.stale||O-this.lastPlacementChangeTime<this.fadeDuration},Ut.prototype.stillRecent=function(O,N){var U=this.zoomAtLastRecencyCheck===N?1-this.zoomAdjustment(N):1;return this.zoomAtLastRecencyCheck=N,this.commitTime+this.fadeDuration*U>O},Ut.prototype.setStale=function(){this.stale=!0};var Mn=Math.pow(2,25),Bn=Math.pow(2,24),cr=Math.pow(2,17),ur=Math.pow(2,16),Rn=Math.pow(2,9),Cn=Math.pow(2,8),Un=Math.pow(2,1);function Yn(O){if(0===O.opacity&&!O.placed)return 0;if(1===O.opacity&&O.placed)return 4294967295;var N=O.placed?1:0,U=Math.floor(127*O.opacity);return U*Mn+N*Bn+U*cr+N*ur+U*Rn+N*Cn+U*Un+N}var Hn=0,Zn=function(O){this._sortAcrossTiles="viewport-y"!==O.layout.get("symbol-z-order")&&void 0!==O.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Zn.prototype.continuePlacement=function(O,N,U,X,fe){for(var me=this._bucketParts;this._currentTileIndex<O.length;)if(N.getBucketParts(me,X,O[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,fe())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,me.sort(function(Oe,Xe){return Oe.sortKey-Xe.sortKey}));this._currentPartIndex<me.length;)if(N.placeLayerBucketPart(me[this._currentPartIndex],this._seenCrossTileIDs,U),this._currentPartIndex++,fe())return!0;return!1};var Sr=function(O,N,U,X,fe,me,_e){this.placement=new Ut(O,fe,me,_e),this._currentPlacementIndex=N.length-1,this._forceFullPlacement=U,this._showCollisionBoxes=X,this._done=!1};Sr.prototype.isDone=function(){return this._done},Sr.prototype.continuePlacement=function(O,N,U){for(var X=this,fe=e.browser.now(),me=function(){var Oe=e.browser.now()-fe;return!X._forceFullPlacement&&Oe>2};this._currentPlacementIndex>=0;){var _e=N[O[this._currentPlacementIndex]],Ae=this.placement.collisionIndex.transform.zoom;if("symbol"===_e.type&&(!_e.minzoom||_e.minzoom<=Ae)&&(!_e.maxzoom||_e.maxzoom>Ae)){if(this._inProgressLayer||(this._inProgressLayer=new Zn(_e)),this._inProgressLayer.continuePlacement(U[_e.source],this.placement,this._showCollisionBoxes,_e,me))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Sr.prototype.commit=function(O){return this.placement.commit(O),this.placement};var Ar=512/e.EXTENT/2,gr=function(O,N,U){this.tileID=O,this.indexedSymbolInstances={},this.bucketInstanceId=U;for(var X=0;X<N.length;X++){var fe=N.get(X),me=fe.key;this.indexedSymbolInstances[me]||(this.indexedSymbolInstances[me]=[]),this.indexedSymbolInstances[me].push({crossTileID:fe.crossTileID,coord:this.getScaledCoordinates(fe,O)})}};gr.prototype.getScaledCoordinates=function(O,N){var X=Ar/Math.pow(2,N.canonical.z-this.tileID.canonical.z);return{x:Math.floor((N.canonical.x*e.EXTENT+O.anchorX)*X),y:Math.floor((N.canonical.y*e.EXTENT+O.anchorY)*X)}},gr.prototype.findMatches=function(O,N,U){for(var X=this.tileID.canonical.z<N.canonical.z?1:Math.pow(2,this.tileID.canonical.z-N.canonical.z),fe=0;fe<O.length;fe++){var me=O.get(fe);if(!me.crossTileID){var _e=this.indexedSymbolInstances[me.key];if(_e)for(var Ae=this.getScaledCoordinates(me,N),Oe=0,Xe=_e;Oe<Xe.length;Oe+=1){var nt=Xe[Oe];if(Math.abs(nt.coord.x-Ae.x)<=X&&Math.abs(nt.coord.y-Ae.y)<=X&&!U[nt.crossTileID]){U[nt.crossTileID]=!0,me.crossTileID=nt.crossTileID;break}}}}};var Rr=function(){this.maxCrossTileID=0};Rr.prototype.generate=function(){return++this.maxCrossTileID};var ir=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ir.prototype.handleWrapJump=function(O){var N=Math.round((O-this.lng)/360);if(0!==N)for(var U in this.indexes){var X=this.indexes[U],fe={};for(var me in X){var _e=X[me];_e.tileID=_e.tileID.unwrapTo(_e.tileID.wrap+N),fe[_e.tileID.key]=_e}this.indexes[U]=fe}this.lng=O},ir.prototype.addBucket=function(O,N,U){if(this.indexes[O.overscaledZ]&&this.indexes[O.overscaledZ][O.key]){if(this.indexes[O.overscaledZ][O.key].bucketInstanceId===N.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(O.overscaledZ,this.indexes[O.overscaledZ][O.key])}for(var X=0;X<N.symbolInstances.length;X++)N.symbolInstances.get(X).crossTileID=0;this.usedCrossTileIDs[O.overscaledZ]||(this.usedCrossTileIDs[O.overscaledZ]={});var fe=this.usedCrossTileIDs[O.overscaledZ];for(var me in this.indexes){var _e=this.indexes[me];if(Number(me)>O.overscaledZ)for(var Ae in _e){var Oe=_e[Ae];Oe.tileID.isChildOf(O)&&Oe.findMatches(N.symbolInstances,O,fe)}else{var Xe=_e[O.scaledTo(Number(me)).key];Xe&&Xe.findMatches(N.symbolInstances,O,fe)}}for(var nt=0;nt<N.symbolInstances.length;nt++){var dt=N.symbolInstances.get(nt);dt.crossTileID||(dt.crossTileID=U.generate(),fe[dt.crossTileID]=!0)}return void 0===this.indexes[O.overscaledZ]&&(this.indexes[O.overscaledZ]={}),this.indexes[O.overscaledZ][O.key]=new gr(O,N.symbolInstances,N.bucketInstanceId),!0},ir.prototype.removeBucketCrossTileIDs=function(O,N){for(var U in N.indexedSymbolInstances)for(var X=0,fe=N.indexedSymbolInstances[U];X<fe.length;X+=1)delete this.usedCrossTileIDs[O][fe[X].crossTileID]},ir.prototype.removeStaleBuckets=function(O){var N=!1;for(var U in this.indexes){var X=this.indexes[U];for(var fe in X)O[X[fe].bucketInstanceId]||(this.removeBucketCrossTileIDs(U,X[fe]),delete X[fe],N=!0)}return N};var rr=function(){this.layerIndexes={},this.crossTileIDs=new Rr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};rr.prototype.addLayer=function(O,N,U){var X=this.layerIndexes[O.id];void 0===X&&(X=this.layerIndexes[O.id]=new ir);var fe=!1,me={};X.handleWrapJump(U);for(var _e=0,Ae=N;_e<Ae.length;_e+=1){var Oe=Ae[_e],Xe=Oe.getBucket(O);Xe&&O.id===Xe.layerIds[0]&&(Xe.bucketInstanceId||(Xe.bucketInstanceId=++this.maxBucketInstanceId),X.addBucket(Oe.tileID,Xe,this.crossTileIDs)&&(fe=!0),me[Xe.bucketInstanceId]=!0)}return X.removeStaleBuckets(me)&&(fe=!0),fe},rr.prototype.pruneUnusedLayers=function(O){var N={};for(var U in O.forEach(function(X){N[X]=!0}),this.layerIndexes)N[U]||delete this.layerIndexes[U]};var wr=function(O,N){return e.emitValidationErrors(O,N&&N.filter(function(U){return"source.canvas"!==U.identifier}))},Ir=e.pick(Wt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Vr=e.pick(Wt,["setCenter","setZoom","setBearing","setPitch"]),Ci=function(){var O={},N=e.styleSpec.$version;for(var U in e.styleSpec.$root){var X=e.styleSpec.$root[U];if(X.required){var fe;null!=(fe="version"===U?N:"array"===X.type?[]:{})&&(O[U]=fe)}}return O}(),pi=function(O){function N(U,X){var fe=this;void 0===X&&(X={}),O.call(this),this.map=U,this.dispatcher=new D(it(),this),this.imageManager=new m,this.imageManager.setEventedParent(this),this.glyphManager=new E(U._requestManager,X.localIdeographFontFamily),this.lineAtlas=new R(256,512),this.crossTileSymbolIndex=new rr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var me=this;this._rtlTextPluginCallback=N.registerForPluginStateChange(function(_e){me.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_e.pluginStatus,pluginURL:_e.pluginURL},function(Oe,Xe){if(e.triggerPluginCompletionEvent(Oe),Xe&&Xe.every(function(dt){return dt}))for(var nt in me.sourceCaches)me.sourceCaches[nt].reload()})}),this.on("data",function(_e){if("source"===_e.dataType&&"metadata"===_e.sourceDataType){var Ae=fe.sourceCaches[_e.sourceId];if(Ae){var Oe=Ae.getSource();if(Oe&&Oe.vectorLayerIds)for(var Xe in fe._layers){var nt=fe._layers[Xe];nt.source===Oe.id&&fe._validateLayer(nt)}}}})}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.loadURL=function(U,X){var fe=this;void 0===X&&(X={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var me="boolean"==typeof X.validate?X.validate:!e.isMapboxURL(U);U=this.map._requestManager.normalizeStyleURL(U,X.accessToken);var _e=this.map._requestManager.transformRequest(U,e.ResourceType.Style);this._request=e.getJSON(_e,function(Ae,Oe){fe._request=null,Ae?fe.fire(new e.ErrorEvent(Ae)):Oe&&fe._load(Oe,me)})},N.prototype.loadJSON=function(U,X){var fe=this;void 0===X&&(X={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){fe._request=null,fe._load(U,!1!==X.validate)})},N.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Ci,!1)},N.prototype._load=function(U,X){if(!X||!wr(this,e.validateStyle(U))){for(var fe in this._loaded=!0,this.stylesheet=U,U.sources)this.addSource(fe,U.sources[fe],{validate:!1});U.sprite?this._loadSprite(U.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(U.glyphs);var me=qt(this.stylesheet.layers);this._order=me.map(function(Xe){return Xe.id}),this._layers={},this._serializedLayers={};for(var _e=0,Ae=me;_e<Ae.length;_e+=1){var Oe=Ae[_e];(Oe=e.createStyleLayer(Oe)).setEventedParent(this,{layer:{id:Oe.id}}),this._layers[Oe.id]=Oe,this._serializedLayers[Oe.id]=Oe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new F(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},N.prototype._loadSprite=function(U){var X=this;this._spriteRequest=function(fe,me,_e){var Ae,Oe,Xe,nt=e.browser.devicePixelRatio>1?"@2x":"",dt=e.getJSON(me.transformRequest(me.normalizeSpriteURL(fe,nt,".json"),e.ResourceType.SpriteJSON),function(It,Lt){dt=null,Xe||(Xe=It,Ae=Lt,Nt())}),St=e.getImage(me.transformRequest(me.normalizeSpriteURL(fe,nt,".png"),e.ResourceType.SpriteImage),function(It,Lt){St=null,Xe||(Xe=It,Oe=Lt,Nt())});function Nt(){if(Xe)_e(Xe);else if(Ae&&Oe){var It=e.browser.getImageData(Oe),Lt={};for(var At in Ae){var Zt=Ae[At],Gt=Zt.width,$t=Zt.height,mn=Zt.x,En=Zt.y,Vn=Zt.sdf,Nn=Zt.pixelRatio,pr=Zt.stretchX,hr=Zt.stretchY,Er=Zt.content,br=new e.RGBAImage({width:Gt,height:$t});e.RGBAImage.copy(It,br,{x:mn,y:En},{x:0,y:0},{width:Gt,height:$t}),Lt[At]={data:br,pixelRatio:Nn,sdf:Vn,stretchX:pr,stretchY:hr,content:Er}}_e(null,Lt)}}return{cancel:function(){dt&&(dt.cancel(),dt=null),St&&(St.cancel(),St=null)}}}(U,this.map._requestManager,function(fe,me){if(X._spriteRequest=null,fe)X.fire(new e.ErrorEvent(fe));else if(me)for(var _e in me)X.imageManager.addImage(_e,me[_e]);X.imageManager.setLoaded(!0),X._availableImages=X.imageManager.listImages(),X.dispatcher.broadcast("setImages",X._availableImages),X.fire(new e.Event("data",{dataType:"style"}))})},N.prototype._validateLayer=function(U){var X=this.sourceCaches[U.source];if(X){var fe=U.sourceLayer;if(fe){var me=X.getSource();("geojson"===me.type||me.vectorLayerIds&&-1===me.vectorLayerIds.indexOf(fe))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+fe+'" does not exist on source "'+me.id+'" as specified by style layer "'+U.id+'"')))}}},N.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var U in this.sourceCaches)if(!this.sourceCaches[U].loaded())return!1;return!!this.imageManager.isLoaded()},N.prototype._serializeLayers=function(U){for(var X=[],fe=0,me=U;fe<me.length;fe+=1){var Ae=this._layers[me[fe]];"custom"!==Ae.type&&X.push(Ae.serialize())}return X},N.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var U in this.sourceCaches)if(this.sourceCaches[U].hasTransition())return!0;for(var X in this._layers)if(this._layers[X].hasTransition())return!0;return!1},N.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},N.prototype.update=function(U){if(this._loaded){var X=this._changed;if(this._changed){var fe=Object.keys(this._updatedLayers),me=Object.keys(this._removedLayers);for(var _e in(fe.length||me.length)&&this._updateWorkerLayers(fe,me),this._updatedSources){var Ae=this._updatedSources[_e];"reload"===Ae?this._reloadSource(_e):"clear"===Ae&&this._clearSource(_e)}for(var Oe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Oe].updateTransitions(U);this.light.updateTransitions(U),this._resetUpdates()}for(var Xe in this.sourceCaches)this.sourceCaches[Xe].used=!1;for(var nt=0,dt=this._order;nt<dt.length;nt+=1){var Nt=this._layers[dt[nt]];Nt.recalculate(U,this._availableImages),!Nt.isHidden(U.zoom)&&Nt.source&&(this.sourceCaches[Nt.source].used=!0)}this.light.recalculate(U),this.z=U.zoom,X&&this.fire(new e.Event("data",{dataType:"style"}))}},N.prototype._updateTilesForChangedImages=function(){var U=Object.keys(this._changedImages);if(U.length){for(var X in this.sourceCaches)this.sourceCaches[X].reloadTilesForDependencies(["icons","patterns"],U);this._changedImages={}}},N.prototype._updateWorkerLayers=function(U,X){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(U),removedIds:X})},N.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},N.prototype.setState=function(U){var X=this;if(this._checkLoaded(),wr(this,e.validateStyle(U)))return!1;(U=e.clone$1(U)).layers=qt(U.layers);var fe=function(O,N){if(!O)return[{command:Wt.setStyle,args:[N]}];var U=[];try{if(!e.deepEqual(O.version,N.version))return[{command:Wt.setStyle,args:[N]}];e.deepEqual(O.center,N.center)||U.push({command:Wt.setCenter,args:[N.center]}),e.deepEqual(O.zoom,N.zoom)||U.push({command:Wt.setZoom,args:[N.zoom]}),e.deepEqual(O.bearing,N.bearing)||U.push({command:Wt.setBearing,args:[N.bearing]}),e.deepEqual(O.pitch,N.pitch)||U.push({command:Wt.setPitch,args:[N.pitch]}),e.deepEqual(O.sprite,N.sprite)||U.push({command:Wt.setSprite,args:[N.sprite]}),e.deepEqual(O.glyphs,N.glyphs)||U.push({command:Wt.setGlyphs,args:[N.glyphs]}),e.deepEqual(O.transition,N.transition)||U.push({command:Wt.setTransition,args:[N.transition]}),e.deepEqual(O.light,N.light)||U.push({command:Wt.setLight,args:[N.light]});var X={},fe=[];!function(_e,Ae,Oe,Xe){var nt;for(nt in Ae=Ae||{},_e=_e||{})_e.hasOwnProperty(nt)&&(Ae.hasOwnProperty(nt)||Ue(nt,Oe,Xe));for(nt in Ae)Ae.hasOwnProperty(nt)&&(_e.hasOwnProperty(nt)?e.deepEqual(_e[nt],Ae[nt])||("geojson"===_e[nt].type&&"geojson"===Ae[nt].type&&Dt(_e,Ae,nt)?Oe.push({command:Wt.setGeoJSONSourceData,args:[nt,Ae[nt].data]}):yt(nt,Ae,Oe,Xe)):an(nt,Ae,Oe))}(O.sources,N.sources,fe,X);var me=[];O.layers&&O.layers.forEach(function(_e){X[_e.source]?U.push({command:Wt.removeLayer,args:[_e.id]}):me.push(_e)}),U=U.concat(fe),function(_e,Ae,Oe){Ae=Ae||[];var Xe,nt,dt,St,Nt,It,Lt,At=(_e=_e||[]).map(Jt),Zt=Ae.map(Jt),Gt=_e.reduce(gn,{}),$t=Ae.reduce(gn,{}),mn=At.slice(),En=Object.create(null);for(Xe=0,nt=0;Xe<At.length;Xe++)$t.hasOwnProperty(dt=At[Xe])?nt++:(Oe.push({command:Wt.removeLayer,args:[dt]}),mn.splice(mn.indexOf(dt,nt),1));for(Xe=0,nt=0;Xe<Zt.length;Xe++)mn[mn.length-1-Xe]!==(dt=Zt[Zt.length-1-Xe])&&(Gt.hasOwnProperty(dt)?(Oe.push({command:Wt.removeLayer,args:[dt]}),mn.splice(mn.lastIndexOf(dt,mn.length-nt),1)):nt++,Oe.push({command:Wt.addLayer,args:[$t[dt],It=mn[mn.length-Xe]]}),mn.splice(mn.length-Xe,0,dt),En[dt]=!0);for(Xe=0;Xe<Zt.length;Xe++)if(St=Gt[dt=Zt[Xe]],Nt=$t[dt],!En[dt]&&!e.deepEqual(St,Nt))if(e.deepEqual(St.source,Nt.source)&&e.deepEqual(St["source-layer"],Nt["source-layer"])&&e.deepEqual(St.type,Nt.type)){for(Lt in Ht(St.layout,Nt.layout,Oe,dt,null,Wt.setLayoutProperty),Ht(St.paint,Nt.paint,Oe,dt,null,Wt.setPaintProperty),e.deepEqual(St.filter,Nt.filter)||Oe.push({command:Wt.setFilter,args:[dt,Nt.filter]}),e.deepEqual(St.minzoom,Nt.minzoom)&&e.deepEqual(St.maxzoom,Nt.maxzoom)||Oe.push({command:Wt.setLayerZoomRange,args:[dt,Nt.minzoom,Nt.maxzoom]}),St)St.hasOwnProperty(Lt)&&"layout"!==Lt&&"paint"!==Lt&&"filter"!==Lt&&"metadata"!==Lt&&"minzoom"!==Lt&&"maxzoom"!==Lt&&(0===Lt.indexOf("paint.")?Ht(St[Lt],Nt[Lt],Oe,dt,Lt.slice(6),Wt.setPaintProperty):e.deepEqual(St[Lt],Nt[Lt])||Oe.push({command:Wt.setLayerProperty,args:[dt,Lt,Nt[Lt]]}));for(Lt in Nt)Nt.hasOwnProperty(Lt)&&!St.hasOwnProperty(Lt)&&"layout"!==Lt&&"paint"!==Lt&&"filter"!==Lt&&"metadata"!==Lt&&"minzoom"!==Lt&&"maxzoom"!==Lt&&(0===Lt.indexOf("paint.")?Ht(St[Lt],Nt[Lt],Oe,dt,Lt.slice(6),Wt.setPaintProperty):e.deepEqual(St[Lt],Nt[Lt])||Oe.push({command:Wt.setLayerProperty,args:[dt,Lt,Nt[Lt]]}))}else Oe.push({command:Wt.removeLayer,args:[dt]}),It=mn[mn.lastIndexOf(dt)+1],Oe.push({command:Wt.addLayer,args:[Nt,It]})}(me,N.layers,U)}catch(_e){console.warn("Unable to compute style diff:",_e),U=[{command:Wt.setStyle,args:[N]}]}return U}(this.serialize(),U).filter(function(_e){return!(_e.command in Vr)});if(0===fe.length)return!1;var me=fe.filter(function(_e){return!(_e.command in Ir)});if(me.length>0)throw new Error("Unimplemented: "+me.map(function(_e){return _e.command}).join(", ")+".");return fe.forEach(function(_e){"setTransition"!==_e.command&&X[_e.command].apply(X,_e.args)}),this.stylesheet=U,!0},N.prototype.addImage=function(U,X){if(this.getImage(U))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(U,X),this._availableImages=this.imageManager.listImages(),this._changedImages[U]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},N.prototype.updateImage=function(U,X){this.imageManager.updateImage(U,X)},N.prototype.getImage=function(U){return this.imageManager.getImage(U)},N.prototype.removeImage=function(U){if(!this.getImage(U))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(U),this._availableImages=this.imageManager.listImages(),this._changedImages[U]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},N.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},N.prototype.addSource=function(U,X,fe){var me=this;if(void 0===fe&&(fe={}),this._checkLoaded(),void 0!==this.sourceCaches[U])throw new Error("There is already a source with this ID");if(!X.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(X).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(X.type)>=0&&this._validate(e.validateStyle.source,"sources."+U,X,null,fe))){this.map&&this.map._collectResourceTiming&&(X.collectResourceTiming=!0);var _e=this.sourceCaches[U]=new st(U,X,this.dispatcher);_e.style=this,_e.setEventedParent(this,function(){return{isSourceLoaded:me.loaded(),source:_e.serialize(),sourceId:U}}),_e.onAdd(this.map),this._changed=!0}},N.prototype.removeSource=function(U){if(this._checkLoaded(),void 0===this.sourceCaches[U])throw new Error("There is no source with this ID");for(var X in this._layers)if(this._layers[X].source===U)return this.fire(new e.ErrorEvent(new Error('Source "'+U+'" cannot be removed while layer "'+X+'" is using it.')));var fe=this.sourceCaches[U];delete this.sourceCaches[U],delete this._updatedSources[U],fe.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:U})),fe.setEventedParent(null),fe.clearTiles(),fe.onRemove&&fe.onRemove(this.map),this._changed=!0},N.prototype.setGeoJSONSourceData=function(U,X){this._checkLoaded(),this.sourceCaches[U].getSource().setData(X),this._changed=!0},N.prototype.getSource=function(U){return this.sourceCaches[U]&&this.sourceCaches[U].getSource()},N.prototype.addLayer=function(U,X,fe){void 0===fe&&(fe={}),this._checkLoaded();var me=U.id;if(this.getLayer(me))this.fire(new e.ErrorEvent(new Error('Layer with id "'+me+'" already exists on this map')));else{var _e;if("custom"===U.type){if(wr(this,e.validateCustomStyleLayer(U)))return;_e=e.createStyleLayer(U)}else{if("object"==typeof U.source&&(this.addSource(me,U.source),U=e.clone$1(U),U=e.extend(U,{source:me})),this._validate(e.validateStyle.layer,"layers."+me,U,{arrayIndex:-1},fe))return;_e=e.createStyleLayer(U),this._validateLayer(_e),_e.setEventedParent(this,{layer:{id:me}}),this._serializedLayers[_e.id]=_e.serialize()}var Ae=X?this._order.indexOf(X):this._order.length;if(X&&-1===Ae)this.fire(new e.ErrorEvent(new Error('Layer with id "'+X+'" does not exist on this map.')));else{if(this._order.splice(Ae,0,me),this._layerOrderChanged=!0,this._layers[me]=_e,this._removedLayers[me]&&_e.source&&"custom"!==_e.type){var Oe=this._removedLayers[me];delete this._removedLayers[me],Oe.type!==_e.type?this._updatedSources[_e.source]="clear":(this._updatedSources[_e.source]="reload",this.sourceCaches[_e.source].pause())}this._updateLayer(_e),_e.onAdd&&_e.onAdd(this.map)}}},N.prototype.moveLayer=function(U,X){if(this._checkLoaded(),this._changed=!0,this._layers[U]){if(U!==X){var fe=this._order.indexOf(U);this._order.splice(fe,1);var me=X?this._order.indexOf(X):this._order.length;X&&-1===me?this.fire(new e.ErrorEvent(new Error('Layer with id "'+X+'" does not exist on this map.'))):(this._order.splice(me,0,U),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be moved.")))},N.prototype.removeLayer=function(U){this._checkLoaded();var X=this._layers[U];if(X){X.setEventedParent(null);var fe=this._order.indexOf(U);this._order.splice(fe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[U]=X,delete this._layers[U],delete this._serializedLayers[U],delete this._updatedLayers[U],delete this._updatedPaintProps[U],X.onRemove&&X.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be removed.")))},N.prototype.getLayer=function(U){return this._layers[U]},N.prototype.hasLayer=function(U){return U in this._layers},N.prototype.setLayerZoomRange=function(U,X,fe){this._checkLoaded();var me=this.getLayer(U);me?me.minzoom===X&&me.maxzoom===fe||(null!=X&&(me.minzoom=X),null!=fe&&(me.maxzoom=fe),this._updateLayer(me)):this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot have zoom extent.")))},N.prototype.setFilter=function(U,X,fe){void 0===fe&&(fe={}),this._checkLoaded();var me=this.getLayer(U);if(me){if(!e.deepEqual(me.filter,X))return null==X?(me.filter=void 0,void this._updateLayer(me)):void(this._validate(e.validateStyle.filter,"layers."+me.id+".filter",X,null,fe)||(me.filter=e.clone$1(X),this._updateLayer(me)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be filtered.")))},N.prototype.getFilter=function(U){return e.clone$1(this.getLayer(U).filter)},N.prototype.setLayoutProperty=function(U,X,fe,me){void 0===me&&(me={}),this._checkLoaded();var _e=this.getLayer(U);_e?e.deepEqual(_e.getLayoutProperty(X),fe)||(_e.setLayoutProperty(X,fe,me),this._updateLayer(_e)):this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be styled.")))},N.prototype.getLayoutProperty=function(U,X){var fe=this.getLayer(U);if(fe)return fe.getLayoutProperty(X);this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style.")))},N.prototype.setPaintProperty=function(U,X,fe,me){void 0===me&&(me={}),this._checkLoaded();var _e=this.getLayer(U);_e?e.deepEqual(_e.getPaintProperty(X),fe)||(_e.setPaintProperty(X,fe,me)&&this._updateLayer(_e),this._changed=!0,this._updatedPaintProps[U]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be styled.")))},N.prototype.getPaintProperty=function(U,X){return this.getLayer(U).getPaintProperty(X)},N.prototype.setFeatureState=function(U,X){this._checkLoaded();var fe=U.source,me=U.sourceLayer,_e=this.sourceCaches[fe];if(void 0!==_e){var Ae=_e.getSource().type;"geojson"===Ae&&me?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==Ae||me?(void 0===U.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),_e.setFeatureState(me,U.id,X)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},N.prototype.removeFeatureState=function(U,X){this._checkLoaded();var fe=U.source,me=this.sourceCaches[fe];if(void 0!==me){var _e=me.getSource().type,Ae="vector"===_e?U.sourceLayer:void 0;"vector"!==_e||Ae?X&&"string"!=typeof U.id&&"number"!=typeof U.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):me.removeFeatureState(Ae,U.id,X):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},N.prototype.getFeatureState=function(U){this._checkLoaded();var X=U.source,fe=U.sourceLayer,me=this.sourceCaches[X];if(void 0!==me){if("vector"!==me.getSource().type||fe)return void 0===U.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),me.getFeatureState(fe,U.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+X+"' does not exist in the map's style.")))},N.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},N.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(U){return U.serialize()}),layers:this._serializeLayers(this._order)},function(U){return void 0!==U})},N.prototype._updateLayer=function(U){this._updatedLayers[U.id]=!0,U.source&&!this._updatedSources[U.source]&&"raster"!==this.sourceCaches[U.source].getSource().type&&(this._updatedSources[U.source]="reload",this.sourceCaches[U.source].pause()),this._changed=!0},N.prototype._flattenAndSortRenderedFeatures=function(U){for(var X=this,fe=function(Er){return"fill-extrusion"===X._layers[Er].type},me={},_e=[],Ae=this._order.length-1;Ae>=0;Ae--){var Oe=this._order[Ae];if(fe(Oe)){me[Oe]=Ae;for(var Xe=0,nt=U;Xe<nt.length;Xe+=1){var dt=nt[Xe][Oe];if(dt)for(var St=0,Nt=dt;St<Nt.length;St+=1)_e.push(Nt[St])}}}_e.sort(function(Er,br){return br.intersectionZ-Er.intersectionZ});for(var Lt=[],At=this._order.length-1;At>=0;At--){var Zt=this._order[At];if(fe(Zt))for(var Gt=_e.length-1;Gt>=0;Gt--){var $t=_e[Gt].feature;if(me[$t.layer.id]<At)break;Lt.push($t),_e.pop()}else for(var mn=0,En=U;mn<En.length;mn+=1){var Vn=En[mn][Zt];if(Vn)for(var Nn=0,pr=Vn;Nn<pr.length;Nn+=1)Lt.push(pr[Nn].feature)}}return Lt},N.prototype.queryRenderedFeatures=function(U,X,fe){X&&X.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",X.filter,null,X);var me={};if(X&&X.layers){if(!Array.isArray(X.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var _e=0,Ae=X.layers;_e<Ae.length;_e+=1){var Oe=Ae[_e],Xe=this._layers[Oe];if(!Xe)return this.fire(new e.ErrorEvent(new Error("The layer '"+Oe+"' does not exist in the map's style and cannot be queried for features."))),[];me[Xe.source]=!0}}var nt=[];for(var dt in X.availableImages=this._availableImages,this.sourceCaches)X.layers&&!me[dt]||nt.push(G(this.sourceCaches[dt],this._layers,this._serializedLayers,U,X,fe));return this.placement&&nt.push(function(St,Nt,It,Lt,At,Zt,Gt){for(var $t={},mn=Zt.queryRenderedSymbols(Lt),En=[],Vn=0,Nn=Object.keys(mn).map(Number);Vn<Nn.length;Vn+=1)En.push(Gt[Nn[Vn]]);En.sort(re);for(var hr=function(){var Si=br[Er],ar=Si.featureIndex.lookupSymbolFeatures(mn[Si.bucketInstanceId],Nt,Si.bucketIndex,Si.sourceLayerIndex,At.filter,At.layers,At.availableImages,St);for(var jr in ar){var gi=$t[jr]=$t[jr]||[],ui=ar[jr];ui.sort(function(yi,qi){var Gi=Si.featureSortOrder;if(Gi){var sa=Gi.indexOf(yi.featureIndex);return Gi.indexOf(qi.featureIndex)-sa}return qi.featureIndex-yi.featureIndex});for(var Ti=0,Fi=ui;Ti<Fi.length;Ti+=1)gi.push(Fi[Ti])}},Er=0,br=En;Er<br.length;Er+=1)hr();var oi=function(Si){$t[Si].forEach(function(ar){var jr=ar.feature,ui=It[St[Si].source].getFeatureState(jr.layer["source-layer"],jr.id);jr.source=jr.layer.source,jr.layer["source-layer"]&&(jr.sourceLayer=jr.layer["source-layer"]),jr.state=ui})};for(var ci in $t)oi(ci);return $t}(this._layers,this._serializedLayers,this.sourceCaches,U,X,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(nt)},N.prototype.querySourceFeatures=function(U,X){X&&X.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",X.filter,null,X);var fe=this.sourceCaches[U];return fe?function(me,_e){for(var Ae=me.getRenderableIds().map(function(Nt){return me.getTileByID(Nt)}),Oe=[],Xe={},nt=0;nt<Ae.length;nt++){var dt=Ae[nt],St=dt.tileID.canonical.key;Xe[St]||(Xe[St]=!0,dt.querySourceFeatures(Oe,_e))}return Oe}(fe,X):[]},N.prototype.addSourceType=function(U,X,fe){return N.getSourceType(U)?fe(new Error('A source type called "'+U+'" already exists.')):(N.setSourceType(U,X),X.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:U,url:X.workerSourceURL},fe):fe(null,null))},N.prototype.getLight=function(){return this.light.getLight()},N.prototype.setLight=function(U,X){void 0===X&&(X={}),this._checkLoaded();var fe=this.light.getLight(),me=!1;for(var _e in U)if(!e.deepEqual(U[_e],fe[_e])){me=!0;break}if(me){var Ae={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(U,X),this.light.updateTransitions(Ae)}},N.prototype._validate=function(U,X,fe,me,_e){return void 0===_e&&(_e={}),(!_e||!1!==_e.validate)&&wr(this,U.call(e.validateStyle,e.extend({key:X,style:this.serialize(),value:fe,styleSpec:e.styleSpec},me)))},N.prototype._remove=function(){for(var U in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[U].setEventedParent(null);for(var X in this.sourceCaches)this.sourceCaches[X].clearTiles(),this.sourceCaches[X].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},N.prototype._clearSource=function(U){this.sourceCaches[U].clearTiles()},N.prototype._reloadSource=function(U){this.sourceCaches[U].resume(),this.sourceCaches[U].reload()},N.prototype._updateSources=function(U){for(var X in this.sourceCaches)this.sourceCaches[X].update(U)},N.prototype._generateCollisionBoxes=function(){for(var U in this.sourceCaches)this._reloadSource(U)},N.prototype._updatePlacement=function(U,X,fe,me,_e){void 0===_e&&(_e=!1);for(var Ae=!1,Oe=!1,Xe={},nt=0,dt=this._order;nt<dt.length;nt+=1){var Nt=this._layers[dt[nt]];if("symbol"===Nt.type){if(!Xe[Nt.source]){var It=this.sourceCaches[Nt.source];Xe[Nt.source]=It.getRenderableIds(!0).map(function(mn){return It.getTileByID(mn)}).sort(function(mn,En){return En.tileID.overscaledZ-mn.tileID.overscaledZ||(mn.tileID.isLessThan(En.tileID)?-1:1)})}var Lt=this.crossTileSymbolIndex.addLayer(Nt,Xe[Nt.source],U.center.lng);Ae=Ae||Lt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_e=_e||this._layerOrderChanged||0===fe)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),U.zoom))&&(this.pauseablePlacement=new Sr(U,this._order,_e,X,fe,me,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Xe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Oe=!0),Ae&&this.pauseablePlacement.placement.setStale()),Oe||Ae)for(var At=0,Zt=this._order;At<Zt.length;At+=1){var $t=this._layers[Zt[At]];"symbol"===$t.type&&this.placement.updateLayerOpacities($t,Xe[$t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},N.prototype._releaseSymbolFadeTiles=function(){for(var U in this.sourceCaches)this.sourceCaches[U].releaseSymbolFadeTiles()},N.prototype.getImages=function(U,X,fe){this.imageManager.getImages(X.icons,fe),this._updateTilesForChangedImages();var me=this.sourceCaches[X.source];me&&me.setDependencies(X.tileID.key,X.type,X.icons)},N.prototype.getGlyphs=function(U,X,fe){this.glyphManager.getGlyphs(X.stacks,fe)},N.prototype.getResource=function(U,X,fe){return e.makeRequest(X,fe)},N}(e.Evented);pi.getSourceType=function(O){return j[O]},pi.setSourceType=function(O,N){j[O]=N},pi.registerForPluginStateChange=e.registerForPluginStateChange;var lr=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),bi=ga("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ni=ga("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),wa=ga("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Io=ga("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),$a=ga("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ya=ga("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Xi=ga("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Oa=ga("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ds=ga("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Bo=ga("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),sl=ga("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Zo=ga("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),as=ga("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ll=ga("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Bi=ga("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Ws=ga("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Is=ga("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),to=ga("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),fa=ga("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Xo=ga("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ps=ga("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Lo=ga("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),lo=ga("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),uo=ga("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),ul=ga("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),lu=ga("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function ga(O,N){var U=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,X={};return{fragmentSource:O=O.replace(U,function(fe,me,_e,Ae,Oe){return X[Oe]=!0,"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\nvarying "+_e+" "+Ae+" "+Oe+";\n#else\nuniform "+_e+" "+Ae+" u_"+Oe+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Oe+"\n    "+_e+" "+Ae+" "+Oe+" = u_"+Oe+";\n#endif\n"}),vertexSource:N=N.replace(U,function(fe,me,_e,Ae,Oe){var Xe="float"===Ae?"vec2":"vec4",nt=Oe.match(/color/)?"color":Xe;return X[Oe]?"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\nuniform lowp float u_"+Oe+"_t;\nattribute "+_e+" "+Xe+" a_"+Oe+";\nvarying "+_e+" "+Ae+" "+Oe+";\n#else\nuniform "+_e+" "+Ae+" u_"+Oe+";\n#endif\n":"vec4"===nt?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+Oe+" = a_"+Oe+";\n#else\n    "+_e+" "+Ae+" "+Oe+" = u_"+Oe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+Oe+" = unpack_mix_"+nt+"(a_"+Oe+", u_"+Oe+"_t);\n#else\n    "+_e+" "+Ae+" "+Oe+" = u_"+Oe+";\n#endif\n":"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\nuniform lowp float u_"+Oe+"_t;\nattribute "+_e+" "+Xe+" a_"+Oe+";\n#else\nuniform "+_e+" "+Ae+" u_"+Oe+";\n#endif\n":"vec4"===nt?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+_e+" "+Ae+" "+Oe+" = a_"+Oe+";\n#else\n    "+_e+" "+Ae+" "+Oe+" = u_"+Oe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+_e+" "+Ae+" "+Oe+" = unpack_mix_"+nt+"(a_"+Oe+", u_"+Oe+"_t);\n#else\n    "+_e+" "+Ae+" "+Oe+" = u_"+Oe+";\n#endif\n"})}}var Vl=Object.freeze({__proto__:null,prelude:bi,background:Ni,backgroundPattern:wa,circle:Io,clippingMask:$a,heatmap:Ya,heatmapTexture:Xi,collisionBox:Oa,collisionCircle:Ds,debug:Bo,fill:sl,fillOutline:Zo,fillOutlinePattern:as,fillPattern:ll,fillExtrusion:Bi,fillExtrusionPattern:Ws,hillshadePrepare:Is,hillshade:to,line:fa,lineGradient:Xo,linePattern:ps,lineSDF:Lo,raster:lo,symbolIcon:uo,symbolSDF:ul,symbolTextAndIcon:lu}),cl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};cl.prototype.bind=function(O,N,U,X,fe,me,_e,Ae){this.context=O;for(var Oe=this.boundPaintVertexBuffers.length!==X.length,Xe=0;!Oe&&Xe<X.length;Xe++)this.boundPaintVertexBuffers[Xe]!==X[Xe]&&(Oe=!0);O.extVertexArrayObject&&this.vao&&this.boundProgram===N&&this.boundLayoutVertexBuffer===U&&!Oe&&this.boundIndexBuffer===fe&&this.boundVertexOffset===me&&this.boundDynamicVertexBuffer===_e&&this.boundDynamicVertexBuffer2===Ae?(O.bindVertexArrayOES.set(this.vao),_e&&_e.bind(),fe&&fe.dynamicDraw&&fe.bind(),Ae&&Ae.bind()):this.freshBind(N,U,X,fe,me,_e,Ae)},cl.prototype.freshBind=function(O,N,U,X,fe,me,_e){var Ae,Oe=O.numAttributes,Xe=this.context,nt=Xe.gl;if(Xe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Xe.extVertexArrayObject.createVertexArrayOES(),Xe.bindVertexArrayOES.set(this.vao),Ae=0,this.boundProgram=O,this.boundLayoutVertexBuffer=N,this.boundPaintVertexBuffers=U,this.boundIndexBuffer=X,this.boundVertexOffset=fe,this.boundDynamicVertexBuffer=me,this.boundDynamicVertexBuffer2=_e;else{Ae=Xe.currentNumAttributes||0;for(var dt=Oe;dt<Ae;dt++)nt.disableVertexAttribArray(dt)}N.enableAttributes(nt,O);for(var St=0,Nt=U;St<Nt.length;St+=1)Nt[St].enableAttributes(nt,O);me&&me.enableAttributes(nt,O),_e&&_e.enableAttributes(nt,O),N.bind(),N.setVertexAttribPointers(nt,O,fe);for(var It=0,Lt=U;It<Lt.length;It+=1){var At=Lt[It];At.bind(),At.setVertexAttribPointers(nt,O,fe)}me&&(me.bind(),me.setVertexAttribPointers(nt,O,fe)),X&&X.bind(),_e&&(_e.bind(),_e.setVertexAttribPointers(nt,O,fe)),Xe.currentNumAttributes=Oe},cl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Xl=function(O,N,U,X,fe){var me=O.gl;this.program=me.createProgram();var _e=U?U.defines():[];fe&&_e.push("#define OVERDRAW_INSPECTOR;");var Ae=_e.concat(bi.fragmentSource,N.fragmentSource).join("\n"),Oe=_e.concat(bi.vertexSource,N.vertexSource).join("\n"),Xe=me.createShader(me.FRAGMENT_SHADER);if(me.isContextLost())this.failedToCreate=!0;else{me.shaderSource(Xe,Ae),me.compileShader(Xe),me.attachShader(this.program,Xe);var nt=me.createShader(me.VERTEX_SHADER);if(me.isContextLost())this.failedToCreate=!0;else{me.shaderSource(nt,Oe),me.compileShader(nt),me.attachShader(this.program,nt);for(var dt=U?U.layoutAttributes:[],St=0;St<dt.length;St++)me.bindAttribLocation(this.program,St,dt[St].name);me.linkProgram(this.program),me.deleteShader(nt),me.deleteShader(Xe),this.numAttributes=me.getProgramParameter(this.program,me.ACTIVE_ATTRIBUTES),this.attributes={};for(var Nt={},It=0;It<this.numAttributes;It++){var Lt=me.getActiveAttrib(this.program,It);Lt&&(this.attributes[Lt.name]=me.getAttribLocation(this.program,Lt.name))}for(var At=me.getProgramParameter(this.program,me.ACTIVE_UNIFORMS),Zt=0;Zt<At;Zt++){var Gt=me.getActiveUniform(this.program,Zt);Gt&&(Nt[Gt.name]=me.getUniformLocation(this.program,Gt.name))}this.fixedUniforms=X(O,Nt),this.binderUniforms=U?U.getUniforms(O,Nt):[]}}};function $l(O,N,U){var X=1/jn(U,1,N.transform.tileZoom),fe=Math.pow(2,U.tileID.overscaledZ),me=U.tileSize*Math.pow(2,N.transform.tileZoom)/fe,_e=me*(U.tileID.canonical.x+U.tileID.wrap*fe),Ae=me*U.tileID.canonical.y;return{u_image:0,u_texsize:U.imageAtlasTexture.size,u_scale:[X,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[_e>>16,Ae>>16],u_pixel_coord_lower:[65535&_e,65535&Ae]}}Xl.prototype.draw=function(O,N,U,X,fe,me,_e,Ae,Oe,Xe,nt,dt,St,Nt,It,Lt){var At,Zt=O.gl;if(!this.failedToCreate){for(var Gt in O.program.set(this.program),O.setDepthMode(U),O.setStencilMode(X),O.setColorMode(fe),O.setCullFace(me),this.fixedUniforms)this.fixedUniforms[Gt].set(_e[Gt]);Nt&&Nt.setUniforms(O,this.binderUniforms,dt,{zoom:St});for(var $t=(At={},At[Zt.LINES]=2,At[Zt.TRIANGLES]=3,At[Zt.LINE_STRIP]=1,At)[N],mn=0,En=nt.get();mn<En.length;mn+=1){var Vn=En[mn],Nn=Vn.vaos||(Vn.vaos={});(Nn[Ae]||(Nn[Ae]=new cl)).bind(O,this,Oe,Nt?Nt.getPaintVertexBuffers():[],Xe,Vn.vertexOffset,It,Lt),Zt.drawElements(N,Vn.primitiveLength*$t,Zt.UNSIGNED_SHORT,Vn.primitiveOffset*$t*2)}}};var Ro=function(O,N,U,X){var fe=N.style.light,me=fe.properties.get("position"),_e=[me.x,me.y,me.z],Ae=e.create$1();"viewport"===fe.properties.get("anchor")&&e.fromRotation(Ae,-N.transform.angle),e.transformMat3(_e,_e,Ae);var Oe=fe.properties.get("color");return{u_matrix:O,u_lightpos:_e,u_lightintensity:fe.properties.get("intensity"),u_lightcolor:[Oe.r,Oe.g,Oe.b],u_vertical_gradient:+U,u_opacity:X}},uu=function(O,N,U,X,fe,me,_e){return e.extend(Ro(O,N,U,X),$l(me,N,_e),{u_height_factor:-Math.pow(2,fe.overscaledZ)/_e.tileSize/8})},Ls=function(O){return{u_matrix:O}},Ui=function(O,N,U,X){return e.extend(Ls(O),$l(U,N,X))},_o=function(O,N){return{u_matrix:O,u_world:N}},co=function(O,N,U,X,fe){return e.extend(Ui(O,N,U,X),{u_world:fe})},$o=function(O,N,U,X){var fe,me,_e=O.transform;if("map"===X.paint.get("circle-pitch-alignment")){var Ae=jn(U,1,_e.zoom);fe=!0,me=[Ae,Ae]}else fe=!1,me=_e.pixelsToGLUnits;return{u_camera_to_center_distance:_e.cameraToCenterDistance,u_scale_with_map:+("map"===X.paint.get("circle-pitch-scale")),u_matrix:O.translatePosMatrix(N.posMatrix,U,X.paint.get("circle-translate"),X.paint.get("circle-translate-anchor")),u_pitch_with_map:+fe,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:me}},Ms=function(O,N,U){var X=jn(U,1,N.zoom),fe=Math.pow(2,N.zoom-U.tileID.overscaledZ),me=U.tileID.overscaleFactor();return{u_matrix:O,u_camera_to_center_distance:N.cameraToCenterDistance,u_pixels_to_tile_units:X,u_extrude_scale:[N.pixelsToGLUnits[0]/(X*fe),N.pixelsToGLUnits[1]/(X*fe)],u_overscale_factor:me}},fo=function(O,N,U){return{u_matrix:O,u_inv_matrix:N,u_camera_to_center_distance:U.cameraToCenterDistance,u_viewport_size:[U.width,U.height]}},Jo=function(O,N,U){return void 0===U&&(U=1),{u_matrix:O,u_color:N,u_overlay:0,u_overlay_scale:U}},fi=function(O){return{u_matrix:O}},na=function(O,N,U,X){return{u_matrix:O,u_extrude_scale:jn(N,1,U),u_intensity:X}};function Za(O,N){var U=Math.pow(2,N.canonical.z),X=N.canonical.y;return[new e.MercatorCoordinate(0,X/U).toLngLat().lat,new e.MercatorCoordinate(0,(X+1)/U).toLngLat().lat]}var yo=function(O,N,U){var X=O.transform;return{u_matrix:pt(O,N,U),u_ratio:1/jn(N,1,X.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/X.pixelsToGLUnits[0],1/X.pixelsToGLUnits[1]]}},ya=function(O,N,U){return e.extend(yo(O,N,U),{u_image:0})},We=function(O,N,U,X){var fe=O.transform,me=at(N,fe);return{u_matrix:pt(O,N,U),u_texsize:N.imageAtlasTexture.size,u_ratio:1/jn(N,1,fe.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[me,X.fromScale,X.toScale],u_fade:X.t,u_units_to_pixels:[1/fe.pixelsToGLUnits[0],1/fe.pixelsToGLUnits[1]]}},Ke=function(O,N,U,X,fe){var _e=O.lineAtlas,Ae=at(N,O.transform),Oe="round"===U.layout.get("line-cap"),Xe=_e.getDash(X.from,Oe),nt=_e.getDash(X.to,Oe),dt=Xe.width*fe.fromScale,St=nt.width*fe.toScale;return e.extend(yo(O,N,U),{u_patternscale_a:[Ae/dt,-Xe.height/2],u_patternscale_b:[Ae/St,-nt.height/2],u_sdfgamma:_e.width/(256*Math.min(dt,St)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Xe.y,u_tex_y_b:nt.y,u_mix:fe.t})};function at(O,N){return 1/jn(O,1,N.tileZoom)}function pt(O,N,U){return O.translatePosMatrix(N.tileID.posMatrix,N,U.paint.get("line-translate"),U.paint.get("line-translate-anchor"))}var kt=function(O,N,U,X,fe){return{u_matrix:O,u_tl_parent:N,u_scale_parent:U,u_buffer_scale:1,u_fade_t:X.mix,u_opacity:X.opacity*fe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:fe.paint.get("raster-brightness-min"),u_brightness_high:fe.paint.get("raster-brightness-max"),u_saturation_factor:(_e=fe.paint.get("raster-saturation"),_e>0?1-1/(1.001-_e):-_e),u_contrast_factor:(me=fe.paint.get("raster-contrast"),me>0?1/(1-me):1+me),u_spin_weights:vt(fe.paint.get("raster-hue-rotate"))};var me,_e};function vt(O){O*=Math.PI/180;var N=Math.sin(O),U=Math.cos(O);return[(2*U+1)/3,(-Math.sqrt(3)*N-U+1)/3,(Math.sqrt(3)*N-U+1)/3]}var Pt,un=function(O,N,U,X,fe,me,_e,Ae,Oe,Xe){var nt=fe.transform;return{u_is_size_zoom_constant:+("constant"===O||"source"===O),u_is_size_feature_constant:+("constant"===O||"camera"===O),u_size_t:N?N.uSizeT:0,u_size:N?N.uSize:0,u_camera_to_center_distance:nt.cameraToCenterDistance,u_pitch:nt.pitch/360*2*Math.PI,u_rotate_symbol:+U,u_aspect_ratio:nt.width/nt.height,u_fade_change:fe.options.fadeDuration?fe.symbolFadeChange:1,u_matrix:me,u_label_plane_matrix:_e,u_coord_matrix:Ae,u_is_text:+Oe,u_pitch_with_map:+X,u_texsize:Xe,u_texture:0}},fn=function(O,N,U,X,fe,me,_e,Ae,Oe,Xe,nt){var dt=fe.transform;return e.extend(un(O,N,U,X,fe,me,_e,Ae,Oe,Xe),{u_gamma_scale:X?Math.cos(dt._pitch)*dt.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+nt})},on=function(O,N,U,X,fe,me,_e,Ae,Oe,Xe){return e.extend(fn(O,N,U,X,fe,me,_e,Ae,!0,Oe,!0),{u_texsize_icon:Xe,u_texture_icon:1})},pn=function(O,N,U){return{u_matrix:O,u_opacity:N,u_color:U}},An=function(O,N,U,X,fe,me){return e.extend((Ae=me,Xe=fe,nt=(Oe=U).imageManager.getPattern((_e=X).from.toString()),dt=Oe.imageManager.getPattern(_e.to.toString()),Nt=(St=Oe.imageManager.getPixelSize()).width,It=St.height,Lt=Math.pow(2,Xe.tileID.overscaledZ),Zt=(At=Xe.tileSize*Math.pow(2,Oe.transform.tileZoom)/Lt)*(Xe.tileID.canonical.x+Xe.tileID.wrap*Lt),Gt=At*Xe.tileID.canonical.y,{u_image:0,u_pattern_tl_a:nt.tl,u_pattern_br_a:nt.br,u_pattern_tl_b:dt.tl,u_pattern_br_b:dt.br,u_texsize:[Nt,It],u_mix:Ae.t,u_pattern_size_a:nt.displaySize,u_pattern_size_b:dt.displaySize,u_scale_a:Ae.fromScale,u_scale_b:Ae.toScale,u_tile_units_to_pixels:1/jn(Xe,1,Oe.transform.tileZoom),u_pixel_coord_upper:[Zt>>16,Gt>>16],u_pixel_coord_lower:[65535&Zt,65535&Gt]}),{u_matrix:O,u_opacity:N});var _e,Ae,Oe,Xe,nt,dt,St,Nt,It,Lt,At,Zt,Gt},Ln={fillExtrusion:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_lightpos:new e.Uniform3f(O,N.u_lightpos),u_lightintensity:new e.Uniform1f(O,N.u_lightintensity),u_lightcolor:new e.Uniform3f(O,N.u_lightcolor),u_vertical_gradient:new e.Uniform1f(O,N.u_vertical_gradient),u_opacity:new e.Uniform1f(O,N.u_opacity)}},fillExtrusionPattern:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_lightpos:new e.Uniform3f(O,N.u_lightpos),u_lightintensity:new e.Uniform1f(O,N.u_lightintensity),u_lightcolor:new e.Uniform3f(O,N.u_lightcolor),u_vertical_gradient:new e.Uniform1f(O,N.u_vertical_gradient),u_height_factor:new e.Uniform1f(O,N.u_height_factor),u_image:new e.Uniform1i(O,N.u_image),u_texsize:new e.Uniform2f(O,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,N.u_scale),u_fade:new e.Uniform1f(O,N.u_fade),u_opacity:new e.Uniform1f(O,N.u_opacity)}},fill:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix)}},fillPattern:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_image:new e.Uniform1i(O,N.u_image),u_texsize:new e.Uniform2f(O,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,N.u_scale),u_fade:new e.Uniform1f(O,N.u_fade)}},fillOutline:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_world:new e.Uniform2f(O,N.u_world)}},fillOutlinePattern:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_world:new e.Uniform2f(O,N.u_world),u_image:new e.Uniform1i(O,N.u_image),u_texsize:new e.Uniform2f(O,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,N.u_scale),u_fade:new e.Uniform1f(O,N.u_fade)}},circle:function(O,N){return{u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(O,N.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(O,N.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(O,N.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(O,N.u_matrix)}},collisionBox:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(O,N.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(O,N.u_extrude_scale),u_overscale_factor:new e.Uniform1f(O,N.u_overscale_factor)}},collisionCircle:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_inv_matrix:new e.UniformMatrix4f(O,N.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(O,N.u_viewport_size)}},debug:function(O,N){return{u_color:new e.UniformColor(O,N.u_color),u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_overlay:new e.Uniform1i(O,N.u_overlay),u_overlay_scale:new e.Uniform1f(O,N.u_overlay_scale)}},clippingMask:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix)}},heatmap:function(O,N){return{u_extrude_scale:new e.Uniform1f(O,N.u_extrude_scale),u_intensity:new e.Uniform1f(O,N.u_intensity),u_matrix:new e.UniformMatrix4f(O,N.u_matrix)}},heatmapTexture:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_world:new e.Uniform2f(O,N.u_world),u_image:new e.Uniform1i(O,N.u_image),u_color_ramp:new e.Uniform1i(O,N.u_color_ramp),u_opacity:new e.Uniform1f(O,N.u_opacity)}},hillshade:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_image:new e.Uniform1i(O,N.u_image),u_latrange:new e.Uniform2f(O,N.u_latrange),u_light:new e.Uniform2f(O,N.u_light),u_shadow:new e.UniformColor(O,N.u_shadow),u_highlight:new e.UniformColor(O,N.u_highlight),u_accent:new e.UniformColor(O,N.u_accent)}},hillshadePrepare:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_image:new e.Uniform1i(O,N.u_image),u_dimension:new e.Uniform2f(O,N.u_dimension),u_zoom:new e.Uniform1f(O,N.u_zoom),u_maxzoom:new e.Uniform1f(O,N.u_maxzoom),u_unpack:new e.Uniform4f(O,N.u_unpack)}},line:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_ratio:new e.Uniform1f(O,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,N.u_units_to_pixels)}},lineGradient:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_ratio:new e.Uniform1f(O,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,N.u_units_to_pixels),u_image:new e.Uniform1i(O,N.u_image)}},linePattern:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_texsize:new e.Uniform2f(O,N.u_texsize),u_ratio:new e.Uniform1f(O,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_image:new e.Uniform1i(O,N.u_image),u_units_to_pixels:new e.Uniform2f(O,N.u_units_to_pixels),u_scale:new e.Uniform3f(O,N.u_scale),u_fade:new e.Uniform1f(O,N.u_fade)}},lineSDF:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_ratio:new e.Uniform1f(O,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,N.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(O,N.u_patternscale_a),u_patternscale_b:new e.Uniform2f(O,N.u_patternscale_b),u_sdfgamma:new e.Uniform1f(O,N.u_sdfgamma),u_image:new e.Uniform1i(O,N.u_image),u_tex_y_a:new e.Uniform1f(O,N.u_tex_y_a),u_tex_y_b:new e.Uniform1f(O,N.u_tex_y_b),u_mix:new e.Uniform1f(O,N.u_mix)}},raster:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_tl_parent:new e.Uniform2f(O,N.u_tl_parent),u_scale_parent:new e.Uniform1f(O,N.u_scale_parent),u_buffer_scale:new e.Uniform1f(O,N.u_buffer_scale),u_fade_t:new e.Uniform1f(O,N.u_fade_t),u_opacity:new e.Uniform1f(O,N.u_opacity),u_image0:new e.Uniform1i(O,N.u_image0),u_image1:new e.Uniform1i(O,N.u_image1),u_brightness_low:new e.Uniform1f(O,N.u_brightness_low),u_brightness_high:new e.Uniform1f(O,N.u_brightness_high),u_saturation_factor:new e.Uniform1f(O,N.u_saturation_factor),u_contrast_factor:new e.Uniform1f(O,N.u_contrast_factor),u_spin_weights:new e.Uniform3f(O,N.u_spin_weights)}},symbolIcon:function(O,N){return{u_is_size_zoom_constant:new e.Uniform1i(O,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,N.u_size_t),u_size:new e.Uniform1f(O,N.u_size),u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,N.u_pitch),u_rotate_symbol:new e.Uniform1i(O,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,N.u_fade_change),u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,N.u_coord_matrix),u_is_text:new e.Uniform1i(O,N.u_is_text),u_pitch_with_map:new e.Uniform1i(O,N.u_pitch_with_map),u_texsize:new e.Uniform2f(O,N.u_texsize),u_texture:new e.Uniform1i(O,N.u_texture)}},symbolSDF:function(O,N){return{u_is_size_zoom_constant:new e.Uniform1i(O,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,N.u_size_t),u_size:new e.Uniform1f(O,N.u_size),u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,N.u_pitch),u_rotate_symbol:new e.Uniform1i(O,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,N.u_fade_change),u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,N.u_coord_matrix),u_is_text:new e.Uniform1i(O,N.u_is_text),u_pitch_with_map:new e.Uniform1i(O,N.u_pitch_with_map),u_texsize:new e.Uniform2f(O,N.u_texsize),u_texture:new e.Uniform1i(O,N.u_texture),u_gamma_scale:new e.Uniform1f(O,N.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(O,N.u_is_halo)}},symbolTextAndIcon:function(O,N){return{u_is_size_zoom_constant:new e.Uniform1i(O,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,N.u_size_t),u_size:new e.Uniform1f(O,N.u_size),u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,N.u_pitch),u_rotate_symbol:new e.Uniform1i(O,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,N.u_fade_change),u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,N.u_coord_matrix),u_is_text:new e.Uniform1i(O,N.u_is_text),u_pitch_with_map:new e.Uniform1i(O,N.u_pitch_with_map),u_texsize:new e.Uniform2f(O,N.u_texsize),u_texsize_icon:new e.Uniform2f(O,N.u_texsize_icon),u_texture:new e.Uniform1i(O,N.u_texture),u_texture_icon:new e.Uniform1i(O,N.u_texture_icon),u_gamma_scale:new e.Uniform1f(O,N.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(O,N.u_is_halo)}},background:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_opacity:new e.Uniform1f(O,N.u_opacity),u_color:new e.UniformColor(O,N.u_color)}},backgroundPattern:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_opacity:new e.Uniform1f(O,N.u_opacity),u_image:new e.Uniform1i(O,N.u_image),u_pattern_tl_a:new e.Uniform2f(O,N.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(O,N.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(O,N.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(O,N.u_pattern_br_b),u_texsize:new e.Uniform2f(O,N.u_texsize),u_mix:new e.Uniform1f(O,N.u_mix),u_pattern_size_a:new e.Uniform2f(O,N.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(O,N.u_pattern_size_b),u_scale_a:new e.Uniform1f(O,N.u_scale_a),u_scale_b:new e.Uniform1f(O,N.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(O,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,N.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(O,N.u_tile_units_to_pixels)}}};function Pn(O,N,U,X,fe,me,_e){for(var Ae=O.context,Oe=Ae.gl,Xe=O.useProgram("collisionBox"),nt=[],dt=0,St=0,Nt=0;Nt<X.length;Nt++){var It=X[Nt],Lt=N.getTile(It),At=Lt.getBucket(U);if(At){var Zt=It.posMatrix;0===fe[0]&&0===fe[1]||(Zt=O.translatePosMatrix(It.posMatrix,Lt,fe,me));var Gt=_e?At.textCollisionBox:At.iconCollisionBox,$t=At.collisionCircleArray;if($t.length>0){var mn=e.create(),En=Zt;e.mul(mn,At.placementInvProjMatrix,O.transform.glCoordMatrix),e.mul(mn,mn,At.placementViewportMatrix),nt.push({circleArray:$t,circleOffset:St,transform:En,invTransform:mn}),St=dt+=$t.length/4}Gt&&Xe.draw(Ae,Oe.LINES,rt.disabled,Le.disabled,O.colorModeForRenderPass(),je.disabled,Ms(Zt,O.transform,Lt),U.id,Gt.layoutVertexBuffer,Gt.indexBuffer,Gt.segments,null,O.transform.zoom,null,null,Gt.collisionVertexBuffer)}}if(_e&&nt.length){var Vn=O.useProgram("collisionCircle"),Nn=new e.StructArrayLayout2f1f2i16;Nn.resize(4*dt),Nn._trim();for(var pr=0,hr=0,Er=nt;hr<Er.length;hr+=1)for(var br=Er[hr],oi=0;oi<br.circleArray.length/4;oi++){var ci=4*oi,Si=br.circleArray[ci+0],ar=br.circleArray[ci+1],jr=br.circleArray[ci+2],gi=br.circleArray[ci+3];Nn.emplace(pr++,Si,ar,jr,gi,0),Nn.emplace(pr++,Si,ar,jr,gi,1),Nn.emplace(pr++,Si,ar,jr,gi,2),Nn.emplace(pr++,Si,ar,jr,gi,3)}(!Pt||Pt.length<2*dt)&&(Pt=function(Gi){var sa=2*Gi,Wi=new e.StructArrayLayout3ui6;Wi.resize(sa),Wi._trim();for(var ua=0;ua<sa;ua++){var ka=6*ua;Wi.uint16[ka+0]=4*ua+0,Wi.uint16[ka+1]=4*ua+1,Wi.uint16[ka+2]=4*ua+2,Wi.uint16[ka+3]=4*ua+2,Wi.uint16[ka+4]=4*ua+3,Wi.uint16[ka+5]=4*ua+0}return Wi}(dt));for(var ui=Ae.createIndexBuffer(Pt,!0),Ti=Ae.createVertexBuffer(Nn,e.collisionCircleLayout.members,!0),Fi=0,ia=nt;Fi<ia.length;Fi+=1){var yi=ia[Fi],qi=fo(yi.transform,yi.invTransform,O.transform);Vn.draw(Ae,Oe.TRIANGLES,rt.disabled,Le.disabled,O.colorModeForRenderPass(),je.disabled,qi,U.id,Ti,ui,e.SegmentVector.simpleSegment(0,2*yi.circleOffset,yi.circleArray.length,yi.circleArray.length/2),null,O.transform.zoom,null,null,null)}Ti.destroy(),ui.destroy()}}var zn=e.identity(new Float32Array(16));function yr(O,N,U,X,fe,me){var _e=e.getAnchorAlignment(O),Ae=-(_e.horizontalAlign-.5)*N,Oe=-(_e.verticalAlign-.5)*U,Xe=e.evaluateVariableOffset(O,X);return new e.Point((Ae/fe+Xe[0])*me,(Oe/fe+Xe[1])*me)}function Dr(O,N,U,X,fe,me,_e,Ae,Oe,Xe,nt){var dt=O.text.placedSymbolArray,St=O.text.dynamicLayoutVertexArray,Nt=O.icon.dynamicLayoutVertexArray,It={};St.clear();for(var Lt=0;Lt<dt.length;Lt++){var At=dt.get(Lt),Gt=At.hidden||!At.crossTileID||O.allowVerticalPlacement&&!At.placedOrientation?null:X[At.crossTileID];if(Gt){var $t=new e.Point(At.anchorX,At.anchorY),mn=Tn($t,U?Ae:_e),En=wn(me.cameraToCenterDistance,mn.signedDistanceFromCamera),Vn=fe.evaluateSizeForFeature(O.textSizeData,Xe,At)*En/e.ONE_EM;U&&(Vn*=O.tilePixelRatio/Oe);for(var hr=yr(Gt.anchor,Gt.width,Gt.height,Gt.textOffset,Gt.textBoxScale,Vn),Er=U?Tn($t.add(hr),_e).point:mn.point.add(N?hr.rotate(-me.angle):hr),br=O.allowVerticalPlacement&&At.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,oi=0;oi<At.numGlyphs;oi++)e.addDynamicAttributes(St,Er,br);nt&&At.associatedIconIndex>=0&&(It[At.associatedIconIndex]={shiftedAnchor:Er,angle:br})}else Or(At.numGlyphs,St)}if(nt){Nt.clear();for(var ci=O.icon.placedSymbolArray,Si=0;Si<ci.length;Si++){var ar=ci.get(Si);if(ar.hidden)Or(ar.numGlyphs,Nt);else{var jr=It[Si];if(jr)for(var gi=0;gi<ar.numGlyphs;gi++)e.addDynamicAttributes(Nt,jr.shiftedAnchor,jr.angle);else Or(ar.numGlyphs,Nt)}}O.icon.dynamicLayoutVertexBuffer.updateData(Nt)}O.text.dynamicLayoutVertexBuffer.updateData(St)}function Yr(O,N,U){return U.iconsInText&&N?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function Kr(O,N,U,X,fe,me,_e,Ae,Oe,Xe,nt,dt){for(var St=O.context,Nt=St.gl,It=O.transform,Lt="map"===Ae,At="map"===Oe,Zt=Lt&&"point"!==U.layout.get("symbol-placement"),Gt=Lt&&!At&&!Zt,$t=void 0!==U.layout.get("symbol-sort-key").constantOr(1),mn=O.depthModeForSublayer(0,rt.ReadOnly),En=U.layout.get("text-variable-anchor"),Vn=[],Nn=0,pr=X;Nn<pr.length;Nn+=1){var hr=pr[Nn],Er=N.getTile(hr),br=Er.getBucket(U);if(br){var oi=fe?br.text:br.icon;if(oi&&oi.segments.get().length){var ci=oi.programConfigurations.get(U.id),Si=fe||br.sdfIcons,ar=fe?br.textSizeData:br.iconSizeData,jr=At||0!==It.pitch,gi=O.useProgram(Yr(Si,fe,br),ci),ui=e.evaluateSizeForZoom(ar,It.zoom),Ti=void 0,Fi=[0,0],ia=void 0,yi=void 0,qi=null,Gi=void 0;if(fe)ia=Er.glyphAtlasTexture,yi=Nt.LINEAR,Ti=Er.glyphAtlasTexture.size,br.iconsInText&&(Fi=Er.imageAtlasTexture.size,qi=Er.imageAtlasTexture,Gi=jr||O.options.rotating||O.options.zooming||"composite"===ar.kind||"camera"===ar.kind?Nt.LINEAR:Nt.NEAREST);else{var Wi=1!==U.layout.get("icon-size").constantOr(0)||br.iconsNeedLinear;ia=Er.imageAtlasTexture,yi=Si||O.options.rotating||O.options.zooming||Wi||jr?Nt.LINEAR:Nt.NEAREST,Ti=Er.imageAtlasTexture.size}var ua=jn(Er,1,O.transform.zoom),ka=Dn(hr.posMatrix,At,Lt,O.transform,ua),Wa=_n(hr.posMatrix,At,Lt,O.transform,ua),Oo=En&&br.hasTextData(),ao="none"!==U.layout.get("icon-text-fit")&&Oo&&br.hasIconData();Zt&&Fn(br,hr.posMatrix,O,fe,ka,Wa,At,Xe);var Ja=O.translatePosMatrix(hr.posMatrix,Er,me,_e),ho=Zt||fe&&En||ao?zn:ka,Mo=O.translatePosMatrix(Wa,Er,me,_e,!0),ys=Si&&0!==U.paint.get(fe?"text-halo-width":"icon-halo-width").constantOr(1),jo={program:gi,buffers:oi,uniformValues:Si?br.iconsInText?on(ar.kind,ui,Gt,At,O,Ja,ho,Mo,Ti,Fi):fn(ar.kind,ui,Gt,At,O,Ja,ho,Mo,fe,Ti,!0):un(ar.kind,ui,Gt,At,O,Ja,ho,Mo,fe,Ti),atlasTexture:ia,atlasTextureIcon:qi,atlasInterpolation:yi,atlasInterpolationIcon:Gi,isSDF:Si,hasHalo:ys};if($t)for(var Ys=0,Ql=oi.segments.get();Ys<Ql.length;Ys+=1){var Rl=Ql[Ys];Vn.push({segments:new e.SegmentVector([Rl]),sortKey:Rl.sortKey,state:jo})}else Vn.push({segments:oi.segments,sortKey:0,state:jo})}}}$t&&Vn.sort(function(ic,dl){return ic.sortKey-dl.sortKey});for(var zu=0,_u=Vn;zu<_u.length;zu+=1){var fu=_u[zu],Qo=fu.state;if(St.activeTexture.set(Nt.TEXTURE0),Qo.atlasTexture.bind(Qo.atlasInterpolation,Nt.CLAMP_TO_EDGE),Qo.atlasTextureIcon&&(St.activeTexture.set(Nt.TEXTURE1),Qo.atlasTextureIcon&&Qo.atlasTextureIcon.bind(Qo.atlasInterpolationIcon,Nt.CLAMP_TO_EDGE)),Qo.isSDF){var Nu=Qo.uniformValues;Qo.hasHalo&&(Nu.u_is_halo=1,si(Qo.buffers,fu.segments,U,O,Qo.program,mn,nt,dt,Nu)),Nu.u_is_halo=0}si(Qo.buffers,fu.segments,U,O,Qo.program,mn,nt,dt,Qo.uniformValues)}}function si(O,N,U,X,fe,me,_e,Ae,Oe){var Xe=X.context;fe.draw(Xe,Xe.gl.TRIANGLES,me,_e,Ae,je.disabled,Oe,U.id,O.layoutVertexBuffer,O.indexBuffer,N,U.paint,X.transform.zoom,O.programConfigurations.get(U.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function Jr(O,N,U,X,fe,me,_e){var Ae,Oe,Xe,nt,dt,St=O.context.gl,Nt=U.paint.get("fill-pattern"),It=Nt&&Nt.constantOr(1),Lt=U.getCrossfadeParameters();_e?(Oe=It&&!U.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ae=St.LINES):(Oe=It?"fillPattern":"fill",Ae=St.TRIANGLES);for(var At=0,Zt=X;At<Zt.length;At+=1){var Gt=Zt[At],$t=N.getTile(Gt);if(!It||$t.patternsLoaded()){var mn=$t.getBucket(U);if(mn){var En=mn.programConfigurations.get(U.id),Vn=O.useProgram(Oe,En);It&&(O.context.activeTexture.set(St.TEXTURE0),$t.imageAtlasTexture.bind(St.LINEAR,St.CLAMP_TO_EDGE),En.updatePaintBuffers(Lt));var Nn=Nt.constantOr(null);if(Nn&&$t.imageAtlas){var pr=$t.imageAtlas,hr=pr.patternPositions[Nn.to.toString()],Er=pr.patternPositions[Nn.from.toString()];hr&&Er&&En.setConstantPatternPositions(hr,Er)}var br=O.translatePosMatrix(Gt.posMatrix,$t,U.paint.get("fill-translate"),U.paint.get("fill-translate-anchor"));if(_e){nt=mn.indexBuffer2,dt=mn.segments2;var oi=[St.drawingBufferWidth,St.drawingBufferHeight];Xe="fillOutlinePattern"===Oe&&It?co(br,O,Lt,$t,oi):_o(br,oi)}else nt=mn.indexBuffer,dt=mn.segments,Xe=It?Ui(br,O,Lt,$t):Ls(br);Vn.draw(O.context,Ae,fe,O.stencilModeForClipping(Gt),me,je.disabled,Xe,U.id,mn.layoutVertexBuffer,nt,dt,U.paint,O.transform.zoom,En)}}}}function Li(O,N,U,X,fe,me,_e){for(var Ae=O.context,Oe=Ae.gl,Xe=U.paint.get("fill-extrusion-pattern"),nt=Xe.constantOr(1),dt=U.getCrossfadeParameters(),St=U.paint.get("fill-extrusion-opacity"),Nt=0,It=X;Nt<It.length;Nt+=1){var Lt=It[Nt],At=N.getTile(Lt),Zt=At.getBucket(U);if(Zt){var Gt=Zt.programConfigurations.get(U.id),$t=O.useProgram(nt?"fillExtrusionPattern":"fillExtrusion",Gt);nt&&(O.context.activeTexture.set(Oe.TEXTURE0),At.imageAtlasTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),Gt.updatePaintBuffers(dt));var mn=Xe.constantOr(null);if(mn&&At.imageAtlas){var En=At.imageAtlas,Vn=En.patternPositions[mn.to.toString()],Nn=En.patternPositions[mn.from.toString()];Vn&&Nn&&Gt.setConstantPatternPositions(Vn,Nn)}var pr=O.translatePosMatrix(Lt.posMatrix,At,U.paint.get("fill-extrusion-translate"),U.paint.get("fill-extrusion-translate-anchor")),hr=U.paint.get("fill-extrusion-vertical-gradient"),Er=nt?uu(pr,O,hr,St,Lt,dt,At):Ro(pr,O,hr,St);$t.draw(Ae,Ae.gl.TRIANGLES,fe,me,_e,je.backCCW,Er,U.id,Zt.layoutVertexBuffer,Zt.indexBuffer,Zt.segments,U.paint,O.transform.zoom,Gt)}}}function Pi(O,N,U,X,fe,me){var _e=O.context,Ae=_e.gl,Oe=N.fbo;if(Oe){var Xe=O.useProgram("hillshade");_e.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_2D,Oe.colorAttachment.get());var nt=function(dt,St,Nt){var It=Nt.paint.get("hillshade-shadow-color"),Lt=Nt.paint.get("hillshade-highlight-color"),At=Nt.paint.get("hillshade-accent-color"),Zt=Nt.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Nt.paint.get("hillshade-illumination-anchor")&&(Zt-=dt.transform.angle);var Gt=!dt.options.moving;return{u_matrix:dt.transform.calculatePosMatrix(St.tileID.toUnwrapped(),Gt),u_image:0,u_latrange:Za(0,St.tileID),u_light:[Nt.paint.get("hillshade-exaggeration"),Zt],u_shadow:It,u_highlight:Lt,u_accent:At}}(O,N,U);Xe.draw(_e,Ae.TRIANGLES,X,fe,me,je.disabled,nt,U.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}}function Aa(O,N,U,X,fe,me,_e){var At,Zt,Gt,$t,mn,Ae=O.context,Oe=Ae.gl,Xe=N.dem;if(Xe&&Xe.data){var nt=Xe.dim,dt=Xe.stride,St=Xe.getPixels();if(Ae.activeTexture.set(Oe.TEXTURE1),Ae.pixelStoreUnpackPremultiplyAlpha.set(!1),N.demTexture=N.demTexture||O.getTileTexture(dt),N.demTexture){var Nt=N.demTexture;Nt.update(St,{premultiply:!1}),Nt.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE)}else N.demTexture=new e.Texture(Ae,St,Oe.RGBA,{premultiply:!1}),N.demTexture.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE);Ae.activeTexture.set(Oe.TEXTURE0);var It=N.fbo;if(!It){var Lt=new e.Texture(Ae,{width:nt,height:nt,data:null},Oe.RGBA);Lt.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),(It=N.fbo=Ae.createFramebuffer(nt,nt,!0)).colorAttachment.set(Lt.texture)}Ae.bindFramebuffer.set(It.framebuffer),Ae.viewport.set([0,0,nt,nt]),O.useProgram("hillshadePrepare").draw(Ae,Oe.TRIANGLES,fe,me,_e,je.disabled,(At=N.tileID,Gt=X,$t=(Zt=Xe).stride,mn=e.create(),e.ortho(mn,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(mn,mn,[0,-e.EXTENT,0]),{u_matrix:mn,u_image:1,u_dimension:[$t,$t],u_zoom:At.overscaledZ,u_maxzoom:Gt,u_unpack:Zt.getUnpackVector()}),U.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments),N.needsHillshadePrepare=!1}}function ra(O,N,U,X,fe){var me=X.paint.get("raster-fade-duration");if(me>0){var _e=e.browser.now(),Ae=(_e-O.timeAdded)/me,Oe=N?(_e-N.timeAdded)/me:-1,Xe=U.getSource(),nt=fe.coveringZoomLevel({tileSize:Xe.tileSize,roundZoom:Xe.roundZoom}),dt=!N||Math.abs(N.tileID.overscaledZ-nt)>Math.abs(O.tileID.overscaledZ-nt),St=dt&&O.refreshedUponExpiration?1:e.clamp(dt?Ae:1-Oe,0,1);return O.refreshedUponExpiration&&Ae>=1&&(O.refreshedUponExpiration=!1),N?{opacity:1,mix:1-St}:{opacity:St,mix:0}}return{opacity:1,mix:0}}var aa=new e.Color(1,0,0,1),xo=new e.Color(0,1,0,1),io=new e.Color(0,0,1,1),ja=new e.Color(1,0,1,1),Ta=new e.Color(0,1,1,1);function Go(O,N,U,X){ss(O,0,N+U/2,O.transform.width,U,X)}function os(O,N,U,X){ss(O,N-U/2,0,U,O.transform.height,X)}function ss(O,N,U,X,fe,me){var _e=O.context,Ae=_e.gl;Ae.enable(Ae.SCISSOR_TEST),Ae.scissor(N*e.browser.devicePixelRatio,U*e.browser.devicePixelRatio,X*e.browser.devicePixelRatio,fe*e.browser.devicePixelRatio),_e.clear({color:me}),Ae.disable(Ae.SCISSOR_TEST)}function gs(O,N,U){var X=O.context,fe=X.gl,me=U.posMatrix,_e=O.useProgram("debug"),Ae=rt.disabled,Oe=Le.disabled,Xe=O.colorModeForRenderPass();X.activeTexture.set(fe.TEXTURE0),O.emptyTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),_e.draw(X,fe.LINE_STRIP,Ae,Oe,Xe,je.disabled,Jo(me,e.Color.red),"$debug",O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments);var nt=N.getTileByID(U.key).latestRawTileData,St=Math.floor((nt&&nt.byteLength||0)/1024),Nt=N.getTile(U).tileSize,It=512/Math.min(Nt,512)*(U.overscaledZ/O.transform.zoom)*.5,Lt=U.canonical.toString();U.overscaledZ!==U.canonical.z&&(Lt+=" => "+U.overscaledZ),function(At,Zt){At.initDebugOverlayCanvas();var Gt=At.debugOverlayCanvas,$t=At.context.gl,mn=At.debugOverlayCanvas.getContext("2d");mn.clearRect(0,0,Gt.width,Gt.height),mn.shadowColor="white",mn.shadowBlur=2,mn.lineWidth=1.5,mn.strokeStyle="white",mn.textBaseline="top",mn.font="bold 36px Open Sans, sans-serif",mn.fillText(Zt,5,5),mn.strokeText(Zt,5,5),At.debugOverlayTexture.update(Gt),At.debugOverlayTexture.bind($t.LINEAR,$t.CLAMP_TO_EDGE)}(O,Lt+" "+St+"kb"),_e.draw(X,fe.TRIANGLES,Ae,Oe,ze.alphaBlended,je.disabled,Jo(me,e.Color.transparent,It),"$debug",O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments)}var ms={symbol:function(O,N,U,X,fe){if("translucent"===O.renderPass){var me=Le.disabled,_e=O.colorModeForRenderPass();U.layout.get("text-variable-anchor")&&function(Ae,Oe,Xe,nt,dt,St,Nt){for(var It=Oe.transform,Lt="map"===dt,At="map"===St,Zt=0,Gt=Ae;Zt<Gt.length;Zt+=1){var $t=Gt[Zt],mn=nt.getTile($t),En=mn.getBucket(Xe);if(En&&En.text&&En.text.segments.get().length){var Nn=e.evaluateSizeForZoom(En.textSizeData,It.zoom),pr=jn(mn,1,Oe.transform.zoom),hr=Dn($t.posMatrix,At,Lt,Oe.transform,pr),Er="none"!==Xe.layout.get("icon-text-fit")&&En.hasIconData();if(Nn){var br=Math.pow(2,It.zoom-mn.tileID.overscaledZ);Dr(En,Lt,At,Nt,e.symbolSize,It,hr,$t.posMatrix,br,Nn,Er)}}}}(X,O,U,N,U.layout.get("text-rotation-alignment"),U.layout.get("text-pitch-alignment"),fe),0!==U.paint.get("icon-opacity").constantOr(1)&&Kr(O,N,U,X,!1,U.paint.get("icon-translate"),U.paint.get("icon-translate-anchor"),U.layout.get("icon-rotation-alignment"),U.layout.get("icon-pitch-alignment"),U.layout.get("icon-keep-upright"),me,_e),0!==U.paint.get("text-opacity").constantOr(1)&&Kr(O,N,U,X,!0,U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),U.layout.get("text-rotation-alignment"),U.layout.get("text-pitch-alignment"),U.layout.get("text-keep-upright"),me,_e),N.map.showCollisionBoxes&&(Pn(O,N,U,X,U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),!0),Pn(O,N,U,X,U.paint.get("icon-translate"),U.paint.get("icon-translate-anchor"),!1))}},circle:function(O,N,U,X){if("translucent"===O.renderPass){var fe=U.paint.get("circle-opacity"),me=U.paint.get("circle-stroke-width"),_e=U.paint.get("circle-stroke-opacity"),Ae=void 0!==U.layout.get("circle-sort-key").constantOr(1);if(0!==fe.constantOr(1)||0!==me.constantOr(1)&&0!==_e.constantOr(1)){for(var Oe=O.context,Xe=Oe.gl,nt=O.depthModeForSublayer(0,rt.ReadOnly),dt=Le.disabled,St=O.colorModeForRenderPass(),Nt=[],It=0;It<X.length;It++){var Lt=X[It],At=N.getTile(Lt),Zt=At.getBucket(U);if(Zt){var Gt=Zt.programConfigurations.get(U.id),$t={programConfiguration:Gt,program:O.useProgram("circle",Gt),layoutVertexBuffer:Zt.layoutVertexBuffer,indexBuffer:Zt.indexBuffer,uniformValues:$o(O,Lt,At,U)};if(Ae)for(var mn=0,En=Zt.segments.get();mn<En.length;mn+=1){var Vn=En[mn];Nt.push({segments:new e.SegmentVector([Vn]),sortKey:Vn.sortKey,state:$t})}else Nt.push({segments:Zt.segments,sortKey:0,state:$t})}}Ae&&Nt.sort(function(gi,ui){return gi.sortKey-ui.sortKey});for(var Nn=0,pr=Nt;Nn<pr.length;Nn+=1){var hr=pr[Nn],Er=hr.state;Er.program.draw(Oe,Xe.TRIANGLES,nt,dt,St,je.disabled,Er.uniformValues,U.id,Er.layoutVertexBuffer,Er.indexBuffer,hr.segments,U.paint,O.transform.zoom,Er.programConfiguration)}}}},heatmap:function(O,N,U,X){if(0!==U.paint.get("heatmap-opacity"))if("offscreen"===O.renderPass){var fe=O.context,me=fe.gl,_e=Le.disabled,Ae=new ze([me.ONE,me.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Lt,At,Zt){var Gt=Lt.gl;Lt.activeTexture.set(Gt.TEXTURE1),Lt.viewport.set([0,0,At.width/4,At.height/4]);var En,Vn,Nn,pr,hr,$t=Zt.heatmapFbo;if($t)Gt.bindTexture(Gt.TEXTURE_2D,$t.colorAttachment.get()),Lt.bindFramebuffer.set($t.framebuffer);else{var mn=Gt.createTexture();Gt.bindTexture(Gt.TEXTURE_2D,mn),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_WRAP_S,Gt.CLAMP_TO_EDGE),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_WRAP_T,Gt.CLAMP_TO_EDGE),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_MIN_FILTER,Gt.LINEAR),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_MAG_FILTER,Gt.LINEAR),Nn=mn,pr=$t=Zt.heatmapFbo=Lt.createFramebuffer(At.width/4,At.height/4,!1),(hr=(En=Lt).gl).texImage2D(hr.TEXTURE_2D,0,hr.RGBA,(Vn=At).width/4,Vn.height/4,0,hr.RGBA,En.extRenderToTextureHalfFloat?En.extTextureHalfFloat.HALF_FLOAT_OES:hr.UNSIGNED_BYTE,null),pr.colorAttachment.set(Nn)}})(fe,O,U),fe.clear({color:e.Color.transparent});for(var Oe=0;Oe<X.length;Oe++){var Xe=X[Oe];if(!N.hasRenderableParent(Xe)){var nt=N.getTile(Xe),dt=nt.getBucket(U);if(dt){var St=dt.programConfigurations.get(U.id);O.useProgram("heatmap",St).draw(fe,me.TRIANGLES,rt.disabled,_e,Ae,je.disabled,na(Xe.posMatrix,nt,O.transform.zoom,U.paint.get("heatmap-intensity")),U.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,U.paint,O.transform.zoom,St)}}}fe.viewport.set([0,0,O.width,O.height])}else"translucent"===O.renderPass&&(O.context.setColorMode(O.colorModeForRenderPass()),function(Lt,At){var Zt=Lt.context,Gt=Zt.gl,$t=At.heatmapFbo;if($t){Zt.activeTexture.set(Gt.TEXTURE0),Gt.bindTexture(Gt.TEXTURE_2D,$t.colorAttachment.get()),Zt.activeTexture.set(Gt.TEXTURE1);var mn=At.colorRampTexture;mn||(mn=At.colorRampTexture=new e.Texture(Zt,At.colorRamp,Gt.RGBA)),mn.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE),Lt.useProgram("heatmapTexture").draw(Zt,Gt.TRIANGLES,rt.disabled,Le.disabled,Lt.colorModeForRenderPass(),je.disabled,function(En,Vn,Nn,pr){var hr=e.create();e.ortho(hr,0,En.width,En.height,0,0,1);var Er=En.context.gl;return{u_matrix:hr,u_world:[Er.drawingBufferWidth,Er.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Vn.paint.get("heatmap-opacity")}}(Lt,At),At.id,Lt.viewportBuffer,Lt.quadTriangleIndexBuffer,Lt.viewportSegments,At.paint,Lt.transform.zoom)}}(O,U))},line:function(O,N,U,X){if("translucent"===O.renderPass){var fe=U.paint.get("line-opacity"),me=U.paint.get("line-width");if(0!==fe.constantOr(1)&&0!==me.constantOr(1)){var _e=O.depthModeForSublayer(0,rt.ReadOnly),Ae=O.colorModeForRenderPass(),Oe=U.paint.get("line-dasharray"),Xe=U.paint.get("line-pattern"),nt=Xe.constantOr(1),dt=U.paint.get("line-gradient"),St=U.getCrossfadeParameters(),Nt=nt?"linePattern":Oe?"lineSDF":dt?"lineGradient":"line",It=O.context,Lt=It.gl,At=!0;if(dt){It.activeTexture.set(Lt.TEXTURE0);var Zt=U.gradientTexture;if(!U.gradient)return;Zt||(Zt=U.gradientTexture=new e.Texture(It,U.gradient,Lt.RGBA)),Zt.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)}for(var Gt=0,$t=X;Gt<$t.length;Gt+=1){var mn=$t[Gt],En=N.getTile(mn);if(!nt||En.patternsLoaded()){var Vn=En.getBucket(U);if(Vn){var Nn=Vn.programConfigurations.get(U.id),pr=O.context.program.get(),hr=O.useProgram(Nt,Nn),Er=At||hr.program!==pr,br=Xe.constantOr(null);if(br&&En.imageAtlas){var oi=En.imageAtlas,ci=oi.patternPositions[br.to.toString()],Si=oi.patternPositions[br.from.toString()];ci&&Si&&Nn.setConstantPatternPositions(ci,Si)}var ar=nt?We(O,En,U,St):Oe?Ke(O,En,U,Oe,St):dt?ya(O,En,U):yo(O,En,U);nt?(It.activeTexture.set(Lt.TEXTURE0),En.imageAtlasTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE),Nn.updatePaintBuffers(St)):Oe&&(Er||O.lineAtlas.dirty)&&(It.activeTexture.set(Lt.TEXTURE0),O.lineAtlas.bind(It)),hr.draw(It,Lt.TRIANGLES,_e,O.stencilModeForClipping(mn),Ae,je.disabled,ar,U.id,Vn.layoutVertexBuffer,Vn.indexBuffer,Vn.segments,U.paint,O.transform.zoom,Nn),At=!1}}}}}},fill:function(O,N,U,X){var fe=U.paint.get("fill-color"),me=U.paint.get("fill-opacity");if(0!==me.constantOr(1)){var _e=O.colorModeForRenderPass(),Ae=U.paint.get("fill-pattern"),Oe=O.opaquePassEnabledForLayer()&&!Ae.constantOr(1)&&1===fe.constantOr(e.Color.transparent).a&&1===me.constantOr(0)?"opaque":"translucent";if(O.renderPass===Oe){var Xe=O.depthModeForSublayer(1,"opaque"===O.renderPass?rt.ReadWrite:rt.ReadOnly);Jr(O,N,U,X,Xe,_e,!1)}if("translucent"===O.renderPass&&U.paint.get("fill-antialias")){var nt=O.depthModeForSublayer(U.getPaintProperty("fill-outline-color")?2:0,rt.ReadOnly);Jr(O,N,U,X,nt,_e,!0)}}},"fill-extrusion":function(O,N,U,X){var fe=U.paint.get("fill-extrusion-opacity");if(0!==fe&&"translucent"===O.renderPass){var me=new rt(O.context.gl.LEQUAL,rt.ReadWrite,O.depthRangeFor3D);if(1!==fe||U.paint.get("fill-extrusion-pattern").constantOr(1))Li(O,N,U,X,me,Le.disabled,ze.disabled),Li(O,N,U,X,me,O.stencilModeFor3D(),O.colorModeForRenderPass());else{var _e=O.colorModeForRenderPass();Li(O,N,U,X,me,Le.disabled,_e)}}},hillshade:function(O,N,U,X){if("offscreen"===O.renderPass||"translucent"===O.renderPass){for(var fe=O.context,me=N.getSource().maxzoom,_e=O.depthModeForSublayer(0,rt.ReadOnly),Ae=O.colorModeForRenderPass(),Oe="translucent"===O.renderPass?O.stencilConfigForOverlap(X):[{},X],Xe=Oe[0],nt=0,dt=Oe[1];nt<dt.length;nt+=1){var St=dt[nt],Nt=N.getTile(St);Nt.needsHillshadePrepare&&"offscreen"===O.renderPass?Aa(O,Nt,U,me,_e,Le.disabled,Ae):"translucent"===O.renderPass&&Pi(O,Nt,U,_e,Xe[St.overscaledZ],Ae)}fe.viewport.set([0,0,O.width,O.height])}},raster:function(O,N,U,X){if("translucent"===O.renderPass&&0!==U.paint.get("raster-opacity")&&X.length)for(var fe=O.context,me=fe.gl,_e=N.getSource(),Ae=O.useProgram("raster"),Oe=O.colorModeForRenderPass(),Xe=_e instanceof $?[{},X]:O.stencilConfigForOverlap(X),nt=Xe[0],dt=Xe[1],St=dt[dt.length-1].overscaledZ,Nt=!O.options.moving,It=0,Lt=dt;It<Lt.length;It+=1){var At=Lt[It],Zt=O.depthModeForSublayer(At.overscaledZ-St,1===U.paint.get("raster-opacity")?rt.ReadWrite:rt.ReadOnly,me.LESS),Gt=N.getTile(At),$t=O.transform.calculatePosMatrix(At.toUnwrapped(),Nt);Gt.registerFadeDuration(U.paint.get("raster-fade-duration"));var mn=N.findLoadedParent(At,0),En=ra(Gt,mn,N,U,O.transform),Vn=void 0,Nn=void 0,pr="nearest"===U.paint.get("raster-resampling")?me.NEAREST:me.LINEAR;fe.activeTexture.set(me.TEXTURE0),Gt.texture.bind(pr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),fe.activeTexture.set(me.TEXTURE1),mn?(mn.texture.bind(pr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),Vn=Math.pow(2,mn.tileID.overscaledZ-Gt.tileID.overscaledZ),Nn=[Gt.tileID.canonical.x*Vn%1,Gt.tileID.canonical.y*Vn%1]):Gt.texture.bind(pr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST);var hr=kt($t,Nn||[0,0],Vn||1,En,U);_e instanceof $?Ae.draw(fe,me.TRIANGLES,Zt,Le.disabled,Oe,je.disabled,hr,U.id,_e.boundsBuffer,O.quadTriangleIndexBuffer,_e.boundsSegments):Ae.draw(fe,me.TRIANGLES,Zt,nt[At.overscaledZ],Oe,je.disabled,hr,U.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}},background:function(O,N,U){var X=U.paint.get("background-color"),fe=U.paint.get("background-opacity");if(0!==fe){var me=O.context,_e=me.gl,Ae=O.transform,Oe=Ae.tileSize,Xe=U.paint.get("background-pattern");if(!O.isPatternMissing(Xe)){var nt=!Xe&&1===X.a&&1===fe&&O.opaquePassEnabledForLayer()?"opaque":"translucent";if(O.renderPass===nt){var dt=Le.disabled,St=O.depthModeForSublayer(0,"opaque"===nt?rt.ReadWrite:rt.ReadOnly),Nt=O.colorModeForRenderPass(),It=O.useProgram(Xe?"backgroundPattern":"background"),Lt=Ae.coveringTiles({tileSize:Oe});Xe&&(me.activeTexture.set(_e.TEXTURE0),O.imageManager.bind(O.context));for(var At=U.getCrossfadeParameters(),Zt=0,Gt=Lt;Zt<Gt.length;Zt+=1){var $t=Gt[Zt],mn=O.transform.calculatePosMatrix($t.toUnwrapped()),En=Xe?An(mn,fe,O,Xe,{tileID:$t,tileSize:Oe},At):pn(mn,fe,X);It.draw(me,_e.TRIANGLES,St,dt,Nt,je.disabled,En,U.id,O.tileExtentBuffer,O.quadTriangleIndexBuffer,O.tileExtentSegments)}}}}},debug:function(O,N,U){for(var X=0;X<U.length;X++)gs(O,N,U[X])},custom:function(O,N,U){var X=O.context,fe=U.implementation;if("offscreen"===O.renderPass){var me=fe.prerender;me&&(O.setCustomLayerDefaults(),X.setColorMode(O.colorModeForRenderPass()),me.call(fe,X.gl,O.transform.customLayerMatrix()),X.setDirty(),O.setBaseState())}else if("translucent"===O.renderPass){O.setCustomLayerDefaults(),X.setColorMode(O.colorModeForRenderPass()),X.setStencilMode(Le.disabled);var _e="3d"===fe.renderingMode?new rt(O.context.gl.LEQUAL,rt.ReadWrite,O.depthRangeFor3D):O.depthModeForSublayer(0,rt.ReadOnly);X.setDepthMode(_e),fe.render(X.gl,O.transform.customLayerMatrix()),X.setDirty(),O.setBaseState(),X.bindFramebuffer.set(null)}}},Ma=function(O,N){this.context=new Ne(O),this.transform=N,this._tileTextures={},this.setup(),this.numSublayers=st.maxUnderzooming+st.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new rr,this.gpuTimers={}};Ma.prototype.resize=function(O,N){if(this.width=O*e.browser.devicePixelRatio,this.height=N*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var U=0,X=this.style._order;U<X.length;U+=1)this.style._layers[X[U]].resize()},Ma.prototype.setup=function(){var O=this.context,N=new e.StructArrayLayout2i4;N.emplaceBack(0,0),N.emplaceBack(e.EXTENT,0),N.emplaceBack(0,e.EXTENT),N.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=O.createVertexBuffer(N,lr.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var U=new e.StructArrayLayout2i4;U.emplaceBack(0,0),U.emplaceBack(e.EXTENT,0),U.emplaceBack(0,e.EXTENT),U.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=O.createVertexBuffer(U,lr.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var X=new e.StructArrayLayout4i8;X.emplaceBack(0,0,0,0),X.emplaceBack(e.EXTENT,0,e.EXTENT,0),X.emplaceBack(0,e.EXTENT,0,e.EXTENT),X.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=O.createVertexBuffer(X,Q.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var fe=new e.StructArrayLayout2i4;fe.emplaceBack(0,0),fe.emplaceBack(1,0),fe.emplaceBack(0,1),fe.emplaceBack(1,1),this.viewportBuffer=O.createVertexBuffer(fe,lr.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var me=new e.StructArrayLayout1ui2;me.emplaceBack(0),me.emplaceBack(1),me.emplaceBack(3),me.emplaceBack(2),me.emplaceBack(0),this.tileBorderIndexBuffer=O.createIndexBuffer(me);var _e=new e.StructArrayLayout3ui6;_e.emplaceBack(0,1,2),_e.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=O.createIndexBuffer(_e),this.emptyTexture=new e.Texture(O,{width:1,height:1,data:new Uint8Array([0,0,0,0])},O.gl.RGBA);var Ae=this.context.gl;this.stencilClearMode=new Le({func:Ae.ALWAYS,mask:0},0,255,Ae.ZERO,Ae.ZERO,Ae.ZERO)},Ma.prototype.clearStencil=function(){var O=this.context,N=O.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var U=e.create();e.ortho(U,0,this.width,this.height,0,0,1),e.scale(U,U,[N.drawingBufferWidth,N.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(O,N.TRIANGLES,rt.disabled,this.stencilClearMode,ze.disabled,je.disabled,fi(U),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ma.prototype._renderTileClippingMasks=function(O,N){if(this.currentStencilSource!==O.source&&O.isTileClipped()&&N&&N.length){this.currentStencilSource=O.source;var U=this.context,X=U.gl;this.nextStencilID+N.length>256&&this.clearStencil(),U.setColorMode(ze.disabled),U.setDepthMode(rt.disabled);var fe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var me=0,_e=N;me<_e.length;me+=1){var Ae=_e[me],Oe=this._tileClippingMaskIDs[Ae.key]=this.nextStencilID++;fe.draw(U,X.TRIANGLES,rt.disabled,new Le({func:X.ALWAYS,mask:0},Oe,255,X.KEEP,X.KEEP,X.REPLACE),ze.disabled,je.disabled,fi(Ae.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ma.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var O=this.nextStencilID++,N=this.context.gl;return new Le({func:N.NOTEQUAL,mask:255},O,255,N.KEEP,N.KEEP,N.REPLACE)},Ma.prototype.stencilModeForClipping=function(O){var N=this.context.gl;return new Le({func:N.EQUAL,mask:255},this._tileClippingMaskIDs[O.key],0,N.KEEP,N.KEEP,N.REPLACE)},Ma.prototype.stencilConfigForOverlap=function(O){var N,U=this.context.gl,X=O.sort(function(Oe,Xe){return Xe.overscaledZ-Oe.overscaledZ}),fe=X[X.length-1].overscaledZ,me=X[0].overscaledZ-fe+1;if(me>1){this.currentStencilSource=void 0,this.nextStencilID+me>256&&this.clearStencil();for(var _e={},Ae=0;Ae<me;Ae++)_e[Ae+fe]=new Le({func:U.GEQUAL,mask:255},Ae+this.nextStencilID,255,U.KEEP,U.KEEP,U.REPLACE);return this.nextStencilID+=me,[_e,X]}return[(N={},N[fe]=Le.disabled,N),X]},Ma.prototype.colorModeForRenderPass=function(){var O=this.context.gl;return this._showOverdrawInspector?new ze([O.CONSTANT_COLOR,O.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?ze.unblended:ze.alphaBlended},Ma.prototype.depthModeForSublayer=function(O,N,U){if(!this.opaquePassEnabledForLayer())return rt.disabled;var X=1-((1+this.currentLayer)*this.numSublayers+O)*this.depthEpsilon;return new rt(U||this.context.gl.LEQUAL,N,[X,X])},Ma.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ma.prototype.render=function(O,N){var U=this;this.style=O,this.options=N,this.lineAtlas=O.lineAtlas,this.imageManager=O.imageManager,this.glyphManager=O.glyphManager,this.symbolFadeChange=O.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var X=this.style._order,fe=this.style.sourceCaches;for(var me in fe){var _e=fe[me];_e.used&&_e.prepare(this.context)}var Ae,Oe,Xe={},nt={},dt={};for(var St in fe){var Nt=fe[St];Xe[St]=Nt.getVisibleCoordinates(),nt[St]=Xe[St].slice().reverse(),dt[St]=Nt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var It=0;It<X.length;It++)if(this.style._layers[X[It]].is3D()){this.opaquePassCutoff=It;break}this.renderPass="offscreen";for(var At=0,Zt=X;At<Zt.length;At+=1){var $t=this.style._layers[Zt[At]];if($t.hasOffscreenPass()&&!$t.isHidden(this.transform.zoom)){var mn=nt[$t.source];("custom"===$t.type||mn.length)&&this.renderLayer(this,fe[$t.source],$t,mn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:N.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=N.showOverdrawInspector,this.depthRangeFor3D=[0,1-(O._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=X.length-1;this.currentLayer>=0;this.currentLayer--){var En=this.style._layers[X[this.currentLayer]],Vn=fe[En.source],Nn=Xe[En.source];this._renderTileClippingMasks(En,Nn),this.renderLayer(this,Vn,En,Nn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<X.length;this.currentLayer++){var pr=this.style._layers[X[this.currentLayer]],hr=fe[pr.source],Er=("symbol"===pr.type?dt:nt)[pr.source];this._renderTileClippingMasks(pr,Xe[pr.source]),this.renderLayer(this,hr,pr,Er)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(br){br.source&&!br.isHidden(U.transform.zoom)&&(br.source!==(Oe&&Oe.id)&&(Oe=U.style.sourceCaches[br.source]),(!Ae||Ae.getSource().maxzoom<Oe.getSource().maxzoom)&&(Ae=Oe))}),Ae&&ms.debug(this,Ae,Ae.getVisibleCoordinates())),this.options.showPadding&&function(O){var N=O.transform.padding;Go(O,O.transform.height-(N.top||0),3,aa),Go(O,N.bottom||0,3,xo),os(O,N.left||0,3,io),os(O,O.transform.width-(N.right||0),3,ja);var X,fe,me,_e,U=O.transform.centerPoint;ss(X=O,(fe=U.x)-1,(me=O.transform.height-U.y)-10,2,20,_e=Ta),ss(X,fe-10,me-1,20,2,_e)}(this),this.context.setDefault()},Ma.prototype.renderLayer=function(O,N,U,X){U.isHidden(this.transform.zoom)||("background"===U.type||"custom"===U.type||X.length)&&(this.id=U.id,this.gpuTimingStart(U),ms[U.type](O,N,U,X,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ma.prototype.gpuTimingStart=function(O){if(this.options.gpuTiming){var N=this.context.extTimerQuery,U=this.gpuTimers[O.id];U||(U=this.gpuTimers[O.id]={calls:0,cpuTime:0,query:N.createQueryEXT()}),U.calls++,N.beginQueryEXT(N.TIME_ELAPSED_EXT,U.query)}},Ma.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var O=this.context.extTimerQuery;O.endQueryEXT(O.TIME_ELAPSED_EXT)}},Ma.prototype.collectGpuTimers=function(){var O=this.gpuTimers;return this.gpuTimers={},O},Ma.prototype.queryGpuTimers=function(O){var N={};for(var U in O){var X=O[U],fe=this.context.extTimerQuery,me=fe.getQueryObjectEXT(X.query,fe.QUERY_RESULT_EXT)/1e6;fe.deleteQueryEXT(X.query),N[U]=me}return N},Ma.prototype.translatePosMatrix=function(O,N,U,X,fe){if(!U[0]&&!U[1])return O;var me=fe?"map"===X?this.transform.angle:0:"viewport"===X?-this.transform.angle:0;if(me){var _e=Math.sin(me),Ae=Math.cos(me);U=[U[0]*Ae-U[1]*_e,U[0]*_e+U[1]*Ae]}var Oe=[fe?U[0]:jn(N,U[0],this.transform.zoom),fe?U[1]:jn(N,U[1],this.transform.zoom),0],Xe=new Float32Array(16);return e.translate(Xe,O,Oe),Xe},Ma.prototype.saveTileTexture=function(O){var N=this._tileTextures[O.size[0]];N?N.push(O):this._tileTextures[O.size[0]]=[O]},Ma.prototype.getTileTexture=function(O){var N=this._tileTextures[O];return N&&N.length>0?N.pop():null},Ma.prototype.isPatternMissing=function(O){if(!O)return!1;if(!O.from||!O.to)return!0;var N=this.imageManager.getPattern(O.from.toString()),U=this.imageManager.getPattern(O.to.toString());return!N||!U},Ma.prototype.useProgram=function(O,N){this.cache=this.cache||{};var U=""+O+(N?N.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[U]||(this.cache[U]=new Xl(this.context,Vl[O],N,Ln[O],this._showOverdrawInspector)),this.cache[U]},Ma.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ma.prototype.setBaseState=function(){var O=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(O.FUNC_ADD)},Ma.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ma.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var wt=function(O,N){this.points=O,this.planes=N};wt.fromInvProjectionMatrix=function(O,N,U){var X=Math.pow(2,U),fe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(_e){return e.transformMat4([],_e,O)}).map(function(_e){return e.scale$1([],_e,1/_e[3]/N*X)}),me=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(_e){var Ae=e.sub([],fe[_e[0]],fe[_e[1]]),Oe=e.sub([],fe[_e[2]],fe[_e[1]]),Xe=e.normalize([],e.cross([],Ae,Oe)),nt=-e.dot(Xe,fe[_e[1]]);return Xe.concat(nt)});return new wt(fe,me)};var Yt=function(O,N){this.min=O,this.max=N,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Yt.prototype.quadrant=function(O){for(var N=[O%2==0,O<2],U=e.clone$2(this.min),X=e.clone$2(this.max),fe=0;fe<N.length;fe++)U[fe]=N[fe]?this.min[fe]:this.center[fe],X[fe]=N[fe]?this.center[fe]:this.max[fe];return X[2]=this.max[2],new Yt(U,X)},Yt.prototype.distanceX=function(O){return Math.max(Math.min(this.max[0],O[0]),this.min[0])-O[0]},Yt.prototype.distanceY=function(O){return Math.max(Math.min(this.max[1],O[1]),this.min[1])-O[1]},Yt.prototype.intersects=function(O){for(var N=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],U=!0,X=0;X<O.planes.length;X++){for(var fe=O.planes[X],me=0,_e=0;_e<N.length;_e++)me+=e.dot$1(fe,N[_e])>=0;if(0===me)return 0;me!==N.length&&(U=!1)}if(U)return 2;for(var Ae=0;Ae<3;Ae++){for(var Oe=Number.MAX_VALUE,Xe=-Number.MAX_VALUE,nt=0;nt<O.points.length;nt++){var dt=O.points[nt][Ae]-this.min[Ae];Oe=Math.min(Oe,dt),Xe=Math.max(Xe,dt)}if(Xe<0||Oe>this.max[Ae]-this.min[Ae])return 0}return 1};var yn=function(O,N,U,X){if(void 0===O&&(O=0),void 0===N&&(N=0),void 0===U&&(U=0),void 0===X&&(X=0),isNaN(O)||O<0||isNaN(N)||N<0||isNaN(U)||U<0||isNaN(X)||X<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=O,this.bottom=N,this.left=U,this.right=X};yn.prototype.interpolate=function(O,N,U){return null!=N.top&&null!=O.top&&(this.top=e.number(O.top,N.top,U)),null!=N.bottom&&null!=O.bottom&&(this.bottom=e.number(O.bottom,N.bottom,U)),null!=N.left&&null!=O.left&&(this.left=e.number(O.left,N.left,U)),null!=N.right&&null!=O.right&&(this.right=e.number(O.right,N.right,U)),this},yn.prototype.getCenter=function(O,N){var U=e.clamp((this.left+O-this.right)/2,0,O),X=e.clamp((this.top+N-this.bottom)/2,0,N);return new e.Point(U,X)},yn.prototype.equals=function(O){return this.top===O.top&&this.bottom===O.bottom&&this.left===O.left&&this.right===O.right},yn.prototype.clone=function(){return new yn(this.top,this.bottom,this.left,this.right)},yn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var rn=function(O,N,U,X,fe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===fe||fe,this._minZoom=O||0,this._maxZoom=N||22,this._minPitch=null==U?0:U,this._maxPitch=null==X?60:X,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new yn,this._posMatrixCache={},this._alignedPosMatrixCache={}},xn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};rn.prototype.clone=function(){var O=new rn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return O.tileSize=this.tileSize,O.latRange=this.latRange,O.width=this.width,O.height=this.height,O._center=this._center,O.zoom=this.zoom,O.angle=this.angle,O._fov=this._fov,O._pitch=this._pitch,O._unmodified=this._unmodified,O._edgeInsets=this._edgeInsets.clone(),O._calcMatrices(),O},xn.minZoom.get=function(){return this._minZoom},xn.minZoom.set=function(O){this._minZoom!==O&&(this._minZoom=O,this.zoom=Math.max(this.zoom,O))},xn.maxZoom.get=function(){return this._maxZoom},xn.maxZoom.set=function(O){this._maxZoom!==O&&(this._maxZoom=O,this.zoom=Math.min(this.zoom,O))},xn.minPitch.get=function(){return this._minPitch},xn.minPitch.set=function(O){this._minPitch!==O&&(this._minPitch=O,this.pitch=Math.max(this.pitch,O))},xn.maxPitch.get=function(){return this._maxPitch},xn.maxPitch.set=function(O){this._maxPitch!==O&&(this._maxPitch=O,this.pitch=Math.min(this.pitch,O))},xn.renderWorldCopies.get=function(){return this._renderWorldCopies},xn.renderWorldCopies.set=function(O){void 0===O?O=!0:null===O&&(O=!1),this._renderWorldCopies=O},xn.worldSize.get=function(){return this.tileSize*this.scale},xn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},xn.size.get=function(){return new e.Point(this.width,this.height)},xn.bearing.get=function(){return-this.angle/Math.PI*180},xn.bearing.set=function(O){var N=-e.wrap(O,-180,180)*Math.PI/180;this.angle!==N&&(this._unmodified=!1,this.angle=N,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},xn.pitch.get=function(){return this._pitch/Math.PI*180},xn.pitch.set=function(O){var N=e.clamp(O,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==N&&(this._unmodified=!1,this._pitch=N,this._calcMatrices())},xn.fov.get=function(){return this._fov/Math.PI*180},xn.fov.set=function(O){O=Math.max(.01,Math.min(60,O)),this._fov!==O&&(this._unmodified=!1,this._fov=O/180*Math.PI,this._calcMatrices())},xn.zoom.get=function(){return this._zoom},xn.zoom.set=function(O){var N=Math.min(Math.max(O,this.minZoom),this.maxZoom);this._zoom!==N&&(this._unmodified=!1,this._zoom=N,this.scale=this.zoomScale(N),this.tileZoom=Math.floor(N),this.zoomFraction=N-this.tileZoom,this._constrain(),this._calcMatrices())},xn.center.get=function(){return this._center},xn.center.set=function(O){O.lat===this._center.lat&&O.lng===this._center.lng||(this._unmodified=!1,this._center=O,this._constrain(),this._calcMatrices())},xn.padding.get=function(){return this._edgeInsets.toJSON()},xn.padding.set=function(O){this._edgeInsets.equals(O)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,O,1),this._calcMatrices())},xn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},rn.prototype.isPaddingEqual=function(O){return this._edgeInsets.equals(O)},rn.prototype.interpolatePadding=function(O,N,U){this._unmodified=!1,this._edgeInsets.interpolate(O,N,U),this._constrain(),this._calcMatrices()},rn.prototype.coveringZoomLevel=function(O){var N=(O.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/O.tileSize));return Math.max(0,N)},rn.prototype.getVisibleUnwrappedCoordinates=function(O){var N=[new e.UnwrappedTileID(0,O)];if(this._renderWorldCopies)for(var U=this.pointCoordinate(new e.Point(0,0)),X=this.pointCoordinate(new e.Point(this.width,0)),fe=this.pointCoordinate(new e.Point(this.width,this.height)),me=this.pointCoordinate(new e.Point(0,this.height)),_e=Math.floor(Math.min(U.x,X.x,fe.x,me.x)),Ae=Math.floor(Math.max(U.x,X.x,fe.x,me.x)),Oe=_e-1;Oe<=Ae+1;Oe++)0!==Oe&&N.push(new e.UnwrappedTileID(Oe,O));return N},rn.prototype.coveringTiles=function(O){var N=this.coveringZoomLevel(O),U=N;if(void 0!==O.minzoom&&N<O.minzoom)return[];void 0!==O.maxzoom&&N>O.maxzoom&&(N=O.maxzoom);var X=e.MercatorCoordinate.fromLngLat(this.center),fe=Math.pow(2,N),me=[fe*X.x,fe*X.y,0],_e=wt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,N),Ae=O.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ae=N);var Oe=function(Er){return{aabb:new Yt([Er*fe,0,0],[(Er+1)*fe,fe,0]),zoom:0,x:0,y:0,wrap:Er,fullyVisible:!1}},Xe=[],nt=[],dt=N,St=O.reparseOverscaled?U:N;if(this._renderWorldCopies)for(var Nt=1;Nt<=3;Nt++)Xe.push(Oe(-Nt)),Xe.push(Oe(Nt));for(Xe.push(Oe(0));Xe.length>0;){var It=Xe.pop(),Lt=It.x,At=It.y,Zt=It.fullyVisible;if(!Zt){var Gt=It.aabb.intersects(_e);if(0===Gt)continue;Zt=2===Gt}var $t=It.aabb.distanceX(me),mn=It.aabb.distanceY(me),En=Math.max(Math.abs($t),Math.abs(mn));if(It.zoom===dt||En>3+(1<<dt-It.zoom)-2&&It.zoom>=Ae)nt.push({tileID:new e.OverscaledTileID(It.zoom===dt?St:It.zoom,It.wrap,It.zoom,Lt,At),distanceSq:e.sqrLen([me[0]-.5-Lt,me[1]-.5-At])});else for(var Nn=0;Nn<4;Nn++){var pr=(Lt<<1)+Nn%2,hr=(At<<1)+(Nn>>1);Xe.push({aabb:It.aabb.quadrant(Nn),zoom:It.zoom+1,x:pr,y:hr,wrap:It.wrap,fullyVisible:Zt})}}return nt.sort(function(Er,br){return Er.distanceSq-br.distanceSq}).map(function(Er){return Er.tileID})},rn.prototype.resize=function(O,N){this.width=O,this.height=N,this.pixelsToGLUnits=[2/O,-2/N],this._constrain(),this._calcMatrices()},xn.unmodified.get=function(){return this._unmodified},rn.prototype.zoomScale=function(O){return Math.pow(2,O)},rn.prototype.scaleZoom=function(O){return Math.log(O)/Math.LN2},rn.prototype.project=function(O){var N=e.clamp(O.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(O.lng)*this.worldSize,e.mercatorYfromLat(N)*this.worldSize)},rn.prototype.unproject=function(O){return new e.MercatorCoordinate(O.x/this.worldSize,O.y/this.worldSize).toLngLat()},xn.point.get=function(){return this.project(this.center)},rn.prototype.setLocationAtPoint=function(O,N){var U=this.pointCoordinate(N),X=this.pointCoordinate(this.centerPoint),fe=this.locationCoordinate(O),me=new e.MercatorCoordinate(fe.x-(U.x-X.x),fe.y-(U.y-X.y));this.center=this.coordinateLocation(me),this._renderWorldCopies&&(this.center=this.center.wrap())},rn.prototype.locationPoint=function(O){return this.coordinatePoint(this.locationCoordinate(O))},rn.prototype.pointLocation=function(O){return this.coordinateLocation(this.pointCoordinate(O))},rn.prototype.locationCoordinate=function(O){return e.MercatorCoordinate.fromLngLat(O)},rn.prototype.coordinateLocation=function(O){return O.toLngLat()},rn.prototype.pointCoordinate=function(O){var N=[O.x,O.y,0,1],U=[O.x,O.y,1,1];e.transformMat4(N,N,this.pixelMatrixInverse),e.transformMat4(U,U,this.pixelMatrixInverse);var X=N[3],fe=U[3],Ae=N[1]/X,Oe=U[1]/fe,Xe=N[2]/X,nt=U[2]/fe,dt=Xe===nt?0:(0-Xe)/(nt-Xe);return new e.MercatorCoordinate(e.number(N[0]/X,U[0]/fe,dt)/this.worldSize,e.number(Ae,Oe,dt)/this.worldSize)},rn.prototype.coordinatePoint=function(O){var N=[O.x*this.worldSize,O.y*this.worldSize,0,1];return e.transformMat4(N,N,this.pixelMatrix),new e.Point(N[0]/N[3],N[1]/N[3])},rn.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},rn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},rn.prototype.setMaxBounds=function(O){O?(this.lngRange=[O.getWest(),O.getEast()],this.latRange=[O.getSouth(),O.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},rn.prototype.calculatePosMatrix=function(O,N){void 0===N&&(N=!1);var U=O.key,X=N?this._alignedPosMatrixCache:this._posMatrixCache;if(X[U])return X[U];var fe=O.canonical,me=this.worldSize/this.zoomScale(fe.z),_e=fe.x+Math.pow(2,fe.z)*O.wrap,Ae=e.identity(new Float64Array(16));return e.translate(Ae,Ae,[_e*me,fe.y*me,0]),e.scale(Ae,Ae,[me/e.EXTENT,me/e.EXTENT,1]),e.multiply(Ae,N?this.alignedProjMatrix:this.projMatrix,Ae),X[U]=new Float32Array(Ae),X[U]},rn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},rn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var O,N,U,X,fe=-90,me=90,_e=-180,Ae=180,Oe=this.size,Xe=this._unmodified;if(this.latRange){var nt=this.latRange;fe=e.mercatorYfromLat(nt[1])*this.worldSize,O=(me=e.mercatorYfromLat(nt[0])*this.worldSize)-fe<Oe.y?Oe.y/(me-fe):0}if(this.lngRange){var dt=this.lngRange;_e=e.mercatorXfromLng(dt[0])*this.worldSize,N=(Ae=e.mercatorXfromLng(dt[1])*this.worldSize)-_e<Oe.x?Oe.x/(Ae-_e):0}var St=this.point,Nt=Math.max(N||0,O||0);if(Nt)return this.center=this.unproject(new e.Point(N?(Ae+_e)/2:St.x,O?(me+fe)/2:St.y)),this.zoom+=this.scaleZoom(Nt),this._unmodified=Xe,void(this._constraining=!1);if(this.latRange){var It=St.y,Lt=Oe.y/2;It-Lt<fe&&(X=fe+Lt),It+Lt>me&&(X=me-Lt)}if(this.lngRange){var At=St.x,Zt=Oe.x/2;At-Zt<_e&&(U=_e+Zt),At+Zt>Ae&&(U=Ae-Zt)}void 0===U&&void 0===X||(this.center=this.unproject(new e.Point(void 0!==U?U:St.x,void 0!==X?X:St.y))),this._unmodified=Xe,this._constraining=!1}},rn.prototype._calcMatrices=function(){if(this.height){var N=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var U=Math.PI/2+this._pitch,X=this._fov*(.5+N.y/this.height),fe=Math.sin(X)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-U-X,.01,Math.PI-.01)),me=this.point,_e=me.x,Ae=me.y,Oe=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+this.cameraToCenterDistance),Xe=this.height/50,nt=new Float64Array(16);e.perspective(nt,this._fov,this.width/this.height,Xe,Oe),nt[8]=2*-N.x/this.width,nt[9]=2*N.y/this.height,e.scale(nt,nt,[1,-1,1]),e.translate(nt,nt,[0,0,-this.cameraToCenterDistance]),e.rotateX(nt,nt,this._pitch),e.rotateZ(nt,nt,this.angle),e.translate(nt,nt,[-_e,-Ae,0]),this.mercatorMatrix=e.scale([],nt,[this.worldSize,this.worldSize,this.worldSize]),e.scale(nt,nt,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=nt,this.invProjMatrix=e.invert([],this.projMatrix);var dt=this.width%2/2,St=this.height%2/2,Nt=Math.cos(this.angle),It=Math.sin(this.angle),Lt=_e-Math.round(_e)+Nt*dt+It*St,At=Ae-Math.round(Ae)+Nt*St+It*dt,Zt=new Float64Array(nt);if(e.translate(Zt,Zt,[Lt>.5?Lt-1:Lt,At>.5?At-1:At,0]),this.alignedProjMatrix=Zt,nt=e.create(),e.scale(nt,nt,[this.width/2,-this.height/2,1]),e.translate(nt,nt,[1,-1,0]),this.labelPlaneMatrix=nt,nt=e.create(),e.scale(nt,nt,[1,-1,1]),e.translate(nt,nt,[-1,-1,0]),e.scale(nt,nt,[2/this.width,2/this.height,1]),this.glCoordMatrix=nt,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(nt=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=nt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},rn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var O=this.pointCoordinate(new e.Point(0,0)),N=[O.x*this.worldSize,O.y*this.worldSize,0,1];return e.transformMat4(N,N,this.pixelMatrix)[3]/this.cameraToCenterDistance},rn.prototype.getCameraPoint=function(){var N=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,N))},rn.prototype.getCameraQueryGeometry=function(O){var N=this.getCameraPoint();if(1===O.length)return[O[0],N];for(var U=N.x,X=N.y,fe=N.x,me=N.y,_e=0,Ae=O;_e<Ae.length;_e+=1){var Oe=Ae[_e];U=Math.min(U,Oe.x),X=Math.min(X,Oe.y),fe=Math.max(fe,Oe.x),me=Math.max(me,Oe.y)}return[new e.Point(U,X),new e.Point(fe,X),new e.Point(fe,me),new e.Point(U,me),new e.Point(U,X)]},Object.defineProperties(rn.prototype,xn);var Wn=function(O){var N,X,fe,me;this._hashName=O&&encodeURIComponent(O),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(N=this._updateHashUnthrottled.bind(this),300,X=!1,fe=null,me=function(){fe=null,X&&(N(),fe=setTimeout(me,300),X=!1)},function(){return X=!0,fe||me(),fe})};Wn.prototype.addTo=function(O){return this._map=O,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Wn.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Wn.prototype.getHashString=function(O){var N=this._map.getCenter(),U=Math.round(100*this._map.getZoom())/100,X=Math.ceil((U*Math.LN2+Math.log(512/360/.5))/Math.LN10),fe=Math.pow(10,X),me=Math.round(N.lng*fe)/fe,_e=Math.round(N.lat*fe)/fe,Ae=this._map.getBearing(),Oe=this._map.getPitch(),Xe="";if(Xe+=O?"/"+me+"/"+_e+"/"+U:U+"/"+_e+"/"+me,(Ae||Oe)&&(Xe+="/"+Math.round(10*Ae)/10),Oe&&(Xe+="/"+Math.round(Oe)),this._hashName){var nt=this._hashName,dt=!1,St=e.window.location.hash.slice(1).split("&").map(function(Nt){var It=Nt.split("=")[0];return It===nt?(dt=!0,It+"="+Xe):Nt}).filter(function(Nt){return Nt});return dt||St.push(nt+"="+Xe),"#"+St.join("&")}return"#"+Xe},Wn.prototype._getCurrentHash=function(){var O,N=this,U=e.window.location.hash.replace("#","");return this._hashName?(U.split("&").map(function(X){return X.split("=")}).forEach(function(X){X[0]===N._hashName&&(O=X)}),(O&&O[1]||"").split("/")):U.split("/")},Wn.prototype._onHashChange=function(){var O=this._getCurrentHash();if(O.length>=3&&!O.some(function(U){return isNaN(U)})){var N=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(O[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+O[2],+O[1]],zoom:+O[0],bearing:N,pitch:+(O[4]||0)}),!0}return!1},Wn.prototype._updateHashUnthrottled=function(){var O=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",O)}catch(N){}};var $n={linearity:.3,easing:e.bezier(0,0,.3,1)},fr=e.extend({deceleration:2500,maxSpeed:1400},$n),kr=e.extend({deceleration:20,maxSpeed:1400},$n),xr=e.extend({deceleration:1e3,maxSpeed:360},$n),Pr=e.extend({deceleration:1e3,maxSpeed:90},$n),zr=function(O){this._map=O,this.clear()};function Tr(O,N){(!O.duration||O.duration<N.duration)&&(O.duration=N.duration,O.easing=N.easing)}function Br(O,N,U){var X=U.maxSpeed,fe=U.linearity,me=U.deceleration,_e=e.clamp(O*fe/(N/1e3),-X,X),Ae=Math.abs(_e)/(me*fe);return{easing:U.easing,duration:1e3*Ae,amount:_e*(Ae/2)}}zr.prototype.clear=function(){this._inertiaBuffer=[]},zr.prototype.record=function(O){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:O})},zr.prototype._drainInertiaBuffer=function(){for(var O=this._inertiaBuffer,N=e.browser.now();O.length>0&&N-O[0].time>160;)O.shift()},zr.prototype._onMoveEnd=function(O){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var N={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},U=0,X=this._inertiaBuffer;U<X.length;U+=1){var fe=X[U].settings;N.zoom+=fe.zoomDelta||0,N.bearing+=fe.bearingDelta||0,N.pitch+=fe.pitchDelta||0,fe.panDelta&&N.pan._add(fe.panDelta),fe.around&&(N.around=fe.around),fe.pinchAround&&(N.pinchAround=fe.pinchAround)}var me=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_e={};if(N.pan.mag()){var Ae=Br(N.pan.mag(),me,e.extend({},fr,O||{}));_e.offset=N.pan.mult(Ae.amount/N.pan.mag()),_e.center=this._map.transform.center,Tr(_e,Ae)}if(N.zoom){var Oe=Br(N.zoom,me,kr);_e.zoom=this._map.transform.zoom+Oe.amount,Tr(_e,Oe)}if(N.bearing){var Xe=Br(N.bearing,me,xr);_e.bearing=this._map.transform.bearing+e.clamp(Xe.amount,-179,179),Tr(_e,Xe)}if(N.pitch){var nt=Br(N.pitch,me,Pr);_e.pitch=this._map.transform.pitch+nt.amount,Tr(_e,nt)}if(_e.zoom||_e.bearing){var dt=void 0===N.pinchAround?N.around:N.pinchAround;_e.around=dt?this._map.unproject(dt):this._map.getCenter()}return this.clear(),e.extend(_e,{noMoveStart:!0})}};var ti=function(O){function N(X,fe,me,_e){void 0===_e&&(_e={});var Ae=t.mousePos(fe.getCanvasContainer(),me),Oe=fe.unproject(Ae);O.call(this,X,e.extend({point:Ae,lngLat:Oe,originalEvent:me},_e)),this._defaultPrevented=!1,this.target=fe}O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N;var U={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},U.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,U),N}(e.Event),li=function(O){function N(X,fe,me){var _e="touchend"===X?me.changedTouches:me.touches,Ae=t.touchPos(fe.getCanvasContainer(),_e),Oe=Ae.map(function(dt){return fe.unproject(dt)}),Xe=Ae.reduce(function(dt,St,Nt,It){return dt.add(St.div(It.length))},new e.Point(0,0)),nt=fe.unproject(Xe);O.call(this,X,{points:Ae,point:Xe,lngLats:Oe,lngLat:nt,originalEvent:me}),this._defaultPrevented=!1}O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N;var U={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},U.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,U),N}(e.Event),vi=function(O){function N(X,fe,me){O.call(this,X,{originalEvent:me}),this._defaultPrevented=!1}O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N;var U={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},U.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,U),N}(e.Event),dr=function(O,N){this._map=O,this._clickTolerance=N.clickTolerance};dr.prototype.reset=function(){delete this._mousedownPos},dr.prototype.wheel=function(O){return this._firePreventable(new vi(O.type,this._map,O))},dr.prototype.mousedown=function(O,N){return this._mousedownPos=N,this._firePreventable(new ti(O.type,this._map,O))},dr.prototype.mouseup=function(O){this._map.fire(new ti(O.type,this._map,O))},dr.prototype.click=function(O,N){this._mousedownPos&&this._mousedownPos.dist(N)>=this._clickTolerance||this._map.fire(new ti(O.type,this._map,O))},dr.prototype.dblclick=function(O){return this._firePreventable(new ti(O.type,this._map,O))},dr.prototype.mouseover=function(O){this._map.fire(new ti(O.type,this._map,O))},dr.prototype.mouseout=function(O){this._map.fire(new ti(O.type,this._map,O))},dr.prototype.touchstart=function(O){return this._firePreventable(new li(O.type,this._map,O))},dr.prototype.touchmove=function(O){this._map.fire(new li(O.type,this._map,O))},dr.prototype.touchend=function(O){this._map.fire(new li(O.type,this._map,O))},dr.prototype.touchcancel=function(O){this._map.fire(new li(O.type,this._map,O))},dr.prototype._firePreventable=function(O){if(this._map.fire(O),O.defaultPrevented)return{}},dr.prototype.isEnabled=function(){return!0},dr.prototype.isActive=function(){return!1},dr.prototype.enable=function(){},dr.prototype.disable=function(){};var hi=function(O){this._map=O};hi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},hi.prototype.mousemove=function(O){this._map.fire(new ti(O.type,this._map,O))},hi.prototype.mousedown=function(){this._delayContextMenu=!0},hi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ti("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},hi.prototype.contextmenu=function(O){this._delayContextMenu?this._contextMenuEvent=O:this._map.fire(new ti(O.type,this._map,O)),this._map.listens("contextmenu")&&O.preventDefault()},hi.prototype.isEnabled=function(){return!0},hi.prototype.isActive=function(){return!1},hi.prototype.enable=function(){},hi.prototype.disable=function(){};var Xr=function(O,N){this._map=O,this._el=O.getCanvasContainer(),this._container=O.getContainer(),this._clickTolerance=N.clickTolerance||1};function ii(O,N){for(var U={},X=0;X<O.length;X++)U[O[X].identifier]=N[X];return U}Xr.prototype.isEnabled=function(){return!!this._enabled},Xr.prototype.isActive=function(){return!!this._active},Xr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Xr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Xr.prototype.mousedown=function(O,N){this.isEnabled()&&O.shiftKey&&0===O.button&&(t.disableDrag(),this._startPos=this._lastPos=N,this._active=!0)},Xr.prototype.mousemoveWindow=function(O,N){if(this._active){var U=N;if(!(this._lastPos.equals(U)||!this._box&&U.dist(this._startPos)<this._clickTolerance)){var X=this._startPos;this._lastPos=U,this._box||(this._box=t.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",O));var fe=Math.min(X.x,U.x),me=Math.max(X.x,U.x),_e=Math.min(X.y,U.y),Ae=Math.max(X.y,U.y);t.setTransform(this._box,"translate("+fe+"px,"+_e+"px)"),this._box.style.width=me-fe+"px",this._box.style.height=Ae-_e+"px"}}},Xr.prototype.mouseupWindow=function(O,N){var U=this;if(this._active&&0===O.button){var X=this._startPos,fe=N;if(this.reset(),t.suppressClick(),X.x!==fe.x||X.y!==fe.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:O})),{cameraAnimation:function(me){return me.fitScreenCoordinates(X,fe,U._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",O)}},Xr.prototype.keydown=function(O){this._active&&27===O.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",O))},Xr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(t.remove(this._box),this._box=null),t.enableDrag(),delete this._startPos,delete this._lastPos},Xr.prototype._fireEvent=function(O,N){return this._map.fire(new e.Event(O,{originalEvent:N}))};var xi=function(O){this.reset(),this.numTouches=O.numTouches};xi.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},xi.prototype.touchstart=function(O,N,U){(this.centroid||U.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=O.timeStamp),U.length===this.numTouches&&(this.centroid=function(X){for(var fe=new e.Point(0,0),me=0,_e=X;me<_e.length;me+=1)fe._add(_e[me]);return fe.div(X.length)}(N),this.touches=ii(U,N)))},xi.prototype.touchmove=function(O,N,U){if(!this.aborted&&this.centroid){var X=ii(U,N);for(var fe in this.touches){var _e=X[fe];(!_e||_e.dist(this.touches[fe])>30)&&(this.aborted=!0)}}},xi.prototype.touchend=function(O,N,U){if((!this.centroid||O.timeStamp-this.startTime>500)&&(this.aborted=!0),0===U.length){var X=!this.aborted&&this.centroid;if(this.reset(),X)return X}};var Ji=function(O){this.singleTap=new xi(O),this.numTaps=O.numTaps,this.reset()};Ji.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ji.prototype.touchstart=function(O,N,U){this.singleTap.touchstart(O,N,U)},Ji.prototype.touchmove=function(O,N,U){this.singleTap.touchmove(O,N,U)},Ji.prototype.touchend=function(O,N,U){var X=this.singleTap.touchend(O,N,U);if(X){var fe=O.timeStamp-this.lastTime<500,me=!this.lastTap||this.lastTap.dist(X)<30;if(fe&&me||this.reset(),this.count++,this.lastTime=O.timeStamp,this.lastTap=X,this.count===this.numTaps)return this.reset(),X}};var la=function(){this._zoomIn=new Ji({numTouches:1,numTaps:2}),this._zoomOut=new Ji({numTouches:2,numTaps:1}),this.reset()};la.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},la.prototype.touchstart=function(O,N,U){this._zoomIn.touchstart(O,N,U),this._zoomOut.touchstart(O,N,U)},la.prototype.touchmove=function(O,N,U){this._zoomIn.touchmove(O,N,U),this._zoomOut.touchmove(O,N,U)},la.prototype.touchend=function(O,N,U){var X=this,fe=this._zoomIn.touchend(O,N,U),me=this._zoomOut.touchend(O,N,U);return fe?(this._active=!0,O.preventDefault(),setTimeout(function(){return X.reset()},0),{cameraAnimation:function(_e){return _e.easeTo({duration:300,zoom:_e.getZoom()+1,around:_e.unproject(fe)},{originalEvent:O})}}):me?(this._active=!0,O.preventDefault(),setTimeout(function(){return X.reset()},0),{cameraAnimation:function(_e){return _e.easeTo({duration:300,zoom:_e.getZoom()-1,around:_e.unproject(me)},{originalEvent:O})}}):void 0},la.prototype.touchcancel=function(){this.reset()},la.prototype.enable=function(){this._enabled=!0},la.prototype.disable=function(){this._enabled=!1,this.reset()},la.prototype.isEnabled=function(){return this._enabled},la.prototype.isActive=function(){return this._active};var Gr=function(O){this.reset(),this._clickTolerance=O.clickTolerance||1};Gr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Gr.prototype._correctButton=function(O,N){return!1},Gr.prototype._move=function(O,N){return{}},Gr.prototype.mousedown=function(O,N){if(!this._lastPoint){var U=t.mouseButton(O);this._correctButton(O,U)&&(this._lastPoint=N,this._eventButton=U)}},Gr.prototype.mousemoveWindow=function(O,N){var U=this._lastPoint;if(U&&(O.preventDefault(),this._moved||!(N.dist(U)<this._clickTolerance)))return this._moved=!0,this._lastPoint=N,this._move(U,N)},Gr.prototype.mouseupWindow=function(O){t.mouseButton(O)===this._eventButton&&(this._moved&&t.suppressClick(),this.reset())},Gr.prototype.enable=function(){this._enabled=!0},Gr.prototype.disable=function(){this._enabled=!1,this.reset()},Gr.prototype.isEnabled=function(){return this._enabled},Gr.prototype.isActive=function(){return this._active};var ha=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.mousedown=function(U,X){O.prototype.mousedown.call(this,U,X),this._lastPoint&&(this._active=!0)},N.prototype._correctButton=function(U,X){return 0===X&&!U.ctrlKey},N.prototype._move=function(U,X){return{around:X,panDelta:X.sub(U)}},N}(Gr),oa=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype._correctButton=function(U,X){return 0===X&&U.ctrlKey||2===X},N.prototype._move=function(U,X){var fe=.8*(X.x-U.x);if(fe)return this._active=!0,{bearingDelta:fe}},N.prototype.contextmenu=function(U){U.preventDefault()},N}(Gr),Ai=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype._correctButton=function(U,X){return 0===X&&U.ctrlKey||2===X},N.prototype._move=function(U,X){var fe=-.5*(X.y-U.y);if(fe)return this._active=!0,{pitchDelta:fe}},N.prototype.contextmenu=function(U){U.preventDefault()},N}(Gr),ma=function(O){this._minTouches=1,this._clickTolerance=O.clickTolerance||1,this.reset()};ma.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},ma.prototype.touchstart=function(O,N,U){return this._calculateTransform(O,N,U)},ma.prototype.touchmove=function(O,N,U){if(this._active)return O.preventDefault(),this._calculateTransform(O,N,U)},ma.prototype.touchend=function(O,N,U){this._calculateTransform(O,N,U),this._active&&U.length<this._minTouches&&this.reset()},ma.prototype.touchcancel=function(){this.reset()},ma.prototype._calculateTransform=function(O,N,U){U.length>0&&(this._active=!0);var X=ii(U,N),fe=new e.Point(0,0),me=new e.Point(0,0),_e=0;for(var Ae in X){var Oe=X[Ae],Xe=this._touches[Ae];Xe&&(fe._add(Oe),me._add(Oe.sub(Xe)),_e++,X[Ae]=Oe)}if(this._touches=X,!(_e<this._minTouches)&&me.mag()){var nt=me.div(_e);if(this._sum._add(nt),!(this._sum.mag()<this._clickTolerance))return{around:fe.div(_e),panDelta:nt}}},ma.prototype.enable=function(){this._enabled=!0},ma.prototype.disable=function(){this._enabled=!1,this.reset()},ma.prototype.isEnabled=function(){return this._enabled},ma.prototype.isActive=function(){return this._active};var ta=function(){this.reset()};function Ra(O,N,U){for(var X=0;X<O.length;X++)if(O[X].identifier===U)return N[X]}function _i(O,N){return Math.log(O/N)/Math.LN2}ta.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ta.prototype._start=function(O){},ta.prototype._move=function(O,N,U){return{}},ta.prototype.touchstart=function(O,N,U){this._firstTwoTouches||U.length<2||(this._firstTwoTouches=[U[0].identifier,U[1].identifier],this._start([N[0],N[1]]))},ta.prototype.touchmove=function(O,N,U){if(this._firstTwoTouches){O.preventDefault();var X=this._firstTwoTouches,me=X[1],_e=Ra(U,N,X[0]),Ae=Ra(U,N,me);if(_e&&Ae){var Oe=this._aroundCenter?null:_e.add(Ae).div(2);return this._move([_e,Ae],Oe,O)}}},ta.prototype.touchend=function(O,N,U){if(this._firstTwoTouches){var X=this._firstTwoTouches,me=X[1],_e=Ra(U,N,X[0]),Ae=Ra(U,N,me);_e&&Ae||(this._active&&t.suppressClick(),this.reset())}},ta.prototype.touchcancel=function(){this.reset()},ta.prototype.enable=function(O){this._enabled=!0,this._aroundCenter=!!O&&"center"===O.around},ta.prototype.disable=function(){this._enabled=!1,this.reset()},ta.prototype.isEnabled=function(){return this._enabled},ta.prototype.isActive=function(){return this._active};var La=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.reset=function(){O.prototype.reset.call(this),delete this._distance,delete this._startDistance},N.prototype._start=function(U){this._startDistance=this._distance=U[0].dist(U[1])},N.prototype._move=function(U,X){var fe=this._distance;if(this._distance=U[0].dist(U[1]),this._active||!(Math.abs(_i(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_i(this._distance,fe),pinchAround:X}},N}(ta);function Wo(O,N){return 180*O.angleWith(N)/Math.PI}var Ga=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.reset=function(){O.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},N.prototype._start=function(U){this._startVector=this._vector=U[0].sub(U[1]),this._minDiameter=U[0].dist(U[1])},N.prototype._move=function(U,X){var fe=this._vector;if(this._vector=U[0].sub(U[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Wo(this._vector,fe),pinchAround:X}},N.prototype._isBelowThreshold=function(U){this._minDiameter=Math.min(this._minDiameter,U.mag());var X=25/(Math.PI*this._minDiameter)*360,fe=Wo(U,this._startVector);return Math.abs(fe)<X},N}(ta);function Ns(O){return Math.abs(O.y)>Math.abs(O.x)}var As=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.reset=function(){O.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},N.prototype._start=function(U){this._lastPoints=U,Ns(U[0].sub(U[1]))&&(this._valid=!1)},N.prototype._move=function(U,X,fe){var me=U[0].sub(this._lastPoints[0]),_e=U[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(me,_e,fe.timeStamp),this._valid)return this._lastPoints=U,this._active=!0,{pitchDelta:(me.y+_e.y)/2*-.5}},N.prototype.gestureBeginsVertically=function(U,X,fe){if(void 0!==this._valid)return this._valid;var me=U.mag()>=2,_e=X.mag()>=2;if(me||_e){if(!me||!_e)return void 0===this._firstMove&&(this._firstMove=fe),fe-this._firstMove<100&&void 0;var Ae=U.y>0==X.y>0;return Ns(U)&&Ns(X)&&Ae}},N}(ta),wi={panStep:100,bearingStep:15,pitchStep:10},bo=function(){var O=wi;this._panStep=O.panStep,this._bearingStep=O.bearingStep,this._pitchStep=O.pitchStep};function Ps(O){return O*(2-O)}bo.prototype.reset=function(){this._active=!1},bo.prototype.keydown=function(O){var N=this;if(!(O.altKey||O.ctrlKey||O.metaKey)){var U=0,X=0,fe=0,me=0,_e=0;switch(O.keyCode){case 61:case 107:case 171:case 187:U=1;break;case 189:case 109:case 173:U=-1;break;case 37:O.shiftKey?X=-1:(O.preventDefault(),me=-1);break;case 39:O.shiftKey?X=1:(O.preventDefault(),me=1);break;case 38:O.shiftKey?fe=1:(O.preventDefault(),_e=-1);break;case 40:O.shiftKey?fe=-1:(O.preventDefault(),_e=1);break;default:return}return{cameraAnimation:function(Ae){var Oe=Ae.getZoom();Ae.easeTo({duration:300,easeId:"keyboardHandler",easing:Ps,zoom:U?Math.round(Oe)+U*(O.shiftKey?2:1):Oe,bearing:Ae.getBearing()+X*N._bearingStep,pitch:Ae.getPitch()+fe*N._pitchStep,offset:[-me*N._panStep,-_e*N._panStep],center:Ae.getCenter()},{originalEvent:O})}}}},bo.prototype.enable=function(){this._enabled=!0},bo.prototype.disable=function(){this._enabled=!1,this.reset()},bo.prototype.isEnabled=function(){return this._enabled},bo.prototype.isActive=function(){return this._active};var Ea=function(O,N){this._map=O,this._el=O.getCanvasContainer(),this._handler=N,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ea.prototype.setZoomRate=function(O){this._defaultZoomRate=O},Ea.prototype.setWheelZoomRate=function(O){this._wheelZoomRate=O},Ea.prototype.isEnabled=function(){return!!this._enabled},Ea.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Ea.prototype.isZooming=function(){return!!this._zooming},Ea.prototype.enable=function(O){this.isEnabled()||(this._enabled=!0,this._aroundCenter=O&&"center"===O.around)},Ea.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ea.prototype.wheel=function(O){if(this.isEnabled()){var N=O.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*O.deltaY:O.deltaY,U=e.browser.now(),X=U-(this._lastWheelEventTime||0);this._lastWheelEventTime=U,0!==N&&N%4.000244140625==0?this._type="wheel":0!==N&&Math.abs(N)<4?this._type="trackpad":X>400?(this._type=null,this._lastValue=N,this._timeout=setTimeout(this._onTimeout,40,O)):this._type||(this._type=Math.abs(X*N)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,N+=this._lastValue)),O.shiftKey&&N&&(N/=4),this._type&&(this._lastWheelEvent=O,this._delta-=N,this._active||this._start(O)),O.preventDefault()}},Ea.prototype._onTimeout=function(O){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(O)},Ea.prototype._start=function(O){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var N=t.mousePos(this._el,O);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(N)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ea.prototype.renderFrame=function(){return this._onScrollFrame()},Ea.prototype._onScrollFrame=function(){var O=this;if(this._frameId&&(this._frameId=null,this.isActive())){var N=this._map.transform;if(0!==this._delta){var U="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,X=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&0!==X&&(X=1/X);var fe="number"==typeof this._targetZoom?N.zoomScale(this._targetZoom):N.scale;this._targetZoom=Math.min(N.maxZoom,Math.max(N.minZoom,N.scaleZoom(fe*X))),"wheel"===this._type&&(this._startZoom=N.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var me,_e="number"==typeof this._targetZoom?this._targetZoom:N.zoom,Ae=this._startZoom,Oe=this._easing,Xe=!1;if("wheel"===this._type&&Ae&&Oe){var nt=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),dt=Oe(nt);me=e.number(Ae,_e,dt),nt<1?this._frameId||(this._frameId=!0):Xe=!0}else me=_e,Xe=!0;return this._active=!0,Xe&&(this._active=!1,this._finishTimeout=setTimeout(function(){O._zooming=!1,O._handler._triggerRenderFrame(),delete O._targetZoom,delete O._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Xe,zoomDelta:me-N.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ea.prototype._smoothOutEasing=function(O){var N=e.ease;if(this._prevEase){var U=this._prevEase,X=(e.browser.now()-U.start)/U.duration,fe=U.easing(X+.01)-U.easing(X),me=.27/Math.sqrt(fe*fe+1e-4)*.01,_e=Math.sqrt(.0729-me*me);N=e.bezier(me,_e,.25,1)}return this._prevEase={start:e.browser.now(),duration:O,easing:N},N},Ea.prototype.reset=function(){this._active=!1};var Fa=function(O,N){this._clickZoom=O,this._tapZoom=N};Fa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Fa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Fa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Fa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Yo=function(){this.reset()};Yo.prototype.reset=function(){this._active=!1},Yo.prototype.dblclick=function(O,N){return O.preventDefault(),{cameraAnimation:function(U){U.easeTo({duration:300,zoom:U.getZoom()+(O.shiftKey?-1:1),around:U.unproject(N)},{originalEvent:O})}}},Yo.prototype.enable=function(){this._enabled=!0},Yo.prototype.disable=function(){this._enabled=!1,this.reset()},Yo.prototype.isEnabled=function(){return this._enabled},Yo.prototype.isActive=function(){return this._active};var Va=function(){this._tap=new Ji({numTouches:1,numTaps:1}),this.reset()};Va.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Va.prototype.touchstart=function(O,N,U){this._swipePoint||(this._tapTime&&O.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?U.length>0&&(this._swipePoint=N[0],this._swipeTouch=U[0].identifier):this._tap.touchstart(O,N,U))},Va.prototype.touchmove=function(O,N,U){if(this._tapTime){if(this._swipePoint){if(U[0].identifier!==this._swipeTouch)return;var X=N[0],fe=X.y-this._swipePoint.y;return this._swipePoint=X,O.preventDefault(),this._active=!0,{zoomDelta:fe/128}}}else this._tap.touchmove(O,N,U)},Va.prototype.touchend=function(O,N,U){this._tapTime?this._swipePoint&&0===U.length&&this.reset():this._tap.touchend(O,N,U)&&(this._tapTime=O.timeStamp)},Va.prototype.touchcancel=function(){this.reset()},Va.prototype.enable=function(){this._enabled=!0},Va.prototype.disable=function(){this._enabled=!1,this.reset()},Va.prototype.isEnabled=function(){return this._enabled},Va.prototype.isActive=function(){return this._active};var Fo=function(O,N,U){this._el=O,this._mousePan=N,this._touchPan=U};Fo.prototype.enable=function(O){this._inertiaOptions=O||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Fo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Fo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Fo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var da=function(O,N,U){this._pitchWithRotate=O.pitchWithRotate,this._mouseRotate=N,this._mousePitch=U};da.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},da.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},da.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},da.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ko=function(O,N,U,X){this._el=O,this._touchZoom=N,this._touchRotate=U,this._tapDragZoom=X,this._rotationDisabled=!1,this._enabled=!0};Ko.prototype.enable=function(O){this._touchZoom.enable(O),this._rotationDisabled||this._touchRotate.enable(O),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ko.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ko.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ko.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ko.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ko.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var fl=function(O){return O.zoom||O.drag||O.pitch||O.rotate},Tl=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N}(e.Event);function Qs(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta}var Po=function(O,N){this._map=O,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new zr(O),this._bearingSnap=N.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(N),e.bindAll(["handleEvent","handleWindowEvent"],this);var U=this._el;this._listeners=[[U,"touchstart",{passive:!1}],[U,"touchmove",{passive:!1}],[U,"touchend",void 0],[U,"touchcancel",void 0],[U,"mousedown",void 0],[U,"mousemove",void 0],[U,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[U,"mouseover",void 0],[U,"mouseout",void 0],[U,"dblclick",void 0],[U,"click",void 0],[U,"keydown",{capture:!1}],[U,"keyup",void 0],[U,"wheel",{passive:!1}],[U,"contextmenu",void 0],[e.window,"blur",void 0]];for(var X=0,fe=this._listeners;X<fe.length;X+=1){var me=fe[X],_e=me[0];t.addEventListener(_e,me[1],_e===e.window.document?this.handleWindowEvent:this.handleEvent,me[2])}};Po.prototype.destroy=function(){for(var O=0,N=this._listeners;O<N.length;O+=1){var U=N[O],X=U[0];t.removeEventListener(X,U[1],X===e.window.document?this.handleWindowEvent:this.handleEvent,U[2])}},Po.prototype._addDefaultHandlers=function(O){var N=this._map,U=N.getCanvasContainer();this._add("mapEvent",new dr(N,O));var X=N.boxZoom=new Xr(N,O);this._add("boxZoom",X);var fe=new la,me=new Yo;N.doubleClickZoom=new Fa(me,fe),this._add("tapZoom",fe),this._add("clickZoom",me);var _e=new Va;this._add("tapDragZoom",_e);var Ae=N.touchPitch=new As;this._add("touchPitch",Ae);var Oe=new oa(O),Xe=new Ai(O);N.dragRotate=new da(O,Oe,Xe),this._add("mouseRotate",Oe,["mousePitch"]),this._add("mousePitch",Xe,["mouseRotate"]);var nt=new ha(O),dt=new ma(O);N.dragPan=new Fo(U,nt,dt),this._add("mousePan",nt),this._add("touchPan",dt,["touchZoom","touchRotate"]);var St=new Ga,Nt=new La;N.touchZoomRotate=new Ko(U,Nt,St,_e),this._add("touchRotate",St,["touchPan","touchZoom"]),this._add("touchZoom",Nt,["touchPan","touchRotate"]);var It=N.scrollZoom=new Ea(N,this);this._add("scrollZoom",It,["mousePan"]);var Lt=N.keyboard=new bo;this._add("keyboard",Lt),this._add("blockableMapEvent",new hi(N));for(var At=0,Zt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];At<Zt.length;At+=1){var Gt=Zt[At];O.interactive&&O[Gt]&&N[Gt].enable(O[Gt])}},Po.prototype._add=function(O,N,U){this._handlers.push({handlerName:O,handler:N,allowed:U}),this._handlersById[O]=N},Po.prototype.stop=function(){if(!this._updatingCamera){for(var O=0,N=this._handlers;O<N.length;O+=1)N[O].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Po.prototype.isActive=function(){for(var O=0,N=this._handlers;O<N.length;O+=1)if(N[O].handler.isActive())return!0;return!1},Po.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Po.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Po.prototype.isMoving=function(){return Boolean(fl(this._eventsInProgress))||this.isZooming()},Po.prototype._blockedByActive=function(O,N,U){for(var X in O)if(X!==U&&(!N||N.indexOf(X)<0))return!0;return!1},Po.prototype.handleWindowEvent=function(O){this.handleEvent(O,O.type+"Window")},Po.prototype._getMapTouches=function(O){for(var N=[],U=0,X=O;U<X.length;U+=1){var fe=X[U];this._el.contains(fe.target)&&N.push(fe)}return N},Po.prototype.handleEvent=function(O,N){if("blur"!==O.type){this._updatingCamera=!0;for(var U="renderFrame"===O.type?void 0:O,X={needsRenderFrame:!1},fe={},me={},_e=O.touches?this._getMapTouches(O.touches):void 0,Ae=_e?t.touchPos(this._el,_e):t.mousePos(this._el,O),Oe=0,Xe=this._handlers;Oe<Xe.length;Oe+=1){var nt=Xe[Oe],dt=nt.handlerName,St=nt.handler,Nt=nt.allowed;if(St.isEnabled()){var It=void 0;this._blockedByActive(me,Nt,dt)?St.reset():St[N||O.type]&&(It=St[N||O.type](O,Ae,_e),this.mergeHandlerResult(X,fe,It,dt,U),It&&It.needsRenderFrame&&this._triggerRenderFrame()),(It||St.isActive())&&(me[dt]=St)}}var Lt={};for(var At in this._previousActiveHandlers)me[At]||(Lt[At]=U);this._previousActiveHandlers=me,(Object.keys(Lt).length||Qs(X))&&(this._changes.push([X,fe,Lt]),this._triggerRenderFrame()),(Object.keys(me).length||Qs(X))&&this._map._stop(!0),this._updatingCamera=!1;var Zt=X.cameraAnimation;Zt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Zt(this._map))}else this.stop()},Po.prototype.mergeHandlerResult=function(O,N,U,X,fe){if(U){e.extend(O,U);var me={handlerName:X,originalEvent:U.originalEvent||fe};void 0!==U.zoomDelta&&(N.zoom=me),void 0!==U.panDelta&&(N.drag=me),void 0!==U.pitchDelta&&(N.pitch=me),void 0!==U.bearingDelta&&(N.rotate=me)}},Po.prototype._applyChanges=function(){for(var O={},N={},U={},X=0,fe=this._changes;X<fe.length;X+=1){var me=fe[X],_e=me[0],Ae=me[1],Oe=me[2];_e.panDelta&&(O.panDelta=(O.panDelta||new e.Point(0,0))._add(_e.panDelta)),_e.zoomDelta&&(O.zoomDelta=(O.zoomDelta||0)+_e.zoomDelta),_e.bearingDelta&&(O.bearingDelta=(O.bearingDelta||0)+_e.bearingDelta),_e.pitchDelta&&(O.pitchDelta=(O.pitchDelta||0)+_e.pitchDelta),void 0!==_e.around&&(O.around=_e.around),void 0!==_e.pinchAround&&(O.pinchAround=_e.pinchAround),_e.noInertia&&(O.noInertia=_e.noInertia),e.extend(N,Ae),e.extend(U,Oe)}this._updateMapTransform(O,N,U),this._changes=[]},Po.prototype._updateMapTransform=function(O,N,U){var X=this._map,fe=X.transform;if(!Qs(O))return this._fireEvents(N,U);var me=O.panDelta,_e=O.zoomDelta,Ae=O.bearingDelta,Oe=O.pitchDelta,Xe=O.around,nt=O.pinchAround;void 0!==nt&&(Xe=nt),X._stop(!0),Xe=Xe||X.transform.centerPoint;var dt=fe.pointLocation(me?Xe.sub(me):Xe);Ae&&(fe.bearing+=Ae),Oe&&(fe.pitch+=Oe),_e&&(fe.zoom+=_e),fe.setLocationAtPoint(dt,Xe),this._map._update(),O.noInertia||this._inertia.record(O),this._fireEvents(N,U)},Po.prototype._fireEvents=function(O,N){var U=this,X=fl(this._eventsInProgress),fe=fl(O),me={};for(var _e in O)this._eventsInProgress[_e]||(me[_e+"start"]=O[_e].originalEvent),this._eventsInProgress[_e]=O[_e];for(var Oe in!X&&fe&&this._fireEvent("movestart",fe.originalEvent),me)this._fireEvent(Oe,me[Oe]);for(var Xe in O.rotate&&(this._bearingChanged=!0),fe&&this._fireEvent("move",fe.originalEvent),O)this._fireEvent(Xe,O[Xe].originalEvent);var dt,St={};for(var Nt in this._eventsInProgress){var It=this._eventsInProgress[Nt],Lt=It.handlerName,At=It.originalEvent;this._handlersById[Lt].isActive()||(delete this._eventsInProgress[Nt],St[Nt+"end"]=dt=N[Lt]||At)}for(var Zt in St)this._fireEvent(Zt,St[Zt]);var Gt=fl(this._eventsInProgress);if((X||fe)&&!Gt){this._updatingCamera=!0;var $t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),mn=function(En){return 0!==En&&-U._bearingSnap<En&&En<U._bearingSnap};$t?(mn($t.bearing||this._map.getBearing())&&($t.bearing=0),this._map.easeTo($t,{originalEvent:dt})):(this._map.fire(new e.Event("moveend",{originalEvent:dt})),mn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Po.prototype._fireEvent=function(O,N){this._map.fire(new e.Event(O,N?{originalEvent:N}:{}))},Po.prototype._triggerRenderFrame=function(){var O=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(N){delete O._frameId,O.handleEvent(new Tl("renderFrame",{timeStamp:N})),O._applyChanges()}))};var Jl=function(O){function N(U,X){O.call(this),this._moving=!1,this._zooming=!1,this.transform=U,this._bearingSnap=X.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},N.prototype.setCenter=function(U,X){return this.jumpTo({center:U},X)},N.prototype.panBy=function(U,X,fe){return U=e.Point.convert(U).mult(-1),this.panTo(this.transform.center,e.extend({offset:U},X),fe)},N.prototype.panTo=function(U,X,fe){return this.easeTo(e.extend({center:U},X),fe)},N.prototype.getZoom=function(){return this.transform.zoom},N.prototype.setZoom=function(U,X){return this.jumpTo({zoom:U},X),this},N.prototype.zoomTo=function(U,X,fe){return this.easeTo(e.extend({zoom:U},X),fe)},N.prototype.zoomIn=function(U,X){return this.zoomTo(this.getZoom()+1,U,X),this},N.prototype.zoomOut=function(U,X){return this.zoomTo(this.getZoom()-1,U,X),this},N.prototype.getBearing=function(){return this.transform.bearing},N.prototype.setBearing=function(U,X){return this.jumpTo({bearing:U},X),this},N.prototype.getPadding=function(){return this.transform.padding},N.prototype.setPadding=function(U,X){return this.jumpTo({padding:U},X),this},N.prototype.rotateTo=function(U,X,fe){return this.easeTo(e.extend({bearing:U},X),fe)},N.prototype.resetNorth=function(U,X){return this.rotateTo(0,e.extend({duration:1e3},U),X),this},N.prototype.resetNorthPitch=function(U,X){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},U),X),this},N.prototype.snapToNorth=function(U,X){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(U,X):this},N.prototype.getPitch=function(){return this.transform.pitch},N.prototype.setPitch=function(U,X){return this.jumpTo({pitch:U},X),this},N.prototype.cameraForBounds=function(U,X){return U=e.LngLatBounds.convert(U),this._cameraForBoxAndBearing(U.getNorthWest(),U.getSouthEast(),0,X)},N.prototype._cameraForBoxAndBearing=function(U,X,fe,me){var _e={top:0,bottom:0,right:0,left:0};if("number"==typeof(me=e.extend({padding:_e,offset:[0,0],maxZoom:this.transform.maxZoom},me)).padding){var Ae=me.padding;me.padding={top:Ae,bottom:Ae,right:Ae,left:Ae}}me.padding=e.extend(_e,me.padding);var Oe=this.transform,Xe=Oe.padding,nt=Oe.project(e.LngLat.convert(U)),dt=Oe.project(e.LngLat.convert(X)),St=nt.rotate(-fe*Math.PI/180),Nt=dt.rotate(-fe*Math.PI/180),It=new e.Point(Math.max(St.x,Nt.x),Math.max(St.y,Nt.y)),Lt=new e.Point(Math.min(St.x,Nt.x),Math.min(St.y,Nt.y)),At=It.sub(Lt),Zt=(Oe.width-(Xe.left+Xe.right+me.padding.left+me.padding.right))/At.x,Gt=(Oe.height-(Xe.top+Xe.bottom+me.padding.top+me.padding.bottom))/At.y;if(!(Gt<0||Zt<0)){var $t=Math.min(Oe.scaleZoom(Oe.scale*Math.min(Zt,Gt)),me.maxZoom),mn=e.Point.convert(me.offset),Nn=new e.Point(mn.x+(me.padding.left-me.padding.right)/2,mn.y+(me.padding.top-me.padding.bottom)/2).mult(Oe.scale/Oe.zoomScale($t));return{center:Oe.unproject(nt.add(dt).div(2).sub(Nn)),zoom:$t,bearing:fe}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},N.prototype.fitBounds=function(U,X,fe){return this._fitInternal(this.cameraForBounds(U,X),X,fe)},N.prototype.fitScreenCoordinates=function(U,X,fe,me,_e){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(U)),this.transform.pointLocation(e.Point.convert(X)),fe,me),me,_e)},N.prototype._fitInternal=function(U,X,fe){return U?(delete(X=e.extend(U,X)).padding,X.linear?this.easeTo(X,fe):this.flyTo(X,fe)):this},N.prototype.jumpTo=function(U,X){this.stop();var fe=this.transform,me=!1,_e=!1,Ae=!1;return"zoom"in U&&fe.zoom!==+U.zoom&&(me=!0,fe.zoom=+U.zoom),void 0!==U.center&&(fe.center=e.LngLat.convert(U.center)),"bearing"in U&&fe.bearing!==+U.bearing&&(_e=!0,fe.bearing=+U.bearing),"pitch"in U&&fe.pitch!==+U.pitch&&(Ae=!0,fe.pitch=+U.pitch),null==U.padding||fe.isPaddingEqual(U.padding)||(fe.padding=U.padding),this.fire(new e.Event("movestart",X)).fire(new e.Event("move",X)),me&&this.fire(new e.Event("zoomstart",X)).fire(new e.Event("zoom",X)).fire(new e.Event("zoomend",X)),_e&&this.fire(new e.Event("rotatestart",X)).fire(new e.Event("rotate",X)).fire(new e.Event("rotateend",X)),Ae&&this.fire(new e.Event("pitchstart",X)).fire(new e.Event("pitch",X)).fire(new e.Event("pitchend",X)),this.fire(new e.Event("moveend",X))},N.prototype.easeTo=function(U,X){var fe=this;this._stop(!1,U.easeId),(!1===(U=e.extend({offset:[0,0],duration:500,easing:e.ease},U)).animate||!U.essential&&e.browser.prefersReducedMotion)&&(U.duration=0);var me=this.transform,_e=this.getZoom(),Ae=this.getBearing(),Oe=this.getPitch(),Xe=this.getPadding(),nt="zoom"in U?+U.zoom:_e,dt="bearing"in U?this._normalizeBearing(U.bearing,Ae):Ae,St="pitch"in U?+U.pitch:Oe,Nt="padding"in U?U.padding:me.padding,It=e.Point.convert(U.offset),Lt=me.centerPoint.add(It),At=me.pointLocation(Lt),Zt=e.LngLat.convert(U.center||At);this._normalizeCenter(Zt);var Gt,$t,mn=me.project(At),En=me.project(Zt).sub(mn),Vn=me.zoomScale(nt-_e);U.around&&(Gt=e.LngLat.convert(U.around),$t=me.locationPoint(Gt));var Nn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||nt!==_e,this._rotating=this._rotating||Ae!==dt,this._pitching=this._pitching||St!==Oe,this._padding=!me.isPaddingEqual(Nt),this._easeId=U.easeId,this._prepareEase(X,U.noMoveStart,Nn),clearTimeout(this._easeEndTimeoutID),this._ease(function(pr){if(fe._zooming&&(me.zoom=e.number(_e,nt,pr)),fe._rotating&&(me.bearing=e.number(Ae,dt,pr)),fe._pitching&&(me.pitch=e.number(Oe,St,pr)),fe._padding&&(me.interpolatePadding(Xe,Nt,pr),Lt=me.centerPoint.add(It)),Gt)me.setLocationAtPoint(Gt,$t);else{var hr=me.zoomScale(me.zoom-_e),Er=nt>_e?Math.min(2,Vn):Math.max(.5,Vn),br=Math.pow(Er,1-pr),oi=me.unproject(mn.add(En.mult(pr*br)).mult(hr));me.setLocationAtPoint(me.renderWorldCopies?oi.wrap():oi,Lt)}fe._fireMoveEvents(X)},function(pr){fe._afterEase(X,pr)},U),this},N.prototype._prepareEase=function(U,X,fe){void 0===fe&&(fe={}),this._moving=!0,X||fe.moving||this.fire(new e.Event("movestart",U)),this._zooming&&!fe.zooming&&this.fire(new e.Event("zoomstart",U)),this._rotating&&!fe.rotating&&this.fire(new e.Event("rotatestart",U)),this._pitching&&!fe.pitching&&this.fire(new e.Event("pitchstart",U))},N.prototype._fireMoveEvents=function(U){this.fire(new e.Event("move",U)),this._zooming&&this.fire(new e.Event("zoom",U)),this._rotating&&this.fire(new e.Event("rotate",U)),this._pitching&&this.fire(new e.Event("pitch",U))},N.prototype._afterEase=function(U,X){if(!this._easeId||!X||this._easeId!==X){delete this._easeId;var fe=this._zooming,me=this._rotating,_e=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,fe&&this.fire(new e.Event("zoomend",U)),me&&this.fire(new e.Event("rotateend",U)),_e&&this.fire(new e.Event("pitchend",U)),this.fire(new e.Event("moveend",U))}},N.prototype.flyTo=function(U,X){var fe=this;if(!U.essential&&e.browser.prefersReducedMotion){var me=e.pick(U,["center","zoom","bearing","pitch","around"]);return this.jumpTo(me,X)}this.stop(),U=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},U);var _e=this.transform,Ae=this.getZoom(),Oe=this.getBearing(),Xe=this.getPitch(),nt=this.getPadding(),dt="zoom"in U?e.clamp(+U.zoom,_e.minZoom,_e.maxZoom):Ae,St="bearing"in U?this._normalizeBearing(U.bearing,Oe):Oe,Nt="pitch"in U?+U.pitch:Xe,It="padding"in U?U.padding:_e.padding,Lt=_e.zoomScale(dt-Ae),At=e.Point.convert(U.offset),Zt=_e.centerPoint.add(At),Gt=_e.pointLocation(Zt),$t=e.LngLat.convert(U.center||Gt);this._normalizeCenter($t);var mn=_e.project(Gt),En=_e.project($t).sub(mn),Vn=U.curve,Nn=Math.max(_e.width,_e.height),pr=Nn/Lt,hr=En.mag();if("minZoom"in U){var Er=e.clamp(Math.min(U.minZoom,Ae,dt),_e.minZoom,_e.maxZoom),br=Nn/_e.zoomScale(Er-Ae);Vn=Math.sqrt(br/hr*2)}var oi=Vn*Vn;function ci(yi){var qi=(pr*pr-Nn*Nn+(yi?-1:1)*oi*oi*hr*hr)/(2*(yi?pr:Nn)*oi*hr);return Math.log(Math.sqrt(qi*qi+1)-qi)}function Si(yi){return(Math.exp(yi)-Math.exp(-yi))/2}function ar(yi){return(Math.exp(yi)+Math.exp(-yi))/2}var jr=ci(0),gi=function(yi){return ar(jr)/ar(jr+Vn*yi)},ui=function(yi){return Nn*((ar(jr)*(Si(qi=jr+Vn*yi)/ar(qi))-Si(jr))/oi)/hr;var qi},Ti=(ci(1)-jr)/Vn;if(Math.abs(hr)<1e-6||!isFinite(Ti)){if(Math.abs(Nn-pr)<1e-6)return this.easeTo(U,X);var Fi=pr<Nn?-1:1;Ti=Math.abs(Math.log(pr/Nn))/Vn,ui=function(){return 0},gi=function(yi){return Math.exp(Fi*Vn*yi)}}return U.duration="duration"in U?+U.duration:1e3*Ti/("screenSpeed"in U?+U.screenSpeed/Vn:+U.speed),U.maxDuration&&U.duration>U.maxDuration&&(U.duration=0),this._zooming=!0,this._rotating=Oe!==St,this._pitching=Nt!==Xe,this._padding=!_e.isPaddingEqual(It),this._prepareEase(X,!1),this._ease(function(yi){var qi=yi*Ti,Gi=1/gi(qi);_e.zoom=1===yi?dt:Ae+_e.scaleZoom(Gi),fe._rotating&&(_e.bearing=e.number(Oe,St,yi)),fe._pitching&&(_e.pitch=e.number(Xe,Nt,yi)),fe._padding&&(_e.interpolatePadding(nt,It,yi),Zt=_e.centerPoint.add(At));var sa=1===yi?$t:_e.unproject(mn.add(En.mult(ui(qi))).mult(Gi));_e.setLocationAtPoint(_e.renderWorldCopies?sa.wrap():sa,Zt),fe._fireMoveEvents(X)},function(){return fe._afterEase(X)},U),this},N.prototype.isEasing=function(){return!!this._easeFrameId},N.prototype.stop=function(){return this._stop()},N.prototype._stop=function(U,X){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var fe=this._onEaseEnd;delete this._onEaseEnd,fe.call(this,X)}if(!U){var me=this.handlers;me&&me.stop()}return this},N.prototype._ease=function(U,X,fe){!1===fe.animate||0===fe.duration?(U(1),X()):(this._easeStart=e.browser.now(),this._easeOptions=fe,this._onEaseFrame=U,this._onEaseEnd=X,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},N.prototype._renderFrameCallback=function(){var U=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(U)),U<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},N.prototype._normalizeBearing=function(U,X){U=e.wrap(U,-180,180);var fe=Math.abs(U-X);return Math.abs(U-360-X)<fe&&(U-=360),Math.abs(U+360-X)<fe&&(U+=360),U},N.prototype._normalizeCenter=function(U){var X=this.transform;if(X.renderWorldCopies&&!X.lngRange){var fe=U.lng-X.center.lng;U.lng+=fe>180?-360:fe<-180?360:0}},N}(e.Evented),Oi=function(O){void 0===O&&(O={}),this.options=O,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Oi.prototype.getDefaultPosition=function(){return"bottom-right"},Oi.prototype.onAdd=function(O){var N=this.options&&this.options.compact;return this._map=O,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=t.create("div","mapboxgl-ctrl-attrib-inner",this._container),N&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===N&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Oi.prototype.onRemove=function(){t.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Oi.prototype._updateEditLink=function(){var O=this._editLink;O||(O=this._editLink=this._container.querySelector(".mapbox-improve-map"));var N=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(O){var U=N.reduce(function(X,fe,me){return fe.value&&(X+=fe.key+"="+fe.value+(me<N.length-1?"&":"")),X},"?");O.href=e.config.FEEDBACK_URL+"/"+U+(this._map._hash?this._map._hash.getHashString(!0):""),O.rel="noopener nofollow"}},Oi.prototype._updateData=function(O){!O||"metadata"!==O.sourceDataType&&"style"!==O.dataType||(this._updateAttributions(),this._updateEditLink())},Oi.prototype._updateAttributions=function(){if(this._map.style){var O=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?O=O.concat(this.options.customAttribution.map(function(Ae){return"string"!=typeof Ae?"":Ae})):"string"==typeof this.options.customAttribution&&O.push(this.options.customAttribution)),this._map.style.stylesheet){var N=this._map.style.stylesheet;this.styleOwner=N.owner,this.styleId=N.id}var U=this._map.style.sourceCaches;for(var X in U){var fe=U[X];if(fe.used){var me=fe.getSource();me.attribution&&O.indexOf(me.attribution)<0&&O.push(me.attribution)}}O.sort(function(Ae,Oe){return Ae.length-Oe.length});var _e=(O=O.filter(function(Ae,Oe){for(var Xe=Oe+1;Xe<O.length;Xe++)if(O[Xe].indexOf(Ae)>=0)return!1;return!0})).join(" | ");_e!==this._attribHTML&&(this._attribHTML=_e,O.length?(this._innerContainer.innerHTML=_e,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Oi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ll=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Ll.prototype.onAdd=function(O){this._map=O,this._container=t.create("div","mapboxgl-ctrl");var N=t.create("a","mapboxgl-ctrl-logo");return N.target="_blank",N.rel="noopener nofollow",N.href="https://www.mapbox.com/",N.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),N.setAttribute("rel","noopener nofollow"),this._container.appendChild(N),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ll.prototype.onRemove=function(){t.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ll.prototype.getDefaultPosition=function(){return"bottom-left"},Ll.prototype._updateLogo=function(O){O&&"metadata"!==O.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Ll.prototype._logoRequired=function(){if(this._map.style){var O=this._map.style.sourceCaches;for(var N in O)if(O[N].getSource().mapbox_logo)return!0;return!1}},Ll.prototype._updateCompact=function(){var O=this._container.children;if(O.length){var N=O[0];this._map.getCanvasContainer().offsetWidth<250?N.classList.add("mapboxgl-compact"):N.classList.remove("mapboxgl-compact")}};var Di=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Di.prototype.add=function(O){var N=++this._id;return this._queue.push({callback:O,id:N,cancelled:!1}),N},Di.prototype.remove=function(O){for(var N=this._currentlyRunning,U=0,X=N?this._queue.concat(N):this._queue;U<X.length;U+=1){var fe=X[U];if(fe.id===O)return void(fe.cancelled=!0)}},Di.prototype.run=function(O){void 0===O&&(O=0);var N=this._currentlyRunning=this._queue;this._queue=[];for(var U=0,X=N;U<X.length;U+=1){var fe=X[U];if(!fe.cancelled&&(fe.callback(O),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Di.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Yi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},xu=e.window.HTMLImageElement,cu=e.window.HTMLElement,Ml=e.window.ImageBitmap,Bs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Zr=function(O){function N(X){var fe=this;if(null!=(X=e.extend({},Bs,X)).minZoom&&null!=X.maxZoom&&X.minZoom>X.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=X.minPitch&&null!=X.maxPitch&&X.minPitch>X.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=X.minPitch&&X.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=X.maxPitch&&X.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var me=new rn(X.minZoom,X.maxZoom,X.minPitch,X.maxPitch,X.renderWorldCopies);if(O.call(this,me,X),this._interactive=X.interactive,this._maxTileCacheSize=X.maxTileCacheSize,this._failIfMajorPerformanceCaveat=X.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=X.preserveDrawingBuffer,this._antialias=X.antialias,this._trackResize=X.trackResize,this._bearingSnap=X.bearingSnap,this._refreshExpiredTiles=X.refreshExpiredTiles,this._fadeDuration=X.fadeDuration,this._crossSourceCollisions=X.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=X.collectResourceTiming,this._renderTaskQueue=new Di,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Yi,X.locale),this._requestManager=new e.RequestManager(X.transformRequest,X.accessToken),"string"==typeof X.container){if(this._container=e.window.document.getElementById(X.container),!this._container)throw new Error("Container '"+X.container+"' not found.")}else{if(!(X.container instanceof cu))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=X.container}if(X.maxBounds&&this.setMaxBounds(X.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return fe._update(!1)}),this.on("moveend",function(){return fe._update(!1)}),this.on("zoom",function(){return fe._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Po(this,X),this._hash=X.hash&&new Wn("string"==typeof X.hash&&X.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:X.center,zoom:X.zoom,bearing:X.bearing,pitch:X.pitch}),X.bounds&&(this.resize(),this.fitBounds(X.bounds,e.extend({},X.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=X.localIdeographFontFamily,X.style&&this.setStyle(X.style,{localIdeographFontFamily:X.localIdeographFontFamily}),X.attributionControl&&this.addControl(new Oi({customAttribution:X.customAttribution})),this.addControl(new Ll,X.logoPosition),this.on("style.load",function(){fe.transform.unmodified&&fe.jumpTo(fe.style.stylesheet)}),this.on("data",function(Ae){fe._update("style"===Ae.dataType),fe.fire(new e.Event(Ae.dataType+"data",Ae))}),this.on("dataloading",function(Ae){fe.fire(new e.Event(Ae.dataType+"dataloading",Ae))})}O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N;var U={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return N.prototype._getMapId=function(){return this._mapId},N.prototype.addControl=function(X,fe){if(void 0===fe&&X.getDefaultPosition&&(fe=X.getDefaultPosition()),void 0===fe&&(fe="top-right"),!X||!X.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var me=X.onAdd(this);this._controls.push(X);var _e=this._controlPositions[fe];return-1!==fe.indexOf("bottom")?_e.insertBefore(me,_e.firstChild):_e.appendChild(me),this},N.prototype.removeControl=function(X){if(!X||!X.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var fe=this._controls.indexOf(X);return fe>-1&&this._controls.splice(fe,1),X.onRemove(this),this},N.prototype.resize=function(X){var fe=this._containerDimensions(),me=fe[0],_e=fe[1];this._resizeCanvas(me,_e),this.transform.resize(me,_e),this.painter.resize(me,_e);var Ae=!this._moving;return Ae&&(this.stop(),this.fire(new e.Event("movestart",X)).fire(new e.Event("move",X))),this.fire(new e.Event("resize",X)),Ae&&this.fire(new e.Event("moveend",X)),this},N.prototype.getBounds=function(){return this.transform.getBounds()},N.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},N.prototype.setMaxBounds=function(X){return this.transform.setMaxBounds(e.LngLatBounds.convert(X)),this._update()},N.prototype.setMinZoom=function(X){if((X=null==X?-2:X)>=-2&&X<=this.transform.maxZoom)return this.transform.minZoom=X,this._update(),this.getZoom()<X&&this.setZoom(X),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},N.prototype.getMinZoom=function(){return this.transform.minZoom},N.prototype.setMaxZoom=function(X){if((X=null==X?22:X)>=this.transform.minZoom)return this.transform.maxZoom=X,this._update(),this.getZoom()>X&&this.setZoom(X),this;throw new Error("maxZoom must be greater than the current minZoom")},N.prototype.getMaxZoom=function(){return this.transform.maxZoom},N.prototype.setMinPitch=function(X){if((X=null==X?0:X)<0)throw new Error("minPitch must be greater than or equal to 0");if(X>=0&&X<=this.transform.maxPitch)return this.transform.minPitch=X,this._update(),this.getPitch()<X&&this.setPitch(X),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},N.prototype.getMinPitch=function(){return this.transform.minPitch},N.prototype.setMaxPitch=function(X){if((X=null==X?60:X)>60)throw new Error("maxPitch must be less than or equal to 60");if(X>=this.transform.minPitch)return this.transform.maxPitch=X,this._update(),this.getPitch()>X&&this.setPitch(X),this;throw new Error("maxPitch must be greater than the current minPitch")},N.prototype.getMaxPitch=function(){return this.transform.maxPitch},N.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},N.prototype.setRenderWorldCopies=function(X){return this.transform.renderWorldCopies=X,this._update()},N.prototype.project=function(X){return this.transform.locationPoint(e.LngLat.convert(X))},N.prototype.unproject=function(X){return this.transform.pointLocation(e.Point.convert(X))},N.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},N.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},N.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},N.prototype._createDelegatedListener=function(X,fe,me){var _e,Ae=this;if("mouseenter"===X||"mouseover"===X){var Oe=!1;return{layer:fe,listener:me,delegates:{mousemove:function(nt){var dt=Ae.getLayer(fe)?Ae.queryRenderedFeatures(nt.point,{layers:[fe]}):[];dt.length?Oe||(Oe=!0,me.call(Ae,new ti(X,Ae,nt.originalEvent,{features:dt}))):Oe=!1},mouseout:function(){Oe=!1}}}}if("mouseleave"===X||"mouseout"===X){var Xe=!1;return{layer:fe,listener:me,delegates:{mousemove:function(nt){(Ae.getLayer(fe)?Ae.queryRenderedFeatures(nt.point,{layers:[fe]}):[]).length?Xe=!0:Xe&&(Xe=!1,me.call(Ae,new ti(X,Ae,nt.originalEvent)))},mouseout:function(nt){Xe&&(Xe=!1,me.call(Ae,new ti(X,Ae,nt.originalEvent)))}}}}return{layer:fe,listener:me,delegates:(_e={},_e[X]=function(nt){var dt=Ae.getLayer(fe)?Ae.queryRenderedFeatures(nt.point,{layers:[fe]}):[];dt.length&&(nt.features=dt,me.call(Ae,nt),delete nt.features)},_e)}},N.prototype.on=function(X,fe,me){if(void 0===me)return O.prototype.on.call(this,X,fe);var _e=this._createDelegatedListener(X,fe,me);for(var Ae in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[X]=this._delegatedListeners[X]||[],this._delegatedListeners[X].push(_e),_e.delegates)this.on(Ae,_e.delegates[Ae]);return this},N.prototype.once=function(X,fe,me){if(void 0===me)return O.prototype.once.call(this,X,fe);var _e=this._createDelegatedListener(X,fe,me);for(var Ae in _e.delegates)this.once(Ae,_e.delegates[Ae]);return this},N.prototype.off=function(X,fe,me){var _e=this;return void 0===me?O.prototype.off.call(this,X,fe):(this._delegatedListeners&&this._delegatedListeners[X]&&function(Ae){for(var Oe=Ae[X],Xe=0;Xe<Oe.length;Xe++){var nt=Oe[Xe];if(nt.layer===fe&&nt.listener===me){for(var dt in nt.delegates)_e.off(dt,nt.delegates[dt]);return Oe.splice(Xe,1),_e}}}(this._delegatedListeners),this)},N.prototype.queryRenderedFeatures=function(X,fe){if(!this.style)return[];var me;if(void 0!==fe||void 0===X||X instanceof e.Point||Array.isArray(X)||(fe=X,X=void 0),fe=fe||{},(X=X||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof X[0])me=[e.Point.convert(X)];else{var _e=e.Point.convert(X[0]),Ae=e.Point.convert(X[1]);me=[_e,new e.Point(Ae.x,_e.y),Ae,new e.Point(_e.x,Ae.y),_e]}return this.style.queryRenderedFeatures(me,fe,this.transform)},N.prototype.querySourceFeatures=function(X,fe){return this.style.querySourceFeatures(X,fe)},N.prototype.setStyle=function(X,fe){return!1!==(fe=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},fe)).diff&&fe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&X?(this._diffStyle(X,fe),this):(this._localIdeographFontFamily=fe.localIdeographFontFamily,this._updateStyle(X,fe))},N.prototype._getUIString=function(X){var fe=this._locale[X];if(null==fe)throw new Error("Missing UI string '"+X+"'");return fe},N.prototype._updateStyle=function(X,fe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),X?(this.style=new pi(this,fe||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof X?this.style.loadURL(X):this.style.loadJSON(X),this):(delete this.style,this)},N.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new pi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},N.prototype._diffStyle=function(X,fe){var me=this;if("string"==typeof X){var _e=this._requestManager.normalizeStyleURL(X),Ae=this._requestManager.transformRequest(_e,e.ResourceType.Style);e.getJSON(Ae,function(Oe,Xe){Oe?me.fire(new e.ErrorEvent(Oe)):Xe&&me._updateDiff(Xe,fe)})}else"object"==typeof X&&this._updateDiff(X,fe)},N.prototype._updateDiff=function(X,fe){try{this.style.setState(X)&&this._update(!0)}catch(me){e.warnOnce("Unable to perform style diff: "+(me.message||me.error||me)+".  Rebuilding the style from scratch."),this._updateStyle(X,fe)}},N.prototype.getStyle=function(){if(this.style)return this.style.serialize()},N.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},N.prototype.addSource=function(X,fe){return this._lazyInitEmptyStyle(),this.style.addSource(X,fe),this._update(!0)},N.prototype.isSourceLoaded=function(X){var fe=this.style&&this.style.sourceCaches[X];if(void 0!==fe)return fe.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+X+"'")))},N.prototype.areTilesLoaded=function(){var X=this.style&&this.style.sourceCaches;for(var fe in X){var me=X[fe]._tiles;for(var _e in me){var Ae=me[_e];if("loaded"!==Ae.state&&"errored"!==Ae.state)return!1}}return!0},N.prototype.addSourceType=function(X,fe,me){return this._lazyInitEmptyStyle(),this.style.addSourceType(X,fe,me)},N.prototype.removeSource=function(X){return this.style.removeSource(X),this._update(!0)},N.prototype.getSource=function(X){return this.style.getSource(X)},N.prototype.addImage=function(X,fe,me){void 0===me&&(me={});var _e=me.pixelRatio;void 0===_e&&(_e=1);var Ae=me.sdf;void 0===Ae&&(Ae=!1);var Oe=me.stretchX,Xe=me.stretchY,nt=me.content;if(this._lazyInitEmptyStyle(),fe instanceof xu||Ml&&fe instanceof Ml){var dt=e.browser.getImageData(fe);this.style.addImage(X,{data:new e.RGBAImage({width:dt.width,height:dt.height},dt.data),pixelRatio:_e,stretchX:Oe,stretchY:Xe,content:nt,sdf:Ae,version:0})}else{if(void 0===fe.width||void 0===fe.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Gt=fe;this.style.addImage(X,{data:new e.RGBAImage({width:fe.width,height:fe.height},new Uint8Array(fe.data)),pixelRatio:_e,stretchX:Oe,stretchY:Xe,content:nt,sdf:Ae,version:0,userImage:Gt}),Gt.onAdd&&Gt.onAdd(this,X)}},N.prototype.updateImage=function(X,fe){var me=this.style.getImage(X);if(!me)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var _e=fe instanceof xu||Ml&&fe instanceof Ml?e.browser.getImageData(fe):fe,Ae=_e.width,Oe=_e.height,Xe=_e.data;return void 0===Ae||void 0===Oe?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Ae!==me.data.width||Oe!==me.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(me.data.replace(Xe,!(fe instanceof xu||Ml&&fe instanceof Ml)),void this.style.updateImage(X,me))},N.prototype.hasImage=function(X){return X?!!this.style.getImage(X):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},N.prototype.removeImage=function(X){this.style.removeImage(X)},N.prototype.loadImage=function(X,fe){e.getImage(this._requestManager.transformRequest(X,e.ResourceType.Image),fe)},N.prototype.listImages=function(){return this.style.listImages()},N.prototype.addLayer=function(X,fe){return this._lazyInitEmptyStyle(),this.style.addLayer(X,fe),this._update(!0)},N.prototype.moveLayer=function(X,fe){return this.style.moveLayer(X,fe),this._update(!0)},N.prototype.removeLayer=function(X){return this.style.removeLayer(X),this._update(!0)},N.prototype.getLayer=function(X){return this.style.getLayer(X)},N.prototype.setLayerZoomRange=function(X,fe,me){return this.style.setLayerZoomRange(X,fe,me),this._update(!0)},N.prototype.setFilter=function(X,fe,me){return void 0===me&&(me={}),this.style.setFilter(X,fe,me),this._update(!0)},N.prototype.getFilter=function(X){return this.style.getFilter(X)},N.prototype.setPaintProperty=function(X,fe,me,_e){return void 0===_e&&(_e={}),this.style.setPaintProperty(X,fe,me,_e),this._update(!0)},N.prototype.getPaintProperty=function(X,fe){return this.style.getPaintProperty(X,fe)},N.prototype.setLayoutProperty=function(X,fe,me,_e){return void 0===_e&&(_e={}),this.style.setLayoutProperty(X,fe,me,_e),this._update(!0)},N.prototype.getLayoutProperty=function(X,fe){return this.style.getLayoutProperty(X,fe)},N.prototype.setLight=function(X,fe){return void 0===fe&&(fe={}),this._lazyInitEmptyStyle(),this.style.setLight(X,fe),this._update(!0)},N.prototype.getLight=function(){return this.style.getLight()},N.prototype.setFeatureState=function(X,fe){return this.style.setFeatureState(X,fe),this._update()},N.prototype.removeFeatureState=function(X,fe){return this.style.removeFeatureState(X,fe),this._update()},N.prototype.getFeatureState=function(X){return this.style.getFeatureState(X)},N.prototype.getContainer=function(){return this._container},N.prototype.getCanvasContainer=function(){return this._canvasContainer},N.prototype.getCanvas=function(){return this._canvas},N.prototype._containerDimensions=function(){var X=0,fe=0;return this._container&&(X=this._container.clientWidth||400,fe=this._container.clientHeight||300),[X,fe]},N.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},N.prototype._setupContainer=function(){var X=this._container;X.classList.add("mapboxgl-map"),(this._missingCSSCanary=t.create("div","mapboxgl-canary",X)).style.visibility="hidden",this._detectMissingCSS();var fe=this._canvasContainer=t.create("div","mapboxgl-canvas-container",X);this._interactive&&fe.classList.add("mapboxgl-interactive"),this._canvas=t.create("canvas","mapboxgl-canvas",fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var me=this._containerDimensions();this._resizeCanvas(me[0],me[1]);var _e=this._controlContainer=t.create("div","mapboxgl-control-container",X),Ae=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Oe){Ae[Oe]=t.create("div","mapboxgl-ctrl-"+Oe,_e)})},N.prototype._resizeCanvas=function(X,fe){var me=e.browser.devicePixelRatio||1;this._canvas.width=me*X,this._canvas.height=me*fe,this._canvas.style.width=X+"px",this._canvas.style.height=fe+"px"},N.prototype._setupPainter=function(){var X=e.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),fe=this._canvas.getContext("webgl",X)||this._canvas.getContext("experimental-webgl",X);fe?(this.painter=new Ma(fe,this.transform),e.webpSupported.testSupport(fe)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},N.prototype._contextLost=function(X){X.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:X}))},N.prototype._contextRestored=function(X){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:X}))},N.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},N.prototype._update=function(X){return this.style?(this._styleDirty=this._styleDirty||X,this._sourcesDirty=!0,this.triggerRepaint(),this):this},N.prototype._requestRenderFrame=function(X){return this._update(),this._renderTaskQueue.add(X)},N.prototype._cancelRenderFrame=function(X){this._renderTaskQueue.remove(X)},N.prototype._render=function(X){var fe,me=this,_e=0,Ae=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(fe=Ae.createQueryEXT(),Ae.beginQueryEXT(Ae.TIME_ELAPSED_EXT,fe),_e=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(X),!this._removed){var Oe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Xe=this.transform.zoom,nt=e.browser.now();this.style.zoomHistory.update(Xe,nt);var dt=new e.EvaluationParameters(Xe,{now:nt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),St=dt.crossFadingFactor();1===St&&St===this._crossFadingFactor||(Oe=!0,this._crossFadingFactor=St),this.style.update(dt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Oe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Nt=e.browser.now()-_e;Ae.endQueryEXT(Ae.TIME_ELAPSED_EXT,fe),setTimeout(function(){var Lt=Ae.getQueryObjectEXT(fe,Ae.QUERY_RESULT_EXT)/1e6;Ae.deleteQueryEXT(fe),me.fire(new e.Event("gpu-timing-frame",{cpuTime:Nt,gpuTime:Lt}))},50)}if(this.listens("gpu-timing-layer")){var It=this.painter.collectGpuTimers();setTimeout(function(){var Lt=me.painter.queryGpuTimers(It);me.fire(new e.Event("gpu-timing-layer",{layerTimes:Lt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},N.prototype.remove=function(){this._hash&&this._hash.remove();for(var X=0,fe=this._controls;X<fe.length;X+=1)fe[X].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var me=this.painter.context.gl.getExtension("WEBGL_lose_context");me&&me.loseContext(),Pa(this._canvasContainer),Pa(this._controlContainer),Pa(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},N.prototype.triggerRepaint=function(){var X=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(fe){X._frame=null,X._render(fe)}))},N.prototype._onWindowOnline=function(){this._update()},N.prototype._onWindowResize=function(X){this._trackResize&&this.resize({originalEvent:X})._update()},U.showTileBoundaries.get=function(){return!!this._showTileBoundaries},U.showTileBoundaries.set=function(X){this._showTileBoundaries!==X&&(this._showTileBoundaries=X,this._update())},U.showPadding.get=function(){return!!this._showPadding},U.showPadding.set=function(X){this._showPadding!==X&&(this._showPadding=X,this._update())},U.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},U.showCollisionBoxes.set=function(X){this._showCollisionBoxes!==X&&(this._showCollisionBoxes=X,X?this.style._generateCollisionBoxes():this._update())},U.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},U.showOverdrawInspector.set=function(X){this._showOverdrawInspector!==X&&(this._showOverdrawInspector=X,this._update())},U.repaint.get=function(){return!!this._repaint},U.repaint.set=function(X){this._repaint!==X&&(this._repaint=X,this.triggerRepaint())},U.vertices.get=function(){return!!this._vertices},U.vertices.set=function(X){this._vertices=X,this._update()},N.prototype._setCacheLimits=function(X,fe){e.setCacheLimits(X,fe)},U.version.get=function(){return e.version},Object.defineProperties(N.prototype,U),N}(Jl);function Pa(O){O.parentNode&&O.parentNode.removeChild(O)}var hl={showCompass:!0,showZoom:!0,visualizePitch:!1},Qi=function(O){var N=this;this.options=e.extend({},hl,O),this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(U){return U.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(U){return N._map.zoomIn({},{originalEvent:U})}),t.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(U){return N._map.zoomOut({},{originalEvent:U})}),t.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(U){N.options.visualizePitch?N._map.resetNorthPitch({},{originalEvent:U}):N._map.resetNorth({},{originalEvent:U})}),this._compassIcon=t.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Qi.prototype._updateZoomButtons=function(){var O=this._map.getZoom();this._zoomInButton.disabled=O===this._map.getMaxZoom(),this._zoomOutButton.disabled=O===this._map.getMinZoom()},Qi.prototype._rotateCompassArrow=function(){var O=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=O},Qi.prototype.onAdd=function(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ha(this._map,this._compass,this.options.visualizePitch)),this._container},Qi.prototype.onRemove=function(){t.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Qi.prototype._createButton=function(O,N){var U=t.create("button",O,this._container);return U.type="button",U.addEventListener("click",N),U},Qi.prototype._setButtonTitle=function(O,N){var U=this._map._getUIString("NavigationControl."+N);O.title=U,O.setAttribute("aria-label",U)};var Ha=function(O,N,U){void 0===U&&(U=!1),this._clickTolerance=10,this.element=N,this.mouseRotate=new oa({clickTolerance:O.dragRotate._mouseRotate._clickTolerance}),this.map=O,U&&(this.mousePitch=new Ai({clickTolerance:O.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),t.addEventListener(N,"mousedown",this.mousedown),t.addEventListener(N,"touchstart",this.touchstart,{passive:!1}),t.addEventListener(N,"touchmove",this.touchmove),t.addEventListener(N,"touchend",this.touchend),t.addEventListener(N,"touchcancel",this.reset)};function el(O,N,U){if(O=new e.LngLat(O.lng,O.lat),N){var X=new e.LngLat(O.lng-360,O.lat),fe=new e.LngLat(O.lng+360,O.lat),me=U.locationPoint(O).distSqr(N);U.locationPoint(X).distSqr(N)<me?O=X:U.locationPoint(fe).distSqr(N)<me&&(O=fe)}for(;Math.abs(O.lng-U.center.lng)>180;){var _e=U.locationPoint(O);if(_e.x>=0&&_e.y>=0&&_e.x<=U.width&&_e.y<=U.height)break;O.lng>U.center.lng?O.lng-=360:O.lng+=360}return O}Ha.prototype.down=function(O,N){this.mouseRotate.mousedown(O,N),this.mousePitch&&this.mousePitch.mousedown(O,N),t.disableDrag()},Ha.prototype.move=function(O,N){var U=this.map,X=this.mouseRotate.mousemoveWindow(O,N);if(X&&X.bearingDelta&&U.setBearing(U.getBearing()+X.bearingDelta),this.mousePitch){var fe=this.mousePitch.mousemoveWindow(O,N);fe&&fe.pitchDelta&&U.setPitch(U.getPitch()+fe.pitchDelta)}},Ha.prototype.off=function(){var O=this.element;t.removeEventListener(O,"mousedown",this.mousedown),t.removeEventListener(O,"touchstart",this.touchstart,{passive:!1}),t.removeEventListener(O,"touchmove",this.touchmove),t.removeEventListener(O,"touchend",this.touchend),t.removeEventListener(O,"touchcancel",this.reset),this.offTemp()},Ha.prototype.offTemp=function(){t.enableDrag(),t.removeEventListener(e.window,"mousemove",this.mousemove),t.removeEventListener(e.window,"mouseup",this.mouseup)},Ha.prototype.mousedown=function(O){this.down(e.extend({},O,{ctrlKey:!0,preventDefault:function(){return O.preventDefault()}}),t.mousePos(this.element,O)),t.addEventListener(e.window,"mousemove",this.mousemove),t.addEventListener(e.window,"mouseup",this.mouseup)},Ha.prototype.mousemove=function(O){this.move(O,t.mousePos(this.element,O))},Ha.prototype.mouseup=function(O){this.mouseRotate.mouseupWindow(O),this.mousePitch&&this.mousePitch.mouseupWindow(O),this.offTemp()},Ha.prototype.touchstart=function(O){1!==O.targetTouches.length?this.reset():(this._startPos=this._lastPos=t.touchPos(this.element,O.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return O.preventDefault()}},this._startPos))},Ha.prototype.touchmove=function(O){1!==O.targetTouches.length?this.reset():(this._lastPos=t.touchPos(this.element,O.targetTouches)[0],this.move({preventDefault:function(){return O.preventDefault()}},this._lastPos))},Ha.prototype.touchend=function(O){0===O.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ha.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ls={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function To(O,N,U){var X=O.classList;for(var fe in ls)X.remove("mapboxgl-"+U+"-anchor-"+fe);X.add("mapboxgl-"+U+"-anchor-"+N)}var Al,bu=function(O){function N(U,X){var fe=this;if(O.call(this),(U instanceof e.window.HTMLElement||X)&&(U=e.extend({element:U},X)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=U&&U.anchor||"center",this._color=U&&U.color||"#3FB1CE",this._draggable=U&&U.draggable||!1,this._state="inactive",this._rotation=U&&U.rotation||0,this._rotationAlignment=U&&U.rotationAlignment||"auto",this._pitchAlignment=U&&U.pitchAlignment&&"auto"!==U.pitchAlignment?U.pitchAlignment:this._rotationAlignment,U&&U.element)this._element=U.element,this._offset=e.Point.convert(U&&U.offset||[0,0]);else{this._defaultMarker=!0,this._element=t.create("div"),this._element.setAttribute("aria-label","Map marker");var me=t.createNS("http://www.w3.org/2000/svg","svg");me.setAttributeNS(null,"display","block"),me.setAttributeNS(null,"height","41px"),me.setAttributeNS(null,"width","27px"),me.setAttributeNS(null,"viewBox","0 0 27 41");var _e=t.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"stroke","none"),_e.setAttributeNS(null,"stroke-width","1"),_e.setAttributeNS(null,"fill","none"),_e.setAttributeNS(null,"fill-rule","evenodd");var Ae=t.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"fill-rule","nonzero");var Oe=t.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Oe.setAttributeNS(null,"fill","#000000");for(var Xe=0,nt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Xe<nt.length;Xe+=1){var dt=nt[Xe],St=t.createNS("http://www.w3.org/2000/svg","ellipse");St.setAttributeNS(null,"opacity","0.04"),St.setAttributeNS(null,"cx","10.5"),St.setAttributeNS(null,"cy","5.80029008"),St.setAttributeNS(null,"rx",dt.rx),St.setAttributeNS(null,"ry",dt.ry),Oe.appendChild(St)}var Nt=t.createNS("http://www.w3.org/2000/svg","g");Nt.setAttributeNS(null,"fill",this._color);var It=t.createNS("http://www.w3.org/2000/svg","path");It.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Nt.appendChild(It);var Lt=t.createNS("http://www.w3.org/2000/svg","g");Lt.setAttributeNS(null,"opacity","0.25"),Lt.setAttributeNS(null,"fill","#000000");var At=t.createNS("http://www.w3.org/2000/svg","path");At.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Lt.appendChild(At);var Zt=t.createNS("http://www.w3.org/2000/svg","g");Zt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Zt.setAttributeNS(null,"fill","#FFFFFF");var Gt=t.createNS("http://www.w3.org/2000/svg","g");Gt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var $t=t.createNS("http://www.w3.org/2000/svg","circle");$t.setAttributeNS(null,"fill","#000000"),$t.setAttributeNS(null,"opacity","0.25"),$t.setAttributeNS(null,"cx","5.5"),$t.setAttributeNS(null,"cy","5.5"),$t.setAttributeNS(null,"r","5.4999962");var mn=t.createNS("http://www.w3.org/2000/svg","circle");mn.setAttributeNS(null,"fill","#FFFFFF"),mn.setAttributeNS(null,"cx","5.5"),mn.setAttributeNS(null,"cy","5.5"),mn.setAttributeNS(null,"r","5.4999962"),Gt.appendChild($t),Gt.appendChild(mn),Ae.appendChild(Oe),Ae.appendChild(Nt),Ae.appendChild(Lt),Ae.appendChild(Zt),Ae.appendChild(Gt),me.appendChild(Ae),this._element.appendChild(me),this._offset=e.Point.convert(U&&U.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(En){En.preventDefault()}),this._element.addEventListener("mousedown",function(En){En.preventDefault()}),this._element.addEventListener("focus",function(){var En=fe._map.getContainer();En.scrollTop=0,En.scrollLeft=0}),To(this._element,this._anchor,"marker"),this._popup=null}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.addTo=function(U){return this.remove(),this._map=U,U.getCanvasContainer().appendChild(this._element),U.on("move",this._update),U.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},N.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),t.remove(this._element),this._popup&&this._popup.remove(),this},N.prototype.getLngLat=function(){return this._lngLat},N.prototype.setLngLat=function(U){return this._lngLat=e.LngLat.convert(U),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},N.prototype.getElement=function(){return this._element},N.prototype.setPopup=function(U){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),U){if(!("offset"in U.options)){var X=Math.sqrt(Math.pow(13.5,2)/2);U.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[X,-1*(24.6+X)],"bottom-right":[-X,-1*(24.6+X)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=U,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},N.prototype._onKeyPress=function(U){var X=U.code,fe=U.charCode||U.keyCode;"Space"!==X&&"Enter"!==X&&32!==fe&&13!==fe||this.togglePopup()},N.prototype._onMapClick=function(U){var X=U.originalEvent.target,fe=this._element;this._popup&&(X===fe||fe.contains(X))&&this.togglePopup()},N.prototype.getPopup=function(){return this._popup},N.prototype.togglePopup=function(){var U=this._popup;return U?(U.isOpen()?U.remove():U.addTo(this._map),this):this},N.prototype._update=function(U){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=el(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var X="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?X="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(X="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var fe="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?fe="rotateX(0deg)":"map"===this._pitchAlignment&&(fe="rotateX("+this._map.getPitch()+"deg)"),U&&"moveend"!==U.type||(this._pos=this._pos.round()),t.setTransform(this._element,ls[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+fe+" "+X)}},N.prototype.getOffset=function(){return this._offset},N.prototype.setOffset=function(U){return this._offset=e.Point.convert(U),this._update(),this},N.prototype._onMove=function(U){this._pos=U.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},N.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},N.prototype._addDragHandler=function(U){this._element.contains(U.originalEvent.target)&&(U.preventDefault(),this._positionDelta=U.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},N.prototype.setDraggable=function(U){return this._draggable=!!U,this._map&&(U?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},N.prototype.isDraggable=function(){return this._draggable},N.prototype.setRotation=function(U){return this._rotation=U||0,this._update(),this},N.prototype.getRotation=function(){return this._rotation},N.prototype.setRotationAlignment=function(U){return this._rotationAlignment=U||"auto",this._update(),this},N.prototype.getRotationAlignment=function(){return this._rotationAlignment},N.prototype.setPitchAlignment=function(U){return this._pitchAlignment=U&&"auto"!==U?U:this._rotationAlignment,this._update(),this},N.prototype.getPitchAlignment=function(){return this._pitchAlignment},N}(e.Evented),Kl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Pl=0,tl=!1,vs=function(O){function N(U){O.call(this),this.options=e.extend({},Kl,U),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.onAdd=function(U){var X;return this._map=U,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),X=this._setupUI,void 0!==Al?X(Al):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(fe){X(Al="denied"!==fe.state)}):X(Al=!!e.window.navigator.geolocation),this._container},N.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),t.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Pl=0,tl=!1},N.prototype._isOutOfMapMaxBounds=function(U){var X=this._map.getMaxBounds(),fe=U.coords;return X&&(fe.longitude<X.getWest()||fe.longitude>X.getEast()||fe.latitude<X.getSouth()||fe.latitude>X.getNorth())},N.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},N.prototype._onSuccess=function(U){if(this._map){if(this._isOutOfMapMaxBounds(U))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",U)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=U,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(U),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(U),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",U)),this._finish()}},N.prototype._updateCamera=function(U){var X=new e.LngLat(U.coords.longitude,U.coords.latitude),fe=U.coords.accuracy,me=this._map.getBearing(),_e=e.extend({bearing:me},this.options.fitBoundsOptions);this._map.fitBounds(X.toBounds(fe),_e,{geolocateSource:!0})},N.prototype._updateMarker=function(U){if(U){var X=new e.LngLat(U.coords.longitude,U.coords.latitude);this._accuracyCircleMarker.setLngLat(X).addTo(this._map),this._userLocationDotMarker.setLngLat(X).addTo(this._map),this._accuracy=U.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},N.prototype._updateCircleRadius=function(){var U=this._map._container.clientHeight/2,X=this._map.unproject([0,U]),fe=this._map.unproject([1,U]),me=X.distanceTo(fe),_e=Math.ceil(2*this._accuracy/me);this._circleElement.style.width=_e+"px",this._circleElement.style.height=_e+"px"},N.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},N.prototype._onError=function(U){if(this._map){if(this.options.trackUserLocation)if(1===U.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var X=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=X,this._geolocateButton.setAttribute("aria-label",X),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===U.code&&tl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",U)),this._finish()}},N.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},N.prototype._setupUI=function(U){var X=this;if(this._container.addEventListener("contextmenu",function(_e){return _e.preventDefault()}),this._geolocateButton=t.create("button","mapboxgl-ctrl-geolocate",this._container),t.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===U){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var fe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=fe,this._geolocateButton.setAttribute("aria-label",fe)}else{var me=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=me,this._geolocateButton.setAttribute("aria-label",me)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=t.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new bu(this._dotElement),this._circleElement=t.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new bu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(_e){_e.geolocateSource||"ACTIVE_LOCK"!==X._watchState||_e.originalEvent&&"resize"===_e.originalEvent.type||(X._watchState="BACKGROUND",X._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),X._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),X.fire(new e.Event("trackuserlocationend")))})},N.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Pl--,tl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var U;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Pl>1?(U={maximumAge:6e5,timeout:0},tl=!0):(U=this.options.positionOptions,tl=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,U)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},N.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},N}(e.Evented),kl={maxWidth:100,unit:"metric"},Ol=function(O){this.options=e.extend({},kl,O),e.bindAll(["_onMove","setUnit"],this)};function Ul(O,N,U){var X=U&&U.maxWidth||100,fe=O._container.clientHeight/2,me=O.unproject([0,fe]),_e=O.unproject([X,fe]),Ae=me.distanceTo(_e);if(U&&"imperial"===U.unit){var Oe=3.2808*Ae;Oe>5280?js(N,X,Oe/5280,O._getUIString("ScaleControl.Miles")):js(N,X,Oe,O._getUIString("ScaleControl.Feet"))}else U&&"nautical"===U.unit?js(N,X,Ae/1852,O._getUIString("ScaleControl.NauticalMiles")):Ae>=1e3?js(N,X,Ae/1e3,O._getUIString("ScaleControl.Kilometers")):js(N,X,Ae,O._getUIString("ScaleControl.Meters"))}function js(O,N,U,X){var fe,me,_e,Xe,nt,Ae=(fe=U,(me=Math.pow(10,(""+Math.floor(fe)).length-1))*(_e=(_e=fe/me)>=10?10:_e>=5?5:_e>=3?3:_e>=2?2:_e>=1?1:(Xe=_e,nt=Math.pow(10,Math.ceil(-Math.log(Xe)/Math.LN10)),Math.round(Xe*nt)/nt)));O.style.width=N*(Ae/U)+"px",O.innerHTML=Ae+"&nbsp;"+X}Ol.prototype.getDefaultPosition=function(){return"bottom-left"},Ol.prototype._onMove=function(){Ul(this._map,this._container,this.options)},Ol.prototype.onAdd=function(O){return this._map=O,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ol.prototype.onRemove=function(){t.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ol.prototype.setUnit=function(O){this.options.unit=O,Ul(this._map,this._container,this.options)};var us=function(O){this._fullscreen=!1,O&&O.container&&(O.container instanceof e.window.HTMLElement?this._container=O.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};us.prototype.onAdd=function(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},us.prototype.onRemove=function(){t.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},us.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},us.prototype._setupUI=function(){var O=this._fullscreenButton=t.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);t.create("span","mapboxgl-ctrl-icon",O).setAttribute("aria-hidden",!0),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},us.prototype._updateTitle=function(){var O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O},us.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},us.prototype._isFullscreen=function(){return this._fullscreen},us.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},us.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var rc={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},wc=function(O){function N(U){O.call(this),this.options=e.extend(Object.create(rc),U),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.addTo=function(U){return this._map&&this.remove(),this._map=U,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},N.prototype.isOpen=function(){return!!this._map},N.prototype.remove=function(){return this._content&&t.remove(this._content),this._container&&(t.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},N.prototype.getLngLat=function(){return this._lngLat},N.prototype.setLngLat=function(U){return this._lngLat=e.LngLat.convert(U),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},N.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},N.prototype.getElement=function(){return this._container},N.prototype.setText=function(U){return this.setDOMContent(e.window.document.createTextNode(U))},N.prototype.setHTML=function(U){var X,fe=e.window.document.createDocumentFragment(),me=e.window.document.createElement("body");for(me.innerHTML=U;X=me.firstChild;)fe.appendChild(X);return this.setDOMContent(fe)},N.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},N.prototype.setMaxWidth=function(U){return this.options.maxWidth=U,this._update(),this},N.prototype.setDOMContent=function(U){return this._createContent(),this._content.appendChild(U),this._update(),this},N.prototype.addClassName=function(U){this._container&&this._container.classList.add(U)},N.prototype.removeClassName=function(U){this._container&&this._container.classList.remove(U)},N.prototype.toggleClassName=function(U){if(this._container)return this._container.classList.toggle(U)},N.prototype._createContent=function(){this._content&&t.remove(this._content),this._content=t.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=t.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},N.prototype._onMouseUp=function(U){this._update(U.point)},N.prototype._onMouseMove=function(U){this._update(U.point)},N.prototype._onDrag=function(U){this._update(U.point)},N.prototype._update=function(U){var X=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=t.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=t.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(St){return X._container.classList.add(St)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=el(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||U)){var me=this._pos=this._trackPointer&&U?U:this._map.project(this._lngLat),_e=this.options.anchor,Ae=function St(Nt){if(Nt){if("number"==typeof Nt){var It=Math.round(Math.sqrt(.5*Math.pow(Nt,2)));return{center:new e.Point(0,0),top:new e.Point(0,Nt),"top-left":new e.Point(It,It),"top-right":new e.Point(-It,It),bottom:new e.Point(0,-Nt),"bottom-left":new e.Point(It,-It),"bottom-right":new e.Point(-It,-It),left:new e.Point(Nt,0),right:new e.Point(-Nt,0)}}if(Nt instanceof e.Point||Array.isArray(Nt)){var Lt=e.Point.convert(Nt);return{center:Lt,top:Lt,"top-left":Lt,"top-right":Lt,bottom:Lt,"bottom-left":Lt,"bottom-right":Lt,left:Lt,right:Lt}}return{center:e.Point.convert(Nt.center||[0,0]),top:e.Point.convert(Nt.top||[0,0]),"top-left":e.Point.convert(Nt["top-left"]||[0,0]),"top-right":e.Point.convert(Nt["top-right"]||[0,0]),bottom:e.Point.convert(Nt.bottom||[0,0]),"bottom-left":e.Point.convert(Nt["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(Nt["bottom-right"]||[0,0]),left:e.Point.convert(Nt.left||[0,0]),right:e.Point.convert(Nt.right||[0,0])}}return St(new e.Point(0,0))}(this.options.offset);if(!_e){var Oe,Xe=this._container.offsetWidth,nt=this._container.offsetHeight;Oe=me.y+Ae.bottom.y<nt?["top"]:me.y>this._map.transform.height-nt?["bottom"]:[],me.x<Xe/2?Oe.push("left"):me.x>this._map.transform.width-Xe/2&&Oe.push("right"),_e=0===Oe.length?"bottom":Oe.join("-")}var dt=me.add(Ae[_e]).round();t.setTransform(this._container,ls[_e]+" translate("+dt.x+"px,"+dt.y+"px)"),To(this._container,_e,"popup")}},N.prototype._onClose=function(){this.remove()},N}(e.Evented),pe={version:e.version,supported:r,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Zr,NavigationControl:Qi,GeolocateControl:vs,AttributionControl:Oi,ScaleControl:Ol,FullscreenControl:us,Popup:wc,Marker:bu,Style:pi,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){it().acquire(zt)},clearPrewarmedResources:function(){var O=Bt;O&&(O.isPreloaded()&&1===O.numActive()?(O.release(zt),Bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(O){e.config.ACCESS_TOKEN=O},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(O){e.config.API_URL=O},get workerCount(){return gt.workerCount},set workerCount(O){gt.workerCount=O},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(O){e.config.MAX_PARALLEL_IMAGE_REQUESTS=O},clearStorage:function(O){e.clearTileCache(O)},workerUrl:""};return pe}),T},"object"==typeof ie&&void 0!==ae?ae.exports=x():(g=g||self).mapboxgl=x()},{}],240:[function(_,ae,ie){"use strict";ae.exports=Math.log2||function(g){return Math.log(g)*Math.LOG2E}},{}],241:[function(_,ae,ie){"use strict";ae.exports=function(x,T){T||(T=x,x=window);var b=0,e=0,r=0,t={shift:!1,alt:!1,control:!1,meta:!1},a=!1;function n(w){var v=!1;return"altKey"in w&&(v=v||w.altKey!==t.alt,t.alt=!!w.altKey),"shiftKey"in w&&(v=v||w.shiftKey!==t.shift,t.shift=!!w.shiftKey),"ctrlKey"in w&&(v=v||w.ctrlKey!==t.control,t.control=!!w.ctrlKey),"metaKey"in w&&(v=v||w.metaKey!==t.meta,t.meta=!!w.metaKey),v}function d(w,v){var A=g.x(v),M=g.y(v);"buttons"in v&&(w=0|v.buttons),(w!==b||A!==e||M!==r||n(v))&&(b=0|w,e=A||0,r=M||0,T&&T(b,e,r,t))}function s(w){d(0,w)}function i(){(b||e||r||t.shift||t.alt||t.meta||t.control)&&(e=r=0,b=0,t.shift=t.alt=t.control=t.meta=!1,T&&T(0,0,0,t))}function u(w){n(w)&&T&&T(b,e,r,t)}function f(w){0===g.buttons(w)?d(0,w):d(b,w)}function p(w){d(b|g.buttons(w),w)}function y(w){d(b&~g.buttons(w),w)}function m(){a||(a=!0,x.addEventListener("mousemove",f),x.addEventListener("mousedown",p),x.addEventListener("mouseup",y),x.addEventListener("mouseleave",s),x.addEventListener("mouseenter",s),x.addEventListener("mouseout",s),x.addEventListener("mouseover",s),x.addEventListener("blur",i),x.addEventListener("keyup",u),x.addEventListener("keydown",u),x.addEventListener("keypress",u),x!==window&&(window.addEventListener("blur",i),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}m();var l={element:x};return Object.defineProperties(l,{enabled:{get:function(){return a},set:function(w){w?m():!a||(a=!1,x.removeEventListener("mousemove",f),x.removeEventListener("mousedown",p),x.removeEventListener("mouseup",y),x.removeEventListener("mouseleave",s),x.removeEventListener("mouseenter",s),x.removeEventListener("mouseout",s),x.removeEventListener("mouseover",s),x.removeEventListener("blur",i),x.removeEventListener("keyup",u),x.removeEventListener("keydown",u),x.removeEventListener("keypress",u),x!==window&&(window.removeEventListener("blur",i),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))},enumerable:!0},buttons:{get:function(){return b},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return r},enumerable:!0},mods:{get:function(){return t},enumerable:!0}}),l};var g=_("mouse-event")},{"mouse-event":243}],242:[function(_,ae,ie){var g={left:0,top:0};ae.exports=function(x,T,b){T=T||x.currentTarget||x.srcElement,Array.isArray(b)||(b=[0,0]);var a,e=x.clientX||0,r=x.clientY||0,t=(a=T)===window||a===document||a===document.body?g:a.getBoundingClientRect();return b[0]=e-t.left,b[1]=r-t.top,b}},{}],243:[function(_,ae,ie){"use strict";function g(x){return x.target||x.srcElement||window}ie.buttons=function(x){if("object"==typeof x){if("buttons"in x)return x.buttons;if("which"in x){if(2===(T=x.which))return 4;if(3===T)return 2;if(T>0)return 1<<T-1}else if("button"in x){var T;if(1===(T=x.button))return 4;if(2===T)return 2;if(T>=0)return 1<<T}}return 0},ie.element=g,ie.x=function(x){if("object"==typeof x){if("offsetX"in x)return x.offsetX;var T=g(x).getBoundingClientRect();return x.clientX-T.left}return 0},ie.y=function(x){if("object"==typeof x){if("offsetY"in x)return x.offsetY;var T=g(x).getBoundingClientRect();return x.clientY-T.top}return 0}},{}],244:[function(_,ae,ie){"use strict";var g=_("to-px");ae.exports=function(x,T,b){"function"==typeof x&&(b=!!T,T=x,x=window);var e=g("ex",x),r=function(t){b&&t.preventDefault();var a=t.deltaX||0,n=t.deltaY||0,d=t.deltaZ||0,s=1;switch(t.deltaMode){case 1:s=e;break;case 2:s=window.innerHeight}if(n*=s,d*=s,(a*=s)||n||d)return T(a,n,d,t)};return x.addEventListener("wheel",r),r}},{"to-px":314}],245:[function(_,ae,ie){(function(g,x){(function(){var T,b,e;e=function(){"use strict";var T,b,e,r=Object.prototype.toString,t=void 0!==x?function(w){return x(w)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(w,v,A,M){return Object.defineProperty(w,v,{value:A,writable:!0,configurable:!1!==M})}}catch(w){T=function(v,A,M){return v[A]=M,v}}function a(w,v){e.add(w,v),b||(b=t(e.drain))}function n(w){var v,A=typeof w;return null==w||"object"!=A&&"function"!=A||(v=w.then),"function"==typeof v&&v}function d(){for(var w=0;w<this.chain.length;w++)s(this,1===this.state?this.chain[w].success:this.chain[w].failure,this.chain[w]);this.chain.length=0}function s(w,v,A){var M,k;try{!1===v?A.reject(w.msg):(M=!0===v?w.msg:v.call(void 0,w.msg))===A.promise?A.reject(TypeError("Promise-chain cycle")):(k=n(M))?k.call(M,A.resolve,A.reject):A.resolve(M)}catch(E){A.reject(E)}}function i(w){var v,A=this;if(!A.triggered){A.triggered=!0,A.def&&(A=A.def);try{(v=n(w))?a(function(){var M=new p(A);try{v.call(w,function(){i.apply(M,arguments)},function(){u.apply(M,arguments)})}catch(k){u.call(M,k)}}):(A.msg=w,A.state=1,A.chain.length>0&&a(d,A))}catch(M){u.call(new p(A),M)}}}function u(w){var v=this;v.triggered||(v.triggered=!0,v.def&&(v=v.def),v.msg=w,v.state=2,v.chain.length>0&&a(d,v))}function f(w,v,A,M){for(var k=0;k<v.length;k++)!function(E){w.resolve(v[E]).then(function(P){A(E,P)},M)}(k)}function p(w){this.def=w,this.triggered=!1}function y(w){this.promise=w,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(w){if("function"!=typeof w)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var v=new y(this);this.then=function(A,M){var k={success:"function"!=typeof A||A,failure:"function"==typeof M&&M};return k.promise=new this.constructor(function(E,P){if("function"!=typeof E||"function"!=typeof P)throw TypeError("Not a function");k.resolve=E,k.reject=P}),v.chain.push(k),0!==v.state&&a(d,v),k.promise},this.catch=function(A){return this.then(void 0,A)};try{w.call(void 0,function(A){i.call(v,A)},function(A){u.call(v,A)})}catch(A){u.call(v,A)}}e=function(){var w,v,A;function M(k,E){this.fn=k,this.self=E,this.next=void 0}return{add:function(k,E){A=new M(k,E),v?v.next=A:w=A,v=A,A=void 0},drain:function(){var k=w;for(w=v=b=void 0;k;)k.fn.call(k.self),k=k.next}}}();var l=T({},"constructor",m,!1);return m.prototype=l,T(l,"__NPO__",0,!1),T(m,"resolve",function(w){return w&&"object"==typeof w&&1===w.__NPO__?w:new this(function(v,A){if("function"!=typeof v||"function"!=typeof A)throw TypeError("Not a function");v(w)})}),T(m,"reject",function(w){return new this(function(v,A){if("function"!=typeof v||"function"!=typeof A)throw TypeError("Not a function");A(w)})}),T(m,"all",function(w){var v=this;return"[object Array]"!=r.call(w)?v.reject(TypeError("Not an array")):0===w.length?v.resolve([]):new v(function(A,M){if("function"!=typeof A||"function"!=typeof M)throw TypeError("Not a function");var k=w.length,E=Array(k),P=0;f(v,w,function(S,F){E[S]=F,++P===k&&A(E)},M)})}),T(m,"race",function(w){var v=this;return"[object Array]"!=r.call(w)?v.reject(TypeError("Not an array")):new v(function(A,M){if("function"!=typeof A||"function"!=typeof M)throw TypeError("Not a function");f(v,w,function(k,E){A(E)},M)})}),m},(b=void 0!==g?g:this)[T="Promise"]=b[T]||e(),void 0!==ae&&ae.exports&&(ae.exports=b[T])}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},_("timers").setImmediate)},{timers:311}],246:[function(_,ae,ie){var g=Math.PI,x=t(120);function T(a,n,d,s){return["C",a,n,d,s,d,s]}function b(a,n,d,s,i,u){return["C",a/3+2/3*d,n/3+2/3*s,i/3+2/3*d,u/3+2/3*s,i,u]}function e(a,n,d,s,i,u,f,p,y,m){if(m)F=m[0],R=m[1],P=m[2],S=m[3];else{var l=r(a,n,-i);n=l.y;var w=((a=l.x)-(p=(l=r(p,y,-i)).x))/2,v=(n-(y=l.y))/2,A=w*w/(d*d)+v*v/(s*s);A>1&&(d*=A=Math.sqrt(A),s*=A);var M=d*d,k=s*s,E=(u==f?-1:1)*Math.sqrt(Math.abs((M*k-M*v*v-k*w*w)/(M*v*v+k*w*w)));E==1/0&&(E=1);var P=E*d*v/s+(a+p)/2,S=E*-s*w/d+(n+y)/2,F=Math.asin(((n-S)/s).toFixed(9)),R=Math.asin(((y-S)/s).toFixed(9));(F=a<P?g-F:F)<0&&(F=2*g+F),(R=p<P?g-R:R)<0&&(R=2*g+R),f&&F>R&&(F-=2*g),!f&&R>F&&(R-=2*g)}if(Math.abs(R-F)>x){var D=R,L=p,B=y;R=F+x*(f&&R>F?1:-1);var V=e(p=P+d*Math.cos(R),y=S+s*Math.sin(R),d,s,i,0,f,L,B,[R,D,P,S])}var Z=Math.tan((R-F)/4),Y=4/3*d*Z,ee=4/3*s*Z,Q=[2*a-(a+Y*Math.sin(F)),2*n-(n-ee*Math.cos(F)),p+Y*Math.sin(R),y-ee*Math.cos(R),p,y];if(m)return Q;V&&(Q=Q.concat(V));for(var $=0;$<Q.length;){var K=r(Q[$],Q[$+1],i);Q[$++]=K.x,Q[$++]=K.y}return Q}function r(a,n,d){return{x:a*Math.cos(d)-n*Math.sin(d),y:a*Math.sin(d)+n*Math.cos(d)}}function t(a){return a*(g/180)}ae.exports=function(a){for(var n,d=[],s=0,i=0,u=0,f=0,p=null,y=null,m=0,l=0,w=0,v=a.length;w<v;w++){var A=a[w],M=A[0];switch(M){case"M":u=A[1],f=A[2];break;case"A":(A=e(m,l,A[1],A[2],t(A[3]),A[4],A[5],A[6],A[7])).unshift("C"),A.length>7&&(d.push(A.splice(0,7)),A.unshift("C"));break;case"S":var k=m,E=l;"C"!=n&&"S"!=n||(k+=k-s,E+=E-i),A=["C",k,E,A[1],A[2],A[3],A[4]];break;case"T":"Q"==n||"T"==n?(p=2*m-p,y=2*l-y):(p=m,y=l),A=b(m,l,p,y,A[1],A[2]);break;case"Q":p=A[1],y=A[2],A=b(m,l,A[1],A[2],A[3],A[4]);break;case"L":A=T(m,l,A[1],A[2]);break;case"H":A=T(m,l,A[1],l);break;case"V":A=T(m,l,m,A[1]);break;case"Z":A=T(m,l,u,f)}n=M,m=A[A.length-2],l=A[A.length-1],A.length>4?(s=A[A.length-4],i=A[A.length-3]):(s=m,i=l),d.push(A)}return d}},{}],247:[function(_,ae,ie){"use strict";var g=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;function b(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}ae.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(n){return r[n]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(n){a[n]=n}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(n){return!1}}()?Object.assign:function(e,r){for(var t,a,n=b(e),d=1;d<arguments.length;d++){for(var s in t=Object(arguments[d]))x.call(t,s)&&(n[s]=t[s]);if(g){a=g(t);for(var i=0;i<a.length;i++)T.call(t,a[i])&&(n[a[i]]=t[a[i]])}}return n}},{}],248:[function(_,ae,ie){"use strict";function g(b,e){if("string"!=typeof b)return[b];var r=[b];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var t=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],a=e.escape||"___",n=!!e.flat;t.forEach(function(s){var i=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),u=[];function f(p,y,m){var l=r.push(p.slice(s[0].length,-s[1].length))-1;return u.push(l),a+l+a}r.forEach(function(p,y){for(var m,l=0;p!=m;)if(m=p,p=p.replace(i,f),l++>1e4)throw Error("References have circular dependency. Please, check them.");r[y]=p}),u=u.reverse(),r=r.map(function(p){return u.forEach(function(y){p=p.replace(new RegExp("(\\"+a+y+"\\"+a+")","g"),s[0]+"$1"+s[1])}),p})});var d=new RegExp("\\"+a+"([0-9]+)\\"+a);return n?r:function s(i,u,f){for(var p,y=[],m=0;p=d.exec(i);){if(m++>1e4)throw Error("Circular references in parenthesis");y.push(i.slice(0,p.index)),y.push(s(u[p[1]],u)),i=i.slice(p.index+p[0].length)}return y.push(i),y}(r[0],r)}function x(b,e){if(e&&e.flat){var r,t=e&&e.escape||"___",a=b[0];if(!a)return"";for(var n=new RegExp("\\"+t+"([0-9]+)\\"+t),d=0;a!=r;){if(d++>1e4)throw Error("Circular references in "+b);r=a,a=a.replace(n,s)}return a}return b.reduce(function i(u,f){return Array.isArray(f)&&(f=f.reduce(i,"")),u+f},"");function s(i,u){if(null==b[u])throw Error("Reference "+u+"is undefined");return b[u]}}function T(b,e){return Array.isArray(b)?x(b,e):g(b,e)}T.parse=g,T.stringify=x,ae.exports=T},{}],249:[function(_,ae,ie){"use strict";var g=_("pick-by-alias");ae.exports=function(x){var T;return arguments.length>1&&(x=arguments),"string"==typeof x?x=x.split(/\s/).map(parseFloat):"number"==typeof x&&(x=[x]),x.length&&"number"==typeof x[0]?T=1===x.length?{width:x[0],height:x[0],x:0,y:0}:2===x.length?{width:x[0],height:x[1],x:0,y:0}:{x:x[0],y:x[1],width:x[2]-x[0]||0,height:x[3]-x[1]||0}:x&&((T={x:(x=g(x,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:x.top||0}).width=null==x.width?x.right?x.right-T.x:0:x.width,T.height=null==x.height?x.bottom?x.bottom-T.y:0:x.height),T}},{"pick-by-alias":253}],250:[function(_,ae,ie){ae.exports=function(b){var e=[];return b.replace(x,function(r,t,a){var s,n=t.toLowerCase();for(s=void 0,a=(s=a.match(T))?s.map(Number):[],"m"==n&&a.length>2&&(e.push([t].concat(a.splice(0,2))),n="l",t="m"==t?"l":"L");;){if(a.length==g[n])return a.unshift(t),e.push(a);if(a.length<g[n])throw new Error("malformed path data");e.push([t].concat(a.splice(0,g[n])))}}),e};var g={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},x=/([astvzqmhlc])([^astvzqmhlc]*)/gi,T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(_,ae,ie){ae.exports=function(g,x){x||(x=[0,""]),g=String(g);var T=parseFloat(g,10);return x[0]=T,x[1]=g.match(/[\d.\-\+]*\s*(.*)/)[1]||"",x}},{}],252:[function(_,ae,ie){(function(g){(function(){(function(){var x,T,b,e,r,t;"undefined"!=typeof performance&&null!==performance&&performance.now?ae.exports=function(){return performance.now()}:null!=g&&g.hrtime?(ae.exports=function(){return(x()-r)/1e6},T=g.hrtime,e=(x=function(){var a;return 1e9*(a=T())[0]+a[1]})(),t=1e9*g.uptime(),r=e-t):Date.now?(ae.exports=function(){return Date.now()-b},b=Date.now()):(ae.exports=function(){return(new Date).getTime()-b},b=(new Date).getTime())}).call(this)}).call(this)}).call(this,_("_process"))},{_process:277}],253:[function(_,ae,ie){"use strict";ae.exports=function(T,b,e){var r,t,a={};if("string"==typeof b&&(b=x(b)),Array.isArray(b)){var n={};for(t=0;t<b.length;t++)n[b[t]]=!0;b=n}for(r in b)b[r]=x(b[r]);var d={};for(r in b){var s=b[r];if(Array.isArray(s))for(t=0;t<s.length;t++){var i=s[t];if(e&&(d[i]=!0),i in T){if(a[r]=T[i],e)for(var u=t;u<s.length;u++)d[s[u]]=!0;break}}else r in T&&(b[r]&&(a[r]=T[r]),e&&(d[r]=!0))}if(e)for(r in T)d[r]||(a[r]=T[r]);return a};var g={};function x(T){return g[T]?g[T]:("string"==typeof T&&(T=g[T]=T.split(/\s*,\s*|\s+/)),T)}},{}],254:[function(_,ae,ie){var g,x=_("./lib/build-log"),T=_("./lib/epsilon"),b=_("./lib/intersecter"),e=_("./lib/segment-chainer"),r=_("./lib/segment-selector"),t=_("./lib/geojson"),a=!1,n=T();function d(s,i,u){var f=g.segments(s),p=g.segments(i),y=u(g.combine(f,p));return g.polygon(y)}g={buildLog:function(s){return!0===s?a=x():!1===s&&(a=!1),!1!==a&&a.list},epsilon:function(s){return n.epsilon(s)},segments:function(s){var i=b(!0,n,a);return s.regions.forEach(i.addRegion),{segments:i.calculate(s.inverted),inverted:s.inverted}},combine:function(s,i){return{combined:b(!1,n,a).calculate(s.segments,s.inverted,i.segments,i.inverted),inverted1:s.inverted,inverted2:i.inverted}},selectUnion:function(s){return{segments:r.union(s.combined,a),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:r.intersect(s.combined,a),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:r.difference(s.combined,a),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:r.differenceRev(s.combined,a),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:r.xor(s.combined,a),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:e(s.segments,n,a),inverted:s.inverted}},polygonFromGeoJSON:function(s){return t.toPolygon(g,s)},polygonToGeoJSON:function(s){return t.fromPolygon(g,n,s)},union:function(s,i){return d(s,i,g.selectUnion)},intersect:function(s,i){return d(s,i,g.selectIntersect)},difference:function(s,i){return d(s,i,g.selectDifference)},differenceRev:function(s,i){return d(s,i,g.selectDifferenceRev)},xor:function(s,i){return d(s,i,g.selectXor)}},"object"==typeof window&&(window.PolyBool=g),ae.exports=g},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(_,ae,ie){ae.exports=function(){var g,x=0,T=!1;function b(e,r){return g.list.push({type:e,data:r?JSON.parse(JSON.stringify(r)):void 0}),g}return g={list:[],segmentId:function(){return x++},checkIntersection:function(e,r){return b("check",{seg1:e,seg2:r})},segmentChop:function(e,r){return b("div_seg",{seg:e,pt:r}),b("chop",{seg:e,pt:r})},statusRemove:function(e){return b("pop_seg",{seg:e})},segmentUpdate:function(e){return b("seg_update",{seg:e})},segmentNew:function(e,r){return b("new_seg",{seg:e,primary:r})},segmentRemove:function(e){return b("rem_seg",{seg:e})},tempStatus:function(e,r,t){return b("temp_status",{seg:e,above:r,below:t})},rewind:function(e){return b("rewind",{seg:e})},status:function(e,r,t){return b("status",{seg:e,above:r,below:t})},vert:function(e){return e===T?g:(T=e,b("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),b("log",{txt:e})},reset:function(){return b("reset")},selected:function(e){return b("selected",{segs:e})},chainStart:function(e){return b("chain_start",{seg:e})},chainRemoveHead:function(e,r){return b("chain_rem_head",{index:e,pt:r})},chainRemoveTail:function(e,r){return b("chain_rem_tail",{index:e,pt:r})},chainNew:function(e,r){return b("chain_new",{pt1:e,pt2:r})},chainMatch:function(e){return b("chain_match",{index:e})},chainClose:function(e){return b("chain_close",{index:e})},chainAddHead:function(e,r){return b("chain_add_head",{index:e,pt:r})},chainAddTail:function(e,r){return b("chain_add_tail",{index:e,pt:r})},chainConnect:function(e,r){return b("chain_con",{index1:e,index2:r})},chainReverse:function(e){return b("chain_rev",{index:e})},chainJoin:function(e,r){return b("chain_join",{index1:e,index2:r})},done:function(){return b("done")}}}},{}],256:[function(_,ae,ie){ae.exports=function(g){"number"!=typeof g&&(g=1e-10);var x={epsilon:function(T){return"number"==typeof T&&(g=T),g},pointAboveOrOnLine:function(T,b,e){var r=b[0],t=b[1];return(e[0]-r)*(T[1]-t)-(e[1]-t)*(T[0]-r)>=-g},pointBetween:function(T,b,e){var t=e[0]-b[0],n=e[1]-b[1],d=(T[0]-b[0])*t+(T[1]-b[1])*n;return!(d<g||d-(t*t+n*n)>-g)},pointsSameX:function(T,b){return Math.abs(T[0]-b[0])<g},pointsSameY:function(T,b){return Math.abs(T[1]-b[1])<g},pointsSame:function(T,b){return x.pointsSameX(T,b)&&x.pointsSameY(T,b)},pointsCompare:function(T,b){return x.pointsSameX(T,b)?x.pointsSameY(T,b)?0:T[1]<b[1]?-1:1:T[0]<b[0]?-1:1},pointsCollinear:function(T,b,e){return Math.abs((T[0]-b[0])*(b[1]-e[1])-(b[0]-e[0])*(T[1]-b[1]))<g},linesIntersect:function(T,b,e,r){var t=b[0]-T[0],a=b[1]-T[1],n=r[0]-e[0],d=r[1]-e[1],s=t*d-a*n;if(Math.abs(s)<g)return!1;var i=T[0]-e[0],u=T[1]-e[1],f=(n*u-d*i)/s,p=(t*u-a*i)/s,y={alongA:0,alongB:0,pt:[T[0]+f*t,T[1]+f*a]};return y.alongA=f<=-g?-2:f<g?-1:f-1<=-g?0:f-1<g?1:2,y.alongB=p<=-g?-2:p<g?-1:p-1<=-g?0:p-1<g?1:2,y},pointInsideRegion:function(T,b){for(var e=T[0],r=T[1],t=b[b.length-1][0],a=b[b.length-1][1],n=!1,d=0;d<b.length;d++){var s=b[d][0],i=b[d][1];i-r>g!=a-r>g&&(t-s)*(r-i)/(a-i)+s-e>g&&(n=!n),t=s,a=i}return n}};return x}},{}],257:[function(_,ae,ie){ae.exports={toPolygon:function(x,T){function b(t){if(t.length<=0)return x.segments({inverted:!1,regions:[]});function a(s){var i=s.slice(0,s.length-1);return x.segments({inverted:!1,regions:[i]})}for(var n=a(t[0]),d=1;d<t.length;d++)n=x.selectDifference(x.combine(n,a(t[d])));return n}if("Polygon"===T.type)return x.polygon(b(T.coordinates));if("MultiPolygon"===T.type){for(var e=x.segments({inverted:!1,regions:[]}),r=0;r<T.coordinates.length;r++)e=x.selectUnion(x.combine(e,b(T.coordinates[r])));return x.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(x,T,b){function e(p,y){return T.pointInsideRegion([.5*(p[0][0]+p[1][0]),.5*(p[0][1]+p[1][1])],y)}function r(p){return{region:p,children:[]}}b=x.polygon(x.segments(b));var t=r(null);function a(p,y){for(var m=0;m<p.children.length;m++)if(e(y,(w=p.children[m]).region))return void a(w,y);var l=r(y);for(m=0;m<p.children.length;m++){var w;e((w=p.children[m]).region,y)&&(l.children.push(w),p.children.splice(m,1),m--)}p.children.push(l)}for(var n=0;n<b.regions.length;n++){var d=b.regions[n];d.length<3||a(t,d)}function s(p,y){for(var m=0,l=p[p.length-1][0],w=p[p.length-1][1],v=[],A=0;A<p.length;A++){var M=p[A][0],k=p[A][1];v.push([M,k]),m+=k*l-M*w,l=M,w=k}return m<0!==y&&v.reverse(),v.push([v[0][0],v[0][1]]),v}var i=[];function u(p){var y=[s(p.region,!1)];i.push(y);for(var m=0;m<p.children.length;m++)y.push(f(p.children[m]))}function f(p){for(var y=0;y<p.children.length;y++)u(p.children[y]);return s(p.region,!0)}for(n=0;n<t.children.length;n++)u(t.children[n]);return i.length<=0?{type:"Polygon",coordinates:[]}:1==i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}}},{}],258:[function(_,ae,ie){var g=_("./linked-list");ae.exports=function(x,T,b){function e(s,i,u){return{id:b?b.segmentId():-1,start:s,end:i,myFill:{above:u.myFill.above,below:u.myFill.below},otherFill:null}}var r=g.create();function t(s,i){r.insertBefore(s,function(u){return f=s.isStart,y=i,m=u.isStart,w=u.other.pt,(0!==(v=T.pointsCompare(s.pt,l=u.pt))?v:T.pointsSame(y,w)?0:f!==m?f?1:-1:T.pointAboveOrOnLine(y,m?l:w,m?w:l)?1:-1)<0;var f,y,m,l,w,v})}function a(s,i){var f,y,u=(t(y=g.node({isStart:!0,pt:(f=s).start,seg:f,primary:i,other:null,status:null}),f.end),y);return function(f,p,y){var m=g.node({isStart:!1,pt:p.end,seg:p,primary:y,other:f,status:null});f.other=m,t(m,f.pt)}(u,s,i),u}function n(s,i){var f,p,u=e(i,s.seg.end,s.seg);return f=s,p=i,b&&b.segmentChop(f.seg,p),f.other.remove(),f.seg.end=p,f.other.pt=p,t(f.other,f.pt),a(u,s.primary)}function d(s,i){var u=g.create();function f(F){return u.findTransition(function(R){var D,L,B,V,Z,Y;return V=(D=F).seg.end,(T.pointsCollinear(B=D.seg.start,Z=(L=R.ev).seg.start,Y=L.seg.end)?T.pointsCollinear(V,Z,Y)||T.pointAboveOrOnLine(V,Z,Y)?1:-1:T.pointAboveOrOnLine(B,Z,Y)?1:-1)>0})}function p(F,R){var D=F.seg,L=R.seg,B=D.start,V=D.end,Z=L.start,Y=L.end;b&&b.checkIntersection(D,L);var ee=T.linesIntersect(B,V,Z,Y);if(!1===ee){if(!T.pointsCollinear(B,V,Z)||T.pointsSame(B,Y)||T.pointsSame(V,Z))return!1;var Q=T.pointsSame(B,Z),$=T.pointsSame(V,Y);if(Q&&$)return R;var K=!Q&&T.pointBetween(B,Z,Y),oe=!$&&T.pointBetween(V,Z,Y);if(Q)return oe?n(R,V):n(F,Y),R;K&&($||(oe?n(R,V):n(F,Y)),n(R,B))}else 0===ee.alongA&&(-1===ee.alongB?n(F,Z):0===ee.alongB?n(F,ee.pt):1===ee.alongB&&n(F,Y)),0===ee.alongB&&(-1===ee.alongA?n(R,B):0===ee.alongA?n(R,ee.pt):1===ee.alongA&&n(R,V));return!1}for(var y=[];!r.isEmpty();){var m=r.getHead();if(b&&b.vert(m.pt[0]),m.isStart){let F=function(){if(w){var R=p(m,w);if(R)return R}return!!v&&p(m,v)};b&&b.segmentNew(m.seg,m.primary);var l=f(m),w=l.before?l.before.ev:null,v=l.after?l.after.ev:null;b&&b.tempStatus(m.seg,!!w&&w.seg,!!v&&v.seg);var A,k,M=F();if(M&&(x?(k=null===m.seg.myFill.below||m.seg.myFill.above!==m.seg.myFill.below)&&(M.seg.myFill.above=!M.seg.myFill.above):M.seg.otherFill=m.seg.myFill,b&&b.segmentUpdate(M.seg),m.other.remove(),m.remove()),r.getHead()!==m){b&&b.rewind(m.seg);continue}x?(k=null===m.seg.myFill.below||m.seg.myFill.above!==m.seg.myFill.below,m.seg.myFill.below=v?v.seg.myFill.above:s,m.seg.myFill.above=k?!m.seg.myFill.below:m.seg.myFill.below):null===m.seg.otherFill&&(m.seg.otherFill={above:A=v?m.primary===v.primary?v.seg.otherFill.above:v.seg.myFill.above:m.primary?i:s,below:A}),b&&b.status(m.seg,!!w&&w.seg,!!v&&v.seg),m.other.status=l.insert(g.node({ev:m}))}else{var E=m.status;if(null===E)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(u.exists(E.prev)&&u.exists(E.next)&&p(E.prev.ev,E.next.ev),b&&b.statusRemove(E.ev.seg),E.remove(),!m.primary){var P=m.seg.myFill;m.seg.myFill=m.seg.otherFill,m.seg.otherFill=P}y.push(m.seg)}r.getHead().remove()}return b&&b.done(),y}return x?{addRegion:function(s){for(var i,u,f,p=s[s.length-1],y=0;y<s.length;y++){var m=T.pointsCompare(i=p,p=s[y]);0!==m&&a((u=m<0?i:p,f=m<0?p:i,{id:b?b.segmentId():-1,start:u,end:f,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(s){return d(s,!1)}}:{calculate:function(s,i,u,f){return s.forEach(function(p){a(e(p.start,p.end,p),!0)}),u.forEach(function(p){a(e(p.start,p.end,p),!1)}),d(i,f)}}}},{"./linked-list":259}],259:[function(_,ae,ie){ae.exports={create:function(){var g={root:{root:!0,next:null},exists:function(x){return null!==x&&x!==g.root},isEmpty:function(){return null===g.root.next},getHead:function(){return g.root.next},insertBefore:function(x,T){for(var b=g.root,e=g.root.next;null!==e;){if(T(e))return x.prev=e.prev,x.next=e,e.prev.next=x,void(e.prev=x);b=e,e=e.next}b.next=x,x.prev=b,x.next=null},findTransition:function(x){for(var T=g.root,b=g.root.next;null!==b&&!x(b);)T=b,b=b.next;return{before:T===g.root?null:T,after:b,insert:function(e){return e.prev=T,e.next=b,T.next=e,null!==b&&(b.prev=e),e}}}};return g},node:function(g){return g.prev=null,g.next=null,g.remove=function(){g.prev.next=g.next,g.next&&(g.next.prev=g.prev),g.prev=null,g.next=null},g}}},{}],260:[function(_,ae,ie){ae.exports=function(g,x,T){var b=[],e=[];return g.forEach(function(r){var t=r.start,a=r.end;if(x.pointsSame(t,a))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{T&&T.chainStart(r);for(var n={index:0,matches_head:!1,matches_pt1:!1},d={index:0,matches_head:!1,matches_pt1:!1},s=n,i=0;i<b.length;i++){var u=(l=b[i])[0],f=l[l.length-1];if(x.pointsSame(u,t)){if(S(i,!0,!0))break}else if(x.pointsSame(u,a)){if(S(i,!0,!1))break}else if(x.pointsSame(f,t)){if(S(i,!1,!0))break}else if(x.pointsSame(f,a)&&S(i,!1,!1))break}if(s===n)return b.push([t,a]),void(T&&T.chainNew(t,a));if(s===d){T&&T.chainMatch(n.index);var p=n.index,y=n.matches_pt1?a:t,m=n.matches_head,l=b[p],w=m?l[0]:l[l.length-1],v=m?l[1]:l[l.length-2],A=m?l[l.length-1]:l[0],M=m?l[l.length-2]:l[1];return x.pointsCollinear(v,w,y)&&(m?(T&&T.chainRemoveHead(n.index,y),l.shift()):(T&&T.chainRemoveTail(n.index,y),l.pop()),w=v),x.pointsSame(A,y)?(b.splice(p,1),x.pointsCollinear(M,A,w)&&(m?(T&&T.chainRemoveTail(n.index,w),l.pop()):(T&&T.chainRemoveHead(n.index,w),l.shift())),T&&T.chainClose(n.index),void e.push(l)):void(m?(T&&T.chainAddHead(n.index,y),l.unshift(y)):(T&&T.chainAddTail(n.index,y),l.push(y)))}var k=n.index,E=d.index;T&&T.chainConnect(k,E);var P=b[k].length<b[E].length;n.matches_head?d.matches_head?P?(F(k),R(k,E)):(F(E),R(E,k)):R(E,k):d.matches_head?R(k,E):P?(F(k),R(E,k)):(F(E),R(k,E))}function S(D,L,B){return s.index=D,s.matches_head=L,s.matches_pt1=B,s===n?(s=d,!1):(s=null,!0)}function F(D){T&&T.chainReverse(D),b[D].reverse()}function R(D,L){var B=b[D],V=b[L],Z=B[B.length-1],Y=B[B.length-2],ee=V[0],Q=V[1];x.pointsCollinear(Y,Z,ee)&&(T&&T.chainRemoveTail(D,Z),B.pop(),Z=Y),x.pointsCollinear(Z,ee,Q)&&(T&&T.chainRemoveHead(L,ee),V.shift()),T&&T.chainJoin(D,L),b[D]=B.concat(V),b.splice(L,1)}}),e}},{}],261:[function(_,ae,ie){function g(T,b,e){var r=[];return T.forEach(function(t){var a=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==b[a]&&r.push({id:e?e.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===b[a],below:2===b[a]},otherFill:null})}),e&&e.selected(r),r}ae.exports={union:function(T,b){return g(T,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],b)},intersect:function(T,b){return g(T,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],b)},difference:function(T,b){return g(T,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],b)},differenceRev:function(T,b){return g(T,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],b)},xor:function(T,b){return g(T,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],b)}}},{}],262:[function(_,ae,ie){"use strict";var g=_("stream").Transform,x=_("stream-parser");function T(){g.call(this,{readableObjectMode:!0})}function b(e,r,t){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,r&&(this.code=r),t&&(this.statusCode=t)}(T.prototype=Object.create(g.prototype)).constructor=T,x(T.prototype),ie.ParserStream=T,ie.sliceEq=function(e,r,t){for(var a=r,n=0;n<t.length;)if(e[a++]!==t[n++])return!1;return!0},ie.str2arr=function(e,r){var t=[],a=0;if(r&&"hex"===r)for(;a<e.length;)t.push(parseInt(e.slice(a,a+2),16)),a+=2;else for(;a<e.length;a++)t.push(255&e.charCodeAt(a));return t},ie.readUInt16LE=function(e,r){return e[r]|e[r+1]<<8},ie.readUInt16BE=function(e,r){return e[r+1]|e[r]<<8},ie.readUInt32LE=function(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|16777216*e[r+3]},ie.readUInt32BE=function(e,r){return e[r+3]|e[r+2]<<8|e[r+1]<<16|16777216*e[r]},(b.prototype=Object.create(Error.prototype)).constructor=b,ie.ProbeError=b},{stream:285,"stream-parser":301}],263:[function(_,ae,ie){"use strict";function g(b,e){var r=new Error(b);return r.code=e,r}function x(b){try{return decodeURIComponent(escape(b))}catch(e){return b}}function T(b,e,r){this.input=b.subarray(e,r),this.start=e;var t=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==t&&"MM\0*"!==t)throw g("invalid TIFF signature","EBADDATA");this.big_endian="M"===t[0]}T.prototype.each=function(b){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var r=this.ifds_to_read.shift();r.offset&&this.scan_ifd(r.id,r.offset,b)}},T.prototype.read_uint16=function(b){var e=this.input;if(b+2>e.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?256*e[b]+e[b+1]:e[b]+256*e[b+1]},T.prototype.read_uint32=function(b){var e=this.input;if(b+4>e.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[b]+65536*e[b+1]+256*e[b+2]+e[b+3]:e[b]+256*e[b+1]+65536*e[b+2]+16777216*e[b+3]},T.prototype.is_subifd_link=function(b,e){return 0===b&&34665===e||0===b&&34853===e||34665===b&&40965===e},T.prototype.exif_format_length=function(b){switch(b){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},T.prototype.exif_format_read=function(b,e){var r;switch(b){case 1:case 2:return this.input[e];case 6:return(r=this.input[e])|33554430*(128&r);case 3:return this.read_uint16(e);case 8:return(r=this.read_uint16(e))|131070*(32768&r);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);default:return null}},T.prototype.scan_ifd=function(b,e,r){var t=this.read_uint16(e);e+=2;for(var a=0;a<t;a++){var n=this.read_uint16(e),d=this.read_uint16(e+2),s=this.read_uint32(e+4),i=this.exif_format_length(d),u=s*i,f=u<=4?e+8:this.read_uint32(e+8),p=!1;if(f+u>this.input.length)throw g("unexpected EOF","EBADDATA");for(var y=[],m=f,l=0;l<s;l++,m+=i){var w=this.exif_format_read(d,m);if(null===w){y=null;break}y.push(w)}if(Array.isArray(y)&&2===d&&(y=x(String.fromCharCode.apply(null,y)))&&"\0"===y[y.length-1]&&(y=y.slice(0,-1)),this.is_subifd_link(b,n)&&Array.isArray(y)&&Number.isInteger(y[0])&&y[0]>0&&(this.ifds_to_read.push({id:n,offset:y[0]}),p=!0),!1===r({is_big_endian:this.big_endian,ifd:b,tag:n,format:d,count:s,entry_offset:e+this.start,data_length:u,data_offset:f+this.start,value:y,is_subifd_link:p}))return void(this.aborted=!0);e+=12}0===b&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},ae.exports.ExifParser=T,ae.exports.get_orientation=function(b){var e=0;try{return new T(b,0,b.length).each(function(r){if(0===r.ifd&&274===r.tag&&Array.isArray(r.value))return e=r.value[0],!1}),e}catch(r){return-1}}},{}],264:[function(_,ae,ie){"use strict";var g=_("./common").readUInt16BE,x=_("./common").readUInt32BE;function T(n,d){if(n.length<4+d)return null;var s=x(n,d);return n.length<s+d||s<8?null:{boxtype:String.fromCharCode.apply(null,n.slice(d+4,d+8)),data:n.slice(d+8,d+s),end:d+s}}function b(n,d){for(var s=0;;){var i=T(n,s);if(!i)break;switch(i.boxtype){case"ispe":d.sizes.push({width:x(i.data,4),height:x(i.data,8)});break;case"irot":d.transforms.push({type:"irot",value:3&i.data[0]});break;case"imir":d.transforms.push({type:"imir",value:1&i.data[0]})}s=i.end}}function e(n,d,s){for(var i=0,u=0;u<s;u++)i=256*i+(n[d+u]||0);return i}function r(n,d){for(var s=n[4]>>4&15,i=15&n[4],u=n[5]>>4&15,f=g(n,6),p=8,y=0;y<f;y++){var m=g(n,p),l=g(n,p+=2),w=e(n,p+=2,u),v=g(n,p+=u);if(p+=2,0===l&&1===v){var A=e(n,p,s),M=e(n,p+s,i);d.item_loc[m]={length:M,offset:A+w}}p+=v*(s+i)}}function t(n,d){for(var s=g(n,4),i=6,u=0;u<s;u++){var f=T(n,i);if(!f)break;if("infe"===f.boxtype){for(var p=g(f.data,4),y="",m=8;m<f.data.length&&f.data[m];m++)y+=String.fromCharCode(f.data[m]);d.item_inf[y]=p}i=f.end}}function a(n,d){for(var s=0;;){var i=T(n,s);if(!i)break;"ipco"===i.boxtype&&b(i.data,d),s=i.end}}ae.exports.unbox=T,ae.exports.readSizeFromMeta=function(n){var d={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(m,l){for(var w=4;;){var v=T(m,w);if(!v)break;"iprp"===v.boxtype&&a(v.data,l),"iloc"===v.boxtype&&r(v.data,l),"iinf"===v.boxtype&&t(v.data,l),w=v.end}}(n,d),d.sizes.length){var s,i,u,f=(i=(s=d.sizes).reduce(function(m,l){return m.width>l.width||m.width===l.width&&m.height>l.height?m:l}),u=s.reduce(function(m,l){return m.height>l.height||m.height===l.height&&m.width>l.width?m:l}),i.width>u.height||i.width===u.height&&i.height>u.width?i:u),p=1;d.transforms.forEach(function(m){var l={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},w={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===m.type&&(p=0===m.value?w[p]:l[p=l[p=w[p]]]),"irot"===m.type)for(var v=0;v<m.value;v++)p=l[p]});var y=null;return d.item_inf.Exif&&(y=d.item_loc[d.item_inf.Exif]),{width:f.width,height:f.height,orientation:d.transforms.length?p:null,variants:d.sizes,exif_location:y}}},ae.exports.getMimeType=function(n){var d=String.fromCharCode.apply(null,n.slice(0,4)),s={};s[d]=!0;for(var i=8;i<n.length;i+=4)s[String.fromCharCode.apply(null,n.slice(i,i+4))]=!0;if(s.mif1||s.msf1||s.miaf)return"avif"===d||"avis"===d||"avio"===d?{type:"avif",mime:"image/avif"}:"heic"===d||"heix"===d?{type:"heic",mime:"image/heic"}:"hevc"===d||"hevx"===d?{type:"heic",mime:"image/heic-sequence"}:s.avif||s.avis?{type:"avif",mime:"image/avif"}:s.heic||s.heix||s.hevc||s.hevx||s.heis?s.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(_,ae,ie){"use strict";var g=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt32BE,b=_("../miaf_utils"),e=_("../exif_utils"),r=g("ftyp");ae.exports=function(t){if(x(t,4,r)){var a=b.unbox(t,0);if(a){var n=b.getMimeType(a.data);if(n){for(var d,s=a.end;;){var i=b.unbox(t,s);if(!i)break;if(s=i.end,"mdat"===i.boxtype)return;if("meta"===i.boxtype){d=i.data;break}}if(d){var u=b.readSizeFromMeta(d);if(u){var f={width:u.width,height:u.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};if(u.variants.length>1&&(f.variants=u.variants),u.orientation&&(f.orientation=u.orientation),u.exif_location&&u.exif_location.offset+u.exif_location.length<=t.length){var p=T(t,u.exif_location.offset),y=t.slice(u.exif_location.offset+p+4,u.exif_location.offset+u.exif_location.length),m=e.get_orientation(y);m>0&&(f.orientation=m)}return f}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(_,ae,ie){"use strict";var g=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=g("BM");ae.exports=function(e){if(!(e.length<26)&&x(e,0,b))return{width:T(e,18),height:T(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(_,ae,ie){"use strict";var g=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=g("GIF87a"),e=g("GIF89a");ae.exports=function(r){if(!(r.length<10)&&(x(r,0,b)||x(r,0,e)))return{width:T(r,6),height:T(r,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(_,ae,ie){"use strict";var g=_("../common").readUInt16LE;ae.exports=function(x){var T=g(x,0),b=g(x,2),e=g(x,4);if(0===T&&1===b&&e){for(var r=[],t={width:0,height:0},a=0;a<e;a++){var n=x[6+16*a]||256,d=x[6+16*a+1]||256,s={width:n,height:d};r.push(s),(n>t.width||d>t.height)&&(t=s)}return{width:t.width,height:t.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(_,ae,ie){"use strict";var g=_("../common").readUInt16BE,x=_("../common").str2arr,T=_("../common").sliceEq,b=_("../exif_utils"),e=x("Exif\0\0");ae.exports=function(r){if(!(r.length<2)&&255===r[0]&&216===r[1]&&255===r[2])for(var t=2;;){for(;;){if(r.length-t<2)return;if(255===r[t++])break}for(var a,n,d=r[t++];255===d;)d=r[t++];if(208<=d&&d<=217||1===d)a=0;else{if(!(192<=d&&d<=254)||r.length-t<2)return;a=g(r,t)-2,t+=2}if(217===d||218===d)return;if(225===d&&a>=10&&T(r,t,e)&&(n=b.get_orientation(r.slice(t+6,t+a))),a>=5&&192<=d&&d<=207&&196!==d&&200!==d&&204!==d){if(r.length-t<a)return;var s={width:g(r,t+3),height:g(r,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return n>0&&(s.orientation=n),s}t+=a}}},{"../common":262,"../exif_utils":263}],270:[function(_,ae,ie){"use strict";var g=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt32BE,b=g("\x89PNG\r\n\x1a\n"),e=g("IHDR");ae.exports=function(r){if(!(r.length<24)&&x(r,0,b)&&x(r,12,e))return{width:T(r,16),height:T(r,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(_,ae,ie){"use strict";var g=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt32BE,b=g("8BPS\0\x01");ae.exports=function(e){if(!(e.length<22)&&x(e,0,b))return{width:T(e,18),height:T(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(_,ae,ie){"use strict";function g(n){return"number"==typeof n&&isFinite(n)&&n>0}var x=/<[-_.:a-zA-Z0-9][^>]*>/,T=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,b=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,t=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function a(n){return t.test(n)?n.match(t)[0]:"px"}ae.exports=function(n){if(function(A){var M,k=0,E=A.length;for(239===A[0]&&187===A[1]&&191===A[2]&&(k=3);k<E&&(32===(M=A[k])||9===M||13===M||10===M);)k++;return k!==E&&60===A[k]}(n)){for(var d="",s=0;s<n.length;s++)d+=String.fromCharCode(n[s]);var i=(d.match(x)||[""])[0];if(T.test(i)){var u=(M=(A=i).match(b),k=A.match(e),E=A.match(r),{width:M&&(M[1]||M[2]),height:k&&(k[1]||k[2]),viewbox:E&&(E[1]||E[2])}),f=parseFloat(u.width),p=parseFloat(u.height);if(u.width&&u.height)return g(f)&&g(p)?{width:f,height:p,type:"svg",mime:"image/svg+xml",wUnits:a(u.width),hUnits:a(u.height)}:void 0;var y=(u.viewbox||"").split(" "),m={width:y[2],height:y[3]},l=parseFloat(m.width),w=parseFloat(m.height);if(g(l)&&g(w)&&a(m.width)===a(m.height)){var v=l/w;return u.width?g(f)?{width:f,height:f/v,type:"svg",mime:"image/svg+xml",wUnits:a(u.width),hUnits:a(u.width)}:void 0:u.height?g(p)?{width:p*v,height:p,type:"svg",mime:"image/svg+xml",wUnits:a(u.height),hUnits:a(u.height)}:void 0:{width:l,height:w,type:"svg",mime:"image/svg+xml",wUnits:a(m.width),hUnits:a(m.height)}}}}var A,M,k,E}},{}],273:[function(_,ae,ie){"use strict";var g=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=_("../common").readUInt16BE,e=_("../common").readUInt32LE,r=_("../common").readUInt32BE,t=g("II*\0"),a=g("MM\0*");function n(i,u,f){return f?b(i,u):T(i,u)}function d(i,u,f){return f?r(i,u):e(i,u)}function s(i,u,f){var p=n(i,u+2,f);return 1!==d(i,u+4,f)||3!==p&&4!==p?null:3===p?n(i,u+8,f):d(i,u+8,f)}ae.exports=function(i){if(!(i.length<8)&&(x(i,0,t)||x(i,0,a))){var u=77===i[0],f=d(i,4,u)-8;if(!(f<0)){var p=f+8;if(!(i.length-p<2)){var y=12*n(i,p+0,u);if(!(y<=0||(p+=2,i.length-p<y))){var m,l,w,v;for(m=0;m<y;m+=12)256===(v=n(i,p+m,u))?l=s(i,p+m,u):257===v&&(w=s(i,p+m,u));return l&&w?{width:l,height:w,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":262}],274:[function(_,ae,ie){"use strict";var g=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=_("../common").readUInt32LE,e=_("../exif_utils"),r=g("RIFF"),t=g("WEBP");function a(s,i){if(157===s[i+3]&&1===s[i+4]&&42===s[i+5])return{width:16383&T(s,i+6),height:16383&T(s,i+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function n(s,i){if(47===s[i]){var u=b(s,i+1);return{width:1+(16383&u),height:1+(u>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function d(s,i){return{width:1+(s[i+6]<<16|s[i+5]<<8|s[i+4]),height:1+(s[i+9]<<i|s[i+8]<<8|s[i+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ae.exports=function(s){if(!(s.length<16)&&(x(s,0,r)||x(s,8,t))){var i=12,u=null,f=0,p=b(s,4)+8;if(!(p>s.length)){for(;i+8<p;)if(0!==s[i]){var y=String.fromCharCode.apply(null,s.slice(i,i+4)),m=b(s,i+4);"VP8 "===y&&m>=10?u=u||a(s,i+8):"VP8L"===y&&m>=9?u=u||n(s,i+8):"VP8X"===y&&m>=10?u=u||d(s,i+8):"EXIF"===y&&(f=e.get_orientation(s.slice(i+8,i+8+m)),i=1/0),i+=8+m}else i++;if(u)return f>0&&(u.orientation=f),u}}}},{"../common":262,"../exif_utils":263}],275:[function(_,ae,ie){"use strict";ae.exports={avif:_("./parse_sync/avif"),bmp:_("./parse_sync/bmp"),gif:_("./parse_sync/gif"),ico:_("./parse_sync/ico"),jpeg:_("./parse_sync/jpeg"),png:_("./parse_sync/png"),psd:_("./parse_sync/psd"),svg:_("./parse_sync/svg"),tiff:_("./parse_sync/tiff"),webp:_("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(_,ae,ie){"use strict";var g=_("./lib/parsers_sync");ae.exports=function(x){return function(T){for(var b=Object.keys(g),e=0;e<b.length;e++){var r=g[b[e]](T);if(r)return r}return null}(x)},ae.exports.parsers=g},{"./lib/parsers_sync":275}],277:[function(_,ae,ie){var g,x,T=ae.exports={};function b(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function r(p){if(g===setTimeout)return setTimeout(p,0);if((g===b||!g)&&setTimeout)return g=setTimeout,setTimeout(p,0);try{return g(p,0)}catch(y){try{return g.call(null,p,0)}catch(m){return g.call(this,p,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:b}catch(p){g=b}try{x="function"==typeof clearTimeout?clearTimeout:e}catch(p){x=e}}();var t,a=[],n=!1,d=-1;function s(){n&&t&&(n=!1,t.length?a=t.concat(a):d=-1,a.length&&i())}function i(){if(!n){var p=r(s);n=!0;for(var y=a.length;y;){for(t=a,a=[];++d<y;)t&&t[d].run();d=-1,y=a.length}t=null,n=!1,function(m){if(x===clearTimeout)return clearTimeout(m);if((x===e||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(m);try{x(m)}catch(l){try{return x.call(null,m)}catch(w){return x.call(this,m)}}}(p)}}function u(p,y){this.fun=p,this.array=y}function f(){}T.nextTick=function(p){var y=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)y[m-1]=arguments[m];a.push(new u(p,y)),1!==a.length||n||r(i)},u.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=f,T.addListener=f,T.once=f,T.off=f,T.removeListener=f,T.removeAllListeners=f,T.emit=f,T.prependListener=f,T.prependOnceListener=f,T.listeners=function(p){return[]},T.binding=function(p){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(p){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},{}],278:[function(_,ae,ie){(function(g){(function(){for(var x=_("performance-now"),T="undefined"==typeof window?g:window,b=["moz","webkit"],e="AnimationFrame",r=T["request"+e],t=T["cancel"+e]||T["cancelRequest"+e],a=0;!r&&a<b.length;a++)r=T[b[a]+"Request"+e],t=T[b[a]+"Cancel"+e]||T[b[a]+"CancelRequest"+e];if(!r||!t){var n=0,d=0,s=[];r=function(i){if(0===s.length){var u=x(),f=Math.max(0,1e3/60-(u-n));n=f+u,setTimeout(function(){var p=s.slice(0);s.length=0;for(var y=0;y<p.length;y++)if(!p[y].cancelled)try{p[y].callback(n)}catch(m){setTimeout(function(){throw m},0)}},Math.round(f))}return s.push({handle:++d,callback:i,cancelled:!1}),d},t=function(i){for(var u=0;u<s.length;u++)s[u].handle===i&&(s[u].cancelled=!0)}}ae.exports=function(i){return r.call(T,i)},ae.exports.cancel=function(){t.apply(T,arguments)},ae.exports.polyfill=function(i){i||(i=T),i.requestAnimationFrame=r,i.cancelAnimationFrame=t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":252}],279:[function(_,ae,ie){"use strict";var g=_("array-bounds"),x=_("color-normalize"),T=_("update-diff"),b=_("pick-by-alias"),e=_("object-assign"),r=_("flatten-vertex-data"),t=_("to-float32"),a=t.float32,n=t.fract32;ae.exports=function(s,i){if("function"==typeof s?(i||(i={}),i.regl=s):i=s,i.length&&(i.positions=i),!(s=i.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var u,f,p,y,m,l,w=s._gl,v={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},A=[];return y=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),f=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),l=s.buffer({usage:"static",type:"float",data:d}),P(i),u=s({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(F,R){return[R.viewport.x,R.viewport.y,F.viewportWidth,F.viewportHeight]}},attributes:{color:{buffer:y,offset:function(F,R){return 4*R.offset},divisor:1},position:{buffer:f,offset:function(F,R){return 8*R.offset},divisor:1},positionFract:{buffer:p,offset:function(F,R){return 8*R.offset},divisor:1},error:{buffer:m,offset:function(F,R){return 16*R.offset},divisor:1},direction:{buffer:l,stride:24,offset:0},lineOffset:{buffer:l,stride:24,offset:8},capOffset:{buffer:l,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:d.length}),e(M,{update:P,draw:k,destroy:S,regl:s,gl:w,canvas:w.canvas,groups:A}),M;function M(F){F?P(F):null===F&&S(),k()}function k(F){if("number"==typeof F)return E(F);F&&!Array.isArray(F)&&(F=[F]),s._refresh(),A.forEach(function(R,D){R&&(F&&(R.draw=!!F[D]),R.draw?E(D):R.draw=!0)})}function E(F){"number"==typeof F&&(F=A[F]),null!=F&&F&&F.count&&F.color&&F.opacity&&F.positions&&F.positions.length>1&&(F.scaleRatio=[F.scale[0]*F.viewport.width,F.scale[1]*F.viewport.height],u(F),F.after&&F.after(F))}function P(F){if(F){null!=F.length?"number"==typeof F[0]&&(F=[{positions:F}]):Array.isArray(F)||(F=[F]);var R=0,D=0;if(M.groups=A=F.map(function(Q,$){var K=A[$];return Q&&("function"==typeof Q?Q={after:Q}:"number"==typeof Q[0]&&(Q={positions:Q}),Q=b(Q,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),K||(A[$]=K={id:$,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Q=e({},v,Q)),T(K,Q,[{lineWidth:function(oe){return.5*+oe},capSize:function(oe){return.5*+oe},opacity:parseFloat,errors:function(oe){return oe=r(oe),D+=oe.length,oe},positions:function(oe,j){return oe=r(oe,"float64"),j.count=Math.floor(oe.length/2),j.bounds=g(oe,2),j.offset=R,R+=j.count,oe}},{color:function(oe,j){var H=j.count;if(oe||(oe="transparent"),!Array.isArray(oe)||"number"==typeof oe[0]){var G=oe;oe=Array(H);for(var re=0;re<H;re++)oe[re]=G}if(oe.length<H)throw Error("Not enough colors");for(var q=new Uint8Array(4*H),te=0;te<H;te++){var ne=x(oe[te],"uint8");q.set(ne,4*te)}return q},range:function(oe,j,H){return oe||(oe=j.bounds),j.scale=[1/(oe[2]-oe[0]),1/(oe[3]-oe[1])],j.translate=[-oe[0],-oe[1]],j.scaleFract=n(j.scale),j.translateFract=n(j.translate),oe},viewport:function(oe){var j;return Array.isArray(oe)?j={x:oe[0],y:oe[1],width:oe[2]-oe[0],height:oe[3]-oe[1]}:oe?((j={x:oe.x||oe.left||0,y:oe.y||oe.top||0}).width=oe.right?oe.right-j.x:oe.w||oe.width||0,j.height=oe.bottom?oe.bottom-j.y:oe.h||oe.height||0):j={x:0,y:0,width:w.drawingBufferWidth,height:w.drawingBufferHeight},j}}])),K}),R||D){var L=A.reduce(function(Q,$,K){return Q+($?$.count:0)},0),B=new Float64Array(2*L),V=new Uint8Array(4*L),Z=new Float32Array(4*L);A.forEach(function(Q,$){if(Q){var K=Q.positions,j=Q.offset,G=Q.errors;Q.count&&(V.set(Q.color,4*j),Z.set(G,4*j),B.set(K,2*j))}});var Y=a(B);f(Y);var ee=n(B,Y);p(ee),y(V),m(Z)}}}function S(){f.destroy(),p.destroy(),y.destroy(),m.destroy(),l.destroy()}};var d=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(_,ae,ie){"use strict";var g=_("color-normalize"),x=_("array-bounds"),T=_("object-assign"),b=_("glslify"),e=_("pick-by-alias"),r=_("flatten-vertex-data"),t=_("earcut"),a=_("array-normalize"),n=_("to-float32"),d=n.float32,s=n.fract32,i=_("es6-weak-map"),u=_("parse-rect"),f=_("array-find-index");function p(y,m){if(!(this instanceof p))return new p(y,m);if("function"==typeof y?(m||(m={}),m.regl=y):m=y,m.length&&(m.positions=m),!(y=m.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=y._gl,this.regl=y,this.passes=[],this.shaders=p.shaders.has(y)?p.shaders.get(y):p.shaders.set(y,p.createShaders(y)).get(y),this.update(m)}ae.exports=p,p.dashMult=2,p.maxPatternLength=256,p.precisionThreshold=3e6,p.maxPoints=1e4,p.maxLines=2048,p.shaders=new i,p.createShaders=function(y){var m,l=y.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),w={primitive:"triangle strip",instances:y.prop("count"),count:4,offset:0,uniforms:{miterMode:function(A,M){return"round"===M.join?2:1},miterLimit:y.prop("miterLimit"),scale:y.prop("scale"),scaleFract:y.prop("scaleFract"),translateFract:y.prop("translateFract"),translate:y.prop("translate"),thickness:y.prop("thickness"),dashTexture:y.prop("dashTexture"),opacity:y.prop("opacity"),pixelRatio:y.context("pixelRatio"),id:y.prop("id"),dashLength:y.prop("dashLength"),viewport:function(A,M){return[M.viewport.x,M.viewport.y,A.viewportWidth,A.viewportHeight]},depth:y.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(A,M){return!M.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:y.prop("viewport")},viewport:y.prop("viewport")},v=y(T({vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:b(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:l,divisor:0,stride:8,offset:0},lineTop:{buffer:l,divisor:0,stride:8,offset:4},aCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:y.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:y.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:y.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},w));try{m=y(T({cull:{enable:!0,face:"back"},vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:b(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:l,divisor:0,stride:8,offset:0},lineTop:{buffer:l,divisor:0,stride:8,offset:4},aColor:{buffer:y.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:y.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},w))}catch(A){m=v}return{fill:y({primitive:"triangle",elements:function(A,M){return M.triangles},offset:0,vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:b(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:y.prop("scale"),color:y.prop("fill"),scaleFract:y.prop("scaleFract"),translateFract:y.prop("translateFract"),translate:y.prop("translate"),opacity:y.prop("opacity"),pixelRatio:y.context("pixelRatio"),id:y.prop("id"),viewport:function(A,M){return[M.viewport.x,M.viewport.y,A.viewportWidth,A.viewportHeight]}},attributes:{position:{buffer:y.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:y.prop("positionFractBuffer"),stride:8,offset:8}},blend:w.blend,depth:{enable:!1},scissor:w.scissor,stencil:w.stencil,viewport:w.viewport}),rect:v,miter:m}},p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},p.prototype.render=function(){for(var y,m=[],l=arguments.length;l--;)m[l]=arguments[l];m.length&&(y=this).update.apply(y,m),this.draw()},p.prototype.draw=function(){for(var y=this,m=[],l=arguments.length;l--;)m[l]=arguments[l];return(m.length?m:this.passes).forEach(function(w,v){var A;if(w&&Array.isArray(w))return(A=y).draw.apply(A,w);"number"==typeof w&&(w=y.passes[w]),w&&w.count>1&&w.opacity&&(y.regl._refresh(),w.fill&&w.triangles&&w.triangles.length>2&&y.shaders.fill(w),w.thickness&&(w.scale[0]*w.viewport.width>p.precisionThreshold||w.scale[1]*w.viewport.height>p.precisionThreshold||"rect"===w.join||!w.join&&(w.thickness<=2||w.count>=p.maxPoints)?y.shaders.rect(w):y.shaders.miter(w)))}),this},p.prototype.update=function(y){var m=this;if(y){null!=y.length?"number"==typeof y[0]&&(y=[{positions:y}]):Array.isArray(y)||(y=[y]);var l=this.regl,w=this.gl;if(y.forEach(function(E,P){var S=m.passes[P];if(void 0!==E)if(null!==E){if("number"==typeof E[0]&&(E={positions:E}),E=e(E,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(m.passes[P]=S={id:P,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:l.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:l.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:l.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:l.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},E=T({},p.defaults,E)),null!=E.thickness&&(S.thickness=parseFloat(E.thickness)),null!=E.opacity&&(S.opacity=parseFloat(E.opacity)),null!=E.miterLimit&&(S.miterLimit=parseFloat(E.miterLimit)),null!=E.overlay&&(S.overlay=!!E.overlay,P<p.maxLines&&(S.depth=2*(p.maxLines-1-P%p.maxLines)/p.maxLines-1)),null!=E.join&&(S.join=E.join),null!=E.hole&&(S.hole=E.hole),null!=E.fill&&(S.fill=E.fill?g(E.fill,"uint8"):null),null!=E.viewport&&(S.viewport=u(E.viewport)),S.viewport||(S.viewport=u([w.drawingBufferWidth,w.drawingBufferHeight])),null!=E.close&&(S.close=E.close),null===E.positions&&(E.positions=[]),E.positions){var F,R;if(E.positions.x&&E.positions.y){var D=E.positions.x,L=E.positions.y;R=S.count=Math.max(D.length,L.length),F=new Float64Array(2*R);for(var B=0;B<R;B++)F[2*B]=D[B],F[2*B+1]=L[B]}else F=r(E.positions,"float64"),R=S.count=Math.floor(F.length/2);var V=S.bounds=x(F,2);if(S.fill){for(var Z=[],Y={},ee=0,Q=0,$=0,K=S.count;Q<K;Q++){var oe=F[2*Q],j=F[2*Q+1];isNaN(oe)||isNaN(j)||null==oe||null==j?(oe=F[2*ee],j=F[2*ee+1],Y[Q]=ee):ee=Q,Z[$++]=oe,Z[$++]=j}if(E.splitNull){S.count-1 in Y||(Y[S.count]=S.count-1);var H=Object.keys(Y).map(Number).sort(function(Rt,nn){return Rt-nn}),G=[],re=0,q=null!=S.hole?S.hole[0]:null;if(null!=q){var te=f(H,function(Rt){return Rt>=q});(H=H.slice(0,te)).push(q)}for(var ne=function(Rt){var nn=Z.slice(2*re,2*H[Rt]).concat(q?Z.slice(2*q):[]),cn=(S.hole||[]).map(function(Qe){return Qe-q+(H[Rt]-re)}),Ze=t(nn,cn);Ze=Ze.map(function(Qe){return Qe+re+(Qe+re<H[Rt]?0:q-H[Rt])}),G.push.apply(G,Ze),re=H[Rt]+1},le=0;le<H.length;le++)ne(le);for(var ue=0,de=G.length;ue<de;ue++)null!=Y[G[ue]]&&(G[ue]=Y[G[ue]]);S.triangles=G}else{for(var he=t(Z,S.hole||[]),be=0,ge=he.length;be<ge;be++)null!=Y[he[be]]&&(he[be]=Y[he[be]]);S.triangles=he}}var we=new Float64Array(F);a(we,2,V);var ke=new Float64Array(2*R+6);S.close?F[0]===F[2*R-2]&&F[1]===F[2*R-1]?(ke[0]=we[2*R-4],ke[1]=we[2*R-3]):(ke[0]=we[2*R-2],ke[1]=we[2*R-1]):(ke[0]=we[0],ke[1]=we[1]),ke.set(we,2),S.close?F[0]===F[2*R-2]&&F[1]===F[2*R-1]?(ke[2*R+2]=we[2],ke[2*R+3]=we[3],S.count-=1):(ke[2*R+2]=we[0],ke[2*R+3]=we[1],ke[2*R+4]=we[2],ke[2*R+5]=we[3]):(ke[2*R+2]=we[2*R-2],ke[2*R+3]=we[2*R-1],ke[2*R+4]=we[2*R-2],ke[2*R+5]=we[2*R-1]);var De=d(ke);S.positionBuffer(De);var Ee=s(ke,De);S.positionFractBuffer(Ee)}if(E.range?S.range=E.range:S.range||(S.range=S.bounds),(E.range||E.positions)&&S.count){var Re=S.bounds,Ie=S.range[2]-S.range[0],Ce=S.range[3]-S.range[1];S.scale=[(Re[2]-Re[0])/Ie,(Re[3]-Re[1])/Ce],S.translate=[-S.range[0]/Ie+Re[0]/Ie||0,-S.range[1]/Ce+Re[1]/Ce||0],S.scaleFract=s(S.scale),S.translateFract=s(S.translate)}if(E.dashes){var Pe,Ve=0;if(!E.dashes||E.dashes.length<2)Ve=1,Pe=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ve=0;for(var qe=0;qe<E.dashes.length;++qe)Ve+=E.dashes[qe];Pe=new Uint8Array(Ve*p.dashMult);for(var Je=0,lt=255,He=0;He<2;He++)for(var $e=0;$e<E.dashes.length;++$e){for(var et=0,tt=E.dashes[$e]*p.dashMult*.5;et<tt;++et)Pe[Je++]=lt;lt^=255}}S.dashLength=Ve,S.dashTexture({channels:1,data:Pe,width:Pe.length,height:1,mag:"linear",min:"linear"},0,0)}if(E.color){var ft=S.count,bt=E.color;bt||(bt="transparent");var Ct=new Uint8Array(4*ft+4);if(Array.isArray(bt)&&"number"!=typeof bt[0]){for(var Vt=0;Vt<ft;Vt++){var Ft=g(bt[Vt],"uint8");Ct.set(Ft,4*Vt)}Ct.set(g(bt[0],"uint8"),4*ft)}else for(var ht=g(bt,"uint8"),ut=0;ut<ft+1;ut++)Ct.set(ht,4*ut);S.colorBuffer({usage:"dynamic",type:"uint8",data:Ct})}}else m.passes[P]=null}),y.length<this.passes.length){for(var v=y.length;v<this.passes.length;v++){var A=this.passes[v];A&&(A.colorBuffer.destroy(),A.positionBuffer.destroy(),A.dashTexture.destroy())}this.passes.length=y.length}for(var M=[],k=0;k<this.passes.length;k++)null!==this.passes[k]&&M.push(this.passes[k]);return this.passes=M,this}},p.prototype.destroy=function(){return this.passes.forEach(function(y){y.colorBuffer.destroy(),y.positionBuffer.destroy(),y.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(_,ae,ie){"use strict";function g(v,A){return function(M){if(Array.isArray(M))return M}(v)||function(M,k){var E=null==M?null:"undefined"!=typeof Symbol&&M[Symbol.iterator]||M["@@iterator"];if(null!=E){var P,S,F=[],R=!0,D=!1;try{for(E=E.call(M);!(R=(P=E.next()).done)&&(F.push(P.value),!k||F.length!==k);R=!0);}catch(L){D=!0,S=L}finally{try{R||null==E.return||E.return()}finally{if(D)throw S}}return F}}(v,A)||T(v,A)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(v){return function(A){if(Array.isArray(A))return b(A)}(v)||function(A){if("undefined"!=typeof Symbol&&null!=A[Symbol.iterator]||null!=A["@@iterator"])return Array.from(A)}(v)||T(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(v,A){if(v){if("string"==typeof v)return b(v,A);var M=Object.prototype.toString.call(v).slice(8,-1);return"Object"===M&&v.constructor&&(M=v.constructor.name),"Map"===M||"Set"===M?Array.from(v):"Arguments"===M||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?b(v,A):void 0}}function b(v,A){(null==A||A>v.length)&&(A=v.length);for(var M=0,k=new Array(A);M<A;M++)k[M]=v[M];return k}var e=_("color-normalize"),r=_("array-bounds"),t=_("color-id"),a=_("@plotly/point-cluster"),n=_("object-assign"),d=_("glslify"),s=_("pick-by-alias"),i=_("update-diff"),u=_("flatten-vertex-data"),f=_("is-iexplorer"),p=_("to-float32"),y=_("parse-rect"),m=l;function l(v,A){var M=this;if(!(this instanceof l))return new l(v,A);"function"==typeof v?(A||(A={}),A.regl=v):(A=v,v=null),A&&A.length&&(A.positions=A);var k,E=(v=A.regl)._gl,P=[];this.tooManyColors=f,k=v.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),n(this,{regl:v,gl:E,groups:[],markerCache:[null],markerTextures:[null],palette:P,paletteIds:{},paletteTexture:k,maxColors:255,maxSize:100,canvas:E.canvas}),this.update(A);var S={uniforms:{constPointSize:!!A.constPointSize,opacity:v.prop("opacity"),paletteSize:function(D,L){return[M.tooManyColors?0:255,k.height]},pixelRatio:v.context("pixelRatio"),scale:v.prop("scale"),scaleFract:v.prop("scaleFract"),translate:v.prop("translate"),translateFract:v.prop("translateFract"),markerTexture:v.prop("markerTexture"),paletteTexture:k},attributes:{x:function(D,L){return L.xAttr||{buffer:L.positionBuffer,stride:8,offset:0}},y:function(D,L){return L.yAttr||{buffer:L.positionBuffer,stride:8,offset:4}},xFract:function(D,L){return L.xAttr?{constant:[0,0]}:{buffer:L.positionFractBuffer,stride:8,offset:0}},yFract:function(D,L){return L.yAttr?{constant:[0,0]}:{buffer:L.positionFractBuffer,stride:8,offset:4}},size:function(D,L){return L.size.length?{buffer:L.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*L.size/M.maxSize)]}},borderSize:function(D,L){return L.borderSize.length?{buffer:L.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*L.borderSize/M.maxSize)]}},colorId:function(D,L){return L.color.length?{buffer:L.colorBuffer,stride:M.tooManyColors?8:4,offset:0}:{constant:M.tooManyColors?P.slice(4*L.color,4*L.color+4):[L.color]}},borderColorId:function(D,L){return L.borderColor.length?{buffer:L.colorBuffer,stride:M.tooManyColors?8:4,offset:M.tooManyColors?4:2}:{constant:M.tooManyColors?P.slice(4*L.borderColor,4*L.borderColor+4):[L.borderColor]}},isActive:function(D,L){return!0===L.activation?{constant:[1]}:L.activation?L.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:v.prop("viewport")},viewport:v.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:v.prop("elements"),count:v.prop("count"),offset:v.prop("offset"),primitive:"points"},F=n({},S);F.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),F.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=v(F);var R=n({},S);R.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),R.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),f&&(R.frag=R.frag.replace("smoothstep","smoothStep"),F.frag=F.frag.replace("smoothstep","smoothStep")),this.drawCircle=v(R)}l.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},l.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},l.prototype.draw=function(){for(var v=this,A=arguments.length,M=new Array(A),k=0;k<A;k++)M[k]=arguments[k];var E=this.groups;if(1===M.length&&Array.isArray(M[0])&&(null===M[0][0]||Array.isArray(M[0][0]))&&(M=M[0]),this.regl._refresh(),M.length)for(var P=0;P<M.length;P++)this.drawItem(P,M[P]);else E.forEach(function(S,F){v.drawItem(F)});return this},l.prototype.drawItem=function(v,A){var M=this.groups,k=M[v];if("number"==typeof A&&(v=A,k=M[A],A=null),k&&k.count&&k.opacity){k.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,k,A));for(var E=[],P=1;P<k.activation.length;P++)k.activation[P]&&(!0===k.activation[P]||k.activation[P].data.length)&&E.push.apply(E,x(this.getMarkerDrawOptions(P,k,A)));E.length&&this.drawMarker(E)}},l.prototype.getMarkerDrawOptions=function(v,A,M){var k=A.range,E=A.tree,P=A.viewport,S=A.activation,F=A.selectionBuffer,R=A.count;if(!E)return M?[n({},A,{markerTexture:this.markerTextures[v],activation:S[v],count:M.length,elements:M,offset:0})]:[n({},A,{markerTexture:this.markerTextures[v],activation:S[v],offset:0})];var D=[],L=E.range(k,{lod:!0,px:[(k[2]-k[0])/P.width,(k[3]-k[1])/P.height]});if(M){for(var B=S[v].data,V=new Uint8Array(R),Z=0;Z<M.length;Z++){var Y=M[Z];V[Y]=B?B[Y]:1}F.subdata(V)}for(var ee=L.length;ee--;){var Q=g(L[ee],2),$=Q[0];D.push(n({},A,{markerTexture:this.markerTextures[v],activation:M?F:S[v],offset:$,count:Q[1]-$}))}return D},l.prototype.update=function(){for(var v=this,A=arguments.length,M=new Array(A),k=0;k<A;k++)M[k]=arguments[k];if(M.length){1===M.length&&Array.isArray(M[0])&&(M=M[0]);var E=this.groups,P=this.gl,S=this.regl,F=this.maxSize,R=this.maxColors,D=this.palette;this.groups=E=M.map(function(L,B){var V=E[B];if(void 0===L)return V;null===L?L={positions:null}:"function"==typeof L?L={ondraw:L}:"number"==typeof L[0]&&(L={positions:L}),null===(L=s(L,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(L.positions=[]),null!=L.tooManyColors&&(v.tooManyColors=L.tooManyColors),V||(E[B]=V={id:B,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},L=n({},l.defaults,L)),L.positions&&!("marker"in L)&&(L.marker=V.marker,delete V.marker),L.marker&&!("positions"in L)&&(L.positions=V.positions,delete V.positions);var Z=0,Y=0;if(i(V,L,[{snap:!0,size:function(ge,we){return null==ge&&(ge=l.defaults.size),Z+=ge&&ge.length?1:0,ge},borderSize:function(ge,we){return null==ge&&(ge=l.defaults.borderSize),Z+=ge&&ge.length?1:0,ge},opacity:parseFloat,color:function(ge,we){return null==ge&&(ge=l.defaults.color),ge=v.updateColor(ge),Y++,ge},borderColor:function(ge,we){return null==ge&&(ge=l.defaults.borderColor),ge=v.updateColor(ge),Y++,ge},bounds:function(ge,we,ke){return"range"in ke||(ke.range=null),ge},positions:function(ge,we,ke){var De=we.snap,Ee=we.positionBuffer,Re=we.positionFractBuffer,ve=we.selectionBuffer;if(ge.x||ge.y)return we.xAttr=ge.x.length?{buffer:S.buffer(ge.x),offset:0,stride:4,count:ge.x.length}:{buffer:ge.x.buffer,offset:4*ge.x.offset||0,stride:4*(ge.x.stride||1),count:ge.x.count},we.yAttr=ge.y.length?{buffer:S.buffer(ge.y),offset:0,stride:4,count:ge.y.length}:{buffer:ge.y.buffer,offset:4*ge.y.offset||0,stride:4*(ge.y.stride||1),count:ge.y.count},we.count=Math.max(we.xAttr.count,we.yAttr.count),ge;ge=u(ge,"float64");var Te=we.count=Math.floor(ge.length/2),Ie=we.bounds=Te?r(ge,2):null;if(ke.range||we.range||(delete we.range,ke.range=Ie),ke.marker||we.marker||(delete we.marker,ke.marker=null),De&&(!0===De||Te>De)?we.tree=a(ge,{bounds:Ie}):De&&De.length&&(we.tree=De),we.tree){var Ce={primitive:"points",usage:"static",data:we.tree,type:"uint32"};we.elements?we.elements(Ce):we.elements=S.elements(Ce)}var Pe=p.float32(ge);return Ee({data:Pe,usage:"dynamic"}),Re({data:p.fract32(ge,Pe),usage:"dynamic"}),ve({data:new Uint8Array(Te),type:"uint8",usage:"stream"}),ge}},{marker:function(ge,we,ke){var De=we.activation;if(De.forEach(function(Pe){return Pe&&Pe.destroy&&Pe.destroy()}),De.length=0,ge&&"number"!=typeof ge[0]){for(var Ee=[],Re=0,ve=Math.min(ge.length,we.count);Re<ve;Re++){var Te=v.addMarker(ge[Re]);Ee[Te]||(Ee[Te]=new Uint8Array(we.count)),Ee[Te][Re]=1}for(var Ie=0;Ie<Ee.length;Ie++)if(Ee[Ie]){var Ce={data:Ee[Ie],type:"uint8",usage:"static"};De[Ie]?De[Ie](Ce):De[Ie]=S.buffer(Ce),De[Ie].data=Ee[Ie]}}else De[v.addMarker(ge)]=!0;return ge},range:function(ge,we,ke){var De=we.bounds;if(De)return ge||(ge=De),we.scale=[1/(ge[2]-ge[0]),1/(ge[3]-ge[1])],we.translate=[-ge[0],-ge[1]],we.scaleFract=p.fract(we.scale),we.translateFract=p.fract(we.translate),ge},viewport:function(ge){return y(ge||[P.drawingBufferWidth,P.drawingBufferHeight])}}]),Z){var Q=V.count,$=V.size,K=V.borderSize,oe=V.sizeBuffer,j=new Uint8Array(2*Q);if($.length||K.length)for(var H=0;H<Q;H++)j[2*H]=Math.round(255*(null==$[H]?$:$[H])/F),j[2*H+1]=Math.round(255*(null==K[H]?K:K[H])/F);oe({data:j,usage:"dynamic"})}if(Y){var G,q=V.count,te=V.color,ne=V.borderColor,le=V.colorBuffer;if(v.tooManyColors){if(te.length||ne.length){G=new Uint8Array(8*q);for(var ue=0;ue<q;ue++){var de=te[ue];G[8*ue]=D[4*de],G[8*ue+1]=D[4*de+1],G[8*ue+2]=D[4*de+2],G[8*ue+3]=D[4*de+3];var he=ne[ue];G[8*ue+4]=D[4*he],G[8*ue+5]=D[4*he+1],G[8*ue+6]=D[4*he+2],G[8*ue+7]=D[4*he+3]}}}else if(te.length||ne.length){G=new Uint8Array(4*q+2);for(var be=0;be<q;be++)null!=te[be]&&(G[4*be]=te[be]%R,G[4*be+1]=Math.floor(te[be]/R)),null!=ne[be]&&(G[4*be+2]=ne[be]%R,G[4*be+3]=Math.floor(ne[be]/R))}le({data:G||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return V})}},l.prototype.addMarker=function(v){var A,M=this.markerTextures,k=this.regl,E=this.markerCache,P=null==v?0:E.indexOf(v);if(P>=0)return P;if(v instanceof Uint8Array||v instanceof Uint8ClampedArray)A=v;else{A=new Uint8Array(v.length);for(var S=0,F=v.length;S<F;S++)A[S]=255*v[S]}var R=Math.floor(Math.sqrt(A.length));return P=M.length,E.push(v),M.push(k.texture({channels:1,data:A,radius:R,mag:"linear",min:"linear"})),P},l.prototype.updateColor=function(v){var A=this.paletteIds,M=this.palette,k=this.maxColors;Array.isArray(v)||(v=[v]);var E=[];if("number"==typeof v[0]){var P=[];if(Array.isArray(v))for(var S=0;S<v.length;S+=4)P.push(v.slice(S,S+4));else for(var F=0;F<v.length;F+=4)P.push(v.subarray(F,F+4));v=P}for(var R=0;R<v.length;R++){var D=v[R];D=e(D,"uint8");var L=t(D,!1);if(null==A[L]){var B=M.length;A[L]=Math.floor(B/4),M[B]=D[0],M[B+1]=D[1],M[B+2]=D[2],M[B+3]=D[3]}E[R]=A[L]}return!this.tooManyColors&&M.length>4*k&&(this.tooManyColors=!0),this.updatePalette(M),1===E.length?E[0]:E},l.prototype.updatePalette=function(v){if(!this.tooManyColors){var A=this.maxColors,M=this.paletteTexture,k=Math.ceil(.25*v.length/A);if(k>1)for(var E=.25*(v=v.slice()).length%A;E<k*A;E++)v.push(0,0,0,0);M.height<k&&M.resize(A,k),M.subimage({width:Math.min(.25*v.length,A),height:k,data:v},0,0)}},l.prototype.destroy=function(){return this.groups.forEach(function(v){v.sizeBuffer.destroy(),v.positionBuffer.destroy(),v.positionFractBuffer.destroy(),v.colorBuffer.destroy(),v.activation.forEach(function(A){return A&&A.destroy&&A.destroy()}),v.selectionBuffer.destroy(),v.elements&&v.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(v){return v&&v.destroy&&v.destroy()}),this};var w=_("object-assign");ae.exports=function(v,A){var M=new m(v,A),k=M.render.bind(M);return w(k,{render:k,update:M.update.bind(M),draw:M.draw.bind(M),destroy:M.destroy.bind(M),regl:M.regl,gl:M.gl,canvas:M.gl.canvas,groups:M.groups,markers:M.markerCache,palette:M.palette}),k}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(_,ae,ie){"use strict";var g=_("regl-scatter2d"),x=_("pick-by-alias"),T=_("array-bounds"),b=_("raf"),e=_("array-range"),r=_("parse-rect"),t=_("flatten-vertex-data");function a(i,u){if(!(this instanceof a))return new a(i,u);this.traces=[],this.passes={},this.regl=i,this.scatter=g(i),this.canvas=this.scatter.canvas}function n(i,u,f){return(null!=i.id?i.id:i)<<16|(255&u)<<8|255&f}function d(i,u,f){var p,y,m,l,w=i[u],v=i[f];return w.length>2?(p=w[1],y=w[3]):w.length?(p=w[0],y=w[1]):(p=w.y,y=w.y+w.height),v.length>2?(m=v[0],l=v[2]):v.length?(m=v[0],l=v[1]):(m=v.x,l=v.x+v.width),[m,p,l,y]}function s(i){if("number"==typeof i)return[i,i,i,i];if(2===i.length)return[i[0],i[1],i[0],i[1]];var u=r(i);return[u.x,u.y,u.x+u.width,u.y+u.height]}ae.exports=a,a.prototype.render=function(){for(var i,u=this,f=[],p=arguments.length;p--;)f[p]=arguments[p];return f.length&&(i=this).update.apply(i,f),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=b(function(){u.draw(),u.dirty=!0,u.planned=null})):(this.draw(),this.dirty=!0,b(function(){u.dirty=!1})),this)},a.prototype.update=function(){for(var i,u=[],f=arguments.length;f--;)u[f]=arguments[f];if(u.length){for(var p=0;p<u.length;p++)this.updateItem(p,u[p]);this.traces=this.traces.filter(Boolean);for(var y=[],m=0,l=0;l<this.traces.length;l++){for(var w=this.traces[l],v=this.traces[l].passes,A=0;A<v.length;A++)y.push(this.passes[v[A]]);w.passOffset=m,m+=w.passes.length}return(i=this.scatter).update.apply(i,y),this}},a.prototype.updateItem=function(i,u){var f=this.regl;if(null===u)return this.traces[i]=null,this;if(!u)return this;var p,y=x(u,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[i]||(this.traces[i]={id:i,buffer:f.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:r([f._gl.drawingBufferWidth,f._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=y.color&&(m.color=y.color),null!=y.size&&(m.size=y.size),null!=y.marker&&(m.marker=y.marker),null!=y.borderColor&&(m.borderColor=y.borderColor),null!=y.borderSize&&(m.borderSize=y.borderSize),null!=y.opacity&&(m.opacity=y.opacity),y.viewport&&(m.viewport=r(y.viewport)),null!=y.diagonal&&(m.diagonal=y.diagonal),null!=y.upper&&(m.upper=y.upper),null!=y.lower&&(m.lower=y.lower),y.data){m.buffer(t(y.data)),m.columns=y.data.length,m.count=y.data[0].length,m.bounds=[];for(var l=0;l<m.columns;l++)m.bounds[l]=T(y.data[l],1)}y.range&&(m.range=y.range,p=m.range&&"number"!=typeof m.range[0]),y.domain&&(m.domain=y.domain);var w=!1;null!=y.padding&&(Array.isArray(y.padding)&&y.padding.length===m.columns&&"number"==typeof y.padding[y.padding.length-1]?(m.padding=y.padding.map(s),w=!0):m.padding=s(y.padding));var v=m.columns,A=m.count,M=m.viewport.width,k=m.viewport.height,E=m.viewport.x,P=m.viewport.y,S=M/v,F=k/v;m.passes=[];for(var R=0;R<v;R++)for(var D=0;D<v;D++)if((m.diagonal||D!==R)&&(m.upper||!(R>D))&&(m.lower||!(R<D))){var L=n(m.id,R,D),B=this.passes[L]||(this.passes[L]={});if(y.data&&(B.positions=y.transpose?{x:{buffer:m.buffer,offset:D,count:A,stride:v},y:{buffer:m.buffer,offset:R,count:A,stride:v}}:{x:{buffer:m.buffer,offset:D*A,count:A},y:{buffer:m.buffer,offset:R*A,count:A}},B.bounds=d(m.bounds,R,D)),y.domain||y.viewport||y.data){var V=w?d(m.padding,R,D):m.padding;if(m.domain){var Z=d(m.domain,R,D);B.viewport=[E+Z[0]*M+V[0],P+Z[1]*k+V[1],E+Z[2]*M-V[2],P+Z[3]*k-V[3]]}else B.viewport=[E+D*S+S*V[0],P+R*F+F*V[1],E+(D+1)*S-S*V[2],P+(R+1)*F-F*V[3]]}y.color&&(B.color=m.color),y.size&&(B.size=m.size),y.marker&&(B.marker=m.marker),y.borderSize&&(B.borderSize=m.borderSize),y.borderColor&&(B.borderColor=m.borderColor),y.opacity&&(B.opacity=m.opacity),y.range&&(B.range=p?d(m.range,R,D):m.range||B.bounds),m.passes.push(L)}return this},a.prototype.draw=function(){for(var i,u=[],f=arguments.length;f--;)u[f]=arguments[f];if(u.length){for(var p=[],y=0;y<u.length;y++)if("number"==typeof u[y]){var m=this.traces[u[y]],w=m.passOffset;p.push.apply(p,e(w,w+m.passes.length))}else if(u[y].length){var v=u[y],A=this.traces[y],M=A.passes,k=A.passOffset;M=M.map(function(E,P){p[k+P]=v})}(i=this.scatter).draw.apply(i,p)}else this.scatter.draw();return this},a.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(_,ae,ie){var x;x=function(){function g(Ge,rt){this.id=G++,this.type=Ge,this.data=rt}function x(Ge){return"["+function rt(Le){if(0===Le.length)return[];var ze=Le.charAt(0),je=Le.charAt(Le.length-1);if(1<Le.length&&ze===je&&('"'===ze||"'"===ze))return['"'+Le.substr(1,Le.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(ze=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Le))return rt(Le.substr(0,ze.index)).concat(rt(ze[1])).concat(rt(Le.substr(ze.index+ze[0].length)));if(1===(ze=Le.split(".")).length)return['"'+Le.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Le=[],je=0;je<ze.length;++je)Le=Le.concat(rt(ze[je]));return Le}(Ge).join("][")+"]"}function T(Ge){return"string"==typeof Ge?Ge.split():Ge}function b(Ge){return"string"==typeof Ge?document.querySelector(Ge):Ge}function r(Ge,rt){for(var Le=Array(Ge),ze=0;ze<Ge;++ze)Le[ze]=rt(ze);return Le}function t(Ge){var rt,Le;return rt=(65535<Ge)<<4,rt|=Le=(255<(Ge>>>=rt))<<3,(rt|=Le=(15<(Ge>>>=Le))<<2)|(Le=(3<(Ge>>>=Le))<<1)|Ge>>>Le>>1}function a(){function Ge(ze){e:{for(var je=16;268435456>=je;je*=16)if(ze<=je){ze=je;break e}ze=0}return 0<(je=Le[t(ze)>>2]).length?je.pop():new ArrayBuffer(ze)}function rt(ze){Le[t(ze.byteLength)>>2].push(ze)}var Le=r(8,function(){return[]});return{alloc:Ge,free:rt,allocType:function(ze,je){var Ne=null;switch(ze){case 5120:Ne=new Int8Array(Ge(je),0,je);break;case 5121:Ne=new Uint8Array(Ge(je),0,je);break;case 5122:Ne=new Int16Array(Ge(2*je),0,je);break;case 5123:Ne=new Uint16Array(Ge(2*je),0,je);break;case 5124:Ne=new Int32Array(Ge(4*je),0,je);break;case 5125:Ne=new Uint32Array(Ge(4*je),0,je);break;case 5126:Ne=new Float32Array(Ge(4*je),0,je);break;default:return null}return Ne.length!==je?Ne.subarray(0,je):Ne},freeType:function(ze){rt(ze.buffer)}}}function n(Ge){return!!Ge&&"object"==typeof Ge&&Array.isArray(Ge.shape)&&Array.isArray(Ge.stride)&&"number"==typeof Ge.offset&&Ge.shape.length===Ge.stride.length&&(Array.isArray(Ge.data)||ue(Ge.data))}function d(Ge,rt,Le,ze,je,Ne){for(var st=0;st<rt;++st)for(var mt=Ge[st],Tt=0;Tt<Le;++Tt)for(var xt=mt[Tt],zt=0;zt<ze;++zt)je[Ne++]=xt[zt]}function s(Ge){return 0|be[Object.prototype.toString.call(Ge)]}function i(Ge,rt){for(var Le=0;Le<rt.length;++Le)Ge[Le]=rt[Le]}function u(Ge,rt,Le,ze,je,Ne,st){for(var mt=0,Tt=0;Tt<Le;++Tt)for(var xt=0;xt<ze;++xt)Ge[mt++]=rt[je*Tt+Ne*xt+st]}function y(Ge){for(var rt=ne.allocType(5123,Ge.length),Le=0;Le<Ge.length;++Le)if(isNaN(Ge[Le]))rt[Le]=65535;else if(1/0===Ge[Le])rt[Le]=31744;else if(-1/0===Ge[Le])rt[Le]=64512;else{ve[0]=Ge[Le];var ze=(Ne=Te[0])>>>31<<15,je=(Ne<<1>>>24)-127,Ne=Ne>>13&1023;rt[Le]=-24>je?ze:-14>je?ze+(Ne+1024>>-14-je):15<je?ze+31744:ze+(je+15<<10)+Ne}return rt}function m(Ge){return Array.isArray(Ge)||ue(Ge)}function l(Ge){return"[object "+Ge+"]"}function w(Ge){return Array.isArray(Ge)&&(0===Ge.length||"number"==typeof Ge[0])}function v(Ge){return!(!Array.isArray(Ge)||0===Ge.length||!m(Ge[0]))}function A(Ge){return Object.prototype.toString.call(Ge)}function M(Ge){if(!Ge)return!1;var rt=A(Ge);return 0<=et.indexOf(rt)||w(Ge)||v(Ge)||n(Ge)}function k(Ge,rt){36193===Ge.type?(Ge.data=y(rt),ne.freeType(rt)):Ge.data=rt}function E(Ge,rt,Le,ze,je,Ne){if(Ge=void 0!==ft[Ge]?ft[Ge]:Pe[Ge]*tt[rt],Ne&&(Ge*=6),je){for(ze=0;1<=Le;)ze+=Ge*Le*Le,Le/=2;return ze}return Ge*Le*ze}function F(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function B(Ge){return Array.prototype.slice.call(Ge)}function V(Ge){return B(Ge).join("")}function Z(Ge){return Array.isArray(Ge)||ue(Ge)||n(Ge)}function Y(Ge){return Ge.sort(function(rt,Le){return"viewport"===rt?-1:"viewport"===Le?1:rt<Le?-1:1})}function ee(Ge,rt,Le,ze){this.thisDep=Ge,this.contextDep=rt,this.propDep=Le,this.append=ze}function Q(Ge){return Ge&&!(Ge.thisDep||Ge.contextDep||Ge.propDep)}function $(Ge){return new ee(!1,!1,!1,Ge)}function K(Ge,rt){var Le=Ge.type;if(0===Le)return new ee(!0,1<=(Le=Ge.data.length),2<=Le,rt);if(4===Le)return new ee((Le=Ge.data).thisDep,Le.contextDep,Le.propDep,rt);if(5===Le)return new ee(!1,!1,!1,rt);if(6===Le){for(var ze=Le=!1,je=!1,Ne=0;Ne<Ge.data.length;++Ne){var st=Ge.data[Ne];1===st.type?je=!0:2===st.type?ze=!0:3===st.type?Le=!0:0===st.type?(Le=!0,1<=(st=st.data)&&(ze=!0),2<=st&&(je=!0)):4===st.type&&(Le=Le||st.data.thisDep,ze=ze||st.data.contextDep,je=je||st.data.propDep)}return new ee(Le,ze,je,rt)}return new ee(3===Le,2===Le,1===Le,rt)}function oe(Ge,rt,Le,ze,je,Ne,st,mt,Tt,xt,zt,gt,Bt,jt,it){function Mt(Ut){return Ut.replace(".","_")}function qt(Ut,Kt,Mn){var Bn=Mt(Ut);Jn.push(Ut),Ur[Bn]=nr[Bn]=!!Mn,_r[Bn]=Kt}function Wt(Ut,Kt,Mn){var Bn=Mt(Ut);Jn.push(Ut),Array.isArray(Mn)?(nr[Bn]=Mn.slice(),Ur[Bn]=Mn.slice()):nr[Bn]=Ur[Bn]=Mn,Hr[Bn]=Kt}function an(){var Ut=function(){function Yn(){var ir=[],rr=[];return H(function(){ir.push.apply(ir,B(arguments))},{def:function(){var wr="v"+Zn++;return rr.push(wr),0<arguments.length&&(ir.push(wr,"="),ir.push.apply(ir,B(arguments)),ir.push(";")),wr},toString:function(){return V([0<rr.length?"var "+rr.join(",")+";":"",V(ir)])}})}function Hn(){function ir(Ci,pi){wr(Ci,pi,"=",rr.def(Ci,pi),";")}var rr=Yn(),wr=Yn(),Ir=rr.toString,Vr=wr.toString;return H(function(){rr.apply(rr,B(arguments))},{def:rr.def,entry:rr,exit:wr,save:ir,set:function(Ci,pi,lr){ir(Ci,pi),rr(Ci,pi,"=",lr,";")},toString:function(){return Ir()+Vr()}})}var Zn=0,Sr=[],Ar=[],gr=Yn(),Rr={};return{global:gr,link:function(ir){for(var rr=0;rr<Ar.length;++rr)if(Ar[rr]===ir)return Sr[rr];return rr="g"+Zn++,Sr.push(rr),Ar.push(ir),rr},block:Yn,proc:function(ir,rr){function wr(){var pi="a"+Ir.length;return Ir.push(pi),pi}var Ir=[];rr=rr||0;for(var Vr=0;Vr<rr;++Vr)wr();var Ci=(Vr=Hn()).toString;return Rr[ir]=H(Vr,{arg:wr,toString:function(){return V(["function(",Ir.join(),"){",Ci(),"}"])}})},scope:Hn,cond:function(){var ir=V(arguments),rr=Hn(),wr=Hn(),Ir=rr.toString,Vr=wr.toString;return H(rr,{then:function(){return rr.apply(rr,B(arguments)),this},else:function(){return wr.apply(wr,B(arguments)),this},toString:function(){var Ci=Vr();return Ci&&(Ci="else{"+Ci+"}"),V(["if(",ir,"){",Ir(),"}",Ci])}})},compile:function(){var ir=['"use strict";',gr,"return {"];Object.keys(Rr).forEach(function(wr){ir.push('"',wr,'":',Rr[wr].toString(),",")}),ir.push("}");var rr=V(ir).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,Sr.concat(rr)).apply(null,Ar)}}}(),Kt=Ut.link,Mn=Ut.global;Ut.id=dn++,Ut.batchId="0";var Bn=Kt(Lr),cr=Ut.shared={props:"a0"};Object.keys(Lr).forEach(function(Yn){cr[Yn]=Mn.def(Bn,".",Yn)});var ur=Ut.next={},Rn=Ut.current={};Object.keys(Hr).forEach(function(Yn){Array.isArray(nr[Yn])&&(ur[Yn]=Mn.def(cr.next,".",Yn),Rn[Yn]=Mn.def(cr.current,".",Yn))});var Cn=Ut.constants={};Object.keys($r).forEach(function(Yn){Cn[Yn]=Mn.def(JSON.stringify($r[Yn]))}),Ut.invoke=function(Yn,Hn){switch(Hn.type){case 0:var Zn=["this",cr.context,cr.props,Ut.batchId];return Yn.def(Kt(Hn.data),".call(",Zn.slice(0,Math.max(Hn.data.length+1,4)),")");case 1:return Yn.def(cr.props,Hn.data);case 2:return Yn.def(cr.context,Hn.data);case 3:return Yn.def("this",Hn.data);case 4:return Hn.data.append(Ut,Yn),Hn.data.ref;case 5:return Hn.data.toString();case 6:return Hn.data.map(function(Sr){return Ut.invoke(Yn,Sr)})}},Ut.attribCache={};var Un={};return Ut.scopeAttrib=function(Yn){if((Yn=rt.id(Yn))in Un)return Un[Yn];var Hn=xt.scope[Yn];return Hn||(Hn=xt.scope[Yn]=new mr),Un[Yn]=Kt(Hn)},Ut}function Jt(Ut,Kt,Mn,Bn,cr){function ur(Rr){var ir=Cn[Rr];ir&&(Yn[Rr]=ir)}var Rr,rr,wr,Ir,Rn=function(Rr,ir){if("string"==typeof(rr=Rr.static).frag&&"string"==typeof rr.vert){if(0<Object.keys(ir.dynamic).length)return null;var rr=ir.static,wr=Object.keys(rr);if(0<wr.length&&"number"==typeof rr[wr[0]]){for(var Ir=[],Vr=0;Vr<wr.length;++Vr)Ir.push([0|rr[wr[Vr]],wr[Vr]]);return Ir}}return null}(Ut,Kt),Cn=function(Rr,ir,rr){function wr(pi){if(pi in Ir){var lr=Ir[pi];pi=!0;var bi,Ni,wa=0|lr.x,Io=0|lr.y;return"width"in lr?bi=0|lr.width:pi=!1,"height"in lr?Ni=0|lr.height:pi=!1,new ee(!pi&&ir&&ir.thisDep,!pi&&ir&&ir.contextDep,!pi&&ir&&ir.propDep,function(Ya,Xi){var Oa=Ya.shared.context,Ds=bi;"width"in lr||(Ds=Xi.def(Oa,".","framebufferWidth","-",wa));var Bo=Ni;return"height"in lr||(Bo=Xi.def(Oa,".","framebufferHeight","-",Io)),[wa,Io,Ds,Bo]})}if(pi in Vr){var $a=Vr[pi];return pi=K($a,function(Ya,Xi){var Oa=Ya.invoke(Xi,$a),Ds=Ya.shared.context,Bo=Xi.def(Oa,".x|0"),sl=Xi.def(Oa,".y|0");return[Bo,sl,Xi.def('"width" in ',Oa,"?",Oa,".width|0:","(",Ds,".","framebufferWidth","-",Bo,")"),Oa=Xi.def('"height" in ',Oa,"?",Oa,".height|0:","(",Ds,".","framebufferHeight","-",sl,")")]}),ir&&(pi.thisDep=pi.thisDep||ir.thisDep,pi.contextDep=pi.contextDep||ir.contextDep,pi.propDep=pi.propDep||ir.propDep),pi}return ir?new ee(ir.thisDep,ir.contextDep,ir.propDep,function(Ya,Xi){var Oa=Ya.shared.context;return[0,0,Xi.def(Oa,".","framebufferWidth"),Xi.def(Oa,".","framebufferHeight")]}):null}var Ir=Rr.static,Vr=Rr.dynamic;if(Rr=wr("viewport")){var Ci=Rr;Rr=new ee(Rr.thisDep,Rr.contextDep,Rr.propDep,function(pi,lr){var bi=Ci.append(pi,lr),Ni=pi.shared.context;return lr.set(Ni,".viewportWidth",bi[2]),lr.set(Ni,".viewportHeight",bi[3]),bi})}return{viewport:Rr,scissor_box:wr("scissor.box")}}(Ut,Zn=function(Ut,Kt){var Mn=Ut.static,Bn=Ut.dynamic;if("framebuffer"in Mn){var cr=Mn.framebuffer;return cr?(cr=mt.getFramebuffer(cr),$(function(Rn,Cn){var Un=Rn.link(cr),Yn=Rn.shared;return Cn.set(Yn.framebuffer,".next",Un),Cn.set(Yn=Yn.context,".framebufferWidth",Un+".width"),Cn.set(Yn,".framebufferHeight",Un+".height"),Un})):$(function(Rn,Cn){var Un=Rn.shared;return Cn.set(Un.framebuffer,".next","null"),Cn.set(Un=Un.context,".framebufferWidth",Un+".drawingBufferWidth"),Cn.set(Un,".framebufferHeight",Un+".drawingBufferHeight"),"null"})}if("framebuffer"in Bn){var ur=Bn.framebuffer;return K(ur,function(Rn,Cn){var Un=Rn.invoke(Cn,ur),Yn=Rn.shared,Hn=Yn.framebuffer;return Un=Cn.def(Hn,".getFramebuffer(",Un,")"),Cn.set(Hn,".next",Un),Cn.set(Yn=Yn.context,".framebufferWidth",Un+"?"+Un+".width:"+Yn+".drawingBufferWidth"),Cn.set(Yn,".framebufferHeight",Un+"?"+Un+".height:"+Yn+".drawingBufferHeight"),Un})}return null}(Ut)),Un=function(Ut,Kt){function Mn(gr,Rr){if(gr in Bn){var ir=0|Bn[gr];return Rr?ur.offset=ir:ur.instances=ir,$(function(wr,Ir){return Rr&&(wr.OFFSET=ir),ir})}if(gr in cr){var rr=cr[gr];return K(rr,function(wr,Ir){var Vr=wr.invoke(Ir,rr);return Rr&&(wr.OFFSET=Vr),Vr})}if(Rr){if(Un)return $(function(wr,Ir){return wr.OFFSET=0});if(Rn)return new ee(Cn.thisDep,Cn.contextDep,Cn.propDep,function(wr,Ir){return Ir.def(wr.shared.vao+".currentVAO?"+wr.shared.vao+".currentVAO.offset:0")})}else if(Rn)return new ee(Cn.thisDep,Cn.contextDep,Cn.propDep,function(wr,Ir){return Ir.def(wr.shared.vao+".currentVAO?"+wr.shared.vao+".currentVAO.instances:-1")});return null}var Bn=Ut.static,cr=Ut.dynamic,ur={},Rn=!1,Cn=function(){if("vao"in Bn){var gr=Bn.vao;return null!==gr&&null===xt.getVAO(gr)&&(gr=xt.createVAO(gr)),Rn=!0,ur.vao=gr,$(function(ir){var rr=xt.getVAO(gr);return rr?ir.link(rr):"null"})}if("vao"in cr){Rn=!0;var Rr=cr.vao;return K(Rr,function(ir,rr){var wr=ir.invoke(rr,Rr);return rr.def(ir.shared.vao+".getVAO("+wr+")")})}return null}(),Un=!1,Yn=function(){if("elements"in Bn){var gr=Bn.elements;if(ur.elements=gr,Z(gr)){var Rr=ur.elements=Ne.create(gr,!0);gr=Ne.getElements(Rr),Un=!0}else gr&&(gr=Ne.getElements(gr),Un=!0);return(Rr=$(function(rr,wr){if(gr){var Ir=rr.link(gr);return rr.ELEMENTS=Ir}return rr.ELEMENTS=null})).value=gr,Rr}if("elements"in cr){Un=!0;var ir=cr.elements;return K(ir,function(rr,wr){var Ir=(Vr=rr.shared).isBufferArgs,Vr=Vr.elements,Ci=rr.invoke(wr,ir),pi=wr.def("null");return Ir=wr.def(Ir,"(",Ci,")"),Ci=rr.cond(Ir).then(pi,"=",Vr,".createStream(",Ci,");").else(pi,"=",Vr,".getElements(",Ci,");"),wr.entry(Ci),wr.exit(rr.cond(Ir).then(Vr,".destroyStream(",pi,");")),rr.ELEMENTS=pi})}return Rn?new ee(Cn.thisDep,Cn.contextDep,Cn.propDep,function(rr,wr){return wr.def(rr.shared.vao+".currentVAO?"+rr.shared.elements+".getElements("+rr.shared.vao+".currentVAO.elements):null")}):null}(),Hn=Mn("offset",!0),Zn=function(){if("primitive"in Bn){var gr=Bn.primitive;return ur.primitive=gr,$(function(ir,rr){return Re[gr]})}if("primitive"in cr){var Rr=cr.primitive;return K(Rr,function(ir,rr){var wr=ir.constants.primTypes,Ir=ir.invoke(rr,Rr);return rr.def(wr,"[",Ir,"]")})}return Un?Q(Yn)?$(Yn.value?function(ir,rr){return rr.def(ir.ELEMENTS,".primType")}:function(){return 4}):new ee(Yn.thisDep,Yn.contextDep,Yn.propDep,function(ir,rr){var wr=ir.ELEMENTS;return rr.def(wr,"?",wr,".primType:",4)}):Rn?new ee(Cn.thisDep,Cn.contextDep,Cn.propDep,function(ir,rr){return rr.def(ir.shared.vao+".currentVAO?"+ir.shared.vao+".currentVAO.primitive:4")}):null}(),Sr=function(){if("count"in Bn){var gr=0|Bn.count;return ur.count=gr,$(function(){return gr})}if("count"in cr){var Rr=cr.count;return K(Rr,function(ir,rr){return ir.invoke(rr,Rr)})}return Un?Q(Yn)?Yn?Hn?new ee(Hn.thisDep,Hn.contextDep,Hn.propDep,function(ir,rr){return rr.def(ir.ELEMENTS,".vertCount-",ir.OFFSET)}):$(function(ir,rr){return rr.def(ir.ELEMENTS,".vertCount")}):$(function(){return-1}):new ee(Yn.thisDep||Hn.thisDep,Yn.contextDep||Hn.contextDep,Yn.propDep||Hn.propDep,function(ir,rr){var wr=ir.ELEMENTS;return ir.OFFSET?rr.def(wr,"?",wr,".vertCount-",ir.OFFSET,":-1"):rr.def(wr,"?",wr,".vertCount:-1")}):Rn?new ee(Cn.thisDep,Cn.contextDep,Cn.propDep,function(ir,rr){return rr.def(ir.shared.vao,".currentVAO?",ir.shared.vao,".currentVAO.count:-1")}):null}(),Ar=Mn("instances",!1);return{elements:Yn,primitive:Zn,count:Sr,instances:Ar,offset:Hn,vao:Cn,vaoActive:Rn,elementsActive:Un,static:ur}}(Ut),Yn=(rr=(Rr=Ut).static,wr=Rr.dynamic,Ir={},Jn.forEach(function(Vr){function Ci(lr,bi){if(Vr in rr){var Ni=lr(rr[Vr]);Ir[pi]=$(function(){return Ni})}else if(Vr in wr){var wa=wr[Vr];Ir[pi]=K(wa,function(Io,$a){return bi(Io,$a,Io.invoke($a,wa))})}}var pi=Mt(Vr);switch(Vr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Ci(function(lr){return lr},function(lr,bi,Ni){return Ni});case"depth.func":return Ci(function(lr){return nn[lr]},function(lr,bi,Ni){return bi.def(lr.constants.compareFuncs,"[",Ni,"]")});case"depth.range":return Ci(function(lr){return lr},function(lr,bi,Ni){return[bi.def("+",Ni,"[0]"),bi=bi.def("+",Ni,"[1]")]});case"blend.func":return Ci(function(lr){return[Rt["srcRGB"in lr?lr.srcRGB:lr.src],Rt["dstRGB"in lr?lr.dstRGB:lr.dst],Rt["srcAlpha"in lr?lr.srcAlpha:lr.src],Rt["dstAlpha"in lr?lr.dstAlpha:lr.dst]]},function(lr,bi,Ni){function wa(Xi,Oa){return bi.def('"',Xi,Oa,'" in ',Ni,"?",Ni,".",Xi,Oa,":",Ni,".",Xi)}lr=lr.constants.blendFuncs;var Io=wa("src","RGB"),$a=wa("dst","RGB"),Ya=(Io=bi.def(lr,"[",Io,"]"),bi.def(lr,"[",wa("src","Alpha"),"]"));return[Io,$a=bi.def(lr,"[",$a,"]"),Ya,lr=bi.def(lr,"[",wa("dst","Alpha"),"]")]});case"blend.equation":return Ci(function(lr){return"string"==typeof lr?[Or[lr],Or[lr]]:"object"==typeof lr?[Or[lr.rgb],Or[lr.alpha]]:void 0},function(lr,bi,Ni){var wa=lr.constants.blendEquations,Io=bi.def(),$a=bi.def();return(lr=lr.cond("typeof ",Ni,'==="string"')).then(Io,"=",$a,"=",wa,"[",Ni,"];"),lr.else(Io,"=",wa,"[",Ni,".rgb];",$a,"=",wa,"[",Ni,".alpha];"),bi(lr),[Io,$a]});case"blend.color":return Ci(function(lr){return r(4,function(bi){return+lr[bi]})},function(lr,bi,Ni){return r(4,function(wa){return bi.def("+",Ni,"[",wa,"]")})});case"stencil.mask":return Ci(function(lr){return 0|lr},function(lr,bi,Ni){return bi.def(Ni,"|0")});case"stencil.func":return Ci(function(lr){return[nn[lr.cmp||"keep"],lr.ref||0,"mask"in lr?lr.mask:-1]},function(lr,bi,Ni){return[lr=bi.def('"cmp" in ',Ni,"?",lr.constants.compareFuncs,"[",Ni,".cmp]",":",7680),bi.def(Ni,".ref|0"),bi=bi.def('"mask" in ',Ni,"?",Ni,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Ci(function(lr){return["stencil.opBack"===Vr?1029:1028,cn[lr.fail||"keep"],cn[lr.zfail||"keep"],cn[lr.zpass||"keep"]]},function(lr,bi,Ni){function wa($a){return bi.def('"',$a,'" in ',Ni,"?",Io,"[",Ni,".",$a,"]:",7680)}var Io=lr.constants.stencilOps;return["stencil.opBack"===Vr?1029:1028,wa("fail"),wa("zfail"),wa("zpass")]});case"polygonOffset.offset":return Ci(function(lr){return[0|lr.factor,0|lr.units]},function(lr,bi,Ni){return[bi.def(Ni,".factor|0"),bi=bi.def(Ni,".units|0")]});case"cull.face":return Ci(function(lr){var bi=0;return"front"===lr?bi=1028:"back"===lr&&(bi=1029),bi},function(lr,bi,Ni){return bi.def(Ni,'==="front"?',1028,":",1029)});case"frontFace":return Ci(function(lr){return Ze[lr]},function(lr,bi,Ni){return bi.def(Ni+'==="cw"?2304:2305')});case"colorMask":return Ci(function(lr){return lr.map(function(bi){return!!bi})},function(lr,bi,Ni){return r(4,function(wa){return"!!"+Ni+"["+wa+"]"})});case"sample.coverage":return Ci(function(lr){return["value"in lr?lr.value:1,!!lr.invert]},function(lr,bi,Ni){return[bi.def('"value" in ',Ni,"?+",Ni,".value:1"),bi=bi.def("!!",Ni,".invert")]})}}),Ir),Hn=function(Ut,Kt,Mn){function Bn(Yn){if(Yn in cr){var Hn=rt.id(cr[Yn]);return(Yn=$(function(){return Hn})).id=Hn,Yn}if(Yn in ur){var Zn=ur[Yn];return K(Zn,function(Sr,Ar){var gr=Sr.invoke(Ar,Zn);return Ar.def(Sr.shared.strings,".id(",gr,")")})}return null}var cr=Ut.static,ur=Ut.dynamic,Rn=Bn("frag"),Cn=Bn("vert"),Un=null;return Q(Rn)&&Q(Cn)?(Un=zt.program(Cn.id,Rn.id,null,Mn),Ut=$(function(Yn,Hn){return Yn.link(Un)})):Ut=new ee(Rn&&Rn.thisDep||Cn&&Cn.thisDep,Rn&&Rn.contextDep||Cn&&Cn.contextDep,Rn&&Rn.propDep||Cn&&Cn.propDep,function(Yn,Hn){var Zn,Sr,Ar=Yn.shared.shader;return Zn=Rn?Rn.append(Yn,Hn):Hn.def(Ar,".","frag"),Sr=Cn?Cn.append(Yn,Hn):Hn.def(Ar,".","vert"),Hn.def(Ar+".program("+Sr+","+Zn+")")}),{frag:Rn,vert:Cn,progVar:Ut,program:Un}}(Ut,0,Rn);ur("viewport"),ur(Mt("scissor.box"));var Zn,Sr=0<Object.keys(Yn).length;if((Zn={framebuffer:Zn,draw:Un,shader:Hn,state:Yn,dirty:Sr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Rr){var ir,rr=Rr.static;if(Rr=Rr.dynamic,"profile"in rr){var wr=!!rr.profile;(ir=$(function(Vr,Ci){return wr})).enable=wr}else if("profile"in Rr){var Ir=Rr.profile;ir=K(Ir,function(Vr,Ci){return Vr.invoke(Ci,Ir)})}return ir}(Ut),Zn.uniforms=function(Rr,ir){var rr=Rr.static,wr=Rr.dynamic,Ir={};return Object.keys(rr).forEach(function(Vr){var Ci,pi=rr[Vr];if("number"==typeof pi||"boolean"==typeof pi)Ci=$(function(){return pi});else if("function"==typeof pi){var lr=pi._reglType;"texture2d"===lr||"textureCube"===lr?Ci=$(function(bi){return bi.link(pi)}):"framebuffer"!==lr&&"framebufferCube"!==lr||(Ci=$(function(bi){return bi.link(pi.color[0])}))}else m(pi)&&(Ci=$(function(bi){return bi.global.def("[",r(pi.length,function(Ni){return pi[Ni]}),"]")}));Ci.value=pi,Ir[Vr]=Ci}),Object.keys(wr).forEach(function(Vr){var Ci=wr[Vr];Ir[Vr]=K(Ci,function(pi,lr){return pi.invoke(lr,Ci)})}),Ir}(Mn),Zn.drawVAO=Zn.scopeVAO=Un.vao,!Zn.drawVAO&&Hn.program&&!Rn&&Le.angle_instanced_arrays&&Un.static.elements){var Ar=!0;if(Ut=Hn.program.attributes.map(function(Rr){return Rr=Kt.static[Rr],Ar=Ar&&!!Rr,Rr}),Ar&&0<Ut.length){var gr=xt.getVAO(xt.createVAO({attributes:Ut,elements:Un.static.elements}));Zn.drawVAO=new ee(null,null,null,function(Rr,ir){return Rr.link(gr)}),Zn.useVAO=!0}}return Rn?Zn.useVAO=!0:Zn.attributes=function(Ut,Kt){var Mn=Ut.static,Bn=Ut.dynamic,cr={};return Object.keys(Mn).forEach(function(ur){var Rn=Mn[ur],Cn=rt.id(ur),Un=new mr;if(Z(Rn))Un.state=1,Un.buffer=je.getBuffer(je.create(Rn,34962,!1,!0)),Un.type=0;else if(Hn=je.getBuffer(Rn))Un.state=1,Un.buffer=Hn,Un.type=0;else if("constant"in Rn){var Yn=Rn.constant;Un.buffer="null",Un.state=2,"number"==typeof Yn?Un.x=Yn:ht.forEach(function(ir,rr){rr<Yn.length&&(Un[ir]=Yn[rr])})}else{var Hn=Z(Rn.buffer)?je.getBuffer(je.create(Rn.buffer,34962,!1,!0)):je.getBuffer(Rn.buffer),Zn=0|Rn.offset,Sr=0|Rn.stride,Ar=0|Rn.size,gr=!!Rn.normalized,Rr=0;"type"in Rn&&(Rr=ge[Rn.type]),Rn=0|Rn.divisor,Un.buffer=Hn,Un.state=1,Un.size=Ar,Un.normalized=gr,Un.type=Rr||Hn.dtype,Un.offset=Zn,Un.stride=Sr,Un.divisor=Rn}cr[ur]=$(function(ir,rr){var wr=ir.attribCache;if(Cn in wr)return wr[Cn];var Ir={isStream:!1};return Object.keys(Un).forEach(function(Vr){Ir[Vr]=Un[Vr]}),Un.buffer&&(Ir.buffer=ir.link(Un.buffer),Ir.type=Ir.type||Ir.buffer+".dtype"),wr[Cn]=Ir})}),Object.keys(Bn).forEach(function(ur){var Rn=Bn[ur];cr[ur]=K(Rn,function(Cn,Un){function Yn(wr){Un(gr[wr],"=",Hn,".",wr,"|0;")}var Hn=Cn.invoke(Un,Rn),Zn=Cn.shared,Sr=Cn.constants,Ar=Zn.isBufferArgs,gr=(Zn=Zn.buffer,{isStream:Un.def(!1)}),Rr=new mr;Rr.state=1,Object.keys(Rr).forEach(function(wr){gr[wr]=Un.def(""+Rr[wr])});var ir=gr.buffer,rr=gr.type;return Un("if(",Ar,"(",Hn,")){",gr.isStream,"=true;",ir,"=",Zn,".createStream(",34962,",",Hn,");",rr,"=",ir,".dtype;","}else{",ir,"=",Zn,".getBuffer(",Hn,");","if(",ir,"){",rr,"=",ir,".dtype;",'}else if("constant" in ',Hn,"){",gr.state,"=",2,";","if(typeof "+Hn+'.constant === "number"){',gr[ht[0]],"=",Hn,".constant;",ht.slice(1).map(function(wr){return gr[wr]}).join("="),"=0;","}else{",ht.map(function(wr,Ir){return gr[wr]+"="+Hn+".constant.length>"+Ir+"?"+Hn+".constant["+Ir+"]:0;"}).join(""),"}}else{","if(",Ar,"(",Hn,".buffer)){",ir,"=",Zn,".createStream(",34962,",",Hn,".buffer);","}else{",ir,"=",Zn,".getBuffer(",Hn,".buffer);","}",rr,'="type" in ',Hn,"?",Sr.glTypes,"[",Hn,".type]:",ir,".dtype;",gr.normalized,"=!!",Hn,".normalized;"),Yn("size"),Yn("offset"),Yn("stride"),Yn("divisor"),Un("}}"),Un.exit("if(",gr.isStream,"){",Zn,".destroyStream(",ir,");","}"),gr})}),cr}(Kt),Zn.context=function(Rr){var ir=Rr.static,rr=Rr.dynamic,wr={};return Object.keys(ir).forEach(function(Ir){var Vr=ir[Ir];wr[Ir]=$(function(Ci,pi){return"number"==typeof Vr||"boolean"==typeof Vr?""+Vr:Ci.link(Vr)})}),Object.keys(rr).forEach(function(Ir){var Vr=rr[Ir];wr[Ir]=K(Vr,function(Ci,pi){return Ci.invoke(pi,Vr)})}),wr}(Bn),Zn}function gn(Ut,Kt,Mn){var Bn=Ut.shared.context,cr=Ut.scope();Object.keys(Mn).forEach(function(ur){Kt.save(Bn,"."+ur);var Rn=Mn[ur].append(Ut,Kt);Array.isArray(Rn)?cr(Bn,".",ur,"=[",Rn.join(),"];"):cr(Bn,".",ur,"=",Rn,";")}),Kt(cr)}function Qt(Ut,Kt,Mn,Bn){var cr,ur=(Cn=Ut.shared).gl,Rn=Cn.framebuffer;Xn&&(cr=Kt.def(Cn.extensions,".webgl_draw_buffers"));var Cn=(Un=Ut.constants).drawBuffer,Un=Un.backBuffer;Ut=Mn?Mn.append(Ut,Kt):Kt.def(Rn,".next"),Bn||Kt("if(",Ut,"!==",Rn,".cur){"),Kt("if(",Ut,"){",ur,".bindFramebuffer(",36160,",",Ut,".framebuffer);"),Xn&&Kt(cr,".drawBuffersWEBGL(",Cn,"[",Ut,".colorAttachments.length]);"),Kt("}else{",ur,".bindFramebuffer(",36160,",null);"),Xn&&Kt(cr,".drawBuffersWEBGL(",Un,");"),Kt("}",Rn,".cur=",Ut,";"),Bn||Kt("}")}function sn(Ut,Kt,Mn){var Bn=Ut.shared,cr=Bn.gl,ur=Ut.current,Rn=Ut.next,Cn=Bn.current,Un=Bn.next,Yn=Ut.cond(Cn,".dirty");Jn.forEach(function(Hn){var Zn,Sr;if(!((Hn=Mt(Hn))in Mn.state))if(Hn in Rn){Zn=Rn[Hn],Sr=ur[Hn];var Ar=r(nr[Hn].length,function(gr){return Yn.def(Zn,"[",gr,"]")});Yn(Ut.cond(Ar.map(function(gr,Rr){return gr+"!=="+Sr+"["+Rr+"]"}).join("||")).then(cr,".",Hr[Hn],"(",Ar,");",Ar.map(function(gr,Rr){return Sr+"["+Rr+"]="+gr}).join(";"),";"))}else Zn=Yn.def(Un,".",Hn),Ar=Ut.cond(Zn,"!==",Cn,".",Hn),Yn(Ar),Hn in _r?Ar(Ut.cond(Zn).then(cr,".enable(",_r[Hn],");").else(cr,".disable(",_r[Hn],");"),Cn,".",Hn,"=",Zn,";"):Ar(cr,".",Hr[Hn],"(",Zn,");",Cn,".",Hn,"=",Zn,";")}),0===Object.keys(Mn.state).length&&Yn(Cn,".dirty=false;"),Kt(Yn)}function hn(Ut,Kt,Mn,Bn){var cr=Ut.shared,ur=Ut.current,Rn=cr.current,Cn=cr.gl;Y(Object.keys(Mn)).forEach(function(Un){var Yn=Mn[Un];if(!Bn||Bn(Yn)){var Hn=Yn.append(Ut,Kt);if(_r[Un]){var Zn=_r[Un];Q(Yn)?Kt(Cn,Hn?".enable(":".disable(",Zn,");"):Kt(Ut.cond(Hn).then(Cn,".enable(",Zn,");").else(Cn,".disable(",Zn,");")),Kt(Rn,".",Un,"=",Hn,";")}else if(m(Hn)){var Sr=ur[Un];Kt(Cn,".",Hr[Un],"(",Hn,");",Hn.map(function(Ar,gr){return Sr+"["+gr+"]="+Ar}).join(";"),";")}else Kt(Cn,".",Hr[Un],"(",Hn,");",Rn,".",Un,"=",Hn,";")}})}function Dn(Ut,Kt){vr&&(Ut.instancing=Kt.def(Ut.shared.extensions,".angle_instanced_arrays"))}function _n(Ut,Kt,Mn,Bn,cr){function ur(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function Rn(Rr){Rr(Yn=Kt.def(),"=",ur(),";"),"string"==typeof cr?Rr(Sr,".count+=",cr,";"):Rr(Sr,".count++;"),jt&&(Bn?Rr(Hn=Kt.def(),"=",gr,".getNumPendingQueries();"):Rr(gr,".beginQuery(",Sr,");"))}function Cn(Rr){Rr(Sr,".cpuTime+=",ur(),"-",Yn,";"),jt&&(Bn?Rr(gr,".pushScopeStats(",Hn,",",gr,".getNumPendingQueries(),",Sr,");"):Rr(gr,".endQuery();"))}function Un(Rr){var ir=Kt.def(Ar,".profile");Kt(Ar,".profile=",Rr,";"),Kt.exit(Ar,".profile=",ir,";")}var Yn,Hn,Zn=Ut.shared,Sr=Ut.stats,Ar=Zn.current,gr=Zn.timer;if(Mn=Mn.profile){if(Q(Mn))return void(Mn.enable?(Rn(Kt),Cn(Kt.exit),Un("true")):Un("false"));Un(Mn=Mn.append(Ut,Kt))}else Mn=Kt.def(Ar,".profile");Rn(Zn=Ut.block()),Kt("if(",Mn,"){",Zn,"}"),Cn(Ut=Ut.block()),Kt.exit("if(",Mn,"){",Ut,"}")}function Tn(Ut,Kt,Mn,Bn,cr){var Rn=Ut.shared;Bn.forEach(function(Cn){var Un,Yn=Cn.name,Hn=Mn.attributes[Yn];if(Hn){if(!cr(Hn))return;Un=Hn.append(Ut,Kt)}else{if(!cr(Qe))return;var Zn=Ut.scopeAttrib(Yn);Un={},Object.keys(new mr).forEach(function(Sr){Un[Sr]=Kt.def(Zn,".",Sr)})}!function(Cn,Un,Yn){function Hn(){Kt("if(!",gr,".buffer){",Sr,".enableVertexAttribArray(",Ar,");}");var wr,Ir=Yn.type;wr=Yn.size?Kt.def(Yn.size,"||",Un):Un,Kt("if(",gr,".type!==",Ir,"||",gr,".size!==",wr,"||",rr.map(function(Vr){return gr+"."+Vr+"!=="+Yn[Vr]}).join("||"),"){",Sr,".bindBuffer(",34962,",",Rr,".buffer);",Sr,".vertexAttribPointer(",[Ar,wr,Ir,Yn.normalized,Yn.stride,Yn.offset],");",gr,".type=",Ir,";",gr,".size=",wr,";",rr.map(function(Vr){return gr+"."+Vr+"="+Yn[Vr]+";"}).join(""),"}"),vr&&Kt("if(",gr,".divisor!==",Ir=Yn.divisor,"){",Ut.instancing,".vertexAttribDivisorANGLE(",[Ar,Ir],");",gr,".divisor=",Ir,";}")}function Zn(){Kt("if(",gr,".buffer){",Sr,".disableVertexAttribArray(",Ar,");",gr,".buffer=null;","}if(",ht.map(function(wr,Ir){return gr+"."+wr+"!=="+ir[Ir]}).join("||"),"){",Sr,".vertexAttrib4f(",Ar,",",ir,");",ht.map(function(wr,Ir){return gr+"."+wr+"="+ir[Ir]+";"}).join(""),"}")}var Sr=Rn.gl,Ar=Kt.def(Cn,".location"),gr=Kt.def(Rn.attributes,"[",Ar,"]"),Rr=Yn.buffer,ir=[Yn.x,Yn.y,Yn.z,Yn.w],rr=["buffer","normalized","offset","stride"];1===(Cn=Yn.state)?Hn():2===Cn?Zn():(Kt("if(",Cn,"===",1,"){"),Hn(),Kt("}else{"),Zn(),Kt("}"))}(Ut.link(Cn),function(Sr){switch(Sr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Cn.info.type),Un)})}function wn(Ut,Kt,Mn,Bn,cr,ur){for(var Rn,Cn=Ut.shared,Un=Cn.gl,Yn={},Hn=0;Hn<Bn.length;++Hn){var Zn=(rr=Bn[Hn]).name,Sr=rr.info.type,Ar=rr.info.size,gr=Mn.uniforms[Zn];if(1<Ar){if(!gr)continue;var Rr=Zn.replace("[0]","");if(Yn[Rr])continue;Yn[Rr]=1}var ir,rr=Ut.link(rr)+".location";if(gr){if(!cr(gr))continue;if(Q(gr)){if(Zn=gr.value,35678===Sr||35680===Sr)Kt(Un,".uniform1i(",rr,",",(Sr=Ut.link(Zn._texture||Zn.color[0]._texture))+".bind());"),Kt.exit(Sr,".unbind();");else if(35674===Sr||35675===Sr||35676===Sr)Ar=Ut.global.def("new Float32Array(["+Array.prototype.slice.call(Zn)+"])"),Zn=2,35675===Sr?Zn=3:35676===Sr&&(Zn=4),Kt(Un,".uniformMatrix",Zn,"fv(",rr,",false,",Ar,");");else{switch(Sr){case 5126:Rn="1f";break;case 35664:Rn="2f";break;case 35665:Rn="3f";break;case 35666:Rn="4f";break;case 35670:case 5124:Rn="1i";break;case 35671:case 35667:Rn="2i";break;case 35672:case 35668:Rn="3i";break;case 35673:case 35669:Rn="4i"}1<Ar?(Rn+="v",Zn=Ut.global.def("["+Array.prototype.slice.call(Zn)+"]")):Zn=m(Zn)?Array.prototype.slice.call(Zn):Zn,Kt(Un,".uniform",Rn,"(",rr,",",Zn,");")}continue}ir=gr.append(Ut,Kt)}else{if(!cr(Qe))continue;ir=Kt.def(Cn.uniforms,"[",rt.id(Zn),"]")}switch(35678===Sr?Kt("if(",ir,"&&",ir,'._reglType==="framebuffer"){',ir,"=",ir,".color[0];","}"):35680===Sr&&Kt("if(",ir,"&&",ir,'._reglType==="framebufferCube"){',ir,"=",ir,".color[0];","}"),Zn=1,Sr){case 35678:case 35680:Sr=Kt.def(ir,"._texture"),Kt(Un,".uniform1i(",rr,",",Sr,".bind());"),Kt.exit(Sr,".unbind();");continue;case 5124:case 35670:Rn="1i";break;case 35667:case 35671:Rn="2i",Zn=2;break;case 35668:case 35672:Rn="3i",Zn=3;break;case 35669:case 35673:Rn="4i",Zn=4;break;case 5126:Rn="1f";break;case 35664:Rn="2f",Zn=2;break;case 35665:Rn="3f",Zn=3;break;case 35666:Rn="4f",Zn=4;break;case 35674:Rn="Matrix2fv";break;case 35675:Rn="Matrix3fv";break;case 35676:Rn="Matrix4fv"}if(-1===Rn.indexOf("Matrix")&&1<Ar&&(Rn+="v",Zn=1),"M"===Rn.charAt(0)){Kt(Un,".uniform",Rn,"(",rr,","),rr=Math.pow(Sr-35674+2,2);var wr=Ut.global.def("new Float32Array(",rr,")");Array.isArray(ir)?Kt("false,(",r(rr,function(Vr){return wr+"["+Vr+"]="+ir[Vr]}),",",wr,")"):Kt("false,(Array.isArray(",ir,")||",ir," instanceof Float32Array)?",ir,":(",r(rr,function(Vr){return wr+"["+Vr+"]="+ir+"["+Vr+"]"}),",",wr,")"),Kt(");")}else{if(1<Zn){Sr=[];var Ir=[];for(Ar=0;Ar<Zn;++Ar)Array.isArray(ir)?Ir.push(ir[Ar]):Ir.push(Kt.def(ir+"["+Ar+"]")),ur&&Sr.push(Kt.def());ur&&Kt("if(!",Ut.batchId,"||",Sr.map(function(Vr,Ci){return Vr+"!=="+Ir[Ci]}).join("||"),"){",Sr.map(function(Vr,Ci){return Vr+"="+Ir[Ci]+";"}).join("")),Kt(Un,".uniform",Rn,"(",rr,",",Ir.join(","),");")}else ur&&(Sr=Kt.def(),Kt("if(!",Ut.batchId,"||",Sr,"!==",ir,"){",Sr,"=",ir,";")),Kt(Un,".uniform",Rn,"(",rr,",",ir,");");ur&&Kt("}")}}}function kn(Ut,Kt,Mn,Bn){function cr(Ir){var Vr=Sr[Ir];return Vr?Vr.append(Ut,Vr.contextDep&&Bn.contextDynamic||Vr.propDep?Mn:Kt):Kt.def(Zn,".",Ir)}function ur(){function Ir(){Mn(Un,".drawElementsInstancedANGLE(",[gr,ir,rr,Rr+"<<(("+rr+"-5121)>>1)",Cn],");")}function Vr(){Mn(Un,".drawArraysInstancedANGLE(",[gr,Rr,ir,Cn],");")}Ar&&"null"!==Ar?wr?Ir():(Mn("if(",Ar,"){"),Ir(),Mn("}else{"),Vr(),Mn("}")):Vr()}function Rn(){function Ir(){Mn(Hn+".drawElements("+[gr,ir,rr,Rr+"<<(("+rr+"-5121)>>1)"]+");")}function Vr(){Mn(Hn+".drawArrays("+[gr,Rr,ir]+");")}Ar&&"null"!==Ar?wr?Ir():(Mn("if(",Ar,"){"),Ir(),Mn("}else{"),Vr(),Mn("}")):Vr()}var Cn,Un,Ir,Vr,Yn=Ut.shared,Hn=Yn.gl,Zn=Yn.draw,Sr=Bn.draw,Ar=(Vr=Kt,(Ir=Sr.elements)?((Ir.contextDep&&Bn.contextDynamic||Ir.propDep)&&(Vr=Mn),Ir=Ir.append(Ut,Vr),Sr.elementsActive&&Vr("if("+Ir+")"+Hn+".bindBuffer(34963,"+Ir+".buffer.buffer);")):(Ir=Vr.def(),Vr(Ir,"=",Zn,".","elements",";","if(",Ir,"){",Hn,".bindBuffer(",34963,",",Ir,".buffer.buffer);}","else if(",Yn.vao,".currentVAO){",Ir,"=",Ut.shared.elements+".getElements("+Yn.vao,".currentVAO.elements);",jn?"":"if("+Ir+")"+Hn+".bindBuffer(34963,"+Ir+".buffer.buffer);","}")),Ir),gr=cr("primitive"),Rr=cr("offset"),ir=function(){var Ir=Sr.count,Vr=Kt;return Ir?((Ir.contextDep&&Bn.contextDynamic||Ir.propDep)&&(Vr=Mn),Ir=Ir.append(Ut,Vr)):Ir=Vr.def(Zn,".","count"),Ir}();if("number"==typeof ir){if(0===ir)return}else Mn("if(",ir,"){"),Mn.exit("}");vr&&(Cn=cr("instances"),Un=Ut.instancing);var rr=Ar+".type",wr=Sr.elements&&Q(Sr.elements)&&!Sr.vaoActive;vr&&("number"!=typeof Cn||0<=Cn)?"string"==typeof Cn?(Mn("if(",Cn,">0){"),ur(),Mn("}else if(",Cn,"<0){"),Rn(),Mn("}")):ur():Rn()}function Fn(Ut,Kt,Mn,Bn,cr){return cr=(Kt=an()).proc("body",cr),vr&&(Kt.instancing=cr.def(Kt.shared.extensions,".angle_instanced_arrays")),Ut(Kt,cr,Mn,Bn),Kt.compile().body}function On(Ut,Kt,Mn,Bn){Dn(Ut,Kt),Mn.useVAO?Mn.drawVAO?Kt(Ut.shared.vao,".setVAO(",Mn.drawVAO.append(Ut,Kt),");"):Kt(Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"):(Kt(Ut.shared.vao,".setVAO(null);"),Tn(Ut,Kt,Mn,Bn.attributes,function(){return!0})),wn(Ut,Kt,Mn,Bn.uniforms,function(){return!0},!1),kn(Ut,Kt,Kt,Mn)}function Qn(Ut,Kt,Mn,Bn){function cr(){return!0}Ut.batchId="a1",Dn(Ut,Kt),Tn(Ut,Kt,Mn,Bn.attributes,cr),wn(Ut,Kt,Mn,Bn.uniforms,cr,!1),kn(Ut,Kt,Kt,Mn)}function sr(Ut,Kt,Mn,Bn){function cr(Zn){return Zn.contextDep&&Rn||Zn.propDep}function ur(Zn){return!cr(Zn)}Dn(Ut,Kt);var Rn=Mn.contextDep,Cn=Kt.def(),Un=Kt.def();Ut.shared.props=Un,Ut.batchId=Cn;var Yn=Ut.scope(),Hn=Ut.scope();Kt(Yn.entry,"for(",Cn,"=0;",Cn,"<","a1",";++",Cn,"){",Un,"=","a0","[",Cn,"];",Hn,"}",Yn.exit),Mn.needsContext&&gn(Ut,Hn,Mn.context),Mn.needsFramebuffer&&Qt(Ut,Hn,Mn.framebuffer),hn(Ut,Hn,Mn.state,cr),Mn.profile&&cr(Mn.profile)&&_n(Ut,Hn,Mn,!1,!0),Bn?(Mn.useVAO?Mn.drawVAO?cr(Mn.drawVAO)?Hn(Ut.shared.vao,".setVAO(",Mn.drawVAO.append(Ut,Hn),");"):Yn(Ut.shared.vao,".setVAO(",Mn.drawVAO.append(Ut,Yn),");"):Yn(Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"):(Yn(Ut.shared.vao,".setVAO(null);"),Tn(Ut,Yn,Mn,Bn.attributes,ur),Tn(Ut,Hn,Mn,Bn.attributes,cr)),wn(Ut,Yn,Mn,Bn.uniforms,ur,!1),wn(Ut,Hn,Mn,Bn.uniforms,cr,!0),kn(Ut,Yn,Hn,Mn)):(Kt=Ut.global.def("{}"),Bn=Mn.shader.progVar.append(Ut,Hn),Un=Hn.def(Bn,".id"),Yn=Hn.def(Kt,"[",Un,"]"),Hn(Ut.shared.gl,".useProgram(",Bn,".program);","if(!",Yn,"){",Yn,"=",Kt,"[",Un,"]=",Ut.link(function(Zn){return Fn(Qn,Ut,Mn,Zn,2)}),"(",Bn,");}",Yn,".call(this,a0[",Cn,"],",Cn,");"))}function Wr(Ut,Kt,Mn){var Bn=Kt.static[Mn];if(Bn&&function(Hn){if("object"==typeof Hn&&!m(Hn)){for(var Zn=Object.keys(Hn),Sr=0;Sr<Zn.length;++Sr)if(re.isDynamic(Hn[Zn[Sr]]))return!0;return!1}}(Bn)){var cr=Ut.global,ur=Object.keys(Bn),Rn=!1,Cn=!1,Un=!1,Yn=Ut.global.def("{}");ur.forEach(function(Hn){var Zn=Bn[Hn];if(re.isDynamic(Zn))"function"==typeof Zn&&(Zn=Bn[Hn]=re.unbox(Zn)),Hn=K(Zn,null),Rn=Rn||Hn.thisDep,Un=Un||Hn.propDep,Cn=Cn||Hn.contextDep;else{switch(cr(Yn,".",Hn,"="),typeof Zn){case"number":cr(Zn);break;case"string":cr('"',Zn,'"');break;case"object":Array.isArray(Zn)&&cr("[",Zn.join(),"]");break;default:cr(Ut.link(Zn))}cr(";")}}),Kt.dynamic[Mn]=new re.DynamicVariable(4,{thisDep:Rn,contextDep:Cn,propDep:Un,ref:Yn,append:function(Hn,Zn){ur.forEach(function(Sr){var Ar=Bn[Sr];re.isDynamic(Ar)&&(Ar=Hn.invoke(Zn,Ar),Zn(Yn,".",Sr,"=",Ar,";"))})}}),delete Kt.static[Mn]}}var mr=xt.Record,Or={add:32774,subtract:32778,"reverse subtract":32779};Le.ext_blend_minmax&&(Or.min=32775,Or.max=32776);var vr=Le.angle_instanced_arrays,Xn=Le.webgl_draw_buffers,jn=Le.oes_vertex_array_object,nr={dirty:!0,profile:it.profile},Ur={},Jn=[],_r={},Hr={};qt("dither",3024),qt("blend.enable",3042),Wt("blend.color","blendColor",[0,0,0,0]),Wt("blend.equation","blendEquationSeparate",[32774,32774]),Wt("blend.func","blendFuncSeparate",[1,0,1,0]),qt("depth.enable",2929,!0),Wt("depth.func","depthFunc",513),Wt("depth.range","depthRange",[0,1]),Wt("depth.mask","depthMask",!0),Wt("colorMask","colorMask",[!0,!0,!0,!0]),qt("cull.enable",2884),Wt("cull.face","cullFace",1029),Wt("frontFace","frontFace",2305),Wt("lineWidth","lineWidth",1),qt("polygonOffset.enable",32823),Wt("polygonOffset.offset","polygonOffset",[0,0]),qt("sample.alpha",32926),qt("sample.enable",32928),Wt("sample.coverage","sampleCoverage",[1,!1]),qt("stencil.enable",2960),Wt("stencil.mask","stencilMask",-1),Wt("stencil.func","stencilFunc",[519,0,-1]),Wt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Wt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),qt("scissor.enable",3089),Wt("scissor.box","scissor",[0,0,Ge.drawingBufferWidth,Ge.drawingBufferHeight]),Wt("viewport","viewport",[0,0,Ge.drawingBufferWidth,Ge.drawingBufferHeight]);var Lr={gl:Ge,context:Bt,strings:rt,next:Ur,current:nr,draw:gt,elements:Ne,buffer:je,shader:zt,attributes:xt.state,vao:xt,uniforms:Tt,framebuffer:mt,extensions:Le,timer:jt,isBufferArgs:Z},$r={primTypes:Re,compareFuncs:nn,blendFuncs:Rt,blendEquations:Or,stencilOps:cn,glTypes:ge,orientationType:Ze};Xn&&($r.backBuffer=[1029],$r.drawBuffer=r(ze.maxDrawbuffers,function(Ut){return 0===Ut?[0]:r(Ut,function(Kt){return 36064+Kt})}));var dn=0;return{next:Ur,current:nr,procs:function(){var Ut=an(),Kt=Ut.proc("poll"),Mn=Ut.proc("refresh"),Bn=Ut.block();Kt(Bn),Mn(Bn);var cr,ur=Ut.shared,Rn=ur.gl,Cn=ur.next,Un=ur.current;Bn(Un,".dirty=false;"),Qt(Ut,Kt),Qt(Ut,Mn,null,!0),vr&&(cr=Ut.link(vr)),Le.oes_vertex_array_object&&Mn(Ut.link(Le.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Yn=0;Yn<ze.maxAttributes;++Yn){var Hn=Mn.def(ur.attributes,"[",Yn,"]"),Zn=Ut.cond(Hn,".buffer");Zn.then(Rn,".enableVertexAttribArray(",Yn,");",Rn,".bindBuffer(",34962,",",Hn,".buffer.buffer);",Rn,".vertexAttribPointer(",Yn,",",Hn,".size,",Hn,".type,",Hn,".normalized,",Hn,".stride,",Hn,".offset);").else(Rn,".disableVertexAttribArray(",Yn,");",Rn,".vertexAttrib4f(",Yn,",",Hn,".x,",Hn,".y,",Hn,".z,",Hn,".w);",Hn,".buffer=null;"),Mn(Zn),vr&&Mn(cr,".vertexAttribDivisorANGLE(",Yn,",",Hn,".divisor);")}return Mn(Ut.shared.vao,".currentVAO=null;",Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"),Object.keys(_r).forEach(function(Sr){var Ar=_r[Sr],gr=Bn.def(Cn,".",Sr),Rr=Ut.block();Rr("if(",gr,"){",Rn,".enable(",Ar,")}else{",Rn,".disable(",Ar,")}",Un,".",Sr,"=",gr,";"),Mn(Rr),Kt("if(",gr,"!==",Un,".",Sr,"){",Rr,"}")}),Object.keys(Hr).forEach(function(Sr){var Ar,gr,Rr=Hr[Sr],ir=nr[Sr],rr=Ut.block();rr(Rn,".",Rr,"("),m(ir)?(Rr=ir.length,Ar=Ut.global.def(Cn,".",Sr),gr=Ut.global.def(Un,".",Sr),rr(r(Rr,function(wr){return Ar+"["+wr+"]"}),");",r(Rr,function(wr){return gr+"["+wr+"]="+Ar+"["+wr+"];"}).join("")),Kt("if(",r(Rr,function(wr){return Ar+"["+wr+"]!=="+gr+"["+wr+"]"}).join("||"),"){",rr,"}")):(Ar=Bn.def(Cn,".",Sr),gr=Bn.def(Un,".",Sr),rr(Ar,");",Un,".",Sr,"=",Ar,";"),Kt("if(",Ar,"!==",gr,"){",rr,"}")),Mn(rr)}),Ut.compile()}(),compile:function(Ut,Kt,Mn,Bn,cr){var ur=an();ur.stats=ur.link(cr),Object.keys(Kt.static).forEach(function(Cn){Wr(ur,Kt,Cn)}),ut.forEach(function(Cn){Wr(ur,Ut,Cn)});var Rn=Jt(Ut,Kt,Mn,Bn);return function(Cn,Un){var Yn=Cn.proc("draw",1);Dn(Cn,Yn),gn(Cn,Yn,Un.context),Qt(Cn,Yn,Un.framebuffer),sn(Cn,Yn,Un),hn(Cn,Yn,Un.state),_n(Cn,Yn,Un,!1,!0);var Hn=Un.shader.progVar.append(Cn,Yn);if(Yn(Cn.shared.gl,".useProgram(",Hn,".program);"),Un.shader.program)On(Cn,Yn,Un,Un.shader.program);else{Yn(Cn.shared.vao,".setVAO(null);");var Zn=Cn.global.def("{}"),Sr=Yn.def(Hn,".id"),Ar=Yn.def(Zn,"[",Sr,"]");Yn(Cn.cond(Ar).then(Ar,".call(this,a0);").else(Ar,"=",Zn,"[",Sr,"]=",Cn.link(function(gr){return Fn(On,Cn,Un,gr,1)}),"(",Hn,");",Ar,".call(this,a0);"))}0<Object.keys(Un.state).length&&Yn(Cn.shared.current,".dirty=true;"),Cn.shared.vao&&Yn(Cn.shared.vao,".setVAO(null);")}(ur,Rn),function(Ut,Kt){function Mn(Rn){var Cn=Kt.shader[Rn];Cn&&Bn.set(cr.shader,"."+Rn,Cn.append(Ut,Bn))}var Bn=Ut.proc("scope",3);Ut.batchId="a2";var cr=Ut.shared,ur=cr.current;gn(Ut,Bn,Kt.context),Kt.framebuffer&&Kt.framebuffer.append(Ut,Bn),Y(Object.keys(Kt.state)).forEach(function(Rn){var Cn=Kt.state[Rn].append(Ut,Bn);m(Cn)?Cn.forEach(function(Un,Yn){Bn.set(Ut.next[Rn],"["+Yn+"]",Un)}):Bn.set(cr.next,"."+Rn,Cn)}),_n(Ut,Bn,Kt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Rn){var Cn=Kt.draw[Rn];Cn&&Bn.set(cr.draw,"."+Rn,""+Cn.append(Ut,Bn))}),Object.keys(Kt.uniforms).forEach(function(Rn){var Cn=Kt.uniforms[Rn].append(Ut,Bn);Array.isArray(Cn)&&(Cn="["+Cn.join()+"]"),Bn.set(cr.uniforms,"["+rt.id(Rn)+"]",Cn)}),Object.keys(Kt.attributes).forEach(function(Rn){var Cn=Kt.attributes[Rn].append(Ut,Bn),Un=Ut.scopeAttrib(Rn);Object.keys(new mr).forEach(function(Yn){Bn.set(Un,"."+Yn,Cn[Yn])})}),Kt.scopeVAO&&Bn.set(cr.vao,".targetVAO",Kt.scopeVAO.append(Ut,Bn)),Mn("vert"),Mn("frag"),0<Object.keys(Kt.state).length&&(Bn(ur,".dirty=true;"),Bn.exit(ur,".dirty=true;")),Bn("a1(",Ut.shared.context,",a0,",Ut.batchId,");")}(ur,Rn),function(Cn,Un){function Yn(ir){return ir.contextDep&&Zn||ir.propDep}var Hn=Cn.proc("batch",2);Cn.batchId="0",Dn(Cn,Hn);var Zn=!1,Sr=!0;Object.keys(Un.context).forEach(function(ir){Zn=Zn||Un.context[ir].propDep}),Zn||(gn(Cn,Hn,Un.context),Sr=!1);var Ar=!1;if((gr=Un.framebuffer)?(gr.propDep?Zn=Ar=!0:gr.contextDep&&Zn&&(Ar=!0),Ar||Qt(Cn,Hn,gr)):Qt(Cn,Hn,null),Un.state.viewport&&Un.state.viewport.propDep&&(Zn=!0),sn(Cn,Hn,Un),hn(Cn,Hn,Un.state,function(ir){return!Yn(ir)}),Un.profile&&Yn(Un.profile)||_n(Cn,Hn,Un,!1,"a1"),Un.contextDep=Zn,Un.needsContext=Sr,Un.needsFramebuffer=Ar,(Sr=Un.shader.progVar).contextDep&&Zn||Sr.propDep)sr(Cn,Hn,Un,null);else if(Sr=Sr.append(Cn,Hn),Hn(Cn.shared.gl,".useProgram(",Sr,".program);"),Un.shader.program)sr(Cn,Hn,Un,Un.shader.program);else{Hn(Cn.shared.vao,".setVAO(null);");var gr=Cn.global.def("{}"),Rr=(Ar=Hn.def(Sr,".id"),Hn.def(gr,"[",Ar,"]"));Hn(Cn.cond(Rr).then(Rr,".call(this,a0,a1);").else(Rr,"=",gr,"[",Ar,"]=",Cn.link(function(ir){return Fn(sr,Cn,Un,ir,2)}),"(",Sr,");",Rr,".call(this,a0,a1);"))}0<Object.keys(Un.state).length&&Hn(Cn.shared.current,".dirty=true;"),Cn.shared.vao&&Hn(Cn.shared.vao,".setVAO(null);")}(ur,Rn),H(ur.compile(),{destroy:function(){Rn.shader.program.destroy()}})}}}function j(Ge,rt){for(var Le=0;Le<Ge.length;++Le)if(Ge[Le]===rt)return Le;return-1}var H=function(Ge,rt){for(var Le=Object.keys(rt),ze=0;ze<Le.length;++ze)Ge[Le[ze]]=rt[Le[ze]];return Ge},G=0,re={DynamicVariable:g,define:function(Ge,rt){return new g(Ge,x(rt+""))},isDynamic:function(Ge){return"function"==typeof Ge&&!Ge._reglType||Ge instanceof g},unbox:function Ge(rt,Le){return"function"==typeof rt?new g(0,rt):"number"==typeof rt||"boolean"==typeof rt?new g(5,rt):Array.isArray(rt)?new g(6,rt.map(function(ze,je){return Ge(ze,Le+"["+je+"]")})):rt instanceof g?rt:void 0},accessor:x},q={next:"function"==typeof requestAnimationFrame?function(Ge){return requestAnimationFrame(Ge)}:function(Ge){return setTimeout(Ge,16)},cancel:"function"==typeof cancelAnimationFrame?function(Ge){return cancelAnimationFrame(Ge)}:clearTimeout},te="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},ne=a();ne.zero=a();var ue=function(Ge){return Ge instanceof Uint8Array||Ge instanceof Uint16Array||Ge instanceof Uint32Array||Ge instanceof Int8Array||Ge instanceof Int16Array||Ge instanceof Int32Array||Ge instanceof Float32Array||Ge instanceof Float64Array||Ge instanceof Uint8ClampedArray},de=function(Ge){return Object.keys(Ge).map(function(rt){return Ge[rt]})},he={shape:function(Ge){for(var rt=[];Ge.length;Ge=Ge[0])rt.push(Ge.length);return rt},flatten:function(Ge,rt,Le,ze){var je=1;if(rt.length)for(var Ne=0;Ne<rt.length;++Ne)je*=rt[Ne];else je=0;switch(Le=ze||ne.allocType(Le,je),rt.length){case 0:break;case 1:for(ze=rt[0],rt=0;rt<ze;++rt)Le[rt]=Ge[rt];break;case 2:for(ze=rt[0],rt=rt[1],Ne=je=0;Ne<ze;++Ne)for(var st=Ge[Ne],mt=0;mt<rt;++mt)Le[je++]=st[mt];break;case 3:d(Ge,rt[0],rt[1],rt[2],Le,0);break;default:!function Tt(xt,zt,gt,Bt,jt){for(var it=1,Mt=gt+1;Mt<zt.length;++Mt)it*=zt[Mt];var qt=zt[gt];if(zt.length-gt==4){var Wt=zt[gt+1],an=zt[gt+2];for(zt=zt[gt+3],Mt=0;Mt<qt;++Mt)d(xt[Mt],Wt,an,zt,Bt,jt),jt+=it}else for(Mt=0;Mt<qt;++Mt)Tt(xt[Mt],zt,gt+1,Bt,jt),jt+=it}(Ge,rt,0,Le,0)}return Le}},be={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},we={dynamic:35048,stream:35040,static:35044},ke=he.flatten,De=he.shape,Ee=[];Ee[5120]=1,Ee[5122]=2,Ee[5124]=4,Ee[5121]=1,Ee[5123]=2,Ee[5125]=4,Ee[5126]=4;var Re={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ve=new Float32Array(1),Te=new Uint32Array(ve.buffer),Ie=[9984,9986,9985,9987],Ce=[0,6409,6410,6407,6408],Pe={};Pe[6409]=Pe[6406]=Pe[6402]=1,Pe[34041]=Pe[6410]=2,Pe[6407]=Pe[35904]=3,Pe[6408]=Pe[35906]=4;var Ve=l("HTMLCanvasElement"),qe=l("OffscreenCanvas"),Je=l("CanvasRenderingContext2D"),lt=l("ImageBitmap"),He=l("HTMLImageElement"),$e=l("HTMLVideoElement"),et=Object.keys(be).concat([Ve,qe,Je,lt,He,$e]),tt=[];tt[5121]=1,tt[5126]=4,tt[36193]=2,tt[5123]=2,tt[5125]=4;var ft=[];ft[32854]=2,ft[32855]=2,ft[36194]=2,ft[34041]=4,ft[33776]=.5,ft[33777]=.5,ft[33778]=1,ft[33779]=1,ft[35986]=.5,ft[35987]=1,ft[34798]=1,ft[35840]=.5,ft[35841]=.25,ft[35842]=.5,ft[35843]=.25,ft[36196]=.5;var bt=[];bt[32854]=2,bt[32855]=2,bt[36194]=2,bt[33189]=2,bt[36168]=1,bt[34041]=4,bt[35907]=4,bt[34836]=16,bt[34842]=8,bt[34843]=6;var Vt=[];Vt[6408]=4,Vt[6407]=3;var Ft=[];Ft[5121]=1,Ft[5126]=4,Ft[36193]=2;var ht=["x","y","z","w"],ut="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Rt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},nn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},cn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ze={cw:2304,ccw:2305},Qe=new ee(!1,!1,!1,function(){});return function(Ge){function rt(){if(0===Qn.length)Ue&&Ue.update(),mr=null;else{mr=q.next(rt),zt();for(var vr=Qn.length-1;0<=vr;--vr){var Xn=Qn[vr];Xn&&Xn(Jt,null,0)}jt.flush(),Ue&&Ue.update()}}function Le(){!mr&&0<Qn.length&&(mr=q.next(rt))}function ze(){mr&&(q.cancel(rt),mr=null)}function je(vr){vr.preventDefault(),ze(),sr.forEach(function(Xn){Xn()})}function Ne(vr){jt.getError(),Mt.restore(),Dn.restore(),Qt.restore(),_n.restore(),Tn.restore(),wn.restore(),hn.restore(),Ue&&Ue.restore(),kn.procs.refresh(),Le(),Mr.forEach(function(Xn){Xn()})}function st(vr){function Xn(Ut,Kt){var Mn={},Bn={};return Object.keys(Ut).forEach(function(cr){var ur=Ut[cr];if(re.isDynamic(ur))Bn[cr]=re.unbox(ur,cr);else{if(Kt&&Array.isArray(ur))for(var Rn=0;Rn<ur.length;++Rn)if(re.isDynamic(ur[Rn]))return void(Bn[cr]=re.unbox(ur,cr));Mn[cr]=ur}}),{dynamic:Bn,static:Mn}}var jn=Xn(vr.context||{},!0),nr=Xn(vr.uniforms||{},!0),Ur=Xn(vr.attributes||{},!1);vr=Xn(function(Ut){function Kt(Bn){if(Bn in Mn){var cr=Mn[Bn];delete Mn[Bn],Object.keys(cr).forEach(function(ur){Mn[Bn+"."+ur]=cr[ur]})}}var Mn=H({},Ut);return delete Mn.uniforms,delete Mn.attributes,delete Mn.context,delete Mn.vao,"stencil"in Mn&&Mn.stencil.op&&(Mn.stencil.opBack=Mn.stencil.opFront=Mn.stencil.op,delete Mn.stencil.op),Kt("blend"),Kt("depth"),Kt("cull"),Kt("stencil"),Kt("polygonOffset"),Kt("scissor"),Kt("sample"),"vao"in Ut&&(Mn.vao=Ut.vao),Mn}(vr),!1);var Jn={gpuTime:0,cpuTime:0,count:0},_r=kn.compile(vr,Ur,nr,jn,Jn),Hr=_r.draw,Lr=_r.batch,$r=_r.scope,dn=[];return H(function(Ut,Kt){var Mn;if("function"==typeof Ut)return $r.call(this,null,Ut,0);if("function"==typeof Kt)if("number"==typeof Ut)for(Mn=0;Mn<Ut;++Mn)$r.call(this,null,Kt,Mn);else{if(!Array.isArray(Ut))return $r.call(this,Ut,Kt,0);for(Mn=0;Mn<Ut.length;++Mn)$r.call(this,Ut[Mn],Kt,Mn)}else if("number"==typeof Ut){if(0<Ut)return Lr.call(this,function(Bn){for(;dn.length<Bn;)dn.push(null);return dn}(0|Ut),0|Ut)}else{if(!Array.isArray(Ut))return Hr.call(this,Ut);if(Ut.length)return Lr.call(this,Ut,Ut.length)}},{stats:Jn,destroy:function(){_r.destroy()}})}function mt(vr,Xn){var jn=0;kn.procs.poll();var nr=Xn.color;nr&&(jt.clearColor(+nr[0]||0,+nr[1]||0,+nr[2]||0,+nr[3]||0),jn|=16384),"depth"in Xn&&(jt.clearDepth(+Xn.depth),jn|=256),"stencil"in Xn&&(jt.clearStencil(0|Xn.stencil),jn|=1024),jt.clear(jn)}function Tt(vr){return Qn.push(vr),Le(),{cancel:function(){var Xn=j(Qn,vr);Qn[Xn]=function jn(){var nr=j(Qn,jn);Qn[nr]=Qn[Qn.length-1],--Qn.length,0>=Qn.length&&ze()}}}}function xt(){var vr=Fn.viewport,Xn=Fn.scissor_box;vr[0]=vr[1]=Xn[0]=Xn[1]=0,Jt.viewportWidth=Jt.framebufferWidth=Jt.drawingBufferWidth=vr[2]=Xn[2]=jt.drawingBufferWidth,Jt.viewportHeight=Jt.framebufferHeight=Jt.drawingBufferHeight=vr[3]=Xn[3]=jt.drawingBufferHeight}function zt(){Jt.tick+=1,Jt.time=Bt(),xt(),kn.procs.poll()}function gt(){_n.refresh(),xt(),kn.procs.refresh(),Ue&&Ue.update()}function Bt(){return(te()-yt)/1e3}if(!(Ge=function(Ge){var rt,Le,ze,je,Ne=Ge||{};Ge={};var st=[],mt=[],Tt="undefined"==typeof window?1:window.devicePixelRatio,xt=!1,zt=function(Bt){},gt=function(){};if("string"==typeof Ne?rt=document.querySelector(Ne):"object"==typeof Ne&&("string"==typeof Ne.nodeName&&"function"==typeof Ne.appendChild&&"function"==typeof Ne.getBoundingClientRect?rt=Ne:"function"==typeof Ne.drawArrays||"function"==typeof Ne.drawElements?ze=(je=Ne).canvas:("gl"in Ne?je=Ne.gl:"canvas"in Ne?ze=b(Ne.canvas):"container"in Ne&&(Le=b(Ne.container)),"attributes"in Ne&&(Ge=Ne.attributes),"extensions"in Ne&&(st=T(Ne.extensions)),"optionalExtensions"in Ne&&(mt=T(Ne.optionalExtensions)),"onDone"in Ne&&(zt=Ne.onDone),"profile"in Ne&&(xt=!!Ne.profile),"pixelRatio"in Ne&&(Tt=+Ne.pixelRatio))),rt&&("canvas"===rt.nodeName.toLowerCase()?ze=rt:Le=rt),!je){if(!ze){if(!(rt=function(Bt,jt,it){function Mt(){var an=window.innerWidth,Ue=window.innerHeight;Bt!==document.body&&(an=(Ue=Wt.getBoundingClientRect()).right-Ue.left,Ue=Ue.bottom-Ue.top),Wt.width=it*an,Wt.height=it*Ue}var qt,Wt=document.createElement("canvas");return H(Wt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Bt.appendChild(Wt),Bt===document.body&&(Wt.style.position="absolute",H(Bt.style,{margin:0,padding:0})),Bt!==document.body&&"function"==typeof ResizeObserver?(qt=new ResizeObserver(function(){setTimeout(Mt)})).observe(Bt):window.addEventListener("resize",Mt,!1),Mt(),{canvas:Wt,onDestroy:function(){qt?qt.disconnect():window.removeEventListener("resize",Mt),Bt.removeChild(Wt)}}}(Le||document.body,0,Tt)))return null;ze=rt.canvas,gt=rt.onDestroy}void 0===Ge.premultipliedAlpha&&(Ge.premultipliedAlpha=!0),je=function(Bt,jt){function it(Mt){try{return Bt.getContext(Mt,jt)}catch(qt){return null}}return it("webgl")||it("experimental-webgl")||it("webgl-experimental")}(ze,Ge)}return je?{gl:je,canvas:ze,container:Le,extensions:st,optionalExtensions:mt,pixelRatio:Tt,profile:xt,onDone:zt,onDestroy:gt}:(gt(),zt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Ge)))return null;var jt=Ge.gl,it=jt.getContextAttributes();jt.isContextLost();var Mt=function(vr,Xn){function jn(_r){var Hr;_r=_r.toLowerCase();try{Hr=nr[_r]=vr.getExtension(_r)}catch(Lr){}return!!Hr}for(var nr={},Ur=0;Ur<Xn.extensions.length;++Ur){var Jn=Xn.extensions[Ur];if(!jn(Jn))return Xn.onDestroy(),Xn.onDone('"'+Jn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Xn.optionalExtensions.forEach(jn),{extensions:nr,restore:function(){Object.keys(nr).forEach(function(_r){if(nr[_r]&&!jn(_r))throw Error("(regl): error restoring extension "+_r)})}}}(jt,Ge);if(!Mt)return null;var vr,Xn,qt=(vr={"":0},Xn=[""],{id:function(jn){var nr=vr[jn];return nr||(nr=vr[jn]=Xn.length,Xn.push(jn),nr)},str:function(jn){return Xn[jn]}}),Wt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},an=Mt.extensions,Ue=function(vr,Xn){function jn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function nr(dn,Ut,Kt){var Mn=_r.pop()||new jn;Mn.startQueryIndex=dn,Mn.endQueryIndex=Ut,Mn.sum=0,Mn.stats=Kt,Hr.push(Mn)}if(!Xn.ext_disjoint_timer_query)return null;var Ur=[],Jn=[],_r=[],Hr=[],Lr=[],$r=[];return{beginQuery:function(dn){var Ut=Ur.pop()||Xn.ext_disjoint_timer_query.createQueryEXT();Xn.ext_disjoint_timer_query.beginQueryEXT(35007,Ut),Jn.push(Ut),nr(Jn.length-1,Jn.length,dn)},endQuery:function(){Xn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:nr,update:function(){var dn,Ut;if(0!==(dn=Jn.length)){$r.length=Math.max($r.length,dn+1),Lr.length=Math.max(Lr.length,dn+1),Lr[0]=0;var Kt=$r[0]=0;for(Ut=dn=0;Ut<Jn.length;++Ut){var Mn=Jn[Ut];Xn.ext_disjoint_timer_query.getQueryObjectEXT(Mn,34919)?(Kt+=Xn.ext_disjoint_timer_query.getQueryObjectEXT(Mn,34918),Ur.push(Mn)):Jn[dn++]=Mn,Lr[Ut+1]=Kt,$r[Ut+1]=dn}for(Jn.length=dn,Ut=dn=0;Ut<Hr.length;++Ut){var Bn=(Kt=Hr[Ut]).startQueryIndex;Kt.sum+=Lr[Mn=Kt.endQueryIndex]-Lr[Bn],(Mn=$r[Mn])===(Bn=$r[Bn])?(Kt.stats.gpuTime+=Kt.sum/1e6,_r.push(Kt)):(Kt.startQueryIndex=Bn,Kt.endQueryIndex=Mn,Hr[dn++]=Kt)}Hr.length=dn}},getNumPendingQueries:function(){return Jn.length},clear:function(){Ur.push.apply(Ur,Jn);for(var dn=0;dn<Ur.length;dn++)Xn.ext_disjoint_timer_query.deleteQueryEXT(Ur[dn]);Jn.length=0,Ur.length=0},restore:function(){Jn.length=0,Ur.length=0}}}(0,an),yt=te(),Dt=jt.drawingBufferWidth,Ht=jt.drawingBufferHeight,Jt={tick:0,time:0,viewportWidth:Dt,viewportHeight:Ht,framebufferWidth:Dt,framebufferHeight:Ht,drawingBufferWidth:Dt,drawingBufferHeight:Ht,pixelRatio:Ge.pixelRatio},gn=(Dt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(Ge,rt){var Le=1;rt.ext_texture_filter_anisotropic&&(Le=Ge.getParameter(34047));var ze=1,je=1;rt.webgl_draw_buffers&&(ze=Ge.getParameter(34852),je=Ge.getParameter(36063));var Ne=!!rt.oes_texture_float;if(Ne){Ne=Ge.createTexture(),Ge.bindTexture(3553,Ne),Ge.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var st=Ge.createFramebuffer();if(Ge.bindFramebuffer(36160,st),Ge.framebufferTexture2D(36160,36064,3553,Ne,0),Ge.bindTexture(3553,null),36053!==Ge.checkFramebufferStatus(36160))Ne=!1;else{Ge.viewport(0,0,1,1),Ge.clearColor(1,0,0,1),Ge.clear(16384);var mt=ne.allocType(5126,4);Ge.readPixels(0,0,1,1,6408,5126,mt),Ge.getError()?Ne=!1:(Ge.deleteFramebuffer(st),Ge.deleteTexture(Ne),Ne=1===mt[0]),ne.freeType(mt)}}return mt=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(mt=Ge.createTexture(),st=ne.allocType(5121,36),Ge.activeTexture(33984),Ge.bindTexture(34067,mt),Ge.texImage2D(34069,0,6408,3,3,0,6408,5121,st),ne.freeType(st),Ge.bindTexture(34067,null),Ge.deleteTexture(mt),mt=!Ge.getError()),{colorBits:[Ge.getParameter(3410),Ge.getParameter(3411),Ge.getParameter(3412),Ge.getParameter(3413)],depthBits:Ge.getParameter(3414),stencilBits:Ge.getParameter(3415),subpixelBits:Ge.getParameter(3408),extensions:Object.keys(rt).filter(function(Tt){return!!rt[Tt]}),maxAnisotropic:Le,maxDrawbuffers:ze,maxColorAttachments:je,pointSizeDims:Ge.getParameter(33901),lineWidthDims:Ge.getParameter(33902),maxViewportDims:Ge.getParameter(3386),maxCombinedTextureUnits:Ge.getParameter(35661),maxCubeMapSize:Ge.getParameter(34076),maxRenderbufferSize:Ge.getParameter(34024),maxTextureUnits:Ge.getParameter(34930),maxTextureSize:Ge.getParameter(3379),maxAttributes:Ge.getParameter(34921),maxVertexUniforms:Ge.getParameter(36347),maxVertexTextureUnits:Ge.getParameter(35660),maxVaryingVectors:Ge.getParameter(36348),maxFragmentUniforms:Ge.getParameter(36349),glsl:Ge.getParameter(35724),renderer:Ge.getParameter(7937),vendor:Ge.getParameter(7936),version:Ge.getParameter(7938),readFloat:Ne,npotTextureCube:mt}}(jt,an)),Qt=function(Ge,rt,Le,ze){function je(gt){this.id=Tt++,this.buffer=Ge.createBuffer(),this.type=gt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Le.profile&&(this.stats={size:0})}function Ne(gt,Bt,jt){gt.byteLength=Bt.byteLength,Ge.bufferData(gt.type,Bt,jt)}function st(gt,Bt,jt,it,Mt,qt){if(gt.usage=jt,Array.isArray(Bt)){if(gt.dtype=it||5126,0<Bt.length)if(Array.isArray(Bt[0])){Mt=De(Bt);for(var Wt=it=1;Wt<Mt.length;++Wt)it*=Mt[Wt];gt.dimension=it,Ne(gt,Bt=ke(Bt,Mt,gt.dtype),jt),qt?gt.persistentData=Bt:ne.freeType(Bt)}else"number"==typeof Bt[0]?(gt.dimension=Mt,i(Mt=ne.allocType(gt.dtype,Bt.length),Bt),Ne(gt,Mt,jt),qt?gt.persistentData=Mt:ne.freeType(Mt)):ue(Bt[0])&&(gt.dimension=Bt[0].length,gt.dtype=it||s(Bt[0])||5126,Ne(gt,Bt=ke(Bt,[Bt.length,Bt[0].length],gt.dtype),jt),qt?gt.persistentData=Bt:ne.freeType(Bt))}else if(ue(Bt))gt.dtype=it||s(Bt),gt.dimension=Mt,Ne(gt,Bt,jt),qt&&(gt.persistentData=new Uint8Array(new Uint8Array(Bt.buffer)));else if(n(Bt)){var an=Bt.stride,Ue=(Wt=Bt.offset,0),yt=0,Dt=0,Ht=0;1===(Mt=Bt.shape).length?(Ue=Mt[0],yt=1,Dt=an[0],Ht=0):2===Mt.length&&(Ue=Mt[0],yt=Mt[1],Dt=an[0],Ht=an[1]),gt.dtype=it||s(Bt.data)||5126,gt.dimension=yt,u(Mt=ne.allocType(gt.dtype,Ue*yt),Bt.data,Ue,yt,Dt,Ht,Wt),Ne(gt,Mt,jt),qt?gt.persistentData=Mt:ne.freeType(Mt)}else Bt instanceof ArrayBuffer&&(gt.dtype=5121,gt.dimension=Mt,Ne(gt,Bt,jt),qt&&(gt.persistentData=new Uint8Array(new Uint8Array(Bt))))}function mt(gt){rt.bufferCount--,ze(gt),Ge.deleteBuffer(gt.buffer),gt.buffer=null,delete xt[gt.id]}var Tt=0,xt={};je.prototype.bind=function(){Ge.bindBuffer(this.type,this.buffer)},je.prototype.destroy=function(){mt(this)};var zt=[];return Le.profile&&(rt.getTotalBufferSize=function(){var gt=0;return Object.keys(xt).forEach(function(Bt){gt+=xt[Bt].stats.size}),gt}),{create:function(gt,Bt,jt,it){function Mt(Wt){var an=35044,Ue=null,yt=0,Dt=0,Ht=1;return Array.isArray(Wt)||ue(Wt)||n(Wt)||Wt instanceof ArrayBuffer?Ue=Wt:"number"==typeof Wt?yt=0|Wt:Wt&&("data"in Wt&&(Ue=Wt.data),"usage"in Wt&&(an=we[Wt.usage]),"type"in Wt&&(Dt=ge[Wt.type]),"dimension"in Wt&&(Ht=0|Wt.dimension),"length"in Wt&&(yt=0|Wt.length)),qt.bind(),Ue?st(qt,Ue,an,Dt,Ht,it):(yt&&Ge.bufferData(qt.type,yt,an),qt.dtype=Dt||5121,qt.usage=an,qt.dimension=Ht,qt.byteLength=yt),Le.profile&&(qt.stats.size=qt.byteLength*Ee[qt.dtype]),Mt}rt.bufferCount++;var qt=new je(Bt);return xt[qt.id]=qt,jt||Mt(gt),Mt._reglType="buffer",Mt._buffer=qt,Mt.subdata=function(Wt,an){var Ue,yt=0|(an||0);if(qt.bind(),ue(Wt)||Wt instanceof ArrayBuffer)Ge.bufferSubData(qt.type,yt,Wt);else if(Array.isArray(Wt)){if(0<Wt.length)if("number"==typeof Wt[0]){var Dt=ne.allocType(qt.dtype,Wt.length);i(Dt,Wt),Ge.bufferSubData(qt.type,yt,Dt),ne.freeType(Dt)}else(Array.isArray(Wt[0])||ue(Wt[0]))&&(Ue=De(Wt),Dt=ke(Wt,Ue,qt.dtype),Ge.bufferSubData(qt.type,yt,Dt),ne.freeType(Dt))}else if(n(Wt)){var Ht=Wt.stride,Jt=Dt=0,gn=0,Qt=0;1===(Ue=Wt.shape).length?(Dt=Ue[0],Jt=1,gn=Ht[0],Qt=0):2===Ue.length&&(Dt=Ue[0],Jt=Ue[1],gn=Ht[0],Qt=Ht[1]),Ue=Array.isArray(Wt.data)?qt.dtype:s(Wt.data),u(Ue=ne.allocType(Ue,Dt*Jt),Wt.data,Dt,Jt,gn,Qt,Wt.offset),Ge.bufferSubData(qt.type,yt,Ue),ne.freeType(Ue)}return Mt},Le.profile&&(Mt.stats=qt.stats),Mt.destroy=function(){mt(qt)},Mt},createStream:function(gt,Bt){var jt=zt.pop();return jt||(jt=new je(gt)),jt.bind(),st(jt,Bt,35040,0,1,!1),jt},destroyStream:function(gt){zt.push(gt)},clear:function(){de(xt).forEach(mt),zt.forEach(mt)},getBuffer:function(gt){return gt&&gt._buffer instanceof je?gt._buffer:null},restore:function(){de(xt).forEach(function(gt){gt.buffer=Ge.createBuffer(),Ge.bindBuffer(gt.type,gt.buffer),Ge.bufferData(gt.type,gt.persistentData||gt.byteLength,gt.usage)})},_initBuffer:st}}(jt,Wt,Ge,function(vr){return hn.destroyBuffer(vr)}),sn=function(Ge,rt,Le,ze){function je(gt){this.id=Tt++,mt[this.id]=this,this.buffer=gt,this.primType=4,this.type=this.vertCount=0}function Ne(gt,Bt,jt,it,Mt,qt,Wt){var an;if(gt.buffer.bind(),Bt?((an=Wt)||ue(Bt)&&(!n(Bt)||ue(Bt.data))||(an=rt.oes_element_index_uint?5125:5123),Le._initBuffer(gt.buffer,Bt,jt,an,3)):(Ge.bufferData(34963,qt,jt),gt.buffer.dtype=an||5121,gt.buffer.usage=jt,gt.buffer.dimension=3,gt.buffer.byteLength=qt),an=Wt,!Wt){switch(gt.buffer.dtype){case 5121:case 5120:an=5121;break;case 5123:case 5122:an=5123;break;case 5125:case 5124:an=5125}gt.buffer.dtype=an}gt.type=an,0>(Bt=Mt)&&(Bt=gt.buffer.byteLength,5123===an?Bt>>=1:5125===an&&(Bt>>=2)),gt.vertCount=Bt,Bt=it,0>it&&(Bt=4,1===(it=gt.buffer.dimension)&&(Bt=0),2===it&&(Bt=1),3===it&&(Bt=4)),gt.primType=Bt}function st(gt){ze.elementsCount--,delete mt[gt.id],gt.buffer.destroy(),gt.buffer=null}var mt={},Tt=0,xt={uint8:5121,uint16:5123};rt.oes_element_index_uint&&(xt.uint32=5125),je.prototype.bind=function(){this.buffer.bind()};var zt=[];return{create:function(gt,Bt){function jt(qt){if(qt)if("number"==typeof qt)it(qt),Mt.primType=4,Mt.vertCount=0|qt,Mt.type=5121;else{var Wt=null,an=35044,Ue=-1,yt=-1,Dt=0,Ht=0;Array.isArray(qt)||ue(qt)||n(qt)?Wt=qt:("data"in qt&&(Wt=qt.data),"usage"in qt&&(an=we[qt.usage]),"primitive"in qt&&(Ue=Re[qt.primitive]),"count"in qt&&(yt=0|qt.count),"type"in qt&&(Ht=xt[qt.type]),"length"in qt?Dt=0|qt.length:(Dt=yt,5123===Ht||5122===Ht?Dt*=2:5125!==Ht&&5124!==Ht||(Dt*=4))),Ne(Mt,Wt,an,Ue,yt,Dt,Ht)}else it(),Mt.primType=4,Mt.vertCount=0,Mt.type=5121;return jt}var it=Le.create(null,34963,!0),Mt=new je(it._buffer);return ze.elementsCount++,jt(gt),jt._reglType="elements",jt._elements=Mt,jt.subdata=function(qt,Wt){return it.subdata(qt,Wt),jt},jt.destroy=function(){st(Mt)},jt},createStream:function(gt){var Bt=zt.pop();return Bt||(Bt=new je(Le.create(null,34963,!0,!1)._buffer)),Ne(Bt,gt,35040,-1,-1,0,0),Bt},destroyStream:function(gt){zt.push(gt)},getElements:function(gt){return"function"==typeof gt&&gt._elements instanceof je?gt._elements:null},clear:function(){de(mt).forEach(st)}}}(jt,an,Qt,Wt),hn=function(Ge,rt,Le,ze,je,Ne,st){function mt(){this.id=++zt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var jt=rt.oes_vertex_array_object;this.vao=jt?jt.createVertexArrayOES():null,gt[this.id]=this,this.buffers=[]}var Tt=Le.maxAttributes,xt=Array(Tt);for(Le=0;Le<Tt;++Le)xt[Le]=new F;var zt=0,gt={},Bt={Record:F,scope:{},state:xt,currentVAO:null,targetVAO:null,restore:rt.oes_vertex_array_object?function(){rt.oes_vertex_array_object&&de(gt).forEach(function(jt){jt.refresh()})}:function(){},createVAO:function(jt){function it(qt){var Wt;Array.isArray(qt)?(Wt=qt,Mt.elements&&Mt.ownsElements&&Mt.elements.destroy(),Mt.elements=null,Mt.ownsElements=!1,Mt.offset=0,Mt.count=0,Mt.instances=-1,Mt.primitive=4):(qt.elements?(Wt=qt.elements,Mt.ownsElements?("function"==typeof Wt&&"elements"===Wt._reglType?Mt.elements.destroy():Mt.elements(Wt),Mt.ownsElements=!1):Ne.getElements(qt.elements)?(Mt.elements=qt.elements,Mt.ownsElements=!1):(Mt.elements=Ne.create(qt.elements),Mt.ownsElements=!0)):(Mt.elements=null,Mt.ownsElements=!1),Wt=qt.attributes,Mt.offset=0,Mt.count=-1,Mt.instances=-1,Mt.primitive=4,Mt.elements&&(Mt.count=Mt.elements._elements.vertCount,Mt.primitive=Mt.elements._elements.primType),"offset"in qt&&(Mt.offset=0|qt.offset),"count"in qt&&(Mt.count=0|qt.count),"instances"in qt&&(Mt.instances=0|qt.instances),"primitive"in qt&&(Mt.primitive=Re[qt.primitive])),qt={};var an=Mt.attributes;an.length=Wt.length;for(var Ue=0;Ue<Wt.length;++Ue){var yt,Dt=Wt[Ue],Ht=an[Ue]=new F,Jt=Dt.data||Dt;Array.isArray(Jt)||ue(Jt)||n(Jt)?(Mt.buffers[Ue]&&(yt=Mt.buffers[Ue],ue(Jt)&&yt._buffer.byteLength>=Jt.byteLength?yt.subdata(Jt):(yt.destroy(),Mt.buffers[Ue]=null)),Mt.buffers[Ue]||(yt=Mt.buffers[Ue]=je.create(Dt,34962,!1,!0)),Ht.buffer=je.getBuffer(yt),Ht.size=0|Ht.buffer.dimension,Ht.normalized=!1,Ht.type=Ht.buffer.dtype,Ht.offset=0,Ht.stride=0,Ht.divisor=0,Ht.state=1,qt[Ue]=1):je.getBuffer(Dt)?(Ht.buffer=je.getBuffer(Dt),Ht.size=0|Ht.buffer.dimension,Ht.normalized=!1,Ht.type=Ht.buffer.dtype,Ht.offset=0,Ht.stride=0,Ht.divisor=0,Ht.state=1):je.getBuffer(Dt.buffer)?(Ht.buffer=je.getBuffer(Dt.buffer),Ht.size=0|(+Dt.size||Ht.buffer.dimension),Ht.normalized=!!Dt.normalized||!1,Ht.type="type"in Dt?ge[Dt.type]:Ht.buffer.dtype,Ht.offset=0|(Dt.offset||0),Ht.stride=0|(Dt.stride||0),Ht.divisor=0|(Dt.divisor||0),Ht.state=1):"x"in Dt&&(Ht.x=+Dt.x||0,Ht.y=+Dt.y||0,Ht.z=+Dt.z||0,Ht.w=+Dt.w||0,Ht.state=2)}for(yt=0;yt<Mt.buffers.length;++yt)!qt[yt]&&Mt.buffers[yt]&&(Mt.buffers[yt].destroy(),Mt.buffers[yt]=null);return Mt.refresh(),it}var Mt=new mt;return ze.vaoCount+=1,it.destroy=function(){for(var qt=0;qt<Mt.buffers.length;++qt)Mt.buffers[qt]&&Mt.buffers[qt].destroy();Mt.buffers.length=0,Mt.ownsElements&&(Mt.elements.destroy(),Mt.elements=null,Mt.ownsElements=!1),Mt.destroy()},it._vao=Mt,it._reglType="vao",it(jt)},getVAO:function(jt){return"function"==typeof jt&&jt._vao?jt._vao:null},destroyBuffer:function(jt){for(var it=0;it<xt.length;++it){var Mt=xt[it];Mt.buffer===jt&&(Ge.disableVertexAttribArray(it),Mt.buffer=null)}},setVAO:rt.oes_vertex_array_object?function(jt){jt!==Bt.currentVAO&&(rt.oes_vertex_array_object.bindVertexArrayOES(jt?jt.vao:null),Bt.currentVAO=jt)}:function(jt){if(jt!==Bt.currentVAO){if(jt)jt.bindAttrs();else{for(var it=rt.angle_instanced_arrays,Mt=0;Mt<xt.length;++Mt){var qt=xt[Mt];qt.buffer?(Ge.enableVertexAttribArray(Mt),qt.buffer.bind(),Ge.vertexAttribPointer(Mt,qt.size,qt.type,qt.normalized,qt.stride,qt.offfset),it&&qt.divisor&&it.vertexAttribDivisorANGLE(Mt,qt.divisor)):(Ge.disableVertexAttribArray(Mt),Ge.vertexAttrib4f(Mt,qt.x,qt.y,qt.z,qt.w))}Ge.bindBuffer(34963,st.elements?st.elements.buffer.buffer:null)}Bt.currentVAO=jt}},clear:rt.oes_vertex_array_object?function(){de(gt).forEach(function(jt){jt.destroy()})}:function(){}};return mt.prototype.bindAttrs=function(){for(var jt=rt.angle_instanced_arrays,it=this.attributes,Mt=0;Mt<it.length;++Mt){var qt=it[Mt];qt.buffer?(Ge.enableVertexAttribArray(Mt),Ge.bindBuffer(34962,qt.buffer.buffer),Ge.vertexAttribPointer(Mt,qt.size,qt.type,qt.normalized,qt.stride,qt.offset),jt&&qt.divisor&&jt.vertexAttribDivisorANGLE(Mt,qt.divisor)):(Ge.disableVertexAttribArray(Mt),Ge.vertexAttrib4f(Mt,qt.x,qt.y,qt.z,qt.w))}for(jt=it.length;jt<Tt;++jt)Ge.disableVertexAttribArray(jt);(jt=Ne.getElements(this.elements))?Ge.bindBuffer(34963,jt.buffer.buffer):Ge.bindBuffer(34963,null)},mt.prototype.refresh=function(){var jt=rt.oes_vertex_array_object;jt&&(jt.bindVertexArrayOES(this.vao),this.bindAttrs(),Bt.currentVAO=null,jt.bindVertexArrayOES(null))},mt.prototype.destroy=function(){if(this.vao){var jt=rt.oes_vertex_array_object;this===Bt.currentVAO&&(Bt.currentVAO=null,jt.bindVertexArrayOES(null)),jt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),gt[this.id]&&(delete gt[this.id],--ze.vaoCount)},Bt}(jt,an,gn,Wt,Qt,sn,Dt),Dn=function(Ge,rt,Le,ze){function je(it,Mt,qt,Wt){this.name=it,this.id=Mt,this.location=qt,this.info=Wt}function Ne(it,Mt){for(var qt=0;qt<it.length;++qt)if(it[qt].id===Mt.id)return void(it[qt].location=Mt.location);it.push(Mt)}function st(it,Mt,qt){if(!(an=(qt=35632===it?xt:zt)[Mt])){var Wt=rt.str(Mt),an=Ge.createShader(it);Ge.shaderSource(an,Wt),Ge.compileShader(an),qt[Mt]=an}return an}function mt(it,Mt){this.id=jt++,this.fragId=it,this.vertId=Mt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ze.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Tt(it,Mt,qt){var Wt;Wt=st(35632,it.fragId);var an=st(35633,it.vertId);if(Mt=it.program=Ge.createProgram(),Ge.attachShader(Mt,Wt),Ge.attachShader(Mt,an),qt)for(Wt=0;Wt<qt.length;++Wt)Ge.bindAttribLocation(Mt,(an=qt[Wt])[0],an[1]);Ge.linkProgram(Mt),an=Ge.getProgramParameter(Mt,35718),ze.profile&&(it.stats.uniformsCount=an);var Ue=it.uniforms;for(Wt=0;Wt<an;++Wt)if(qt=Ge.getActiveUniform(Mt,Wt)){if(1<qt.size)for(var yt=0;yt<qt.size;++yt){var Dt=qt.name.replace("[0]","["+yt+"]");Ne(Ue,new je(Dt,rt.id(Dt),Ge.getUniformLocation(Mt,Dt),qt))}yt=qt.name,1<qt.size&&(yt=yt.replace("[0]","")),Ne(Ue,new je(yt,rt.id(yt),Ge.getUniformLocation(Mt,yt),qt))}for(an=Ge.getProgramParameter(Mt,35721),ze.profile&&(it.stats.attributesCount=an),it=it.attributes,Wt=0;Wt<an;++Wt)(qt=Ge.getActiveAttrib(Mt,Wt))&&Ne(it,new je(qt.name,rt.id(qt.name),Ge.getAttribLocation(Mt,qt.name),qt))}var xt={},zt={},gt={},Bt=[],jt=0;return ze.profile&&(Le.getMaxUniformsCount=function(){var it=0;return Bt.forEach(function(Mt){Mt.stats.uniformsCount>it&&(it=Mt.stats.uniformsCount)}),it},Le.getMaxAttributesCount=function(){var it=0;return Bt.forEach(function(Mt){Mt.stats.attributesCount>it&&(it=Mt.stats.attributesCount)}),it}),{clear:function(){var it=Ge.deleteShader.bind(Ge);de(xt).forEach(it),xt={},de(zt).forEach(it),zt={},Bt.forEach(function(Mt){Ge.deleteProgram(Mt.program)}),Bt.length=0,gt={},Le.shaderCount=0},program:function(it,Mt,qt,Wt){var an=gt[Mt];an||(an=gt[Mt]={});var Ue=an[it];if(Ue&&(Ue.refCount++,!Wt))return Ue;var yt=new mt(Mt,it);return Le.shaderCount++,Tt(yt,qt,Wt),Ue||(an[it]=yt),Bt.push(yt),H(yt,{destroy:function(){if(yt.refCount--,0>=yt.refCount){Ge.deleteProgram(yt.program);var Dt=Bt.indexOf(yt);Bt.splice(Dt,1),Le.shaderCount--}0>=an[yt.vertId].refCount&&(Ge.deleteShader(zt[yt.vertId]),delete zt[yt.vertId],delete gt[yt.fragId][yt.vertId]),Object.keys(gt[yt.fragId]).length||(Ge.deleteShader(xt[yt.fragId]),delete xt[yt.fragId],delete gt[yt.fragId])}})},restore:function(){xt={},zt={};for(var it=0;it<Bt.length;++it)Tt(Bt[it],null,Bt[it].attributes.map(function(Mt){return[Mt.location,Mt.name]}))},shader:st,frag:-1,vert:-1}}(jt,qt,Wt,Ge),_n=function(Ge,rt,Le,ze,je,Ne,st){function mt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Tt(dn,Ut){dn.internalformat=Ut.internalformat,dn.format=Ut.format,dn.type=Ut.type,dn.compressed=Ut.compressed,dn.premultiplyAlpha=Ut.premultiplyAlpha,dn.flipY=Ut.flipY,dn.unpackAlignment=Ut.unpackAlignment,dn.colorSpace=Ut.colorSpace,dn.width=Ut.width,dn.height=Ut.height,dn.channels=Ut.channels}function xt(dn,Ut){if("object"==typeof Ut&&Ut){"premultiplyAlpha"in Ut&&(dn.premultiplyAlpha=Ut.premultiplyAlpha),"flipY"in Ut&&(dn.flipY=Ut.flipY),"alignment"in Ut&&(dn.unpackAlignment=Ut.alignment),"colorSpace"in Ut&&(dn.colorSpace=Fn[Ut.colorSpace]),"type"in Ut&&(dn.type=On[Ut.type]);var Kt=dn.width,Mn=dn.height,Bn=dn.channels,cr=!1;"shape"in Ut?(Kt=Ut.shape[0],Mn=Ut.shape[1],3===Ut.shape.length&&(Bn=Ut.shape[2],cr=!0)):("radius"in Ut&&(Kt=Mn=Ut.radius),"width"in Ut&&(Kt=Ut.width),"height"in Ut&&(Mn=Ut.height),"channels"in Ut&&(Bn=Ut.channels,cr=!0)),dn.width=0|Kt,dn.height=0|Mn,dn.channels=0|Bn,Kt=!1,"format"in Ut&&(Mn=dn.internalformat=Qn[Kt=Ut.format],dn.format=nr[Mn],Kt in On&&!("type"in Ut)&&(dn.type=On[Kt]),Kt in sr&&(dn.compressed=!0),Kt=!0),!cr&&Kt?dn.channels=Pe[dn.format]:cr&&!Kt&&dn.channels!==Ce[dn.format]&&(dn.format=dn.internalformat=Ce[dn.channels])}}function zt(dn){Ge.pixelStorei(37440,dn.flipY),Ge.pixelStorei(37441,dn.premultiplyAlpha),Ge.pixelStorei(37443,dn.colorSpace),Ge.pixelStorei(3317,dn.unpackAlignment)}function gt(){mt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Bt(dn,Ut){var Kt=null;if(M(Ut)?Kt=Ut:Ut&&(xt(dn,Ut),"x"in Ut&&(dn.xOffset=0|Ut.x),"y"in Ut&&(dn.yOffset=0|Ut.y),M(Ut.data)&&(Kt=Ut.data)),Ut.copy){var Mn=je.viewportWidth,Bn=je.viewportHeight;dn.width=dn.width||Mn-dn.xOffset,dn.height=dn.height||Bn-dn.yOffset,dn.needsCopy=!0}else if(Kt){if(ue(Kt))dn.channels=dn.channels||4,dn.data=Kt,"type"in Ut||5121!==dn.type||(dn.type=0|be[Object.prototype.toString.call(Kt)]);else if(w(Kt)){switch(dn.channels=dn.channels||4,Bn=(Mn=Kt).length,dn.type){case 5121:case 5123:case 5125:case 5126:(Bn=ne.allocType(dn.type,Bn)).set(Mn),dn.data=Bn;break;case 36193:dn.data=y(Mn)}dn.alignment=1,dn.needsFree=!0}else if(n(Kt)){Mn=Kt.data,Array.isArray(Mn)||5121!==dn.type||(dn.type=0|be[Object.prototype.toString.call(Mn)]);var cr,ur,Rn,Cn,Un=Kt.stride;3===(Bn=Kt.shape).length?(Rn=Bn[2],Cn=Un[2]):Cn=Rn=1,cr=Bn[0],ur=Bn[1],Bn=Un[0],Un=Un[1],dn.alignment=1,dn.width=cr,dn.height=ur,dn.channels=Rn,dn.format=dn.internalformat=Ce[Rn],dn.needsFree=!0,cr=Cn,Kt=Kt.offset;for(var Yn=ne.allocType(36193===dn.type?5126:dn.type,(Rn=dn.width)*(Cn=dn.height)*(ur=dn.channels)),Hn=0,Zn=0;Zn<Cn;++Zn)for(var Sr=0;Sr<Rn;++Sr)for(var Ar=0;Ar<ur;++Ar)Yn[Hn++]=Mn[Bn*Sr+Un*Zn+cr*Ar+Kt];k(dn,Yn)}else if(A(Kt)===Ve||A(Kt)===qe||A(Kt)===Je)dn.element=A(Kt)===Ve||A(Kt)===qe?Kt:Kt.canvas,dn.width=dn.element.width,dn.height=dn.element.height,dn.channels=4;else if(A(Kt)===lt)dn.element=Kt,dn.width=Kt.width,dn.height=Kt.height,dn.channels=4;else if(A(Kt)===He)dn.element=Kt,dn.width=Kt.naturalWidth,dn.height=Kt.naturalHeight,dn.channels=4;else if(A(Kt)===$e)dn.element=Kt,dn.width=Kt.videoWidth,dn.height=Kt.videoHeight,dn.channels=4;else if(v(Kt)){for(Mn=dn.width||Kt[0].length,Bn=dn.height||Kt.length,Un=dn.channels,Un=m(Kt[0][0])?Un||Kt[0][0].length:Un||1,cr=he.shape(Kt),Rn=1,Cn=0;Cn<cr.length;++Cn)Rn*=cr[Cn];Rn=ne.allocType(36193===dn.type?5126:dn.type,Rn),he.flatten(Kt,cr,"",Rn),k(dn,Rn),dn.alignment=1,dn.width=Mn,dn.height=Bn,dn.channels=Un,dn.format=dn.internalformat=Ce[Un],dn.needsFree=!0}}else dn.width=dn.width||1,dn.height=dn.height||1,dn.channels=dn.channels||4}function jt(dn,Ut,Kt,Mn,Bn){var cr=dn.element,ur=dn.data,Rn=dn.internalformat,Cn=dn.format,Un=dn.type,Yn=dn.width,Hn=dn.height;zt(dn),cr?Ge.texSubImage2D(Ut,Bn,Kt,Mn,Cn,Un,cr):dn.compressed?Ge.compressedTexSubImage2D(Ut,Bn,Kt,Mn,Rn,Yn,Hn,ur):dn.needsCopy?(ze(),Ge.copyTexSubImage2D(Ut,Bn,Kt,Mn,dn.xOffset,dn.yOffset,Yn,Hn)):Ge.texSubImage2D(Ut,Bn,Kt,Mn,Yn,Hn,Cn,Un,ur)}function it(){return Ur.pop()||new gt}function Mt(dn){dn.needsFree&&ne.freeType(dn.data),gt.call(dn),Ur.push(dn)}function qt(){mt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Wt(dn,Ut,Kt){var Mn=dn.images[0]=it();dn.mipmask=1,Mn.width=dn.width=Ut,Mn.height=dn.height=Kt,Mn.channels=dn.channels=4}function an(dn,Ut){var Kt=null;if(M(Ut))Tt(Kt=dn.images[0]=it(),dn),Bt(Kt,Ut),dn.mipmask=1;else if(xt(dn,Ut),Array.isArray(Ut.mipmap))for(var Mn=Ut.mipmap,Bn=0;Bn<Mn.length;++Bn)Tt(Kt=dn.images[Bn]=it(),dn),Kt.width>>=Bn,Kt.height>>=Bn,Bt(Kt,Mn[Bn]),dn.mipmask|=1<<Bn;else Tt(Kt=dn.images[0]=it(),dn),Bt(Kt,Ut),dn.mipmask=1;Tt(dn,dn.images[0])}function Ue(dn,Ut){for(var Kt=dn.images,Mn=0;Mn<Kt.length&&Kt[Mn];++Mn){var Bn=Kt[Mn],cr=Ut,ur=Mn,Rn=Bn.element,Cn=Bn.data,Un=Bn.internalformat,Yn=Bn.format,Hn=Bn.type,Zn=Bn.width,Sr=Bn.height;zt(Bn),Rn?Ge.texImage2D(cr,ur,Yn,Yn,Hn,Rn):Bn.compressed?Ge.compressedTexImage2D(cr,ur,Un,Zn,Sr,0,Cn):Bn.needsCopy?(ze(),Ge.copyTexImage2D(cr,ur,Yn,Bn.xOffset,Bn.yOffset,Zn,Sr,0)):Ge.texImage2D(cr,ur,Yn,Zn,Sr,0,Yn,Hn,Cn||null)}}function yt(){var dn=Jn.pop()||new qt;mt.call(dn);for(var Ut=dn.mipmask=0;16>Ut;++Ut)dn.images[Ut]=null;return dn}function Dt(dn){for(var Ut=dn.images,Kt=0;Kt<Ut.length;++Kt)Ut[Kt]&&Mt(Ut[Kt]),Ut[Kt]=null;Jn.push(dn)}function Ht(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Jt(dn,Ut){"min"in Ut&&(dn.minFilter=kn[Ut.min],0<=Ie.indexOf(dn.minFilter)&&!("faces"in Ut)&&(dn.genMipmaps=!0)),"mag"in Ut&&(dn.magFilter=wn[Ut.mag]);var Kt=dn.wrapS,Mn=dn.wrapT;if("wrap"in Ut){var Bn=Ut.wrap;"string"==typeof Bn?Kt=Mn=Tn[Bn]:Array.isArray(Bn)&&(Kt=Tn[Bn[0]],Mn=Tn[Bn[1]])}else"wrapS"in Ut&&(Kt=Tn[Ut.wrapS]),"wrapT"in Ut&&(Mn=Tn[Ut.wrapT]);if(dn.wrapS=Kt,dn.wrapT=Mn,"anisotropic"in Ut&&(dn.anisotropic=Ut.anisotropic),"mipmap"in Ut){switch(Kt=!1,typeof Ut.mipmap){case"string":dn.mipmapHint=_n[Ut.mipmap],Kt=dn.genMipmaps=!0;break;case"boolean":Kt=dn.genMipmaps=Ut.mipmap;break;case"object":dn.genMipmaps=!1,Kt=!0}!Kt||"min"in Ut||(dn.minFilter=9984)}}function gn(dn,Ut){Ge.texParameteri(Ut,10241,dn.minFilter),Ge.texParameteri(Ut,10240,dn.magFilter),Ge.texParameteri(Ut,10242,dn.wrapS),Ge.texParameteri(Ut,10243,dn.wrapT),rt.ext_texture_filter_anisotropic&&Ge.texParameteri(Ut,34046,dn.anisotropic),dn.genMipmaps&&(Ge.hint(33170,dn.mipmapHint),Ge.generateMipmap(Ut))}function Qt(dn){mt.call(this),this.mipmask=0,this.internalformat=6408,this.id=_r++,this.refCount=1,this.target=dn,this.texture=Ge.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ht,st.profile&&(this.stats={size:0})}function sn(dn){Ge.activeTexture(33984),Ge.bindTexture(dn.target,dn.texture)}function hn(){var dn=$r[0];dn?Ge.bindTexture(dn.target,dn.texture):Ge.bindTexture(3553,null)}function Dn(dn){var Ut=dn.texture,Kt=dn.unit,Mn=dn.target;0<=Kt&&(Ge.activeTexture(33984+Kt),Ge.bindTexture(Mn,null),$r[Kt]=null),Ge.deleteTexture(Ut),dn.texture=null,dn.params=null,dn.pixels=null,dn.refCount=0,delete Hr[dn.id],Ne.textureCount--}var _n={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Tn={repeat:10497,clamp:33071,mirror:33648},wn={nearest:9728,linear:9729},kn=H({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},wn),Fn={none:0,browser:37444},On={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Qn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},sr={};rt.ext_srgb&&(Qn.srgb=35904,Qn.srgba=35906),rt.oes_texture_float&&(On.float32=On.float=5126),rt.oes_texture_half_float&&(On.float16=On["half float"]=36193),rt.webgl_depth_texture&&(H(Qn,{depth:6402,"depth stencil":34041}),H(On,{uint16:5123,uint32:5125,"depth stencil":34042})),rt.webgl_compressed_texture_s3tc&&H(sr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),rt.webgl_compressed_texture_atc&&H(sr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),rt.webgl_compressed_texture_pvrtc&&H(sr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),rt.webgl_compressed_texture_etc1&&(sr["rgb etc1"]=36196);var Mr=Array.prototype.slice.call(Ge.getParameter(34467));Object.keys(sr).forEach(function(dn){var Ut=sr[dn];0<=Mr.indexOf(Ut)&&(Qn[dn]=Ut)});var Wr=Object.keys(Qn);Le.textureFormats=Wr;var mr=[];Object.keys(Qn).forEach(function(dn){mr[Qn[dn]]=dn});var Or=[];Object.keys(On).forEach(function(dn){Or[On[dn]]=dn});var vr=[];Object.keys(wn).forEach(function(dn){vr[wn[dn]]=dn});var Xn=[];Object.keys(kn).forEach(function(dn){Xn[kn[dn]]=dn});var jn=[];Object.keys(Tn).forEach(function(dn){jn[Tn[dn]]=dn});var nr=Wr.reduce(function(dn,Ut){var Kt=Qn[Ut];return dn[Kt]=6409===Kt||6406===Kt||6409===Kt||6410===Kt||6402===Kt||34041===Kt||rt.ext_srgb&&(35904===Kt||35906===Kt)?Kt:32855===Kt||0<=Ut.indexOf("rgba")?6408:6407,dn},{}),Ur=[],Jn=[],_r=0,Hr={},Lr=Le.maxTextureUnits,$r=Array(Lr).map(function(){return null});return H(Qt.prototype,{bind:function(){this.bindCount+=1;var dn=this.unit;if(0>dn){for(var Ut=0;Ut<Lr;++Ut){var Kt=$r[Ut];if(Kt){if(0<Kt.bindCount)continue;Kt.unit=-1}$r[Ut]=this,dn=Ut;break}st.profile&&Ne.maxTextureUnits<dn+1&&(Ne.maxTextureUnits=dn+1),this.unit=dn,Ge.activeTexture(33984+dn),Ge.bindTexture(this.target,this.texture)}return dn},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Dn(this)}}),st.profile&&(Ne.getTotalTextureSize=function(){var dn=0;return Object.keys(Hr).forEach(function(Ut){dn+=Hr[Ut].stats.size}),dn}),{create2D:function(dn,Ut){function Kt(Bn,cr){var ur=Mn.texInfo;Ht.call(ur);var Rn=yt();return"number"==typeof Bn?Wt(Rn,0|Bn,"number"==typeof cr?0|cr:0|Bn):Bn?(Jt(ur,Bn),an(Rn,Bn)):Wt(Rn,1,1),ur.genMipmaps&&(Rn.mipmask=(Rn.width<<1)-1),Mn.mipmask=Rn.mipmask,Tt(Mn,Rn),Mn.internalformat=Rn.internalformat,Kt.width=Rn.width,Kt.height=Rn.height,sn(Mn),Ue(Rn,3553),gn(ur,3553),hn(),Dt(Rn),st.profile&&(Mn.stats.size=E(Mn.internalformat,Mn.type,Rn.width,Rn.height,ur.genMipmaps,!1)),Kt.format=mr[Mn.internalformat],Kt.type=Or[Mn.type],Kt.mag=vr[ur.magFilter],Kt.min=Xn[ur.minFilter],Kt.wrapS=jn[ur.wrapS],Kt.wrapT=jn[ur.wrapT],Kt}var Mn=new Qt(3553);return Hr[Mn.id]=Mn,Ne.textureCount++,Kt(dn,Ut),Kt.subimage=function(Bn,cr,ur,Rn){cr|=0,ur|=0,Rn|=0;var Cn=it();return Tt(Cn,Mn),Cn.width=0,Cn.height=0,Bt(Cn,Bn),Cn.width=Cn.width||(Mn.width>>Rn)-cr,Cn.height=Cn.height||(Mn.height>>Rn)-ur,sn(Mn),jt(Cn,3553,cr,ur,Rn),hn(),Mt(Cn),Kt},Kt.resize=function(Bn,cr){var ur=0|Bn,Rn=0|cr||ur;if(ur===Mn.width&&Rn===Mn.height)return Kt;Kt.width=Mn.width=ur,Kt.height=Mn.height=Rn,sn(Mn);for(var Cn=0;Mn.mipmask>>Cn;++Cn){var Un=ur>>Cn,Yn=Rn>>Cn;if(!Un||!Yn)break;Ge.texImage2D(3553,Cn,Mn.format,Un,Yn,0,Mn.format,Mn.type,null)}return hn(),st.profile&&(Mn.stats.size=E(Mn.internalformat,Mn.type,ur,Rn,!1,!1)),Kt},Kt._reglType="texture2d",Kt._texture=Mn,st.profile&&(Kt.stats=Mn.stats),Kt.destroy=function(){Mn.decRef()},Kt},createCube:function(dn,Ut,Kt,Mn,Bn,cr){function ur(Un,Yn,Hn,Zn,Sr,Ar){var gr,Rr=Rn.texInfo;for(Ht.call(Rr),gr=0;6>gr;++gr)Cn[gr]=yt();if("number"!=typeof Un&&Un){if("object"==typeof Un)if(Yn)an(Cn[0],Un),an(Cn[1],Yn),an(Cn[2],Hn),an(Cn[3],Zn),an(Cn[4],Sr),an(Cn[5],Ar);else if(Jt(Rr,Un),xt(Rn,Un),"faces"in Un)for(Un=Un.faces,gr=0;6>gr;++gr)Tt(Cn[gr],Rn),an(Cn[gr],Un[gr]);else for(gr=0;6>gr;++gr)an(Cn[gr],Un)}else for(Un=0|Un||1,gr=0;6>gr;++gr)Wt(Cn[gr],Un,Un);for(Tt(Rn,Cn[0]),Rn.mipmask=Rr.genMipmaps?(Cn[0].width<<1)-1:Cn[0].mipmask,Rn.internalformat=Cn[0].internalformat,ur.width=Cn[0].width,ur.height=Cn[0].height,sn(Rn),gr=0;6>gr;++gr)Ue(Cn[gr],34069+gr);for(gn(Rr,34067),hn(),st.profile&&(Rn.stats.size=E(Rn.internalformat,Rn.type,ur.width,ur.height,Rr.genMipmaps,!0)),ur.format=mr[Rn.internalformat],ur.type=Or[Rn.type],ur.mag=vr[Rr.magFilter],ur.min=Xn[Rr.minFilter],ur.wrapS=jn[Rr.wrapS],ur.wrapT=jn[Rr.wrapT],gr=0;6>gr;++gr)Dt(Cn[gr]);return ur}var Rn=new Qt(34067);Hr[Rn.id]=Rn,Ne.cubeCount++;var Cn=Array(6);return ur(dn,Ut,Kt,Mn,Bn,cr),ur.subimage=function(Un,Yn,Hn,Zn,Sr){Hn|=0,Zn|=0,Sr|=0;var Ar=it();return Tt(Ar,Rn),Ar.width=0,Ar.height=0,Bt(Ar,Yn),Ar.width=Ar.width||(Rn.width>>Sr)-Hn,Ar.height=Ar.height||(Rn.height>>Sr)-Zn,sn(Rn),jt(Ar,34069+Un,Hn,Zn,Sr),hn(),Mt(Ar),ur},ur.resize=function(Un){if((Un|=0)!==Rn.width){ur.width=Rn.width=Un,ur.height=Rn.height=Un,sn(Rn);for(var Yn=0;6>Yn;++Yn)for(var Hn=0;Rn.mipmask>>Hn;++Hn)Ge.texImage2D(34069+Yn,Hn,Rn.format,Un>>Hn,Un>>Hn,0,Rn.format,Rn.type,null);return hn(),st.profile&&(Rn.stats.size=E(Rn.internalformat,Rn.type,ur.width,ur.height,!1,!0)),ur}},ur._reglType="textureCube",ur._texture=Rn,st.profile&&(ur.stats=Rn.stats),ur.destroy=function(){Rn.decRef()},ur},clear:function(){for(var dn=0;dn<Lr;++dn)Ge.activeTexture(33984+dn),Ge.bindTexture(3553,null),$r[dn]=null;de(Hr).forEach(Dn),Ne.cubeCount=0,Ne.textureCount=0},getTexture:function(dn){return null},restore:function(){for(var dn=0;dn<Lr;++dn){var Ut=$r[dn];Ut&&(Ut.bindCount=0,Ut.unit=-1,$r[dn]=null)}de(Hr).forEach(function(Kt){Kt.texture=Ge.createTexture(),Ge.bindTexture(Kt.target,Kt.texture);for(var Mn=0;32>Mn;++Mn)if(0!=(Kt.mipmask&1<<Mn))if(3553===Kt.target)Ge.texImage2D(3553,Mn,Kt.internalformat,Kt.width>>Mn,Kt.height>>Mn,0,Kt.internalformat,Kt.type,null);else for(var Bn=0;6>Bn;++Bn)Ge.texImage2D(34069+Bn,Mn,Kt.internalformat,Kt.width>>Mn,Kt.height>>Mn,0,Kt.internalformat,Kt.type,null);gn(Kt.texInfo,Kt.target)})},refresh:function(){for(var dn=0;dn<Lr;++dn){var Ut=$r[dn];Ut&&(Ut.bindCount=0,Ut.unit=-1,$r[dn]=null),Ge.activeTexture(33984+dn),Ge.bindTexture(3553,null),Ge.bindTexture(34067,null)}}}}(jt,an,gn,function(){kn.procs.poll()},Jt,Wt,Ge),Tn=function(Ge,rt,Le,ze,je){function Ne(gt){this.id=xt++,this.refCount=1,this.renderbuffer=gt,this.format=32854,this.height=this.width=0,je.profile&&(this.stats={size:0})}function st(gt){var Bt=gt.renderbuffer;Ge.bindRenderbuffer(36161,null),Ge.deleteRenderbuffer(Bt),gt.renderbuffer=null,gt.refCount=0,delete zt[gt.id],ze.renderbufferCount--}var mt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};rt.ext_srgb&&(mt.srgba=35907),rt.ext_color_buffer_half_float&&(mt.rgba16f=34842,mt.rgb16f=34843),rt.webgl_color_buffer_float&&(mt.rgba32f=34836);var Tt=[];Object.keys(mt).forEach(function(gt){Tt[mt[gt]]=gt});var xt=0,zt={};return Ne.prototype.decRef=function(){0>=--this.refCount&&st(this)},je.profile&&(ze.getTotalRenderbufferSize=function(){var gt=0;return Object.keys(zt).forEach(function(Bt){gt+=zt[Bt].stats.size}),gt}),{create:function(gt,Bt){function jt(Mt,qt){var Wt=0,an=0,Ue=32854;if("object"==typeof Mt&&Mt?("shape"in Mt?(Wt=0|(an=Mt.shape)[0],an=0|an[1]):("radius"in Mt&&(Wt=an=0|Mt.radius),"width"in Mt&&(Wt=0|Mt.width),"height"in Mt&&(an=0|Mt.height)),"format"in Mt&&(Ue=mt[Mt.format])):"number"==typeof Mt?(Wt=0|Mt,an="number"==typeof qt?0|qt:Wt):Mt||(Wt=an=1),Wt!==it.width||an!==it.height||Ue!==it.format)return jt.width=it.width=Wt,jt.height=it.height=an,it.format=Ue,Ge.bindRenderbuffer(36161,it.renderbuffer),Ge.renderbufferStorage(36161,Ue,Wt,an),je.profile&&(it.stats.size=bt[it.format]*it.width*it.height),jt.format=Tt[it.format],jt}var it=new Ne(Ge.createRenderbuffer());return zt[it.id]=it,ze.renderbufferCount++,jt(gt,Bt),jt.resize=function(Mt,qt){var Wt=0|Mt,an=0|qt||Wt;return Wt===it.width&&an===it.height||(jt.width=it.width=Wt,jt.height=it.height=an,Ge.bindRenderbuffer(36161,it.renderbuffer),Ge.renderbufferStorage(36161,it.format,Wt,an),je.profile&&(it.stats.size=bt[it.format]*it.width*it.height)),jt},jt._reglType="renderbuffer",jt._renderbuffer=it,je.profile&&(jt.stats=it.stats),jt.destroy=function(){it.decRef()},jt},clear:function(){de(zt).forEach(st)},restore:function(){de(zt).forEach(function(gt){gt.renderbuffer=Ge.createRenderbuffer(),Ge.bindRenderbuffer(36161,gt.renderbuffer),Ge.renderbufferStorage(36161,gt.format,gt.width,gt.height)}),Ge.bindRenderbuffer(36161,null)}}}(jt,an,0,Wt,Ge),wn=function(Ge,rt,Le,ze,je,Ne){function st(Qt,sn,hn){this.target=Qt,this.texture=sn,this.renderbuffer=hn;var Dn=Qt=0;sn?(Qt=sn.width,Dn=sn.height):hn&&(Qt=hn.width,Dn=hn.height),this.width=Qt,this.height=Dn}function mt(Qt){Qt&&(Qt.texture&&Qt.texture._texture.decRef(),Qt.renderbuffer&&Qt.renderbuffer._renderbuffer.decRef())}function Tt(Qt,sn,hn){Qt&&(Qt.texture?Qt.texture._texture.refCount+=1:Qt.renderbuffer._renderbuffer.refCount+=1)}function xt(Qt,sn){sn&&(sn.texture?Ge.framebufferTexture2D(36160,Qt,sn.target,sn.texture._texture.texture,0):Ge.framebufferRenderbuffer(36160,Qt,36161,sn.renderbuffer._renderbuffer.renderbuffer))}function zt(Qt){var sn=3553,hn=null,Dn=null,_n=Qt;return"object"==typeof Qt&&(_n=Qt.data,"target"in Qt&&(sn=0|Qt.target)),"texture2d"===(Qt=_n._reglType)||"textureCube"===Qt?hn=_n:"renderbuffer"===Qt&&(Dn=_n,sn=36161),new st(sn,hn,Dn)}function gt(Qt,sn,hn,Dn,_n){return hn?((Qt=ze.create2D({width:Qt,height:sn,format:Dn,type:_n}))._texture.refCount=0,new st(3553,Qt,null)):((Qt=je.create({width:Qt,height:sn,format:Dn}))._renderbuffer.refCount=0,new st(36161,null,Qt))}function Bt(Qt){return Qt&&(Qt.texture||Qt.renderbuffer)}function jt(Qt,sn,hn){Qt&&(Qt.texture?Qt.texture.resize(sn,hn):Qt.renderbuffer&&Qt.renderbuffer.resize(sn,hn),Qt.width=sn,Qt.height=hn)}function it(){this.id=Jt++,gn[this.id]=this,this.framebuffer=Ge.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Mt(Qt){Qt.colorAttachments.forEach(mt),mt(Qt.depthAttachment),mt(Qt.stencilAttachment),mt(Qt.depthStencilAttachment)}function qt(Qt){Ge.deleteFramebuffer(Qt.framebuffer),Qt.framebuffer=null,Ne.framebufferCount--,delete gn[Qt.id]}function Wt(Qt){var sn;Ge.bindFramebuffer(36160,Qt.framebuffer);var hn=Qt.colorAttachments;for(sn=0;sn<hn.length;++sn)xt(36064+sn,hn[sn]);for(sn=hn.length;sn<Le.maxColorAttachments;++sn)Ge.framebufferTexture2D(36160,36064+sn,3553,null,0);Ge.framebufferTexture2D(36160,33306,3553,null,0),Ge.framebufferTexture2D(36160,36096,3553,null,0),Ge.framebufferTexture2D(36160,36128,3553,null,0),xt(36096,Qt.depthAttachment),xt(36128,Qt.stencilAttachment),xt(33306,Qt.depthStencilAttachment),Ge.checkFramebufferStatus(36160),Ge.isContextLost(),Ge.bindFramebuffer(36160,Ue.next?Ue.next.framebuffer:null),Ue.cur=Ue.next,Ge.getError()}function an(Qt,sn){function hn(_n,Tn){var wn,kn=0,Fn=0,On=!0,Qn=!0;wn=null;var sr=!0,Mr="rgba",Wr="uint8",mr=1,Or=null,vr=null,Xn=null,jn=!1;"number"==typeof _n?(kn=0|_n,Fn=0|Tn||kn):_n?("shape"in _n?(kn=(Fn=_n.shape)[0],Fn=Fn[1]):("radius"in _n&&(kn=Fn=_n.radius),"width"in _n&&(kn=_n.width),"height"in _n&&(Fn=_n.height)),("color"in _n||"colors"in _n)&&(wn=_n.color||_n.colors,Array.isArray(wn)),wn||("colorCount"in _n&&(mr=0|_n.colorCount),"colorTexture"in _n&&(sr=!!_n.colorTexture,Mr="rgba4"),"colorType"in _n&&(Wr=_n.colorType,!sr)&&("half float"===Wr||"float16"===Wr?Mr="rgba16f":"float"!==Wr&&"float32"!==Wr||(Mr="rgba32f")),"colorFormat"in _n&&(0<=yt.indexOf(Mr=_n.colorFormat)?sr=!0:0<=Dt.indexOf(Mr)&&(sr=!1))),("depthTexture"in _n||"depthStencilTexture"in _n)&&(jn=!(!_n.depthTexture&&!_n.depthStencilTexture)),"depth"in _n&&("boolean"==typeof _n.depth?On=_n.depth:(Or=_n.depth,Qn=!1)),"stencil"in _n&&("boolean"==typeof _n.stencil?Qn=_n.stencil:(vr=_n.stencil,On=!1)),"depthStencil"in _n&&("boolean"==typeof _n.depthStencil?On=Qn=_n.depthStencil:(Xn=_n.depthStencil,Qn=On=!1))):kn=Fn=1;var nr=null,Ur=null,Jn=null,_r=null;if(Array.isArray(wn))nr=wn.map(zt);else if(wn)nr=[zt(wn)];else for(nr=Array(mr),wn=0;wn<mr;++wn)nr[wn]=gt(kn,Fn,sr,Mr,Wr);for(kn=kn||nr[0].width,Fn=Fn||nr[0].height,Or?Ur=zt(Or):On&&!Qn&&(Ur=gt(kn,Fn,jn,"depth","uint32")),vr?Jn=zt(vr):Qn&&!On&&(Jn=gt(kn,Fn,!1,"stencil","uint8")),Xn?_r=zt(Xn):!Or&&!vr&&Qn&&On&&(_r=gt(kn,Fn,jn,"depth stencil","depth stencil")),On=null,wn=0;wn<nr.length;++wn)Tt(nr[wn]),nr[wn]&&nr[wn].texture&&(Qn=Vt[nr[wn].texture._texture.format]*Ft[nr[wn].texture._texture.type],null===On&&(On=Qn));return Tt(Ur),Tt(Jn),Tt(_r),Mt(Dn),Dn.width=kn,Dn.height=Fn,Dn.colorAttachments=nr,Dn.depthAttachment=Ur,Dn.stencilAttachment=Jn,Dn.depthStencilAttachment=_r,hn.color=nr.map(Bt),hn.depth=Bt(Ur),hn.stencil=Bt(Jn),hn.depthStencil=Bt(_r),hn.width=Dn.width,hn.height=Dn.height,Wt(Dn),hn}var Dn=new it;return Ne.framebufferCount++,hn(Qt,sn),H(hn,{resize:function(_n,Tn){var wn=Math.max(0|_n,1),kn=Math.max(0|Tn||wn,1);if(wn===Dn.width&&kn===Dn.height)return hn;for(var Fn=Dn.colorAttachments,On=0;On<Fn.length;++On)jt(Fn[On],wn,kn);return jt(Dn.depthAttachment,wn,kn),jt(Dn.stencilAttachment,wn,kn),jt(Dn.depthStencilAttachment,wn,kn),Dn.width=hn.width=wn,Dn.height=hn.height=kn,Wt(Dn),hn},_reglType:"framebuffer",_framebuffer:Dn,destroy:function(){qt(Dn),Mt(Dn)},use:function(_n){Ue.setFBO({framebuffer:hn},_n)}})}var Ue={cur:null,next:null,dirty:!1,setFBO:null},yt=["rgba"],Dt=["rgba4","rgb565","rgb5 a1"];rt.ext_srgb&&Dt.push("srgba"),rt.ext_color_buffer_half_float&&Dt.push("rgba16f","rgb16f"),rt.webgl_color_buffer_float&&Dt.push("rgba32f");var Ht=["uint8"];rt.oes_texture_half_float&&Ht.push("half float","float16"),rt.oes_texture_float&&Ht.push("float","float32");var Jt=0,gn={};return H(Ue,{getFramebuffer:function(Qt){return"function"==typeof Qt&&"framebuffer"===Qt._reglType&&(Qt=Qt._framebuffer)instanceof it?Qt:null},create:an,createCube:function(Qt){function sn(Dn){var _n,Tn={color:null},wn=0,kn=null;_n="rgba";var Fn="uint8",On=1;if("number"==typeof Dn?wn=0|Dn:Dn?("shape"in Dn?wn=Dn.shape[0]:("radius"in Dn&&(wn=0|Dn.radius),"width"in Dn?wn=0|Dn.width:"height"in Dn&&(wn=0|Dn.height)),("color"in Dn||"colors"in Dn)&&(kn=Dn.color||Dn.colors,Array.isArray(kn)),kn||("colorCount"in Dn&&(On=0|Dn.colorCount),"colorType"in Dn&&(Fn=Dn.colorType),"colorFormat"in Dn&&(_n=Dn.colorFormat)),"depth"in Dn&&(Tn.depth=Dn.depth),"stencil"in Dn&&(Tn.stencil=Dn.stencil),"depthStencil"in Dn&&(Tn.depthStencil=Dn.depthStencil)):wn=1,kn)if(Array.isArray(kn))for(Dn=[],_n=0;_n<kn.length;++_n)Dn[_n]=kn[_n];else Dn=[kn];else for(Dn=Array(On),kn={radius:wn,format:_n,type:Fn},_n=0;_n<On;++_n)Dn[_n]=ze.createCube(kn);for(Tn.color=Array(Dn.length),_n=0;_n<Dn.length;++_n)On=Dn[_n],wn=wn||On.width,Tn.color[_n]={target:34069,data:Dn[_n]};for(_n=0;6>_n;++_n){for(On=0;On<Dn.length;++On)Tn.color[On].target=34069+_n;0<_n&&(Tn.depth=hn[0].depth,Tn.stencil=hn[0].stencil,Tn.depthStencil=hn[0].depthStencil),hn[_n]?hn[_n](Tn):hn[_n]=an(Tn)}return H(sn,{width:wn,height:wn,color:Dn})}var hn=Array(6);return sn(Qt),H(sn,{faces:hn,resize:function(Dn){var _n=0|Dn;if(_n===sn.width)return sn;var Tn=sn.color;for(Dn=0;Dn<Tn.length;++Dn)Tn[Dn].resize(_n);for(Dn=0;6>Dn;++Dn)hn[Dn].resize(_n);return sn.width=sn.height=_n,sn},_reglType:"framebufferCube",destroy:function(){hn.forEach(function(Dn){Dn.destroy()})}})},clear:function(){de(gn).forEach(qt)},restore:function(){Ue.cur=null,Ue.next=null,Ue.dirty=!0,de(gn).forEach(function(Qt){Qt.framebuffer=Ge.createFramebuffer(),Wt(Qt)})}})}(jt,an,gn,_n,Tn,Wt),kn=oe(jt,qt,an,gn,Qt,sn,0,wn,{},hn,Dn,Dt,Jt,Ue,Ge),Fn=(qt=function(Ge,rt,Le,ze,je,Ne,st){function mt(Tt){var xt;xt=null===rt.next?5121:rt.next.colorAttachments[0].texture._texture.type;var zt=0,gt=0,Bt=ze.framebufferWidth,jt=ze.framebufferHeight,it=null;return ue(Tt)?it=Tt:Tt&&(zt=0|Tt.x,gt=0|Tt.y,Bt=0|(Tt.width||ze.framebufferWidth-zt),jt=0|(Tt.height||ze.framebufferHeight-gt),it=Tt.data||null),Le(),Tt=Bt*jt*4,it||(5121===xt?it=new Uint8Array(Tt):5126===xt&&(it=it||new Float32Array(Tt))),Ge.pixelStorei(3333,4),Ge.readPixels(zt,gt,Bt,jt,6408,xt,it),it}return function(Tt){return Tt&&"framebuffer"in Tt?(rt.setFBO({framebuffer:(xt=Tt).framebuffer},function(){zt=mt(xt)}),zt):mt(Tt);var xt,zt}}(jt,wn,kn.procs.poll,Jt),kn.next),On=jt.canvas,Qn=[],sr=[],Mr=[],Wr=[Ge.onDestroy],mr=null;On&&(On.addEventListener("webglcontextlost",je,!1),On.addEventListener("webglcontextrestored",Ne,!1));var Or=wn.setFBO=st({framebuffer:re.define.call(null,1,"framebuffer")});return gt(),it=H(st,{clear:function(vr){if("framebuffer"in vr)if(vr.framebuffer&&"framebufferCube"===vr.framebuffer_reglType)for(var Xn=0;6>Xn;++Xn)Or(H({framebuffer:vr.framebuffer.faces[Xn]},vr),mt);else Or(vr,mt);else mt(0,vr)},prop:re.define.bind(null,1),context:re.define.bind(null,2),this:re.define.bind(null,3),draw:st({}),buffer:function(vr){return Qt.create(vr,34962,!1,!1)},elements:function(vr){return sn.create(vr,!1)},texture:_n.create2D,cube:_n.createCube,renderbuffer:Tn.create,framebuffer:wn.create,framebufferCube:wn.createCube,vao:hn.createVAO,attributes:it,frame:Tt,on:function(vr,Xn){var jn;switch(vr){case"frame":return Tt(Xn);case"lost":jn=sr;break;case"restore":jn=Mr;break;case"destroy":jn=Wr}return jn.push(Xn),{cancel:function(){for(var nr=0;nr<jn.length;++nr)if(jn[nr]===Xn){jn[nr]=jn[jn.length-1],jn.pop();break}}}},limits:gn,hasExtension:function(vr){return 0<=gn.extensions.indexOf(vr.toLowerCase())},read:qt,destroy:function(){Qn.length=0,ze(),On&&(On.removeEventListener("webglcontextlost",je),On.removeEventListener("webglcontextrestored",Ne)),Dn.clear(),wn.clear(),Tn.clear(),hn.clear(),_n.clear(),sn.clear(),Qt.clear(),Ue&&Ue.clear(),Wr.forEach(function(vr){vr()})},_gl:jt,_refresh:gt,poll:function(){zt(),Ue&&Ue.update()},now:Bt,stats:Wt}),Ge.onDone(null,it),it}},"object"==typeof ie&&void 0!==ae?ae.exports=x():this.createREGL=x()},{}],284:[function(_,ae,ie){var g=_("buffer"),x=g.Buffer;function T(e,r){for(var t in e)r[t]=e[t]}function b(e,r,t){return x(e,r,t)}x.from&&x.alloc&&x.allocUnsafe&&x.allocUnsafeSlow?ae.exports=g:(T(g,ie),ie.Buffer=b),b.prototype=Object.create(x.prototype),T(x,b),b.from=function(e,r,t){if("number"==typeof e)throw new TypeError("Argument must not be a number");return x(e,r,t)},b.alloc=function(e,r,t){if("number"!=typeof e)throw new TypeError("Argument must be a number");var a=x(e);return void 0!==r?"string"==typeof t?a.fill(r,t):a.fill(r):a.fill(0),a},b.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return x(e)},b.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return g.SlowBuffer(e)}},{buffer:85}],285:[function(_,ae,ie){ae.exports=x;var g=_("events").EventEmitter;function x(){g.call(this)}_("inherits")(x,g),x.Readable=_("readable-stream/lib/_stream_readable.js"),x.Writable=_("readable-stream/lib/_stream_writable.js"),x.Duplex=_("readable-stream/lib/_stream_duplex.js"),x.Transform=_("readable-stream/lib/_stream_transform.js"),x.PassThrough=_("readable-stream/lib/_stream_passthrough.js"),x.finished=_("readable-stream/lib/internal/streams/end-of-stream.js"),x.pipeline=_("readable-stream/lib/internal/streams/pipeline.js"),x.Stream=x,x.prototype.pipe=function(T,b){var e=this;function r(u){T.writable&&!1===T.write(u)&&e.pause&&e.pause()}function t(){e.readable&&e.resume&&e.resume()}e.on("data",r),T.on("drain",t),T._isStdio||b&&!1===b.end||(e.on("end",n),e.on("close",d));var a=!1;function n(){a||(a=!0,T.end())}function d(){a||(a=!0,"function"==typeof T.destroy&&T.destroy())}function s(u){if(i(),0===g.listenerCount(this,"error"))throw u}function i(){e.removeListener("data",r),T.removeListener("drain",t),e.removeListener("end",n),e.removeListener("close",d),e.removeListener("error",s),T.removeListener("error",s),e.removeListener("end",i),e.removeListener("close",i),T.removeListener("close",i)}return e.on("error",s),T.on("error",s),e.on("end",i),e.on("close",i),T.on("close",i),T.emit("pipe",e),T}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(_,ae,ie){"use strict";var g={};function x(b,e,r){r||(r=Error);var t=function(a){var n,d;function s(i,u,f){return a.call(this,"string"==typeof e?e:e(i,u,f))||this}return d=a,(n=s).prototype=Object.create(d.prototype),n.prototype.constructor=n,n.__proto__=d,s}(r);t.prototype.name=r.name,t.prototype.code=b,g[b]=t}function T(b,e){if(Array.isArray(b)){var r=b.length;return b=b.map(function(t){return String(t)}),r>2?"one of ".concat(e," ").concat(b.slice(0,r-1).join(", "),", or ")+b[r-1]:2===r?"one of ".concat(e," ").concat(b[0]," or ").concat(b[1]):"of ".concat(e," ").concat(b[0])}return"of ".concat(e," ").concat(String(b))}x("ERR_INVALID_OPT_VALUE",function(b,e){return'The value "'+e+'" is invalid for option "'+b+'"'},TypeError),x("ERR_INVALID_ARG_TYPE",function(b,e,r){var t,d,i,f;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(t="must not be",e=e.replace(/^not /,"")):t="must be",i=b,(void 0===f||f>i.length)&&(f=i.length)," argument"===i.substring(f-" argument".length,f))d="The ".concat(b," ").concat(t," ").concat(T(e,"type"));else{var s=function(i,u,f){return"number"!=typeof f&&(f=0),!(f+".".length>i.length)&&-1!==i.indexOf(".",f)}(b)?"property":"argument";d='The "'.concat(b,'" ').concat(s," ").concat(t," ").concat(T(e,"type"))}return d+". Received type ".concat(typeof r)},TypeError),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),x("ERR_METHOD_NOT_IMPLEMENTED",function(b){return"The "+b+" method is not implemented"}),x("ERR_STREAM_PREMATURE_CLOSE","Premature close"),x("ERR_STREAM_DESTROYED",function(b){return"Cannot call "+b+" after a stream was destroyed"}),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),x("ERR_STREAM_WRITE_AFTER_END","write after end"),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_UNKNOWN_ENCODING",function(b){return"Unknown encoding: "+b},TypeError),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ae.exports.codes=g},{}],287:[function(_,ae,ie){(function(g){(function(){"use strict";var x=Object.keys||function(s){var i=[];for(var u in s)i.push(u);return i};ae.exports=a;var T=_("./_stream_readable"),b=_("./_stream_writable");_("inherits")(a,T);for(var e=x(b.prototype),r=0;r<e.length;r++){var t=e[r];a.prototype[t]||(a.prototype[t]=b.prototype[t])}function a(s){if(!(this instanceof a))return new a(s);T.call(this,s),b.call(this,s),this.allowHalfOpen=!0,s&&(!1===s.readable&&(this.readable=!1),!1===s.writable&&(this.writable=!1),!1===s.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",n)))}function n(){this._writableState.ended||g.nextTick(d,this)}function d(s){s.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(s){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=s,this._writableState.destroyed=s)}})}).call(this)}).call(this,_("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(_,ae,ie){"use strict";ae.exports=x;var g=_("./_stream_transform");function x(T){if(!(this instanceof x))return new x(T);g.call(this,T)}_("inherits")(x,g),x.prototype._transform=function(T,b,e){e(null,T)}},{"./_stream_transform":290,inherits:231}],289:[function(_,ae,ie){(function(g,x){(function(){"use strict";var T;ae.exports=E,E.ReadableState=k,_("events");var a,b=function(j,H){return j.listeners(H).length},e=_("./internal/streams/stream"),r=_("buffer").Buffer,t=x.Uint8Array||function(){},n=_("util");a=n&&n.debuglog?n.debuglog("stream"):function(){};var d,s,i,u=_("./internal/streams/buffer_list"),f=_("./internal/streams/destroy"),p=_("./internal/streams/state").getHighWaterMark,y=_("../errors").codes,m=y.ERR_INVALID_ARG_TYPE,l=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,v=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;_("inherits")(E,e);var A=f.errorOrDestroy,M=["error","close","destroy","pause","resume"];function k(j,H,G){T=T||_("./_stream_duplex"),"boolean"!=typeof G&&(G=H instanceof T),this.objectMode=!!(j=j||{}).objectMode,G&&(this.objectMode=this.objectMode||!!j.readableObjectMode),this.highWaterMark=p(this,j,"readableHighWaterMark",G),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==j.emitClose,this.autoDestroy=!!j.autoDestroy,this.destroyed=!1,this.defaultEncoding=j.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,j.encoding&&(d||(d=_("string_decoder/").StringDecoder),this.decoder=new d(j.encoding),this.encoding=j.encoding)}function E(j){if(T=T||_("./_stream_duplex"),!(this instanceof E))return new E(j);this._readableState=new k(j,this,this instanceof T),this.readable=!0,j&&("function"==typeof j.read&&(this._read=j.read),"function"==typeof j.destroy&&(this._destroy=j.destroy)),e.call(this)}function P(j,H,G,re,q){a("readableAddChunk",H);var te,le,ue,de,he,ne=j._readableState;if(null===H)ne.reading=!1,function(le,ue){if(a("onEofChunk"),!ue.ended){if(ue.decoder){var de=ue.decoder.end();de&&de.length&&(ue.buffer.push(de),ue.length+=ue.objectMode?1:de.length)}ue.ended=!0,ue.sync?R(le):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,D(le)))}}(j,ne);else if(q||(le=ne,r.isBuffer(he=ue=H)||he instanceof t||"string"==typeof ue||void 0===ue||le.objectMode||(de=new m("chunk",["string","Buffer","Uint8Array"],ue)),te=de),te)A(j,te);else if(ne.objectMode||H&&H.length>0)if("string"==typeof H||ne.objectMode||Object.getPrototypeOf(H)===r.prototype||(H=function(le){return r.from(le)}(H)),re)ne.endEmitted?A(j,new v):S(j,ne,H,!0);else if(ne.ended)A(j,new l);else{if(ne.destroyed)return!1;ne.reading=!1,ne.decoder&&!G?(H=ne.decoder.write(H),ne.objectMode||0!==H.length?S(j,ne,H,!1):L(j,ne)):S(j,ne,H,!1)}else re||(ne.reading=!1,L(j,ne));return!ne.ended&&(ne.length<ne.highWaterMark||0===ne.length)}function S(j,H,G,re){H.flowing&&0===H.length&&!H.sync?(H.awaitDrain=0,j.emit("data",G)):(H.length+=H.objectMode?1:G.length,re?H.buffer.unshift(G):H.buffer.push(G),H.needReadable&&R(j)),L(j,H)}function F(j,H){return j<=0||0===H.length&&H.ended?0:H.objectMode?1:j!=j?H.flowing&&H.length?H.buffer.head.data.length:H.length:(j>H.highWaterMark&&(H.highWaterMark=((G=j)>=1073741824?G=1073741824:(G--,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G++),G)),j<=H.length?j:H.ended?H.length:(H.needReadable=!0,0));var G}function R(j){var H=j._readableState;a("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(a("emitReadable",H.flowing),H.emittedReadable=!0,g.nextTick(D,j))}function D(j){var H=j._readableState;a("emitReadable_",H.destroyed,H.length,H.ended),H.destroyed||!H.length&&!H.ended||(j.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,ee(j)}function L(j,H){H.readingMore||(H.readingMore=!0,g.nextTick(B,j,H))}function B(j,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&0===H.length);){var G=H.length;if(a("maybeReadMore read 0"),j.read(0),G===H.length)break}H.readingMore=!1}function V(j){var H=j._readableState;H.readableListening=j.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:j.listenerCount("data")>0&&j.resume()}function Z(j){a("readable nexttick read 0"),j.read(0)}function Y(j,H){a("resume",H.reading),H.reading||j.read(0),H.resumeScheduled=!1,j.emit("resume"),ee(j),H.flowing&&!H.reading&&j.read(0)}function ee(j){var H=j._readableState;for(a("flow",H.flowing);H.flowing&&null!==j.read(););}function Q(j,H){return 0===H.length?null:(H.objectMode?G=H.buffer.shift():!j||j>=H.length?(G=H.decoder?H.buffer.join(""):1===H.buffer.length?H.buffer.first():H.buffer.concat(H.length),H.buffer.clear()):G=H.buffer.consume(j,H.decoder),G);var G}function $(j){var H=j._readableState;a("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,g.nextTick(K,H,j))}function K(j,H){if(a("endReadableNT",j.endEmitted,j.length),!j.endEmitted&&0===j.length&&(j.endEmitted=!0,H.readable=!1,H.emit("end"),j.autoDestroy)){var G=H._writableState;(!G||G.autoDestroy&&G.finished)&&H.destroy()}}function oe(j,H){for(var G=0,re=j.length;G<re;G++)if(j[G]===H)return G;return-1}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(j){this._readableState&&(this._readableState.destroyed=j)}}),E.prototype.destroy=f.destroy,E.prototype._undestroy=f.undestroy,E.prototype._destroy=function(j,H){H(j)},E.prototype.push=function(j,H){var G,re=this._readableState;return re.objectMode?G=!0:"string"==typeof j&&((H=H||re.defaultEncoding)!==re.encoding&&(j=r.from(j,H),H=""),G=!0),P(this,j,H,!1,G)},E.prototype.unshift=function(j){return P(this,j,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(j){d||(d=_("string_decoder/").StringDecoder);var H=new d(j);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var G=this._readableState.buffer.head,re="";null!==G;)re+=H.write(G.data),G=G.next;return this._readableState.buffer.clear(),""!==re&&this._readableState.buffer.push(re),this._readableState.length=re.length,this},E.prototype.read=function(j){a("read",j),j=parseInt(j,10);var H=this._readableState,G=j;if(0!==j&&(H.emittedReadable=!1),0===j&&H.needReadable&&((0!==H.highWaterMark?H.length>=H.highWaterMark:H.length>0)||H.ended))return a("read: emitReadable",H.length,H.ended),0===H.length&&H.ended?$(this):R(this),null;if(0===(j=F(j,H))&&H.ended)return 0===H.length&&$(this),null;var re,q=H.needReadable;return a("need readable",q),(0===H.length||H.length-j<H.highWaterMark)&&a("length less than watermark",q=!0),H.ended||H.reading?a("reading or ended",q=!1):q&&(a("do read"),H.reading=!0,H.sync=!0,0===H.length&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(j=F(G,H))),null===(re=j>0?Q(j,H):null)?(H.needReadable=H.length<=H.highWaterMark,j=0):(H.length-=j,H.awaitDrain=0),0===H.length&&(H.ended||(H.needReadable=!0),G!==j&&H.ended&&$(this)),null!==re&&this.emit("data",re),re},E.prototype._read=function(j){A(this,new w("_read()"))},E.prototype.pipe=function(j,H){var G=this,re=this._readableState;switch(re.pipesCount){case 0:re.pipes=j;break;case 1:re.pipes=[re.pipes,j];break;default:re.pipes.push(j)}re.pipesCount+=1,a("pipe count=%d opts=%j",re.pipesCount,H);var q=H&&!1===H.end||j===g.stdout||j===g.stderr?we:ne;function ne(){a("onend"),j.end()}re.endEmitted?g.nextTick(q):G.once("end",q),j.on("unpipe",function te(ke,De){a("onunpipe"),ke===G&&De&&!1===De.hasUnpiped&&(De.hasUnpiped=!0,a("cleanup"),j.removeListener("close",be),j.removeListener("finish",ge),j.removeListener("drain",le),j.removeListener("error",he),j.removeListener("unpipe",te),G.removeListener("end",ne),G.removeListener("end",we),G.removeListener("data",de),ue=!0,!re.awaitDrain||j._writableState&&!j._writableState.needDrain||le())});var ke,le=(ke=G,function(){var De=ke._readableState;a("pipeOnDrain",De.awaitDrain),De.awaitDrain&&De.awaitDrain--,0===De.awaitDrain&&b(ke,"data")&&(De.flowing=!0,ee(ke))});j.on("drain",le);var ue=!1;function de(ke){a("ondata");var De=j.write(ke);a("dest.write",De),!1===De&&((1===re.pipesCount&&re.pipes===j||re.pipesCount>1&&-1!==oe(re.pipes,j))&&!ue&&(a("false write response, pause",re.awaitDrain),re.awaitDrain++),G.pause())}function he(ke){a("onerror",ke),we(),j.removeListener("error",he),0===b(j,"error")&&A(j,ke)}function be(){j.removeListener("finish",ge),we()}function ge(){a("onfinish"),j.removeListener("close",be),we()}function we(){a("unpipe"),G.unpipe(j)}return G.on("data",de),function(ke,De,Ee){if("function"==typeof ke.prependListener)return ke.prependListener(De,Ee);ke._events&&ke._events[De]?Array.isArray(ke._events[De])?ke._events[De].unshift(Ee):ke._events[De]=[Ee,ke._events[De]]:ke.on(De,Ee)}(j,"error",he),j.once("close",be),j.once("finish",ge),j.emit("pipe",G),re.flowing||(a("pipe resume"),G.resume()),j},E.prototype.unpipe=function(j){var H=this._readableState,G={hasUnpiped:!1};if(0===H.pipesCount)return this;if(1===H.pipesCount)return j&&j!==H.pipes||(j||(j=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,j&&j.emit("unpipe",this,G)),this;if(!j){var re=H.pipes,q=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var te=0;te<q;te++)re[te].emit("unpipe",this,{hasUnpiped:!1});return this}var ne=oe(H.pipes,j);return-1===ne||(H.pipes.splice(ne,1),H.pipesCount-=1,1===H.pipesCount&&(H.pipes=H.pipes[0]),j.emit("unpipe",this,G)),this},E.prototype.addListener=E.prototype.on=function(j,H){var G=e.prototype.on.call(this,j,H),re=this._readableState;return"data"===j?(re.readableListening=this.listenerCount("readable")>0,!1!==re.flowing&&this.resume()):"readable"===j&&(re.endEmitted||re.readableListening||(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,a("on readable",re.length,re.reading),re.length?R(this):re.reading||g.nextTick(Z,this))),G},E.prototype.removeListener=function(j,H){var G=e.prototype.removeListener.call(this,j,H);return"readable"===j&&g.nextTick(V,this),G},E.prototype.removeAllListeners=function(j){var H=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==j&&void 0!==j||g.nextTick(V,this),H},E.prototype.resume=function(){var G,j=this._readableState;return j.flowing||(a("resume"),j.flowing=!j.readableListening,this,(G=j).resumeScheduled||(G.resumeScheduled=!0,g.nextTick(Y,this,G))),j.paused=!1,this},E.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(j){var H=this,G=this._readableState,re=!1;for(var q in j.on("end",function(){if(a("wrapped end"),G.decoder&&!G.ended){var ne=G.decoder.end();ne&&ne.length&&H.push(ne)}H.push(null)}),j.on("data",function(ne){a("wrapped data"),G.decoder&&(ne=G.decoder.write(ne)),G.objectMode&&null==ne||(G.objectMode||ne&&ne.length)&&(H.push(ne)||(re=!0,j.pause()))}),j)void 0===this[q]&&"function"==typeof j[q]&&(this[q]=function(ne){return function(){return j[ne].apply(j,arguments)}}(q));for(var te=0;te<M.length;te++)j.on(M[te],this.emit.bind(this,M[te]));return this._read=function(ne){a("wrapped _read",ne),re&&(re=!1,j.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===s&&(s=_("./internal/streams/async_iterator")),s(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(j){this._readableState&&(this._readableState.flowing=j)}}),E._fromList=Q,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(j,H){return void 0===i&&(i=_("./internal/streams/from")),i(E,j,H)})}).call(this)}).call(this,_("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(_,ae,ie){"use strict";ae.exports=a;var g=_("../errors").codes,x=g.ERR_METHOD_NOT_IMPLEMENTED,T=g.ERR_MULTIPLE_CALLBACK,b=g.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=g.ERR_TRANSFORM_WITH_LENGTH_0,r=_("./_stream_duplex");function t(s,i){var u=this._transformState;u.transforming=!1;var f=u.writecb;if(null===f)return this.emit("error",new T);u.writechunk=null,u.writecb=null,null!=i&&this.push(i),f(s);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function a(s){if(!(this instanceof a))return new a(s);r.call(this,s),this._transformState={afterTransform:t.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&("function"==typeof s.transform&&(this._transform=s.transform),"function"==typeof s.flush&&(this._flush=s.flush)),this.on("prefinish",n)}function n(){var s=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(i,u){d(s,i,u)})}function d(s,i,u){if(i)return s.emit("error",i);if(null!=u&&s.push(u),s._writableState.length)throw new e;if(s._transformState.transforming)throw new b;return s.push(null)}_("inherits")(a,r),a.prototype.push=function(s,i){return this._transformState.needTransform=!1,r.prototype.push.call(this,s,i)},a.prototype._transform=function(s,i,u){u(new x("_transform()"))},a.prototype._write=function(s,i,u){var f=this._transformState;if(f.writecb=u,f.writechunk=s,f.writeencoding=i,!f.transforming){var p=this._readableState;(f.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},a.prototype._read=function(s){var i=this._transformState;null===i.writechunk||i.transforming?i.needTransform=!0:(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform))},a.prototype._destroy=function(s,i){r.prototype._destroy.call(this,s,function(u){i(u)})}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(_,ae,ie){(function(g,x){(function(){"use strict";function T(B){var V=this;this.next=null,this.entry=null,this.finish=function(){!function(Z,Y,ee){var Q=Z.entry;for(Z.entry=null;Q;){var $=Q.callback;Y.pendingcb--,$(undefined),Q=Q.next}Y.corkedRequestsFree.next=Z}(V,B)}}var b;ae.exports=E,E.WritableState=k;var n,e={deprecate:_("util-deprecate")},r=_("./internal/streams/stream"),t=_("buffer").Buffer,a=x.Uint8Array||function(){},d=_("./internal/streams/destroy"),s=_("./internal/streams/state").getHighWaterMark,i=_("../errors").codes,u=i.ERR_INVALID_ARG_TYPE,f=i.ERR_METHOD_NOT_IMPLEMENTED,p=i.ERR_MULTIPLE_CALLBACK,y=i.ERR_STREAM_CANNOT_PIPE,m=i.ERR_STREAM_DESTROYED,l=i.ERR_STREAM_NULL_VALUES,w=i.ERR_STREAM_WRITE_AFTER_END,v=i.ERR_UNKNOWN_ENCODING,A=d.errorOrDestroy;function M(){}function k(B,V,Z){b=b||_("./_stream_duplex"),"boolean"!=typeof Z&&(Z=V instanceof b),this.objectMode=!!(B=B||{}).objectMode,Z&&(this.objectMode=this.objectMode||!!B.writableObjectMode),this.highWaterMark=s(this,B,"writableHighWaterMark",Z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===B.decodeStrings),this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ee){!function(Q,$){var G,K=Q._writableState,oe=K.sync,j=K.writecb;if("function"!=typeof j)throw new p;if((G=K).writing=!1,G.writecb=null,G.length-=G.writelen,G.writelen=0,$)!function(G,re,q,te,ne){--re.pendingcb,q?(g.nextTick(ne,te),g.nextTick(L,G,re),G._writableState.errorEmitted=!0,A(G,te)):(ne(te),G._writableState.errorEmitted=!0,A(G,te),L(G,re))}(Q,K,oe,$,j);else{var H=R(K)||Q.destroyed;H||K.corked||K.bufferProcessing||!K.bufferedRequest||F(Q,K),oe?g.nextTick(S,Q,K,H,j):S(Q,K,H,j)}}(V,ee)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==B.emitClose,this.autoDestroy=!!B.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new T(this)}function E(B){var V=this instanceof(b=b||_("./_stream_duplex"));if(!V&&!n.call(E,this))return new E(B);this._writableState=new k(B,this,V),this.writable=!0,B&&("function"==typeof B.write&&(this._write=B.write),"function"==typeof B.writev&&(this._writev=B.writev),"function"==typeof B.destroy&&(this._destroy=B.destroy),"function"==typeof B.final&&(this._final=B.final)),r.call(this)}function P(B,V,Z,Y,ee,Q,$){V.writelen=Y,V.writecb=$,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new m("write")):Z?B._writev(ee,V.onwrite):B._write(ee,Q,V.onwrite),V.sync=!1}function S(B,V,Z,Y){var ee,Q;Z||(ee=B,0===(Q=V).length&&Q.needDrain&&(Q.needDrain=!1,ee.emit("drain"))),V.pendingcb--,Y(),L(B,V)}function F(B,V){V.bufferProcessing=!0;var Z=V.bufferedRequest;if(B._writev&&Z&&Z.next){var ee=new Array(V.bufferedRequestCount),Q=V.corkedRequestsFree;Q.entry=Z;for(var $=0,K=!0;Z;)ee[$]=Z,Z.isBuf||(K=!1),Z=Z.next,$+=1;ee.allBuffers=K,P(B,V,!0,V.length,ee,"",Q.finish),V.pendingcb++,V.lastBufferedRequest=null,Q.next?(V.corkedRequestsFree=Q.next,Q.next=null):V.corkedRequestsFree=new T(V),V.bufferedRequestCount=0}else{for(;Z;){var oe=Z.chunk;if(P(B,V,!1,V.objectMode?1:oe.length,oe,Z.encoding,Z.callback),Z=Z.next,V.bufferedRequestCount--,V.writing)break}null===Z&&(V.lastBufferedRequest=null)}V.bufferedRequest=Z,V.bufferProcessing=!1}function R(B){return B.ending&&0===B.length&&null===B.bufferedRequest&&!B.finished&&!B.writing}function D(B,V){B._final(function(Z){V.pendingcb--,Z&&A(B,Z),V.prefinished=!0,B.emit("prefinish"),L(B,V)})}function L(B,V){var ee,Q,Z=R(V);if(Z&&(ee=B,(Q=V).prefinished||Q.finalCalled||("function"!=typeof ee._final||Q.destroyed?(Q.prefinished=!0,ee.emit("prefinish")):(Q.pendingcb++,Q.finalCalled=!0,g.nextTick(D,ee,Q))),0===V.pendingcb&&(V.finished=!0,B.emit("finish"),V.autoDestroy))){var Y=B._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&B.destroy()}return Z}_("inherits")(E,r),k.prototype.getBuffer=function(){for(var B=this.bufferedRequest,V=[];B;)V.push(B),B=B.next;return V},function(){try{Object.defineProperty(k.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(B){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(B){return!!n.call(this,B)||this===E&&B&&B._writableState instanceof k}})):n=function(B){return B instanceof this},E.prototype.pipe=function(){A(this,new y)},E.prototype.write=function(B,V,Z){var Y,K,oe,j,ee=this._writableState,Q=!1,$=!ee.objectMode&&(t.isBuffer(Y=B)||Y instanceof a);return $&&!t.isBuffer(B)&&(B=t.from(B)),"function"==typeof V&&(Z=V,V=null),$?V="buffer":V||(V=ee.defaultEncoding),"function"!=typeof Z&&(Z=M),ee.ending?(K=this,oe=Z,j=new w,A(K,j),g.nextTick(oe,j)):($||function(K,oe,j,H){var G;return null===j?G=new l:"string"==typeof j||oe.objectMode||(G=new u("chunk",["string","Buffer"],j)),!G||(A(K,G),g.nextTick(H,G),!1)}(this,ee,B,Z))&&(ee.pendingcb++,Q=function(K,oe,j,H,G,re){if(!j){var q=(de=H,(ue=oe).objectMode||!1===ue.decodeStrings||"string"!=typeof de||(de=t.from(de,G)),de);H!==q&&(j=!0,G="buffer",H=q)}var ue,de,te=oe.objectMode?1:H.length;oe.length+=te;var ne=oe.length<oe.highWaterMark;if(ne||(oe.needDrain=!0),oe.writing||oe.corked){var le=oe.lastBufferedRequest;oe.lastBufferedRequest={chunk:H,encoding:G,isBuf:j,callback:re,next:null},le?le.next=oe.lastBufferedRequest:oe.bufferedRequest=oe.lastBufferedRequest,oe.bufferedRequestCount+=1}else P(K,oe,!1,te,H,G,re);return ne}(this,ee,$,B,V,Z)),Q},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,B.writing||B.corked||B.bufferProcessing||!B.bufferedRequest||F(this,B))},E.prototype.setDefaultEncoding=function(B){if("string"==typeof B&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new v(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(B,V,Z){Z(new f("_write()"))},E.prototype._writev=null,E.prototype.end=function(B,V,Z){var Q,$,Y=this._writableState;return"function"==typeof B?(Z=B,B=null,V=null):"function"==typeof V&&(Z=V,V=null),null!=B&&this.write(B,V),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||(this,$=Z,(Q=Y).ending=!0,L(this,Q),$&&(Q.finished?g.nextTick($):this.once("finish",$)),Q.ended=!0,this.writable=!1),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(B){this._writableState&&(this._writableState.destroyed=B)}}),E.prototype.destroy=d.destroy,E.prototype._undestroy=d.undestroy,E.prototype._destroy=function(B,V){V(B)}}).call(this)}).call(this,_("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(_,ae,ie){(function(g){(function(){"use strict";var x;function T(m,l,w){return l in m?Object.defineProperty(m,l,{value:w,enumerable:!0,configurable:!0,writable:!0}):m[l]=w,m}var b=_("./end-of-stream"),e=Symbol("lastResolve"),r=Symbol("lastReject"),t=Symbol("error"),a=Symbol("ended"),n=Symbol("lastPromise"),d=Symbol("handlePromise"),s=Symbol("stream");function i(m,l){return{value:m,done:l}}function u(m){var l=m[e];if(null!==l){var w=m[s].read();null!==w&&(m[n]=null,m[e]=null,m[r]=null,l(i(w,!1)))}}function f(m){g.nextTick(u,m)}var p=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((T(x={get stream(){return this[s]},next:function(){var m=this,l=this[t];if(null!==l)return Promise.reject(l);if(this[a])return Promise.resolve(i(void 0,!0));if(this[s].destroyed)return new Promise(function(M,k){g.nextTick(function(){m[t]?k(m[t]):M(i(void 0,!0))})});var w,M,k,v=this[n];if(v)w=new Promise((M=v,k=this,function(E,P){M.then(function(){k[a]?E(i(void 0,!0)):k[d](E,P)},P)}));else{var A=this[s].read();if(null!==A)return Promise.resolve(i(A,!1));w=new Promise(this[d])}return this[n]=w,w}},Symbol.asyncIterator,function(){return this}),T(x,"return",function(){var m=this;return new Promise(function(l,w){m[s].destroy(null,function(v){v?w(v):l(i(void 0,!0))})})}),x),p);ae.exports=function(m){var l,w=Object.create(y,(T(l={},s,{value:m,writable:!0}),T(l,e,{value:null,writable:!0}),T(l,r,{value:null,writable:!0}),T(l,t,{value:null,writable:!0}),T(l,a,{value:m._readableState.endEmitted,writable:!0}),T(l,d,{value:function(v,A){var M=w[s].read();M?(w[n]=null,w[e]=null,w[r]=null,v(i(M,!1))):(w[e]=v,w[r]=A)},writable:!0}),l));return w[n]=null,b(m,function(v){if(v&&"ERR_STREAM_PREMATURE_CLOSE"!==v.code){var A=w[r];return null!==A&&(w[n]=null,w[e]=null,w[r]=null,A(v)),void(w[t]=v)}var M=w[e];null!==M&&(w[n]=null,w[e]=null,w[r]=null,M(i(void 0,!0))),w[a]=!0}),m.on("readable",f.bind(null,w)),w}}).call(this)}).call(this,_("_process"))},{"./end-of-stream":295,_process:277}],293:[function(_,ae,ie){"use strict";function g(t,a){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);a&&(d=d.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,d)}return n}function x(t,a,n){return a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}function T(t,a){for(var n=0;n<a.length;n++){var d=a[n];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(t,d.key,d)}}var b=_("buffer").Buffer,e=_("util").inspect,r=e&&e.custom||"inspect";ae.exports=function(){function t(){(function(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}var a,n;return a=t,(n=[{key:"push",value:function(s){var i={data:s,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(s){var i={data:s,next:this.head};0===this.length&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(0!==this.length){var s=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,s}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(s){if(0===this.length)return"";for(var i=this.head,u=""+i.data;i=i.next;)u+=s+i.data;return u}},{key:"concat",value:function(s){if(0===this.length)return b.alloc(0);for(var p=b.allocUnsafe(s>>>0),y=this.head,m=0;y;)b.prototype.copy.call(y.data,p,m),m+=y.data.length,y=y.next;return p}},{key:"consume",value:function(s,i){var u;return s<this.head.data.length?(u=this.head.data.slice(0,s),this.head.data=this.head.data.slice(s)):u=s===this.head.data.length?this.shift():i?this._getString(s):this._getBuffer(s),u}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(s){var i=this.head,u=1,f=i.data;for(s-=f.length;i=i.next;){var p=i.data,y=s>p.length?p.length:s;if(f+=y===p.length?p:p.slice(0,s),0==(s-=y)){y===p.length?(++u,this.head=i.next?i.next:this.tail=null):(this.head=i,i.data=p.slice(y));break}++u}return this.length-=u,f}},{key:"_getBuffer",value:function(s){var i=b.allocUnsafe(s),u=this.head,f=1;for(u.data.copy(i),s-=u.data.length;u=u.next;){var p=u.data,y=s>p.length?p.length:s;if(p.copy(i,i.length-s,0,y),0==(s-=y)){y===p.length?(++f,this.head=u.next?u.next:this.tail=null):(this.head=u,u.data=p.slice(y));break}++f}return this.length-=f,i}},{key:r,value:function(s,i){return e(this,function(u){for(var f=1;f<arguments.length;f++){var p=null!=arguments[f]?arguments[f]:{};f%2?g(Object(p),!0).forEach(function(y){x(u,y,p[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(p)):g(Object(p)).forEach(function(y){Object.defineProperty(u,y,Object.getOwnPropertyDescriptor(p,y))})}return u}({},i,{depth:0,customInspect:!1}))}}])&&T(a.prototype,n),t}()},{buffer:85,util:83}],294:[function(_,ae,ie){(function(g){(function(){"use strict";function x(e,r){b(e,r),T(e)}function T(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function b(e,r){e.emit("error",r)}ae.exports={destroy:function(e,r){var t=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,g.nextTick(b,this,e)):g.nextTick(b,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(d){!r&&d?t._writableState?t._writableState.errorEmitted?g.nextTick(T,t):(t._writableState.errorEmitted=!0,g.nextTick(x,t,d)):g.nextTick(x,t,d):r?(g.nextTick(T,t),r(d)):g.nextTick(T,t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,r){var t=e._readableState,a=e._writableState;t&&t.autoDestroy||a&&a.autoDestroy?e.destroy(r):e.emit("error",r)}}}).call(this)}).call(this,_("_process"))},{_process:277}],295:[function(_,ae,ie){"use strict";var g=_("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function x(){}ae.exports=function T(b,e,r){if("function"==typeof e)return T(b,null,e);var m,l;e||(e={}),m=r||x,l=!1,r=function(){if(!l){l=!0;for(var w=arguments.length,v=new Array(w),A=0;A<w;A++)v[A]=arguments[A];m.apply(this,v)}};var t=e.readable||!1!==e.readable&&b.readable,a=e.writable||!1!==e.writable&&b.writable,n=function(){b.writable||s()},d=b._writableState&&b._writableState.finished,s=function(){a=!1,d=!0,t||r.call(b)},i=b._readableState&&b._readableState.endEmitted,u=function(){t=!1,i=!0,a||r.call(b)},f=function(m){r.call(b,m)},p=function(){var m;return t&&!i?(b._readableState&&b._readableState.ended||(m=new g),r.call(b,m)):a&&!d?(b._writableState&&b._writableState.ended||(m=new g),r.call(b,m)):void 0},y=function(){b.req.on("finish",s)};return function(m){return m.setHeader&&"function"==typeof m.abort}(b)?(b.on("complete",s),b.on("abort",p),b.req?y():b.on("request",y)):a&&!b._writableState&&(b.on("end",n),b.on("close",n)),b.on("end",u),b.on("finish",s),!1!==e.error&&b.on("error",f),b.on("close",p),function(){b.removeListener("complete",s),b.removeListener("abort",p),b.removeListener("request",y),b.req&&b.req.removeListener("finish",s),b.removeListener("end",n),b.removeListener("close",n),b.removeListener("finish",s),b.removeListener("end",u),b.removeListener("error",f),b.removeListener("close",p)}}},{"../../../errors":286}],296:[function(_,ae,ie){ae.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(_,ae,ie){"use strict";var g,x=_("../../../errors").codes,T=x.ERR_MISSING_ARGS,b=x.ERR_STREAM_DESTROYED;function e(d){if(d)throw d}function r(d,s,i,u){var y,m;y=u,m=!1,u=function(){m||(m=!0,y.apply(void 0,arguments))};var f=!1;d.on("close",function(){f=!0}),void 0===g&&(g=_("./end-of-stream")),g(d,{readable:s,writable:i},function(y){if(y)return u(y);f=!0,u()});var p=!1;return function(y){if(!f&&!p)return p=!0,function(m){return m.setHeader&&"function"==typeof m.abort}(d)?d.abort():"function"==typeof d.destroy?d.destroy():void u(y||new b("pipe"))}}function t(d){d()}function a(d,s){return d.pipe(s)}function n(d){return d.length?"function"!=typeof d[d.length-1]?e:d.pop():e}ae.exports=function(){for(var d=arguments.length,s=new Array(d),i=0;i<d;i++)s[i]=arguments[i];var u,f=n(s);if(Array.isArray(s[0])&&(s=s[0]),s.length<2)throw new T("streams");var p=s.map(function(y,m){var l=m<s.length-1;return r(y,l,m>0,function(w){u||(u=w),w&&p.forEach(t),l||(p.forEach(t),f(u))})});return s.reduce(a)}},{"../../../errors":286,"./end-of-stream":295}],298:[function(_,ae,ie){"use strict";var g=_("../../../errors").codes.ERR_INVALID_OPT_VALUE;ae.exports={getHighWaterMark:function(x,T,b,e){var t,r=null!=(t=T).highWaterMark?t.highWaterMark:e?t[b]:null;if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new g(e?b:"highWaterMark",r);return Math.floor(r)}return x.objectMode?16:16384}}},{"../../../errors":286}],299:[function(_,ae,ie){ae.exports=_("events").EventEmitter},{events:84}],300:[function(_,ae,ie){"use strict";var g=_("safe-buffer").Buffer,x=g.isEncoding||function(i){switch((i=""+i)&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function T(i){var u;switch(this.encoding=function(f){var p=function(y){if(!y)return"utf8";for(var m;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(m)return;y=(""+y).toLowerCase(),m=!0}}(f);if("string"!=typeof p&&(g.isEncoding===x||!x(f)))throw new Error("Unknown encoding: "+f);return p||f}(i),this.encoding){case"utf16le":this.text=r,this.end=t,u=4;break;case"utf8":this.fillLast=e,u=4;break;case"base64":this.text=a,this.end=n,u=3;break;default:return this.write=d,void(this.end=s)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(u)}function b(i){return i<=127?0:i>>5==6?2:i>>4==14?3:i>>3==30?4:i>>6==2?-1:-2}function e(i){var u=this.lastTotal-this.lastNeed,f=function(p,y,m){if(128!=(192&y[0]))return p.lastNeed=0,"\ufffd";if(p.lastNeed>1&&y.length>1){if(128!=(192&y[1]))return p.lastNeed=1,"\ufffd";if(p.lastNeed>2&&y.length>2&&128!=(192&y[2]))return p.lastNeed=2,"\ufffd"}}(this,i);return void 0!==f?f:this.lastNeed<=i.length?(i.copy(this.lastChar,u,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(i.copy(this.lastChar,u,0,i.length),void(this.lastNeed-=i.length))}function r(i,u){if((i.length-u)%2==0){var f=i.toString("utf16le",u);if(f){var p=f.charCodeAt(f.length-1);if(p>=55296&&p<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],f.slice(0,-1)}return f}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",u,i.length-1)}function t(i){var u=i&&i.length?this.write(i):"";return this.lastNeed?u+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):u}function a(i,u){var f=(i.length-u)%3;return 0===f?i.toString("base64",u):(this.lastNeed=3-f,this.lastTotal=3,1===f?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",u,i.length-f))}function n(i){var u=i&&i.length?this.write(i):"";return this.lastNeed?u+this.lastChar.toString("base64",0,3-this.lastNeed):u}function d(i){return i.toString(this.encoding)}function s(i){return i&&i.length?this.write(i):""}ie.StringDecoder=T,T.prototype.write=function(i){if(0===i.length)return"";var u,f;if(this.lastNeed){if(void 0===(u=this.fillLast(i)))return"";f=this.lastNeed,this.lastNeed=0}else f=0;return f<i.length?u?u+this.text(i,f):this.text(i,f):u||""},T.prototype.end=function(i){var u=i&&i.length?this.write(i):"";return this.lastNeed?u+"\ufffd":u},T.prototype.text=function(i,u){var f=function(y,m,l){var w=m.length-1;if(w<l)return 0;var v=b(m[w]);return v>=0?(v>0&&(y.lastNeed=v-1),v):--w<l||-2===v?0:(v=b(m[w]))>=0?(v>0&&(y.lastNeed=v-2),v):--w<l||-2===v?0:(v=b(m[w]))>=0?(v>0&&(2===v?v=0:y.lastNeed=v-3),v):0}(this,i,u);if(!this.lastNeed)return i.toString("utf8",u);this.lastTotal=f;var p=i.length-(f-this.lastNeed);return i.copy(this.lastChar,0,p),i.toString("utf8",u,p)},T.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length}},{"safe-buffer":284}],301:[function(_,ae,ie){(function(g,x){(function(){var T=_("assert"),b=_("debug")("stream-parser");function e(f){b("initializing parser stream"),f._parserBytesLeft=0,f._parserBuffers=[],f._parserBuffered=0,f._parserState=-1,f._parserCallback=null,"function"==typeof f.push&&(f._parserOutput=f.push.bind(f)),f._parserInit=!0}function r(f,p){T(!this._parserCallback,'there is already a "callback" set!'),T(isFinite(f)&&f>0,'can only buffer a finite number of bytes > 0, got "'+f+'"'),this._parserInit||e(this),b("buffering %o bytes",f),this._parserBytesLeft=f,this._parserCallback=p,this._parserState=0}function t(f,p){T(!this._parserCallback,'there is already a "callback" set!'),T(f>0,'can only skip > 0 bytes, got "'+f+'"'),this._parserInit||e(this),b("skipping %o bytes",f),this._parserBytesLeft=f,this._parserCallback=p,this._parserState=1}function a(f,p){T(!this._parserCallback,'There is already a "callback" set!'),T(f>0,'can only pass through > 0 bytes, got "'+f+'"'),this._parserInit||e(this),b("passing through %o bytes",f),this._parserBytesLeft=f,this._parserCallback=p,this._parserState=2}function n(f,p,y){this._parserInit||e(this),b("write(%o bytes)",f.length),"function"==typeof p&&(y=p),i(this,f,null,y)}function d(f,p,y){this._parserInit||e(this),b("transform(%o bytes)",f.length),"function"!=typeof p&&(p=this._parserOutput),i(this,f,p,y)}function s(f,p,y,m){if(f._parserBytesLeft-=p.length,b("%o bytes left for stream piece",f._parserBytesLeft),0===f._parserState?(f._parserBuffers.push(p),f._parserBuffered+=p.length):2===f._parserState&&y(p),0!==f._parserBytesLeft)return m;var l=f._parserCallback;if(l&&0===f._parserState&&f._parserBuffers.length>1&&(p=x.concat(f._parserBuffers,f._parserBuffered)),0!==f._parserState&&(p=null),f._parserCallback=null,f._parserBuffered=0,f._parserState=-1,f._parserBuffers.splice(0),l){var w=[];p&&w.push(p),y&&w.push(y);var v=l.length>w.length;v&&w.push(u(m));var A=l.apply(f,w);if(!v||m===A)return m}}ae.exports=function(f){var p=f&&"function"==typeof f._transform;if(!(p||f&&"function"==typeof f._write))throw new Error("must pass a Writable or Transform stream in");b("extending Parser into stream"),f._bytes=r,f._skipBytes=t,p&&(f._passthrough=a),p?f._transform=d:f._write=n};var i=u(function f(p,y,m,l){return p._parserBytesLeft<=0?l(new Error("got data but not currently parsing anything")):y.length<=p._parserBytesLeft?function(){return s(p,y,m,l)}:function(){var w=y.slice(0,p._parserBytesLeft);return s(p,w,m,function(v){return v?l(v):y.length>w.length?function(){return f(p,y.slice(w.length),m,l)}:void 0})}});function u(f){return function(){for(var p=f.apply(this,arguments);"function"==typeof p;)p=p();return p}}}).call(this)}).call(this,_("_process"),_("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(_,ae,ie){(function(g){(function(){function x(){var T;try{T=ie.storage.debug}catch(b){}return!T&&void 0!==g&&"env"in g&&(T=g.env.DEBUG),T}(ie=ae.exports=_("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},ie.formatArgs=function(T){var b=this.useColors;if(T[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+T[0]+(b?"%c ":" ")+"+"+ie.humanize(this.diff),b){var e="color: "+this.color;T.splice(1,0,e,"color: inherit");var r=0,t=0;T[0].replace(/%[a-zA-Z%]/g,function(a){"%%"!==a&&(r++,"%c"===a&&(t=r))}),T.splice(t,0,e)}},ie.save=function(T){try{null==T?ie.storage.removeItem("debug"):ie.storage.debug=T}catch(b){}},ie.load=x,ie.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},ie.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(T){}}(),ie.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],ie.formatters.j=function(T){try{return JSON.stringify(T)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}},ie.enable(x())}).call(this)}).call(this,_("_process"))},{"./debug":303,_process:277}],303:[function(_,ae,ie){var g;function x(T){function b(){if(b.enabled){var e=b,r=+new Date;e.diff=r-(g||r),e.prev=g,e.curr=r,g=r;for(var a=new Array(arguments.length),n=0;n<a.length;n++)a[n]=arguments[n];a[0]=ie.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var d=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(i,u){if("%%"===i)return i;d++;var f=ie.formatters[u];return"function"==typeof f&&(i=f.call(e,a[d]),a.splice(d,1),d--),i}),ie.formatArgs.call(e,a),(b.log||ie.log||console.log.bind(console)).apply(e,a)}}return b.namespace=T,b.enabled=ie.enabled(T),b.useColors=ie.useColors(),b.color=function(e){var r,t=0;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return ie.colors[Math.abs(t)%ie.colors.length]}(T),"function"==typeof ie.init&&ie.init(b),b}(ie=ae.exports=x.debug=x.default=x).coerce=function(T){return T instanceof Error?T.stack||T.message:T},ie.disable=function(){ie.enable("")},ie.enable=function(T){ie.save(T),ie.names=[],ie.skips=[];for(var b=("string"==typeof T?T:"").split(/[\s,]+/),e=b.length,r=0;r<e;r++)b[r]&&("-"===(T=b[r].replace(/\*/g,".*?"))[0]?ie.skips.push(new RegExp("^"+T.substr(1)+"$")):ie.names.push(new RegExp("^"+T+"$")))},ie.enabled=function(T){var b,e;for(b=0,e=ie.skips.length;b<e;b++)if(ie.skips[b].test(T))return!1;for(b=0,e=ie.names.length;b<e;b++)if(ie.names[b].test(T))return!0;return!1},ie.humanize=_("ms"),ie.names=[],ie.skips=[],ie.formatters={}},{ms:304}],304:[function(_,ae,ie){var g=1e3,x=6e4,T=60*x,b=24*T;function e(r,t,a){if(!(r<t))return r<1.5*t?Math.floor(r/t)+" "+a:Math.ceil(r/t)+" "+a+"s"}ae.exports=function(r,t){t=t||{};var a,d,n=typeof r;if("string"===n&&r.length>0)return function(d){if(!((d=String(d)).length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(d);if(s){var i=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*b;case"hours":case"hour":case"hrs":case"hr":case"h":return i*T;case"minutes":case"minute":case"mins":case"min":case"m":return i*x;case"seconds":case"second":case"secs":case"sec":case"s":return i*g;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(r);if("number"===n&&!1===isNaN(r))return t.long?e(a=r,b,"day")||e(a,T,"hour")||e(a,x,"minute")||e(a,g,"second")||a+" ms":(d=r)>=b?Math.round(d/b)+"d":d>=T?Math.round(d/T)+"h":d>=x?Math.round(d/x)+"m":d>=g?Math.round(d/g)+"s":d+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))}},{}],305:[function(_,ae,ie){"use strict";var g=_("parenthesis");ae.exports=function(x,T,b){if(null==x)throw Error("First argument should be a string");if(null==T)throw Error("Separator should be a string or a RegExp");b?("string"==typeof b||Array.isArray(b))&&(b={ignore:b}):b={},null==b.escape&&(b.escape=!0),null==b.ignore?b.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof b.ignore&&(b.ignore=[b.ignore]),b.ignore=b.ignore.map(function(s){return 1===s.length&&(s+=s),s}));var e=g.parse(x,{flat:!0,brackets:b.ignore}),r=e[0].split(T);if(b.escape){for(var t=[],a=0;a<r.length;a++){var n=r[a];"\\"===n[n.length-1]&&"\\"!==n[n.length-2]?(t.push(n+T+r[a+1]),a++):t.push(n)}r=t}for(a=0;a<r.length;a++)e[0]=r[a],r[a]=g.stringify(e,{flat:!0});return r}},{parenthesis:248}],306:[function(_,ae,ie){"use strict";ae.exports=function(g){for(var x=g.length,T=new Array(x),b=new Array(x),e=new Array(x),r=new Array(x),t=new Array(x),a=new Array(x),n=0;n<x;++n)T[n]=-1,b[n]=0,e[n]=!1,r[n]=0,t[n]=-1,a[n]=[];var d,s=0,i=[],u=[];function f(m){var l=[m],w=[m];for(T[m]=b[m]=s,e[m]=!0,s+=1;w.length>0;){var v=g[m=w[w.length-1]];if(r[m]<v.length){for(var A=r[m];A<v.length;++A){var M=v[A];if(T[M]<0){T[M]=b[M]=s,e[M]=!0,s+=1,l.push(M),w.push(M);break}e[M]&&(b[m]=0|Math.min(b[m],b[M])),t[M]>=0&&a[m].push(t[M])}r[m]=A}else{if(b[m]===T[m]){var k=[],E=[],P=0;for(A=l.length-1;A>=0;--A){var S=l[A];if(e[S]=!1,k.push(S),E.push(a[S]),P+=a[S].length,t[S]=i.length,S===m){l.length=A;break}}i.push(k);var F=new Array(P);for(A=0;A<E.length;A++)for(var R=0;R<E[A].length;R++)F[--P]=E[A][R];u.push(F)}w.pop()}}}for(n=0;n<x;++n)T[n]<0&&f(n);for(n=0;n<u.length;n++){var p=u[n];if(0!==p.length){p.sort(function(m,l){return m-l}),d=[p[0]];for(var y=1;y<p.length;y++)p[y]!==p[y-1]&&d.push(p[y]);u[n]=d}}return{components:i,adjacencyList:u}}},{}],307:[function(_,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var x=2*Math.PI,T=function(r,t,a,n,d,s,i){var u=r.x,f=r.y;return{x:n*(u*=t)-d*(f*=a)+s,y:d*u+n*f+i}},b=function(r,t){var a=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),n=Math.cos(r),d=Math.sin(r),s=Math.cos(r+t),i=Math.sin(r+t);return[{x:n-d*a,y:d+n*a},{x:s+i*a,y:i-s*a},{x:s,y:i}]},e=function(r,t,a,n){var d=r*a+t*n;return d>1&&(d=1),d<-1&&(d=-1),(r*n-t*a<0?-1:1)*Math.acos(d)};ie.default=function(r){var t=r.px,a=r.py,n=r.cx,d=r.cy,s=r.rx,i=r.ry,u=r.xAxisRotation,f=void 0===u?0:u,p=r.largeArcFlag,y=void 0===p?0:p,m=r.sweepFlag,l=void 0===m?0:m,w=[];if(0===s||0===i)return[];var v=Math.sin(f*x/360),A=Math.cos(f*x/360),M=A*(t-n)/2+v*(a-d)/2,k=-v*(t-n)/2+A*(a-d)/2;if(0===M&&0===k)return[];s=Math.abs(s),i=Math.abs(i);var E=Math.pow(M,2)/Math.pow(s,2)+Math.pow(k,2)/Math.pow(i,2);E>1&&(s*=Math.sqrt(E),i*=Math.sqrt(E));var S=function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(a,n){var d=[],s=!0,i=!1,u=void 0;try{for(var f,p=a[Symbol.iterator]();!(s=(f=p.next()).done)&&(d.push(f.value),!n||d.length!==n);s=!0);}catch(y){i=!0,u=y}finally{try{!s&&p.return&&p.return()}finally{if(i)throw u}}return d}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(Y,ee,Q,$,K,oe,j,H,G,re,q,te){var ne=Math.pow(K,2),le=Math.pow(oe,2),ue=Math.pow(q,2),de=Math.pow(te,2),he=ne*le-ne*de-le*ue;he<0&&(he=0),he/=ne*de+le*ue;var be=(he=Math.sqrt(he)*(j===H?-1:1))*K/oe*te,ge=he*-oe/K*q,we=re*be-G*ge+(Y+Q)/2,ke=G*be+re*ge+(ee+$)/2,De=(q-be)/K,Ee=(te-ge)/oe,Re=(-q-be)/K,ve=(-te-ge)/oe,Te=e(1,0,De,Ee),Ie=e(De,Ee,Re,ve);return 0===H&&Ie>0&&(Ie-=x),1===H&&Ie<0&&(Ie+=x),[we,ke,Te,Ie]}(t,a,n,d,s,i,y,l,v,A,M,k),4),F=S[0],R=S[1],D=S[2],L=S[3],B=Math.abs(L)/(x/4);Math.abs(1-B)<1e-7&&(B=1);var V=Math.max(Math.ceil(B),1);L/=V;for(var Z=0;Z<V;Z++)w.push(b(D,L)),D+=L;return w.map(function(Y){var ee=T(Y[0],s,i,A,v,F,R),Q=ee.x,$=ee.y,K=T(Y[1],s,i,A,v,F,R),oe=K.x,j=K.y,H=T(Y[2],s,i,A,v,F,R);return{x1:Q,y1:$,x2:oe,y2:j,x:H.x,y:H.y}})},ae.exports=ie.default},{}],308:[function(_,ae,ie){"use strict";var g=_("parse-svg-path"),x=_("abs-svg-path"),T=_("normalize-svg-path"),b=_("is-svg-path"),e=_("assert");ae.exports=function(r){if(Array.isArray(r)&&1===r.length&&"string"==typeof r[0]&&(r=r[0]),"string"==typeof r&&(e(b(r),"String is not an SVG path."),r=g(r)),e(Array.isArray(r),"Argument should be a string or an array of path segments."),r=x(r),!(r=T(r)).length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],a=0,n=r.length;a<n;a++)for(var d=r[a].slice(1),s=0;s<d.length;s+=2)d[s+0]<t[0]&&(t[0]=d[s+0]),d[s+1]<t[1]&&(t[1]=d[s+1]),d[s+0]>t[2]&&(t[2]=d[s+0]),d[s+1]>t[3]&&(t[3]=d[s+1]);return t}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(_,ae,ie){"use strict";ae.exports=function(b){for(var e,r=[],t=0,a=0,n=0,d=0,s=null,i=null,u=0,f=0,p=0,y=b.length;p<y;p++){var m=b[p],l=m[0];switch(l){case"M":n=m[1],d=m[2];break;case"A":var w=g({px:u,py:f,cx:m[6],cy:m[7],rx:m[1],ry:m[2],xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5]});if(!w.length)continue;for(var v,A=0;A<w.length;A++)m=["C",(v=w[A]).x1,v.y1,v.x2,v.y2,v.x,v.y],A<w.length-1&&r.push(m);break;case"S":var M=u,k=f;"C"!=e&&"S"!=e||(M+=M-t,k+=k-a),m=["C",M,k,m[1],m[2],m[3],m[4]];break;case"T":"Q"==e||"T"==e?(s=2*u-s,i=2*f-i):(s=u,i=f),m=T(u,f,s,i,m[1],m[2]);break;case"Q":s=m[1],i=m[2],m=T(u,f,m[1],m[2],m[3],m[4]);break;case"L":m=x(u,f,m[1],m[2]);break;case"H":m=x(u,f,m[1],f);break;case"V":m=x(u,f,u,m[1]);break;case"Z":m=x(u,f,n,d)}e=l,u=m[m.length-2],f=m[m.length-1],m.length>4?(t=m[m.length-4],a=m[m.length-3]):(t=u,a=f),r.push(m)}return r};var g=_("svg-arc-to-cubic-bezier");function x(b,e,r,t){return["C",b,e,r,t,r,t]}function T(b,e,r,t,a,n){return["C",b/3+2/3*r,e/3+2/3*t,a/3+2/3*r,n/3+2/3*t,a,n]}},{"svg-arc-to-cubic-bezier":307}],310:[function(_,ae,ie){"use strict";var g,x=_("svg-path-bounds"),T=_("parse-svg-path"),b=_("draw-svg-path"),e=_("is-svg-path"),r=_("bitmap-sdf"),t=document.createElement("canvas"),a=t.getContext("2d");ae.exports=function(n,d){if(!e(n))throw Error("Argument should be valid svg path string");var s,i;d||(d={}),d.shape?(s=d.shape[0],i=d.shape[1]):(s=t.width=d.w||d.width||200,i=t.height=d.h||d.height||200);var u=Math.min(s,i),f=d.stroke||0,p=d.viewbox||d.viewBox||x(n),y=[s/(p[2]-p[0]),i/(p[3]-p[1])],m=Math.min(y[0]||0,y[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,s,i),a.fillStyle="white",f&&("number"!=typeof f&&(f=1),a.strokeStyle=f>0?"white":"black",a.lineWidth=Math.abs(f)),a.translate(.5*s,.5*i),a.scale(m,m),function(){if(null!=g)return g;var v=document.createElement("canvas").getContext("2d");if(v.canvas.width=v.canvas.height=1,!window.Path2D)return g=!1;var A=new Path2D("M0,0h1v1h-1v-1Z");v.fillStyle="black",v.fill(A);var M=v.getImageData(0,0,1,1);return g=M&&M.data&&255===M.data[3]}()){var l=new Path2D(n);a.fill(l),f&&a.stroke(l)}else{var w=T(n);b(a,w),a.fill(),f&&a.stroke()}return a.setTransform(1,0,0,1,0,0),r(a,{cutoff:null!=d.cutoff?d.cutoff:.5,radius:null!=d.radius?d.radius:.5*u})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(_,ae,ie){(function(g,x){(function(){var T=_("process/browser.js").nextTick,b=Function.prototype.apply,e=Array.prototype.slice,r={},t=0;function a(n,d){this._id=n,this._clearFn=d}ie.setTimeout=function(){return new a(b.call(setTimeout,window,arguments),clearTimeout)},ie.setInterval=function(){return new a(b.call(setInterval,window,arguments),clearInterval)},ie.clearTimeout=ie.clearInterval=function(n){n.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},ie.enroll=function(n,d){clearTimeout(n._idleTimeoutId),n._idleTimeout=d},ie.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},ie._unrefActive=ie.active=function(n){clearTimeout(n._idleTimeoutId);var d=n._idleTimeout;d>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},d))},ie.setImmediate="function"==typeof g?g:function(n){var d=t++,s=!(arguments.length<2)&&e.call(arguments,1);return r[d]=!0,T(function(){r[d]&&(s?n.apply(null,s):n.call(null),ie.clearImmediate(d))}),d},ie.clearImmediate="function"==typeof x?x:function(n){delete r[n]}}).call(this)}).call(this,_("timers").setImmediate,_("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(_,ae,ie){!function(g){var x=/^\s+/,T=/\s+$/,b=0,e=g.round,r=g.min,t=g.max,a=g.random;function n(G,re){if(re=re||{},(G=G||"")instanceof n)return G;if(!(this instanceof n))return new n(G,re);var te,ke,De,ne,le,ue,de,he,be,ge,q=(ne={r:0,g:0,b:0},le=1,ue=null,de=null,he=null,be=!1,ge=!1,"string"==typeof(te=G)&&(te=function(Ee){Ee=Ee.replace(x,"").replace(T,"").toLowerCase();var Re,ve=!1;if(F[Ee])Ee=F[Ee],ve=!0;else if("transparent"==Ee)return{r:0,g:0,b:0,a:0,format:"name"};return(Re=j.rgb.exec(Ee))?{r:Re[1],g:Re[2],b:Re[3]}:(Re=j.rgba.exec(Ee))?{r:Re[1],g:Re[2],b:Re[3],a:Re[4]}:(Re=j.hsl.exec(Ee))?{h:Re[1],s:Re[2],l:Re[3]}:(Re=j.hsla.exec(Ee))?{h:Re[1],s:Re[2],l:Re[3],a:Re[4]}:(Re=j.hsv.exec(Ee))?{h:Re[1],s:Re[2],v:Re[3]}:(Re=j.hsva.exec(Ee))?{h:Re[1],s:Re[2],v:Re[3],a:Re[4]}:(Re=j.hex8.exec(Ee))?{r:V(Re[1]),g:V(Re[2]),b:V(Re[3]),a:Q(Re[4]),format:ve?"name":"hex8"}:(Re=j.hex6.exec(Ee))?{r:V(Re[1]),g:V(Re[2]),b:V(Re[3]),format:ve?"name":"hex"}:(Re=j.hex4.exec(Ee))?{r:V(Re[1]+""+Re[1]),g:V(Re[2]+""+Re[2]),b:V(Re[3]+""+Re[3]),a:Q(Re[4]+""+Re[4]),format:ve?"name":"hex8"}:!!(Re=j.hex3.exec(Ee))&&{r:V(Re[1]+""+Re[1]),g:V(Re[2]+""+Re[2]),b:V(Re[3]+""+Re[3]),format:ve?"name":"hex"}}(te)),"object"==typeof te&&(H(te.r)&&H(te.g)&&H(te.b)?(ke=te.g,De=te.b,ne={r:255*L(te.r,255),g:255*L(ke,255),b:255*L(De,255)},be=!0,ge="%"===String(te.r).substr(-1)?"prgb":"rgb"):H(te.h)&&H(te.s)&&H(te.v)?(ue=Y(te.s),de=Y(te.v),ne=function(Ee,Re,ve){Ee=6*L(Ee,360),Re=L(Re,100),ve=L(ve,100);var Te=g.floor(Ee),Ie=Ee-Te,Ce=ve*(1-Re),Pe=ve*(1-Ie*Re),Ve=ve*(1-(1-Ie)*Re),qe=Te%6;return{r:255*[ve,Pe,Ce,Ce,Ve,ve][qe],g:255*[Ve,ve,ve,Pe,Ce,Ce][qe],b:255*[Ce,Ce,Ve,ve,ve,Pe][qe]}}(te.h,ue,de),be=!0,ge="hsv"):H(te.h)&&H(te.s)&&H(te.l)&&(ue=Y(te.s),he=Y(te.l),ne=function(Ee,Re,ve){var Te,Ie,Ce;function Pe(Je,lt,He){return He<0&&(He+=1),He>1&&(He-=1),He<1/6?Je+6*(lt-Je)*He:He<.5?lt:He<2/3?Je+(lt-Je)*(2/3-He)*6:Je}if(Ee=L(Ee,360),Re=L(Re,100),ve=L(ve,100),0===Re)Te=Ie=Ce=ve;else{var Ve=ve<.5?ve*(1+Re):ve+Re-ve*Re,qe=2*ve-Ve;Te=Pe(qe,Ve,Ee+1/3),Ie=Pe(qe,Ve,Ee),Ce=Pe(qe,Ve,Ee-1/3)}return{r:255*Te,g:255*Ie,b:255*Ce}}(te.h,ue,he),be=!0,ge="hsl"),te.hasOwnProperty("a")&&(le=te.a)),le=D(le),{ok:be,format:te.format||ge,r:r(255,t(ne.r,0)),g:r(255,t(ne.g,0)),b:r(255,t(ne.b,0)),a:le});this._originalInput=G,this._r=q.r,this._g=q.g,this._b=q.b,this._a=q.a,this._roundA=e(100*this._a)/100,this._format=re.format||q.format,this._gradientType=re.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=q.ok,this._tc_id=b++}function d(G,re,q){G=L(G,255),re=L(re,255),q=L(q,255);var te,ne,le=t(G,re,q),ue=r(G,re,q),de=(le+ue)/2;if(le==ue)te=ne=0;else{var he=le-ue;switch(ne=de>.5?he/(2-le-ue):he/(le+ue),le){case G:te=(re-q)/he+(re<q?6:0);break;case re:te=(q-G)/he+2;break;case q:te=(G-re)/he+4}te/=6}return{h:te,s:ne,l:de}}function s(G,re,q){G=L(G,255),re=L(re,255),q=L(q,255);var te,ne,le=t(G,re,q),ue=r(G,re,q),de=le,he=le-ue;if(ne=0===le?0:he/le,le==ue)te=0;else{switch(le){case G:te=(re-q)/he+(re<q?6:0);break;case re:te=(q-G)/he+2;break;case q:te=(G-re)/he+4}te/=6}return{h:te,s:ne,v:de}}function i(G,re,q,te){var ne=[Z(e(G).toString(16)),Z(e(re).toString(16)),Z(e(q).toString(16))];return te&&ne[0].charAt(0)==ne[0].charAt(1)&&ne[1].charAt(0)==ne[1].charAt(1)&&ne[2].charAt(0)==ne[2].charAt(1)?ne[0].charAt(0)+ne[1].charAt(0)+ne[2].charAt(0):ne.join("")}function u(G,re,q,te){return[Z(ee(te)),Z(e(G).toString(16)),Z(e(re).toString(16)),Z(e(q).toString(16))].join("")}function f(G,re){re=0===re?0:re||10;var q=n(G).toHsl();return q.s-=re/100,q.s=B(q.s),n(q)}function p(G,re){re=0===re?0:re||10;var q=n(G).toHsl();return q.s+=re/100,q.s=B(q.s),n(q)}function y(G){return n(G).desaturate(100)}function m(G,re){re=0===re?0:re||10;var q=n(G).toHsl();return q.l+=re/100,q.l=B(q.l),n(q)}function l(G,re){re=0===re?0:re||10;var q=n(G).toRgb();return q.r=t(0,r(255,q.r-e(-re/100*255))),q.g=t(0,r(255,q.g-e(-re/100*255))),q.b=t(0,r(255,q.b-e(-re/100*255))),n(q)}function w(G,re){re=0===re?0:re||10;var q=n(G).toHsl();return q.l-=re/100,q.l=B(q.l),n(q)}function v(G,re){var q=n(G).toHsl(),te=(q.h+re)%360;return q.h=te<0?360+te:te,n(q)}function A(G){var re=n(G).toHsl();return re.h=(re.h+180)%360,n(re)}function M(G){var re=n(G).toHsl(),q=re.h;return[n(G),n({h:(q+120)%360,s:re.s,l:re.l}),n({h:(q+240)%360,s:re.s,l:re.l})]}function k(G){var re=n(G).toHsl(),q=re.h;return[n(G),n({h:(q+90)%360,s:re.s,l:re.l}),n({h:(q+180)%360,s:re.s,l:re.l}),n({h:(q+270)%360,s:re.s,l:re.l})]}function E(G){var re=n(G).toHsl(),q=re.h;return[n(G),n({h:(q+72)%360,s:re.s,l:re.l}),n({h:(q+216)%360,s:re.s,l:re.l})]}function P(G,re,q){re=re||6,q=q||30;var te=n(G).toHsl(),ne=360/q,le=[n(G)];for(te.h=(te.h-(ne*re>>1)+720)%360;--re;)te.h=(te.h+ne)%360,le.push(n(te));return le}function S(G,re){re=re||6;for(var q=n(G).toHsv(),te=q.h,ne=q.s,le=q.v,ue=[],de=1/re;re--;)ue.push(n({h:te,s:ne,v:le})),le=(le+de)%1;return ue}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var G=this.toRgb();return(299*G.r+587*G.g+114*G.b)/1e3},getLuminance:function(){var G,re,q,te=this.toRgb();return re=te.g/255,q=te.b/255,.2126*((G=te.r/255)<=.03928?G/12.92:g.pow((G+.055)/1.055,2.4))+.7152*(re<=.03928?re/12.92:g.pow((re+.055)/1.055,2.4))+.0722*(q<=.03928?q/12.92:g.pow((q+.055)/1.055,2.4))},setAlpha:function(G){return this._a=D(G),this._roundA=e(100*this._a)/100,this},toHsv:function(){var G=s(this._r,this._g,this._b);return{h:360*G.h,s:G.s,v:G.v,a:this._a}},toHsvString:function(){var G=s(this._r,this._g,this._b),re=e(360*G.h),q=e(100*G.s),te=e(100*G.v);return 1==this._a?"hsv("+re+", "+q+"%, "+te+"%)":"hsva("+re+", "+q+"%, "+te+"%, "+this._roundA+")"},toHsl:function(){var G=d(this._r,this._g,this._b);return{h:360*G.h,s:G.s,l:G.l,a:this._a}},toHslString:function(){var G=d(this._r,this._g,this._b),re=e(360*G.h),q=e(100*G.s),te=e(100*G.l);return 1==this._a?"hsl("+re+", "+q+"%, "+te+"%)":"hsla("+re+", "+q+"%, "+te+"%, "+this._roundA+")"},toHex:function(G){return i(this._r,this._g,this._b,G)},toHexString:function(G){return"#"+this.toHex(G)},toHex8:function(G){return q=this._g,te=this._b,ne=this._a,le=G,ue=[Z(e(this._r).toString(16)),Z(e(q).toString(16)),Z(e(te).toString(16)),Z(ee(ne))],le&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("");var q,te,ne,le,ue},toHex8String:function(G){return"#"+this.toHex8(G)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*L(this._r,255))+"%",g:e(100*L(this._g,255))+"%",b:e(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*L(this._r,255))+"%, "+e(100*L(this._g,255))+"%, "+e(100*L(this._b,255))+"%)":"rgba("+e(100*L(this._r,255))+"%, "+e(100*L(this._g,255))+"%, "+e(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(R[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(G){var re="#"+u(this._r,this._g,this._b,this._a),q=re,te=this._gradientType?"GradientType = 1, ":"";if(G){var ne=n(G);q="#"+u(ne._r,ne._g,ne._b,ne._a)}return"progid:DXImageTransform.Microsoft.gradient("+te+"startColorstr="+re+",endColorstr="+q+")"},toString:function(G){var re=!!G;G=G||this._format;var q=!1;return re||!(this._a<1&&this._a>=0)||"hex"!==G&&"hex6"!==G&&"hex3"!==G&&"hex4"!==G&&"hex8"!==G&&"name"!==G?("rgb"===G&&(q=this.toRgbString()),"prgb"===G&&(q=this.toPercentageRgbString()),"hex"!==G&&"hex6"!==G||(q=this.toHexString()),"hex3"===G&&(q=this.toHexString(!0)),"hex4"===G&&(q=this.toHex8String(!0)),"hex8"===G&&(q=this.toHex8String()),"name"===G&&(q=this.toName()),"hsl"===G&&(q=this.toHslString()),"hsv"===G&&(q=this.toHsvString()),q||this.toHexString()):"name"===G&&0===this._a?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(G,re){var q=G.apply(null,[this].concat([].slice.call(re)));return this._r=q._r,this._g=q._g,this._b=q._b,this.setAlpha(q._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(l,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(G,re){return G.apply(null,[this].concat([].slice.call(re)))},analogous:function(){return this._applyCombination(P,arguments)},complement:function(){return this._applyCombination(A,arguments)},monochromatic:function(){return this._applyCombination(S,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},n.fromRatio=function(G,re){if("object"==typeof G){var q={};for(var te in G)G.hasOwnProperty(te)&&(q[te]="a"===te?G[te]:Y(G[te]));G=q}return n(G,re)},n.equals=function(G,re){return!(!G||!re)&&n(G).toRgbString()==n(re).toRgbString()},n.random=function(){return n.fromRatio({r:a(),g:a(),b:a()})},n.mix=function(G,re,q){q=0===q?0:q||50;var te=n(G).toRgb(),ne=n(re).toRgb(),le=q/100;return n({r:(ne.r-te.r)*le+te.r,g:(ne.g-te.g)*le+te.g,b:(ne.b-te.b)*le+te.b,a:(ne.a-te.a)*le+te.a})},n.readability=function(G,re){var q=n(G),te=n(re);return(g.max(q.getLuminance(),te.getLuminance())+.05)/(g.min(q.getLuminance(),te.getLuminance())+.05)},n.isReadable=function(G,re,q){var te,ne,ue,de,he,le=n.readability(G,re);switch(ne=!1,(ue=q,"AA"!==(de=((ue=ue||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==de&&(de="AA"),"small"!==(he=(ue.size||"small").toLowerCase())&&"large"!==he&&(he="small"),te={level:de,size:he}).level+te.size){case"AAsmall":case"AAAlarge":ne=le>=4.5;break;case"AAlarge":ne=le>=3;break;case"AAAsmall":ne=le>=7}return ne},n.mostReadable=function(G,re,q){var te,ne,le,ue,de=null,he=0;ne=(q=q||{}).includeFallbackColors,le=q.level,ue=q.size;for(var be=0;be<re.length;be++)(te=n.readability(G,re[be]))>he&&(he=te,de=n(re[be]));return n.isReadable(G,de,{level:le,size:ue})||!ne?de:(q.includeFallbackColors=!1,n.mostReadable(G,["#fff","#000"],q))};var F=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=n.hexNames=function(G){var re={};for(var q in G)G.hasOwnProperty(q)&&(re[G[q]]=q);return re}(F);function D(G){return G=parseFloat(G),(isNaN(G)||G<0||G>1)&&(G=1),G}function L(G,re){var te;"string"==typeof(te=G)&&-1!=te.indexOf(".")&&1===parseFloat(te)&&(G="100%");var q=function(te){return"string"==typeof te&&-1!=te.indexOf("%")}(G);return G=r(re,t(0,parseFloat(G))),q&&(G=parseInt(G*re,10)/100),g.abs(G-re)<1e-6?1:G%re/parseFloat(re)}function B(G){return r(1,t(0,G))}function V(G){return parseInt(G,16)}function Z(G){return 1==G.length?"0"+G:""+G}function Y(G){return G<=1&&(G=100*G+"%"),G}function ee(G){return g.round(255*parseFloat(G)).toString(16)}function Q(G){return V(G)/255}var $,K,oe,j=(K="[\\s|\\(]+("+($="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+$+")[,|\\s]+("+$+")\\s*\\)?",oe="[\\s|\\(]+("+$+")[,|\\s]+("+$+")[,|\\s]+("+$+")[,|\\s]+("+$+")\\s*\\)?",{CSS_UNIT:new RegExp($),rgb:new RegExp("rgb"+K),rgba:new RegExp("rgba"+oe),hsl:new RegExp("hsl"+K),hsla:new RegExp("hsla"+oe),hsv:new RegExp("hsv"+K),hsva:new RegExp("hsva"+oe),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(G){return!!j.CSS_UNIT.exec(G)}void 0!==ae&&ae.exports?ae.exports=n:window.tinycolor=n}(Math)},{}],313:[function(_,ae,ie){"use strict";ae.exports=x,ae.exports.float32=ae.exports.float=x,ae.exports.fract32=ae.exports.fract=function(T,b){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);b instanceof Float32Array||(b=x(T));for(var e=0,r=b.length;e<r;e++)b[e]=T[e]-b[e];return b}return x(T-x(T))};var g=new Float32Array(1);function x(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(g[0]=T,g[0])}},{}],314:[function(_,ae,ie){"use strict";var g=_("parse-unit");function x(b,e){var r=g(getComputedStyle(b).getPropertyValue(e));return r[0]*T(r[1],b)}function T(b,e){switch(e=e||document.body,b=(b||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),b){case"%":return e.clientHeight/100;case"ch":case"ex":return function(r,t){var a=document.createElement("div");a.style["font-size"]="128"+r,t.appendChild(a);var n=x(a,"font-size")/128;return t.removeChild(a),n}(b,e);case"em":return x(e,"font-size");case"rem":return x(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}ae.exports=T},{"parse-unit":251}],315:[function(_,ae,ie){var g,x;g=this,x=function(g){"use strict";function x(u){return u}function T(u){if(null==u)return x;var f,p,y=u.scale[0],m=u.scale[1],l=u.translate[0],w=u.translate[1];return function(v,A){A||(f=p=0);var M=2,k=v.length,E=new Array(k);for(E[0]=(f+=v[0])*y+l,E[1]=(p+=v[1])*m+w;M<k;)E[M]=v[M],++M;return E}}function b(u){var f,p=T(u.transform),y=1/0,m=y,l=-y,w=-y;function v(M){(M=p(M))[0]<y&&(y=M[0]),M[0]>l&&(l=M[0]),M[1]<m&&(m=M[1]),M[1]>w&&(w=M[1])}function A(M){switch(M.type){case"GeometryCollection":M.geometries.forEach(A);break;case"Point":v(M.coordinates);break;case"MultiPoint":M.coordinates.forEach(v)}}for(f in u.arcs.forEach(function(M){for(var k,E=-1,P=M.length;++E<P;)(k=p(M[E],E))[0]<y&&(y=k[0]),k[0]>l&&(l=k[0]),k[1]<m&&(m=k[1]),k[1]>w&&(w=k[1])}),u.objects)A(u.objects[f]);return[y,m,l,w]}function e(u,f){var p=f.id,y=f.bbox,m=null==f.properties?{}:f.properties,l=r(u,f);return null==p&&null==y?{type:"Feature",properties:m,geometry:l}:null==y?{type:"Feature",id:p,properties:m,geometry:l}:{type:"Feature",id:p,bbox:y,properties:m,geometry:l}}function r(u,f){var p=T(u.transform),y=u.arcs;function m(M,k){k.length&&k.pop();for(var E=y[M<0?~M:M],P=0,S=E.length;P<S;++P)k.push(p(E[P],P));M<0&&function(F,R){for(var D,L=F.length,B=L-R;B<--L;)D=F[B],F[B++]=F[L],F[L]=D}(k,S)}function l(M){return p(M)}function w(M){for(var k=[],E=0,P=M.length;E<P;++E)m(M[E],k);return k.length<2&&k.push(k[0]),k}function v(M){for(var k=w(M);k.length<4;)k.push(k[0]);return k}function A(M){return M.map(v)}return function M(k){var E,P=k.type;switch(P){case"GeometryCollection":return{type:P,geometries:k.geometries.map(M)};case"Point":E=l(k.coordinates);break;case"MultiPoint":E=k.coordinates.map(l);break;case"LineString":E=w(k.arcs);break;case"MultiLineString":E=k.arcs.map(w);break;case"Polygon":E=A(k.arcs);break;case"MultiPolygon":E=k.arcs.map(A);break;default:return null}return{type:P,coordinates:E}}(f)}function t(u,f){var p={},y={},m={},l=[],w=-1;function v(A,M){for(var k in A){var E=A[k];delete M[E.start],delete E.start,delete E.end,E.forEach(function(P){p[P<0?~P:P]=1}),l.push(E)}}return f.forEach(function(A,M){var k,E=u.arcs[A<0?~A:A];E.length<3&&!E[1][0]&&!E[1][1]&&(k=f[++w],f[w]=A,f[M]=k)}),f.forEach(function(A){var M,k,D,L,B,V,E=(V=(B=u.arcs[(D=A)<0?~D:D])[0],u.transform?(L=[0,0],B.forEach(function(Z){L[0]+=Z[0],L[1]+=Z[1]})):L=B[B.length-1],D<0?[L,V]:[V,L]),P=E[0],S=E[1];if(M=m[P])if(delete m[M.end],M.push(A),M.end=S,k=y[S]){delete y[k.start];var F=k===M?M:M.concat(k);y[F.start=M.start]=m[F.end=k.end]=F}else y[M.start]=m[M.end]=M;else if(M=y[S])if(delete y[M.start],M.unshift(A),M.start=P,k=m[P]){delete m[k.end];var R=k===M?M:k.concat(M);y[R.start=k.start]=m[R.end=M.end]=R}else y[M.start]=m[M.end]=M;else y[(M=[A]).start=P]=m[M.end=S]=M}),v(m,y),v(y,m),f.forEach(function(A){p[A<0?~A:A]||l.push([A])}),l}function a(u,f,p){var y,m,l;if(arguments.length>1)y=n(0,f,p);else for(m=0,y=new Array(l=u.arcs.length);m<l;++m)y[m]=m;return{type:"MultiLineString",arcs:t(u,y)}}function n(u,f,p){var y,m=[],l=[];function w(M){var k=M<0?~M:M;(l[k]||(l[k]=[])).push({i:M,g:y})}function v(M){M.forEach(w)}function A(M){M.forEach(v)}return function M(k){switch(y=k,k.type){case"GeometryCollection":k.geometries.forEach(M);break;case"LineString":v(k.arcs);break;case"MultiLineString":case"Polygon":A(k.arcs);break;case"MultiPolygon":k.arcs.forEach(A)}}(f),l.forEach(null==p?function(M){m.push(M[0].i)}:function(M){p(M[0].g,M[M.length-1].g)&&m.push(M[0].i)}),m}function d(u,f){var p={},y=[],m=[];function l(v){v.forEach(function(A){A.forEach(function(M){(p[M=M<0?~M:M]||(p[M]=[])).push(v)})}),y.push(v)}function w(v){return function(A){for(var M,k=-1,E=A.length,P=A[E-1],S=0;++k<E;)S+=(M=P)[0]*(P=A[k])[1]-M[1]*P[0];return Math.abs(S)}(r(u,{type:"Polygon",arcs:[v]}).coordinates[0])}return f.forEach(function v(A){switch(A.type){case"GeometryCollection":A.geometries.forEach(v);break;case"Polygon":l(A.arcs);break;case"MultiPolygon":A.arcs.forEach(l)}}),y.forEach(function(v){if(!v._){var A=[],M=[v];for(v._=1,m.push(A);v=M.pop();)A.push(v),v.forEach(function(k){k.forEach(function(E){p[E<0?~E:E].forEach(function(P){P._||(P._=1,M.push(P))})})})}}),y.forEach(function(v){delete v._}),{type:"MultiPolygon",arcs:m.map(function(v){var A,M=[];if(v.forEach(function(F){F.forEach(function(R){R.forEach(function(D){p[D<0?~D:D].length<2&&M.push(D)})})}),(A=(M=t(u,M)).length)>1)for(var k,E,P=1,S=w(M[0]);P<A;++P)(k=w(M[P]))>S&&(E=M[0],M[0]=M[P],M[P]=E,S=k);return M}).filter(function(v){return v.length>0})}}function s(u,f){for(var p=0,y=u.length;p<y;){var m=p+y>>>1;u[m]<f?p=m+1:y=m}return p}function i(u){if(null==u)return x;var f,p,y=u.scale[0],m=u.scale[1],l=u.translate[0],w=u.translate[1];return function(v,A){A||(f=p=0);var M=2,k=v.length,E=new Array(k),P=Math.round((v[0]-l)/y),S=Math.round((v[1]-w)/m);for(E[0]=P-f,f=P,E[1]=S-p,p=S;M<k;)E[M]=v[M],++M;return E}}g.bbox=b,g.feature=function(u,f){return"string"==typeof f&&(f=u.objects[f]),"GeometryCollection"===f.type?{type:"FeatureCollection",features:f.geometries.map(function(p){return e(u,p)})}:e(u,f)},g.merge=function(u){return r(u,d.apply(this,arguments))},g.mergeArcs=d,g.mesh=function(u){return r(u,a.apply(this,arguments))},g.meshArcs=a,g.neighbors=function(u){var f={},p=u.map(function(){return[]});function y(F,R){F.forEach(function(D){D<0&&(D=~D);var L=f[D];L?L.push(R):f[D]=[R]})}function m(F,R){F.forEach(function(D){y(D,R)})}var l={LineString:y,MultiLineString:m,Polygon:m,MultiPolygon:function(F,R){F.forEach(function(D){m(D,R)})}};for(var w in u.forEach(function F(R,D){"GeometryCollection"===R.type?R.geometries.forEach(function(L){F(L,D)}):R.type in l&&l[R.type](R.arcs,D)}),f)for(var v=f[w],A=v.length,M=0;M<A;++M)for(var k=M+1;k<A;++k){var E,P=v[M],S=v[k];(E=p[P])[w=s(E,S)]!==S&&E.splice(w,0,S),(E=p[S])[w=s(E,P)]!==P&&E.splice(w,0,P)}return p},g.quantize=function(u,f){if(u.transform)throw new Error("already quantized");if(f&&f.scale)v=u.bbox;else{if(!((p=Math.floor(f))>=2))throw new Error("n must be \u22652");var p,y=(v=u.bbox||b(u))[0],m=v[1],l=v[2],w=v[3];f={scale:[l-y?(l-y)/(p-1):1,w-m?(w-m)/(p-1):1],translate:[y,m]}}var v,A,M=i(f),k=u.objects,E={};function P(F){return M(F)}function S(F){var R;switch(F.type){case"GeometryCollection":R={type:"GeometryCollection",geometries:F.geometries.map(S)};break;case"Point":R={type:"Point",coordinates:P(F.coordinates)};break;case"MultiPoint":R={type:"MultiPoint",coordinates:F.coordinates.map(P)};break;default:return F}return null!=F.id&&(R.id=F.id),null!=F.bbox&&(R.bbox=F.bbox),null!=F.properties&&(R.properties=F.properties),R}for(A in k)E[A]=S(k[A]);return{type:"Topology",bbox:v,transform:f,objects:E,arcs:u.arcs.map(function(F){var R,D=0,L=1,B=F.length,V=new Array(B);for(V[0]=M(F[0],0);++D<B;)((R=M(F[D],D))[0]||R[1])&&(V[L++]=R);return 1===L&&(V[L++]=[0,0]),V.length=L,V})}},g.transform=T,g.untransform=i,Object.defineProperty(g,"__esModule",{value:!0})},x("object"==typeof ie&&void 0!==ae?ie:(g=g||self).topojson=g.topojson||{})},{}],316:[function(_,ae,ie){"use strict";var g=_("../prototype/is");ae.exports=function(x){if("function"!=typeof x||!hasOwnProperty.call(x,"length"))return!1;try{if("number"!=typeof x.length||"function"!=typeof x.call||"function"!=typeof x.apply)return!1}catch(T){return!1}return!g(x)}},{"../prototype/is":323}],317:[function(_,ae,ie){"use strict";var g=_("../value/is"),x=_("../object/is"),T=_("../string/coerce"),b=_("./to-short-string"),e=function(r,t){return r.replace("%v",b(t))};ae.exports=function(r,t,a){if(!x(a))throw new TypeError(e(t,r));if(!g(r)){if("default"in a)return a.default;if(a.isOptional)return null}var n=T(a.errorMessage);throw g(n)||(n=t),new TypeError(e(n,r))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(_,ae,ie){"use strict";ae.exports=function(g){try{return g.toString()}catch(x){try{return String(g)}catch(T){return null}}}},{}],319:[function(_,ae,ie){"use strict";var g=_("./safe-to-string"),x=/[\n\r\u2028\u2029]/g;ae.exports=function(T){var b=g(T);return null===b?"<Non-coercible to string value>":(b.length>100&&(b=b.slice(0,99)+"\u2026"),b=b.replace(x,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":318}],320:[function(_,ae,ie){"use strict";var g=_("../value/is"),x={object:!0,function:!0,undefined:!0};ae.exports=function(T){return!!g(T)&&hasOwnProperty.call(x,typeof T)}},{"../value/is":326}],321:[function(_,ae,ie){"use strict";var g=_("../lib/resolve-exception"),x=_("./is");ae.exports=function(T){return x(T)?T:g(T,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(_,ae,ie){"use strict";var g=_("../function/is"),x=/^\s*class[\s{/}]/,T=Function.prototype.toString;ae.exports=function(b){return!!g(b)&&!x.test(T.call(b))}},{"../function/is":316}],323:[function(_,ae,ie){"use strict";var g=_("../object/is");ae.exports=function(x){if(!g(x))return!1;try{return!!x.constructor&&x.constructor.prototype===x}catch(T){return!1}}},{"../object/is":320}],324:[function(_,ae,ie){"use strict";var g=_("../value/is"),x=_("../object/is"),T=Object.prototype.toString;ae.exports=function(b){if(!g(b))return null;if(x(b)){var e=b.toString;if("function"!=typeof e||e===T)return null}try{return""+b}catch(r){return null}}},{"../object/is":320,"../value/is":326}],325:[function(_,ae,ie){"use strict";var g=_("../lib/resolve-exception"),x=_("./is");ae.exports=function(T){return x(T)?T:g(T,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(_,ae,ie){"use strict";ae.exports=function(g){return null!=g}},{}],327:[function(_,ae,ie){(function(g){(function(){"use strict";var x=_("bit-twiddle"),T=_("dup"),b=_("buffer").Buffer;g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:T([32,0]),UINT16:T([32,0]),UINT32:T([32,0]),BIGUINT64:T([32,0]),INT8:T([32,0]),INT16:T([32,0]),INT32:T([32,0]),BIGINT64:T([32,0]),FLOAT:T([32,0]),DOUBLE:T([32,0]),DATA:T([32,0]),UINT8C:T([32,0]),BUFFER:T([32,0])});var e="undefined"!=typeof Uint8ClampedArray,r="undefined"!=typeof BigUint64Array,t="undefined"!=typeof BigInt64Array,a=g.__TYPEDARRAY_POOL;a.UINT8C||(a.UINT8C=T([32,0])),a.BIGUINT64||(a.BIGUINT64=T([32,0])),a.BIGINT64||(a.BIGINT64=T([32,0])),a.BUFFER||(a.BUFFER=T([32,0]));var n=a.DATA,d=a.BUFFER;function s(S){if(S){var R=x.log2(S.length||S.byteLength);n[R].push(S)}}function i(S){S=x.nextPow2(S);var F=x.log2(S),R=n[F];return R.length>0?R.pop():new ArrayBuffer(S)}function u(S){return new Uint8Array(i(S),0,S)}function f(S){return new Uint16Array(i(2*S),0,S)}function p(S){return new Uint32Array(i(4*S),0,S)}function y(S){return new Int8Array(i(S),0,S)}function m(S){return new Int16Array(i(2*S),0,S)}function l(S){return new Int32Array(i(4*S),0,S)}function w(S){return new Float32Array(i(4*S),0,S)}function v(S){return new Float64Array(i(8*S),0,S)}function A(S){return e?new Uint8ClampedArray(i(S),0,S):u(S)}function M(S){return r?new BigUint64Array(i(8*S),0,S):null}function k(S){return t?new BigInt64Array(i(8*S),0,S):null}function E(S){return new DataView(i(S),0,S)}function P(S){S=x.nextPow2(S);var F=x.log2(S),R=d[F];return R.length>0?R.pop():new b(S)}ie.free=function(S){if(b.isBuffer(S))d[x.log2(S.length)].push(S);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(S)&&(S=S.buffer),!S)return;var R=0|x.log2(S.length||S.byteLength);n[R].push(S)}},ie.freeUint8=ie.freeUint16=ie.freeUint32=ie.freeBigUint64=ie.freeInt8=ie.freeInt16=ie.freeInt32=ie.freeBigInt64=ie.freeFloat32=ie.freeFloat=ie.freeFloat64=ie.freeDouble=ie.freeUint8Clamped=ie.freeDataView=function(S){s(S.buffer)},ie.freeArrayBuffer=s,ie.freeBuffer=function(S){d[x.log2(S.length)].push(S)},ie.malloc=function(S,F){if(void 0===F||"arraybuffer"===F)return i(S);switch(F){case"uint8":return u(S);case"uint16":return f(S);case"uint32":return p(S);case"int8":return y(S);case"int16":return m(S);case"int32":return l(S);case"float":case"float32":return w(S);case"double":case"float64":return v(S);case"uint8_clamped":return A(S);case"bigint64":return k(S);case"biguint64":return M(S);case"buffer":return P(S);case"data":case"dataview":return E(S);default:return null}return null},ie.mallocArrayBuffer=i,ie.mallocUint8=u,ie.mallocUint16=f,ie.mallocUint32=p,ie.mallocInt8=y,ie.mallocInt16=m,ie.mallocInt32=l,ie.mallocFloat32=ie.mallocFloat=w,ie.mallocFloat64=ie.mallocDouble=v,ie.mallocUint8Clamped=A,ie.mallocBigUint64=M,ie.mallocBigInt64=k,ie.mallocDataView=E,ie.mallocBuffer=P,ie.clearCache=function(){for(var S=0;S<32;++S)a.UINT8[S].length=0,a.UINT16[S].length=0,a.UINT32[S].length=0,a.INT8[S].length=0,a.INT16[S].length=0,a.INT32[S].length=0,a.FLOAT[S].length=0,a.DOUBLE[S].length=0,a.BIGUINT64[S].length=0,a.BIGINT64[S].length=0,a.UINT8C[S].length=0,n[S].length=0,d[S].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(_,ae,ie){var g=/[\'\"]/;ae.exports=function(x){return x?(g.test(x.charAt(0))&&(x=x.substr(1)),g.test(x.charAt(x.length-1))&&(x=x.substr(0,x.length-1)),x):""}},{}],329:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var b=0,e=T.length;b<e;b++){var r=T[b];for(var t in r)if((void 0===x[t]||Array.isArray(x[t])||g[t]!==x[t])&&t in x){var a;if(!0===r[t])a=x[t];else if(!1===r[t]||"function"==typeof r[t]&&void 0===(a=r[t](x[t],g,x)))continue;g[t]=a}}return g}},{}],330:[function(_,ae,ie){(function(g){(function(){function x(T){try{if(!g.localStorage)return!1}catch(e){return!1}var b=g.localStorage[T];return null!=b&&"true"===String(b).toLowerCase()}ae.exports=function(T,b){if(x("noDeprecation"))return T;var e=!1;return function(){if(!e){if(x("throwDeprecation"))throw new Error(b);x("traceDeprecation")?console.trace(b):console.warn(b),e=!0}return T.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],331:[function(_,ae,ie){var g=_("get-canvas-context");ae.exports=function(x){return g("webgl",x)}},{"get-canvas-context":194}],332:[function(_,ae,ie){var g=_("../main"),x=_("object-assign"),T=g.instance();function b(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}x(b.prototype=new g.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(s,i){if("string"==typeof s){var u=s.match(r);return u?u[0]:""}var f=this._validateYear(s),p=s.month(),y=""+this.toChineseMonth(f,p);return i&&y.length<2&&(y="0"+y),this.isIntercalaryMonth(f,p)&&(y+="i"),y},monthNames:function(s){if("string"==typeof s){var i=s.match(t);return i?i[0]:""}var u=this._validateYear(s),f=s.month(),p=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(u,f)-1];return this.isIntercalaryMonth(u,f)&&(p="\u95f0"+p),p},monthNamesShort:function(s){if("string"==typeof s){var i=s.match(a);return i?i[0]:""}var u=this._validateYear(s),f=s.month(),p=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(u,f)-1];return this.isIntercalaryMonth(u,f)&&(p="\u95f0"+p),p},parseMonth:function(s,i){s=this._validateYear(s);var u,f=parseInt(i);if(isNaN(f))"\u95f0"===i[0]&&(u=!0,i=i.substring(1)),"\u6708"===i[i.length-1]&&(i=i.substring(0,i.length-1)),f=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(i);else{var p=i[i.length-1];u="i"===p||"I"===p}return this.toMonthIndex(s,f,u)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(s,i){if(s.year&&(s=s.year()),"number"!=typeof s||s<1888||s>2111)throw i.replace(/\{0\}/,this.local.name);return s},toMonthIndex:function(s,i,u){var f=this.intercalaryMonth(s);if(u&&i!==f||i<1||i>12)throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return f?!u&&i<=f?i-1:i:i-1},toChineseMonth:function(s,i){s.year&&(i=(s=s.year()).month());var u=this.intercalaryMonth(s);if(i<0||i>(u?12:11))throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?i<u?i+1:i:i+1},intercalaryMonth:function(s){return s=this._validateYear(s),n[s-n[0]]>>13},isIntercalaryMonth:function(s,i){s.year&&(i=(s=s.year()).month());var u=this.intercalaryMonth(s);return!!u&&u===i},leapYear:function(s){return 0!==this.intercalaryMonth(s)},weekOfYear:function(s,i,u){var f,p=this._validateYear(s,g.local.invalidyear),y=d[p-d[0]];(f=T.newDate(y>>9&4095,y>>5&15,31&y)).add(4-(f.dayOfWeek()||7),"d");var v=this.toJD(s,i,u)-f.toJD();return 1+Math.floor(v/7)},monthsInYear:function(s){return this.leapYear(s)?13:12},daysInMonth:function(s,i){s.year&&(i=s.month(),s=s.year()),s=this._validateYear(s);var u=n[s-n[0]];if(i>(u>>13?12:11))throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return u&1<<12-i?30:29},weekDay:function(s,i,u){return(this.dayOfWeek(s,i,u)||7)<6},toJD:function(s,i,u){var f=this._validate(s,y,u,g.local.invalidDate);s=this._validateYear(f.year()),i=f.month(),u=f.day();var p=this.isIntercalaryMonth(s,i),y=this.toChineseMonth(s,i),m=function(l,w,v,A,M){var k,E,P;if("object"==typeof l)E=l,k=w||{};else{var S;if(!("number"==typeof l&&l>=1888&&l<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof w&&w>=1&&w<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof v&&v>=1&&v<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof A?(S=!1,k=A):(S=!!A,k={}),E={year:l,month:w,day:v,isIntercalary:S}}P=E.day-1;var F,R=n[E.year-n[0]],D=R>>13;F=D&&(E.month>D||E.isIntercalary)?E.month:E.month-1;for(var L=0;L<F;L++)P+=R&1<<12-L?30:29;var B=d[E.year-d[0]],V=new Date(B>>9&4095,(B>>5&15)-1,(31&B)+P);return k.year=V.getFullYear(),k.month=1+V.getMonth(),k.day=V.getDate(),k}(s,y,u,p);return T.toJD(m.year,m.month,m.day)},fromJD:function(s){var i=T.fromJD(s),u=function(p,y,m,l){var w,v;if("object"==typeof p)w=p,v=y||{};else{if(!("number"==typeof p&&p>=1888&&p<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof y&&y>=1&&y<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof m&&m>=1&&m<=31))throw new Error("Solar day outside range 1 - 31");w={year:p,month:y,day:m},v={}}var A=d[w.year-d[0]];v.year=(w.year<<9|w.month<<5|w.day)>=A?w.year:w.year-1,A=d[v.year-d[0]];var k,E=new Date(A>>9&4095,(A>>5&15)-1,31&A),P=new Date(w.year,w.month-1,w.day);k=Math.round((P-E)/864e5);var S,F=n[v.year-n[0]];for(S=0;S<13;S++){var R=F&1<<12-S?30:29;if(k<R)break;k-=R}var D=F>>13;return!D||S<D?(v.isIntercalary=!1,v.month=1+S):S===D?(v.isIntercalary=!0,v.month=S):(v.isIntercalary=!1,v.month=S),v.day=1+k,v}(i.year(),i.month(),i.day()),f=this.toMonthIndex(u.year,u.month,u.isIntercalary);return this.newDate(u.year,f,u.day)},fromString:function(s){var i=s.match(e),u=this._validateYear(+i[1]),y=this.toMonthIndex(u,+i[2],!!i[3]);return this.newDate(u,y,+i[4])},add:function(s,i,u){var f=s.year(),p=s.month(),y=this.isIntercalaryMonth(f,p),m=this.toChineseMonth(f,p),l=Object.getPrototypeOf(b.prototype).add.call(this,s,i,u);if("y"===u){var w=l.year(),v=l.month(),A=this.isIntercalaryMonth(w,m),M=this.toMonthIndex(w,m,!(!y||!A));M!==v&&l.month(M)}return l}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,r=/^\d?\d[iI]?/m,t=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,a=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;g.calendars.chinese=b;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],d=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":346,"object-assign":247}],333:[function(_,ae,ie){var g=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new g.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var e=this._validate(b,this.minMonth,this.minDay,g.local.invalidYear);return(b=e.year()+(e.year()<0?1:0))%4==3||b%4==-1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),13},weekOfYear:function(b,e,r){var t=this.newDate(b,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,e){var r=this._validate(b,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(13===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(b,e,r){return(this.dayOfWeek(b,e,r)||7)<6},toJD:function(b,e,r){var t=this._validate(b,e,r,g.local.invalidDate);return(b=t.year())<0&&b++,t.day()+30*(t.month()-1)+365*(b-1)+Math.floor(b/4)+this.jdEpoch-1},fromJD:function(b){var e=Math.floor(b)+.5-this.jdEpoch,r=Math.floor((e-Math.floor((e+366)/1461))/365)+1;r<=0&&r--,e=Math.floor(b)+.5-this.newDate(r,1,1).toJD();var t=Math.floor(e/30)+1;return this.newDate(r,t,e-30*(t-1)+1)}}),g.calendars.coptic=T},{"../main":346,"object-assign":247}],334:[function(_,ae,ie){var g=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new g.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),400},weekOfYear:function(e,r,t){var a=this.newDate(e,r,t);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[t.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,r,t){return(this._validate(e,r,t,g.local.invalidDate).day()+1)%8},weekDay:function(e,r,t){var a=this.dayOfWeek(e,r,t);return a>=2&&a<=6},extraInfo:function(e,r,t){var a=this._validate(e,r,t,g.local.invalidDate);return{century:b[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(e,r,t){var a=this._validate(e,r,t,g.local.invalidDate);return e=a.year()+(a.year()<0?1:0),r=a.month(),(t=a.day())+(r>1?16:0)+(r>2?32*(r-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var r=Math.floor(e/400)+1;e-=400*(r-1),e+=e>15?16:0;var t=Math.floor(e/32)+1;return this.newDate(r<=0?r-1:r,t,e-32*(t-1)+1)}});var b={20:"Fruitbat",21:"Anchovy"};g.calendars.discworld=T},{"../main":346,"object-assign":247}],335:[function(_,ae,ie){var g=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new g.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var e=this._validate(b,this.minMonth,this.minDay,g.local.invalidYear);return(b=e.year()+(e.year()<0?1:0))%4==3||b%4==-1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),13},weekOfYear:function(b,e,r){var t=this.newDate(b,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,e){var r=this._validate(b,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(13===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(b,e,r){return(this.dayOfWeek(b,e,r)||7)<6},toJD:function(b,e,r){var t=this._validate(b,e,r,g.local.invalidDate);return(b=t.year())<0&&b++,t.day()+30*(t.month()-1)+365*(b-1)+Math.floor(b/4)+this.jdEpoch-1},fromJD:function(b){var e=Math.floor(b)+.5-this.jdEpoch,r=Math.floor((e-Math.floor((e+366)/1461))/365)+1;r<=0&&r--,e=Math.floor(b)+.5-this.newDate(r,1,1).toJD();var t=Math.floor(e/30)+1;return this.newDate(r,t,e-30*(t-1)+1)}}),g.calendars.ethiopian=T},{"../main":346,"object-assign":247}],336:[function(_,ae,ie){var g=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function b(e,r){return e-r*Math.floor(e/r)}_("object-assign")(T.prototype=new g.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return this._leapYear(r.year())},_leapYear:function(e){return b(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,r,t){var a=this.newDate(e,r,t);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,r){return e.year&&(r=e.month(),e=e.year()),this._validate(e,r,this.minDay,g.local.invalidMonth),12===r&&this.leapYear(e)||8===r&&5===b(this.daysInYear(e),10)?30:9===r&&3===b(this.daysInYear(e),10)?29:this.daysPerMonth[r-1]},weekDay:function(e,r,t){return 6!==this.dayOfWeek(e,r,t)},extraInfo:function(e,r,t){var a=this._validate(e,r,t,g.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%10-3]}},toJD:function(e,r,t){var a=this._validate(e,r,t,g.local.invalidDate);e=a.year(),r=a.month(),t=a.day();var n=e<=0?e+1:e,d=this.jdEpoch+this._delay1(n)+this._delay2(n)+t+1;if(r<7){for(var s=7;s<=this.monthsInYear(e);s++)d+=this.daysInMonth(e,s);for(s=1;s<r;s++)d+=this.daysInMonth(e,s)}else for(s=7;s<r;s++)d+=this.daysInMonth(e,s);return d},_delay1:function(e){var r=Math.floor((235*e-234)/19),a=29*r+Math.floor((12084+13753*r)/25920);return b(3*(a+1),7)<3&&a++,a},_delay2:function(e){var r=this._delay1(e-1),t=this._delay1(e);return this._delay1(e+1)-t==356?2:t-r==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var r=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===r?1:r+1,7,1);)r++;for(var t=e<this.toJD(r,1,1)?7:1;e>this.toJD(r,t,this.daysInMonth(r,t));)t++;var a=e-this.toJD(r,t,1)+1;return this.newDate(r,t,a)}}),g.calendars.hebrew=T},{"../main":346,"object-assign":247}],337:[function(_,ae,ie){var g=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new g.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){return(11*this._validate(b,this.minMonth,this.minDay,g.local.invalidYear).year()+14)%30<11},weekOfYear:function(b,e,r){var t=this.newDate(b,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){return this.leapYear(b)?355:354},daysInMonth:function(b,e){var r=this._validate(b,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(12===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(b,e,r){return 5!==this.dayOfWeek(b,e,r)},toJD:function(b,e,r){var t=this._validate(b,e,r,g.local.invalidDate);return b=t.year(),e=t.month(),b=b<=0?b+1:b,(r=t.day())+Math.ceil(29.5*(e-1))+354*(b-1)+Math.floor((3+11*b)/30)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b)+.5;var e=Math.floor((30*(b-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var r=Math.min(12,Math.ceil((b-29-this.toJD(e,1,1))/29.5)+1),t=b-this.toJD(e,r,1)+1;return this.newDate(e,r,t)}}),g.calendars.islamic=T},{"../main":346,"object-assign":247}],338:[function(_,ae,ie){var g=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new g.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var e=this._validate(b,this.minMonth,this.minDay,g.local.invalidYear);return(b=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(b,e,r){var t=this.newDate(b,e,r);return t.add(4-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,e){var r=this._validate(b,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(b,e,r){return(this.dayOfWeek(b,e,r)||7)<6},toJD:function(b,e,r){var t=this._validate(b,e,r,g.local.invalidDate);return b=t.year(),e=t.month(),r=t.day(),b<0&&b++,e<=2&&(b--,e+=12),Math.floor(365.25*(b+4716))+Math.floor(30.6001*(e+1))+r-1524.5},fromJD:function(b){var e=Math.floor(b+.5)+1524,r=Math.floor((e-122.1)/365.25),t=Math.floor(365.25*r),a=Math.floor((e-t)/30.6001),n=a-Math.floor(a<14?1:13),d=r-Math.floor(n>2?4716:4715),s=e-t-Math.floor(30.6001*a);return d<=0&&d--,this.newDate(d,n,s)}}),g.calendars.julian=T},{"../main":346,"object-assign":247}],339:[function(_,ae,ie){var g=_("../main");function T(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function b(r,t){return r-t*Math.floor(r/t)}function e(r,t){return b(r-1,t)+1}_("object-assign")(T.prototype=new g.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(r){return this._validate(r,this.minMonth,this.minDay,g.local.invalidYear),!1},formatYear:function(r){r=this._validate(r,this.minMonth,this.minDay,g.local.invalidYear).year();var t=Math.floor(r/400);return r%=400,r+=r<0?400:0,t+"."+Math.floor(r/20)+"."+r%20},forYear:function(r){if((r=r.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,a=0;a<r.length;a++){var n=parseInt(r[a],10);if(Math.abs(n)>19||a>0&&n<0)throw"Invalid Mayan year";t=20*t+n}return t},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,g.local.invalidYear),18},weekOfYear:function(r,t,a){return this._validate(r,t,a,g.local.invalidDate),0},daysInYear:function(r){return this._validate(r,this.minMonth,this.minDay,g.local.invalidYear),360},daysInMonth:function(r,t){return this._validate(r,t,this.minDay,g.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(r,t,a){return this._validate(r,t,a,g.local.invalidDate).day()},weekDay:function(r,t,a){return this._validate(r,t,a,g.local.invalidDate),!0},extraInfo:function(r,t,a){var n=this._validate(r,t,a,g.local.invalidDate).toJD(),d=this._toHaab(n),s=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[d[0]-1],haabMonth:d[0],haabDay:d[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(r){var t=b(8+(r-=this.jdEpoch)+340,365);return[Math.floor(t/20)+1,b(t,20)]},_toTzolkin:function(r){return[e(20+(r-=this.jdEpoch),20),e(r+4,13)]},toJD:function(r,t,a){var n=this._validate(r,t,a,g.local.invalidDate);return n.day()+20*n.month()+360*n.year()+this.jdEpoch},fromJD:function(r){r=Math.floor(r)+.5-this.jdEpoch;var t=Math.floor(r/360);r%=360,r+=r<0?360:0;var a=Math.floor(r/20);return this.newDate(t,a,r%20)}}),g.calendars.mayan=T},{"../main":346,"object-assign":247}],340:[function(_,ae,ie){var g=_("../main"),x=_("object-assign");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new g.baseCalendar;var b=g.instance("gregorian");x(T.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return b.leapYear(r.year()+(r.year()<1?1:0)+1469)},weekOfYear:function(e,r,t){var a=this.newDate(e,r,t);return a.add(1-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return(this.dayOfWeek(e,r,t)||7)<6},toJD:function(e,r,t){var a=this._validate(e,r,t,g.local.invalidMonth);(e=a.year())<0&&e++;for(var n=a.day(),d=1;d<a.month();d++)n+=this.daysPerMonth[d-1];return n+b.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var r=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(r+1,1,1);)r++;for(var t=e-Math.floor(this.toJD(r,1,1)+.5)+1,a=1;t>this.daysInMonth(r,a);)t-=this.daysInMonth(r,a),a++;return this.newDate(r,a,t)}}),g.calendars.nanakshahi=T},{"../main":346,"object-assign":247}],341:[function(_,ae,ie){var g=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new g.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(b){return this.daysInYear(b)!==this.daysPerYear},weekOfYear:function(b,e,r){var t=this.newDate(b,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){if(b=this._validate(b,this.minMonth,this.minDay,g.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[b])return this.daysPerYear;for(var e=0,r=this.minMonth;r<=12;r++)e+=this.NEPALI_CALENDAR_DATA[b][r];return e},daysInMonth:function(b,e){return b.year&&(e=b.month(),b=b.year()),this._validate(b,e,this.minDay,g.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[b]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[b][e]},weekDay:function(b,e,r){return 6!==this.dayOfWeek(b,e,r)},toJD:function(b,e,r){var t=this._validate(b,e,r,g.local.invalidDate);b=t.year(),e=t.month(),r=t.day();var a=g.instance(),n=0,d=e,s=b;this._createMissingCalendarData(b);var i=b-(d>9||9===d&&r>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(9!==e&&(n=r,d--);9!==d;)d<=0&&(d=12,s--),n+=this.NEPALI_CALENDAR_DATA[s][d],d--;return 9===e?(n+=r-this.NEPALI_CALENDAR_DATA[s][0])<0&&(n+=a.daysInYear(i)):n+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],a.newDate(i,1,1).add(n,"d").toJD()},fromJD:function(b){var e=g.instance().fromJD(b),r=e.year(),t=e.dayOfYear(),a=r+56;this._createMissingCalendarData(a);for(var n=9,s=this.NEPALI_CALENDAR_DATA[a][n]-this.NEPALI_CALENDAR_DATA[a][0]+1;t>s;)++n>12&&(n=1,a++),s+=this.NEPALI_CALENDAR_DATA[a][n];return this.newDate(a,n,this.NEPALI_CALENDAR_DATA[a][n]-(s-t))},_createMissingCalendarData:function(b){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var r=b-1;r<b+2;r++)void 0===this.NEPALI_CALENDAR_DATA[r]&&(this.NEPALI_CALENDAR_DATA[r]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),g.calendars.nepali=T},{"../main":346,"object-assign":247}],342:[function(_,ae,ie){var g=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function b(e,r){return e-r*Math.floor(e/r)}_("object-assign")(T.prototype=new g.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return 682*((r.year()-(r.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,r,t){var a=this.newDate(e,r,t);return a.add(-(a.dayOfWeek()+1)%7,"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return 5!==this.dayOfWeek(e,r,t)},toJD:function(e,r,t){var a=this._validate(e,r,t,g.local.invalidDate);e=a.year(),r=a.month(),t=a.day();var n=e-(e>=0?474:473),d=474+b(n,2820);return t+(r<=7?31*(r-1):30*(r-1)+6)+Math.floor((682*d-110)/2816)+365*(d-1)+1029983*Math.floor(n/2820)+this.jdEpoch-1},fromJD:function(e){var r=(e=Math.floor(e)+.5)-this.toJD(475,1,1),t=Math.floor(r/1029983),a=b(r,1029983),n=2820;if(1029982!==a){var d=Math.floor(a/366),s=b(a,366);n=Math.floor((2134*d+2816*s+2815)/1028522)+d+1}var i=n+2820*t+474,u=e-this.toJD(i=i<=0?i-1:i,1,1)+1,f=u<=186?Math.ceil(u/31):Math.ceil((u-6)/30),p=e-this.toJD(i,f,1)+1;return this.newDate(i,f,p)}}),g.calendars.persian=T,g.calendars.jalali=T},{"../main":346,"object-assign":247}],343:[function(_,ae,ie){var g=_("../main"),x=_("object-assign"),T=g.instance();function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x(b.prototype=new g.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(r.year()),T.leapYear(e)},weekOfYear:function(e,r,t){var a=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(a.year()),T.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return(this.dayOfWeek(e,r,t)||7)<6},toJD:function(e,r,t){var a=this._validate(e,r,t,g.local.invalidDate);return e=this._t2gYear(a.year()),T.toJD(e,a.month(),a.day())},fromJD:function(e){var r=T.fromJD(e),t=this._g2tYear(r.year());return this.newDate(t,r.month(),r.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),g.calendars.taiwan=b},{"../main":346,"object-assign":247}],344:[function(_,ae,ie){var g=_("../main"),x=_("object-assign"),T=g.instance();function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x(b.prototype=new g.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(r.year()),T.leapYear(e)},weekOfYear:function(e,r,t){var a=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(a.year()),T.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return(this.dayOfWeek(e,r,t)||7)<6},toJD:function(e,r,t){var a=this._validate(e,r,t,g.local.invalidDate);return e=this._t2gYear(a.year()),T.toJD(e,a.month(),a.day())},fromJD:function(e){var r=T.fromJD(e),t=this._g2tYear(r.year());return this.newDate(t,r.month(),r.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),g.calendars.thai=b},{"../main":346,"object-assign":247}],345:[function(_,ae,ie){var g=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new g.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return 355===this.daysInYear(r.year())},weekOfYear:function(e,r,t){var a=this.newDate(e,r,t);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var r=0,t=1;t<=12;t++)r+=this.daysInMonth(e,t);return r},daysInMonth:function(e,r){for(var t=this._validate(e,r,this.minDay,g.local.invalidMonth).toJD()-24e5+.5,a=0,n=0;n<b.length;n++){if(b[n]>t)return b[a]-b[a-1];a++}return 30},weekDay:function(e,r,t){return 5!==this.dayOfWeek(e,r,t)},toJD:function(e,r,t){var a=this._validate(e,r,t,g.local.invalidDate),n=12*(a.year()-1)+a.month()-15292;return a.day()+b[n-1]-1+24e5-.5},fromJD:function(e){for(var r=e-24e5+.5,t=0,a=0;a<b.length&&!(b[a]>r);a++)t++;var n=t+15292,d=Math.floor((n-1)/12);return this.newDate(d+1,n-12*d,r-b[t-1]+1)},isValid:function(e,r,t){var a=g.baseCalendar.prototype.isValid.apply(this,arguments);return a&&(a=(e=null!=e.year?e.year:e)>=1276&&e<=1500),a},_validate:function(e,r,t,a){var n=g.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw a.replace(/\{0\}/,this.local.name);return n}}),g.calendars.ummalqura=T;var b=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(_,ae,ie){var g=_("object-assign");function x(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function T(a,n,d,s){if(this._calendar=a,this._year=n,this._month=d,this._day=s,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(t.local.invalidDate||t.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function b(a,n){return"000000".substring(0,n-(a=""+a).length)+a}function e(){this.shortYearCutoff="+10"}function r(a){this.local=this.regionalOptions[a]||this.regionalOptions[""]}g(x.prototype,{instance:function(a,n){a=(a||"gregorian").toLowerCase();var d=this._localCals[a+"-"+(n=n||"")];if(!d&&this.calendars[a]&&(d=new this.calendars[a](n),this._localCals[a+"-"+n]=d),!d)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,a);return d},newDate:function(a,n,d,s,i){return(s=(null!=a&&a.year?a.calendar():"string"==typeof s?this.instance(s,i):s)||this.instance()).newDate(a,n,d)},substituteDigits:function(a){return function(n){return(n+"").replace(/[0-9]/g,function(d){return a[d]})}},substituteChineseDigits:function(a,n){return function(d){for(var s="",i=0;d>0;){var u=d%10;s=(0===u?"":a[u]+n[i])+s,i++,d=Math.floor(d/10)}return 0===s.indexOf(a[1]+n[1])&&(s=s.substr(1)),s||a[0]}}}),g(T.prototype,{newDate:function(a,n,d){return this._calendar.newDate(null==a?this:a,n,d)},year:function(a){return 0===arguments.length?this._year:this.set(a,"y")},month:function(a){return 0===arguments.length?this._month:this.set(a,"m")},day:function(a){return 0===arguments.length?this._day:this.set(a,"d")},date:function(a,n,d){if(!this._calendar.isValid(a,n,d))throw(t.local.invalidDate||t.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=a,this._month=n,this._day=d,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(a,n){return this._calendar.add(this,a,n)},set:function(a,n){return this._calendar.set(this,a,n)},compareTo:function(a){if(this._calendar.name!==a._calendar.name)throw(t.local.differentCalendars||t.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,a._calendar.local.name);var n=this._year!==a._year?this._year-a._year:this._month!==a._month?this.monthOfYear()-a.monthOfYear():this._day-a._day;return 0===n?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(a){return this._calendar.fromJD(a)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(a){return this._calendar.fromJSDate(a)},toString:function(){return(this.year()<0?"-":"")+b(Math.abs(this.year()),4)+"-"+b(this.month(),2)+"-"+b(this.day(),2)}}),g(e.prototype,{_validateLevel:0,newDate:function(a,n,d){return null==a?this.today():(a.year&&(this._validate(a,n,d,t.local.invalidDate||t.regionalOptions[""].invalidDate),d=a.day(),n=a.month(),a=a.year()),new T(this,a,n,d))},today:function(){return this.fromJSDate(new Date)},epoch:function(a){return this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(a){var n=this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return(n.year()<0?"-":"")+b(Math.abs(n.year()),4)},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear),12},monthOfYear:function(a,n){var d=this._validate(a,n,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth);return(d.month()+this.monthsInYear(d)-this.firstMonth)%this.monthsInYear(d)+this.minMonth},fromMonthOfYear:function(a,n){var d=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(a)+this.minMonth;return this._validate(a,d,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth),d},daysInYear:function(a){var n=this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(a,n,d){var s=this._validate(a,n,d,t.local.invalidDate||t.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(a,n,d){var s=this._validate(a,n,d,t.local.invalidDate||t.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(a,n,d){return this._validate(a,n,d,t.local.invalidDate||t.regionalOptions[""].invalidDate),{}},add:function(a,n,d){return this._validate(a,this.minMonth,this.minDay,t.local.invalidDate||t.regionalOptions[""].invalidDate),this._correctAdd(a,this._add(a,n,d),n,d)},_add:function(a,n,d){if(this._validateLevel++,"d"===d||"w"===d){var s=a.toJD()+n*("w"===d?this.daysInWeek():1),i=a.calendar().fromJD(s);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var u=a.year()+("y"===d?n:0),f=a.monthOfYear()+("m"===d?n:0);i=a.day(),"y"===d?(a.month()!==this.fromMonthOfYear(u,f)&&(f=this.newDate(u,a.month(),this.minDay).monthOfYear()),f=Math.min(f,this.monthsInYear(u)),i=Math.min(i,this.daysInMonth(u,this.fromMonthOfYear(u,f)))):"m"===d&&(function(y){for(;f<y.minMonth;)u--,f+=y.monthsInYear(u);for(var m=y.monthsInYear(u);f>m-1+y.minMonth;)u++,f-=m,m=y.monthsInYear(u)}(this),i=Math.min(i,this.daysInMonth(u,this.fromMonthOfYear(u,f))));var p=[u,this.fromMonthOfYear(u,f),i];return this._validateLevel--,p}catch(y){throw this._validateLevel--,y}},_correctAdd:function(a,n,d,s){if(!(this.hasYearZero||"y"!==s&&"m"!==s||0!==n[0]&&a.year()>0==n[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s];n=this._add(a,d*i[0]+(d<0?-1:1)*i[1],i[2])}return a.date(n[0],n[1],n[2])},set:function(a,n,d){this._validate(a,this.minMonth,this.minDay,t.local.invalidDate||t.regionalOptions[""].invalidDate);var s="y"===d?n:a.year(),i="m"===d?n:a.month(),u="d"===d?n:a.day();return"y"!==d&&"m"!==d||(u=Math.min(u,this.daysInMonth(s,i))),a.date(s,i,u)},isValid:function(a,n,d){this._validateLevel++;var s=this.hasYearZero||0!==a;if(s){var i=this.newDate(a,n,this.minDay);s=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(i)&&d>=this.minDay&&d-this.minDay<this.daysInMonth(i)}return this._validateLevel--,s},toJSDate:function(a,n,d){var s=this._validate(a,n,d,t.local.invalidDate||t.regionalOptions[""].invalidDate);return t.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(a){return this.fromJD(t.instance().fromJSDate(a).toJD())},_validate:function(a,n,d,s){if(a.year){if(0===this._validateLevel&&this.name!==a.calendar().name)throw(t.local.differentCalendars||t.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,a.calendar().local.name);return a}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(a,n,d))throw s.replace(/\{0\}/,this.local.name);var i=this.newDate(a,n,d);return this._validateLevel--,i}catch(u){throw this._validateLevel--,u}}}),g(r.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var n=this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return(a=n.year()+(n.year()<0?1:0))%4==0&&(a%100!=0||a%400==0)},weekOfYear:function(a,n,d){var s=this.newDate(a,n,d);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(a,n){var d=this._validate(a,n,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth);return this.daysPerMonth[d.month()-1]+(2===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(a,n,d){return(this.dayOfWeek(a,n,d)||7)<6},toJD:function(a,n,d){var s=this._validate(a,n,d,t.local.invalidDate||t.regionalOptions[""].invalidDate);a=s.year(),n=s.month(),d=s.day(),a<0&&a++,n<3&&(n+=12,a--);var i=Math.floor(a/100),u=2-i+Math.floor(i/4);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(n+1))+d+u-1524.5},fromJD:function(a){var n=Math.floor(a+.5),d=Math.floor((n-1867216.25)/36524.25),s=1524+(d=n+1+d-Math.floor(d/4)),i=Math.floor((s-122.1)/365.25),u=Math.floor(365.25*i),f=Math.floor((s-u)/30.6001),p=s-u-Math.floor(30.6001*f),y=f-(f>13.5?13:1),m=i-(y>2.5?4716:4715);return m<=0&&m--,this.newDate(m,y,p)},toJSDate:function(a,n,d){var s=this._validate(a,n,d,t.local.invalidDate||t.regionalOptions[""].invalidDate),i=new Date(s.year(),s.month()-1,s.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(a){return this.newDate(a.getFullYear(),a.getMonth()+1,a.getDate())}});var t=ae.exports=new x;t.cdate=T,t.baseCalendar=e,t.calendars.gregorian=r},{"object-assign":247}],347:[function(_,ae,ie){var g=_("object-assign"),x=_("./main");g(x.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),x.local=x.regionalOptions[""],g(x.cdate.prototype,{formatDate:function(T,b){return"string"!=typeof T&&(b=T,T=""),this._calendar.formatDate(T||"",this,b)}}),g(x.baseCalendar.prototype,{UNIX_EPOCH:x.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:x.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(T,b,e){if("string"!=typeof T&&(e=b,b=T,T=""),!b)return"";if(b.calendar()!==this)throw x.local.invalidFormat||x.regionalOptions[""].invalidFormat;T=T||this.local.dateFormat;for(var t,a,n,d=(e=e||{}).dayNamesShort||this.local.dayNamesShort,s=e.dayNames||this.local.dayNames,i=e.monthNumbers||this.local.monthNumbers,u=e.monthNamesShort||this.local.monthNamesShort,f=e.monthNames||this.local.monthNames,p=function(P,S){for(var F=1;E+F<T.length&&T.charAt(E+F)===P;)F++;return E+=F-1,Math.floor(F/(S||1))>1},y=function(P,S,F,R){var D=""+S;if(p(P,R))for(;D.length<F;)D="0"+D;return D},m=this,w=function(P,S){return S?"function"==typeof f?f.call(m,P):f[P.month()-m.minMonth]:"function"==typeof u?u.call(m,P):u[P.month()-m.minMonth]},v=this.local.digits,A=function(P){return e.localNumbers&&v?v(P):P},M="",k=!1,E=0;E<T.length;E++)if(k)"'"!==T.charAt(E)||p("'")?M+=T.charAt(E):k=!1;else switch(T.charAt(E)){case"d":M+=A(y("d",b.day(),2));break;case"D":M+=("D",t=b.dayOfWeek(),a=d,n=s,p("D")?n[t]:a[t]);break;case"o":M+=y("o",b.dayOfYear(),3);break;case"w":M+=y("w",b.weekOfYear(),2);break;case"m":M+=(P=b,"function"==typeof i?i.call(m,P,p("m")):A(y("m",P.month(),2)));break;case"M":M+=w(b,p("M"));break;case"y":M+=p("y",2)?b.year():(b.year()%100<10?"0":"")+b.year()%100;break;case"Y":p("Y",2),M+=b.formatYear();break;case"J":M+=b.toJD();break;case"@":M+=(b.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":M+=(b.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":p("'")?M+="'":k=!0;break;default:M+=T.charAt(E)}var P;return M},parseDate:function(T,b,e){if(null==b)throw x.local.invalidArguments||x.regionalOptions[""].invalidArguments;if(""===(b="object"==typeof b?b.toString():b+""))return null;T=T||this.local.dateFormat;var r=(e=e||{}).shortYearCutoff||this.shortYearCutoff;r="string"!=typeof r?r:this.today().year()%100+parseInt(r,10);for(var t=e.dayNamesShort||this.local.dayNamesShort,a=e.dayNames||this.local.dayNames,n=e.parseMonth||this.local.parseMonth,d=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,u=-1,f=-1,p=-1,y=-1,m=-1,l=!1,w=!1,v=function(B,V){for(var Z=1;R+Z<T.length&&T.charAt(R+Z)===B;)Z++;return R+=Z-1,Math.floor(Z/(V||1))>1},A=function(B,V){var Z=v(B,V),Y=[2,3,Z?4:2,Z?4:2,10,11,20]["oyYJ@!".indexOf(B)+1],ee=new RegExp("^-?\\d{1,"+Y+"}"),Q=b.substring(F).match(ee);if(!Q)throw(x.local.missingNumberAt||x.regionalOptions[""].missingNumberAt).replace(/\{0\}/,F);return F+=Q[0].length,parseInt(Q[0],10)},M=this,k=function(){if("function"==typeof d){v("m");var B=d.call(M,b.substring(F));return F+=B.length,B}return A("m")},E=function(B,V,Z,Y){for(var ee=v(B,Y)?Z:V,Q=0;Q<ee.length;Q++)if(b.substr(F,ee[Q].length).toLowerCase()===ee[Q].toLowerCase())return F+=ee[Q].length,Q+M.minMonth;throw(x.local.unknownNameAt||x.regionalOptions[""].unknownNameAt).replace(/\{0\}/,F)},P=function(){if("function"==typeof i){var B=v("M")?i.call(M,b.substring(F)):s.call(M,b.substring(F));return F+=B.length,B}return E("M",s,i)},S=function(){if(b.charAt(F)!==T.charAt(R))throw(x.local.unexpectedLiteralAt||x.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,F);F++},F=0,R=0;R<T.length;R++)if(w)"'"!==T.charAt(R)||v("'")?S():w=!1;else switch(T.charAt(R)){case"d":y=A("d");break;case"D":E("D",t,a);break;case"o":m=A("o");break;case"w":A("w");break;case"m":p=k();break;case"M":p=P();break;case"y":var D=R;l=!v("y",2),R=D,f=A("y",2);break;case"Y":f=A("Y",2);break;case"J":u=A("J")+.5,"."===b.charAt(F)&&(F++,A("J"));break;case"@":u=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":u=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":F=b.length;break;case"'":v("'")?S():w=!0;break;default:S()}if(F<b.length)throw x.local.unexpectedText||x.regionalOptions[""].unexpectedText;if(-1===f?f=this.today().year():f<100&&l&&(f+=-1===r?1900:this.today().year()-this.today().year()%100-(f<=r?0:100)),"string"==typeof p&&(p=n.call(this,f,p)),m>-1){y=m;for(var L=this.daysInMonth(f,p=1);y>L;L=this.daysInMonth(f,p))p++,y-=L}return u>-1?this.fromJD(u):this.newDate(f,p,y)},determineDate:function(T,b,e,r,t){e&&"object"!=typeof e&&(t=r,r=e,e=null),"string"!=typeof r&&(t=r,r="");var a=this;return b=b?b.newDate():null,null==T?b:"string"==typeof T?function(n){try{return a.parseDate(r,n,t)}catch(u){}for(var d=((n=n.toLowerCase()).match(/^c/)&&e?e.newDate():null)||a.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,i=s.exec(n);i;)d.add(parseInt(i[1],10),i[2]||"d"),i=s.exec(n);return d}(T):"number"==typeof T?isNaN(T)||T===1/0||T===-1/0?b:a.today().add(T,"d"):a.newDate(T)}})},{"./main":346,"object-assign":247}],348:[function(_,ae,ie){"use strict";ae.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(_,ae,ie){"use strict";var g=_("./arrow_paths"),x=_("../../plots/font_attributes"),T=_("../../plots/cartesian/constants"),b=_("../../plot_api/plot_template").templatedArray;_("../../constants/axis_placeable_objects"),ae.exports=b("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:x({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:g.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:g.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",T.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",T.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",T.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",T.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:x({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("./draw").draw;function b(r){g.filterVisible(r._fullLayout.annotations).forEach(function(a){var n=x.getFromId(r,a.xref),d=x.getFromId(r,a.yref),s=x.getRefType(a.xref),i=x.getRefType(a.yref);a._extremes={},"range"===s&&e(a,n),"range"===i&&e(a,d)})}function e(r,t){var a,n=t._id,d=n.charAt(0),s=r[d],i=r["a"+d],p=r["_"+d+"padplus"],y=r["_"+d+"padminus"],m={x:1,y:-1}[d]*r[d+"shift"],l=3*r.arrowsize*r.arrowwidth||0,w=l+m,v=l-m,A=3*r.startarrowsize*r.arrowwidth||0,M=A+m,k=A-m;if(r["a"+d+"ref"]===r[d+"ref"]){var E=x.findExtremes(t,[t.r2c(s)],{ppadplus:w,ppadminus:v}),P=x.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(p,M),ppadminus:Math.max(y,k)});a={min:[E.min[0],P.min[0]],max:[E.max[0],P.max[0]]}}else M=i?M+i:M,k=i?k-i:k,a=x.findExtremes(t,[t.r2c(s)],{ppadplus:Math.max(p,w,M),ppadminus:Math.max(y,v,k)});r._extremes[n]=a}ae.exports=function(r){if(g.filterVisible(r._fullLayout.annotations).length&&r._fullData.length)return g.syncOrAsync([T,b],r)}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../registry"),T=_("../../plot_api/plot_template").arrayEditor;function b(r,t){var a,n,d,s,i,u,f,p=r._fullLayout.annotations,y=[],m=[],l=[],w=(t||[]).length;for(a=0;a<p.length;a++)if(s=(d=p[a]).clicktoshow){for(n=0;n<w;n++)if(u=(i=t[n]).xaxis,f=i.yaxis,u._id===d.xref&&f._id===d.yref&&u.d2r(i.x)===e(d._xclick,u)&&f.d2r(i.y)===e(d._yclick,f)){(d.visible?"onout"===s?m:l:y).push(a);break}n===w&&d.visible&&"onout"===s&&m.push(a)}return{on:y,off:m,explicitOff:l}}function e(r,t){return"log"===t.type?t.l2r(r):t.d2r(r)}ae.exports={hasClickToShow:function(r,t){var a=b(r,t);return a.on.length>0||a.explicitOff.length>0},onClick:function(r,t){var a,n,d=b(r,t),s=d.on,i=d.off.concat(d.explicitOff),u={},f=r._fullLayout.annotations;if(s.length||i.length){for(a=0;a<s.length;a++)(n=T(r.layout,"annotations",f[s[a]])).modifyItem("visible",!0),g.extendFlat(u,n.getUpdateObj());for(a=0;a<i.length;a++)(n=T(r.layout,"annotations",f[i[a]])).modifyItem("visible",!1),g.extendFlat(u,n.getUpdateObj());return x.call("update",r,{},u)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../color");ae.exports=function(T,b,e,r){r("opacity");var t=r("bgcolor"),a=r("bordercolor"),n=x.opacity(a);r("borderpad");var d=r("borderwidth"),s=r("showarrow");if(r("text",s?" ":e._dfltTitle.annotation),r("textangle"),g.coerceFont(r,"font",e.font),r("width"),r("align"),r("height")&&r("valign"),s){var i,u,f=r("arrowside");-1!==f.indexOf("end")&&(i=r("arrowhead"),u=r("arrowsize")),-1!==f.indexOf("start")&&(r("startarrowhead",i),r("startarrowsize",u)),r("arrowcolor",n?b.bordercolor:x.defaultLine),r("arrowwidth",2*(n&&d||1)),r("standoff"),r("startstandoff")}var p=r("hovertext"),y=e.hoverlabel||{};if(p){var m=r("hoverlabel.bgcolor",y.bgcolor||(x.opacity(t)?x.rgb(t):x.defaultLine)),l=r("hoverlabel.bordercolor",y.bordercolor||x.contrast(m));g.coerceFont(r,"hoverlabel.font",{family:y.font.family,size:y.font.size,color:y.font.color||l})}r("captureevents",!!p)}},{"../../lib":503,"../color":366}],353:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib/to_log_range");ae.exports=function(T,b,e,r){b=b||{};var t="log"===e&&"linear"===b.type;if(t||"linear"===e&&"log"===b.type)for(var n,d,s=T._fullLayout.annotations,i=b._id.charAt(0),u=0;u<s.length;u++)d="annotations["+u+"].",(n=s[u])[i+"ref"]===b._id&&f(i),n["a"+i+"ref"]===b._id&&f("a"+i);function f(p){var y=n[p],m=null;m=t?x(y,b.range):Math.pow(10,y),g(m)||(m=null),r(d+p,m)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("./common_defaults"),e=_("./attributes");function r(t,a,n){function d(P,S){return g.coerce(t,a,e,P,S)}var s=d("visible"),i=d("clicktoshow");if(s||i){b(t,a,n,d);for(var u=a.showarrow,f=["x","y"],p=[-10,-30],y={_fullLayout:n},m=0;m<2;m++){var l=f[m],w=x.coerceRef(t,a,y,l,"","paper");if("paper"!==w&&x.getFromId(y,w)._annIndices.push(a._index),x.coercePosition(a,y,d,w,l,.5),u){var v="a"+l,A=x.coerceRef(t,a,y,v,"pixel",["pixel","paper"]);"pixel"!==A&&A!==w&&(A=a[v]="pixel"),x.coercePosition(a,y,d,A,v,"pixel"===A?p[m]:.4)}d(l+"anchor"),d(l+"shift")}if(g.noneOrAll(t,a,["x","y"]),u&&g.noneOrAll(t,a,["ax","ay"]),i){var k=d("xclick"),E=d("yclick");a._xclick=void 0===k?a.x:x.cleanPosition(k,y,a.xref),a._yclick=void 0===E?a.y:x.cleanPosition(E,y,a.yref)}}}ae.exports=function(t,a){T(t,a,{name:"annotations",handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../registry"),T=_("../../plots/plots"),b=_("../../lib"),e=b.strTranslate,r=_("../../plots/cartesian/axes"),t=_("../color"),a=_("../drawing"),n=_("../fx"),d=_("../../lib/svg_text_utils"),s=_("../../lib/setcursor"),i=_("../dragelement"),u=_("../../plot_api/plot_template").arrayEditor,f=_("./draw_arrow_head");function p(l,w){var v=l._fullLayout.annotations[w]||{},A=r.getFromId(l,v.xref),M=r.getFromId(l,v.yref);A&&A.setScale(),M&&M.setScale(),m(l,v,w,!1,A,M)}function y(l,w,v,A,M){var k=M[v],E=M[v+"ref"],P=-1!==v.indexOf("y"),S="domain"===r.getRefType(E),F=P?A.h:A.w;return l?S?k+(P?-w:w)/l._length:l.p2r(l.r2p(k)+w):k+(P?-w:w)/F}function m(l,w,v,A,M,k){var E,P,S=l._fullLayout,F=l._fullLayout._size,R=l._context.edits;A?(E="annotation-"+A,P=A+".annotations"):(E="annotation",P="annotations");var D=u(l.layout,P,w),L=D.modifyBase,B=D.modifyItem,V=D.getUpdateObj;S._infolayer.selectAll("."+E+'[data-index="'+v+'"]').remove();var Z="clip"+S._uid+"_ann"+v;if(w._input&&!1!==w.visible){var Y={x:{},y:{}},ee=+w.textangle||0,Q=S._infolayer.append("g").classed(E,!0).attr("data-index",String(v)).style("opacity",w.opacity),$=Q.append("g").classed("annotation-text-g",!0),K=R[w.showarrow?"annotationTail":"annotationPosition"],oe=w.captureevents||R.annotationText||K,j=$.append("g").style("pointer-events",oe?"all":null).call(s,"pointer").on("click",function(){l._dragging=!1,l.emit("plotly_clickannotation",he(g.event))});w.hovertext&&j.on("mouseover",function(){var we=w.hoverlabel,ke=we.font,De=this.getBoundingClientRect(),Ee=l.getBoundingClientRect();n.loneHover({x0:De.left-Ee.left,x1:De.right-Ee.left,y:(De.top+De.bottom)/2-Ee.top,text:w.hovertext,color:we.bgcolor,borderColor:we.bordercolor,fontFamily:ke.family,fontSize:ke.size,fontColor:ke.color},{container:S._hoverlayer.node(),outerContainer:S._paper.node(),gd:l})}).on("mouseout",function(){n.loneUnhover(S._hoverlayer.node())});var H=w.borderwidth,re=H+w.borderpad,q=j.append("rect").attr("class","bg").style("stroke-width",H+"px").call(t.stroke,w.bordercolor).call(t.fill,w.bgcolor),te=w.width||w.height,ne=S._topclips.selectAll("#"+Z).data(te?[0]:[]);ne.enter().append("clipPath").classed("annclip",!0).attr("id",Z).append("rect"),ne.exit().remove();var le=w.font,ue=S._meta?b.templateString(w.text,S._meta):w.text,de=j.append("text").classed("annotation-text",!0).text(ue);R.annotationText?de.call(d.makeEditable,{delegate:j,gd:l}).call(be).on("edit",function(we){w.text=we,this.call(be),B("text",we),M&&M.autorange&&L(M._name+".autorange",!0),k&&k.autorange&&L(k._name+".autorange",!0),x.call("_guiRelayout",l,V())}):de.call(be)}else g.selectAll("#"+Z).remove();function he(we){var ke={index:v,annotation:w._input,fullAnnotation:w,event:we};return A&&(ke.subplotId=A),ke}function be(we){return we.call(a.font,le).attr({"text-anchor":{left:"start",right:"end"}[w.align]||"middle"}),d.convertToTspans(we,l,ge),we}function ge(){var we=de.selectAll("a");1===we.size()&&we.text()===de.text()&&j.insert("a",":first-child").attr({"xlink:xlink:href":we.attr("xlink:href"),"xlink:xlink:show":we.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(q.node());var ke=j.select(".annotation-text-math-group"),De=!ke.empty(),Ee=a.bBox((De?ke:de).node()),Re=Ee.width,ve=Ee.height,Te=w.width||Re,Ie=w.height||ve,Ce=Math.round(Te+2*re),Pe=Math.round(Ie+2*re);function Ve(it,Mt){return"auto"===Mt&&(Mt=it<1/3?"left":it>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Mt]}for(var qe=!1,Je=["x","y"],lt=0;lt<Je.length;lt++){var He,$e,et,tt,ft,bt=Je[lt],Ct=w[bt+"ref"]||bt,Vt=w["a"+bt+"ref"],Ft={x:M,y:k}[bt],ht=(ee+("x"===bt?0:-90))*Math.PI/180,ut=Ce*Math.cos(ht),Rt=Pe*Math.sin(ht),nn=Math.abs(ut)+Math.abs(Rt),cn=w[bt+"anchor"],Ze=w[bt+"shift"]*("x"===bt?1:-1),Qe=Y[bt],Ge=r.getRefType(Ct);if(Ft&&"domain"!==Ge){var rt=Ft.r2fraction(w[bt]);(rt<0||rt>1)&&(Vt===Ct?((rt=Ft.r2fraction(w["a"+bt]))<0||rt>1)&&(qe=!0):qe=!0),He=Ft._offset+Ft.r2p(w[bt]),tt=.5}else{var Le="domain"===Ge;"x"===bt?(et=w[bt],He=Le?Ft._offset+Ft._length*et:He=F.l+F.w*et):(et=1-w[bt],He=Le?Ft._offset+Ft._length*et:He=F.t+F.h*et),tt=w.showarrow?.5:et}if(w.showarrow){Qe.head=He;var ze=w["a"+bt];if(ft=ut*Ve(.5,w.xanchor)-Rt*Ve(.5,w.yanchor),Vt===Ct){var je=r.getRefType(Vt);"domain"===je?("y"===bt&&(ze=1-ze),Qe.tail=Ft._offset+Ft._length*ze):Qe.tail="paper"===je?"y"===bt?F.t+F.h*(ze=1-ze):F.l+F.w*ze:Ft._offset+Ft.r2p(ze),$e=ft}else Qe.tail=He+ze,$e=ft+ze;Qe.text=Qe.tail+ft;var Ne=S["x"===bt?"width":"height"];if("paper"===Ct&&(Qe.head=b.constrain(Qe.head,1,Ne-1)),"pixel"===Vt){var st=-Math.max(Qe.tail-3,Qe.text),mt=Math.min(Qe.tail+3,Qe.text)-Ne;st>0?(Qe.tail+=st,Qe.text+=st):mt>0&&(Qe.tail-=mt,Qe.text-=mt)}Qe.tail+=Ze,Qe.head+=Ze}else $e=ft=nn*Ve(tt,cn),Qe.text=He+ft;Qe.text+=Ze,ft+=Ze,w["_"+bt+"padplus"]=nn/2+($e+=Ze),w["_"+bt+"padminus"]=nn/2-$e,w["_"+bt+"size"]=nn,w["_"+bt+"shift"]=ft}if(qe)j.remove();else{var Tt=0,xt=0;"left"!==w.align&&(Tt=(Te-Re)*("center"===w.align?.5:1)),"top"!==w.valign&&(xt=(Ie-ve)*("middle"===w.valign?.5:1)),De?ke.select("svg").attr({x:re+Tt-1,y:re+xt}).call(a.setClipUrl,te?Z:null,l):de.call(d.positionText,re+Tt-Ee.left,re+xt-Ee.top).call(a.setClipUrl,te?Z:null,l),ne.select("rect").call(a.setRect,re,re,Te,Ie),q.call(a.setRect,H/2,H/2,Ce-H,Pe-H),j.call(a.setTranslate,Math.round(Y.x.text-Ce/2),Math.round(Y.y.text-Pe/2)),$.attr({transform:"rotate("+ee+","+Y.x.text+","+Y.y.text+")"});var Bt,jt=function(it,Mt){Q.selectAll(".annotation-arrow-g").remove();var qt=Y.x.head,Wt=Y.y.head,an=Y.x.tail+it,Ue=Y.y.tail+Mt,yt=Y.x.text+it,Dt=Y.y.text+Mt,Ht=b.rotationXYMatrix(ee,yt,Dt),Jt=b.apply2DTransform(Ht),gn=b.apply2DTransform2(Ht),Qt=+q.attr("width"),sn=+q.attr("height"),hn=yt-.5*Qt,Dn=hn+Qt,_n=Dt-.5*sn,Tn=_n+sn,wn=[[hn,_n,hn,Tn],[hn,Tn,Dn,Tn],[Dn,Tn,Dn,_n],[Dn,_n,hn,_n]].map(gn);if(!wn.reduce(function(jn,nr){return jn^!!b.segmentsIntersect(qt,Wt,qt+1e6,Wt+1e6,nr[0],nr[1],nr[2],nr[3])},!1)){wn.forEach(function(jn){var nr=b.segmentsIntersect(an,Ue,qt,Wt,jn[0],jn[1],jn[2],jn[3]);nr&&(an=nr.x,Ue=nr.y)});var kn=w.arrowwidth,Fn=w.arrowcolor,On=w.arrowside,Qn=Q.append("g").style({opacity:t.opacity(Fn)}).classed("annotation-arrow-g",!0),sr=Qn.append("path").attr("d","M"+an+","+Ue+"L"+qt+","+Wt).style("stroke-width",kn+"px").call(t.stroke,t.rgb(Fn));if(f(sr,On,w),R.annotationPosition&&sr.node().parentNode&&!A){var Mr=qt,Wr=Wt;if(w.standoff){var mr=Math.sqrt(Math.pow(qt-an,2)+Math.pow(Wt-Ue,2));Mr+=w.standoff*(an-qt)/mr,Wr+=w.standoff*(Ue-Wt)/mr}var Or,vr,Xn=Qn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(an-Mr)+","+(Ue-Wr),transform:e(Mr,Wr)}).style("stroke-width",kn+6+"px").call(t.stroke,"rgba(0,0,0,0)").call(t.fill,"rgba(0,0,0,0)");i.init({element:Xn.node(),gd:l,prepFn:function(){var jn=a.getTranslate(j);Or=jn.x,vr=jn.y,M&&M.autorange&&L(M._name+".autorange",!0),k&&k.autorange&&L(k._name+".autorange",!0)},moveFn:function(jn,nr){var Ur=Jt(Or,vr),Jn=Ur[0]+jn,_r=Ur[1]+nr;j.call(a.setTranslate,Jn,_r),B("x",y(M,jn,"x",F,w)),B("y",y(k,nr,"y",F,w)),w.axref===w.xref&&B("ax",y(M,jn,"ax",F,w)),w.ayref===w.yref&&B("ay",y(k,nr,"ay",F,w)),Qn.attr("transform",e(jn,nr)),$.attr({transform:"rotate("+ee+","+Jn+","+_r+")"})},doneFn:function(){x.call("_guiRelayout",l,V());var jn=document.querySelector(".js-notes-box-panel");jn&&jn.redraw(jn.selectedObj)}})}}};w.showarrow&&jt(0,0),K&&i.init({element:j.node(),gd:l,prepFn:function(){Bt=$.attr("transform")},moveFn:function(it,Mt){var qt="pointer";if(w.showarrow)B("ax",w.axref===w.xref?y(M,it,"ax",F,w):w.ax+it),B("ay",w.ayref===w.yref?y(k,Mt,"ay",F.w,w):w.ay+Mt),jt(it,Mt);else{if(A)return;var Wt,an;if(M)Wt=y(M,it,"x",F,w);else{var Ue=w._xsize/F.w;Wt=i.align(w.x+(w._xshift-w.xshift)/F.w-Ue/2+it/F.w,Ue,0,1,w.xanchor)}if(k)an=y(k,Mt,"y",F,w);else{var Dt=w._ysize/F.h;an=i.align(w.y-(w._yshift+w.yshift)/F.h-Dt/2-Mt/F.h,Dt,0,1,w.yanchor)}B("x",Wt),B("y",an),M&&k||(qt=i.getCursor(M?.5:Wt,k?.5:an,w.xanchor,w.yanchor))}$.attr({transform:e(it,Mt)+Bt}),s(j,qt)},clickFn:function(it,Mt){w.captureevents&&l.emit("plotly_clickannotation",he(Mt))},doneFn:function(){s(j),x.call("_guiRelayout",l,V());var it=document.querySelector(".js-notes-box-panel");it&&it.redraw(it.selectedObj)}})}}}ae.exports={draw:function(l){var w=l._fullLayout;w._infolayer.selectAll(".annotation").remove();for(var v=0;v<w.annotations.length;v++)w.annotations[v].visible&&p(l,v);return T.previousPromises(l)},drawOne:p,drawRaw:m}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../color"),T=_("./arrow_paths"),b=_("../../lib"),e=b.strScale,r=b.strRotate,t=b.strTranslate;ae.exports=function(a,n,d){var s,i,u,f,p=a.node(),y=T[d.arrowhead||0],m=T[d.startarrowhead||0],l=(d.arrowwidth||1)*(d.arrowsize||1),w=(d.arrowwidth||1)*(d.startarrowsize||1),v=n.indexOf("start")>=0,A=n.indexOf("end")>=0,M=y.backoff*l+d.standoff,k=m.backoff*w+d.startstandoff;if("line"===p.nodeName){s={x:+a.attr("x1"),y:+a.attr("y1")},i={x:+a.attr("x2"),y:+a.attr("y2")};var E=s.x-i.x,P=s.y-i.y;if(f=(u=Math.atan2(P,E))+Math.PI,M&&k&&M+k>Math.sqrt(E*E+P*P))return void Q();if(M){if(M*M>E*E+P*P)return void Q();var S=M*Math.cos(u),F=M*Math.sin(u);i.x+=S,i.y+=F,a.attr({x2:i.x,y2:i.y})}if(k){if(k*k>E*E+P*P)return void Q();var R=k*Math.cos(u),D=k*Math.sin(u);s.x-=R,s.y-=D,a.attr({x1:s.x,y1:s.y})}}else if("path"===p.nodeName){var L=p.getTotalLength(),B="";if(L<M+k)return void Q();var V=p.getPointAtLength(0),Z=p.getPointAtLength(.1);u=Math.atan2(V.y-Z.y,V.x-Z.x),s=p.getPointAtLength(Math.min(k,L)),B="0px,"+k+"px,";var Y=p.getPointAtLength(L),ee=p.getPointAtLength(L-.1);f=Math.atan2(Y.y-ee.y,Y.x-ee.x),i=p.getPointAtLength(Math.max(0,L-M)),a.style("stroke-dasharray",B+=L-(B?k+M:M)+"px,"+L+"px")}function Q(){a.style("stroke-dasharray","0px,100px")}function $(K,oe,j,H){K.path&&(K.noRotate&&(j=0),g.select(p.parentNode).append("path").attr({class:a.attr("class"),d:K.path,transform:t(oe.x,oe.y)+r(180*j/Math.PI)+e(H)}).style({fill:x.rgb(d.arrowcolor),"stroke-width":0}))}v&&$(m,s,u,w),A&&$(y,i,f,l)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(_,ae,ie){"use strict";var g=_("./draw"),x=_("./click");ae.exports={moduleType:"component",name:"annotations",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),includeBasePlot:_("../../plots/cartesian/include_components")("annotations"),calcAutorange:_("./calc_autorange"),draw:g.draw,drawOne:g.drawOne,drawRaw:g.drawRaw,hasClickToShow:x.hasClickToShow,onClick:x.onClick,convertCoords:_("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(_,ae,ie){"use strict";var g=_("../annotations/attributes"),x=_("../../plot_api/edit_types").overrideAll,T=_("../../plot_api/plot_template").templatedArray;ae.exports=x(T("annotation",{visible:g.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:g.xanchor,xshift:g.xshift,yanchor:g.yanchor,yshift:g.yshift,text:g.text,textangle:g.textangle,font:g.font,width:g.width,height:g.height,opacity:g.opacity,align:g.align,valign:g.valign,bgcolor:g.bgcolor,bordercolor:g.bordercolor,borderpad:g.borderpad,borderwidth:g.borderwidth,showarrow:g.showarrow,arrowcolor:g.arrowcolor,arrowhead:g.arrowhead,startarrowhead:g.startarrowhead,arrowside:g.arrowside,arrowsize:g.arrowsize,startarrowsize:g.startarrowsize,arrowwidth:g.arrowwidth,standoff:g.standoff,startstandoff:g.startstandoff,hovertext:g.hovertext,hoverlabel:g.hoverlabel,captureevents:g.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes");function T(b,e){var r=e.fullSceneLayout.domain,t=e.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};b._xa={},g.extendFlat(b._xa,a),x.setConvert(b._xa),b._xa._offset=t.l+r.x[0]*t.w,b._xa.l2p=function(){return.5*(1+b._pdata[0]/b._pdata[3])*t.w*(r.x[1]-r.x[0])},b._ya={},g.extendFlat(b._ya,a),x.setConvert(b._ya),b._ya._offset=t.t+(1-r.y[1])*t.h,b._ya.l2p=function(){return.5*(1-b._pdata[1]/b._pdata[3])*t.h*(r.y[1]-r.y[0])}}ae.exports=function(b){for(var e=b.fullSceneLayout.annotations,r=0;r<e.length;r++)T(e[r],b);b.fullLayout._infolayer.selectAll(".annotation-"+b.id).remove()}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("../annotations/common_defaults"),e=_("./attributes");function r(t,a,n,d){function s(u,f){return g.coerce(t,a,e,u,f)}function i(u){var f=u+"axis",p={_fullLayout:{}};return p._fullLayout[f]=n[f],x.coercePosition(a,p,s,u,u,.5)}s("visible")&&(b(t,a,d.fullLayout,s),i("x"),i("y"),i("z"),g.noneOrAll(t,a,["x","y","z"]),a.xref="x",a.yref="y",a.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),a.showarrow&&(a.axref="pixel",a.ayref="pixel",s("ax",-10),s("ay",-30),g.noneOrAll(t,a,["ax","ay"])))}ae.exports=function(t,a,n){T(t,a,{name:"annotations",handleItemDefaults:r,fullLayout:n.fullLayout})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(_,ae,ie){"use strict";var g=_("../annotations/draw").drawRaw,x=_("../../plots/gl3d/project"),T=["x","y","z"];ae.exports=function(b){for(var e=b.fullSceneLayout,r=b.dataScale,t=e.annotations,a=0;a<t.length;a++){for(var n=t[a],d=!1,s=0;s<3;s++){var i=T[s],f=e[i+"axis"].r2fraction(n[i]);if(f<0||f>1){d=!0;break}}d?b.fullLayout._infolayer.select(".annotation-"+b.id+'[data-index="'+a+'"]').remove():(n._pdata=x(b.glplot.cameraParams,[e.xaxis.r2l(n.x)*r[0],e.yaxis.r2l(n.y)*r[1],e.zaxis.r2l(n.z)*r[2]]),g(b.graphDiv,n,a,b.id,n._xa,n._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib");ae.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:_("./attributes")}}},layoutAttributes:_("./attributes"),handleDefaults:_("./defaults"),includeBasePlot:function(T,b){var e=g.subplotsRegistry.gl3d;if(e)for(var r=e.attrRegex,t=Object.keys(T),a=0;a<t.length;a++){var n=t[a];r.test(n)&&(T[n].annotations||[]).length&&(x.pushUnique(b._basePlotModules,e),x.pushUnique(b._subplots.gl3d,n))}},convert:_("./convert"),draw:_("./draw")}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(_,ae,ie){"use strict";ae.exports=_("world-calendars/dist/main"),_("world-calendars/dist/plus"),_("world-calendars/dist/calendars/chinese"),_("world-calendars/dist/calendars/coptic"),_("world-calendars/dist/calendars/discworld"),_("world-calendars/dist/calendars/ethiopian"),_("world-calendars/dist/calendars/hebrew"),_("world-calendars/dist/calendars/islamic"),_("world-calendars/dist/calendars/julian"),_("world-calendars/dist/calendars/mayan"),_("world-calendars/dist/calendars/nanakshahi"),_("world-calendars/dist/calendars/nepali"),_("world-calendars/dist/calendars/persian"),_("world-calendars/dist/calendars/taiwan"),_("world-calendars/dist/calendars/thai"),_("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(_,ae,ie){"use strict";var g=_("./calendars"),x=_("../../lib"),T=_("../../constants/numerical"),b=T.EPOCHJD,e=T.ONEDAY,r={valType:"enumerated",values:x.sortObjectKeys(g.calendars),editType:"calc",dflt:"gregorian"},t=function(m,l,w,v){var A={};return A[w]=r,x.coerce(m,l,A,w,v)},a={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function d(m){return n[m]||(n[m]=g.instance(m))}function s(m){return x.extendFlat({},r,{description:m})}function i(m){return"Sets the calendar system to use with `"+m+"` date data."}var u={xcalendar:s(i("x"))},f=x.extendFlat({},u,{ycalendar:s(i("y"))}),p=x.extendFlat({},f,{zcalendar:s(i("z"))}),y=s(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ae.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:f,bar:f,box:f,heatmap:f,contour:f,histogram:f,histogram2d:f,histogram2dcontour:f,scatter3d:p,surface:p,mesh3d:p,scattergl:f,ohlc:u,candlestick:u},layout:{calendar:s(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:y},yaxis:{calendar:y},scene:{xaxis:{calendar:y},yaxis:{calendar:y},zaxis:{calendar:y}},polar:{radialaxis:{calendar:y}}},transforms:{filter:{valuecalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:r,handleDefaults:t,handleTraceDefaults:function(m,l,w,v){for(var A=0;A<w.length;A++)t(m,l,w[A]+"calendar",v.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:d,worldCalFmt:function(m,l,w){for(var v,A,M,k,E,P=Math.floor((l+.05)/e)+b,S=d(w).fromJD(P),F=0;-1!==(F=m.indexOf("%",F));)"0"===(v=m.charAt(F+1))||"-"===v||"_"===v?(M=3,A=m.charAt(F+2),"_"===v&&(v="-")):(A=v,v="0",M=2),(k=a[A])?(E="##"===k?"##":S.formatDate(k[v]),m=m.substr(0,F)+E+m.substr(F+M),F+=E.length):F+=M;return m}}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(_,ae,ie){"use strict";ie.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ie.defaultLine="#444",ie.lightLine="#eee",ie.background="#fff",ie.borderLine="#BEC8D9",ie.lightFraction=1e3/11},{}],366:[function(_,ae,ie){"use strict";var g=_("tinycolor2"),x=_("fast-isnumeric"),T=_("../../lib/array").isTypedArray,b=ae.exports={},e=_("./attributes");b.defaults=e.defaults;var r=b.defaultLine=e.defaultLine;b.lightLine=e.lightLine;var t=b.background=e.background;function a(n){if(x(n)||"string"!=typeof n)return n;var d=n.trim();if("rgb"!==d.substr(0,3))return n;var s=d.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return n;var i=s[1].trim().split(/\s*[\s,]\s*/),u="a"===d.charAt(3)&&4===i.length;if(!u&&3!==i.length)return n;for(var f=0;f<i.length;f++){if(!(i[f].length&&(i[f]=Number(i[f]),i[f]>=0)))return n;if(3===f)i[f]>1&&(i[f]=1);else if(i[f]>=1)return n}var p=Math.round(255*i[0])+", "+Math.round(255*i[1])+", "+Math.round(255*i[2]);return u?"rgba("+p+", "+i[3]+")":"rgb("+p+")"}b.tinyRGB=function(n){var d=n.toRgb();return"rgb("+Math.round(d.r)+", "+Math.round(d.g)+", "+Math.round(d.b)+")"},b.rgb=function(n){return b.tinyRGB(g(n))},b.opacity=function(n){return n?g(n).getAlpha():0},b.addOpacity=function(n,d){var s=g(n).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+d+")"},b.combine=function(n,d){var s=g(n).toRgb();if(1===s.a)return g(n).toRgbString();var i=g(d||t).toRgb(),u=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a};return g({r:u.r*(1-s.a)+s.r*s.a,g:u.g*(1-s.a)+s.g*s.a,b:u.b*(1-s.a)+s.b*s.a}).toRgbString()},b.contrast=function(n,d,s){var i=g(n);return 1!==i.getAlpha()&&(i=g(b.combine(n,t))),(i.isDark()?d?i.lighten(d):t:s?i.darken(s):r).toString()},b.stroke=function(n,d){var s=g(d);n.style({stroke:b.tinyRGB(s),"stroke-opacity":s.getAlpha()})},b.fill=function(n,d){var s=g(d);n.style({fill:b.tinyRGB(s),"fill-opacity":s.getAlpha()})},b.clean=function(n){if(n&&"object"==typeof n){var d,s,i,u,f=Object.keys(n);for(d=0;d<f.length;d++)if(u=n[i=f[d]],"color"===i.substr(i.length-5))if(Array.isArray(u))for(s=0;s<u.length;s++)u[s]=a(u[s]);else n[i]=a(u);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(u))for(s=0;s<u.length;s++)Array.isArray(u[s])&&(u[s][1]=a(u[s][1]));else if(Array.isArray(u)){var p=u[0];if(!Array.isArray(p)&&p&&"object"==typeof p)for(s=0;s<u.length;s++)b.clean(u[s])}else u&&"object"==typeof u&&!T(u)&&b.clean(u)}}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/layout_attributes"),x=_("../../plots/font_attributes"),T=_("../../lib/extend").extendFlat,b=_("../../plot_api/edit_types").overrideAll;ae.exports=b({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:g.linecolor,outlinewidth:g.linewidth,bordercolor:g.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:T({},g.ticks,{dflt:""}),ticklabeloverflow:T({},g.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:x({}),tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,separatethousands:g.separatethousands,exponentformat:g.exponentformat,minexponent:g.minexponent,showexponent:g.showexponent,title:{text:{valType:"string"},font:x({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:x({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(_,ae,ie){"use strict";ae.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plot_api/plot_template"),T=_("../../plots/cartesian/tick_value_defaults"),b=_("../../plots/cartesian/tick_mark_defaults"),e=_("../../plots/cartesian/tick_label_defaults"),r=_("../../plots/cartesian/prefix_suffix_defaults"),t=_("./attributes");ae.exports=function(a,n,d){var s=x.newContainer(n,"colorbar"),i=a.colorbar||{};function u(P,S){return g.coerce(i,s,t,P,S)}var f=d.margin||{t:0,b:0,l:0,r:0},p=d.width-f.l-f.r,y=d.height-f.t-f.b,m="v"===u("orientation"),l=u("thicknessmode");u("thickness","fraction"===l?30/(m?p:y):30);var w=u("lenmode");u("len","fraction"===w?1:m?y:p),u("x",m?1.02:.5),u("xanchor",m?"left":"center"),u("xpad"),u("y",m?.5:1.02),u("yanchor",m?"middle":"bottom"),u("ypad"),g.noneOrAll(i,s,["x","y"]),u("outlinecolor"),u("outlinewidth"),u("bordercolor"),u("borderwidth"),u("bgcolor");var v=g.coerce(i,s,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:m?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");u("ticklabeloverflow",-1!==v.indexOf("inside")?"hide past domain":"hide past div"),T(i,s,u,"linear");var A=d.font,M={outerTicks:!1,font:A};-1!==v.indexOf("inside")&&(M.bgColor="black"),r(i,s,u,"linear",M),e(i,s,u,"linear",M),b(i,s,u,"linear",M),u("title.text",d._dfltTitle.colorbar);var k=s.tickfont,E=g.extendFlat({},k,{color:A.color,size:g.bigFont(k.size)});g.coerceFont(u,"title.font",E),u("title.side",m?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../plots/cartesian/axes"),r=_("../dragelement"),t=_("../../lib"),a=t.strTranslate,n=_("../../lib/extend").extendFlat,d=_("../../lib/setcursor"),s=_("../drawing"),i=_("../color"),u=_("../titles"),f=_("../../lib/svg_text_utils"),p=_("../colorscale/helpers").flipScale,y=_("../../plots/cartesian/axis_defaults"),m=_("../../plots/cartesian/position_defaults"),l=_("../../plots/cartesian/layout_attributes"),w=_("../../constants/alignment"),v=w.LINE_SPACING,A=w.FROM_TL,M=w.FROM_BR,k=_("./constants").cn;ae.exports={draw:function(E){var P=E._fullLayout._infolayer.selectAll("g."+k.colorbar).data(function(S){var F,R,D,L,B=S._fullLayout,V=S.calcdata,Z=[];function Y(te){return n(te,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function ee(){"function"==typeof L.calc?L.calc(S,D,F):(F._fillgradient=R.reversescale?p(R.colorscale):R.colorscale,F._zrange=[R[L.min],R[L.max]])}for(var Q=0;Q<V.length;Q++){var K=(D=V[Q][0].trace)._module.colorbar;if(!0===D.visible&&K)for(var oe=Array.isArray(K),j=oe?K:[K],H=0;H<j.length;H++){var G=(L=j[H]).container;(R=G?D[G]:D)&&R.showscale&&((F=Y(R.colorbar))._id="cb"+D.uid+(oe&&G?"-"+G:""),F._traceIndex=D.index,F._propPrefix=(G?G+".":"")+"colorbar.",F._meta=D._meta,ee(),Z.push(F))}}for(var re in B._colorAxes)if((R=B[re]).showscale){var q=B._colorAxes[re];(F=Y(R.colorbar))._id="cb"+re,F._propPrefix=re+".colorbar.",F._meta=B._meta,L={min:"cmin",max:"cmax"},"heatmap"!==q[0]&&(L.calc=(D=q[1])._module.colorbar.calc),ee(),Z.push(F)}return Z}(E),function(S){return S._id});P.enter().append("g").attr("class",function(S){return S._id}).classed(k.colorbar,!0),P.each(function(S){var F=g.select(this);t.ensureSingle(F,"rect",k.cbbg),t.ensureSingle(F,"g",k.cbfills),t.ensureSingle(F,"g",k.cblines),t.ensureSingle(F,"g",k.cbaxis,function(D){D.classed(k.crisp,!0)}),t.ensureSingle(F,"g",k.cbtitleunshift,function(D){D.append("g").classed(k.cbtitle,!0)}),t.ensureSingle(F,"rect",k.cboutline);var D,L,B,V,Z,Y,ee,Q,R=function(D,L,B){var V="v"===L.orientation,Z=L.len,Y=L.lenmode,ee=L.thickness,Q=L.thicknessmode,$=L.outlinewidth,K=L.borderwidth,oe=L.bgcolor,j=L.xanchor,H=L.yanchor,G=L.xpad,re=L.ypad,q=L.x,te=V?L.y:1-L.y,ne=B._fullLayout,le=ne._size,ue=L._fillcolor,de=L._line,he=L.title,be=he.side,ge=L._zrange||g.extent(("function"==typeof ue?ue:de.color).domain()),we="function"==typeof de.color?de.color:function(){return de.color},ke="function"==typeof ue?ue:function(){return ue},De=L._levels,Ee=function(Ge,rt,Le){var ze,je,Ne=rt._levels,st=[],mt=[],Tt=Ne.end+Ne.size/100,xt=Ne.size,zt=1.001*Le[0]-.001*Le[1],gt=1.001*Le[1]-.001*Le[0];for(je=0;je<1e5&&(ze=Ne.start+je*xt,!(xt>0?ze>=Tt:ze<=Tt));je++)ze>zt&&ze<gt&&st.push(ze);if(rt._fillgradient)mt=[0];else if("function"==typeof rt._fillcolor){var Bt=rt._filllevels;if(Bt)for(Tt=Bt.end+Bt.size/100,xt=Bt.size,je=0;je<1e5&&(ze=Bt.start+je*xt,!(xt>0?ze>=Tt:ze<=Tt));je++)ze>Le[0]&&ze<Le[1]&&mt.push(ze);else(mt=st.map(function(jt){return jt-Ne.size/2})).push(mt[mt.length-1]+Ne.size)}else rt._fillcolor&&"string"==typeof rt._fillcolor&&(mt=[0]);return Ne.size<0&&(st.reverse(),mt.reverse()),{line:st,fill:mt}}(0,L,ge),Re=Ee.fill,ve=Ee.line,Te=Math.round(ee*("fraction"===Q?V?le.w:le.h:1)),Ie=Te/(V?le.w:le.h),Ce=Math.round(Z*("fraction"===Y?V?le.h:le.w:1)),Pe=Ce/(V?le.h:le.w),Ve=Math.round(V?q*le.w+G:te*le.h+re),qe={center:.5,right:1}[j]||0,Je={top:1,middle:.5}[H]||0,lt=V?q-qe*Ie:te-Je*Ie,He=V?te-Je*Pe:q-qe*Pe,$e=Math.round(V?le.h*(1-He):le.w*He);L._lenFrac=Pe,L._thickFrac=Ie,L._uFrac=lt,L._vFrac=He;var et=L._axis=function(Ge,rt,Le){var ze=Ge._fullLayout,je="v"===rt.orientation,Ne={type:"linear",range:Le,tickmode:rt.tickmode,nticks:rt.nticks,tick0:rt.tick0,dtick:rt.dtick,tickvals:rt.tickvals,ticktext:rt.ticktext,ticks:rt.ticks,ticklen:rt.ticklen,tickwidth:rt.tickwidth,tickcolor:rt.tickcolor,showticklabels:rt.showticklabels,ticklabelposition:rt.ticklabelposition,ticklabeloverflow:rt.ticklabeloverflow,tickfont:rt.tickfont,tickangle:rt.tickangle,tickformat:rt.tickformat,exponentformat:rt.exponentformat,minexponent:rt.minexponent,separatethousands:rt.separatethousands,showexponent:rt.showexponent,showtickprefix:rt.showtickprefix,tickprefix:rt.tickprefix,showticksuffix:rt.showticksuffix,ticksuffix:rt.ticksuffix,title:rt.title,showline:!0,anchor:"free",side:je?"right":"bottom",position:1},st=je?"y":"x",mt={type:"linear",_id:st+rt._id},Tt={letter:st,font:ze.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:ze.calendar};function xt(zt,gt){return t.coerce(Ne,mt,l,zt,gt)}return y(Ne,mt,xt,Tt,ze),m(Ne,mt,xt,Tt),mt}(B,L,ge);et.position=Ie+(V?q+G/le.w:te+re/le.h);var tt=-1!==["top","bottom"].indexOf(be);if(V&&tt&&(et.title.side=be,et.titlex=q+G/le.w,et.titley=He+("top"===he.side?Pe-re/le.h:re/le.h)),V||tt||(et.title.side=be,et.titley=te+re/le.h,et.titlex=He+G/le.w),de.color&&"auto"===L.tickmode){et.tickmode="linear",et.tick0=De.start;var ft=De.size,bt=t.constrain(Ce/50,4,15)+1,Ct=(ge[1]-ge[0])/((L.nticks||bt)*ft);if(Ct>1){var Vt=Math.pow(10,Math.floor(Math.log(Ct)/Math.LN10));ft*=Vt*t.roundUp(Ct/Vt,[2,5,10]),(Math.abs(De.start)/De.size+1e-6)%1<2e-6&&(et.tick0=0)}et.dtick=ft}et.domain=V?[He+re/le.h,He+Pe-re/le.h]:[He+G/le.w,He+Pe-G/le.w],et.setScale(),D.attr("transform",a(Math.round(le.l),Math.round(le.t)));var Ft,ht=D.select("."+k.cbtitleunshift).attr("transform",a(-Math.round(le.l),-Math.round(le.t))),ut=et.ticklabelposition,Rt=et.title.font.size,nn=D.select("."+k.cbaxis),cn=0,Ze=0;function Qe(Ge,rt){var Le={propContainer:et,propName:L._propPrefix+"title",traceIndex:L._traceIndex,_meta:L._meta,placeholder:ne._dfltTitle.colorbar,containerGroup:D.select("."+k.cbtitle)},ze="h"===Ge.charAt(0)?Ge.substr(1):"h"+Ge;D.selectAll("."+ze+",."+ze+"-math-group").remove(),u.draw(B,Ge,n(Le,rt||{}))}return t.syncOrAsync([T.previousPromises,function(){var Ge,rt;(V&&tt||!V&&!tt)&&("top"===be&&(Ge=G+le.l+le.w*q,rt=re+le.t+le.h*(1-He-Pe)+3+.75*Rt),"bottom"===be&&(Ge=G+le.l+le.w*q,rt=re+le.t+le.h*(1-He)-3-.25*Rt),"right"===be&&(rt=re+le.t+le.h*te+3+.75*Rt,Ge=G+le.l+le.w*He),Qe(et._id+"title",{attributes:{x:Ge,y:rt,"text-anchor":V?"start":"middle"}}))},function(){if(!V&&!tt||V&&tt){var Ge,rt=D.select("."+k.cbtitle),Le=rt.select("text"),ze=[-$/2,$/2],je=rt.select(".h"+et._id+"title-math-group").node(),Ne=15.6;if(Le.node()&&(Ne=parseInt(Le.node().style.fontSize,10)*v),je?(Ge=s.bBox(je),Ze=Ge.width,(cn=Ge.height)>Ne&&(ze[1]-=(cn-Ne)/2)):Le.node()&&!Le.classed(k.jsPlaceholder)&&(Ge=s.bBox(Le.node()),Ze=Ge.width,cn=Ge.height),V){if(cn){if(cn+=5,"top"===be)et.domain[1]-=cn/le.h,ze[1]*=-1;else{et.domain[0]+=cn/le.h;var st=f.lineCount(Le);ze[1]+=(1-st)*Ne}rt.attr("transform",a(ze[0],ze[1])),et.setScale()}}else Ze&&("right"===be&&(et.domain[0]+=(Ze+Rt/2)/le.w),rt.attr("transform",a(ze[0],ze[1])),et.setScale())}D.selectAll("."+k.cbfills+",."+k.cblines).attr("transform",V?a(0,Math.round(le.h*(1-et.domain[1]))):a(Math.round(le.w*et.domain[0]),0)),nn.attr("transform",V?a(0,Math.round(-le.t)):a(Math.round(-le.l),0));var mt=D.select("."+k.cbfills).selectAll("rect."+k.cbfill).attr("style","").data(Re);mt.enter().append("rect").classed(k.cbfill,!0).style("stroke","none"),mt.exit().remove();var Tt=ge.map(et.c2p).map(Math.round).sort(function(jt,it){return jt-it});mt.each(function(jt,it){var Mt=[0===it?ge[0]:(Re[it]+Re[it-1])/2,it===Re.length-1?ge[1]:(Re[it]+Re[it+1])/2].map(et.c2p).map(Math.round);V&&(Mt[1]=t.constrain(Mt[1]+(Mt[1]>Mt[0])?1:-1,Tt[0],Tt[1]));var qt=g.select(this).attr(V?"x":"y",Ve).attr(V?"y":"x",g.min(Mt)).attr(V?"width":"height",Math.max(Te,2)).attr(V?"height":"width",Math.max(g.max(Mt)-g.min(Mt),2));if(L._fillgradient)s.gradient(qt,B,L._id,V?"vertical":"horizontalreversed",L._fillgradient,"fill");else{var Wt=ke(jt).replace("e-","");qt.attr("fill",x(Wt).toHexString())}});var xt=D.select("."+k.cblines).selectAll("path."+k.cbline).data(de.color&&de.width?ve:[]);xt.enter().append("path").classed(k.cbline,!0),xt.exit().remove(),xt.each(function(jt){var it=Ve,Mt=Math.round(et.c2p(jt))+de.width/2%1;g.select(this).attr("d","M"+(V?it+","+Mt:Mt+","+it)+(V?"h":"v")+Te).call(s.lineGroupStyle,de.width,we(jt),de.dash)}),nn.selectAll("g."+et._id+"tick,path").remove();var zt=Ve+Te+($||0)/2-("outside"===L.ticks?1:0),gt=e.calcTicks(et),Bt=e.getTickSigns(et)[2];return e.drawTicks(B,et,{vals:"inside"===et.ticks?e.clipEnds(et,gt):gt,layer:nn,path:e.makeTickPath(et,zt,Bt),transFn:e.makeTransTickFn(et)}),e.drawLabels(B,et,{vals:gt,layer:nn,transFn:e.makeTransTickLabelFn(et),labelFns:e.makeLabelFns(et,zt)})},function(){if(V&&!tt||!V&&tt){var Ge,rt,Le=et.position||0,ze=et._offset+et._length/2;if("right"===be)rt=ze,Ge=le.l+le.w*Le+10+Rt*(et.showticklabels?1:.5);else if(Ge=ze,"bottom"===be&&(rt=le.t+le.h*Le+10+(-1===ut.indexOf("inside")?et.tickfont.size:0)+("intside"!==et.ticks&&L.ticklen||0)),"top"===be){var je=he.text.split("<br>").length;rt=le.t+le.h*Le+10-Te-v*Rt*je}Qe((V?"h":"v")+et._id+"title",{avoid:{selection:g.select(B).selectAll("g."+et._id+"tick"),side:be,offsetTop:V?0:le.t,offsetLeft:V?le.l:0,maxShift:V?ne.width:ne.height},attributes:{x:Ge,y:rt,"text-anchor":"middle"},transform:{rotate:V?-90:0,offset:0}})}},T.previousPromises,function(){var Ge,rt=Te+$/2;-1===ut.indexOf("inside")&&(Ge=s.bBox(nn.node()),rt+=V?Ge.width:Ge.height),Ft=ht.select("text");var Le=0,ze=V&&"top"===be,je=!V&&"right"===be,Ne=0;if(Ft.node()&&!Ft.classed(k.jsPlaceholder)){var st,mt=ht.select(".h"+et._id+"title-math-group").node();mt&&(V&&tt||!V&&!tt)?(Le=(Ge=s.bBox(mt)).width,st=Ge.height):(Le=(Ge=s.bBox(ht.node())).right-le.l-(V?Ve:$e),st=Ge.bottom-le.t-(V?$e:Ve),V||"top"!==be||(rt+=Ge.height,Ne=Ge.height)),je&&(Ft.attr("transform",a(Le/2+Rt/2,0)),Le*=2),rt=Math.max(rt,V?Le:st)}var Tt=2*(V?G:re)+rt+K+$/2,xt=0;!V&&he.text&&"bottom"===H&&te<=0&&(Tt+=xt=Tt/2,Ne+=xt),ne._hColorbarMoveTitle=xt,ne._hColorbarMoveCBTitle=Ne;var zt=K+$;D.select("."+k.cbbg).attr("x",(V?Ve:$e)-zt/2-(V?G:0)).attr("y",(V?$e:Ve)-(V?Ce:re+Ne-xt)).attr(V?"width":"height",Math.max(Tt-xt,2)).attr(V?"height":"width",Math.max(Ce+zt,2)).call(i.fill,oe).call(i.stroke,L.bordercolor).style("stroke-width",K);var gt=je?Math.max(Le-10,0):0;if(D.selectAll("."+k.cboutline).attr("x",(V?Ve:$e+G)+gt).attr("y",(V?$e+re-Ce:Ve)+(ze?cn:0)).attr(V?"width":"height",Math.max(Te,2)).attr(V?"height":"width",Math.max(Ce-(V?2*re+cn:2*G+gt),2)).call(i.stroke,L.outlinecolor).style({fill:"none","stroke-width":$}),D.attr("transform",a(le.l-(V?qe*Tt:0),le.t-(V?0:(1-Je)*Tt-Ne))),!V&&(K||x(oe).getAlpha()&&!x.equals(ne.paper_bgcolor,oe))){var Bt=nn.selectAll("text"),jt=Bt[0].length,it=D.select("."+k.cbbg).node(),Mt=s.bBox(it),qt=s.getTranslate(D);Bt.each(function(Jt,gn){var Qt=jt-1;if(0===gn||gn===Qt){var sn,hn=s.bBox(this),Dn=s.getTranslate(this);gn===Qt?(sn=Mt.right+qt.x+$e-K-2+q-(hn.right+Dn.x))>0&&(sn=0):0===gn&&(sn=Mt.left+qt.x+$e+K+2-(hn.left+Dn.x))<0&&(sn=0),sn&&(jt<3?this.setAttribute("transform","translate("+sn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Wt={},an=A[j],Ue=M[j],yt=A[H],Dt=M[H],Ht=Tt-Te;V?("pixels"===Y?(Wt.y=te,Wt.t=Ce*yt,Wt.b=Ce*Dt):(Wt.t=Wt.b=0,Wt.yt=te+Z*yt,Wt.yb=te-Z*Dt),"pixels"===Q?(Wt.x=q,Wt.l=Tt*an,Wt.r=Tt*Ue):(Wt.l=Ht*an,Wt.r=Ht*Ue,Wt.xl=q-ee*an,Wt.xr=q+ee*Ue)):("pixels"===Y?(Wt.x=q,Wt.l=Ce*an,Wt.r=Ce*Ue):(Wt.l=Wt.r=0,Wt.xl=q+Z*an,Wt.xr=q-Z*Ue),"pixels"===Q?(Wt.y=1-te,Wt.t=Tt*yt,Wt.b=Tt*Dt):(Wt.t=Ht*yt,Wt.b=Ht*Dt,Wt.yt=te-ee*yt,Wt.yb=te+ee*Dt)),T.autoMargin(B,L._id,Wt)}],B)}(F,S,E);R&&R.then&&(E._promises||[]).push(R),E._context.edits.colorbarPosition&&(ee="v"===(L=S).orientation,Q=(B=E)._fullLayout._size,r.init({element:(D=F).node(),gd:B,prepFn:function(){V=D.attr("transform"),d(D)},moveFn:function($,K){D.attr("transform",V+a($,K)),Z=r.align((ee?L._uFrac:L._vFrac)+$/Q.w,ee?L._thickFrac:L._lenFrac,0,1,L.xanchor),Y=r.align((ee?L._vFrac:1-L._uFrac)-K/Q.h,ee?L._lenFrac:L._thickFrac,0,1,L.yanchor);var oe=r.getCursor(Z,Y,L.xanchor,L.yanchor);d(D,oe)},doneFn:function(){if(d(D),void 0!==Z&&void 0!==Y){var $={};$[L._propPrefix+"x"]=Z,$[L._propPrefix+"y"]=Y,void 0!==L._traceIndex?b.call("_guiRestyle",B,$,L._traceIndex):b.call("_guiRelayout",B,$)}}}))}),P.exit().each(function(S){T.autoMargin(E,S._id)}).remove(),P.order()}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x){return g.isPlainObject(x.colorbar)}},{"../../lib":503}],372:[function(_,ae,ie){"use strict";ae.exports={moduleType:"component",name:"colorbar",attributes:_("./attributes"),supplyDefaults:_("./defaults"),draw:_("./draw").draw,hasColorbar:_("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(_,ae,ie){"use strict";var g=_("../colorbar/attributes"),x=_("../../lib/regex").counter,T=_("../../lib/sort_object_keys"),b=_("./scales.js").scales;function e(r){return"`"+r+"`"}T(b),ae.exports=function(r,t){r=r||"";var a,n=(t=t||{}).cLetter||"c",d=("onlyIfNumerical"in t||Boolean(r),"noScale"in t?t.noScale:"marker.line"===r),s="showScaleDflt"in t?t.showScaleDflt:"z"===n,i="string"==typeof t.colorscaleDflt?b[t.colorscaleDflt]:null,u=t.editTypeOverride||"",f=r?r+".":"";"colorAttr"in t?a=t.colorAttr:e(f+(a={z:"z",c:"color"}[n]));var p=n+"auto",y=n+"min",m=n+"max",l=n+"mid",w=(e(f+p),e(f+y),e(f+m),{});w[y]=w[m]=void 0;var v={};v[p]=!1;var A={};return"color"===a&&(A.color={valType:"color",arrayOk:!0,editType:u||"style"},t.anim&&(A.color.anim=!0)),A[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:w},A[y]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:v},A[m]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:v},A[l]={valType:"number",dflt:null,editType:"calc",impliedEdits:w},A.colorscale={valType:"colorscale",editType:"calc",dflt:i,impliedEdits:{autocolorscale:!1}},A.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},A.reversescale={valType:"boolean",dflt:!1,editType:"plot"},d||(A.showscale={valType:"boolean",dflt:s,editType:"calc"},A.colorbar=g),t.noColorAxis||(A.coloraxis={valType:"subplotid",regex:x("coloraxis"),dflt:null,editType:"calc"}),A}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("./helpers").extractOpts;ae.exports=function(b,e,r){var a=b._fullLayout,n=r.vals,d=r.containerStr,s=d?x.nestedProperty(e,d).get():e,i=T(s),u=!1!==i.auto,f=i.min,p=i.max,y=i.mid,m=function(){return x.aggNums(Math.min,null,n)},l=function(){return x.aggNums(Math.max,null,n)};void 0===f?f=m():u&&(f=s._colorAx&&g(f)?Math.min(f,m()):m()),void 0===p?p=l():u&&(p=s._colorAx&&g(p)?Math.max(p,l()):l()),u&&void 0!==y&&(p-y>y-f?f=y-(p-y):p-y<y-f&&(p=y+(y-f))),f===p&&(f-=.5,p+=.5),i._sync("min",f),i._sync("max",p),i.autocolorscale&&i._sync("colorscale",f*p<0?a.colorscale.diverging:f>=0?a.colorscale.sequential:a.colorscale.sequentialminus)}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./helpers").hasColorscale,T=_("./helpers").extractOpts;ae.exports=function(b,e){function r(u,f){var p=u["_"+f];void 0!==p&&(u[f]=p)}function t(u,f){var p=f.container?g.nestedProperty(u,f.container).get():u;if(p)if(p.coloraxis)p._colorAx=e[p.coloraxis];else{var y=T(p),m=y.auto;(m||void 0===y.min)&&r(p,f.min),(m||void 0===y.max)&&r(p,f.max),y.autocolorscale&&r(p,"colorscale")}}for(var a=0;a<b.length;a++){var n=b[a],d=n._module.colorbar;if(d)if(Array.isArray(d))for(var s=0;s<d.length;s++)t(n,d[s]);else t(n,d);x(n,"marker.line")&&t(n,{container:"marker.line",min:"cmin",max:"cmax"})}for(var i in e._colorAxes)t(e[i],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("../colorbar/has_colorbar"),b=_("../colorbar/defaults"),e=_("./scales").isValid,r=_("../../registry").traceIs;function t(a,n){var d=n.slice(0,n.length-1);return n?x.nestedProperty(a,d).get()||{}:a}ae.exports=function a(n,d,s,i,u){var f=u.prefix,p=u.cLetter,y="_module"in d,m=t(n,f),l=t(d,f),w=t(d._template||{},f)||{},v=function(){return delete n.coloraxis,delete d.coloraxis,a(n,d,s,i,u)};if(y){var A=s._colorAxes||{},M=i(f+"coloraxis");if(M){var k=r(d,"contour")&&x.nestedProperty(d,"contours.coloring").get()||"heatmap",E=A[M];return void(E?(E[2].push(v),E[0]!==k&&(E[0]=!1,x.warn(["Ignoring coloraxis:",M,"setting","as it is linked to incompatible colorscales."].join(" ")))):A[M]=[k,d,[v]])}}var P=m[p+"min"],S=m[p+"max"],F=g(P)&&g(S)&&P<S;i(f+p+"auto",!F)?i(f+p+"mid"):(i(f+p+"min"),i(f+p+"max"));var R,D,L=m.colorscale,B=w.colorscale;void 0!==L&&(R=!e(L)),void 0!==B&&(R=!e(B)),i(f+"autocolorscale",R),i(f+"colorscale"),i(f+"reversescale"),"marker.line."!==f&&(f&&y&&(D=T(m)),i(f+"showscale",D)&&(f&&w&&(l._template=w),b(m,l,s)))}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("tinycolor2"),T=_("fast-isnumeric"),b=_("../../lib"),e=_("../color"),r=_("./scales").isValid,t=["showscale","autocolorscale","colorscale","reversescale","colorbar"],a=["min","max","mid","auto"];function n(f){var p,y,m,l=f._colorAx,w=l||f,v={};for(y=0;y<t.length;y++)v[m=t[y]]=w[m];if(l)for(p="c",y=0;y<a.length;y++)v[m=a[y]]=w["c"+m];else{var A;for(y=0;y<a.length;y++)((A="c"+(m=a[y]))in w||(A="z"+m)in w)&&(v[m]=w[A]);p=A.charAt(0)}return v._sync=function(M,k){var E=-1!==a.indexOf(M)?p+M:M;w[E]=w["_"+E]=k},v}function d(f){for(var p=n(f),y=p.min,m=p.max,l=p.reversescale?s(p.colorscale):p.colorscale,w=l.length,v=new Array(w),A=new Array(w),M=0;M<w;M++){var k=l[M];v[M]=y+k[0]*(m-y),A[M]=k[1]}return{domain:v,range:A}}function s(f){for(var p=f.length,y=new Array(p),m=p-1,l=0;m>=0;m--,l++){var w=f[m];y[l]=[1-w[0],w[1]]}return y}function i(f,p){p=p||{};for(var y=f.domain,m=f.range,l=m.length,w=new Array(l),v=0;v<l;v++){var A=x(m[v]).toRgb();w[v]=[A.r,A.g,A.b,A.a]}var M,k=g.scale.linear().domain(y).range(w).clamp(!0),E=p.noNumericCheck,P=p.returnArray;return(M=E&&P?k:E?function(S){return u(k(S))}:P?function(S){return T(S)?k(S):x(S).isValid()?S:e.defaultLine}:function(S){return T(S)?u(k(S)):x(S).isValid()?S:e.defaultLine}).domain=k.domain,M.range=function(){return m},M}function u(f){return x({r:f[0],g:f[1],b:f[2],a:f[3]}).toRgbString()}ae.exports={hasColorscale:function(f,p,y){var m=p?b.nestedProperty(f,p).get()||{}:f,l=m[y||"color"],w=!1;if(b.isArrayOrTypedArray(l))for(var v=0;v<l.length;v++)if(T(l[v])){w=!0;break}return b.isPlainObject(m)&&(w||!0===m.showscale||T(m.cmin)&&T(m.cmax)||r(m.colorscale)||b.isPlainObject(m.colorbar))},extractOpts:n,extractScale:d,flipScale:s,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(f,p){return i(d(f),p)}}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(_,ae,ie){"use strict";var g=_("./scales"),x=_("./helpers");ae.exports={moduleType:"component",name:"colorscale",attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),handleDefaults:_("./defaults"),crossTraceDefaults:_("./cross_trace_defaults"),calc:_("./calc"),scales:g.scales,defaultScale:g.defaultScale,getScale:g.get,isValidScale:g.isValid,hasColorscale:x.hasColorscale,extractOpts:x.extractOpts,extractScale:x.extractScale,flipScale:x.flipScale,makeColorScaleFunc:x.makeColorScaleFunc,makeColorScaleFuncFromTrace:x.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(_,ae,ie){"use strict";var g=_("../../lib/extend").extendFlat,x=_("./attributes"),T=_("./scales").scales;ae.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:T.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:T.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:T.RdBu,editType:"calc"}},coloraxis:g({_isSubplotObj:!0,editType:"calc"},x("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plot_api/plot_template"),T=_("./layout_attributes"),b=_("./defaults");ae.exports=function(e,r){function t(p,y){return g.coerce(e,r,T,p,y)}t("colorscale.sequential"),t("colorscale.sequentialminus"),t("colorscale.diverging");var a,n,d=r._colorAxes;function s(p,y){return g.coerce(a,n,T.coloraxis,p,y)}for(var i in d){var u=d[i];if(u[0])a=e[i]||{},(n=x.newContainer(r,i,"coloraxis"))._name=i,b(a,n,r,s,{prefix:"",cLetter:"c"});else{for(var f=0;f<u[2].length;f++)u[2][f]();delete r._colorAxes[i]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(_,ae,ie){"use strict";var g=_("tinycolor2"),x={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},T=x.RdBu;function b(e){var r=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var t=0;t<e.length;t++){var a=e[t];if(2!==a.length||+a[0]<r||!g(a[1]).isValid())return!1;r=+a[0]}return!0}ae.exports={scales:x,defaultScale:T,get:function(e,r){if(r||(r=T),!e)return r;function t(){try{e=x[e]||JSON.parse(e)}catch(a){e=r}}return"string"==typeof e&&(t(),"string"==typeof e&&t()),b(e)?e:r},isValid:function(e){return void 0!==x[e]||b(e)}}},{tinycolor2:312}],382:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b,e){var r=(g-T)/(b-T),t=r+x/(b-T),a=(r+t)/2;return"left"===e||"bottom"===e?r:"center"===e||"middle"===e?a:"right"===e||"top"===e?t:r<2/3-a?r:t>4/3-a?t:a}},{}],383:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ae.exports=function(T,b,e,r){return T="left"===e?0:"center"===e?1:"right"===e?2:g.constrain(Math.floor(3*T),0,2),b="bottom"===r?0:"middle"===r?1:"top"===r?2:g.constrain(Math.floor(3*b),0,2),x[b][T]}},{"../../lib":503}],384:[function(_,ae,ie){"use strict";ie.selectMode=function(g){return"lasso"===g||"select"===g},ie.drawMode=function(g){return"drawclosedpath"===g||"drawopenpath"===g||"drawline"===g||"drawrect"===g||"drawcircle"===g},ie.openMode=function(g){return"drawline"===g||"drawopenpath"===g},ie.rectMode=function(g){return"select"===g||"drawline"===g||"drawrect"===g||"drawcircle"===g},ie.freeMode=function(g){return"lasso"===g||"drawclosedpath"===g||"drawopenpath"===g},ie.selectingOrDrawing=function(g){return ie.freeMode(g)||ie.rectMode(g)}},{}],385:[function(_,ae,ie){"use strict";var g=_("mouse-event-offset"),x=_("has-hover"),T=_("has-passive-events"),b=_("../../lib").removeElement,e=_("../../plots/cartesian/constants"),r=ae.exports={};r.align=_("./align"),r.getCursor=_("./cursor");var t=_("./unhover");function a(){var d=document.createElement("div");d.className="dragcover";var s=d.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(d),d}function n(d){return g(d.changedTouches?d.changedTouches[0]:d,document.body)}r.unhover=t.wrapped,r.unhoverRaw=t.raw,r.init=function(d){var s,i,u,f,p,y,m,l,w=d.gd,v=1,A=w._context.doubleClickDelay,M=d.element;w._mouseDownTime||(w._mouseDownTime=0),M.style.pointerEvents="all",M.onmousedown=E,T?(M._ontouchstart&&M.removeEventListener("touchstart",M._ontouchstart),M._ontouchstart=E,M.addEventListener("touchstart",E,{passive:!1})):M.ontouchstart=E;var k=d.clampFn||function(F,R,D){return Math.abs(F)<D&&(F=0),Math.abs(R)<D&&(R=0),[F,R]};function E(F){w._dragged=!1,w._dragging=!0;var R=n(F);s=R[0],i=R[1],m=F.target,y=F,l=2===F.buttons||F.ctrlKey,void 0===F.clientX&&void 0===F.clientY&&(F.clientX=s,F.clientY=i),(u=(new Date).getTime())-w._mouseDownTime<A?v+=1:(v=1,w._mouseDownTime=u),d.prepFn&&d.prepFn(F,s,i),x&&!l?(p=a()).style.cursor=window.getComputedStyle(M).cursor:x||(p=document,f=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(M).cursor),document.addEventListener("mouseup",S),document.addEventListener("touchend",S),!1!==d.dragmode&&(F.preventDefault(),document.addEventListener("mousemove",P),document.addEventListener("touchmove",P,{passive:!1}))}function P(F){F.preventDefault();var R=n(F),L=k(R[0]-s,R[1]-i,d.minDrag||e.MINDRAG),B=L[0],V=L[1];(B||V)&&(w._dragged=!0,r.unhover(w,F)),w._dragged&&d.moveFn&&!l&&(w._dragdata={element:M,dx:B,dy:V},d.moveFn(B,V))}function S(F){if(delete w._dragdata,!1!==d.dragmode&&(F.preventDefault(),document.removeEventListener("mousemove",P),document.removeEventListener("touchmove",P)),document.removeEventListener("mouseup",S),document.removeEventListener("touchend",S),x?b(p):f&&(p.documentElement.style.cursor=f,f=null),w._dragging){if(w._dragging=!1,(new Date).getTime()-w._mouseDownTime>A&&(v=Math.max(v-1,1)),w._dragged)d.doneFn&&d.doneFn();else if(d.clickFn&&d.clickFn(v,y),!l){var R;try{R=new MouseEvent("click",F)}catch(L){var D=n(F);(R=document.createEvent("MouseEvents")).initMouseEvent("click",F.bubbles,F.cancelable,F.view,F.detail,F.screenX,F.screenY,D[0],D[1],F.ctrlKey,F.altKey,F.shiftKey,F.metaKey,F.button,F.relatedTarget)}m.dispatchEvent(R)}w._dragging=!1,w._dragged=!1}else w._dragged=!1}},r.coverSlip=a},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(_,ae,ie){"use strict";var g=_("../../lib/events"),x=_("../../lib/throttle"),T=_("../../lib/dom").getGraphDiv,b=_("../fx/constants"),e=ae.exports={};e.wrapped=function(r,t,a){(r=T(r))._fullLayout&&x.clear(r._fullLayout._uid+b.HOVERID),e.raw(r,t,a)},e.raw=function(r,t){var a=r._fullLayout,n=r._hoverdata;t||(t={}),t.target&&!r._dragged&&!1===g.triggerHandler(r,"plotly_beforehover",t)||(a._hoverlayer.selectAll("g").remove(),a._hoverlayer.selectAll("line").remove(),a._hoverlayer.selectAll("circle").remove(),r._hoverdata=void 0,t.target&&n&&r.emit("plotly_unhover",{event:t,points:n}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(_,ae,ie){"use strict";ie.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ie.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("fast-isnumeric"),e=_("tinycolor2"),r=_("../../registry"),t=_("../color"),a=_("../colorscale"),n=x.strTranslate,d=_("../../lib/svg_text_utils"),s=_("../../constants/xmlns_namespaces"),i=_("../../constants/alignment").LINE_SPACING,u=_("../../constants/interactions").DESELECTDIM,f=_("../../traces/scatter/subtypes"),p=_("../../traces/scatter/make_bubble_size_func"),y=_("../../components/fx/helpers").appendArrayPointValue,m=ae.exports={};m.font=function(Q,$,K,oe){x.isPlainObject($)&&(oe=$.color,K=$.size,$=$.family),$&&Q.style("font-family",$),K+1&&Q.style("font-size",K+"px"),oe&&Q.call(t.fill,oe)},m.setPosition=function(Q,$,K){Q.attr("x",$).attr("y",K)},m.setSize=function(Q,$,K){Q.attr("width",$).attr("height",K)},m.setRect=function(Q,$,K,oe,j){Q.call(m.setPosition,$,K).call(m.setSize,oe,j)},m.translatePoint=function(Q,$,K,oe){var j=K.c2p(Q.x),H=oe.c2p(Q.y);return!!(b(j)&&b(H)&&$.node())&&("text"===$.node().nodeName?$.attr("x",j).attr("y",H):$.attr("transform",n(j,H)),!0)},m.translatePoints=function(Q,$,K){Q.each(function(oe){var j=g.select(this);m.translatePoint(oe,j,$,K)})},m.hideOutsideRangePoint=function(Q,$,K,oe,j,H){$.attr("display",K.isPtWithinRange(Q,j)&&oe.isPtWithinRange(Q,H)?null:"none")},m.hideOutsideRangePoints=function(Q,$){if($._hasClipOnAxisFalse){var K=$.xaxis,oe=$.yaxis;Q.each(function(j){var H=j[0].trace,G=H.xcalendar,re=H.ycalendar,q=r.traceIs(H,"bar-like")?".bartext":".point,.textpoint";Q.selectAll(q).each(function(te){m.hideOutsideRangePoint(te,g.select(this),K,oe,G,re)})})}},m.crispRound=function(Q,$,K){return $&&b($)?Q._context.staticPlot?$:$<1?1:Math.round($):K||0},m.singleLineStyle=function(Q,$,K,oe,j){$.style("fill","none");var H=(((Q||[])[0]||{}).trace||{}).line||{},G=K||H.width||0,re=j||H.dash||"";t.stroke($,oe||H.color),m.dashLine($,re,G)},m.lineGroupStyle=function(Q,$,K,oe){Q.style("fill","none").each(function(j){var H=(((j||[])[0]||{}).trace||{}).line||{},G=$||H.width||0,re=oe||H.dash||"";g.select(this).call(t.stroke,K||H.color).call(m.dashLine,re,G)})},m.dashLine=function(Q,$,K){$=m.dashStyle($,K=+K||0),Q.style({"stroke-dasharray":$,"stroke-width":K+"px"})},m.dashStyle=function(Q,$){$=+$||1;var K=Math.max($,3);return"solid"===Q?Q="":"dot"===Q?Q=K+"px,"+K+"px":"dash"===Q?Q=3*K+"px,"+3*K+"px":"longdash"===Q?Q=5*K+"px,"+5*K+"px":"dashdot"===Q?Q=3*K+"px,"+K+"px,"+K+"px,"+K+"px":"longdashdot"===Q&&(Q=5*K+"px,"+2*K+"px,"+K+"px,"+2*K+"px"),Q},m.singleFillStyle=function(Q){var $=(((g.select(Q.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;$&&Q.call(t.fill,$)},m.fillGroupStyle=function(Q){Q.style("stroke-width",0).each(function($){var K=g.select(this);$[0].trace&&K.call(t.fill,$[0].trace.fillcolor)})};var l=_("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(l).forEach(function(Q){var $=l[Q],K=$.n;m.symbolList.push(K,String(K),Q,K+100,String(K+100),Q+"-open"),m.symbolNames[K]=Q,m.symbolFuncs[K]=$.f,$.needLine&&(m.symbolNeedLines[K]=!0),$.noDot?m.symbolNoDot[K]=!0:m.symbolList.push(K+200,String(K+200),Q+"-dot",K+300,String(K+300),Q+"-open-dot"),$.noFill&&(m.symbolNoFill[K]=!0)});var w=m.symbolNames.length;function v(Q,$){return m.symbolFuncs[Q%100]($)+(Q>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}m.symbolNumber=function(Q){if(b(Q))Q=+Q;else if("string"==typeof Q){var $=0;Q.indexOf("-open")>0&&($=100,Q=Q.replace("-open","")),Q.indexOf("-dot")>0&&($+=200,Q=Q.replace("-dot","")),(Q=m.symbolNames.indexOf(Q))>=0&&(Q+=$)}return Q%100>=w||Q>=400?0:Math.floor(Math.max(Q,0))};var A={x1:1,x2:0,y1:0,y2:0},M={x1:0,x2:0,y1:1,y2:0},k=T("~f"),E={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:A},horizontalreversed:{node:"linearGradient",attrs:A,reversed:!0},vertical:{node:"linearGradient",attrs:M},verticalreversed:{node:"linearGradient",attrs:M,reversed:!0}};m.gradient=function(Q,$,K,oe,j,H){for(var G=j.length,re=E[oe],q=new Array(G),te=0;te<G;te++)re.reversed?q[G-1-te]=[k(100*(1-j[te][0])),j[te][1]]:q[te]=[k(100*j[te][0]),j[te][1]];var ne=$._fullLayout,le="g"+ne._uid+"-"+K,ue=ne._defs.select(".gradients").selectAll("#"+le).data([oe+q.join(";")],x.identity);ue.exit().remove(),ue.enter().append(re.node).each(function(){var be=g.select(this);re.attrs&&be.attr(re.attrs),be.attr("id",le);var ge=be.selectAll("stop").data(q);ge.exit().remove(),ge.enter().append("stop"),ge.each(function(we){var ke=e(we[1]);g.select(this).attr({offset:we[0]+"%","stop-color":t.tinyRGB(ke),"stop-opacity":ke.getAlpha()})})}),Q.style(H,Z(le,$)).style(H+"-opacity",null);var de=function(be){return"."+be.attr("class").replace(/\s/g,".")},he=de(g.select(Q.node().parentNode))+">"+de(Q);ne._gradientUrlQueryParts[he]=1},m.pattern=function(Q,$,K,oe,j,H,G,re,q,te,ne,le){var ue="legend"===$;re&&("overlay"===q?ne=t.contrast(te=re):(te=void 0,ne=re));var de,he,be,ge,we,ke,De,Ee,ve,Ie=K._fullLayout,Ce="p"+Ie._uid+"-"+oe,Pe={};switch(j){case"/":de=H*Math.sqrt(2),he=H*Math.sqrt(2),ke="path",Pe={d:be="M-"+de/4+","+he/4+"l"+de/2+",-"+he/2+"M0,"+he+"L"+de+",0M"+de/4*3+","+he/4*5+"l"+de/2+",-"+he/2,opacity:le,stroke:ne,"stroke-width":(ge=G*H)+"px"};break;case"\\":de=H*Math.sqrt(2),he=H*Math.sqrt(2),ke="path",Pe={d:be="M"+de/4*3+",-"+he/4+"l"+de/2+","+he/2+"M0,0L"+de+","+he+"M-"+de/4+","+he/4*3+"l"+de/2+","+he/2,opacity:le,stroke:ne,"stroke-width":(ge=G*H)+"px"};break;case"x":de=H*Math.sqrt(2),he=H*Math.sqrt(2),be="M-"+de/4+","+he/4+"l"+de/2+",-"+he/2+"M0,"+he+"L"+de+",0M"+de/4*3+","+he/4*5+"l"+de/2+",-"+he/2+"M"+de/4*3+",-"+he/4+"l"+de/2+","+he/2+"M0,0L"+de+","+he+"M-"+de/4+","+he/4*3+"l"+de/2+","+he/2,ge=H-H*Math.sqrt(1-G),ke="path",Pe={d:be,opacity:le,stroke:ne,"stroke-width":ge+"px"};break;case"|":ke="path",ke="path",Pe={d:be="M"+(de=H)/2+",0L"+de/2+","+(he=H),opacity:le,stroke:ne,"stroke-width":(ge=G*H)+"px"};break;case"-":ke="path",ke="path",Pe={d:be="M0,"+(he=H)/2+"L"+(de=H)+","+he/2,opacity:le,stroke:ne,"stroke-width":(ge=G*H)+"px"};break;case"+":ke="path",be="M"+(de=H)/2+",0L"+de/2+","+(he=H)+"M0,"+he/2+"L"+de+","+he/2,ge=H-H*Math.sqrt(1-G),ke="path",Pe={d:be,opacity:le,stroke:ne,"stroke-width":ge+"px"};break;case".":de=H,he=H,G<Math.PI/4?we=Math.sqrt(G*H*H/Math.PI):(De=G,Ee=Math.PI/4,1,we=(ve=H/2)+(H/Math.sqrt(2)-ve)*(De-Ee)/(1-Ee)),ke="circle",Pe={cx:de/2,cy:he/2,r:we,opacity:le,fill:ne}}var Ve=[j||"noSh",te||"noBg",ne||"noFg",H,G].join(";"),qe=Ie._defs.select(".patterns").selectAll("#"+Ce).data([Ve],x.identity);qe.exit().remove(),qe.enter().append("pattern").each(function(){var lt=g.select(this);if(lt.attr({id:Ce,width:de+"px",height:he+"px",patternUnits:"userSpaceOnUse",patternTransform:ue?"scale(0.8)":""}),te){var He=lt.selectAll("rect").data([0]);He.exit().remove(),He.enter().append("rect").attr({width:de+"px",height:he+"px",fill:te})}var $e=lt.selectAll(ke).data([0]);$e.exit().remove(),$e.enter().append(ke).attr(Pe)}),Q.style("fill",Z(Ce,K)).style("fill-opacity",null),Q.classed("pattern_filled",!0);var Je="."+g.select(Q.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";Ie._patternUrlQueryParts[Je]=1},m.initGradients=function(Q){var $=Q._fullLayout;x.ensureSingle($._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),$._gradientUrlQueryParts={}},m.initPatterns=function(Q){var $=Q._fullLayout;x.ensureSingle($._defs,"g","patterns").selectAll("pattern").remove(),$._patternUrlQueryParts={}},m.getPatternAttr=function(Q,$,K){return Q&&x.isArrayOrTypedArray(Q)?$<Q.length?Q[$]:K:Q},m.pointStyle=function(Q,$,K){if(Q.size()){var oe=m.makePointStyleFns($);Q.each(function(j){m.singlePointStyle(j,g.select(this),$,oe,K)})}},m.singlePointStyle=function(Q,$,K,oe,j){var H=K.marker,G=H.line;if($.style("opacity",oe.selectedOpacityFn?oe.selectedOpacityFn(Q):void 0===Q.mo?H.opacity:Q.mo),oe.ms2mrc){var re;re="various"===Q.ms||"various"===H.size?3:oe.ms2mrc(Q.ms),Q.mrc=re,oe.selectedSizeFn&&(re=Q.mrc=oe.selectedSizeFn(Q));var q=m.symbolNumber(Q.mx||H.symbol)||0;Q.om=q%200>=100,$.attr("d",v(q,re))}var te,ne,le,ue=!1;if(Q.so?(le=G.outlierwidth,ne=G.outliercolor,te=H.outliercolor):(le=(Q.mlw+1||(G||{}).width+1||(Q.trace?(Q.trace.marker.line||{}).width:0)+1)-1||0,ne="mlc"in Q?Q.mlcc=oe.lineScale(Q.mlc):x.isArrayOrTypedArray(G.color)?t.defaultLine:G.color,x.isArrayOrTypedArray(H.color)&&(te=t.defaultLine,ue=!0),te="mc"in Q?Q.mcc=oe.markerScale(Q.mc):H.color||"rgba(0,0,0,0)",oe.selectedColorFn&&(te=oe.selectedColorFn(Q))),Q.om)$.call(t.stroke,te).style({"stroke-width":(le||1)+"px",fill:"none"});else{$.style("stroke-width",(Q.isBlank?0:le)+"px");var he=H.gradient,be=Q.mgt;be?ue=!0:be=he&&he.type,x.isArrayOrTypedArray(be)&&(E[be=be[0]]||(be=0));var ge=H.pattern,we=ge&&m.getPatternAttr(ge.shape,Q.i,"");if(be&&"none"!==be){var ke=Q.mgc;ke?ue=!0:ke=he.color;var De=K.uid;ue&&(De+="-"+Q.i),m.gradient($,j,De,be,[[0,ke],[1,te]],"fill")}else if(we){var Ee=m.getPatternAttr(ge.bgcolor,Q.i,null),Re=m.getPatternAttr(ge.fgcolor,Q.i,null),ve=ge.fgopacity,Te=m.getPatternAttr(ge.size,Q.i,8),Ie=m.getPatternAttr(ge.solidity,Q.i,.3),Ce=Q.mcc||x.isArrayOrTypedArray(ge.shape)||x.isArrayOrTypedArray(ge.bgcolor)||x.isArrayOrTypedArray(ge.size)||x.isArrayOrTypedArray(ge.solidity),Pe=K.uid;Ce&&(Pe+="-"+Q.i),m.pattern($,"point",j,Pe,we,Te,Ie,Q.mcc,ge.fillmode,Ee,Re,ve)}else t.fill($,te);le&&t.stroke($,ne)}},m.makePointStyleFns=function(Q){var $={},K=Q.marker;return $.markerScale=m.tryColorscale(K,""),$.lineScale=m.tryColorscale(K,"line"),r.traceIs(Q,"symbols")&&($.ms2mrc=f.isBubble(Q)?p(Q):function(){return(K.size||6)/2}),Q.selectedpoints&&x.extendFlat($,m.makeSelectedPointStyleFns(Q)),$},m.makeSelectedPointStyleFns=function(Q){var $={},j=Q.marker||{},H=(Q.selected||{}).marker||{},G=(Q.unselected||{}).marker||{},q=H.opacity,te=G.opacity,ne=void 0!==q,le=void 0!==te;(x.isArrayOrTypedArray(j.opacity)||ne||le)&&($.selectedOpacityFn=function(Ee){var Re=void 0===Ee.mo?j.opacity:Ee.mo;return Ee.selected?ne?q:Re:le?te:u*Re});var ue=j.color,de=H.color,he=G.color;(de||he)&&($.selectedColorFn=function(Ee){var Re=Ee.mcc||ue;return Ee.selected?de||Re:he||Re});var be=j.size,ge=H.size,we=G.size,ke=void 0!==ge,De=void 0!==we;return r.traceIs(Q,"symbols")&&(ke||De)&&($.selectedSizeFn=function(Ee){var Re=Ee.mrc||be/2;return Ee.selected?ke?ge/2:Re:De?we/2:Re}),$},m.makeSelectedTextStyleFns=function(Q){var $={},re=(Q.textfont||{}).color,q=((Q.selected||{}).textfont||{}).color,te=((Q.unselected||{}).textfont||{}).color;return $.selectedTextColorFn=function(ne){var le=ne.tc||re;return ne.selected?q||le:te||(q?le:t.addOpacity(le,u))},$},m.selectedPointStyle=function(Q,$){if(Q.size()&&$.selectedpoints){var K=m.makeSelectedPointStyleFns($),oe=$.marker||{},j=[];K.selectedOpacityFn&&j.push(function(H,G){H.style("opacity",K.selectedOpacityFn(G))}),K.selectedColorFn&&j.push(function(H,G){t.fill(H,K.selectedColorFn(G))}),K.selectedSizeFn&&j.push(function(H,G){var re=G.mx||oe.symbol||0,q=K.selectedSizeFn(G);H.attr("d",v(m.symbolNumber(re),q)),G.mrc2=q}),j.length&&Q.each(function(H){for(var G=g.select(this),re=0;re<j.length;re++)j[re](G,H)})}},m.tryColorscale=function(Q,$){var K=$?x.nestedProperty(Q,$).get():Q;return K&&(K.colorscale||K._colorAx)&&x.isArrayOrTypedArray(K.color)?a.makeColorScaleFuncFromTrace(K):x.identity};var P={start:1,end:-1,middle:0,bottom:1,top:-1};function S(Q,$,K,oe,j){var H=g.select(Q.node().parentNode),G=-1!==$.indexOf("top")?"top":-1!==$.indexOf("bottom")?"bottom":"middle",re=-1!==$.indexOf("left")?"end":-1!==$.indexOf("right")?"start":"middle",q=oe?oe/.8+1:0,te=(d.lineCount(Q)-1)*i+1,ne=P[re]*q,le=.75*K+P[G]*q+(P[G]-1)*te*K/2;Q.attr("text-anchor",re),j||H.attr("transform",n(ne,le))}function F(Q,$){var K=Q.ts||$.textfont.size;return b(K)&&K>0?K:0}function R(Q,$,K,oe){var j=Q[0]-$[0],H=Q[1]-$[1],G=K[0]-$[0],re=K[1]-$[1],q=Math.pow(j*j+H*H,.25),te=Math.pow(G*G+re*re,.25),ne=(te*te*j-q*q*G)*oe,le=(te*te*H-q*q*re)*oe,ue=3*te*(q+te),de=3*q*(q+te);return[[g.round($[0]+(ue&&ne/ue),2),g.round($[1]+(ue&&le/ue),2)],[g.round($[0]-(de&&ne/de),2),g.round($[1]-(de&&le/de),2)]]}m.textPointStyle=function(Q,$,K){if(Q.size()){var oe;if($.selectedpoints){var j=m.makeSelectedTextStyleFns($);oe=j.selectedTextColorFn}var H=$.texttemplate,G=K._fullLayout;Q.each(function(re){var q=g.select(this),te=H?x.extractOption(re,$,"txt","texttemplate"):x.extractOption(re,$,"tx","text");if(te||0===te){if(H){var ne=$._module.formatLabels,le=ne?ne(re,$,G):{},ue={};y(ue,$,re.i),te=x.texttemplateString(te,le,G._d3locale,ue,re,$._meta||{})}var he=re.tp||$.textposition,be=F(re,$),ge=oe?oe(re):re.tc||$.textfont.color;q.call(m.font,re.tf||$.textfont.family,be,ge).text(te).call(d.convertToTspans,K).call(S,he,be,re.mrc)}else q.remove()})}},m.selectedTextStyle=function(Q,$){if(Q.size()&&$.selectedpoints){var K=m.makeSelectedTextStyleFns($);Q.each(function(oe){var j=g.select(this),H=K.selectedTextColorFn(oe),G=oe.tp||$.textposition,re=F(oe,$);t.fill(j,H);var q=r.traceIs($,"bar-like");S(j,G,re,oe.mrc2||oe.mrc,q)})}},m.smoothopen=function(Q,$){if(Q.length<3)return"M"+Q.join("L");var K,oe="M"+Q[0],j=[];for(K=1;K<Q.length-1;K++)j.push(R(Q[K-1],Q[K],Q[K+1],$));for(oe+="Q"+j[0][0]+" "+Q[1],K=2;K<Q.length-1;K++)oe+="C"+j[K-2][1]+" "+j[K-1][0]+" "+Q[K];return oe+"Q"+j[Q.length-3][1]+" "+Q[Q.length-1]},m.smoothclosed=function(Q,$){if(Q.length<3)return"M"+Q.join("L")+"Z";var K,oe="M"+Q[0],j=Q.length-1,H=[R(Q[j],Q[0],Q[1],$)];for(K=1;K<j;K++)H.push(R(Q[K-1],Q[K],Q[K+1],$));for(H.push(R(Q[j-1],Q[j],Q[0],$)),K=1;K<=j;K++)oe+="C"+H[K-1][1]+" "+H[K][0]+" "+Q[K];return oe+"C"+H[j][1]+" "+H[0][0]+" "+Q[0]+"Z"};var D={hv:function(Q,$){return"H"+g.round($[0],2)+"V"+g.round($[1],2)},vh:function(Q,$){return"V"+g.round($[1],2)+"H"+g.round($[0],2)},hvh:function(Q,$){return"H"+g.round((Q[0]+$[0])/2,2)+"V"+g.round($[1],2)+"H"+g.round($[0],2)},vhv:function(Q,$){return"V"+g.round((Q[1]+$[1])/2,2)+"H"+g.round($[0],2)+"V"+g.round($[1],2)}},L=function(Q,$){return"L"+g.round($[0],2)+","+g.round($[1],2)};m.steps=function(Q){var $=D[Q]||L;return function(K){for(var oe="M"+g.round(K[0][0],2)+","+g.round(K[0][1],2),j=1;j<K.length;j++)oe+=$(K[j-1],K[j]);return oe}},m.makeTester=function(){var Q=x.ensureSingleById(g.select("body"),"svg","js-plotly-tester",function(K){K.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),$=x.ensureSingle(Q,"path","js-reference-point",function(K){K.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=Q,m.testref=$},m.savedBBoxes={};var B=0;function V(Q){var $=Q.getAttribute("data-unformatted");if(null!==$)return $+Q.getAttribute("data-math")+Q.getAttribute("text-anchor")+Q.getAttribute("style")}function Z(Q,$){if(!Q)return null;var K=$._context,oe=K._exportedPlot?"":K._baseUrl||"";return oe?"url('"+oe+"#"+Q+"')":"url(#"+Q+")"}m.bBox=function(Q,$,K){var oe,j,H;if(K||(K=V(Q)),K){if(oe=m.savedBBoxes[K])return x.extendFlat({},oe)}else if(1===Q.childNodes.length){var G=Q.childNodes[0];if(K=V(G)){var re=+G.getAttribute("x")||0,q=+G.getAttribute("y")||0,te=G.getAttribute("transform");if(!te){var ne=m.bBox(G,!1,K);return re&&(ne.left+=re,ne.right+=re),q&&(ne.top+=q,ne.bottom+=q),ne}if(oe=m.savedBBoxes[K+="~"+re+"~"+q+"~"+te])return x.extendFlat({},oe)}}$?j=Q:(H=m.tester.node(),j=Q.cloneNode(!0),H.appendChild(j)),g.select(j).attr("transform",null).call(d.positionText,0,0);var le=j.getBoundingClientRect(),ue=m.testref.node().getBoundingClientRect();$||H.removeChild(j);var de={height:le.height,width:le.width,left:le.left-ue.left,top:le.top-ue.top,right:le.right-ue.left,bottom:le.bottom-ue.top};return B>=1e4&&(m.savedBBoxes={},B=0),K&&(m.savedBBoxes[K]=de),B++,x.extendFlat({},de)},m.setClipUrl=function(Q,$,K){Q.attr("clip-path",Z($,K))},m.getTranslate=function(Q){var $=(Q[Q.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(K,oe,j){return[oe,j].join(" ")}).split(" ");return{x:+$[0]||0,y:+$[1]||0}},m.setTranslate=function(Q,$,K){var j=Q.attr?"attr":"setAttribute",H=Q[Q.attr?"attr":"getAttribute"]("transform")||"";return $=$||0,K=K||0,H=H.replace(/(\btranslate\(.*?\);?)/,"").trim(),H=(H+=n($,K)).trim(),Q[j]("transform",H),H},m.getScale=function(Q){var $=(Q[Q.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(K,oe,j){return[oe,j].join(" ")}).split(" ");return{x:+$[0]||1,y:+$[1]||1}},m.setScale=function(Q,$,K){var j=Q.attr?"attr":"setAttribute",H=Q[Q.attr?"attr":"getAttribute"]("transform")||"";return $=$||1,K=K||1,H=H.replace(/(\bscale\(.*?\);?)/,"").trim(),H=(H+="scale("+$+","+K+")").trim(),Q[j]("transform",H),H};var Y=/\s*sc.*/;m.setPointGroupScale=function(Q,$,K){if($=$||1,K=K||1,Q){var oe=1===$&&1===K?"":"scale("+$+","+K+")";Q.each(function(){var j=(this.getAttribute("transform")||"").replace(Y,"");j=(j+=oe).trim(),this.setAttribute("transform",j)})}};var ee=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(Q,$,K){Q&&Q.each(function(){var oe,j=g.select(this),H=j.select("text");if(H.node()){var G=parseFloat(H.attr("x")||0),re=parseFloat(H.attr("y")||0),q=(j.attr("transform")||"").match(ee);oe=1===$&&1===K?[]:[n(G,re),"scale("+$+","+K+")",n(-G,-re)],q&&oe.push(q),j.attr("transform",oe.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":943,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(_,ae,ie){"use strict";var g=_("@plotly/d3");ae.exports={circle:{n:0,f:function(x){var T=g.round(x,2);return"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"}},square:{n:1,f:function(x){var T=g.round(x,2);return"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"}},diamond:{n:2,f:function(x){var T=g.round(1.3*x,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"Z"}},cross:{n:3,f:function(x){var T=g.round(.4*x,2),b=g.round(1.2*x,2);return"M"+b+","+T+"H"+T+"V"+b+"H-"+T+"V"+T+"H-"+b+"V-"+T+"H-"+T+"V-"+b+"H"+T+"V-"+T+"H"+b+"Z"}},x:{n:4,f:function(x){var T=g.round(.8*x/Math.sqrt(2),2),b="l"+T+","+T,e="l"+T+",-"+T,r="l-"+T+",-"+T,t="l-"+T+","+T;return"M0,"+T+b+e+r+e+r+t+r+t+b+t+b+"Z"}},"triangle-up":{n:5,f:function(x){var T=g.round(2*x/Math.sqrt(3),2);return"M-"+T+","+g.round(x/2,2)+"H"+T+"L0,-"+g.round(x,2)+"Z"}},"triangle-down":{n:6,f:function(x){var T=g.round(2*x/Math.sqrt(3),2);return"M-"+T+",-"+g.round(x/2,2)+"H"+T+"L0,"+g.round(x,2)+"Z"}},"triangle-left":{n:7,f:function(x){var T=g.round(2*x/Math.sqrt(3),2);return"M"+g.round(x/2,2)+",-"+T+"V"+T+"L-"+g.round(x,2)+",0Z"}},"triangle-right":{n:8,f:function(x){var T=g.round(2*x/Math.sqrt(3),2);return"M-"+g.round(x/2,2)+",-"+T+"V"+T+"L"+g.round(x,2)+",0Z"}},"triangle-ne":{n:9,f:function(x){var T=g.round(.6*x,2),b=g.round(1.2*x,2);return"M-"+b+",-"+T+"H"+T+"V"+b+"Z"}},"triangle-se":{n:10,f:function(x){var T=g.round(.6*x,2),b=g.round(1.2*x,2);return"M"+T+",-"+b+"V"+T+"H-"+b+"Z"}},"triangle-sw":{n:11,f:function(x){var T=g.round(.6*x,2),b=g.round(1.2*x,2);return"M"+b+","+T+"H-"+T+"V-"+b+"Z"}},"triangle-nw":{n:12,f:function(x){var T=g.round(.6*x,2),b=g.round(1.2*x,2);return"M-"+T+","+b+"V-"+T+"H"+b+"Z"}},pentagon:{n:13,f:function(x){var T=g.round(.951*x,2),b=g.round(.588*x,2),e=g.round(-x,2),r=g.round(-.309*x,2);return"M"+T+","+r+"L"+b+","+g.round(.809*x,2)+"H-"+b+"L-"+T+","+r+"L0,"+e+"Z"}},hexagon:{n:14,f:function(x){var T=g.round(x,2),b=g.round(x/2,2),e=g.round(x*Math.sqrt(3)/2,2);return"M"+e+",-"+b+"V"+b+"L0,"+T+"L-"+e+","+b+"V-"+b+"L0,-"+T+"Z"}},hexagon2:{n:15,f:function(x){var T=g.round(x,2),b=g.round(x/2,2),e=g.round(x*Math.sqrt(3)/2,2);return"M-"+b+","+e+"H"+b+"L"+T+",0L"+b+",-"+e+"H-"+b+"L-"+T+",0Z"}},octagon:{n:16,f:function(x){var T=g.round(.924*x,2),b=g.round(.383*x,2);return"M-"+b+",-"+T+"H"+b+"L"+T+",-"+b+"V"+b+"L"+b+","+T+"H-"+b+"L-"+T+","+b+"V-"+b+"Z"}},star:{n:17,f:function(x){var T=1.4*x,b=g.round(.225*T,2),e=g.round(.951*T,2),r=g.round(.363*T,2),t=g.round(.588*T,2),a=g.round(-T,2),n=g.round(-.309*T,2),d=g.round(.118*T,2),s=g.round(.809*T,2);return"M"+b+","+n+"H"+e+"L"+r+","+d+"L"+t+","+s+"L0,"+g.round(.382*T,2)+"L-"+t+","+s+"L-"+r+","+d+"L-"+e+","+n+"H-"+b+"L0,"+a+"Z"}},hexagram:{n:18,f:function(x){var T=g.round(.66*x,2),b=g.round(.38*x,2),e=g.round(.76*x,2);return"M-"+e+",0l-"+b+",-"+T+"h"+e+"l"+b+",-"+T+"l"+b+","+T+"h"+e+"l-"+b+","+T+"l"+b+","+T+"h-"+e+"l-"+b+","+T+"l-"+b+",-"+T+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(x){var T=g.round(x*Math.sqrt(3)*.8,2),b=g.round(.8*x,2),e=g.round(1.6*x,2),r=g.round(4*x,2),t="A "+r+","+r+" 0 0 1 ";return"M-"+T+","+b+t+T+","+b+t+"0,-"+e+t+"-"+T+","+b+"Z"}},"star-triangle-down":{n:20,f:function(x){var T=g.round(x*Math.sqrt(3)*.8,2),b=g.round(.8*x,2),e=g.round(1.6*x,2),r=g.round(4*x,2),t="A "+r+","+r+" 0 0 1 ";return"M"+T+",-"+b+t+"-"+T+",-"+b+t+"0,"+e+t+T+",-"+b+"Z"}},"star-square":{n:21,f:function(x){var T=g.round(1.1*x,2),b=g.round(2*x,2),e="A "+b+","+b+" 0 0 1 ";return"M-"+T+",-"+T+e+"-"+T+","+T+e+T+","+T+e+T+",-"+T+e+"-"+T+",-"+T+"Z"}},"star-diamond":{n:22,f:function(x){var T=g.round(1.4*x,2),b=g.round(1.9*x,2),e="A "+b+","+b+" 0 0 1 ";return"M-"+T+",0"+e+"0,"+T+e+T+",0"+e+"0,-"+T+e+"-"+T+",0Z"}},"diamond-tall":{n:23,f:function(x){var T=g.round(.7*x,2),b=g.round(1.4*x,2);return"M0,"+b+"L"+T+",0L0,-"+b+"L-"+T+",0Z"}},"diamond-wide":{n:24,f:function(x){var T=g.round(1.4*x,2),b=g.round(.7*x,2);return"M0,"+b+"L"+T+",0L0,-"+b+"L-"+T+",0Z"}},hourglass:{n:25,f:function(x){var T=g.round(x,2);return"M"+T+","+T+"H-"+T+"L"+T+",-"+T+"H-"+T+"Z"},noDot:!0},bowtie:{n:26,f:function(x){var T=g.round(x,2);return"M"+T+","+T+"V-"+T+"L-"+T+","+T+"V-"+T+"Z"},noDot:!0},"circle-cross":{n:27,f:function(x){var T=g.round(x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(x){var T=g.round(x,2),b=g.round(x/Math.sqrt(2),2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(x){var T=g.round(x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(x){var T=g.round(x,2);return"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T+"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(x){var T=g.round(1.3*x,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"ZM0,-"+T+"V"+T+"M-"+T+",0H"+T},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(x){var T=g.round(1.3*x,2),b=g.round(.65*x,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"ZM-"+b+",-"+b+"L"+b+","+b+"M-"+b+","+b+"L"+b+",-"+b},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(x){var T=g.round(1.4*x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(x){var T=g.round(x,2);return"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(x){var T=g.round(1.2*x,2),b=g.round(.85*x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(x){var T=g.round(x/2,2),b=g.round(x,2);return"M"+T+","+b+"V-"+b+"m-"+b+",0V"+b+"M"+b+","+T+"H-"+b+"m0,-"+b+"H"+b},needLine:!0,noFill:!0},"y-up":{n:37,f:function(x){var T=g.round(1.2*x,2),b=g.round(1.6*x,2),e=g.round(.8*x,2);return"M-"+T+","+e+"L0,0M"+T+","+e+"L0,0M0,-"+b+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(x){var T=g.round(1.2*x,2),b=g.round(1.6*x,2),e=g.round(.8*x,2);return"M-"+T+",-"+e+"L0,0M"+T+",-"+e+"L0,0M0,"+b+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(x){var T=g.round(1.2*x,2),b=g.round(1.6*x,2),e=g.round(.8*x,2);return"M"+e+","+T+"L0,0M"+e+",-"+T+"L0,0M-"+b+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(x){var T=g.round(1.2*x,2),b=g.round(1.6*x,2),e=g.round(.8*x,2);return"M-"+e+","+T+"L0,0M-"+e+",-"+T+"L0,0M"+b+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(x){var T=g.round(1.4*x,2);return"M"+T+",0H-"+T},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(x){var T=g.round(1.4*x,2);return"M0,"+T+"V-"+T},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(x){var T=g.round(x,2);return"M"+T+",-"+T+"L-"+T+","+T},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(x){var T=g.round(x,2);return"M"+T+","+T+"L-"+T+",-"+T},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(x){var T=g.round(x,2);return"M0,0L-"+T+","+g.round(2*x,2)+"H"+T+"Z"},noDot:!0},"arrow-down":{n:46,f:function(x){var T=g.round(x,2);return"M0,0L-"+T+",-"+g.round(2*x,2)+"H"+T+"Z"},noDot:!0},"arrow-left":{n:47,f:function(x){var T=g.round(2*x,2),b=g.round(x,2);return"M0,0L"+T+",-"+b+"V"+b+"Z"},noDot:!0},"arrow-right":{n:48,f:function(x){var T=g.round(2*x,2),b=g.round(x,2);return"M0,0L-"+T+",-"+b+"V"+b+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(x){var T=g.round(x,2);return"M-"+T+",0H"+T+"M0,0L-"+T+","+g.round(2*x,2)+"H"+T+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(x){var T=g.round(x,2);return"M-"+T+",0H"+T+"M0,0L-"+T+",-"+g.round(2*x,2)+"H"+T+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(x){var T=g.round(2*x,2),b=g.round(x,2);return"M0,-"+b+"V"+b+"M0,0L"+T+",-"+b+"V"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(x){var T=g.round(2*x,2),b=g.round(x,2);return"M0,-"+b+"V"+b+"M0,0L-"+T+",-"+b+"V"+b+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(_,ae,ie){"use strict";ae.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../registry"),T=_("../../plots/cartesian/axes"),b=_("../../lib"),e=_("./compute_error");function r(t,a,n,d){var s=a["error_"+d]||{},i=[];if(s.visible&&-1!==["linear","log"].indexOf(n.type)){for(var u=e(s),f=0;f<t.length;f++){var p=t[f],y=p.i;if(void 0===y)y=f;else if(null===y)continue;var m=p[d];if(g(n.c2l(m))){var l=u(m,y);if(g(l[0])&&g(l[1])){var w=p[d+"s"]=m-l[0],v=p[d+"h"]=m+l[1];i.push(w,v)}}}var M=a._extremes[n._id],k=T.findExtremes(n,i,b.extendFlat({tozero:M.opts.tozero},{padded:!0}));M.min=M.min.concat(k.min),M.max=M.max.concat(k.max)}}ae.exports=function(t){for(var a=t.calcdata,n=0;n<a.length;n++){var d=a[n],s=d[0].trace;if(!0===s.visible&&x.traceIs(s,"errorBarsOK")){var i=T.getFromId(t,s.xaxis),u=T.getFromId(t,s.yaxis);r(d,s,i,"x"),r(d,s,u,"y")}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(_,ae,ie){"use strict";function g(x,T){return"percent"===x?function(b){return Math.abs(b*T/100)}:"constant"===x?function(){return Math.abs(T)}:"sqrt"===x?function(b){return Math.sqrt(Math.abs(b))}:void 0}ae.exports=function(x){var T=x.type,b=x.symmetric;if("data"===T){var e=x.array||[];if(b)return function(n,d){var s=+e[d];return[s,s]};var r=x.arrayminus||[];return function(n,d){var s=+e[d],i=+r[d];return isNaN(s)&&isNaN(i)?[NaN,NaN]:[i||0,s||0]}}var t=g(T,x.value),a=g(T,x.valueminus);return b||void 0===x.valueminus?function(n){var d=t(n);return[d,d]}:function(n){return[a(n),t(n)]}}},{}],393:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../registry"),T=_("../../lib"),b=_("../../plot_api/plot_template"),e=_("./attributes");ae.exports=function(r,t,a,n){var d="error_"+n.axis,s=b.newContainer(t,d),i=r[d]||{};function u(m,l){return T.coerce(i,s,e,m,l)}if(!1!==u("visible",void 0!==i.array||void 0!==i.value||"sqrt"===i.type)){var f=u("type","array"in i?"data":"percent"),p=!0;"sqrt"!==f&&(p=u("symmetric",!(("data"===f?"arrayminus":"valueminus")in i))),"data"===f?(u("array"),u("traceref"),p||(u("arrayminus"),u("tracerefminus"))):"percent"!==f&&"constant"!==f||(u("value"),p||u("valueminus"));var y="copy_"+n.inherit+"style";n.inherit&&(t["error_"+n.inherit]||{}).visible&&u(y,!(i.color||g(i.thickness)||g(i.width))),n.inherit&&s[y]||(u("color",a),u("thickness"),u("width",x.traceIs(t,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plot_api/edit_types").overrideAll,T=_("./attributes"),b={error_x:g.extendFlat({},T),error_y:g.extendFlat({},T)};delete b.error_x.copy_zstyle,delete b.error_y.copy_zstyle,delete b.error_y.copy_ystyle;var e={error_x:g.extendFlat({},T),error_y:g.extendFlat({},T),error_z:g.extendFlat({},T)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,ae.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:b,bar:b,histogram:b,scatter3d:x(e,"calc","nested"),scattergl:x(b,"calc","nested")}},supplyDefaults:_("./defaults"),calc:_("./calc"),makeComputeError:_("./compute_error"),plot:_("./plot"),style:_("./style"),hoverInfo:function(r,t,a){(t.error_y||{}).visible&&(a.yerr=r.yh-r.y,t.error_y.symmetric||(a.yerrneg=r.y-r.ys)),(t.error_x||{}).visible&&(a.xerr=r.xh-r.x,t.error_x.symmetric||(a.xerrneg=r.x-r.xs))}}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../drawing"),b=_("../../traces/scatter/subtypes");ae.exports=function(e,r,t,a){var n=t.xaxis,d=t.yaxis,s=a&&a.duration>0;r.each(function(i){var u,f=i[0].trace,p=f.error_x||{},y=f.error_y||{};f.ids&&(u=function(v){return v.id});var m=b.hasMarkers(f)&&f.marker.maxdisplayed>0;y.visible||p.visible||(i=[]);var l=g.select(this).selectAll("g.errorbar").data(i,u);if(l.exit().remove(),i.length){p.visible||l.selectAll("path.xerror").remove(),y.visible||l.selectAll("path.yerror").remove(),l.style("opacity",1);var w=l.enter().append("g").classed("errorbar",!0);s&&w.style("opacity",0).transition().duration(a.duration).style("opacity",1),T.setClipUrl(l,t.layerClipId,e),l.each(function(v){var R,D,L,B,A=g.select(this),M=(L=d,B={x:(D=n).c2p((R=v).x),y:L.c2p(R.y)},void 0!==R.yh&&(B.yh=L.c2p(R.yh),B.ys=L.c2p(R.ys),x(B.ys)||(B.noYS=!0,B.ys=L.c2p(R.ys,!0))),void 0!==R.xh&&(B.xh=D.c2p(R.xh),B.xs=D.c2p(R.xs),x(B.xs)||(B.noXS=!0,B.xs=D.c2p(R.xs,!0))),B);if(!m||v.vis){var k,E=A.select("path.yerror");if(y.visible&&x(M.x)&&x(M.yh)&&x(M.ys)){var P=y.width;k="M"+(M.x-P)+","+M.yh+"h"+2*P+"m-"+P+",0V"+M.ys,M.noYS||(k+="m-"+P+",0h"+2*P),E.size()?s&&(E=E.transition().duration(a.duration).ease(a.easing)):E=A.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),E.attr("d",k)}else E.remove();var S=A.select("path.xerror");if(p.visible&&x(M.y)&&x(M.xh)&&x(M.xs)){var F=(p.copy_ystyle?y:p).width;k="M"+M.xh+","+(M.y-F)+"v"+2*F+"m0,-"+F+"H"+M.xs,M.noXS||(k+="m0,-"+F+"v"+2*F),S.size()?s&&(S=S.transition().duration(a.duration).ease(a.easing)):S=A.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),S.attr("d",k)}else S.remove()}})}})}},{"../../traces/scatter/subtypes":951,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../color");ae.exports=function(T){T.each(function(b){var e=b[0].trace,r=e.error_y||{},t=e.error_x||{},a=g.select(this);a.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(x.stroke,r.color),t.copy_ystyle&&(t=r),a.selectAll("path.xerror").style("stroke-width",t.thickness+"px").call(x.stroke,t.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(_,ae,ie){"use strict";var g=_("../../plots/font_attributes"),x=_("./layout_attributes").hoverlabel,T=_("../../lib/extend").extendFlat;ae.exports={hoverlabel:{bgcolor:T({},x.bgcolor,{arrayOk:!0}),bordercolor:T({},x.bordercolor,{arrayOk:!0}),font:g({arrayOk:!0,editType:"none"}),align:T({},x.align,{arrayOk:!0}),namelength:T({},x.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../registry");function T(b,e,r,t){t=t||g.identity,Array.isArray(b)&&(e[0][r]=t(b))}ae.exports=function(b){var e=b.calcdata,r=b._fullLayout;function t(i){return function(u){return g.coerceHoverinfo({hoverinfo:u},{_module:i._module},r)}}for(var a=0;a<e.length;a++){var n=e[a],d=n[0].trace;if(!x.traceIs(d,"pie-like")){var s=x.traceIs(d,"2dMap")?T:g.fillArray;s(d.hoverinfo,n,"hi",t(d)),d.hovertemplate&&s(d.hovertemplate,n,"ht"),d.hoverlabel&&(s(d.hoverlabel.bgcolor,n,"hbg"),s(d.hoverlabel.bordercolor,n,"hbc"),s(d.hoverlabel.font.size,n,"hts"),s(d.hoverlabel.font.color,n,"htc"),s(d.hoverlabel.font.family,n,"htf"),s(d.hoverlabel.namelength,n,"hnl"),s(d.hoverlabel.align,n,"hta"))}}}},{"../../lib":503,"../../registry":638}],399:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("./hover").hover;ae.exports=function(T,b,e){var r=g.getComponentMethod("annotations","onClick")(T,T._hoverdata);function t(){T.emit("plotly_click",{points:T._hoverdata,event:b})}void 0!==e&&x(T,b,e,!0),T._hoverdata&&b&&b.target&&(r&&r.then?r.then(t):t(),b.stopImmediatePropagation&&b.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(_,ae,ie){"use strict";ae.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes"),T=_("./hoverlabel_defaults");ae.exports=function(b,e,r,t){var a=g.extendFlat({},t.hoverlabel);e.hovertemplate&&(a.namelength=-1),T(b,e,function(n,d){return g.coerce(b,e,x,n,d)},a)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(_,ae,ie){"use strict";var g=_("../../lib");ie.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},ie.isTraceInSubplots=function(t,a){if("splom"===t.type){for(var n=t.xaxes||[],d=t.yaxes||[],s=0;s<n.length;s++)for(var i=0;i<d.length;i++)if(-1!==a.indexOf(n[s]+d[i]))return!0;return!1}return-1!==a.indexOf(ie.getSubplot(t))},ie.flat=function(t,a){for(var n=new Array(t.length),d=0;d<t.length;d++)n[d]=a;return n},ie.p2c=function(t,a){for(var n=new Array(t.length),d=0;d<t.length;d++)n[d]=t[d].p2c(a);return n},ie.getDistanceFunction=function(t,a,n,d){return"closest"===t?d||ie.quadrature(a,n):"x"===t.charAt(0)?a:n},ie.getClosest=function(t,a,n){if(!1!==n.index)n.index>=0&&n.index<t.length?n.distance=0:n.index=!1;else for(var d=0;d<t.length;d++){var s=a(t[d]);s<=n.distance&&(n.index=d,n.distance=s)}return n},ie.inbox=function(t,a,n){return t*a<0||0===t?n:1/0},ie.quadrature=function(t,a){return function(n){var d=t(n),s=a(n);return Math.sqrt(d*d+s*s)}},ie.makeEventData=function(t,a,n){var d="index"in t?t.index:t.pointNumber,s={data:a._input,fullData:a,curveNumber:a.index,pointNumber:d};if(a._indexToPoints){var i=a._indexToPoints[d];1===i.length?s.pointIndex=i[0]:s.pointIndices=i}else s.pointIndex=d;return a._module.eventData?s=a._module.eventData(s,t,a,n,d):("xVal"in t?s.x=t.xVal:"x"in t&&(s.x=t.x),"yVal"in t?s.y=t.yVal:"y"in t&&(s.y=t.y),t.xa&&(s.xaxis=t.xa),t.ya&&(s.yaxis=t.ya),void 0!==t.zLabelVal&&(s.z=t.zLabelVal)),ie.appendArrayPointValue(s,a,d),s},ie.appendArrayPointValue=function(t,a,n){var d=a._arrayAttrs;if(d)for(var s=0;s<d.length;s++){var i=d[s],u=T(i);if(void 0===t[u]){var f=b(g.nestedProperty(a,i).get(),n);void 0!==f&&(t[u]=f)}}},ie.appendArrayMultiPointValues=function(t,a,n){var d=a._arrayAttrs;if(d)for(var s=0;s<d.length;s++){var i=d[s],u=T(i);if(void 0===t[u]){for(var f=g.nestedProperty(a,i).get(),p=new Array(n.length),y=0;y<n.length;y++)p[y]=b(f,n[y]);t[u]=p}}};var x={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function T(t){return x[t]||t}function b(t,a){return Array.isArray(a)?Array.isArray(t)&&Array.isArray(t[a[0]])?t[a[0]][a[1]]:void 0:t[a]}var e={x:!0,y:!0},r={"x unified":!0,"y unified":!0};ie.isUnifiedHover=function(t){return"string"==typeof t&&!!r[t]},ie.isXYhover=function(t){return"string"==typeof t&&!!e[t]}},{"../../lib":503}],403:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("tinycolor2"),b=_("../../lib"),e=b.strTranslate,r=b.strRotate,t=_("../../lib/events"),a=_("../../lib/svg_text_utils"),n=_("../../lib/override_cursor"),d=_("../drawing"),s=_("../color"),i=_("../dragelement"),u=_("../../plots/cartesian/axes"),f=_("../../registry"),p=_("./helpers"),y=_("./constants"),m=_("../legend/defaults"),l=_("../legend/draw"),w=y.YANGLE,v=Math.PI*w/180,A=1/Math.sin(v),M=Math.cos(v),k=Math.sin(v),E=y.HOVERARROWSIZE,P=y.HOVERTEXTPAD,S={box:!0,ohlc:!0,violin:!0,candlestick:!0},F={scatter:!0,scattergl:!0,splom:!0};function R(H){return[H.trace.index,H.index,H.x0,H.y0,H.name,H.attr,H.xa?H.xa._id:"",H.ya?H.ya._id:""].join(",")}ie.hover=function(H,G,re,q){H=b.getGraphDiv(H);var te=G.target;b.throttle(H._fullLayout._uid+y.HOVERID,y.HOVERMINTIME,function(){!function(ne,le,ue,de,he){ue||(ue="xy");var be=Array.isArray(ue)?ue:[ue],ge=ne._fullLayout,we=ge._plots||[],ke=we[ue],De=ge._has("cartesian");if(ke){var Ee=ke.overlays.map(function(Jn){return Jn.id});be=be.concat(Ee)}for(var Re=be.length,ve=new Array(Re),Te=new Array(Re),Ie=!1,Ce=0;Ce<Re;Ce++){var Pe=be[Ce];if(we[Pe])Ie=!0,ve[Ce]=we[Pe].xaxis,Te[Ce]=we[Pe].yaxis;else{if(!ge[Pe]||!ge[Pe]._subplot)return void b.warn("Unrecognized subplot: "+Pe);var Ve=ge[Pe]._subplot;ve[Ce]=Ve.xaxis,Te[Ce]=Ve.yaxis}}var qe=le.hovermode||ge.hovermode;if(qe&&!Ie&&(qe="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(qe)||!ne.calcdata||ne.querySelector(".zoombox")||ne._dragging)return i.unhoverRaw(ne,le);var Je=ge.hoverdistance;-1===Je&&(Je=1/0);var lt=ge.spikedistance;-1===lt&&(lt=1/0);var He,$e,et,tt,ft,bt,Ct,Vt,Ft,ht,ut,Rt,nn,cn=[],Ze=[],Qe={hLinePoint:null,vLinePoint:null},Ge=!1;if(Array.isArray(le))for(qe="array",et=0;et<le.length;et++)(ft=ne.calcdata[le[et].curveNumber||0])&&(bt=ft[0].trace,"skip"!==ft[0].trace.hoverinfo&&(Ze.push(ft),"h"===bt.orientation&&(Ge=!0)));else{for(tt=0;tt<ne.calcdata.length;tt++)"skip"!==(bt=(ft=ne.calcdata[tt])[0].trace).hoverinfo&&p.isTraceInSubplots(bt,be)&&(Ze.push(ft),"h"===bt.orientation&&(Ge=!0));var rt,Le;if(he){if(!1===t.triggerHandler(ne,"plotly_beforehover",le))return;var ze=he.getBoundingClientRect();rt=le.clientX-ze.left,Le=le.clientY-ze.top,ge._calcInverseTransform(ne);var je=b.apply3DTransform(ge._invTransform)(rt,Le);if(Le=je[1],(rt=je[0])<0||rt>ve[0]._length||Le<0||Le>Te[0]._length)return i.unhoverRaw(ne,le)}else rt="xpx"in le?le.xpx:ve[0]._length/2,Le="ypx"in le?le.ypx:Te[0]._length/2;if(le.pointerX=rt+ve[0]._offset,le.pointerY=Le+Te[0]._offset,He="xval"in le?p.flat(be,le.xval):p.p2c(ve,rt),$e="yval"in le?p.flat(be,le.yval):p.p2c(Te,Le),!x(He[0])||!x($e[0]))return b.warn("Fx.hover failed",le,ne),i.unhoverRaw(ne,le)}var Ne=1/0;function st(Jn,_r){for(tt=0;tt<Ze.length;tt++)if((ft=Ze[tt])&&ft[0]&&ft[0].trace&&!0===(bt=ft[0].trace).visible&&0!==bt._length&&-1===["carpet","contourcarpet"].indexOf(bt._module.name)){if("splom"===bt.type?Ct=be[Vt=0]:(Ct=p.getSubplot(bt),Vt=be.indexOf(Ct)),p.isUnifiedHover(Ft=qe)&&(Ft=Ft.charAt(0)),Rt={cd:ft,trace:bt,xa:ve[Vt],ya:Te[Vt],maxHoverDistance:Je,maxSpikeDistance:lt,index:!1,distance:Math.min(Ne,Je),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:bt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ge[Ct]&&(Rt.subplot=ge[Ct]._subplot),ge._splomScenes&&ge._splomScenes[bt.uid]&&(Rt.scene=ge._splomScenes[bt.uid]),nn=cn.length,"array"===Ft){var Hr=le[tt];"pointNumber"in Hr?(Rt.index=Hr.pointNumber,Ft="closest"):(Ft="","xval"in Hr&&(ht=Hr.xval,Ft="x"),"yval"in Hr&&(ut=Hr.yval,Ft=Ft?"closest":"y"))}else void 0!==Jn&&void 0!==_r?(ht=Jn,ut=_r):(ht=He[Vt],ut=$e[Vt]);if(0!==Je)if(bt._module&&bt._module.hoverPoints){var Lr=bt._module.hoverPoints(Rt,ht,ut,Ft,{finiteRange:!0,hoverLayer:ge._hoverlayer});if(Lr)for(var $r,dn=0;dn<Lr.length;dn++)x(($r=Lr[dn]).x0)&&x($r.y0)&&cn.push(Z($r,qe))}else b.log("Unrecognized trace type in hover:",bt);if("closest"===qe&&cn.length>nn&&(cn.splice(0,nn),Ne=cn[0].distance),De&&0!==lt&&0===cn.length){Rt.distance=lt,Rt.index=!1;var Ut=bt._module.hoverPoints(Rt,ht,ut,"closest",{hoverLayer:ge._hoverlayer});if(Ut&&(Ut=Ut.filter(function(Rn){return Rn.spikeDistance<=lt})),Ut&&Ut.length){var Kt,Mn=Ut.filter(function(Rn){return Rn.xa.showspikes&&"hovered data"!==Rn.xa.spikesnap});if(Mn.length){var Bn=Mn[0];x(Bn.x0)&&x(Bn.y0)&&(Kt=Tt(Bn),(!Qe.vLinePoint||Qe.vLinePoint.spikeDistance>Kt.spikeDistance)&&(Qe.vLinePoint=Kt))}var cr=Ut.filter(function(Rn){return Rn.ya.showspikes&&"hovered data"!==Rn.ya.spikesnap});if(cr.length){var ur=cr[0];x(ur.x0)&&x(ur.y0)&&(Kt=Tt(ur),(!Qe.hLinePoint||Qe.hLinePoint.spikeDistance>Kt.spikeDistance)&&(Qe.hLinePoint=Kt))}}}}}function mt(Jn,_r,Hr){for(var Lr,$r=null,dn=1/0,Ut=0;Ut<Jn.length;Ut++)Lr=Jn[Ut].spikeDistance,Hr&&0===Ut&&(Lr=-1/0),Lr<=dn&&Lr<=_r&&($r=Jn[Ut],dn=Lr);return $r}function Tt(Jn){return Jn?{xa:Jn.xa,ya:Jn.ya,x:void 0!==Jn.xSpike?Jn.xSpike:(Jn.x0+Jn.x1)/2,y:void 0!==Jn.ySpike?Jn.ySpike:(Jn.y0+Jn.y1)/2,distance:Jn.distance,spikeDistance:Jn.spikeDistance,curveNumber:Jn.trace.index,color:Jn.color,pointNumber:Jn.index}:null}st();var xt={fullLayout:ge,container:ge._hoverlayer,event:le},zt=ne._spikepoints;ne._spikepoints={vLinePoint:Qe.vLinePoint,hLinePoint:Qe.hLinePoint};var Bt=function(){cn.sort(function(Jn,_r){return Jn.distance-_r.distance}),cn=function(Jn,_r){for(var Hr=_r.charAt(0),Lr=[],$r=[],dn=[],Ut=0;Ut<Jn.length;Ut++){var Kt=Jn[Ut];f.traceIs(Kt.trace,"bar-like")||f.traceIs(Kt.trace,"box-violin")?dn.push(Kt):Kt.trace[Hr+"period"]?$r.push(Kt):Lr.push(Kt)}return Lr.concat($r).concat(dn)}(cn,qe)};Bt();var jt=qe.charAt(0),it=("x"===jt||"y"===jt)&&cn[0]&&F[cn[0].trace.type];if(De&&0!==lt&&0!==cn.length){var Mt=mt(cn.filter(function(Jn){return Jn.ya.showspikes}),lt,it);Qe.hLinePoint=Tt(Mt);var qt=mt(cn.filter(function(Jn){return Jn.xa.showspikes}),lt,it);Qe.vLinePoint=Tt(qt)}if(0===cn.length){var Wt=i.unhoverRaw(ne,le);return!De||null===Qe.hLinePoint&&null===Qe.vLinePoint||ee(zt)&&Y(ne,Qe,xt),Wt}if(De&&ee(zt)&&Y(ne,Qe,xt),p.isXYhover(Ft)&&0!==cn[0].length&&"splom"!==cn[0].trace.type){var an=cn[0],Ue=(cn=S[an.trace.type]?cn.filter(function(Jn){return Jn.trace.index===an.trace.index}):[an]).length;st($("x",an,ge),$("y",an,ge));var Ht,Jt=[],gn={},Qt=0,sn=function(Jn){var _r=S[Jn.trace.type]?R(Jn):Jn.trace.index;if(gn[_r]){var Hr=gn[_r]-1,Lr=Jt[Hr];Hr>0&&Math.abs(Jn.distance)<Math.abs(Lr.distance)&&(Jt[Hr]=Jn)}else Qt++,gn[_r]=Qt,Jt.push(Jn)};for(Ht=0;Ht<Ue;Ht++)sn(cn[Ht]);for(Ht=cn.length-1;Ht>Ue-1;Ht--)sn(cn[Ht]);cn=Jt,Bt()}var hn=ne._hoverdata,Dn=[],_n=K(ne),Tn=oe(ne);for(et=0;et<cn.length;et++){var wn=cn[et],kn=p.makeEventData(wn,wn.trace,wn.cd);if(!1!==wn.hovertemplate){var Fn=!1;wn.cd[wn.index]&&wn.cd[wn.index].ht&&(Fn=wn.cd[wn.index].ht),wn.hovertemplate=Fn||wn.trace.hovertemplate||!1}if(wn.xa&&wn.ya){var On=wn.x0+wn.xa._offset,Qn=wn.x1+wn.xa._offset,sr=wn.y0+wn.ya._offset,Mr=wn.y1+wn.ya._offset,Wr=Math.min(On,Qn),mr=Math.max(On,Qn),Or=Math.min(sr,Mr),vr=Math.max(sr,Mr);kn.bbox={x0:Wr+Tn,x1:mr+Tn,y0:Or+_n,y1:vr+_n}}wn.eventData=[kn],Dn.push(kn)}ne._hoverdata=Dn;var Xn="y"===qe&&(Ze.length>1||cn.length>1)||"closest"===qe&&Ge&&cn.length>1,jn=s.combine(ge.plot_bgcolor||s.background,ge.paper_bgcolor),nr=L(cn,{gd:ne,hovermode:qe,rotateLabels:Xn,bgColor:jn,container:ge._hoverlayer,outerContainer:ge._paper.node(),commonLabelOpts:ge.hoverlabel,hoverdistance:ge.hoverdistance});if(p.isUnifiedHover(qe)||(function(Jn,_r,Hr){var Lr,$r,dn,Ut,Kt,Mn,Bn,cr=0,ur=1,Rn=Jn.size(),Cn=new Array(Rn),Un=0;function Yn(rr){var wr=rr[0],Ir=rr[rr.length-1];if(dn=Ir.pos+Ir.dp+Ir.size-wr.pmax,($r=wr.pmin-wr.pos-wr.dp+wr.size)>.01){for(Kt=rr.length-1;Kt>=0;Kt--)rr[Kt].dp+=$r;Lr=!1}if(!(dn<.01)){if($r<-.01){for(Kt=rr.length-1;Kt>=0;Kt--)rr[Kt].dp-=dn;Lr=!1}if(Lr){var Vr=0;for(Ut=0;Ut<rr.length;Ut++)(Mn=rr[Ut]).pos+Mn.dp+Mn.size>wr.pmax&&Vr++;for(Ut=rr.length-1;Ut>=0&&!(Vr<=0);Ut--)(Mn=rr[Ut]).pos>wr.pmax-1&&(Mn.del=!0,Vr--);for(Ut=0;Ut<rr.length&&!(Vr<=0);Ut++)if((Mn=rr[Ut]).pos<wr.pmin+1)for(Mn.del=!0,Vr--,dn=2*Mn.size,Kt=rr.length-1;Kt>=0;Kt--)rr[Kt].dp-=dn;for(Ut=rr.length-1;Ut>=0&&!(Vr<=0);Ut--)(Mn=rr[Ut]).pos+Mn.dp+Mn.size>wr.pmax&&(Mn.del=!0,Vr--)}}}for(Jn.each(function(rr){var wr=rr[_r],Ir="x"===wr._id.charAt(0),Vr=wr.range;0===Un&&Vr&&Vr[0]>Vr[1]!==Ir&&(ur=-1),Cn[Un++]=[{datum:rr,traceIndex:rr.trace.index,dp:0,pos:rr.pos,posref:rr.posref,size:rr.by*(Ir?A:1)/2,pmin:0,pmax:Ir?Hr.width:Hr.height}]}),Cn.sort(function(rr,wr){return rr[0].posref-wr[0].posref||ur*(wr[0].traceIndex-rr[0].traceIndex)});!Lr&&cr<=Rn;){for(cr++,Lr=!0,Ut=0;Ut<Cn.length-1;){var Hn=Cn[Ut],Zn=Cn[Ut+1],Sr=Hn[Hn.length-1],Ar=Zn[0];if(($r=Sr.pos+Sr.dp+Sr.size-Ar.pos-Ar.dp+Ar.size)>.01&&Sr.pmin===Ar.pmin&&Sr.pmax===Ar.pmax){for(Kt=Zn.length-1;Kt>=0;Kt--)Zn[Kt].dp+=$r;for(Hn.push.apply(Hn,Zn),Cn.splice(Ut+1,1),Bn=0,Kt=Hn.length-1;Kt>=0;Kt--)Bn+=Hn[Kt].dp;for(dn=Bn/Hn.length,Kt=Hn.length-1;Kt>=0;Kt--)Hn[Kt].dp-=dn;Lr=!1}else Ut++}Cn.forEach(Yn)}for(Ut=Cn.length-1;Ut>=0;Ut--){var gr=Cn[Ut];for(Kt=gr.length-1;Kt>=0;Kt--){var Rr=gr[Kt],ir=Rr.datum;ir.offset=Rr.dp,ir.del=Rr.del}}}(nr,Xn?"xa":"ya",ge),V(nr,Xn,ge._invScaleX,ge._invScaleY)),he&&he.tagName){var Ur=f.getComponentMethod("annotations","hasClickToShow")(ne,Dn);n(g.select(he),Ur?"pointer":"")}!he||de||!function(Jn,_r,Hr){if(!Hr||Hr.length!==Jn._hoverdata.length)return!0;for(var Lr=Hr.length-1;Lr>=0;Lr--){var $r=Hr[Lr],dn=Jn._hoverdata[Lr];if($r.curveNumber!==dn.curveNumber||String($r.pointNumber)!==String(dn.pointNumber)||String($r.pointNumbers)!==String(dn.pointNumbers))return!0}return!1}(ne,0,hn)||(hn&&ne.emit("plotly_unhover",{event:le,points:hn}),ne.emit("plotly_hover",{event:le,points:ne._hoverdata,xaxes:ve,yaxes:Te,xvals:He,yvals:$e}))}(H,G,re,q,te)})},ie.loneHover=function(H,G){var re=!0;Array.isArray(H)||(re=!1,H=[H]);var q=G.gd,te=K(q),ne=oe(q),le=L(H.map(function(he){var be=he._x0||he.x0||he.x||0,ge=he._x1||he.x1||he.x||0,we=he._y0||he.y0||he.y||0,ke=he._y1||he.y1||he.y||0,De=he.eventData;if(De){var Ee=Math.min(be,ge),Re=Math.max(be,ge),ve=Math.min(we,ke),Te=Math.max(we,ke),Ie=he.trace;if(f.traceIs(Ie,"gl3d")){var Ce=q._fullLayout[Ie.scene]._scene.container,Pe=Ce.offsetLeft,Ve=Ce.offsetTop;Ee+=Pe,Re+=Pe,ve+=Ve,Te+=Ve}De.bbox={x0:Ee+ne,x1:Re+ne,y0:ve+te,y1:Te+te},G.inOut_bbox&&G.inOut_bbox.push(De.bbox)}else De=!1;return{color:he.color||s.defaultLine,x0:he.x0||he.x||0,x1:he.x1||he.x||0,y0:he.y0||he.y||0,y1:he.y1||he.y||0,xLabel:he.xLabel,yLabel:he.yLabel,zLabel:he.zLabel,text:he.text,name:he.name,idealAlign:he.idealAlign,borderColor:he.borderColor,fontFamily:he.fontFamily,fontSize:he.fontSize,fontColor:he.fontColor,nameLength:he.nameLength,textAlign:he.textAlign,trace:he.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:he.hovertemplate||!1,hovertemplateLabels:he.hovertemplateLabels||!1,eventData:De}}),{gd:q,hovermode:"closest",rotateLabels:!1,bgColor:G.bgColor||s.background,container:g.select(G.container),outerContainer:G.outerContainer||G.container}),ue=0,de=0;return le.sort(function(he,be){return he.y0-be.y0}).each(function(he,be){var ge=he.y0-he.by/2;he.offset=ge-5<ue?ue-ge+5:0,ue=ge+he.by+he.offset,be===G.anchorIndex&&(de=he.offset)}).each(function(he){he.offset-=de}),V(le,!1,q._fullLayout._invScaleX,q._fullLayout._invScaleY),re?le:le.node()};var D=/<extra>([\s\S]*)<\/extra>/;function L(H,G){var re=G.gd,q=re._fullLayout,te=G.hovermode,ne=G.rotateLabels,le=G.bgColor,ue=G.container,de=G.outerContainer,he=G.commonLabelOpts||{};if(0===H.length)return[[]];var be=G.fontFamily||y.HOVERFONT,ge=G.fontSize||y.HOVERFONTSIZE,we=H[0],ke=we.xa,De=we.ya,Ee=te.charAt(0),Re=we[Ee+"Label"],ve=j(re,de),Te=ve.top,Ie=ve.width,Ce=ve.height,Pe=void 0!==Re&&we.distance<=G.hoverdistance&&("x"===te||"y"===te);if(Pe){var Ve,qe,Je=!0;for(Ve=0;Ve<H.length;Ve++)if(Je&&void 0===H[Ve].zLabel&&(Je=!1),qe=H[Ve].hoverinfo||H[Ve].trace.hoverinfo){var lt=Array.isArray(qe)?qe:qe.split("+");if(-1===lt.indexOf("all")&&-1===lt.indexOf(te)){Pe=!1;break}}Je&&(Pe=!1)}var He=ue.selectAll("g.axistext").data(Pe?[0]:[]);if(He.enter().append("g").classed("axistext",!0),He.exit().remove(),He.each(function(){var it=g.select(this),Mt=b.ensureSingle(it,"path","",function(Qn){Qn.style({"stroke-width":"1px"})}),qt=b.ensureSingle(it,"text","",function(Qn){Qn.attr("data-notex",1)}),Wt=he.bgcolor||s.defaultLine,an=he.bordercolor||s.contrast(Wt),Ue=s.contrast(Wt),yt={family:he.font.family||be,size:he.font.size||ge,color:he.font.color||Ue};Mt.style({fill:Wt,stroke:an}),qt.text(Re).call(d.font,yt).call(a.positionText,0,0).call(a.convertToTspans,re),it.attr("transform","");var Dt,Ht,Jt=j(re,qt.node());if("x"===te){var gn="top"===ke.side?"-":"";qt.attr("text-anchor","middle").call(a.positionText,0,"top"===ke.side?Te-Jt.bottom-E-P:Te-Jt.top+E+P),Ht=De._offset+("top"===ke.side?0:De._length);var Qt=Jt.width/2+P;(Dt=ke._offset+(we.x0+we.x1)/2)<Qt?(Dt=Qt,Mt.attr("d","M-"+(Qt-E)+",0L-"+(Qt-2*E)+","+gn+E+"H"+(P+Jt.width/2)+"v"+gn+(2*P+Jt.height)+"H-"+Qt+"V"+gn+E+"Z")):Dt>q.width-Qt?(Dt=q.width-Qt,Mt.attr("d","M"+(Qt-E)+",0L"+Qt+","+gn+E+"v"+gn+(2*P+Jt.height)+"H-"+Qt+"V"+gn+E+"H"+(Qt-2*E)+"Z")):Mt.attr("d","M0,0L"+E+","+gn+E+"H"+(P+Jt.width/2)+"v"+gn+(2*P+Jt.height)+"H-"+(P+Jt.width/2)+"V"+gn+E+"H-"+E+"Z")}else{var sn,hn,Dn;"right"===De.side?(sn="start",hn=1,Dn="",Dt=ke._offset+ke._length):(sn="end",hn=-1,Dn="-",Dt=ke._offset),Ht=De._offset+(we.y0+we.y1)/2,qt.attr("text-anchor",sn),Mt.attr("d","M0,0L"+Dn+E+","+E+"V"+(P+Jt.height/2)+"h"+Dn+(2*P+Jt.width)+"V-"+(P+Jt.height/2)+"H"+Dn+E+"V-"+E+"Z");var _n,Tn=Jt.height/2,wn=Te-Jt.top-Tn,kn="clip"+q._uid+"commonlabel"+De._id;if(Dt<Jt.width+2*P+E){_n="M-"+(E+P)+"-"+Tn+"h-"+(Jt.width-P)+"V"+Tn+"h"+(Jt.width-P)+"Z";var Fn=Jt.width-Dt+P;a.positionText(qt,Fn,wn),"end"===sn&&qt.selectAll("tspan").each(function(){var Qn=g.select(this),sr=d.tester.append("text").text(Qn.text()).call(d.font,yt),Mr=j(re,sr.node());Math.round(Mr.width)<Math.round(Jt.width)&&Qn.attr("x",Fn-Mr.width),sr.remove()})}else a.positionText(qt,hn*(P+E),wn),_n=null;var On=q._topclips.selectAll("#"+kn).data(_n?[0]:[]);On.enter().append("clipPath").attr("id",kn).append("path"),On.exit().remove(),On.select("path").attr("d",_n),d.setClipUrl(qt,_n?kn:null,re)}it.attr("transform",e(Dt,Ht))}),p.isUnifiedHover(te)){ue.selectAll("g.hovertext").remove();var $e=H.filter(function(it){return"none"!==it.hoverinfo});if(0===$e.length)return;var et=q.hoverlabel,tt=et.font,bt={font:tt};m({showlegend:!0,legend:{title:{text:Re,font:tt},font:tt,bgcolor:et.bgcolor,bordercolor:et.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:q.legend?q.legend.traceorder:void 0,orientation:"v"}},bt,re._fullData);var Ct=bt.legend;Ct.entries=[];for(var Vt=0;Vt<$e.length;Vt++){var Ft=$e[Vt];if("none"!==Ft.hoverinfo){var ht=B(Ft,!0,te,q,Re),ut=ht[0],Rt=ht[1];Ft.name=Rt,Ft.text=""!==Rt?Rt+" : "+ut:ut;var nn=Ft.cd[Ft.index];nn&&(nn.mc&&(Ft.mc=nn.mc),nn.mcc&&(Ft.mc=nn.mcc),nn.mlc&&(Ft.mlc=nn.mlc),nn.mlcc&&(Ft.mlc=nn.mlcc),nn.mlw&&(Ft.mlw=nn.mlw),nn.mrc&&(Ft.mrc=nn.mrc),nn.dir&&(Ft.dir=nn.dir)),Ft._distinct=!0,Ct.entries.push([Ft])}}Ct.entries.sort(function(it,Mt){return it[0].trace.index-Mt[0].trace.index}),Ct.layer=ue,Ct._inHover=!0,Ct._groupTitleFont=et.grouptitlefont,l(re,Ct);var cn,Ze,Qe,Ge,rt=ue.select("g.legend"),Le=j(re,rt.node()),ze=Le.width+2*P,je=Le.height+2*P,Ne=$e[0],st=(Ne.x0+Ne.x1)/2,mt=(Ne.y0+Ne.y1)/2,Tt=!(f.traceIs(Ne.trace,"bar-like")||f.traceIs(Ne.trace,"box-violin"));"y"===Ee?Tt?(Ze=mt-P,cn=mt+P):(Ze=Math.min.apply(null,$e.map(function(it){return Math.min(it.y0,it.y1)})),cn=Math.max.apply(null,$e.map(function(it){return Math.max(it.y0,it.y1)}))):Ze=cn=b.mean($e.map(function(it){return(it.y0+it.y1)/2}))-je/2,"x"===Ee?Tt?(Qe=st+P,Ge=st-P):(Qe=Math.max.apply(null,$e.map(function(it){return Math.max(it.x0,it.x1)})),Ge=Math.min.apply(null,$e.map(function(it){return Math.min(it.x0,it.x1)}))):Qe=Ge=b.mean($e.map(function(it){return(it.x0+it.x1)/2}))-ze/2;var xt,zt,gt=ke._offset,Bt=De._offset;return Ge+=gt-ze,Ze+=Bt-je,xt=(Qe+=gt)+ze<Ie&&Qe>=0?Qe:Ge+ze<Ie&&Ge>=0?Ge:gt+ze<Ie?gt:Qe-st<st-Ge+ze?Ie-ze:0,zt=(cn+=Bt)+je<Ce&&cn>=0?cn:Ze+je<Ce&&Ze>=0?Ze:Bt+je<Ce?Bt:cn-mt<mt-Ze+je?Ce-je:0,rt.attr("transform",e((xt+=P)-1,(zt+=P)-1)),rt}var jt=ue.selectAll("g.hovertext").data(H,function(it){return R(it)});return jt.enter().append("g").classed("hovertext",!0).each(function(){var it=g.select(this);it.append("rect").call(s.fill,s.addOpacity(le,.8)),it.append("text").classed("name",!0),it.append("path").style("stroke-width","1px"),it.append("text").classed("nums",!0).call(d.font,be,ge)}),jt.exit().remove(),jt.each(function(it){var Mt=g.select(this).attr("transform",""),qt=it.color;Array.isArray(qt)&&(qt=qt[it.eventData[0].pointNumber]);var Wt=it.bgcolor||qt,an=s.combine(s.opacity(Wt)?Wt:s.defaultLine,le),Ue=s.combine(s.opacity(qt)?qt:s.defaultLine,le),yt=it.borderColor||s.contrast(an),Dt=B(it,Pe,te,q,Re,Mt),Ht=Dt[0],Jt=Dt[1],gn=Mt.select("text.nums").call(d.font,it.fontFamily||be,it.fontSize||ge,it.fontColor||yt).text(Ht).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,re),Qt=Mt.select("text.name"),sn=0,hn=0;if(Jt&&Jt!==Ht){Qt.call(d.font,it.fontFamily||be,it.fontSize||ge,Ue).text(Jt).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,re);var Dn=j(re,Qt.node());sn=Dn.width+2*P,hn=Dn.height+2*P}else Qt.remove(),Mt.select("rect").remove();Mt.select("path").style({fill:an,stroke:yt});var _n=it.xa._offset+(it.x0+it.x1)/2,Tn=it.ya._offset+(it.y0+it.y1)/2,wn=Math.abs(it.x1-it.x0),kn=Math.abs(it.y1-it.y0),Fn=j(re,gn.node()),On=Fn.width/q._invScaleX,Qn=Fn.height/q._invScaleY;it.ty0=(Te-Fn.top)/q._invScaleY,it.bx=On+2*P,it.by=Math.max(Qn+2*P,hn),it.anchor="start",it.txwidth=On,it.tx2width=sn,it.offset=0;var sr,Mr,Wr=(On+E+P+sn)*q._invScaleX;if(ne)it.pos=_n,sr=Tn+kn/2+Wr<=Ce,Mr=Tn-kn/2-Wr>=0,"top"!==it.idealAlign&&sr||!Mr?sr?(Tn+=kn/2,it.anchor="start"):it.anchor="middle":(Tn-=kn/2,it.anchor="end");else if(it.pos=Tn,sr=_n+wn/2+Wr<=Ie,Mr=_n-wn/2-Wr>=0,"left"!==it.idealAlign&&sr||!Mr)if(sr)_n+=wn/2,it.anchor="start";else{it.anchor="middle";var mr=Wr/2,Or=_n+mr-Ie,vr=_n-mr;Or>0&&(_n-=Or),vr<0&&(_n+=-vr)}else _n-=wn/2,it.anchor="end";gn.attr("text-anchor",it.anchor),sn&&Qt.attr("text-anchor",it.anchor),Mt.attr("transform",e(_n,Tn)+(ne?r(w):""))}),jt}function B(H,G,re,q,te,ne){var le="",ue="";void 0!==H.nameOverride&&(H.name=H.nameOverride),H.name&&(H.trace._meta&&(H.name=b.templateString(H.name,H.trace._meta)),le=Q(H.name,H.nameLength));var de=re.charAt(0);void 0!==H.zLabel?(void 0!==H.xLabel&&(ue+="x: "+H.xLabel+"<br>"),void 0!==H.yLabel&&(ue+="y: "+H.yLabel+"<br>"),"choropleth"!==H.trace.type&&"choroplethmapbox"!==H.trace.type&&(ue+=(ue?"z: ":"")+H.zLabel)):G&&H[de+"Label"]===te?ue=H[("x"===de?"y":"x")+"Label"]||"":void 0===H.xLabel?void 0!==H.yLabel&&"scattercarpet"!==H.trace.type&&(ue=H.yLabel):ue=void 0===H.yLabel?H.xLabel:"("+H.xLabel+", "+H.yLabel+")",!H.text&&0!==H.text||Array.isArray(H.text)||(ue+=(ue?"<br>":"")+H.text),void 0!==H.extraText&&(ue+=(ue?"<br>":"")+H.extraText),ne&&""===ue&&!H.hovertemplate&&(""===le&&ne.remove(),ue=le);var be=H.hovertemplate||!1;if(be){var ge=H.hovertemplateLabels||H;H[de+"Label"]!==te&&(ge[de+"other"]=ge[de+"Val"],ge[de+"otherLabel"]=ge[de+"Label"]),ue=(ue=b.hovertemplateString(be,ge,q._d3locale,H.eventData[0]||{},H.trace._meta)).replace(D,function(we,ke){return le=Q(ke,H.nameLength),""})}return[ue,le]}function V(H,G,re,q){var te=function(le){return le*re},ne=function(le){return le*q};H.each(function(le){var ue=g.select(this);if(le.del)return ue.remove();var de=ue.select("text.nums"),he=le.anchor,be="end"===he?-1:1,ge={start:1,end:-1,middle:0}[he],we=ge*(E+P),ke=we+ge*(le.txwidth+P),De=0,Ee=le.offset,Re="middle"===he;Re&&(we-=le.tx2width/2,ke+=le.txwidth/2+P),G&&(Ee*=-k,De=le.offset*M),ue.select("path").attr("d",Re?"M-"+te(le.bx/2+le.tx2width/2)+","+ne(Ee-le.by/2)+"h"+te(le.bx)+"v"+ne(le.by)+"h-"+te(le.bx)+"Z":"M0,0L"+te(be*E+De)+","+ne(E+Ee)+"v"+ne(le.by/2-E)+"h"+te(be*le.bx)+"v-"+ne(le.by)+"H"+te(be*E+De)+"V"+ne(Ee-E)+"Z");var ve=De+we,Te=Ee+le.ty0-le.by/2+P,Ie=le.textAlign||"auto";"auto"!==Ie&&("left"===Ie&&"start"!==he?(de.attr("text-anchor","start"),ve=Re?-le.bx/2-le.tx2width/2+P:-le.bx-P):"right"===Ie&&"end"!==he&&(de.attr("text-anchor","end"),ve=Re?le.bx/2-le.tx2width/2-P:le.bx+P)),de.call(a.positionText,te(ve),ne(Te)),le.tx2width&&(ue.select("text.name").call(a.positionText,te(ke+ge*P+De),ne(Ee+le.ty0-le.by/2+P)),ue.select("rect").call(d.setRect,te(ke+(ge-1)*le.tx2width/2+De),ne(Ee-le.by/2-1),te(le.tx2width),ne(le.by+2)))})}function Z(H,G){var re=H.index,q=H.trace||{},te=H.cd[0],ne=H.cd[re]||{};function le(we){return we||x(we)&&0===we}var ue=Array.isArray(re)?function(we,ke){var De=b.castOption(te,re,we);return le(De)?De:b.extractOption({},q,"",ke)}:function(we,ke){return b.extractOption(ne,q,we,ke)};function de(we,ke,De){var Ee=ue(ke,De);le(Ee)&&(H[we]=Ee)}if(de("hoverinfo","hi","hoverinfo"),de("bgcolor","hbg","hoverlabel.bgcolor"),de("borderColor","hbc","hoverlabel.bordercolor"),de("fontFamily","htf","hoverlabel.font.family"),de("fontSize","hts","hoverlabel.font.size"),de("fontColor","htc","hoverlabel.font.color"),de("nameLength","hnl","hoverlabel.namelength"),de("textAlign","hta","hoverlabel.align"),H.posref="y"===G||"closest"===G&&"h"===q.orientation?H.xa._offset+(H.x0+H.x1)/2:H.ya._offset+(H.y0+H.y1)/2,H.x0=b.constrain(H.x0,0,H.xa._length),H.x1=b.constrain(H.x1,0,H.xa._length),H.y0=b.constrain(H.y0,0,H.ya._length),H.y1=b.constrain(H.y1,0,H.ya._length),void 0!==H.xLabelVal&&(H.xLabel="xLabel"in H?H.xLabel:u.hoverLabelText(H.xa,H.xLabelVal,q.xhoverformat),H.xVal=H.xa.c2d(H.xLabelVal)),void 0!==H.yLabelVal&&(H.yLabel="yLabel"in H?H.yLabel:u.hoverLabelText(H.ya,H.yLabelVal,q.yhoverformat),H.yVal=H.ya.c2d(H.yLabelVal)),void 0!==H.zLabelVal&&void 0===H.zLabel&&(H.zLabel=String(H.zLabelVal)),!(isNaN(H.xerr)||"log"===H.xa.type&&H.xerr<=0)){var he=u.tickText(H.xa,H.xa.c2l(H.xerr),"hover").text;H.xLabel+=void 0!==H.xerrneg?" +"+he+" / -"+u.tickText(H.xa,H.xa.c2l(H.xerrneg),"hover").text:" \xb1 "+he,"x"===G&&(H.distance+=1)}if(!(isNaN(H.yerr)||"log"===H.ya.type&&H.yerr<=0)){var be=u.tickText(H.ya,H.ya.c2l(H.yerr),"hover").text;H.yLabel+=void 0!==H.yerrneg?" +"+be+" / -"+u.tickText(H.ya,H.ya.c2l(H.yerrneg),"hover").text:" \xb1 "+be,"y"===G&&(H.distance+=1)}var ge=H.hoverinfo||H.trace.hoverinfo;return ge&&"all"!==ge&&(-1===(ge=Array.isArray(ge)?ge:ge.split("+")).indexOf("x")&&(H.xLabel=void 0),-1===ge.indexOf("y")&&(H.yLabel=void 0),-1===ge.indexOf("z")&&(H.zLabel=void 0),-1===ge.indexOf("text")&&(H.text=void 0),-1===ge.indexOf("name")&&(H.name=void 0)),H}function Y(H,G,re){var q,te,ne=re.container,le=re.fullLayout,ue=le._size,de=re.event,he=!!G.hLinePoint,be=!!G.vLinePoint;if(ne.selectAll(".spikeline").remove(),be||he){var ge=s.combine(le.plot_bgcolor,le.paper_bgcolor);if(he){var we,ke,De=G.hLinePoint;q=De&&De.xa,"cursor"===(te=De&&De.ya).spikesnap?(we=de.pointerX,ke=de.pointerY):(we=q._offset+De.x,ke=te._offset+De.y);var Ee,Re,ve=T.readability(De.color,ge)<1.5?s.contrast(ge):De.color,Te=te.spikemode,Ie=te.spikethickness,Ce=te.spikecolor||ve,Pe=u.getPxPosition(H,te);if(-1!==Te.indexOf("toaxis")||-1!==Te.indexOf("across")){if(-1!==Te.indexOf("toaxis")&&(Ee=Pe,Re=we),-1!==Te.indexOf("across")){var Ve=te._counterDomainMin,qe=te._counterDomainMax;"free"===te.anchor&&(Ve=Math.min(Ve,te.position),qe=Math.max(qe,te.position)),Ee=ue.l+Ve*ue.w,Re=ue.l+qe*ue.w}ne.insert("line",":first-child").attr({x1:Ee,x2:Re,y1:ke,y2:ke,"stroke-width":Ie,stroke:Ce,"stroke-dasharray":d.dashStyle(te.spikedash,Ie)}).classed("spikeline",!0).classed("crisp",!0),ne.insert("line",":first-child").attr({x1:Ee,x2:Re,y1:ke,y2:ke,"stroke-width":Ie+2,stroke:ge}).classed("spikeline",!0).classed("crisp",!0)}-1!==Te.indexOf("marker")&&ne.insert("circle",":first-child").attr({cx:Pe+("right"!==te.side?Ie:-Ie),cy:ke,r:Ie,fill:Ce}).classed("spikeline",!0)}if(be){var Je,lt,He=G.vLinePoint;te=He&&He.ya,"cursor"===(q=He&&He.xa).spikesnap?(Je=de.pointerX,lt=de.pointerY):(Je=q._offset+He.x,lt=te._offset+He.y);var $e,et,tt=T.readability(He.color,ge)<1.5?s.contrast(ge):He.color,ft=q.spikemode,bt=q.spikethickness,Ct=q.spikecolor||tt,Vt=u.getPxPosition(H,q);if(-1!==ft.indexOf("toaxis")||-1!==ft.indexOf("across")){if(-1!==ft.indexOf("toaxis")&&($e=Vt,et=lt),-1!==ft.indexOf("across")){var Ft=q._counterDomainMin,ht=q._counterDomainMax;"free"===q.anchor&&(Ft=Math.min(Ft,q.position),ht=Math.max(ht,q.position)),$e=ue.t+(1-ht)*ue.h,et=ue.t+(1-Ft)*ue.h}ne.insert("line",":first-child").attr({x1:Je,x2:Je,y1:$e,y2:et,"stroke-width":bt,stroke:Ct,"stroke-dasharray":d.dashStyle(q.spikedash,bt)}).classed("spikeline",!0).classed("crisp",!0),ne.insert("line",":first-child").attr({x1:Je,x2:Je,y1:$e,y2:et,"stroke-width":bt+2,stroke:ge}).classed("spikeline",!0).classed("crisp",!0)}-1!==ft.indexOf("marker")&&ne.insert("circle",":first-child").attr({cx:Je,cy:Vt-("top"!==q.side?bt:-bt),r:bt,fill:Ct}).classed("spikeline",!0)}}}function ee(H,G){return!G||G.vLinePoint!==H._spikepoints.vLinePoint||G.hLinePoint!==H._spikepoints.hLinePoint}function Q(H,G){return a.plainText(H||"",{len:G,allowedTags:["br","sub","sup","b","i","em"]})}function $(H,G,re){var q=G[H+"a"],te=G[H+"Val"],ne=G.cd[0];if("category"===q.type)te=q._categoriesMap[te];else if("date"===q.type){var le=G.trace[H+"periodalignment"];if(le){var ue=G.cd[G.index],de=ue[H+"Start"];void 0===de&&(de=ue[H]);var he=ue[H+"End"];void 0===he&&(he=ue[H]);var be=he-de;"end"===le?te+=be:"middle"===le&&(te+=be/2)}te=q.d2c(te)}return ne&&ne.t&&ne.t.posLetter===q._id&&("group"!==re.boxmode&&"group"!==re.violinmode||(te+=ne.t.dPos)),te}function K(H){return H.offsetTop+H.clientTop}function oe(H){return H.offsetLeft+H.clientLeft}function j(H,G){var re=H._fullLayout,q=G.getBoundingClientRect(),te=q.x,ne=q.y,le=te+q.width,ue=ne+q.height,de=b.apply3DTransform(re._invTransform)(te,ne),he=b.apply3DTransform(re._invTransform)(le,ue),be=de[0],ge=de[1],we=he[0],ke=he[1];return{x:be,y:ge,width:we-be,height:ke-ge,top:Math.min(ge,ke),left:Math.min(be,we),right:Math.max(be,we),bottom:Math.max(ge,ke)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../color"),T=_("./helpers").isUnifiedHover;ae.exports=function(b,e,r,t){t=t||{};var a=e.legend;function n(d){t.font[d]||(t.font[d]=a?e.legend.font[d]:e.font[d])}e&&T(e.hovermode)&&(t.font||(t.font={}),n("size"),n("family"),n("color"),a?(t.bgcolor||(t.bgcolor=x.combine(e.legend.bgcolor,e.paper_bgcolor)),t.bordercolor||(t.bordercolor=e.legend.bordercolor)):t.bgcolor||(t.bgcolor=e.paper_bgcolor)),r("hoverlabel.bgcolor",t.bgcolor),r("hoverlabel.bordercolor",t.bordercolor),r("hoverlabel.namelength",t.namelength),g.coerceFont(r,"hoverlabel.font",t.font),r("hoverlabel.align",t.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes");ae.exports=function(T,b){function e(r,t){return void 0!==b[r]?b[r]:g.coerce(T,b,x,r,t)}return e("clickmode"),e("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../dragelement"),b=_("./helpers"),e=_("./layout_attributes"),r=_("./hover");ae.exports={moduleType:"component",name:"fx",constants:_("./constants"),schema:{layout:e},attributes:_("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:_("./layout_global_defaults"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),getDistanceFunction:b.getDistanceFunction,getClosest:b.getClosest,inbox:b.inbox,quadrature:b.quadrature,appendArrayPointValue:b.appendArrayPointValue,castHoverOption:function(t,a,n){return x.castOption(t,a,"hoverlabel."+n)},castHoverinfo:function(t,a,n){return x.castOption(t,n,"hoverinfo",function(d){return x.coerceHoverinfo({hoverinfo:d},{_module:t._module},a)})},hover:r.hover,unhover:T.unhover,loneHover:r.loneHover,loneUnhover:function(t){var a=x.isD3Selection(t)?t:g.select(t);a.selectAll("g.hovertext").remove(),a.selectAll(".spikeline").remove()},click:_("./click")}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(_,ae,ie){"use strict";var g=_("./constants"),x=_("../../plots/font_attributes"),T=x({editType:"none"});T.family.dflt=g.HOVERFONT,T.size.dflt=g.HOVERFONTSIZE,ae.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:T,grouptitlefont:x({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes"),T=_("./hovermode_defaults"),b=_("./hoverlabel_defaults");ae.exports=function(e,r){function t(s,i){return g.coerce(e,r,x,s,i)}T(e,r)&&(t("hoverdistance"),t("spikedistance")),"select"===t("dragmode")&&t("selectdirection");var a=r._has("mapbox"),n=r._has("geo"),d=r._basePlotModules.length;"zoom"===r.dragmode&&((a||n)&&1===d||a&&n&&2===d)&&(r.dragmode="pan"),b(e,r,t),g.coerceFont(t,"hoverlabel.grouptitlefont",r.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./hoverlabel_defaults"),T=_("./layout_attributes");ae.exports=function(b,e){x(b,e,function(r,t){return g.coerce(b,e,T,r,t)})}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../lib/regex").counter,T=_("../../plots/domain").attributes,b=_("../../plots/cartesian/constants").idRegex,e=_("../../plot_api/plot_template"),r={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[x("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[b.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[b.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:T({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function t(d,s,i){var u=s[i+"axes"],f=Object.keys((d._splomAxes||{})[i]||{});return Array.isArray(u)?u:f.length?f:void 0}function a(d,s,i,u,f,p){var y=s(d+"gap",i),m=s("domain."+d);s(d+"side",u);for(var l=new Array(f),w=m[0],v=(m[1]-w)/(f-y),A=v*(1-y),M=0;M<f;M++){var k=w+v*M;l[p?f-1-M:M]=[k,k+A]}return l}function n(d,s,i,u,f){var p,y=new Array(i);function m(l,w){-1!==s.indexOf(w)&&void 0===u[w]?(y[l]=w,u[w]=l):y[l]=""}if(Array.isArray(d))for(p=0;p<i;p++)m(p,d[p]);else for(m(0,f),p=1;p<i;p++)m(p,f+(p+1));return y}ae.exports={moduleType:"component",name:"grid",schema:{layout:{grid:r}},layoutAttributes:r,sizeDefaults:function(d,s){var i=d.grid||{},u=t(s,i,"x"),f=t(s,i,"y");if(d.grid||u||f){var p,y,m=Array.isArray(i.subplots)&&Array.isArray(i.subplots[0]),l=Array.isArray(u),w=Array.isArray(f),v=l&&u!==i.xaxes&&w&&f!==i.yaxes;m?(p=i.subplots.length,y=i.subplots[0].length):(w&&(p=f.length),l&&(y=u.length));var A=e.newContainer(s,"grid"),M=D("rows",p),k=D("columns",y);if(M*k>1){!m&&!l&&!w&&"independent"===D("pattern")&&(m=!0),A._hasSubplotGrid=m;var E,P,S="top to bottom"===D("roworder"),R=m?.3:.1;v&&s._splomGridDflt&&(E=s._splomGridDflt.xside,P=s._splomGridDflt.yside),A._domains={x:a("x",D,m?.2:.1,E,k),y:a("y",D,R,P,M,S)}}else delete s.grid}function D(L,B){return g.coerce(i,A,r,L,B)}},contentDefaults:function(d,s){var i=s.grid;if(i&&i._domains){var u,f,p,y,m,l,w,v=d.grid||{},A=s._subplots,M=i._hasSubplotGrid,k=i.rows,E=i.columns,P="independent"===i.pattern,S=i._axisMap={};if(M){var F=v.subplots||[];l=i.subplots=new Array(k);var R=1;for(u=0;u<k;u++){var D=l[u]=new Array(E),L=F[u]||[];for(f=0;f<E;f++)if(P?(m=1===R?"xy":"x"+R+"y"+R,R++):m=L[f],D[f]="",-1!==A.cartesian.indexOf(m)){if(w=m.indexOf("y"),p=m.slice(0,w),y=m.slice(w),void 0!==S[p]&&S[p]!==f||void 0!==S[y]&&S[y]!==u)continue;D[f]=m,S[p]=f,S[y]=u}}}else{var B=t(s,v,"x"),V=t(s,v,"y");i.xaxes=n(B,A.xaxis,E,S,"x"),i.yaxes=n(V,A.yaxis,k,S,"y")}var Z=i._anchors={},Y="top to bottom"===i.roworder;for(var ee in S){var Q,$,K,oe=ee.charAt(0),j=i[oe+"side"];if(j.length<8)Z[ee]="free";else if("x"===oe){if("t"===j.charAt(0)===Y?(Q=0,$=1,K=k):(Q=k-1,$=-1,K=-1),M){var H=S[ee];for(u=Q;u!==K;u+=$)if((m=l[u][H])&&(w=m.indexOf("y"),m.slice(0,w)===ee)){Z[ee]=m.slice(w);break}}else for(u=Q;u!==K;u+=$)if(-1!==A.cartesian.indexOf(ee+(y=i.yaxes[u]))){Z[ee]=y;break}}else if("l"===j.charAt(0)?(Q=0,$=1,K=E):(Q=E-1,$=-1,K=-1),M){var G=S[ee];for(u=Q;u!==K;u+=$)if((m=l[G][u])&&(w=m.indexOf("y"),m.slice(w)===ee)){Z[ee]=m.slice(0,w);break}}else for(u=Q;u!==K;u+=$)if(-1!==A.cartesian.indexOf((p=i.xaxes[u])+ee)){Z[ee]=p;break}}}}}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/constants"),x=_("../../plot_api/plot_template").templatedArray;_("../../constants/axis_placeable_objects"),ae.exports=x("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",g.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",g.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib/to_log_range");ae.exports=function(T,b,e,r){b=b||{};var t="log"===e&&"linear"===b.type;if(t||"linear"===e&&"log"===b.type)for(var n,d,s=T._fullLayout.images,i=b._id.charAt(0),u=0;u<s.length;u++)if(d="images["+u+"].",(n=s[u])[i+"ref"]===b._id){var f=n[i],p=n["size"+i],y=null,m=null;if(t){y=x(f,b.range);var l=p/Math.pow(10,y)/2;m=2*Math.log(l+Math.sqrt(1+l*l))/Math.LN10}else m=(y=Math.pow(10,f))*(Math.pow(10,p/2)-Math.pow(10,-p/2));g(y)?g(m)||(m=null):(y=null,m=null),r(d+i,y),r(d+"size"+i,m)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("./attributes");function e(r,t,a){function n(y,m){return g.coerce(r,t,b,y,m)}var d=n("source");if(!n("visible",!!d))return t;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var s={_fullLayout:a},i=["x","y"],u=0;u<2;u++){var f=i[u],p=x.coerceRef(r,t,s,f,"paper",void 0);"paper"!==p&&x.getFromId(s,p)._imgIndices.push(t._index),x.coercePosition(t,s,n,p,f,0)}return t}ae.exports=function(r,t){T(r,t,{name:"images",handleItemDefaults:e})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../drawing"),T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/axis_ids"),e=_("../../constants/xmlns_namespaces");ae.exports=function(r){var t,a,n=r._fullLayout,d=[],s={},i=[];for(a=0;a<n.images.length;a++){var u=n.images[a];if(u.visible)if("below"===u.layer&&"paper"!==u.xref&&"paper"!==u.yref){t=b.ref2id(u.xref)+b.ref2id(u.yref);var f=n._plots[t];if(!f){i.push(u);continue}f.mainplot&&(t=f.mainplot.id),s[t]||(s[t]=[]),s[t].push(u)}else"above"===u.layer?d.push(u):i.push(u)}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function m(E){var P=g.select(this);if(this._imgSrc!==E.source)if(P.attr("xmlns",e.svg),E.source&&"data:"===E.source.slice(0,5))P.attr("xlink:href",E.source),this._imgSrc=E.source;else{var S=new Promise(function(F){var R=new Image;function D(){P.remove(),F()}this.img=R,R.setAttribute("crossOrigin","anonymous"),R.onerror=D,R.onload=function(){var L=document.createElement("canvas");L.width=this.width,L.height=this.height,L.getContext("2d").drawImage(this,0,0);var B=L.toDataURL("image/png");P.attr("xlink:href",B),F()},P.on("error",D),R.src=E.source,this._imgSrc=E.source}.bind(this));r._promises.push(S)}}function l(E){var P,S,F=g.select(this),R=T.getFromId(r,E.xref),D=T.getFromId(r,E.yref),L="domain"===T.getRefType(E.xref),B="domain"===T.getRefType(E.yref),V=n._size;P=void 0!==R?"string"==typeof E.xref&&L?R._length*E.sizex:Math.abs(R.l2p(E.sizex)-R.l2p(0)):E.sizex*V.w,S=void 0!==D?"string"==typeof E.yref&&B?D._length*E.sizey:Math.abs(D.l2p(E.sizey)-D.l2p(0)):E.sizey*V.h;var Z,Y,ee=P*p[E.xanchor].offset,Q=S*y[E.yanchor].offset,$=p[E.xanchor].sizing+y[E.yanchor].sizing;switch(Z=void 0!==R?"string"==typeof E.xref&&L?R._length*E.x+R._offset:R.r2p(E.x)+R._offset:E.x*V.w+V.l,Z+=ee,Y=void 0!==D?"string"==typeof E.yref&&B?D._length*(1-E.y)+D._offset:D.r2p(E.y)+D._offset:V.h-E.y*V.h+V.t,Y+=Q,E.sizing){case"fill":$+=" slice";break;case"stretch":$="none"}F.attr({x:Z,y:Y,width:P,height:S,preserveAspectRatio:$,opacity:E.opacity});var K=(R&&"domain"!==T.getRefType(E.xref)?R._id:"")+(D&&"domain"!==T.getRefType(E.yref)?D._id:"");x.setClipUrl(F,K?"clip"+n._uid+K:null,r)}var w=n._imageLowerLayer.selectAll("image").data(i),v=n._imageUpperLayer.selectAll("image").data(d);w.enter().append("image"),v.enter().append("image"),w.exit().remove(),v.exit().remove(),w.each(function(E){m.bind(this)(E),l.bind(this)(E)}),v.each(function(E){m.bind(this)(E),l.bind(this)(E)});var A=Object.keys(n._plots);for(a=0;a<A.length;a++){var M=n._plots[t=A[a]];if(M.imagelayer){var k=M.imagelayer.selectAll("image").data(s[t]||[]);k.enter().append("image"),k.exit().remove(),k.each(function(E){m.bind(this)(E),l.bind(this)(E)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(_,ae,ie){"use strict";ae.exports={moduleType:"component",name:"images",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),includeBasePlot:_("../../plots/cartesian/include_components")("images"),draw:_("./draw"),convertCoords:_("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(_,ae,ie){"use strict";var g=_("../../plots/font_attributes"),x=_("../color/attributes");ae.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:g({editType:"legend"}),grouptitlefont:g({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:g({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(_,ae,ie){"use strict";ae.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib"),T=_("../../plot_api/plot_template"),b=_("../../plots/attributes"),e=_("./attributes"),r=_("../../plots/layout_attributes"),t=_("./helpers");ae.exports=function(a,n,d){var s,i=a.legend||{},u=T.newContainer(n,"legend");function f(D,L){return x.coerce(i,u,e,D,L)}for(var p=function(D,L){return x.coerce(s._input,s,b,D,L)},y=n.font||{},m=x.coerceFont(f,"grouptitlefont",x.extendFlat({},y,{size:Math.round(1.1*y.size)})),l=0,w=!1,v="normal",A=0;A<d.length;A++)(s=d[A]).visible&&((s.showlegend||s._dfltShowLegend&&!(s._module&&s._module.attributes&&s._module.attributes.showlegend&&!1===s._module.attributes.showlegend.dflt))&&(l++,s.showlegend&&(w=!0,(g.traceIs(s,"pie-like")||!0===s._input.showlegend)&&l++),x.coerceFont(p,"legendgrouptitle.font",m)),(g.traceIs(s,"bar")&&"stack"===n.barmode||-1!==["tonextx","tonexty"].indexOf(s.fill))&&(v=t.isGrouped({traceorder:v})?"grouped+reversed":"reversed"),void 0!==s.legendgroup&&""!==s.legendgroup&&(v=t.isReversed({traceorder:v})?"reversed+grouped":"grouped"));var M=x.coerce(a,n,r,"showlegend",w&&l>1);if(!1===M&&(n.legend=void 0),(!1!==M||i.uirevision)&&(f("uirevision",n.uirevision),!1!==M)){f("bgcolor",n.paper_bgcolor),f("bordercolor"),f("borderwidth");var k,E,P,S=x.coerceFont(f,"font",n.font),F="h"===f("orientation");if(F?(k=0,g.getComponentMethod("rangeslider","isVisible")(a.xaxis)?(E=1.1,P="bottom"):(E=-.1,P="top")):(k=1.02,E=1,P="auto"),f("traceorder",v),t.isGrouped(n.legend)&&f("tracegroupgap"),f("itemsizing"),f("itemwidth"),f("itemclick"),f("itemdoubleclick"),f("groupclick"),f("x",k),f("xanchor"),f("y",E),f("yanchor",P),f("valign"),x.noneOrAll(i,u,["x","y"]),f("title.text")){f("title.side",F?"left":"top");var R=x.extendFlat({},S,{size:x.bigFont(S.size)});x.coerceFont(f,"title.font",R)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../lib/events"),r=_("../dragelement"),t=_("../drawing"),a=_("../color"),n=_("../../lib/svg_text_utils"),d=_("./handle_click"),s=_("./constants"),i=_("../../constants/alignment"),u=i.LINE_SPACING,f=i.FROM_TL,p=i.FROM_BR,y=_("./get_legend_data"),m=_("./style"),l=_("./helpers");function w(S,F,R,D,L){var B=R.data()[0][0].trace,V={event:L,node:R.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:S.data,layout:S.layout,frames:S._transitionData._frames,config:S._context,fullData:S._fullData,fullLayout:S._fullLayout};B._group&&(V.group=B._group),b.traceIs(B,"pie-like")&&(V.label=R.datum()[0].label),!1!==e.triggerHandler(S,"plotly_legendclick",V)&&(1===D?F._clickTimeout=setTimeout(function(){S._fullLayout&&d(R,S,D)},S._context.doubleClickDelay):2===D&&(F._clickTimeout&&clearTimeout(F._clickTimeout),S._legendMouseDownTime=0,!1!==e.triggerHandler(S,"plotly_legenddoubleclick",V)&&d(R,S,D)))}function v(S,F,R){var D,L,B=S.data()[0][0],V=B.trace,Z=b.traceIs(V,"pie-like"),Y=!R._inHover&&F._context.edits.legendText&&!Z,ee=R._maxNameLength;B.groupTitle?(D=B.groupTitle.text,L=B.groupTitle.font):(L=R.font,R.entries?D=B.text:(D=Z?B.label:V.name,V._meta&&(D=x.templateString(D,V._meta))));var Q=x.ensureSingle(S,"text","legendtext");Q.attr("text-anchor","start").call(t.font,L).text(Y?A(D,ee):D),n.positionText(Q,R.itemwidth+2*s.itemGap,0),Y?Q.call(n.makeEditable,{gd:F,text:D}).call(k,S,F,R).on("edit",function(K){this.text(A(K,ee)).call(k,S,F,R);var oe=B.trace._fullInput||{},j={};if(b.hasTransform(oe,"groupby")){var H=b.getTransformIndices(oe,"groupby"),re=x.keyedContainer(oe,"transforms["+H[H.length-1]+"].styles","target","value.name");re.set(B.trace._group,K),j=re.constructUpdate()}else j.name=K;return b.call("_guiRestyle",F,j,V.index)}):k(Q,S,F,R)}function A(S,F){var R=Math.max(4,F);if(S&&S.trim().length>=R/2)return S;for(var D=R-(S=S||"").length;D>0;D--)S+=" ";return S}function M(S,F){var R,D=F._context.doubleClickDelay,L=1,B=x.ensureSingle(S,"rect","legendtoggle",function(V){F._context.staticPlot||V.style("cursor","pointer").attr("pointer-events","all"),V.call(a.fill,"rgba(0,0,0,0)")});F._context.staticPlot||(B.on("mousedown",function(){(R=(new Date).getTime())-F._legendMouseDownTime<D?L+=1:(L=1,F._legendMouseDownTime=R)}),B.on("mouseup",function(){if(!F._dragged&&!F._editing){var V=F._fullLayout.legend;(new Date).getTime()-F._legendMouseDownTime>D&&(L=Math.max(L-1,1)),w(F,V,S,L,g.event)}}))}function k(S,F,R,D,L){D._inHover&&S.attr("data-notex",!0),n.convertToTspans(S,R,function(){!function(B,V,Z,Y){var ee=B.data()[0][0];if(Z._inHover||!ee||ee.trace.showlegend){var Q=B.select("g[class*=math-group]"),$=Q.node();Z||(Z=V._fullLayout.legend);var j,H,oe=Z.borderwidth,G=(1===Y?Z.title.font:ee.groupTitle?ee.groupTitle.font:Z.font).size*u;if($){var re=t.bBox($);j=re.height,H=re.width,1===Y?t.setTranslate(Q,oe,oe+.75*j):t.setTranslate(Q,0,.25*j)}else{var q=B.select(1===Y?".legendtitletext":".legendtext"),te=n.lineCount(q),ne=q.node();if(j=G*te,H=ne?t.bBox(ne).width:0,1===Y)"left"===Z.title.side&&(H+=2*s.itemGap),n.positionText(q,oe+s.titlePad,oe+G);else{var le=2*s.itemGap+Z.itemwidth;ee.groupTitle&&(le=s.itemGap,H-=Z.itemwidth),n.positionText(q,le,-G*((te-1)/2-.3))}}1===Y?(Z._titleWidth=H,Z._titleHeight=j):(ee.lineHeight=G,ee.height=Math.max(j,16)+3,ee.width=H)}else B.remove()}(F,R,D,L)})}function E(S){return x.isRightAnchor(S)?"right":x.isCenterAnchor(S)?"center":"left"}function P(S){return x.isBottomAnchor(S)?"bottom":x.isMiddleAnchor(S)?"middle":"top"}ae.exports=function(S,F){return F||(F=S._fullLayout.legend||{}),function(R,D){var L,B,V=R._fullLayout,Z="legend"+V._uid,Y=D._inHover;if(Y?(L=D.layer,Z+="-hover"):L=V._infolayer,L){if(R._legendMouseDownTime||(R._legendMouseDownTime=0),Y){if(!D.entries)return;B=y(D.entries,D)}else{if(!R.calcdata)return;B=V.showlegend&&y(R.calcdata,D)}var ee=V.hiddenlabels||[];if(!(Y||V.showlegend&&B.length))return L.selectAll(".legend").remove(),V._topdefs.select("#"+Z).remove(),T.autoMargin(R,"legend");var Q=x.ensureSingle(L,"g","legend",function(te){Y||te.attr("pointer-events","all")}),$=x.ensureSingleById(V._topdefs,"clipPath",Z,function(te){te.append("rect")}),K=x.ensureSingle(Q,"rect","bg",function(te){te.attr("shape-rendering","crispEdges")});K.call(a.stroke,D.bordercolor).call(a.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px");var oe=x.ensureSingle(Q,"g","scrollbox"),j=D.title;if(D._titleWidth=0,D._titleHeight=0,j.text){var H=x.ensureSingle(oe,"text","legendtitletext");H.attr("text-anchor","start").call(t.font,j.font).text(j.text),k(H,oe,R,D,1)}else oe.selectAll(".legendtitletext").remove();var G=x.ensureSingle(Q,"rect","scrollbar",function(te){te.attr(s.scrollBarEnterAttrs).call(a.fill,s.scrollBarColor)}),re=oe.selectAll("g.groups").data(B);re.enter().append("g").attr("class","groups"),re.exit().remove();var q=re.selectAll("g.traces").data(x.identity);q.enter().append("g").attr("class","traces"),q.exit().remove(),q.style("opacity",function(te){var ne=te[0].trace;return b.traceIs(ne,"pie-like")?-1!==ee.indexOf(te[0].label)?.5:1:"legendonly"===ne.visible?.5:1}).each(function(){g.select(this).call(v,R,D)}).call(m,R,D).each(function(){Y||g.select(this).call(M,R)}),x.syncOrAsync([T.previousPromises,function(){return function(te,ne,le,ue){var de=te._fullLayout;ue||(ue=de.legend);var he=de._size,be=l.isVertical(ue),ge=l.isGrouped(ue),we=ue.borderwidth,ke=2*we,De=s.itemGap,Ee=ue.itemwidth+2*De,Re=2*(we+De),ve=P(ue),Te=ue.y<0||0===ue.y&&"top"===ve,Ie=ue.y>1||1===ue.y&&"bottom"===ve,Ce=ue.tracegroupgap;ue._maxHeight=Math.max(Te||Ie?de.height/2:he.h,30);var Pe=0;ue._width=0,ue._height=0;var Ge,rt,Le,ze,Ve=(rt=0,Le=0,(ze=(Ge=ue).title.side)&&(-1!==ze.indexOf("left")&&(rt=Ge._titleWidth),-1!==ze.indexOf("top")&&(Le=Ge._titleHeight)),[rt,Le]);if(be)le.each(function(Ge){var rt=Ge[0].height;t.setTranslate(this,we+Ve[0],we+Ve[1]+ue._height+rt/2+De),ue._height+=rt,ue._width=Math.max(ue._width,Ge[0].width)}),Pe=Ee+ue._width,ue._width+=De+Ee+ke,ue._height+=Re,ge&&(ne.each(function(Ge,rt){t.setTranslate(this,0,rt*ue.tracegroupgap)}),ue._height+=(ue._lgroupsLength-1)*ue.tracegroupgap);else{var qe=E(ue),He=Ie||Te,$e=de.width/2;ue._maxWidth=Math.max(ue.x<0||0===ue.x&&"right"===qe?He&&"left"===qe?he.l+he.w:$e:ue.x>1||1===ue.x&&"left"===qe?He&&"right"===qe?he.r+he.w:$e:he.w,2*Ee);var et=0,tt=0;le.each(function(Ge){var rt=Ge[0].width+Ee;et=Math.max(et,rt),tt+=rt}),Pe=null;var ft=0;if(ge){var bt=0,Ct=0,Vt=0;ne.each(function(){var Ge=0,rt=0;g.select(this).selectAll("g.traces").each(function(ze){var je=ze[0].width,Ne=ze[0].height;t.setTranslate(this,Ve[0],Ve[1]+we+De+Ne/2+rt),rt+=Ne,Ge=Math.max(Ge,Ee+je)}),bt=Math.max(bt,rt);var Le=Ge+De;Ct>0&&Le+we+Ct>ue._maxWidth&&(ft=Math.max(ft,Ct),Ct=0,Vt+=bt+Ce,bt=rt),t.setTranslate(this,Ct,Vt),Ct+=Le}),ue._width=Math.max(ft,Ct)+we,ue._height=Vt+bt+Re}else{var Ft=le.size(),ht=tt+ke+(Ft-1)*De<ue._maxWidth,ut=0,Rt=0,nn=0,cn=0;le.each(function(Ge){var rt=Ge[0].height,Le=Ee+Ge[0].width,ze=(ht?Le:et)+De;ze+we+Rt-De>=ue._maxWidth&&(ft=Math.max(ft,cn),Rt=0,nn+=ut,ue._height+=ut,ut=0),t.setTranslate(this,Ve[0]+we+Rt,Ve[1]+we+nn+rt/2+De),cn=Rt+Le+De,Rt+=ze,ut=Math.max(ut,rt)}),ht?(ue._width=Rt+ke,ue._height=ut+Re):(ue._width=Math.max(ft,cn)+ke,ue._height+=ut+Re)}}ue._width=Math.ceil(Math.max(ue._width+Ve[0],ue._titleWidth+2*(we+s.titlePad))),ue._height=Math.ceil(Math.max(ue._height+Ve[1],ue._titleHeight+2*(we+s.itemGap))),ue._effHeight=Math.min(ue._height,ue._maxHeight);var Ze=te._context.edits,Qe=Ze.legendText||Ze.legendPosition;le.each(function(Ge){var rt=g.select(this).select(".legendtoggle"),Le=Ge[0].height,ze=Qe?Ee:Pe||Ee+Ge[0].width;be||(ze+=De/2),t.setRect(rt,0,-Le/2,ze,Le)})}(R,re,q,D)},function(){var te,ne,le,ue,He,$e,et,tt,de=V._size,he=D.borderwidth;if(!Y){if(et=E($e=(He=R)._fullLayout.legend),tt=P($e),T.autoMargin(He,"legend",{x:$e.x,y:$e.y,l:$e._width*f[et],r:$e._width*p[et],b:$e._effHeight*p[tt],t:$e._effHeight*f[tt]}))return;var be=de.l+de.w*D.x-f[E(D)]*D._width,ge=de.t+de.h*(1-D.y)-f[P(D)]*D._effHeight;if(V.margin.autoexpand){var we=be,ke=ge;be=x.constrain(be,0,V.width-D._width),ge=x.constrain(ge,0,V.height-D._effHeight),be!==we&&x.log("Constrain legend.x to make legend fit inside graph"),ge!==ke&&x.log("Constrain legend.y to make legend fit inside graph")}t.setTranslate(Q,be,ge)}if(G.on(".drag",null),Q.on("wheel",null),Y||D._height<=D._maxHeight||R._context.staticPlot){var De=D._effHeight;Y&&(De=D._height),K.attr({width:D._width-he,height:De-he,x:he/2,y:he/2}),t.setTranslate(oe,0,0),$.select("rect").attr({width:D._width-2*he,height:De-2*he,x:he,y:he}),t.setClipUrl(oe,Z,R),t.setRect(G,0,0,0,0),delete D._scrollY}else{var Ee,ve,Te=Math.max(s.scrollBarMinHeight,D._effHeight*D._effHeight/D._height),Ie=D._effHeight-Te-2*s.scrollBarMargin,Ce=D._height-D._effHeight,Pe=Ie/Ce,Ve=Math.min(D._scrollY||0,Ce);K.attr({width:D._width-2*he+s.scrollBarWidth+s.scrollBarMargin,height:D._effHeight-he,x:he/2,y:he/2}),$.select("rect").attr({width:D._width-2*he+s.scrollBarWidth+s.scrollBarMargin,height:D._effHeight-2*he,x:he,y:he+Ve}),t.setClipUrl(oe,Z,R),lt(Ve,Te,Pe),Q.on("wheel",function(){lt(Ve=x.constrain(D._scrollY+g.event.deltaY/Ie*Ce,0,Ce),Te,Pe),0!==Ve&&Ve!==Ce&&g.event.preventDefault()});var qe=g.behavior.drag().on("dragstart",function(){var He=g.event.sourceEvent;Ee="touchstart"===He.type?He.changedTouches[0].clientY:He.clientY,ve=Ve}).on("drag",function(){var He=g.event.sourceEvent;2===He.buttons||He.ctrlKey||lt(Ve=function($e,et,tt){return x.constrain((tt-et)/Pe+$e,0,Ce)}(ve,Ee,"touchmove"===He.type?He.changedTouches[0].clientY:He.clientY),Te,Pe)});G.call(qe);var Je=g.behavior.drag().on("dragstart",function(){var He=g.event.sourceEvent;"touchstart"===He.type&&(Ee=He.changedTouches[0].clientY,ve=Ve)}).on("drag",function(){var He=g.event.sourceEvent;"touchmove"===He.type&&lt(Ve=function($e,et,tt){return x.constrain((et-tt)/Pe+$e,0,Ce)}(ve,Ee,He.changedTouches[0].clientY),Te,Pe)});oe.call(Je)}function lt(He,$e,et){D._scrollY=R._fullLayout.legend._scrollY=He,t.setTranslate(oe,0,-He),t.setRect(G,D._width,s.scrollBarMargin+He*et,s.scrollBarWidth,$e),$.select("rect").attr("y",he+He)}R._context.edits.legendPosition&&(Q.classed("cursor-move",!0),r.init({element:Q.node(),gd:R,prepFn:function(){var He=t.getTranslate(Q);le=He.x,ue=He.y},moveFn:function(He,$e){var et=le+He,tt=ue+$e;t.setTranslate(Q,et,tt),te=r.align(et,0,de.l,de.l+de.w,D.xanchor),ne=r.align(tt,0,de.t+de.h,de.t,D.yanchor)},doneFn:function(){void 0!==te&&void 0!==ne&&b.call("_guiRelayout",R,{"legend.x":te,"legend.y":ne})},clickFn:function(He,$e){var et=L.selectAll("g.traces").filter(function(){var tt=this.getBoundingClientRect();return $e.clientX>=tt.left&&$e.clientX<=tt.right&&$e.clientY>=tt.top&&$e.clientY<=tt.bottom});et.size()>0&&w(R,Q,et,He,$e)}}))}],R)}}(S,F)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("./helpers");ae.exports=function(T,b){var e,r,t=b._inHover,a=x.isGrouped(b),n=x.isReversed(b),d={},s=[],i=!1,u={},f=0,p=0;function y(V,Z){if(""!==V&&x.isGrouped(b))-1===s.indexOf(V)?(s.push(V),i=!0,d[V]=[Z]):d[V].push(Z);else{var Y="~~i"+f;s.push(Y),d[Y]=[Z],f++}}for(e=0;e<T.length;e++){var m=T[e],l=m[0],w=l.trace,v=w.legendgroup;if(t||w.visible&&w.showlegend)if(g.traceIs(w,"pie-like"))for(u[v]||(u[v]={}),r=0;r<m.length;r++){var A=m[r].label;u[v][A]||(y(v,{label:A,color:m[r].color,i:m[r].i,trace:w,pts:m[r].pts}),u[v][A]=!0,p=Math.max(p,(A||"").length))}else y(v,l),p=Math.max(p,(w.name||"").length)}if(!s.length)return[];var M=!i||!a,k=[];for(e=0;e<s.length;e++){var E=d[s[e]];k.push(M?E[0]:E)}for(M&&(k=[k]),e=0;e<k.length;e++){var P=1/0;for(r=0;r<k[e].length;r++){var S=k[e][r].trace.legendrank;P>S&&(P=S)}k[e][0]._groupMinRank=P,k[e][0]._preGroupSort=e}var F=function(V,Z){return V.trace.legendrank-Z.trace.legendrank||V._preSort-Z._preSort};for(k.forEach(function(V,Z){V[0]._preGroupSort=Z}),k.sort(function(V,Z){return V[0]._groupMinRank-Z[0]._groupMinRank||V[0]._preGroupSort-Z[0]._preGroupSort}),e=0;e<k.length;e++){k[e].forEach(function(V,Z){V._preSort=Z}),k[e].sort(F);var R=k[e][0].trace,D=null;for(r=0;r<k[e].length;r++){var L=k[e][r].trace.legendgrouptitle;if(L&&L.text){D=L,t&&(L.font=b._groupTitleFont);break}}if(n&&k[e].reverse(),D){var B=!1;for(r=0;r<k[e].length;r++)if(g.traceIs(k[e][r].trace,"pie-like")){B=!0;break}k[e].unshift({i:-1,groupTitle:D,noClick:B,trace:{showlegend:R.showlegend,legendgroup:R.legendgroup,visible:"toggleitem"===b.groupclick||R.visible}})}for(r=0;r<k[e].length;r++)k[e][r]=[k[e][r]]}return b._lgroupsLength=k.length,b._maxNameLength=p,k}},{"../../registry":638,"./helpers":422}],421:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../registry"),T=!0;ae.exports=function(b,e,r){var t=e._fullLayout;if(!e._dragged&&!e._editing){var a,n=t.legend.itemclick,d=t.legend.itemdoubleclick,s=t.legend.groupclick;if(1===r&&"toggle"===n&&"toggleothers"===d&&T&&e.data&&e._context.showTips&&g.notifier(g._(e,"Double-click on legend to isolate one trace"),"long"),T=!1,1===r?a=n:2===r&&(a=d),a){var i="togglegroup"===s,u=t.hiddenlabels?t.hiddenlabels.slice():[],f=b.data()[0][0];if(!f.groupTitle||!f.noClick){var p,y,m,l,w,v=e._fullData,A=f.trace,M=A.legendgroup,k={},E=[],P=[],S=[];if(x.traceIs(A,"pie-like")){var F=f.label,R=u.indexOf(F);"toggle"===a?-1===R?u.push(F):u.splice(R,1):"toggleothers"===a&&(u=[],e.calcdata[0].forEach(function(G){F!==G.label&&u.push(G.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===u.length&&-1===R&&(u=[])),x.call("_guiRelayout",e,"hiddenlabels",u)}else{var D,L=M&&M.length,B=[];if(L)for(p=0;p<v.length;p++)(D=v[p]).visible&&D.legendgroup===M&&B.push(p);if("toggle"===a){var V;switch(A.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0}if(L)if(i)for(p=0;p<v.length;p++)!1!==v[p].visible&&v[p].legendgroup===M&&H(v[p],V);else H(A,V);else H(A,V)}else if("toggleothers"===a){var ee,$=!0;for(p=0;p<v.length;p++)if(ee=!0!==v[p].showlegend,!(v[p]===A||ee||L&&v[p].legendgroup===M||!0!==v[p].visible||x.traceIs(v[p],"notLegendIsolatable"))){$=!1;break}for(p=0;p<v.length;p++)if(!1!==v[p].visible&&!x.traceIs(v[p],"notLegendIsolatable"))switch(A.visible){case"legendonly":H(v[p],!0);break;case!0:ee=!0!==v[p].showlegend&&!v[p].legendgroup,H(v[p],!!(v[p]===A||L&&v[p].legendgroup===M||ee)||!!$||"legendonly")}}for(p=0;p<P.length;p++)if(m=P[p]){var K=m.constructUpdate(),oe=Object.keys(K);for(y=0;y<oe.length;y++)(k[l=oe[y]]=k[l]||[])[S[p]]=K[l]}for(w=Object.keys(k),p=0;p<w.length;p++)for(l=w[p],y=0;y<E.length;y++)k[l].hasOwnProperty(y)||(k[l][y]=void 0);x.call("_guiRestyle",e,k,E)}}}}function j(G,re,q){var te=E.indexOf(G),ne=k[re];return ne||(ne=k[re]=[]),-1===E.indexOf(G)&&(E.push(G),te=E.length-1),ne[te]=q,te}function H(G,re){if(!f.groupTitle||i){var q=G._fullInput;if(x.hasTransform(q,"groupby")){var te=P[q.index];if(!te){var ne=x.getTransformIndices(q,"groupby");te=g.keyedContainer(q,"transforms["+ne[ne.length-1]+"].styles","target","value.visible"),P[q.index]=te}var ue=te.get(G._group);void 0===ue&&(ue=!0),!1!==ue&&te.set(G._group,re),S[q.index]=j(q.index,"visible",!1!==q.visible)}else j(q.index,"visible",!1!==q.visible&&re)}}}},{"../../lib":503,"../../registry":638}],422:[function(_,ae,ie){"use strict";ie.isGrouped=function(g){return-1!==(g.traceorder||"").indexOf("grouped")},ie.isVertical=function(g){return"h"!==g.orientation},ie.isReversed=function(g){return-1!==(g.traceorder||"").indexOf("reversed")}},{}],423:[function(_,ae,ie){"use strict";ae.exports={moduleType:"component",name:"legend",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),draw:_("./draw"),style:_("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=T.strTranslate,e=_("../drawing"),r=_("../color"),t=_("../colorscale/helpers").extractOpts,a=_("../../traces/scatter/subtypes"),n=_("../../traces/pie/style_one"),d=_("../../traces/pie/helpers").castOption,s=_("./constants");function i(p,y){return(y?"radial":"horizontal")+(p?"":"reversed")}function u(p){var y=p[0].trace,m=y.contours,l=a.hasLines(y),w=a.hasMarkers(y),v=y.visible&&y.fill&&"none"!==y.fill,A=!1,M=!1;if(m){var k=m.coloring;"lines"===k?A=!0:l="none"===k||"heatmap"===k||m.showlines,"constraint"===m.type?v="="!==m._operation:"fill"!==k&&"heatmap"!==k||(M=!0)}return{showMarker:w,showLine:l,showFill:v,showGradientLine:A,showGradientFill:M,anyLine:l||A,anyFill:v||M}}function f(p,y,m){return p&&T.isArrayOrTypedArray(p)?y:p>m?m:p}ae.exports=function(p,y,m){m||(m=y._fullLayout.legend);var w="constant"===m.itemsizing,v=m.itemwidth,M=b((v+2*s.itemGap)/2,0),k=function(S,F,R,D){var L;if(S+1)L=S;else{if(!(F&&F.width>0))return 0;L=F.width}return w?D:Math.min(L,R)};function E(S,F,R){var D=S[0].trace,L=D.marker||{},B=L.line||{},V=R?D.visible&&D.type===R:x.traceIs(D,"bar"),Z=g.select(F).select("g.legendpoints").selectAll("path.legend"+R).data(V?[S]:[]);Z.enter().append("path").classed("legend"+R,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),Z.exit().remove(),Z.each(function(Y){var ee=g.select(this),Q=Y[0],$=k(Q.mlw,L.line,5,2);ee.style("stroke-width",$+"px");var K=Q.mcc;if(!m._inHover&&"mc"in Q){var oe=t(L),j=oe.mid;void 0===j&&(j=(oe.max+oe.min)/2),K=e.tryColorscale(L,"")(j)}var H=K||Q.mc||L.color,G=L.pattern,re=G&&e.getPatternAttr(G.shape,0,"");if(re){var q=e.getPatternAttr(G.bgcolor,0,null),te=e.getPatternAttr(G.fgcolor,0,null),ne=G.fgopacity,le=f(G.size,8,10),ue=f(G.solidity,.5,1);ee.call(e.pattern,"legend",y,"legend-"+D.uid,re,le,ue,K,G.fillmode,q,te,ne)}else ee.call(r.fill,H);$&&r.stroke(ee,Q.mlc||B.color)})}function P(S,F,R){var D=S[0],L=D.trace,B=R?L.visible&&L.type===R:x.traceIs(L,R),V=g.select(F).select("g.legendpoints").selectAll("path.legend"+R).data(B?[S]:[]);if(V.enter().append("path").classed("legend"+R,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),V.exit().remove(),V.size()){var Z=(L.marker||{}).line,Y=k(d(Z.width,D.pts),Z,5,2),ee=T.minExtend(L,{marker:{line:{width:Y}}});ee.marker.line.color=Z.color;var Q=T.minExtend(D,{trace:ee});n(V,Q,ee)}}p.each(function(S){var F=g.select(this),R=T.ensureSingle(F,"g","layers");R.style("opacity",S[0].trace.opacity);var D=m.valign,L=S[0].lineHeight,B=S[0].height;R.attr("transform","middle"!==D&&L&&B?b(0,{top:1,bottom:-1}[D]*(.5*(L-B+3))):null),R.selectAll("g.legendfill").data([S]).enter().append("g").classed("legendfill",!0),R.selectAll("g.legendlines").data([S]).enter().append("g").classed("legendlines",!0);var Z=R.selectAll("g.legendsymbols").data([S]);Z.enter().append("g").classed("legendsymbols",!0),Z.selectAll("g.legendpoints").data([S]).enter().append("g").classed("legendpoints",!0)}).each(function(S){var F,R=S[0].trace,D=[];if(R.visible)switch(R.type){case"histogram2d":case"heatmap":D=[["M-15,-2V4H15V-2Z"]],F=!0;break;case"choropleth":case"choroplethmapbox":D=[["M-6,-6V6H6V-6Z"]],F=!0;break;case"densitymapbox":D=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],F="radial";break;case"cone":D=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],F=!1;break;case"streamtube":D=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],F=!1;break;case"surface":D=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],F=!0;break;case"mesh3d":D=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],F=!1;break;case"volume":D=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],F=!0;break;case"isosurface":D=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],F=!1}var L=g.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(D);L.enter().append("path").classed("legend3dandfriends",!0).attr("transform",M).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(B,V){var Z,Y=g.select(this),ee=t(R),Q=ee.colorscale,$=ee.reversescale;if(Q){if(!F){var K=Q.length;Z=0===V?Q[$?K-1:0][1]:1===V?Q[$?0:K-1][1]:Q[Math.floor((K-1)/2)][1]}}else{var oe=R.vertexcolor||R.facecolor||R.color;Z=T.isArrayOrTypedArray(oe)?oe[V]||oe[0]:oe}Y.attr("d",B[0]),Z?Y.call(r.fill,Z):Y.call(function(j){j.size()&&e.gradient(j,y,"legendfill-"+R.uid,i($,"radial"===F),Q,"fill")})})}).each(function(S){var F=S[0].trace,R="waterfall"===F.type;if(S[0]._distinct&&R){var D=S[0].trace[S[0].dir].marker;return S[0].mc=D.color,S[0].mlw=D.line.width,S[0].mlc=D.line.color,E(S,this,"waterfall")}var L=[];F.visible&&R&&(L=S[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var B=g.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(L);B.enter().append("path").classed("legendwaterfall",!0).attr("transform",M).style("stroke-miterlimit",1),B.exit().remove(),B.each(function(V){var Z=g.select(this),Y=F[V[0]].marker,ee=k(void 0,Y.line,5,2);Z.attr("d",V[1]).style("stroke-width",ee+"px").call(r.fill,Y.color),ee&&Z.call(r.stroke,Y.line.color)})}).each(function(S){E(S,this,"funnel")}).each(function(S){E(S,this)}).each(function(S){var F=S[0].trace,R=g.select(this).select("g.legendpoints").selectAll("path.legendbox").data(F.visible&&x.traceIs(F,"box-violin")?[S]:[]);R.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),R.exit().remove(),R.each(function(){var D=g.select(this);if("all"!==F.boxpoints&&"all"!==F.points||0!==r.opacity(F.fillcolor)||0!==r.opacity((F.line||{}).color)){var L=k(void 0,F.line,5,2);D.style("stroke-width",L+"px").call(r.fill,F.fillcolor),L&&r.stroke(D,F.line.color)}else{var B=T.minExtend(F,{marker:{size:w?12:T.constrain(F.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});R.call(e.pointStyle,B,y)}})}).each(function(S){P(S,this,"funnelarea")}).each(function(S){P(S,this,"pie")}).each(function(S){var F,R,D=u(S),L=D.showFill,B=D.showLine,V=D.showGradientLine,Z=D.showGradientFill,Y=D.anyFill,ee=D.anyLine,Q=S[0],$=Q.trace,K=t($),oe=K.colorscale,j=K.reversescale,H=a.hasMarkers($)||!Y?"M5,0":ee?"M5,-2":"M5,-3",G=g.select(this),re=G.select(".legendfill").selectAll("path").data(L||Z?[S]:[]);if(re.enter().append("path").classed("js-fill",!0),re.exit().remove(),re.attr("d",H+"h"+v+"v6h-"+v+"z").call(L?e.fillGroupStyle:function(ne){ne.size()&&e.gradient(ne,y,"legendfill-"+$.uid,i(j),oe,"fill")}),B||V){var q=k(void 0,$.line,10,5);R=T.minExtend($,{line:{width:q}}),F=[T.minExtend(Q,{trace:R})]}var te=G.select(".legendlines").selectAll("path").data(B||V?[F]:[]);te.enter().append("path").classed("js-line",!0),te.exit().remove(),te.attr("d",H+(V?"l"+v+",0.0001":"h"+v)).call(B?e.lineGroupStyle:function(ne){if(ne.size()){var le="legendline-"+$.uid;e.lineGroupStyle(ne),e.gradient(ne,y,le,i(j),oe,"stroke")}})}).each(function(S){var F,R,D=u(S),V=D.showLine,Z=D.showMarker,Y=S[0],ee=Y.trace,Q=!Z&&!D.anyLine&&!D.anyFill&&a.hasText(ee);function $(te,ne,le,ue){var de=T.nestedProperty(ee,te).get(),he=T.isArrayOrTypedArray(de)&&ne?ne(de):de;if(w&&he&&void 0!==ue&&(he=ue),le){if(he<le[0])return le[0];if(he>le[1])return le[1]}return he}function K(te){return Y._distinct&&Y.index&&te[Y.index]?te[Y.index]:te[0]}if(Z||Q||V){var oe={},j={};if(Z){oe.mc=$("marker.color",K),oe.mx=$("marker.symbol",K),oe.mo=$("marker.opacity",T.mean,[.2,1]),oe.mlc=$("marker.line.color",K),oe.mlw=$("marker.line.width",T.mean,[0,5],2),j.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var H=$("marker.size",T.mean,[2,16],12);oe.ms=H,j.marker.size=H}V&&(j.line={width:$("line.width",K,[0,10],5)}),Q&&(oe.tx="Aa",oe.tp=$("textposition",K),oe.ts=10,oe.tc=$("textfont.color",K),oe.tf=$("textfont.family",K)),F=[T.minExtend(Y,oe)],(R=T.minExtend(ee,j)).selectedpoints=null,R.texttemplate=null}var G=g.select(this).select("g.legendpoints"),re=G.selectAll("path.scatterpts").data(Z?F:[]);re.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",M),re.exit().remove(),re.call(e.pointStyle,R,y),Z&&(F[0].mrc=3);var q=G.selectAll("g.pointtext").data(Q?F:[]);q.enter().append("g").classed("pointtext",!0).append("text").attr("transform",M),q.exit().remove(),q.selectAll("text").call(e.textPointStyle,R,y)}).each(function(S){var F=S[0].trace,R=g.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(F.visible&&"candlestick"===F.type?[S,S]:[]);R.enter().append("path").classed("legendcandle",!0).attr("d",function(D,L){return L?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",M).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(D,L){var B=g.select(this),V=F[L?"increasing":"decreasing"],Z=k(void 0,V.line,5,2);B.style("stroke-width",Z+"px").call(r.fill,V.fillcolor),Z&&r.stroke(B,V.line.color)})}).each(function(S){var F=S[0].trace,R=g.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(F.visible&&"ohlc"===F.type?[S,S]:[]);R.enter().append("path").classed("legendohlc",!0).attr("d",function(D,L){return L?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",M).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(D,L){var B=g.select(this),V=F[L?"increasing":"decreasing"],Z=k(void 0,V.line,5,2);B.style("fill","none").call(e.dashLine,V.line.dash,Z),Z&&r.stroke(B,V.line.color)})})}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":905,"../../traces/pie/style_one":911,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(_,ae,ie){"use strict";_("./constants"),ae.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../plots/plots"),T=_("../../plots/cartesian/axis_ids"),b=_("../../fonts/ploticon"),e=_("../shapes/draw").eraseActiveShape,r=_("../../lib"),t=r._,a=ae.exports={};function n(l,w){var v,A,M=w.currentTarget,k=M.getAttribute("data-attr"),E=M.getAttribute("data-val")||!0,P=l._fullLayout,S={},F=T.list(l,null,!0),R=P._cartesianSpikesEnabled;if("zoom"===k){var D,L="in"===E?.5:2,B=(1+L)/2,V=(1-L)/2;for(A=0;A<F.length;A++)if(!(v=F[A]).fixedrange)if(D=v._name,"auto"===E)S[D+".autorange"]=!0;else if("reset"===E){if(void 0===v._rangeInitial)S[D+".autorange"]=!0;else{var Z=v._rangeInitial.slice();S[D+".range[0]"]=Z[0],S[D+".range[1]"]=Z[1]}void 0!==v._showSpikeInitial&&(S[D+".showspikes"]=v._showSpikeInitial,"on"!==R||v._showSpikeInitial||(R="off"))}else{var Y=[v.r2l(v.range[0]),v.r2l(v.range[1])],ee=[B*Y[0]+V*Y[1],B*Y[1]+V*Y[0]];S[D+".range[0]"]=v.l2r(ee[0]),S[D+".range[1]"]=v.l2r(ee[1])}}else"hovermode"!==k||"x"!==E&&"y"!==E||M.setAttribute("data-val",E=P._isHoriz?"y":"x"),S[k]=E;P._cartesianSpikesEnabled=R,g.call("_guiRelayout",l,S)}function d(l,w){for(var v=w.currentTarget,A=v.getAttribute("data-attr"),M=v.getAttribute("data-val")||!0,k=l._fullLayout._subplots.gl3d||[],E={},P=A.split("."),S=0;S<k.length;S++)E[k[S]+"."+P[1]]=M;E.dragmode="pan"===M?M:"zoom",g.call("_guiRelayout",l,E)}function s(l,w){for(var v=w.currentTarget.getAttribute("data-attr"),A="resetLastSave"===v,M="resetDefault"===v,k=l._fullLayout,E=k._subplots.gl3d||[],P={},S=0;S<E.length;S++){var F,R=E[S],D=R+".camera",L=R+".aspectratio",B=R+".aspectmode",V=k[R]._scene;A?(P[D+".up"]=V.viewInitial.up,P[D+".eye"]=V.viewInitial.eye,P[D+".center"]=V.viewInitial.center,F=!0):M&&(P[D+".up"]=null,P[D+".eye"]=null,P[D+".center"]=null,F=!0),F&&(P[L+".x"]=V.viewInitial.aspectratio.x,P[L+".y"]=V.viewInitial.aspectratio.y,P[L+".z"]=V.viewInitial.aspectratio.z,P[B]=V.viewInitial.aspectmode)}g.call("_guiRelayout",l,P)}function i(l,w){var v=w.currentTarget,A=v._previousVal,M=l._fullLayout,k=M._subplots.gl3d||[],E=["xaxis","yaxis","zaxis"],P={},S={};if(A)S=A,v._previousVal=null;else{for(var F=0;F<k.length;F++){var R=k[F],D=M[R],L=R+".hovermode";P[L]=D.hovermode,S[L]=!1;for(var B=0;B<3;B++){var V=E[B],Z=R+"."+V+".showspikes";S[Z]=!1,P[Z]=D[V].showspikes}}v._previousVal=P}return S}function u(l,w){for(var v=w.currentTarget,A=v.getAttribute("data-attr"),M=v.getAttribute("data-val")||!0,k=l._fullLayout,E=k._subplots.geo||[],P=0;P<E.length;P++){var S=E[P];if("zoom"===A){var R=k[S].projection.scale;g.call("_guiRelayout",l,S+".projection.scale","in"===M?2*R:.5*R)}}"reset"===A&&m(l,"geo")}function f(l){var w=l._fullLayout;return!w.hovermode&&(w._has("cartesian")?w._isHoriz?"y":"x":"closest")}function p(l){var w=f(l);g.call("_guiRelayout",l,"hovermode",w)}function y(l,w){for(var v=w.currentTarget.getAttribute("data-val"),A=l._fullLayout,M=A._subplots.mapbox||[],k={},E=0;E<M.length;E++){var P=M[E],S=A[P].zoom;k[P+".zoom"]="in"===v?1.05*S:S/1.05}g.call("_guiRelayout",l,k)}function m(l,w){for(var v=l._fullLayout,A=v._subplots[w]||[],M={},k=0;k<A.length;k++)for(var E=A[k],P=v[E]._subplot.viewInitial,S=Object.keys(P),F=0;F<S.length;F++){var R=S[F];M[E+"."+R]=P[R]}g.call("_guiRelayout",l,M)}a.toImage={name:"toImage",title:function(l){return t(l,"png"===((l._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:b.camera,click:function(l){var w=l._context.toImageButtonOptions,v={format:w.format||"png"};r.notifier(t(l,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==v.format&&r.isIE()&&(r.notifier(t(l,"IE only supports svg.  Changing format to svg."),"long"),v.format="svg"),["filename","width","height","scale"].forEach(function(A){A in w&&(v[A]=w[A])}),g.call("downloadImage",l,v).then(function(A){r.notifier(t(l,"Snapshot succeeded")+" - "+A,"long")}).catch(function(){r.notifier(t(l,"Sorry, there was a problem downloading your snapshot!"),"long")})}},a.sendDataToCloud={name:"sendDataToCloud",title:function(l){return t(l,"Edit in Chart Studio")},icon:b.disk,click:function(l){x.sendDataToCloud(l)}},a.editInChartStudio={name:"editInChartStudio",title:function(l){return t(l,"Edit in Chart Studio")},icon:b.pencil,click:function(l){x.sendDataToCloud(l)}},a.zoom2d={name:"zoom2d",_cat:"zoom",title:function(l){return t(l,"Zoom")},attr:"dragmode",val:"zoom",icon:b.zoombox,click:n},a.pan2d={name:"pan2d",_cat:"pan",title:function(l){return t(l,"Pan")},attr:"dragmode",val:"pan",icon:b.pan,click:n},a.select2d={name:"select2d",_cat:"select",title:function(l){return t(l,"Box Select")},attr:"dragmode",val:"select",icon:b.selectbox,click:n},a.lasso2d={name:"lasso2d",_cat:"lasso",title:function(l){return t(l,"Lasso Select")},attr:"dragmode",val:"lasso",icon:b.lasso,click:n},a.drawclosedpath={name:"drawclosedpath",title:function(l){return t(l,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:b.drawclosedpath,click:n},a.drawopenpath={name:"drawopenpath",title:function(l){return t(l,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:b.drawopenpath,click:n},a.drawline={name:"drawline",title:function(l){return t(l,"Draw line")},attr:"dragmode",val:"drawline",icon:b.drawline,click:n},a.drawrect={name:"drawrect",title:function(l){return t(l,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:b.drawrect,click:n},a.drawcircle={name:"drawcircle",title:function(l){return t(l,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:b.drawcircle,click:n},a.eraseshape={name:"eraseshape",title:function(l){return t(l,"Erase active shape")},icon:b.eraseshape,click:e},a.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(l){return t(l,"Zoom in")},attr:"zoom",val:"in",icon:b.zoom_plus,click:n},a.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(l){return t(l,"Zoom out")},attr:"zoom",val:"out",icon:b.zoom_minus,click:n},a.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(l){return t(l,"Autoscale")},attr:"zoom",val:"auto",icon:b.autoscale,click:n},a.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(l){return t(l,"Reset axes")},attr:"zoom",val:"reset",icon:b.home,click:n},a.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(l){return t(l,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:b.tooltip_basic,gravity:"ne",click:n},a.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(l){return t(l,"Compare data on hover")},attr:"hovermode",val:function(l){return l._fullLayout._isHoriz?"y":"x"},icon:b.tooltip_compare,gravity:"ne",click:n},a.zoom3d={name:"zoom3d",_cat:"zoom",title:function(l){return t(l,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:b.zoombox,click:d},a.pan3d={name:"pan3d",_cat:"pan",title:function(l){return t(l,"Pan")},attr:"scene.dragmode",val:"pan",icon:b.pan,click:d},a.orbitRotation={name:"orbitRotation",title:function(l){return t(l,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:b["3d_rotate"],click:d},a.tableRotation={name:"tableRotation",title:function(l){return t(l,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:b["z-axis"],click:d},a.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(l){return t(l,"Reset camera to default")},attr:"resetDefault",icon:b.home,click:s},a.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(l){return t(l,"Reset camera to last save")},attr:"resetLastSave",icon:b.movie,click:s},a.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(l){return t(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:function(l,w){var v=i(l,w);g.call("_guiRelayout",l,v)}},a.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(l){return t(l,"Zoom in")},attr:"zoom",val:"in",icon:b.zoom_plus,click:u},a.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(l){return t(l,"Zoom out")},attr:"zoom",val:"out",icon:b.zoom_minus,click:u},a.resetGeo={name:"resetGeo",_cat:"reset",title:function(l){return t(l,"Reset")},attr:"reset",val:null,icon:b.autoscale,click:u},a.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(l){return t(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:p},a.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(l){return t(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:p},a.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(l){return t(l,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:b.tooltip_basic,gravity:"ne",click:p},a.resetViewSankey={name:"resetSankeyGroup",title:function(l){return t(l,"Reset view")},icon:b.home,click:function(l){for(var w={"node.groups":[],"node.x":[],"node.y":[]},v=0;v<l._fullData.length;v++){var A=l._fullData[v]._viewInitial;w["node.groups"].push(A.node.groups.slice()),w["node.x"].push(A.node.x.slice()),w["node.y"].push(A.node.y.slice())}g.call("restyle",l,w)}},a.toggleHover={name:"toggleHover",title:function(l){return t(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:function(l,w){var v=i(l,w);v.hovermode=f(l),g.call("_guiRelayout",l,v)}},a.resetViews={name:"resetViews",title:function(l){return t(l,"Reset views")},icon:b.home,click:function(l,w){var v=w.currentTarget;v.setAttribute("data-attr","zoom"),v.setAttribute("data-val","reset"),n(l,w),v.setAttribute("data-attr","resetLastSave"),s(l,w),m(l,"geo"),m(l,"mapbox")}},a.toggleSpikelines={name:"toggleSpikelines",title:function(l){return t(l,"Toggle Spike Lines")},icon:b.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(l){var w=l._fullLayout;w._cartesianSpikesEnabled="on"===w._cartesianSpikesEnabled?"off":"on",g.call("_guiRelayout",l,function(A){for(var M="on"===A._fullLayout._cartesianSpikesEnabled,k=T.list(A,null,!0),E={},P=0;P<k.length;P++){var S=k[P];E[S._name+".showspikes"]=!!M||S._showSpikeInitial}return E}(l))}},a.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(l){return t(l,"Reset view")},attr:"reset",icon:b.home,click:function(l){m(l,"mapbox")}},a.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(l){return t(l,"Zoom in")},attr:"zoom",val:"in",icon:b.zoom_plus,click:y},a.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(l){return t(l,"Zoom out")},attr:"zoom",val:"out",icon:b.zoom_minus,click:y}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(_,ae,ie){"use strict";var g=_("./buttons"),x=Object.keys(g),T=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],b=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(T),e=[];x.forEach(function(r){!function(t){if(-1===b.indexOf(t._cat||t.name)){var a=t.name,n=(t._cat||t.name).toLowerCase();-1===e.indexOf(a)&&e.push(a),-1===e.indexOf(n)&&e.push(n)}}(g[r])}),e.sort(),ae.exports={DRAW_MODES:T,backButtons:b,foreButtons:e}},{"./buttons":426}],428:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../color"),T=_("../../plot_api/plot_template"),b=_("./attributes");ae.exports=function(e,r){var t=e.modebar||{},a=T.newContainer(r,"modebar");function n(s,i){return g.coerce(t,a,b,s,i)}n("orientation"),n("bgcolor",x.addOpacity(r.paper_bgcolor,.5));var d=x.contrast(x.rgb(r.modebar.bgcolor));n("color",x.addOpacity(d,.3)),n("activecolor",x.addOpacity(d,.7)),n("uirevision",r.uirevision),n("add"),n("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(_,ae,ie){"use strict";ae.exports={moduleType:"component",name:"modebar",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),manage:_("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axis_ids"),x=_("../../traces/scatter/subtypes"),T=_("../../registry"),b=_("../fx/helpers").isUnifiedHover,e=_("./modebar"),r=_("./buttons"),t=_("./constants").DRAW_MODES;ae.exports=function(a){var n=a._fullLayout,d=a._context,s=n._modeBar;if(d.displayModeBar||d.watermark){if(!Array.isArray(d.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(d.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,u=d.modeBarButtons;i=Array.isArray(u)&&u.length?function(f){for(var p=0;p<f.length;p++)for(var y=f[p],m=0;m<y.length;m++){var l=y[m];if("string"==typeof l){if(void 0===r[l])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));f[p][m]=r[l]}}return f}(u):!d.displayModeBar&&d.watermark?[]:function(f){var p=f._fullLayout,y=f._fullData,m=f._context;function l(ue,de){if("string"==typeof de){if(de.toLowerCase()===ue.toLowerCase())return!0}else if(de.name===ue||(de._cat||de.name)===ue.toLowerCase())return!0;return!1}var w=p.modebar.add;"string"==typeof w&&(w=[w]);var v=p.modebar.remove;"string"==typeof v&&(v=[v]);var A=m.modeBarButtonsToAdd.concat(w.filter(function(ue){for(var de=0;de<m.modeBarButtonsToRemove.length;de++)if(l(ue,m.modeBarButtonsToRemove[de]))return!1;return!0})),M=m.modeBarButtonsToRemove.concat(v.filter(function(ue){for(var de=0;de<m.modeBarButtonsToAdd.length;de++)if(l(ue,m.modeBarButtonsToAdd[de]))return!1;return!0})),k=p._has("cartesian"),E=p._has("gl3d"),P=p._has("geo"),S=p._has("pie"),F=p._has("funnelarea"),R=p._has("gl2d"),D=p._has("ternary"),L=p._has("mapbox"),B=p._has("polar"),V=p._has("smith"),Z=p._has("sankey"),Y=function(ue){for(var de=g.list({_fullLayout:ue},null,!0),he=0;he<de.length;he++)if(!de[he].fixedrange)return!1;return!0}(p),ee=b(p.hovermode),Q=[];function $(ue){if(ue.length){for(var de=[],he=0;he<ue.length;he++){for(var be=ue[he],ge=r[be],we=ge.name.toLowerCase(),ke=(ge._cat||ge.name).toLowerCase(),De=!1,Ee=0;Ee<M.length;Ee++){var Re=M[Ee].toLowerCase();if(Re===we||Re===ke){De=!0;break}}De||de.push(r[be])}Q.push(de)}}var K=["toImage"];m.showEditInChartStudio?K.push("editInChartStudio"):m.showSendToCloud&&K.push("sendDataToCloud"),$(K);var oe=[],j=[],H=[],G=[];(k||R||S||F||D)+P+E+L+B+V>1?(j=["toggleHover"],H=["resetViews"]):P?(oe=["zoomInGeo","zoomOutGeo"],j=["hoverClosestGeo"],H=["resetGeo"]):E?(j=["hoverClosest3d"],H=["resetCameraDefault3d","resetCameraLastSave3d"]):L?(oe=["zoomInMapbox","zoomOutMapbox"],j=["toggleHover"],H=["resetViewMapbox"]):R?j=["hoverClosestGl2d"]:S?j=["hoverClosestPie"]:Z?(j=["hoverClosestCartesian","hoverCompareCartesian"],H=["resetViewSankey"]):j=["toggleHover"],k&&(j=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ue){for(var de=0;de<ue.length;de++)if(!T.traceIs(ue[de],"noHover"))return!1;return!0}(y)||ee)&&(j=[]),!k&&!R||Y||(oe=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==H[0]&&(H=["resetScale2d"])),E?G=["zoom3d","pan3d","orbitRotation","tableRotation"]:(k||R)&&!Y||D?G=["zoom2d","pan2d"]:L||P?G=["pan2d"]:B&&(G=["zoom2d"]),function(ue){for(var de=!1,he=0;he<ue.length&&!de;he++){var be=ue[he];be._module&&be._module.selectPoints&&(T.traceIs(be,"scatter-like")?(x.hasMarkers(be)||x.hasText(be))&&(de=!0):T.traceIs(be,"box-violin")&&"all"!==be.boxpoints&&"all"!==be.points||(de=!0))}return de}(y)&&G.push("select2d","lasso2d");var re=[],q=function(ue){-1===re.indexOf(ue)&&-1!==j.indexOf(ue)&&re.push(ue)};if(Array.isArray(A)){for(var te=[],ne=0;ne<A.length;ne++){var le=A[ne];"string"==typeof le?(le=le.toLowerCase(),-1!==t.indexOf(le)?(p._has("mapbox")||p._has("cartesian"))&&G.push(le):"togglespikelines"===le?q("toggleSpikelines"):"togglehover"===le?q("toggleHover"):"hovercompare"===le?q("hoverCompareCartesian"):"hoverclosest"===le?(q("hoverClosestCartesian"),q("hoverClosestGeo"),q("hoverClosest3d"),q("hoverClosestGl2d"),q("hoverClosestPie")):"v1hovermode"===le&&(q("toggleHover"),q("hoverClosestCartesian"),q("hoverCompareCartesian"),q("hoverClosestGeo"),q("hoverClosest3d"),q("hoverClosestGl2d"),q("hoverClosestPie"))):te.push(le)}A=te}return $(G),$(oe.concat(H)),$(re),function(ue,de){if(de.length)if(Array.isArray(de[0]))for(var he=0;he<de.length;he++)ue.push(de[he]);else ue.push(de);return ue}(Q,A)}(a),s?s.update(a,i):n._modeBar=e(a,i)}else s&&(s.destroy(),delete n._modeBar)}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":951,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../fonts/ploticon"),e=new DOMParser;function r(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}var t=r.prototype;t.update=function(a,n){this.graphInfo=a;var d=this.graphInfo._context,s=this.graphInfo._fullLayout,i="modebar-"+s._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===d.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===s.modebar.orientation&&(this.element.className+=" vertical",n=n.reverse());var u=s.modebar,f="hover"===d.displayModeBar?".js-plotly-plot .plotly:hover ":"";T.deleteRelatedStyleRule(i),T.addRelatedStyleRule(i,f+"#"+i+" .modebar-group","background-color: "+u.bgcolor),T.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+u.color),T.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+u.activecolor),T.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+u.activecolor);var p=!this.hasButtons(n),y=this.hasLogo!==d.displaylogo,m=this.locale!==d.locale;if(this.locale=d.locale,(p||y||m)&&(this.removeAllButtons(),this.updateButtons(n),d.watermark||d.displaylogo)){var l=this.getLogo();d.watermark&&(l.className=l.className+" watermark"),"v"===s.modebar.orientation?this.element.insertBefore(l,this.element.childNodes[0]):this.element.appendChild(l),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(a){var n=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(d){var s=n.createGroup();d.forEach(function(i){var u=i.name;if(!u)throw new Error("must provide button 'name' in button config");if(-1!==n.buttonsNames.indexOf(u))throw new Error("button name '"+u+"' is taken");n.buttonsNames.push(u);var f=n.createButton(i);n.buttonElements.push(f),s.appendChild(f)}),n.element.appendChild(s)})},t.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},t.createButton=function(a){var n=this,d=document.createElement("a");d.setAttribute("rel","tooltip"),d.className="modebar-btn";var s=a.title;void 0===s?s=a.name:"function"==typeof s&&(s=s(this.graphInfo)),(s||0===s)&&d.setAttribute("data-title",s),void 0!==a.attr&&d.setAttribute("data-attr",a.attr);var i=a.val;if(void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),d.setAttribute("data-val",i)),"function"!=typeof a.click)throw new Error("must provide button 'click' function in button config");d.addEventListener("click",function(f){a.click(n.graphInfo,f),n.updateActiveButton(f.currentTarget)}),d.setAttribute("data-toggle",a.toggle||!1),a.toggle&&g.select(d).classed("active",!0);var u=a.icon;return d.appendChild("function"==typeof u?u():this.createIcon(u||b.question)),d.setAttribute("data-gravity",a.gravity||"n"),d},t.createIcon=function(a){var n,d=x(a.height)?Number(a.height):a.ascent-a.descent,s="http://www.w3.org/2000/svg";if(a.path){(n=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,a.width,d].join(" ")),n.setAttribute("class","icon");var i=document.createElementNS(s,"path");i.setAttribute("d",a.path),a.transform?i.setAttribute("transform",a.transform):void 0!==a.ascent&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")"),n.appendChild(i)}return a.svg&&(n=e.parseFromString(a.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},t.updateActiveButton=function(a){var n=this.graphInfo._fullLayout,d=void 0!==a?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var i=s.getAttribute("data-val")||!0,u=s.getAttribute("data-attr"),f="true"===s.getAttribute("data-toggle"),p=g.select(s);if(f)u===d&&p.classed("active",!p.classed("active"));else{var y=null===u?u:T.nestedProperty(n,u).get();p.classed("active",y===i)}})},t.hasButtons=function(a){var n=this.buttons;if(!n||a.length!==n.length)return!1;for(var d=0;d<a.length;++d){if(a[d].length!==n[d].length)return!1;for(var s=0;s<a[d].length;s++)if(a[d][s].name!==n[d][s].name)return!1}return!0},t.getLogo=function(){var a=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",T._(this.graphInfo,"Produced with Plotly")),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(b.newplotlylogo)),a.appendChild(n),a},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){T.removeElement(this.container.querySelector(".modebar")),T.deleteRelatedStyleRule(this._uid)},ae.exports=function(a,n){var d=a._fullLayout,s=new r({graphInfo:a,container:d._modebardiv.node(),buttons:n});return d._privateplot&&g.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},{"../../fonts/ploticon":482,"../../lib":503,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(_,ae,ie){"use strict";var g=_("../../plots/font_attributes"),x=_("../color/attributes"),T=(0,_("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ae.exports={visible:{valType:"boolean",editType:"plot"},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:g({editType:"plot"}),bgcolor:{valType:"color",dflt:x.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(_,ae,ie){"use strict";ae.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../color"),T=_("../../plot_api/plot_template"),b=_("../../plots/array_container_defaults"),e=_("./attributes"),r=_("./constants");function t(a,n,d,s){var i=s.calendar;function u(p,y){return g.coerce(a,n,e.buttons,p,y)}if(u("visible")){var f=u("step");"all"!==f&&(!i||"gregorian"===i||"month"!==f&&"year"!==f?u("stepmode"):n.stepmode="backward",u("count")),u("label")}}ae.exports=function(a,n,d,s,i){var u=a.rangeselector||{},f=T.newContainer(n,"rangeselector");function p(l,w){return g.coerce(u,f,e,l,w)}if(p("visible",b(u,f,{name:"buttons",handleItemDefaults:t,calendar:i}).length>0)){var y=function(l,w,v){for(var A=v.filter(function(P){return w[P].anchor===l._id}),M=0,k=0;k<A.length;k++){var E=w[A[k]].domain;E&&(M=Math.max(E[1],M))}return[l.domain[0],M+r.yPad]}(n,d,s);p("x",y[0]),p("y",y[1]),g.noneOrAll(a,n,["x","y"]),p("xanchor"),p("yanchor"),g.coerceFont(p,"font",d.font);var m=p("bgcolor");p("activecolor",x.contrast(m,r.lightAmount,r.darkAmount)),p("bordercolor"),p("borderwidth")}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../registry"),T=_("../../plots/plots"),b=_("../color"),e=_("../drawing"),r=_("../../lib"),t=r.strTranslate,a=_("../../lib/svg_text_utils"),n=_("../../plots/cartesian/axis_ids"),d=_("../../constants/alignment"),s=d.LINE_SPACING,i=d.FROM_TL,u=d.FROM_BR,f=_("./constants"),p=_("./get_update_object");function y(w){return w._id}function m(w,v,A){var k,E,M=r.ensureSingle(w,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});M.attr({rx:f.rx,ry:f.ry}),M.call(b.stroke,v.bordercolor).call(b.fill,(k=v,E=A,E._isActive||E._isHovered?k.activecolor:k.bgcolor)).style("stroke-width",v.borderwidth+"px")}function l(w,v,A,M){var k,E;r.ensureSingle(w,"text","selector-text",function(k){k.attr("text-anchor","middle")}).call(e.font,v.font).text((k=A,E=M._fullLayout._meta,k.label?E?r.templateString(k.label,E):k.label:"all"===k.step?"all":k.count+k.step.charAt(0))).call(function(k){a.convertToTspans(k,M)})}ae.exports=function(w){var v=w._fullLayout._infolayer.selectAll(".rangeselector").data(function(A){for(var M=n.list(A,"x",!0),k=[],E=0;E<M.length;E++){var P=M[E];P.rangeselector&&P.rangeselector.visible&&k.push(P)}return k}(w),y);v.enter().append("g").classed("rangeselector",!0),v.exit().remove(),v.style({cursor:"pointer","pointer-events":"all"}),v.each(function(A){var M=g.select(this),k=A,E=k.rangeselector,P=M.selectAll("g.button").data(r.filterVisible(E.buttons));P.enter().append("g").classed("button",!0),P.exit().remove(),P.each(function(S){var F=g.select(this),R=p(k,S);S._isActive=function(D,L,B){if("all"===L.step)return!0===D.autorange;var V=Object.keys(B);return D.range[0]===B[V[0]]&&D.range[1]===B[V[1]]}(k,S,R),F.call(m,E,S),F.call(l,E,S,w),F.on("click",function(){w._dragged||x.call("_guiRelayout",w,R)}),F.on("mouseover",function(){S._isHovered=!0,F.call(m,E,S)}),F.on("mouseout",function(){S._isHovered=!1,F.call(m,E,S)})}),function(S,F,R,D,L){var B=0,V=0,Z=R.borderwidth;F.each(function(){var oe=g.select(this).select(".selector-text"),H=Math.max(R.font.size*s*a.lineCount(oe),16)+3;V=Math.max(V,H)}),F.each(function(){var oe=g.select(this),j=oe.select(".selector-rect"),H=oe.select(".selector-text"),G=H.node()&&e.bBox(H.node()).width,re=R.font.size*s,q=a.lineCount(H),te=Math.max(G+10,f.minButtonWidth);oe.attr("transform",t(Z+B,Z)),j.attr({x:0,y:0,width:te,height:V}),a.positionText(H,te/2,V/2-(q-1)*re/2+3),B+=te+5});var Y=S._fullLayout._size,ee=Y.l+Y.w*R.x,Q=Y.t+Y.h*(1-R.y),$="left";r.isRightAnchor(R)&&(ee-=B,$="right"),r.isCenterAnchor(R)&&(ee-=B/2,$="center");var K="top";r.isBottomAnchor(R)&&(Q-=V,K="bottom"),r.isMiddleAnchor(R)&&(Q-=V/2,K="middle"),B=Math.ceil(B),V=Math.ceil(V),ee=Math.round(ee),Q=Math.round(Q),T.autoMargin(S,D+"-range-selector",{x:R.x,y:R.y,l:B*i[$],r:B*u[$],b:V*u[K],t:V*i[K]}),L.attr("transform",t(ee,Q))}(w,P,E,k._name,M)})}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(_,ae,ie){"use strict";var g=_("d3-time"),x=_("../../lib").titleCase;ae.exports=function(T,b){var e=T._name,r={};if("all"===b.step)r[e+".autorange"]=!0;else{var t=function(a,n){var d,s=a.range,i=new Date(a.r2l(s[1])),f=g["utc"+x(n.step)],p=n.count;switch(n.stepmode){case"backward":d=a.l2r(+f.offset(i,-p));break;case"todate":var y=f.offset(i,-p);d=a.l2r(+f.ceil(y))}return[d,s[1]]}(T,b);r[e+".range[0]"]=t[0],r[e+".range[1]"]=t[1]}return r}},{"../../lib":503,"d3-time":122}],437:[function(_,ae,ie){"use strict";ae.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:_("./attributes")}}},layoutAttributes:_("./attributes"),handleDefaults:_("./defaults"),draw:_("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(_,ae,ie){"use strict";var g=_("../color/attributes");ae.exports={bgcolor:{valType:"color",dflt:g.background,editType:"plot"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axis_ids").list,x=_("../../plots/cartesian/autorange").getAutoRange,T=_("./constants");ae.exports=function(b){for(var e=g(b,"x",!0),r=0;r<e.length;r++){var t=e[r],a=t[T.name];a&&a.visible&&a.autorange&&(a._input.autorange=!0,a._input.range=a.range=x(b,t))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(_,ae,ie){"use strict";ae.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plot_api/plot_template"),T=_("../../plots/cartesian/axis_ids"),b=_("./attributes"),e=_("./oppaxis_attributes");ae.exports=function(r,t,a){var n=r[a],d=t[a];if(n.rangeslider||t._requestRangeslider[d._id]){g.isPlainObject(n.rangeslider)||(n.rangeslider={});var s,i,u=n.rangeslider,f=x.newContainer(d,"rangeslider");if(M("visible")){M("bgcolor",t.plot_bgcolor),M("bordercolor"),M("borderwidth"),M("thickness"),M("autorange",!d.isValidRange(u.range)),M("range");var p=t._subplots;if(p)for(var y=p.cartesian.filter(function(E){return E.substr(0,E.indexOf("y"))===T.name2id(a)}).map(function(E){return E.substr(E.indexOf("y"),E.length)}),m=g.simpleMap(y,T.id2name),l=0;l<m.length;l++){var w=m[l];s=u[w]||{},i=x.newContainer(f,w,"yaxis");var v,A=t[w];s.range&&A.isValidRange(s.range)&&(v="fixed"),"match"!==k("rangemode",v)&&k("range",A.range.slice())}f._input=u}}function M(E,P){return g.coerce(u,f,b,E,P)}function k(E,P){return g.coerce(s,i,e,E,P)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../registry"),T=_("../../plots/plots"),b=_("../../lib"),e=b.strTranslate,r=_("../drawing"),t=_("../color"),a=_("../titles"),n=_("../../plots/cartesian"),d=_("../../plots/cartesian/axis_ids"),s=_("../dragelement"),i=_("../../lib/setcursor"),u=_("./constants");function f(v,A,M,k){var E=b.ensureSingle(v,"rect",u.bgClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=k.borderwidth%2==0?k.borderwidth:k.borderwidth-1,S=-k._offsetShift,F=r.crispRound(A,k.borderwidth);E.attr({width:k._width+P,height:k._height+P,transform:e(S,S),fill:k.bgcolor,stroke:k.bordercolor,"stroke-width":F})}function p(v,A,M,k){b.ensureSingleById(A._fullLayout._topdefs,"clipPath",k._clipId,function(P){P.append("rect").attr({x:0,y:0})}).select("rect").attr({width:k._width,height:k._height})}function y(v,A,M,k){var E,P=A.calcdata,S=v.selectAll("g."+u.rangePlotClassName).data(M._subplotsWith,b.identity);S.enter().append("g").attr("class",function(F){return u.rangePlotClassName+" "+F}).call(r.setClipUrl,k._clipId,A),S.order(),S.exit().remove(),S.each(function(F,R){var D=g.select(this),L=0===R,B=d.getFromId(A,F,"y"),V=B._name,Z=k[V],Y={data:[],layout:{xaxis:{type:M.type,domain:[0,1],range:k.range.slice(),calendar:M.calendar},width:k._width,height:k._height,margin:{t:0,b:0,l:0,r:0}},_context:A._context};M.rangebreaks&&(Y.layout.xaxis.rangebreaks=M.rangebreaks),Y.layout[V]={type:B.type,domain:[0,1],range:"match"!==Z.rangemode?Z.range.slice():B.range.slice(),calendar:B.calendar},B.rangebreaks&&(Y.layout[V].rangebreaks=B.rangebreaks),T.supplyDefaults(Y);var ee=Y._fullLayout.xaxis,Q=Y._fullLayout[V];ee.clearCalc(),ee.setScale(),Q.clearCalc(),Q.setScale();var $={id:F,plotgroup:D,xaxis:ee,yaxis:Q,isRangePlot:!0};L?E=$:($.mainplot="xy",$.mainplotinfo=E),n.rangePlot(A,$,function(K,oe){for(var j=[],H=0;H<K.length;H++){var G=K[H],re=G[0].trace;re.xaxis+re.yaxis===oe&&j.push(G)}return j}(P,F))})}function m(v,A,M,k,E){b.ensureSingle(v,"rect",u.maskMinClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",k._height).call(t.fill,u.maskColor),b.ensureSingle(v,"rect",u.maskMaxClassName,function(P){P.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",k._height).call(t.fill,u.maskColor),"match"!==E.rangemode&&(b.ensureSingle(v,"rect",u.maskMinOppAxisClassName,function(P){P.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",k._width).call(t.fill,u.maskOppAxisColor),b.ensureSingle(v,"rect",u.maskMaxOppAxisClassName,function(P){P.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",k._width).style("border-top",u.maskOppBorder).call(t.fill,u.maskOppAxisColor))}function l(v,A,M,k){A._context.staticPlot||b.ensureSingle(v,"rect",u.slideBoxClassName,function(E){E.attr({y:0,cursor:u.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:k._height,fill:u.slideBoxFill})}function w(v,A,M,k){var E=b.ensureSingle(v,"g",u.grabberMinClassName),P=b.ensureSingle(v,"g",u.grabberMaxClassName),S={x:0,width:u.handleWidth,rx:u.handleRadius,fill:t.background,stroke:t.defaultLine,"stroke-width":u.handleStrokeWidth,"shape-rendering":"crispEdges"},F={y:Math.round(k._height/4),height:Math.round(k._height/2)};b.ensureSingle(E,"rect",u.handleMinClassName,function(D){D.attr(S)}).attr(F),b.ensureSingle(P,"rect",u.handleMaxClassName,function(D){D.attr(S)}).attr(F);var R={width:u.grabAreaWidth,x:0,y:0,fill:u.grabAreaFill,cursor:A._context.staticPlot?void 0:u.grabAreaCursor};b.ensureSingle(E,"rect",u.grabAreaMinClassName,function(D){D.attr(R)}).attr("height",k._height),b.ensureSingle(P,"rect",u.grabAreaMaxClassName,function(D){D.attr(R)}).attr("height",k._height)}ae.exports=function(v){for(var A=v._fullLayout,M=A._rangeSliderData,k=0;k<M.length;k++){var E=M[k][u.name];E._clipId=E._id+"-"+A._uid}var P=A._infolayer.selectAll("g."+u.containerClassName).data(M,function(S){return S._name});P.exit().each(function(S){A._topdefs.select("#"+S[u.name]._clipId).remove()}).remove(),0!==M.length&&(P.enter().append("g").classed(u.containerClassName,!0).attr("pointer-events","all"),P.each(function(S){var F=g.select(this),R=S[u.name],D=A[d.id2name(S.anchor)],L=R[d.id2name(S.anchor)];if(R.range){var B,V=b.simpleMap(R.range,S.r2l),Z=b.simpleMap(S.range,S.r2l);B=Z[0]<Z[1]?[Math.min(V[0],Z[0]),Math.max(V[1],Z[1])]:[Math.max(V[0],Z[0]),Math.min(V[1],Z[1])],R.range=R._input.range=b.simpleMap(B,S.l2r)}S.cleanRange("rangeslider.range");var Y=A._size,ee=S.domain;R._width=Y.w*(ee[1]-ee[0]);var Q=Math.round(Y.l+Y.w*ee[0]),$=Math.round(Y.t+Y.h*(1-S._counterDomainMin)+("bottom"===S.side?S._depth:0)+R._offsetShift+u.extraPad);F.attr("transform",e(Q,$)),R._rl=b.simpleMap(R.range,S.r2l);var K=R._rl[0],oe=R._rl[1],j=oe-K;if(R.p2d=function(de){return de/R._width*j+K},R.d2p=function(de){return(de-K)/j*R._width},S.rangebreaks){var H=S.locateBreaks(K,oe);if(H.length){var G,re,q=0;for(G=0;G<H.length;G++)q+=(re=H[G]).max-re.min;var te=R._width/(oe-K-q),ne=[-te*K];for(G=0;G<H.length;G++)ne.push(ne[ne.length-1]-te*((re=H[G]).max-re.min));for(R.d2p=function(de){for(var he=ne[0],be=0;be<H.length;be++){var ge=H[be];if(de>=ge.max)he=ne[be+1];else if(de<ge.min)break}return he+te*de},G=0;G<H.length;G++)(re=H[G]).pmin=R.d2p(re.min),re.pmax=R.d2p(re.max);R.p2d=function(de){for(var he=ne[0],be=0;be<H.length;be++){var ge=H[be];if(de>=ge.pmax)he=ne[be+1];else if(de<ge.pmin)break}return(de-he)/te}}}if("match"!==L.rangemode){var le=D.r2l(L.range[0]),ue=D.r2l(L.range[1])-le;R.d2pOppAxis=function(de){return(de-le)/ue*R._height}}F.call(f,v,S,R).call(p,v,S,R).call(y,v,S,R).call(m,v,S,R,L).call(l,v,S,R).call(w,v,S,R),function(de,he,be,ge){if(!he._context.staticPlot){var we=de.select("rect."+u.slideBoxClassName).node(),ke=de.select("rect."+u.grabAreaMinClassName).node(),De=de.select("rect."+u.grabAreaMaxClassName).node();de.on("mousedown",Ee),de.on("touchstart",Ee)}function Ee(){var Re=g.event,ve=Re.target,Te=Re.clientX||Re.touches[0].clientX,Ie=Te-de.node().getBoundingClientRect().left,Ce=ge.d2p(be._rl[0]),Pe=ge.d2p(be._rl[1]),Ve=s.coverSlip();function qe(lt){var He,$e,et,tt=+(lt.clientX||lt.touches[0].clientX)-Te;switch(ve){case we:et="ew-resize",He=Ce+tt,$e=Pe+tt;break;case ke:et="col-resize",He=Ce+tt,$e=Pe;break;case De:et="col-resize",He=Ce,$e=Pe+tt;break;default:et="ew-resize",He=Ie,$e=Ie+tt}if($e<He){var ft=$e;$e=He,He=ft}ge._pixelMin=He,ge._pixelMax=$e,i(g.select(Ve),et),function(bt,Ct,Vt,Ft){function ht(nn){return Vt.l2r(b.constrain(nn,Ft._rl[0],Ft._rl[1]))}var ut=ht(Ft.p2d(Ft._pixelMin)),Rt=ht(Ft.p2d(Ft._pixelMax));window.requestAnimationFrame(function(){x.call("_guiRelayout",Ct,Vt._name+".range",[ut,Rt])})}(0,he,be,ge)}function Je(){Ve.removeEventListener("mousemove",qe),Ve.removeEventListener("mouseup",Je),this.removeEventListener("touchmove",qe),this.removeEventListener("touchend",Je),b.removeElement(Ve)}this.addEventListener("touchmove",qe),this.addEventListener("touchend",Je),Ve.addEventListener("mousemove",qe),Ve.addEventListener("mouseup",Je)}}(F,v,S,R),function(de,he,be,ge,we,ke){var De=u.handleWidth/2;function Ee(Je){return b.constrain(Je,0,ge._width)}function Re(Je){return b.constrain(Je,0,ge._height)}function ve(Je){return b.constrain(Je,-De,ge._width+De)}var Te=Ee(ge.d2p(be._rl[0])),Ie=Ee(ge.d2p(be._rl[1]));if(de.select("rect."+u.slideBoxClassName).attr("x",Te).attr("width",Ie-Te),de.select("rect."+u.maskMinClassName).attr("width",Te),de.select("rect."+u.maskMaxClassName).attr("x",Ie).attr("width",ge._width-Ie),"match"!==ke.rangemode){var Ce=ge._height-Re(ge.d2pOppAxis(we._rl[1])),Pe=ge._height-Re(ge.d2pOppAxis(we._rl[0]));de.select("rect."+u.maskMinOppAxisClassName).attr("x",Te).attr("height",Ce).attr("width",Ie-Te),de.select("rect."+u.maskMaxOppAxisClassName).attr("x",Te).attr("y",Pe).attr("height",ge._height-Pe).attr("width",Ie-Te),de.select("rect."+u.slideBoxClassName).attr("y",Ce).attr("height",Pe-Ce)}var Ve=Math.round(ve(Te-De))-.5,qe=Math.round(ve(Ie-De))+.5;de.select("g."+u.grabberMinClassName).attr("transform",e(Ve,.5)),de.select("g."+u.grabberMaxClassName).attr("transform",e(qe,.5))}(F,0,S,R,D,L),"bottom"===S.side&&a.draw(v,S._id+"title",{propContainer:S,propName:S._name+".title",placeholder:A._dfltTitle.x,attributes:{x:S._offset+S._length/2,y:$+R._height+R._offsetShift+10+1.5*S.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axis_ids"),x=_("../../lib/svg_text_utils"),T=_("./constants"),b=_("../../constants/alignment").LINE_SPACING,e=T.name;function r(t){var a=t&&t[e];return a&&a.visible}ie.isVisible=r,ie.makeData=function(t){var a=g.list({_fullLayout:t},"x",!0),n=t.margin,d=[];if(!t._has("gl2d"))for(var s=0;s<a.length;s++){var i=a[s];if(r(i)){d.push(i);var u=i[e];u._id=e+i._id,u._height=(t.height-n.b-n.t)*u.thickness,u._offsetShift=Math.floor(u.borderwidth/2)}}t._rangeSliderData=d},ie.autoMarginOpts=function(t,a){var n=t._fullLayout,d=a[e],s=a._id.charAt(0),i=0,u=0;return"bottom"===a.side&&(i=a._depth,a.title.text!==n._dfltTitle[s]&&(u=1.5*a.title.font.size+10+d._offsetShift,u+=(a.title.text.match(x.BR_TAG_ALL)||[]).length*a.title.font.size*b)),{x:0,y:a._counterDomainMin,l:0,r:0,t:0,b:d._height+i+Math.max(n.margin.b,u),pad:T.extraPad+2*d._offsetShift}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes"),T=_("./oppaxis_attributes"),b=_("./helpers");ae.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:g.extendFlat({},x,{yaxis:T})}}},layoutAttributes:_("./attributes"),handleDefaults:_("./defaults"),calcAutorange:_("./calc_autorange"),draw:_("./draw"),isVisible:b.isVisible,makeData:b.makeData,autoMarginOpts:b.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(_,ae,ie){"use strict";ae.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(_,ae,ie){"use strict";var g=_("../annotations/attributes"),x=_("../../traces/scatter/attributes").line,T=_("../drawing/attributes").dash,b=_("../../lib/extend").extendFlat,e=_("../../plot_api/plot_template").templatedArray;_("../../constants/axis_placeable_objects"),ae.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:b({},g.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:b({},g.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},x.color,{editType:"arraydraw"}),width:b({},x.width,{editType:"calc+arraydraw"}),dash:b({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("./constants"),b=_("./helpers");function e(n){return t(n.line.width,n.xsizemode,n.x0,n.x1,n.path,!1)}function r(n){return t(n.line.width,n.ysizemode,n.y0,n.y1,n.path,!0)}function t(n,d,s,i,u,f){var p=n/2,y=f;if("pixel"===d){var m=u?b.extractPathCoords(u,f?T.paramIsY:T.paramIsX):[s,i],l=g.aggNums(Math.max,null,m),w=g.aggNums(Math.min,null,m),v=w<0?Math.abs(w)+p:p,A=l>0?l+p:p;return{ppad:p,ppadplus:y?v:A,ppadminus:y?A:v}}return{ppad:p}}function a(n,d,s,i,u){var f="category"===n.type||"multicategory"===n.type?n.r2c:n.d2c;if(void 0!==d)return[f(d),f(s)];if(i){var p,y,m,l,w=1/0,v=-1/0,A=i.match(T.segmentRE);for("date"===n.type&&(f=b.decodeDate(f)),p=0;p<A.length;p++)void 0!==(y=u[A[p].charAt(0)].drawn)&&(!(m=A[p].substr(1).match(T.paramRE))||m.length<y||((l=f(m[y]))<w&&(w=l),l>v&&(v=l)));return v>=w?[w,v]:void 0}}ae.exports=function(n){var s=g.filterVisible(n._fullLayout.shapes);if(s.length&&n._fullData.length)for(var i=0;i<s.length;i++){var u,f,p=s[i];p._extremes={};var y=x.getRefType(p.xref),m=x.getRefType(p.yref);if("paper"!==p.xref&&"domain"!==y){var l="pixel"===p.xsizemode?p.xanchor:p.x0,w="pixel"===p.xsizemode?p.xanchor:p.x1;(f=a(u=x.getFromId(n,p.xref),l,w,p.path,T.paramIsX))&&(p._extremes[u._id]=x.findExtremes(u,f,e(p)))}if("paper"!==p.yref&&"domain"!==m){var v="pixel"===p.ysizemode?p.yanchor:p.y0,A="pixel"===p.ysizemode?p.yanchor:p.y1;(f=a(u=x.getFromId(n,p.yref),v,A,p.path,T.paramIsY))&&(p._extremes[u._id]=x.findExtremes(u,f,r(p)))}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(_,ae,ie){"use strict";ae.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("./attributes"),e=_("./helpers");function r(t,a,n){function d(L,B){return g.coerce(t,a,b,L,B)}if(d("visible")){var s=d("path"),i=d("type",s?"path":"rect");"path"!==a.type&&delete a.path,d("editable"),d("layer"),d("opacity"),d("fillcolor"),d("fillrule"),d("line.width")&&(d("line.color"),d("line.dash"));for(var u=d("xsizemode"),f=d("ysizemode"),p=["x","y"],y=0;y<2;y++){var m,l,w,v=p[y],A=v+"anchor",M="x"===v?u:f,k={_fullLayout:n},E=x.coerceRef(t,a,k,v,void 0,"paper");if("range"===x.getRefType(E)?((m=x.getFromId(k,E))._shapeIndices.push(a._index),w=e.rangeToShapePosition(m),l=e.shapePositionToRange(m)):l=w=g.identity,"path"!==i){var P=v+"0",S=v+"1",F=t[P],R=t[S];t[P]=l(t[P],!0),t[S]=l(t[S],!0),"pixel"===M?(d(P,0),d(S,10)):(x.coercePosition(a,k,d,E,P,.25),x.coercePosition(a,k,d,E,S,.75)),a[P]=w(a[P]),a[S]=w(a[S]),t[P]=F,t[S]=R}if("pixel"===M){var D=t[A];t[A]=l(t[A],!0),x.coercePosition(a,k,d,E,A,.25),a[A]=w(a[A]),t[A]=D}}"path"===i?d("path"):g.noneOrAll(t,a,["x0","x1","y0","y1"])}}ae.exports=function(t,a){T(t,a,{name:"shapes",handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("./draw_newshape/helpers").readPaths,e=_("./draw_newshape/display_outlines"),r=_("../../plots/cartesian/handle_outline").clearOutlineControllers,t=_("../color"),a=_("../drawing"),n=_("../../plot_api/plot_template").arrayEditor,d=_("../dragelement"),s=_("../../lib/setcursor"),i=_("./constants"),u=_("./helpers");function f(M){var k=M._fullLayout;for(var E in k._shapeUpperLayer.selectAll("path").remove(),k._shapeLowerLayer.selectAll("path").remove(),k._plots){var P=k._plots[E].shapelayer;P&&P.selectAll("path").remove()}for(var S=0;S<k.shapes.length;S++)k.shapes[S].visible&&m(M,S)}function p(M){return!!M._fullLayout._drawing}function y(M){return!M._context.edits.shapePosition}function m(M,k){M._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+k+'"]').remove();var E=u.makeOptionsAndPlotinfo(M,k),P=E.options,S=E.plotinfo;P._input&&!1!==P.visible&&function(R){var D=w(M,P),L={"data-index":k,"fill-rule":P.fillrule,d:D},B=P.opacity,V=P.fillcolor,Z=P.line.width?P.line.color:"rgba(0,0,0,0)",Y=P.line.width,ee=P.line.dash;Y||!0!==P.editable||(Y=5,ee="solid");var Q="Z"!==D[D.length-1],$=y(M)&&P.editable&&M._fullLayout._activeShapeIndex===k;$&&(V=Q?"rgba(0,0,0,0)":M._fullLayout.activeshape.fillcolor,B=M._fullLayout.activeshape.opacity);var K,oe=R.append("path").attr(L).style("opacity",B).call(t.stroke,Z).call(t.fill,V).call(a.dashLine,ee,Y);if(l(oe,M,P),($||M._context.edits.shapePosition)&&(K=n(M.layout,"shapes",P)),$){oe.style({cursor:"move"});var j={element:oe.node(),plotinfo:S,gd:M,editHelpers:K,isActiveShape:!0},H=b(D,M);e(H,oe,j)}else M._context.edits.shapePosition?function(G,re,q,te,ne,le){var ue,de,he,be,ge,we,ke,De,Ee,Re,ve,Te,Ie,Ce,Pe,Ve,qe="pixel"===q.xsizemode,Je="pixel"===q.ysizemode,lt="line"===q.type,He="path"===q.type,$e=le.modifyItem,et=T.getFromId(G,q.xref),tt=T.getRefType(q.xref),ft=T.getFromId(G,q.yref),bt=T.getRefType(q.yref),Ct=u.getDataToPixel(G,et,!1,tt),Vt=u.getDataToPixel(G,ft,!0,bt),Ft=u.getPixelToData(G,et,!1,tt),ht=u.getPixelToData(G,ft,!0,bt),ut=lt?function(){var rt=Math.max(q.line.width,10),Le=ne.append("g").attr("data-index",te);Le.append("path").attr("d",re.attr("d")).style({cursor:"move","stroke-width":rt,"stroke-opacity":"0"});var ze={"fill-opacity":"0"},je=Math.max(rt/2,10);return Le.append("circle").attr({"data-line-point":"start-point",cx:qe?Ct(q.xanchor)+q.x0:Ct(q.x0),cy:Je?Vt(q.yanchor)-q.y0:Vt(q.y0),r:je}).style(ze).classed("cursor-grab",!0),Le.append("circle").attr({"data-line-point":"end-point",cx:qe?Ct(q.xanchor)+q.x1:Ct(q.x1),cy:Je?Vt(q.yanchor)-q.y1:Vt(q.y1),r:je}).style(ze).classed("cursor-grab",!0),Le}():re,Rt={element:ut.node(),gd:G,prepFn:function(rt){var Le,ze,je,Ne,st,mt,Tt,xt;p(G)||(qe&&(ge=Ct(q.xanchor)),Je&&(we=Vt(q.yanchor)),"path"===q.type?Pe=q.path:(ue=qe?q.x0:Ct(q.x0),de=Je?q.y0:Vt(q.y0),he=qe?q.x1:Ct(q.x1),be=Je?q.y1:Vt(q.y1)),ue<he?(Ee=ue,Ie="x0",Re=he,Ce="x1"):(Ee=he,Ie="x1",Re=ue,Ce="x0"),!Je&&de<be||Je&&de>be?(ke=de,ve="y0",De=be,Te="y1"):(ke=be,ve="y1",De=de,Te="y0"),nn(rt),Qe(ne,q),Le=re,st=(ze=q).yref,mt=T.getFromId(je=G,Ne=ze.xref),Tt=T.getFromId(je,st),xt="","paper"===Ne||mt.autorange||(xt+=Ne),"paper"===st||Tt.autorange||(xt+=st),a.setClipUrl(Le,xt?"clip"+je._fullLayout._uid+xt:null,je),Rt.moveFn="move"===Ve?cn:Ze,Rt.altKey=rt.altKey)},doneFn:function(){p(G)||(s(re),Ge(ne),l(re,G,q),g.call("_guiRelayout",G,le.getUpdateObj()))},clickFn:function(){p(G)||Ge(ne)}};function nn(rt){if(p(G))Ve=null;else if(lt)Ve="path"===rt.target.tagName?"move":"start-point"===rt.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Le=Rt.element.getBoundingClientRect(),ze=Le.right-Le.left,je=Le.bottom-Le.top,mt=!He&&ze>10&&je>10&&!rt.shiftKey?d.getCursor((rt.clientX-Le.left)/ze,1-(rt.clientY-Le.top)/je):"move";s(re,mt),Ve=mt.split("-")[0]}}function cn(rt,Le){if("path"===q.type){var ze=function(st){return st},je=ze,Ne=ze;qe?$e("xanchor",q.xanchor=Ft(ge+rt)):(je=function(st){return Ft(Ct(st)+rt)},et&&"date"===et.type&&(je=u.encodeDate(je))),Je?$e("yanchor",q.yanchor=ht(we+Le)):(Ne=function(st){return ht(Vt(st)+Le)},ft&&"date"===ft.type&&(Ne=u.encodeDate(Ne))),$e("path",q.path=v(Pe,je,Ne))}else qe?$e("xanchor",q.xanchor=Ft(ge+rt)):($e("x0",q.x0=Ft(ue+rt)),$e("x1",q.x1=Ft(he+rt))),Je?$e("yanchor",q.yanchor=ht(we+Le)):($e("y0",q.y0=ht(de+Le)),$e("y1",q.y1=ht(be+Le)));re.attr("d",w(G,q)),Qe(ne,q)}function Ze(rt,Le){if(He){var ze=function(Ue){return Ue},je=ze,Ne=ze;qe?$e("xanchor",q.xanchor=Ft(ge+rt)):(je=function(Ue){return Ft(Ct(Ue)+rt)},et&&"date"===et.type&&(je=u.encodeDate(je))),Je?$e("yanchor",q.yanchor=ht(we+Le)):(Ne=function(Ue){return ht(Vt(Ue)+Le)},ft&&"date"===ft.type&&(Ne=u.encodeDate(Ne))),$e("path",q.path=v(Pe,je,Ne))}else if(lt){if("resize-over-start-point"===Ve){var st=ue+rt,mt=Je?de-Le:de+Le;$e("x0",q.x0=qe?st:Ft(st)),$e("y0",q.y0=Je?mt:ht(mt))}else if("resize-over-end-point"===Ve){var Tt=he+rt,xt=Je?be-Le:be+Le;$e("x1",q.x1=qe?Tt:Ft(Tt)),$e("y1",q.y1=Je?xt:ht(xt))}}else{var zt=function(Ue){return-1!==Ve.indexOf(Ue)},gt=zt("n"),Bt=zt("s"),jt=zt("w"),it=zt("e"),Mt=gt?ke+Le:ke,qt=Bt?De+Le:De,Wt=jt?Ee+rt:Ee,an=it?Re+rt:Re;Je&&(gt&&(Mt=ke-Le),Bt&&(qt=De-Le)),(!Je&&qt-Mt>10||Je&&Mt-qt>10)&&($e(ve,q[ve]=Je?Mt:ht(Mt)),$e(Te,q[Te]=Je?qt:ht(qt))),an-Wt>10&&($e(Ie,q[Ie]=qe?Wt:Ft(Wt)),$e(Ce,q[Ce]=qe?an:Ft(an)))}re.attr("d",w(G,q)),Qe(ne,q)}function Qe(rt,Le){(qe||Je)&&function(){var ze="path"!==Le.type,je=rt.selectAll(".visual-cue").data([0]);je.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ne=Ct(qe?Le.xanchor:x.midRange(ze?[Le.x0,Le.x1]:u.extractPathCoords(Le.path,i.paramIsX))),st=Vt(Je?Le.yanchor:x.midRange(ze?[Le.y0,Le.y1]:u.extractPathCoords(Le.path,i.paramIsY)));Ne=u.roundPositionForSharpStrokeRendering(Ne,1),st=u.roundPositionForSharpStrokeRendering(st,1),je.attr("d",qe&&Je?"M"+(Ne-1-1)+","+(st-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":qe?"M"+(Ne-1-1)+","+(st-9-1)+"v18 h2 v-18 Z":"M"+(Ne-9-1)+","+(st-1-1)+"h18 v2 h-18 Z")}()}function Ge(rt){rt.selectAll(".visual-cue").remove()}d.init(Rt),ut.node().onmousemove=nn}(M,oe,P,k,R,K):!0===P.editable&&oe.style("pointer-events",Q||t.opacity(V)*B<=.5?"stroke":"all");oe.node().addEventListener("click",function(){return function(G,re){if(y(G)){var q=+re.node().getAttribute("data-index");if(q>=0){if(q===G._fullLayout._activeShapeIndex)return void A(G);G._fullLayout._activeShapeIndex=q,G._fullLayout._deactivateShape=A,f(G)}}}(M,oe)})}("below"!==P.layer?M._fullLayout._shapeUpperLayer:"paper"===P.xref||"paper"===P.yref?M._fullLayout._shapeLowerLayer:S._hadPlotinfo?(S.mainplotinfo||S).shapelayer:M._fullLayout._shapeLowerLayer)}function l(M,k,E){var P=(E.xref+E.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");a.setClipUrl(M,P?"clip"+k._fullLayout._uid+P:null,k)}function w(M,k){var E,P,S,F,R,D,L,B,ne,le,ue,he,be,ge,we,V=k.type,Z=T.getRefType(k.xref),Y=T.getRefType(k.yref),ee=T.getFromId(M,k.xref),Q=T.getFromId(M,k.yref),$=M._fullLayout._size;if(ee?"domain"===Z?P=function(ne){return ee._offset+ee._length*ne}:(E=u.shapePositionToRange(ee),P=function(ne){return ee._offset+ee.r2p(E(ne,!0))}):P=function(ne){return $.l+$.w*ne},Q?"domain"===Y?F=function(ne){return Q._offset+Q._length*(1-ne)}:(S=u.shapePositionToRange(Q),F=function(ne){return Q._offset+Q.r2p(S(ne,!0))}):F=function(ne){return $.t+$.h*(1-ne)},"path"===V)return ee&&"date"===ee.type&&(P=u.decodeDate(P)),Q&&"date"===Q.type&&(F=u.decodeDate(F)),le=P,ue=F,he=(ne=k).xsizemode,be=ne.ysizemode,ge=ne.xanchor,we=ne.yanchor,ne.path.replace(i.segmentRE,function(ke){var De=0,Ee=ke.charAt(0),Re=i.paramIsX[Ee],ve=i.paramIsY[Ee],Te=i.numParams[Ee],Ie=ke.substr(1).replace(i.paramRE,function(Ce){return Re[De]?Ce="pixel"===he?le(ge)+Number(Ce):le(Ce):ve[De]&&(Ce="pixel"===be?ue(we)-Number(Ce):ue(Ce)),++De>Te&&(Ce="X"),Ce});return De>Te&&(Ie=Ie.replace(/[\s,]*X.*/,""),x.log("Ignoring extra params in segment "+ke)),Ee+Ie});if("pixel"===k.xsizemode){var K=P(k.xanchor);R=K+k.x0,D=K+k.x1}else R=P(k.x0),D=P(k.x1);if("pixel"===k.ysizemode){var oe=F(k.yanchor);L=oe-k.y0,B=oe-k.y1}else L=F(k.y0),B=F(k.y1);if("line"===V)return"M"+R+","+L+"L"+D+","+B;if("rect"===V)return"M"+R+","+L+"H"+D+"V"+B+"H"+R+"Z";var j=(R+D)/2,H=(L+B)/2,G=Math.abs(j-R),re=Math.abs(H-L),q="A"+G+","+re,te=j+G+","+H;return"M"+te+q+" 0 1,1 "+j+","+(H-re)+q+" 0 0,1 "+te+"Z"}function v(M,k,E){return M.replace(i.segmentRE,function(P){var S=0,F=P.charAt(0),R=i.paramIsX[F],D=i.paramIsY[F],L=i.numParams[F];return F+P.substr(1).replace(i.paramRE,function(B){return S>=L||(R[S]?B=k(B):D[S]&&(B=E(B)),S++),B})})}function A(M){y(M)&&M._fullLayout._activeShapeIndex>=0&&(r(M),delete M._fullLayout._activeShapeIndex,f(M))}ae.exports={draw:f,drawOne:m,eraseActiveShape:function(M){if(y(M)){r(M);var k=M._fullLayout._activeShapeIndex,E=(M.layout||{}).shapes||[];if(k<E.length){for(var P=[],S=0;S<E.length;S++)S!==k&&P.push(E[S]);delete M._fullLayout._activeShapeIndex,g.call("_guiRelayout",M,{shapes:P})}}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(_,ae,ie){"use strict";var g=_("../../drawing/attributes").dash,x=_("../../../lib/extend").extendFlat;ae.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:x({},g,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(_,ae,ie){"use strict";ae.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(_,ae,ie){"use strict";var g=_("../../color");ae.exports=function(x,T,b){b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")&&(b("newshape.line.color",g.contrast((x||{}).plot_bgcolor||"#FFF")),b("newshape.line.dash")),b("activeshape.fillcolor"),b("activeshape.opacity")}},{"../../color":366}],454:[function(_,ae,ie){"use strict";var g=_("../../dragelement"),x=_("../../dragelement/helpers").drawMode,T=_("../../../registry"),b=_("./constants"),e=b.i000,r=b.i090,t=b.i180,a=b.i270,n=_("../../../plots/cartesian/handle_outline").clearOutlineControllers,d=_("./helpers"),s=d.pointsShapeRectangle,i=d.pointsShapeEllipse,u=d.writePaths,f=_("./newshapes");ae.exports=function p(y,m,l,w){w||(w=0);var v=l.gd;function A(){p(y,m,l,w++),i(y[0])&&M({redrawing:!0})}function M(K){l.isActiveShape=!1;var oe=f(m,l);Object.keys(oe).length&&T.call((K||{}).redrawing?"relayout":"_guiRelayout",v,oe)}var k,E,P,S,F,R=l.isActiveShape,D=v._fullLayout._zoomlayer;function B(K){P=+K.srcElement.getAttribute("data-i"),S=+K.srcElement.getAttribute("data-j"),k[P][S].moveFn=V}function V(K,oe){if(y.length){var j=F[P][S][1],H=F[P][S][2],G=y[P],re=G.length;if(s(G)){for(var q=0;q<re;q++)if(q!==S){var te=G[q];te[1]===G[S][1]&&(te[1]=j+K),te[2]===G[S][2]&&(te[2]=H+oe)}if(G[S][1]=j+K,G[S][2]=H+oe,!s(G))for(var ne=0;ne<re;ne++)for(var le=0;le<G[ne].length;le++)G[ne][le]=F[P][ne][le]}else G[S][1]=j+K,G[S][2]=H+oe;A()}}function Z(){M()}function Y(K,oe){if(2===K){P=+oe.srcElement.getAttribute("data-i"),S=+oe.srcElement.getAttribute("data-j");var j=y[P];s(j)||i(j)||function(){if(y.length&&y[P]&&y[P].length){for(var H=[],G=0;G<y[P].length;G++)G!==S&&H.push(y[P][G]);H.length>1&&(2!==H.length||"Z"!==H[1][0])&&(0===S&&(H[0][0]="M"),y[P]=H,A(),M())}}()}}function ee(K,oe){(function(j,H){if(y.length)for(var G=0;G<y.length;G++)for(var re=0;re<y[G].length;re++)for(var q=0;q+2<y[G][re].length;q+=2)y[G][re][q+1]=F[G][re][q+1]+j,y[G][re][q+2]=F[G][re][q+2]+H})(K,oe),A()}x(l.dragmode)?v._fullLayout._drawing=!0:v._fullLayout._activeShapeIndex>=0&&n(v),m.attr("d",u(y)),R&&!w&&(F=function(K,oe){for(var j=0;j<oe.length;j++){var H=oe[j];K[j]=[];for(var G=0;G<H.length;G++){K[j][G]=[];for(var re=0;re<H[G].length;re++)K[j][G][re]=H[G][re]}}return K}([],y),function(K){k=[];for(var oe=0;oe<y.length;oe++){var j=y[oe],H=!s(j)&&i(j);k[oe]=[];for(var G=0;G<j.length;G++)if("Z"!==j[G][0]&&(!H||G===e||G===r||G===t||G===a)){var re=j[G][1],q=j[G][2],te=K.append("circle").classed("cursor-grab",!0).attr("data-i",oe).attr("data-j",G).attr("cx",re).attr("cy",q).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});k[oe][G]={element:te.node(),gd:v,prepFn:B,doneFn:Z,clickFn:Y},g.init(k[oe][G])}}}(D.append("g").attr("class","outline-controllers")),E=[],y.length&&(E[0]={element:m[0][0],gd:v,prepFn:function(K){(P=+K.srcElement.getAttribute("data-i"))||(P=0),E[P].moveFn=ee},doneFn:function(){M()}},g.init(E[0])))}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(_,ae,ie){"use strict";var g=_("parse-svg-path"),x=_("./constants"),T=x.CIRCLE_SIDES,b=x.SQRT2,e=_("../../../plots/cartesian/helpers"),r=e.p2r,t=e.r2p,a=[0,3,4,5,6,1,2],n=[0,3,4,1,2];function d(i,u){return Math.abs(i-u)<=1e-6}function s(i,u){var f=u[1]-i[1],p=u[2]-i[2];return Math.sqrt(f*f+p*p)}ie.writePaths=function(i){var u=i.length;if(!u)return"M0,0Z";for(var f="",p=0;p<u;p++)for(var y=i[p].length,m=0;m<y;m++){var l=i[p][m][0];if("Z"===l)f+="Z";else for(var w=i[p][m].length,v=0;v<w;v++){var A=v;"Q"===l||"S"===l?A=n[v]:"C"===l&&(A=a[v]),f+=i[p][m][A],v>0&&v<w-1&&(f+=",")}}return f},ie.readPaths=function(i,u,f,p){var y,m,l,w=g(i),v=[],A=-1,M=0,k=0,E=function(){m=M,l=k};E();for(var P=0;P<w.length;P++){var L=[],B=w[P][0],V=B;switch(B){case"M":v[++A]=[],L.push([V,M=+w[P][1],k=+w[P][2]]),E();break;case"Q":case"S":L.push([V,M=+w[P][3],k=+w[P][4],+w[P][1],+w[P][2]]);break;case"C":L.push([V,M=+w[P][5],k=+w[P][6],+w[P][1],+w[P][2],+w[P][3],+w[P][4]]);break;case"T":case"L":L.push([V,M=+w[P][1],k=+w[P][2]]);break;case"H":L.push([V="L",M=+w[P][1],k]);break;case"V":L.push([V="L",M,k=+w[P][1]]);break;case"A":V="L";var Z=+w[P][1],Y=+w[P][2];+w[P][4]||(Z=-Z,Y=-Y);var ee=M-Z,Q=k;for(y=1;y<=T/2;y++){var $=2*Math.PI*y/T;L.push([V,ee+Z*Math.cos($),Q+Y*Math.sin($)])}break;case"Z":M===m&&k===l||L.push([V,M=m,k=l])}for(var K=(f||{}).domain,oe=u._fullLayout._size,j=f&&"pixel"===f.xsizemode,H=f&&"pixel"===f.ysizemode,G=!1===p,re=0;re<L.length;re++){for(y=0;y+2<7;y+=2){var q=L[re][y+1],te=L[re][y+2];void 0!==q&&void 0!==te&&(M=q,k=te,f&&(f.xaxis&&f.xaxis.p2r?(G&&(q-=f.xaxis._offset),q=j?t(f.xaxis,f.xanchor)+q:r(f.xaxis,q)):(G&&(q-=oe.l),K?q=K.x[0]+q/oe.w:q/=oe.w),f.yaxis&&f.yaxis.p2r?(G&&(te-=f.yaxis._offset),te=H?t(f.yaxis,f.yanchor)-te:r(f.yaxis,te)):(G&&(te-=oe.t),te=K?K.y[1]-te/oe.h:1-te/oe.h)),L[re][y+1]=q,L[re][y+2]=te)}v[A].push(L[re].slice())}}return v},ie.pointsShapeRectangle=function(i){if(5!==i.length)return!1;for(var u=1;u<3;u++)if(!d(i[0][u]-i[1][u],i[3][u]-i[2][u])||!d(i[0][u]-i[3][u],i[1][u]-i[2][u]))return!1;return!(!d(i[0][1],i[1][1])&&!d(i[0][1],i[3][1])||!(s(i[0],i[1])*s(i[0],i[3])))},ie.pointsShapeEllipse=function(i){var u=i.length;if(u!==T+1)return!1;u=T;for(var f=0;f<u;f++){var p=(2*u-f)%u,y=(u/2+p)%u;if(!d(s(i[f],i[(u/2+f)%u]),s(i[p],i[y])))return!1}return!0},ie.handleEllipse=function(i,u,f){if(!i)return[u,f];var p=ie.ellipseOver({x0:u[0],y0:u[1],x1:f[0],y1:f[1]}),y=(p.x1+p.x0)/2,m=(p.y1+p.y0)/2,l=(p.x1-p.x0)/2,w=(p.y1-p.y0)/2;l||(l=w/=b),w||(w=l/=b);for(var v=[],A=0;A<T;A++){var M=2*A*Math.PI/T;v.push([y+l*Math.cos(M),m+w*Math.sin(M)])}return v},ie.ellipseOver=function(i){var u=i.x0,f=i.y0,p=i.x1,y=i.y1,m=p-u,l=y-f,w=((u-=m)+p)/2,v=((f-=l)+y)/2;return{x0:w-(m*=b),y0:v-(l*=b),x1:w+m,y1:v+l}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(_,ae,ie){"use strict";var g=_("../../dragelement/helpers"),x=g.drawMode,T=g.openMode,b=_("./constants"),e=b.i000,r=b.i090,t=b.i180,a=b.i270,n=b.cos45,d=b.sin45,s=_("../../../plots/cartesian/helpers"),i=s.p2r,u=s.r2p,f=_("../../../plots/cartesian/handle_outline").clearSelect,p=_("./helpers"),y=p.readPaths,m=p.writePaths,l=p.ellipseOver;ae.exports=function(w,v){if(w.length){var A=w[0][0];if(A){var M=A.getAttribute("d"),k=v.gd,E=k._fullLayout.newshape,P=v.plotinfo,S=P.xaxis,F=P.yaxis,R=!!P.domain||!P.xaxis,D=!!P.domain||!P.yaxis,L=v.isActiveShape,B=v.dragmode,V=(k.layout||{}).shapes||[];if(!x(B)&&void 0!==L){var Z=k._fullLayout._activeShapeIndex;if(Z<V.length)switch(k._fullLayout.shapes[Z].type){case"rect":B="drawrect";break;case"circle":B="drawcircle";break;case"line":B="drawline";break;case"path":var Y=V[Z].path||"";B="Z"===Y[Y.length-1]?"drawclosedpath":"drawopenpath"}}var ee,Q=T(B),$=y(M,k,P,L),K={editable:!0,xref:R?"paper":S._id,yref:D?"paper":F._id,layer:E.layer,opacity:E.opacity,line:{color:E.line.color,width:E.line.width,dash:E.line.dash}};if(Q||(K.fillcolor=E.fillcolor,K.fillrule=E.fillrule),1===$.length&&(ee=$[0]),ee&&"drawrect"===B)K.type="rect",K.x0=ee[0][1],K.y0=ee[0][2],K.x1=ee[2][1],K.y1=ee[2][2];else if(ee&&"drawline"===B)K.type="line",K.x0=ee[0][1],K.y0=ee[0][2],K.x1=ee[1][1],K.y1=ee[1][2];else if(ee&&"drawcircle"===B){K.type="circle";var oe=ee[e][1],j=ee[r][1],H=ee[t][1],G=ee[a][1],re=ee[e][2],q=ee[r][2],te=ee[t][2],ne=ee[a][2],le=P.xaxis&&("date"===P.xaxis.type||"log"===P.xaxis.type),ue=P.yaxis&&("date"===P.yaxis.type||"log"===P.yaxis.type);le&&(oe=u(P.xaxis,oe),j=u(P.xaxis,j),H=u(P.xaxis,H),G=u(P.xaxis,G)),ue&&(re=u(P.yaxis,re),q=u(P.yaxis,q),te=u(P.yaxis,te),ne=u(P.yaxis,ne));var de=(j+G)/2,he=(re+te)/2,be=l({x0:de,y0:he,x1:de+(G-j+H-oe)/2*n,y1:he+(ne-q+te-re)/2*d});le&&(be.x0=i(P.xaxis,be.x0),be.x1=i(P.xaxis,be.x1)),ue&&(be.y0=i(P.yaxis,be.y0),be.y1=i(P.yaxis,be.y1)),K.x0=be.x0,K.y0=be.y0,K.x1=be.x1,K.y1=be.y1}else K.type="path",S&&F&&function(ve,Te,Ie){var Ce="date"===Te.type,Pe="date"===Ie.type;if(!Ce&&!Pe)return ve;for(var Ve=0;Ve<ve.length;Ve++)for(var qe=0;qe<ve[Ve].length;qe++)for(var Je=0;Je+2<ve[Ve][qe].length;Je+=2)Ce&&(ve[Ve][qe][Je+1]=ve[Ve][qe][Je+1].replace(" ","_")),Pe&&(ve[Ve][qe][Je+2]=ve[Ve][qe][Je+2].replace(" ","_"))}($,S,F),K.path=m($),ee=null;f(k);for(var ge=v.editHelpers,we=(ge||{}).modifyItem,ke=[],De=0;De<V.length;De++){var Ee=k._fullLayout.shapes[De];if(ke[De]=Ee._input,void 0!==L&&De===k._fullLayout._activeShapeIndex){var Re=K;switch(Ee.type){case"line":case"rect":case"circle":we("x0",Re.x0),we("x1",Re.x1),we("y0",Re.y0),we("y1",Re.y1);break;case"path":we("path",Re.path)}}}return void 0===L?(ke.push(K),ke):ge?ge.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(_,ae,ie){"use strict";var g=_("./constants"),x=_("../../lib");ie.rangeToShapePosition=function(T){return"log"===T.type?T.r2d:function(b){return b}},ie.shapePositionToRange=function(T){return"log"===T.type?T.d2r:function(b){return b}},ie.decodeDate=function(T){return function(b){return b.replace&&(b=b.replace("_"," ")),T(b)}},ie.encodeDate=function(T){return function(b){return T(b).replace(" ","_")}},ie.extractPathCoords=function(T,b){var e=[];return T.match(g.segmentRE).forEach(function(r){var t=b[r.charAt(0)].drawn;if(void 0!==t){var a=r.substr(1).match(g.paramRE);!a||a.length<t||e.push(x.cleanNumber(a[t]))}}),e},ie.getDataToPixel=function(T,b,e,r){var t,a=T._fullLayout._size;if(b)if("domain"===r)t=function(d){return b._length*(e?1-d:d)+b._offset};else{var n=ie.shapePositionToRange(b);t=function(d){return b._offset+b.r2p(n(d,!0))},"date"===b.type&&(t=ie.decodeDate(t))}else t=e?function(d){return a.t+a.h*(1-d)}:function(d){return a.l+a.w*d};return t},ie.getPixelToData=function(T,b,e,r){var t,a=T._fullLayout._size;if(b)if("domain"===r)t=function(d){var s=(d-b._offset)/b._length;return e?1-s:s};else{var n=ie.rangeToShapePosition(b);t=function(d){return n(b.p2r(d-b._offset))}}else t=e?function(d){return 1-(d-a.t)/a.h}:function(d){return(d-a.l)/a.w};return t},ie.roundPositionForSharpStrokeRendering=function(T,b){var e=1===Math.round(b%2),r=Math.round(T);return e?r+.5:r},ie.makeOptionsAndPlotinfo=function(T,b){var e=T._fullLayout.shapes[b]||{},r=T._fullLayout._plots[e.xref+e.yref];return r?r._hadPlotinfo=!0:(r={},e.xref&&"paper"!==e.xref&&(r.xaxis=T._fullLayout[e.xref+"axis"]),e.yref&&"paper"!==e.yref&&(r.yaxis=T._fullLayout[e.yref+"axis"])),r.xsizemode=e.xsizemode,r.ysizemode=e.ysizemode,r.xanchor=e.xanchor,r.yanchor=e.yanchor,{options:e,plotinfo:r}}},{"../../lib":503,"./constants":448}],458:[function(_,ae,ie){"use strict";var g=_("./draw");ae.exports={moduleType:"component",name:"shapes",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),supplyDrawNewShapeDefaults:_("./draw_newshape/defaults"),includeBasePlot:_("../../plots/cartesian/include_components")("shapes"),calcAutorange:_("./calc_autorange"),draw:g.draw,drawOne:g.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(_,ae,ie){"use strict";var g=_("../../plots/font_attributes"),x=_("../../plots/pad_attributes"),T=_("../../lib/extend").extendDeepAll,b=_("../../plot_api/edit_types").overrideAll,e=_("../../plots/animation_attributes"),r=_("../../plot_api/plot_template").templatedArray,t=_("./constants"),a=r("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ae.exports=b(r("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:a,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:T(x({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:g({})},font:g({}),activebgcolor:{valType:"color",dflt:t.gripBgActiveColor},bgcolor:{valType:"color",dflt:t.railBgColor},bordercolor:{valType:"color",dflt:t.railBorderColor},borderwidth:{valType:"number",min:0,dflt:t.railBorderWidth},ticklen:{valType:"number",min:0,dflt:t.tickLength},tickcolor:{valType:"color",dflt:t.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:t.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(_,ae,ie){"use strict";ae.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/array_container_defaults"),T=_("./attributes"),b=_("./constants").name,e=T.steps;function r(a,n,d){function s(y,m){return g.coerce(a,n,T,y,m)}for(var i=x(a,n,{name:"steps",handleItemDefaults:t}),u=0,f=0;f<i.length;f++)i[f].visible&&u++;if(u<2?n.visible=!1:s("visible")){n._stepCount=u;var p=n._visibleSteps=g.filterVisible(i);(i[s("active")]||{}).visible||(n.active=p[0]._index),s("x"),s("y"),g.noneOrAll(a,n,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),g.coerceFont(s,"font",d.font),s("currentvalue.visible")&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),g.coerceFont(s,"currentvalue.font",n.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function t(a,n){function d(i,u){return g.coerce(a,n,e,i,u)}if("skip"===a.method||Array.isArray(a.args)?d("visible"):n.visible=!1){d("method"),d("args");var s=d("label","step-"+n._index);d("value",s),d("execute")}}ae.exports=function(a,n){x(a,n,{name:b,handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../plots/plots"),T=_("../color"),b=_("../drawing"),e=_("../../lib"),r=e.strTranslate,t=_("../../lib/svg_text_utils"),a=_("../../plot_api/plot_template").arrayEditor,n=_("./constants"),d=_("../../constants/alignment"),s=d.LINE_SPACING,i=d.FROM_TL,u=d.FROM_BR;function f(L){return n.autoMarginIdRoot+L._index}function p(L){return L._index}function y(L,B){var V=b.tester.selectAll("g."+n.labelGroupClass).data(B._visibleSteps);V.enter().append("g").classed(n.labelGroupClass,!0);var Z=0,Y=0;V.each(function(re){var q=w(g.select(this),{step:re},B).node();if(q){var te=b.bBox(q);Y=Math.max(Y,te.height),Z=Math.max(Z,te.width)}}),V.remove();var ee=B._dims={};ee.inputAreaWidth=Math.max(n.railWidth,n.gripHeight);var Q=L._fullLayout._size;if(ee.lx=Q.l+Q.w*B.x,ee.ly=Q.t+Q.h*(1-B.y),ee.outerLength="fraction"===B.lenmode?Math.round(Q.w*B.len):B.len,ee.inputAreaStart=0,ee.inputAreaLength=Math.round(ee.outerLength-B.pad.l-B.pad.r),ee.labelStride=Math.max(1,Math.ceil((Z+n.labelPadding)/((ee.inputAreaLength-2*n.stepInset)/(B._stepCount-1)))),ee.labelHeight=Y,ee.currentValueMaxWidth=0,ee.currentValueHeight=0,ee.currentValueTotalHeight=0,ee.currentValueMaxLines=1,B.currentvalue.visible){var oe=b.tester.append("g");V.each(function(re){var q=m(oe,B,re.label),te=q.node()&&b.bBox(q.node())||{width:0,height:0},ne=t.lineCount(q);ee.currentValueMaxWidth=Math.max(ee.currentValueMaxWidth,Math.ceil(te.width)),ee.currentValueHeight=Math.max(ee.currentValueHeight,Math.ceil(te.height)),ee.currentValueMaxLines=Math.max(ee.currentValueMaxLines,ne)}),ee.currentValueTotalHeight=ee.currentValueHeight+B.currentvalue.offset,oe.remove()}ee.height=ee.currentValueTotalHeight+n.tickOffset+B.ticklen+n.labelOffset+ee.labelHeight+B.pad.t+B.pad.b;var j="left";e.isRightAnchor(B)&&(ee.lx-=ee.outerLength,j="right"),e.isCenterAnchor(B)&&(ee.lx-=ee.outerLength/2,j="center");var H="top";e.isBottomAnchor(B)&&(ee.ly-=ee.height,H="bottom"),e.isMiddleAnchor(B)&&(ee.ly-=ee.height/2,H="middle"),ee.outerLength=Math.ceil(ee.outerLength),ee.height=Math.ceil(ee.height),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly);var G={y:B.y,b:ee.height*u[H],t:ee.height*i[H]};"fraction"===B.lenmode?(G.l=0,G.xl=B.x-B.len*i[j],G.r=0,G.xr=B.x+B.len*u[j]):(G.x=B.x,G.l=ee.outerLength*i[j],G.r=ee.outerLength*u[j]),x.autoMargin(L,f(B),G)}function m(L,B,V){if(B.currentvalue.visible){var Z,Y,ee=B._dims;switch(B.currentvalue.xanchor){case"right":Z=ee.inputAreaLength-n.currentValueInset-ee.currentValueMaxWidth,Y="left";break;case"center":Z=.5*ee.inputAreaLength,Y="middle";break;default:Z=n.currentValueInset,Y="left"}var Q=e.ensureSingle(L,"text",n.labelClass,function(G){G.attr({"text-anchor":Y,"data-notex":1})}),$=B.currentvalue.prefix?B.currentvalue.prefix:"";if("string"==typeof V)$+=V;else{var K=B.steps[B.active].label,oe=B._gd._fullLayout._meta;oe&&(K=e.templateString(K,oe)),$+=K}B.currentvalue.suffix&&($+=B.currentvalue.suffix),Q.call(b.font,B.currentvalue.font).text($).call(t.convertToTspans,B._gd);var j=t.lineCount(Q);return t.positionText(Q,Z,(ee.currentValueMaxLines+1-j)*B.currentvalue.font.size*s),Q}}function l(L,B,V){e.ensureSingle(L,"rect",n.gripRectClass,function(Z){Z.call(k,B,L,V).style("pointer-events","all")}).attr({width:n.gripWidth,height:n.gripHeight,rx:n.gripRadius,ry:n.gripRadius}).call(T.stroke,V.bordercolor).call(T.fill,V.bgcolor).style("stroke-width",V.borderwidth+"px")}function w(L,B,V){var Z=e.ensureSingle(L,"text",n.labelClass,function(Q){Q.attr({"text-anchor":"middle","data-notex":1})}),Y=B.step.label,ee=V._gd._fullLayout._meta;return ee&&(Y=e.templateString(Y,ee)),Z.call(b.font,V.font).text(Y).call(t.convertToTspans,V._gd),Z}function v(L,B){var V=e.ensureSingle(L,"g",n.labelsClass),Z=B._dims,Y=V.selectAll("g."+n.labelGroupClass).data(Z.labelSteps);Y.enter().append("g").classed(n.labelGroupClass,!0),Y.exit().remove(),Y.each(function(ee){var Q=g.select(this);Q.call(w,ee,B),b.setTranslate(Q,S(B,ee.fraction),n.tickOffset+B.ticklen+B.font.size*s+n.labelOffset+Z.currentValueTotalHeight)})}function A(L,B,V,Z,Y){var ee=Math.round(Z*(V._stepCount-1)),Q=V._visibleSteps[ee]._index;Q!==V.active&&M(L,B,V,Q,!0,Y)}function M(L,B,V,Z,Y,ee){var Q=V.active;V.active=Z,a(L.layout,n.name,V).applyUpdate("active",Z);var $=V.steps[V.active];B.call(P,V,ee),B.call(m,V),L.emit("plotly_sliderchange",{slider:V,step:V.steps[V.active],interaction:Y,previousActive:Q}),$&&$.method&&Y&&(B._nextMethod?(B._nextMethod.step=$,B._nextMethod.doCallback=Y,B._nextMethod.doTransition=ee):(B._nextMethod={step:$,doCallback:Y,doTransition:ee},B._nextMethodRaf=window.requestAnimationFrame(function(){var K=B._nextMethod.step;K.method&&(K.execute&&x.executeAPICommand(L,K.method,K.args),B._nextMethod=null,B._nextMethodRaf=null)})))}function k(L,B,V){var Z=V.node(),Y=g.select(B);function ee(){return V.data()[0]}function Q(){var $=ee();B.emit("plotly_sliderstart",{slider:$});var K=V.select("."+n.gripRectClass);g.event.stopPropagation(),g.event.preventDefault(),K.call(T.fill,$.activebgcolor);var oe=F($,g.mouse(Z)[0]);function j(){var G=ee(),re=F(G,g.mouse(Z)[0]);A(B,V,G,re,!1)}function H(){var G=ee();G._dragging=!1,K.call(T.fill,G.bgcolor),Y.on("mouseup",null),Y.on("mousemove",null),Y.on("touchend",null),Y.on("touchmove",null),B.emit("plotly_sliderend",{slider:G,step:G.steps[G.active]})}A(B,V,$,oe,!0),$._dragging=!0,Y.on("mousemove",j),Y.on("touchmove",j),Y.on("mouseup",H),Y.on("touchend",H)}L.on("mousedown",Q),L.on("touchstart",Q)}function E(L,B){var V=L.selectAll("rect."+n.tickRectClass).data(B._visibleSteps),Z=B._dims;V.enter().append("rect").classed(n.tickRectClass,!0),V.exit().remove(),V.attr({width:B.tickwidth+"px","shape-rendering":"crispEdges"}),V.each(function(Y,ee){var Q=ee%Z.labelStride==0,$=g.select(this);$.attr({height:Q?B.ticklen:B.minorticklen}).call(T.fill,B.tickcolor),b.setTranslate($,S(B,ee/(B._stepCount-1))-.5*B.tickwidth,(Q?n.tickOffset:n.minorTickOffset)+Z.currentValueTotalHeight)})}function P(L,B,V){for(var Z=L.select("rect."+n.gripRectClass),Y=0,ee=0;ee<B._stepCount;ee++)if(B._visibleSteps[ee]._index===B.active){Y=ee;break}var Q=S(B,Y/(B._stepCount-1));if(!B._invokingCommand){var $=Z;V&&B.transition.duration>0&&($=$.transition().duration(B.transition.duration).ease(B.transition.easing)),$.attr("transform",r(Q-.5*n.gripWidth,B._dims.currentValueTotalHeight))}}function S(L,B){var V=L._dims;return V.inputAreaStart+n.stepInset+(V.inputAreaLength-2*n.stepInset)*Math.min(1,Math.max(0,B))}function F(L,B){var V=L._dims;return Math.min(1,Math.max(0,(B-n.stepInset-V.inputAreaStart)/(V.inputAreaLength-2*n.stepInset-2*V.inputAreaStart)))}function R(L,B,V){var Z=V._dims,Y=e.ensureSingle(L,"rect",n.railTouchRectClass,function(ee){ee.call(k,B,L,V).style("pointer-events","all")});Y.attr({width:Z.inputAreaLength,height:Math.max(Z.inputAreaWidth,n.tickOffset+V.ticklen+Z.labelHeight)}).call(T.fill,V.bgcolor).attr("opacity",0),b.setTranslate(Y,0,Z.currentValueTotalHeight)}function D(L,B){var V=B._dims,Z=V.inputAreaLength-2*n.railInset,Y=e.ensureSingle(L,"rect",n.railRectClass);Y.attr({width:Z,height:n.railWidth,rx:n.railRadius,ry:n.railRadius,"shape-rendering":"crispEdges"}).call(T.stroke,B.bordercolor).call(T.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px"),b.setTranslate(Y,n.railInset,.5*(V.inputAreaWidth-n.railWidth)+V.currentValueTotalHeight)}ae.exports=function(L){var B=L._fullLayout,V=function(K,oe){for(var j=K[n.name],H=[],G=0;G<j.length;G++){var re=j[G];re.visible&&(re._gd=oe,H.push(re))}return H}(B,L),Z=B._infolayer.selectAll("g."+n.containerClassName).data(V.length>0?[0]:[]);function Y(K){K._commandObserver&&(K._commandObserver.remove(),delete K._commandObserver),x.autoMargin(L,f(K))}if(Z.enter().append("g").classed(n.containerClassName,!0).style("cursor","ew-resize"),Z.exit().each(function(){g.select(this).selectAll("g."+n.groupClassName).each(Y)}).remove(),0!==V.length){var ee=Z.selectAll("g."+n.groupClassName).data(V,p);ee.enter().append("g").classed(n.groupClassName,!0),ee.exit().each(Y).remove();for(var Q=0;Q<V.length;Q++)y(L,V[Q]);ee.each(function(K){var oe=g.select(this);(function(j){var H=j._dims;H.labelSteps=[];for(var G=j._stepCount,re=0;re<G;re+=H.labelStride)H.labelSteps.push({fraction:re/(G-1),step:j._visibleSteps[re]})})(K),x.manageCommandObserver(L,K,K._visibleSteps,function(j){var H=oe.data()[0];H.active!==j.index&&(H._dragging||M(L,oe,H,j.index,!1,!0))}),function(j,H,G){(G.steps[G.active]||{}).visible||(G.active=G._visibleSteps[0]._index),H.call(m,G).call(D,G).call(v,G).call(E,G).call(R,j,G).call(l,j,G);var re=G._dims;b.setTranslate(H,re.lx+G.pad.l,re.ly+G.pad.t),H.call(P,G,!1),H.call(m,G)}(L,g.select(this),K)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(_,ae,ie){"use strict";var g=_("./constants");ae.exports={moduleType:"component",name:g.name,layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),draw:_("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../lib"),r=e.strTranslate,t=_("../drawing"),a=_("../color"),n=_("../../lib/svg_text_utils"),d=_("../../constants/interactions"),s=_("../../constants/alignment").OPPOSITE_SIDE,i=/ [XY][0-9]* /;ae.exports={draw:function(u,f,p){var y,l=p.propName,w=p.placeholder,v=p.traceIndex,A=p.avoid||{},M=p.attributes,k=p.transform,E=p.containerGroup,P=u._fullLayout,S=1,F=!1,R=p.propContainer.title,D=(R&&R.text?R.text:"").trim(),L=R&&R.font?R.font:{},B=L.family,V=L.size,Z=L.color;"title.text"===l?y="titleText":-1!==l.indexOf("axis")?y="axisTitleText":l.indexOf(!0)&&(y="colorbarTitleText");var Y=u._context.edits[y];""===D?S=0:D.replace(i," % ")===w.replace(i," % ")&&(S=.2,F=!0,Y||(D="")),p._meta?D=e.templateString(D,p._meta):P._meta&&(D=e.templateString(D,P._meta));var ee,Q=D||Y;E||(E=e.ensureSingle(P._infolayer,"g","g-"+f),ee=P._hColorbarMoveTitle);var $=E.selectAll("text").data(Q?[0]:[]);if($.enter().append("text"),$.text(D).attr("class",f),$.exit().remove(),!Q)return E;function K(H){e.syncOrAsync([oe,j],H)}function oe(H){var G;return!k&&ee&&(k={}),k?(G="",k.rotate&&(G+="rotate("+[k.rotate,M.x,M.y]+")"),(k.offset||ee)&&(G+=r(0,(k.offset||0)-(ee||0)))):G=null,H.attr("transform",G),H.style({"font-family":B,"font-size":g.round(V,2)+"px",fill:a.rgb(Z),opacity:S*a.opacity(Z),"font-weight":T.fontWeight}).attr(M).call(n.convertToTspans,u),T.previousPromises(u)}function j(H){var G=g.select(H.node().parentNode);if(A&&A.selection&&A.side&&D){G.attr("transform",null);var re=s[A.side],q="left"===A.side||"top"===A.side?-1:1,te=x(A.pad)?A.pad:2,ne=t.bBox(G.node()),ue=A.maxShift||q*({left:0,top:0,right:P.width,bottom:P.height}[A.side]-ne[A.side]),de=0;if(ue<0)de=ue;else{var he=A.offsetLeft||0,be=A.offsetTop||0;ne.left-=he,ne.right-=he,ne.top-=be,ne.bottom-=be,A.selection.each(function(){var we=t.bBox(this);e.bBoxIntersect(ne,we,te)&&(de=Math.max(de,q*(we[A.side]-ne[re])+te))}),de=Math.min(ue,de)}if(de>0||ue<0){var ge={left:[-de,0],right:[de,0],top:[0,-de],bottom:[0,de]}[A.side];G.attr("transform",r(ge[0],ge[1]))}}}return $.call(K),Y&&(D?$.on(".opacity",null):(S=0,F=!0,$.text(w).on("mouseover.opacity",function(){g.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){g.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})),$.call(n.makeEditable,{gd:u}).on("edit",function(H){void 0!==v?b.call("_guiRestyle",u,l,H,v):b.call("_guiRelayout",u,l,H)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(K)}).on("input",function(H){this.text(H||" ").call(n.positionText,M.x,M.y)})),$.classed("js-placeholder",F),E}}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(_,ae,ie){"use strict";var g=_("../../plots/font_attributes"),x=_("../color/attributes"),T=_("../../lib/extend").extendFlat,b=_("../../plot_api/edit_types").overrideAll,e=_("../../plots/pad_attributes"),r=_("../../plot_api/plot_template").templatedArray,t=r("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ae.exports=b(r("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:t,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:T(e({editType:"arraydraw"}),{}),font:g({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:x.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(_,ae,ie){"use strict";ae.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],467:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/array_container_defaults"),T=_("./attributes"),b=_("./constants").name,e=T.buttons;function r(a,n,d){function s(i,u){return g.coerce(a,n,T,i,u)}s("visible",x(a,n,{name:"buttons",handleItemDefaults:t}).length>0)&&(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),g.noneOrAll(a,n,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),g.coerceFont(s,"font",d.font),s("bgcolor",d.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function t(a,n){function d(s,i){return g.coerce(a,n,e,s,i)}d("visible","skip"===a.method||Array.isArray(a.args))&&(d("method"),d("args"),d("args2"),d("label"),d("execute"))}ae.exports=function(a,n){x(a,n,{name:b,handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../plots/plots"),T=_("../color"),b=_("../drawing"),e=_("../../lib"),r=_("../../lib/svg_text_utils"),t=_("../../plot_api/plot_template").arrayEditor,a=_("../../constants/alignment").LINE_SPACING,n=_("./constants"),d=_("./scrollbox");function s(S){return S._index}function i(S,F){return+S.attr(n.menuIndexAttrName)===F._index}function u(S,F,R,D,L,B,V,Z){F.active=V,t(S.layout,n.name,F).applyUpdate("active",V),"buttons"===F.type?p(S,D,null,null,F):"dropdown"===F.type&&(L.attr(n.menuIndexAttrName,"-1"),f(S,D,L,B,F),Z||p(S,D,L,B,F))}function f(S,F,R,D,L){var B=e.ensureSingle(F,"g",n.headerClassName,function($){$.style("pointer-events","all")}),V=L._dims,ee={y:L.pad.t,yPad:0,x:L.pad.l,xPad:0,index:0},Q={width:V.headerWidth,height:V.headerHeight};B.call(y,L,L.buttons[L.active]||n.blankHeaderOpts,S).call(E,L,ee,Q),e.ensureSingle(F,"text",n.headerArrowClassName,function($){$.attr("text-anchor","end").call(b.font,L.font).text(n.arrowSymbol[L.direction])}).attr({x:V.headerWidth-n.arrowOffsetX+L.pad.l,y:V.headerHeight/2+n.textOffsetY+L.pad.t}),B.on("click",function(){R.call(P,String(i(R,L)?-1:L._index)),p(S,F,R,D,L)}),B.on("mouseover",function(){B.call(v)}),B.on("mouseout",function(){B.call(A,L)}),b.setTranslate(F,V.lx,V.ly)}function p(S,F,R,D,L){R||(R=F).attr("pointer-events","all");var B=-1==+R.attr(n.menuIndexAttrName)&&"buttons"!==L.type?[]:L.buttons,V="dropdown"===L.type?n.dropdownButtonClassName:n.buttonClassName,Z=R.selectAll("g."+V).data(e.filterVisible(B)),Y=Z.enter().append("g").classed(V,!0),ee=Z.exit();"dropdown"===L.type?(Y.attr("opacity","0").transition().attr("opacity","1"),ee.transition().attr("opacity","0").remove()):ee.remove();var Q=0,$=0,K=L._dims,oe=-1!==["up","down"].indexOf(L.direction);"dropdown"===L.type&&(oe?$=K.headerHeight+n.gapButtonHeader:Q=K.headerWidth+n.gapButtonHeader),"dropdown"===L.type&&"up"===L.direction&&($=-n.gapButtonHeader+n.gapButton-K.openHeight),"dropdown"===L.type&&"left"===L.direction&&(Q=-n.gapButtonHeader+n.gapButton-K.openWidth);var G,re,q,j={x:K.lx+Q+L.pad.l,y:K.ly+$+L.pad.t,yPad:n.gapButton,xPad:n.gapButton,index:0},H={l:j.x+L.borderwidth,t:j.y+L.borderwidth};Z.each(function(G,re){var q=g.select(this);q.call(y,L,G,S).call(E,L,j),q.on("click",function(){g.event.defaultPrevented||(G.execute&&(G.args2&&L.active===re?(u(S,L,0,F,R,D,-1),x.executeAPICommand(S,G.method,G.args2)):(u(S,L,0,F,R,D,re),x.executeAPICommand(S,G.method,G.args))),S.emit("plotly_buttonclicked",{menu:L,button:G,active:L.active}))}),q.on("mouseover",function(){q.call(v)}),q.on("mouseout",function(){q.call(A,L),Z.call(w,L)})}),Z.call(w,L),oe?(H.w=Math.max(K.openWidth,K.headerWidth),H.h=j.y-H.t):(H.w=j.x-H.l,H.h=Math.max(K.openHeight,K.headerHeight)),H.direction=L.direction,D&&(Z.size()?function(G,re,q,te,ne,le){var ue,de,he,be=ne.direction,we=ne._dims,ke=ne.active;if("up"===be||"down"===be)for(de=0,he=0;he<ke;he++)de+=we.heights[he]+n.gapButton;else for(ue=0,he=0;he<ke;he++)ue+=we.widths[he]+n.gapButton;te.enable(le,ue,de),te.hbar&&te.hbar.attr("opacity","0").transition().attr("opacity","1"),te.vbar&&te.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,D,L,H):(q=!!(G=D).vbar,(re=!!G.hbar)&&G.hbar.transition().attr("opacity","0").each("end",function(){re=!1,q||G.disable()}),q&&G.vbar.transition().attr("opacity","0").each("end",function(){q=!1,re||G.disable()})))}function y(S,F,R,D){S.call(m,F).call(l,F,R,D)}function m(S,F){e.ensureSingle(S,"rect",n.itemRectClassName,function(R){R.attr({rx:n.rx,ry:n.ry,"shape-rendering":"crispEdges"})}).call(T.stroke,F.bordercolor).call(T.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function l(S,F,R,D){var L=e.ensureSingle(S,"text",n.itemTextClassName,function(Z){Z.attr({"text-anchor":"start","data-notex":1})}),B=R.label,V=D._fullLayout._meta;V&&(B=e.templateString(B,V)),L.call(b.font,F.font).text(B).call(r.convertToTspans,D)}function w(S,F){var R=F.active;S.each(function(D,L){var B=g.select(this);L===R&&F.showactive&&B.select("rect."+n.itemRectClassName).call(T.fill,n.activeColor)})}function v(S){S.select("rect."+n.itemRectClassName).call(T.fill,n.hoverColor)}function A(S,F){S.select("rect."+n.itemRectClassName).call(T.fill,F.bgcolor)}function M(S,F){var R=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=b.tester.selectAll("g."+n.dropdownButtonClassName).data(e.filterVisible(F.buttons));D.enter().append("g").classed(n.dropdownButtonClassName,!0);var L=-1!==["up","down"].indexOf(F.direction);D.each(function(Q,$){var K=g.select(this);K.call(y,F,Q,S);var oe=K.select("."+n.itemTextClassName),j=oe.node()&&b.bBox(oe.node()).width,H=Math.max(j+n.textPadX,n.minWidth),G=F.font.size*a,re=r.lineCount(oe),q=Math.max(G*re,n.minHeight)+n.textOffsetY;q=Math.ceil(q),H=Math.ceil(H),R.widths[$]=H,R.heights[$]=q,R.height1=Math.max(R.height1,q),R.width1=Math.max(R.width1,H),L?(R.totalWidth=Math.max(R.totalWidth,H),R.openWidth=R.totalWidth,R.totalHeight+=q+n.gapButton,R.openHeight+=q+n.gapButton):(R.totalWidth+=H+n.gapButton,R.openWidth+=H+n.gapButton,R.totalHeight=Math.max(R.totalHeight,q),R.openHeight=R.totalHeight)}),L?R.totalHeight-=n.gapButton:R.totalWidth-=n.gapButton,R.headerWidth=R.width1+n.arrowPadX,R.headerHeight=R.height1,"dropdown"===F.type&&(L?(R.width1+=n.arrowPadX,R.totalHeight=R.height1):R.totalWidth=R.width1,R.totalWidth+=n.arrowPadX),D.remove();var B=R.totalWidth+F.pad.l+F.pad.r,V=R.totalHeight+F.pad.t+F.pad.b,Z=S._fullLayout._size;R.lx=Z.l+Z.w*F.x,R.ly=Z.t+Z.h*(1-F.y);var Y="left";e.isRightAnchor(F)&&(R.lx-=B,Y="right"),e.isCenterAnchor(F)&&(R.lx-=B/2,Y="center");var ee="top";e.isBottomAnchor(F)&&(R.ly-=V,ee="bottom"),e.isMiddleAnchor(F)&&(R.ly-=V/2,ee="middle"),R.totalWidth=Math.ceil(R.totalWidth),R.totalHeight=Math.ceil(R.totalHeight),R.lx=Math.round(R.lx),R.ly=Math.round(R.ly),x.autoMargin(S,k(F),{x:F.x,y:F.y,l:B*({right:1,center:.5}[Y]||0),r:B*({left:1,center:.5}[Y]||0),b:V*({top:1,middle:.5}[ee]||0),t:V*({bottom:1,middle:.5}[ee]||0)})}function k(S){return n.autoMarginIdRoot+S._index}function E(S,F,R,D){D=D||{};var L=S.select("."+n.itemRectClassName),B=S.select("."+n.itemTextClassName),V=F.borderwidth,Z=R.index,Y=F._dims;b.setTranslate(S,V+R.x,V+R.y);var ee=-1!==["up","down"].indexOf(F.direction),Q=D.height||(ee?Y.heights[Z]:Y.height1);L.attr({x:0,y:0,width:D.width||(ee?Y.width1:Y.widths[Z]),height:Q});var $=F.font.size*a,K=(r.lineCount(B)-1)*$/2;r.positionText(B,n.textOffsetX,Q/2-K+n.textOffsetY),ee?R.y+=Y.heights[Z]+R.yPad:R.x+=Y.widths[Z]+R.xPad,R.index++}function P(S,F){S.attr(n.menuIndexAttrName,F||"-1").selectAll("g."+n.dropdownButtonClassName).remove()}ae.exports=function(S){var F=S._fullLayout,R=e.filterVisible(F[n.name]);function D($){x.autoMargin(S,k($))}var L=F._menulayer.selectAll("g."+n.containerClassName).data(R.length>0?[0]:[]);if(L.enter().append("g").classed(n.containerClassName,!0).style("cursor","pointer"),L.exit().each(function(){g.select(this).selectAll("g."+n.headerGroupClassName).each(D)}).remove(),0!==R.length){var B=L.selectAll("g."+n.headerGroupClassName).data(R,s);B.enter().append("g").classed(n.headerGroupClassName,!0);for(var V=e.ensureSingle(L,"g",n.dropdownButtonGroupClassName,function($){$.style("pointer-events","all")}),Z=0;Z<R.length;Z++)M(S,R[Z]);var Q=new d(S,V,"updatemenus"+F._uid);B.enter().size()&&(V.node().parentNode.appendChild(V.node()),V.call(P)),B.exit().each(function($){V.call(P),D($)}).remove(),B.each(function($){var K=g.select(this),oe="dropdown"===$.type?V:null;x.manageCommandObserver(S,$,$.buttons,function(j){u(S,$,0,K,oe,Q,j.index,!0)}),"dropdown"===$.type?(f(S,K,V,Q,$),i(V,$)&&p(S,K,V,Q,$)):p(S,K,null,null,$)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(_,ae,ie){arguments[4][463][0].apply(ie,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(_,ae,ie){"use strict";ae.exports=e;var g=_("@plotly/d3"),x=_("../color"),T=_("../drawing"),b=_("../../lib");function e(r,t,a){this.gd=r,this.container=t,this.id=a,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(r,t,a){var n=this.gd._fullLayout,d=n.width,s=n.height;this.position=r;var i,u,f,p,y=this.position.l,m=this.position.w,l=this.position.t,w=this.position.h,v=this.position.direction,A="down"===v,M="left"===v,k="up"===v,E=m,P=w;A||M||"right"===v||k||(this.position.direction="down",A=!0),A||k?(u=(i=y)+E,A?(f=l,P=(p=Math.min(f+P,s))-f):P=(p=l+P)-(f=Math.max(p-P,0))):(p=(f=l)+P,M?E=(u=y+E)-(i=Math.max(u-E,0)):(i=y,E=(u=Math.min(i+E,d))-i)),this._box={l:i,t:f,w:E,h:P};var S=m>E,F=e.barLength+2*e.barPad,R=e.barWidth+2*e.barPad,D=y,L=l+w;L+R>s&&(L=s-R);var B=this.container.selectAll("rect.scrollbar-horizontal").data(S?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-horizontal",!0).call(x.fill,e.barColor),S?(this.hbar=B.attr({rx:e.barRadius,ry:e.barRadius,x:D,y:L,width:F,height:R}),this._hbarXMin=D+F/2,this._hbarTranslateMax=E-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var V=w>P,Z=e.barWidth+2*e.barPad,Y=e.barLength+2*e.barPad,ee=y+m,Q=l;ee+Z>d&&(ee=d-Z);var $=this.container.selectAll("rect.scrollbar-vertical").data(V?[0]:[]);$.exit().on(".drag",null).remove(),$.enter().append("rect").classed("scrollbar-vertical",!0).call(x.fill,e.barColor),V?(this.vbar=$.attr({rx:e.barRadius,ry:e.barRadius,x:ee,y:Q,width:Z,height:Y}),this._vbarYMin=Q+Y/2,this._vbarTranslateMax=P-Y):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var K=this.id,oe=i-.5,j=V?u+Z+.5:u+.5,H=f-.5,G=S?p+R+.5:p+.5,re=n._topdefs.selectAll("#"+K).data(S||V?[0]:[]);if(re.exit().remove(),re.enter().append("clipPath").attr("id",K).append("rect"),S||V?(this._clipRect=re.select("rect").attr({x:Math.floor(oe),y:Math.floor(H),width:Math.ceil(j)-Math.floor(oe),height:Math.ceil(G)-Math.floor(H)}),this.container.call(T.setClipUrl,K,this.gd),this.bg.attr({x:y,y:l,width:m,height:w})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(T.setClipUrl,null),delete this._clipRect),S||V){var q=g.behavior.drag().on("dragstart",function(){g.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(q);var te=g.behavior.drag().on("dragstart",function(){g.event.sourceEvent.preventDefault(),g.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));S&&this.hbar.on(".drag",null).call(te),V&&this.vbar.on(".drag",null).call(te)}this.setTranslate(t,a)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(T.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var r=this.translateX,t=this.translateY;this.hbar&&(r-=g.event.dx),this.vbar&&(t-=g.event.dy),this.setTranslate(r,t)},e.prototype._onBoxWheel=function(){var r=this.translateX,t=this.translateY;this.hbar&&(r+=g.event.deltaY),this.vbar&&(t+=g.event.deltaY),this.setTranslate(r,t)},e.prototype._onBarDrag=function(){var r=this.translateX,t=this.translateY;if(this.hbar){var a=r+this._hbarXMin,n=a+this._hbarTranslateMax;r=(b.constrain(g.event.x,a,n)-a)/(n-a)*(this.position.w-this._box.w)}if(this.vbar){var d=t+this._vbarYMin,s=d+this._vbarTranslateMax;t=(b.constrain(g.event.y,d,s)-d)/(s-d)*(this.position.h-this._box.h)}this.setTranslate(r,t)},e.prototype.setTranslate=function(r,t){var a=this.position.w-this._box.w,n=this.position.h-this._box.h;r=b.constrain(r||0,0,a),t=b.constrain(t||0,0,n),this.translateX=r,this.translateY=t,this.container.call(T.setTranslate,this._box.l-this.position.l-r,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+r-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar&&this.hbar.call(T.setTranslate,r+r/a*this._hbarTranslateMax,t),this.vbar&&this.vbar.call(T.setTranslate,r,t+t/n*this._vbarTranslateMax)}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(_,ae,ie){"use strict";ae.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(_,ae,ie){"use strict";ae.exports={axisRefDescription:function(g,x,T){return["If set to a",g,"axis id (e.g. *"+g+"* or","*"+g+"2*), the `"+g+"` position refers to a",g,"coordinate. If set to *paper*, the `"+g+"`","position refers to the distance from the",x,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",x,"("+T+"). If set to a",g,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",x,"of the domain of that axis: e.g.,","*"+g+"2 domain* refers to the domain of the second",g," axis and a",g,"position of 0.5 refers to the","point between the",x,"and the",T,"of the domain of the","second",g,"axis."].join(" ")}}},{}],473:[function(_,ae,ie){"use strict";ae.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],474:[function(_,ae,ie){"use strict";ae.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(_,ae,ie){"use strict";ae.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(_,ae,ie){"use strict";ae.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(_,ae,ie){"use strict";ae.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],478:[function(_,ae,ie){"use strict";ae.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(_,ae,ie){"use strict";ae.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(_,ae,ie){"use strict";ie.xmlns="http://www.w3.org/2000/xmlns/",ie.svg="http://www.w3.org/2000/svg",ie.xlink="http://www.w3.org/1999/xlink",ie.svgAttrs={xmlns:ie.svg,"xmlns:xlink":ie.xlink}},{}],481:[function(_,ae,ie){"use strict";ie.version=_("./version").version,_("native-promise-only"),_("../build/plotcss");for(var g=_("./registry"),x=ie.register=g.register,T=_("./plot_api"),b=Object.keys(T),e=0;e<b.length;e++){var r=b[e];"_"!==r.charAt(0)&&(ie[r]=T[r]),x({moduleType:"apiMethod",name:r,fn:T[r]})}x(_("./traces/scatter")),x([_("./components/legend"),_("./components/fx"),_("./components/annotations"),_("./components/annotations3d"),_("./components/shapes"),_("./components/images"),_("./components/updatemenus"),_("./components/sliders"),_("./components/rangeslider"),_("./components/rangeselector"),_("./components/grid"),_("./components/errorbars"),_("./components/colorscale"),_("./components/colorbar"),_("./components/modebar")]),x([_("./locale-en"),_("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(x(window.PlotlyLocales),delete window.PlotlyLocales),ie.Icons=_("./fonts/ploticon");var t=_("./components/fx"),a=_("./plots/plots");ie.Plots={resize:a.resize,graphJson:a.graphJson,sendDataToCloud:a.sendDataToCloud},ie.Fx={hover:t.hover,unhover:t.unhover,loneHover:t.loneHover,loneUnhover:t.loneUnhover},ie.Snapshot=_("./snapshot"),ie.PlotSchema=_("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":938,"./version":1119,"native-promise-only":245}],482:[function(_,ae,ie){"use strict";ae.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(_,ae,ie){"use strict";ie.isLeftAnchor=function(g){return"left"===g.xanchor||"auto"===g.xanchor&&g.x<=1/3},ie.isCenterAnchor=function(g){return"center"===g.xanchor||"auto"===g.xanchor&&g.x>1/3&&g.x<2/3},ie.isRightAnchor=function(g){return"right"===g.xanchor||"auto"===g.xanchor&&g.x>=2/3},ie.isTopAnchor=function(g){return"top"===g.yanchor||"auto"===g.yanchor&&g.y>=2/3},ie.isMiddleAnchor=function(g){return"middle"===g.yanchor||"auto"===g.yanchor&&g.y>1/3&&g.y<2/3},ie.isBottomAnchor=function(g){return"bottom"===g.yanchor||"auto"===g.yanchor&&g.y<=1/3}},{}],484:[function(_,ae,ie){"use strict";var g=_("./mod"),x=g.mod,T=g.modHalf,b=Math.PI,e=2*b;function r(d){return Math.abs(d[1]-d[0])>e-1e-14}function t(d,s){return T(s-d,e)}function a(d,s){if(r(s))return!0;var i,u;s[0]<s[1]?(i=s[0],u=s[1]):(i=s[1],u=s[0]),(i=x(i,e))>(u=x(u,e))&&(u+=e);var f=x(d,e),p=f+e;return f>=i&&f<=u||p>=i&&p<=u}function n(d,s,i,u,f,p,y){f=f||0,p=p||0;var m,l,w,v,A,M=r([i,u]);function k(F,R){return[F*Math.cos(R)+f,p-F*Math.sin(R)]}M?(m=0,l=b,w=e):i<u?(m=i,w=u):(m=u,w=i),d<s?(v=d,A=s):(v=s,A=d);var E,P=Math.abs(w-m)<=b?0:1;function S(F,R,D){return"A"+[F,F]+" "+[0,P,D]+" "+k(F,R)}return M?E=null===v?"M"+k(A,m)+S(A,l,0)+S(A,w,0)+"Z":"M"+k(v,m)+S(v,l,0)+S(v,w,0)+"ZM"+k(A,m)+S(A,l,1)+S(A,w,1)+"Z":null===v?(E="M"+k(A,m)+S(A,w,0),y&&(E+="L0,0Z")):E="M"+k(v,m)+"L"+k(A,m)+S(A,w,0)+"L"+k(v,w)+S(v,m,1)+"Z",E}ae.exports={deg2rad:function(d){return d/180*b},rad2deg:function(d){return d/b*180},angleDelta:t,angleDist:function(d,s){return Math.abs(t(d,s))},isFullCircle:r,isAngleInsideSector:a,isPtInsideSector:function(d,s,i,u){return!!a(s,u)&&(i[0]<i[1]?(f=i[0],p=i[1]):(f=i[1],p=i[0]),d>=f&&d<=p);var f,p},pathArc:function(d,s,i,u,f){return n(null,d,s,i,u,f,0)},pathSector:function(d,s,i,u,f){return n(null,d,s,i,u,f,1)},pathAnnulus:function(d,s,i,u,f,p){return n(d,s,i,u,f,p,1)}}},{"./mod":510}],485:[function(_,ae,ie){"use strict";var g=Array.isArray,x=ArrayBuffer,T=DataView;function b(t){return x.isView(t)&&!(t instanceof T)}function e(t){return g(t)||b(t)}function r(t,a,n){if(e(t)){if(e(t[0])){for(var d=n,s=0;s<t.length;s++)d=a(d,t[s].length);return d}return t.length}return 0}ie.isTypedArray=b,ie.isArrayOrTypedArray=e,ie.isArray1D=function(t){return!e(t[0])},ie.ensureArray=function(t,a){return g(t)||(t=[]),t.length=a,t},ie.concat=function(){var t,a,n,d,s,i,u,f,p=[],y=!0,m=0;for(n=0;n<arguments.length;n++)(i=(d=arguments[n]).length)&&(a?p.push(d):(a=d,s=i),g(d)?t=!1:(y=!1,m?t!==d.constructor&&(t=!1):t=d.constructor),m+=i);if(!m)return[];if(!p.length)return a;if(y)return a.concat.apply(a,p);if(t){for((u=new t(m)).set(a),n=0;n<p.length;n++)u.set(d=p[n],s),s+=d.length;return u}for(u=new Array(m),f=0;f<a.length;f++)u[f]=a[f];for(n=0;n<p.length;n++){for(d=p[n],f=0;f<d.length;f++)u[s+f]=d[f];s+=f}return u},ie.maxRowLength=function(t){return r(t,Math.max,0)},ie.minRowLength=function(t){return r(t,Math.min,1/0)}},{}],486:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../constants/numerical").BADNUM,T=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ae.exports=function(b){return"string"==typeof b&&(b=b.replace(T,"")),g(b)?Number(b):x}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(_,ae,ie){"use strict";ae.exports=function(g){var x=g._fullLayout;x._glcanvas&&x._glcanvas.size()&&x._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},{}],488:[function(_,ae,ie){"use strict";ae.exports=function(g){g._responsiveChartHandler&&(window.removeEventListener("resize",g._responsiveChartHandler),delete g._responsiveChartHandler)}},{}],489:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("tinycolor2"),T=_("../plots/attributes"),b=_("../components/colorscale/scales"),e=_("../components/color"),r=_("../constants/interactions").DESELECTDIM,t=_("./nested_property"),a=_("./regex").counter,n=_("./mod").modHalf,d=_("./array").isArrayOrTypedArray;function s(i,u){var f=ie.valObjectMeta[u.valType];if(u.arrayOk&&d(i))return!0;if(f.validateFunction)return f.validateFunction(i,u);var p={},y=p;return f.coerceFunction(i,{set:function(l){y=l}},p,u),y!==p}ie.valObjectMeta={data_array:{coerceFunction:function(i,u,f){d(i)?u.set(i):void 0!==f&&u.set(f)}},enumerated:{coerceFunction:function(i,u,f,p){p.coerceNumber&&(i=+i),-1===p.values.indexOf(i)?u.set(f):u.set(i)},validateFunction:function(i,u){u.coerceNumber&&(i=+i);for(var f=u.values,p=0;p<f.length;p++){var y=String(f[p]);if("/"===y.charAt(0)&&"/"===y.charAt(y.length-1)){if(new RegExp(y.substr(1,y.length-2)).test(i))return!0}else if(i===f[p])return!0}return!1}},boolean:{coerceFunction:function(i,u,f){u.set(!0===i||!1===i?i:f)}},number:{coerceFunction:function(i,u,f,p){!g(i)||void 0!==p.min&&i<p.min||void 0!==p.max&&i>p.max?u.set(f):u.set(+i)}},integer:{coerceFunction:function(i,u,f,p){i%1||!g(i)||void 0!==p.min&&i<p.min||void 0!==p.max&&i>p.max?u.set(f):u.set(+i)}},string:{coerceFunction:function(i,u,f,p){u.set("string"!=typeof i?!0!==p.strict&&"number"==typeof i?String(i):f:p.noBlank&&!i?f:i)}},color:{coerceFunction:function(i,u,f){x(i).isValid()?u.set(i):u.set(f)}},colorlist:{coerceFunction:function(i,u,f){Array.isArray(i)&&i.length&&i.every(function(p){return x(p).isValid()})?u.set(i):u.set(f)}},colorscale:{coerceFunction:function(i,u,f){u.set(b.get(i,f))}},angle:{coerceFunction:function(i,u,f){"auto"===i?u.set("auto"):g(i)?u.set(n(+i,360)):u.set(f)}},subplotid:{coerceFunction:function(i,u,f,p){var y=p.regex||a(f);"string"==typeof i&&y.test(i)?u.set(i):u.set(f)},validateFunction:function(i,u){var f=u.dflt;return i===f||"string"==typeof i&&!!a(f).test(i)}},flaglist:{coerceFunction:function(i,u,f,p){if("string"==typeof i)if(-1===(p.extras||[]).indexOf(i)){for(var y=i.split("+"),m=0;m<y.length;){var l=y[m];-1===p.flags.indexOf(l)||y.indexOf(l)<m?y.splice(m,1):m++}u.set(y.length?y.join("+"):f)}else u.set(i);else u.set(f)}},any:{coerceFunction:function(i,u,f){u.set(void 0===i?f:i)}},info_array:{coerceFunction:function(i,u,f,p){function y(L,B,V){var Z;return void 0===V&&(V=B.dflt),ie.valObjectMeta[B.valType].coerceFunction(L,{set:function(ee){Z=ee}},V,B),Z}var m=2===p.dimensions||"1-2"===p.dimensions&&Array.isArray(i)&&Array.isArray(i[0]);if(Array.isArray(i)){var l,w,v,M,k,E=p.items,P=[],S=Array.isArray(E),F=S&&m&&Array.isArray(E[0]),R=m&&S&&!F,D=S&&!R?E.length:i.length;if(f=Array.isArray(f)?f:[],m)for(l=0;l<D;l++)for(P[l]=[],v=Array.isArray(i[l])?i[l]:[],M=R?E.length:S?E[l].length:v.length,w=0;w<M;w++)void 0!==(k=y(v[w],R?E[w]:S?E[l][w]:E,(f[l]||[])[w]))&&(P[l][w]=k);else for(l=0;l<D;l++)void 0!==(k=y(i[l],S?E[l]:E,f[l]))&&(P[l]=k);u.set(P)}else u.set(f)},validateFunction:function(i,u){if(!Array.isArray(i))return!1;var f=u.items,p=Array.isArray(f),y=2===u.dimensions;if(!u.freeLength&&i.length!==f.length)return!1;for(var m=0;m<i.length;m++)if(y){if(!Array.isArray(i[m])||!u.freeLength&&i[m].length!==f[m].length)return!1;for(var l=0;l<i[m].length;l++)if(!s(i[m][l],p?f[m][l]:f))return!1}else if(!s(i[m],p?f[m]:f))return!1;return!0}}},ie.coerce=function(i,u,f,p,y){var m=t(f,p).get(),l=t(i,p),w=t(u,p),v=l.get(),A=u._template;if(void 0===v&&A&&(v=t(A,p).get(),A=0),void 0===y&&(y=m.dflt),m.arrayOk&&d(v))return w.set(v),v;var M=ie.valObjectMeta[m.valType].coerceFunction;M(v,w,y,m);var k=w.get();return A&&k===y&&!s(v,m)&&(M(v=t(A,p).get(),w,y,m),k=w.get()),k},ie.coerce2=function(i,u,f,p,y){var m=t(i,p),l=ie.coerce(i,u,f,p,y);return null!=m.get()&&l},ie.coerceFont=function(i,u,f){var p={};return p.family=i(u+".family",(f=f||{}).family),p.size=i(u+".size",f.size),p.color=i(u+".color",f.color),p},ie.coercePattern=function(i,u,f,p){if(i(u+".shape")){i(u+".solidity"),i(u+".size");var y="overlay"===i(u+".fillmode");if(!p){var m=i(u+".bgcolor",y?f:void 0);i(u+".fgcolor",y?e.contrast(m):f)}i(u+".fgopacity",y?.5:1)}},ie.coerceHoverinfo=function(i,u,f){var p,y=u._module.attributes,m=y.hoverinfo?y:T,l=m.hoverinfo;if(1===f._dataLength){var w="all"===l.dflt?l.flags.slice():l.dflt.split("+");w.splice(w.indexOf("name"),1),p=w.join("+")}return ie.coerce(i,u,m,"hoverinfo",p)},ie.coerceSelectionMarkerOpacity=function(i,u){if(i.marker){var f,p,y=i.marker.opacity;void 0!==y&&(d(y)||i.selected||i.unselected||(f=y,p=r*y),u("selected.marker.opacity",f),u("unselected.marker.opacity",p))}},ie.validate=s},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(_,ae,ie){"use strict";var g,x,T=_("d3-time-format").timeFormat,b=_("fast-isnumeric"),e=_("./loggers"),r=_("./mod").mod,t=_("../constants/numerical"),a=t.BADNUM,n=t.ONEDAY,d=t.ONEHOUR,s=t.ONEMIN,i=t.ONESEC,u=t.EPOCHJD,f=_("../registry"),p=_("d3-time-format").utcFormat,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,l=(new Date).getFullYear()-70;function w(B){return B&&f.componentsRegistry.calendars&&"string"==typeof B&&"gregorian"!==B}function v(B,V){return String(B+Math.pow(10,V)).substr(1)}ie.dateTick0=function(B,V){var ee,Q,Z=(Q=!!V,w(ee=B)?Q?f.getComponentMethod("calendars","CANONICAL_SUNDAY")[ee]:f.getComponentMethod("calendars","CANONICAL_TICK")[ee]:Q?"2000-01-02":"2000-01-01");if(V<2)return Z;var Y=ie.dateTime2ms(Z,B);return ie.ms2DateTime(Y+=n*(V-1),0,B)},ie.dfltRange=function(B){return w(B)?f.getComponentMethod("calendars","DFLTRANGE")[B]:["2000-01-01","2001-01-01"]},ie.isJSDate=function(B){return"object"==typeof B&&null!==B&&"function"==typeof B.getTime},ie.dateTime2ms=function(B,V){if(ie.isJSDate(B)){var Z=B.getTimezoneOffset()*s,Y=(B.getUTCMinutes()-B.getMinutes())*s+(B.getUTCSeconds()-B.getSeconds())*i+(B.getUTCMilliseconds()-B.getMilliseconds());if(Y){var ee=3*s;Z=Z-ee/2+r(Y-Z+ee/2,ee)}return(B=Number(B)-Z)>=g&&B<=x?B:a}if("string"!=typeof B&&"number"!=typeof B)return a;B=String(B);var Q=w(V),$=B.charAt(0);!Q||"G"!==$&&"g"!==$||(B=B.substr(1),V="");var K=Q&&"chinese"===V.substr(0,7),oe=B.match(K?m:y);if(!oe)return a;var j=oe[1],H=oe[3]||"1",G=Number(oe[5]||1),re=Number(oe[7]||0),q=Number(oe[9]||0),te=Number(oe[11]||0);if(Q){if(2===j.length)return a;var ne;j=Number(j);try{var le=f.getComponentMethod("calendars","getCal")(V);if(K){var ue="i"===H.charAt(H.length-1);H=parseInt(H,10),ne=le.newDate(j,le.toMonthIndex(j,H,ue),G)}else ne=le.newDate(j,Number(H),G)}catch(he){return a}return ne?(ne.toJD()-u)*n+re*d+q*s+te*i:a}j=2===j.length?(Number(j)+2e3-l)%100+l:Number(j),H-=1;var de=new Date(Date.UTC(2e3,H,G,re,q));return de.setUTCFullYear(j),de.getUTCMonth()!==H||de.getUTCDate()!==G?a:de.getTime()+te*i},g=ie.MIN_MS=ie.dateTime2ms("-9999"),x=ie.MAX_MS=ie.dateTime2ms("9999-12-31 23:59:59.9999"),ie.isDateTime=function(B,V){return ie.dateTime2ms(B,V)!==a};var A=90*n,M=3*d,k=5*s;function E(B,V,Z,Y,ee){if((V||Z||Y||ee)&&(B+=" "+v(V,2)+":"+v(Z,2),(Y||ee)&&(B+=":"+v(Y,2),ee))){for(var Q=4;ee%10==0;)Q-=1,ee/=10;B+="."+v(ee,Q)}return B}ie.ms2DateTime=function(B,V,Z){if("number"!=typeof B||!(B>=g&&B<=x))return a;V||(V=0);var Y,ee,Q,$,K,oe,j=Math.floor(10*r(B+.05,1)),H=Math.round(B-j/10);if(w(Z)){var G=Math.floor(H/n)+u,re=Math.floor(r(B,n));try{Y=f.getComponentMethod("calendars","getCal")(Z).fromJD(G).formatDate("yyyy-mm-dd")}catch(q){Y=p("G%Y-%m-%d")(new Date(H))}if("-"===Y.charAt(0))for(;Y.length<11;)Y="-0"+Y.substr(1);else for(;Y.length<10;)Y="0"+Y;ee=V<A?Math.floor(re/d):0,Q=V<A?Math.floor(re%d/s):0,$=V<M?Math.floor(re%s/i):0,K=V<k?re%i*10+j:0}else oe=new Date(H),Y=p("%Y-%m-%d")(oe),ee=V<A?oe.getUTCHours():0,Q=V<A?oe.getUTCMinutes():0,$=V<M?oe.getUTCSeconds():0,K=V<k?10*oe.getUTCMilliseconds()+j:0;return E(Y,ee,Q,$,K)},ie.ms2DateTimeLocal=function(B){if(!(B>=g+n&&B<=x-n))return a;var V=Math.floor(10*r(B+.05,1)),Z=new Date(Math.round(B-V/10));return E(T("%Y-%m-%d")(Z),Z.getHours(),Z.getMinutes(),Z.getSeconds(),10*Z.getUTCMilliseconds()+V)},ie.cleanDate=function(B,V,Z){if(B===a)return V;if(ie.isJSDate(B)||"number"==typeof B&&isFinite(B)){if(w(Z))return e.error("JS Dates and milliseconds are incompatible with world calendars",B),V;if(!(B=ie.ms2DateTimeLocal(+B))&&void 0!==V)return V}else if(!ie.isDateTime(B,Z))return e.error("unrecognized date",B),V;return B};var P=/%\d?f/g,S=/%h/g,F={1:"1",2:"1",3:"2",4:"2"};function R(B,V,Z,Y){B=B.replace(P,function(Q){var $=Math.min(+Q.charAt(1)||6,6);return(V/1e3%1+2).toFixed($).substr(2).replace(/0+$/,"")||"0"});var ee=new Date(Math.floor(V+.05));if(B=B.replace(S,function(){return F[Z("%q")(ee)]}),w(Y))try{B=f.getComponentMethod("calendars","worldCalFmt")(B,V,Y)}catch(Q){return"Invalid"}return Z(B)(ee)}var D=[59,59.9,59.99,59.999,59.9999];ie.formatDate=function(B,V,Z,Y,ee,Q){if(ee=w(ee)&&ee,!V)if("y"===Z)V=Q.year;else if("m"===Z)V=Q.month;else{if("d"!==Z)return function($,K){var oe=r($+.05,n),j=v(Math.floor(oe/d),2)+":"+v(r(Math.floor(oe/s),60),2);if("M"!==K){b(K)||(K=0);var H=(100+Math.min(r($/i,60),D[K])).toFixed(K).substr(1);K>0&&(H=H.replace(/0+$/,"").replace(/[\.]$/,"")),j+=":"+H}return j}(B,Z)+"\n"+R(Q.dayMonthYear,B,Y,ee);V=Q.dayMonth+"\n"+Q.year}return R(V,B,Y,ee)};var L=3*n;ie.incrementMonth=function(B,V,Z){Z=w(Z)&&Z;var Y=r(B,n);if(B=Math.round(B-Y),Z)try{var ee=Math.round(B/n)+u,Q=f.getComponentMethod("calendars","getCal")(Z),$=Q.fromJD(ee);return V%12?Q.add($,V,"m"):Q.add($,V/12,"y"),($.toJD()-u)*n+Y}catch(oe){e.error("invalid ms "+B+" in calendar "+Z)}var K=new Date(B+L);return K.setUTCMonth(K.getUTCMonth()+V)+Y-L},ie.findExactDates=function(B,V){for(var Z,Y,ee=0,Q=0,$=0,K=0,oe=w(V)&&f.getComponentMethod("calendars","getCal")(V),j=0;j<B.length;j++)if(b(Y=B[j])){if(!(Y%n))if(oe)try{1===(Z=oe.fromJD(Y/n+u)).day()?1===Z.month()?ee++:Q++:$++}catch(G){}else 1===(Z=new Date(Y)).getUTCDate()?0===Z.getUTCMonth()?ee++:Q++:$++}else K++;$+=Q+=ee;var H=B.length-K;return{exactYears:ee/H,exactMonths:Q/H,exactDays:$/H}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("./loggers"),T=_("./matrix"),b=_("gl-mat4");function e(d){var s=d&&d.parentNode;s&&s.removeChild(d)}function r(d,s,i){var u="plotly.js-style-"+d,f=document.getElementById(u);f||((f=document.createElement("style")).setAttribute("id",u),f.appendChild(document.createTextNode("")),document.head.appendChild(f));var p=f.sheet;p.insertRule?p.insertRule(s+"{"+i+"}",0):p.addRule?p.addRule(s,i,0):x.warn("addStyleRule failed")}function t(d){var s=window.getComputedStyle(d,null),i=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("-moz-transform")||s.getPropertyValue("-ms-transform")||s.getPropertyValue("-o-transform")||s.getPropertyValue("transform");return"none"===i?null:i.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(u){return+u})}function a(d){for(var s=[];n(d);)s.push(d),d=d.parentNode;return s}function n(d){return d&&(d instanceof Element||d instanceof HTMLElement)}ae.exports={getGraphDiv:function(d){var s;if("string"==typeof d){if(null===(s=document.getElementById(d)))throw new Error("No DOM element with id '"+d+"' exists on the page.");return s}if(null==d)throw new Error("DOM element provided is null or undefined");return d},isPlotDiv:function(d){var s=g.select(d);return s.node()instanceof HTMLElement&&s.size()&&s.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(d,s){r("global",d,s)},addRelatedStyleRule:r,deleteRelatedStyleRule:function(d){var i=document.getElementById("plotly.js-style-"+d);i&&e(i)},getFullTransformMatrix:function(d){var s=a(d),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return s.forEach(function(u){var f=t(u);if(f){var p=T.convertCssMatrix(f);i=b.multiply(i,i,p)}}),i},getElementTransformMatrix:t,getElementAndAncestors:a,equalDomRects:function(d,s){return d&&s&&d.x===s.x&&d.y===s.y&&d.top===s.top&&d.left===s.left&&d.right===s.right&&d.bottom===s.bottom}}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(_,ae,ie){"use strict";var g=_("events").EventEmitter;ae.exports={init:function(T){if(T._ev instanceof g)return T;var b=new g,e=new g;return T._ev=b,T._internalEv=e,T.on=b.on.bind(b),T.once=b.once.bind(b),T.removeListener=b.removeListener.bind(b),T.removeAllListeners=b.removeAllListeners.bind(b),T._internalOn=e.on.bind(e),T._internalOnce=e.once.bind(e),T._removeInternalListener=e.removeListener.bind(e),T._removeAllInternalListeners=e.removeAllListeners.bind(e),T.emit=function(r,t){"undefined"!=typeof jQuery&&jQuery(T).trigger(r,t),b.emit(r,t),e.emit(r,t)},T},triggerHandler:function(T,b,e){var r,t;"undefined"!=typeof jQuery&&(r=jQuery(T).triggerHandler(b,e));var a=T._ev;if(!a)return r;var n,d=a._events[b];if(!d)return r;function s(i){return i.listener?(a.removeListener(b,i.listener),i.fired?void 0:(i.fired=!0,i.listener.apply(a,[e]))):i.apply(a,[e])}for(d=Array.isArray(d)?d:[d],n=0;n<d.length-1;n++)s(d[n]);return t=s(d[n]),void 0!==r?r:t},purge:function(T){return delete T._ev,delete T.on,delete T.once,delete T.removeListener,delete T.removeAllListeners,delete T.emit,delete T._ev,delete T._internalEv,delete T._internalOn,delete T._internalOnce,delete T._removeInternalListener,delete T._removeAllInternalListeners,T}}},{events:84}],493:[function(_,ae,ie){"use strict";var g=_("./is_plain_object.js"),x=Array.isArray;function T(b,e,r,t){var a,n,d,s,i,u,f=b[0],p=b.length;if(2===p&&x(f)&&x(b[1])&&0===f.length){if(function(m,l){var w,v;for(w=0;w<m.length;w++){if(null!==(v=m[w])&&"object"==typeof v)return!1;void 0!==v&&(l[w]=v)}return!0}(b[1],f))return f;f.splice(0,f.length)}for(var y=1;y<p;y++)for(n in a=b[y])d=f[n],s=a[n],t&&x(s)?f[n]=s:e&&s&&(g(s)||(i=x(s)))?(i?(i=!1,u=d&&x(d)?d:[]):u=d&&g(d)?d:{},f[n]=T([u,s],e,r,t)):(void 0!==s||r)&&(f[n]=s);return f}ie.extendFlat=function(){return T(arguments,!1,!1,!1)},ie.extendDeep=function(){return T(arguments,!0,!1,!1)},ie.extendDeepAll=function(){return T(arguments,!0,!0,!1)},ie.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)}},{"./is_plain_object.js":504}],494:[function(_,ae,ie){"use strict";ae.exports=function(g){for(var x={},T=[],b=0,e=0;e<g.length;e++){var r=g[e];1!==x[r]&&(x[r]=1,T[b++]=r)}return T}},{}],495:[function(_,ae,ie){"use strict";function g(T){return!0===T.visible}function x(T){var b=T[0].trace;return!0===b.visible&&0!==b._length}ae.exports=function(T){for(var b,e=(b=T,Array.isArray(b)&&Array.isArray(b[0])&&b[0][0]&&b[0][0].trace?x:g),r=[],t=0;t<T.length;t++){var a=T[t];e(a)&&r.push(a)}return r}},{}],496:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("country-regex"),T=_("@turf/area"),b=_("@turf/centroid"),e=_("@turf/bbox"),r=_("./identity"),t=_("./loggers"),a=_("./is_plain_object"),n=_("./nested_property"),d=_("./polygon"),s=Object.keys(x),i={"ISO-3":r,"USA-states":r,"country names":function(f){for(var p=0;p<s.length;p++){var y=s[p];if(new RegExp(x[y]).test(f.trim().toLowerCase()))return y}return t.log("Unrecognized country name: "+f+"."),!1}};function u(f){var p=f.geojson,y=window.PlotlyGeoAssets||{},m="string"==typeof p?y[p]:p;return a(m)?m:(t.error("Oops ... something went wrong when fetching "+p),!1)}ae.exports={locationToFeature:function(f,p,y){if(!p||"string"!=typeof p)return!1;var m,l,w,v=i[f](p);if(v){if("USA-states"===f)for(m=[],w=0;w<y.length;w++)(l=y[w]).properties&&l.properties.gu&&"USA"===l.properties.gu&&m.push(l);else m=y;for(w=0;w<m.length;w++)if((l=m[w]).id===v)return l;t.log(["Location with id",v,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(f){var p,y,m,l,w=f.geometry,v=w.coordinates,A=f.id,M=[];function k(E){for(var P=0;P<E.length-1;P++)if(E[P][0]>0&&E[P+1][0]<0)return P;return null}switch(p="RUS"===A||"FJI"===A?function(E){var P;if(null===k(E))P=E;else for(P=new Array(E.length),l=0;l<E.length;l++)P[l]=[E[l][0]<0?E[l][0]+360:E[l][0],E[l][1]];M.push(d.tester(P))}:"ATA"===A?function(E){var P=k(E);if(null===P)return M.push(d.tester(E));var S=new Array(E.length+1),F=0;for(l=0;l<E.length;l++)l>P?S[F++]=[E[l][0]+360,E[l][1]]:l===P?(S[F++]=E[l],S[F++]=[E[l][0],-90]):S[F++]=E[l];var R=d.tester(S);R.pts.pop(),M.push(R)}:function(E){M.push(d.tester(E))},w.type){case"MultiPolygon":for(y=0;y<v.length;y++)for(m=0;m<v[y].length;m++)p(v[y][m]);break;case"Polygon":for(y=0;y<v.length;y++)p(v[y])}return M},getTraceGeojson:u,extractTraceFeature:function(f){var p=f[0].trace,y=u(p);if(!y)return!1;var m,l={},w=[];for(m=0;m<p._length;m++){var v=f[m];(v.loc||0===v.loc)&&(l[v.loc]=v)}function A(E){var P=n(E,p.featureidkey||"id").get(),S=l[P];if(S){var F=E.geometry;if("Polygon"===F.type||"MultiPolygon"===F.type){var R={type:"Feature",id:P,geometry:F,properties:{}};R.properties.ct=function(D){var L,B=D.geometry;if("MultiPolygon"===B.type)for(var V=B.coordinates,Z=0,Y=0;Y<V.length;Y++){var ee={type:"Polygon",coordinates:V[Y]},Q=T.default(ee);Q>Z&&(Z=Q,L=ee)}else L=B;return b.default(L).geometry.coordinates}(R),S.fIn=E,S.fOut=R,w.push(R)}else t.log(["Location",S.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete l[P]}switch(y.type){case"FeatureCollection":var M=y.features;for(m=0;m<M.length;m++)A(M[m]);break;case"Feature":A(y);break;default:return t.warn(["Invalid GeoJSON type",(y.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var k in l)t.log(["Location *"+k+"*","does not have a matching feature with id-key","*"+p.featureidkey+"*."].join(" "));return w},fetchTraceGeoData:function(f){var p=window.PlotlyGeoAssets||{},y=[];function m(A){return new Promise(function(M,k){g.json(A,function(E,P){return E?(delete p[A],k(new Error(404===E.status?'GeoJSON at URL "'+A+'" does not exist.':"Unexpected error while fetching from "+A))):(p[A]=P,M(P))})})}function l(A){return new Promise(function(M,k){var E=0,P=setInterval(function(){return p[A]&&"pending"!==p[A]?(clearInterval(P),M(p[A])):E>100?(clearInterval(P),k("Unexpected error while fetching from "+A)):void E++},50)})}for(var w=0;w<f.length;w++){var v=f[w][0].trace.geojson;"string"==typeof v&&(p[v]?"pending"===p[v]&&y.push(l(v)):(p[v]="pending",y.push(m(v))))}return y},computeBbox:function(f){return e.default(f)}}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(_,ae,ie){"use strict";var g=_("../constants/numerical").BADNUM;ie.calcTraceToLineCoords=function(x){for(var T=x[0].trace.connectgaps,b=[],e=[],r=0;r<x.length;r++){var t=x[r].lonlat;t[0]!==g?e.push(t):!T&&e.length>0&&(b.push(e),e=[])}return e.length>0&&b.push(e),b},ie.makeLine=function(x){return 1===x.length?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x}},ie.makePolygon=function(x){if(1===x.length)return{type:"Polygon",coordinates:x};for(var T=new Array(x.length),b=0;b<x.length;b++)T[b]=[x[b]];return{type:"MultiPolygon",coordinates:T}},ie.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(_,ae,ie){"use strict";var g,x,T,b=_("./mod").mod;function e(t,a,n,d,s,i,u,f){var p=n-t,y=s-t,m=u-s,l=d-a,w=i-a,v=f-i,A=p*v-m*l;if(0===A)return null;var M=(y*v-m*w)/A,k=(y*l-p*w)/A;return k<0||k>1||M<0||M>1?null:{x:t+p*M,y:a+l*M}}function r(t,a,n,d,s){var i=d*t+s*a;if(i<0)return d*d+s*s;if(i>n){var u=d-t,f=s-a;return u*u+f*f}var p=d*a-s*t;return p*p/n}ie.segmentsIntersect=e,ie.segmentDistance=function(t,a,n,d,s,i,u,f){if(e(t,a,n,d,s,i,u,f))return 0;var p=n-t,y=d-a,m=u-s,l=f-i,w=p*p+y*y,v=m*m+l*l,A=Math.min(r(p,y,w,s-t,i-a),r(p,y,w,u-t,f-a),r(m,l,v,t-s,a-i),r(m,l,v,n-s,d-i));return Math.sqrt(A)},ie.getTextLocation=function(t,a,n,d){if(t===x&&d===T||(g={},x=t,T=d),g[n])return g[n];var s=t.getPointAtLength(b(n-d/2,a)),i=t.getPointAtLength(b(n+d/2,a)),u=Math.atan((i.y-s.y)/(i.x-s.x)),f=t.getPointAtLength(b(n,a)),p={x:(4*f.x+s.x+i.x)/6,y:(4*f.y+s.y+i.y)/6,theta:u};return g[n]=p,p},ie.clearLocationCache=function(){x=null},ie.getVisibleSegment=function(t,a,n){var d,s,i=a.left,u=a.right,f=a.top,p=a.bottom,y=0,m=t.getTotalLength(),l=m;function w(A){var M=t.getPointAtLength(A);0===A?d=M:A===m&&(s=M);var k=M.x<i?i-M.x:M.x>u?M.x-u:0,E=M.y<f?f-M.y:M.y>p?M.y-p:0;return Math.sqrt(k*k+E*E)}for(var v=w(y);v;){if((y+=v+n)>l)return;v=w(y)}for(v=w(l);v;){if(y>(l-=v+n))return;v=w(l)}return{min:y,max:l,len:l-y,total:m,isClosed:0===y&&l===m&&Math.abs(d.x-s.x)<.1&&Math.abs(d.y-s.y)<.1}},ie.findPointOnPath=function(t,a,n,d){for(var s,i,u,f=(d=d||{}).pathLength||t.getTotalLength(),p=d.tolerance||.001,y=d.iterationLimit||30,m=t.getPointAtLength(0)[n]>t.getPointAtLength(f)[n]?-1:1,l=0,w=0,v=f;l<y;){if(u=(i=t.getPointAtLength(s=(w+v)/2))[n]-a,Math.abs(u)<p)return i;m*u>0?v=s:w=s,l++}return i}},{"./mod":510}],499:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("tinycolor2"),T=_("color-normalize"),b=_("../components/colorscale"),e=_("../components/color/attributes").defaultLine,r=_("./array").isArrayOrTypedArray,t=T(e);function a(s,i){var u=s;return u[3]*=i,u}function n(s){if(g(s))return t;var i=T(s);return i.length?i:t}function d(s){return g(s)?s:1}ae.exports={formatColor:function(s,i,u){var f,p,y,m,l,w=s.color,v=r(w),A=r(i),M=b.extractOpts(s),k=[];if(f=void 0!==M.colorscale?b.makeColorScaleFuncFromTrace(s):n,p=v?function(P,S){return void 0===P[S]?t:T(f(P[S]))}:n,y=A?function(P,S){return void 0===P[S]?1:d(P[S])}:d,v||A)for(var E=0;E<u;E++)m=p(w,E),l=y(i,E),k[E]=a(m,l);else k=a(T(w),i);return k},parseColorScale:function(s){var i=b.extractOpts(s),u=i.colorscale;return i.reversescale&&(u=b.flipScale(i.colorscale)),u.map(function(f){var p=f[0],y=x(f[1]).toRgb();return{index:p,rgb:[y.r,y.g,y.b,y.a]}})}}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(_,ae,ie){"use strict";var g=_("./identity");function x(T){return[T]}ae.exports={keyFun:function(T){return T.key},repeat:x,descend:g,wrap:x,unwrap:function(T){return T[0]}}},{"./identity":501}],501:[function(_,ae,ie){"use strict";ae.exports=function(g){return g}},{}],502:[function(_,ae,ie){"use strict";ae.exports=function(g,x){if(!x)return g;var T=1/Math.abs(x),b=T>1?(T*g+T*x)/T:g+x,e=String(b).length;if(e>16){var r=String(x).length;if(e>=String(g).length+r){var t=parseFloat(b).toPrecision(12);-1===t.indexOf("e+")&&(b=+t)}}return b}},{}],503:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("d3-time-format").utcFormat,T=_("d3-format").format,b=_("fast-isnumeric"),e=_("../constants/numerical"),r=e.FP_SAFE,t=-r,a=e.BADNUM,n=ae.exports={};n.adjustFormat=function(j){return!j||/^\d[.]\df/.test(j)||/[.]\d%/.test(j)?j:"0.f"===j?"~f":/^\d%/.test(j)?"~%":/^\ds/.test(j)?"~s":!/^[~,.0$]/.test(j)&&/[&fps]/.test(j)?"~"+j:j};var d={};n.warnBadFormat=function(j){var H=String(j);d[H]||(d[H]=1,n.warn('encountered bad format: "'+H+'"'))},n.noFormat=function(j){return String(j)},n.numberFormat=function(j){var H;try{H=T(n.adjustFormat(j))}catch(G){return n.warnBadFormat(j),n.noFormat}return H},n.nestedProperty=_("./nested_property"),n.keyedContainer=_("./keyed_container"),n.relativeAttr=_("./relative_attr"),n.isPlainObject=_("./is_plain_object"),n.toLogRange=_("./to_log_range"),n.relinkPrivateKeys=_("./relink_private");var s=_("./array");n.isTypedArray=s.isTypedArray,n.isArrayOrTypedArray=s.isArrayOrTypedArray,n.isArray1D=s.isArray1D,n.ensureArray=s.ensureArray,n.concat=s.concat,n.maxRowLength=s.maxRowLength,n.minRowLength=s.minRowLength;var i=_("./mod");n.mod=i.mod,n.modHalf=i.modHalf;var u=_("./coerce");n.valObjectMeta=u.valObjectMeta,n.coerce=u.coerce,n.coerce2=u.coerce2,n.coerceFont=u.coerceFont,n.coercePattern=u.coercePattern,n.coerceHoverinfo=u.coerceHoverinfo,n.coerceSelectionMarkerOpacity=u.coerceSelectionMarkerOpacity,n.validate=u.validate;var f=_("./dates");n.dateTime2ms=f.dateTime2ms,n.isDateTime=f.isDateTime,n.ms2DateTime=f.ms2DateTime,n.ms2DateTimeLocal=f.ms2DateTimeLocal,n.cleanDate=f.cleanDate,n.isJSDate=f.isJSDate,n.formatDate=f.formatDate,n.incrementMonth=f.incrementMonth,n.dateTick0=f.dateTick0,n.dfltRange=f.dfltRange,n.findExactDates=f.findExactDates,n.MIN_MS=f.MIN_MS,n.MAX_MS=f.MAX_MS;var p=_("./search");n.findBin=p.findBin,n.sorterAsc=p.sorterAsc,n.sorterDes=p.sorterDes,n.distinctVals=p.distinctVals,n.roundUp=p.roundUp,n.sort=p.sort,n.findIndexOfMin=p.findIndexOfMin,n.sortObjectKeys=_("./sort_object_keys");var y=_("./stats");n.aggNums=y.aggNums,n.len=y.len,n.mean=y.mean,n.median=y.median,n.midRange=y.midRange,n.variance=y.variance,n.stdev=y.stdev,n.interp=y.interp;var m=_("./matrix");n.init2dArray=m.init2dArray,n.transposeRagged=m.transposeRagged,n.dot=m.dot,n.translationMatrix=m.translationMatrix,n.rotationMatrix=m.rotationMatrix,n.rotationXYMatrix=m.rotationXYMatrix,n.apply3DTransform=m.apply3DTransform,n.apply2DTransform=m.apply2DTransform,n.apply2DTransform2=m.apply2DTransform2,n.convertCssMatrix=m.convertCssMatrix,n.inverseTransformMatrix=m.inverseTransformMatrix;var l=_("./angles");n.deg2rad=l.deg2rad,n.rad2deg=l.rad2deg,n.angleDelta=l.angleDelta,n.angleDist=l.angleDist,n.isFullCircle=l.isFullCircle,n.isAngleInsideSector=l.isAngleInsideSector,n.isPtInsideSector=l.isPtInsideSector,n.pathArc=l.pathArc,n.pathSector=l.pathSector,n.pathAnnulus=l.pathAnnulus;var w=_("./anchor_utils");n.isLeftAnchor=w.isLeftAnchor,n.isCenterAnchor=w.isCenterAnchor,n.isRightAnchor=w.isRightAnchor,n.isTopAnchor=w.isTopAnchor,n.isMiddleAnchor=w.isMiddleAnchor,n.isBottomAnchor=w.isBottomAnchor;var v=_("./geometry2d");n.segmentsIntersect=v.segmentsIntersect,n.segmentDistance=v.segmentDistance,n.getTextLocation=v.getTextLocation,n.clearLocationCache=v.clearLocationCache,n.getVisibleSegment=v.getVisibleSegment,n.findPointOnPath=v.findPointOnPath;var A=_("./extend");n.extendFlat=A.extendFlat,n.extendDeep=A.extendDeep,n.extendDeepAll=A.extendDeepAll,n.extendDeepNoArrays=A.extendDeepNoArrays;var M=_("./loggers");n.log=M.log,n.warn=M.warn,n.error=M.error;var k=_("./regex");n.counterRegex=k.counter;var E=_("./throttle");n.throttle=E.throttle,n.throttleDone=E.done,n.clearThrottle=E.clear;var P=_("./dom");function S(j){var H={};for(var G in j)for(var re=j[G],q=0;q<re.length;q++)H[re[q]]=+G;return H}n.getGraphDiv=P.getGraphDiv,n.isPlotDiv=P.isPlotDiv,n.removeElement=P.removeElement,n.addStyleRule=P.addStyleRule,n.addRelatedStyleRule=P.addRelatedStyleRule,n.deleteRelatedStyleRule=P.deleteRelatedStyleRule,n.getFullTransformMatrix=P.getFullTransformMatrix,n.getElementTransformMatrix=P.getElementTransformMatrix,n.getElementAndAncestors=P.getElementAndAncestors,n.equalDomRects=P.equalDomRects,n.clearResponsive=_("./clear_responsive"),n.preserveDrawingBuffer=_("./preserve_drawing_buffer"),n.makeTraceGroups=_("./make_trace_groups"),n._=_("./localize"),n.notifier=_("./notifier"),n.filterUnique=_("./filter_unique"),n.filterVisible=_("./filter_visible"),n.pushUnique=_("./push_unique"),n.increment=_("./increment"),n.cleanNumber=_("./clean_number"),n.ensureNumber=function(j){return b(j)?(j=Number(j))>r||j<t?a:j:a},n.isIndex=function(j,H){return!(void 0!==H&&j>=H)&&b(j)&&j>=0&&j%1==0},n.noop=_("./noop"),n.identity=_("./identity"),n.repeat=function(j,H){for(var G=new Array(H),re=0;re<H;re++)G[re]=j;return G},n.swapAttrs=function(j,H,G,re){G||(G="x"),re||(re="y");for(var q=0;q<H.length;q++){var te=H[q],ne=n.nestedProperty(j,te.replace("?",G)),le=n.nestedProperty(j,te.replace("?",re)),ue=ne.get();ne.set(le.get()),le.set(ue)}},n.raiseToTop=function(j){j.parentNode.appendChild(j)},n.cancelTransition=function(j){return j.transition().duration(0)},n.constrain=function(j,H,G){return H>G?Math.max(G,Math.min(H,j)):Math.max(H,Math.min(G,j))},n.bBoxIntersect=function(j,H,G){return j.left<=H.right+(G=G||0)&&H.left<=j.right+G&&j.top<=H.bottom+G&&H.top<=j.bottom+G},n.simpleMap=function(j,H,G,re,q){for(var te=j.length,ne=new Array(te),le=0;le<te;le++)ne[le]=H(j[le],G,re,q);return ne},n.randstr=function j(H,G,re,q){if(re||(re=16),void 0===G&&(G=24),G<=0)return"0";var te,ne,le=Math.log(Math.pow(2,G))/Math.log(re),ue="";for(te=2;le===1/0;te*=2)le=Math.log(Math.pow(2,G/te))/Math.log(re)*te;var de=le-Math.floor(le);for(te=0;te<Math.floor(le);te++)ue=Math.floor(Math.random()*re).toString(re)+ue;de&&(ne=Math.pow(re,de),ue=Math.floor(Math.random()*ne).toString(re)+ue);var he=parseInt(ue,re);return H&&H[ue]||he!==1/0&&he>=Math.pow(2,G)?q>10?(n.warn("randstr failed uniqueness"),ue):j(H,G,re,(q||0)+1):ue},n.OptionControl=function(j,H){j||(j={}),H||(H="opt");var G={optionList:[],_newoption:function(re){re[H]=j,G[re.name]=re,G.optionList.push(re)}};return G["_"+H]=j,G},n.smooth=function(j,H){if((H=Math.round(H)||0)<2)return j;var G,re,q,te,ne=j.length,le=2*ne,ue=2*H-1,de=new Array(ue),he=new Array(ne);for(G=0;G<ue;G++)de[G]=(1-Math.cos(Math.PI*(G+1)/H))/(2*H);for(G=0;G<ne;G++){for(te=0,re=0;re<ue;re++)(q=G+re+1-H)<-ne?q-=le*Math.round(q/le):q>=le&&(q-=le*Math.floor(q/le)),q<0?q=-1-q:q>=ne&&(q=le-1-q),te+=j[q]*de[re];he[G]=te}return he},n.syncOrAsync=function(j,H,G){var re;function q(){return n.syncOrAsync(j,H,G)}for(;j.length;)if((re=(0,j.splice(0,1)[0])(H))&&re.then)return re.then(q);return G&&G(H)},n.stripTrailingSlash=function(j){return"/"===j.substr(-1)?j.substr(0,j.length-1):j},n.noneOrAll=function(j,H,G){if(j){var re,q=!1,te=!0;for(re=0;re<G.length;re++)null!=j[G[re]]?q=!0:te=!1;if(q&&!te)for(re=0;re<G.length;re++)j[G[re]]=H[G[re]]}},n.mergeArray=function(j,H,G,re){var q="function"==typeof re;if(n.isArrayOrTypedArray(j))for(var te=Math.min(j.length,H.length),ne=0;ne<te;ne++){var le=j[ne];H[ne][G]=q?re(le):le}},n.mergeArrayCastPositive=function(j,H,G){return n.mergeArray(j,H,G,function(re){var q=+re;return isFinite(q)&&q>0?q:0})},n.fillArray=function(j,H,G,re){if(re=re||n.identity,n.isArrayOrTypedArray(j))for(var q=0;q<H.length;q++)H[q][G]=re(j[q])},n.castOption=function(j,H,G,re){re=re||n.identity;var q=n.nestedProperty(j,G).get();return n.isArrayOrTypedArray(q)?Array.isArray(H)&&n.isArrayOrTypedArray(q[H[0]])?re(q[H[0]][H[1]]):re(q[H]):q},n.extractOption=function(j,H,G,re){if(G in j)return j[G];var q=n.nestedProperty(H,re).get();return Array.isArray(q)?void 0:q},n.tagSelected=function(j,H,G){var re,q,te=H.selectedpoints,ne=H._indexToPoints;ne&&(re=S(ne));for(var le=0;le<te.length;le++){var ue=te[le];if(n.isIndex(ue)||n.isArrayOrTypedArray(ue)&&n.isIndex(ue[0])&&n.isIndex(ue[1])){var de=re?re[ue]:ue,he=G?G[de]:de;void 0!==(q=he)&&q<j.length&&(j[he].selected=1)}}},n.selIndices2selPoints=function(j){var H=j.selectedpoints,G=j._indexToPoints;if(G){for(var re=S(G),q=[],te=0;te<H.length;te++){var ne=H[te];if(n.isIndex(ne)){var le=re[ne];n.isIndex(le)&&q.push(le)}}return q}return H},n.getTargetArray=function(j,H){var G=H.target;if("string"==typeof G&&G){var re=n.nestedProperty(j,G).get();return!!Array.isArray(re)&&re}return!!Array.isArray(G)&&G},n.minExtend=function(j,H){var G={};"object"!=typeof H&&(H={});var re,q,te,ne=Object.keys(j);for(re=0;re<ne.length;re++)te=j[q=ne[re]],"_"!==q.charAt(0)&&"function"!=typeof te&&(G[q]="module"===q?te:Array.isArray(te)?"colorscale"===q?te.slice():te.slice(0,3):n.isTypedArray(te)?te.subarray(0,3):te&&"object"==typeof te?n.minExtend(j[q],H[q]):te);for(ne=Object.keys(H),re=0;re<ne.length;re++)"object"==typeof(te=H[q=ne[re]])&&q in G&&"object"==typeof G[q]||(G[q]=te);return G},n.titleCase=function(j){return j.charAt(0).toUpperCase()+j.substr(1)},n.containsAny=function(j,H){for(var G=0;G<H.length;G++)if(-1!==j.indexOf(H[G]))return!0;return!1},n.isIE=function(){return void 0!==window.navigator.msSaveBlob};var F=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return F.test(window.navigator.userAgent)};var R=/iPad|iPhone|iPod/;n.isIOS=function(){return R.test(window.navigator.userAgent)};var D=/Firefox\/(\d+)\.\d+/;n.getFirefoxVersion=function(){var j=D.exec(window.navigator.userAgent);if(j&&2===j.length){var H=parseInt(j[1]);if(!isNaN(H))return H}return null},n.isD3Selection=function(j){return j instanceof g.selection},n.ensureSingle=function(j,H,G,re){var q=j.select(H+(G?"."+G:""));if(q.size())return q;var te=j.append(H);return G&&te.classed(G,!0),re&&te.call(re),te},n.ensureSingleById=function(j,H,G,re){var q=j.select(H+"#"+G);if(q.size())return q;var te=j.append(H).attr("id",G);return re&&te.call(re),te},n.objectFromPath=function(j,H){for(var G,re=j.split("."),q=G={},te=0;te<re.length;te++){var ne=re[te],le=null,ue=re[te].match(/(.*)\[([0-9]+)\]/);ue?(le=ue[2],(G=G[ne=ue[1]]=[])[le]=te===re.length-1?H:{},G=G[le]):(G[ne]=te===re.length-1?H:{},G=G[ne])}return q};var L=/^([^\[\.]+)\.(.+)?/,B=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(j){var H,G,re,q,te,ne,le;if("object"==typeof j&&!Array.isArray(j))for(G in j)j.hasOwnProperty(G)&&((H=G.match(L))?(q=j[G],re=H[1],delete j[G],j[re]=n.extendDeepNoArrays(j[re]||{},n.objectFromPath(G,n.expandObjectPaths(q))[re])):(H=G.match(B))?(q=j[G],re=H[1],te=parseInt(H[2]),delete j[G],j[re]=j[re]||[],"."===H[3]?(le=H[4],ne=j[re][te]=j[re][te]||{},n.extendDeepNoArrays(ne,n.objectFromPath(le,n.expandObjectPaths(q)))):j[re][te]=n.expandObjectPaths(q)):j[G]=n.expandObjectPaths(j[G]));return j},n.numSeparate=function(j,H,G){if(G||(G=!1),"string"!=typeof H||0===H.length)throw new Error("Separator string required for formatting!");"number"==typeof j&&(j=String(j));var re=/(\d+)(\d{3})/,q=H.charAt(0),te=H.charAt(1),ne=j.split("."),le=ne[0],ue=ne.length>1?q+ne[1]:"";if(te&&(ne.length>1||le.length>4||G))for(;re.test(le);)le=le.replace(re,"$1"+te+"$2");return le+ue},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var V=/^\w*$/;n.templateString=function(j,H){var G={};return j.replace(n.TEMPLATE_STRING_REGEX,function(re,q){var te;return V.test(q)?te=H[q]:(G[q]=G[q]||n.nestedProperty(H,q).get,te=G[q]()),n.isValidTextValue(te)?te:""})};var Z={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return Q.apply(Z,arguments)};var Y={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return Q.apply(Y,arguments)};var ee=/^[:|\|]/;function Q(j,H,G){var re=this,q=arguments;H||(H={});var te={};return j.replace(n.TEMPLATE_STRING_REGEX,function(ne,le,ue){var de,he,be,ge="_xother"===le||"_yother"===le,we="_xother_"===le||"_yother_"===le,ke="xother_"===le||"yother_"===le,De="xother"===le||"yother"===le||ge||ke||we,Ee=le;if((ge||we)&&(Ee=Ee.substring(1)),(ke||we)&&(Ee=Ee.substring(0,Ee.length-1)),De){if(void 0===(de=H[Ee]))return""}else for(be=3;be<q.length;be++)if(he=q[be]){if(he.hasOwnProperty(Ee)){de=he[Ee];break}if(V.test(Ee)||(de=n.nestedProperty(he,Ee).get(),(de=te[Ee]||n.nestedProperty(he,Ee).get())&&(te[Ee]=de)),void 0!==de)break}if(void 0===de&&re)return re.count<re.max&&(n.warn("Variable '"+Ee+"' in "+re.name+" could not be found!"),de=ne),re.count===re.max&&n.warn("Too many "+re.name+" warnings - additional warnings will be suppressed"),re.count++,ne;if(ue){var Re;if(":"===ue[0]&&(de=(Re=G?G.numberFormat:n.numberFormat)(ue.replace(ee,""))(de)),"|"===ue[0]){Re=G?G.timeFormat:x;var ve=n.dateTime2ms(de);de=n.formatDate(ve,ue.replace(ee,""),!1,Re)}}else{var Te=Ee+"Label";H.hasOwnProperty(Te)&&(de=H[Te])}return De&&(de="("+de+")",(ge||we)&&(de=" "+de),(ke||we)&&(de+=" ")),de})}n.subplotSort=function(j,H){for(var G=Math.min(j.length,H.length)+1,re=0,q=0,te=0;te<G;te++){var ne=j.charCodeAt(te)||0,le=H.charCodeAt(te)||0,ue=ne>=48&&ne<=57,de=le>=48&&le<=57;if(ue&&(re=10*re+ne-48),de&&(q=10*q+le-48),!ue||!de){if(re!==q)return re-q;if(ne!==le)return ne-le}}return q-re};var $=2e9;n.seedPseudoRandom=function(){$=2e9},n.pseudoRandom=function(){var j=$;return $=(69069*$+1)%4294967296,Math.abs($-j)<429496729?n.pseudoRandom():$/4294967296},n.fillText=function(j,H,G){var re=Array.isArray(G)?function(ne){G.push(ne)}:function(ne){G.text=ne},q=n.extractOption(j,H,"htx","hovertext");if(n.isValidTextValue(q))return re(q);var te=n.extractOption(j,H,"tx","text");return n.isValidTextValue(te)?re(te):void 0},n.isValidTextValue=function(j){return j||0===j},n.formatPercent=function(j,H){H=H||0;for(var G=(Math.round(100*j*Math.pow(10,H))*Math.pow(.1,H)).toFixed(H)+"%",re=0;re<H;re++)-1!==G.indexOf(".")&&(G=(G=G.replace("0%","%")).replace(".%","%"));return G},n.isHidden=function(j){var H=window.getComputedStyle(j).display;return!H||"none"===H},n.strTranslate=function(j,H){return j||H?"translate("+j+","+H+")":""},n.strRotate=function(j){return j?"rotate("+j+")":""},n.strScale=function(j){return 1!==j?"scale("+j+")":""},n.getTextTransform=function(j){var H=j.noCenter,G=j.textX,re=j.textY,ue=j.rotate,de=j.scale;return de?de>1&&(de=1):de=0,n.strTranslate(j.targetX-de*(G+(j.anchorX||0)),j.targetY-de*(re+(j.anchorY||0)))+n.strScale(de)+(ue?"rotate("+ue+(H?"":" "+G+" "+re)+")":"")},n.ensureUniformFontSize=function(j,H){var G=n.extendFlat({},H);return G.size=Math.max(H.size,j._fullLayout.uniformtext.minsize||0),G},n.join2=function(j,H,G){var re=j.length;return re>1?j.slice(0,-1).join(H)+G+j[re-1]:j.join(H)},n.bigFont=function(j){return Math.round(1.2*j)};var K=n.getFirefoxVersion(),oe=null!==K&&K<86;n.getPositionFromD3Event=function(){return oe?[g.event.layerX,g.event.layerY]:[g.event.offsetX,g.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(_,ae,ie){"use strict";ae.exports=function(g){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(g):"[object Object]"===Object.prototype.toString.call(g)&&Object.getPrototypeOf(g).hasOwnProperty("hasOwnProperty")}},{}],505:[function(_,ae,ie){"use strict";var g=_("./nested_property"),x=/^\w*$/;ae.exports=function(T,b,e,r){var t,a,n;e=e||"name",r=r||"value";var d={};b&&b.length?(n=g(T,b),a=n.get()):a=T,b=b||"";var s={};if(a)for(t=0;t<a.length;t++)s[a[t][e]]=t;var i=x.test(r),u={set:function(f,p){var y=null===p?4:0;if(!a){if(!n||4===y)return;n.set(a=[])}var m=s[f];if(void 0===m){if(4===y)return;y|=3,s[f]=m=a.length}else p!==(i?a[m][r]:g(a[m],r).get())&&(y|=2);var l=a[m]=a[m]||{};return l[e]=f,i?l[r]=p:g(l,r).set(p),null!==p&&(y&=-5),d[m]=d[m]|y,u},get:function(f){if(a){var p=s[f];return void 0===p?void 0:i?a[p][r]:g(a[p],r).get()}},rename:function(f,p){var y=s[f];return void 0===y||(d[y]=1|d[y],s[p]=y,delete s[f],a[y][e]=p),u},remove:function(f){var p=s[f];if(void 0===p)return u;var y=a[p];if(Object.keys(y).length>2)return d[p]=2|d[p],u.set(f,null);if(i){for(t=p;t<a.length;t++)d[t]=3|d[t];for(t=p;t<a.length;t++)s[a[t][e]]--;a.splice(p,1),delete s[f]}else g(y,r).set(null),d[p]=6|d[p];return u},constructUpdate:function(){for(var f,p,y={},m=Object.keys(d),l=0;l<m.length;l++)f=b+"["+(p=m[l])+"]",a[p]?(1&d[p]&&(y[f+"."+e]=a[p][e]),2&d[p]&&(y[f+"."+r]=i?4&d[p]?null:a[p][r]:4&d[p]?null:g(a[p],r).get())):y[f]=null;return y}};return u}},{"./nested_property":511}],506:[function(_,ae,ie){"use strict";var g=_("../registry");ae.exports=function(x,T){for(var b=x._context.locale,e=0;e<2;e++){for(var r=x._context.locales,t=0;t<2;t++){var a=(r[b]||{}).dictionary;if(a){var n=a[T];if(n)return n}r=g.localeRegistry}var d=b.split("-")[0];if(d===b)break;b=d}return T}},{"../registry":638}],507:[function(_,ae,ie){"use strict";var g=_("../plot_api/plot_config").dfltConfig,x=_("./notifier"),T=ae.exports={};T.log=function(){var b;if(g.logging>1){var e=["LOG:"];for(b=0;b<arguments.length;b++)e.push(arguments[b]);console.trace.apply(console,e)}if(g.notifyOnLogging>1){var r=[];for(b=0;b<arguments.length;b++)r.push(arguments[b]);x(r.join("<br>"),"long")}},T.warn=function(){var b;if(g.logging>0){var e=["WARN:"];for(b=0;b<arguments.length;b++)e.push(arguments[b]);console.trace.apply(console,e)}if(g.notifyOnLogging>0){var r=[];for(b=0;b<arguments.length;b++)r.push(arguments[b]);x(r.join("<br>"),"stick")}},T.error=function(){var b;if(g.logging>0){var e=["ERROR:"];for(b=0;b<arguments.length;b++)e.push(arguments[b]);console.error.apply(console,e)}if(g.notifyOnLogging>0){var r=[];for(b=0;b<arguments.length;b++)r.push(arguments[b]);x(r.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(_,ae,ie){"use strict";var g=_("@plotly/d3");ae.exports=function(x,T,b){var e=x.selectAll("g."+b.replace(/\s/g,".")).data(T,function(t){return t[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",b),e.order();var r=x.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(t){t[0][r]=g.select(this)}),e}},{"@plotly/d3":58}],509:[function(_,ae,ie){"use strict";var g=_("gl-mat4");ie.init2dArray=function(x,T){for(var b=new Array(x),e=0;e<x;e++)b[e]=new Array(T);return b},ie.transposeRagged=function(x){var T,b,e=0,r=x.length;for(T=0;T<r;T++)e=Math.max(e,x[T].length);var t=new Array(e);for(T=0;T<e;T++)for(t[T]=new Array(r),b=0;b<r;b++)t[T][b]=x[b][T];return t},ie.dot=function(x,T){if(!x.length||!T.length||x.length!==T.length)return null;var b,e,r=x.length;if(x[0].length)for(b=new Array(r),e=0;e<r;e++)b[e]=ie.dot(x[e],T);else if(T[0].length){var t=ie.transposeRagged(T);for(b=new Array(t.length),e=0;e<t.length;e++)b[e]=ie.dot(x,t[e])}else for(b=0,e=0;e<r;e++)b+=x[e]*T[e];return b},ie.translationMatrix=function(x,T){return[[1,0,x],[0,1,T],[0,0,1]]},ie.rotationMatrix=function(x){var T=x*Math.PI/180;return[[Math.cos(T),-Math.sin(T),0],[Math.sin(T),Math.cos(T),0],[0,0,1]]},ie.rotationXYMatrix=function(x,T,b){return ie.dot(ie.dot(ie.translationMatrix(T,b),ie.rotationMatrix(x)),ie.translationMatrix(-T,-b))},ie.apply3DTransform=function(x){return function(){var T=arguments,b=1===arguments.length?T[0]:[T[0],T[1],T[2]||0];return ie.dot(x,[b[0],b[1],b[2],1]).slice(0,3)}},ie.apply2DTransform=function(x){return function(){var T=arguments;3===T.length&&(T=T[0]);var b=1===arguments.length?T[0]:[T[0],T[1]];return ie.dot(x,[b[0],b[1],1]).slice(0,2)}},ie.apply2DTransform2=function(x){var T=ie.apply2DTransform(x);return function(b){return T(b.slice(0,2)).concat(T(b.slice(2,4)))}},ie.convertCssMatrix=function(x){if(x){var T=x.length;if(16===T)return x;if(6===T)return[x[0],x[1],0,0,x[2],x[3],0,0,0,0,1,0,x[4],x[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ie.inverseTransformMatrix=function(x){var T=[];return g.invert(T,x),[[T[0],T[1],T[2],T[3]],[T[4],T[5],T[6],T[7]],[T[8],T[9],T[10],T[11]],[T[12],T[13],T[14],T[15]]]}},{"gl-mat4":210}],510:[function(_,ae,ie){"use strict";ae.exports={mod:function(g,x){var T=g%x;return T<0?T+x:T},modHalf:function(g,x){return Math.abs(g)>x/2?g-Math.round(g/x)*x:g}}},{}],511:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("./array").isArrayOrTypedArray;function T(d,s){return function(){var i,u,f,p,y,m=d;for(p=0;p<s.length-1;p++){if(-1===(i=s[p])){for(u=!0,f=[],y=0;y<m.length;y++)f[y]=T(m[y],s.slice(p+1))(),f[y]!==f[0]&&(u=!1);return u?f[0]:f}if("number"==typeof i&&!x(m)||"object"!=typeof(m=m[i])||null===m)return}if("object"==typeof m&&null!==m&&null!==(f=m[s[p]]))return f}}ae.exports=function(d,s){if(g(s))s=String(s);else if("string"!=typeof s||"[-1]"===s.substr(s.length-4))throw"bad property string";for(var i,u,f,p=0,y=s.split(".");p<y.length;){if(i=String(y[p]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(i[1])y[p]=i[1];else{if(0!==p)throw"bad property string";y.splice(0,1)}for(u=i[2].substr(1,i[2].length-2).split("]["),f=0;f<u.length;f++)p++,y.splice(p,0,Number(u[f]))}p++}return"object"!=typeof d?{set:function(){throw"bad container"},get:function(){},astr:s,parts:y,obj:d}:{set:r(d,y,s),get:T(d,y),astr:s,parts:y,obj:d}};var b=/(^|\.)args\[/;function e(d,s){return void 0===d||null===d&&!s.match(b)}function r(d,s,i){return function(u){var f,p,y=d,m="",l=[[d,m]],w=e(u,i);for(p=0;p<s.length-1;p++){if("number"==typeof(f=s[p])&&!x(y))throw"array index but container is not an array";if(-1===f){if(w=!a(y,s.slice(p+1),u,i))break;return}if(!n(y,f,s[p+1],w))break;if("object"!=typeof(y=y[f])||null===y)throw"container is not an object";m=t(m,f),l.push([y,m])}if(w){if(p===s.length-1&&(delete y[s[p]],Array.isArray(y)&&+s[p]==y.length-1))for(;y.length&&void 0===y[y.length-1];)y.pop()}else y[s[p]]=u}}function t(d,s){var i=s;return g(s)?i="["+s+"]":d&&(i="."+s),d+i}function a(d,s,i,u){var f,p=x(i),y=!0,m=i,l=u.replace("-1",0),w=!p&&e(i,l),v=s[0];for(f=0;f<d.length;f++)l=u.replace("-1",f),p&&(w=e(m=i[f%i.length],l)),w&&(y=!1),n(d,f,v,w)&&r(d[f],s,u.replace("-1",f))(m);return y}function n(d,s,i,u){if(void 0===d[s]){if(u)return!1;d[s]="number"==typeof i?[]:{}}return!0}},{"./array":485,"fast-isnumeric":190}],512:[function(_,ae,ie){"use strict";ae.exports=function(){}},{}],513:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("fast-isnumeric"),T=[];ae.exports=function(b,e){if(-1===T.indexOf(b)){T.push(b);var r=1e3;x(e)?r=e:"long"===e&&(r=3e3);var t=g.select("body").selectAll(".plotly-notifier").data([0]);t.enter().append("div").classed("plotly-notifier",!0),t.selectAll(".notifier-note").data(T).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(n){var d=g.select(this);d.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){d.transition().call(a)});for(var s=d.append("p"),i=n.split(/<br\s*\/?>/g),u=0;u<i.length;u++)u&&s.append("br"),s.append("span").text(i[u]);"stick"===e?d.transition().duration(350).style("opacity",1):d.transition().duration(700).style("opacity",1).transition().delay(r).call(a)})}function a(n){n.duration(700).style("opacity",0).each("end",function(d){var s=T.indexOf(d);-1!==s&&T.splice(s,1),g.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(_,ae,ie){"use strict";var g=_("./setcursor"),x="data-savedcursor";ae.exports=function(T,b){var e=T.attr(x);if(b){if(!e){for(var r=(T.attr("class")||"").split(" "),t=0;t<r.length;t++){var a=r[t];0===a.indexOf("cursor-")&&T.attr(x,a.substr(7)).classed(a,!1)}T.attr(x)||T.attr(x,"!!")}g(T,b)}else e&&(T.attr(x,null),"!!"===e?g(T):g(T,e))}},{"./setcursor":524}],515:[function(_,ae,ie){"use strict";var g=_("./matrix").dot,x=_("../constants/numerical").BADNUM,T=ae.exports={};T.tester=function(b){var e,r=b.slice(),t=r[0][0],a=t,n=r[0][1],d=n;for(r.push(r[0]),e=1;e<r.length;e++)t=Math.min(t,r[e][0]),a=Math.max(a,r[e][0]),n=Math.min(n,r[e][1]),d=Math.max(d,r[e][1]);var s,i=!1;5===r.length&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(i=!0,s=function(p){return p[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(i=!0,s=function(p){return p[1]===r[0][1]}));var u=!0,f=r[0];for(e=1;e<r.length;e++)if(f[0]!==r[e][0]||f[1]!==r[e][1]){u=!1;break}return{xmin:t,xmax:a,ymin:n,ymax:d,pts:r,contains:i?function(p,y){var m=p[0],l=p[1];return!(m===x||m<t||m>a||l===x||l<n||l>d||y&&s(p))}:function(p,y){var m=p[0],l=p[1];if(m===x||m<t||m>a||l===x||l<n||l>d)return!1;var w,v,A,M,k,E=r.length,P=r[0][0],S=r[0][1],F=0;for(w=1;w<E;w++)if(v=P,A=S,P=r[w][0],S=r[w][1],!(m<(M=Math.min(v,P))||m>Math.max(v,P)||l>Math.max(A,S)))if(l<Math.min(A,S))m!==M&&F++;else{if(l===(k=P===v?l:A+(m-v)*(S-A)/(P-v)))return 1!==w||!y;l<=k&&m!==M&&F++}return F%2==1},isRect:i,degenerate:u}},T.isSegmentBent=function(b,e,r,t){var a,n,d,s=b[e],i=[b[r][0]-s[0],b[r][1]-s[1]],u=g(i,i),f=Math.sqrt(u),p=[-i[1]/f,i[0]/f];for(a=e+1;a<r;a++)if((d=g(n=[b[a][0]-s[0],b[a][1]-s[1]],i))<0||d>u||Math.abs(g(n,p))>t)return!0;return!1},T.filter=function(b,e){var r=[b[0]],t=0,a=0;function n(d){b.push(d);var s=r.length,i=t;r.splice(a+1);for(var u=i+1;u<b.length;u++)(u===b.length-1||T.isSegmentBent(b,i,u+1,e))&&(r.push(b[u]),r.length<s-2&&(t=u,a=r.length-1),i=u)}return b.length>1&&n(b.pop()),{addPt:n,raw:b,filtered:r}}},{"../constants/numerical":479,"./matrix":509}],516:[function(_,ae,ie){(function(g){(function(){"use strict";var x=_("./show_no_webgl_msg"),T=_("regl");ae.exports=function(b,e){var r=b._fullLayout,t=!0;return r._glcanvas.each(function(a){if(!a.regl&&(!a.pick||r._has("parcoords"))){try{a.regl=T({canvas:this,attributes:{antialias:!a.pick,preserveDrawingBuffer:!0},pixelRatio:b._context.plotGlPixelRatio||g.devicePixelRatio,extensions:e||[]})}catch(n){t=!1}a.regl||(t=!1),t&&this.addEventListener("webglcontextlost",function(n){b&&b.emit&&b.emit("plotly_webglcontextlost",{event:n,layer:a.key})},!1)}}),t||x({container:r._glcontainer.node()}),t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("is-mobile");ae.exports=function(T){var b,s;if("string"!=typeof(b=T&&T.hasOwnProperty("userAgent")?T.userAgent:("undefined"!=typeof navigator&&(s=navigator.userAgent),s&&s.headers&&"string"==typeof s.headers["user-agent"]&&(s=s.headers["user-agent"]),s)))return!0;var e=x({ua:{headers:{"user-agent":b}},tablet:!0,featureDetect:!1});if(!e)for(var r=b.split(" "),t=1;t<r.length;t++)if(-1!==r[t].indexOf("Safari"))for(var a=t-1;a>-1;a--){var n=r[a];if("Version/"===n.substr(0,8)){var d=n.substr(8).split(".")[0];if(g(d)&&(d=+d),d>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(_,ae,ie){"use strict";ae.exports=function(g,x){if(x instanceof RegExp){for(var T=x.toString(),b=0;b<g.length;b++)if(g[b]instanceof RegExp&&g[b].toString()===T)return g;g.push(x)}else!x&&0!==x||-1!==g.indexOf(x)||g.push(x);return g}},{}],519:[function(_,ae,ie){"use strict";var g=_("../lib"),x=_("../plot_api/plot_config").dfltConfig,T={add:function(b,e,r,t,a){var n,d;b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},d=b.undoQueue.index,b.autoplay?b.undoQueue.inSequence||(b.autoplay=!1):(!b.undoQueue.sequence||b.undoQueue.beginSequence?(b.undoQueue.queue.splice(d,b.undoQueue.queue.length-d,n={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),b.undoQueue.index+=1):n=b.undoQueue.queue[d-1],b.undoQueue.beginSequence=!1,n&&(n.undo.calls.unshift(e),n.undo.args.unshift(r),n.redo.calls.push(t),n.redo.args.push(a)),b.undoQueue.queue.length>x.queueLength&&(b.undoQueue.queue.shift(),b.undoQueue.index--))},startSequence:function(b){b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},b.undoQueue.sequence=!0,b.undoQueue.beginSequence=!0},stopSequence:function(b){b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},b.undoQueue.sequence=!1,b.undoQueue.beginSequence=!1},undo:function(b){var e,r;if(!(void 0===b.undoQueue||isNaN(b.undoQueue.index)||b.undoQueue.index<=0)){for(b.undoQueue.index--,e=b.undoQueue.queue[b.undoQueue.index],b.undoQueue.inSequence=!0,r=0;r<e.undo.calls.length;r++)T.plotDo(b,e.undo.calls[r],e.undo.args[r]);b.undoQueue.inSequence=!1,b.autoplay=!1}},redo:function(b){var e,r;if(!(void 0===b.undoQueue||isNaN(b.undoQueue.index)||b.undoQueue.index>=b.undoQueue.queue.length)){for(e=b.undoQueue.queue[b.undoQueue.index],b.undoQueue.inSequence=!0,r=0;r<e.redo.calls.length;r++)T.plotDo(b,e.redo.calls[r],e.redo.args[r]);b.undoQueue.inSequence=!1,b.autoplay=!1,b.undoQueue.index++}},plotDo:function(b,e,r){b.autoplay=!0,r=function(t,a){for(var n,d=[],s=0;s<a.length;s++)d[s]=(n=a[s])===t?n:"object"==typeof n?Array.isArray(n)?g.extendDeep([],n):g.extendDeepAll({},n):n;return d}(b,r),e.apply(null,r)}};ae.exports=T},{"../lib":503,"../plot_api/plot_config":541}],520:[function(_,ae,ie){"use strict";ie.counter=function(g,x,T,b){var e=(x||"")+(T?"":"$"),r=!1===b?"":"^";return"xy"===g?new RegExp(r+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(r+g+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(_,ae,ie){"use strict";var g=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,x=/^[^\.\[\]]+$/;ae.exports=function(T,b){for(;b;){var e=T.match(g);if(e)T=e[1];else{if(!T.match(x))throw new Error("bad relativeAttr call:"+[T,b]);T=""}if("^"!==b.charAt(0))break;b=b.slice(1)}return T&&"["!==b.charAt(0)?T+"."+b:T+b}},{}],522:[function(_,ae,ie){"use strict";var g=_("./array").isArrayOrTypedArray,x=_("./is_plain_object");ae.exports=function T(b,e){for(var r in e){var t=e[r],a=b[r];if(a!==t)if("_"===r.charAt(0)||"function"==typeof t){if(r in b)continue;b[r]=t}else if(g(t)&&g(a)&&x(t[0])){if("customdata"===r||"ids"===r)continue;for(var n=Math.min(t.length,a.length),d=0;d<n;d++)a[d]!==t[d]&&x(t[d])&&x(a[d])&&T(a[d],t[d])}else x(t)&&x(a)&&(T(a,t),Object.keys(a).length||delete b[r])}}},{"./array":485,"./is_plain_object":504}],523:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("./loggers"),T=_("./identity"),b=_("../constants/numerical").BADNUM;function e(n,d){return n<d}function r(n,d){return n<=d}function t(n,d){return n>d}function a(n,d){return n>=d}ie.findBin=function(n,d,s){if(g(d.start))return s?Math.ceil((n-d.start)/d.size-1e-9)-1:Math.floor((n-d.start)/d.size+1e-9);var i,u,f=0,p=d.length,y=0,m=p>1?(d[p-1]-d[0])/(p-1):1;for(u=m>=0?s?e:r:s?a:t,n+=1e-9*m*(s?-1:1)*(m>=0?1:-1);f<p&&y++<100;)u(d[i=Math.floor((f+p)/2)],n)?f=i+1:p=i;return y>90&&x.log("Long binary search..."),f-1},ie.sorterAsc=function(n,d){return n-d},ie.sorterDes=function(n,d){return d-n},ie.distinctVals=function(n){var d,s=n.slice();for(s.sort(ie.sorterAsc),d=s.length-1;d>-1&&s[d]===b;d--);for(var i,u=s[d]-s[0]||1,f=u/(d||1)/1e4,p=[],y=0;y<=d;y++){var m=s[y],l=m-i;void 0===i?(p.push(m),i=m):l>f&&(u=Math.min(u,l),p.push(m),i=m)}return{vals:p,minDiff:u}},ie.roundUp=function(n,d,s){for(var i,u=0,f=d.length-1,p=0,y=s?0:1,m=s?1:0,l=s?Math.ceil:Math.floor;u<f&&p++<100;)d[i=l((u+f)/2)]<=n?u=i+y:f=i-m;return d[u]},ie.sort=function(n,d){for(var s=0,i=0,u=1;u<n.length;u++){var f=d(n[u],n[u-1]);if(f<0?s=1:f>0&&(i=1),s&&i)return n.sort(d)}return i?n:n.reverse()},ie.findIndexOfMin=function(n,d){d=d||T;for(var s,i=1/0,u=0;u<n.length;u++){var f=d(n[u]);f<i&&(i=f,s=u)}return s}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(_,ae,ie){"use strict";ae.exports=function(g,x){(g.attr("class")||"").split(" ").forEach(function(T){0===T.indexOf("cursor-")&&g.classed(T,!1)}),x&&g.classed("cursor-"+x,!0)}},{}],525:[function(_,ae,ie){"use strict";var g=_("../components/color"),x=function(){};ae.exports=function(T){for(var b in T)"function"==typeof T[b]&&(T[b]=x);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=g.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=g.lightLine,e.style["z-index"]=30;var r=document.createElement("p");return r.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",r.style.position="relative",r.style.top="50%",r.style.left="50%",r.style.height="30%",r.style.width="50%",r.style.margin="-15% 0 0 -25%",e.appendChild(r),T.container.appendChild(e),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(_,ae,ie){"use strict";ae.exports=function(g){return Object.keys(g).sort()}},{}],527:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("./array").isArrayOrTypedArray;ie.aggNums=function(T,b,e,r){var t,a;if((!r||r>e.length)&&(r=e.length),g(b)||(b=!1),x(e[0])){for(a=new Array(r),t=0;t<r;t++)a[t]=ie.aggNums(T,b,e[t]);e=a}for(t=0;t<r;t++)g(b)?g(e[t])&&(b=T(+b,+e[t])):b=e[t];return b},ie.len=function(T){return ie.aggNums(function(b){return b+1},0,T)},ie.mean=function(T,b){return b||(b=ie.len(T)),ie.aggNums(function(e,r){return e+r},0,T)/b},ie.midRange=function(T){if(void 0!==T&&0!==T.length)return(ie.aggNums(Math.max,null,T)+ie.aggNums(Math.min,null,T))/2},ie.variance=function(T,b,e){return b||(b=ie.len(T)),g(e)||(e=ie.mean(T,b)),ie.aggNums(function(r,t){return r+Math.pow(t-e,2)},0,T)/b},ie.stdev=function(T,b,e){return Math.sqrt(ie.variance(T,b,e))},ie.median=function(T){var b=T.slice().sort();return ie.interp(b,.5)},ie.interp=function(T,b){if(!g(b))throw"n should be a finite number";if((b=b*T.length-.5)<0)return T[0];if(b>T.length-1)return T[T.length-1];var e=b%1;return e*T[Math.ceil(b)]+(1-e)*T[Math.floor(b)]}},{"./array":485,"fast-isnumeric":190}],528:[function(_,ae,ie){"use strict";var g=_("color-normalize");ae.exports=function(x){return x?g(x):[0,0,0,1]}},{"color-normalize":89}],529:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../lib"),T=x.strTranslate,b=_("../constants/xmlns_namespaces"),e=_("../constants/alignment").LINE_SPACING,r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ie.convertToTspans=function(R,D,L){var B=R.text(),V=!R.attr("data-notex")&&"undefined"!=typeof MathJax&&B.match(r),Z=g.select(R.node().parentNode);if(!Z.empty()){var Y=R.attr("class")?R.attr("class").split(" ")[0]:"text";return Z.selectAll("svg."+(Y+="-math")).remove(),Z.selectAll("g."+Y+"-group").remove(),R.style("display",null).attr({"data-unformatted":B,"data-math":"N"}),V?(D&&D._promises||[]).push(new Promise(function(Q){R.style("display","none");var oe,j,H,G,re,q,te,$=parseInt(R.node().style.fontSize,10);oe=V[2],j={fontSize:$},H=function(oe,j,H){Z.selectAll("svg."+Y).remove(),Z.selectAll("g."+Y+"-group").remove();var G=oe&&oe.select("svg");if(!G||!G.node())return ee(),void Q();var re=Z.append("g").classed(Y+"-group",!0).attr({"pointer-events":"none","data-unformatted":B,"data-math":"Y"});re.node().appendChild(G.node()),j&&j.node()&&G.node().insertBefore(j.node().cloneNode(!0),G.node().firstChild);var q=H.width,te=H.height;G.attr({class:Y,height:te,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ne=R.node().style.fill||"black",le=G.select("g");le.attr({fill:ne,stroke:ne});var ue=le.node().getBoundingClientRect(),de=ue.width,he=ue.height;(de>q||he>te)&&(G.style("overflow","hidden"),de=(ue=G.node().getBoundingClientRect()).width,he=ue.height);var be=+R.attr("x"),ge=+R.attr("y"),we=-($||R.node().getBoundingClientRect().height)/4;if("y"===Y[0])re.attr({transform:"rotate("+[-90,be,ge]+")"+T(-de/2,we-he/2)});else if("l"===Y[0])ge=we-he/2;else if("a"===Y[0]&&0!==Y.indexOf("atitle"))be=0,ge=we;else{var ke=R.attr("text-anchor");be-=de*("middle"===ke?.5:"end"===ke?1:0),ge=ge+we-he/2}G.attr({x:be,y:ge}),L&&L.call(R,re),Q(re)},MathJax.Hub.Queue(function(){return re=x.extendDeepAll({},MathJax.Hub.config),q=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(G=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var ne="math-output-"+x.randstr({},64);return te=g.select("body").append("div").attr({id:ne}).style({visibility:"hidden",position:"absolute"}).style({"font-size":j.fontSize+"px"}).text(oe.replace(t,"\\lt ").replace(a,"\\gt ")),MathJax.Hub.Typeset(te.node())},function(){var ne=g.select("body").select("#MathJax_SVG_glyphs");if(te.select(".MathJax_SVG").empty()||!te.select("svg").node())x.log("There was an error in the tex syntax.",oe),H();else{var le=te.select("svg").node().getBoundingClientRect();H(te.select(".MathJax_SVG"),ne,le)}if(te.remove(),"SVG"!==G)return MathJax.Hub.setRenderer(G)},function(){return void 0!==q&&(MathJax.Hub.processSectionDelay=q),MathJax.Hub.Config(re)})})):ee(),R}function ee(){Z.empty()||(Y=R.attr("class")+"-math",Z.select("svg."+Y).remove()),R.text("").style("white-space","pre"),function(Q,$){$=$.replace(u," ");var K,oe=!1,j=[],H=-1;function G(){H++;var Re=document.createElementNS(b.svg,"tspan");g.select(Re).attr({class:"line",dy:H*e+"em"}),Q.appendChild(Re),K=Re;var ve=j;if(j=[{node:Re}],ve.length>1)for(var Te=1;Te<ve.length;Te++)re(ve[Te])}function re(Re){var ve,Te=Re.type,Ie={};if("a"===Te){ve="a";var Ce=Re.target,Pe=Re.href,Ve=Re.popup;Pe&&(Ie={"xlink:xlink:show":"_blank"===Ce||"_"!==Ce.charAt(0)?"new":"replace",target:Ce,"xlink:xlink:href":Pe},Ve&&(Ie.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ve+'");return false;'))}else ve="tspan";Re.style&&(Ie.style=Re.style);var qe=document.createElementNS(b.svg,ve);if("sup"===Te||"sub"===Te){q(K,"\u200b"),K.appendChild(qe);var Je=document.createElementNS(b.svg,"tspan");q(Je,"\u200b"),g.select(Je).attr("dy",s[Te]),Ie.dy=d[Te],K.appendChild(qe),K.appendChild(Je)}else K.appendChild(qe);g.select(qe).attr(Ie),K=Re.node=qe,j.push(Re)}function q(Re,ve){Re.appendChild(document.createTextNode(ve))}function te(Re){if(1!==j.length){var ve=j.pop();Re!==ve.type&&x.log("Start tag <"+ve.type+"> doesnt match end tag <"+Re+">. Pretending it did match.",$),K=j[j.length-1].node}else x.log("Ignoring unexpected end tag </"+Re+">.",$)}y.test($)?G():(K=Q,j=[{node:Q}]);for(var ne=$.split(f),le=0;le<ne.length;le++){var ue=ne[le],de=ue.match(p),he=de&&de[2].toLowerCase(),be=n[he];if("br"===he)G();else if(void 0===be)q(K,P(ue));else if(de[1])te(he);else{var ge=de[4],we={type:he},ke=A(ge,m);if(ke?(ke=ke.replace(M,"$1 fill:"),be&&(ke+=";"+be)):be&&(ke=be),ke&&(we.style=ke),"a"===he){oe=!0;var De=A(ge,l);if(De){var Ee=S(De);Ee&&(we.href=Ee,we.target=A(ge,w)||"_blank",we.popup=A(ge,v))}}re(we)}}return oe}(R.node(),B)&&R.style("pointer-events","all"),ie.positionText(R),L&&L.call(R)}};var t=/(<|&lt;|&#60;)/g,a=/(>|&gt;|&#62;)/g,n={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},d={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},i=["http:","https:","mailto:","",void 0,":"],u=ie.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,p=/<(\/?)([^ >]*)(\s+(.*))?>/i,y=/<br(\s+.*)?>/i;ie.BR_TAG_ALL=/<br(\s+.*)?>/gi;var m=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,l=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,w=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,v=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function A(R,D){if(!R)return null;var L=R.match(D),B=L&&(L[3]||L[4]);return B&&P(B)}var M=/(^|;)\s*color:/;ie.plainText=function(R,D){for(var L=void 0!==(D=D||{}).len&&-1!==D.len?D.len:1/0,B=void 0!==D.allowedTags?D.allowedTags:["br"],V="...".length,Z=R.split(f),Y=[],ee="",Q=0,$=0;$<Z.length;$++){var K=Z[$],oe=K.match(p),j=oe&&oe[2].toLowerCase();if(j)-1!==B.indexOf(j)&&(Y.push(K),ee=j);else{var H=K.length;if(Q+H<L)Y.push(K),Q+=H;else if(Q<L){var G=L-Q;ee&&("br"!==ee||G<=V||H<=V)&&Y.pop(),Y.push(L>V?K.substr(0,G-V)+"...":K.substr(0,G));break}ee=""}}return Y.join("")};var k={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},E=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function P(R){return R.replace(E,function(D,L){return("#"===L.charAt(0)?function(B){if(!(B>1114111)){var V=String.fromCodePoint;if(V)return V(B);var Z=String.fromCharCode;return B<=65535?Z(B):Z(55232+(B>>10),B%1024+56320)}}("x"===L.charAt(1)?parseInt(L.substr(2),16):parseInt(L.substr(1),10)):k[L])||D})}function S(R){var D=encodeURI(decodeURI(R)),L=document.createElement("a"),B=document.createElement("a");L.href=R,B.href=D;var Z=B.protocol;return-1!==i.indexOf(L.protocol)&&-1!==i.indexOf(Z)?D:""}function F(R,D,L){var B,V,Z,Y=L.horizontalAlign,ee=L.verticalAlign||"top",Q=R.node().getBoundingClientRect(),$=D.node().getBoundingClientRect();return V="bottom"===ee?function(){return Q.bottom-B.height}:"middle"===ee?function(){return Q.top+(Q.height-B.height)/2}:function(){return Q.top},Z="right"===Y?function(){return Q.right-B.width}:"center"===Y?function(){return Q.left+(Q.width-B.width)/2}:function(){return Q.left},function(){B=this.node().getBoundingClientRect();var K=Z()-$.left,oe=V()-$.top,j=L.gd||{};if(L.gd){j._fullLayout._calcInverseTransform(j);var H=x.apply3DTransform(j._fullLayout._invTransform)(K,oe);K=H[0],oe=H[1]}return this.style({top:oe+"px",left:K+"px","z-index":1e3}),this}}ie.convertEntities=P,ie.sanitizeHTML=function(R){R=R.replace(u," ");for(var D=document.createElement("p"),L=D,B=[],V=R.split(f),Z=0;Z<V.length;Z++){var Y=V[Z],ee=Y.match(p),Q=ee&&ee[2].toLowerCase();if(Q in n)if(ee[1])B.length&&(L=B.pop());else{var $=ee[4],K=A($,m),oe=K?{style:K}:{};if("a"===Q){var j=A($,l);if(j){var H=S(j);if(H){oe.href=H;var G=A($,w);G&&(oe.target=G)}}}var re=document.createElement(Q);L.appendChild(re),g.select(re).attr(oe),L=re,B.push(re)}else L.appendChild(document.createTextNode(P(Y)))}return D.innerHTML},ie.lineCount=function(R){return R.selectAll("tspan.line").size()||1},ie.positionText=function(R,D,L){return R.each(function(){var B=g.select(this);function V(ee,Q){return void 0===Q?null===(Q=B.attr(ee))&&(B.attr(ee,0),Q=0):B.attr(ee,Q),Q}var Z=V("x",D),Y=V("y",L);"text"===this.nodeName&&B.selectAll("tspan.line").attr({x:Z,y:Y})})},ie.makeTextShadow=function(R){var D="1px ",L="1px ",B="1px ";return D+L+B+R+", -"+D+"-"+L+B+R+", "+D+"-"+L+B+R+", -"+D+L+B+R},ie.makeEditable=function(R,D){var L=D.gd,B=D.delegate,V=g.dispatch("edit","input","cancel"),Z=B||R;if(R.style({"pointer-events":B?"none":"all"}),1!==R.size())throw new Error("boo");function Y(){var K,oe,j,H,G;K=g.select(L).select(".svg-container"),oe=K.append("div"),j=R.node().style,H=parseFloat(j.fontSize||12),void 0===(G=D.text)&&(G=R.attr("data-unformatted")),oe.classed("plugin-editable editable",!0).style({position:"absolute","font-family":j.fontFamily||"Arial","font-size":H,color:D.fill||j.fill||"black",opacity:1,"background-color":D.background||"transparent",outline:"#ffffff33 1px solid",margin:[-H/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(G).call(F(R,K,D)).on("blur",function(){L._editing=!1,R.text(this.textContent).style({opacity:1});var re,q=g.select(this).attr("class");(re=q?"."+q.split(" ")[0]+"-math-group":"[class*=-math-group]")&&g.select(R.node().parentNode).select(re).style({opacity:0});var te=this.textContent;g.select(this).transition().duration(0).remove(),g.select(document).on("mouseup",null),V.edit.call(R,te)}).on("focus",function(){var re=this;L._editing=!0,g.select(document).on("mouseup",function(){if(g.event.target===re)return!1;document.activeElement===oe.node()&&oe.node().blur()})}).on("keyup",function(){27===g.event.which?(L._editing=!1,R.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),V.cancel.call(R,this.textContent)):(V.input.call(R,this.textContent),g.select(this).call(F(R,K,D)))}).on("keydown",function(){13===g.event.which&&this.blur()}).call(ee),R.style({opacity:0});var Q,$=Z.attr("class");(Q=$?"."+$.split(" ")[0]+"-math-group":"[class*=-math-group]")&&g.select(R.node().parentNode).select(Q).style({opacity:0})}function ee(Q){var $=Q.node(),K=document.createRange();K.selectNodeContents($);var oe=window.getSelection();oe.removeAllRanges(),oe.addRange(K),$.focus()}return D.immediate?Y():Z.on("click",Y),g.rebind(R,V,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(_,ae,ie){"use strict";var g={};function x(T){T&&null!==T.timer&&(clearTimeout(T.timer),T.timer=null)}ie.throttle=function(T,b,e){var r=g[T],t=Date.now();if(!r){for(var a in g)g[a].ts<t-6e4&&delete g[a];r=g[T]={ts:0,timer:null}}function n(){e(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}x(r),t>r.ts+b?n():r.timer=setTimeout(function(){n(),r.timer=null},b)},ie.done=function(T){var b=g[T];return b&&b.timer?new Promise(function(e){var r=b.onDone;b.onDone=function(){r&&r(),e(),b.onDone=null}}):Promise.resolve()},ie.clear=function(T){if(T)x(g[T]),delete g[T];else for(var b in g)ie.clear(b)}},{}],531:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric");ae.exports=function(x,T){if(x>0)return Math.log(x)/Math.LN10;var b=Math.log(Math.min(T[0],T[1]))/Math.LN10;return g(b)||(b=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),b}},{"fast-isnumeric":190}],532:[function(_,ae,ie){"use strict";var g=ae.exports={},x=_("../plots/geo/constants").locationmodeToLayer,T=_("topojson-client").feature;g.getTopojsonName=function(b){return[b.scope.replace(/ /g,"-"),"_",b.resolution.toString(),"m"].join("")},g.getTopojsonPath=function(b,e){return b+e+".json"},g.getTopojsonFeatures=function(b,e){return T(e,e.objects[x[b.locationmode]]).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(_,ae,ie){"use strict";ae.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(_,ae,ie){"use strict";ae.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(_,ae,ie){"use strict";var g=_("../registry");ae.exports=function(x){for(var T,b,e=g.layoutArrayContainers,r=g.layoutArrayRegexes,t=x.split("[")[0],a=0;a<r.length;a++)if((b=x.match(r[a]))&&0===b.index){T=b[0];break}if(T||(T=e[e.indexOf(t)]),!T)return!1;var n=x.substr(T.length);return n?!!(b=n.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:T,index:Number(b[1]),property:b[3]||""}:{array:T,index:"",property:""}}},{"../registry":638}],536:[function(_,ae,ie){"use strict";var g=_("../lib"),x=g.extendFlat,T=g.isPlainObject,b={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},r=b.flags.slice().concat(["fullReplot"]),t=e.flags.slice().concat("layoutReplot");function a(s){for(var i={},u=0;u<s.length;u++)i[s[u]]=!1;return i}function n(s,i,u){var f=x({},s);for(var p in f){var y=f[p];T(y)&&(f[p]=d(y,i,0,p))}return"from-root"===u&&(f.editType=i),f}function d(s,i,u,f){if(s.valType){var p=x({},s);if(p.editType=i,Array.isArray(s.items)){p.items=new Array(s.items.length);for(var y=0;y<s.items.length;y++)p.items[y]=d(s.items[y],i)}return p}return n(s,i,"_"===f.charAt(0)?"nested":"from-root")}ae.exports={traces:b,layout:e,traceFlags:function(){return a(r)},layoutFlags:function(){return a(t)},update:function(s,i){var u=i.editType;if(u&&"none"!==u)for(var f=u.split("+"),p=0;p<f.length;p++)s[f[p]]=!0},overrideAll:n}},{"../lib":503}],537:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("gl-mat4/fromQuat"),T=_("../registry"),b=_("../lib"),e=_("../plots/plots"),r=_("../plots/cartesian/axis_ids"),t=_("../components/color"),a=r.cleanId,n=r.getFromTrace,d=T.traceIs;function s(v,A){var M=v[A],k=A.charAt(0);M&&"paper"!==M&&(v[A]=a(M,k,!0))}function i(v){function A(M,k){v[M]&&(!v.title||!v.title[k])&&(v.title||(v.title={}),v.title[k]=v[M],delete v[M])}v&&("string"!=typeof v.title&&"number"!=typeof v.title||(v.title={text:v.title}),A("titlefont","font"),A("titleposition","position"),A("titleside","side"),A("titleoffset","offset"))}function u(v){if(!b.isPlainObject(v))return!1;var A=v.name;return delete v.name,delete v.showlegend,("string"==typeof A||"number"==typeof A)&&String(A)}function f(v,A,M,k){if(M&&!k)return v;if(k&&!M||!v.trim())return A;if(!A.trim())return v;var E,P=Math.min(v.length,A.length);for(E=0;E<P&&v.charAt(E)===A.charAt(E);E++);return v.substr(0,E).trim()}function p(v){var A="middle",M="center";return"string"==typeof v&&(-1!==v.indexOf("top")?A="top":-1!==v.indexOf("bottom")&&(A="bottom"),-1!==v.indexOf("left")?M="left":-1!==v.indexOf("right")&&(M="right")),A+" "+M}function y(v,A){return A in v&&"object"==typeof v[A]&&0===Object.keys(v[A]).length}ie.clearPromiseQueue=function(v){Array.isArray(v._promises)&&v._promises.length>0&&b.log("Clearing previous rejected promises from queue."),v._promises=[]},ie.cleanLayout=function(v){var A,M;v||(v={}),v.xaxis1&&(v.xaxis||(v.xaxis=v.xaxis1),delete v.xaxis1),v.yaxis1&&(v.yaxis||(v.yaxis=v.yaxis1),delete v.yaxis1),v.scene1&&(v.scene||(v.scene=v.scene1),delete v.scene1);var k=(e.subplotsRegistry.cartesian||{}).attrRegex,E=(e.subplotsRegistry.polar||{}).attrRegex,P=(e.subplotsRegistry.ternary||{}).attrRegex,S=(e.subplotsRegistry.gl3d||{}).attrRegex,F=Object.keys(v);for(A=0;A<F.length;A++){var R=F[A];if(k&&k.test(R)){var D=v[R];D.anchor&&"free"!==D.anchor&&(D.anchor=a(D.anchor)),D.overlaying&&(D.overlaying=a(D.overlaying)),D.type||(D.isdate?D.type="date":D.islog?D.type="log":!1===D.isdate&&!1===D.islog&&(D.type="linear")),"withzero"!==D.autorange&&"tozero"!==D.autorange||(D.autorange=!0,D.rangemode="tozero"),delete D.islog,delete D.isdate,delete D.categories,y(D,"domain")&&delete D.domain,void 0!==D.autotick&&(void 0===D.tickmode&&(D.tickmode=D.autotick?"auto":"linear"),delete D.autotick),i(D)}else if(E&&E.test(R))i(v[R].radialaxis);else if(P&&P.test(R)){var L=v[R];i(L.aaxis),i(L.baxis),i(L.caxis)}else if(S&&S.test(R)){var B=v[R],V=B.cameraposition;if(Array.isArray(V)&&4===V[0].length){var Y=V[1],ee=V[2],Q=x([],V[0]),$=[];for(M=0;M<3;++M)$[M]=Y[M]+ee*Q[2+4*M];B.camera={eye:{x:$[0],y:$[1],z:$[2]},center:{x:Y[0],y:Y[1],z:Y[2]},up:{x:0,y:0,z:1}},delete B.cameraposition}i(B.xaxis),i(B.yaxis),i(B.zaxis)}}var K=Array.isArray(v.annotations)?v.annotations.length:0;for(A=0;A<K;A++){var oe=v.annotations[A];b.isPlainObject(oe)&&(oe.ref&&("paper"===oe.ref?(oe.xref="paper",oe.yref="paper"):"data"===oe.ref&&(oe.xref="x",oe.yref="y"),delete oe.ref),s(oe,"xref"),s(oe,"yref"))}var j=Array.isArray(v.shapes)?v.shapes.length:0;for(A=0;A<j;A++){var H=v.shapes[A];b.isPlainObject(H)&&(s(H,"xref"),s(H,"yref"))}var G=Array.isArray(v.images)?v.images.length:0;for(A=0;A<G;A++){var re=v.images[A];b.isPlainObject(re)&&(s(re,"xref"),s(re,"yref"))}var q=v.legend;return q&&(q.x>3?(q.x=1.02,q.xanchor="left"):q.x<-2&&(q.x=-.02,q.xanchor="right"),q.y>3?(q.y=1.02,q.yanchor="bottom"):q.y<-2&&(q.y=-.02,q.yanchor="top")),i(v),"rotate"===v.dragmode&&(v.dragmode="orbit"),t.clean(v),v.template&&v.template.layout&&ie.cleanLayout(v.template.layout),v},ie.cleanData=function(v){for(var A=0;A<v.length;A++){var M,k=v[A];if("histogramy"===k.type&&"xbins"in k&&!("ybins"in k)&&(k.ybins=k.xbins,delete k.xbins),k.error_y&&"opacity"in k.error_y){var E=t.defaults,P=k.error_y.color||(d(k,"bar")?t.defaultLine:E[A%E.length]);k.error_y.color=t.addOpacity(t.rgb(P),t.opacity(P)*k.error_y.opacity),delete k.error_y.opacity}if("bardir"in k&&("h"!==k.bardir||!d(k,"bar")&&"histogram"!==k.type.substr(0,9)||(k.orientation="h",ie.swapXYData(k)),delete k.bardir),"histogramy"===k.type&&ie.swapXYData(k),"histogramx"!==k.type&&"histogramy"!==k.type||(k.type="histogram"),"scl"in k&&!("colorscale"in k)&&(k.colorscale=k.scl,delete k.scl),"reversescl"in k&&!("reversescale"in k)&&(k.reversescale=k.reversescl,delete k.reversescl),k.xaxis&&(k.xaxis=a(k.xaxis,"x")),k.yaxis&&(k.yaxis=a(k.yaxis,"y")),d(k,"gl3d")&&k.scene&&(k.scene=e.subplotsRegistry.gl3d.cleanId(k.scene)),!d(k,"pie-like")&&!d(k,"bar-like"))if(Array.isArray(k.textposition))for(M=0;M<k.textposition.length;M++)k.textposition[M]=p(k.textposition[M]);else k.textposition&&(k.textposition=p(k.textposition));var S=T.getModule(k);if(S&&S.colorbar){var F=S.colorbar.container,R=F?k[F]:k;R&&R.colorscale&&("YIGnBu"===R.colorscale&&(R.colorscale="YlGnBu"),"YIOrRd"===R.colorscale&&(R.colorscale="YlOrRd"))}if("surface"===k.type&&b.isPlainObject(k.contours)){var D=["x","y","z"];for(M=0;M<D.length;M++){var L=k.contours[D[M]];b.isPlainObject(L)&&(L.highlightColor&&(L.highlightcolor=L.highlightColor,delete L.highlightColor),L.highlightWidth&&(L.highlightwidth=L.highlightWidth,delete L.highlightWidth))}}if("candlestick"===k.type||"ohlc"===k.type){var B=!1!==(k.increasing||{}).showlegend,V=!1!==(k.decreasing||{}).showlegend,Z=u(k.increasing),Y=u(k.decreasing);if(!1!==Z&&!1!==Y){var ee=f(Z,Y,B,V);ee&&(k.name=ee)}else!Z&&!Y||k.name||(k.name=Z||Y)}if(Array.isArray(k.transforms)){var Q=k.transforms;for(M=0;M<Q.length;M++){var $=Q[M];if(b.isPlainObject($))switch($.type){case"filter":$.filtersrc&&($.target=$.filtersrc,delete $.filtersrc),$.calendar&&($.valuecalendar||($.valuecalendar=$.calendar),delete $.calendar);break;case"groupby":if($.styles=$.styles||$.style,$.styles&&!Array.isArray($.styles)){var K=$.styles,oe=Object.keys(K);$.styles=[];for(var j=0;j<oe.length;j++)$.styles.push({target:oe[j],value:K[oe[j]]})}}}}y(k,"line")&&delete k.line,"marker"in k&&(y(k.marker,"line")&&delete k.marker.line,y(k,"marker")&&delete k.marker),t.clean(k),k.autobinx&&(delete k.autobinx,delete k.xbins),k.autobiny&&(delete k.autobiny,delete k.ybins),i(k),k.colorbar&&i(k.colorbar),k.marker&&k.marker.colorbar&&i(k.marker.colorbar),k.line&&k.line.colorbar&&i(k.line.colorbar),k.aaxis&&i(k.aaxis),k.baxis&&i(k.baxis)}},ie.swapXYData=function(v){var A;if(b.swapAttrs(v,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(v.z)&&Array.isArray(v.z[0])&&(v.transpose?delete v.transpose:v.transpose=!0),v.error_x&&v.error_y){var M=v.error_y,k="copy_ystyle"in M?M.copy_ystyle:!(M.color||M.thickness||M.width);b.swapAttrs(v,["error_?.copy_ystyle"]),k&&b.swapAttrs(v,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof v.hoverinfo){var E=v.hoverinfo.split("+");for(A=0;A<E.length;A++)"x"===E[A]?E[A]="y":"y"===E[A]&&(E[A]="x");v.hoverinfo=E.join("+")}},ie.coerceTraceIndices=function(v,A){if(g(A))return[A];if(!Array.isArray(A)||!A.length)return v.data.map(function(E,P){return P});if(Array.isArray(A)){for(var M=[],k=0;k<A.length;k++)b.isIndex(A[k],v.data.length)?M.push(A[k]):b.warn("trace index (",A[k],") is not a number or is out of bounds");return M}return A},ie.manageArrayContainers=function(v,A,M){var k=v.obj,E=v.parts,P=E.length,S=E[P-1],F=g(S);if(F&&null===A){var R=E.slice(0,P-1).join(".");b.nestedProperty(k,R).get().splice(S,1)}else F&&void 0===v.get()&&void 0===v.get()&&(M[v.astr]=null),v.set(A)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function l(v){var A=v.search(m);if(A>0)return v.substr(0,A)}ie.hasParent=function(v,A){for(var M=l(A);M;){if(M in v)return!0;M=l(M)}return!1};var w=["x","y","z"];ie.clearAxisTypes=function(v,A,M){for(var k=0;k<A.length;k++)for(var E=v._fullData[k],P=0;P<3;P++){var S=n(v,E,w[P]);if(S&&"log"!==S.type){var F=S._name,R=S._id.substr(1);if("scene"===R.substr(0,5)){if(void 0!==M[R])continue;F=R+"."+F}var D=F+".type";void 0===M[F]&&void 0===M[D]&&b.nestedProperty(v.layout,D).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(_,ae,ie){"use strict";var g=_("./plot_api");ie._doPlot=g._doPlot,ie.newPlot=g.newPlot,ie.restyle=g.restyle,ie.relayout=g.relayout,ie.redraw=g.redraw,ie.update=g.update,ie._guiRestyle=g._guiRestyle,ie._guiRelayout=g._guiRelayout,ie._guiUpdate=g._guiUpdate,ie._storeDirectGUIEdit=g._storeDirectGUIEdit,ie.react=g.react,ie.extendTraces=g.extendTraces,ie.prependTraces=g.prependTraces,ie.addTraces=g.addTraces,ie.deleteTraces=g.deleteTraces,ie.moveTraces=g.moveTraces,ie.purge=g.purge,ie.addFrames=g.addFrames,ie.deleteFrames=g.deleteFrames,ie.animate=g.animate,ie.setPlotConfig=g.setPlotConfig,ie.toImage=_("./to_image"),ie.validate=_("./validate"),ie.downloadImage=_("../snapshot/download");var x=_("./template_api");ie.makeTemplate=x.makeTemplate,ie.validateTemplate=x.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(_,ae,ie){"use strict";var g=_("../lib/is_plain_object"),x=_("../lib/noop"),T=_("../lib/loggers"),b=_("../lib/search").sorterAsc,e=_("../registry");ie.containerArrayMatch=_("./container_array_match");var r=ie.isAddVal=function(a){return"add"===a||g(a)},t=ie.isRemoveVal=function(a){return null===a||"remove"===a};ie.applyContainerArrayChanges=function(a,n,d,s,i){var u=n.astr,f=e.getComponentMethod(u,"supplyLayoutDefaults"),p=e.getComponentMethod(u,"draw"),y=e.getComponentMethod(u,"drawOne"),m=s.replot||s.recalc||f===x||p===x,l=a.layout,w=a._fullLayout;if(d[""]){Object.keys(d).length>1&&T.warn("Full array edits are incompatible with other edits",u);var v=d[""][""];if(t(v))n.set(null);else{if(!Array.isArray(v))return T.warn("Unrecognized full array edit value",u,v),!0;n.set(v)}return!m&&(f(l,w),p(a),!0)}var A,M,k,E,P,S,F,D=Object.keys(d).map(Number).sort(b),L=n.get(),B=L||[],V=i(w,u).get(),Z=[],Y=-1,ee=B.length;for(A=0;A<D.length;A++)if(E=d[k=D[A]],P=Object.keys(E),F=r(S=E[""]),k<0||k>B.length-(F?0:1))T.warn("index out of range",u,k);else if(void 0!==S)P.length>1&&T.warn("Insertion & removal are incompatible with edits to the same index.",u,k),t(S)?Z.push(k):F?("add"===S&&(S={}),B.splice(k,0,S),V&&V.splice(k,0,{})):T.warn("Unrecognized full object edit value",u,k,S),-1===Y&&(Y=k);else for(M=0;M<P.length;M++)i(B[k],P[M],u+"["+k+"].").set(E[P[M]]);for(A=Z.length-1;A>=0;A--)B.splice(Z[A],1),V&&V.splice(Z[A],1);if(B.length?L||n.set(B):n.set(null),m)return!1;if(f(l,w),y!==x){var Q;if(-1===Y)Q=D;else{for(ee=Math.max(B.length,ee),Q=[],A=0;A<D.length&&!((k=D[A])>=Y);A++)Q.push(k);for(A=Y;A<ee;A++)Q.push(A)}for(A=0;A<Q.length;A++)y(a,Q[A])}else p(a);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("has-hover"),b=_("../lib"),e=b.nestedProperty,r=_("../lib/events"),t=_("../lib/queue"),a=_("../registry"),n=_("./plot_schema"),d=_("../plots/plots"),s=_("../plots/cartesian/axes"),i=_("../components/drawing"),u=_("../components/color"),f=_("../plots/cartesian/graph_interact").initInteractions,p=_("../constants/xmlns_namespaces"),y=_("../plots/cartesian/select").clearSelect,m=_("./plot_config").dfltConfig,l=_("./manage_arrays"),w=_("./helpers"),v=_("./subroutines"),A=_("./edit_types"),M=_("../plots/cartesian/constants").AX_NAME_PATTERN,k=0;function E(ve){var Te=ve._fullLayout;Te._redrawFromAutoMarginCount?Te._redrawFromAutoMarginCount--:ve.emit("plotly_afterplot")}function P(ve,Te){try{ve._fullLayout._paper.style("background",Te)}catch(Ie){b.error(Ie)}}function S(ve,Te){P(ve,u.combine(Te,"white"))}function F(ve,Te){if(!ve._context){ve._context=b.extendDeep({},m);var Ie=g.select("base");ve._context._baseUrl=Ie.size()&&Ie.attr("href")?window.location.href.split("#")[0]:""}var Ce,Pe,Ve,qe=ve._context;if(Te){for(Pe=Object.keys(Te),Ce=0;Ce<Pe.length;Ce++)"editable"!==(Ve=Pe[Ce])&&"edits"!==Ve&&Ve in qe&&(qe[Ve]="setBackground"===Ve&&"opaque"===Te[Ve]?S:Te[Ve]);Te.plot3dPixelRatio&&!qe.plotGlPixelRatio&&(qe.plotGlPixelRatio=qe.plot3dPixelRatio);var Je=Te.editable;if(void 0!==Je)for(qe.editable=Je,Pe=Object.keys(qe.edits),Ce=0;Ce<Pe.length;Ce++)qe.edits[Pe[Ce]]=Je;if(Te.edits)for(Pe=Object.keys(Te.edits),Ce=0;Ce<Pe.length;Ce++)(Ve=Pe[Ce])in qe.edits&&(qe.edits[Ve]=Te.edits[Ve]);qe._exportedPlot=Te._exportedPlot}qe.staticPlot&&(qe.editable=!1,qe.edits={},qe.autosizable=!1,qe.scrollZoom=!1,qe.doubleClick=!1,qe.showTips=!1,qe.showLink=!1,qe.displayModeBar=!1),"hover"!==qe.displayModeBar||T||(qe.displayModeBar=!0),"transparent"!==qe.setBackground&&"function"==typeof qe.setBackground||(qe.setBackground=P),qe._hasZeroHeight=qe._hasZeroHeight||0===ve.clientHeight,qe._hasZeroWidth=qe._hasZeroWidth||0===ve.clientWidth;var lt=qe.scrollZoom,He=qe._scrollZoom={};if(!0===lt)He.cartesian=1,He.gl3d=1,He.geo=1,He.mapbox=1;else if("string"==typeof lt){var $e=lt.split("+");for(Ce=0;Ce<$e.length;Ce++)He[$e[Ce]]=1}else!1!==lt&&(He.gl3d=1,He.geo=1,He.mapbox=1)}function R(ve,Te){var Ie,Ce,Pe=Te+1,Ve=[];for(Ie=0;Ie<ve.length;Ie++)(Ce=ve[Ie])<0?Ve.push(Pe+Ce):Ve.push(Ce);return Ve}function D(ve,Te,Ie){var Ce,Pe;for(Ce=0;Ce<Te.length;Ce++){if((Pe=Te[Ce])!==parseInt(Pe,10))throw new Error("all values in "+Ie+" must be integers");if(Pe>=ve.data.length||Pe<-ve.data.length)throw new Error(Ie+" must be valid indices for gd.data.");if(Te.indexOf(Pe,Ce+1)>-1||Pe>=0&&Te.indexOf(-ve.data.length+Pe)>-1||Pe<0&&Te.indexOf(ve.data.length+Pe)>-1)throw new Error("each index in "+Ie+" must be unique.")}}function L(ve,Te,Ie){if(!Array.isArray(ve.data))throw new Error("gd.data must be an array.");if(void 0===Te)throw new Error("currentIndices is a required argument.");if(Array.isArray(Te)||(Te=[Te]),D(ve,Te,"currentIndices"),void 0===Ie||Array.isArray(Ie)||(Ie=[Ie]),void 0!==Ie&&D(ve,Ie,"newIndices"),void 0!==Ie&&Te.length!==Ie.length)throw new Error("current and new indices must be of equal length.")}function B(ve,Te,Ie,Ce,Pe){!function(tt,ft,bt,Ct){var Vt=b.isPlainObject(Ct);if(!Array.isArray(tt.data))throw new Error("gd.data must be an array");if(!b.isPlainObject(ft))throw new Error("update must be a key:value object");if(void 0===bt)throw new Error("indices must be an integer or array of integers");for(var Ft in D(tt,bt,"indices"),ft){if(!Array.isArray(ft[Ft])||ft[Ft].length!==bt.length)throw new Error("attribute "+Ft+" must be an array of length equal to indices array length");if(Vt&&(!(Ft in Ct)||!Array.isArray(Ct[Ft])||Ct[Ft].length!==ft[Ft].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(ve,Te,Ie,Ce);for(var Ve=function(tt,ft,bt,Ct){var Ft,ht,ut,Rt,nn=b.isPlainObject(Ct),cn=[];for(var Ze in Array.isArray(bt)||(bt=[bt]),bt=R(bt,tt.data.length-1),ft)for(var Qe=0;Qe<bt.length;Qe++){if(Ft=(ht=e(tt.data[bt[Qe]],Ze)).get(),!b.isArrayOrTypedArray(ut=ft[Ze][Qe]))throw new Error("attribute: "+Ze+" index: "+Qe+" must be an array");if(!b.isArrayOrTypedArray(Ft))throw new Error("cannot extend missing or non-array attribute: "+Ze);if(Ft.constructor!==ut.constructor)throw new Error("cannot extend array with an array of a different type: "+Ze);x(Rt=nn?Ct[Ze][Qe]:Ct)||(Rt=-1),cn.push({prop:ht,target:Ft,insert:ut,maxp:Math.floor(Rt)})}return cn}(ve,Te,Ie,Ce),qe={},Je={},lt=0;lt<Ve.length;lt++){var He=Ve[lt].prop,et=Pe(Ve[lt].target,Ve[lt].insert,Ve[lt].maxp);He.set(et[0]),Array.isArray(qe[He.astr])||(qe[He.astr]=[]),qe[He.astr].push(et[1]),Array.isArray(Je[He.astr])||(Je[He.astr]=[]),Je[He.astr].push(Ve[lt].target.length)}return{update:qe,maxPoints:Je}}function V(ve,Te){var Ie=new ve.constructor(ve.length+Te.length);return Ie.set(ve),Ie.set(Te,ve.length),Ie}function Z(ve,Te,Ie,Ce){ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve);var Pe={};if("string"==typeof Te)Pe[Te]=Ie;else{if(!b.isPlainObject(Te))return b.warn("Restyle fail.",Te,Ie,Ce),Promise.reject();Pe=b.extendFlat({},Te),void 0===Ce&&(Ce=Ie)}Object.keys(Pe).length&&(ve.changed=!0);var Ve=w.coerceTraceIndices(ve,Ce),qe=$(ve,Pe,Ve),Je=qe.flags;Je.calc&&(ve.calcdata=void 0),Je.clearAxisTypes&&w.clearAxisTypes(ve,Ve,{});var lt=[];Je.fullReplot?lt.push(ie._doPlot):(lt.push(d.previousPromises),d.supplyDefaults(ve),Je.markerSize&&(d.doCalcdata(ve),H(lt)),Je.style&&lt.push(v.doTraceStyle),Je.colorbars&&lt.push(v.doColorBars),lt.push(E)),lt.push(d.rehover,d.redrag),t.add(ve,Z,[ve,qe.undoit,qe.traces],Z,[ve,qe.redoit,qe.traces]);var He=b.syncOrAsync(lt,ve);return He&&He.then||(He=Promise.resolve()),He.then(function(){return ve.emit("plotly_restyle",qe.eventData),ve})}function Y(ve){return void 0===ve?null:ve}function ee(ve,Te){return Te?function(Ie,Ce,Pe){var Ve=e(Ie,Ce),qe=Ve.set;return Ve.set=function(Je){Q((Pe||"")+Ce,Ve.get(),Je,ve),qe(Je)},Ve}:e}function Q(ve,Te,Ie,Ce){if(Array.isArray(Te)||Array.isArray(Ie))for(var Pe=Array.isArray(Te)?Te:[],Ve=Array.isArray(Ie)?Ie:[],qe=Math.max(Pe.length,Ve.length),Je=0;Je<qe;Je++)Q(ve+"["+Je+"]",Pe[Je],Ve[Je],Ce);else if(b.isPlainObject(Te)||b.isPlainObject(Ie)){var lt=b.isPlainObject(Te)?Te:{},He=b.isPlainObject(Ie)?Ie:{},$e=b.extendFlat({},lt,He);for(var et in $e)Q(ve+"."+et,lt[et],He[et],Ce)}else void 0===Ce[ve]&&(Ce[ve]=Y(Te))}function $(ve,Te,Ie){var Ce,Pe=ve._fullLayout,Ve=ve._fullData,qe=ve.data,Je=Pe._guiEditing,lt=ee(Pe._preGUI,Je),He=b.extendDeepAll({},Te);K(Te);var $e,et=A.traceFlags(),tt={},ft={};function bt(){return Ie.map(function(){})}function Ct(Dt){var Ht=s.id2name(Dt);-1===$e.indexOf(Ht)&&$e.push(Ht)}function Vt(Dt){return"LAYOUT"+Dt+".autorange"}function Ft(Dt){return"LAYOUT"+Dt+".range"}function ht(Dt){for(var Ht=Dt;Ht<Ve.length;Ht++)if(Ve[Ht]._input===qe[Dt])return Ve[Ht]}function ut(Dt,Ht,Jt){if(Array.isArray(Dt))Dt.forEach(function(sn){ut(sn,Ht,Jt)});else if(!(Dt in Te)&&!w.hasParent(Te,Dt)){var gn;if("LAYOUT"===Dt.substr(0,6))gn=lt(ve.layout,Dt.replace("LAYOUT",""));else{var Qt=Ie[Jt];gn=ee(Pe._tracePreGUI[ht(Qt)._fullInput.uid],Je)(qe[Qt],Dt)}Dt in ft||(ft[Dt]=bt()),void 0===ft[Dt][Jt]&&(ft[Dt][Jt]=Y(gn.get())),void 0!==Ht&&gn.set(Ht)}}function Rt(Dt){return function(Ht){return Ve[Ht][Dt]}}function nn(Dt){return function(Ht,Jt){return!1===Ht?Ve[Ie[Jt]][Dt]:null}}for(var cn in Te){if(w.hasParent(Te,cn))throw new Error("cannot set "+cn+" and a parent attribute simultaneously");var Ze,Qe,Ge,rt,Le,ze,je=Te[cn];if("autobinx"!==cn&&"autobiny"!==cn||(cn=cn.charAt(cn.length-1)+"bins",je=Array.isArray(je)?je.map(nn(cn)):!1===je?Ie.map(Rt(cn)):null),tt[cn]=je,"LAYOUT"!==cn.substr(0,6)){for(ft[cn]=bt(),Ce=0;Ce<Ie.length;Ce++)if(Ze=qe[Ie[Ce]],Qe=ht(Ie[Ce]),rt=(Ge=ee(Pe._tracePreGUI[Qe._fullInput.uid],Je)(Ze,cn)).get(),void 0!==(Le=Array.isArray(je)?je[Ce%je.length]:je)){var Ne=Ge.parts[Ge.parts.length-1],st=cn.substr(0,cn.length-Ne.length-1),mt=st?st+".":"",Tt=st?e(Qe,st).get():Qe;if((ze=n.getTraceValObject(Qe,Ge.parts))&&ze.impliedEdits&&null!==Le)for(var xt in ze.impliedEdits)ut(b.relativeAttr(cn,xt),ze.impliedEdits[xt],Ce);else if("thicknessmode"!==Ne&&"lenmode"!==Ne||rt===Le||"fraction"!==Le&&"pixels"!==Le||!Tt){if("type"===cn&&("pie"===Le!=("pie"===rt)||"funnelarea"===Le!=("funnelarea"===rt))){var zt="x",gt="y";"bar"!==Le&&"bar"!==rt||"h"!==Ze.orientation||(zt="y",gt="x"),b.swapAttrs(Ze,["?","?src"],"labels",zt),b.swapAttrs(Ze,["d?","?0"],"label",zt),b.swapAttrs(Ze,["?","?src"],"values",gt),"pie"===rt||"funnelarea"===rt?(e(Ze,"marker.color").set(e(Ze,"marker.colors").get()),Pe._pielayer.selectAll("g.trace").remove()):a.traceIs(Ze,"cartesian")&&e(Ze,"marker.colors").set(e(Ze,"marker.color").get())}}else{var Bt=Pe._size,jt=Tt.orient,it="top"===jt||"bottom"===jt;if("thicknessmode"===Ne){var Mt=it?Bt.h:Bt.w;ut(mt+"thickness",Tt.thickness*("fraction"===Le?1/Mt:Mt),Ce)}else{var qt=it?Bt.w:Bt.h;ut(mt+"len",Tt.len*("fraction"===Le?1/qt:qt),Ce)}}if(ft[cn][Ce]=Y(rt),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(cn)){if("orientation"===cn){Ge.set(Le);var Wt=Ze.x&&!Ze.y?"h":"v";if((Ge.get()||Wt)===Qe.orientation)continue}else"orientationaxes"===cn&&(Ze.orientation={v:"h",h:"v"}[Qe.orientation]);w.swapXYData(Ze),et.calc=et.clearAxisTypes=!0}else-1!==d.dataArrayContainers.indexOf(Ge.parts[0])?(w.manageArrayContainers(Ge,Le,ft),et.calc=!0):(ze?ze.arrayOk&&!a.traceIs(Qe,"regl")&&(b.isArrayOrTypedArray(Le)||b.isArrayOrTypedArray(rt))?et.calc=!0:A.update(et,ze):et.calc=!0,Ge.set(Le))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(cn)&&s.swap(ve,Ie),"orientationaxes"===cn){var an=e(ve.layout,"hovermode"),Ue=an.get();"x"===Ue?an.set("y"):"y"===Ue?an.set("x"):"x unified"===Ue?an.set("y unified"):"y unified"===Ue&&an.set("x unified")}if(-1!==["orientation","type"].indexOf(cn)){for($e=[],Ce=0;Ce<Ie.length;Ce++){var yt=qe[Ie[Ce]];a.traceIs(yt,"cartesian")&&(Ct(yt.xaxis||"x"),Ct(yt.yaxis||"y"))}ut($e.map(Vt),!0,0),ut($e.map(Ft),[0,1],0)}}else Ge=lt(ve.layout,cn.replace("LAYOUT","")),ft[cn]=[Y(Ge.get())],Ge.set(Array.isArray(je)?je[0]:je),et.calc=!0}return(et.calc||et.plot)&&(et.fullReplot=!0),{flags:et,undoit:ft,redoit:tt,traces:Ie,eventData:b.extendDeepNoArrays([],[He,Ie])}}function K(ve){var Te,Ie,Ce,Pe=b.counterRegex("axis",".title",!1,!1),Ve=/colorbar\.title$/,qe=Object.keys(ve);for(Te=0;Te<qe.length;Te++)Ce=ve[Ie=qe[Te]],"title"!==Ie&&!Pe.test(Ie)&&!Ve.test(Ie)||"string"!=typeof Ce&&"number"!=typeof Ce?Ie.indexOf("titlefont")>-1&&-1===Ie.indexOf("grouptitlefont")?Je(Ie,Ie.replace("titlefont","title.font")):Ie.indexOf("titleposition")>-1?Je(Ie,Ie.replace("titleposition","title.position")):Ie.indexOf("titleside")>-1?Je(Ie,Ie.replace("titleside","title.side")):Ie.indexOf("titleoffset")>-1&&Je(Ie,Ie.replace("titleoffset","title.offset")):Je(Ie,Ie.replace("title","title.text"));function Je(lt,He){ve[He]=ve[lt],delete ve[lt]}}function oe(ve,Te,Ie){ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve);var Ce={};if("string"==typeof Te)Ce[Te]=Ie;else{if(!b.isPlainObject(Te))return b.warn("Relayout fail.",Te,Ie),Promise.reject();Ce=b.extendFlat({},Te)}Object.keys(Ce).length&&(ve.changed=!0);var Pe=te(ve,Ce),Ve=Pe.flags;Ve.calc&&(ve.calcdata=void 0);var qe=[d.previousPromises];Ve.layoutReplot?qe.push(v.layoutReplot):Object.keys(Ce).length&&(j(ve,Ve,Pe)||d.supplyDefaults(ve),Ve.legend&&qe.push(v.doLegend),Ve.layoutstyle&&qe.push(v.layoutStyles),Ve.axrange&&H(qe,Pe.rangesAltered),Ve.ticks&&qe.push(v.doTicksRelayout),Ve.modebar&&qe.push(v.doModeBar),Ve.camera&&qe.push(v.doCamera),Ve.colorbars&&qe.push(v.doColorBars),qe.push(E)),qe.push(d.rehover,d.redrag),t.add(ve,oe,[ve,Pe.undoit],oe,[ve,Pe.redoit]);var Je=b.syncOrAsync(qe,ve);return Je&&Je.then||(Je=Promise.resolve(ve)),Je.then(function(){return ve.emit("plotly_relayout",Pe.eventData),ve})}function j(ve,Te,Ie){var Ce=ve._fullLayout;if(!Te.axrange)return!1;for(var Pe in Te)if("axrange"!==Pe&&Te[Pe])return!1;for(var Ve in Ie.rangesAltered){var qe=s.id2name(Ve),Je=ve.layout[qe],lt=Ce[qe];if(lt.autorange=Je.autorange,Je.range&&(lt.range=Je.range.slice()),lt.cleanRange(),lt._matchGroup)for(var He in lt._matchGroup)if(He!==Ve){var $e=Ce[s.id2name(He)];$e.autorange=lt.autorange,$e.range=lt.range.slice(),$e._input.range=lt.range.slice()}}return!0}function H(ve,Te){ve.push(y,v.doAutoRangeAndConstraints,Te?function(Ce){var Pe=[],Ve=!0;for(var qe in Te){var Je=s.getFromId(Ce,qe);if(Pe.push(qe),-1!==(Je.ticklabelposition||"").indexOf("inside")&&Je._anchorAxis&&Pe.push(Je._anchorAxis._id),Je._matchGroup)for(var lt in Je._matchGroup)Te[lt]||Pe.push(lt);Je.automargin&&(Ve=!1)}return s.draw(Ce,Pe,{skipTitle:Ve})}:function(Ce){return s.draw(Ce,"redraw")},v.drawData,v.finalDraw)}var G=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,re=/^[xyz]axis[0-9]*\.autorange$/,q=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function te(ve,Te){var Ie,Ce,Pe,Ve=ve.layout,qe=ve._fullLayout,lt=ee(qe._preGUI,qe._guiEditing),He=Object.keys(Te),$e=s.list(ve),et=b.extendDeepAll({},Te),tt={};for(K(Te),He=Object.keys(Te),Ce=0;Ce<He.length;Ce++)if(0===He[Ce].indexOf("allaxes")){for(Pe=0;Pe<$e.length;Pe++){var ft=$e[Pe]._id.substr(1),bt=-1!==ft.indexOf("scene")?ft+".":"",Ct=He[Ce].replace("allaxes",bt+$e[Pe]._name);Te[Ct]||(Te[Ct]=Te[He[Ce]])}delete Te[He[Ce]]}var Vt=A.layoutFlags(),Ft={},ht={};function ut(Qt,sn){if(Array.isArray(Qt))Qt.forEach(function(Dn){ut(Dn,sn)});else if(!(Qt in Te)&&!w.hasParent(Te,Qt)){var hn=lt(Ve,Qt);Qt in ht||(ht[Qt]=Y(hn.get())),void 0!==sn&&hn.set(sn)}}var Rt,nn={};function cn(Qt){var sn=s.name2id(Qt.split(".")[0]);return nn[sn]=1,sn}for(var Ze in Te){if(w.hasParent(Te,Ze))throw new Error("cannot set "+Ze+" and a parent attribute simultaneously");for(var Qe=lt(Ve,Ze),Ge=Te[Ze],rt=Qe.parts.length-1;rt>0&&"string"!=typeof Qe.parts[rt];)rt--;var Le=Qe.parts[rt],ze=Qe.parts[rt-1]+"."+Le,je=Qe.parts.slice(0,rt).join("."),Ne=e(ve.layout,je).get(),st=e(qe,je).get(),mt=Qe.get();if(void 0!==Ge){Ft[Ze]=Ge,ht[Ze]="reverse"===Le?Ge:Y(mt);var Tt=n.getLayoutValObject(qe,Qe.parts);if(Tt&&Tt.impliedEdits&&null!==Ge)for(var xt in Tt.impliedEdits)ut(b.relativeAttr(Ze,xt),Tt.impliedEdits[xt]);if(-1!==["width","height"].indexOf(Ze))if(Ge){ut("autosize",null);var zt="height"===Ze?"width":"height";ut(zt,qe[zt])}else qe[Ze]=ve._initialAutoSize[Ze];else if("autosize"===Ze)ut("width",Ge?null:qe.width),ut("height",Ge?null:qe.height);else if(ze.match(G))cn(ze),e(qe,je+"._inputRange").set(null);else if(ze.match(re)){cn(ze),e(qe,je+"._inputRange").set(null);var gt=e(qe,je).get();gt._inputDomain&&(gt._input.domain=gt._inputDomain.slice())}else ze.match(q)&&e(qe,je+"._inputDomain").set(null);if("type"===Le){Rt=Ne;var Bt="linear"===st.type&&"log"===Ge;if(Bt||"log"===st.type&&"linear"===Ge){if(Rt&&Rt.range)if(st.autorange)Bt&&(Rt.range=Rt.range[1]>Rt.range[0]?[1,2]:[2,1]);else{var it=Rt.range[0],Mt=Rt.range[1];Bt?(it<=0&&Mt<=0&&ut(je+".autorange",!0),it<=0?it=Mt/1e6:Mt<=0&&(Mt=it/1e6),ut(je+".range[0]",Math.log(it)/Math.LN10),ut(je+".range[1]",Math.log(Mt)/Math.LN10)):(ut(je+".range[0]",Math.pow(10,it)),ut(je+".range[1]",Math.pow(10,Mt)))}else ut(je+".autorange",!0);Array.isArray(qe._subplots.polar)&&qe._subplots.polar.length&&qe[Qe.parts[0]]&&"radialaxis"===Qe.parts[1]&&delete qe[Qe.parts[0]]._subplot.viewInitial["radialaxis.range"],a.getComponentMethod("annotations","convertCoords")(ve,st,Ge,ut),a.getComponentMethod("images","convertCoords")(ve,st,Ge,ut)}else ut(je+".autorange",!0),ut(je+".range",null);e(qe,je+"._inputRange").set(null)}else if(Le.match(M)){var qt=e(qe,Ze).get(),Wt=(Ge||{}).type;Wt&&"-"!==Wt||(Wt="linear"),a.getComponentMethod("annotations","convertCoords")(ve,qt,Wt,ut),a.getComponentMethod("images","convertCoords")(ve,qt,Wt,ut)}var an=l.containerArrayMatch(Ze);if(an){Ie=an.array;var Ue=an.property,yt=Tt||{editType:"calc"};""!==(Ce=an.index)&&""===Ue&&(l.isAddVal(Ge)?ht[Ze]=null:l.isRemoveVal(Ge)?ht[Ze]=(e(Ve,Ie).get()||[])[Ce]:b.warn("unrecognized full object value",Te)),A.update(Vt,yt),tt[Ie]||(tt[Ie]={});var Dt=tt[Ie][Ce];Dt||(Dt=tt[Ie][Ce]={}),Dt[Ue]=Ge,delete Te[Ze]}else"reverse"===Le?(Ne.range?Ne.range.reverse():(ut(je+".autorange",!0),Ne.range=[1,0]),st.autorange?Vt.calc=!0:Vt.plot=!0):(qe._has("scatter-like")&&qe._has("regl")&&"dragmode"===Ze&&("lasso"===Ge||"select"===Ge)&&"lasso"!==mt&&"select"!==mt||qe._has("gl2d")?Vt.plot=!0:Tt?A.update(Vt,Tt):Vt.calc=!0,Qe.set(Ge))}}for(Ie in tt)l.applyContainerArrayChanges(ve,lt(Ve,Ie),tt[Ie],Vt,lt)||(Vt.plot=!0);for(var Ht in nn){var Jt=(Rt=s.getFromId(ve,Ht))&&Rt._constraintGroup;if(Jt)for(var gn in Vt.calc=!0,Jt)nn[gn]||(s.getFromId(ve,gn)._constraintShrinkable=!0)}return(ne(ve)||Te.height||Te.width)&&(Vt.plot=!0),(Vt.plot||Vt.calc)&&(Vt.layoutReplot=!0),{flags:Vt,rangesAltered:nn,undoit:ht,redoit:Ft,eventData:et}}function ne(ve){var Te=ve._fullLayout,Ie=Te.width,Ce=Te.height;return ve.layout.autosize&&d.plotAutoSize(ve,ve.layout,Te),Te.width!==Ie||Te.height!==Ce}function le(ve,Te,Ie,Ce){ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve),b.isPlainObject(Te)||(Te={}),b.isPlainObject(Ie)||(Ie={}),Object.keys(Te).length&&(ve.changed=!0),Object.keys(Ie).length&&(ve.changed=!0);var Pe=w.coerceTraceIndices(ve,Ce),Ve=$(ve,b.extendFlat({},Te),Pe),qe=Ve.flags,Je=te(ve,b.extendFlat({},Ie)),lt=Je.flags;(qe.calc||lt.calc)&&(ve.calcdata=void 0),qe.clearAxisTypes&&w.clearAxisTypes(ve,Pe,Ie);var He=[];lt.layoutReplot?He.push(v.layoutReplot):qe.fullReplot?He.push(ie._doPlot):(He.push(d.previousPromises),j(ve,lt,Je)||d.supplyDefaults(ve),qe.style&&He.push(v.doTraceStyle),(qe.colorbars||lt.colorbars)&&He.push(v.doColorBars),lt.legend&&He.push(v.doLegend),lt.layoutstyle&&He.push(v.layoutStyles),lt.axrange&&H(He,Je.rangesAltered),lt.ticks&&He.push(v.doTicksRelayout),lt.modebar&&He.push(v.doModeBar),lt.camera&&He.push(v.doCamera),He.push(E)),He.push(d.rehover,d.redrag),t.add(ve,le,[ve,Ve.undoit,Je.undoit,Ve.traces],le,[ve,Ve.redoit,Je.redoit,Ve.traces]);var $e=b.syncOrAsync(He,ve);return $e&&$e.then||($e=Promise.resolve(ve)),$e.then(function(){return ve.emit("plotly_update",{data:Ve.eventData,layout:Je.eventData}),ve})}function ue(ve){return function(Te){Te._fullLayout._guiEditing=!0;var Ie=ve.apply(null,arguments);return Te._fullLayout._guiEditing=!1,Ie}}var de=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],he=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function be(ve,Te){for(var Ie=0;Ie<Te.length;Ie++){var Ce=Te[Ie],Pe=ve.match(Ce.pattern);if(Pe){var Ve=Pe[1]||"";return{head:Ve,tail:ve.substr(Ve.length+1),attr:Ce.attr}}}}function ge(ve,Te){var Ie=e(Te,ve).get();if(void 0!==Ie)return Ie;var Ce=ve.split(".");for(Ce.pop();Ce.length>1;)if(Ce.pop(),void 0!==(Ie=e(Te,Ce.join(".")+".uirevision").get()))return Ie;return Te.uirevision}function we(ve,Te){for(var Ie=0;Ie<Te.length;Ie++)if(Te[Ie]._fullInput.uid===ve)return Ie;return-1}function ke(ve,Te,Ie){for(var Ce=0;Ce<Te.length;Ce++)if(Te[Ce].uid===ve)return Ce;return!Te[Ie]||Te[Ie].uid?-1:Ie}function De(ve,Te){var Ie=b.isPlainObject(ve),Ce=Array.isArray(ve);return Ie||Ce?(Ie&&b.isPlainObject(Te)||Ce&&Array.isArray(Te))&&JSON.stringify(ve)===JSON.stringify(Te):ve===Te}function Ee(ve,Te,Ie,Ce){var Pe,Ve,qe,Je=Ce.getValObject,lt=Ce.flags,He=Ce.immutable,$e=Ce.inArray,et=Ce.arrayIndex;function tt(){var Ne=Pe.editType;$e&&-1!==Ne.indexOf("arraydraw")?b.pushUnique(lt.arrays[$e],et):(A.update(lt,Pe),"none"!==Ne&&lt.nChanges++,Ce.transition&&Pe.anim&&lt.nChangesAnim++,(G.test(qe)||re.test(qe))&&(lt.rangesAltered[Ie[0]]=1),q.test(qe)&&e(Te,"_inputDomain").set(null),"datarevision"===Ve&&(lt.newDataRevision=1))}function ft(Ne){return"data_array"===Ne.valType||Ne.arrayOk}for(Ve in ve){if(lt.calc&&!Ce.transition)return;var bt=ve[Ve],Ct=Te[Ve],Vt=Ie.concat(Ve);if(qe=Vt.join("."),"_"!==Ve.charAt(0)&&"function"!=typeof bt&&bt!==Ct){if(("tick0"===Ve||"dtick"===Ve)&&"geo"!==Ie[0]){var Ft=Te.tickmode;if("auto"===Ft||"array"===Ft||!Ft)continue}if(("range"!==Ve||!Te.autorange)&&("zmin"!==Ve&&"zmax"!==Ve||"contourcarpet"!==Te.type)&&(Pe=Je(Vt))&&(!Pe._compareAsJSON||JSON.stringify(bt)!==JSON.stringify(Ct))){var ht,ut=Pe.valType,Rt=ft(Pe),nn=Array.isArray(bt),cn=Array.isArray(Ct);if(nn&&cn){var Ze="_input_"+Ve,Qe=ve[Ze],Ge=Te[Ze];if(Array.isArray(Qe)&&Qe===Ge)continue}if(void 0===Ct)Rt&&nn?lt.calc=!0:tt();else if(Pe._isLinkedToArray){var rt=[],Le=!1;$e||(lt.arrays[Ve]=rt);var ze=Math.min(bt.length,Ct.length),je=Math.max(bt.length,Ct.length);if(ze!==je){if("arraydraw"!==Pe.editType){tt();continue}Le=!0}for(ht=0;ht<ze;ht++)Ee(bt[ht],Ct[ht],Vt.concat(ht),b.extendFlat({inArray:Ve,arrayIndex:ht},Ce));if(Le)for(ht=ze;ht<je;ht++)rt.push(ht)}else!ut&&b.isPlainObject(bt)?Ee(bt,Ct,Vt,Ce):Rt?nn&&cn?(He&&(lt.calc=!0),(He||Ce.newDataRevision)&&tt()):nn!==cn?lt.calc=!0:tt():nn&&cn&&bt.length===Ct.length&&String(bt)===String(Ct)||tt()}}}for(Ve in Te)if(!(Ve in ve)&&"_"!==Ve.charAt(0)&&"function"!=typeof Te[Ve]){if(ft(Pe=Je(Ie.concat(Ve)))&&Array.isArray(Te[Ve]))return void(lt.calc=!0);tt()}}function Re(ve){var Te=ve._fullLayout,Ie=ve.getBoundingClientRect();if(!b.equalDomRects(Ie,Te._lastBBox)){var Ce=Te._invTransform=b.inverseTransformMatrix(b.getFullTransformMatrix(ve));Te._invScaleX=Math.sqrt(Ce[0][0]*Ce[0][0]+Ce[0][1]*Ce[0][1]+Ce[0][2]*Ce[0][2]),Te._invScaleY=Math.sqrt(Ce[1][0]*Ce[1][0]+Ce[1][1]*Ce[1][1]+Ce[1][2]*Ce[1][2]),Te._lastBBox=Ie}}ie.animate=function(ve,Te,Ie){if(ve=b.getGraphDiv(ve),!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ce=ve._transitionData;Ce._frameQueue||(Ce._frameQueue=[]);var Pe=(Ie=d.supplyAnimationDefaults(Ie)).transition,Ve=Ie.frame;function qe(He){return Array.isArray(Pe)?He>=Pe.length?Pe[0]:Pe[He]:Pe}function Je(He){return Array.isArray(Ve)?He>=Ve.length?Ve[0]:Ve[He]:Ve}function lt(He,$e){var et=0;return function(){if(He&&++et===$e)return He()}}return void 0===Ce._frameWaitingCnt&&(Ce._frameWaitingCnt=0),new Promise(function(He,$e){function tt(){ve.emit("plotly_animating"),Ce._lastFrameAt=-1/0,Ce._timeToNext=0,Ce._runningTransitions=0,Ce._currentFrame=null;var Qe=function(){Ce._animationRaf=window.requestAnimationFrame(Qe),Date.now()-Ce._lastFrameAt>Ce._timeToNext&&function(){Ce._currentFrame&&Ce._currentFrame.onComplete&&Ce._currentFrame.onComplete();var Qe=Ce._currentFrame=Ce._frameQueue.shift();if(Qe){var Ge=Qe.name?Qe.name.toString():null;ve._fullLayout._currentFrame=Ge,Ce._lastFrameAt=Date.now(),Ce._timeToNext=Qe.frameOpts.duration,d.transition(ve,Qe.frame.data,Qe.frame.layout,w.coerceTraceIndices(ve,Qe.frame.traces),Qe.frameOpts,Qe.transitionOpts).then(function(){Qe.onComplete&&Qe.onComplete()}),ve.emit("plotly_animatingframe",{name:Ge,frame:Qe.frame,animation:{frame:Qe.frameOpts,transition:Qe.transitionOpts}})}else ve.emit("plotly_animated"),window.cancelAnimationFrame(Ce._animationRaf),Ce._animationRaf=null}()};Qe()}var ft,bt,Ct=0;function Vt(Qe){return Qe.transitionOpts=Array.isArray(Pe)?Ct>=Pe.length?Pe[Ct]:Pe[0]:Pe,Ct++,Qe}var Ft=[],ht=null==Te,ut=Array.isArray(Te);if(ht||ut||!b.isPlainObject(Te)){if(ht||-1!==["string","number"].indexOf(typeof Te))for(ft=0;ft<Ce._frames.length;ft++)(bt=Ce._frames[ft])&&(ht||String(bt.group)===String(Te))&&Ft.push({type:"byname",name:String(bt.name),data:Vt({name:bt.name})});else if(ut)for(ft=0;ft<Te.length;ft++){var Rt=Te[ft];-1!==["number","string"].indexOf(typeof Rt)?(Rt=String(Rt),Ft.push({type:"byname",name:Rt,data:Vt({name:Rt})})):b.isPlainObject(Rt)&&Ft.push({type:"object",data:Vt(b.extendFlat({},Rt))})}}else Ft.push({type:"object",data:Vt(b.extendFlat({},Te))});for(ft=0;ft<Ft.length;ft++)if("byname"===(bt=Ft[ft]).type&&!Ce._frameHash[bt.data.name])return b.warn('animate failure: frame not found: "'+bt.data.name+'"'),void $e();-1!==["next","immediate"].indexOf(Ie.mode)&&function(){if(0!==Ce._frameQueue.length){for(;Ce._frameQueue.length;){var Qe=Ce._frameQueue.pop();Qe.onInterrupt&&Qe.onInterrupt()}ve.emit("plotly_animationinterrupted",[])}}(),"reverse"===Ie.direction&&Ft.reverse();var nn=ve._fullLayout._currentFrame;if(nn&&Ie.fromcurrent){var cn=-1;for(ft=0;ft<Ft.length;ft++)if("byname"===(bt=Ft[ft]).type&&bt.name===nn){cn=ft;break}if(cn>0&&cn<Ft.length-1){var Ze=[];for(ft=0;ft<Ft.length;ft++)bt=Ft[ft],("byname"!==Ft[ft].type||ft>cn)&&Ze.push(bt);Ft=Ze}}Ft.length>0?function(Qe){if(0!==Qe.length){for(var Ge=0;Ge<Qe.length;Ge++){var rt;rt="byname"===Qe[Ge].type?d.computeFrame(ve,Qe[Ge].name):Qe[Ge].data;var Le=Je(Ge),ze=qe(Ge);ze.duration=Math.min(ze.duration,Le.duration);var je={frame:rt,name:Qe[Ge].name,frameOpts:Le,transitionOpts:ze};Ge===Qe.length-1&&(je.onComplete=lt(He,2),je.onInterrupt=$e),Ce._frameQueue.push(je)}"immediate"===Ie.mode&&(Ce._lastFrameAt=-1/0),Ce._animationRaf||tt()}}(Ft):(ve.emit("plotly_animated"),He())})},ie.addFrames=function(ve,Te,Ie){if(ve=b.getGraphDiv(ve),null==Te)return Promise.resolve();if(!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ce,Pe,Ve,qe,Je=ve._transitionData._frames,lt=ve._transitionData._frameHash;if(!Array.isArray(Te))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Te);var He=Je.length+2*Te.length,$e=[],et={};for(Ce=Te.length-1;Ce>=0;Ce--)if(b.isPlainObject(Te[Ce])){var tt=Te[Ce].name,ft=(lt[tt]||et[tt]||{}).name,bt=Te[Ce].name;ft&&bt&&"number"==typeof bt&&(lt[ft]||et[ft])&&k<5&&(k++,b.warn('addFrames: overwriting frame "'+(lt[ft]||et[ft]).name+'" with a frame whose name of type "number" also equates to "'+ft+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===k&&b.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),et[tt]={name:tt},$e.push({frame:d.supplyFrameDefaults(Te[Ce]),index:Ie&&null!=Ie[Ce]?Ie[Ce]:He+Ce})}$e.sort(function(Ze,Qe){return Ze.index>Qe.index?-1:Ze.index<Qe.index?1:0});var Vt=[],Ft=[],ht=Je.length;for(Ce=$e.length-1;Ce>=0;Ce--){if("number"==typeof(Pe=$e[Ce].frame).name&&b.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Pe.name)for(;lt[Pe.name="frame "+ve._transitionData._counter++];);if(lt[Pe.name]){for(Ve=0;Ve<Je.length&&(Je[Ve]||{}).name!==Pe.name;Ve++);Vt.push({type:"replace",index:Ve,value:Pe}),Ft.unshift({type:"replace",index:Ve,value:Je[Ve]})}else qe=Math.max(0,Math.min($e[Ce].index,ht)),Vt.push({type:"insert",index:qe,value:Pe}),Ft.unshift({type:"delete",index:qe}),ht++}return t&&t.add(ve,d.modifyFrames,[ve,Ft],d.modifyFrames,[ve,Vt]),d.modifyFrames(ve,Vt)},ie.deleteFrames=function(ve,Te){if(ve=b.getGraphDiv(ve),!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);var Ie,Ce,Pe=ve._transitionData._frames,Ve=[],qe=[];if(!Te)for(Te=[],Ie=0;Ie<Pe.length;Ie++)Te.push(Ie);for((Te=Te.slice()).sort(),Ie=Te.length-1;Ie>=0;Ie--)Ve.push({type:"delete",index:Ce=Te[Ie]}),qe.unshift({type:"insert",index:Ce,value:Pe[Ce]});return t&&t.add(ve,d.modifyFrames,[ve,qe],d.modifyFrames,[ve,Ve]),d.modifyFrames(ve,Ve)},ie.addTraces=function ve(Te,Ie,Ce){Te=b.getGraphDiv(Te);var Pe,Ve,qe=[],Je=ie.deleteTraces,lt=ve,He=[Te,qe],$e=[Te,Ie];for(function(et,tt,ft){var bt,Ct;if(!Array.isArray(et.data))throw new Error("gd.data must be an array.");if(void 0===tt)throw new Error("traces must be defined.");for(Array.isArray(tt)||(tt=[tt]),bt=0;bt<tt.length;bt++)if("object"!=typeof(Ct=tt[bt])||Array.isArray(Ct)||null===Ct)throw new Error("all values in traces array must be non-array objects");if(void 0===ft||Array.isArray(ft)||(ft=[ft]),void 0!==ft&&ft.length!==tt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Te,Ie,Ce),Array.isArray(Ie)||(Ie=[Ie]),Ie=Ie.map(function(et){return b.extendFlat({},et)}),w.cleanData(Ie),Pe=0;Pe<Ie.length;Pe++)Te.data.push(Ie[Pe]);for(Pe=0;Pe<Ie.length;Pe++)qe.push(-Ie.length+Pe);if(void 0===Ce)return Ve=ie.redraw(Te),t.add(Te,Je,He,lt,$e),Ve;Array.isArray(Ce)||(Ce=[Ce]);try{L(Te,qe,Ce)}catch(et){throw Te.data.splice(Te.data.length-Ie.length,Ie.length),et}return t.startSequence(Te),t.add(Te,Je,He,lt,$e),Ve=ie.moveTraces(Te,qe,Ce),t.stopSequence(Te),Ve},ie.deleteTraces=function ve(Te,Ie){Te=b.getGraphDiv(Te);var Ce,Pe,Ve=[],qe=ie.addTraces,Je=ve,lt=[Te,Ve,Ie],He=[Te,Ie];if(void 0===Ie)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ie)||(Ie=[Ie]),D(Te,Ie,"indices"),(Ie=R(Ie,Te.data.length-1)).sort(b.sorterDes),Ce=0;Ce<Ie.length;Ce+=1)Pe=Te.data.splice(Ie[Ce],1)[0],Ve.push(Pe);var $e=ie.redraw(Te);return t.add(Te,qe,lt,Je,He),$e},ie.extendTraces=function ve(Te,Ie,Ce,Pe){function Ve(He,$e,et){var tt,ft;if(b.isTypedArray(He))if(et<0){var bt=new He.constructor(0),Ct=V(He,$e);et<0?(tt=Ct,ft=bt):(tt=bt,ft=Ct)}else if(tt=new He.constructor(et),ft=new He.constructor(He.length+$e.length-et),et===$e.length)tt.set($e),ft.set(He);else if(et<$e.length){var Vt=$e.length-et;tt.set($e.subarray(Vt)),ft.set(He),ft.set($e.subarray(0,Vt),He.length)}else{var Ft=et-$e.length,ht=He.length-Ft;tt.set(He.subarray(ht)),tt.set($e,Ft),ft.set(He.subarray(0,ht))}else tt=He.concat($e),ft=et>=0&&et<tt.length?tt.splice(0,tt.length-et):[];return[tt,ft]}var qe=B(Te=b.getGraphDiv(Te),Ie,Ce,Pe,Ve),Je=ie.redraw(Te);return t.add(Te,ie.prependTraces,[Te,qe.update,Ce,qe.maxPoints],ve,arguments),Je},ie.moveTraces=function ve(Te,Ie,Ce){var Pe,Ve=[],qe=[],Je=ve,lt=ve,He=[Te=b.getGraphDiv(Te),Ce,Ie],$e=[Te,Ie,Ce];if(L(Te,Ie,Ce),Ie=Array.isArray(Ie)?Ie:[Ie],void 0===Ce)for(Ce=[],Pe=0;Pe<Ie.length;Pe++)Ce.push(-Ie.length+Pe);for(Ce=Array.isArray(Ce)?Ce:[Ce],Ie=R(Ie,Te.data.length-1),Ce=R(Ce,Te.data.length-1),Pe=0;Pe<Te.data.length;Pe++)-1===Ie.indexOf(Pe)&&Ve.push(Te.data[Pe]);for(Pe=0;Pe<Ie.length;Pe++)qe.push({newIndex:Ce[Pe],trace:Te.data[Ie[Pe]]});for(qe.sort(function(tt,ft){return tt.newIndex-ft.newIndex}),Pe=0;Pe<qe.length;Pe+=1)Ve.splice(qe[Pe].newIndex,0,qe[Pe].trace);Te.data=Ve;var et=ie.redraw(Te);return t.add(Te,Je,He,lt,$e),et},ie.prependTraces=function ve(Te,Ie,Ce,Pe){function Ve(He,$e,et){var tt,ft;if(b.isTypedArray(He))if(et<=0){var bt=new He.constructor(0),Ct=V($e,He);et<0?(tt=Ct,ft=bt):(tt=bt,ft=Ct)}else if(tt=new He.constructor(et),ft=new He.constructor(He.length+$e.length-et),et===$e.length)tt.set($e),ft.set(He);else if(et<$e.length){var Vt=$e.length-et;tt.set($e.subarray(0,Vt)),ft.set($e.subarray(Vt)),ft.set(He,Vt)}else{var Ft=et-$e.length;tt.set($e),tt.set(He.subarray(0,Ft),$e.length),ft.set(He.subarray(Ft))}else tt=$e.concat(He),ft=et>=0&&et<tt.length?tt.splice(et,tt.length):[];return[tt,ft]}var qe=B(Te=b.getGraphDiv(Te),Ie,Ce,Pe,Ve),Je=ie.redraw(Te);return t.add(Te,ie.extendTraces,[Te,qe.update,Ce,qe.maxPoints],ve,arguments),Je},ie.newPlot=function(ve,Te,Ie,Ce){return ve=b.getGraphDiv(ve),d.cleanPlot([],{},ve._fullData||[],ve._fullLayout||{}),d.purge(ve),ie._doPlot(ve,Te,Ie,Ce)},ie._doPlot=function(ve,Te,Ie,Ce){var Pe;if(ve=b.getGraphDiv(ve),r.init(ve),b.isPlainObject(Te)){var Ve=Te;Te=Ve.data,Ie=Ve.layout,Ce=Ve.config,Pe=Ve.frames}if(!1===r.triggerHandler(ve,"plotly_beforeplot",[Te,Ie,Ce]))return Promise.reject();Te||Ie||b.isPlotDiv(ve)||b.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ve),F(ve,Ce),Ie||(Ie={}),g.select(ve).classed("js-plotly-plot",!0),i.makeTester(),Array.isArray(ve._promises)||(ve._promises=[]);var qe=0===(ve.data||[]).length&&Array.isArray(Te);Array.isArray(Te)&&(w.cleanData(Te),qe?ve.data=Te:ve.data.push.apply(ve.data,Te),ve.empty=!1),ve.layout&&!qe||(ve.layout=w.cleanLayout(Ie)),d.supplyDefaults(ve);var Je=ve._fullLayout,lt=Je._has("cartesian");Je._replotting=!0,(qe||Je._shouldCreateBgLayer)&&(function(Ft){var ht=g.select(Ft),ut=Ft._fullLayout;if(ut._calcInverseTransform=Re,ut._calcInverseTransform(Ft),ut._container=ht.selectAll(".plot-container").data([0]),ut._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),ut._paperdiv=ut._container.selectAll(".svg-container").data([0]),ut._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),ut._glcontainer=ut._paperdiv.selectAll(".gl-container").data([{}]),ut._glcontainer.enter().append("div").classed("gl-container",!0),ut._paperdiv.selectAll(".main-svg").remove(),ut._paperdiv.select(".modebar-container").remove(),ut._paper=ut._paperdiv.insert("svg",":first-child").classed("main-svg",!0),ut._toppaper=ut._paperdiv.append("svg").classed("main-svg",!0),ut._modebardiv=ut._paperdiv.append("div"),delete ut._modeBar,ut._hoverpaper=ut._paperdiv.append("svg").classed("main-svg",!0),!ut._uid){var Rt={};g.selectAll("defs").each(function(){this.id&&(Rt[this.id.split("-")[1]]=1)}),ut._uid=b.randstr(Rt)}ut._paperdiv.selectAll(".main-svg").attr(p.svgAttrs),ut._defs=ut._paper.append("defs").attr("id","defs-"+ut._uid),ut._clips=ut._defs.append("g").classed("clips",!0),ut._topdefs=ut._toppaper.append("defs").attr("id","topdefs-"+ut._uid),ut._topclips=ut._topdefs.append("g").classed("clips",!0),ut._bgLayer=ut._paper.append("g").classed("bglayer",!0),ut._draggers=ut._paper.append("g").classed("draglayer",!0);var nn=ut._paper.append("g").classed("layer-below",!0);ut._imageLowerLayer=nn.append("g").classed("imagelayer",!0),ut._shapeLowerLayer=nn.append("g").classed("shapelayer",!0),ut._cartesianlayer=ut._paper.append("g").classed("cartesianlayer",!0),ut._polarlayer=ut._paper.append("g").classed("polarlayer",!0),ut._smithlayer=ut._paper.append("g").classed("smithlayer",!0),ut._ternarylayer=ut._paper.append("g").classed("ternarylayer",!0),ut._geolayer=ut._paper.append("g").classed("geolayer",!0),ut._funnelarealayer=ut._paper.append("g").classed("funnelarealayer",!0),ut._pielayer=ut._paper.append("g").classed("pielayer",!0),ut._iciclelayer=ut._paper.append("g").classed("iciclelayer",!0),ut._treemaplayer=ut._paper.append("g").classed("treemaplayer",!0),ut._sunburstlayer=ut._paper.append("g").classed("sunburstlayer",!0),ut._indicatorlayer=ut._toppaper.append("g").classed("indicatorlayer",!0),ut._glimages=ut._paper.append("g").classed("glimages",!0);var cn=ut._toppaper.append("g").classed("layer-above",!0);ut._imageUpperLayer=cn.append("g").classed("imagelayer",!0),ut._shapeUpperLayer=cn.append("g").classed("shapelayer",!0),ut._infolayer=ut._toppaper.append("g").classed("infolayer",!0),ut._menulayer=ut._toppaper.append("g").classed("menulayer",!0),ut._zoomlayer=ut._toppaper.append("g").classed("zoomlayer",!0),ut._hoverlayer=ut._hoverpaper.append("g").classed("hoverlayer",!0),ut._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ft.emit("plotly_framework")}(ve),Je._shouldCreateBgLayer&&delete Je._shouldCreateBgLayer),i.initGradients(ve),i.initPatterns(ve),qe&&s.saveShowSpikeInitial(ve);var He=!ve.calcdata||ve.calcdata.length!==(ve._fullData||[]).length;He&&d.doCalcdata(ve);for(var $e=0;$e<ve.calcdata.length;$e++)ve.calcdata[$e][0].trace=ve._fullData[$e];ve._context.responsive?ve._responsiveChartHandler||(ve._responsiveChartHandler=function(){b.isHidden(ve)||d.resize(ve)},window.addEventListener("resize",ve._responsiveChartHandler)):b.clearResponsive(ve);var et=b.extendFlat({},Je._size),tt=0;function ft(){if(d.clearAutoMarginIds(ve),v.drawMarginPushers(ve),s.allowAutoMargin(ve),Je._has("pie"))for(var Ft=ve._fullData,ht=0;ht<Ft.length;ht++){var ut=Ft[ht];"pie"===ut.type&&ut.automargin&&d.allowAutoMargin(ve,"pie."+ut.uid+".automargin")}return d.doAutoMargin(ve),d.previousPromises(ve)}function bt(){ve._transitioning||(v.doAutoRangeAndConstraints(ve),qe&&s.saveRangeInitial(ve),a.getComponentMethod("rangeslider","calcAutorange")(ve))}var Ct=[d.previousPromises,function(){if(Pe)return ie.addFrames(ve,Pe)},function Ft(){for(var ht=Je._basePlotModules,ut=0;ut<ht.length;ut++)ht[ut].drawFramework&&ht[ut].drawFramework(ve);!Je._glcanvas&&Je._has("gl")&&(Je._glcanvas=Je._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Ze){return Ze.key}),Je._glcanvas.enter().append("canvas").attr("class",function(Ze){return"gl-canvas gl-canvas-"+Ze.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Rt=ve._context.plotGlPixelRatio;if(Je._glcanvas){Je._glcanvas.attr("width",Je.width*Rt).attr("height",Je.height*Rt).style("width",Je.width+"px").style("height",Je.height+"px");var nn=Je._glcanvas.data()[0].regl;if(nn&&(Math.floor(Je.width*Rt)!==nn._gl.drawingBufferWidth||Math.floor(Je.height*Rt)!==nn._gl.drawingBufferHeight)){var cn="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!tt)return b.log(cn+" Clearing graph and plotting again."),d.cleanPlot([],{},ve._fullData,Je),d.supplyDefaults(ve),Je=ve._fullLayout,d.doCalcdata(ve),tt++,Ft();b.error(cn)}}return"h"===Je.modebar.orientation?Je._modebardiv.style("height",null).style("width","100%"):Je._modebardiv.style("width",null).style("height",Je.height+"px"),d.previousPromises(ve)},ft,function(){if(d.didMarginChange(et,Je._size))return b.syncOrAsync([ft,v.layoutStyles],ve)}];lt&&Ct.push(function(){if(He)return b.syncOrAsync([a.getComponentMethod("shapes","calcAutorange"),a.getComponentMethod("annotations","calcAutorange"),bt],ve);bt()}),Ct.push(v.layoutStyles),lt&&Ct.push(function(){return s.draw(ve,qe?"":"redraw")},function(Ft){Ft._fullLayout._insideTickLabelsAutorange&&oe(Ft,Ft._fullLayout._insideTickLabelsAutorange).then(function(){Ft._fullLayout._insideTickLabelsAutorange=void 0})}),Ct.push(v.drawData,v.finalDraw,f,d.addLinks,d.rehover,d.redrag,d.doAutoMargin,function(Ft){Ft._fullLayout._insideTickLabelsAutorange&&qe&&s.saveRangeInitial(Ft,!0)},d.previousPromises);var Vt=b.syncOrAsync(Ct,ve);return Vt&&Vt.then||(Vt=Promise.resolve()),Vt.then(function(){return E(ve),ve})},ie.purge=function(ve){var Te=(ve=b.getGraphDiv(ve))._fullLayout||{};return d.cleanPlot([],{},ve._fullData||[],Te),d.purge(ve),r.purge(ve),Te._container&&Te._container.remove(),delete ve._context,ve},ie.react=function(ve,Te,Ie,Ce){var Pe,Ve;ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve);var je,Ne,st,mt,Tt,xt,qe=ve._fullData,Je=ve._fullLayout;if(b.isPlotDiv(ve)&&qe&&Je){if(b.isPlainObject(Te)){var lt=Te;Te=lt.data,Ie=lt.layout,Ce=lt.config,Pe=lt.frames}var He=!1;if(Ce){var $e=b.extendDeep({},ve._context);ve._context=void 0,F(ve,Ce),He=function je(Ne,st){var mt;for(mt in Ne)if("_"!==mt.charAt(0)){var Tt=Ne[mt],xt=st[mt];if(Tt!==xt)if(b.isPlainObject(Tt)&&b.isPlainObject(xt)){if(je(Tt,xt))return!0}else{if(!Array.isArray(Tt)||!Array.isArray(xt)||Tt.length!==xt.length)return!0;for(var zt=0;zt<Tt.length;zt++)if(Tt[zt]!==xt[zt]&&(!b.isPlainObject(Tt[zt])||!b.isPlainObject(xt[zt])||je(Tt[zt],xt[zt])))return!0}}}($e,ve._context)}ve.data=Te||[],w.cleanData(ve.data),ve.layout=Ie||{},w.cleanLayout(ve.layout),function(je,Ne,st,mt){var Tt,xt,zt,gt,Bt,jt,it,Mt,qt,Wt,an=mt._preGUI,Ue=[],yt={},Dt={};for(Tt in an){if(Bt=be(Tt,de)){if(qt=Bt.head,Wt=Bt.tail,(gt=(zt=e(mt,xt=Bt.attr||qt+".uirevision").get())&&ge(xt,Ne))&&gt===zt){if(null===(jt=an[Tt])&&(jt=void 0),De(Mt=(it=e(Ne,Tt)).get(),jt)){void 0===Mt&&"autorange"===Wt&&Ue.push(qt),it.set(Y(e(mt,Tt).get()));continue}if("autorange"===Wt||"range["===Wt.substr(0,6)){var gn=an[qt+".autorange"];if(gn||null===gn&&null===an[qt+".range[0]"]&&null===an[qt+".range[1]"]){if(!(qt in yt)){var Qt=e(Ne,qt).get();yt[qt]=Qt&&(Qt.autorange||!1!==Qt.autorange&&(!Qt.range||2!==Qt.range.length))}if(yt[qt]){it.set(Y(e(mt,Tt).get()));continue}}}}}else b.warn("unrecognized GUI edit: "+Tt);delete an[Tt],Bt&&"range["===Bt.tail.substr(0,6)&&(Dt[Bt.head]=1)}for(var sn=0;sn<Ue.length;sn++){var hn=Ue[sn];if(Dt[hn]){var Dn=e(Ne,hn).get();Dn&&delete Dn.autorange}}var _n=mt._tracePreGUI;for(var Tn in _n){var wn,kn=_n[Tn],Fn=null;for(Tt in kn){if(!Fn){var On=we(Tn,st);if(On<0){delete _n[Tn];break}var Qn=ke(Tn,je,(wn=st[On]._fullInput).index);if(Qn<0){delete _n[Tn];break}Fn=je[Qn]}if(Bt=be(Tt,he)){if(Bt.attr?gt=(zt=e(mt,Bt.attr).get())&&ge(Bt.attr,Ne):(zt=wn.uirevision,void 0===(gt=Fn.uirevision)&&(gt=Ne.uirevision)),gt&&gt===zt&&(null===(jt=kn[Tt])&&(jt=void 0),De(Mt=(it=e(Fn,Tt)).get(),jt))){it.set(Y(e(wn,Tt).get()));continue}}else b.warn("unrecognized GUI edit: "+Tt+" in trace uid "+Tn);delete kn[Tt]}}}(ve.data,ve.layout,qe,Je),d.supplyDefaults(ve,{skipUpdateCalc:!0});var et=ve._fullData,tt=ve._fullLayout,ft=void 0===tt.datarevision,bt=tt.transition,Ct=(je=ve,Ne=Je,st=tt,mt=ft,Tt=bt,(xt=A.layoutFlags()).arrays={},xt.rangesAltered={},xt.nChanges=0,xt.nChangesAnim=0,Ee(Ne,st,[],{getValObject:function(gt){return n.getLayoutValObject(st,gt)},flags:xt,immutable:mt,transition:Tt,gd:je}),(xt.plot||xt.calc)&&(xt.layoutReplot=!0),Tt&&xt.nChanges&&xt.nChangesAnim&&(xt.anim=xt.nChanges===xt.nChangesAnim?"all":"some"),xt),Ft=function(je,Ne,st,mt,Tt,xt){var zt=Ne.length===st.length;if(!Tt&&!zt)return{fullReplot:!0,calc:!0};var gt,Bt,jt=A.traceFlags();jt.arrays={},jt.nChanges=0,jt.nChangesAnim=0;var it={getValObject:function(qt){var Wt=n.getTraceValObject(Bt,qt);return!Bt._module.animatable&&Wt.anim&&(Wt.anim=!1),Wt},flags:jt,immutable:mt,transition:Tt,newDataRevision:xt,gd:je},Mt={};for(gt=0;gt<Ne.length;gt++)if(st[gt]){if(d.hasMakesDataTransform(Bt=st[gt]._fullInput)&&(Bt=st[gt]),Mt[Bt.uid])continue;Mt[Bt.uid]=1,Ee(Ne[gt]._fullInput,Bt,[],it)}return(jt.calc||jt.plot)&&(jt.fullReplot=!0),Tt&&jt.nChanges&&jt.nChangesAnim&&(jt.anim=jt.nChanges===jt.nChangesAnim&&zt?"all":"some"),jt}(ve,qe,et,ft,bt,Ct.newDataRevision);if(ne(ve)&&(Ct.layoutReplot=!0),Ft.calc||Ct.calc){ve.calcdata=void 0;for(var ht=Object.getOwnPropertyNames(tt),ut=0;ut<ht.length;ut++){var Rt=ht[ut],nn=Rt.substring(0,5);if("xaxis"===nn||"yaxis"===nn){var cn=tt[Rt]._emptyCategories;cn&&cn()}}}else d.supplyDefaultsUpdateCalc(ve.calcdata,et);var Ze=[];if(Pe&&(ve._transitionData={},d.createTransitionData(ve),Ze.push(function(){return ie.addFrames(ve,Pe)})),tt.transition&&!He&&(Ft.anim||Ct.anim))Ct.ticks&&Ze.push(v.doTicksRelayout),d.doCalcdata(ve),v.doAutoRangeAndConstraints(ve),Ze.push(function(){return d.transitionFromReact(ve,Ft,Ct,Je)});else if(Ft.fullReplot||Ct.layoutReplot||He)ve._fullLayout._skipDefaults=!0,Ze.push(ie._doPlot);else{for(var Qe in Ct.arrays){var Ge=Ct.arrays[Qe];if(Ge.length){var rt=a.getComponentMethod(Qe,"drawOne");if(rt!==b.noop)for(var Le=0;Le<Ge.length;Le++)rt(ve,Ge[Le]);else{var ze=a.getComponentMethod(Qe,"draw");if(ze===b.noop)throw new Error("cannot draw components: "+Qe);ze(ve)}}}Ze.push(d.previousPromises),Ft.style&&Ze.push(v.doTraceStyle),(Ft.colorbars||Ct.colorbars)&&Ze.push(v.doColorBars),Ct.legend&&Ze.push(v.doLegend),Ct.layoutstyle&&Ze.push(v.layoutStyles),Ct.axrange&&H(Ze),Ct.ticks&&Ze.push(v.doTicksRelayout),Ct.modebar&&Ze.push(v.doModeBar),Ct.camera&&Ze.push(v.doCamera),Ze.push(E)}Ze.push(d.rehover,d.redrag),(Ve=b.syncOrAsync(Ze,ve))&&Ve.then||(Ve=Promise.resolve(ve))}else Ve=ie.newPlot(ve,Te,Ie,Ce);return Ve.then(function(){return ve.emit("plotly_react",{data:Te,layout:Ie}),ve})},ie.redraw=function(ve){if(ve=b.getGraphDiv(ve),!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);return w.cleanData(ve.data),w.cleanLayout(ve.layout),ve.calcdata=void 0,ie._doPlot(ve).then(function(){return ve.emit("plotly_redraw"),ve})},ie.relayout=oe,ie.restyle=Z,ie.setPlotConfig=function(ve){return b.extendFlat(m,ve)},ie.update=le,ie._guiRelayout=ue(oe),ie._guiRestyle=ue(Z),ie._guiUpdate=ue(le),ie._storeDirectGUIEdit=function(ve,Te,Ie){for(var Ce in Ie)Q(Ce,e(ve,Ce).get(),Ie[Ce],Te)}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(_,ae,ie){"use strict";var g={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},x={};(function T(b,e){for(var r in b){var t=b[r];t.valType?e[r]=t.dflt:(e[r]||(e[r]={}),T(t,e[r]))}})(g,x),ae.exports={configAttributes:g,dfltConfig:x}},{}],542:[function(_,ae,ie){"use strict";var g=_("../registry"),x=_("../lib"),T=_("../plots/attributes"),b=_("../plots/layout_attributes"),e=_("../plots/frame_attributes"),r=_("../plots/animation_attributes"),t=_("./plot_config").configAttributes,a=_("./edit_types"),n=x.extendDeepAll,d=x.isPlainObject,s=x.isArrayOrTypedArray,i=x.nestedProperty,u=x.valObjectMeta,f=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function p(M,k,E){if(!M)return!1;if(M._isLinkedToArray)if(y(k[E]))E++;else if(E<k.length)return!1;for(;E<k.length;E++){var P=M[k[E]];if(!d(P)||(M=P,E===k.length-1))break;if(M._isLinkedToArray){if(!y(k[++E]))return!1}else if("info_array"===M.valType){var S=k[++E];if(!y(S))return!1;var F=M.items;if(Array.isArray(F)){if(S>=F.length)return!1;if(2===M.dimensions){if(E++,k.length===E)return M;var R=k[E];if(!y(R))return!1;M=F[S][R]}else M=F[S]}else M=F}}return M}function y(M){return M===Math.round(M)&&M>=0}function m(){var M,k,E={};for(M in n(E,b),g.subplotsRegistry)if((k=g.subplotsRegistry[M]).layoutAttributes)if(Array.isArray(k.attr))for(var P=0;P<k.attr.length;P++)v(E,k,k.attr[P]);else v(E,k,"subplot"===k.attr?k.name:k.attr);for(M in g.componentsRegistry){var S=(k=g.componentsRegistry[M]).schema;if(S&&(S.subplots||S.layout)){var F=S.subplots;if(F&&F.xaxis&&!F.yaxis)for(var R in F.xaxis)delete E.yaxis[R]}else"colorscale"===k.name?n(E,k.layoutAttributes):k.layoutAttributes&&A(E,k.layoutAttributes,k.name)}return{layoutAttributes:w(E)}}function l(){var M={frames:n({},e)};return w(M),M.frames}function w(M){return ie.crawl(M,function(E,P,S){ie.isValObject(E)?!0!==E.arrayOk&&"data_array"!==E.valType||(S[P+"src"]={valType:"string",editType:"none"}):d(E)&&(E.role="object")}),ie.crawl(M,function(E,P,S){if(E){var F=E._isLinkedToArray;F&&(delete E._isLinkedToArray,S[P]={items:{}},S[P].items[F]=E,S[P].role="object")}}),function(k){!function E(P){for(var S in P)if(d(P[S]))E(P[S]);else if(Array.isArray(P[S]))for(var F=0;F<P[S].length;F++)E(P[S][F]);else P[S]instanceof RegExp&&(P[S]=P[S].toString())}(k)}(M),M}function v(M,k,E){var P=i(M,E),S=n({},k.layoutAttributes);S._isSubplotObj=!0,P.set(S)}function A(M,k,E){var P=i(M,E);P.set(n(P.get()||{},k))}ie.IS_SUBPLOT_OBJ="_isSubplotObj",ie.IS_LINKED_TO_ARRAY="_isLinkedToArray",ie.DEPRECATED="_deprecated",ie.UNDERSCORE_ATTRS=f,ie.get=function(){var M={};g.allTypes.forEach(function(E){M[E]=function(P){var S,F;F=(S=g.modules[P]._module).basePlotModule;var R={type:null},D=n({},T),L=n({},S.attributes);ie.crawl(L,function(Z,Y,ee,Q,$){i(D,$).set(void 0),void 0===Z&&i(L,$).set(void 0)}),n(R,D),g.traceIs(P,"noOpacity")&&delete R.opacity,g.traceIs(P,"showLegend")||(delete R.showlegend,delete R.legendgroup),g.traceIs(P,"noHover")&&(delete R.hoverinfo,delete R.hoverlabel),S.selectPoints||delete R.selectedpoints,n(R,L),F.attributes&&n(R,F.attributes),R.type=P;var B={meta:S.meta||{},categories:S.categories||{},animatable:Boolean(S.animatable),type:P,attributes:w(R)};if(S.layoutAttributes){var V={};n(V,S.layoutAttributes),B.layoutAttributes=w(V)}return S.animatable||ie.crawl(B,function(Z){ie.isValObject(Z)&&"anim"in Z&&delete Z.anim}),B}(E)});var k={};return Object.keys(g.transformsRegistry).forEach(function(E){var P,F;k[E]=(F=n({},g.transformsRegistry[P=E].attributes),Object.keys(g.componentsRegistry).forEach(function(R){var D=g.componentsRegistry[R];D.schema&&D.schema.transforms&&D.schema.transforms[P]&&Object.keys(D.schema.transforms[P]).forEach(function(L){A(F,D.schema.transforms[P][L],L)})}),{attributes:w(F)})}),{defs:{valObjects:u,metaKeys:f.concat(["description","role","editType","impliedEdits"]),editType:{traces:a.traces,layout:a.layout},impliedEdits:{}},traces:M,layout:m(),transforms:k,frames:l(),animation:w(r),config:w(t)}},ie.crawl=function(M,k,E,P){var S=E||0;P=P||"",Object.keys(M).forEach(function(F){var R=M[F];if(-1===f.indexOf(F)){var D=(P?P+".":"")+F;k(R,F,M,S,D),ie.isValObject(R)||d(R)&&"impliedEdits"!==F&&ie.crawl(R,k,S+1,D)}})},ie.isValObject=function(M){return M&&void 0!==M.valType},ie.findArrayAttributes=function(M){var k,E,P=[],S=[],F=[];function R(Z,Y,ee,Q){S=S.slice(0,Q).concat([Y]),F=F.slice(0,Q).concat([Z&&Z._isLinkedToArray]),Z&&("data_array"===Z.valType||!0===Z.arrayOk)&&("colorbar"!==S[Q-1]||"ticktext"!==Y&&"tickvals"!==Y)&&function $(K,oe,j){var H=K[S[oe]],G=j+S[oe];if(oe===S.length-1)s(H)&&P.push(E+G);else if(F[oe]){if(Array.isArray(H))for(var re=0;re<H.length;re++)d(H[re])&&$(H[re],oe+1,G+"["+re+"].")}else d(H)&&$(H,oe+1,G+".")}(k,0,"")}k=M,E="",ie.crawl(T,R),M._module&&M._module.attributes&&ie.crawl(M._module.attributes,R);var D=M.transforms;if(D)for(var L=0;L<D.length;L++){var B=D[L],V=B._module;V&&(E="transforms["+L+"].",k=B,ie.crawl(V.attributes,R))}return P},ie.getTraceValObject=function(M,k){var E,P,S=k[0],F=1;if("transforms"===S){if(1===k.length)return T.transforms;var R=M.transforms;if(!Array.isArray(R)||!R.length)return!1;var D=k[1];if(!y(D)||D>=R.length)return!1;P=(E=(g.transformsRegistry[R[D].type]||{}).attributes)&&E[k[2]],F=3}else{var L=M._module;if(L||(L=(g.modules[M.type||T.type.dflt]||{})._module),!L)return!1;if(!(P=(E=L.attributes)&&E[S])){var B=L.basePlotModule;B&&B.attributes&&(P=B.attributes[S])}P||(P=T[S])}return p(P,k,F)},ie.getLayoutValObject=function(M,k){return p(function(E,P){var S,F,R,D,L=E._basePlotModules;if(L){var B;for(S=0;S<L.length;S++){if((R=L[S]).attrRegex&&R.attrRegex.test(P)){if(R.layoutAttrOverrides)return R.layoutAttrOverrides;!B&&R.layoutAttributes&&(B=R.layoutAttributes)}var V=R.baseLayoutAttrOverrides;if(V&&P in V)return V[P]}if(B)return B}var Z=E._modules;if(Z)for(S=0;S<Z.length;S++)if((D=Z[S].layoutAttributes)&&P in D)return D[P];for(F in g.componentsRegistry){if("colorscale"===(R=g.componentsRegistry[F]).name&&0===P.indexOf("coloraxis"))return R.layoutAttributes[P];if(!R.schema&&P===R.name)return R.layoutAttributes}return P in b&&b[P]}(M,k[0]),k,1)}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(_,ae,ie){"use strict";var g=_("../lib"),x=_("../plots/attributes"),T={name:{valType:"string",editType:"none"}};function b(r){return r&&"string"==typeof r}function e(r){return"s"!==r.charAt(r.length-1)&&g.warn("bad argument to arrayDefaultKey: "+r),r.substr(0,r.length-1)+"defaults"}T.templateitemname={valType:"string",editType:"calc"},ie.templatedArray=function(r,t){return t._isLinkedToArray=r,t.name=T.name,t.templateitemname=T.templateitemname,t},ie.traceTemplater=function(r){var t,a,n={};for(t in r)a=r[t],Array.isArray(a)&&a.length&&(n[t]=0);return{newTrace:function(d){var s={type:t=g.coerce(d,{},x,"type"),_template:null};if(t in n){var i=n[t]%(a=r[t]).length;n[t]++,s._template=a[i]}return s}}},ie.newContainer=function(r,t,a){var n=r._template,d=n&&(n[t]||a&&n[a]);return g.isPlainObject(d)||(d=null),r[t]={_template:d}},ie.arrayTemplater=function(r,t,a){var n=r._template,d=n&&n[e(t)],s=n&&n[t];Array.isArray(s)&&s.length||(s=[]);var i={};return{newItem:function(u){var f={name:u.name,_input:u},p=f.templateitemname=u.templateitemname;if(!b(p))return f._template=d,f;for(var y=0;y<s.length;y++){var m=s[y];if(m.name===p)return i[p]=1,f._template=m,f}return f[a]=u[a]||!1,f._template=!1,f},defaultItems:function(){for(var u=[],f=0;f<s.length;f++){var p=s[f],y=p.name;if(b(y)&&!i[y]){var m={_template:p,name:y,_input:{_templateitemname:y}};m.templateitemname=p.templateitemname,u.push(m),i[y]=1}}return u}}},ie.arrayDefaultKey=e,ie.arrayEditor=function(r,t,a){var n=(g.nestedProperty(r,t).get()||[]).length,d=a._index,s=d>=n&&(a._input||{})._templateitemname;s&&(d=n);var i,u=t+"["+d+"]";function f(){i={},s&&(i[u]={},i[u].templateitemname=s)}function p(m,l){s?g.nestedProperty(i[u],m).set(l):i[u+"."+m]=l}function y(){var m=i;return f(),m}return f(),{modifyBase:function(m,l){i[m]=l},modifyItem:p,getUpdateObj:y,applyUpdate:function(m,l){m&&p(m,l);var w=y();for(var v in w)g.nestedProperty(r,v).set(w[v])}}}},{"../lib":503,"../plots/attributes":550}],544:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../registry"),T=_("../plots/plots"),b=_("../lib"),e=_("../lib/clear_gl_canvases"),r=_("../components/color"),t=_("../components/drawing"),a=_("../components/titles"),n=_("../components/modebar"),d=_("../plots/cartesian/axes"),s=_("../constants/alignment"),i=_("../plots/cartesian/constraints"),u=i.enforce,f=i.clean,p=_("../plots/cartesian/autorange").doAutoRange;function y(k,E,P){for(var S=0;S<P.length;S++){var F=P[S][0],R=P[S][1];if(!(F[0]>=k[1]||F[1]<=k[0])&&R[0]<E[1]&&R[1]>E[0])return!0}return!1}function m(k){var E,P,S,F,R,D,L=k._fullLayout,B=L._size,V=B.p,Z=d.list(k,"",!0);if(L._paperdiv.style({width:k._context.responsive&&L.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":L.width+"px",height:k._context.responsive&&L.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":L.height+"px"}).selectAll(".main-svg").call(t.setSize,L.width,L.height),k._context.setBackground(k,L.paper_bgcolor),ie.drawMainTitle(k),n.manage(k),!L._has("cartesian"))return T.previousPromises(k);function Y(tt,ft,bt){var Ct=tt._lw/2;return"x"===tt._id.charAt(0)?ft?"top"===bt?ft._offset-V-Ct:ft._offset+ft._length+V+Ct:B.t+B.h*(1-(tt.position||0))+Ct%1:ft?"right"===bt?ft._offset+ft._length+V+Ct:ft._offset-V-Ct:B.l+B.w*(tt.position||0)+Ct%1}for(E=0;E<Z.length;E++){var ee=(F=Z[E])._anchorAxis;F._linepositions={},F._lw=t.crispRound(k,F.linewidth,1),F._mainLinePosition=Y(F,ee,F.side),F._mainMirrorPosition=F.mirror&&ee?Y(F,ee,s.OPPOSITE_SIDE[F.side]):null}var Q=[],$=[],K=[],oe=1===r.opacity(L.paper_bgcolor)&&1===r.opacity(L.plot_bgcolor)&&L.paper_bgcolor===L.plot_bgcolor;for(P in L._plots)if((S=L._plots[P]).mainplot)S.bg&&S.bg.remove(),S.bg=void 0;else{var j=S.xaxis.domain,H=S.yaxis.domain,G=S.plotgroup;if(y(j,H,K)){var re=G.node(),q=S.bg=b.ensureSingle(G,"rect","bg");re.insertBefore(q.node(),re.childNodes[0]),$.push(P)}else G.select("rect.bg").remove(),K.push([j,H]),oe||(Q.push(P),$.push(P))}var te,ne,le,ue,de,he,be,ge,we,ke,De,Ee,Re,ve=L._bgLayer.selectAll(".bg").data(Q);for(ve.enter().append("rect").classed("bg",!0),ve.exit().remove(),ve.each(function(tt){L._plots[tt].bg=g.select(this)}),E=0;E<$.length;E++)R=(S=L._plots[$[E]]).xaxis,D=S.yaxis,S.bg&&void 0!==R._offset&&void 0!==D._offset&&S.bg.call(t.setRect,R._offset-V,D._offset-V,R._length+2*V,D._length+2*V).call(r.fill,L.plot_bgcolor).style("stroke-width",0);if(!L._hasOnlyLargeSploms)for(P in L._plots){R=(S=L._plots[P]).xaxis,D=S.yaxis;var Te,Ie,Ce=S.clipId="clip"+L._uid+P+"plot",Pe=b.ensureSingleById(L._clips,"clipPath",Ce,function(tt){tt.classed("plotclip",!0).append("rect")});S.clipRect=Pe.select("rect").attr({width:R._length,height:D._length}),t.setTranslate(S.plot,R._offset,D._offset),S._hasClipOnAxisFalse?(Te=null,Ie=Ce):(Te=Ce,Ie=null),t.setClipUrl(S.plot,Te,k),S.layerClipId=Ie}function Ve(tt){return"M"+te+","+tt+"H"+ne}function qe(tt){return"M"+R._offset+","+tt+"h"+R._length}function Je(tt){return"M"+tt+","+ge+"V"+be}function lt(tt){return"M"+tt+","+D._offset+"v"+D._length}function He(tt,ft,bt){if(!tt.showline||P!==tt._mainSubplot)return"";if(!tt._anchorAxis)return bt(tt._mainLinePosition);var Ct=ft(tt._mainLinePosition);return tt.mirror&&(Ct+=ft(tt._mainMirrorPosition)),Ct}for(P in L._plots){D=(S=L._plots[P]).yaxis;var $e="M0,0";l(R=S.xaxis,P)&&(de=v(R,"left",D,Z),te=R._offset-(de?V+de:0),he=v(R,"right",D,Z),ne=R._offset+R._length+(he?V+he:0),le=Y(R,D,"bottom"),ue=Y(R,D,"top"),!(Re=!R._anchorAxis||P!==R._mainSubplot)||"allticks"!==R.mirror&&"all"!==R.mirror||(R._linepositions[P]=[le,ue]),$e=He(R,Ve,qe),Re&&R.showline&&("all"===R.mirror||"allticks"===R.mirror)&&($e+=Ve(le)+Ve(ue)),S.xlines.style("stroke-width",R._lw+"px").call(r.stroke,R.showline?R.linecolor:"rgba(0,0,0,0)")),S.xlines.attr("d",$e);var et="M0,0";l(D,P)&&(De=v(D,"bottom",R,Z),be=D._offset+D._length+(De?V:0),Ee=v(D,"top",R,Z),ge=D._offset-(Ee?V:0),we=Y(D,R,"left"),ke=Y(D,R,"right"),!(Re=!D._anchorAxis||P!==D._mainSubplot)||"allticks"!==D.mirror&&"all"!==D.mirror||(D._linepositions[P]=[we,ke]),et=He(D,Je,lt),Re&&D.showline&&("all"===D.mirror||"allticks"===D.mirror)&&(et+=Je(we)+Je(ke)),S.ylines.style("stroke-width",D._lw+"px").call(r.stroke,D.showline?D.linecolor:"rgba(0,0,0,0)")),S.ylines.attr("d",et)}return d.makeClipPaths(k),T.previousPromises(k)}function l(k,E){return(k.ticks||k.showline)&&(E===k._mainSubplot||"all"===k.mirror||"allticks"===k.mirror)}function w(k,E,P){if(!P.showline||!P._lw)return!1;if("all"===P.mirror||"allticks"===P.mirror)return!0;var S=P._anchorAxis;if(!S)return!1;var F=s.FROM_BL[E];return P.side===E?S.domain[F]===k.domain[F]:P.mirror&&S.domain[1-F]===k.domain[1-F]}function v(k,E,P,S){if(w(k,E,P))return P._lw;for(var F=0;F<S.length;F++){var R=S[F];if(R._mainAxis===P._mainAxis&&w(k,E,R))return R._lw}return 0}function A(k,E){var P=k.title,S=k._size,F=0;return"paper"===("start"===E?F=P.pad.l:"end"===E&&(F=-P.pad.r),P.xref)?S.l+S.w*P.x+F:k.width*P.x+F}function M(k,E){var P=k.title,S=k._size,F=0;return"0em"!==E&&E?E===s.CAP_SHIFT+"em"&&(F=P.pad.t):F=-P.pad.b,"auto"===P.y?S.t/2:"paper"===P.yref?S.t+S.h-S.h*P.y+F:k.height-k.height*P.y+F}ie.layoutStyles=function(k){return b.syncOrAsync([T.doAutoMargin,m],k)},ie.drawMainTitle=function(k){var R,D,E=k._fullLayout,P=(D="middle",b.isRightAnchor(R=E.title)?D="end":b.isLeftAnchor(R)&&(D="start"),D),S=function(F){var R=F.title,D="0em";return b.isTopAnchor(R)?D=s.CAP_SHIFT+"em":b.isMiddleAnchor(R)&&(D=s.MID_SHIFT+"em"),D}(E);a.draw(k,"gtitle",{propContainer:E,propName:"title.text",placeholder:E._dfltTitle.plot,attributes:{x:A(E,P),y:M(E,S),"text-anchor":P,dy:S}})},ie.doTraceStyle=function(k){var E,P=k.calcdata,S=[];for(E=0;E<P.length;E++){var F=P[E],R=F[0]||{},D=R.trace||{},L=D._module||{},B=L.arraysToCalcdata;B&&B(F,D);var V=L.editStyle;V&&S.push({fn:V,cd0:R})}if(S.length){for(E=0;E<S.length;E++){var Z=S[E];Z.fn(k,Z.cd0)}e(k),ie.redrawReglTraces(k)}return T.style(k),x.getComponentMethod("legend","draw")(k),T.previousPromises(k)},ie.doColorBars=function(k){return x.getComponentMethod("colorbar","draw")(k),T.previousPromises(k)},ie.layoutReplot=function(k){var E=k.layout;return k.layout=void 0,x.call("_doPlot",k,"",E)},ie.doLegend=function(k){return x.getComponentMethod("legend","draw")(k),T.previousPromises(k)},ie.doTicksRelayout=function(k){return d.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(x.subplotsRegistry.splom.updateGrid(k),e(k),ie.redrawReglTraces(k)),ie.drawMainTitle(k),T.previousPromises(k)},ie.doModeBar=function(k){var E=k._fullLayout;n.manage(k);for(var P=0;P<E._basePlotModules.length;P++){var S=E._basePlotModules[P].updateFx;S&&S(k)}return T.previousPromises(k)},ie.doCamera=function(k){for(var E=k._fullLayout,P=E._subplots.gl3d,S=0;S<P.length;S++){var F=E[P[S]];F._scene.setViewport(F)}},ie.drawData=function(k){var E=k._fullLayout;e(k);for(var P=E._basePlotModules,S=0;S<P.length;S++)P[S].plot(k);return ie.redrawReglTraces(k),T.style(k),x.getComponentMethod("shapes","draw")(k),x.getComponentMethod("annotations","draw")(k),x.getComponentMethod("images","draw")(k),E._replotting=!1,T.previousPromises(k)},ie.redrawReglTraces=function(k){var E=k._fullLayout;if(E._has("regl")){var P,S,F=k._fullData,R=[],D=[];for(E._hasOnlyLargeSploms&&E._splomGrid.draw(),P=0;P<F.length;P++){var L=F[P];!0===L.visible&&0!==L._length&&("splom"===L.type?E._splomScenes[L.uid].draw():"scattergl"===L.type?b.pushUnique(R,L.xaxis+L.yaxis):"scatterpolargl"===L.type&&b.pushUnique(D,L.subplot))}for(P=0;P<R.length;P++)(S=E._plots[R[P]])._scene&&S._scene.draw();for(P=0;P<D.length;P++)(S=E[D[P]]._subplot)._scene&&S._scene.draw()}},ie.doAutoRangeAndConstraints=function(k){for(var E,P=d.list(k,"",!0),S={},F=0;F<P.length;F++)if(!S[(E=P[F])._id]){S[E._id]=1,f(k,E),p(k,E);var R=E._matchGroup;if(R)for(var D in R){var L=d.getFromId(k,D);p(k,L,E.range),S[D]=1}}u(k)},ie.finalDraw=function(k){x.getComponentMethod("rangeslider","draw")(k),x.getComponentMethod("rangeselector","draw")(k)},ie.drawMarginPushers=function(k){x.getComponentMethod("legend","draw")(k),x.getComponentMethod("rangeselector","draw")(k),x.getComponentMethod("sliders","draw")(k),x.getComponentMethod("updatemenus","draw")(k),x.getComponentMethod("colorbar","draw")(k)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(_,ae,ie){"use strict";var g=_("../lib"),x=g.isPlainObject,T=_("./plot_schema"),b=_("../plots/plots"),e=_("../plots/attributes"),r=_("./plot_template"),t=_("./plot_config").dfltConfig;function a(y,m){y=g.extendDeep({},y);var l,w,v=Object.keys(y).sort();function A(S,F,R){if(x(F)&&x(S))a(S,F);else if(Array.isArray(F)&&Array.isArray(S)){var D=r.arrayTemplater({_template:y},R);for(w=0;w<F.length;w++){var L=F[w],B=D.newItem(L)._template;B&&a(B,L)}var V=D.defaultItems();for(w=0;w<V.length;w++)F.push(V[w]._template);for(w=0;w<F.length;w++)delete F[w].templateitemname}}for(l=0;l<v.length;l++){var M=v[l],k=y[M];if(M in m?A(k,m[M],M):m[M]=k,n(M)===M)for(var E in m){var P=n(E);E===P||P!==M||E in y||A(k,m[E],M)}}}function n(y){return y.replace(/[0-9]+$/,"")}function d(y,m,l,w,v){var A=v&&l(v);for(var M in y){var k=y[M],E=u(y,M,w),P=u(y,M,v),S=l(P);if(!S){var F=n(M);F!==M&&(S=l(P=u(y,F,v)))}if(!(A&&A===S||!S||S._noTemplating||"data_array"===S.valType||S.arrayOk&&Array.isArray(k)))if(!S.valType&&x(k))d(k,m,l,E,P);else if(S._isLinkedToArray&&Array.isArray(k))for(var R=!1,D=0,L={},B=0;B<k.length;B++){var V=k[B];if(x(V)){var Z=V.name;if(Z)L[Z]||(d(V,m,l,u(k,D,E),u(k,D,P)),D++,L[Z]=1);else if(!R){var Y=u(y,r.arrayDefaultKey(M),w),ee=u(k,D,E);d(V,m,l,ee,u(k,D,P));var Q=g.nestedProperty(m,ee);g.nestedProperty(m,Y).set(Q.get()),Q.set(null),R=!0}}}else g.nestedProperty(m,E).set(k)}}function s(y,m){return T.getLayoutValObject(y,g.nestedProperty({},m).parts)}function i(y,m){return T.getTraceValObject(y,g.nestedProperty({},m).parts)}function u(y,m,l){return l?Array.isArray(y)?l+"["+m+"]":l+"."+m:m}function f(y){for(var m=0;m<y.length;m++)if(x(y[m]))return!0}function p(y){var m;switch(y.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":m=y.path?"There are no templates for item "+y.path+" with name "+y.templateitemname:"There are no templates for trace "+y.index+", of type "+y.traceType+".";break;case"unused":m=y.path?"The template item at "+y.path+" was not used in constructing the plot.":y.dataCount?"Some of the templates of type "+y.traceType+" were not used. The template has "+y.templateCount+" traces, the data only has "+y.dataCount+" of this type.":"The template has "+y.templateCount+" traces of type "+y.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+y.traceType+" were used more than once. The template has "+y.templateCount+" traces, the data has "+y.dataCount+" of this type."}return y.msg=m,y}ie.makeTemplate=function(y){y=g.isPlainObject(y)?y:g.getGraphDiv(y),y=g.extendDeep({_context:t},{data:y.data,layout:y.layout}),b.supplyDefaults(y);var m=y.data||[],l=y.layout||{};l._basePlotModules=y._fullLayout._basePlotModules,l._modules=y._fullLayout._modules;var w={data:{},layout:{}};m.forEach(function(D){var L={};d(D,L,i.bind(null,D));var B=g.coerce(D,{},e,"type"),V=w.data[B];V||(V=w.data[B]=[]),V.push(L)}),d(l,w.layout,s.bind(null,l)),delete w.layout.template;var v=l.template;if(x(v)){var A,M,k,E,P,S,F=v.layout;x(F)&&a(F,w.layout);var R=v.data;if(x(R)){for(M in w.data)if(k=R[M],Array.isArray(k)){for(S=(P=w.data[M]).length,E=k.length,A=0;A<S;A++)a(k[A%E],P[A]);for(A=S;A<E;A++)P.push(g.extendDeep({},k[A]))}for(M in R)M in w.data||(w.data[M]=g.extendDeep([],R[M]))}}return w},ie.validateTemplate=function(y,m){var l=g.extendDeep({},{_context:t,data:y.data,layout:y.layout}),w=l.layout||{};x(m)||(m=w.template||{});var v=m.layout,A=m.data,M=[];l.layout=w,l.layout.template=m,b.supplyDefaults(l);var k=l._fullLayout,E=l._fullData,P={};if(x(v)?(function V(Z,Y){for(var ee in Z)if("_"!==ee.charAt(0)&&x(Z[ee])){var Q,$=n(ee),K=[];for(Q=0;Q<Y.length;Q++)K.push(u(Z,ee,Y[Q])),$!==ee&&K.push(u(Z,$,Y[Q]));for(Q=0;Q<K.length;Q++)P[K[Q]]=1;V(Z[ee],K)}}(k,["layout"]),function V(Z,Y){for(var ee in Z)if(-1===ee.indexOf("defaults")&&x(Z[ee])){var Q=u(Z,ee,Y);P[Q]?V(Z[ee],Q):M.push({code:"unused",path:Q})}}(v,"layout")):M.push({code:"layout"}),x(A)){for(var S,F={},R=0;R<E.length;R++){var D=E[R];F[S=D.type]=(F[S]||0)+1,D._fullInput._template||M.push({code:"missing",index:D._fullInput.index,traceType:S})}for(S in A){var L=A[S].length,B=F[S]||0;L>B?M.push({code:"unused",traceType:S,templateCount:L,dataCount:B}):B>L&&M.push({code:"reused",traceType:S,templateCount:L,dataCount:B})}}else M.push({code:"data"});if(function V(Z,Y){for(var ee in Z)if("_"!==ee.charAt(0)){var Q=Z[ee],$=u(Z,ee,Y);x(Q)?(Array.isArray(Z)&&!1===Q._template&&Q.templateitemname&&M.push({code:"missing",path:$,templateitemname:Q.templateitemname}),V(Q,$)):Array.isArray(Q)&&f(Q)&&V(Q,$)}}({data:E,layout:k},""),M.length)return M.map(p)}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("./plot_api"),T=_("../plots/plots"),b=_("../lib"),e=_("../snapshot/helpers"),r=_("../snapshot/tosvg"),t=_("../snapshot/svgtoimg"),a=_("../version").version,n={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};ae.exports=function(d,s){var i,u,f,p;function y(B){return!(B in s)||b.validate(s[B],n[B])}if(s=s||{},b.isPlainObject(d)?(i=d.data||[],u=d.layout||{},f=d.config||{},p={}):(d=b.getGraphDiv(d),i=b.extendDeep([],d.data),u=b.extendDeep({},d.layout),f=d._context,p=d._fullLayout||{}),!y("width")&&null!==s.width||!y("height")&&null!==s.height)throw new Error("Height and width should be pixel values.");if(!y("format"))throw new Error("Export format is not "+b.join2(n.format.values,", "," or ")+".");var m={};function l(B,V){return b.coerce(s,m,n,B,V)}var w=l("format"),v=l("width"),A=l("height"),M=l("scale"),k=l("setBackground"),E=l("imageDataOnly"),P=document.createElement("div");P.style.position="absolute",P.style.left="-5000px",document.body.appendChild(P);var S=b.extendFlat({},u);v?S.width=v:null===s.width&&g(p.width)&&(S.width=p.width),A?S.height=A:null===s.height&&g(p.height)&&(S.height=p.height);var F=b.extendFlat({},f,{_exportedPlot:!0,staticPlot:!0,setBackground:k}),R=e.getRedrawFunc(P);function D(){return new Promise(function(B){setTimeout(B,e.getDelay(P._fullLayout))})}function L(){return new Promise(function(B,V){var Z=r(P,w,M),Y=P._fullLayout.width,ee=P._fullLayout.height;function Q(){x.purge(P),document.body.removeChild(P)}if("full-json"===w){var $=T.graphJson(P,!1,"keepdata","object",!0,!0);return $.version=a,$=JSON.stringify($),Q(),B(E?$:e.encodeJSON($))}if(Q(),"svg"===w)return B(E?Z:e.encodeSVG(Z));var K=document.createElement("canvas");K.id=b.randstr(),t({format:w,width:Y,height:ee,scale:M,canvas:K,svg:Z,promise:!0}).then(B).catch(V)})}return new Promise(function(B,V){x.newPlot(P,i,S,F).then(R).then(D).then(L).then(function(Z){var Y;B((Y=Z,E?Y.replace(e.IMAGE_URL_PREFIX,""):Y))}).catch(function(Z){V(Z)})})}},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1119,"./plot_api":540,"fast-isnumeric":190}],547:[function(_,ae,ie){"use strict";var g=_("../lib"),x=_("../plots/plots"),T=_("./plot_schema"),b=_("./plot_config").dfltConfig,e=g.isPlainObject,r=Array.isArray,t=g.isArrayOrTypedArray;function a(m,l,w,v,A,M){M=M||[];for(var k=Object.keys(m),E=0;E<k.length;E++){var P=k[E];if("transforms"!==P){var S=M.slice();S.push(P);var F=m[P],R=l[P],D=f(w,P),L=(D||{}).valType,B="info_array"===L,V="colorscale"===L,Z=(D||{}).items;if(u(w,P))if(e(F)&&e(R)&&"any"!==L)a(F,R,D,v,A,S);else if(B&&r(F)){F.length>R.length&&v.push(i("unused",A,S.concat(R.length)));var Y,ee,$,K,oe=R.length,j=Array.isArray(Z);if(j&&(oe=Math.min(oe,Z.length)),2===D.dimensions)for(ee=0;ee<oe;ee++)if(r(F[ee])){F[ee].length>R[ee].length&&v.push(i("unused",A,S.concat(ee,R[ee].length)));var H=R[ee].length;for(Y=0;Y<(j?Math.min(H,Z[ee].length):H);Y++)K=R[ee][Y],g.validate($=F[ee][Y],j?Z[ee][Y]:Z)?K!==$&&K!==+$&&v.push(i("dynamic",A,S.concat(ee,Y),$,K)):v.push(i("value",A,S.concat(ee,Y),$))}else v.push(i("array",A,S.concat(ee),F[ee]));else for(ee=0;ee<oe;ee++)K=R[ee],g.validate($=F[ee],j?Z[ee]:Z)?K!==$&&K!==+$&&v.push(i("dynamic",A,S.concat(ee),$,K)):v.push(i("value",A,S.concat(ee),$))}else if(D.items&&!B&&r(F)){var G,re,q=Z[Object.keys(Z)[0]],te=[];for(G=0;G<R.length;G++){var ne=R[G]._index||G;if((re=S.slice()).push(ne),e(F[ne])&&e(R[G])){te.push(ne);var le=F[ne],ue=R[G];e(le)&&!1!==le.visible&&!1===ue.visible?v.push(i("invisible",A,re)):a(le,ue,q,v,A,re)}}for(G=0;G<F.length;G++)(re=S.slice()).push(G),e(F[G])?-1===te.indexOf(G)&&v.push(i("unused",A,re)):v.push(i("object",A,re,F[G]))}else!e(F)&&e(R)?v.push(i("object",A,S,F)):t(F)||!t(R)||B||V?P in l?g.validate(F,D)?"enumerated"===D.valType&&(D.coerceNumber&&F!==+R||F!==R)&&v.push(i("dynamic",A,S,F,R)):v.push(i("value",A,S,F)):v.push(i("unused",A,S,F)):v.push(i("array",A,S,F));else v.push(i("schema",A,S))}}return v}function n(m,l){for(var w=m.layout.layoutAttributes,v=0;v<l.length;v++){var A=l[v],M=m.traces[A.type],k=M.layoutAttributes;k&&g.extendFlat(A.subplot?w[M.attributes.subplot.dflt]:w,k)}return w}ae.exports=function(m,l){void 0===m&&(m=[]),void 0===l&&(l={});var w,v,A=T.get(),M=[],k={_context:g.extendFlat({},b)};r(m)?(k.data=g.extendDeep([],m),w=m):(k.data=[],w=[],M.push(i("array","data"))),e(l)?(k.layout=g.extendDeep({},l),v=l):(k.layout={},v={},arguments.length>1&&M.push(i("object","layout"))),x.supplyDefaults(k);for(var E=k._fullData,P=w.length,S=0;S<P;S++){var F=w[S],R=["data",S];if(e(F)){var D=E[S],L=D.type,B=A.traces[L].attributes;B.type={valType:"enumerated",values:[L]},!1===D.visible&&!1!==F.visible&&M.push(i("invisible",R)),a(F,D,B,M,R);var V=F.transforms,Z=D.transforms;if(V){r(V)||M.push(i("array",R,["transforms"])),R.push("transforms");for(var Y=0;Y<V.length;Y++){var ee=["transforms",Y],Q=V[Y].type;if(e(V[Y])){var $=A.transforms[Q]?A.transforms[Q].attributes:{};$.type={valType:"enumerated",values:Object.keys(A.transforms)},a(V[Y],Z[Y],$,M,R,ee)}else M.push(i("object",R,ee))}}}else M.push(i("object",R))}return a(v,k._fullLayout,n(A,E),M,"layout"),0===M.length?void 0:M};var d={object:function(m,l){return("layout"===m&&""===l?"The layout argument":"data"===m[0]&&""===l?"Trace "+m[1]+" in the data argument":s(m)+"key "+l)+" must be linked to an object container"},array:function(m,l){return("data"===m?"The data argument":s(m)+"key "+l)+" must be linked to an array container"},schema:function(m,l){return s(m)+"key "+l+" is not part of the schema"},unused:function(m,l,w){var v=e(w)?"container":"key";return s(m)+v+" "+l+" did not get coerced"},dynamic:function(m,l,w,v){return[s(m)+"key",l,"(set to '"+w+"')","got reset to","'"+v+"'","during defaults."].join(" ")},invisible:function(m,l){return(l?s(m)+"item "+l:"Trace "+m[1])+" got defaulted to be not visible"},value:function(m,l,w){return[s(m)+"key "+l,"is set to an invalid value ("+w+")"].join(" ")}};function s(m){return r(m)?"In data trace "+m[1]+", ":"In "+m+", "}function i(m,l,w,v,A){var M,k;w=w||"",r(l)?(M=l[0],k=l[1]):(M=l,k=null);var E=function(S){if(!r(S))return String(S);for(var F="",R=0;R<S.length;R++){var D=S[R];"number"==typeof D?F=F.substr(0,F.length-1)+"["+D+"]":F+=D,R<S.length-1&&(F+=".")}return F}(w),P=d[m](l,E,v,A);return g.log(P),{code:m,container:M,trace:k,path:w,astr:E,msg:P}}function u(m,l){var w=y(l),v=w.keyMinusId;return!!(v in m&&m[v]._isSubplotObj&&w.id)||l in m}function f(m,l){return l in m?m[l]:m[y(l).keyMinusId]}var p=g.counterRegex("([a-z]+)");function y(m){var l=m.match(p);return{keyMinusId:l&&l[1],id:l&&l[2]}}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(_,ae,ie){"use strict";ae.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(_,ae,ie){"use strict";var g=_("../lib"),x=_("../plot_api/plot_template");ae.exports=function(T,b,e){var r,t,a=e.name,n=e.inclusionAttr||"visible",d=b[a],s=g.isArrayOrTypedArray(T[a])?T[a]:[],i=b[a]=[],u=x.arrayTemplater(b,a,n);for(r=0;r<s.length;r++){var f=s[r];g.isPlainObject(f)?t=u.newItem(f):(t=u.newItem({}))[n]=!1,t._index=r,!1!==t[n]&&e.handleItemDefaults(f,t,b,e),i.push(t)}var p=u.defaultItems();for(r=0;r<p.length;r++)(t=p[r])._index=i.length,e.handleItemDefaults({},t,b,e,{}),i.push(t);if(g.isArrayOrTypedArray(d)){var y=Math.min(d.length,i.length);for(r=0;r<y;r++)g.relinkPrivateKeys(i[r],d[r])}return i}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(_,ae,ie){"use strict";var g=_("./font_attributes"),x=_("../components/fx/attributes");ae.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:g({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:x.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=x.dateTime2ms,b=x.incrementMonth,e=_("../../constants/numerical").ONEAVGMONTH;ae.exports=function(r,t,a,n){if("date"!==t.type)return{vals:n};var d=r[a+"periodalignment"];if(!d)return{vals:n};var s,i=r[a+"period"];if(g(i)){if((i=+i)<=0)return{vals:n}}else if("string"==typeof i&&"M"===i.charAt(0)){var u=+i.substring(1);if(!(u>0&&Math.round(u)===u))return{vals:n};s=u}for(var f=t.calendar,p="start"===d,y="end"===d,l=T(r[a+"period0"],f)||0,w=[],v=[],A=[],M=n.length,k=0;k<M;k++){var E,P,S,F=n[k];if(s){for(E=Math.round((F-l)/(s*e)),S=b(l,s*E,f);S>F;)S=b(S,-s,f);for(;S<=F;)S=b(S,s,f);P=b(S,-s,f)}else{for(S=l+(E=Math.round((F-l)/i))*i;S>F;)S-=i;for(;S<=F;)S+=i;P=S-i}w[k]=p?P:y?S:(P+S)/2,v[k]=P,A[k]=S}return{vals:w,starts:v,ends:A}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(_,ae,ie){"use strict";ae.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../constants/numerical").FP_SAFE,e=_("../../registry"),r=_("../../components/drawing"),t=_("./axis_ids"),a=t.getFromId,n=t.isLinked;function d(v,A){var M,k,E=[],P=v._fullLayout,S=i(P,A,0),F=i(P,A,1),R=u(v,A),D=R.min,L=R.max;if(0===D.length||0===L.length)return T.simpleMap(A.range,A.r2l);var B=D[0].val,V=L[0].val;for(M=1;M<D.length&&B===V;M++)B=Math.min(B,D[M].val);for(M=1;M<L.length&&B===V;M++)V=Math.max(V,L[M].val);var Z=!1;if(A.range){var Y=T.simpleMap(A.range,A.r2l);Z=Y[1]<Y[0]}"reversed"===A.autorange&&(Z=!0,A.autorange=!0);var ee,Q,$,K,oe,j,H=A.rangemode,G="tozero"===H,re="nonnegative"===H,q=A._length,te=q/10,ne=0;for(M=0;M<D.length;M++)for(ee=D[M],k=0;k<L.length;k++)(j=(Q=L[k]).val-ee.val-s(A,ee.val,Q.val))>0&&((oe=q-S(ee)-F(Q))>te?j/oe>ne&&($=ee,K=Q,ne=j/oe):j/q>ne&&($={val:ee.val,nopad:1},K={val:Q.val,nopad:1},ne=j/q));if(B===V){var le=B-1,ue=B+1;if(G)if(0===B)E=[0,1];else{var de=(B>0?L:D).reduce(function(be,ge){return Math.max(be,F(ge))},0),he=B/(1-Math.min(.5,de/q));E=B>0?[0,he]:[he,0]}else E=re?[Math.max(0,le),Math.max(1,ue)]:[le,ue]}else G?($.val>=0&&($={val:0,nopad:1}),K.val<=0&&(K={val:0,nopad:1})):re&&($.val-ne*S($)<0&&($={val:0,nopad:1}),K.val<=0&&(K={val:1,nopad:1})),ne=(K.val-$.val-s(A,ee.val,Q.val))/(q-S($)-F(K)),E=[$.val-ne*S($),K.val+ne*F(K)];return Z&&E.reverse(),T.simpleMap(E,A.l2r||Number)}function s(v,A,M){var k=0;if(v.rangebreaks)for(var E=v.locateBreaks(A,M),P=0;P<E.length;P++){var S=E[P];k+=S.max-S.min}return k}function i(v,A,M){var k=.05*A._length,E=A._anchorAxis||{};if(-1!==(A.ticklabelposition||"").indexOf("inside")||-1!==(E.ticklabelposition||"").indexOf("inside")){var P="reversed"===A.autorange;if(!P){var S=T.simpleMap(A.range,A.r2l);P=S[1]<S[0]}P&&(M=!M)}var F=0;return n(v,A._id)||(F=function(R,D,L){var B=0,V="x"===D._id.charAt(0);for(var Z in R._plots){var Y=R._plots[Z];if(D._id===Y.xaxis._id||D._id===Y.yaxis._id){var ee=(V?Y.yaxis:Y.xaxis)||{};if(-1!==(ee.ticklabelposition||"").indexOf("inside")&&(!L&&("left"===ee.side||"bottom"===ee.side)||L&&("top"===ee.side||"right"===ee.side))){if(ee._vals){var Q=T.deg2rad(ee._tickAngles[ee._id+"tick"]||0),$=Math.abs(Math.cos(Q)),K=Math.abs(Math.sin(Q));ee._vals[0].bb||ee._selections[ee._id+"tick"].each(function(q){var te=g.select(this);te.select(".text-math-group").empty()&&(q.bb=r.bBox(te.node()))});for(var j=0;j<ee._vals.length;j++){var H=ee._vals[j].bb;if(H){var G=6+H.width,re=6+H.height;B=Math.max(B,V?Math.max(G*$,re*K):Math.max(re*$,G*K))}}}"inside"===ee.ticks&&"inside"===ee.ticklabelposition&&(B+=ee.ticklen||0)}}}return B}(v,A,M)),k=Math.max(F,k),"domain"===A.constrain&&A._inputDomain&&(k*=(A._inputDomain[1]-A._inputDomain[0])/(A.domain[1]-A.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?k:F)}}function u(v,A,M){var k,E,P,S=A._id,R=v._fullLayout,D=[],L=[];function B(Q,$){for(k=0;k<$.length;k++){var K=Q[$[k]],oe=(K._extremes||{})[S];if(!0===K.visible&&oe){for(E=0;E<oe.min.length;E++)f(D,(P=oe.min[E]).val,P.pad,{extrapad:P.extrapad});for(E=0;E<oe.max.length;E++)p(L,(P=oe.max[E]).val,P.pad,{extrapad:P.extrapad})}}}if(B(v._fullData,A._traceIndices),B(R.annotations||[],A._annIndices||[]),B(R.shapes||[],A._shapeIndices||[]),A._matchGroup&&!M)for(var V in A._matchGroup)if(V!==A._id){var Z=a(v,V),Y=u(v,Z,!0),ee=A._length/Z._length;for(E=0;E<Y.min.length;E++)f(D,(P=Y.min[E]).val,P.pad*ee,{extrapad:P.extrapad});for(E=0;E<Y.max.length;E++)p(L,(P=Y.max[E]).val,P.pad*ee,{extrapad:P.extrapad})}return{min:D,max:L}}function f(v,A,M,k){y(v,A,M,k,l)}function p(v,A,M,k){y(v,A,M,k,w)}function y(v,A,M,k,E){for(var P=k.tozero,S=k.extrapad,F=!0,R=0;R<v.length&&F;R++){var D=v[R];if(E(D.val,A)&&D.pad>=M&&(D.extrapad||!S)){F=!1;break}E(A,D.val)&&D.pad<=M&&(S||!D.extrapad)&&(v.splice(R,1),R--)}if(F){var L=P&&0===A;v.push({val:A,pad:L?0:M,extrapad:!L&&S})}}function m(v){return x(v)&&Math.abs(v)<b}function l(v,A){return v<=A}function w(v,A){return v>=A}ae.exports={getAutoRange:d,makePadFn:i,doAutoRange:function(v,A,M){if(A.setScale(),A.autorange){A.range=M?M.slice():d(v,A),A._r=A.range.slice(),A._rl=T.simpleMap(A._r,A.r2l);var k=A._input,E={};E[A._attr+".range"]=A.range,E[A._attr+".autorange"]=A.autorange,e.call("_storeDirectGUIEdit",v.layout,v._fullLayout._preGUI,E),k.range=A.range.slice(),k.autorange=A.autorange}var P=A._anchorAxis;if(P&&P.rangeslider){var S=P.rangeslider[A._name];S&&"auto"===S.rangemode&&(S.range=d(v,A)),P._input.rangeslider[A._name]=T.extendFlat({},S)}},findExtremes:function(v,A,M){M||(M={}),v._m||v.setScale();var k,E,P,S,F,R,D,L,B,V=[],Z=[],Y=A.length,ee=M.padded||!1,Q=M.tozero&&("linear"===v.type||"-"===v.type),$="log"===v.type,K=!1,oe=M.vpadLinearized||!1;function j(ue){if(Array.isArray(ue))return K=!0,function(he){return Math.max(Number(ue[he]||0),0)};var de=Math.max(Number(ue||0),0);return function(){return de}}var H=j((v._m>0?M.ppadplus:M.ppadminus)||M.ppad||0),G=j((v._m>0?M.ppadminus:M.ppadplus)||M.ppad||0),re=j(M.vpadplus||M.vpad),q=j(M.vpadminus||M.vpad);if(!K){if(L=1/0,B=-1/0,$)for(k=0;k<Y;k++)(E=A[k])<L&&E>0&&(L=E),E>B&&E<b&&(B=E);else for(k=0;k<Y;k++)(E=A[k])<L&&E>-b&&(L=E),E>B&&E<b&&(B=E);A=[L,B],Y=2}var te={tozero:Q,extrapad:ee};function ne(ue){x(P=A[ue])&&(R=H(ue),D=G(ue),oe?(S=v.c2l(P)-q(ue),F=v.c2l(P)+re(ue)):(L=P-q(ue),B=P+re(ue),$&&L<B/10&&(L=B/10),S=v.c2l(L),F=v.c2l(B)),Q&&(S=Math.min(0,S),F=Math.max(0,F)),m(S)&&f(V,S,D,te),m(F)&&p(Z,F,R,te))}var le=Math.min(6,Y);for(k=0;k<le;k++)ne(k);for(k=Y-1;k>=le;k--)ne(k);return{min:V,max:Z,opts:M}},concatExtremes:u}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../lib"),r=e.strTranslate,t=_("../../lib/svg_text_utils"),a=_("../../components/titles"),n=_("../../components/color"),d=_("../../components/drawing"),s=_("./layout_attributes"),i=_("./clean_ticks"),u=_("../../constants/numerical"),f=u.ONEMAXYEAR,p=u.ONEAVGYEAR,y=u.ONEMINYEAR,m=u.ONEMAXQUARTER,l=u.ONEAVGQUARTER,w=u.ONEMINQUARTER,v=u.ONEMAXMONTH,A=u.ONEAVGMONTH,M=u.ONEMINMONTH,k=u.ONEWEEK,E=u.ONEDAY,P=E/2,S=u.ONEHOUR,F=u.ONEMIN,R=u.ONESEC,D=u.MINUS_SIGN,L=u.BADNUM,B={K:"zeroline"},V={K:"gridline",L:"path"},Z={K:"tick",L:"path"},Y={K:"tick",L:"text"},ee=_("../../constants/alignment"),Q=ee.MID_SHIFT,$=ee.CAP_SHIFT,K=ee.LINE_SPACING,oe=ee.OPPOSITE_SIDE,j=ae.exports={};j.setConvert=_("./set_convert");var H=_("./axis_autotype"),G=_("./axis_ids"),re=G.idSort,q=G.isLinked;j.id2name=G.id2name,j.name2id=G.name2id,j.cleanId=G.cleanId,j.list=G.list,j.listIds=G.listIds,j.getFromId=G.getFromId,j.getFromTrace=G.getFromTrace;var te=_("./autorange");function ne(Ze){var Qe=1e-4*(Ze[1]-Ze[0]);return[Ze[0]-Qe,Ze[1]+Qe]}j.getAutoRange=te.getAutoRange,j.findExtremes=te.findExtremes,j.coerceRef=function(Ze,Qe,Ge,rt,Le,ze){var je=rt.charAt(rt.length-1),Ne=Ge._fullLayout._subplots[je+"axis"],st=rt+"ref",mt={};return Le||(Le=Ne[0]||("string"==typeof ze?ze:ze[0])),ze||(ze=Le),Ne=Ne.concat(Ne.map(function(Tt){return Tt+" domain"})),mt[st]={valType:"enumerated",values:Ne.concat(ze?"string"==typeof ze?[ze]:ze:[]),dflt:Le},e.coerce(Ze,Qe,mt,st)},j.getRefType=function(Ze){return void 0===Ze?Ze:"paper"===Ze?"paper":"pixel"===Ze?"pixel":/( domain)$/.test(Ze)?"domain":"range"},j.coercePosition=function(Ze,Qe,Ge,rt,Le,ze){var je,Ne;if("range"!==j.getRefType(rt))je=e.ensureNumber,Ne=Ge(Le,ze);else{var st=j.getFromId(Qe,rt);Ne=Ge(Le,ze=st.fraction2r(ze)),je=st.cleanPos}Ze[Le]=je(Ne)},j.cleanPosition=function(Ze,Qe,Ge){return("paper"===Ge||"pixel"===Ge?e.ensureNumber:j.getFromId(Qe,Ge).cleanPos)(Ze)},j.redrawComponents=function(Ze,Qe){Qe=Qe||j.listIds(Ze);var Ge=Ze._fullLayout;function rt(Le,ze,je,Ne){for(var st=b.getComponentMethod(Le,ze),mt={},Tt=0;Tt<Qe.length;Tt++)for(var xt=Ge[j.id2name(Qe[Tt])][je],zt=0;zt<xt.length;zt++){var gt=xt[zt];if(!mt[gt]&&(st(Ze,gt),mt[gt]=1,Ne))return}}rt("annotations","drawOne","_annIndices"),rt("shapes","drawOne","_shapeIndices"),rt("images","draw","_imgIndices",!0)};var le=j.getDataConversions=function(Ze,Qe,Ge,rt){var Le,ze="x"===Ge||"y"===Ge||"z"===Ge?Ge:rt;if(Array.isArray(ze)){if(Le={type:H(rt,void 0,{autotypenumbers:Ze._fullLayout.autotypenumbers}),_categories:[]},j.setConvert(Le),"category"===Le.type)for(var je=0;je<rt.length;je++)Le.d2c(rt[je])}else Le=j.getFromTrace(Ze,Qe,ze);return Le?{d2c:Le.d2c,c2d:Le.c2d}:"ids"===ze?{d2c:de,c2d:de}:{d2c:ue,c2d:ue}};function ue(Ze){return+Ze}function de(Ze){return String(Ze)}function he(Ze){return+Ze.substring(1)}j.getDataToCoordFunc=function(Ze,Qe,Ge,rt){return le(Ze,Qe,Ge,rt).d2c},j.counterLetter=function(Ze){var Qe=Ze.charAt(0);return"x"===Qe?"y":"y"===Qe?"x":void 0},j.minDtick=function(Ze,Qe,Ge,rt){-1===["log","category","multicategory"].indexOf(Ze.type)&&rt?void 0===Ze._minDtick?(Ze._minDtick=Qe,Ze._forceTick0=Ge):Ze._minDtick&&((Ze._minDtick/Qe+1e-6)%1<2e-6&&((Ge-Ze._forceTick0)/Qe%1+1.000001)%1<2e-6?(Ze._minDtick=Qe,Ze._forceTick0=Ge):((Qe/Ze._minDtick+1e-6)%1>2e-6||((Ge-Ze._forceTick0)/Ze._minDtick%1+1.000001)%1>2e-6)&&(Ze._minDtick=0)):Ze._minDtick=0},j.saveRangeInitial=function(Ze,Qe){for(var Ge=j.list(Ze,"",!0),rt=!1,Le=0;Le<Ge.length;Le++){var ze=Ge[Le],je=void 0===ze._rangeInitial;(je&&!1===ze.autorange||Qe&&(je||ze.range[0]!==ze._rangeInitial[0]||ze.range[1]!==ze._rangeInitial[1]))&&(ze._rangeInitial=ze.range.slice(),rt=!0)}return rt},j.saveShowSpikeInitial=function(Ze,Qe){for(var Ge=j.list(Ze,"",!0),rt=!1,Le="on",ze=0;ze<Ge.length;ze++){var je=Ge[ze],Ne=void 0===je._showSpikeInitial;(Ne||Qe&&(Ne||je.showspikes!==je._showspikes))&&(je._showSpikeInitial=je.showspikes,rt=!0),"on"!==Le||je.showspikes||(Le="off")}return Ze._fullLayout._cartesianSpikesEnabled=Le,rt},j.autoBin=function(Ze,Qe,Ge,rt,Le,ze){var je,Ne=e.aggNums(Math.min,null,Ze),st=e.aggNums(Math.max,null,Ze);if("category"===Qe.type||"multicategory"===Qe.type)return{start:Ne-.5,end:st+.5,size:Math.max(1,Math.round(ze)||1),_dataSpan:st-Ne};if(Le||(Le=Qe.calendar),je="log"===Qe.type?{type:"linear",range:[Ne,st]}:{type:Qe.type,range:e.simpleMap([Ne,st],Qe.c2r,0,Le),calendar:Le},j.setConvert(je),ze=ze&&i.dtick(ze,je.type))je.dtick=ze,je.tick0=i.tick0(void 0,je.type,Le);else{var mt;if(Ge)mt=(st-Ne)/Ge;else{var Tt=e.distinctVals(Ze),xt=Math.pow(10,Math.floor(Math.log(Tt.minDiff)/Math.LN10)),zt=xt*e.roundUp(Tt.minDiff/xt,[.9,1.9,4.9,9.9],!0);mt=Math.max(zt,2*e.stdev(Ze)/Math.pow(Ze.length,rt?.25:.4)),x(mt)||(mt=1)}j.autoTicks(je,mt)}var gt,Bt=je.dtick,jt=j.tickIncrement(j.tickFirst(je),Bt,"reverse",Le);if("number"==typeof Bt)gt=(jt=function(it,Mt,qt,Wt,an){var Ue=0,yt=0,Dt=0,Ht=0;function Jt(hn){return(1+100*(hn-it)/qt.dtick)%100<2}for(var gn=0;gn<Mt.length;gn++)Mt[gn]%1==0?Dt++:x(Mt[gn])||Ht++,Jt(Mt[gn])&&Ue++,Jt(Mt[gn]+qt.dtick/2)&&yt++;var Qt=Mt.length-Ht;if(Dt===Qt&&"date"!==qt.type)qt.dtick<1?it=Wt-.5*qt.dtick:(it-=.5)+qt.dtick<Wt&&(it+=qt.dtick);else if(yt<.1*Qt&&(Ue>.3*Qt||Jt(Wt)||Jt(an))){var sn=qt.dtick/2;it+=it+sn<Wt?sn:-sn}return it}(jt,Ze,je,Ne,st))+(1+Math.floor((st-jt)/Bt))*Bt;else for("M"===je.dtick.charAt(0)&&(jt=function(it,Mt,qt,Wt,an){var Ue=e.findExactDates(Mt,an);if(Ue.exactDays>.8){var yt=Number(qt.substr(1));Ue.exactYears>.8&&yt%12==0?it=j.tickIncrement(it,"M6","reverse")+1.5*E:Ue.exactMonths>.8?it=j.tickIncrement(it,"M1","reverse")+15.5*E:it-=P;var Dt=j.tickIncrement(it,qt);if(Dt<=Wt)return Dt}return it}(jt,Ze,Bt,Ne,Le)),gt=jt;gt<=st;)gt=j.tickIncrement(gt,Bt,!1,Le);return{start:Qe.c2r(jt,0,Le),end:Qe.c2r(gt,0,Le),size:Bt,_dataSpan:st-Ne}},j.prepTicks=function(Ze,Qe){var Ge=e.simpleMap(Ze.range,Ze.r2l,void 0,void 0,Qe);if(Ze._dtickInit=Ze.dtick,Ze._tick0Init=Ze.tick0,"auto"===Ze.tickmode||!Ze.dtick){var rt,Le=Ze.nticks;Le||("category"===Ze.type||"multicategory"===Ze.type?(rt=Ze.tickfont?e.bigFont(Ze.tickfont.size||12):15,Le=Ze._length/rt):(rt="y"===Ze._id.charAt(0)?40:80,Le=e.constrain(Ze._length/rt,4,9)+1),"radialaxis"===Ze._name&&(Le*=2)),"array"===Ze.tickmode&&(Le*=100),Ze._roughDTick=Math.abs(Ge[1]-Ge[0])/Le,j.autoTicks(Ze,Ze._roughDTick),Ze._minDtick>0&&Ze.dtick<2*Ze._minDtick&&(Ze.dtick=Ze._minDtick,Ze.tick0=Ze.l2r(Ze._forceTick0))}"period"===Ze.ticklabelmode&&function(ze){var je;function Ne(){return!(x(ze.dtick)||"M"!==ze.dtick.charAt(0))}var st=Ne(),mt=j.getTickFormat(ze);if(mt){var Tt=ze._dtickInit!==ze.dtick;/%[fLQsSMX]/.test(mt)||(/%[HI]/.test(mt)?(je=S,Tt&&!st&&ze.dtick<S&&(ze.dtick=S)):/%p/.test(mt)?(je=P,Tt&&!st&&ze.dtick<P&&(ze.dtick=P)):/%[Aadejuwx]/.test(mt)?(je=E,Tt&&!st&&ze.dtick<E&&(ze.dtick=E)):/%[UVW]/.test(mt)?(je=k,Tt&&!st&&ze.dtick<k&&(ze.dtick=k)):/%[Bbm]/.test(mt)?(je=A,Tt&&(st?he(ze.dtick)<1:ze.dtick<M)&&(ze.dtick="M1")):/%[q]/.test(mt)?(je=l,Tt&&(st?he(ze.dtick)<3:ze.dtick<w)&&(ze.dtick="M3")):/%[Yy]/.test(mt)&&(je=p,Tt&&(st?he(ze.dtick)<12:ze.dtick<y)&&(ze.dtick="M12")))}(st=Ne())&&ze.tick0===ze._dowTick0&&(ze.tick0=ze._rawTick0),ze._definedDelta=je}(Ze),Ze.tick0||(Ze.tick0="date"===Ze.type?"2000-01-01":0),"date"===Ze.type&&Ze.dtick<.1&&(Ze.dtick=.1),Te(Ze)},j.calcTicks=function(Ze,Qe){j.prepTicks(Ze,Qe);var Ge=e.simpleMap(Ze.range,Ze.r2l,void 0,void 0,Qe);if("array"===Ze.tickmode)return function(gn){var Qt=gn.tickvals,sn=gn.ticktext,hn=new Array(Qt.length),Dn=ne(e.simpleMap(gn.range,gn.r2l)),_n=Math.min(Dn[0],Dn[1]),Tn=Math.max(Dn[0],Dn[1]),wn=0;Array.isArray(sn)||(sn=[]);var kn="category"===gn.type?gn.d2l_noadd:gn.d2l;"log"===gn.type&&"L"!==String(gn.dtick).charAt(0)&&(gn.dtick="L"+Math.pow(10,Math.floor(Math.min(gn.range[0],gn.range[1]))-1));for(var Fn=0;Fn<Qt.length;Fn++){var On=kn(Qt[Fn]);On>_n&&On<Tn&&(hn[wn]=void 0===sn[Fn]?j.tickText(gn,On):Ie(gn,On,String(sn[Fn])),wn++)}return wn<Qt.length&&hn.splice(wn,Qt.length-wn),gn.rangebreaks&&(hn=hn.filter(function(Qn){return gn.maskBreaks(Qn.x)!==L})),hn}(Ze);var rt=ne(Ge),Le=rt[0],ze=rt[1],je=Ge[1]<Ge[0],Ne=Math.min(Ge[0],Ge[1]),st=Math.max(Ge[0],Ge[1]),mt="log"===Ze.type&&!(x(Ze.dtick)||"L"===Ze.dtick.charAt(0)),Tt="period"===Ze.ticklabelmode;if(Ze._tmin=j.tickFirst(Ze,Qe),Ze._tmin<Le!==je)return[];"category"!==Ze.type&&"multicategory"!==Ze.type||(ze=je?Math.max(-.5,ze):Math.min(Ze._categories.length-.5,ze));var xt=Ze._tmin;Ze.rangebreaks&&Ze._tick0Init!==Ze.tick0&&(xt=Rt(xt,Ze),je||(xt=j.tickIncrement(xt,Ze.dtick,!je,Ze.calendar))),Tt&&(xt=j.tickIncrement(xt,Ze.dtick,!je,Ze.calendar));for(var zt,gt=Math.max(1e3,Ze._length||0),Bt=[],jt=null;je?xt>=ze:xt<=ze;xt=j.tickIncrement(xt,Ze.dtick,je,Ze.calendar)){if(Ze.rangebreaks&&!je){if(xt<Le)continue;if(Ze.maskBreaks(xt)===L&&Rt(xt,Ze)>=st)break}if(Bt.length>gt||xt===jt)break;jt=xt;var it=!1;mt&&xt!==(0|xt)&&(it=!0),Bt.push({minor:it,value:xt})}if(Tt&&function(gn,Qt,sn){for(var hn=0;hn<gn.length;hn++){var Dn=gn[hn].value,_n=hn,Tn=hn+1;hn<gn.length-1?(_n=hn,Tn=hn+1):hn>0?(_n=hn-1,Tn=hn):(_n=hn,Tn=hn);var wn,On=Math.abs(gn[Tn].value-gn[_n].value),Qn=sn||On,sr=0;Qn>=y?sr=On>=y&&On<=f?On:p:sn===l&&Qn>=w?sr=On>=w&&On<=m?On:l:Qn>=M?sr=On>=M&&On<=v?On:A:sn===k&&Qn>=k?sr=k:Qn>=E?sr=E:sn===P&&Qn>=P?sr=P:sn===S&&Qn>=S&&(sr=S),sr>=On&&(sr=On,wn=!0);var Mr=Dn+sr;if(Qt.rangebreaks&&sr>0){for(var Wr=0,mr=0;mr<84;mr++){var Or=(mr+.5)/84;Qt.maskBreaks(Dn*(1-Or)+Or*Mr)!==L&&Wr++}(sr*=Wr/84)||(gn[hn].drop=!0),wn&&On>k&&(sr=On)}(sr>0||0===hn)&&(gn[hn].periodX=Dn+sr/2)}}(Bt,Ze,Ze._definedDelta),Ze.rangebreaks){var Mt="y"===Ze._id.charAt(0),qt=1;"auto"===Ze.tickmode&&(qt=Ze.tickfont?Ze.tickfont.size:12);var Wt=NaN;for(zt=Bt.length-1;zt>-1;zt--)if(Bt[zt].drop)Bt.splice(zt,1);else{Bt[zt].value=Rt(Bt[zt].value,Ze);var an=Ze.c2p(Bt[zt].value);(Mt?Wt>an-qt:Wt<an+qt)?Bt.splice(je?zt+1:zt,1):Wt=an}}ut(Ze)&&360===Math.abs(Ge[1]-Ge[0])&&Bt.pop(),Ze._tmax=(Bt[Bt.length-1]||{}).value,Ze._prevDateHead="",Ze._inCalcTicks=!0;var Ue,yt,Dt=[];for(zt=0;zt<Bt.length;zt++)Ue=j.tickText(Ze,Bt[zt].value,!1,Bt[zt].minor),void 0!==(yt=Bt[zt].periodX)&&(Ue.periodX=yt,(yt>st||yt<Ne)&&(yt>st&&(Ue.periodX=st),yt<Ne&&(Ue.periodX=Ne),Ue.text=" ",Ze._prevDateHead="")),Dt.push(Ue);return Ze._inCalcTicks=!1,Dt};var be=[2,5,10],ge=[1,2,3,6,12],we=[1,2,5,10,15,30],ke=[1,2,3,7,14],De=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ee=[-.301,0,.301,.699,1],Re=[15,30,45,90,180];function ve(Ze,Qe,Ge){return Qe*e.roundUp(Ze/Qe,Ge)}function Te(Ze){var Qe=Ze.dtick;if(Ze._tickexponent=0,x(Qe)||"string"==typeof Qe||(Qe=1),"category"!==Ze.type&&"multicategory"!==Ze.type||(Ze._tickround=null),"date"===Ze.type){var Ge=Ze.r2l(Ze.tick0),rt=Ze.l2r(Ge).replace(/(^-|i)/g,""),Le=rt.length;if("M"===String(Qe).charAt(0))Ze._tickround=Le>10||"01-01"!==rt.substr(5)?"d":+Qe.substr(1)%12==0?"y":"m";else if(Qe>=E&&Le<=10||Qe>=15*E)Ze._tickround="d";else if(Qe>=F&&Le<=16||Qe>=S)Ze._tickround="M";else if(Qe>=R&&Le<=19||Qe>=F)Ze._tickround="S";else{var ze=Ze.l2r(Ge+Qe).replace(/^-/,"").length;Ze._tickround=Math.max(Le,ze)-20,Ze._tickround<0&&(Ze._tickround=4)}}else if(x(Qe)||"L"===Qe.charAt(0)){var je=Ze.range.map(Ze.r2d||Number);x(Qe)||(Qe=Number(Qe.substr(1))),Ze._tickround=2-Math.floor(Math.log(Qe)/Math.LN10+.01);var Ne=Math.max(Math.abs(je[0]),Math.abs(je[1])),st=Math.floor(Math.log(Ne)/Math.LN10+.01),mt=void 0===Ze.minexponent?3:Ze.minexponent;Math.abs(st)>mt&&(Ze._tickexponent=Pe(Ze.exponentformat)&&!Ve(st)?3*Math.round((st-1)/3):st)}else Ze._tickround=null}function Ie(Ze,Qe,Ge){var rt=Ze.tickfont||{};return{x:Qe,dx:0,dy:0,text:Ge||"",fontSize:rt.size,font:rt.family,fontColor:rt.color}}j.autoTicks=function(Ze,Qe){var Ge;function rt(Tt){return Math.pow(Tt,Math.floor(Math.log(Qe)/Math.LN10))}if("date"===Ze.type){Ze.tick0=e.dateTick0(Ze.calendar,0);var Le=2*Qe;if(Le>p)Qe/=p,Ge=rt(10),Ze.dtick="M"+12*ve(Qe,Ge,be);else if(Le>A)Ze.dtick="M"+ve(Qe/=A,1,ge);else if(Le>E){Ze.dtick=ve(Qe,E,Ze._hasDayOfWeekBreaks?[1,2,7,14]:ke);var ze=j.getTickFormat(Ze),je="period"===Ze.ticklabelmode;je&&(Ze._rawTick0=Ze.tick0),Ze.tick0=/%[uVW]/.test(ze)?e.dateTick0(Ze.calendar,2):e.dateTick0(Ze.calendar,1),je&&(Ze._dowTick0=Ze.tick0)}else Le>S?Ze.dtick=ve(Qe,S,ge):Le>F?Ze.dtick=ve(Qe,F,we):Le>R?Ze.dtick=ve(Qe,R,we):(Ge=rt(10),Ze.dtick=ve(Qe,Ge,be))}else if("log"===Ze.type){Ze.tick0=0;var Ne=e.simpleMap(Ze.range,Ze.r2l);if(Qe>.7)Ze.dtick=Math.ceil(Qe);else if(Math.abs(Ne[1]-Ne[0])<1){var st=1.5*Math.abs((Ne[1]-Ne[0])/Qe);Qe=Math.abs(Math.pow(10,Ne[1])-Math.pow(10,Ne[0]))/st,Ge=rt(10),Ze.dtick="L"+ve(Qe,Ge,be)}else Ze.dtick=Qe>.3?"D2":"D1"}else"category"===Ze.type||"multicategory"===Ze.type?(Ze.tick0=0,Ze.dtick=Math.ceil(Math.max(Qe,1))):ut(Ze)?(Ze.tick0=0,Ze.dtick=ve(Qe,Ge=1,Re)):(Ze.tick0=0,Ge=rt(10),Ze.dtick=ve(Qe,Ge,be));if(0===Ze.dtick&&(Ze.dtick=1),!x(Ze.dtick)&&"string"!=typeof Ze.dtick){var mt=Ze.dtick;throw Ze.dtick=1,"ax.dtick error: "+String(mt)}},j.tickIncrement=function(Ze,Qe,Ge,rt){var Le=Ge?-1:1;if(x(Qe))return e.increment(Ze,Le*Qe);var ze=Qe.charAt(0),je=Le*Number(Qe.substr(1));if("M"===ze)return e.incrementMonth(Ze,je,rt);if("L"===ze)return Math.log(Math.pow(10,Ze)+je)/Math.LN10;if("D"===ze){var Ne="D2"===Qe?Ee:De,st=Ze+.01*Le,mt=e.roundUp(e.mod(st,1),Ne,Ge);return Math.floor(st)+Math.log(g.round(Math.pow(10,mt),1))/Math.LN10}throw"unrecognized dtick "+String(Qe)},j.tickFirst=function(Ze,Qe){var Ge=Ze.r2l||Number,rt=e.simpleMap(Ze.range,Ge,void 0,void 0,Qe),Le=rt[1]<rt[0],ze=Le?Math.floor:Math.ceil,je=ne(rt)[0],Ne=Ze.dtick,st=Ge(Ze.tick0);if(x(Ne)){var mt=ze((je-st)/Ne)*Ne+st;return"category"!==Ze.type&&"multicategory"!==Ze.type||(mt=e.constrain(mt,0,Ze._categories.length-1)),mt}var Tt=Ne.charAt(0),xt=Number(Ne.substr(1));if("M"===Tt){for(var zt,gt,Bt,jt=0,it=st;jt<10;){if(((zt=j.tickIncrement(it,Ne,Le,Ze.calendar))-je)*(it-je)<=0)return Le?Math.min(it,zt):Math.max(it,zt);gt=(je-(it+zt)/2)/(zt-it),Bt=Tt+(Math.abs(Math.round(gt))||1)*xt,it=j.tickIncrement(it,Bt,gt<0?!Le:Le,Ze.calendar),jt++}return e.error("tickFirst did not converge",Ze),it}if("L"===Tt)return Math.log(ze((Math.pow(10,je)-st)/xt)*xt+st)/Math.LN10;if("D"===Tt){var Mt="D2"===Ne?Ee:De,qt=e.roundUp(e.mod(je,1),Mt,Le);return Math.floor(je)+Math.log(g.round(Math.pow(10,qt),1))/Math.LN10}throw"unrecognized dtick "+String(Ne)},j.tickText=function(Ze,Qe,Ge,rt){var Le,ze=Ie(Ze,Qe),je="array"===Ze.tickmode,Ne=Ge||je,st=Ze.type,mt="category"===st?Ze.d2l_noadd:Ze.d2l;if(je&&Array.isArray(Ze.ticktext)){var Tt=e.simpleMap(Ze.range,Ze.r2l),xt=(Math.abs(Tt[1]-Tt[0])-(Ze._lBreaks||0))/1e4;for(Le=0;Le<Ze.ticktext.length&&!(Math.abs(Qe-mt(Ze.tickvals[Le]))<xt);Le++);if(Le<Ze.ticktext.length)return ze.text=String(Ze.ticktext[Le]),ze}function zt(jt){return void 0===jt||(Ge?"none"===jt:"all"!==jt&&Qe!=={first:Ze._tmin,last:Ze._tmax}[jt])}var it,Mt,gt=Ge?"never":"none"!==Ze.exponentformat&&zt(Ze.showexponent)?"hide":"";if("date"===st?function(jt,it,Mt,qt){var Wt=jt._tickround,an=Mt&&jt.hoverformat||j.getTickFormat(jt);qt&&(Wt=x(Wt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Wt]);var Ue,yt=e.formatDate(it.x,an,Wt,jt._dateFormat,jt.calendar,jt._extraFormat),Dt=yt.indexOf("\n");if(-1!==Dt&&(Ue=yt.substr(Dt+1),yt=yt.substr(0,Dt)),qt&&("00:00:00"===yt||"00:00"===yt?(yt=Ue,Ue=""):8===yt.length&&(yt=yt.replace(/:00$/,""))),Ue)if(Mt)"d"===Wt?yt+=", "+Ue:yt=Ue+(yt?", "+yt:"");else if(jt._inCalcTicks&&jt._prevDateHead===Ue){var Ht=nn(jt),Jt=jt._trueSide||jt.side;(!Ht&&"top"===Jt||Ht&&"bottom"===Jt)&&(yt+="<br> ")}else jt._prevDateHead=Ue,yt+="<br>"+Ue;it.text=yt}(Ze,ze,Ge,Ne):"log"===st?function(jt,it,Mt,qt,Wt){var an=jt.dtick,Ue=it.x,yt=jt.tickformat,Dt="string"==typeof an&&an.charAt(0);if("never"===Wt&&(Wt=""),qt&&"L"!==Dt&&(an="L3",Dt="L"),yt||"L"===Dt)it.text=qe(Math.pow(10,Ue),jt,Wt,qt);else if(x(an)||"D"===Dt&&e.mod(Ue+.01,1)<.1){var Ht=Math.round(Ue),Jt=Math.abs(Ht),gn=jt.exponentformat;"power"===gn||Pe(gn)&&Ve(Ht)?(it.text=0===Ht?1:1===Ht?"10":"10<sup>"+(Ht>1?"":D)+Jt+"</sup>",it.fontSize*=1.25):("e"===gn||"E"===gn)&&Jt>2?it.text="1"+gn+(Ht>0?"+":D)+Jt:(it.text=qe(Math.pow(10,Ue),jt,"","fakehover"),"D1"===an&&"y"===jt._id.charAt(0)&&(it.dy-=it.fontSize/6))}else{if("D"!==Dt)throw"unrecognized dtick "+String(an);it.text=String(Math.round(Math.pow(10,e.mod(Ue,1)))),it.fontSize*=.75}if("D1"===jt.dtick){var Qt=String(it.text).charAt(0);"0"!==Qt&&"1"!==Qt||("y"===jt._id.charAt(0)?it.dx-=it.fontSize/4:(it.dy+=it.fontSize/2,it.dx+=(jt.range[1]>jt.range[0]?1:-1)*it.fontSize*(Ue<0?.5:.25)))}}(Ze,ze,0,Ne,gt):"category"===st?(it=ze,void 0===(Mt=Ze._categories[Math.round(it.x)])&&(Mt=""),it.text=String(Mt)):"multicategory"===st?function(jt,it,Mt){var qt=Math.round(it.x),Wt=jt._categories[qt]||[],an=void 0===Wt[1]?"":String(Wt[1]),Ue=void 0===Wt[0]?"":String(Wt[0]);Mt?it.text=Ue+" - "+an:(it.text=an,it.text2=Ue)}(Ze,ze,Ge):ut(Ze)?function(jt,it,Mt,qt,Wt){if("radians"!==jt.thetaunit||Mt)it.text=qe(it.x,jt,Wt,qt);else{var an=it.x/180;if(0===an)it.text="0";else{var Ue=function(Dt){function Ht(sn,hn){return Math.abs(sn-hn)<=1e-6}var Jt=function(sn){for(var hn=1;!Ht(Math.round(sn*hn)/hn,sn);)hn*=10;return hn}(Dt),gn=Dt*Jt,Qt=Math.abs(function sn(hn,Dn){return Ht(Dn,0)?hn:sn(Dn,hn%Dn)}(gn,Jt));return[Math.round(gn/Qt),Math.round(Jt/Qt)]}(an);if(Ue[1]>=100)it.text=qe(e.deg2rad(it.x),jt,Wt,qt);else{var yt=it.x<0;it.text=1===Ue[1]?1===Ue[0]?"\u03c0":Ue[0]+"\u03c0":["<sup>",Ue[0],"</sup>","\u2044","<sub>",Ue[1],"</sub>","\u03c0"].join(""),yt&&(it.text=D+it.text)}}}}(Ze,ze,Ge,Ne,gt):function(jt,it,Mt,qt,Wt){"never"===Wt?Wt="":"all"===jt.showexponent&&Math.abs(it.x/jt.dtick)<1e-6&&(Wt="hide"),it.text=qe(it.x,jt,Wt,qt)}(Ze,ze,0,Ne,gt),rt||(Ze.tickprefix&&!zt(Ze.showtickprefix)&&(ze.text=Ze.tickprefix+ze.text),Ze.ticksuffix&&!zt(Ze.showticksuffix)&&(ze.text+=Ze.ticksuffix)),"boundaries"===Ze.tickson||Ze.showdividers){var Bt=function(jt){var it=Ze.l2p(jt);return it>=0&&it<=Ze._length?jt:null};ze.xbnd=[Bt(ze.x-.5),Bt(ze.x+Ze.dtick-.5)]}return ze},j.hoverLabelText=function(Ze,Qe,Ge){Ge&&(Ze=e.extendFlat({},Ze,{hoverformat:Ge}));var rt=Array.isArray(Qe)?Qe[0]:Qe,Le=Array.isArray(Qe)?Qe[1]:void 0;if(void 0!==Le&&Le!==rt)return j.hoverLabelText(Ze,rt,Ge)+" - "+j.hoverLabelText(Ze,Le,Ge);var ze="log"===Ze.type&&rt<=0,je=j.tickText(Ze,Ze.c2l(ze?-rt:rt),"hover").text;return ze?0===rt?"0":D+je:je};var Ce=["f","p","n","\u03bc","m","","k","M","G","T"];function Pe(Ze){return"SI"===Ze||"B"===Ze}function Ve(Ze){return Ze>14||Ze<-15}function qe(Ze,Qe,Ge,rt){var Le=Ze<0,ze=Qe._tickround,je=Ge||Qe.exponentformat||"B",Ne=Qe._tickexponent,st=j.getTickFormat(Qe),mt=Qe.separatethousands;if(rt){var Tt={exponentformat:je,minexponent:Qe.minexponent,dtick:"none"===Qe.showexponent?Qe.dtick:x(Ze)&&Math.abs(Ze)||1,range:"none"===Qe.showexponent?Qe.range.map(Qe.r2d):[0,Ze||1]};Te(Tt),ze=(Number(Tt._tickround)||0)+4,Ne=Tt._tickexponent,Qe.hoverformat&&(st=Qe.hoverformat)}if(st)return Qe._numFormat(st)(Ze).replace(/-/g,D);var xt,zt=Math.pow(10,-ze)/2;if("none"===je&&(Ne=0),(Ze=Math.abs(Ze))<zt)Ze="0",Le=!1;else{if(Ze+=zt,Ne&&(Ze*=Math.pow(10,-Ne),ze+=Ne),0===ze)Ze=String(Math.floor(Ze));else if(ze<0){Ze=(Ze=String(Math.round(Ze))).substr(0,Ze.length+ze);for(var gt=ze;gt<0;gt++)Ze+="0"}else{var Bt=(Ze=String(Ze)).indexOf(".")+1;Bt&&(Ze=Ze.substr(0,Bt+ze).replace(/\.?0+$/,""))}Ze=e.numSeparate(Ze,Qe._separators,mt)}return Ne&&"hide"!==je&&(Pe(je)&&Ve(Ne)&&(je="power"),xt=Ne<0?D+-Ne:"power"!==je?"+"+Ne:String(Ne),"e"===je||"E"===je?Ze+=je+xt:"power"===je?Ze+="\xd710<sup>"+xt+"</sup>":"B"===je&&9===Ne?Ze+="B":Pe(je)&&(Ze+=Ce[Ne/3+5])),Le?D+Ze:Ze}function Je(Ze,Qe){for(var Ge=[],rt={},Le=0;Le<Qe.length;Le++){var ze=Qe[Le];rt[ze.text2]?rt[ze.text2].push(ze.x):rt[ze.text2]=[ze.x]}for(var je in rt)Ge.push(Ie(Ze,e.interp(rt[je],.5),je));return Ge}function lt(Ze){return void 0!==Ze.periodX?Ze.periodX:Ze.x}function He(Ze){return[Ze.text,Ze.x,Ze.axInfo,Ze.font,Ze.fontSize,Ze.fontColor].join("_")}function $e(Ze){var Qe=Ze.title.font.size,Ge=(Ze.title.text.match(t.BR_TAG_ALL)||[]).length;return Ze.title.hasOwnProperty("standoff")?Ge?Qe*($+Ge*K):Qe*$:Ge?Qe*(Ge+1)*K:Qe}function et(Ze,Qe){var Ge=Ze.l2p(Qe);return Ge>1&&Ge<Ze._length-1}function tt(Ze){var Qe=g.select(Ze),Ge=Qe.select(".text-math-group");return Ge.empty()?Qe.select("text"):Ge}function ft(Ze){return Ze._id+".automargin"}function bt(Ze){return ft(Ze)+".mirror"}function Ct(Ze){return Ze._id+".rangeslider"}function Vt(Ze,Qe){for(var Ge=0;Ge<Qe.length;Ge++)-1===Ze.indexOf(Qe[Ge])&&Ze.push(Qe[Ge])}function Ft(Ze,Qe,Ge){var rt,Le,ze=[],je=[],Ne=Ze.layout;for(rt=0;rt<Qe.length;rt++)ze.push(j.getFromId(Ze,Qe[rt]));for(rt=0;rt<Ge.length;rt++)je.push(j.getFromId(Ze,Ge[rt]));var st=Object.keys(s),mt=["anchor","domain","overlaying","position","side","tickangle","editType"],Tt=["linear","log"];for(rt=0;rt<st.length;rt++){var xt=st[rt],zt=ze[0][xt],gt=je[0][xt],Bt=!0,jt=!1,it=!1;if("_"!==xt.charAt(0)&&"function"!=typeof zt&&-1===mt.indexOf(xt)){for(Le=1;Le<ze.length&&Bt;Le++){var Mt=ze[Le][xt];"type"===xt&&-1!==Tt.indexOf(zt)&&-1!==Tt.indexOf(Mt)&&zt!==Mt?jt=!0:Mt!==zt&&(Bt=!1)}for(Le=1;Le<je.length&&Bt;Le++){var qt=je[Le][xt];"type"===xt&&-1!==Tt.indexOf(gt)&&-1!==Tt.indexOf(qt)&&gt!==qt?it=!0:je[Le][xt]!==gt&&(Bt=!1)}Bt&&(jt&&(Ne[ze[0]._name].type="linear"),it&&(Ne[je[0]._name].type="linear"),ht(Ne,xt,ze,je,Ze._fullLayout._dfltTitle))}}for(rt=0;rt<Ze._fullLayout.annotations.length;rt++){var Wt=Ze._fullLayout.annotations[rt];-1!==Qe.indexOf(Wt.xref)&&-1!==Ge.indexOf(Wt.yref)&&e.swapAttrs(Ne.annotations[rt],["?"])}}function ht(Ze,Qe,Ge,rt,Le){var ze,je=e.nestedProperty,Ne=je(Ze[Ge[0]._name],Qe).get(),st=je(Ze[rt[0]._name],Qe).get();for("title"===Qe&&(Ne&&Ne.text===Le.x&&(Ne.text=Le.y),st&&st.text===Le.y&&(st.text=Le.x)),ze=0;ze<Ge.length;ze++)je(Ze,Ge[ze]._name+"."+Qe).set(st);for(ze=0;ze<rt.length;ze++)je(Ze,rt[ze]._name+"."+Qe).set(Ne)}function ut(Ze){return"angularaxis"===Ze._id}function Rt(Ze,Qe){for(var Ge=Qe._rangebreaks.length,rt=0;rt<Ge;rt++){var Le=Qe._rangebreaks[rt];if(Ze>=Le.min&&Ze<Le.max)return Le.max}return Ze}function nn(Ze){return-1!==(Ze.ticklabelposition||"").indexOf("inside")}function cn(Ze,Qe){nn(Ze._anchorAxis||{})&&Ze._hideCounterAxisInsideTickLabels&&Ze._hideCounterAxisInsideTickLabels(Qe)}j.getTickFormat=function(Ze){var Qe,Ge,rt,Le,ze,je,Ne,st,zt,gt,Bt,jt,it,Mt;function mt(zt){return"string"!=typeof zt?zt:Number(zt.replace("M",""))*A}function Tt(zt,gt){var Bt=["L","D"];if(typeof zt==typeof gt){if("number"==typeof zt)return zt-gt;var jt=Bt.indexOf(zt.charAt(0)),it=Bt.indexOf(gt.charAt(0));return jt===it?Number(zt.replace(/(L|D)/g,""))-Number(gt.replace(/(L|D)/g,"")):jt-it}return"number"==typeof zt?1:-1}if(Ze.tickformatstops&&Ze.tickformatstops.length>0)switch(Ze.type){case"date":case"linear":for(Qe=0;Qe<Ze.tickformatstops.length;Qe++)if((rt=Ze.tickformatstops[Qe]).enabled&&(Le=Ze.dtick,je=void 0,void 0,void 0,je=mt||function(zt){return zt},st=(ze=rt.dtickrange)[1],(!(Ne=ze[0])&&"number"!=typeof Ne||je(Ne)<=je(Le))&&(!st&&"number"!=typeof st||je(st)>=je(Le)))){Ge=rt;break}break;case"log":for(Qe=0;Qe<Ze.tickformatstops.length;Qe++)if((rt=Ze.tickformatstops[Qe]).enabled&&(Bt=void 0,jt=void 0,it=void 0,Mt=void 0,Bt=null===(gt=rt.dtickrange)[0],jt=null===gt[1],it=Tt(zt=Ze.dtick,gt[0])>=0,Mt=Tt(zt,gt[1])<=0,(Bt||it)&&(jt||Mt))){Ge=rt;break}}return Ge?Ge.value:Ze.tickformat},j.getSubplots=function(Ze,Qe){var Ge=Ze._fullLayout._subplots,rt=Ge.cartesian.concat(Ge.gl2d||[]),Le=Qe?j.findSubplotsWithAxis(rt,Qe):rt;return Le.sort(function(ze,je){var Ne=ze.substr(1).split("y"),st=je.substr(1).split("y");return Ne[0]===st[0]?+Ne[1]-+st[1]:+Ne[0]-+st[0]}),Le},j.findSubplotsWithAxis=function(Ze,Qe){for(var Ge=new RegExp("x"===Qe._id.charAt(0)?"^"+Qe._id+"y":Qe._id+"$"),rt=[],Le=0;Le<Ze.length;Le++){var ze=Ze[Le];Ge.test(ze)&&rt.push(ze)}return rt},j.makeClipPaths=function(Ze){var Qe=Ze._fullLayout;if(!Qe._hasOnlyLargeSploms){var Ge,rt,Le={_offset:0,_length:Qe.width,_id:""},ze={_offset:0,_length:Qe.height,_id:""},je=j.list(Ze,"x",!0),Ne=j.list(Ze,"y",!0),st=[];for(Ge=0;Ge<je.length;Ge++)for(st.push({x:je[Ge],y:ze}),rt=0;rt<Ne.length;rt++)0===Ge&&st.push({x:Le,y:Ne[rt]}),st.push({x:je[Ge],y:Ne[rt]});var mt=Qe._clips.selectAll(".axesclip").data(st,function(Tt){return Tt.x._id+Tt.y._id});mt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Tt){return"clip"+Qe._uid+Tt.x._id+Tt.y._id}).append("rect"),mt.exit().remove(),mt.each(function(Tt){g.select(this).select("rect").attr({x:Tt.x._offset||0,y:Tt.y._offset||0,width:Tt.x._length||1,height:Tt.y._length||1})})}},j.draw=function(Ze,Qe,Ge){var rt=Ze._fullLayout;"redraw"===Qe&&rt._paper.selectAll("g.subplot").each(function(ze){var Ne=rt._plots[ze[0]];if(Ne){var st=Ne.xaxis,mt=Ne.yaxis;Ne.xaxislayer.selectAll("."+st._id+"tick").remove(),Ne.yaxislayer.selectAll("."+mt._id+"tick").remove(),Ne.xaxislayer.selectAll("."+st._id+"tick2").remove(),Ne.yaxislayer.selectAll("."+mt._id+"tick2").remove(),Ne.xaxislayer.selectAll("."+st._id+"divider").remove(),Ne.yaxislayer.selectAll("."+mt._id+"divider").remove(),Ne.gridlayer&&Ne.gridlayer.selectAll("path").remove(),Ne.zerolinelayer&&Ne.zerolinelayer.selectAll("path").remove(),rt._infolayer.select(".g-"+st._id+"title").remove(),rt._infolayer.select(".g-"+mt._id+"title").remove()}});var Le=Qe&&"redraw"!==Qe?Qe:j.listIds(Ze);return e.syncOrAsync(Le.map(function(ze){return function(){if(ze){var je=j.getFromId(Ze,ze),Ne=j.drawOne(Ze,je,Ge);return je._r=je.range.slice(),je._rl=e.simpleMap(je._r,je.r2l),Ne}}}))},j.drawOne=function(Ze,Qe,Ge){var rt,Le,ze;Ge=Ge||{},Qe.setScale();var je=Ze._fullLayout,Ne=Qe._id,st=Ne.charAt(0),mt=j.counterLetter(Ne),Tt=je._plots[Qe._mainSubplot];if(Tt){var xt=Tt[st+"axislayer"],zt=Qe._mainLinePosition,gt=Qe._mainMirrorPosition,Bt=Qe._vals=j.calcTicks(Qe),jt=[Qe.mirror,zt,gt].join("_");for(rt=0;rt<Bt.length;rt++)Bt[rt].axInfo=jt;Qe._selections={},Qe._tickAngles&&(Qe._prevTickAngles=Qe._tickAngles),Qe._tickAngles={},Qe._depth=null;var it={};if(Qe.visible){var Mt,qt,Wt=j.makeTransTickFn(Qe),an=j.makeTransTickLabelFn(Qe),Ue="inside"===Qe.ticks,yt="outside"===Qe.ticks;if("boundaries"===Qe.tickson){var Dt=function(Xn,jn){var nr,Ur=[],Jn=function(_r,Hr){var Lr=_r.xbnd[Hr];null!==Lr&&Ur.push(e.extendFlat({},_r,{x:Lr}))};if(jn.length){for(nr=0;nr<jn.length;nr++)Jn(jn[nr],0);Jn(jn[nr-1],1)}return Ur}(0,Bt);qt=j.clipEnds(Qe,Dt),Mt=Ue?qt:Dt}else qt=j.clipEnds(Qe,Bt),Mt=Ue&&"period"!==Qe.ticklabelmode?qt:Bt;var Ht=Qe._gridVals=qt,Jt=function(Xn,jn){var nr,Ur,Jn=[],_r=jn.length&&jn[jn.length-1].x<jn[0].x,Hr=function($r,dn){var Ut=$r.xbnd[dn];null!==Ut&&Jn.push(e.extendFlat({},$r,{x:Ut}))};if(Xn.showdividers&&jn.length){for(nr=0;nr<jn.length;nr++){var Lr=jn[nr];Lr.text2!==Ur&&Hr(Lr,_r?1:0),Ur=Lr.text2}Hr(jn[nr-1],_r?0:1)}return Jn}(Qe,Bt);if(!je._hasOnlyLargeSploms){var gn=Qe._subplotsWith,Qt={};for(rt=0;rt<gn.length;rt++){var sn=(ze=je._plots[Le=gn[rt]])[mt+"axis"],hn=sn._mainAxis._id;if(!Qt[hn]){Qt[hn]=1;var Dn="x"===st?"M0,"+sn._offset+"v"+sn._length:"M"+sn._offset+",0h"+sn._length;j.drawGrid(Ze,Qe,{vals:Ht,counterAxis:sn,layer:ze.gridlayer.select("."+Ne),path:Dn,transFn:Wt}),j.drawZeroLine(Ze,Qe,{counterAxis:sn,layer:ze.zerolinelayer,path:Dn,transFn:Wt})}}}var _n=j.getTickSigns(Qe),Tn=[];if(Qe.ticks){var wn,kn,Fn,On=j.makeTickPath(Qe,zt,_n[2]);if(Qe._anchorAxis&&Qe.mirror&&!0!==Qe.mirror?(wn=j.makeTickPath(Qe,gt,_n[3]),kn=On+wn):(wn="",kn=On),Qe.showdividers&&yt&&"boundaries"===Qe.tickson){var Qn={};for(rt=0;rt<Jt.length;rt++)Qn[Jt[rt].x]=1;Fn=function(Xn){return Qn[Xn.x]?wn:kn}}else Fn=kn;j.drawTicks(Ze,Qe,{vals:Mt,layer:xt,path:Fn,transFn:Wt}),"allticks"===Qe.mirror&&(Tn=Object.keys(Qe._linepositions||{}))}for(rt=0;rt<Tn.length;rt++){ze=je._plots[Le=Tn[rt]];var sr=Qe._linepositions[Le]||[],Mr=j.makeTickPath(Qe,sr[0],_n[0])+j.makeTickPath(Qe,sr[1],_n[1]);j.drawTicks(Ze,Qe,{vals:Mt,layer:ze[st+"axislayer"],path:Mr,transFn:Wt})}var Wr=[];if(Wr.push(function(){return j.drawLabels(Ze,Qe,{vals:Bt,layer:xt,plotinfo:ze,transFn:an,labelFns:j.makeLabelFns(Qe,zt)})}),"multicategory"===Qe.type){var mr={x:2,y:10}[st];Wr.push(function(){var Xn={x:"height",y:"width"}[st],jn=vr()[Xn]+mr+(Qe._tickAngles[Ne+"tick"]?Qe.tickfont.size*K:0);return j.drawLabels(Ze,Qe,{vals:Je(Qe,Bt),layer:xt,cls:Ne+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Wt,labelFns:j.makeLabelFns(Qe,zt+jn*_n[4])})}),Wr.push(function(){return Qe._depth=_n[4]*(vr("tick2")[Qe.side]-zt),Xn=Ze,jn=Qe,Jn=(nr={vals:Jt,layer:xt,path:j.makeTickPath(Qe,zt,_n[4],Qe._depth),transFn:Wt}).vals,(_r=nr.layer.selectAll("path."+(Ur=jn._id+"divider")).data(Jn,He)).exit().remove(),_r.enter().insert("path",":first-child").classed(Ur,1).classed("crisp",1).call(n.stroke,jn.dividercolor).style("stroke-width",d.crispRound(Xn,jn.dividerwidth,1)+"px"),void _r.attr("transform",nr.transFn).attr("d",nr.path);var Xn,jn,nr,Ur,Jn,_r})}else Qe.title.hasOwnProperty("standoff")&&Wr.push(function(){Qe._depth=_n[4]*(vr()[Qe.side]-zt)});var Or=b.getComponentMethod("rangeslider","isVisible")(Qe);return Wr.push(function(){var Xn,jn,nr,Ur,Jn=Qe.side.charAt(0),_r=oe[Qe.side].charAt(0),Hr=j.getPxPosition(Ze,Qe),Lr=yt?Qe.ticklen:0;if((Qe.automargin||Or)&&("multicategory"===Qe.type?Xn=vr("tick2"):(Xn=vr(),"x"===st&&"b"===Jn&&(Qe._depth=Math.max(Xn.width>0?Xn.bottom-Hr:0,Lr)))),Qe.automargin){jn={x:0,y:0,r:0,l:0,t:0,b:0};var $r=[0,1];if("x"===st){if("b"===Jn?jn[Jn]=Qe._depth:(jn[Jn]=Qe._depth=Math.max(Xn.width>0?Hr-Xn.top:0,Lr),$r.reverse()),Xn.width>0){var dn=Xn.right-(Qe._offset+Qe._length);dn>0&&(jn.xr=1,jn.r=dn);var Ut=Qe._offset-Xn.left;Ut>0&&(jn.xl=0,jn.l=Ut)}}else if("l"===Jn?jn[Jn]=Qe._depth=Math.max(Xn.height>0?Hr-Xn.left:0,Lr):(jn[Jn]=Qe._depth=Math.max(Xn.height>0?Xn.right-Hr:0,Lr),$r.reverse()),Xn.height>0){var Kt=Xn.bottom-(Qe._offset+Qe._length);Kt>0&&(jn.yb=0,jn.b=Kt);var Mn=Qe._offset-Xn.top;Mn>0&&(jn.yt=1,jn.t=Mn)}jn[mt]="free"===Qe.anchor?Qe.position:Qe._anchorAxis.domain[$r[0]],Qe.title.text!==je._dfltTitle[st]&&(jn[Jn]+=$e(Qe)+(Qe.title.standoff||0)),Qe.mirror&&"free"!==Qe.anchor&&((nr={x:0,y:0,r:0,l:0,t:0,b:0})[_r]=Qe.linewidth,Qe.mirror&&!0!==Qe.mirror&&(nr[_r]+=Lr),!0===Qe.mirror||"ticks"===Qe.mirror?nr[mt]=Qe._anchorAxis.domain[$r[1]]:"all"!==Qe.mirror&&"allticks"!==Qe.mirror||(nr[mt]=[Qe._counterDomainMin,Qe._counterDomainMax][$r[1]]))}Or&&(Ur=b.getComponentMethod("rangeslider","autoMarginOpts")(Ze,Qe)),T.autoMargin(Ze,ft(Qe),jn),T.autoMargin(Ze,bt(Qe),nr),T.autoMargin(Ze,Ct(Qe),Ur)}),Ge.skipTitle||Or&&"bottom"===Qe.side||Wr.push(function(){return function(Xn,jn){var nr,Ur=Xn._fullLayout,Jn=jn._id,_r=Jn.charAt(0),Hr=jn.title.font.size;if(jn.title.hasOwnProperty("standoff"))nr=jn._depth+jn.title.standoff+$e(jn);else{var Lr=nn(jn);if("multicategory"===jn.type)nr=jn._depth;else{var $r=1.5*Hr;Lr&&($r=.5*Hr,"outside"===jn.ticks&&($r+=jn.ticklen)),nr=10+$r+(jn.linewidth?jn.linewidth-1:0)}Lr||(nr+="x"===_r?"top"===jn.side?Hr*(jn.showticklabels?1:0):Hr*(jn.showticklabels?1.5:.5):"right"===jn.side?Hr*(jn.showticklabels?1:.5):Hr*(jn.showticklabels?.5:0))}var dn,Ut,Kt,Mn,Bn=j.getPxPosition(Xn,jn);if("x"===_r?(Ut=jn._offset+jn._length/2,Kt="top"===jn.side?Bn-nr:Bn+nr):(Kt=jn._offset+jn._length/2,Ut="right"===jn.side?Bn+nr:Bn-nr,dn={rotate:"-90",offset:0}),"multicategory"!==jn.type){var cr=jn._selections[jn._id+"tick"];if(Mn={selection:cr,side:jn.side},cr&&cr.node()&&cr.node().parentNode){var ur=d.getTranslate(cr.node().parentNode);Mn.offsetLeft=ur.x,Mn.offsetTop=ur.y}jn.title.hasOwnProperty("standoff")&&(Mn.pad=0)}return a.draw(Xn,Jn+"title",{propContainer:jn,propName:jn._name+".title.text",placeholder:Ur._dfltTitle[_r],avoid:Mn,transform:dn,attributes:{x:Ut,y:Kt,"text-anchor":"middle"}})}(Ze,Qe)}),e.syncOrAsync(Wr)}}function vr(Xn){var nr,Ur,Jn,_r,Hr,Lr,jn=Ne+(Xn||"tick");return it[jn]||(it[jn]=((nr=Qe)._selections[Ur=jn].size()?(Jn=1/0,_r=-1/0,Hr=1/0,Lr=-1/0,nr._selections[Ur].each(function(){var $r=tt(this),dn=d.bBox($r.node().parentNode);Jn=Math.min(Jn,dn.top),_r=Math.max(_r,dn.bottom),Hr=Math.min(Hr,dn.left),Lr=Math.max(Lr,dn.right)})):(Jn=0,_r=0,Hr=0,Lr=0),{top:Jn,bottom:_r,left:Hr,right:Lr,height:_r-Jn,width:Lr-Hr})),it[jn]}},j.getTickSigns=function(Ze){var Qe=Ze._id.charAt(0),rt=Ze.side==={x:"top",y:"right"}[Qe]?1:-1,Le=[-1,1,rt,-rt];return"inside"!==Ze.ticks==("x"===Qe)&&(Le=Le.map(function(ze){return-ze})),Ze.side&&Le.push({l:-1,t:-1,r:1,b:1}[Ze.side.charAt(0)]),Le},j.makeTransTickFn=function(Ze){return"x"===Ze._id.charAt(0)?function(Qe){return r(Ze._offset+Ze.l2p(Qe.x),0)}:function(Qe){return r(0,Ze._offset+Ze.l2p(Qe.x))}},j.makeTransTickLabelFn=function(Ze){var Qe=function(Le){var ze=Le.ticklabelposition||"",je=function(Mt){return-1!==ze.indexOf(Mt)},Ne=je("top"),st=je("left"),mt=je("right"),Tt=je("bottom"),xt=je("inside"),zt=Tt||st||Ne||mt;if(!zt&&!xt)return[0,0];var gt=Le.side,Bt=zt?(Le.tickwidth||0)/2:0,jt=3,it=Le.tickfont?Le.tickfont.size:12;return(Tt||Ne)&&(Bt+=it*$,jt+=(Le.linewidth||0)/2),(st||mt)&&(Bt+=(Le.linewidth||0)/2,jt+=3),xt&&"top"===gt&&(jt-=it*(1-$)),(st||Ne)&&(Bt=-Bt),"bottom"!==gt&&"right"!==gt||(jt=-jt),[zt?Bt:0,xt?jt:0]}(Ze),Ge=Qe[0],rt=Qe[1];return"x"===Ze._id.charAt(0)?function(Le){return r(Ge+Ze._offset+Ze.l2p(lt(Le)),rt)}:function(Le){return r(rt,Ge+Ze._offset+Ze.l2p(lt(Le)))}},j.makeTickPath=function(Ze,Qe,Ge,rt){rt=void 0!==rt?rt:Ze.ticklen;var Le=Ze._id.charAt(0),ze=(Ze.linewidth||1)/2;return"x"===Le?"M0,"+(Qe+ze*Ge)+"v"+rt*Ge:"M"+(Qe+ze*Ge)+",0h"+rt*Ge},j.makeLabelFns=function(Ze,Qe,Ge){var rt=Ze.ticklabelposition||"",Le=function(Qt){return-1!==rt.indexOf(Qt)},ze=Le("top"),je=Le("left"),Ne=Le("right"),st=Le("bottom")||je||ze||Ne,mt=Le("inside"),Tt="inside"===rt&&"inside"===Ze.ticks||!mt&&"outside"===Ze.ticks&&"boundaries"!==Ze.tickson,xt=0,zt=0,gt=Tt?Ze.ticklen:0;if(mt?gt*=-1:st&&(gt=0),Tt&&(xt+=gt,Ge)){var Bt=e.deg2rad(Ge);xt=gt*Math.cos(Bt)+1,zt=gt*Math.sin(Bt)}Ze.showticklabels&&(Tt||Ze.showline)&&(xt+=.2*Ze.tickfont.size);var jt,it,Mt,qt,Wt,an={labelStandoff:xt+=(Ze.linewidth||1)/2*(mt?-1:1),labelShift:zt},Ue=0,yt=Ze.side,Dt=Ze._id.charAt(0),Ht=Ze.tickangle;if("x"===Dt)qt=(Wt=!mt&&"bottom"===yt||mt&&"top"===yt)?1:-1,mt&&(qt*=-1),jt=zt*qt,it=Qe+xt*qt,Mt=Wt?1:-.2,90===Math.abs(Ht)&&(mt?Mt+=Q:Mt=-90===Ht&&"bottom"===yt?$:90===Ht&&"top"===yt?Q:.5,Ue=Q/2*(Ht/90)),an.xFn=function(Qt){return Qt.dx+jt+Ue*Qt.fontSize},an.yFn=function(Qt){return Qt.dy+it+Qt.fontSize*Mt},an.anchorFn=function(Qt,sn){if(st){if(je)return"end";if(Ne)return"start"}return x(sn)&&0!==sn&&180!==sn?sn*qt<0!==mt?"end":"start":"middle"},an.heightFn=function(Qt,sn,hn){return sn<-60||sn>60?-.5*hn:"top"===Ze.side!==mt?-hn:0};else if("y"===Dt){if(qt=(Wt=!mt&&"left"===yt||mt&&"right"===yt)?1:-1,mt&&(qt*=-1),jt=xt,it=zt*qt,Mt=0,mt||90!==Math.abs(Ht)||(Mt=-90===Ht&&"left"===yt||90===Ht&&"right"===yt?$:.5),mt){var Jt=x(Ht)?+Ht:0;if(0!==Jt){var gn=e.deg2rad(Jt);Ue=Math.abs(Math.sin(gn))*$*qt,Mt=0}}an.xFn=function(Qt){return Qt.dx+Qe-(jt+Qt.fontSize*Mt)*qt+Ue*Qt.fontSize},an.yFn=function(Qt){return Qt.dy+it+Qt.fontSize*Q},an.anchorFn=function(Qt,sn){return x(sn)&&90===Math.abs(sn)?"middle":Wt?"end":"start"},an.heightFn=function(Qt,sn,hn){return"right"===Ze.side&&(sn*=-1),sn<-30?-hn:sn<30?-.5*hn:0}}return an},j.drawTicks=function(Ze,Qe,Ge){var rt=Qe._id+"tick",Le=(Ge=Ge||{}).vals;"period"===Qe.ticklabelmode&&(Le=Le.slice()).shift();var ze=Ge.layer.selectAll("path."+rt).data(Qe.ticks?Le:[],He);ze.exit().remove(),ze.enter().append("path").classed(rt,1).classed("ticks",1).classed("crisp",!1!==Ge.crisp).call(n.stroke,Qe.tickcolor).style("stroke-width",d.crispRound(Ze,Qe.tickwidth,1)+"px").attr("d",Ge.path).style("display",null),cn(Qe,[Z]),ze.attr("transform",Ge.transFn)},j.drawGrid=function(Ze,Qe,Ge){var rt=Qe._id+"grid",Le=(Ge=Ge||{}).vals,ze=Ge.counterAxis;if(!1===Qe.showgrid)Le=[];else if(ze&&j.shouldShowZeroLine(Ze,Qe,ze))for(var je="array"===Qe.tickmode,Ne=0;Ne<Le.length;Ne++){var st=Le[Ne].x;if(je?!st:Math.abs(st)<Qe.dtick/100){if(Le=Le.slice(0,Ne).concat(Le.slice(Ne+1)),!je)break;Ne--}}var mt=Ge.layer.selectAll("path."+rt).data(Le,He);mt.exit().remove(),mt.enter().append("path").classed(rt,1).classed("crisp",!1!==Ge.crisp),Qe._gw=d.crispRound(Ze,Qe.gridwidth,1),mt.attr("transform",Ge.transFn).attr("d",Ge.path).call(n.stroke,Qe.gridcolor||"#ddd").style("stroke-width",Qe._gw+"px").style("display",null),cn(Qe,[V]),"function"==typeof Ge.path&&mt.attr("d",Ge.path)},j.drawZeroLine=function(Ze,Qe,Ge){var rt=Qe._id+"zl",Le=j.shouldShowZeroLine(Ze,Qe,(Ge=Ge||Ge).counterAxis),ze=Ge.layer.selectAll("path."+rt).data(Le?[{x:0,id:Qe._id}]:[]);ze.exit().remove(),ze.enter().append("path").classed(rt,1).classed("zl",1).classed("crisp",!1!==Ge.crisp).each(function(){Ge.layer.selectAll("path").sort(function(je,Ne){return re(je.id,Ne.id)})}),ze.attr("transform",Ge.transFn).attr("d",Ge.path).call(n.stroke,Qe.zerolinecolor||n.defaultLine).style("stroke-width",d.crispRound(Ze,Qe.zerolinewidth,Qe._gw||1)+"px").style("display",null),cn(Qe,[B])},j.drawLabels=function(Ze,Qe,Ge){Ge=Ge||{};var rt=Ze._fullLayout,Le=Qe._id,ze=Le.charAt(0),je=Ge.cls||Le+"tick",Ne=Ge.vals,st=Ge.labelFns,mt=Ge.secondary?0:Qe.tickangle,Tt=(Qe._prevTickAngles||{})[je],xt=Ge.layer.selectAll("g."+je).data(Qe.showticklabels?Ne:[],He),zt=[];function gt(qt,Wt){qt.each(function(an){var Ue=g.select(this),yt=Ue.select(".text-math-group"),Dt=st.anchorFn(an,Wt),Ht=Ge.transFn.call(Ue.node(),an)+(x(Wt)&&0!=+Wt?" rotate("+Wt+","+st.xFn(an)+","+(st.yFn(an)-an.fontSize/2)+")":""),Jt=t.lineCount(Ue),gn=K*an.fontSize,Qt=st.heightFn(an,x(Wt)?+Wt:0,(Jt-1)*gn);if(Qt&&(Ht+=r(0,Qt)),yt.empty()){var sn=Ue.select("text");sn.attr({transform:Ht,"text-anchor":Dt}),sn.style("opacity",1),Qe._adjustTickLabelsOverflow&&Qe._adjustTickLabelsOverflow()}else{var hn=d.bBox(yt.node()).width*{end:-.5,start:.5}[Dt];yt.attr("transform",Ht+r(hn,0))}})}xt.enter().append("g").classed(je,1).append("text").attr("text-anchor","middle").each(function(qt){var Wt=g.select(this),an=Ze._promises.length;Wt.call(t.positionText,st.xFn(qt),st.yFn(qt)).call(d.font,qt.font,qt.fontSize,qt.fontColor).text(qt.text).call(t.convertToTspans,Ze),Ze._promises[an]?zt.push(Ze._promises.pop().then(function(){gt(Wt,mt)})):gt(Wt,mt)}),cn(Qe,[Y]),xt.exit().remove(),Ge.repositionOnUpdate&&xt.each(function(qt){g.select(this).select("text").call(t.positionText,st.xFn(qt),st.yFn(qt))}),Qe._adjustTickLabelsOverflow=function(){var qt=Qe.ticklabeloverflow;if(qt&&"allow"!==qt){var Wt=-1!==qt.indexOf("hide"),an="x"===Qe._id.charAt(0),Ue=0,yt=an?Ze._fullLayout.width:Ze._fullLayout.height;if(-1!==qt.indexOf("domain")){var Dt=e.simpleMap(Qe.range,Qe.r2l);Ue=Qe.l2p(Dt[0])+Qe._offset,yt=Qe.l2p(Dt[1])+Qe._offset}var Ht=Math.min(Ue,yt),Jt=Math.max(Ue,yt),gn=Qe.side,Qt=1/0,sn=-1/0;for(var hn in xt.each(function(Tn){var wn=g.select(this);if(wn.select(".text-math-group").empty()){var kn=d.bBox(wn.node()),Fn=0;an?(kn.right>Jt||kn.left<Ht)&&(Fn=1):(kn.bottom>Jt||kn.top+(Qe.tickangle?0:Tn.fontSize/4)<Ht)&&(Fn=1);var On=wn.select("text");Fn?Wt&&On.style("opacity",0):(On.style("opacity",1),Qt="bottom"===gn||"right"===gn?Math.min(Qt,an?kn.top:kn.left):-1/0,sn="top"===gn||"left"===gn?Math.max(sn,an?kn.bottom:kn.right):1/0)}}),rt._plots){var Dn=rt._plots[hn];if(Qe._id===Dn.xaxis._id||Qe._id===Dn.yaxis._id){var _n=an?Dn.yaxis:Dn.xaxis;_n&&(_n["_visibleLabelMin_"+Qe._id]=Qt,_n["_visibleLabelMax_"+Qe._id]=sn)}}}},Qe._hideCounterAxisInsideTickLabels=function(qt){var Wt="x"===Qe._id.charAt(0),an=[];for(var Ue in rt._plots){var yt=rt._plots[Ue];Qe._id!==yt.xaxis._id&&Qe._id!==yt.yaxis._id||an.push(Wt?yt.yaxis:yt.xaxis)}an.forEach(function(Dt,Ht){Dt&&nn(Dt)&&(qt||[B,V,Z,Y]).forEach(function(Jt){var gn="tick"===Jt.K&&"text"===Jt.L&&"period"===Qe.ticklabelmode,Qt=rt._plots[Qe._mainSubplot];(Jt.K===B.K?Qt.zerolinelayer.selectAll("."+Qe._id+"zl"):Jt.K===V.K?Qt.gridlayer.selectAll("."+Qe._id):Qt[Qe._id.charAt(0)+"axislayer"]).each(function(){var sn=g.select(this);Jt.L&&(sn=sn.selectAll(Jt.L)),sn.each(function(hn){var Dn=Qe.l2p(gn?lt(hn):hn.x)+Qe._offset,_n=g.select(this);Dn<Qe["_visibleLabelMax_"+Dt._id]&&Dn>Qe["_visibleLabelMin_"+Dt._id]?_n.style("display","none"):"tick"!==Jt.K||Ht||_n.style("display",null)})})})})},gt(xt,Tt+1?Tt:mt);var Bt=null;Qe._selections&&(Qe._selections[je]=xt);var jt=[function(){return zt.length&&Promise.all(zt)}];Qe.automargin&&rt._redrawFromAutoMarginCount&&90===Tt?(Bt=90,jt.push(function(){gt(xt,Tt)})):jt.push(function(){if(gt(xt,mt),Ne.length&&"x"===ze&&!x(mt)&&("log"!==Qe.type||"D"!==String(Qe.dtick).charAt(0))){Bt=0;var qt,Wt=0,an=[];if(xt.each(function(wn){Wt=Math.max(Wt,wn.fontSize);var kn=Qe.l2p(wn.x),Fn=tt(this),On=d.bBox(Fn.node());an.push({top:0,bottom:10,height:10,left:kn-On.width/2,right:kn+On.width/2+2,width:On.width+2})}),"boundaries"!==Qe.tickson&&!Qe.showdividers||Ge.secondary){var Ue=Ne.length,yt=Math.abs((Ne[Ue-1].x-Ne[0].x)*Qe._m)/(Ue-1),Dt=Qe.ticklabelposition||"",Ht=function(wn){return-1!==Dt.indexOf(wn)},Jt=Ht("top"),gn=Ht("left"),Qt=Ht("right"),sn=Ht("bottom")||gn||Jt||Qt?(Qe.tickwidth||0)+6:0,hn=yt<2.5*Wt||"multicategory"===Qe.type||"realaxis"===Qe._name;for(qt=0;qt<an.length-1;qt++)if(e.bBoxIntersect(an[qt],an[qt+1],sn)){Bt=hn?90:30;break}}else{var Dn=2;for(Qe.ticks&&(Dn+=Qe.tickwidth/2),qt=0;qt<an.length;qt++){var _n=Ne[qt].xbnd,Tn=an[qt];if(null!==_n[0]&&Tn.left-Qe.l2p(_n[0])<Dn||null!==_n[1]&&Qe.l2p(_n[1])-Tn.right<Dn){Bt=90;break}}}Bt&&gt(xt,Bt)}}),Qe._tickAngles&&jt.push(function(){Qe._tickAngles[je]=null===Bt?x(mt)?mt:0:Bt});var it=Qe._anchorAxis;it&&it.autorange&&nn(Qe)&&!q(rt,Qe._id)&&(rt._insideTickLabelsAutorange||(rt._insideTickLabelsAutorange={}),rt._insideTickLabelsAutorange[it._name+".autorange"]=it.autorange,jt.push(function(){xt.each(function(qt,Wt){var an=tt(this);an.select(".text-math-group").empty()&&(Qe._vals[Wt].bb=d.bBox(an.node()))})}));var Mt=e.syncOrAsync(jt);return Mt&&Mt.then&&Ze._promises.push(Mt),Mt},j.getPxPosition=function(Ze,Qe){var Ge,rt=Ze._fullLayout._size,Le=Qe._id.charAt(0),ze=Qe.side;return"free"!==Qe.anchor?Ge=Qe._anchorAxis:"x"===Le?Ge={_offset:rt.t+(1-(Qe.position||0))*rt.h,_length:0}:"y"===Le&&(Ge={_offset:rt.l+(Qe.position||0)*rt.w,_length:0}),"top"===ze||"left"===ze?Ge._offset:"bottom"===ze||"right"===ze?Ge._offset+Ge._length:void 0},j.shouldShowZeroLine=function(Ze,Qe,Ge){var rt=e.simpleMap(Qe.range,Qe.r2l);return rt[0]*rt[1]<=0&&Qe.zeroline&&("linear"===Qe.type||"-"===Qe.type)&&!(Qe.rangebreaks&&Qe.maskBreaks(0)===L)&&(et(Qe,0)||!function(Le,ze,je,Ne){var st=je._mainAxis;if(st){var mt=Le._fullLayout,Tt=ze._id.charAt(0),xt=j.counterLetter(ze._id),zt=ze._offset+(Math.abs(Ne[0])<Math.abs(Ne[1])==("x"===Tt)?0:ze._length),Bt=mt._plots[je._mainSubplot];if(!(Bt.mainplotinfo||Bt).overlays.length)return gt(je);for(var jt=j.list(Le,xt),it=0;it<jt.length;it++){var Mt=jt[it];if(Mt._mainAxis===st&&gt(Mt))return!0}}function gt(qt){if(!qt.showline||!qt.linewidth)return!1;var Wt=Math.max((qt.linewidth+ze.zerolinewidth)/2,1);function an(Dt){return"number"==typeof Dt&&Math.abs(Dt-zt)<Wt}if(an(qt._mainLinePosition)||an(qt._mainMirrorPosition))return!0;var Ue=qt._linepositions||{};for(var yt in Ue)if(an(Ue[yt][0])||an(Ue[yt][1]))return!0}}(Ze,Qe,Ge,rt)||function(Le,ze){for(var je=Le._fullData,Ne=ze._mainSubplot,st=ze._id.charAt(0),mt=0;mt<je.length;mt++){var Tt=je[mt];if(!0===Tt.visible&&Tt.xaxis+Tt.yaxis===Ne&&(b.traceIs(Tt,"bar-like")&&Tt.orientation==={x:"h",y:"v"}[st]||Tt.fill&&Tt.fill.charAt(Tt.fill.length-1)===st))return!0}return!1}(Ze,Qe))},j.clipEnds=function(Ze,Qe){return Qe.filter(function(Ge){return et(Ze,Ge.x)})},j.allowAutoMargin=function(Ze){for(var Qe=j.list(Ze,"",!0),Ge=0;Ge<Qe.length;Ge++){var rt=Qe[Ge];rt.automargin&&(T.allowAutoMargin(Ze,ft(rt)),rt.mirror&&T.allowAutoMargin(Ze,bt(rt))),b.getComponentMethod("rangeslider","isVisible")(rt)&&T.allowAutoMargin(Ze,Ct(rt))}},j.swap=function(Ze,Qe){for(var Ge=function(Le,ze){var je,Ne,st=[];for(je=0;je<ze.length;je++){var mt=[],Tt=Le._fullData[ze[je]].xaxis,xt=Le._fullData[ze[je]].yaxis;if(Tt&&xt){for(Ne=0;Ne<st.length;Ne++)-1===st[Ne].x.indexOf(Tt)&&-1===st[Ne].y.indexOf(xt)||mt.push(Ne);if(mt.length){var zt,gt=st[mt[0]];if(mt.length>1)for(Ne=1;Ne<mt.length;Ne++)Vt(gt.x,(zt=st[mt[Ne]]).x),Vt(gt.y,zt.y);Vt(gt.x,[Tt]),Vt(gt.y,[xt])}else st.push({x:[Tt],y:[xt]})}}return st}(Ze,Qe),rt=0;rt<Ge.length;rt++)Ft(Ze,Ge[rt].x,Ge[rt].y)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical").BADNUM,b=x.isArrayOrTypedArray,e=x.isDateTime,r=x.cleanNumber,t=Math.round;function a(d,s){return s?g(d):"number"==typeof d}function n(d){return Math.max(1,(d-1)/1e3)}ae.exports=function(d,s,i){var w,u=d,f=i.noMultiCategory;if(b(u)&&!u.length)return"-";if(!f&&b((w=u)[0])&&b(w[1]))return"multicategory";if(f&&Array.isArray(u[0])){for(var p=[],y=0;y<u.length;y++)if(b(u[y]))for(var m=0;m<u[y].length;m++)p.push(u[y][m]);u=p}if(function(w,v){for(var A=w.length,M=n(A),k=0,E=0,P={},S=0;S<A;S+=M){var R=w[t(S)],D=String(R);P[D]||(P[D]=1,e(R,v)&&k++,g(R)&&E++)}return k>2*E}(u,s))return"date";var l="strict"!==i.autotypenumbers;return function(w,v){for(var A=w.length,M=n(A),k=0,E=0,P={},S=0;S<A;S+=M){var R=w[t(S)],D=String(R);if(!P[D]){P[D]=1;var L=typeof R;"boolean"===L?E++:(v?r(R)!==T:"number"===L)?k++:"string"===L&&E++}}return E>2*k}(u,l)?"category":function(w,v){for(var A=w.length,M=0;M<A;M++)if(a(w[M],v))return!0;return!1}(u,l)?"linear":"-"}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../registry"),T=_("../../lib"),b=_("../array_container_defaults"),e=_("./layout_attributes"),r=_("./tick_value_defaults"),t=_("./tick_mark_defaults"),a=_("./tick_label_defaults"),n=_("./prefix_suffix_defaults"),d=_("./category_order_defaults"),s=_("./line_grid_defaults"),i=_("./set_convert"),u=_("./constants").WEEKDAY_PATTERN,f=_("./constants").HOUR_PATTERN;function p(l,w,v){function A(D,L){return T.coerce(l,w,e.rangebreaks,D,L)}if(A("enabled")){var M=A("bounds");if(M&&M.length>=2){var k,E,P="";if(2===M.length)for(k=0;k<2;k++)if(E=m(M[k])){P=u;break}var S=A("pattern",P);if(S===u)for(k=0;k<2;k++)(E=m(M[k]))&&(w.bounds[k]=M[k]=E-1);if(S)for(k=0;k<2;k++)switch(E=M[k],S){case u:if(!g(E)||(E=+E)!==Math.floor(E)||E<0||E>=7)return void(w.enabled=!1);w.bounds[k]=M[k]=E;break;case f:if(!g(E)||(E=+E)<0||E>24)return void(w.enabled=!1);w.bounds[k]=M[k]=E}if(!1===v.autorange){var F=v.range;if(F[0]<F[1]){if(M[0]<F[0]&&M[1]>F[1])return void(w.enabled=!1)}else if(M[0]>F[0]&&M[1]<F[1])return void(w.enabled=!1)}}else{var R=A("values");if(!R||!R.length)return void(w.enabled=!1);A("dvalue")}}}ae.exports=function(l,w,v,A,M){var k,E=A.letter,P=A.font||{},S=A.splomStash||{},F=v("visible",!A.visibleDflt),D=w.type||(w._template||{}).type||"-";"date"===D&&(x.getComponentMethod("calendars","handleDefaults")(l,w,"calendar",A.calendar),A.noTicklabelmode||(k=v("ticklabelmode")));var L="";A.noTicklabelposition&&"multicategory"!==D||(L=T.coerce(l,w,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===k?["outside","inside"]:"x"===E?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),A.noTicklabeloverflow||v("ticklabeloverflow",-1!==L.indexOf("inside")?"hide past domain":"category"===D||"multicategory"===D?"allow":"hide past div"),i(w,M);var B=!w.isValidRange(l.range);B&&A.reverseDflt&&(B="reversed"),!v("autorange",B)||"linear"!==D&&"-"!==D||v("rangemode"),v("range"),w.cleanRange(),d(l,w,v,A),"category"===D||A.noHover||v("hoverformat");var V=v("color"),Z=V!==e.color.dflt?V:P.color,Y=S.label||M._dfltTitle[E];if(n(l,w,v,D,A),!F)return w;v("title.text",Y),T.coerceFont(v,"title.font",{family:P.family,size:T.bigFont(P.size),color:Z}),r(l,w,v,D),a(l,w,v,D,A),t(l,w,v,A),s(l,w,v,{dfltColor:V,bgColor:A.bgColor,showGrid:A.showGrid,attributes:e}),(w.showline||w.ticks)&&v("mirror"),A.automargin&&v("automargin");var ee,Q="multicategory"===D;if(A.noTickson||"category"!==D&&!Q||!w.ticks&&!w.showgrid||(Q&&(ee="boundaries"),"boundaries"===v("tickson",ee)&&delete w.ticklabelposition),Q&&v("showdividers")&&(v("dividercolor"),v("dividerwidth")),"date"===D)if(b(l,w,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:p}),w.rangebreaks.length){for(var $=0;$<w.rangebreaks.length;$++)if(w.rangebreaks[$].pattern===u){w._hasDayOfWeekBreaks=!0;break}if(i(w,M),M._has("scattergl")||M._has("splom"))for(var K=0;K<A.data.length;K++){var oe=A.data[K];"scattergl"!==oe.type&&"splom"!==oe.type||(oe.visible=!1,T.warn(oe.type+" traces do not work on axes with rangebreaks. Setting trace "+oe.index+" to `visible: false`."))}}else delete w.rangebreaks;return w};var y={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function m(l){if("string"==typeof l)return y[l.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(_,ae,ie){"use strict";var g=_("../../constants/docs"),x=g.FORMAT_LINK,T=g.DATE_FORMAT_LINK;function b(r,t){return["Sets the "+r+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+x+"."].join(" ")}function e(r,t){return b(r,t)+[" And for dates see: "+T+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ae.exports={axisHoverFormat:function(r,t){return{valType:"string",dflt:"",editType:"none",description:(t?b:e)("hover text",r)+["By default the values are formatted using "+(t?"generic number format":"`"+r+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:b,descriptionWithDates:e}},{"../../constants/docs":474}],558:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("./constants");function T(b,e){if(e&&e.length)for(var r=0;r<e.length;r++)if(e[r][b])return!0;return!1}ie.id2name=function(b){if("string"==typeof b&&b.match(x.AX_ID_PATTERN)){var e=b.split(" ")[0].substr(1);return"1"===e&&(e=""),b.charAt(0)+"axis"+e}},ie.name2id=function(b){if(b.match(x.AX_NAME_PATTERN)){var e=b.substr(5);return"1"===e&&(e=""),b.charAt(0)+e}},ie.cleanId=function(b,e,r){var t=/( domain)$/.test(b);if("string"==typeof b&&b.match(x.AX_ID_PATTERN)&&(!e||b.charAt(0)===e)&&(!t||r)){var a=b.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===a&&(a=""),b.charAt(0)+a+(t&&r?" domain":"")}},ie.list=function(b,e,r){var t=b._fullLayout;if(!t)return[];var a,n=ie.listIds(b,e),d=new Array(n.length);for(a=0;a<n.length;a++){var s=n[a];d[a]=t[s.charAt(0)+"axis"+s.substr(1)]}if(!r){var i=t._subplots.gl3d||[];for(a=0;a<i.length;a++){var u=t[i[a]];e?d.push(u[e+"axis"]):d.push(u.xaxis,u.yaxis,u.zaxis)}}return d},ie.listIds=function(b,e){var r=b._fullLayout;if(!r)return[];var t=r._subplots;return e?t[e+"axis"]:t.xaxis.concat(t.yaxis)},ie.getFromId=function(b,e,r){var t=b._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===r?e=e.replace(/y[0-9]*/,""):"y"===r&&(e=e.replace(/x[0-9]*/,"")),t[ie.id2name(e)]},ie.getFromTrace=function(b,e,r){var t=b._fullLayout,a=null;if(g.traceIs(e,"gl3d")){var n=e.scene;"scene"===n.substr(0,5)&&(a=t[n][r+"axis"])}else a=ie.getFromId(b,e[r+"axis"]||r);return a},ie.idSort=function(b,e){var r=b.charAt(0),t=e.charAt(0);return r!==t?r>t?1:-1:+(b.substr(1)||1)-+(e.substr(1)||1)},ie.ref2id=function(b){return!!/^[xyz]/.test(b)&&b.split(" ")[0]},ie.isLinked=function(b,e){return T(e,b._axisMatchGroups)||T(e,b._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b){if("category"===x.type){var e,r=g.categoryarray,t=Array.isArray(r)&&r.length>0;t&&(e="array");var a,n=T("categoryorder",e);"array"===n&&(a=T("categoryarray")),t||"array"!==n||(n=x.categoryorder="trace"),"trace"===n?x._initialCategories=[]:"array"===n?x._initialCategories=a.slice():(a=function(d,s){var i,u,f,p=s.dataAttr||d._id.charAt(0),y={};if(s.axData)i=s.axData;else for(i=[],u=0;u<s.data.length;u++){var m=s.data[u];m[p+"axis"]===d._id&&i.push(m)}for(u=0;u<i.length;u++){var l=i[u][p];for(f=0;f<l.length;f++){var w=l[f];null!=w&&(y[w]=1)}}return Object.keys(y)}(x,b).sort(),"category ascending"===n?x._initialCategories=a:"category descending"===n&&(x._initialCategories=a.reverse()))}}},{}],560:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical"),b=T.ONEDAY,e=T.ONEWEEK;ie.dtick=function(r,t){var a="log"===t,n="date"===t,d="category"===t,s=n?b:1;if(!r)return s;if(g(r))return(r=Number(r))<=0?s:d?Math.max(1,Math.round(r)):n?Math.max(.1,r):r;if("string"!=typeof r||!n&&!a)return s;var i=r.charAt(0),u=r.substr(1);return(u=g(u)?Number(u):0)<=0||!(n&&"M"===i&&u===Math.round(u)||a&&"L"===i||a&&"D"===i&&(1===u||2===u))?s:r},ie.tick0=function(r,t,a,n){return"date"===t?x.cleanDate(r,x.dateTick0(a,n%e==0?1:0)):"D1"!==n&&"D2"!==n?g(r)?Number(r):0:void 0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(_,ae,ie){"use strict";var g=_("../../lib/regex").counter;ae.exports={idRegex:{x:g("x","( domain)?"),y:g("y","( domain)?")},attrRegex:g("[xy]axis"),xAxisMatch:g("xaxis"),yAxisMatch:g("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./autorange"),T=_("./axis_ids").id2name,b=_("./layout_attributes"),e=_("./scale_zoom"),r=_("./set_convert"),t=_("../../constants/numerical").ALMOST_EQUAL,a=_("../../constants/alignment").FROM_BL;function n(y,m,l){var w=l.axIds,v=l.layoutOut,A=l.hasImage,M=v._axisConstraintGroups,k=v._axisMatchGroups,E=m._id,P=E.charAt(0),S=((v._splomAxes||{})[P]||{})[E]||{},F=m._id,R="x"===F.charAt(0);function D(re,q){return g.coerce(y,m,b,re,q)}m._matchGroup=null,m._constraintGroup=null,D("constrain",A?"domain":"range"),g.coerce(y,m,{constraintoward:{valType:"enumerated",values:R?["left","center","right"]:["bottom","middle","top"],dflt:R?"center":"middle"}},"constraintoward");var L,B,V=m.type,Z=[];for(L=0;L<w.length;L++)(B=w[L])!==F&&v[T(B)].type===V&&Z.push(B);var Y=s(M,F);if(Y){var ee=[];for(L=0;L<Z.length;L++)Y[B=Z[L]]||ee.push(B);Z=ee}var Q,$,K=Z.length;K&&(y.matches||S.matches)&&(Q=g.coerce(y,m,{matches:{valType:"enumerated",values:Z,dflt:-1!==Z.indexOf(S.matches)?S.matches:void 0}},"matches"));var oe=A&&!R?m.anchor:void 0;if(K&&!Q&&(y.scaleanchor||oe)&&($=g.coerce(y,m,{scaleanchor:{valType:"enumerated",values:Z}},"scaleanchor",oe)),Q){m._matchGroup=i(k,F,Q,1);var j=v[T(Q)],H=d(v,m)/d(v,j);R!==("x"===Q.charAt(0))&&(H=(R?"x":"y")+H),i(M,F,Q,H)}else y.matches&&-1!==w.indexOf(y.matches)&&g.warn("ignored "+m._name+'.matches: "'+y.matches+'" to avoid an infinite loop');if($){var G=D("scaleratio");G||(G=m.scaleratio=1),i(M,F,$,G)}else y.scaleanchor&&-1!==w.indexOf(y.scaleanchor)&&g.warn("ignored "+m._name+'.scaleanchor: "'+y.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function d(y,m){var l=m.domain;return l||(l=y[T(m.overlaying)].domain),l[1]-l[0]}function s(y,m){for(var l=0;l<y.length;l++)if(y[l][m])return y[l];return null}function i(y,m,l,w){var v,A,M,k,E,P=s(y,m);null===P?((P={})[m]=1,E=y.length,y.push(P)):E=y.indexOf(P);var S=Object.keys(P);for(v=0;v<y.length;v++)if(M=y[v],v!==E&&M[l]){var F=M[l];for(A=0;A<S.length;A++)M[k=S[A]]=u(F,u(w,P[k]));return void y.splice(E,1)}if(1!==w)for(A=0;A<S.length;A++){var R=S[A];P[R]=u(w,P[R])}P[l]=1}function u(y,m){var l,w,v="",A="";"string"==typeof y&&(l=(v=y.match(/^[xy]*/)[0]).length,y=+y.substr(l)),"string"==typeof m&&(w=(A=m.match(/^[xy]*/)[0]).length,m=+m.substr(w));var M=y*m;return l||w?l&&w&&v.charAt(0)!==A.charAt(0)?l===w?M:(l>w?v.substr(w):A.substr(l))+M:v+A+y*m:M}function f(y,m){for(var l=m._size,w=l.h/l.w,v={},A=Object.keys(y),M=0;M<A.length;M++){var k=A[M],E=y[k];if("string"==typeof E){var P=E.match(/^[xy]*/)[0],S=P.length;E=+E.substr(S);for(var F="y"===P.charAt(0)?w:1/w,R=0;R<S;R++)E*=F}v[k]=E}return v}function p(y,m){var l=y._inputDomain,v=l[0]+(l[1]-l[0])*a[y.constraintoward];y.domain=y._input.domain=[v+(l[0]-v)/m,v+(l[1]-v)/m],y.setScale()}ie.handleDefaults=function(y,m,l){var w,v,A,M,k,E,P,S,F=l.axIds,R=l.axHasImage,D=m._axisConstraintGroups=[],L=m._axisMatchGroups=[];for(w=0;w<F.length;w++)n(k=y[M=T(F[w])],E=m[M],{axIds:F,layoutOut:m,hasImage:R[M]});function B(j,H){for(w=0;w<j.length;w++)for(A in v=j[w])m[T(A)][H]=v}for(B(L,"_matchGroup"),w=0;w<D.length;w++)for(A in v=D[w])if((E=m[T(A)]).fixedrange){for(var V in v){var Z=T(V);!1===(y[Z]||{}).fixedrange&&g.warn("fixedrange was specified as false for axis "+Z+" but was overridden because another axis in its constraint group has fixedrange true"),m[Z].fixedrange=!0}break}for(w=0;w<D.length;){for(A in v=D[w]){(E=m[T(A)])._matchGroup&&Object.keys(E._matchGroup).length===Object.keys(v).length&&(D.splice(w,1),w--);break}w++}B(D,"_constraintGroup");var Y=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],ee=!1,Q=!1;function $(){S=E[P],"rangebreaks"===P&&(Q=E._hasDayOfWeekBreaks)}for(w=0;w<L.length;w++){v=L[w];for(var K=0;K<Y.length;K++){var oe;for(A in P=Y[K],S=null,v)if(k=y[M=T(A)],P in(E=m[M])){if(!E.matches&&(oe=E,P in k)){$();break}null===S&&P in k&&$()}if("range"===P&&S&&(ee=!0),"autorange"===P&&null===S&&ee&&(S=!1),null===S&&P in oe&&(S=oe[P]),null!==S)for(A in v)(E=m[T(A)])[P]="range"===P?S.slice():S,"rangebreaks"===P&&(E._hasDayOfWeekBreaks=Q,r(E,m))}}},ie.enforce=function(y){var m,l,w,v,A,M,k,E,P=y._fullLayout,S=P._axisConstraintGroups||[];for(m=0;m<S.length;m++){w=f(S[m],P);var F=Object.keys(w),R=1/0,D=0,L=1/0,B={},V={},Z=!1;for(l=0;l<F.length;l++)V[v=F[l]]=A=P[T(v)],A._inputDomain?A.domain=A._inputDomain.slice():A._inputDomain=A.domain.slice(),A._inputRange||(A._inputRange=A.range.slice()),A.setScale(),B[v]=M=Math.abs(A._m)/w[v],R=Math.min(R,M),"domain"!==A.constrain&&A._constraintShrinkable||(L=Math.min(L,M)),delete A._constraintShrinkable,D=Math.max(D,M),"domain"===A.constrain&&(Z=!0);if(!(R>t*D)||Z)for(l=0;l<F.length;l++)if(M=B[v=F[l]],k=(A=V[v]).constrain,M!==L||"domain"===k)if(E=M/L,"range"===k)e(A,E);else{var Y=A._inputDomain,ee=(A.domain[1]-A.domain[0])/(Y[1]-Y[0]),Q=(A.r2l(A.range[1])-A.r2l(A.range[0]))/(A.r2l(A._inputRange[1])-A.r2l(A._inputRange[0]));if((E/=ee)*Q<1){A.domain=A._input.domain=Y.slice(),e(A,E);continue}if(Q<1&&(A.range=A._input.range=A._inputRange.slice(),E*=Q),A.autorange){var $=A.r2l(A.range[0]),K=A.r2l(A.range[1]),oe=($+K)/2,j=oe,H=oe,G=Math.abs(K-oe),re=oe-G*E*1.0001,q=oe+G*E*1.0001,te=x.makePadFn(P,A,0),ne=x.makePadFn(P,A,1);p(A,E);var le,ue,de=Math.abs(A._m),he=x.concatExtremes(y,A),be=he.min,ge=he.max;for(ue=0;ue<be.length;ue++)(le=be[ue].val-te(be[ue])/de)>re&&le<j&&(j=le);for(ue=0;ue<ge.length;ue++)(le=ge[ue].val+ne(ge[ue])/de)<q&&le>H&&(H=le);E/=(H-j)/(2*G),j=A.l2r(j),H=A.l2r(H),A.range=A._input.range=$<K?[j,H]:[H,j]}p(A,E)}}},ie.getAxisGroup=function(y,m){for(var l=y._axisMatchGroups,w=0;w<l.length;w++)if(l[w][m])return"g"+w;return m},ie.clean=function(y,m){if(m._inputDomain){for(var l=!1,w=m._id,v=y._fullLayout._axisConstraintGroups,A=0;A<v.length;A++)if(v[A][w]){l=!0;break}l&&"domain"===m.constrain||(m._input.domain=m.domain=m._inputDomain,delete m._inputDomain)}}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("tinycolor2"),e=_("has-passive-events"),r=_("../../registry"),t=x.strTranslate,a=_("../../lib/svg_text_utils"),n=_("../../components/color"),d=_("../../components/drawing"),s=_("../../components/fx"),i=_("./axes"),u=_("../../lib/setcursor"),f=_("../../components/dragelement"),p=_("../../components/dragelement/helpers"),y=p.selectingOrDrawing,m=p.freeMode,l=_("../../constants/alignment").FROM_TL,w=_("../../lib/clear_gl_canvases"),v=_("../../plot_api/subroutines").redrawReglTraces,A=_("../plots"),M=_("./axis_ids").getFromId,k=_("./select").prepSelect,E=_("./select").clearSelect,P=_("./select").selectOnClick,S=_("./scale_zoom"),F=_("./constants"),R=F.MINDRAG,D=F.MINZOOM,L=!0;function B(le,ue,de,he){var be=x.ensureSingle(le.draglayer,ue,de,function(ge){ge.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",le.id)});return be.call(u,he),be.node()}function V(le,ue,de,he,be,ge,we){var ke=B(le,"rect",ue,de);return g.select(ke).call(d.setRect,he,be,ge,we),ke}function Z(le,ue){for(var de=0;de<le.length;de++)if(!le[de].fixedrange)return ue;return""}function Y(le,ue,de,he,be){for(var ge=0;ge<le.length;ge++){var we=le[ge];if(!we.fixedrange)if(we.rangebreaks){var ke="y"===we._id.charAt(0),Ee=ke?1-de:de;he[we._name+".range[0]"]=we.l2r(we.p2l((ke?1-ue:ue)*we._length)),he[we._name+".range[1]"]=we.l2r(we.p2l(Ee*we._length))}else{var Re=we._rl[0],ve=we._rl[1]-Re;he[we._name+".range[0]"]=we.l2r(Re+ve*ue),he[we._name+".range[1]"]=we.l2r(Re+ve*de)}}if(be&&be.length){var Te=(ue+(1-de))/2;Y(be,Te,1-Te,he,[])}}function ee(le,ue){for(var de=0;de<le.length;de++){var he=le[de];if(!he.fixedrange)if(he.rangebreaks){var be=he._length,ge=(he.p2l(0+ue)-he.p2l(0)+(he.p2l(be+ue)-he.p2l(be)))/2;he.range=[he.l2r(he._rl[0]-ge),he.l2r(he._rl[1]-ge)]}else he.range=[he.l2r(he._rl[0]-ue/he._m),he.l2r(he._rl[1]-ue/he._m)]}}function Q(le){return 1-(le>=0?Math.min(le,.9):1/(1/Math.max(le,-.3)+3.222))}function $(le,ue,de,he,be){return le.append("path").attr("class","zoombox").style({fill:ue>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",t(de,he)).attr("d",be+"Z")}function K(le,ue,de){return le.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",t(ue,de)).attr("d","M0,0Z")}function oe(le,ue,de,he,be,ge){le.attr("d",he+"M"+de.l+","+de.t+"v"+de.h+"h"+de.w+"v-"+de.h+"h-"+de.w+"Z"),j(le,ue,be,ge)}function j(le,ue,de,he){de||(le.transition().style("fill",he>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ue.transition().style("opacity",1).duration(200))}function H(le){g.select(le).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function G(le){L&&le.data&&le._context.showTips&&(x.notifier(x._(le,"Double-click to zoom back out"),"long"),L=!1)}function re(le){var ue=Math.floor(Math.min(le.b-le.t,le.r-le.l,D)/2);return"M"+(le.l-3.5)+","+(le.t-.5+ue)+"h3v"+-ue+"h"+ue+"v-3h-"+(ue+3)+"ZM"+(le.r+3.5)+","+(le.t-.5+ue)+"h-3v"+-ue+"h"+-ue+"v-3h"+(ue+3)+"ZM"+(le.r+3.5)+","+(le.b+.5-ue)+"h-3v"+ue+"h"+-ue+"v3h"+(ue+3)+"ZM"+(le.l-3.5)+","+(le.b+.5-ue)+"h3v"+ue+"h"+ue+"v3h-"+(ue+3)+"Z"}function q(le,ue,de,he,be){for(var ge,we,ke,De,Ee=!1,Re={},ve={},Te=(be||{}).xaHash,Ie=(be||{}).yaHash,Ce=0;Ce<ue.length;Ce++){var Pe=ue[Ce];for(ge in de)if(Pe[ge]){for(ke in Pe)be&&(Te[ke]||Ie[ke])||("x"===ke.charAt(0)?de:he)[ke]||(Re[ke]=ge);for(we in he)be&&(Te[we]||Ie[we])||!Pe[we]||(Ee=!0)}for(we in he)if(Pe[we])for(De in Pe)be&&(Te[De]||Ie[De])||("x"===De.charAt(0)?de:he)[De]||(ve[De]=we)}Ee&&(x.extendFlat(Re,ve),ve={});var Ve={},qe=[];for(ke in Re){var Je=M(le,ke);qe.push(Je),Ve[Je._id]=Je}var lt={},He=[];for(De in ve){var $e=M(le,De);He.push($e),lt[$e._id]=$e}return{xaHash:Ve,yaHash:lt,xaxes:qe,yaxes:He,xLinks:Re,yLinks:ve,isSubplotConstrained:Ee}}function te(le,ue){if(e){var de=void 0!==le.onwheel?"wheel":"mousewheel";le._onwheel&&le.removeEventListener(de,le._onwheel),le._onwheel=ue,le.addEventListener(de,ue,{passive:!1})}else void 0!==le.onwheel?le.onwheel=ue:void 0!==le.onmousewheel?le.onmousewheel=ue:le.isAddedWheelEvent||(le.isAddedWheelEvent=!0,le.addEventListener("wheel",ue,{passive:!1}))}function ne(le){var ue=[];for(var de in le)ue.push(le[de]);return ue}ae.exports={makeDragBox:function(le,ue,de,he,be,ge,we,ke){var De,Ee,Re,ve,Te,Ie,Ce,Pe,Ve,qe,Je,lt,He,$e,et,tt,ft,bt,Ct,Vt,Ft,ht,ut,Rt=le._fullLayout._zoomlayer,nn=we+ke==="nsew",cn=1===(we+ke).length;function Ze(){if(Ve=(De=ue.xaxis)._length,qe=(Ee=ue.yaxis)._length,Ce=De._offset,Pe=Ee._offset,(Re={})[De._id]=De,(ve={})[Ee._id]=Ee,we&&ke)for(var Tn=ue.overlays,wn=0;wn<Tn.length;wn++){var kn=Tn[wn].xaxis;Re[kn._id]=kn;var Fn=Tn[wn].yaxis;ve[Fn._id]=Fn}Te=ne(Re),Ie=ne(ve),He=Z(Te,ke),$e=Z(Ie,we),et=!$e&&!He,lt=q(le,le._fullLayout._axisMatchGroups,Re,ve);var On=(Je=q(le,le._fullLayout._axisConstraintGroups,Re,ve,lt)).isSubplotConstrained||lt.isSubplotConstrained;tt=ke||On,ft=we||On;var Qn=le._fullLayout;bt=Qn._has("scattergl"),Ct=Qn._has("splom"),Vt=Qn._has("svg")}Ze();var Tn,Qe=(Tn=$e+He)?"nsew"===Tn?nn?"":"pan"===le._fullLayout.dragmode?"move":"crosshair":Tn.toLowerCase()+"-resize":"pointer",Ge=V(ue,we+ke+"drag",Qe,de,he,be,ge);if(et&&!nn)return Ge.onmousedown=null,Ge.style.pointerEvents="none",Ge;var rt,Le,ze,je,Ne,st,mt,Tt,xt,zt,gt={element:Ge,gd:le,plotinfo:ue};function Bt(){gt.plotinfo.selection=!1,E(le)}function jt(Tn,wn){var Or,vr,Xn,jn,nr,kn=gt.gd;if(kn._fullLayout._activeShapeIndex>=0)kn._fullLayout._deactivateShape(kn);else{var Fn=kn._fullLayout.clickmode;if(H(kn),2!==Tn||cn||function(){if(!le._transitioningWithDuration){var Tn=le._context.doubleClick,wn=[];He&&(wn=wn.concat(Te)),$e&&(wn=wn.concat(Ie)),lt.xaxes&&(wn=wn.concat(lt.xaxes)),lt.yaxes&&(wn=wn.concat(lt.yaxes));var kn,Fn,On,Qn={};if("reset+autosize"===Tn)for(Tn="autosize",Fn=0;Fn<wn.length;Fn++)if((kn=wn[Fn])._rangeInitial&&(kn.range[0]!==kn._rangeInitial[0]||kn.range[1]!==kn._rangeInitial[1])||!kn._rangeInitial&&!kn.autorange){Tn="reset";break}if("autosize"===Tn)for(Fn=0;Fn<wn.length;Fn++)(kn=wn[Fn]).fixedrange||(Qn[kn._name+".autorange"]=!0);else if("reset"===Tn)for((He||Je.isSubplotConstrained)&&(wn=wn.concat(Je.xaxes)),$e&&!Je.isSubplotConstrained&&(wn=wn.concat(Je.yaxes)),Je.isSubplotConstrained&&(He?$e||(wn=wn.concat(Ie)):wn=wn.concat(Te)),Fn=0;Fn<wn.length;Fn++)(kn=wn[Fn]).fixedrange||(kn._rangeInitial?(Qn[kn._name+".range[0]"]=(On=kn._rangeInitial)[0],Qn[kn._name+".range[1]"]=On[1]):Qn[kn._name+".autorange"]=!0);le.emit("plotly_doubleclick",null),r.call("_guiRelayout",le,Qn)}}(),nn)Fn.indexOf("select")>-1&&P(wn,kn,Te,Ie,ue.id,gt),Fn.indexOf("event")>-1&&s.click(kn,wn,ue.id);else if(1===Tn&&cn){var On=we?Ee:De,Qn="s"===we||"w"===ke?0:1,sr=On._name+".range["+Qn+"]",Mr=(jn=(Or=On).range[vr=Qn],nr=Math.abs(jn-Or.range[1-vr]),"date"===Or.type?jn:"log"===Or.type?(Xn=Math.ceil(Math.max(0,-Math.log(nr)/Math.LN10))+3,T("."+Xn+"g")(Math.pow(10,jn))):(Xn=Math.floor(Math.log(Math.abs(jn))/Math.LN10)-Math.floor(Math.log(nr)/Math.LN10)+4,T("."+String(Xn)+"g")(jn))),Wr="left",mr="middle";if(On.fixedrange)return;we?(mr="n"===we?"top":"bottom","right"===On.side&&(Wr="right")):"e"===ke&&(Wr="right"),kn._context.showAxisRangeEntryBoxes&&g.select(Ge).call(a.makeEditable,{gd:kn,immediate:!0,background:kn._fullLayout.paper_bgcolor,text:String(Mr),fill:On.tickfont?On.tickfont.color:"#444",horizontalAlign:Wr,verticalAlign:mr}).on("edit",function(Or){var vr=On.d2r(Or);void 0!==vr&&r.call("_guiRelayout",kn,sr,vr)})}}}function it(Tn,wn){if(le._transitioningWithDuration)return!1;var mr,Or,kn=Math.max(0,Math.min(Ve,ht*Tn+rt)),Fn=Math.max(0,Math.min(qe,ut*wn+Le)),On=Math.abs(kn-rt),Qn=Math.abs(Fn-Le);function sr(){mt="",ze.r=ze.l,ze.t=ze.b,xt.attr("d","M0,0Z")}if(ze.l=Math.min(rt,kn),ze.r=Math.max(rt,kn),ze.t=Math.min(Le,Fn),ze.b=Math.max(Le,Fn),Je.isSubplotConstrained)On>D||Qn>D?(mt="xy",On/Ve>Qn/qe?(Qn=On*qe/Ve,Le>Fn?ze.t=Le-Qn:ze.b=Le+Qn):(On=Qn*Ve/qe,rt>kn?ze.l=rt-On:ze.r=rt+On),xt.attr("d",re(ze))):sr();else if(lt.isSubplotConstrained)if(On>D||Qn>D){mt="xy";var Mr=Math.min(ze.l/Ve,(qe-ze.b)/qe),Wr=Math.max(ze.r/Ve,(qe-ze.t)/qe);ze.l=Mr*Ve,ze.r=Wr*Ve,ze.b=(1-Mr)*qe,ze.t=(1-Wr)*qe,xt.attr("d",re(ze))}else sr();else!$e||Qn<Math.min(Math.max(.6*On,R),D)?On<R||!He?sr():(ze.t=0,ze.b=qe,mt="x",xt.attr("d","M"+((mr=ze).l-.5)+","+((Or=Le)-D-.5)+"h-3v"+(2*D+1)+"h3ZM"+(mr.r+.5)+","+(Or-D-.5)+"h3v"+(2*D+1)+"h-3Z")):!He||On<Math.min(.6*Qn,D)?(ze.l=0,ze.r=Ve,mt="y",xt.attr("d",function(mr,Or){return"M"+(Or-D-.5)+","+(mr.t-.5)+"v-3h"+(2*D+1)+"v3ZM"+(Or-D-.5)+","+(mr.b+.5)+"v3h"+(2*D+1)+"v-3Z"}(ze,rt))):(mt="xy",xt.attr("d",re(ze)));ze.w=ze.r-ze.l,ze.h=ze.b-ze.t,mt&&(zt=!0),le._dragged=zt,oe(Tt,xt,ze,Ne,st,je),Mt(),le.emit("plotly_relayouting",Ft),st=!0}function Mt(){Ft={},"xy"!==mt&&"x"!==mt||(Y(Te,ze.l/Ve,ze.r/Ve,Ft,Je.xaxes),Ht("x",Ft)),"xy"!==mt&&"y"!==mt||(Y(Ie,(qe-ze.b)/qe,(qe-ze.t)/qe,Ft,Je.yaxes),Ht("y",Ft))}function qt(){Mt(),H(le),Qt(),G(le)}gt.prepFn=function(Tn,wn,kn){var Fn=gt.dragmode,On=le._fullLayout.dragmode;On!==Fn&&(gt.dragmode=On),Ze(),ht=le._fullLayout._invScaleX,ut=le._fullLayout._invScaleY,et||(nn?Tn.shiftKey?"pan"===On?On="zoom":y(On)||(On="pan"):Tn.ctrlKey&&(On="pan"):On="pan"),gt.minDrag=m(On)?1:void 0,y(On)?(gt.xaxes=Te,gt.yaxes=Ie,k(Tn,wn,kn,gt,On)):(gt.clickFn=jt,y(Fn)&&Bt(),et||("zoom"===On?(gt.moveFn=it,gt.doneFn=qt,gt.minDrag=1,function(Qn,sr,Mr){var Wr=Ge.getBoundingClientRect();rt=sr-Wr.left,Le=Mr-Wr.top,le._fullLayout._calcInverseTransform(le);var mr=x.apply3DTransform(le._fullLayout._invTransform)(rt,Le);ze={l:rt=mr[0],r:rt,w:0,t:Le=mr[1],b:Le,h:0},je=le._hmpixcount?le._hmlumcount/le._hmpixcount:b(le._fullLayout.plot_bgcolor).getLuminance(),st=!1,mt="xy",zt=!1,Tt=$(Rt,je,Ce,Pe,Ne="M0,0H"+Ve+"V"+qe+"H0V0"),xt=K(Rt,Ce,Pe)}(0,wn,kn)):"pan"===On&&(gt.moveFn=Dt,gt.doneFn=Qt))),le._fullLayout._redrag=function(){var Qn=le._dragdata;Qn&&Qn.element===Ge&&(y(le._fullLayout.dragmode)||(Ze(),sn([0,0,Ve,qe]),gt.moveFn(Qn.dx,Qn.dy)))}},f.init(gt);var Wt=[0,0,Ve,qe],an=null,Ue=F.REDRAWDELAY,yt=ue.mainplot?le._fullLayout._plots[ue.mainplot]:ue;function Dt(Tn,wn){if(Tn*=ht,wn*=ut,!le._transitioningWithDuration){if(le._fullLayout._replotting=!0,"ew"===He||"ns"===$e){var kn=He?-Tn:0,Fn=$e?-wn:0;if(lt.isSubplotConstrained){if(He&&$e){var On=(Tn/Ve-wn/qe)/2;kn=-(Tn=On*Ve),Fn=-(wn=-On*qe)}$e?kn=-Fn*Ve/qe:Fn=-kn*qe/Ve}return He&&(ee(Te,Tn),Ht("x")),$e&&(ee(Ie,wn),Ht("y")),sn([kn,Fn,Ve,qe]),Jt(),void le.emit("plotly_relayouting",Ft)}var Qn,sr,Mr="w"===He==("n"===$e)?1:-1;if(He&&$e&&(Je.isSubplotConstrained||lt.isSubplotConstrained)){var Wr=(Tn/Ve+Mr*wn/qe)/2;Tn=Wr*Ve,wn=Mr*Wr*qe}if("w"===He?Tn=Xn(Te,0,Tn):"e"===He?Tn=Xn(Te,1,-Tn):He||(Tn=0),"n"===$e?wn=Xn(Ie,1,wn):"s"===$e?wn=Xn(Ie,0,-wn):$e||(wn=0),Qn="w"===He?Tn:0,sr="n"===$e?wn:0,Je.isSubplotConstrained&&!lt.isSubplotConstrained||lt.isSubplotConstrained&&He&&$e&&Mr>0){var mr;if(lt.isSubplotConstrained||!He&&1===$e.length){for(mr=0;mr<Te.length;mr++)Te[mr].range=Te[mr]._r.slice(),S(Te[mr],1-wn/qe);Qn=(Tn=wn*Ve/qe)/2}if(lt.isSubplotConstrained||!$e&&1===He.length){for(mr=0;mr<Ie.length;mr++)Ie[mr].range=Ie[mr]._r.slice(),S(Ie[mr],1-Tn/Ve);sr=(wn=Tn*qe/Ve)/2}}lt.isSubplotConstrained&&$e||Ht("x"),lt.isSubplotConstrained&&He||Ht("y");var Or=Ve-Tn,vr=qe-wn;!lt.isSubplotConstrained||He&&$e||(He?(sr=Qn?0:Tn*qe/Ve,vr=Or*qe/Ve):(Qn=sr?0:wn*Ve/qe,Or=vr*Ve/qe)),sn([Qn,sr,Or,vr]),Jt(),le.emit("plotly_relayouting",Ft)}function Xn(jn,nr,Ur){for(var Jn,_r,Hr=1-nr,Lr=0;Lr<jn.length;Lr++){var $r=jn[Lr];if(!$r.fixedrange){Jn=$r,_r=$r._rl[Hr]+($r._rl[nr]-$r._rl[Hr])/Q(Ur/$r._length);var dn=$r.l2r(_r);!1!==dn&&void 0!==dn&&($r.range[nr]=dn)}}return Jn._length*(Jn._rl[nr]-_r)/(Jn._rl[nr]-Jn._rl[Hr])}}function Ht(Tn,wn){for(var kn=lt.isSubplotConstrained?{x:Ie,y:Te}[Tn]:lt[Tn+"axes"],Fn=lt.isSubplotConstrained?{x:Te,y:Ie}[Tn]:[],On=0;On<kn.length;On++){var Qn=kn[On],sr=Qn._id,Mr=lt.xLinks[sr]||lt.yLinks[sr],Wr=Fn[0]||Re[Mr]||ve[Mr];Wr&&(wn?(wn[Qn._name+".range[0]"]=wn[Wr._name+".range[0]"],wn[Qn._name+".range[1]"]=wn[Wr._name+".range[1]"]):Qn.range=Wr.range.slice())}}function Jt(){var Tn,wn=[];function kn(Qn){for(Tn=0;Tn<Qn.length;Tn++)Qn[Tn].fixedrange||wn.push(Qn[Tn]._id)}for(tt&&(kn(Te),kn(Je.xaxes),kn(lt.xaxes)),ft&&(kn(Ie),kn(Je.yaxes),kn(lt.yaxes)),Ft={},Tn=0;Tn<wn.length;Tn++){var On=M(le,wn[Tn]);i.drawOne(le,On,{skipTitle:!0}),Ft[On._name+".range[0]"]=On.range[0],Ft[On._name+".range[1]"]=On.range[1]}i.redrawComponents(le,wn)}function Qt(){sn([0,0,Ve,qe]),x.syncOrAsync([A.previousPromises,function(){le._fullLayout._replotting=!1,r.call("_guiRelayout",le,Ft)}],le)}function sn(Tn){var wn,kn,Fn,On,Qn=le._fullLayout,sr=Qn._plots,Mr=Qn._subplots.cartesian;if(Ct&&r.subplotsRegistry.splom.drag(le),bt)for(wn=0;wn<Mr.length;wn++)if(Fn=(kn=sr[Mr[wn]]).xaxis,On=kn.yaxis,kn._scene){var Wr=x.simpleMap(Fn.range,Fn.r2l),mr=x.simpleMap(On.range,On.r2l);kn._scene.update({range:[Wr[0],mr[0],Wr[1],mr[1]]})}if((Ct||bt)&&(w(le),v(le)),Vt){var Or=Tn[2]/De._length,vr=Tn[3]/Ee._length;for(wn=0;wn<Mr.length;wn++){Fn=(kn=sr[Mr[wn]]).xaxis,On=kn.yaxis;var Xn,jn,nr,Ur,_r=(ft||lt.isSubplotConstrained)&&!On.fixedrange&&ve[On._id];if((tt||lt.isSubplotConstrained)&&!Fn.fixedrange&&Re[Fn._id]?(Xn=Or,nr=ke||lt.isSubplotConstrained?Tn[0]:_n(Fn,Xn)):lt.xaHash[Fn._id]?(Xn=Or,nr=Tn[0]*Fn._length/De._length):lt.yaHash[Fn._id]?(Xn=vr,nr="ns"===$e?-Tn[1]*Fn._length/Ee._length:_n(Fn,Xn,{n:"top",s:"bottom"}[$e])):nr=Dn(Fn,Xn=hn(Fn,Or,vr)),_r?(jn=vr,Ur=we||lt.isSubplotConstrained?Tn[1]:_n(On,jn)):lt.yaHash[On._id]?(jn=vr,Ur=Tn[1]*On._length/Ee._length):lt.xaHash[On._id]?(jn=Or,Ur="ew"===He?-Tn[0]*On._length/De._length:_n(On,jn,{e:"right",w:"left"}[He])):Ur=Dn(On,jn=hn(On,Or,vr)),Xn||jn){Xn||(Xn=1),jn||(jn=1);var Hr=Fn._offset-nr/Xn,Lr=On._offset-Ur/jn;kn.clipRect.call(d.setTranslate,nr,Ur).call(d.setScale,Xn,jn),kn.plot.call(d.setTranslate,Hr,Lr).call(d.setScale,1/Xn,1/jn),Xn===kn.xScaleFactor&&jn===kn.yScaleFactor||(d.setPointGroupScale(kn.zoomScalePts,Xn,jn),d.setTextPointsScale(kn.zoomScaleTxt,Xn,jn)),d.hideOutsideRangePoints(kn.clipOnAxisFalseTraces,kn),kn.xScaleFactor=Xn,kn.yScaleFactor=jn}}}}function hn(Tn,wn,kn){return Tn.fixedrange?0:tt&&Je.xaHash[Tn._id]?wn:ft&&(Je.isSubplotConstrained?Je.xaHash:Je.yaHash)[Tn._id]?kn:0}function Dn(Tn,wn){return wn?(Tn.range=Tn._r.slice(),S(Tn,wn),_n(Tn,wn)):0}function _n(Tn,wn,kn){return Tn._length*(1-wn)*l[kn||Tn.constraintoward||"middle"]}return we.length*ke.length!=1&&te(Ge,function(Tn){if(le._context._scrollZoom.cartesian||le._fullLayout._enablescrollzoom){if(Bt(),le._transitioningWithDuration)return Tn.preventDefault(),void Tn.stopPropagation();Ze(),clearTimeout(an);var wn=-Tn.deltaY;if(isFinite(wn)||(wn=Tn.wheelDelta/10),isFinite(wn)){var kn,Fn=Math.exp(-Math.min(Math.max(wn,-20),20)/200),On=yt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Qn=(Tn.clientX-On.left)/On.width,sr=(On.bottom-Tn.clientY)/On.height;if(tt){for(ke||(Qn=.5),kn=0;kn<Te.length;kn++)Mr(Te[kn],Qn,Fn);Ht("x"),Wt[2]*=Fn,Wt[0]+=Wt[2]*Qn*(1/Fn-1)}if(ft){for(we||(sr=.5),kn=0;kn<Ie.length;kn++)Mr(Ie[kn],sr,Fn);Ht("y"),Wt[3]*=Fn,Wt[1]+=Wt[3]*(1-sr)*(1/Fn-1)}sn(Wt),Jt(),le.emit("plotly_relayouting",Ft),an=setTimeout(function(){le._fullLayout&&(Wt=[0,0,Ve,qe],Qt())},Ue),Tn.preventDefault()}else x.log("Did not find wheel motion attributes: ",Tn)}function Mr(Wr,mr,Or){if(!Wr.fixedrange){var vr=x.simpleMap(Wr.range,Wr.r2l),Xn=vr[0]+(vr[1]-vr[0])*mr;Wr.range=vr.map(function(jn){return Wr.l2r(Xn+(jn-Xn)*Or)})}}}),Ge},makeDragger:B,makeRectDragger:V,makeZoombox:$,makeCorners:K,updateZoombox:oe,xyCorners:re,transitionZoombox:j,removeZoombox:H,showDoubleClickNotifier:G,attachWheelEventHandler:te}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/fx"),T=_("../../components/dragelement"),b=_("../../lib/setcursor"),e=_("./dragbox").makeDragBox,r=_("./constants").DRAGGERSIZE;ie.initInteractions=function(t){var a=t._fullLayout;if(t._context.staticPlot)g.select(t).selectAll(".drag").remove();else if(a._has("cartesian")||a._has("splom")){Object.keys(a._plots||{}).sort(function(d,s){if((a._plots[d].mainplot&&!0)===(a._plots[s].mainplot&&!0)){var i=d.split("y"),u=s.split("y");return i[0]===u[0]?Number(i[1]||1)-Number(u[1]||1):Number(i[0]||1)-Number(u[0]||1)}return a._plots[d].mainplot?1:-1}).forEach(function(d){var s=a._plots[d],i=s.xaxis,u=s.yaxis;if(!s.mainplot){var f=e(t,s,i._offset,u._offset,i._length,u._length,"ns","ew");f.onmousemove=function(m){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===d&&t._fullLayout._plots[d]&&x.hover(t,m,d)},x.hover(t,m,d),t._fullLayout._lasthover=f,t._fullLayout._hoversubplot=d},f.onmouseout=function(m){t._dragging||(t._fullLayout._hoversubplot=null,T.unhover(t,m))},t._context.showAxisDragHandles&&(e(t,s,i._offset-r,u._offset-r,r,r,"n","w"),e(t,s,i._offset+i._length,u._offset-r,r,r,"n","e"),e(t,s,i._offset-r,u._offset+u._length,r,r,"s","w"),e(t,s,i._offset+i._length,u._offset+u._length,r,r,"s","e"))}if(t._context.showAxisDragHandles){if(d===i._mainSubplot){var p=i._mainLinePosition;"top"===i.side&&(p-=r),e(t,s,i._offset+.1*i._length,p,.8*i._length,r,"","ew"),e(t,s,i._offset,p,.1*i._length,r,"","w"),e(t,s,i._offset+.9*i._length,p,.1*i._length,r,"","e")}if(d===u._mainSubplot){var y=u._mainLinePosition;"right"!==u.side&&(y-=r),e(t,s,y,u._offset+.1*u._length,r,.8*u._length,"ns",""),e(t,s,y,u._offset+.9*u._length,r,.1*u._length,"s",""),e(t,s,y,u._offset,r,.1*u._length,"n","")}}});var n=a._hoverlayer.node();n.onmousemove=function(d){d.target=t._fullLayout._lasthover,x.hover(t,d,a._hoversubplot)},n.onclick=function(d){d.target=t._fullLayout._lasthover,x.click(t,d)},n.onmousedown=function(d){t._fullLayout._lasthover.onmousedown(d)},ie.updateFx(t)}},ie.updateFx=function(t){var a=t._fullLayout;b(a._draggers,"pan"===a.dragmode?"move":"crosshair")}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(_,ae,ie){"use strict";ae.exports={clearOutlineControllers:function(g){var x=g._fullLayout._zoomlayer;x&&x.selectAll(".outline-controllers").remove()},clearSelect:function(g){var x=g._fullLayout._zoomlayer;x&&x.selectAll(".select-outline").remove(),g._fullLayout._drawing=!1}}},{}],566:[function(_,ae,ie){"use strict";var g=_("../../lib").strTranslate;function x(T,b){switch(T.type){case"log":return T.p2d(b);case"date":return T.p2r(b,0,T.calendar);default:return T.p2r(b)}}ae.exports={p2r:x,r2p:function(T,b){switch(T.type){case"log":return T.d2p(b);case"date":return T.r2p(b,0,T.calendar);default:return T.r2p(b)}},axValue:function(T){var b="y"===T._id.charAt(0)?1:0;return function(e){return x(T,e[b])}},getTransform:function(T){return g(T.xaxis._offset,T.yaxis._offset)}}},{"../../lib":503}],567:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib"),T=_("./axis_ids");ae.exports=function(b){return function(e,r){var t=e[b];if(Array.isArray(t))for(var a=g.subplotsRegistry.cartesian,n=a.idRegex,d=r._subplots,s=d.xaxis,i=d.yaxis,u=d.cartesian,f=r._has("cartesian")||r._has("gl2d"),p=0;p<t.length;p++){var y=t[p];if(x.isPlainObject(y)){var m=T.cleanId(y.xref,"x",!1),l=T.cleanId(y.yref,"y",!1),w=n.x.test(m),v=n.y.test(l);if(w||v){f||x.pushUnique(r._basePlotModules,a);var A=!1;w&&-1===s.indexOf(m)&&(s.push(m),A=!0),v&&-1===i.indexOf(l)&&(i.push(l),A=!0),A&&w&&v&&u.push(m+l)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=_("../plots"),e=_("../../components/drawing"),r=_("../get_data").getModuleCalcData,t=_("./axis_ids"),a=_("./constants"),n=_("../../constants/xmlns_namespaces"),d=T.ensureSingle;function s(y,m,l){return T.ensureSingle(y,m,l,function(w){w.datum(l)})}function i(y,m,l,w,v){for(var A,M,k,E=a.traceLayerClasses,P=y._fullLayout,S=P._modules,F=[],R=[],D=0;D<S.length;D++){var L=(A=S[D]).name,B=x.modules[L].categories;if(B.svg){var V=A.layerName||L+"layer",Z=A.plot;k=(M=r(l,Z))[0],l=M[1],k.length&&F.push({i:E.indexOf(V),className:V,plotMethod:Z,cdModule:k}),B.zoomScale&&R.push("."+V)}}F.sort(function(Q,$){return Q.i-$.i});var Y=m.plot.selectAll("g.mlayer").data(F,function(Q){return Q.className});if(Y.enter().append("g").attr("class",function(Q){return Q.className}).classed("mlayer",!0).classed("rangeplot",m.isRangePlot),Y.exit().remove(),Y.order(),Y.each(function(Q){var $=g.select(this),K=Q.className;Q.plotMethod(y,m,Q.cdModule,$,w,v),-1===a.clipOnAxisFalseQuery.indexOf("."+K)&&e.setClipUrl($,m.layerClipId,y)}),P._has("scattergl")&&(A=x.getModule("scattergl"),k=r(l,A)[0],A.plot(y,m,k)),!y._context.staticPlot&&(m._hasClipOnAxisFalse&&(m.clipOnAxisFalseTraces=m.plot.selectAll(a.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),R.length)){var ee=m.plot.selectAll(R.join(",")).selectAll(".trace");m.zoomScalePts=ee.selectAll("path.point"),m.zoomScaleTxt=ee.selectAll(".textpoint")}}function u(y,m){var l=m.plotgroup,w=m.id,v=a.layerValue2layerClass[m.xaxis.layer],A=a.layerValue2layerClass[m.yaxis.layer],M=y._fullLayout._hasOnlyLargeSploms;if(m.mainplot){var k=m.mainplotinfo,E=k.plotgroup,P=w+"-x",S=w+"-y";m.gridlayer=k.gridlayer,m.zerolinelayer=k.zerolinelayer,d(k.overlinesBelow,"path",P),d(k.overlinesBelow,"path",S),d(k.overaxesBelow,"g",P),d(k.overaxesBelow,"g",S),m.plot=d(k.overplot,"g",w),d(k.overlinesAbove,"path",P),d(k.overlinesAbove,"path",S),d(k.overaxesAbove,"g",P),d(k.overaxesAbove,"g",S),m.xlines=E.select(".overlines-"+v).select("."+P),m.ylines=E.select(".overlines-"+A).select("."+S),m.xaxislayer=E.select(".overaxes-"+v).select("."+P),m.yaxislayer=E.select(".overaxes-"+A).select("."+S)}else if(M)m.xlines=d(l,"path","xlines-above"),m.ylines=d(l,"path","ylines-above"),m.xaxislayer=d(l,"g","xaxislayer-above"),m.yaxislayer=d(l,"g","yaxislayer-above");else{var F=d(l,"g","layer-subplot");m.shapelayer=d(F,"g","shapelayer"),m.imagelayer=d(F,"g","imagelayer"),m.gridlayer=d(l,"g","gridlayer"),m.zerolinelayer=d(l,"g","zerolinelayer"),d(l,"path","xlines-below"),d(l,"path","ylines-below"),m.overlinesBelow=d(l,"g","overlines-below"),d(l,"g","xaxislayer-below"),d(l,"g","yaxislayer-below"),m.overaxesBelow=d(l,"g","overaxes-below"),m.plot=d(l,"g","plot"),m.overplot=d(l,"g","overplot"),m.xlines=d(l,"path","xlines-above"),m.ylines=d(l,"path","ylines-above"),m.overlinesAbove=d(l,"g","overlines-above"),d(l,"g","xaxislayer-above"),d(l,"g","yaxislayer-above"),m.overaxesAbove=d(l,"g","overaxes-above"),m.xlines=l.select(".xlines-"+v),m.ylines=l.select(".ylines-"+A),m.xaxislayer=l.select(".xaxislayer-"+v),m.yaxislayer=l.select(".yaxislayer-"+A)}M||(s(m.gridlayer,"g",m.xaxis._id),s(m.gridlayer,"g",m.yaxis._id),m.gridlayer.selectAll("g").map(function(R){return R[0]}).sort(t.idSort)),m.xlines.style("fill","none").classed("crisp",!0),m.ylines.style("fill","none").classed("crisp",!0)}function f(y,m){if(y){var l={};for(var w in y.each(function(k){var E=k[0];g.select(this).remove(),p(E,m),l[E]=!0}),m._plots)for(var v=m._plots[w].overlays||[],A=0;A<v.length;A++){var M=v[A];l[M.id]&&M.plot.selectAll(".trace").remove()}}}function p(y,m){m._draggers.selectAll("g."+y).remove(),m._defs.select("#clip"+m._uid+y+"plot").remove()}ie.name="cartesian",ie.attr=["xaxis","yaxis"],ie.idRoot=["x","y"],ie.idRegex=a.idRegex,ie.attrRegex=a.attrRegex,ie.attributes=_("./attributes"),ie.layoutAttributes=_("./layout_attributes"),ie.supplyLayoutDefaults=_("./layout_defaults"),ie.transitionAxes=_("./transition_axes"),ie.finalizeSubplots=function(y,m){var l,w,v,A=m._subplots,M=A.xaxis,k=A.yaxis,E=A.cartesian,P=E.concat(A.gl2d||[]),S={},F={};for(l=0;l<P.length;l++){var R=P[l].split("y");S[R[0]]=1,F["y"+R[1]]=1}for(l=0;l<M.length;l++)S[w=M[l]]||(v=(y[t.id2name(w)]||{}).anchor,a.idRegex.y.test(v)||(v="y"),E.push(w+v),P.push(w+v),F[v]||(F[v]=1,T.pushUnique(k,v)));for(l=0;l<k.length;l++)F[v=k[l]]||(w=(y[t.id2name(v)]||{}).anchor,a.idRegex.x.test(w)||(w="x"),E.push(w+v),P.push(w+v),S[w]||(S[w]=1,T.pushUnique(M,w)));if(!P.length){for(var D in w="",v="",y)a.attrRegex.test(D)&&("x"===D.charAt(0)?(!w||+D.substr(5)<+w.substr(5))&&(w=D):(!v||+D.substr(5)<+v.substr(5))&&(v=D));w=w?t.name2id(w):"x",v=v?t.name2id(v):"y",M.push(w),k.push(v),E.push(w+v)}},ie.plot=function(y,m,l,w){var v,A=y._fullLayout,M=A._subplots.cartesian,k=y.calcdata;if(!Array.isArray(m))for(m=[],v=0;v<k.length;v++)m.push(v);for(v=0;v<M.length;v++){for(var E,P=M[v],S=A._plots[P],F=[],R=0;R<k.length;R++){var D=k[R],L=D[0].trace;L.xaxis+L.yaxis===P&&((-1!==m.indexOf(L.index)||L.carpet)&&(E&&E[0].trace.xaxis+E[0].trace.yaxis===P&&-1!==["tonextx","tonexty","tonext"].indexOf(L.fill)&&-1===F.indexOf(E)&&F.push(E),F.push(D)),E=D)}i(y,S,F,l,w)}},ie.clean=function(y,m,l,w){var v,A,M,k=w._plots||{},E=m._plots||{},P=w._subplots||{};if(w._hasOnlyLargeSploms&&!m._hasOnlyLargeSploms)for(M in k)(v=k[M]).plotgroup&&v.plotgroup.remove();var S=w._has&&w._has("gl"),F=m._has&&m._has("gl");if(S&&!F)for(M in k)(v=k[M])._scene&&v._scene.destroy();if(P.xaxis&&P.yaxis){var R=t.listIds({_fullLayout:w});for(A=0;A<R.length;A++){var D=R[A];m[t.id2name(D)]||w._infolayer.selectAll(".g-"+D+"title").remove()}}var L=w._has&&w._has("cartesian"),B=m._has&&m._has("cartesian");if(L&&!B)f(w._cartesianlayer.selectAll(".subplot"),w),w._defs.selectAll(".axesclip").remove(),delete w._axisConstraintGroups,delete w._axisMatchGroups;else if(P.cartesian)for(A=0;A<P.cartesian.length;A++){var V=P.cartesian[A];E[V]||(w._cartesianlayer.selectAll("."+V+",."+V+"-x,."+V+"-y").remove(),p(V,w))}},ie.drawFramework=function(y){var m=y._fullLayout,l=function(v){var A,M,k,E,P,S,F=v._fullLayout,R=F._subplots.cartesian,D=R.length,L=[],B=[];for(A=0;A<D;A++){var Y=(P=(E=F._plots[k=R[A]]).xaxis)._mainAxis._id+(S=E.yaxis)._mainAxis._id,ee=F._plots[Y];E.overlays=[],Y!==k&&ee?(E.mainplot=Y,E.mainplotinfo=ee,B.push(k)):(E.mainplot=void 0,E.mainplotinfo=void 0,L.push(k))}for(A=0;A<B.length;A++)(E=F._plots[k=B[A]]).mainplotinfo.overlays.push(E);var Q=L.concat(B),$=new Array(D);for(A=0;A<D;A++){var K=[k=Q[A],(P=(E=F._plots[k]).xaxis).layer,(S=E.yaxis).layer,P.overlaying||"",S.overlaying||""];for(M=0;M<E.overlays.length;M++)K.push(E.overlays[M].id);$[A]=K}return $}(y),w=m._cartesianlayer.selectAll(".subplot").data(l,String);w.enter().append("g").attr("class",function(v){return"subplot "+v[0]}),w.order(),w.exit().call(f,m),w.each(function(v){var A=v[0],M=m._plots[A];M.plotgroup=g.select(this),u(y,M),M.draglayer=d(m._draggers,"g",A)})},ie.rangePlot=function(y,m,l){u(y,m),i(y,m,l),b.style(y)},ie.toSVG=function(y){var m=y._fullLayout._glimages,l=g.select(y).selectAll(".svg-container");l.filter(function(w,v){return v===l.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var w=this.toDataURL("image/png");m.append("svg:image").attr({xmlns:n.svg,"xlink:href":w,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},ie.updateFx=_("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(_,ae,ie){"use strict";var g=_("../font_attributes"),x=_("../../components/color/attributes"),T=_("../../components/drawing/attributes").dash,b=_("../../lib/extend").extendFlat,e=_("../../plot_api/plot_template").templatedArray,r=_("../../plots/cartesian/axis_format_attributes").descriptionWithDates,t=_("../../constants/numerical").ONEDAY,a=_("./constants"),n=a.HOUR_PATTERN,d=a.WEEKDAY_PATTERN;ae.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:x.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:g({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,n,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:t},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:x.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:b({},T,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:g({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:r("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:r("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:x.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:x.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:x.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:x.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:g({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/color"),T=_("../../components/fx/helpers").isUnifiedHover,b=_("../../components/fx/hovermode_defaults"),e=_("../../plot_api/plot_template"),r=_("../layout_attributes"),t=_("./layout_attributes"),a=_("./type_defaults"),n=_("./axis_defaults"),d=_("./constraints"),s=_("./position_defaults"),i=_("./axis_ids"),u=i.id2name,f=i.name2id,p=_("./constants").AX_ID_PATTERN,y=_("../../registry"),m=y.traceIs,l=y.getComponentMethod;function w(v,A,M){Array.isArray(v[A])?v[A].push(M):v[A]=[M]}ae.exports=function(v,A,M){var k,E,P=A.autotypenumbers,S={},F={},R={},D={},L={},B={},V={},Z={},Y={},ee={};for(k=0;k<M.length;k++){var Q=M[k];if(m(Q,"cartesian")||m(Q,"gl2d")){var $,K;if(Q.xaxis)$=u(Q.xaxis),w(S,$,Q);else if(Q.xaxes)for(E=0;E<Q.xaxes.length;E++)w(S,u(Q.xaxes[E]),Q);if(Q.yaxis)K=u(Q.yaxis),w(S,K,Q);else if(Q.yaxes)for(E=0;E<Q.yaxes.length;E++)w(S,u(Q.yaxes[E]),Q);"funnel"===Q.type?"h"===Q.orientation?($&&(F[$]=!0),K&&(V[K]=!0)):K&&(R[K]=!0):"image"===Q.type?(K&&(Z[K]=!0),$&&(Z[$]=!0)):(K&&(L[K]=!0,B[K]=!0),m(Q,"carpet")&&("carpet"!==Q.type||Q._cheater)||$&&(D[$]=!0)),"carpet"===Q.type&&Q._cheater&&$&&(F[$]=!0),m(Q,"2dMap")&&(Y[$]=!0,Y[K]=!0),m(Q,"oriented")&&(ee["h"===Q.orientation?K:$]=!0)}}var oe=A._subplots,j=oe.xaxis,H=oe.yaxis,G=g.simpleMap(j,u),re=g.simpleMap(H,u),q=G.concat(re),te=x.background;j.length&&H.length&&(te=g.coerce(v,A,r,"plot_bgcolor"));var ne,le,ue,de,he,be=x.combine(te,A.paper_bgcolor);function ge(){he._traceIndices=(S[ne]||[]).map(function(Rt){return Rt._expandedIndex}),he._annIndices=[],he._shapeIndices=[],he._imgIndices=[],he._subplotsWith=[],he._counterAxes=[],he._name=he._attr=ne,he._id=le}function we(ut,Rt){return g.coerce(de,he,t,ut,Rt)}function ke(ut,Rt){return g.coerce2(de,he,t,ut,Rt)}function De(ut){return"x"===ut?H:j}function Ee(ut,Rt){for(var nn="x"===ut?G:re,cn=[],Ze=0;Ze<nn.length;Ze++){var Qe=nn[Ze];Qe===Rt||(v[Qe]||{}).overlaying||cn.push(f(Qe))}return cn}var Re={x:De("x"),y:De("y")},ve=Re.x.concat(Re.y),Te={},Ie=[];function Ce(){var ut=de.matches;p.test(ut)&&-1===ve.indexOf(ut)&&(Te[ut]=de.type,Ie=Object.keys(Te))}var Pe=b(v,A),Ve=T(Pe);for(k=0;k<q.length;k++){le=f(ne=q[k]),ue=ne.charAt(0),g.isPlainObject(v[ne])||(v[ne]={}),de=v[ne],he=e.newContainer(A,ne,ue+"axis"),ge();var lt={letter:ue,font:A.font,outerTicks:Y[ne],showGrid:!ee[ne],data:S[ne]||[],bgColor:be,calendar:A.calendar,automargin:!0,visibleDflt:"x"===ue&&!D[ne]&&F[ne]||"y"===ue&&!L[ne]&&R[ne],reverseDflt:"y"===ue&&(!B[ne]&&V[ne]||Z[ne]),autotypenumbersDflt:P,splomStash:((A._splomAxes||{})[ue]||{})[le]};we("uirevision",A.uirevision),a(de,he,we,lt),n(de,he,we,lt,A);var He=Ve&&ue===Pe.charAt(0),$e=ke("spikecolor",Ve?he.color:void 0),et=ke("spikethickness",Ve?1.5:void 0),tt=ke("spikedash",Ve?"dot":void 0),ft=ke("spikemode",Ve?"across":void 0),bt=ke("spikesnap");we("showspikes",!!(He||$e||et||tt||ft||bt))||(delete he.spikecolor,delete he.spikethickness,delete he.spikedash,delete he.spikemode,delete he.spikesnap),s(de,he,we,{letter:ue,counterAxes:Re[ue],overlayableAxes:Ee(ue,ne),grid:A.grid}),we("title.standoff"),Ce(),he._input=de}for(k=0;k<Ie.length;){le=Ie[k++],ue=(ne=u(le)).charAt(0),g.isPlainObject(v[ne])||(v[ne]={}),de=v[ne],he=e.newContainer(A,ne,ue+"axis"),ge();var Ct={letter:ue,font:A.font,outerTicks:Y[ne],showGrid:!ee[ne],data:[],bgColor:be,calendar:A.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:P,splomStash:((A._splomAxes||{})[ue]||{})[le]};we("uirevision",A.uirevision),he.type=Te[le]||"linear",n(de,he,we,Ct,A),s(de,he,we,{letter:ue,counterAxes:Re[ue],overlayableAxes:Ee(ue,ne),grid:A.grid}),we("fixedrange"),Ce(),he._input=de}var Vt=l("rangeslider","handleDefaults"),Ft=l("rangeselector","handleDefaults");for(k=0;k<G.length;k++)de=v[ne=G[k]],he=A[ne],Vt(v,A,ne),"date"===he.type&&Ft(de,he,A,re,he.calendar),we("fixedrange");for(k=0;k<re.length;k++){de=v[ne=re[k]];var ht=A[u((he=A[ne]).anchor)];we("fixedrange",l("rangeslider","isVisible")(ht))}d.handleDefaults(v,A,{axIds:ve.concat(Ie).sort(i.idSort),axHasImage:Z})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(_,ae,ie){"use strict";var g=_("tinycolor2").mix,x=_("../../components/color/attributes").lightFraction,T=_("../../lib");ae.exports=function(b,e,r,t){var a=(t=t||{}).dfltColor;function n(y,m){return T.coerce2(b,e,t.attributes,y,m)}var d=n("linecolor",a),s=n("linewidth");r("showline",t.showLine||!!d||!!s)||(delete e.linecolor,delete e.linewidth);var i=n("gridcolor",g(a,t.bgColor,t.blend||x).toRgbString()),u=n("gridwidth");if(r("showgrid",t.showGrid||!!i||!!u)||(delete e.gridcolor,delete e.gridwidth),!t.noZeroLine){var f=n("zerolinecolor",a),p=n("zerolinewidth");r("zeroline",t.showGrid||!!f||!!p)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib");ae.exports=function(T,b,e,r){var t,a,n,d,s=r.counterAxes||[],i=r.overlayableAxes||[],u=r.letter,f=r.grid;f&&(t=f._anchors[b._id],(a=f._domains[u][f._axisMap[b._id]])&&(n=f[u+"side"].split(" ")[0],d=f.domain[u]["right"===n||"top"===n?1:0])),a=a||[0,1],t=t||(g(T.position)?"free":s[0]||"free"),n=n||("x"===u?"bottom":"left"),d=d||0,"free"===x.coerce(T,b,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:t}},"anchor")&&e("position",d),x.coerce(T,b,{side:{valType:"enumerated",values:"x"===u?["bottom","top"]:["left","right"],dflt:n}},"side");var p=!1;if(i.length&&(p=x.coerce(T,b,{overlaying:{valType:"enumerated",values:[!1].concat(i),dflt:!1}},"overlaying")),!p){var y=e("domain",a);y[0]>y[1]-1/4096&&(b.domain=a),x.noneOrAll(T.domain,b.domain,a)}return e("layer"),b}},{"../../lib":503,"fast-isnumeric":190}],573:[function(_,ae,ie){"use strict";var g=_("./show_dflt");ae.exports=function(x,T,b,e,r){r||(r={});var t=r.tickSuffixDflt,a=g(x);b("tickprefix")&&b("showtickprefix",a),b("ticksuffix",t)&&b("showticksuffix",a)}},{"./show_dflt":577}],574:[function(_,ae,ie){"use strict";var g=_("../../constants/alignment").FROM_BL;ae.exports=function(x,T,b){void 0===b&&(b=g[x.constraintoward||"center"]);var e=[x.r2l(x.range[0]),x.r2l(x.range[1])],r=e[0]+(e[1]-e[0])*b;x.range=x._input.range=[x.l2r(r+(e[0]-r)*T),x.l2r(r+(e[1]-r)*T)],x.setScale()}},{"../../constants/alignment":471}],575:[function(_,ae,ie){"use strict";var g=_("polybooljs"),x=_("../../registry"),T=_("../../components/drawing").dashStyle,b=_("../../components/color"),e=_("../../components/fx"),r=_("../../components/fx/helpers").makeEventData,t=_("../../components/dragelement/helpers"),a=t.freeMode,n=t.rectMode,d=t.drawMode,s=t.openMode,i=t.selectMode,u=_("../../components/shapes/draw_newshape/display_outlines"),f=_("../../components/shapes/draw_newshape/helpers").handleEllipse,p=_("../../components/shapes/draw_newshape/newshapes"),y=_("../../lib"),m=_("../../lib/polygon"),l=_("../../lib/throttle"),w=_("./axis_ids").getFromId,v=_("../../lib/clear_gl_canvases"),A=_("../../plot_api/subroutines").redrawReglTraces,M=_("./constants"),k=M.MINSELECT,E=m.filter,P=m.tester,S=_("./handle_outline").clearSelect,F=_("./helpers"),R=F.p2r,D=F.axValue,L=F.getTransform;function B(G,re,q,te,ne,le,ue){var de,he,be,ge,we,ke,De,Ee,Re,Je,ve=re._hoverdata,Te=re._fullLayout.clickmode.indexOf("event")>-1,Ie=[];if((Je=ve)&&Array.isArray(Je)&&!0!==Je[0].hoverOnBox){ee(G,re,le);var Ce=function(Je,lt){var He,$e,et=Je[0],tt=-1,ft=[];for($e=0;$e<lt.length;$e++)if(et.fullData._expandedIndex===(He=lt[$e]).cd[0].trace._expandedIndex){if(!0===et.hoverOnBox)break;void 0!==et.pointNumber?tt=et.pointNumber:void 0!==et.binNumber&&(tt=et.binNumber,ft=et.pointNumbers);break}return{pointNumber:tt,pointNumbers:ft,searchInfo:He}}(ve,de=$(re,q,te,ne));if(Ce.pointNumbers.length>0?function(Je,lt){var He,$e,et,tt=[];for(et=0;et<Je.length;et++)(He=Je[et]).cd[0].trace.selectedpoints&&He.cd[0].trace.selectedpoints.length>0&&tt.push(He);if(1===tt.length&&tt[0]===lt.searchInfo&&($e=lt.searchInfo.cd[0].trace).selectedpoints.length===lt.pointNumbers.length){for(et=0;et<lt.pointNumbers.length;et++)if($e.selectedpoints.indexOf(lt.pointNumbers[et])<0)return!1;return!0}return!1}(de,Ce):function(Je){var He,$e,et=0;for($e=0;$e<Je.length;$e++)if((He=Je[$e].cd[0].trace).selectedpoints&&(He.selectedpoints.length>1||(et+=He.selectedpoints.length)>1))return!1;return 1===et}(de)&&(ke=K(Ce))){for(ue&&ue.remove(),Re=0;Re<de.length;Re++)(he=de[Re])._module.selectPoints(he,!1);oe(re,de),Q(le),Te&&re.emit("plotly_deselect",null)}else{for(De=G.shiftKey&&(void 0!==ke?ke:K(Ce)),be=function(Je,lt,He){return{pointNumber:Je,searchInfo:lt,subtract:He}}(Ce.pointNumber,Ce.searchInfo,De),ge=Y(le.selectionDefs.concat([be])),Re=0;Re<de.length;Re++)if(we=j(de[Re]._module.selectPoints(de[Re],ge),de[Re]),Ie.length)for(var Pe=0;Pe<we.length;Pe++)Ie.push(we[Pe]);else Ie=we;if(oe(re,de,Ee={points:Ie}),be&&le&&le.selectionDefs.push(be),ue){var Ve=le.mergedPolygons,qe=s(le.dragmode);u(H(Ve,qe),ue,le)}Te&&re.emit("plotly_selected",Ee)}}}function V(G){return"pointNumber"in G&&"searchInfo"in G}function Z(G){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(re,q,te,ne){return ne.cd[0].trace._expandedIndex===G.searchInfo.cd[0].trace._expandedIndex&&te===G.pointNumber},isRect:!1,degenerate:!1,subtract:G.subtract}}function Y(G){for(var re=[],q=V(G[0])?0:G[0][0][0],te=q,ne=V(G[0])?0:G[0][0][1],le=ne,ue=0;ue<G.length;ue++)if(V(G[ue]))re.push(Z(G[ue]));else{var de=m.tester(G[ue]);de.subtract=G[ue].subtract,re.push(de),q=Math.min(q,de.xmin),te=Math.max(te,de.xmax),ne=Math.min(ne,de.ymin),le=Math.max(le,de.ymax)}return{xmin:q,xmax:te,ymin:ne,ymax:le,pts:[],contains:function(he,be,ge,we){for(var ke=!1,De=0;De<re.length;De++)re[De].contains(he,be,ge,we)&&(ke=!1===re[De].subtract);return ke},isRect:!1,degenerate:!1}}function ee(G,re,q){re._fullLayout._drawing=!1;var te=re._fullLayout,ne=q.plotinfo,le=q.dragmode,ue=te._lastSelectedSubplot&&te._lastSelectedSubplot===ne.id,de=(G.shiftKey||G.altKey)&&!(d(le)&&s(le));ue&&de&&ne.selection&&ne.selection.selectionDefs&&!q.selectionDefs?(q.selectionDefs=ne.selection.selectionDefs,q.mergedPolygons=ne.selection.mergedPolygons):de&&ne.selection||Q(q),ue||(S(re),te._lastSelectedSubplot=ne.id)}function Q(G){var re=G.dragmode,q=G.plotinfo,te=G.gd;if(te._fullLayout._activeShapeIndex>=0&&te._fullLayout._deactivateShape(te),d(re)){var ne=te._fullLayout._zoomlayer.selectAll(".select-outline-"+q.id);if(ne&&te._fullLayout._drawing){var le=p(ne,G);le&&x.call("_guiRelayout",te,{shapes:le}),te._fullLayout._drawing=!1}}q.selection={},q.selection.selectionDefs=G.selectionDefs=[],q.selection.mergedPolygons=G.mergedPolygons=[]}function $(G,re,q,te){var ne,le,ue,de=[],he=re.map(function(De){return De._id}),be=q.map(function(De){return De._id});for(ue=0;ue<G.calcdata.length;ue++)if(!0===(le=(ne=G.calcdata[ue])[0].trace).visible&&le._module&&le._module.selectPoints)if(!te||le.subplot!==te&&le.geo!==te)if("splom"===le.type&&le._xaxes[he[0]]&&le._yaxes[be[0]]){var ge=ke(le._module,ne,re[0],q[0]);ge.scene=G._fullLayout._splomScenes[le.uid],de.push(ge)}else if("sankey"===le.type){var we=ke(le._module,ne,re[0],q[0]);de.push(we)}else{if(-1===he.indexOf(le.xaxis)||-1===be.indexOf(le.yaxis))continue;de.push(ke(le._module,ne,w(G,le.xaxis),w(G,le.yaxis)))}else de.push(ke(le._module,ne,re[0],q[0]));return de;function ke(De,Ee,Re,ve){return{_module:De,cd:Ee,xaxis:Re,yaxis:ve}}}function K(G){var re=G.searchInfo.cd[0].trace,te=G.pointNumbers;return!!re.selectedpoints&&re.selectedpoints.indexOf(te.length>0?te[0]:G.pointNumber)>-1}function oe(G,re,q){var te,ne,le,ue;for(te=0;te<re.length;te++){var de=re[te].cd[0].trace._fullInput,he=G._fullLayout._tracePreGUI[de.uid]||{};void 0===he.selectedpoints&&(he.selectedpoints=de._input.selectedpoints||null)}if(q){var be=q.points||[];for(te=0;te<re.length;te++)(ue=re[te].cd[0].trace)._input.selectedpoints=ue._fullInput.selectedpoints=[],ue._fullInput!==ue&&(ue.selectedpoints=[]);for(te=0;te<be.length;te++){var ge=be[te],we=ge.data,ke=ge.fullData;ge.pointIndices?([].push.apply(we.selectedpoints,ge.pointIndices),ue._fullInput!==ue&&[].push.apply(ke.selectedpoints,ge.pointIndices)):(we.selectedpoints.push(ge.pointIndex),ue._fullInput!==ue&&ke.selectedpoints.push(ge.pointIndex))}}else for(te=0;te<re.length;te++)delete(ue=re[te].cd[0].trace).selectedpoints,delete ue._input.selectedpoints,ue._fullInput!==ue&&delete ue._fullInput.selectedpoints;var De=!1;for(te=0;te<re.length;te++){ue=(le=(ne=re[te]).cd)[0].trace,x.traceIs(ue,"regl")&&(De=!0);var Ee=ne._module,Re=Ee.styleOnSelect||Ee.style;Re&&(Re(G,le,le[0].node3),le[0].nodeRangePlot3&&Re(G,le,le[0].nodeRangePlot3))}De&&(v(G),A(G))}function j(G,re){if(Array.isArray(G))for(var q=re.cd,te=re.cd[0].trace,ne=0;ne<G.length;ne++)G[ne]=r(G[ne],te,q);return G}function H(G,re){for(var q=[],te=0;te<G.length;te++){q[te]=[];for(var ne=0;ne<G[te].length;ne++){q[te][ne]=[],q[te][ne][0]=ne?"L":"M";for(var le=0;le<G[te][ne].length;le++)q[te][ne].push(G[te][ne][le])}re||q[te].push(["Z",q[te][0][1],q[te][0][2]])}return q}ae.exports={prepSelect:function(G,re,q,te,ne){var le=a(ne),ue=n(ne),de=s(ne),he=d(ne),be=i(ne),ge="drawcircle"===ne,we="drawline"===ne||ge,ke=te.gd,De=ke._fullLayout,Ee=De._zoomlayer,Re=te.element.getBoundingClientRect(),ve=te.plotinfo,Te=L(ve),Ie=re-Re.left,Ce=q-Re.top;De._calcInverseTransform(ke);var Ve,qe,Je,lt,He,$e,et,Pe=y.apply3DTransform(De._invTransform)(Ie,Ce),tt=De._invScaleX,ft=De._invScaleY,bt=Ie=Pe[0],Ct=Ce=Pe[1],Vt="M"+Ie+","+Ce,Ft=te.xaxes[0]._length,ht=te.yaxes[0]._length,ut=te.xaxes.concat(te.yaxes),Rt=G.altKey&&!(d(ne)&&de);ee(G,ke,te),le&&(Ve=E([[Ie,Ce]],M.BENDPX));var nn=Ee.selectAll("path.select-outline-"+ve.id).data(he?[0]:[1,2]),cn=De.newshape;nn.enter().append("path").attr("class",function(je){return"select-outline select-outline-"+je+" select-outline-"+ve.id}).style(he?{opacity:cn.opacity/2,fill:de?void 0:cn.fillcolor,stroke:cn.line.color,"stroke-dasharray":T(cn.line.dash,cn.line.width),"stroke-width":cn.line.width+"px"}:{}).attr("fill-rule",cn.fillrule).classed("cursor-move",!!he).attr("transform",Te).attr("d",Vt+"Z");var Ze,Qe=Ee.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",Te).attr("d","M0,0Z"),Ge=De._uid+M.SELECTID,rt=[],Le=$(ke,te.xaxes,te.yaxes,te.subplot);function ze(je,Ne){return je-Ne}Ze=ve.fillRangeItems?ve.fillRangeItems:ue?function(je,Ne){var st=je.range={};for(He=0;He<ut.length;He++){var mt=ut[He],Tt=mt._id.charAt(0);st[mt._id]=[R(mt,Ne[Tt+"min"]),R(mt,Ne[Tt+"max"])].sort(ze)}}:function(je,Ne,st){var mt=je.lassoPoints={};for(He=0;He<ut.length;He++){var Tt=ut[He];mt[Tt._id]=st.filtered.map(D(Tt))}},te.moveFn=function(je,Ne){bt=Math.max(0,Math.min(Ft,tt*je+Ie)),Ct=Math.max(0,Math.min(ht,ft*Ne+Ce));var Bt,jt,st=Math.abs(bt-Ie),mt=Math.abs(Ct-Ce);if(ue){var Tt,xt,zt;if(be){var gt=De.selectdirection;switch(Tt="any"===gt?mt<Math.min(.6*st,k)?"h":st<Math.min(.6*mt,k)?"v":"d":gt){case"h":xt=ge?ht/2:0,zt=ht;break;case"v":xt=ge?Ft/2:0,zt=Ft}}if(he)switch(De.newshape.drawdirection){case"vertical":Tt="h",xt=ge?ht/2:0,zt=ht;break;case"horizontal":Tt="v",xt=ge?Ft/2:0,zt=Ft;break;case"ortho":st<mt?(Tt="h",xt=Ce,zt=Ct):(Tt="v",xt=Ie,zt=bt);break;default:Tt="d"}"h"===Tt?((lt=we?f(ge,[bt,xt],[bt,zt]):[[Ie,xt],[Ie,zt],[bt,zt],[bt,xt]]).xmin=we?bt:Math.min(Ie,bt),lt.xmax=we?bt:Math.max(Ie,bt),lt.ymin=Math.min(xt,zt),lt.ymax=Math.max(xt,zt),Qe.attr("d","M"+lt.xmin+","+(Ce-k)+"h-4v"+2*k+"h4ZM"+(lt.xmax-1)+","+(Ce-k)+"h4v"+2*k+"h-4Z")):"v"===Tt?((lt=we?f(ge,[xt,Ct],[zt,Ct]):[[xt,Ce],[xt,Ct],[zt,Ct],[zt,Ce]]).xmin=Math.min(xt,zt),lt.xmax=Math.max(xt,zt),lt.ymin=we?Ct:Math.min(Ce,Ct),lt.ymax=we?Ct:Math.max(Ce,Ct),Qe.attr("d","M"+(Ie-k)+","+lt.ymin+"v-4h"+2*k+"v4ZM"+(Ie-k)+","+(lt.ymax-1)+"v4h"+2*k+"v-4Z")):"d"===Tt&&((lt=we?f(ge,[Ie,Ce],[bt,Ct]):[[Ie,Ce],[Ie,Ct],[bt,Ct],[bt,Ce]]).xmin=Math.min(Ie,bt),lt.xmax=Math.max(Ie,bt),lt.ymin=Math.min(Ce,Ct),lt.ymax=Math.max(Ce,Ct),Qe.attr("d","M0,0Z"))}else le&&(Ve.addPt([bt,Ct]),lt=Ve.filtered);te.selectionDefs&&te.selectionDefs.length?(Bt=te.mergedPolygons,jt=lt,Je=Rt?g.difference({regions:Bt,inverted:!1},{regions:[jt],inverted:!1}).regions:g.union({regions:Bt,inverted:!1},{regions:[jt],inverted:!1}).regions,lt.subtract=Rt,qe=Y(te.selectionDefs.concat([lt]))):(Je=[lt],qe=P(lt)),u(H(Je,de),nn,te),be&&l.throttle(Ge,M.SELECTDELAY,function(){var Bt;rt=[];var jt,it=[];for(He=0;He<Le.length;He++)if(jt=($e=Le[He])._module.selectPoints($e,qe),it.push(jt),Bt=j(jt,$e),rt.length)for(var Mt=0;Mt<Bt.length;Mt++)rt.push(Bt[Mt]);else rt=Bt;oe(ke,Le,et={points:rt}),Ze(et,lt,Ve),te.gd.emit("plotly_selecting",et)})},te.clickFn=function(je,Ne){if(Qe.remove(),ke._fullLayout._activeShapeIndex>=0)ke._fullLayout._deactivateShape(ke);else if(!he){var st=De.clickmode;l.done(Ge).then(function(){if(l.clear(Ge),2===je){for(nn.remove(),He=0;He<Le.length;He++)($e=Le[He])._module.selectPoints($e,!1);oe(ke,Le),Q(te),ke.emit("plotly_deselect",null)}else st.indexOf("select")>-1&&B(Ne,ke,te.xaxes,te.yaxes,te.subplot,te,nn),"event"===st&&ke.emit("plotly_selected",void 0);e.click(ke,Ne)}).catch(y.error)}},te.doneFn=function(){Qe.remove(),l.done(Ge).then(function(){l.clear(Ge),te.gd.emit("plotly_selected",et),lt&&te.selectionDefs&&(lt.subtract=Rt,te.selectionDefs.push(lt),te.mergedPolygons.length=0,[].push.apply(te.mergedPolygons,Je)),te.doneFnCompleted&&te.doneFnCompleted(rt)}).catch(y.error),he&&Q(te)}},clearSelect:S,clearSelectionsCache:Q,selectOnClick:B}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("d3-time-format").utcFormat,T=_("../../lib"),b=T.numberFormat,e=_("fast-isnumeric"),r=T.cleanNumber,t=T.ms2DateTime,a=T.dateTime2ms,n=T.ensureNumber,d=T.isArrayOrTypedArray,s=_("../../constants/numerical"),i=s.FP_SAFE,u=s.BADNUM,f=s.LOG_CLIP,p=s.ONEWEEK,y=s.ONEDAY,m=s.ONEHOUR,l=s.ONEMIN,w=s.ONESEC,v=_("./axis_ids"),A=_("./constants"),M=A.HOUR_PATTERN,k=A.WEEKDAY_PATTERN;function E(S){return Math.pow(10,S)}function P(S){return null!=S}ae.exports=function(S,F){F=F||{};var R=S._id||"x",D=R.charAt(0);function L(q,te){if(q>0)return Math.log(q)/Math.LN10;if(q<=0&&te&&S.range&&2===S.range.length){var ne=S.range[0],le=S.range[1];return.5*(ne+le-2*f*Math.abs(ne-le))}return u}function B(q,te,ne,le){if((le||{}).msUTC&&e(q))return+q;var ue=a(q,ne||S.calendar);if(ue===u){if(!e(q))return u;q=+q;var de=Math.floor(10*T.mod(q+.05,1)),he=Math.round(q-de/10);ue=a(new Date(he))+de/10}return ue}function V(q,te,ne){return t(q,te,ne||S.calendar)}function Z(q){return S._categories[Math.round(q)]}function Y(q){if(P(q)){if(void 0===S._categoriesMap&&(S._categoriesMap={}),void 0!==S._categoriesMap[q])return S._categoriesMap[q];S._categories.push("number"==typeof q?String(q):q);var te=S._categories.length-1;return S._categoriesMap[q]=te,te}return u}function ee(q){if(S._categoriesMap)return S._categoriesMap[q]}function Q(q){var te=ee(q);return void 0!==te?te:e(q)?+q:void 0}function $(q){return e(q)?+q:ee(q)}function K(q,te,ne){return g.round(ne+te*q,2)}function oe(q,te,ne){return(q-ne)/te}var j=function(q){return e(q)?K(q,S._m,S._b):u},H=function(q){return oe(q,S._m,S._b)};if(S.rangebreaks){var G="y"===D;j=function(q){if(!e(q))return u;var te=S._rangebreaks.length;if(!te)return K(q,S._m,S._b);var ne=G;S.range[0]>S.range[1]&&(ne=!ne);for(var le=ne?-1:1,ue=le*q,de=0,he=0;he<te;he++){var be=le*S._rangebreaks[he].min,ge=le*S._rangebreaks[he].max;if(ue<be)break;if(!(ue>ge)){de=ue<(be+ge)/2?he:he+1;break}de=he+1}var we=S._B[de]||0;return isFinite(we)?K(q,S._m2,we):0},H=function(q){var te=S._rangebreaks.length;if(!te)return oe(q,S._m,S._b);for(var ne=0,le=0;le<te&&!(q<S._rangebreaks[le].pmin);le++)q>S._rangebreaks[le].pmax&&(ne=le+1);return oe(q,S._m2,S._B[ne])}}S.c2l="log"===S.type?L:n,S.l2c="log"===S.type?E:n,S.l2p=j,S.p2l=H,S.c2p="log"===S.type?function(q,te){return j(L(q,te))}:j,S.p2c="log"===S.type?function(q){return E(H(q))}:H,-1!==["linear","-"].indexOf(S.type)?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=r,S.c2d=S.c2r=S.l2d=S.l2r=n,S.d2p=S.r2p=function(q){return S.l2p(r(q))},S.p2d=S.p2r=H,S.cleanPos=n):"log"===S.type?(S.d2r=S.d2l=function(q,te){return L(r(q),te)},S.r2d=S.r2c=function(q){return E(r(q))},S.d2c=S.r2l=r,S.c2d=S.l2r=n,S.c2r=L,S.l2d=E,S.d2p=function(q,te){return S.l2p(S.d2r(q,te))},S.p2d=function(q){return E(H(q))},S.r2p=function(q){return S.l2p(r(q))},S.p2r=H,S.cleanPos=n):"date"===S.type?(S.d2r=S.r2d=T.identity,S.d2c=S.r2c=S.d2l=S.r2l=B,S.c2d=S.c2r=S.l2d=S.l2r=V,S.d2p=S.r2p=function(q,te,ne){return S.l2p(B(q,0,ne))},S.p2d=S.p2r=function(q,te,ne){return V(H(q),te,ne)},S.cleanPos=function(q){return T.cleanDate(q,u,S.calendar)}):"category"===S.type?(S.d2c=S.d2l=Y,S.r2d=S.c2d=S.l2d=Z,S.d2r=S.d2l_noadd=Q,S.r2c=function(q){var te=$(q);return void 0!==te?te:S.fraction2r(.5)},S.l2r=S.c2r=n,S.r2l=$,S.d2p=function(q){return S.l2p(S.r2c(q))},S.p2d=function(q){return Z(H(q))},S.r2p=S.d2p,S.p2r=H,S.cleanPos=function(q){return"string"==typeof q&&""!==q?q:n(q)}):"multicategory"===S.type&&(S.r2d=S.c2d=S.l2d=Z,S.d2r=S.d2l_noadd=Q,S.r2c=function(q){var te=Q(q);return void 0!==te?te:S.fraction2r(.5)},S.r2c_just_indices=ee,S.l2r=S.c2r=n,S.r2l=Q,S.d2p=function(q){return S.l2p(S.r2c(q))},S.p2d=function(q){return Z(H(q))},S.r2p=S.d2p,S.p2r=H,S.cleanPos=function(q){return Array.isArray(q)||"string"==typeof q&&""!==q?q:n(q)},S.setupMultiCategory=function(q){var te,ne,le=S._traceIndices,ue=S._matchGroup;if(ue&&0===S._categories.length)for(var de in ue)if(de!==R){var he=F[v.id2name(de)];le=le.concat(he._traceIndices)}var be=[[0,{}],[0,{}]],ge=[];for(te=0;te<le.length;te++){var we=q[le[te]];if(D in we){var ke=we[D],De=we._length||T.minRowLength(ke);if(d(ke[0])&&d(ke[1]))for(ne=0;ne<De;ne++){var Ee=ke[0][ne],Re=ke[1][ne];P(Ee)&&P(Re)&&(ge.push([Ee,Re]),Ee in be[0][1]||(be[0][1][Ee]=be[0][0]++),Re in be[1][1]||(be[1][1][Re]=be[1][0]++))}}}for(ge.sort(function(ve,Te){var Ie=be[0][1],Ce=Ie[ve[0]]-Ie[Te[0]];if(Ce)return Ce;var Pe=be[1][1];return Pe[ve[1]]-Pe[Te[1]]}),te=0;te<ge.length;te++)Y(ge[te])}),S.fraction2r=function(q){var te=S.r2l(S.range[0]),ne=S.r2l(S.range[1]);return S.l2r(te+q*(ne-te))},S.r2fraction=function(q){var te=S.r2l(S.range[0]),ne=S.r2l(S.range[1]);return(S.r2l(q)-te)/(ne-te)},S.cleanRange=function(q,te){te||(te={}),q||(q="range");var ne,le,ue=T.nestedProperty(S,q).get();if(le=(le="date"===S.type?T.dfltRange(S.calendar):"y"===D?A.DFLTRANGEY:"realaxis"===S._name?[0,1]:te.dfltRange||A.DFLTRANGEX).slice(),"tozero"!==S.rangemode&&"nonnegative"!==S.rangemode||(le[0]=0),ue&&2===ue.length)for("date"!==S.type||S.autorange||(ue[0]=T.cleanDate(ue[0],u,S.calendar),ue[1]=T.cleanDate(ue[1],u,S.calendar)),ne=0;ne<2;ne++)if("date"===S.type){if(!T.isDateTime(ue[ne],S.calendar)){S[q]=le;break}if(S.r2l(ue[0])===S.r2l(ue[1])){var de=T.constrain(S.r2l(ue[0]),T.MIN_MS+1e3,T.MAX_MS-1e3);ue[0]=S.l2r(de-1e3),ue[1]=S.l2r(de+1e3);break}}else{if(!e(ue[ne])){if(!e(ue[1-ne])){S[q]=le;break}ue[ne]=ue[1-ne]*(ne?10:.1)}if(ue[ne]<-i?ue[ne]=-i:ue[ne]>i&&(ue[ne]=i),ue[0]===ue[1]){var he=Math.max(1,Math.abs(1e-6*ue[0]));ue[0]-=he,ue[1]+=he}}else T.nestedProperty(S,q).set(le)},S.setScale=function(q){var te=F._size;if(S.overlaying){var ne=v.getFromId({_fullLayout:F},S.overlaying);S.domain=ne.domain}var le=q&&S._r?"_r":"range",ue=S.calendar;S.cleanRange(le);var de,he,be=S.r2l(S[le][0],ue),ge=S.r2l(S[le][1],ue),we="y"===D;if(we?(S._offset=te.t+(1-S.domain[1])*te.h,S._length=te.h*(S.domain[1]-S.domain[0]),S._m=S._length/(be-ge),S._b=-S._m*ge):(S._offset=te.l+S.domain[0]*te.w,S._length=te.w*(S.domain[1]-S.domain[0]),S._m=S._length/(ge-be),S._b=-S._m*be),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks&&(S._rangebreaks=S.locateBreaks(Math.min(be,ge),Math.max(be,ge)),S._rangebreaks.length)){for(de=0;de<S._rangebreaks.length;de++)he=S._rangebreaks[de],S._lBreaks+=Math.abs(he.max-he.min);var ke=we;be>ge&&(ke=!ke),ke&&S._rangebreaks.reverse();var De=ke?-1:1;for(S._m2=De*S._length/(Math.abs(ge-be)-S._lBreaks),S._B.push(-S._m2*(we?ge:be)),de=0;de<S._rangebreaks.length;de++)S._B.push(S._B[S._B.length-1]-De*S._m2*((he=S._rangebreaks[de]).max-he.min));for(de=0;de<S._rangebreaks.length;de++)(he=S._rangebreaks[de]).pmin=j(he.min),he.pmax=j(he.max)}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw F._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(q){var te,ne,le,ue,de,he=S.rangebreaks||[];he._cachedPatterns||(he._cachedPatterns=he.map(function(Ee){return Ee.enabled&&Ee.bounds?T.simpleMap(Ee.bounds,Ee.pattern?r:S.d2c):null})),he._cachedValues||(he._cachedValues=he.map(function(Ee){return Ee.enabled&&Ee.values?T.simpleMap(Ee.values,S.d2c).sort(T.sorterAsc):null}));for(var be=0;be<he.length;be++){var ge=he[be];if(ge.enabled)if(ge.bounds){switch(ne=(te=he._cachedPatterns[be])[0],le=te[1],ge.pattern){case k:ue=(de=new Date(q)).getUTCDay(),ne>le&&(le+=7,ue<ne&&(ue+=7));break;case M:ue=(de=new Date(q)).getUTCHours()+(de.getUTCMinutes()/60+de.getUTCSeconds()/3600+de.getUTCMilliseconds()/36e5),ne>le&&(le+=24,ue<ne&&(ue+=24));break;case"":ue=q}if(ue>=ne&&ue<le)return u}else for(var ke=he._cachedValues[be],De=0;De<ke.length;De++)if(le=(ne=ke[De])+ge.dvalue,q>=ne&&q<le)return u}return q},S.locateBreaks=function(q,te){var ne,le,ue,de,he=[];if(!S.rangebreaks)return he;var be=S.rangebreaks.slice().sort(function(Pe,Ve){return Pe.pattern===k&&Ve.pattern===M?-1:Ve.pattern===k&&Pe.pattern===M?1:0}),ge=function(Pe,Ve){if((Pe=T.constrain(Pe,q,te))!==(Ve=T.constrain(Ve,q,te))){for(var qe=!0,Je=0;Je<he.length;Je++){var lt=he[Je];Pe<lt.max&&Ve>=lt.min&&(Pe<lt.min&&(lt.min=Pe),Ve>lt.max&&(lt.max=Ve),qe=!1)}qe&&he.push({min:Pe,max:Ve})}};for(ne=0;ne<be.length;ne++){var we=be[ne];if(we.enabled)if(we.bounds){var ke=q,De=te;we.pattern&&(ke=Math.floor(ke)),ue=(le=T.simpleMap(we.bounds,we.pattern?r:S.r2l))[0],de=le[1];var Ee,Re,ve=new Date(ke);switch(we.pattern){case k:Re=p,Ee=(de-ue+(de<ue?7:0))*y,ke+=ue*y-(ve.getUTCDay()*y+ve.getUTCHours()*m+ve.getUTCMinutes()*l+ve.getUTCSeconds()*w+ve.getUTCMilliseconds());break;case M:Re=y,Ee=(de-ue+(de<ue?24:0))*m,ke+=ue*m-(ve.getUTCHours()*m+ve.getUTCMinutes()*l+ve.getUTCSeconds()*w+ve.getUTCMilliseconds());break;default:ke=Math.min(le[0],le[1]),Ee=Re=(De=Math.max(le[0],le[1]))-ke}for(var Te=ke;Te<De;Te+=Re)ge(Te,Te+Ee)}else for(var Ie=T.simpleMap(we.values,S.d2c),Ce=0;Ce<Ie.length;Ce++)ge(ue=Ie[Ce],de=ue+we.dvalue)}return he.sort(function(Pe,Ve){return Pe.min-Ve.min}),he},S.makeCalcdata=function(q,te,ne){var le,ue,de,he,be=S.type,ge="date"===be&&q[te+"calendar"];if(te in q){if(le=q[te],he=q._length||T.minRowLength(le),T.isTypedArray(le)&&("linear"===be||"log"===be)){if(he===le.length)return le;if(le.subarray)return le.subarray(0,he)}if("multicategory"===be)return function(De,Ee){for(var Re=new Array(Ee),ve=0;ve<Ee;ve++)Re[ve]=ee([(De[0]||[])[ve],(De[1]||[])[ve]]);return Re}(le,he);for(ue=new Array(he),de=0;de<he;de++)ue[de]=S.d2c(le[de],0,ge,ne)}else{var we=te+"0"in q?S.d2c(q[te+"0"],0,ge):0,ke=q["d"+te]?Number(q["d"+te]):1;for(le=q[{x:"y",y:"x"}[te]],he=q._length||le.length,ue=new Array(he),de=0;de<he;de++)ue[de]=we+de*ke}if(S.rangebreaks)for(de=0;de<he;de++)ue[de]=S.maskBreaks(ue[de]);return ue},S.isValidRange=function(q){return Array.isArray(q)&&2===q.length&&e(S.r2l(q[0]))&&e(S.r2l(q[1]))},S.isPtWithinRange=function(q,te){var ne=S.c2l(q[D],null,te),le=S.r2l(S.range[0]),ue=S.r2l(S.range[1]);return le<ue?le<=ne&&ne<=ue:ue<=ne&&ne<=le},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var q=S._matchGroup;if(q){var te=null,ne=null;for(var le in q){var ue=F[v.id2name(le)];if(ue._categories){te=ue._categories,ne=ue._categoriesMap;break}}te&&ne?(S._categories=te,S._categoriesMap=ne):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var de=0;de<S._initialCategories.length;de++)Y(S._initialCategories[de])},S.sortByInitialCategories=function(){var q=[];if(S._emptyCategories(),S._initialCategories)for(var te=0;te<S._initialCategories.length;te++)Y(S._initialCategories[te]);q=q.concat(S._traceIndices);var ne=S._matchGroup;for(var le in ne)if(R!==le){var ue=F[v.id2name(le)];ue._categories=S._categories,ue._categoriesMap=S._categoriesMap,q=q.concat(ue._traceIndices)}return q};var re=F._d3locale;"date"===S.type&&(S._dateFormat=re?re.timeFormat:x,S._extraFormat=F._extraFormat),S._separators=F.separators,S._numFormat=re?re.numberFormat:b,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(_,ae,ie){"use strict";ae.exports=function(g){var x=["showexponent","showtickprefix","showticksuffix"].filter(function(T){return void 0!==g[T]});if(x.every(function(T){return g[T]===g[x[0]]})||1===x.length)return g[x[0]]}},{}],578:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/color").contrast,T=_("./layout_attributes"),b=_("./show_dflt"),e=_("../array_container_defaults");function r(t,a){function n(d,s){return g.coerce(t,a,T.tickformatstops,d,s)}n("enabled")&&(n("dtickrange"),n("value"))}ae.exports=function(t,a,n,d,s){s||(s={});var i=b(t);if(n("showticklabels")){var u=s.font||{},f=a.color,p=-1!==(a.ticklabelposition||"").indexOf("inside")?x(s.bgColor):f&&f!==T.color.dflt?f:u.color;if(g.coerceFont(n,"tickfont",{family:u.family,size:u.size,color:p}),s.noAng||n("tickangle"),"category"!==d){var y=n("tickformat");e(t,a,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:r}),a.tickformatstops.length||delete a.tickformatstops,s.noExp||y||"date"===d||(n("showexponent",i),n("exponentformat"),n("minexponent"),n("separatethousands"))}}}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes");ae.exports=function(T,b,e,r){var t=g.coerce2(T,b,x,"ticklen"),a=g.coerce2(T,b,x,"tickwidth"),n=g.coerce2(T,b,x,"tickcolor",b.color);e("ticks",r.outerTicks||t||a||n?"outside":"")||(delete b.ticklen,delete b.tickwidth,delete b.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(_,ae,ie){"use strict";var g=_("./clean_ticks"),x=_("../../lib").isArrayOrTypedArray;ae.exports=function(T,b,e,r){function t(u){var f=T[u];return void 0!==f?f:(b._template||{})[u]}var a=t("tick0"),n=t("dtick"),d=t("tickvals"),s=e("tickmode",x(d)?"array":n?"linear":"auto");if("auto"===s)e("nticks");else if("linear"===s){var i=b.dtick=g.dtick(n,r);b.tick0=g.tick0(a,r,b.calendar,i)}else"multicategory"!==r&&(void 0===e("tickvals")?b.tickmode="auto":e("ticktext"))}},{"../../lib":503,"./clean_ticks":560}],581:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=_("../../components/drawing"),e=_("./axes");ae.exports=function(r,t,a,n){var d=r._fullLayout;if(0!==t.length){var s,i,u,f;n&&(s=n());var p=g.ease(a.easing);return r._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(f),f=null,function(){for(var l={},w=0;w<t.length;w++){var v=t[w],M=v.plotinfo.yaxis;v.xr0&&(l[v.plotinfo.xaxis._name+".range"]=v.xr0.slice()),v.yr0&&(l[M._name+".range"]=v.yr0.slice())}return x.call("relayout",r,l).then(function(){for(var k=0;k<t.length;k++)y(t[k].plotinfo)})}()}),i=Date.now(),f=window.requestAnimationFrame(function l(){u=Date.now();for(var w=Math.min(1,(u-i)/a.duration),v=p(w),A=0;A<t.length;A++)m(t[A],v);u-i>a.duration?(function(){for(var M={},k=0;k<t.length;k++){var E=t[k],S=E.plotinfo.yaxis;E.xr1&&(M[E.plotinfo.xaxis._name+".range"]=E.xr1.slice()),E.yr1&&(M[S._name+".range"]=E.yr1.slice())}s&&s(),x.call("relayout",r,M).then(function(){for(var F=0;F<t.length;F++)y(t[F].plotinfo)})}(),f=window.cancelAnimationFrame(l)):f=window.requestAnimationFrame(l)}),Promise.resolve()}function y(l){var w=l.xaxis,v=l.yaxis;d._defs.select("#"+l.clipId+"> rect").call(b.setTranslate,0,0).call(b.setScale,1,1),l.plot.call(b.setTranslate,w._offset,v._offset).call(b.setScale,1,1);var A=l.plot.selectAll(".scatterlayer .trace");A.selectAll(".point").call(b.setPointGroupScale,1,1),A.selectAll(".textpoint").call(b.setTextPointsScale,1,1),A.call(b.hideOutsideRangePoints,l)}function m(l,w){var v=l.plotinfo,A=v.xaxis,M=v.yaxis,k=A._length,E=M._length,P=!!l.xr1,S=!!l.yr1,F=[];if(P){var R=T.simpleMap(l.xr0,A.r2l),D=T.simpleMap(l.xr1,A.r2l),L=R[1]-R[0],B=D[1]-D[0];F[0]=(R[0]*(1-w)+w*D[0]-R[0])/(R[1]-R[0])*k,F[2]=k*(1-w+w*B/L),A.range[0]=A.l2r(R[0]*(1-w)+w*D[0]),A.range[1]=A.l2r(R[1]*(1-w)+w*D[1])}else F[0]=0,F[2]=k;if(S){var V=T.simpleMap(l.yr0,M.r2l),Z=T.simpleMap(l.yr1,M.r2l),Y=V[1]-V[0],ee=Z[1]-Z[0];F[1]=(V[1]*(1-w)+w*Z[1]-V[1])/(V[0]-V[1])*E,F[3]=E*(1-w+w*ee/Y),M.range[0]=A.l2r(V[0]*(1-w)+w*Z[0]),M.range[1]=M.l2r(V[1]*(1-w)+w*Z[1])}else F[1]=0,F[3]=E;e.drawOne(r,A,{skipTitle:!0}),e.drawOne(r,M,{skipTitle:!0}),e.redrawComponents(r,[A._id,M._id]);var Q=P?k/F[2]:1,$=S?E/F[3]:1,G=A._offset-(P?F[0]/F[2]*k:0),re=M._offset-(S?F[1]/F[3]*E:0);v.clipRect.call(b.setTranslate,P?F[0]:0,S?F[1]:0).call(b.setScale,1/Q,1/$),v.plot.call(b.setTranslate,G,re).call(b.setScale,Q,$),b.setPointGroupScale(v.zoomScalePts,1/Q,1/$),b.setTextPointsScale(v.zoomScaleTxt,1/Q,1/$)}e.redrawComponents(r)}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(_,ae,ie){"use strict";var g=_("../../registry").traceIs,x=_("./axis_autotype");function T(e){return{v:"x",h:"y"}[e.orientation||"v"]}function b(e,r){var t=T(e),a=g(e,"box-violin"),n=g(e._fullInput||{},"candlestick");return a&&!n&&r===t&&void 0===e[t]&&void 0===e[t+"0"]}ae.exports=function(e,r,t,a){t("autotypenumbers",a.autotypenumbersDflt),"-"===t("type",(a.splomStash||{}).type)&&(function(n,d){if("-"===n.type){var s,i=n._id,u=i.charAt(0);-1!==i.indexOf("scene")&&(i=u);var f=function(M,k,E){for(var P=0;P<M.length;P++){var S=M[P];if("splom"===S.type&&S._length>0&&(S["_"+E+"axes"]||{})[k]||(S[E+"axis"]||E)===k&&(b(S,E)||(S[E]||[]).length||S[E+"0"]))return S}}(d,i,u);if(f){if("histogram"===f.type&&u==={v:"y",h:"x"}[f.orientation||"v"])return void(n.type="linear");var p=u+"calendar",y=f[p],m={noMultiCategory:!g(f,"cartesian")||g(f,"noMultiCategory")};if("box"===f.type&&f._hasPreCompStats&&u==={h:"x",v:"y"}[f.orientation||"v"]&&(m.noMultiCategory=!0),m.autotypenumbers=n.autotypenumbers,b(f,u)){var l=T(f),w=[];for(s=0;s<d.length;s++){var v=d[s];g(v,"box-violin")&&(v[u+"axis"]||u)===i&&(w.push(void 0!==v[l]?v[l][0]:void 0!==v.name?v.name:"text"),v[p]!==y&&(y=void 0))}n.type=x(w,y,m)}else if("splom"===f.type){var A=f.dimensions[f._axesDim[i]];A.visible&&(n.type=x(A.values,y,m))}else n.type=x(f[u]||[f[u+"0"]],y,m)}}}(r,a.data),"-"===r.type?r.type="linear":e.type=r.type)}},{"../../registry":638,"./axis_autotype":555}],583:[function(_,ae,ie){"use strict";var g=_("../registry"),x=_("../lib");function T(t,a,n){var d,s,i,u=!1;if("data"===a.type)d=t._fullData[null!==a.traces?a.traces[0]:0];else{if("layout"!==a.type)return!1;d=t._fullLayout}return s=x.nestedProperty(d,a.prop).get(),(i=n[a.type]=n[a.type]||{}).hasOwnProperty(a.prop)&&i[a.prop]!==s&&(u=!0),i[a.prop]=s,{changed:u,value:s}}function b(t,a){var n=[],d=a[0],s={};if("string"==typeof d)s[d]=a[1];else{if(!x.isPlainObject(d))return n;s=d}return r(s,function(i,u,f){n.push({type:"layout",prop:i,value:f})},"",0),n}function e(t,a){var n,d,s,i,u=[];if(s=a[1],n=a[2],i={},"string"==typeof(d=a[0]))i[d]=s;else{if(!x.isPlainObject(d))return u;i=d,void 0===n&&(n=s)}return void 0===n&&(n=null),r(i,function(f,p,y){var m,l;if(Array.isArray(y)){l=y.slice();var w=Math.min(l.length,t.data.length);n&&(w=Math.min(w,n.length)),m=[];for(var v=0;v<w;v++)m[v]=n?n[v]:v}else l=y,m=n?n.slice():null;if(null===m)Array.isArray(l)&&(l=l[0]);else if(Array.isArray(m)){if(!Array.isArray(l)){var A=l;l=[];for(var M=0;M<m.length;M++)l[M]=A}l.length=Math.min(m.length,l.length)}u.push({type:"data",prop:f,traces:m,value:l})},"",0),u}function r(t,a,n,d){Object.keys(t).forEach(function(s){var i=t[s];if("_"!==s[0]){var u=n+(d>0?".":"")+s;x.isPlainObject(i)?r(i,a,u,d+1):a(u,s,i)}})}ie.manageCommandObserver=function(t,a,n,d){var s={},i=!0;a&&a._commandObserver&&(s=a._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var u=ie.hasSimpleAPICommandBindings(t,n,s.lookupTable);if(a&&a._commandObserver){if(u)return s;if(a._commandObserver.remove)return a._commandObserver.remove(),a._commandObserver=null,s}if(u){T(t,u,s.cache),s.check=function(){if(i){var y=T(t,u,s.cache);return y.changed&&d&&void 0!==s.lookupTable[y.value]&&(s.disable(),Promise.resolve(d({value:y.value,type:u.type,prop:u.prop,traces:u.traces,index:s.lookupTable[y.value]})).then(s.enable,s.enable)),y.changed}};for(var f=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<f.length;p++)t._internalOn(f[p],s.check);s.remove=function(){for(var y=0;y<f.length;y++)t._removeInternalListener(f[y],s.check)}}else x.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){i=!1},s.enable=function(){i=!0},a&&(a._commandObserver=s),s},ie.hasSimpleAPICommandBindings=function(t,a,n){var d,s,i=a.length;for(d=0;d<i;d++){var u,f=a[d],p=f.method,y=f.args;if(Array.isArray(y)||(y=[]),!p)return!1;var m=ie.computeAPICommandBindings(t,p,y);if(1!==m.length)return!1;if(s){if((u=m[0]).type!==s.type||u.prop!==s.prop)return!1;if(Array.isArray(s.traces)){if(!Array.isArray(u.traces))return!1;u.traces.sort();for(var l=0;l<s.traces.length;l++)if(s.traces[l]!==u.traces[l])return!1}else if(u.prop!==s.prop)return!1}else s=m[0],Array.isArray(s.traces)&&s.traces.sort();var w=(u=m[0]).value;if(Array.isArray(w)){if(1!==w.length)return!1;w=w[0]}n&&(n[w]=d)}return s},ie.executeAPICommand=function(t,a,n){if("skip"===a)return Promise.resolve();var d=g.apiMethodRegistry[a],s=[t];Array.isArray(n)||(n=[]);for(var i=0;i<n.length;i++)s.push(n[i]);return d.apply(null,s).catch(function(u){return x.warn("API call to Plotly."+a+" rejected.",u),Promise.reject(u)})},ie.computeAPICommandBindings=function(t,a,n){var d,i;switch(Array.isArray(n)||(n=[]),a){case"restyle":d=e(t,n);break;case"relayout":d=b(0,n);break;case"update":d=e(t,[n[0],n[2]]).concat(b(0,[n[1]]));break;case"animate":i=n,d=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:d=[]}return d}},{"../lib":503,"../registry":638}],584:[function(_,ae,ie){"use strict";var g=_("../lib/extend").extendFlat;ie.attributes=function(x,T){T=T||{};var b={valType:"info_array",editType:(x=x||{}).editType,items:[{valType:"number",min:0,max:1,editType:x.editType},{valType:"number",min:0,max:1,editType:x.editType}],dflt:[0,1]},e={x:g({},b,{}),y:g({},b,{}),editType:x.editType};return x.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:x.editType},e.column={valType:"integer",min:0,dflt:0,editType:x.editType}),e},ie.defaults=function(x,T,b,e){var r=e&&e.x||[0,1],t=e&&e.y||[0,1],a=T.grid;if(a){var n=b("domain.column");void 0!==n&&(n<a.columns?r=a._domains.x[n]:delete x.domain.column);var d=b("domain.row");void 0!==d&&(d<a.rows?t=a._domains.y[d]:delete x.domain.row)}var s=b("domain.x",r),i=b("domain.y",t);s[0]<s[1]||(x.domain.x=r.slice()),i[0]<i[1]||(x.domain.y=t.slice())}},{"../lib/extend":493}],585:[function(_,ae,ie){"use strict";ae.exports=function(g){var x=g.editType,T=g.colorEditType;void 0===T&&(T=x);var b={family:{valType:"string",noBlank:!0,strict:!0,editType:x},size:{valType:"number",min:1,editType:x},color:{valType:"color",editType:T},editType:x};return g.autoSize&&(b.size.dflt="auto"),g.autoColor&&(b.color.dflt="auto"),g.arrayOk&&(b.family.arrayOk=!0,b.size.arrayOk=!0,b.color.arrayOk=!0),b}},{}],586:[function(_,ae,ie){"use strict";ae.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(_,ae,ie){"use strict";ie.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},ie.axesNames=["lonaxis","lataxis"],ie.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},ie.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},ie.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},ie.clipPad=.001,ie.precision=.1,ie.landColor="#F0DC82",ie.waterColor="#3399FF",ie.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},ie.sphereSVG={type:"Sphere"},ie.fillLayers={ocean:1,land:1,lakes:1},ie.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},ie.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],ie.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],ie.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("d3-geo"),T=x.geoPath,b=x.geoDistance,e=_("d3-geo-projection"),r=_("../../registry"),t=_("../../lib"),a=t.strTranslate,n=_("../../components/color"),d=_("../../components/drawing"),s=_("../../components/fx"),i=_("../plots"),u=_("../cartesian/axes"),f=_("../cartesian/autorange").getAutoRange,p=_("../../components/dragelement"),y=_("../cartesian/select").prepSelect,m=_("../cartesian/select").clearSelect,l=_("../cartesian/select").selectOnClick,w=_("./zoom"),v=_("./constants"),A=_("../../lib/geo_location_utils"),M=_("../../lib/topojson_utils"),k=_("topojson-client").feature;function E(F){this.id=F.id,this.graphDiv=F.graphDiv,this.container=F.container,this.topojsonURL=F.topojsonURL,this.isStatic=F.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var P=E.prototype;function S(F,R){var D=v.clipPad,L=F[0]+D,B=F[1]-D,V=R[0]+D,Z=R[1]-D;L>0&&B<0&&(B+=360);var Y=(B-L)/4;return{type:"Polygon",coordinates:[[[L,V],[L,Z],[L+Y,Z],[L+2*Y,Z],[L+3*Y,Z],[B,Z],[B,V],[B-Y,V],[B-2*Y,V],[B-3*Y,V],[L,V]]]}}ae.exports=function(F){return new E(F)},P.plot=function(F,R,D){var L=this,B=R[this.id],V=[],Z=!1;for(var Y in v.layerNameToAdjective)if("frame"!==Y&&B["show"+Y]){Z=!0;break}for(var ee=0;ee<F.length;ee++)if(F[0][0].trace.locationmode){Z=!0;break}if(Z){var Q=M.getTopojsonName(B);null!==L.topojson&&Q===L.topojsonName||(L.topojsonName=Q,void 0===PlotlyGeoAssets.topojson[L.topojsonName]&&V.push(L.fetchTopojson()))}V=V.concat(A.fetchTraceGeoData(F)),D.push(new Promise(function($,K){Promise.all(V).then(function(){L.topojson=PlotlyGeoAssets.topojson[L.topojsonName],L.update(F,R),$()}).catch(K)}))},P.fetchTopojson=function(){var F=this,R=M.getTopojsonPath(F.topojsonURL,F.topojsonName);return new Promise(function(D,L){g.json(R,function(B,V){if(B)return L(404===B.status?new Error(["plotly.js could not find topojson file at",R,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",R].join(" ")));PlotlyGeoAssets.topojson[F.topojsonName]=V,D()})})},P.update=function(F,R){var D=R[this.id];this.hasChoropleth=!1;for(var L=0;L<F.length;L++){var B=F[L],V=B[0].trace;"choropleth"===V.type&&(this.hasChoropleth=!0),!0===V.visible&&V._length>0&&V._module.calcGeoJSON(B,R)}if(!this.updateProjection(F,R)){this.viewInitial&&this.scope===D.scope||this.saveViewInitial(D),this.scope=D.scope,this.updateBaseLayers(R,D),this.updateDims(R,D),this.updateFx(R,D),i.generalUpdatePerTraceModule(this.graphDiv,this,F,D);var Z=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Z.selectAll(".point"),this.dataPoints.text=Z.selectAll("text"),this.dataPaths.line=Z.selectAll(".js-line");var Y=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Y.selectAll("path"),this.render()}},P.updateProjection=function(F,R){var D=this.graphDiv,L=R[this.id],B=R._size,V=L.domain,Z=L.projection,Y=L.lonaxis,ee=L.lataxis,Q=Y._ax,$=ee._ax,K=this.projection=function(ve){var Te=ve.projection,Ie=Te.type,Ce=v.projNames[Ie];Ce="geo"+t.titleCase(Ce);for(var Pe=(x[Ce]||e[Ce])(),Ve=ve._isSatellite?180*Math.acos(1/Te.distance)/Math.PI:ve._isClipped?v.lonaxisSpan[Ie]/2:null,qe=["center","rotate","parallels","clipExtent"],Je=function($e){return $e?Pe:[]},lt=0;lt<qe.length;lt++){var He=qe[lt];"function"!=typeof Pe[He]&&(Pe[He]=Je)}return Pe.isLonLatOverEdges=function($e){if(null===Pe($e))return!0;if(Ve){var et=Pe.rotate();return b($e,[-et[0],-et[1]])>Ve*Math.PI/180}return!1},Pe.getPath=function(){return T().projection(Pe)},Pe.getBounds=function($e){return Pe.getPath().bounds($e)},Pe.precision(v.precision),ve._isSatellite&&Pe.tilt(Te.tilt).distance(Te.distance),Ve&&Pe.clipAngle(Ve-v.clipPad),Pe}(L),oe=[[B.l+B.w*V.x[0],B.t+B.h*(1-V.y[1])],[B.l+B.w*V.x[1],B.t+B.h*(1-V.y[0])]],j=L.center||{},H=Z.rotation||{},G=Y.range||[],re=ee.range||[];if(L.fitbounds){Q._length=oe[1][0]-oe[0][0],$._length=oe[1][1]-oe[0][1],Q.range=f(D,Q),$.range=f(D,$);var q=(Q.range[0]+Q.range[1])/2,te=($.range[0]+$.range[1])/2;if(L._isScoped)j={lon:q,lat:te};else if(L._isClipped){j={lon:q,lat:te},H={lon:q,lat:te,roll:H.roll};var ne=Z.type,le=v.lonaxisSpan[ne]/2||180,ue=v.lataxisSpan[ne]/2||90;G=[q-le,q+le],re=[te-ue,te+ue]}else j={lon:q,lat:te},H={lon:q,lat:H.lat,roll:H.roll}}K.center([j.lon-H.lon,j.lat-H.lat]).rotate([-H.lon,-H.lat,H.roll]).parallels(Z.parallels);var de=S(G,re);K.fitExtent(oe,de);var he=this.bounds=K.getBounds(de),be=this.fitScale=K.scale(),ge=K.translate();if(L.fitbounds){var we=K.getBounds(S(Q.range,$.range)),ke=Math.min((he[1][0]-he[0][0])/(we[1][0]-we[0][0]),(he[1][1]-he[0][1])/(we[1][1]-we[0][1]));isFinite(ke)?K.scale(ke*be):t.warn("Something went wrong during"+this.id+"fitbounds computations.")}else K.scale(Z.scale*be);var De=this.midPt=[(he[0][0]+he[1][0])/2,(he[0][1]+he[1][1])/2];if(K.translate([ge[0]+(De[0]-ge[0]),ge[1]+(De[1]-ge[1])]).clipExtent(he),L._isAlbersUsa){var Ee=K([j.lon,j.lat]),Re=K.translate();K.translate([Re[0]-(Ee[0]-Re[0]),Re[1]-(Ee[1]-Re[1])])}},P.updateBaseLayers=function(F,R){var D=this,L=D.topojson,B=D.layers,V=D.basePaths;function Z(K){return"lonaxis"===K||"lataxis"===K}function Y(K){return Boolean(v.lineLayers[K])}function ee(K){return Boolean(v.fillLayers[K])}var Q=(this.hasChoropleth?v.layersForChoropleth:v.layers).filter(function(K){return Y(K)||ee(K)?R["show"+K]:!Z(K)||R[K].showgrid}),$=D.framework.selectAll(".layer").data(Q,String);$.exit().each(function(K){delete B[K],delete V[K],g.select(this).remove()}),$.enter().append("g").attr("class",function(K){return"layer "+K}).each(function(K){var oe=B[K]=g.select(this);"bg"===K?D.bgRect=oe.append("rect").style("pointer-events","all"):Z(K)?V[K]=oe.append("path").style("fill","none"):"backplot"===K?oe.append("g").classed("choroplethlayer",!0):"frontplot"===K?oe.append("g").classed("scatterlayer",!0):Y(K)?V[K]=oe.append("path").style("fill","none").style("stroke-miterlimit",2):ee(K)&&(V[K]=oe.append("path").style("stroke","none"))}),$.order(),$.each(function(K){var oe=V[K],j=v.layerNameToAdjective[K];"frame"===K?oe.datum(v.sphereSVG):Y(K)||ee(K)?oe.datum(k(L,L.objects[K])):Z(K)&&oe.datum(function(H,G,re){var q,te,ne,le=G[H],ue=v.scopeDefaults[G.scope];"lonaxis"===H?(q=ue.lonaxisRange,te=ue.lataxisRange,ne=function(Re,ve){return[Re,ve]}):"lataxis"===H&&(q=ue.lataxisRange,te=ue.lonaxisRange,ne=function(Re,ve){return[ve,Re]});var de={type:"linear",range:[q[0],q[1]-1e-6],tick0:le.tick0,dtick:le.dtick};u.setConvert(de,re);var he=u.calcTicks(de);G.isScoped||"lonaxis"!==H||he.pop();for(var be=he.length,ge=new Array(be),we=0;we<be;we++)for(var ke=he[we].x,De=ge[we]=[],Ee=te[0];Ee<te[1]+2.5;Ee+=2.5)De.push(ne(ke,Ee));return{type:"MultiLineString",coordinates:ge}}(K,R,F)).call(n.stroke,R[K].gridcolor).call(d.dashLine,"",R[K].gridwidth),Y(K)?oe.call(n.stroke,R[j+"color"]).call(d.dashLine,"",R[j+"width"]):ee(K)&&oe.call(n.fill,R[j+"color"])})},P.updateDims=function(F,R){var D=this.bounds,L=(R.framewidth||0)/2,B=D[0][0]-L,V=D[0][1]-L,Z=D[1][0]-B+L,Y=D[1][1]-V+L;d.setRect(this.clipRect,B,V,Z,Y),this.bgRect.call(d.setRect,B,V,Z,Y).call(n.fill,R.bgcolor),this.xaxis._offset=B,this.xaxis._length=Z,this.yaxis._offset=V,this.yaxis._length=Y},P.updateFx=function(F,R){var D=this,L=D.graphDiv,B=D.bgRect,V=F.dragmode,Z=F.clickmode;if(!D.isStatic){var Y;"select"===V?Y=function($,K){($.range={})[D.id]=[Q([K.xmin,K.ymin]),Q([K.xmax,K.ymax])]}:"lasso"===V&&(Y=function($,K,oe){($.lassoPoints={})[D.id]=oe.filtered.map(Q)});var ee={element:D.bgRect.node(),gd:L,plotinfo:{id:D.id,xaxis:D.xaxis,yaxis:D.yaxis,fillRangeItems:Y},xaxes:[D.xaxis],yaxes:[D.yaxis],subplot:D.id,clickFn:function($){2===$&&m(L)}};"pan"===V?(B.node().onmousedown=null,B.call(w(D,R)),B.on("dblclick.zoom",function(){var $=D.viewInitial,K={};for(var oe in $)K[D.id+"."+oe]=$[oe];r.call("_guiRelayout",L,K),L.emit("plotly_doubleclick",null)}),L._context._scrollZoom.geo||B.on("wheel.zoom",null)):"select"!==V&&"lasso"!==V||(B.on(".zoom",null),ee.prepFn=function($,K,oe){y($,K,oe,ee,V)},p.init(ee)),B.on("mousemove",function(){var $=D.projection.invert(t.getPositionFromD3Event());if(!$)return p.unhover(L,g.event);D.xaxis.p2c=function(){return $[0]},D.yaxis.p2c=function(){return $[1]},s.hover(L,g.event,D.id)}),B.on("mouseout",function(){L._dragging||p.unhover(L,g.event)}),B.on("click",function(){"select"!==V&&"lasso"!==V&&(Z.indexOf("select")>-1&&l(g.event,L,[D.xaxis],[D.yaxis],D.id,ee),Z.indexOf("event")>-1&&s.click(L,g.event))})}function Q($){return D.projection.invert([$[0]+D.xaxis._offset,$[1]+D.yaxis._offset])}},P.makeFramework=function(){var F=this,R=F.graphDiv,D=R._fullLayout,L="clip"+D._uid+F.id;F.clipDef=D._clips.append("clipPath").attr("id",L),F.clipRect=F.clipDef.append("rect"),F.framework=g.select(F.container).append("g").attr("class","geo "+F.id).call(d.setClipUrl,L,R),F.project=function(B){var V=F.projection(B);return V?[V[0]-F.xaxis._offset,V[1]-F.yaxis._offset]:[null,null]},F.xaxis={_id:"x",c2p:function(B){return F.project(B)[0]}},F.yaxis={_id:"y",c2p:function(B){return F.project(B)[1]}},F.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(F.mockAxis,D)},P.saveViewInitial=function(F){var D=F.center||{},L=F.projection,B=L.rotation||{};this.viewInitial={fitbounds:F.fitbounds,"projection.scale":L.scale},t.extendFlat(this.viewInitial,F._isScoped?{"center.lon":D.lon,"center.lat":D.lat}:F._isClipped?{"projection.rotation.lon":B.lon,"projection.rotation.lat":B.lat}:{"center.lon":D.lon,"center.lat":D.lat,"projection.rotation.lon":B.lon})},P.render=function(){var F,R=this.projection,D=R.getPath();function L(V){var Z=R(V.lonlat);return Z?a(Z[0],Z[1]):null}function B(V){return R.isLonLatOverEdges(V.lonlat)?"none":null}for(F in this.basePaths)this.basePaths[F].attr("d",D);for(F in this.dataPaths)this.dataPaths[F].attr("d",function(V){return D(V.geojson)});for(F in this.dataPoints)this.dataPoints[F].attr("display",B).attr("transform",L)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(_,ae,ie){"use strict";var g=_("../../plots/get_data").getSubplotCalcData,x=_("../../lib").counterRegex,T=_("./geo"),b="geo",e=x(b),r={};r.geo={valType:"subplotid",dflt:b,editType:"calc"},ae.exports={attr:b,name:b,idRoot:b,idRegex:e,attrRegex:e,attributes:r,layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),plot:function(t){for(var a=t._fullLayout,n=t.calcdata,d=a._subplots.geo,s=0;s<d.length;s++){var i=d[s],u=g(n,b,i),f=a[i]._subplot;f||(f=T({id:i,graphDiv:t,container:a._geolayer.node(),topojsonURL:t._context.topojsonURL,staticPlot:t._context.staticPlot}),a[i]._subplot=f),f.plot(u,a,t._promises)}},updateFx:function(t){for(var a=t._fullLayout,n=a._subplots.geo,d=0;d<n.length;d++){var s=a[n[d]];s._subplot.updateFx(a,s)}},clean:function(t,a,n,d){for(var s=d._subplots.geo||[],i=0;i<s.length;i++){var u=s[i],f=d[u]._subplot;!a[u]&&f&&(f.framework.remove(),f.clipDef.remove())}}}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(_,ae,ie){"use strict";var g=_("../../components/color/attributes"),x=_("../domain").attributes,T=_("./constants"),b=_("../../plot_api/edit_types").overrideAll,e=_("../../lib/sort_object_keys"),r={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:g.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(ae.exports=b({domain:x({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:e(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:e(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:g.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:g.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:g.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:g.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:g.background},lonaxis:r,lataxis:r},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../subplot_defaults"),T=_("../get_data").getSubplotData,b=_("./constants"),e=_("./layout_attributes"),r=b.axesNames;function t(a,n,d,s){var i=T(s.fullData,"geo",s.id).map(function(H){return H._expandedIndex}),u=d("resolution"),f=d("scope"),p=b.scopeDefaults[f],y=d("projection.type",p.projType),m=n._isAlbersUsa="albers usa"===y;m&&(f=n.scope="usa");var l=n._isScoped="world"!==f,w=n._isSatellite="satellite"===y,v=n._isConic=-1!==y.indexOf("conic")||"albers"===y,A=n._isClipped=!!b.lonaxisSpan[y];if(!1===a.visible){var M=g.extendDeep({},n._template);M.showcoastlines=!1,M.showcountries=!1,M.showframe=!1,M.showlakes=!1,M.showland=!1,M.showocean=!1,M.showrivers=!1,M.showsubunits=!1,M.lonaxis&&(M.lonaxis.showgrid=!1),M.lataxis&&(M.lataxis.showgrid=!1),n._template=M}for(var k=d("visible"),E=0;E<r.length;E++){var P,S=r[E],F=[30,10][E];if(l)P=p[S+"Range"];else{var R=b[S+"Span"],D=(R[y]||R["*"])/2,L=d("projection.rotation."+S.substr(0,3),p.projRotate[E]);P=[L-D,L+D]}var B=d(S+".range",P);d(S+".tick0"),d(S+".dtick",F),d(S+".showgrid",!!k&&void 0)&&(d(S+".gridcolor"),d(S+".gridwidth")),n[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:i,setScale:g.identity,c2l:g.identity,r2l:g.identity,autorange:!0,range:B.slice(),_m:1,_input:{}}}var V=n.lonaxis.range,Z=n.lataxis.range,Y=V[0],ee=V[1];Y>0&&ee<0&&(ee+=360);var Q,$,K,oe=(Y+ee)/2;if(!m){var j=l?p.projRotate:[oe,0,0];Q=d("projection.rotation.lon",j[0]),d("projection.rotation.lat",j[1]),d("projection.rotation.roll",j[2]),d("showcoastlines",!l&&k)&&(d("coastlinecolor"),d("coastlinewidth")),d("showocean",!!k&&void 0)&&d("oceancolor")}m?($=-96.6,K=38.7):($=l?oe:Q,K=(Z[0]+Z[1])/2),d("center.lon",$),d("center.lat",K),w&&(d("projection.tilt"),d("projection.distance")),v&&d("projection.parallels",p.projParallels||[0,60]),d("projection.scale"),d("showland",!!k&&void 0)&&d("landcolor"),d("showlakes",!!k&&void 0)&&d("lakecolor"),d("showrivers",!!k&&void 0)&&(d("rivercolor"),d("riverwidth")),d("showcountries",l&&"usa"!==f&&k)&&(d("countrycolor"),d("countrywidth")),("usa"===f||"north america"===f&&50===u)&&(d("showsubunits",k),d("subunitcolor"),d("subunitwidth")),l||d("showframe",k)&&(d("framecolor"),d("framewidth")),d("bgcolor"),d("fitbounds")&&(delete n.projection.scale,l?(delete n.center.lon,delete n.center.lat):A?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}ae.exports=function(a,n,d){x(a,n,d,{type:"geo",attributes:e,handleDefaults:t,fullData:d,partition:"y"})}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../registry"),b=Math.PI/180,e=180/Math.PI,r={cursor:"pointer"},t={cursor:"auto"};function a(k,E){return g.behavior.zoom().translate(E.translate()).scale(E.scale())}function n(k,E,P){var S=k.id,F=k.graphDiv,R=F.layout,D=R[S],L=F._fullLayout,B=L[S],V={},Z={};function Y(ee,Q){V[S+"."+ee]=x.nestedProperty(D,ee).get(),T.call("_storeDirectGUIEdit",R,L._preGUI,V);var $=x.nestedProperty(B,ee);$.get()!==Q&&($.set(Q),x.nestedProperty(D,ee).set(Q),Z[S+"."+ee]=Q)}P(Y),Y("projection.scale",E.scale()/k.fitScale),Y("fitbounds",!1),F.emit("plotly_relayout",Z)}function d(k,E){var P=a(0,E);function S(F){var R=E.invert(k.midPt);F("center.lon",R[0]),F("center.lat",R[1])}return P.on("zoomstart",function(){g.select(this).style(r)}).on("zoom",function(){E.scale(g.event.scale).translate(g.event.translate),k.render();var F=E.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/k.fitScale,"geo.center.lon":F[0],"geo.center.lat":F[1]})}).on("zoomend",function(){g.select(this).style(t),n(k,E,S)}),P}function s(k,E){var P,S,F,R,D,L,B,V,Z,Y=a(0,E);function ee($){return E.invert($)}function Q($){var K=E.rotate(),oe=E.invert(k.midPt);$("projection.rotation.lon",-K[0]),$("center.lon",oe[0]),$("center.lat",oe[1])}return Y.on("zoomstart",function(){g.select(this).style(r),P=g.mouse(this),S=E.rotate(),F=E.translate(),R=S,D=ee(P)}).on("zoom",function(){if(L=g.mouse(this),function(oe){var j=ee(oe);if(!j)return!0;var H=E(j);return Math.abs(H[0]-oe[0])>2||Math.abs(H[1]-oe[1])>2}(P))return Y.scale(E.scale()),void Y.translate(E.translate());E.scale(g.event.scale),E.translate([F[0],g.event.translate[1]]),D?ee(L)&&(V=ee(L),E.rotate(B=[R[0]+(V[0]-D[0]),S[1],S[2]]),R=B):D=ee(P=L),Z=!0,k.render();var $=E.rotate(),K=E.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/k.fitScale,"geo.center.lon":K[0],"geo.center.lat":K[1],"geo.projection.rotation.lon":-$[0]})}).on("zoomend",function(){g.select(this).style(t),Z&&n(k,E,Q)}),Y}function i(k,E){var P,S={r:E.rotate(),k:E.scale()},F=a(0,E),R=function(ee){for(var Q=0,$=arguments.length,K=[];++Q<$;)K.push(arguments[Q]);var oe=g.dispatch.apply(null,K);return oe.of=function(j,H){return function(G){var re;try{re=G.sourceEvent=g.event,G.target=ee,g.event=G,oe[G.type].apply(j,H)}finally{g.event=re}}},oe}(F,"zoomstart","zoom","zoomend"),D=0,L=F.on;function B(ee){D++||ee({type:"zoomstart"})}function V(ee){ee({type:"zoom"})}function Z(ee){--D||ee({type:"zoomend"})}function Y(ee){var Q=E.rotate();ee("projection.rotation.lon",-Q[0]),ee("projection.rotation.lat",-Q[1])}return F.on("zoomstart",function(){g.select(this).style(r);var ee=g.mouse(this),Q=E.rotate(),$=Q,K=E.translate(),oe=f(Q);P=u(E,ee),L.call(F,"zoom",function(){var j=g.mouse(this);if(E.scale(S.k=g.event.scale),P){if(u(E,j)){E.rotate(Q).translate(K);var H=u(E,j),G=y(P,H),re=A(p(oe,G)),q=S.r=m(re,P,$);isFinite(q[0])&&isFinite(q[1])&&isFinite(q[2])||(q=$),E.rotate(q),$=q}}else P=u(E,ee=j);V(R.of(this,arguments))}),B(R.of(this,arguments))}).on("zoomend",function(){g.select(this).style(t),L.call(F,"zoom",null),Z(R.of(this,arguments)),n(k,E,Y)}).on("zoom.redraw",function(){k.render();var ee=E.rotate();k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/k.fitScale,"geo.projection.rotation.lon":-ee[0],"geo.projection.rotation.lat":-ee[1]})}),g.rebind(F,R,"on")}function u(k,E){var S,F,R,D,P=k.invert(E);return P&&isFinite(P[0])&&isFinite(P[1])&&(F=(S=P)[0]*b,R=S[1]*b,[(D=Math.cos(R))*Math.cos(F),D*Math.sin(F),Math.sin(R)])}function f(k){var E=.5*k[0]*b,P=.5*k[1]*b,S=.5*k[2]*b,F=Math.sin(E),R=Math.cos(E),D=Math.sin(P),L=Math.cos(P),B=Math.sin(S),V=Math.cos(S);return[R*L*V+F*D*B,F*L*V-R*D*B,R*D*V+F*L*B,R*L*B-F*D*V]}function p(k,E){var P=k[0],S=k[1],F=k[2],R=k[3],D=E[0],L=E[1],B=E[2],V=E[3];return[P*D-S*L-F*B-R*V,P*L+S*D+F*V-R*B,P*B-S*V+F*D+R*L,P*V+S*B-F*L+R*D]}function y(k,E){if(k&&E){var P=[(D=k)[1]*(L=E)[2]-D[2]*L[1],D[2]*L[0]-D[0]*L[2],D[0]*L[1]-D[1]*L[0]],S=Math.sqrt(M(P,P)),F=.5*Math.acos(Math.max(-1,Math.min(1,M(k,E)))),R=Math.sin(F)/S;return S&&[Math.cos(F),P[2]*R,-P[1]*R,P[0]*R]}var D,L}function m(k,E,P){var S=v(E,2,k[0]);S=v(S,1,k[1]),S=v(S,0,k[2]-P[2]);var F,R,D=E[0],L=E[1],B=E[2],V=S[0],Z=S[1],Y=S[2],ee=Math.atan2(L,D)*e,Q=Math.sqrt(D*D+L*L);Math.abs(Z)>Q?(R=(Z>0?90:-90)-ee,F=0):(R=Math.asin(Z/Q)*e-ee,F=Math.sqrt(Q*Q-Z*Z));var $=180-R-2*ee,K=(Math.atan2(Y,V)-Math.atan2(B,F))*e,oe=(Math.atan2(Y,V)-Math.atan2(B,-F))*e;return l(P[0],P[1],R,K)<=l(P[0],P[1],$,oe)?[R,K,P[2]]:[$,oe,P[2]]}function l(k,E,P,S){var F=w(P-k),R=w(S-E);return Math.sqrt(F*F+R*R)}function w(k){return(k%360+540)%360-180}function v(k,E,P){var S=P*b,F=k.slice(),R=0===E?1:0,D=2===E?1:2,L=Math.cos(S),B=Math.sin(S);return F[R]=k[R]*L-k[D]*B,F[D]=k[D]*L+k[R]*B,F}function A(k){return[Math.atan2(2*(k[0]*k[1]+k[2]*k[3]),1-2*(k[1]*k[1]+k[2]*k[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(k[0]*k[2]-k[3]*k[1]))))*e,Math.atan2(2*(k[0]*k[3]+k[1]*k[2]),1-2*(k[2]*k[2]+k[3]*k[3]))*e]}function M(k,E){for(var P=0,S=0,F=k.length;S<F;++S)P+=k[S]*E[S];return P}ae.exports=function(k,E){return(E._isScoped?d:E._isClipped?i:s)(k,k.projection)}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(_,ae,ie){"use strict";var g=_("../registry"),x=_("./cartesian/constants").SUBPLOT_PATTERN;ie.getSubplotCalcData=function(T,b,e){var r=g.subplotsRegistry[b];if(!r)return[];for(var t=r.attr,a=[],n=0;n<T.length;n++){var d=T[n];d[0].trace[t]===e&&a.push(d)}return a},ie.getModuleCalcData=function(T,b){var e,r=[],t=[];if(!(e="string"==typeof b?g.getModule(b).plot:"function"==typeof b?b:b.plot))return[r,T];for(var a=0;a<T.length;a++){var n=T[a],d=n[0].trace;!0===d.visible&&0!==d._length&&(d._module.plot===e?r.push(n):t.push(n))}return[r,t]},ie.getSubplotData=function(T,b,e){if(!g.subplotsRegistry[b])return[];var r,t,a,n=g.subplotsRegistry[b].attr,d=[];if("gl2d"===b){var s=e.match(x);t="x"+s[1],a="y"+s[2]}for(var i=0;i<T.length;i++)r=T[i],"gl2d"===b&&g.traceIs(r,"gl2d")?r[n[0]]===t&&r[n[1]]===a&&d.push(r):r[n]===e&&d.push(r);return d}},{"../registry":638,"./cartesian/constants":561}],594:[function(_,ae,ie){"use strict";var g=_("mouse-change"),x=_("mouse-wheel"),T=_("mouse-event-offset"),b=_("../cartesian/constants"),e=_("has-passive-events");function r(t,a){this.element=t,this.plot=a,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}ae.exports=function(t){var a=t.mouseContainer,n=t.glplot,d=new r(a,n);function s(){t.xaxis.autorange=!1,t.yaxis.autorange=!1}function i(u,f,p){var y,m,l=t.calcDataBox(),w=n.viewBox,v=d.lastPos[0],A=d.lastPos[1],M=b.MINDRAG*n.pixelRatio,k=b.MINZOOM*n.pixelRatio;function E(L,B,V){var Z=Math.min(B,V),Y=Math.max(B,V);Z!==Y?(l[L]=Z,l[L+2]=Y,d.dataBox=l,t.setRanges(l)):(t.selectBox.selectBox=[0,0,1,1],t.glplot.setDirty())}switch(f*=n.pixelRatio,p=w[3]-w[1]-(p*=n.pixelRatio),t.fullLayout.dragmode){case"zoom":if(u){var P=f/(w[2]-w[0])*(l[2]-l[0])+l[0],S=p/(w[3]-w[1])*(l[3]-l[1])+l[1];d.boxInited||(d.boxStart[0]=P,d.boxStart[1]=S,d.dragStart[0]=f,d.dragStart[1]=p),d.boxEnd[0]=P,d.boxEnd[1]=S,d.boxInited=!0,d.boxEnabled||d.boxStart[0]===d.boxEnd[0]&&d.boxStart[1]===d.boxEnd[1]||(d.boxEnabled=!0);var F=Math.abs(d.dragStart[0]-f)<k,R=Math.abs(d.dragStart[1]-p)<k;if(!function(){for(var L=t.graphDiv._fullLayout._axisConstraintGroups,B=t.xaxis._id,V=t.yaxis._id,Z=0;Z<L.length;Z++)if(-1!==L[Z][B]){if(-1!==L[Z][V])return!0;break}return!1}()||F&&R)F&&(d.boxEnd[0]=d.boxStart[0]),R&&(d.boxEnd[1]=d.boxStart[1]);else{y=d.boxEnd[0]-d.boxStart[0],m=d.boxEnd[1]-d.boxStart[1];var D=(l[3]-l[1])/(l[2]-l[0]);Math.abs(y*D)>Math.abs(m)?(d.boxEnd[1]=d.boxStart[1]+Math.abs(y)*D*(m>=0?1:-1),d.boxEnd[1]<l[1]?(d.boxEnd[1]=l[1],d.boxEnd[0]=d.boxStart[0]+(l[1]-d.boxStart[1])/Math.abs(D)):d.boxEnd[1]>l[3]&&(d.boxEnd[1]=l[3],d.boxEnd[0]=d.boxStart[0]+(l[3]-d.boxStart[1])/Math.abs(D))):(d.boxEnd[0]=d.boxStart[0]+Math.abs(m)/D*(y>=0?1:-1),d.boxEnd[0]<l[0]?(d.boxEnd[0]=l[0],d.boxEnd[1]=d.boxStart[1]+(l[0]-d.boxStart[0])*Math.abs(D)):d.boxEnd[0]>l[2]&&(d.boxEnd[0]=l[2],d.boxEnd[1]=d.boxStart[1]+(l[2]-d.boxStart[0])*Math.abs(D)))}}else d.boxEnabled?(m=d.boxStart[1]!==d.boxEnd[1],(y=d.boxStart[0]!==d.boxEnd[0])||m?(y&&(E(0,d.boxStart[0],d.boxEnd[0]),t.xaxis.autorange=!1),m&&(E(1,d.boxStart[1],d.boxEnd[1]),t.yaxis.autorange=!1),t.relayoutCallback()):t.glplot.setDirty(),d.boxEnabled=!1,d.boxInited=!1):d.boxInited&&(d.boxInited=!1);break;case"pan":d.boxEnabled=!1,d.boxInited=!1,u?(d.panning||(d.dragStart[0]=f,d.dragStart[1]=p),Math.abs(d.dragStart[0]-f)<M&&(f=d.dragStart[0]),Math.abs(d.dragStart[1]-p)<M&&(p=d.dragStart[1]),m=(A-p)*(l[3]-l[1])/(n.viewBox[3]-n.viewBox[1]),l[0]+=y=(v-f)*(l[2]-l[0])/(n.viewBox[2]-n.viewBox[0]),l[2]+=y,l[1]+=m,l[3]+=m,t.setRanges(l),d.panning=!0,d.lastInputTime=Date.now(),s(),t.cameraChanged(),t.handleAnnotations()):d.panning&&(d.panning=!1,t.relayoutCallback())}d.lastPos[0]=f,d.lastPos[1]=p}return d.mouseListener=g(a,i),a.addEventListener("touchstart",function(u){var f=T(u.changedTouches[0],a);i(0,f[0],f[1]),i(1,f[0],f[1]),u.preventDefault()},!!e&&{passive:!1}),a.addEventListener("touchmove",function(u){u.preventDefault();var f=T(u.changedTouches[0],a);i(1,f[0],f[1]),u.preventDefault()},!!e&&{passive:!1}),a.addEventListener("touchend",function(u){i(0,d.lastPos[0],d.lastPos[1]),u.preventDefault()},!!e&&{passive:!1}),d.wheelListener=x(a,function(u,f){if(!t.scrollZoom)return!1;var p=t.calcDataBox(),y=n.viewBox,m=d.lastPos[0],l=d.lastPos[1],w=Math.exp(5*f/(y[3]-y[1])),v=m/(y[2]-y[0])*(p[2]-p[0])+p[0],A=l/(y[3]-y[1])*(p[3]-p[1])+p[1];return p[0]=(p[0]-v)*w+v,p[2]=(p[2]-v)*w+v,p[1]=(p[1]-A)*w+A,p[3]=(p[3]-A)*w+A,t.setRanges(p),d.lastInputTime=Date.now(),s(),t.cameraChanged(),t.handleAnnotations(),t.relayoutCallback(),!0},!0),d}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(_,ae,ie){"use strict";var g=_("../cartesian/axes"),x=_("../../lib/str2rgbarray");function T(r){this.scene=r,this.gl=r.gl,this.pixelRatio=r.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var b=T.prototype,e=["xaxis","yaxis"];b.merge=function(r){var t,a,n,d,s,i,u,f,p,y,m;for(this.titleEnable=!1,this.backgroundColor=x(r.plot_bgcolor),y=0;y<2;++y){var l=(t=e[y]).charAt(0);for(n=(a=r[this.scene[t]._name]).title.text===this.scene.fullLayout._dfltTitle[l]?"":a.title.text,m=0;m<=2;m+=2)this.labelEnable[y+m]=!1,this.labels[y+m]=n,this.labelColor[y+m]=x(a.title.font.color),this.labelFont[y+m]=a.title.font.family,this.labelSize[y+m]=a.title.font.size,this.labelPad[y+m]=this.getLabelPad(t,a),this.tickEnable[y+m]=!1,this.tickColor[y+m]=x((a.tickfont||{}).color),this.tickAngle[y+m]="auto"===a.tickangle?0:Math.PI*-a.tickangle/180,this.tickPad[y+m]=this.getTickPad(a),this.tickMarkLength[y+m]=0,this.tickMarkWidth[y+m]=a.tickwidth||0,this.tickMarkColor[y+m]=x(a.tickcolor),this.borderLineEnable[y+m]=!1,this.borderLineColor[y+m]=x(a.linecolor),this.borderLineWidth[y+m]=a.linewidth||0;u=this.hasSharedAxis(a),s=this.hasAxisInDfltPos(t,a)&&!u,i=this.hasAxisInAltrPos(t,a)&&!u,d=a.mirror||!1,f=u?-1!==String(d).indexOf("all"):!!d,p=u?"allticks"===d:-1!==String(d).indexOf("ticks"),s?this.labelEnable[y]=!0:i&&(this.labelEnable[y+2]=!0),s?this.tickEnable[y]=a.showticklabels:i&&(this.tickEnable[y+2]=a.showticklabels),(s||f)&&(this.borderLineEnable[y]=a.showline),(i||f)&&(this.borderLineEnable[y+2]=a.showline),(s||p)&&(this.tickMarkLength[y]=this.getTickMarkLength(a)),(i||p)&&(this.tickMarkLength[y+2]=this.getTickMarkLength(a)),this.gridLineEnable[y]=a.showgrid,this.gridLineColor[y]=x(a.gridcolor),this.gridLineWidth[y]=a.gridwidth,this.zeroLineEnable[y]=a.zeroline,this.zeroLineColor[y]=x(a.zerolinecolor),this.zeroLineWidth[y]=a.zerolinewidth}},b.hasSharedAxis=function(r){var t=this.scene;return 0!==g.findSubplotsWithAxis(t.fullLayout._subplots.gl2d,r).indexOf(t.id)},b.hasAxisInDfltPos=function(r,t){var a=t.side;return"xaxis"===r?"bottom"===a:"yaxis"===r?"left"===a:void 0},b.hasAxisInAltrPos=function(r,t){var a=t.side;return"xaxis"===r?"top"===a:"yaxis"===r?"right"===a:void 0},b.getLabelPad=function(r,t){var a=t.title.font.size,n=t.showticklabels;return"xaxis"===r?"top"===t.side?a*(1.5+(n?1:0))-10:a*(1.5+(n?.5:0))-10:"yaxis"===r?"right"===t.side?10+a*(1.5+(n?1:.5)):10+a*(1.5+(n?.5:0)):void 0},b.getTickPad=function(r){return"outside"===r.ticks?10+r.ticklen:15},b.getTickMarkLength=function(r){if(!r.ticks)return 0;var t=r.ticklen;return"inside"===r.ticks?-t:t},ae.exports=function(r){return new T(r)}},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(_,ae,ie){"use strict";var g=_("../../plot_api/edit_types").overrideAll,x=_("./scene2d"),T=_("../layout_attributes"),b=_("../../constants/xmlns_namespaces"),e=_("../cartesian/constants"),r=_("../cartesian"),t=_("../../components/fx/layout_attributes"),a=_("../get_data").getSubplotData;ie.name="gl2d",ie.attr=["xaxis","yaxis"],ie.idRoot=["x","y"],ie.idRegex=e.idRegex,ie.attrRegex=e.attrRegex,ie.attributes=_("../cartesian/attributes"),ie.supplyLayoutDefaults=function(n,d,s){d._has("cartesian")||r.supplyLayoutDefaults(n,d,s)},ie.layoutAttrOverrides=g(r.layoutAttributes,"plot","from-root"),ie.baseLayoutAttrOverrides=g({plot_bgcolor:T.plot_bgcolor,hoverlabel:t.hoverlabel},"plot","nested"),ie.plot=function(n){for(var d=n._fullLayout,s=n._fullData,i=d._subplots.gl2d,u=0;u<i.length;u++){var f=i[u],p=d._plots[f],y=a(s,"gl2d",f),m=p._scene2d;void 0===m&&(m=new x({id:f,graphDiv:n,container:n.querySelector(".gl-container"),staticPlot:n._context.staticPlot,plotGlPixelRatio:n._context.plotGlPixelRatio},d),p._scene2d=m),m.plot(y,n.calcdata,d,n.layout)}},ie.clean=function(n,d,s,i){for(var u=i._subplots.gl2d||[],f=0;f<u.length;f++){var p=u[f],y=i._plots[p];y._scene2d&&0===a(n,"gl2d",p).length&&(y._scene2d.destroy(),delete i._plots[p])}r.clean.apply(this,arguments)},ie.drawFramework=function(n){n._context.staticPlot||r.drawFramework(n)},ie.toSVG=function(n){for(var d=n._fullLayout,s=d._subplots.gl2d,i=0;i<s.length;i++){var u=d._plots[s[i]]._scene2d,f=u.toImage("png");d._glimages.append("svg:image").attr({xmlns:b.svg,"xlink:href":f,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),u.destroy()}},ie.updateFx=function(n){for(var d=n._fullLayout,s=d._subplots.gl2d,i=0;i<s.length;i++)d._plots[s[i]]._scene2d.updateFx(d.dragmode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(_,ae,ie){"use strict";var g,x,T=_("../../registry"),b=_("../../plots/cartesian/axes"),e=_("../../components/fx"),r=_("../../../stackgl_modules").gl_plot2d,t=_("../../../stackgl_modules").gl_spikes2d,a=_("../../../stackgl_modules").gl_select_box,n=_("webgl-context"),d=_("./convert"),s=_("./camera"),i=_("../../lib/show_no_webgl_msg"),u=_("../cartesian/constraints"),f=u.enforce,p=u.clean,y=_("../cartesian/autorange").doAutoRange,m=_("../../components/dragelement/helpers"),l=m.drawMode,w=m.selectMode,v=["xaxis","yaxis"],A=_("../cartesian/constants").SUBPLOT_PATTERN;function M(E,P){this.container=E.container,this.graphDiv=E.graphDiv,this.pixelRatio=E.plotGlPixelRatio||window.devicePixelRatio,this.id=E.id,this.staticPlot=!!E.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(P),this.makeFramework(),this.stopped||(this.glplotOptions=d(this),this.glplotOptions.merge(P),this.glplot=r(this.glplotOptions),this.camera=s(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ae.exports=M;var k=M.prototype;k.makeFramework=function(){if(this.staticPlot){if(!(x||(g=document.createElement("canvas"),x=n({canvas:g,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=g,this.gl=x}else{var E=this.container.querySelector(".gl-canvas-focus"),P=n({canvas:E,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!P)return i(this),void(this.stopped=!0);this.canvas=E,this.gl=P}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var F=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");F.style.position="absolute",F.style.top=F.style.left="0px",F.style.width=F.style.height="100%",F.style["z-index"]=20,F.style["pointer-events"]="none";var R=this.mouseContainer=document.createElement("div");R.style.position="absolute",R.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var D=this.container;D.appendChild(F),D.appendChild(R);var L=this;R.addEventListener("mouseout",function(){L.isMouseOver=!1,L.unhover()}),R.addEventListener("mouseover",function(){L.isMouseOver=!0})},k.toImage=function(E){E||(E="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(g),this.updateSize(this.canvas);var P=this.glplot.gl,S=P.drawingBufferWidth,F=P.drawingBufferHeight;P.clearColor(1,1,1,0),P.clear(P.COLOR_BUFFER_BIT|P.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),P.bindFramebuffer(P.FRAMEBUFFER,null);var R=new Uint8Array(S*F*4);P.readPixels(0,0,S,F,P.RGBA,P.UNSIGNED_BYTE,R);for(var D=0,L=F-1;D<L;++D,--L)for(var B=0;B<S;++B)for(var V=0;V<4;++V){var Z=R[4*(S*D+B)+V];R[4*(S*D+B)+V]=R[4*(S*L+B)+V],R[4*(S*L+B)+V]=Z}var Y=document.createElement("canvas");Y.width=S,Y.height=F;var ee,Q=Y.getContext("2d"),$=Q.createImageData(S,F);switch($.data.set(R),Q.putImageData($,0,0),E){case"jpeg":ee=Y.toDataURL("image/jpeg");break;case"webp":ee=Y.toDataURL("image/webp");break;default:ee=Y.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(g),ee},k.updateSize=function(E){E||(E=this.canvas);var P=this.pixelRatio,S=this.fullLayout,R=S.height,D=0|Math.ceil(P*S.width),L=0|Math.ceil(P*R);return E.width===D&&E.height===L||(E.width=D,E.height=L),E},k.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var E=[b.calcTicks(this.xaxis),b.calcTicks(this.yaxis)],P=0;P<2;++P)for(var S=0;S<E[P].length;++S)E[P][S].text=E[P][S].text+"";return E},k.updateRefs=function(E){this.fullLayout=E;var P=this.id.match(A),F="yaxis"+P[2];this.xaxis=this.fullLayout["xaxis"+P[1]],this.yaxis=this.fullLayout[F]},k.relayoutCallback=function(){var E=this.graphDiv,P=this.xaxis,S=this.yaxis,F=E.layout,R={},D=R[P._name+".range"]=P.range.slice(),L=R[S._name+".range"]=S.range.slice();R[P._name+".autorange"]=P.autorange,R[S._name+".autorange"]=S.autorange,T.call("_storeDirectGUIEdit",E.layout,E._fullLayout._preGUI,R);var B=F[P._name];B.range=D,B.autorange=P.autorange;var V=F[S._name];V.range=L,V.autorange=S.autorange,R.lastInputTime=this.camera.lastInputTime,E.emit("plotly_relayout",R)},k.cameraChanged=function(){var E=this.camera;this.glplot.setDataBox(this.calcDataBox());var P=this.computeTickMarks();(function(S,F){for(var R=0;R<2;++R){var D=S[R],L=F[R];if(D.length!==L.length)return!0;for(var B=0;B<D.length;++B)if(D[B].x!==L[B].x)return!0}return!1})(P,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=P,this.glplotOptions.dataBox=E.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},k.handleAnnotations=function(){for(var E=this.graphDiv,P=this.fullLayout.annotations,S=0;S<P.length;S++){var F=P[S];F.xref===this.xaxis._id&&F.yref===this.yaxis._id&&T.getComponentMethod("annotations","drawOne")(E,S)}},k.destroy=function(){if(this.glplot){var E=this.traces;E&&Object.keys(E).map(function(P){E[P].dispose(),delete E[P]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},k.plot=function(E,P,S){var F=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(E,P),this.updateFx(S.dragmode);var R=S.width,D=S.height;this.updateSize(this.canvas);var L=this.glplotOptions;L.merge(S),L.screenBox=[0,0,R,D];var B={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};p(B,this.xaxis),p(B,this.yaxis);var V,Z,Y=S._size,ee=this.xaxis.domain,Q=this.yaxis.domain;for(L.viewBox=[Y.l+ee[0]*Y.w,Y.b+Q[0]*Y.h,R-Y.r-(1-ee[1])*Y.w,D-Y.t-(1-Q[1])*Y.h],this.mouseContainer.style.width=Y.w*(ee[1]-ee[0])+"px",this.mouseContainer.style.height=Y.h*(Q[1]-Q[0])+"px",this.mouseContainer.height=Y.h*(Q[1]-Q[0]),this.mouseContainer.style.left=Y.l+ee[0]*Y.w+"px",this.mouseContainer.style.top=Y.t+(1-Q[1])*Y.h+"px",Z=0;Z<2;++Z)(V=this[v[Z]])._length=L.viewBox[Z+2]-L.viewBox[Z],y(this.graphDiv,V),V.setScale();f(B),L.ticks=this.computeTickMarks(),L.dataBox=this.calcDataBox(),L.merge(S),F.update(L),this.glplot.draw()},k.calcDataBox=function(){var E=this.xaxis,P=this.yaxis,S=E.range,F=P.range,R=E.r2l,D=P.r2l;return[R(S[0]),D(F[0]),R(S[1]),D(F[1])]},k.setRanges=function(E){var P=this.xaxis,S=this.yaxis,F=P.l2r,R=S.l2r;P.range=[F(E[0]),F(E[2])],S.range=[R(E[1]),R(E[3])]},k.updateTraces=function(E,P){var S,F,R,D=Object.keys(this.traces);this.fullData=E;e:for(S=0;S<D.length;S++){var L=D[S],B=this.traces[L];for(F=0;F<E.length;F++)if((R=E[F]).uid===L&&R.type===B.type)continue e;B.dispose(),delete this.traces[L]}for(S=0;S<E.length;S++){var V=P[S],Z=this.traces[(R=E[S]).uid];Z?Z.update(R,V):(Z=R._module.plot(this,R,V),this.traces[R.uid]=Z)}this.glplot.objects.sort(function(Y,ee){return Y._trace.index-ee._trace.index})},k.updateFx=function(E){w(E)||l(E)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===E?"move":"zoom"===E?"crosshair":null},k.emitPointAction=function(E,P){for(var S,F=E.trace.uid,R=E.pointIndex,D=0;D<this.fullData.length;D++)this.fullData[D].uid===F&&(S=this.fullData[D]);var L={x:E.traceCoord[0],y:E.traceCoord[1],curveNumber:S.index,pointNumber:R,data:S._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(L,S,R),this.graphDiv.emit(P,{points:[L]})},k.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var E=this.glplot,P=this.camera,S=P.mouseListener,F=1===this.lastButtonState&&0===S.buttons,R=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var D,L=S.x*E.pixelRatio,B=this.canvas.height-E.pixelRatio*S.y;if(P.boxEnabled&&"zoom"===R.dragmode){this.selectBox.enabled=!0;for(var V=this.selectBox.selectBox=[Math.min(P.boxStart[0],P.boxEnd[0]),Math.min(P.boxStart[1],P.boxEnd[1]),Math.max(P.boxStart[0],P.boxEnd[0]),Math.max(P.boxStart[1],P.boxEnd[1])],Z=0;Z<2;Z++)P.boxStart[Z]===P.boxEnd[Z]&&(V[Z]=E.dataBox[Z],V[Z+2]=E.dataBox[Z+2]);E.setDirty()}else if(!P.panning&&this.isMouseOver){this.selectBox.enabled=!1;var Y=R._size,$=(D=E.pick(L/E.pixelRatio+Y.l+this.xaxis.domain[0]*Y.w,B/E.pixelRatio-(Y.t+(1-this.yaxis.domain[1])*Y.h)))&&D.object._trace.handlePick(D);if($&&F&&this.emitPointAction($,"plotly_click"),D&&"skip"!==D.object._trace.hoverinfo&&R.hovermode&&$&&(!this.lastPickResult||this.lastPickResult.traceUid!==$.trace.uid||this.lastPickResult.dataCoord[0]!==$.dataCoord[0]||this.lastPickResult.dataCoord[1]!==$.dataCoord[1])){var K=$;this.lastPickResult={traceUid:$.trace?$.trace.uid:null,dataCoord:$.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),K.screenCoord=[((E.viewBox[2]-E.viewBox[0])*(D.dataCoord[0]-E.dataBox[0])/(E.dataBox[2]-E.dataBox[0])+E.viewBox[0])/E.pixelRatio,(this.canvas.height-(E.viewBox[3]-E.viewBox[1])*(D.dataCoord[1]-E.dataBox[1])/(E.dataBox[3]-E.dataBox[1])-E.viewBox[1])/E.pixelRatio],this.emitPointAction($,"plotly_hover");var oe=this.fullData[K.trace.index]||{},j=K.pointIndex,H=e.castHoverinfo(oe,R,j);if(H&&"all"!==H){var G=H.split("+");-1===G.indexOf("x")&&(K.traceCoord[0]=void 0),-1===G.indexOf("y")&&(K.traceCoord[1]=void 0),-1===G.indexOf("z")&&(K.traceCoord[2]=void 0),-1===G.indexOf("text")&&(K.textLabel=void 0),-1===G.indexOf("name")&&(K.name=void 0)}e.loneHover({x:K.screenCoord[0],y:K.screenCoord[1],xLabel:this.hoverFormatter("xaxis",K.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",K.traceCoord[1]),zLabel:K.traceCoord[2],text:K.textLabel,name:K.name,color:e.castHoverOption(oe,j,"bgcolor")||K.color,borderColor:e.castHoverOption(oe,j,"bordercolor"),fontFamily:e.castHoverOption(oe,j,"font.family"),fontSize:e.castHoverOption(oe,j,"font.size"),fontColor:e.castHoverOption(oe,j,"font.color"),nameLength:e.castHoverOption(oe,j,"namelength"),textAlign:e.castHoverOption(oe,j,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),E.draw()}},k.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},k.hoverFormatter=function(E,P){if(void 0!==P){var S=this[E];return b.tickText(S,S.c2l(P),"hover").text}}},{"../../../stackgl_modules":1120,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(_,ae,ie){"use strict";var g=_("../../plot_api/edit_types").overrideAll,x=_("../../components/fx/layout_attributes"),T=_("./scene"),b=_("../get_data").getSubplotData,e=_("../../lib"),r=_("../../constants/xmlns_namespaces");ie.name="gl3d",ie.attr="scene",ie.idRoot="scene",ie.idRegex=ie.attrRegex=e.counterRegex("scene"),ie.attributes=_("./layout/attributes"),ie.layoutAttributes=_("./layout/layout_attributes"),ie.baseLayoutAttrOverrides=g({hoverlabel:x.hoverlabel},"plot","nested"),ie.supplyLayoutDefaults=_("./layout/defaults"),ie.plot=function(t){for(var a=t._fullLayout,n=t._fullData,d=a._subplots.gl3d,s=0;s<d.length;s++){var i=d[s],u=b(n,"gl3d",i),f=a[i],p=f.camera,y=f._scene;y||(y=new T({id:i,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:p},a),f._scene=y),y.viewInitial||(y.viewInitial={up:{x:p.up.x,y:p.up.y,z:p.up.z},eye:{x:p.eye.x,y:p.eye.y,z:p.eye.z},center:{x:p.center.x,y:p.center.y,z:p.center.z}}),y.plot(u,a,t.layout)}},ie.clean=function(t,a,n,d){for(var s=d._subplots.gl3d||[],i=0;i<s.length;i++){var u=s[i];!a[u]&&d[u]._scene&&(d[u]._scene.destroy(),d._infolayer&&d._infolayer.selectAll(".annotation-"+u).remove())}},ie.toSVG=function(t){for(var a=t._fullLayout,n=a._subplots.gl3d,d=a._size,s=0;s<n.length;s++){var i=a[n[s]],u=i.domain,f=i._scene,p=f.toImage("png");a._glimages.append("svg:image").attr({xmlns:r.svg,"xlink:href":p,x:d.l+d.w*u.x[0],y:d.t+d.h*(1-u.y[1]),width:d.w*(u.x[1]-u.x[0]),height:d.h*(u.y[1]-u.y[0]),preserveAspectRatio:"none"}),f.destroy()}},ie.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var a=t.substr(5);return"1"===a&&(a=""),"scene"+a}},ie.updateFx=function(t){for(var a=t._fullLayout,n=a._subplots.gl3d,d=0;d<n.length;d++)a[n[d]]._scene.updateFx(a.dragmode,a.hovermode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(_,ae,ie){"use strict";ae.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(_,ae,ie){"use strict";var g=_("../../../components/color"),x=_("../../cartesian/layout_attributes"),T=_("../../../lib/extend").extendFlat,b=_("../../../plot_api/edit_types").overrideAll;ae.exports=b({visible:x.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:g.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:x.color,categoryorder:x.categoryorder,categoryarray:x.categoryarray,title:{text:x.title.text,font:x.title.font},type:T({},x.type,{values:["-","linear","log","date","category"]}),autotypenumbers:x.autotypenumbers,autorange:x.autorange,rangemode:x.rangemode,range:T({},x.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:x.tickmode,nticks:x.nticks,tick0:x.tick0,dtick:x.dtick,tickvals:x.tickvals,ticktext:x.ticktext,ticks:x.ticks,mirror:x.mirror,ticklen:x.ticklen,tickwidth:x.tickwidth,tickcolor:x.tickcolor,showticklabels:x.showticklabels,tickfont:x.tickfont,tickangle:x.tickangle,tickprefix:x.tickprefix,showtickprefix:x.showtickprefix,ticksuffix:x.ticksuffix,showticksuffix:x.showticksuffix,showexponent:x.showexponent,exponentformat:x.exponentformat,minexponent:x.minexponent,separatethousands:x.separatethousands,tickformat:x.tickformat,tickformatstops:x.tickformatstops,hoverformat:x.hoverformat,showline:x.showline,linecolor:x.linecolor,linewidth:x.linewidth,showgrid:x.showgrid,gridcolor:T({},x.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:x.gridwidth,zeroline:x.zeroline,zerolinecolor:x.zerolinecolor,zerolinewidth:x.zerolinewidth,_deprecated:{title:x._deprecated.title,titlefont:x._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(_,ae,ie){"use strict";var g=_("tinycolor2").mix,x=_("../../../lib"),T=_("../../../plot_api/plot_template"),b=_("./axis_attributes"),e=_("../../cartesian/type_defaults"),r=_("../../cartesian/axis_defaults"),t=["xaxis","yaxis","zaxis"];ae.exports=function(a,n,d){var s,i;function u(y,m){return x.coerce(s,i,b,y,m)}for(var f=0;f<t.length;f++){var p=t[f];s=a[p]||{},(i=T.newContainer(n,p))._id=p[0]+d.scene,i._name=p,e(s,i,u,d),r(s,i,u,{font:d.font,letter:p[0],data:d.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:d.bgColor,calendar:d.calendar},d.fullLayout),u("gridcolor",g(i.color,d.bgColor,13600/187).toRgbString()),u("title.text",p[0]),i.setScale=x.noop,u("showspikes")&&(u("spikesides"),u("spikethickness"),u("spikecolor",i.color)),u("showaxeslabels"),u("showbackground")&&u("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(_,ae,ie){"use strict";var g=_("../../../lib/str2rgbarray"),x=_("../../../lib"),T=["xaxis","yaxis","zaxis"];function b(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}b.prototype.merge=function(e,r){for(var t=0;t<3;++t){var a=r[T[t]];a.visible?(this.labels[t]=e._meta?x.templateString(a.title.text,e._meta):a.title.text,"font"in a.title&&(a.title.font.color&&(this.labelColor[t]=g(a.title.font.color)),a.title.font.family&&(this.labelFont[t]=a.title.font.family),a.title.font.size&&(this.labelSize[t]=a.title.font.size)),"showline"in a&&(this.lineEnable[t]=a.showline),"linecolor"in a&&(this.lineColor[t]=g(a.linecolor)),"linewidth"in a&&(this.lineWidth[t]=a.linewidth),"showgrid"in a&&(this.gridEnable[t]=a.showgrid),"gridcolor"in a&&(this.gridColor[t]=g(a.gridcolor)),"gridwidth"in a&&(this.gridWidth[t]=a.gridwidth),"log"===a.type?this.zeroEnable[t]=!1:"zeroline"in a&&(this.zeroEnable[t]=a.zeroline),"zerolinecolor"in a&&(this.zeroLineColor[t]=g(a.zerolinecolor)),"zerolinewidth"in a&&(this.zeroLineWidth[t]=a.zerolinewidth),this.lineTickEnable[t]=!(!("ticks"in a)||!a.ticks),"ticklen"in a&&(this.lineTickLength[t]=this._defaultLineTickLength[t]=a.ticklen),"tickcolor"in a&&(this.lineTickColor[t]=g(a.tickcolor)),"tickwidth"in a&&(this.lineTickWidth[t]=a.tickwidth),"tickangle"in a&&(this.tickAngle[t]="auto"===a.tickangle?-3600:Math.PI*-a.tickangle/180),"showticklabels"in a&&(this.tickEnable[t]=a.showticklabels),"tickfont"in a&&(a.tickfont.color&&(this.tickColor[t]=g(a.tickfont.color)),a.tickfont.family&&(this.tickFont[t]=a.tickfont.family),a.tickfont.size&&(this.tickSize[t]=a.tickfont.size)),"mirror"in a?-1!==["ticks","all","allticks"].indexOf(a.mirror)?(this.lineTickMirror[t]=!0,this.lineMirror[t]=!0):!0===a.mirror?(this.lineTickMirror[t]=!1,this.lineMirror[t]=!0):(this.lineTickMirror[t]=!1,this.lineMirror[t]=!1):this.lineMirror[t]=!1,"showbackground"in a&&!1!==a.showbackground?(this.backgroundEnable[t]=!0,this.backgroundColor[t]=g(a.backgroundcolor)):this.backgroundEnable[t]=!1):(this.tickEnable[t]=!1,this.labelEnable[t]=!1,this.lineEnable[t]=!1,this.lineTickEnable[t]=!1,this.gridEnable[t]=!1,this.zeroEnable[t]=!1,this.backgroundEnable[t]=!1)}},ae.exports=function(e,r){var t=new b;return t.merge(e,r),t}},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(_,ae,ie){"use strict";var g=_("../../../lib"),x=_("../../../components/color"),T=_("../../../registry"),b=_("../../subplot_defaults"),e=_("./axis_defaults"),r=_("./layout_attributes"),t=_("../../get_data").getSubplotData;function a(n,d,s,i){for(var u=s("bgcolor"),f=x.combine(u,i.paper_bgcolor),p=["up","center","eye"],y=0;y<p.length;y++)s("camera."+p[y]+".x"),s("camera."+p[y]+".y"),s("camera."+p[y]+".z");s("camera.projection.type");var m=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),l=s("aspectmode",m?"manual":"auto");m||(n.aspectratio=d.aspectratio={x:1,y:1,z:1},"manual"===l&&(d.aspectmode="auto"),n.aspectmode=d.aspectmode);var w=t(i.fullData,"gl3d",i.id);e(n,d,{font:i.font,scene:i.id,data:w,bgColor:f,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),T.getComponentMethod("annotations3d","handleDefaults")(n,d,i);var v=i.getDfltFromLayout("dragmode");if(!1!==v&&!v)if(v="orbit",n.camera&&n.camera.up){var A=n.camera.up.x,M=n.camera.up.y,k=n.camera.up.z;0!==k&&(A&&M&&k?k/Math.sqrt(A*A+M*M+k*k)>.999&&(v="turntable"):v="turntable")}else v="turntable";s("dragmode",v),s("hovermode",i.getDfltFromLayout("hovermode"))}ae.exports=function(n,d,s){var i=d._basePlotModules.length>1;b(n,d,s,{type:"gl3d",attributes:r,handleDefaults:a,fullLayout:d,font:d.font,fullData:s,getDfltFromLayout:function(u){if(!i)return g.validate(n[u],r[u])?n[u]:void 0},autotypenumbersDflt:d.autotypenumbers,paper_bgcolor:d.paper_bgcolor,calendar:d.calendar})}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(_,ae,ie){"use strict";var g=_("./axis_attributes"),x=_("../../domain").attributes,T=_("../../../lib/extend").extendFlat,b=_("../../../lib").counterRegex;function e(r,t,a){return{x:{valType:"number",dflt:r,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:a,editType:"camera"},editType:"camera"}}ae.exports={_arrayAttrRegexps:[b("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:T(e(0,0,1),{}),center:T(e(0,0,0),{}),eye:T(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:x({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:g,yaxis:g,zaxis:g,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(_,ae,ie){"use strict";var g=_("../../../lib/str2rgbarray"),x=["xaxis","yaxis","zaxis"];function T(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}T.prototype.merge=function(b){for(var e=0;e<3;++e){var r=b[x[e]];r.visible?(this.enabled[e]=r.showspikes,this.colors[e]=g(r.spikecolor),this.drawSides[e]=r.spikesides,this.lineWidth[e]=r.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},ae.exports=function(b){var e=new T;return e.merge(b),e}},{"../../../lib/str2rgbarray":528}],606:[function(_,ae,ie){"use strict";ae.exports=function(e){for(var r=e.axesOptions,t=e.glplot.axesPixels,a=e.fullSceneLayout,n=[[],[],[]],d=0;d<3;++d){var s=a[T[d]];if(s._length=(t[d].hi-t[d].lo)*t[d].pixelsPerDataUnit/e.dataScale[d],Math.abs(s._length)===1/0||isNaN(s._length))n[d]=[];else{s._input_range=s.range.slice(),s.range[0]=t[d].lo/e.dataScale[d],s.range[1]=t[d].hi/e.dataScale[d],s._m=1/(e.dataScale[d]*t[d].pixelsPerDataUnit),s.range[0]===s.range[1]&&(s.range[0]-=1,s.range[1]+=1);var i=s.tickmode;if("auto"===s.tickmode){s.tickmode="linear";var u=s.nticks||x.constrain(s._length/40,4,9);g.autoTicks(s,Math.abs(s.range[1]-s.range[0])/u)}for(var f=g.calcTicks(s,{msUTC:!0}),p=0;p<f.length;++p)f[p].x=f[p].x*e.dataScale[d],"date"===s.type&&(f[p].text=f[p].text.replace(/\<br\>/g," "));n[d]=f,s.tickmode=i}}for(r.ticks=n,d=0;d<3;++d)for(b[d]=.5*(e.glplot.bounds[0][d]+e.glplot.bounds[1][d]),p=0;p<2;++p)r.bounds[p][d]=e.glplot.bounds[p][d];e.contourLevels=function(y){for(var m=new Array(3),l=0;l<3;++l){for(var w=y[l],v=new Array(w.length),A=0;A<w.length;++A)v[A]=w[A].x;m[l]=v}return m}(n)};var g=_("../../cartesian/axes"),x=_("../../../lib"),T=["xaxis","yaxis","zaxis"],b=[0,0,0]},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(_,ae,ie){"use strict";function g(x,T){var b,e,r=[0,0,0,0];for(b=0;b<4;++b)for(e=0;e<4;++e)r[e]+=x[4*b+e]*T[b];return r}ae.exports=function(x,T){return g(x.projection,g(x.view,g(x.model,[T[0],T[1],T[2],1])))}},{}],608:[function(_,ae,ie){"use strict";var g,x,T=_("../../../stackgl_modules").gl_plot3d,b=T.createCamera,e=T.createScene,r=_("webgl-context"),t=_("has-passive-events"),a=_("../../registry"),n=_("../../lib"),d=n.preserveDrawingBuffer(),s=_("../../plots/cartesian/axes"),i=_("../../components/fx"),u=_("../../lib/str2rgbarray"),f=_("../../lib/show_no_webgl_msg"),p=_("./project"),y=_("./layout/convert"),m=_("./layout/spikes"),l=_("./layout/tick_marks");function w(E,P){var S=document.createElement("div"),F=E.container;this.graphDiv=E.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",S.appendChild(R),this.svgContainer=R,S.id=E.id,S.style.position="absolute",S.style.top=S.style.left="0px",S.style.width=S.style.height="100%",F.appendChild(S),this.fullLayout=P,this.id=E.id||"scene",this.fullSceneLayout=P[this.id],this.plotArgs=[[],{},{}],this.axesOptions=y(P,P[this.id]),this.spikeOptions=m(P[this.id]),this.container=S,this.staticMode=!!E.staticPlot,this.pixelRatio=this.pixelRatio||E.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var v=w.prototype;v.prepareOptions=function(){var E={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:d,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(x||(g=document.createElement("canvas"),x=r({canvas:g,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=x,E.canvas=g}return E};var A=!0;v.tryCreatePlot=function(){var E=this.prepareOptions(),P=!0;try{this.glplot=e(E)}catch(S){if(this.staticMode||!A||d)P=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{d=E.glOptions.preserveDrawingBuffer=!0,this.glplot=e(E)}catch(F){d=E.glOptions.preserveDrawingBuffer=!1,P=!1}}}return A=!1,P},v.initializeGLCamera=function(){var E=this.fullSceneLayout.camera;this.camera=b(this.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:"orthographic"===E.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},v.initializeGLPlot=function(){var E=this;if(E.initializeGLCamera(),!E.tryCreatePlot())return f(E);E.traces={},E.make4thDimension();var P=E.graphDiv,S=P.layout,F=function(){var D={};return E.isCameraChanged(S)&&(D[E.id+".camera"]=E.getCamera()),E.isAspectChanged(S)&&(D[E.id+".aspectratio"]=E.glplot.getAspectratio(),"manual"!==S[E.id].aspectmode&&(E.fullSceneLayout.aspectmode=S[E.id].aspectmode=D[E.id+".aspectmode"]="manual")),D},R=function(D){if(!1!==D.fullSceneLayout.dragmode){var L=F();D.saveLayout(S),D.graphDiv.emit("plotly_relayout",L)}};return E.glplot.canvas&&(E.glplot.canvas.addEventListener("mouseup",function(){R(E)}),E.glplot.canvas.addEventListener("wheel",function(D){if(P._context._scrollZoom.gl3d){if(E.camera._ortho){var L=D.deltaX>D.deltaY?1.1:1/1.1,B=E.glplot.getAspectratio();E.glplot.setAspectratio({x:L*B.x,y:L*B.y,z:L*B.z})}R(E)}},!!t&&{passive:!1}),E.glplot.canvas.addEventListener("mousemove",function(){if(!1!==E.fullSceneLayout.dragmode&&0!==E.camera.mouseListener.buttons){var D=F();E.graphDiv.emit("plotly_relayouting",D)}}),E.staticMode||E.glplot.canvas.addEventListener("webglcontextlost",function(D){P&&P.emit&&P.emit("plotly_webglcontextlost",{event:D,layer:E.id})},!1)),E.glplot.oncontextloss=function(){E.recoverContext()},E.glplot.onrender=function(){E.render()},!0},v.render=function(){var E,P=this,S=P.graphDiv,F=P.svgContainer,R=P.container.getBoundingClientRect();S._fullLayout._calcInverseTransform(S);var B=R.width*S._fullLayout._invScaleX,V=R.height*S._fullLayout._invScaleY;F.setAttributeNS(null,"viewBox","0 0 "+B+" "+V),F.setAttributeNS(null,"width",B),F.setAttributeNS(null,"height",V),l(P),P.glplot.axes.update(P.axesOptions);for(var Z=Object.keys(P.traces),Y=null,ee=P.glplot.selection,Q=0;Q<Z.length;++Q)"skip"!==(E=P.traces[Z[Q]]).data.hoverinfo&&E.handlePick(ee)&&(Y=E),E.setContourLevels&&E.setContourLevels();function $(he,be,ge){var we=P.fullSceneLayout[he+"axis"];return"log"!==we.type&&(be=we.d2l(be)),s.hoverLabelText(we,be,ge)}if(null!==Y){var oe,K=p(P.glplot.cameraParams,ee.dataCoordinate),j=S._fullData[(E=Y.data).index],H=ee.index,G={xLabel:$("x",ee.traceCoordinate[0],E.xhoverformat),yLabel:$("y",ee.traceCoordinate[1],E.yhoverformat),zLabel:$("z",ee.traceCoordinate[2],E.zhoverformat)},re=i.castHoverinfo(j,P.fullLayout,H),q=(re||"").split("+"),te=re&&"all"===re;j.hovertemplate||te||(-1===q.indexOf("x")&&(G.xLabel=void 0),-1===q.indexOf("y")&&(G.yLabel=void 0),-1===q.indexOf("z")&&(G.zLabel=void 0),-1===q.indexOf("text")&&(ee.textLabel=void 0),-1===q.indexOf("name")&&(Y.name=void 0));var ne=[];"cone"===E.type||"streamtube"===E.type?(G.uLabel=$("x",ee.traceCoordinate[3],E.uhoverformat),(te||-1!==q.indexOf("u"))&&ne.push("u: "+G.uLabel),G.vLabel=$("y",ee.traceCoordinate[4],E.vhoverformat),(te||-1!==q.indexOf("v"))&&ne.push("v: "+G.vLabel),G.wLabel=$("z",ee.traceCoordinate[5],E.whoverformat),(te||-1!==q.indexOf("w"))&&ne.push("w: "+G.wLabel),G.normLabel=ee.traceCoordinate[6].toPrecision(3),(te||-1!==q.indexOf("norm"))&&ne.push("norm: "+G.normLabel),"streamtube"===E.type&&(G.divergenceLabel=ee.traceCoordinate[7].toPrecision(3),(te||-1!==q.indexOf("divergence"))&&ne.push("divergence: "+G.divergenceLabel)),ee.textLabel&&ne.push(ee.textLabel),oe=ne.join("<br>")):"isosurface"===E.type||"volume"===E.type?(G.valueLabel=s.hoverLabelText(P._mockAxis,P._mockAxis.d2l(ee.traceCoordinate[3]),E.valuehoverformat),ne.push("value: "+G.valueLabel),ee.textLabel&&ne.push(ee.textLabel),oe=ne.join("<br>")):oe=ee.textLabel;var le={x:ee.traceCoordinate[0],y:ee.traceCoordinate[1],z:ee.traceCoordinate[2],data:j._input,fullData:j,curveNumber:j.index,pointNumber:H};i.appendArrayPointValue(le,j,H),E._module.eventData&&(le=j._module.eventData(le,ee,j,{},H));var ue={points:[le]};if(P.fullSceneLayout.hovermode){var de=[];i.loneHover({trace:j,x:(.5+.5*K[0]/K[3])*B,y:(.5-.5*K[1]/K[3])*V,xLabel:G.xLabel,yLabel:G.yLabel,zLabel:G.zLabel,text:oe,name:Y.name,color:i.castHoverOption(j,H,"bgcolor")||Y.color,borderColor:i.castHoverOption(j,H,"bordercolor"),fontFamily:i.castHoverOption(j,H,"font.family"),fontSize:i.castHoverOption(j,H,"font.size"),fontColor:i.castHoverOption(j,H,"font.color"),nameLength:i.castHoverOption(j,H,"namelength"),textAlign:i.castHoverOption(j,H,"align"),hovertemplate:n.castOption(j,H,"hovertemplate"),hovertemplateLabels:n.extendFlat({},le,G),eventData:[le]},{container:F,gd:S,inOut_bbox:de}),le.bbox=de[0]}S.emit(ee.buttons&&ee.distance<5?"plotly_click":"plotly_hover",ue),this.oldEventData=ue}else i.loneUnhover(F),this.oldEventData&&S.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},v.recoverContext=function(){var E=this;E.glplot.dispose();var P=function(){E.glplot.gl.isContextLost()?requestAnimationFrame(P):E.initializeGLPlot()?E.plot.apply(E,E.plotArgs):n.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(P)};var M=["xaxis","yaxis","zaxis"];function k(E,P,S){for(var F=E.fullSceneLayout,R=0;R<3;R++){var D=M[R],L=D.charAt(0),B=F[D],V=P[L],Z=P[L+"calendar"],Y=P["_"+L+"length"];if(n.isArrayOrTypedArray(V))for(var ee,Q=0;Q<(Y||V.length);Q++)if(n.isArrayOrTypedArray(V[Q]))for(var $=0;$<V[Q].length;++$)ee=B.d2l(V[Q][$],0,Z),!isNaN(ee)&&isFinite(ee)&&(S[0][R]=Math.min(S[0][R],ee),S[1][R]=Math.max(S[1][R],ee));else ee=B.d2l(V[Q],0,Z),!isNaN(ee)&&isFinite(ee)&&(S[0][R]=Math.min(S[0][R],ee),S[1][R]=Math.max(S[1][R],ee));else S[0][R]=Math.min(S[0][R],0),S[1][R]=Math.max(S[1][R],Y-1)}}v.plot=function(E,P,S){if(this.plotArgs=[E,P,S],!this.glplot.contextLost){var F,R,D,L,B,V,Z=P[this.id],Y=S[this.id];this.fullLayout=P,this.fullSceneLayout=Z,this.axesOptions.merge(P,Z),this.spikeOptions.merge(Z),this.setViewport(Z),this.updateFx(Z.dragmode,Z.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(u(Z.bgcolor)),this.setConvert(B),E?Array.isArray(E)||(E=[E]):E=[];var ee=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(D=0;D<E.length;++D)!0===(F=E[D]).visible&&0!==F._length&&k(this,F,ee);!function(Ie,Ce){for(var Pe=Ie.fullSceneLayout,Ve=Pe.annotations||[],qe=0;qe<3;qe++)for(var Je=M[qe],lt=Je.charAt(0),He=Pe[Je],$e=0;$e<Ve.length;$e++){var et=Ve[$e];if(et.visible){var tt=He.r2l(et[lt]);!isNaN(tt)&&isFinite(tt)&&(Ce[0][qe]=Math.min(Ce[0][qe],tt),Ce[1][qe]=Math.max(Ce[1][qe],tt))}}}(this,ee);var Q=[1,1,1];for(L=0;L<3;++L)Q[L]=ee[1][L]===ee[0][L]?1:1/(ee[1][L]-ee[0][L]);for(this.dataScale=Q,this.convertAnnotations(this),D=0;D<E.length;++D)!0===(F=E[D]).visible&&0!==F._length&&((R=this.traces[F.uid])?R.data.type===F.type?R.update(F):(R.dispose(),R=F._module.plot(this,F),this.traces[F.uid]=R):(R=F._module.plot(this,F),this.traces[F.uid]=R),R.name=F.name);var $=Object.keys(this.traces);e:for(D=0;D<$.length;++D){for(L=0;L<E.length;++L)if(E[L].uid===$[D]&&!0===E[L].visible&&0!==E[L]._length)continue e;(R=this.traces[$[D]]).dispose(),delete this.traces[$[D]]}this.glplot.objects.sort(function(Ie,Ce){return Ie._trace.data.index-Ce._trace.data.index});var K,oe=[[0,0,0],[0,0,0]],j=[],H={};for(D=0;D<3;++D){if((V=(B=Z[M[D]]).type)in H?(H[V].acc*=Q[D],H[V].count+=1):H[V]={acc:Q[D],count:1},B.autorange){oe[0][D]=1/0,oe[1][D]=-1/0;var G=this.glplot.objects,re=this.fullSceneLayout.annotations||[],q=B._name.charAt(0);for(L=0;L<G.length;L++){var te=G[L],ne=te.bounds,le=te._trace.data._pad||0;oe[0][D]="ErrorBars"===te.constructor.name&&B._lowerLogErrorBound?Math.min(oe[0][D],B._lowerLogErrorBound):Math.min(oe[0][D],ne[0][D]/Q[D]-le),oe[1][D]=Math.max(oe[1][D],ne[1][D]/Q[D]+le)}for(L=0;L<re.length;L++){var ue=re[L];if(ue.visible){var de=B.r2l(ue[q]);oe[0][D]=Math.min(oe[0][D],de),oe[1][D]=Math.max(oe[1][D],de)}}if("rangemode"in B&&"tozero"===B.rangemode&&(oe[0][D]=Math.min(oe[0][D],0),oe[1][D]=Math.max(oe[1][D],0)),oe[0][D]>oe[1][D])oe[0][D]=-1,oe[1][D]=1;else{var he=oe[1][D]-oe[0][D];oe[0][D]-=he/32,oe[1][D]+=he/32}if("reversed"===B.autorange){var be=oe[0][D];oe[0][D]=oe[1][D],oe[1][D]=be}}else{var ge=B.range;oe[0][D]=B.r2l(ge[0]),oe[1][D]=B.r2l(ge[1])}oe[0][D]===oe[1][D]&&(oe[0][D]-=1,oe[1][D]+=1),j[D]=oe[1][D]-oe[0][D],this.glplot.setBounds(D,{min:oe[0][D]*Q[D],max:oe[1][D]*Q[D]})}var we=Z.aspectmode;if("cube"===we)K=[1,1,1];else if("manual"===we){var ke=Z.aspectratio;K=[ke.x,ke.y,ke.z]}else{if("auto"!==we&&"data"!==we)throw new Error("scene.js aspectRatio was not one of the enumerated types");var De=[1,1,1];for(D=0;D<3;++D){var Ee=H[V=(B=Z[M[D]]).type];De[D]=Math.pow(Ee.acc,1/Ee.count)/Q[D]}K="data"===we||Math.max.apply(null,De)/Math.min.apply(null,De)<=4?De:[1,1,1]}Z.aspectratio.x=Y.aspectratio.x=K[0],Z.aspectratio.y=Y.aspectratio.y=K[1],Z.aspectratio.z=Y.aspectratio.z=K[2],this.glplot.setAspectratio(Z.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:Z.aspectratio.x,y:Z.aspectratio.y,z:Z.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=Z.aspectmode);var Re=Z.domain||null,ve=P._size||null;if(Re&&ve){var Te=this.container.style;Te.position="absolute",Te.left=ve.l+Re.x[0]*ve.w+"px",Te.top=ve.t+(1-Re.y[1])*ve.h+"px",Te.width=ve.w*(Re.x[1]-Re.x[0])+"px",Te.height=ve.h*(Re.y[1]-Re.y[0])+"px"}this.glplot.redraw()}},v.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},v.getCamera=function(){var E;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(E=this.camera).up[0],y:E.up[1],z:E.up[2]},center:{x:E.center[0],y:E.center[1],z:E.center[2]},eye:{x:E.eye[0],y:E.eye[1],z:E.eye[2]},projection:{type:!0===E._ortho?"orthographic":"perspective"}}},v.setViewport=function(E){var P,S=E.camera;this.camera.lookAt.apply(this,[[(P=S).eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]),this.glplot.setAspectratio(E.aspectratio),"orthographic"===S.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},v.isCameraChanged=function(E){var P=this.getCamera(),S=n.nestedProperty(E,this.id+".camera").get();var B,V,Z,Y,ee,Q,R=!1;if(void 0===S)R=!0;else{for(var D=0;D<3;D++)for(var L=0;L<3;L++)if(B=P,Y=L,ee=void 0,Q=void 0,Q=["x","y","z"],!(V=S)[(ee=["up","center","eye"])[Z=D]]||B[ee[Z]][Q[Y]]!==V[ee[Z]][Q[Y]]){R=!0;break}(!S.projection||P.projection&&P.projection.type!==S.projection.type)&&(R=!0)}return R},v.isAspectChanged=function(E){var P=this.glplot.getAspectratio(),S=n.nestedProperty(E,this.id+".aspectratio").get();return void 0===S||S.x!==P.x||S.y!==P.y||S.z!==P.z},v.saveLayout=function(E){var P,S,F,R,D,L,B=this.fullLayout,V=this.isCameraChanged(E),Z=this.isAspectChanged(E),Y=V||Z;if(Y){var ee={};V&&(P=this.getCamera(),F=(S=n.nestedProperty(E,this.id+".camera")).get(),ee[this.id+".camera"]=F),Z&&(R=this.glplot.getAspectratio(),L=(D=n.nestedProperty(E,this.id+".aspectratio")).get(),ee[this.id+".aspectratio"]=L),a.call("_storeDirectGUIEdit",E,B._preGUI,ee),V&&(S.set(P),n.nestedProperty(B,this.id+".camera").set(P)),Z&&(D.set(R),n.nestedProperty(B,this.id+".aspectratio").set(R),this.glplot.redraw())}return Y},v.updateFx=function(E,P){var S=this.camera;if(S)if("orbit"===E)S.mode="orbit",S.keyBindingMode="rotate";else if("turntable"===E){S.up=[0,0,1],S.mode="turntable",S.keyBindingMode="rotate";var F=this.graphDiv,R=F._fullLayout,D=this.fullSceneLayout.camera,L=D.up.x,B=D.up.y,V=D.up.z;if(V/Math.sqrt(L*L+B*B+V*V)<.999){var Z=this.id+".camera.up",Y={x:0,y:0,z:1},ee={};ee[Z]=Y;var Q=F.layout;a.call("_storeDirectGUIEdit",Q,R._preGUI,ee),D.up=Y,n.nestedProperty(Q,Z).set(Y)}}else S.keyBindingMode=E;this.fullSceneLayout.hovermode=P},v.toImage=function(E){E||(E="png"),this.staticMode&&this.container.appendChild(g),this.glplot.redraw();var P=this.glplot.gl,S=P.drawingBufferWidth,F=P.drawingBufferHeight;P.bindFramebuffer(P.FRAMEBUFFER,null);var R=new Uint8Array(S*F*4);P.readPixels(0,0,S,F,P.RGBA,P.UNSIGNED_BYTE,R),function(Z,Y,ee){for(var Q=0,$=ee-1;Q<$;++Q,--$)for(var K=0;K<Y;++K)for(var oe=0;oe<4;++oe){var j=4*(Y*Q+K)+oe,H=4*(Y*$+K)+oe,G=Z[j];Z[j]=Z[H],Z[H]=G}}(R,S,F),function(Z,Y,ee){for(var Q=0;Q<ee;++Q)for(var $=0;$<Y;++$){var K=4*(Y*Q+$),oe=Z[K+3];if(oe>0)for(var j=255/oe,H=0;H<3;++H)Z[K+H]=Math.min(j*Z[K+H],255)}}(R,S,F);var D=document.createElement("canvas");D.width=S,D.height=F;var L,B=D.getContext("2d"),V=B.createImageData(S,F);switch(V.data.set(R),B.putImageData(V,0,0),E){case"jpeg":L=D.toDataURL("image/jpeg");break;case"webp":L=D.toDataURL("image/webp");break;default:L=D.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(g),L},v.setConvert=function(){for(var E=0;E<3;E++){var P=this.fullSceneLayout[M[E]];s.setConvert(P,this.fullLayout),P.setScale=n.noop}},v.make4thDimension=function(){var E=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},s.setConvert(this._mockAxis,E)},ae.exports=w},{"../../../stackgl_modules":1120,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b){b=b||g.length;for(var e=new Array(b),r=0;r<b;r++)e[r]=[g[r],x[r],T[r]];return e}},{}],610:[function(_,ae,ie){"use strict";var g=_("./font_attributes"),x=_("./animation_attributes"),T=_("../components/color/attributes"),b=_("../components/shapes/draw_newshape/attributes"),e=_("./pad_attributes"),r=_("../lib/extend").extendFlat,t=g({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=T.defaultLine,ae.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:g({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:r(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:T.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:T.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:T.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:b.newshape,activeshape:b.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:r({},x.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:g({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(_,ae,ie){"use strict";var g=_("../../lib/sort_object_keys"),x='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',x].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:x,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=g(e);ae.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":526}],612:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x,T){var b=x.split(" "),e=b[0],r=b[1],t=g.isArrayOrTypedArray(T)?g.mean(T):T,a=.5+t/100,n=1.5+t/100,d=["",""],s=[0,0];switch(e){case"top":d[0]="top",s[1]=-n;break;case"bottom":d[0]="bottom",s[1]=n}switch(r){case"left":d[1]="right",s[0]=-a;break;case"right":d[1]="left",s[0]=a}return{anchor:d[0]&&d[1]?d.join("-"):d[0]?d[0]:d[1]?d[1]:"center",offset:s}}},{"../../lib":503}],613:[function(_,ae,ie){"use strict";var g=_("mapbox-gl/dist/mapbox-gl-unminified"),x=_("../../lib"),T=x.strTranslate,b=x.strScale,e=_("../../plots/get_data").getSubplotCalcData,r=_("../../constants/xmlns_namespaces"),t=_("@plotly/d3"),a=_("../../components/drawing"),n=_("../../lib/svg_text_utils"),d=_("./mapbox"),s=ie.constants=_("./constants");function i(u){return"string"==typeof u&&(-1!==s.styleValuesMapbox.indexOf(u)||0===u.indexOf("mapbox://"))}ie.name="mapbox",ie.attr="subplot",ie.idRoot="mapbox",ie.idRegex=ie.attrRegex=x.counterRegex("mapbox"),ie.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},ie.layoutAttributes=_("./layout_attributes"),ie.supplyLayoutDefaults=_("./layout_defaults"),ie.plot=function(u){var f=u._fullLayout,p=u.calcdata,y=f._subplots.mapbox;if(g.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var m=function(k,E){var P=k._fullLayout;if(""===k._context.mapboxAccessToken)return"";for(var S=[],F=[],R=!1,D=!1,L=0;L<E.length;L++){var B=P[E[L]],V=B.accesstoken;i(B.style)&&(V?x.pushUnique(S,V):(i(B._input.style)&&(x.error("Uses Mapbox map style, but did not set an access token."),R=!0),D=!0)),V&&x.pushUnique(F,V)}if(D){var Z=R?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw x.error(Z),new Error(Z)}return S.length?(S.length>1&&x.warn(s.multipleTokensErrorMsg),S[0]):(F.length&&x.log(["Listed mapbox access token(s)",F.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,y);g.accessToken=m;for(var l=0;l<y.length;l++){var w=y[l],v=e(p,"mapbox",w),A=f[w],M=A._subplot;M||(M=new d(u,w),f[w]._subplot=M),M.viewInitial||(M.viewInitial={center:x.extendFlat({},A.center),zoom:A.zoom,bearing:A.bearing,pitch:A.pitch}),M.plot(v,f,u._promises)}},ie.clean=function(u,f,p,y){for(var m=y._subplots.mapbox||[],l=0;l<m.length;l++){var w=m[l];!f[w]&&y[w]._subplot&&y[w]._subplot.destroy()}},ie.toSVG=function(u){for(var f=u._fullLayout,p=f._subplots.mapbox,y=f._size,m=0;m<p.length;m++){var l=f[p[m]],w=l.domain,v=l._subplot.toImage("png");f._glimages.append("svg:image").attr({xmlns:r.svg,"xlink:href":v,x:y.l+y.w*w.x[0],y:y.t+y.h*(1-w.y[1]),width:y.w*(w.x[1]-w.x[0]),height:y.h*(w.y[1]-w.y[0]),preserveAspectRatio:"none"});var A=t.select(l._subplot.div);if(null!==A.select(".mapboxgl-ctrl-logo").node().offsetParent){var M=f._glimages.append("g");M.attr("transform",T(y.l+y.w*w.x[0]+10,y.t+y.h*(1-w.y[0])-31)),M.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),M.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),M.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),M.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=A.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),E=f._glimages.append("g"),P=E.append("text");P.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var S=a.bBox(P.node()),F=y.w*(w.x[1]-w.x[0]);if(S.width>F/2){var R=k.split("|").join("<br>");P.text(R).attr("data-unformatted",R).call(n.convertToTspans,u),S=a.bBox(P.node())}P.attr("transform",T(-3,8-S.height)),E.insert("rect",".static-attribution").attr({x:-S.width-6,y:-S.height-3,width:S.width+6,height:S.height+3,fill:"rgba(255, 255, 255, 0.75)"});var D=1;S.width+6>F&&(D=F/(S.width+6));var L=[y.l+y.w*w.x[1],y.t+y.h*(1-w.y[0])];E.attr("transform",T(L[0],L[1])+b(D))}},ie.updateFx=function(u){for(var f=u._fullLayout,p=f._subplots.mapbox,y=0;y<p.length;y++)f[p[y]]._subplot.updateFx(f)}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../lib/svg_text_utils").sanitizeHTML,T=_("./convert_text_opts"),b=_("./constants");function e(n,d){this.subplot=n,this.uid=n.uid+"-"+d,this.index=d,this.idSource="source-"+this.uid,this.idLayer=b.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var r=e.prototype;function t(n){if(!n.visible)return!1;var d=n.source;if(Array.isArray(d)&&d.length>0){for(var s=0;s<d.length;s++)if("string"!=typeof d[s]||0===d[s].length)return!1;return!0}return g.isPlainObject(d)||"string"==typeof d&&d.length>0}function a(n){var d={},s={};switch(n.type){case"circle":g.extendFlat(s,{"circle-radius":n.circle.radius,"circle-color":n.color,"circle-opacity":n.opacity});break;case"line":g.extendFlat(s,{"line-width":n.line.width,"line-color":n.color,"line-opacity":n.opacity,"line-dasharray":n.line.dash});break;case"fill":g.extendFlat(s,{"fill-color":n.color,"fill-outline-color":n.fill.outlinecolor,"fill-opacity":n.opacity});break;case"symbol":var i=n.symbol,u=T(i.textposition,i.iconsize);g.extendFlat(d,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":u.anchor,"text-offset":u.offset,"symbol-placement":i.placement}),g.extendFlat(s,{"icon-color":n.color,"text-color":i.textfont.color,"text-opacity":n.opacity});break;case"raster":g.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":n.opacity})}return{layout:d,paint:s}}r.update=function(n){this.visible?this.needsNewImage(n)?this.updateImage(n):this.needsNewSource(n)?(this.removeLayer(),this.updateSource(n),this.updateLayer(n)):this.needsNewLayer(n)?this.updateLayer(n):this.updateStyle(n):(this.updateSource(n),this.updateLayer(n)),this.visible=t(n)},r.needsNewImage=function(n){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===n.sourcetype&&(this.source!==n.source||JSON.stringify(this.coordinates)!==JSON.stringify(n.coordinates))},r.needsNewSource=function(n){return this.sourceType!==n.sourcetype||JSON.stringify(this.source)!==JSON.stringify(n.source)||this.layerType!==n.type},r.needsNewLayer=function(n){return this.layerType!==n.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},r.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},r.updateImage=function(n){this.subplot.map.getSource(this.idSource).updateImage({url:n.source,coordinates:n.coordinates});var d=this.findFollowingMapboxLayerId(this.lookupBelow());null!==d&&this.subplot.map.moveLayer(this.idLayer,d)},r.updateSource=function(n){var i,u,f,p,y,d=this.subplot.map;if(d.getSource(this.idSource)&&d.removeSource(this.idSource),this.sourceType=n.sourcetype,this.source=n.source,t(n)){var s=(p=(i=n).source,y={type:f=i.sourcetype},"geojson"===f?u="data":"vector"===f?u="string"==typeof p?"url":"tiles":"raster"===f?(u="tiles",y.tileSize=256):"image"===f&&(u="url",y.coordinates=i.coordinates),y[u]=p,i.sourceattribution&&(y.attribution=x(i.sourceattribution)),y);d.addSource(this.idSource,s)}},r.findFollowingMapboxLayerId=function(n){if("traces"===n)for(var d=this.subplot.getMapLayers(),s=0;s<d.length;s++){var i=d[s].id;if("string"==typeof i&&0===i.indexOf(b.traceLayerPrefix)){n=i;break}}return n},r.updateLayer=function(n){var d=this.subplot,s=a(n),i=this.lookupBelow(),u=this.findFollowingMapboxLayerId(i);this.removeLayer(),t(n)&&d.addLayer({id:this.idLayer,source:this.idSource,"source-layer":n.sourcelayer||"",type:n.type,minzoom:n.minzoom,maxzoom:n.maxzoom,layout:s.layout,paint:s.paint},u),this.layerType=n.type,this.below=i},r.updateStyle=function(n){if(t(n)){var d=a(n);this.subplot.setOptions(this.idLayer,"setLayoutProperty",d.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",d.paint)}},r.removeLayer=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer)},r.dispose=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer),n.getSource(this.idSource)&&n.removeSource(this.idSource)},ae.exports=function(n,d,s){var i=new e(n,d);return i.update(s),i}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/color").defaultLine,T=_("../domain").attributes,b=_("../font_attributes"),e=_("../../traces/scatter/attributes").textposition,r=_("../../plot_api/edit_types").overrideAll,t=_("../../plot_api/plot_template").templatedArray,a=_("./constants"),n=b({});n.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(ae.exports=r({_arrayAttrRegexps:[g.counterRegex("mapbox",".layers",!0)],domain:T({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:a.styleValuesMapbox.concat(a.styleValuesNonMapbox),dflt:a.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:t("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:x},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:x}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:n,textposition:g.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../subplot_defaults"),T=_("../array_container_defaults"),b=_("./layout_attributes");function e(t,a,n,d){n("accesstoken",d.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),T(t,a,{name:"layers",handleItemDefaults:r}),a._input=t}function r(t,a){function n(f,p){return g.coerce(t,a,b.layers,f,p)}if(n("visible")){var d,s=n("sourcetype"),i="raster"===s||"image"===s;n("source"),n("sourceattribution"),"vector"===s&&n("sourcelayer"),"image"===s&&n("coordinates"),i&&(d="raster");var u=n("type",d);i&&"raster"!==u&&(u=a.type="raster",g.log("Source types *raster* and *image* must drawn *raster* layer type.")),n("below"),n("color"),n("opacity"),n("minzoom"),n("maxzoom"),"circle"===u&&n("circle.radius"),"line"===u&&(n("line.width"),n("line.dash")),"fill"===u&&n("fill.outlinecolor"),"symbol"===u&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),g.coerceFont(n,"symbol.textfont"),n("symbol.textposition"),n("symbol.placement"))}}ae.exports=function(t,a,n){x(t,a,n,{type:"mapbox",attributes:b,handleDefaults:e,partition:"y",accessToken:a._mapboxAccessToken})}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(_,ae,ie){"use strict";var g=_("mapbox-gl/dist/mapbox-gl-unminified"),x=_("../../lib"),T=_("../../lib/geo_location_utils"),b=_("../../registry"),e=_("../cartesian/axes"),r=_("../../components/dragelement"),t=_("../../components/fx"),a=_("../../components/dragelement/helpers"),n=a.rectMode,d=a.drawMode,s=a.selectMode,i=_("../cartesian/select").prepSelect,u=_("../cartesian/select").clearSelect,f=_("../cartesian/select").clearSelectionsCache,p=_("../cartesian/select").selectOnClick,y=_("./constants"),m=_("./layers");function l(E,P){this.id=P,this.gd=E;var S=E._fullLayout,F=E._context;this.container=S._glcontainer.node(),this.isStatic=F.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var w=l.prototype;w.plot=function(E,P,S){var F,R=this;R.map&&P[R.id].accesstoken!==R.accessToken&&(R.map.remove(),R.map=null,R.styleObj=null,R.traceHash={},R.layerList=[]),F=new Promise(R.map?function(L,B){R.updateMap(E,P,L,B)}:function(L,B){R.createMap(E,P,L,B)}),S.push(F)},w.createMap=function(E,P,S,F){var R=this,D=P[R.id],L=R.styleObj=A(D.style);R.accessToken=D.accesstoken;var B=R.map=new g.Map({container:R.div,style:L.style,center:k(D.center),zoom:D.zoom,bearing:D.bearing,pitch:D.pitch,interactive:!R.isStatic,preserveDrawingBuffer:R.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new g.AttributionControl({compact:!0}));B._canvas.style.left="0px",B._canvas.style.top="0px",R.rejectOnError(F),R.isStatic||R.initFx(E,P);var V=[];V.push(new Promise(function(Z){B.once("load",Z)})),V=V.concat(T.fetchTraceGeoData(E)),Promise.all(V).then(function(){R.fillBelowLookup(E,P),R.updateData(E),R.updateLayout(P),R.resolveOnRender(S)}).catch(F)},w.updateMap=function(E,P,S,F){var R=this,D=R.map,L=P[this.id];R.rejectOnError(F);var B=[],V=A(L.style);JSON.stringify(R.styleObj)!==JSON.stringify(V)&&(R.styleObj=V,D.setStyle(V.style),R.traceHash={},B.push(new Promise(function(Z){D.once("styledata",Z)}))),B=B.concat(T.fetchTraceGeoData(E)),Promise.all(B).then(function(){R.fillBelowLookup(E,P),R.updateData(E),R.updateLayout(P),R.resolveOnRender(S)}).catch(F)},w.fillBelowLookup=function(E,P){var S,F,R=P[this.id].layers,D=this.belowLookup={},L=!1;for(S=0;S<E.length;S++){var B=E[S][0].trace,V=B._module;"string"==typeof B.below?F=B.below:V.getBelow&&(F=V.getBelow(B,this)),""===F&&(L=!0),D["trace-"+B.uid]=F||""}for(S=0;S<R.length;S++){var Z=R[S];D["layout-"+S]=F="string"==typeof Z.below?Z.below:L?"traces":""}var Y,ee,Q={};for(Y in D)Q[F=D[Y]]?Q[F].push(Y):Q[F]=[Y];for(F in Q){var $=Q[F];if($.length>1)for(S=0;S<$.length;S++)0===(Y=$[S]).indexOf("trace-")?(ee=Y.split("trace-")[1],this.traceHash[ee]&&(this.traceHash[ee].below=null)):0===Y.indexOf("layout-")&&(ee=Y.split("layout-")[1],this.layerList[ee]&&(this.layerList[ee].below=null))}};var v={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function A(E){var P={};return x.isPlainObject(E)?(P.id=E.id,P.style=E):"string"==typeof E?(P.id=E,P.style=-1!==y.styleValuesMapbox.indexOf(E)?M(E):y.stylesNonMapbox[E]?y.stylesNonMapbox[E]:E):(P.id=y.styleValueDflt,P.style=M(y.styleValueDflt)),P.transition={duration:0,delay:0},P}function M(E){return y.styleUrlPrefix+E+"-"+y.styleUrlSuffix}function k(E){return[E.lon,E.lat]}w.updateData=function(E){var P,S,F,R,D=this.traceHash,L=E.slice().sort(function(ee,Q){return v[ee[0].trace.type]-v[Q[0].trace.type]});for(F=0;F<L.length;F++){var B=L[F],V=!1;(P=D[(S=B[0].trace).uid])&&(P.type===S.type?(P.update(B),V=!0):P.dispose()),!V&&S._module&&(D[S.uid]=S._module.plot(this,B))}var Z=Object.keys(D);e:for(F=0;F<Z.length;F++){var Y=Z[F];for(R=0;R<E.length;R++)if(Y===(S=E[R][0].trace).uid)continue e;(P=D[Y]).dispose(),delete D[Y]}},w.updateLayout=function(E){var P=this.map,S=E[this.id];this.dragging||this.wheeling||(P.setCenter(k(S.center)),P.setZoom(S.zoom),P.setBearing(S.bearing),P.setPitch(S.pitch)),this.updateLayers(E),this.updateFramework(E),this.updateFx(E),this.map.resize(),this.gd._context._scrollZoom.mapbox?P.scrollZoom.enable():P.scrollZoom.disable()},w.resolveOnRender=function(E){var P=this.map;P.on("render",function S(){P.loaded()&&(P.off("render",S),setTimeout(E,10))})},w.rejectOnError=function(E){var P=this.map;function S(){E(new Error(y.mapOnErrorMsg))}P.once("error",S),P.once("style.error",S),P.once("source.error",S),P.once("tile.error",S),P.once("layer.error",S)},w.createFramework=function(E){var P=this,S=P.div=document.createElement("div");S.id=P.uid,S.style.position="absolute",P.container.appendChild(S),P.xaxis={_id:"x",c2p:function(F){return P.project(F).x}},P.yaxis={_id:"y",c2p:function(F){return P.project(F).y}},P.updateFramework(E),P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(P.mockAxis,E)},w.initFx=function(E,P){var S=this,F=S.gd,R=S.map;function D(){t.loneUnhover(P._hoverlayer)}function L(){var B=S.getView();F.emit("plotly_relayouting",S.getViewEditsWithDerived(B))}R.on("moveend",function(B){if(S.map){var V=F._fullLayout;if(B.originalEvent||S.wheeling){var Z=V[S.id];b.call("_storeDirectGUIEdit",F.layout,V._preGUI,S.getViewEdits(Z));var Y=S.getView();Z._input.center=Z.center=Y.center,Z._input.zoom=Z.zoom=Y.zoom,Z._input.bearing=Z.bearing=Y.bearing,Z._input.pitch=Z.pitch=Y.pitch,F.emit("plotly_relayout",S.getViewEditsWithDerived(Y))}B.originalEvent&&"mouseup"===B.originalEvent.type?S.dragging=!1:S.wheeling&&(S.wheeling=!1),V._rehover&&V._rehover()}}),R.on("wheel",function(){S.wheeling=!0}),R.on("mousemove",function(B){var V=S.div.getBoundingClientRect(),Z=[B.originalEvent.offsetX,B.originalEvent.offsetY];B.target.getBoundingClientRect=function(){return V},S.xaxis.p2c=function(){return R.unproject(Z).lng},S.yaxis.p2c=function(){return R.unproject(Z).lat},F._fullLayout._rehover=function(){F._fullLayout._hoversubplot===S.id&&F._fullLayout[S.id]&&t.hover(F,B,S.id)},t.hover(F,B,S.id),F._fullLayout._hoversubplot=S.id}),R.on("dragstart",function(){S.dragging=!0,D()}),R.on("zoomstart",D),R.on("mouseout",function(){F._fullLayout._hoversubplot=null}),R.on("drag",L),R.on("zoom",L),R.on("dblclick",function(){var B=F._fullLayout[S.id];b.call("_storeDirectGUIEdit",F.layout,F._fullLayout._preGUI,S.getViewEdits(B));var V=S.viewInitial;R.setCenter(k(V.center)),R.setZoom(V.zoom),R.setBearing(V.bearing),R.setPitch(V.pitch);var Z=S.getView();B._input.center=B.center=Z.center,B._input.zoom=B.zoom=Z.zoom,B._input.bearing=B.bearing=Z.bearing,B._input.pitch=B.pitch=Z.pitch,F.emit("plotly_doubleclick",null),F.emit("plotly_relayout",S.getViewEditsWithDerived(Z))}),S.clearSelect=function(){f(S.dragOptions),u(S.dragOptions.gd)},S.onClickInPanFn=function(B){return function(V){var Z=F._fullLayout.clickmode;Z.indexOf("select")>-1&&p(V.originalEvent,F,[S.xaxis],[S.yaxis],S.id,B),Z.indexOf("event")>-1&&t.click(F,V.originalEvent)}}},w.updateFx=function(E){var P=this,S=P.map,F=P.gd;if(!P.isStatic){var R,D=E.dragmode;R=n(D)?function(V,Z){(V.range={})[P.id]=[B([Z.xmin,Z.ymin]),B([Z.xmax,Z.ymax])]}:function(V,Z,Y){(V.lassoPoints={})[P.id]=Y.filtered.map(B)},P.dragOptions=x.extendDeep(P.dragOptions||{},{dragmode:E.dragmode,element:P.div,gd:F,plotinfo:{id:P.id,domain:E[P.id].domain,xaxis:P.xaxis,yaxis:P.yaxis,fillRangeItems:R},xaxes:[P.xaxis],yaxes:[P.yaxis],subplot:P.id}),S.off("click",P.onClickInPanHandler),s(D)||d(D)?(S.dragPan.disable(),S.on("zoomstart",P.clearSelect),P.dragOptions.prepFn=function(V,Z,Y){i(V,Z,Y,P.dragOptions,D)},r.init(P.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",P.clearSelect),P.div.onmousedown=null,P.onClickInPanHandler=P.onClickInPanFn(P.dragOptions),S.on("click",P.onClickInPanHandler))}function B(V){var Z=P.map.unproject(V);return[Z.lng,Z.lat]}},w.updateFramework=function(E){var P=E[this.id].domain,S=E._size,F=this.div.style;F.width=S.w*(P.x[1]-P.x[0])+"px",F.height=S.h*(P.y[1]-P.y[0])+"px",F.left=S.l+P.x[0]*S.w+"px",F.top=S.t+(1-P.y[1])*S.h+"px",this.xaxis._offset=S.l+P.x[0]*S.w,this.xaxis._length=S.w*(P.x[1]-P.x[0]),this.yaxis._offset=S.t+(1-P.y[1])*S.h,this.yaxis._length=S.h*(P.y[1]-P.y[0])},w.updateLayers=function(E){var P,S=E[this.id].layers,F=this.layerList;if(S.length!==F.length){for(P=0;P<F.length;P++)F[P].dispose();for(F=this.layerList=[],P=0;P<S.length;P++)F.push(m(this,P,S[P]))}else for(P=0;P<S.length;P++)F[P].update(S[P])},w.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},w.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},w.setOptions=function(E,P,S){for(var F in S)this.map[P](E,F,S[F])},w.getMapLayers=function(){return this.map.getStyle().layers},w.addLayer=function(E,P){var S=this.map;if("string"==typeof P){if(""===P)return void S.addLayer(E,P);for(var F=this.getMapLayers(),R=0;R<F.length;R++)if(P===F[R].id)return void S.addLayer(E,P);x.warn(["Trying to add layer with *below* value",P,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(E)},w.project=function(E){return this.map.project(new g.LngLat(E[0],E[1]))},w.getView=function(){var E=this.map,P=E.getCenter(),S={lon:P.lng,lat:P.lat},F=E.getCanvas(),R=parseInt(F.style.width),D=parseInt(F.style.height);return{center:S,zoom:E.getZoom(),bearing:E.getBearing(),pitch:E.getPitch(),_derived:{coordinates:[E.unproject([0,0]).toArray(),E.unproject([R,0]).toArray(),E.unproject([R,D]).toArray(),E.unproject([0,D]).toArray()]}}},w.getViewEdits=function(E){for(var P=this.id,S=["center","zoom","bearing","pitch"],F={},R=0;R<S.length;R++){var D=S[R];F[P+"."+D]=E[D]}return F},w.getViewEditsWithDerived=function(E){var P=this.id,S=this.getViewEdits(E);return S[P+"._derived"]=E._derived,S},ae.exports=l},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(_,ae,ie){"use strict";ae.exports=function(g){var x=g.editType;return{t:{valType:"number",dflt:0,editType:x},r:{valType:"number",dflt:0,editType:x},b:{valType:"number",dflt:0,editType:x},l:{valType:"number",dflt:0,editType:x},editType:x}}},{}],619:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("d3-time-format").timeFormatLocale,T=_("d3-format").formatLocale,b=_("fast-isnumeric"),e=_("../registry"),r=_("../plot_api/plot_schema"),t=_("../plot_api/plot_template"),a=_("../lib"),n=_("../components/color"),d=_("../constants/numerical").BADNUM,s=_("./cartesian/axis_ids"),i=_("./cartesian/handle_outline").clearSelect,u=_("./animation_attributes"),f=_("./frame_attributes"),p=_("../plots/get_data").getModuleCalcData,y=a.relinkPrivateKeys,m=a._,l=ae.exports={};a.extendFlat(l,e),l.attributes=_("./attributes"),l.attributes.type.values=l.allTypes,l.fontAttrs=_("./font_attributes"),l.layoutAttributes=_("./layout_attributes"),l.fontWeight="normal";var w=l.transformsRegistry,v=_("./command");l.executeAPICommand=v.executeAPICommand,l.computeAPICommandBindings=v.computeAPICommandBindings,l.manageCommandObserver=v.manageCommandObserver,l.hasSimpleAPICommandBindings=v.hasSimpleAPICommandBindings,l.redrawText=function(Y){return Y=a.getGraphDiv(Y),new Promise(function(ee){setTimeout(function(){Y._fullLayout&&(e.getComponentMethod("annotations","draw")(Y),e.getComponentMethod("legend","draw")(Y),e.getComponentMethod("colorbar","draw")(Y),ee(l.previousPromises(Y)))},300)})},l.resize=function(Y){var ee;Y=a.getGraphDiv(Y);var Q=new Promise(function($,K){Y&&!a.isHidden(Y)||K(new Error("Resize must be passed a displayed plot div element.")),Y._redrawTimer&&clearTimeout(Y._redrawTimer),Y._resolveResize&&(ee=Y._resolveResize),Y._resolveResize=$,Y._redrawTimer=setTimeout(function(){if(!Y.layout||Y.layout.width&&Y.layout.height||a.isHidden(Y))$(Y);else{delete Y.layout.width,delete Y.layout.height;var oe=Y.changed;Y.autoplay=!0,e.call("relayout",Y,{autosize:!0}).then(function(){Y.changed=oe,Y._resolveResize===$&&(delete Y._resolveResize,$(Y))})}},100)});return ee&&ee(Q),Q},l.previousPromises=function(Y){if((Y._promises||[]).length)return Promise.all(Y._promises).then(function(){Y._promises=[]})},l.addLinks=function(Y){if(Y._context.showLink||Y._context.showSources){var ee=Y._fullLayout,Q=a.ensureSingle(ee._paper,"text","js-plot-link-container",function(G){G.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var re=g.select(this);re.append("tspan").classed("js-link-to-tool",!0),re.append("tspan").classed("js-link-spacer",!0),re.append("tspan").classed("js-sourcelinks",!0)})}),$=Q.node(),K={y:ee._paper.attr("height")-9};document.body.contains($)&&$.getComputedTextLength()>=ee.width-20?(K["text-anchor"]="start",K.x=5):(K["text-anchor"]="end",K.x=ee._paper.attr("width")-7),Q.attr(K);var oe=Q.select(".js-link-to-tool"),j=Q.select(".js-link-spacer"),H=Q.select(".js-sourcelinks");Y._context.showSources&&Y._context.showSources(Y),Y._context.showLink&&function(G,re){re.text("");var q=re.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(G._context.linkText+" "+String.fromCharCode(187));if(G._context.sendData)q.on("click",function(){l.sendDataToCloud(G)});else{var te=window.location.pathname.split("/"),ne=window.location.search;q.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+te[2].split(".")[0]+"/"+te[1]+ne})}}(Y,oe),j.text(oe.text()&&H.text()?" - ":"")}},l.sendDataToCloud=function(Y){var ee=(window.PLOTLYENV||{}).BASE_URL||Y._context.plotlyServerURL;if(ee){Y.emit("plotly_beforeexport");var Q=g.select(Y).append("div").attr("id","hiddenform").style("display","none"),$=Q.append("form").attr({action:ee+"/external",method:"post",target:"_blank"});return $.append("input").attr({type:"text",name:"data"}).node().value=l.graphJson(Y,!1,"keepdata"),$.node().submit(),Q.remove(),Y.emit("plotly_afterexport"),!1}};var A=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],M=["year","month","dayMonth","dayMonthYear"];function k(Y,ee){var Q=Y._context.locale;Q||(Q="en-US");var $=!1,K={};function oe(te){for(var ne=!0,le=0;le<ee.length;le++){var ue=ee[le];K[ue]||(te[ue]?K[ue]=te[ue]:ne=!1)}ne&&($=!0)}for(var j=0;j<2;j++){for(var H=Y._context.locales,G=0;G<2;G++){var re=(H[Q]||{}).format;if(re&&(oe(re),$))break;H=e.localeRegistry}var q=Q.split("-")[0];if($||q===Q)break;Q=q}return $||oe(e.localeRegistry.en.format),K}function E(Y,ee){var Q={_fullLayout:ee},$="x"===Y._id.charAt(0),K=Y._mainAxis._anchorAxis,oe="",j="",H="";if(K&&(H=K._mainAxis._id,oe=$?Y._id+H:H+Y._id),!oe||!ee._plots[oe]){oe="";for(var G=Y._counterAxes,re=0;re<G.length;re++){var q=G[re],te=$?Y._id+q:q+Y._id;j||(j=te);var ne=s.getFromId(Q,q);if(H&&ne.overlaying===H){oe=te;break}}}return oe||j}function P(Y){var ee=Y.transforms;if(Array.isArray(ee)&&ee.length)for(var Q=0;Q<ee.length;Q++){var $=ee[Q],K=$._module||w[$.type];if(K&&K.makesData)return!0}return!1}function S(Y,ee,Q,$){for(var K=Y.transforms,oe=[Y],j=0;j<K.length;j++){var H=K[j],G=w[H.type];G&&G.transform&&(oe=G.transform(oe,{transform:H,fullTrace:Y,fullData:ee,layout:Q,fullLayout:$,transformIndex:j}))}return oe}function F(Y){return"string"==typeof Y&&"px"===Y.substr(Y.length-2)&&parseFloat(Y)}function R(Y){var ee=Y.margin;if(!Y._size){var Q=Y._size={l:Math.round(ee.l),r:Math.round(ee.r),t:Math.round(ee.t),b:Math.round(ee.b),p:Math.round(ee.pad)};Q.w=Math.round(Y.width)-Q.l-Q.r,Q.h=Math.round(Y.height)-Q.t-Q.b}Y._pushmargin||(Y._pushmargin={}),Y._pushmarginIds||(Y._pushmarginIds={})}l.supplyDefaults=function(Y,ee){var $e,et,Q=ee&&ee.skipUpdateCalc,$=Y._fullLayout||{};if($._skipDefaults)delete $._skipDefaults;else{var K,oe=Y._fullLayout={},j=Y.layout||{},H=Y._fullData||[],G=Y._fullData=[],re=Y.data||[],q=Y.calcdata||[],te=Y._context||{};Y._transitionData||l.createTransitionData(Y),oe._dfltTitle={plot:m(Y,"Click to enter Plot title"),x:m(Y,"Click to enter X axis title"),y:m(Y,"Click to enter Y axis title"),colorbar:m(Y,"Click to enter Colorscale title"),annotation:m(Y,"new text")},oe._traceWord=m(Y,"trace");var ne=k(Y,A);if(oe._mapboxAccessToken=te.mapboxAccessToken,$._initialAutoSizeIsDone){var le=$.width,ue=$.height;l.supplyLayoutGlobalDefaults(j,oe,ne),j.width||(oe.width=le),j.height||(oe.height=ue),l.sanitizeMargins(oe)}else{l.supplyLayoutGlobalDefaults(j,oe,ne);var de=!j.width||!j.height,he=oe.autosize;de&&(he||te.autosizable)?l.plotAutoSize(Y,j,oe):de&&l.sanitizeMargins(oe),!he&&de&&(j.width=oe.width,j.height=oe.height)}oe._d3locale=(($e=ne).decimal=(et=oe.separators).charAt(0),$e.thousands=et.charAt(1),{numberFormat:function(tt){try{tt=T($e).format(a.adjustFormat(tt))}catch(ft){return a.warnBadFormat(tt),a.noFormat}return tt},timeFormat:x($e).utcFormat}),oe._extraFormat=k(Y,M),oe._initialAutoSizeIsDone=!0,oe._dataLength=re.length,oe._modules=[],oe._visibleModules=[],oe._basePlotModules=[];var ge=oe._subplots=function(){var $e,et,tt=e.collectableSubplotTypes,ft={};if(!tt){tt=[];var bt=e.subplotsRegistry;for(var Ct in bt){var Vt=bt[Ct].attr;if(Vt&&(tt.push(Ct),Array.isArray(Vt)))for(et=0;et<Vt.length;et++)a.pushUnique(tt,Vt[et])}}for($e=0;$e<tt.length;$e++)ft[tt[$e]]=[];return ft}(),we=oe._splomAxes={x:{},y:{}},ke=oe._splomSubplots={};oe._splomGridDflt={},oe._scatterStackOpts={},oe._firstScatter={},oe._alignmentOpts={},oe._colorAxes={},oe._requestRangeslider={},oe._traceUids=function($e,et){var tt,ft,bt=et.length,Ct=[];for(tt=0;tt<$e.length;tt++){var Vt=$e[tt]._fullInput;Vt!==ft&&Ct.push(Vt),ft=Vt}var Ft=Ct.length,ht=new Array(bt),ut={};function Rt(Ze,Qe){ht[Qe]=Ze,ut[Ze]=1}function nn(Ze,Qe){if(Ze&&"string"==typeof Ze&&!ut[Ze])return Rt(Ze,Qe),!0}for(tt=0;tt<bt;tt++){var cn=et[tt].uid;"number"==typeof cn&&(cn=String(cn)),nn(cn,tt)||tt<Ft&&nn(Ct[tt].uid,tt)||Rt(a.randstr(ut),tt)}return ht}(H,re),oe._globalTransforms=(Y._context||{}).globalTransforms,l.supplyDataDefaults(re,G,j,oe);var De=Object.keys(we.x),Ee=Object.keys(we.y);if(De.length>1&&Ee.length>1){for(e.getComponentMethod("grid","sizeDefaults")(j,oe),K=0;K<De.length;K++)a.pushUnique(ge.xaxis,De[K]);for(K=0;K<Ee.length;K++)a.pushUnique(ge.yaxis,Ee[K]);for(var Re in ke)a.pushUnique(ge.cartesian,Re)}if(oe._has=l._hasPlotType.bind(oe),H.length===G.length)for(K=0;K<G.length;K++)y(G[K],H[K]);l.supplyLayoutModuleDefaults(j,oe,G,Y._transitionData);var ve=oe._visibleModules,Te=[];for(K=0;K<ve.length;K++){var Ie=ve[K].crossTraceDefaults;Ie&&a.pushUnique(Te,Ie)}for(K=0;K<Te.length;K++)Te[K](G,oe);oe._hasOnlyLargeSploms=1===oe._basePlotModules.length&&"splom"===oe._basePlotModules[0].name&&De.length>15&&Ee.length>15&&0===oe.shapes.length&&0===oe.images.length,l.linkSubplots(G,oe,H,$),l.cleanPlot(G,oe,H,$);var Ce=!(!$._has||!$._has("gl2d")),Pe=!(!oe._has||!oe._has("gl2d")),Ve=!(!$._has||!$._has("cartesian"))||Ce,qe=!(!oe._has||!oe._has("cartesian"))||Pe;Ve&&!qe?$._bgLayer.remove():qe&&!Ve&&(oe._shouldCreateBgLayer=!0),$._zoomlayer&&!Y._dragging&&i({_fullLayout:$}),function($e,et){var tt,ft=[];et.meta&&(tt=et._meta={meta:et.meta,layout:{meta:et.meta}});for(var bt=0;bt<$e.length;bt++){var Ct=$e[bt];Ct.meta?ft[Ct.index]=Ct._meta={meta:Ct.meta}:et.meta&&(Ct._meta={meta:et.meta}),et.meta&&(Ct._meta.layout={meta:et.meta})}ft.length&&(tt||(tt=et._meta={}),tt.data=ft)}(G,oe),y(oe,$),e.getComponentMethod("colorscale","crossTraceDefaults")(G,oe),oe._preGUI||(oe._preGUI={}),oe._tracePreGUI||(oe._tracePreGUI={});var Je,lt=oe._tracePreGUI,He={};for(Je in lt)He[Je]="old";for(K=0;K<G.length;K++)He[Je=G[K]._fullInput.uid]||(lt[Je]={}),He[Je]="new";for(Je in He)"old"===He[Je]&&delete lt[Je];R(oe),e.getComponentMethod("rangeslider","makeData")(oe),Q||q.length!==G.length||l.supplyDefaultsUpdateCalc(q,G)}},l.supplyDefaultsUpdateCalc=function(Y,ee){for(var Q=0;Q<ee.length;Q++){var $=ee[Q],K=(Y[Q]||[])[0];if(K&&K.trace){var oe=K.trace;if(oe._hasCalcTransform){var j,H,G,re=oe._arrayAttrs;for(j=0;j<re.length;j++)G=a.nestedProperty(oe,H=re[j]).get().slice(),a.nestedProperty($,H).set(G)}K.trace=$}}},l.createTransitionData=function(Y){Y._transitionData||(Y._transitionData={}),Y._transitionData._frames||(Y._transitionData._frames=[]),Y._transitionData._frameHash||(Y._transitionData._frameHash={}),Y._transitionData._counter||(Y._transitionData._counter=0),Y._transitionData._interruptCallbacks||(Y._transitionData._interruptCallbacks=[])},l._hasPlotType=function(Y){var ee,Q=this._basePlotModules||[];for(ee=0;ee<Q.length;ee++)if(Q[ee].name===Y)return!0;var $=this._modules||[];for(ee=0;ee<$.length;ee++){var K=$[ee].name;if(K===Y)return!0;var oe=e.modules[K];if(oe&&oe.categories[Y])return!0}return!1},l.cleanPlot=function(Y,ee,Q,$){var K,oe,j=$._basePlotModules||[];for(K=0;K<j.length;K++){var H=j[K];H.clean&&H.clean(Y,ee,Q,$)}var G=$._has&&$._has("gl"),re=ee._has&&ee._has("gl");G&&!re&&void 0!==$._glcontainer&&($._glcontainer.selectAll(".gl-canvas").remove(),$._glcontainer.selectAll(".no-webgl").remove(),$._glcanvas=null);var q=!!$._infolayer;e:for(K=0;K<Q.length;K++){var te=Q[K].uid;for(oe=0;oe<Y.length;oe++)if(te===Y[oe].uid)continue e;q&&$._infolayer.select(".cb"+te).remove()}},l.linkSubplots=function(Y,ee,Q,$){var K,oe,j=$._plots||{},H=ee._plots={},G=ee._subplots,re={_fullData:Y,_fullLayout:ee},q=G.cartesian.concat(G.gl2d||[]);for(K=0;K<q.length;K++){var te,ne=q[K],le=j[ne],ue=s.getFromId(re,ne,"x"),de=s.getFromId(re,ne,"y");for(le?te=H[ne]=le:(te=H[ne]={}).id=ne,ue._counterAxes.push(de._id),de._counterAxes.push(ue._id),ue._subplotsWith.push(ne),de._subplotsWith.push(ne),te.xaxis=ue,te.yaxis=de,te._hasClipOnAxisFalse=!1,oe=0;oe<Y.length;oe++){var he=Y[oe];if(he.xaxis===te.xaxis._id&&he.yaxis===te.yaxis._id&&!1===he.cliponaxis){te._hasClipOnAxisFalse=!0;break}}}var be,ge=s.list(re,null,!0);for(K=0;K<ge.length;K++){var we=null;(be=ge[K]).overlaying&&(we=s.getFromId(re,be.overlaying))&&we.overlaying&&(be.overlaying=!1,we=null),be._mainAxis=we||be,we&&(be.domain=we.domain.slice()),be._anchorAxis="free"===be.anchor?null:s.getFromId(re,be.anchor)}for(K=0;K<ge.length;K++)if((be=ge[K])._counterAxes.sort(s.idSort),be._subplotsWith.sort(a.subplotSort),be._mainSubplot=E(be,ee),be._counterAxes.length&&(be.spikemode&&-1!==be.spikemode.indexOf("across")||be.automargin&&be.mirror&&"free"!==be.anchor||e.getComponentMethod("rangeslider","isVisible")(be))){var ke=1,De=0;for(oe=0;oe<be._counterAxes.length;oe++){var Ee=s.getFromId(re,be._counterAxes[oe]);ke=Math.min(ke,Ee.domain[0]),De=Math.max(De,Ee.domain[1])}ke<De&&(be._counterDomainMin=ke,be._counterDomainMax=De)}},l.clearExpandedTraceDefaultColors=function(Y){var ee,Q,$;for(Q=[],(ee=Y._module._colorAttrs)||(Y._module._colorAttrs=ee=[],r.crawl(Y._module.attributes,function(K,oe,j,H){Q[H]=oe,Q.length=H+1,"color"===K.valType&&void 0===K.dflt&&ee.push(Q.join("."))})),$=0;$<ee.length;$++)a.nestedProperty(Y,"_input."+ee[$]).get()||a.nestedProperty(Y,ee[$]).set(null)},l.supplyDataDefaults=function(Y,ee,Q,$){var K,oe,j,H=$._modules,G=$._visibleModules,re=$._basePlotModules,q=0,te=0;function ne(Re){ee.push(Re);var ve=Re._module;ve&&(a.pushUnique(H,ve),!0===Re.visible&&a.pushUnique(G,ve),a.pushUnique(re,Re._module.basePlotModule),q++,!1!==Re._input.visible&&te++)}$._transformModules=[];var le={},ue=[],he=t.traceTemplater((Q.template||{}).data||{});for(K=0;K<Y.length;K++){if((oe=he.newTrace(j=Y[K])).uid=$._traceUids[K],l.supplyTraceDefaults(j,oe,te,$,K),oe.index=K,oe._input=j,oe._expandedIndex=q,oe.transforms&&oe.transforms.length)for(var be=!1!==j.visible&&!1===oe.visible,ge=S(oe,ee,Q,$),we=0;we<ge.length;we++){var ke=ge[we],De={_template:oe._template,type:oe.type,uid:oe.uid+we};be&&!1===ke.visible&&delete ke.visible,l.supplyTraceDefaults(ke,De,q,$,K),y(De,ke),De.index=K,De._input=j,De._fullInput=oe,De._expandedIndex=q,De._expandedInput=ke,ne(De)}else oe._fullInput=oe,oe._expandedInput=oe,ne(oe);e.traceIs(oe,"carpetAxis")&&(le[oe.carpet]=oe),e.traceIs(oe,"carpetDependent")&&ue.push(K)}for(K=0;K<ue.length;K++)if((oe=ee[ue[K]]).visible){var Ee=le[oe.carpet];oe._carpet=Ee,Ee&&Ee.visible?(oe.xaxis=Ee.xaxis,oe.yaxis=Ee.yaxis):oe.visible=!1}},l.supplyAnimationDefaults=function(Y){var ee;Y=Y||{};var Q={};function $(K,oe){return a.coerce(Y||{},Q,u,K,oe)}if($("mode"),$("direction"),$("fromcurrent"),Array.isArray(Y.frame))for(Q.frame=[],ee=0;ee<Y.frame.length;ee++)Q.frame[ee]=l.supplyAnimationFrameDefaults(Y.frame[ee]||{});else Q.frame=l.supplyAnimationFrameDefaults(Y.frame||{});if(Array.isArray(Y.transition))for(Q.transition=[],ee=0;ee<Y.transition.length;ee++)Q.transition[ee]=l.supplyAnimationTransitionDefaults(Y.transition[ee]||{});else Q.transition=l.supplyAnimationTransitionDefaults(Y.transition||{});return Q},l.supplyAnimationFrameDefaults=function(Y){var ee={};function Q($,K){return a.coerce(Y||{},ee,u.frame,$,K)}return Q("duration"),Q("redraw"),ee},l.supplyAnimationTransitionDefaults=function(Y){var ee={};function Q($,K){return a.coerce(Y||{},ee,u.transition,$,K)}return Q("duration"),Q("easing"),ee},l.supplyFrameDefaults=function(Y){var ee={};function Q($,K){return a.coerce(Y,ee,f,$,K)}return Q("group"),Q("name"),Q("traces"),Q("baseframe"),Q("data"),Q("layout"),ee},l.supplyTraceDefaults=function(Y,ee,Q,$,K){var oe,j=$.colorway||n.defaults,H=j[Q%j.length];function G(ge,we){return a.coerce(Y,ee,l.attributes,ge,we)}var re=G("visible");G("type"),G("name",$._traceWord+" "+K),G("uirevision",$.uirevision);var q=l.getModule(ee);if(ee._module=q,q){var te=q.basePlotModule,ne=te.attr,le=te.attributes;if(ne&&le){var ue=$._subplots,de="";if(re||"gl2d"!==te.name){if(Array.isArray(ne))for(oe=0;oe<ne.length;oe++){var he=ne[oe],be=a.coerce(Y,ee,le,he);ue[he]&&a.pushUnique(ue[he],be),de+=be}else de=a.coerce(Y,ee,le,ne);ue[te.name]&&a.pushUnique(ue[te.name],de)}}}return re&&(G("customdata"),G("ids"),G("meta"),e.traceIs(ee,"showLegend")?(a.coerce(Y,ee,q.attributes.showlegend?q.attributes:l.attributes,"showlegend"),G("legendgroup"),G("legendgrouptitle.text"),G("legendrank"),ee._dfltShowLegend=!0):ee._dfltShowLegend=!1,q&&q.supplyDefaults(Y,ee,H,$),e.traceIs(ee,"noOpacity")||G("opacity"),e.traceIs(ee,"notLegendIsolatable")&&(ee.visible=!!ee.visible),e.traceIs(ee,"noHover")||(ee.hovertemplate||a.coerceHoverinfo(Y,ee,$),"parcats"!==ee.type&&e.getComponentMethod("fx","supplyDefaults")(Y,ee,H,$)),q&&q.selectPoints&&G("selectedpoints"),l.supplyTransformDefaults(Y,ee,$)),ee},l.hasMakesDataTransform=P,l.supplyTransformDefaults=function(Y,ee,Q){if(ee._length||P(Y)){var $=Q._globalTransforms||[],K=Q._transformModules||[];if(Array.isArray(Y.transforms)||0!==$.length)for(var j=$.concat(Y.transforms||[]),H=ee.transforms=[],G=0;G<j.length;G++){var re,q=j[G],te=q.type,ne=w[te],le=!(q._module&&q._module===ne),ue=ne&&"function"==typeof ne.transform;ne||a.warn("Unrecognized transform type "+te+"."),ne&&ne.supplyDefaults&&(le||ue)?((re=ne.supplyDefaults(q,ee,Q,Y)).type=te,re._module=ne,a.pushUnique(K,ne)):re=a.extendFlat({},q),H.push(re)}}},l.supplyLayoutGlobalDefaults=function(Y,ee,Q){function $(G,re){return a.coerce(Y,ee,l.layoutAttributes,G,re)}var K=Y.template;a.isPlainObject(K)&&(ee.template=K,ee._template=K.layout,ee._dataTemplate=K.data),$("autotypenumbers");var oe=a.coerceFont($,"font");a.coerceFont($,"title.font",a.extendFlat({},oe,{size:Math.round(1.4*oe.size)})),$("title.text",ee._dfltTitle.plot),$("title.xref"),$("title.yref"),$("title.x"),$("title.y"),$("title.xanchor"),$("title.yanchor"),$("title.pad.t"),$("title.pad.r"),$("title.pad.b"),$("title.pad.l"),$("uniformtext.mode")&&$("uniformtext.minsize"),$("autosize",!(Y.width&&Y.height)),$("width"),$("height"),$("margin.l"),$("margin.r"),$("margin.t"),$("margin.b"),$("margin.pad"),$("margin.autoexpand"),Y.width&&Y.height&&l.sanitizeMargins(ee),e.getComponentMethod("grid","sizeDefaults")(Y,ee),$("paper_bgcolor"),$("separators",Q.decimal+Q.thousands),$("hidesources"),$("colorway"),$("datarevision");var H=$("uirevision");$("editrevision",H),$("selectionrevision",H),e.getComponentMethod("modebar","supplyLayoutDefaults")(Y,ee),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Y,ee,$),$("meta"),a.isPlainObject(Y.transition)&&($("transition.duration"),$("transition.easing"),$("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(Y,ee,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Y,ee,$)},l.plotAutoSize=function(Y,ee,Q){var $,K,oe=Y._context||{},j=oe.frameMargins,H=a.isPlotDiv(Y);if(H&&Y.emit("plotly_autosize"),oe.fillFrame)$=window.innerWidth,K=window.innerHeight,document.body.style.overflow="hidden";else{var G=H?window.getComputedStyle(Y):{};if($=F(G.width)||F(G.maxWidth)||Q.width,K=F(G.height)||F(G.maxHeight)||Q.height,b(j)&&j>0){var re=1-2*j;$=Math.round(re*$),K=Math.round(re*K)}}var q=l.layoutAttributes.width.min,te=l.layoutAttributes.height.min;$<q&&($=q),K<te&&(K=te);var ne=!ee.width&&Math.abs(Q.width-$)>1,le=!ee.height&&Math.abs(Q.height-K)>1;(le||ne)&&(ne&&(Q.width=$),le&&(Q.height=K)),Y._initialAutoSize||(Y._initialAutoSize={width:$,height:K}),l.sanitizeMargins(Q)},l.supplyLayoutModuleDefaults=function(Y,ee,Q,$){var K,oe,j,H=e.componentsRegistry,G=ee._basePlotModules,re=e.subplotsRegistry.cartesian;for(K in H)(j=H[K]).includeBasePlot&&j.includeBasePlot(Y,ee);for(var q in G.length||G.push(re),ee._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(Y,ee),re.finalizeSubplots(Y,ee)),ee._subplots)ee._subplots[q].sort(a.subplotSort);for(oe=0;oe<G.length;oe++)(j=G[oe]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,ee,Q);var te=ee._modules;for(oe=0;oe<te.length;oe++)(j=te[oe]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,ee,Q);var ne=ee._transformModules;for(oe=0;oe<ne.length;oe++)(j=ne[oe]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,ee,Q,$);for(K in H)(j=H[K]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,ee,Q)},l.purge=function(Y){var ee=Y._fullLayout||{};void 0!==ee._glcontainer&&(ee._glcontainer.selectAll(".gl-canvas").remove(),ee._glcontainer.remove(),ee._glcanvas=null),ee._modeBar&&ee._modeBar.destroy(),Y._transitionData&&(Y._transitionData._interruptCallbacks&&(Y._transitionData._interruptCallbacks.length=0),Y._transitionData._animationRaf&&window.cancelAnimationFrame(Y._transitionData._animationRaf)),a.clearThrottle(),a.clearResponsive(Y),delete Y.data,delete Y.layout,delete Y._fullData,delete Y._fullLayout,delete Y.calcdata,delete Y.empty,delete Y.fid,delete Y.undoqueue,delete Y.undonum,delete Y.autoplay,delete Y.changed,delete Y._promises,delete Y._redrawTimer,delete Y._hmlumcount,delete Y._hmpixcount,delete Y._transitionData,delete Y._transitioning,delete Y._initialAutoSize,delete Y._transitioningWithDuration,delete Y._dragging,delete Y._dragged,delete Y._dragdata,delete Y._hoverdata,delete Y._snapshotInProgress,delete Y._editing,delete Y._mouseDownTime,delete Y._legendMouseDownTime,Y.removeAllListeners&&Y.removeAllListeners()},l.style=function(Y){var ee,Q=Y._fullLayout._visibleModules,$=[];for(ee=0;ee<Q.length;ee++){var K=Q[ee];K.style&&a.pushUnique($,K.style)}for(ee=0;ee<$.length;ee++)$[ee](Y)},l.sanitizeMargins=function(Y){if(Y&&Y.margin){var ee,Q=Y.width,$=Y.height,K=Y.margin,j=$-(K.t+K.b);Q-(K.l+K.r)<0&&(ee=(Q-1)/(K.l+K.r),K.l=Math.floor(ee*K.l),K.r=Math.floor(ee*K.r)),j<0&&(ee=($-1)/(K.t+K.b),K.t=Math.floor(ee*K.t),K.b=Math.floor(ee*K.b))}},l.clearAutoMarginIds=function(Y){Y._fullLayout._pushmarginIds={}},l.allowAutoMargin=function(Y,ee){Y._fullLayout._pushmarginIds[ee]=1},l.autoMargin=function(Y,ee,Q){var $=Y._fullLayout,K=$.width,oe=$.height,j=$.margin,H=a.constrain(K-j.l-j.r,2,64),G=a.constrain(oe-j.t-j.b,2,64),re=Math.max(0,K-H),q=Math.max(0,oe-G),te=$._pushmargin,ne=$._pushmarginIds;if(!1!==j.autoexpand){if(Q){var le=Q.pad;if(void 0===le&&(le=Math.min(12,j.l,j.r,j.t,j.b)),re){var ue=(Q.l+Q.r)/re;ue>1&&(Q.l/=ue,Q.r/=ue)}if(q){var de=(Q.t+Q.b)/q;de>1&&(Q.t/=de,Q.b/=de)}te[ee]={l:{val:void 0!==Q.xl?Q.xl:Q.x,size:Q.l+le},r:{val:void 0!==Q.xr?Q.xr:Q.x,size:Q.r+le},b:{val:void 0!==Q.yb?Q.yb:Q.y,size:Q.b+le},t:{val:void 0!==Q.yt?Q.yt:Q.y,size:Q.t+le}},ne[ee]=1}else delete te[ee],delete ne[ee];if(!$._replotting)return l.doAutoMargin(Y)}},l.doAutoMargin=function(Y){var ee=Y._fullLayout,Q=ee.width,$=ee.height;ee._size||(ee._size={}),R(ee);var K=ee._size,oe=ee.margin,j=a.extendFlat({},K),H=oe.l,G=oe.r,re=oe.t,q=oe.b,te=ee._pushmargin,ne=ee._pushmarginIds;if(!1!==ee.margin.autoexpand){for(var le in te)ne[le]||delete te[le];for(var ue in te.base={l:{val:0,size:H},r:{val:1,size:G},t:{val:1,size:re},b:{val:0,size:q}},te){var de=te[ue].l||{},he=te[ue].b||{},be=de.val,ge=de.size,we=he.val,ke=he.size;for(var De in te){if(b(ge)&&te[De].r){var Ee=te[De].r.val,Re=te[De].r.size;if(Ee>be){var ve=(ge*Ee+(Re-Q)*be)/(Ee-be),Te=(Re*(1-be)+(ge-Q)*(1-Ee))/(Ee-be);ve+Te>H+G&&(H=ve,G=Te)}}if(b(ke)&&te[De].t){var Ie=te[De].t.val,Ce=te[De].t.size;if(Ie>we){var Pe=(ke*Ie+(Ce-$)*we)/(Ie-we),Ve=(Ce*(1-we)+(ke-$)*(1-Ie))/(Ie-we);Pe+Ve>q+re&&(q=Pe,re=Ve)}}}}}var bt,qe=a.constrain(Q-oe.l-oe.r,2,64),Je=a.constrain($-oe.t-oe.b,2,64),lt=Math.max(0,Q-qe),He=Math.max(0,$-Je);if(lt){var $e=(H+G)/lt;$e>1&&(H/=$e,G/=$e)}if(He){var et=(q+re)/He;et>1&&(q/=et,re/=et)}if(K.l=Math.round(H),K.r=Math.round(G),K.t=Math.round(re),K.b=Math.round(q),K.p=Math.round(oe.pad),K.w=Math.round(Q)-K.l-K.r,K.h=Math.round($)-K.t-K.b,!ee._replotting&&l.didMarginChange(j,K)){"_redrawFromAutoMarginCount"in ee?ee._redrawFromAutoMarginCount++:ee._redrawFromAutoMarginCount=1;var tt=3*(1+Object.keys(ne).length);if(ee._redrawFromAutoMarginCount<tt)return e.call("_doPlot",Y);ee._size=j,a.warn("Too many auto-margin redraws.")}bt=s.list(Y,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Ct){for(var Vt=0;Vt<bt.length;Vt++){var Ft=bt[Vt][Ct];Ft&&Ft()}})};var D=["l","r","t","b","p","w","h"];function L(Y,ee,Q){var $=!1,oe=a.syncOrAsync([l.previousPromises,function(){if(Y._transitionData)return Y._transitioning=!1,function(j){var H=Promise.resolve();if(!j)return H;for(;j.length;)H=H.then(j.shift());return H}(Y._transitionData._interruptCallbacks)},Q.prepareFn,l.rehover,function(){return Y.emit("plotly_transitioning",[]),new Promise(function(j){Y._transitioning=!0,ee.duration>0&&(Y._transitioningWithDuration=!0),Y._transitionData._interruptCallbacks.push(function(){$=!0}),Q.redraw&&Y._transitionData._interruptCallbacks.push(function(){return e.call("redraw",Y)}),Y._transitionData._interruptCallbacks.push(function(){Y.emit("plotly_transitioninterrupted",[])});var H=0,G=0;function re(){return H++,function(){var q;G++,$||G!==H||(q=j,!Y._transitionData||(function(te){if(te)for(;te.length;)te.shift()}(Y._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(Q.redraw)return e.call("redraw",Y)}).then(function(){Y._transitioning=!1,Y._transitioningWithDuration=!1,Y.emit("plotly_transitioned",[])}).then(q)))}}Q.runFn(re),setTimeout(re())})}],Y);return oe&&oe.then||(oe=Promise.resolve()),oe.then(function(){return Y})}l.didMarginChange=function(Y,ee){for(var Q=0;Q<D.length;Q++){var $=D[Q],K=Y[$],oe=ee[$];if(!b(K)||Math.abs(oe-K)>1)return!0}return!1},l.graphJson=function(Y,ee,Q,$,K,oe){(K&&ee&&!Y._fullData||K&&!ee&&!Y._fullLayout)&&l.supplyDefaults(Y);var H=K?Y._fullLayout:Y.layout,G=(Y._transitionData||{})._frames;function re(ne,le){if("function"==typeof ne)return le?"_function_":null;if(a.isPlainObject(ne)){var ue,de={};return Object.keys(ne).sort().forEach(function(he){if(-1===["_","["].indexOf(he.charAt(0)))if("function"!=typeof ne[he]){if("keepdata"===Q){if("src"===he.substr(he.length-3))return}else if("keepstream"===Q){if("string"==typeof(ue=ne[he+"src"])&&ue.indexOf(":")>0&&!a.isPlainObject(ne.stream))return}else if("keepall"!==Q&&"string"==typeof(ue=ne[he+"src"])&&ue.indexOf(":")>0)return;de[he]=re(ne[he],le)}else le&&(de[he]="_function")}),de}return Array.isArray(ne)?ne.map(function(he){return re(he,le)}):a.isTypedArray(ne)?a.simpleMap(ne,a.identity):a.isJSDate(ne)?a.ms2DateTimeLocal(+ne):ne}var q={data:((K?Y._fullData:Y.data)||[]).map(function(ne){var le=re(ne);return ee&&delete le.fit,le})};if(!ee&&(q.layout=re(H),K)){var te=H._size;q.layout.computed={margin:{b:te.b,l:te.l,r:te.r,t:te.t}}}return G&&(q.frames=re(G)),oe&&(q.config=re(Y._context,!0)),"object"===$?q:JSON.stringify(q)},l.modifyFrames=function(Y,ee){var Q,$,K,oe=Y._transitionData._frames,j=Y._transitionData._frameHash;for(Q=0;Q<ee.length;Q++)switch(($=ee[Q]).type){case"replace":var H=(oe[$.index]||{}).name,G=(K=$.value).name;oe[$.index]=j[G]=K,G!==H&&(delete j[H],j[G]=K);break;case"insert":j[(K=$.value).name]=K,oe.splice($.index,0,K);break;case"delete":delete j[(K=oe[$.index]).name],oe.splice($.index,1)}return Promise.resolve()},l.computeFrame=function(Y,ee){var Q,$,K,oe,j=Y._transitionData._frameHash;if(!ee)throw new Error("computeFrame must be given a string frame name");var H=j[ee.toString()];if(!H)return!1;for(var G=[H],re=[H.name];H.baseframe&&(H=j[H.baseframe.toString()])&&-1===re.indexOf(H.name);)G.push(H),re.push(H.name);for(var q={};H=G.pop();)if(H.layout&&(q.layout=l.extendLayout(q.layout,H.layout)),H.data){if(q.data||(q.data=[]),!($=H.traces))for($=[],Q=0;Q<H.data.length;Q++)$[Q]=Q;for(q.traces||(q.traces=[]),Q=0;Q<H.data.length;Q++)null!=(K=$[Q])&&(-1===(oe=q.traces.indexOf(K))&&(q.traces[oe=q.data.length]=K),q.data[oe]=l.extendTrace(q.data[oe],H.data[Q]))}return q},l.recomputeFrameHash=function(Y){for(var ee=Y._transitionData._frameHash={},Q=Y._transitionData._frames,$=0;$<Q.length;$++){var K=Q[$];K&&K.name&&(ee[K.name]=K)}},l.extendObjectWithContainers=function(Y,ee,Q){var $,K,oe,j,H,G,re,q=a.extendDeepNoArrays({},ee||{}),te=a.expandObjectPaths(q),ne={};if(Q&&Q.length)for(oe=0;oe<Q.length;oe++)void 0===(K=($=a.nestedProperty(te,Q[oe])).get())?a.nestedProperty(ne,Q[oe]).set(null):($.set(null),a.nestedProperty(ne,Q[oe]).set(K));if(Y=a.extendDeepNoArrays(Y||{},te),Q&&Q.length)for(oe=0;oe<Q.length;oe++)if(G=a.nestedProperty(ne,Q[oe]).get()){for(re=(H=a.nestedProperty(Y,Q[oe])).get(),Array.isArray(re)||H.set(re=[]),j=0;j<G.length;j++){var le=G[j];re[j]=null===le?null:l.extendObjectWithContainers(re[j],le)}H.set(re)}return Y},l.dataArrayContainers=["transforms","dimensions"],l.layoutArrayContainers=e.layoutArrayContainers,l.extendTrace=function(Y,ee){return l.extendObjectWithContainers(Y,ee,l.dataArrayContainers)},l.extendLayout=function(Y,ee){return l.extendObjectWithContainers(Y,ee,l.layoutArrayContainers)},l.transition=function(Y,ee,Q,$,K,oe){var j={redraw:K.redraw},H={},G=[];return j.prepareFn=function(){for(var re=Array.isArray(ee)?ee.length:0,q=$.slice(0,re),te=0;te<q.length;te++){var ne=q[te],le=Y._fullData[ne]._module;if(le){if(le.animatable){var ue=le.basePlotModule.name;H[ue]||(H[ue]=[]),H[ue].push(ne)}Y.data[q[te]]=l.extendTrace(Y.data[q[te]],ee[te])}}var de=a.expandObjectPaths(a.extendDeepNoArrays({},Q)),he=/^[xy]axis[0-9]*$/;for(var be in de)he.test(be)&&delete de[be].range;l.extendLayout(Y.layout,de),delete Y.calcdata,l.supplyDefaults(Y),l.doCalcdata(Y);var ge=a.expandObjectPaths(Q);if(ge){var we=Y._fullLayout._plots;for(var ke in we){var De=we[ke],Ee=De.xaxis,Re=De.yaxis,ve=Ee.range.slice(),Te=Re.range.slice(),Ie=null,Ce=null,Pe=null,Ve=null;Array.isArray(ge[Ee._name+".range"])?Ie=ge[Ee._name+".range"].slice():Array.isArray((ge[Ee._name]||{}).range)&&(Ie=ge[Ee._name].range.slice()),Array.isArray(ge[Re._name+".range"])?Ce=ge[Re._name+".range"].slice():Array.isArray((ge[Re._name]||{}).range)&&(Ce=ge[Re._name].range.slice()),ve&&Ie&&(Ee.r2l(ve[0])!==Ee.r2l(Ie[0])||Ee.r2l(ve[1])!==Ee.r2l(Ie[1]))&&(Pe={xr0:ve,xr1:Ie}),Te&&Ce&&(Re.r2l(Te[0])!==Re.r2l(Ce[0])||Re.r2l(Te[1])!==Re.r2l(Ce[1]))&&(Ve={yr0:Te,yr1:Ce}),(Pe||Ve)&&G.push(a.extendFlat({plotinfo:De},Pe,Ve))}}return Promise.resolve()},j.runFn=function(re){var q,te,ne=Y._fullLayout._basePlotModules,le=G.length;if(Q)for(te=0;te<ne.length;te++)ne[te].transitionAxes&&ne[te].transitionAxes(Y,G,oe,re);for(var ue in le?((q=a.extendFlat({},oe)).duration=0,delete H.cartesian):q=oe,H){var de=H[ue];Y._fullData[de[0]]._module.basePlotModule.plot(Y,de,q,re)}},L(Y,oe,j)},l.transitionFromReact=function(Y,ee,Q,$){var K=Y._fullLayout,oe=K.transition,j={},H=[];return j.prepareFn=function(){var G=K._plots;for(var re in j.redraw=!1,"some"===ee.anim&&(j.redraw=!0),"some"===Q.anim&&(j.redraw=!0),G){var q=G[re],te=q.xaxis,ne=q.yaxis,le=$[te._name].range.slice(),ue=$[ne._name].range.slice(),de=te.range.slice(),he=ne.range.slice();te.setScale(),ne.setScale();var be=null,ge=null;te.r2l(le[0])===te.r2l(de[0])&&te.r2l(le[1])===te.r2l(de[1])||(be={xr0:le,xr1:de}),ne.r2l(ue[0])===ne.r2l(he[0])&&ne.r2l(ue[1])===ne.r2l(he[1])||(ge={yr0:ue,yr1:he}),(be||ge)&&H.push(a.extendFlat({plotinfo:q},be,ge))}return Promise.resolve()},j.runFn=function(G){for(var re,q,te,ne=Y._fullData,le=Y._fullLayout._basePlotModules,ue=[],de=0;de<ne.length;de++)ue.push(de);function he(){if(Y._fullLayout)for(var ge=0;ge<le.length;ge++)le[ge].transitionAxes&&le[ge].transitionAxes(Y,H,re,G)}function be(){if(Y._fullLayout)for(var ge=0;ge<le.length;ge++)le[ge].plot(Y,te,q,G)}H.length&&ee.anim?"traces first"===oe.ordering?(re=a.extendFlat({},oe,{duration:0}),te=ue,q=oe,setTimeout(he,oe.duration),be()):(re=oe,te=null,q=a.extendFlat({},oe,{duration:0}),setTimeout(be,re.duration),he()):H.length?(re=oe,he()):ee.anim&&(te=ue,q=oe,be())},L(Y,oe,j)},l.doCalcdata=function(Y,ee){var Q,$,K,oe,j=s.list(Y),H=Y._fullData,G=Y._fullLayout,re=new Array(H.length),q=(Y.calcdata||[]).slice();for(Y.calcdata=re,G._numBoxes=0,G._numViolins=0,G._violinScaleGroupStats={},Y._hmpixcount=0,Y._hmlumcount=0,G._piecolormap={},G._sunburstcolormap={},G._treemapcolormap={},G._iciclecolormap={},G._funnelareacolormap={},K=0;K<H.length;K++)Array.isArray(ee)&&-1===ee.indexOf(K)&&(re[K]=q[K]);for(K=0;K<H.length;K++)(Q=H[K])._arrayAttrs=r.findArrayAttributes(Q),Q._extremes={};var te=G._subplots.polar||[];for(K=0;K<te.length;K++)j.push(G[te[K]].radialaxis,G[te[K]].angularaxis);for(var ne in G._colorAxes){var le=G[ne];!1!==le.cauto&&(delete le.cmin,delete le.cmax)}var ue=!1;function de(ge){if($=(Q=H[ge])._module,!0===Q.visible&&Q.transforms){if($&&$.calc){var we=$.calc(Y,Q);we[0]&&we[0].t&&we[0].t._scene&&delete we[0].t._scene.dirty}for(oe=0;oe<Q.transforms.length;oe++){var ke=Q.transforms[oe];($=w[ke.type])&&$.calcTransform&&(Q._hasCalcTransform=!0,ue=!0,$.calcTransform(Y,Q,ke))}}}function he(ge,we){if(!!($=(Q=H[ge])._module).isContainer===we){var ke=[];if(!0===Q.visible&&0!==Q._length){delete Q._indexToPoints;var De=Q.transforms||[];for(oe=De.length-1;oe>=0;oe--)if(De[oe].enabled){Q._indexToPoints=De[oe]._indexToPoints;break}$&&$.calc&&(ke=$.calc(Y,Q))}Array.isArray(ke)&&ke[0]||(ke=[{x:d,y:d}]),ke[0].t||(ke[0].t={}),ke[0].trace=Q,re[ge]=ke}}for(V(j,H,G),K=0;K<H.length;K++)he(K,!0);for(K=0;K<H.length;K++)de(K);for(ue&&V(j,H,G),K=0;K<H.length;K++)he(K,!0);for(K=0;K<H.length;K++)he(K,!1);Z(Y);var be=function(ge,we){var ke,De,Ee,Re,ve,Te=[];function Ie(rt,Le,ze){var je=Le._id.charAt(0);if("histogram2dcontour"===rt){var Ne=Le._counterAxes[0],st=s.getFromId(we,Ne),mt="x"===je||"x"===Ne&&"category"===st.type,Tt="y"===je||"y"===Ne&&"category"===st.type;return function(xt,zt){return 0===xt||0===zt||mt&&xt===ze[zt].length-1||Tt&&zt===ze.length-1?-1:("y"===je?zt:xt)-1}}return function(xt,zt){return"y"===je?zt:xt}}var Ce={min:function(rt){return a.aggNums(Math.min,null,rt)},max:function(rt){return a.aggNums(Math.max,null,rt)},sum:function(rt){return a.aggNums(function(Le,ze){return Le+ze},null,rt)},total:function(rt){return a.aggNums(function(Le,ze){return Le+ze},null,rt)},mean:function(rt){return a.mean(rt)},median:function(rt){return a.median(rt)}};for(ke=0;ke<ge.length;ke++){var Pe=ge[ke];if("category"===Pe.type){var Ve=Pe.categoryorder.match(B);if(Ve){var qe=Ve[1],Je=Ve[2],lt=Pe._id.charAt(0),He="x"===lt,$e=[];for(De=0;De<Pe._categories.length;De++)$e.push([Pe._categories[De],[]]);for(De=0;De<Pe._traceIndices.length;De++){var et=Pe._traceIndices[De],tt=we._fullData[et];if(!0===tt.visible){var ft=tt.type;e.traceIs(tt,"histogram")&&(delete tt._xautoBinFinished,delete tt._yautoBinFinished);var bt="splom"===ft,Ct="scattergl"===ft,Vt=we.calcdata[et];for(Ee=0;Ee<Vt.length;Ee++){var Ft,ht,ut=Vt[Ee];if(bt){var Rt=tt._axesDim[Pe._id];if(!He){var nn=tt._diag[Rt][0];nn&&(Pe=we._fullLayout[s.id2name(nn)])}var cn=ut.trace.dimensions[Rt].values;for(Re=0;Re<cn.length;Re++)for(Ft=Pe._categoriesMap[cn[Re]],ve=0;ve<ut.trace.dimensions.length;ve++)ve!==Rt&&$e[Ft][1].push(ut.trace.dimensions[ve].values[Re])}else if(Ct){for(Re=0;Re<ut.t.x.length;Re++)He?(Ft=ut.t.x[Re],ht=ut.t.y[Re]):(Ft=ut.t.y[Re],ht=ut.t.x[Re]),$e[Ft][1].push(ht);ut.t&&ut.t._scene&&delete ut.t._scene.dirty}else if(ut.hasOwnProperty("z")){var Qe=Ie(tt.type,Pe,ht=ut.z);for(Re=0;Re<ht.length;Re++)for(ve=0;ve<ht[Re].length;ve++)(Ft=Qe(ve,Re))+1&&$e[Ft][1].push(ht[Re][ve])}else for(void 0===(Ft=ut.p)&&(Ft=ut[lt]),void 0===(ht=ut.s)&&(ht=ut.v),void 0===ht&&(ht=He?ut.y:ut.x),Array.isArray(ht)||(ht=void 0===ht?[]:[ht]),Re=0;Re<ht.length;Re++)$e[Ft][1].push(ht[Re])}}}Pe._categoriesValue=$e;var Ge=[];for(De=0;De<$e.length;De++)Ge.push([$e[De][0],Ce[qe]($e[De][1])]);Ge.sort(function(rt,Le){return rt[1]-Le[1]}),Pe._categoriesAggregatedValue=Ge,Pe._initialCategories=Ge.map(function(rt){return rt[0]}),"descending"===Je&&Pe._initialCategories.reverse(),Te=Te.concat(Pe.sortByInitialCategories())}}}return Te}(j,Y);if(be.length){for(G._numBoxes=0,G._numViolins=0,K=0;K<be.length;K++)he(be[K],!0);for(K=0;K<be.length;K++)he(be[K],!1);Z(Y)}e.getComponentMethod("fx","calc")(Y),e.getComponentMethod("errorbars","calc")(Y)};var B=/(total|sum|min|max|mean|median) (ascending|descending)/;function V(Y,ee,Q){var $={};function K(G){G.clearCalc(),"multicategory"===G.type&&G.setupMultiCategory(ee),$[G._id]=1}a.simpleMap(Y,K);for(var oe=Q._axisMatchGroups||[],j=0;j<oe.length;j++)for(var H in oe[j])$[H]||K(Q[s.id2name(H)])}function Z(Y){var ee,Q,$,K=Y._fullLayout,oe=K._visibleModules,j={};for(Q=0;Q<oe.length;Q++){var H=oe[Q],G=H.crossTraceCalc;if(G){var re=H.basePlotModule.name;j[re]?a.pushUnique(j[re],G):j[re]=[G]}}for($ in j){var q=j[$],te=K._subplots[$];if(Array.isArray(te))for(ee=0;ee<te.length;ee++){var ne=te[ee],le="cartesian"===$?K._plots[ne]:K[ne];for(Q=0;Q<q.length;Q++)q[Q](Y,le,ne)}else for(Q=0;Q<q.length;Q++)q[Q](Y)}}l.rehover=function(Y){Y._fullLayout._rehover&&Y._fullLayout._rehover()},l.redrag=function(Y){Y._fullLayout._redrag&&Y._fullLayout._redrag()},l.generalUpdatePerTraceModule=function(Y,ee,Q,$){var K,oe=ee.traceHash,j={};for(K=0;K<Q.length;K++){var H=Q[K],G=H[0].trace;G.visible&&(j[G.type]=j[G.type]||[],j[G.type].push(H))}for(var re in oe)if(!j[re]){var q=oe[re][0];q[0].trace.visible=!1,j[re]=[q]}for(var te in j){var ne=j[te];ne[0][0].trace._module.plot(Y,ee,a.filterVisible(ne),$)}ee.traceHash=j},l.plotBasePlot=function(Y,ee,Q,$,K){var oe=e.getModule(Y),j=p(ee.calcdata,oe)[0];oe.plot(ee,j,$,K)},l.cleanBasePlot=function(Y,ee,Q,$,K){var oe=K._has&&K._has(Y),j=Q._has&&Q._has(Y);oe&&!j&&K["_"+Y+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(_,ae,ie){"use strict";ae.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../lib/polygon").tester,T=g.findIndexOfMin,b=g.isAngleInsideSector,e=g.angleDelta,r=g.angleDist;function t(s,i,u,f){var p,y,m=f[0],l=f[1],w=n(Math.sin(i)-Math.sin(s)),v=n(Math.cos(i)-Math.cos(s)),A=Math.tan(u),M=n(1/A),k=w/v,E=l-k*m;return M?w&&v?y=A*(p=E/(A-k)):v?(p=l*M,y=l):(p=m,y=m*A):w&&v?(p=0,y=E):v?(p=0,y=l):p=y=NaN,[p,y]}function a(s,i,u,f){return g.isFullCircle([i,u])?function(p,y){var m,l=y.length,w=new Array(l+1);for(m=0;m<l;m++){var v=y[m];w[m]=[p*Math.cos(v),p*Math.sin(v)]}return w[m]=w[0].slice(),w}(s,f):function(p,y,m,l){var w,v,A=l.length,M=[];function k(V){return[p*Math.cos(V),p*Math.sin(V)]}function E(V,Z,Y){return t(V,Z,Y,k(V))}function P(V){return g.mod(V,A)}function S(V){return b(V,[y,m])}var F=T(l,function(V){return S(V)?r(V,y):1/0}),R=E(l[F],l[P(F-1)],y);for(M.push(R),w=F,v=0;v<A;w++,v++){var D=l[P(w)];if(!S(D))break;M.push(k(D))}var L=T(l,function(V){return S(V)?r(V,m):1/0}),B=E(l[L],l[P(L+1)],m);return M.push(B),M.push([0,0]),M.push(M[0].slice()),M}(s,i,u,f)}function n(s){return Math.abs(s)>1e-10?s:0}function d(s,i,u){i=i||0,u=u||0;for(var f=s.length,p=new Array(f),y=0;y<f;y++){var m=s[y];p[y]=[i+m[0],u-m[1]]}return p}ae.exports={isPtInsidePolygon:function(s,i,u,f,p){if(!b(i,f))return!1;var y,m;u[0]<u[1]?(y=u[0],m=u[1]):(y=u[1],m=u[0]);var l=x(a(y,f[0],f[1],p)),w=x(a(m,f[0],f[1],p)),v=[s*Math.cos(i),s*Math.sin(i)];return w.contains(v)&&!l.contains(v)},findPolygonOffset:function(s,i,u,f){for(var p=1/0,y=1/0,m=a(s,i,u,f),l=0;l<m.length;l++){var w=m[l];p=Math.min(p,w[0]),y=Math.min(y,-w[1])}return[p,y]},findEnclosingVertexAngles:function(s,i){var u=T(i,function(p){var y=e(p,s);return y>0?y:1/0}),f=g.mod(u+1,i.length);return[i[u],i[f]]},findIntersectionXY:t,findXYatLength:function(s,i,u,f){var p=-i*u,y=i*i+1,m=2*(i*p-u),w=Math.sqrt(m*m-4*y*(p*p+u*u-s*s)),v=(-m+w)/(2*y),A=(-m-w)/(2*y);return[[v,i*v+p+f],[A,i*A+p+f]]},clampTiny:n,pathPolygon:function(s,i,u,f,p,y){return"M"+d(a(s,i,u,f),p,y).join("L")},pathPolygonAnnulus:function(s,i,u,f,p,y,m){var l,w;s<i?(l=s,w=i):(l=i,w=s);var v=d(a(l,u,f,p),y,m);return"M"+d(a(w,u,f,p),y,m).reverse().join("L")+"M"+v.join("L")}}},{"../../lib":503,"../../lib/polygon":515}],622:[function(_,ae,ie){"use strict";var g=_("../get_data").getSubplotCalcData,x=_("../../lib").counterRegex,T=_("./polar"),b=_("./constants"),e=b.attr,r=b.name,t=x(r),a={};a[e]={valType:"subplotid",dflt:r,editType:"calc"},ae.exports={attr:e,name:r,idRoot:r,idRegex:t,attrRegex:t,attributes:a,layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),plot:function(n){for(var d=n._fullLayout,s=n.calcdata,i=d._subplots[r],u=0;u<i.length;u++){var f=i[u],p=g(s,r,f),y=d[f]._subplot;y||(y=T(n,f),d[f]._subplot=y),y.plot(p,d,n._promises)}},clean:function(n,d,s,i){for(var u=i._subplots[r]||[],f=i._has&&i._has("gl"),p=d._has&&d._has("gl"),y=f&&!p,m=0;m<u.length;m++){var l=u[m],w=i[l]._subplot;if(!d[l]&&w)for(var v in w.framework.remove(),w.layers["radial-axis-title"].remove(),w.clipPaths)w.clipPaths[v].remove();y&&w._scene&&(w._scene.destroy(),w._scene=null)}},toSVG:_("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(_,ae,ie){"use strict";var g=_("../../components/color/attributes"),x=_("../cartesian/layout_attributes"),T=_("../domain").attributes,b=_("../../lib").extendFlat,e=_("../../plot_api/edit_types").overrideAll,r=e({color:x.color,showline:b({},x.showline,{dflt:!0}),linecolor:x.linecolor,linewidth:x.linewidth,showgrid:b({},x.showgrid,{dflt:!0}),gridcolor:x.gridcolor,gridwidth:x.gridwidth},"plot","from-root"),t=e({tickmode:x.tickmode,nticks:x.nticks,tick0:x.tick0,dtick:x.dtick,tickvals:x.tickvals,ticktext:x.ticktext,ticks:x.ticks,ticklen:x.ticklen,tickwidth:x.tickwidth,tickcolor:x.tickcolor,showticklabels:x.showticklabels,showtickprefix:x.showtickprefix,tickprefix:x.tickprefix,showticksuffix:x.showticksuffix,ticksuffix:x.ticksuffix,showexponent:x.showexponent,exponentformat:x.exponentformat,minexponent:x.minexponent,separatethousands:x.separatethousands,tickfont:x.tickfont,tickangle:x.tickangle,tickformat:x.tickformat,tickformatstops:x.tickformatstops,layer:x.layer},"plot","from-root"),a={visible:b({},x.visible,{dflt:!0}),type:b({},x.type,{values:["-","linear","log","date","category"]}),autotypenumbers:x.autotypenumbers,autorange:b({},x.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:b({},x.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:x.categoryorder,categoryarray:x.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:b({},x.title.text,{editType:"plot",dflt:""}),font:b({},x.title.font,{editType:"plot"}),editType:"plot"},hoverformat:x.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:x._deprecated.title,titlefont:x._deprecated.titlefont}};b(a,r,t);var n={visible:b({},x.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:x.autotypenumbers,categoryorder:x.categoryorder,categoryarray:x.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:x.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};b(n,r,t),ae.exports={domain:T({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:g.background},radialaxis:a,angularaxis:n,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/color"),T=_("../../plot_api/plot_template"),b=_("../subplot_defaults"),e=_("../get_data").getSubplotData,r=_("../cartesian/tick_value_defaults"),t=_("../cartesian/tick_mark_defaults"),a=_("../cartesian/tick_label_defaults"),n=_("../cartesian/prefix_suffix_defaults"),d=_("../cartesian/category_order_defaults"),s=_("../cartesian/line_grid_defaults"),i=_("../cartesian/axis_autotype"),u=_("./layout_attributes"),f=_("./set_convert"),p=_("./constants"),y=p.axisNames;function m(w,v,A,M){var k=A("bgcolor");M.bgColor=x.combine(k,M.paper_bgcolor);var E=A("sector");A("hole");var P,S=e(M.fullData,p.name,M.id),F=M.layoutOut;function R(re,q){return A(P+"."+re,q)}for(var D=0;D<y.length;D++){g.isPlainObject(w[P=y[D]])||(w[P]={});var L=w[P],B=T.newContainer(v,P);B._id=B._name=P,B._attr=M.id+"."+P,B._traceIndices=S.map(function(re){return re._expandedIndex});var V=p.axisName2dataArray[P],Z=l(L,B,R,S,V,M);d(L,B,R,{axData:S,dataAttr:V});var Y=R("visible");switch(f(B,v,F),R("uirevision",v.uirevision),B._m=1,P){case"radialaxis":var ee=R("autorange",!B.isValidRange(L.range));L.autorange=ee,!ee||"linear"!==Z&&"-"!==Z||R("rangemode"),"reversed"===ee&&(B._m=-1),R("range"),B.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===Z){g.log("Polar plots do not support date angular axes yet.");for(var Q=0;Q<S.length;Q++)S[Q].visible=!1;Z=L.type=B.type="linear"}R("linear"===Z?"thetaunit":"period");var $=R("direction");R("rotation",{counterclockwise:0,clockwise:90}[$])}if(n(L,B,R,B.type,{tickSuffixDflt:"degrees"===B.thetaunit?"\xb0":void 0}),Y){var K,oe,j,H,G=M.font||{};oe=(K=R("color"))===L.color?K:G.color,j=G.size,H=G.family,r(L,B,R,B.type),a(L,B,R,B.type,{font:{color:oe,size:j,family:H}}),t(L,B,R,{outerTicks:!0}),s(L,B,R,{dfltColor:K,bgColor:M.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[P]}),R("layer"),"radialaxis"===P&&(R("side"),R("angle",E[0]),R("title.text"),g.coerceFont(R,"title.font",{color:oe,size:g.bigFont(j),family:H}))}"category"!==Z&&R("hoverformat"),B._input=L}"category"===v.angularaxis.type&&A("gridshape")}function l(w,v,A,M,k,E){var P=A("autotypenumbers",E.autotypenumbersDflt);if("-"===A("type")){for(var S,F=0;F<M.length;F++)if(M[F].visible){S=M[F];break}S&&S[k]&&(v.type=i(S[k],"gregorian",{noMultiCategory:!0,autotypenumbers:P})),"-"===v.type?v.type="linear":w.type=v.type}return v.type}ae.exports=function(w,v,A){b(w,v,A,{type:p.name,attributes:u,handleDefaults:m,font:v.font,autotypenumbersDflt:v.autotypenumbers,paper_bgcolor:v.paper_bgcolor,fullData:A,layoutOut:v})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../registry"),b=_("../../lib"),e=b.strRotate,r=b.strTranslate,t=_("../../components/color"),a=_("../../components/drawing"),n=_("../plots"),d=_("../../plots/cartesian/axes"),s=_("../cartesian/set_convert"),i=_("./set_convert"),u=_("../cartesian/autorange").doAutoRange,f=_("../cartesian/dragbox"),p=_("../../components/dragelement"),y=_("../../components/fx"),m=_("../../components/titles"),l=_("../cartesian/select").prepSelect,w=_("../cartesian/select").selectOnClick,v=_("../cartesian/select").clearSelect,A=_("../../lib/setcursor"),M=_("../../lib/clear_gl_canvases"),k=_("../../plot_api/subroutines").redrawReglTraces,E=_("../../constants/alignment").MID_SHIFT,P=_("./constants"),S=_("./helpers"),F=_("../smith/helpers"),R=F.smith,D=F.reactanceArc,L=F.resistanceArc,B=F.smithTransform,V=b._,Z=b.mod,Y=b.deg2rad,ee=b.rad2deg;function Q(H,G,re){this.isSmith=re||!1,this.id=G,this.gd=H,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var q=H._fullLayout;this.clipIds.forTraces="clip"+q._uid+G+"-for-traces",this.clipPaths.forTraces=q._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=q["_"+(re?"smith":"polar")+"layer"].append("g").attr("class",G),this.getHole=function(ne){return this.isSmith?0:ne.hole},this.getSector=function(ne){return this.isSmith?[0,360]:ne.sector},this.getRadial=function(ne){return this.isSmith?ne.realaxis:ne.radialaxis},this.getAngular=function(ne){return this.isSmith?ne.imaginaryaxis:ne.angularaxis},re||(this.radialTickLayout=null,this.angularTickLayout=null)}var $=Q.prototype;function K(H){var G=H.ticks+String(H.ticklen)+String(H.showticklabels);return"side"in H&&(G+=H.side),G}function oe(H,G){return G[b.findIndexOfMin(G,function(re){return b.angleDist(H,re)})]}function j(H,G,re){return G?(H.attr("display",null),H.attr(re)):H&&H.attr("display","none"),H}ae.exports=function(H,G,re){return new Q(H,G,re)},$.plot=function(H,G){for(var re=G[this.id],q=!1,te=0;te<H.length;te++)if(!1===H[te][0].trace.cliponaxis){q=!0;break}this._hasClipOnAxisFalse=q,this.updateLayers(G,re),this.updateLayout(G,re),n.generalUpdatePerTraceModule(this.gd,this,H,re),this.updateFx(G,re),this.isSmith&&(delete re.realaxis.range,delete re.imaginaryaxis.range)},$.updateLayers=function(H,G){var re=this.isSmith,q=this.layers,te=this.getRadial(G),ne=this.getAngular(G),le=P.layerNames,ue=le.indexOf("frontplot"),de=le.slice(0,ue),he="below traces"===ne.layer,be="below traces"===te.layer;he&&de.push("angular-line"),be&&de.push("radial-line"),he&&de.push("angular-axis"),be&&de.push("radial-axis"),de.push("frontplot"),he||de.push("angular-line"),be||de.push("radial-line"),he||de.push("angular-axis"),be||de.push("radial-axis");var ge=(re?"smith":"polar")+"sublayer",we=this.framework.selectAll("."+ge).data(de,String);we.enter().append("g").attr("class",function(ke){return ge+" "+ke}).each(function(ke){var De=q[ke]=g.select(this);switch(ke){case"frontplot":re||De.append("g").classed("barlayer",!0),De.append("g").classed("scatterlayer",!0);break;case"backplot":De.append("g").classed("maplayer",!0);break;case"plotbg":q.bg=De.append("path");break;case"radial-grid":case"angular-grid":De.style("fill","none");break;case"radial-line":De.append("line").style("fill","none");break;case"angular-line":De.append("path").style("fill","none")}}),we.order()},$.updateLayout=function(H,G){var re=this.layers,q=H._size,te=this.getRadial(G),ne=this.getAngular(G),le=G.domain.x,ue=G.domain.y;this.xOffset=q.l+q.w*le[0],this.yOffset=q.t+q.h*(1-ue[1]);var de=this.xLength=q.w*(le[1]-le[0]),he=this.yLength=q.h*(ue[1]-ue[0]),be=this.getSector(G);this.sectorInRad=be.map(Y);var ge,we,ke,De,Ee,Ct,ut,Rt,nn,cn,Ze,Qe,Ge,rt,Le,Re=this.sectorBBox=(nn=(Ct=be)[1]-(Rt=Ct[0]),Ze=(cn=Z(Rt,360))+nn,Qe=Math.cos(Y(cn)),Ge=Math.sin(Y(cn)),rt=Math.cos(Y(Ze)),Le=Math.sin(Y(Ze)),ut=cn<=90&&Ze>=90||cn>90&&Ze>=450?1:Ge<=0&&Le<=0?0:Math.max(Ge,Le),[cn<=180&&Ze>=180||cn>180&&Ze>=540?-1:Qe>=0&&rt>=0?0:Math.min(Qe,rt),cn<=270&&Ze>=270||cn>270&&Ze>=630?-1:Ge>=0&&Le>=0?0:Math.min(Ge,Le),Ze>=360?1:Qe<=0&&rt<=0?0:Math.max(Qe,rt),ut]),ve=Re[2]-Re[0],Ie=he/de,Ce=Math.abs((Re[3]-Re[1])/ve);Ie>Ce?(ge=de,Ee=(he-(we=de*Ce))/q.h/2,ke=[le[0],le[1]],De=[ue[0]+Ee,ue[1]-Ee]):(we=he,Ee=(de-(ge=he/Ce))/q.w/2,ke=[le[0]+Ee,le[1]-Ee],De=[ue[0],ue[1]]),this.xLength2=ge,this.yLength2=we,this.xDomain2=ke,this.yDomain2=De;var Pe,Ve=this.xOffset2=q.l+q.w*ke[0],qe=this.yOffset2=q.t+q.h*(1-De[1]),Je=this.radius=ge/ve,lt=this.innerRadius=this.getHole(G)*Je,He=this.cx=Ve-Je*Re[0],$e=this.cy=qe+Je*Re[3],et=this.cxx=He-Ve,tt=this.cyy=$e-qe,ft=te.side;"counterclockwise"===ft?(Pe=ft,ft="top"):"clockwise"===ft&&(Pe=ft,ft="bottom"),this.radialAxis=this.mockAxis(H,G,te,{_id:"x",side:ft,_trueSide:Pe,domain:[lt/q.w,Je/q.w]}),this.angularAxis=this.mockAxis(H,G,ne,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(H,G),this.updateAngularAxis(H,G),this.updateRadialAxis(H,G),this.updateRadialAxisTitle(H,G),this.xaxis=this.mockCartesianAxis(H,G,{_id:"x",domain:ke}),this.yaxis=this.mockCartesianAxis(H,G,{_id:"y",domain:De});var bt=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",bt).attr("transform",r(et,tt)),re.frontplot.attr("transform",r(Ve,qe)).call(a.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),re.bg.attr("d",bt).attr("transform",r(He,$e)).call(t.fill,G.bgcolor)},$.mockAxis=function(H,G,re,q){var te=b.extendFlat({},re,q);return i(te,G,H),te},$.mockCartesianAxis=function(H,G,re){var q=this,te=q.isSmith,ne=re._id,le=b.extendFlat({type:"linear"},re);s(le,H);var ue={x:[0,2],y:[1,3]};return le.setRange=function(){var de=q.sectorBBox,he=ue[ne],be=q.radialAxis._rl,ge=(be[1]-be[0])/(1-q.getHole(G));le.range=[de[he[0]]*ge,de[he[1]]*ge]},le.isPtWithinRange="x"!==ne||te?function(){return!0}:function(de){return q.isPtInside(de)},le.setRange(),le.setScale(),le},$.doAutoRange=function(H,G){var re=this.gd,q=this.radialAxis,te=this.getRadial(G);u(re,q);var ne=q.range;te.range=ne.slice(),te._input.range=ne.slice(),q._rl=[q.r2l(ne[0],null,"gregorian"),q.r2l(ne[1],null,"gregorian")]},$.updateRadialAxis=function(H,G){var re=this,q=re.gd,te=re.layers,ne=re.radius,le=re.innerRadius,ue=re.cx,de=re.cy,he=re.getRadial(G),be=Z(re.getSector(G)[0],360),ge=re.radialAxis,we=le<ne,ke=re.isSmith;ke||(re.fillViewInitialKey("radialaxis.angle",he.angle),re.fillViewInitialKey("radialaxis.range",ge.range.slice()),ge.setGeometry()),"auto"===ge.tickangle&&be>90&&be<=270&&(ge.tickangle=180);var De=ke?function(Je){var lt=B(re,R([Je.x,0]));return r(lt[0]-ue,lt[1]-de)}:function(Je){return r(ge.l2p(Je.x)+le,0)},Ee=ke?function(Je){return L(re,Je.x,-1/0,1/0)}:function(Je){return re.pathArc(ge.r2p(Je.x)+le)},Re=K(he);if(re.radialTickLayout!==Re&&(te["radial-axis"].selectAll(".xtick").remove(),re.radialTickLayout=Re),we){ge.setScale();var ve=0,Te=ke?(ge.tickvals||[]).filter(function(Je){return Je>=0}).map(function(Je){return d.tickText(ge,Je,!0,!1)}):d.calcTicks(ge),Ie=ke?Te:d.clipEnds(ge,Te),Ce=d.getTickSigns(ge)[2];ke&&(("top"===ge.ticks&&"bottom"===ge.side||"bottom"===ge.ticks&&"top"===ge.side)&&(Ce=-Ce),"top"===ge.ticks&&"top"===ge.side&&(ve=-ge.ticklen),"bottom"===ge.ticks&&"bottom"===ge.side&&(ve=ge.ticklen)),d.drawTicks(q,ge,{vals:Te,layer:te["radial-axis"],path:d.makeTickPath(ge,0,Ce),transFn:De,crisp:!1}),d.drawGrid(q,ge,{vals:Ie,layer:te["radial-grid"],path:Ee,transFn:b.noop,crisp:!1}),d.drawLabels(q,ge,{vals:Te,layer:te["radial-axis"],transFn:De,labelFns:d.makeLabelFns(ge,ve)})}var Pe=re.radialAxisAngle=re.vangles?ee(oe(Y(he.angle),re.vangles)):he.angle,Ve=r(ue,de),qe=Ve+e(-Pe);j(te["radial-axis"],we&&(he.showticklabels||he.ticks),{transform:qe}),j(te["radial-grid"],we&&he.showgrid,{transform:ke?"":Ve}),j(te["radial-line"].select("line"),we&&he.showline,{x1:ke?-ne:le,y1:0,x2:ne,y2:0,transform:qe}).attr("stroke-width",he.linewidth).call(t.stroke,he.linecolor)},$.updateRadialAxisTitle=function(H,G,re){if(!this.isSmith){var q=this.gd,te=this.radius,ne=this.cx,le=this.cy,ue=this.getRadial(G),de=this.id+"title",he=0;if(ue.title){var be=a.bBox(this.layers["radial-axis"].node()).height,ge=ue.title.font.size,we=ue.side;he="top"===we?ge:"counterclockwise"===we?-(be+.4*ge):be+.8*ge}var ke=void 0!==re?re:this.radialAxisAngle,De=Y(ke),Ee=Math.cos(De),Re=Math.sin(De),ve=ne+te/2*Ee+he*Re,Te=le-te/2*Re+he*Ee;this.layers["radial-axis-title"]=m.draw(q,de,{propContainer:ue,propName:this.id+".radialaxis.title",placeholder:V(q,"Click to enter radial axis title"),attributes:{x:ve,y:Te,"text-anchor":"middle"},transform:{rotate:-ke}})}},$.updateAngularAxis=function(H,G){var re=this,q=re.gd,te=re.layers,ne=re.radius,le=re.innerRadius,ue=re.cx,de=re.cy,he=re.getAngular(G),be=re.angularAxis,ge=re.isSmith;ge||(re.fillViewInitialKey("angularaxis.rotation",he.rotation),be.setGeometry(),be.setScale());var we=ge?function(Je){var lt=B(re,R([0,Je.x]));return Math.atan2(lt[0]-ue,lt[1]-de)-Math.PI/2}:function(Je){return be.t2g(Je.x)};"linear"===be.type&&"radians"===be.thetaunit&&(be.tick0=ee(be.tick0),be.dtick=ee(be.dtick));var ke=function(Je){return r(ue+ne*Math.cos(Je),de-ne*Math.sin(Je))},De=ge?function(Je){var lt=B(re,R([0,Je.x]));return r(lt[0],lt[1])}:function(Je){return ke(we(Je))},Ee=ge?function(Je){var lt=B(re,R([0,Je.x])),He=Math.atan2(lt[0]-ue,lt[1]-de)-Math.PI/2;return r(lt[0],lt[1])+e(-ee(He))}:function(Je){var lt=we(Je);return ke(lt)+e(-ee(lt))},Re=ge?function(Je){return D(re,Je.x,0,1/0)}:function(Je){var lt=we(Je),He=Math.cos(lt),$e=Math.sin(lt);return"M"+[ue+le*He,de-le*$e]+"L"+[ue+ne*He,de-ne*$e]},ve=d.makeLabelFns(be,0).labelStandoff,Te={xFn:function(Je){var lt=we(Je);return Math.cos(lt)*ve},yFn:function(Je){var lt=we(Je),He=Math.sin(lt)>0?.2:1;return-Math.sin(lt)*(ve+Je.fontSize*He)+Math.abs(Math.cos(lt))*(Je.fontSize*E)},anchorFn:function(Je){var lt=we(Je),He=Math.cos(lt);return Math.abs(He)<.1?"middle":He>0?"start":"end"},heightFn:function(Je,lt,He){var $e=we(Je);return-.5*(1+Math.sin($e))*He}},Ie=K(he);re.angularTickLayout!==Ie&&(te["angular-axis"].selectAll("."+be._id+"tick").remove(),re.angularTickLayout=Ie);var Ce,Pe=ge?[1/0].concat(be.tickvals||[]).map(function(Je){return d.tickText(be,Je,!0,!1)}):d.calcTicks(be);if(ge&&(Pe[0].text="\u221e",Pe[0].fontSize*=1.75),"linear"===G.gridshape?(Ce=Pe.map(we),b.angleDelta(Ce[0],Ce[1])<0&&(Ce=Ce.slice().reverse())):Ce=null,re.vangles=Ce,"category"===be.type&&(Pe=Pe.filter(function(Je){return b.isAngleInsideSector(we(Je),re.sectorInRad)})),be.visible){var Ve="inside"===be.ticks?-1:1;d.drawTicks(q,be,{vals:Pe,layer:te["angular-axis"],path:"M"+Ve*((be.linewidth||1)/2)+",0h"+Ve*be.ticklen,transFn:Ee,crisp:!1}),d.drawGrid(q,be,{vals:Pe,layer:te["angular-grid"],path:Re,transFn:b.noop,crisp:!1}),d.drawLabels(q,be,{vals:Pe,layer:te["angular-axis"],repositionOnUpdate:!0,transFn:De,labelFns:Te})}j(te["angular-line"].select("path"),he.showline,{d:re.pathSubplot(),transform:r(ue,de)}).attr("stroke-width",he.linewidth).call(t.stroke,he.linecolor)},$.updateFx=function(H,G){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(H),this.updateRadialDrag(H,G,0),this.updateRadialDrag(H,G,1)),this.updateHoverAndMainDrag(H))},$.updateHoverAndMainDrag=function(H){var G,re,q=this,te=q.isSmith,ne=q.gd,ue=H._zoomlayer,de=P.MINZOOM,he=P.OFFEDGE,be=q.radius,ge=q.innerRadius,we=q.cx,ke=q.cy,De=q.cxx,Ee=q.cyy,Re=q.sectorInRad,ve=q.vangles,Te=q.radialAxis,Ie=S.clampTiny,Ce=S.findXYatLength,Pe=S.findEnclosingVertexAngles,Ve=P.cornerHalfWidth,qe=P.cornerLen/2,Je=f.makeDragger(q.layers,"path","maindrag","crosshair");g.select(Je).attr("d",q.pathSubplot()).attr("transform",r(we,ke)),Je.onmousemove=function(mt){y.hover(ne,mt,q.id),ne._fullLayout._lasthover=Je,ne._fullLayout._hoversubplot=q.id},Je.onmouseout=function(mt){ne._dragging||p.unhover(ne,mt)};var lt,He,$e,et,tt,ft,bt,Ct,Vt,Ft={element:Je,gd:ne,subplot:q.id,plotinfo:{id:q.id,xaxis:q.xaxis,yaxis:q.yaxis},xaxes:[q.xaxis],yaxes:[q.yaxis]};function ht(mt,Tt){return Math.sqrt(mt*mt+Tt*Tt)}function ut(mt,Tt){return ht(mt-De,Tt-Ee)}function Rt(mt,Tt){return Math.atan2(Ee-Tt,mt-De)}function nn(mt,Tt){return[mt*Math.cos(Tt),mt*Math.sin(-Tt)]}function cn(mt,Tt){if(0===mt)return q.pathSector(2*Ve);var xt=qe/mt,zt=Tt-xt,gt=Tt+xt,Bt=Math.max(0,Math.min(mt,be)),jt=Bt-Ve,it=Bt+Ve;return"M"+nn(jt,zt)+"A"+[jt,jt]+" 0,0,0 "+nn(jt,gt)+"L"+nn(it,gt)+"A"+[it,it]+" 0,0,1 "+nn(it,zt)+"Z"}function Ze(mt,Tt,xt){if(0===mt)return q.pathSector(2*Ve);var zt,gt,Bt=nn(mt,Tt),jt=nn(mt,xt),it=Ie((Bt[0]+jt[0])/2),Mt=Ie((Bt[1]+jt[1])/2);if(it&&Mt){var qt=Mt/it,Wt=-1/qt,an=Ce(Ve,qt,it,Mt);zt=Ce(qe,Wt,an[0][0],an[0][1]),gt=Ce(qe,Wt,an[1][0],an[1][1])}else{var Ue,yt;Mt?(Ue=qe,yt=Ve):(Ue=Ve,yt=qe),zt=[[it-Ue,Mt-yt],[it+Ue,Mt-yt]],gt=[[it-Ue,Mt+yt],[it+Ue,Mt+yt]]}return"M"+zt.join("L")+"L"+gt.reverse().join("L")+"Z"}function Qe(mt,Tt){return Tt=Math.max(Math.min(Tt,be),ge),mt<he?mt=0:be-mt<he?mt=be:Tt<he?Tt=0:be-Tt<he&&(Tt=be),Math.abs(Tt-mt)>de?(mt<Tt?($e=mt,et=Tt):($e=Tt,et=mt),!0):($e=null,et=null,!1)}function Ge(mt,Tt){Tt=Tt||"M0,0Z",Ct.attr("d",mt=mt||tt),Vt.attr("d",Tt),f.transitionZoombox(Ct,Vt,ft,bt),ft=!0;var xt={};Ne(xt),ne.emit("plotly_relayouting",xt)}function rt(mt,Tt){var xt,zt,gt=lt+(mt*=G),Bt=He+(Tt*=re),jt=ut(lt,He),it=Math.min(ut(gt,Bt),be),Mt=Rt(lt,He);Qe(jt,it)&&(xt=tt+q.pathSector(et),$e&&(xt+=q.pathSector($e)),zt=cn($e,Mt)+cn(et,Mt)),Ge(xt,zt)}function Le(mt,Tt,xt,zt){var gt=S.findIntersectionXY(xt,zt,xt,[mt-De,Ee-Tt]);return ht(gt[0],gt[1])}function ze(mt,Tt){var xt,zt,gt=lt+mt,Bt=He+Tt,jt=Rt(lt,He),it=Rt(gt,Bt),Mt=Pe(jt,ve),qt=Pe(it,ve);Qe(Le(lt,He,Mt[0],Mt[1]),Math.min(Le(gt,Bt,qt[0],qt[1]),be))&&(xt=tt+q.pathSector(et),$e&&(xt+=q.pathSector($e)),zt=[Ze($e,Mt[0],Mt[1]),Ze(et,Mt[0],Mt[1])].join(" ")),Ge(xt,zt)}function je(){if(f.removeZoombox(ne),null!==$e&&null!==et){var mt={};Ne(mt),f.showDoubleClickNotifier(ne),T.call("_guiRelayout",ne,mt)}}function Ne(mt){var Tt=Te._rl,xt=(Tt[1]-Tt[0])/(1-ge/be)/be;mt[q.id+".radialaxis.range"]=[Tt[0]+($e-ge)*xt,Tt[0]+(et-ge)*xt]}function st(mt,Tt){var xt=ne._fullLayout.clickmode;if(f.removeZoombox(ne),2===mt){var zt={};for(var gt in q.viewInitial)zt[q.id+"."+gt]=q.viewInitial[gt];ne.emit("plotly_doubleclick",null),T.call("_guiRelayout",ne,zt)}xt.indexOf("select")>-1&&1===mt&&w(Tt,ne,[q.xaxis],[q.yaxis],q.id,Ft),xt.indexOf("event")>-1&&y.click(ne,Tt,q.id)}Ft.prepFn=function(mt,Tt,xt){var zt=ne._fullLayout.dragmode,gt=Je.getBoundingClientRect();ne._fullLayout._calcInverseTransform(ne),G=ne._fullLayout._invScaleX,re=ne._fullLayout._invScaleY;var jt=b.apply3DTransform(ne._fullLayout._invTransform)(Tt-gt.left,xt-gt.top);if(lt=jt[0],He=jt[1],ve){var it=S.findPolygonOffset(be,Re[0],Re[1],ve);lt+=De+it[0],He+=Ee+it[1]}switch(zt){case"zoom":Ft.clickFn=st,te||(Ft.moveFn=ve?ze:rt,Ft.doneFn=je,$e=null,et=null,tt=q.pathSubplot(),ft=!1,bt=x(ne._fullLayout[q.id].bgcolor).getLuminance(),(Ct=f.makeZoombox(ue,bt,we,ke,tt)).attr("fill-rule","evenodd"),Vt=f.makeCorners(ue,we,ke),v(ne));break;case"select":case"lasso":l(mt,Tt,xt,Ft,zt)}},p.init(Ft)},$.updateRadialDrag=function(H,G,re){var q=this,te=q.gd,ne=q.layers,le=q.radius,ue=q.innerRadius,de=q.cx,he=q.cy,be=q.radialAxis,ge=P.radialDragBoxSize,we=ge/2;if(be.visible){var ke,De,Ee,Re=Y(q.radialAxisAngle),ve=be._rl,Te=ve[0],Ie=ve[1],Ce=ve[re],Pe=.75*(ve[1]-ve[0])/(1-q.getHole(G))/le;re?(ke=de+(le+we)*Math.cos(Re),De=he-(le+we)*Math.sin(Re),Ee="radialdrag"):(ke=de+(ue-we)*Math.cos(Re),De=he-(ue-we)*Math.sin(Re),Ee="radialdrag-inner");var Ve,qe,Je,lt=f.makeRectDragger(ne,Ee,"crosshair",-we,-we,ge,ge),He={element:lt,gd:te};j(g.select(lt),be.visible&&ue<le,{transform:r(ke,De)}),He.prepFn=function(){Ve=null,qe=null,Je=null,He.moveFn=$e,He.doneFn=et,v(te)},He.clampFn=function(bt,Ct){return Math.sqrt(bt*bt+Ct*Ct)<P.MINDRAG&&(bt=0,Ct=0),[bt,Ct]},p.init(He)}function $e(bt,Ct){if(Ve)Ve(bt,Ct);else{var Vt=[bt,-Ct],Ft=[Math.cos(Re),Math.sin(Re)],ht=Math.abs(b.dot(Vt,Ft)/Math.sqrt(b.dot(Vt,Vt)));isNaN(ht)||(Ve=ht<.5?tt:ft)}var Rt,ut={};Rt=ut,null!==qe?Rt[q.id+".radialaxis.angle"]=qe:null!==Je&&(Rt[q.id+".radialaxis.range["+re+"]"]=Je),te.emit("plotly_relayouting",ut)}function et(){null!==qe?T.call("_guiRelayout",te,q.id+".radialaxis.angle",qe):null!==Je&&T.call("_guiRelayout",te,q.id+".radialaxis.range["+re+"]",Je)}function tt(bt,Ct){if(0!==re){qe=Math.atan2(he-(De+Ct),ke+bt-de),q.vangles&&(qe=oe(qe,q.vangles)),qe=ee(qe);var ht=r(de,he)+e(-qe);ne["radial-axis"].attr("transform",ht),ne["radial-line"].select("line").attr("transform",ht);var ut=q.gd._fullLayout;q.updateRadialAxisTitle(ut,ut[q.id],qe)}}function ft(bt,Ct){var Vt=b.dot([bt,-Ct],[Math.cos(Re),Math.sin(Re)]);if(Je=Ce-Pe*Vt,Pe>0==(re?Je>Te:Je<Ie)){var Ft=te._fullLayout,ht=Ft[q.id];be.range[re]=Je,be._rl[re]=Je,q.updateRadialAxis(Ft,ht),q.xaxis.setRange(),q.xaxis.setScale(),q.yaxis.setRange(),q.yaxis.setScale();var ut=!1;for(var Rt in q.traceHash){var nn=q.traceHash[Rt],cn=b.filterVisible(nn);nn[0][0].trace._module.plot(te,q,cn,ht),T.traceIs(Rt,"gl")&&cn.length&&(ut=!0)}ut&&(M(te),k(te))}else Je=null}},$.updateAngularDrag=function(H){var G=this,re=G.gd,q=G.layers,te=G.radius,ne=G.angularAxis,le=G.cx,ue=G.cy,de=G.cxx,he=G.cyy,be=P.angularDragBoxSize,ge=f.makeDragger(q,"path","angulardrag","move"),we={element:ge,gd:re};function ke(He,$e){return Math.atan2(he+be-$e,He-de-be)}g.select(ge).attr("d",G.pathAnnulus(te,te+be)).attr("transform",r(le,ue)).call(A,"move");var De,Ee,Re,ve,Te,Ie,Ce=q.frontplot.select(".scatterlayer").selectAll(".trace"),Pe=Ce.selectAll(".point"),Ve=Ce.selectAll(".textpoint");function qe(He,$e){var et=G.gd._fullLayout,tt=et[G.id],ft=ke(De+He*H._invScaleX,Ee+$e*H._invScaleY),bt=ee(ft-Ie);if(ve=Re+bt,q.frontplot.attr("transform",r(G.xOffset2,G.yOffset2)+e([-bt,de,he])),G.vangles){Te=G.radialAxisAngle+bt;var Ct=r(le,ue)+e(-bt),Vt=r(le,ue)+e(-Te);q.bg.attr("transform",Ct),q["radial-grid"].attr("transform",Ct),q["radial-axis"].attr("transform",Vt),q["radial-line"].select("line").attr("transform",Vt),G.updateRadialAxisTitle(et,tt,Te)}else G.clipPaths.forTraces.select("path").attr("transform",r(de,he)+e(bt));Pe.each(function(){var cn=g.select(this),Ze=a.getTranslate(cn);cn.attr("transform",r(Ze.x,Ze.y)+e([bt]))}),Ve.each(function(){var cn=g.select(this),Ze=cn.select("text"),Qe=a.getTranslate(cn);cn.attr("transform",e([bt,Ze.attr("x"),Ze.attr("y")])+r(Qe.x,Qe.y))}),ne.rotation=b.modHalf(ve,360),G.updateAngularAxis(et,tt),G._hasClipOnAxisFalse&&!b.isFullCircle(G.sectorInRad)&&Ce.call(a.hideOutsideRangePoints,G);var Ft=!1;for(var ht in G.traceHash)if(T.traceIs(ht,"gl")){var ut=G.traceHash[ht],Rt=b.filterVisible(ut);ut[0][0].trace._module.plot(re,G,Rt,tt),Rt.length&&(Ft=!0)}Ft&&(M(re),k(re));var nn={};Je(nn),re.emit("plotly_relayouting",nn)}function Je(He){He[G.id+".angularaxis.rotation"]=ve,G.vangles&&(He[G.id+".radialaxis.angle"]=Te)}function lt(){Ve.select("text").attr("transform",null);var He={};Je(He),T.call("_guiRelayout",re,He)}we.prepFn=function(He,$e,et){Re=H[G.id].angularaxis.rotation;var ft=ge.getBoundingClientRect();De=$e-ft.left,Ee=et-ft.top,re._fullLayout._calcInverseTransform(re);var bt=b.apply3DTransform(H._invTransform)(De,Ee);Ie=ke(De=bt[0],Ee=bt[1]),we.moveFn=qe,we.doneFn=lt,v(re)},G.vangles&&!b.isFullCircle(G.sectorInRad)&&(we.prepFn=b.noop,A(g.select(ge),null)),p.init(we)},$.isPtInside=function(H){if(this.isSmith)return!0;var G=this.sectorInRad,re=this.vangles,q=this.angularAxis.c2g(H.theta),te=this.radialAxis,ne=te.c2l(H.r);return(re?S.isPtInsidePolygon:b.isPtInsideSector)(ne,q,te._rl,G,re)},$.pathArc=function(H){var G=this.sectorInRad,re=this.vangles;return(re?S.pathPolygon:b.pathArc)(H,G[0],G[1],re)},$.pathSector=function(H){var G=this.sectorInRad,re=this.vangles;return(re?S.pathPolygon:b.pathSector)(H,G[0],G[1],re)},$.pathAnnulus=function(H,G){var re=this.sectorInRad,q=this.vangles;return(q?S.pathPolygonAnnulus:b.pathAnnulus)(H,G,re[0],re[1],q)},$.pathSubplot=function(){var H=this.innerRadius,G=this.radius;return H?this.pathAnnulus(H,G):this.pathSector(G)},$.fillViewInitialKey=function(H,G){H in this.viewInitial||(this.viewInitial[H]=G)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../cartesian/set_convert"),T=g.deg2rad,b=g.rad2deg;ae.exports=function(e,r,t){switch(x(e,t),e._id){case"x":case"radialaxis":d=r._subplot,(a=e).setGeometry=function(){var s=a._rl[0],i=a._rl[1],u=d.innerRadius,f=(d.radius-u)/(i-s),p=u/f,y=s>i?function(m){return m<=0}:function(m){return m>=0};a.c2g=function(m){var l=a.c2l(m)-s;return(y(l)?l:0)+p},a.g2c=function(m){return a.l2c(m+s-p)},a.g2p=function(m){return m*f},a.c2p=function(m){return a.g2p(a.c2g(m))}};break;case"angularaxis":!function(a,n){var d=a.type;if("linear"===d){var s=a.d2c,i=a.c2d;a.d2c=function(u,f){return p=s(u),"degrees"===f?T(p):p;var p},a.c2d=function(u,f){return i((p=u,"degrees"===f?b(p):p));var p}}a.makeCalcdata=function(u,f){var p,y,m=u[f],l=u._length,w=function(E){return a.d2c(E,u.thetaunit)};if(m){if(g.isTypedArray(m)&&"linear"===d){if(l===m.length)return m;if(m.subarray)return m.subarray(0,l)}for(p=new Array(l),y=0;y<l;y++)p[y]=w(m[y])}else{var v=f+"0",A="d"+f,M=v in u?w(u[v]):0,k=u[A]?w(u[A]):(a.period||2*Math.PI)/l;for(p=new Array(l),y=0;y<l;y++)p[y]=M+y*k}return p},a.setGeometry=function(){var u,f,p,y,m=n.sector,l=m.map(T),w={clockwise:-1,counterclockwise:1}[a.direction],v=T(a.rotation),A=function(P){return w*P+v},M=function(P){return(P-v)/w};switch(d){case"linear":f=u=g.identity,y=T,p=b,a.range=g.isFullCircle(l)?[m[0],m[0]+360]:l.map(M).map(b);break;case"category":var k=a._categories.length,E=a.period?Math.max(a.period,k):k;0===E&&(E=1),f=y=function(P){return 2*P*Math.PI/E},u=p=function(P){return P*E/Math.PI/2},a.range=[0,E]}a.c2g=function(P){return A(f(P))},a.g2c=function(P){return u(M(P))},a.t2g=function(P){return A(y(P))},a.g2t=function(P){return p(M(P))}}}(e,r)}var a,d}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(_,ae,ie){"use strict";ae.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(_,ae,ie){"use strict";function g(e){return e<0?-1:e>0?1:0}function x(e){var r=e[0],t=e[1];if(!isFinite(r)||!isFinite(t))return[1,0];var a=(r+1)*(r+1)+t*t;return[(r*r+t*t-1)/a,2*t/a]}function T(e,r){return[r[0]*e.radius+e.cx,-r[1]*e.radius+e.cy]}function b(e,r){return r*e.radius}ae.exports={smith:x,reactanceArc:function(e,r,t,a){var n=T(e,x([t,r])),d=n[0],s=n[1],i=T(e,x([a,r])),u=i[0],f=i[1];if(0===r)return["M"+d+","+s,"L"+u+","+f].join(" ");var p=b(e,1/Math.abs(r));return["M"+d+","+s,"A"+p+","+p+" 0 0,"+(r<0?1:0)+" "+u+","+f].join(" ")},resistanceArc:function(e,r,t,a){var n=b(e,1/(r+1)),d=T(e,x([r,t])),s=d[0],i=d[1],u=T(e,x([r,a])),f=u[0],p=u[1];if(g(t)!==g(a)){var y=T(e,x([r,0]));return["M"+s+","+i,"A"+n+","+n+" 0 0,"+(0<t?0:1)+" "+y[0]+","+y[1],"A"+n+","+n+" 0 0,"+(a<0?0:1)+f+","+p].join(" ")}return["M"+s+","+i,"A"+n+","+n+" 0 0,"+(a<t?0:1)+" "+f+","+p].join(" ")},smithTransform:T}},{}],629:[function(_,ae,ie){"use strict";var g=_("../get_data").getSubplotCalcData,x=_("../../lib").counterRegex,T=_("../polar/polar"),b=_("./constants"),e=b.attr,r=b.name,t=x(r),a={};a[e]={valType:"subplotid",dflt:r,editType:"calc"},ae.exports={attr:e,name:r,idRoot:r,idRegex:t,attrRegex:t,attributes:a,layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),plot:function(n){for(var d=n._fullLayout,s=n.calcdata,i=d._subplots[r],u=0;u<i.length;u++){var f=i[u],p=g(s,r,f),y=d[f]._subplot;y||(y=T(n,f,!0),d[f]._subplot=y),y.plot(p,d,n._promises)}},clean:function(n,d,s,i){for(var u=i._subplots[r]||[],f=0;f<u.length;f++){var p=u[f],y=i[p]._subplot;if(!d[p]&&y)for(var m in y.framework.remove(),y.clipPaths)y.clipPaths[m].remove()}},toSVG:_("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(_,ae,ie){"use strict";var g=_("../../components/color/attributes"),x=_("../cartesian/layout_attributes"),T=_("../domain").attributes,b=_("../../lib").extendFlat,e=_("../../plot_api/edit_types").overrideAll,r=e({color:x.color,showline:b({},x.showline,{dflt:!0}),linecolor:x.linecolor,linewidth:x.linewidth,showgrid:b({},x.showgrid,{dflt:!0}),gridcolor:x.gridcolor,gridwidth:x.gridwidth},"plot","from-root"),t=e({ticklen:x.ticklen,tickwidth:b({},x.tickwidth,{dflt:2}),tickcolor:x.tickcolor,showticklabels:x.showticklabels,showtickprefix:x.showtickprefix,tickprefix:x.tickprefix,showticksuffix:x.showticksuffix,ticksuffix:x.ticksuffix,tickfont:x.tickfont,tickformat:x.tickformat,hoverformat:x.hoverformat,layer:x.layer},"plot","from-root"),a=b({visible:b({},x.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:b({},x.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},r,t),n=b({visible:b({},x.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:x.ticks,editType:"calc"},r,t);ae.exports={domain:T({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:g.background},realaxis:a,imaginaryaxis:n,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(_,ae,ie){"use strict";var g,x,T,b=_("../../lib"),e=_("../../components/color"),r=_("../../plot_api/plot_template"),t=_("../subplot_defaults"),a=_("../get_data").getSubplotData,n=_("../cartesian/prefix_suffix_defaults"),d=_("../cartesian/tick_label_defaults"),s=_("../cartesian/line_grid_defaults"),i=_("../cartesian/set_convert"),u=_("./layout_attributes"),f=_("./constants"),p=f.axisNames,y=(g=function(l){return l.slice().reverse().map(function(w){return-w}).concat([0]).concat(l)},x=String,T={},function(l){var w=x?x(l):l;if(w in T)return T[w];var v=g(l);return T[w]=v,v});function m(l,w,v,A){var M=v("bgcolor");A.bgColor=e.combine(M,A.paper_bgcolor);var k,E=a(A.fullData,f.name,A.id),P=A.layoutOut;function S($,K){return v(k+"."+$,K)}for(var F=0;F<p.length;F++){b.isPlainObject(l[k=p[F]])||(l[k]={});var R=l[k],D=r.newContainer(w,k);D._id=D._name=k,D._attr=A.id+"."+k,D._traceIndices=E.map(function($){return $._expandedIndex});var L=S("visible");if(D.type="linear",i(D,P),n(R,D,S,D.type),L){var B,V,Z,Y,ee="realaxis"===k;ee&&S("side"),ee?S("tickvals"):S("tickvals",y(w.realaxis.tickvals||u.realaxis.tickvals.dflt));var Q=A.font||{};L&&(V=(B=S("color"))===R.color?B:Q.color,Z=Q.size,Y=Q.family),d(R,D,S,D.type,{noAng:!ee,noExp:!0,font:{color:V,size:Z,family:Y}}),b.coerce2(l,w,u,k+".ticklen"),b.coerce2(l,w,u,k+".tickwidth"),b.coerce2(l,w,u,k+".tickcolor",w.color),S("ticks")||(delete w[k].ticklen,delete w[k].tickwidth,delete w[k].tickcolor),s(R,D,S,{dfltColor:B,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[k]}),S("layer")}S("hoverformat"),delete D.type,D._input=R}}ae.exports=function(l,w,v){t(l,w,v,{noUirevision:!0,type:f.name,attributes:u,handleDefaults:m,font:w.font,paper_bgcolor:w.paper_bgcolor,fullData:v,layoutOut:w})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(_,ae,ie){"use strict";var g=_("../lib"),x=_("../plot_api/plot_template"),T=_("./domain").defaults;ae.exports=function(b,e,r,t){var a,n,s=t.attributes,i=t.handleDefaults,u=t.partition||"x",f=e._subplots[t.type],p=f.length,y=p&&f[0].replace(/\d+$/,"");function m(A,M){return g.coerce(a,n,s,A,M)}for(var l=0;l<p;l++){var w=f[l];a=b[w]?b[w]:b[w]={},n=x.newContainer(e,w,y),t.noUirevision||m("uirevision",e.uirevision);var v={};v[u]=[l/p,(l+1)/p],T(n,e,m,v),t.id=w,i(a,n,m,t)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(_,ae,ie){"use strict";function x(T){var b=T.description?" "+T.description:"",e=T.keys||[];if(e.length>0){for(var r=[],t=0;t<e.length;t++)r[t]="`"+e[t]+"`";b+="Finally, the template string has access to ",b=1===e.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return b}_("../constants/docs"),ie.hovertemplateAttrs=function(T,b){T=T||{},x(b=b||{});var e={valType:"string",dflt:"",editType:T.editType||"none"};return!1!==T.arrayOk&&(e.arrayOk=!0),e},ie.texttemplateAttrs=function(T,b){T=T||{},x(b=b||{});var e={valType:"string",dflt:"",editType:T.editType||"calc"};return!1!==T.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(_,ae,ie){"use strict";var g=_("./ternary"),x=_("../../plots/get_data").getSubplotCalcData,T=_("../../lib").counterRegex;ie.name="ternary";var b=ie.attr="subplot";ie.idRoot="ternary",ie.idRegex=ie.attrRegex=T("ternary"),(ie.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},ie.layoutAttributes=_("./layout_attributes"),ie.supplyLayoutDefaults=_("./layout_defaults"),ie.plot=function(e){for(var r=e._fullLayout,t=e.calcdata,a=r._subplots.ternary,n=0;n<a.length;n++){var d=a[n],s=x(t,"ternary",d),i=r[d]._subplot;i||(i=new g({id:d,graphDiv:e,container:r._ternarylayer.node()},r),r[d]._subplot=i),i.plot(s,r,e._promises)}},ie.clean=function(e,r,t,a){for(var n=a._subplots.ternary||[],d=0;d<n.length;d++){var s=n[d],i=a[s]._subplot;!r[s]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(_,ae,ie){"use strict";var g=_("../../components/color/attributes"),x=_("../domain").attributes,T=_("../cartesian/layout_attributes"),b=_("../../plot_api/edit_types").overrideAll,e=_("../../lib/extend").extendFlat,r={title:{text:T.title.text,font:T.title.font},color:T.color,tickmode:T.tickmode,nticks:e({},T.nticks,{dflt:6,min:1}),tick0:T.tick0,dtick:T.dtick,tickvals:T.tickvals,ticktext:T.ticktext,ticks:T.ticks,ticklen:T.ticklen,tickwidth:T.tickwidth,tickcolor:T.tickcolor,showticklabels:T.showticklabels,showtickprefix:T.showtickprefix,tickprefix:T.tickprefix,showticksuffix:T.showticksuffix,ticksuffix:T.ticksuffix,showexponent:T.showexponent,exponentformat:T.exponentformat,minexponent:T.minexponent,separatethousands:T.separatethousands,tickfont:T.tickfont,tickangle:T.tickangle,tickformat:T.tickformat,tickformatstops:T.tickformatstops,hoverformat:T.hoverformat,showline:e({},T.showline,{dflt:!0}),linecolor:T.linecolor,linewidth:T.linewidth,showgrid:e({},T.showgrid,{dflt:!0}),gridcolor:T.gridcolor,gridwidth:T.gridwidth,layer:T.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:T._deprecated.title,titlefont:T._deprecated.titlefont}},t=ae.exports=b({domain:x({name:"ternary"}),bgcolor:{valType:"color",dflt:g.background},sum:{valType:"number",dflt:1,min:0},aaxis:r,baxis:r,caxis:r},"plot","from-root");t.uirevision={valType:"any",editType:"none"},t.aaxis.uirevision=t.baxis.uirevision=t.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(_,ae,ie){"use strict";var g=_("../../components/color"),x=_("../../plot_api/plot_template"),T=_("../../lib"),b=_("../subplot_defaults"),e=_("../cartesian/tick_label_defaults"),r=_("../cartesian/prefix_suffix_defaults"),t=_("../cartesian/tick_mark_defaults"),a=_("../cartesian/tick_value_defaults"),n=_("../cartesian/line_grid_defaults"),d=_("./layout_attributes"),s=["aaxis","baxis","caxis"];function i(f,p,y,m){var l,w,v,A=y("bgcolor"),M=y("sum");m.bgColor=g.combine(A,m.paper_bgcolor);for(var k=0;k<s.length;k++)w=f[l=s[k]]||{},(v=x.newContainer(p,l))._name=l,u(w,v,m,p);var E=p.aaxis,P=p.baxis,S=p.caxis;E.min+P.min+S.min>=M&&(E.min=0,P.min=0,S.min=0,f.aaxis&&delete f.aaxis.min,f.baxis&&delete f.baxis.min,f.caxis&&delete f.caxis.min)}function u(f,p,y,m){var l=d[p._name];function w(P,S){return T.coerce(f,p,l,P,S)}w("uirevision",m.uirevision),p.type="linear";var v=w("color"),A=v!==l.color.dflt?v:y.font.color,M=p._name.charAt(0).toUpperCase(),k="Component "+M,E=w("title.text",k);p._hovertitle=E===k?E:M,T.coerceFont(w,"title.font",{family:y.font.family,size:T.bigFont(y.font.size),color:A}),w("min"),a(f,p,w,"linear"),r(f,p,w,"linear"),e(f,p,w,"linear"),t(f,p,w,{outerTicks:!0}),w("showticklabels")&&(T.coerceFont(w,"tickfont",{family:y.font.family,size:y.font.size,color:A}),w("tickangle"),w("tickformat")),n(f,p,w,{dfltColor:v,bgColor:y.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l}),w("hoverformat"),w("layer")}ae.exports=function(f,p,y){b(f,p,y,{type:"ternary",attributes:d,handleDefaults:i,font:p.font,paper_bgcolor:p.paper_bgcolor})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../registry"),b=_("../../lib"),e=b.strTranslate,r=b._,t=_("../../components/color"),a=_("../../components/drawing"),n=_("../cartesian/set_convert"),d=_("../../lib/extend").extendFlat,s=_("../plots"),i=_("../cartesian/axes"),u=_("../../components/dragelement"),f=_("../../components/fx"),p=_("../../components/dragelement/helpers"),y=p.freeMode,m=p.rectMode,l=_("../../components/titles"),w=_("../cartesian/select").prepSelect,v=_("../cartesian/select").selectOnClick,A=_("../cartesian/select").clearSelect,M=_("../cartesian/select").clearSelectionsCache,k=_("../cartesian/constants");function E(Z,Y){this.id=Z.id,this.graphDiv=Z.graphDiv,this.init(Y),this.makeFramework(Y),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ae.exports=E;var P=E.prototype;P.init=function(Z){this.container=Z._ternarylayer,this.defs=Z._defs,this.layoutId=Z._uid,this.traceHash={},this.layers={}},P.plot=function(Z,Y){var ee=Y[this.id],Q=Y._size;this._hasClipOnAxisFalse=!1;for(var $=0;$<Z.length;$++)if(!1===Z[$][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(ee),this.adjustLayout(ee,Q),s.generalUpdatePerTraceModule(this.graphDiv,this,Z,ee),this.layers.plotbg.select("path").call(t.fill,ee.bgcolor)},P.makeFramework=function(Z){var Y=this.graphDiv,ee=Z[this.id],Q=this.clipId="clip"+this.layoutId+this.id,$=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=b.ensureSingleById(Z._clips,"clipPath",Q,function(K){K.append("path").attr("d","M0,0Z")}),this.clipDefRelative=b.ensureSingleById(Z._clips,"clipPath",$,function(K){K.append("path").attr("d","M0,0Z")}),this.plotContainer=b.ensureSingle(this.container,"g",this.id),this.updateLayers(ee),a.setClipUrl(this.layers.backplot,Q,Y),a.setClipUrl(this.layers.grids,Q,Y)},P.updateLayers=function(Z){var Y=this.layers,ee=["draglayer","plotbg","backplot","grids"];"below traces"===Z.aaxis.layer&&ee.push("aaxis","aline"),"below traces"===Z.baxis.layer&&ee.push("baxis","bline"),"below traces"===Z.caxis.layer&&ee.push("caxis","cline"),ee.push("frontplot"),"above traces"===Z.aaxis.layer&&ee.push("aaxis","aline"),"above traces"===Z.baxis.layer&&ee.push("baxis","bline"),"above traces"===Z.caxis.layer&&ee.push("caxis","cline");var Q=this.plotContainer.selectAll("g.toplevel").data(ee,String),$=["agrid","bgrid","cgrid"];Q.enter().append("g").attr("class",function(K){return"toplevel "+K}).each(function(K){var oe=g.select(this);Y[K]=oe,"frontplot"===K?oe.append("g").classed("scatterlayer",!0):"backplot"===K?oe.append("g").classed("maplayer",!0):"plotbg"===K?oe.append("path").attr("d","M0,0Z"):"aline"===K||"bline"===K||"cline"===K?oe.append("path"):"grids"===K&&$.forEach(function(j){Y[j]=oe.append("g").classed("grid "+j,!0)})}),Q.order()};var S=Math.sqrt(4/3);P.adjustLayout=function(Z,Y){var ee,Q,$,K,oe,j,H=this,G=Z.domain,re=(G.x[0]+G.x[1])/2,q=(G.y[0]+G.y[1])/2,te=G.x[1]-G.x[0],ne=G.y[1]-G.y[0],le=te*Y.w,ue=ne*Y.h,de=Z.sum,he=Z.aaxis.min,be=Z.baxis.min,ge=Z.caxis.min;le>S*ue?$=(K=ue)*S:K=($=le)/S,oe=te*$/le,j=ne*K/ue,Q=Y.t+Y.h*(1-q)-K/2,H.x0=ee=Y.l+Y.w*re-$/2,H.y0=Q,H.w=$,H.h=K,H.sum=de,H.xaxis={type:"linear",range:[he+2*ge-de,de-he-2*be],domain:[re-oe/2,re+oe/2],_id:"x"},n(H.xaxis,H.graphDiv._fullLayout),H.xaxis.setScale(),H.xaxis.isPtWithinRange=function(Ve){return Ve.a>=H.aaxis.range[0]&&Ve.a<=H.aaxis.range[1]&&Ve.b>=H.baxis.range[1]&&Ve.b<=H.baxis.range[0]&&Ve.c>=H.caxis.range[1]&&Ve.c<=H.caxis.range[0]},H.yaxis={type:"linear",range:[he,de-be-ge],domain:[q-j/2,q+j/2],_id:"y"},n(H.yaxis,H.graphDiv._fullLayout),H.yaxis.setScale(),H.yaxis.isPtWithinRange=function(){return!0};var we=H.yaxis.domain[0],ke=H.aaxis=d({},Z.aaxis,{range:[he,de-be-ge],side:"left",tickangle:(+Z.aaxis.tickangle||0)-30,domain:[we,we+j*S],anchor:"free",position:0,_id:"y",_length:$});n(ke,H.graphDiv._fullLayout),ke.setScale();var De=H.baxis=d({},Z.baxis,{range:[de-he-ge,be],side:"bottom",domain:H.xaxis.domain,anchor:"free",position:0,_id:"x",_length:$});n(De,H.graphDiv._fullLayout),De.setScale();var Ee=H.caxis=d({},Z.caxis,{range:[de-he-be,ge],side:"right",tickangle:(+Z.caxis.tickangle||0)+30,domain:[we,we+j*S],anchor:"free",position:0,_id:"y",_length:$});n(Ee,H.graphDiv._fullLayout),Ee.setScale();var Re="M"+ee+","+(Q+K)+"h"+$+"l-"+$/2+",-"+K+"Z";H.clipDef.select("path").attr("d",Re),H.layers.plotbg.select("path").attr("d",Re);var ve="M0,"+K+"h"+$+"l-"+$/2+",-"+K+"Z";H.clipDefRelative.select("path").attr("d",ve);var Te=e(ee,Q);H.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Te),H.clipDefRelative.select("path").attr("transform",null);var Ie=e(ee-De._offset,Q+K);H.layers.baxis.attr("transform",Ie),H.layers.bgrid.attr("transform",Ie);var Ce=e(ee+$/2,Q)+"rotate(30)"+e(0,-ke._offset);H.layers.aaxis.attr("transform",Ce),H.layers.agrid.attr("transform",Ce);var Pe=e(ee+$/2,Q)+"rotate(-30)"+e(0,-Ee._offset);H.layers.caxis.attr("transform",Pe),H.layers.cgrid.attr("transform",Pe),H.drawAxes(!0),H.layers.aline.select("path").attr("d",ke.showline?"M"+ee+","+(Q+K)+"l"+$/2+",-"+K:"M0,0").call(t.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),H.layers.bline.select("path").attr("d",De.showline?"M"+ee+","+(Q+K)+"h"+$:"M0,0").call(t.stroke,De.linecolor||"#000").style("stroke-width",(De.linewidth||0)+"px"),H.layers.cline.select("path").attr("d",Ee.showline?"M"+(ee+$/2)+","+Q+"l"+$/2+","+K:"M0,0").call(t.stroke,Ee.linecolor||"#000").style("stroke-width",(Ee.linewidth||0)+"px"),H.graphDiv._context.staticPlot||H.initInteractions(),a.setClipUrl(H.layers.frontplot,H._hasClipOnAxisFalse?null:H.clipId,H.graphDiv)},P.drawAxes=function(Z){var Y=this.graphDiv,ee=this.id.substr(7)+"title",Q=this.layers,$=this.aaxis,K=this.baxis,oe=this.caxis;if(this.drawAx($),this.drawAx(K),this.drawAx(oe),Z){var j=Math.max($.showticklabels?$.tickfont.size/2:0,(oe.showticklabels?.75*oe.tickfont.size:0)+("outside"===oe.ticks?.87*oe.ticklen:0)),H=(K.showticklabels?K.tickfont.size:0)+("outside"===K.ticks?K.ticklen:0)+3;Q["a-title"]=l.draw(Y,"a"+ee,{propContainer:$,propName:this.id+".aaxis.title",placeholder:r(Y,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-$.title.font.size/3-j,"text-anchor":"middle"}}),Q["b-title"]=l.draw(Y,"b"+ee,{propContainer:K,propName:this.id+".baxis.title",placeholder:r(Y,"Click to enter Component B title"),attributes:{x:this.x0-H,y:this.y0+this.h+.83*K.title.font.size+H,"text-anchor":"middle"}}),Q["c-title"]=l.draw(Y,"c"+ee,{propContainer:oe,propName:this.id+".caxis.title",placeholder:r(Y,"Click to enter Component C title"),attributes:{x:this.x0+this.w+H,y:this.y0+this.h+.83*oe.title.font.size+H,"text-anchor":"middle"}})}},P.drawAx=function(Z){var Y,ee=this.graphDiv,Q=Z._name,$=Q.charAt(0),K=Z._id,oe=this.layers[Q],j=$+"tickLayout",H=(Y=Z).ticks+String(Y.ticklen)+String(Y.showticklabels);this[j]!==H&&(oe.selectAll("."+K+"tick").remove(),this[j]=H),Z.setScale();var G=i.calcTicks(Z),re=i.clipEnds(Z,G),q=i.makeTransTickFn(Z),te=i.getTickSigns(Z)[2],ne=b.deg2rad(30),le=te*(Z.linewidth||1)/2,ue=te*Z.ticklen,de=this.w,he=this.h,be="b"===$?"M0,"+le+"l"+Math.sin(ne)*ue+","+Math.cos(ne)*ue:"M"+le+",0l"+Math.cos(ne)*ue+","+-Math.sin(ne)*ue,ge={a:"M0,0l"+he+",-"+de/2,b:"M0,0l-"+de/2+",-"+he,c:"M0,0l-"+he+","+de/2}[$];i.drawTicks(ee,Z,{vals:"inside"===Z.ticks?re:G,layer:oe,path:be,transFn:q,crisp:!1}),i.drawGrid(ee,Z,{vals:re,layer:this.layers[$+"grid"],path:ge,transFn:q,crisp:!1}),i.drawLabels(ee,Z,{vals:G,layer:oe,transFn:q,labelFns:i.makeLabelFns(Z,0,30)})};var F=k.MINZOOM/2+.87,R="m-0.87,.5h"+F+"v3h-"+(F+5.2)+"l"+(F/2+2.6)+",-"+(.87*F+4.5)+"l2.6,1.5l-"+F/2+","+.87*F+"Z",D="m0.87,.5h-"+F+"v3h"+(F+5.2)+"l-"+(F/2+2.6)+",-"+(.87*F+4.5)+"l-2.6,1.5l"+F/2+","+.87*F+"Z",L="m0,1l"+F/2+","+.87*F+"l2.6,-1.5l-"+(F/2+2.6)+",-"+(.87*F+4.5)+"l-"+(F/2+2.6)+","+(.87*F+4.5)+"l2.6,1.5l"+F/2+",-"+.87*F+"Z",B=!0;function V(Z){g.select(Z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}P.clearSelect=function(){M(this.dragOptions),A(this.dragOptions.gd)},P.initInteractions=function(){var Z,Y,ee,Q,$,K,oe,j,H,G,re,q,te=this,ne=te.layers.plotbg.select("path").node(),le=te.graphDiv,ue=le._fullLayout._zoomlayer;function de(ve){var Te={};return Te[te.id+".aaxis.min"]=ve.a,Te[te.id+".baxis.min"]=ve.b,Te[te.id+".caxis.min"]=ve.c,Te}function he(ve,Te){var Ie=le._fullLayout.clickmode;V(le),2===ve&&(le.emit("plotly_doubleclick",null),T.call("_guiRelayout",le,de({a:0,b:0,c:0}))),Ie.indexOf("select")>-1&&1===ve&&v(Te,le,[te.xaxis],[te.yaxis],te.id,te.dragOptions),Ie.indexOf("event")>-1&&f.click(le,Te,te.id)}function be(ve,Te){return 1-Te/te.h}function ge(ve,Te){return 1-(ve+(te.h-Te)/Math.sqrt(3))/te.w}function we(ve,Te){return(ve-(te.h-Te)/Math.sqrt(3))/te.w}function ke(ve,Te){var Ie=ee+ve*Z,Ce=Q+Te*Y,Pe=Math.max(0,Math.min(1,be(0,Q),be(0,Ce))),Ve=Math.max(0,Math.min(1,ge(ee,Q),ge(Ie,Ce))),qe=Math.max(0,Math.min(1,we(ee,Q),we(Ie,Ce))),Je=(Pe/2+qe)*te.w,lt=(1-Pe/2-Ve)*te.w,He=(Je+lt)/2,$e=lt-Je,et=(1-Pe)*te.h,tt=et-$e/S;$e<k.MINZOOM?(oe=$,re.attr("d",H),q.attr("d","M0,0Z")):(oe={a:$.a+Pe*K,b:$.b+Ve*K,c:$.c+qe*K},re.attr("d",H+"M"+Je+","+et+"H"+lt+"L"+He+","+tt+"L"+Je+","+et+"Z"),q.attr("d","M"+ee+","+Q+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Je+","+et+R+"M"+lt+","+et+D+"M"+He+","+tt+L)),G||(re.transition().style("fill",j>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),q.transition().style("opacity",1).duration(200),G=!0),le.emit("plotly_relayouting",de(oe))}function De(){V(le),oe!==$&&(T.call("_guiRelayout",le,de(oe)),B&&le.data&&le._context.showTips&&(b.notifier(r(le,"Double-click to zoom back out"),"long"),B=!1))}function Ee(ve,Te){var Ie=ve/te.xaxis._m,Ce=Te/te.yaxis._m,Pe=[(oe={a:$.a-Ce,b:$.b+(Ie+Ce)/2,c:$.c-(Ie-Ce)/2}).a,oe.b,oe.c].sort(b.sorterAsc),Ve=Pe.indexOf(oe.a),qe=Pe.indexOf(oe.b),Je=Pe.indexOf(oe.c);Pe[0]<0&&(Pe[1]+Pe[0]/2<0?(Pe[2]+=Pe[0]+Pe[1],Pe[0]=Pe[1]=0):(Pe[2]+=Pe[0]/2,Pe[1]+=Pe[0]/2,Pe[0]=0),Te=($.a-(oe={a:Pe[Ve],b:Pe[qe],c:Pe[Je]}).a)*te.yaxis._m,ve=($.c-oe.c-$.b+oe.b)*te.xaxis._m);var lt=e(te.x0+ve,te.y0+Te);te.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",lt);var He=e(-ve,-Te);te.clipDefRelative.select("path").attr("transform",He),te.aaxis.range=[oe.a,te.sum-oe.b-oe.c],te.baxis.range=[te.sum-oe.a-oe.c,oe.b],te.caxis.range=[te.sum-oe.a-oe.b,oe.c],te.drawAxes(!1),te._hasClipOnAxisFalse&&te.plotContainer.select(".scatterlayer").selectAll(".trace").call(a.hideOutsideRangePoints,te),le.emit("plotly_relayouting",de(oe))}function Re(){T.call("_guiRelayout",le,de(oe))}this.dragOptions={element:ne,gd:le,plotinfo:{id:te.id,domain:le._fullLayout[te.id].domain,xaxis:te.xaxis,yaxis:te.yaxis},subplot:te.id,prepFn:function(ve,Te,Ie){te.dragOptions.xaxes=[te.xaxis],te.dragOptions.yaxes=[te.yaxis],Z=le._fullLayout._invScaleX,Y=le._fullLayout._invScaleY;var Ce=te.dragOptions.dragmode=le._fullLayout.dragmode;te.dragOptions.minDrag=y(Ce)?1:void 0,"zoom"===Ce?(te.dragOptions.moveFn=ke,te.dragOptions.clickFn=he,te.dragOptions.doneFn=De,function(Pe,Ve,qe){var Je=ne.getBoundingClientRect();ee=Ve-Je.left,Q=qe-Je.top,le._fullLayout._calcInverseTransform(le);var He=b.apply3DTransform(le._fullLayout._invTransform)(ee,Q);ee=He[0],Q=He[1],oe=$={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},K=te.aaxis.range[1]-$.a,j=x(te.graphDiv._fullLayout[te.id].bgcolor).getLuminance(),H="M0,"+te.h+"L"+te.w/2+", 0L"+te.w+","+te.h+"Z",G=!1,re=ue.append("path").attr("class","zoombox").attr("transform",e(te.x0,te.y0)).style({fill:j>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",H),q=ue.append("path").attr("class","zoombox-corners").attr("transform",e(te.x0,te.y0)).style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),te.clearSelect(le)}(0,Te,Ie)):"pan"===Ce?(te.dragOptions.moveFn=Ee,te.dragOptions.clickFn=he,te.dragOptions.doneFn=Re,oe=$={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},te.clearSelect(le)):(m(Ce)||y(Ce))&&w(ve,Te,Ie,te.dragOptions,Ce)}},ne.onmousemove=function(ve){f.hover(le,ve,te.id),le._fullLayout._lasthover=ne,le._fullLayout._hoversubplot=te.id},ne.onmouseout=function(ve){le._dragging||u.unhover(le,ve)},u.init(this.dragOptions)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(_,ae,ie){"use strict";var g=_("./lib/loggers"),x=_("./lib/noop"),T=_("./lib/push_unique"),b=_("./lib/is_plain_object"),e=_("./lib/dom").addStyleRule,r=_("./lib/extend"),t=_("./plots/attributes"),a=_("./plots/layout_attributes"),n=r.extendFlat,d=r.extendDeepAll;function s(v){var A=v.name,M=v.categories,k=v.meta;if(ie.modules[A])g.log("Type "+A+" already registered");else{ie.subplotsRegistry[v.basePlotModule.name]||function(B){var V=B.name;if(ie.subplotsRegistry[V])g.log("Plot type "+V+" already registered.");else for(var Z in p(B),ie.subplotsRegistry[V]=B,ie.componentsRegistry)l(Z,B.name)}(v.basePlotModule);for(var E={},P=0;P<M.length;P++)E[M[P]]=!0,ie.allCategories[M[P]]=!0;for(var S in ie.modules[A]={_module:v,categories:E},k&&Object.keys(k).length&&(ie.modules[A].meta=k),ie.allTypes.push(A),ie.componentsRegistry)y(S,A);v.layoutAttributes&&n(ie.traceLayoutAttributes,v.layoutAttributes);var F=v.basePlotModule,R=F.name;if("mapbox"===R){var D=F.constants.styleRules;for(var L in D)e(".js-plotly-plot .plotly .mapboxgl-"+L,D[L])}"geo"!==R&&"mapbox"!==R||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function i(v){if("string"!=typeof v.name)throw new Error("Component module *name* must be a string.");var A=v.name;for(var M in ie.componentsRegistry[A]=v,v.layoutAttributes&&(v.layoutAttributes._isLinkedToArray&&T(ie.layoutArrayContainers,A),p(v)),ie.modules)y(A,M);for(var k in ie.subplotsRegistry)l(A,k);for(var E in ie.transformsRegistry)m(A,E);v.schema&&v.schema.layout&&d(a,v.schema.layout)}function u(v){if("string"!=typeof v.name)throw new Error("Transform module *name* must be a string.");var A="Transform module "+v.name,M="function"==typeof v.transform,k="function"==typeof v.calcTransform;if(!M&&!k)throw new Error(A+" is missing a *transform* or *calcTransform* method.");for(var E in M&&k&&g.log([A+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),b(v.attributes)||g.log(A+" registered without an *attributes* object."),"function"!=typeof v.supplyDefaults&&g.log(A+" registered without a *supplyDefaults* method."),ie.transformsRegistry[v.name]=v,ie.componentsRegistry)m(E,v.name)}function f(v){var A=v.name,M=A.split("-")[0],k=v.dictionary,E=v.format,P=k&&Object.keys(k).length,S=E&&Object.keys(E).length,F=ie.localeRegistry,R=F[A];if(R||(F[A]=R={}),M!==A){var D=F[M];D||(F[M]=D={}),P&&D.dictionary===R.dictionary&&(D.dictionary=k),S&&D.format===R.format&&(D.format=E)}P&&(R.dictionary=k),S&&(R.format=E)}function p(v){if(v.layoutAttributes){var A=v.layoutAttributes._arrayAttrRegexps;if(A)for(var M=0;M<A.length;M++)T(ie.layoutArrayRegexes,A[M])}}function y(v,A){var M=ie.componentsRegistry[v].schema;if(M&&M.traces){var k=M.traces[A];k&&d(ie.modules[A]._module.attributes,k)}}function m(v,A){var M=ie.componentsRegistry[v].schema;if(M&&M.transforms){var k=M.transforms[A];k&&d(ie.transformsRegistry[A].attributes,k)}}function l(v,A){var M=ie.componentsRegistry[v].schema;if(M&&M.subplots){var k=ie.subplotsRegistry[A],E=k.layoutAttributes,P="subplot"===k.attr?k.name:k.attr;Array.isArray(P)&&(P=P[0]);var S=M.subplots[P];E&&S&&d(E,S)}}function w(v){return"object"==typeof v&&(v=v.type),v}ie.modules={},ie.allCategories={},ie.allTypes=[],ie.subplotsRegistry={},ie.transformsRegistry={},ie.componentsRegistry={},ie.layoutArrayContainers=[],ie.layoutArrayRegexes=[],ie.traceLayoutAttributes={},ie.localeRegistry={},ie.apiMethodRegistry={},ie.collectableSubplotTypes=null,ie.register=function(v){if(ie.collectableSubplotTypes=null,!v)throw new Error("No argument passed to Plotly.register.");v&&!Array.isArray(v)&&(v=[v]);for(var A=0;A<v.length;A++){var M=v[A];if(!M)throw new Error("Invalid module was attempted to be registered!");switch(M.moduleType){case"trace":s(M);break;case"transform":u(M);break;case"component":i(M);break;case"locale":f(M);break;case"apiMethod":ie.apiMethodRegistry[M.name]=M.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ie.getModule=function(v){var A=ie.modules[w(v)];return!!A&&A._module},ie.traceIs=function(v,A){if("various"===(v=w(v)))return!1;var M=ie.modules[v];return M||(v&&g.log("Unrecognized trace type "+v+"."),M=ie.modules[t.type.dflt]),!!M.categories[A]},ie.getTransformIndices=function(v,A){for(var M=[],k=v.transforms||[],E=0;E<k.length;E++)k[E].type===A&&M.push(E);return M},ie.hasTransform=function(v,A){for(var M=v.transforms||[],k=0;k<M.length;k++)if(M[k].type===A)return!0;return!1},ie.getComponentMethod=function(v,A){var M=ie.componentsRegistry[v];return M&&M[A]||x},ie.call=function(){var v=arguments[0],A=[].slice.call(arguments,1);return ie.apiMethodRegistry[v].apply(null,A)}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(_,ae,ie){"use strict";var g=_("../registry"),x=_("../lib"),T=x.extendFlat,b=x.extendDeep;function e(r){var t;switch(r){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}ae.exports=function(r,t){var a,s=r.layout,i=b([],r.data),u=b({},s,e(t.tileClass)),f=r._context||{};if(t.width&&(u.width=t.width),t.height&&(u.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){u.annotations=[];var p=Object.keys(u);for(a=0;a<p.length;a++)["xaxis","yaxis","zaxis"].indexOf(p[a].slice(0,5))>-1&&(u[p[a]].title={text:""});for(a=0;a<i.length;a++){var y=i[a];y.showscale=!1,y.marker&&(y.marker.showscale=!1),g.traceIs(y,"pie-like")&&(y.textposition="none")}}if(Array.isArray(t.annotations))for(a=0;a<t.annotations.length;a++)u.annotations.push(t.annotations[a]);var m=Object.keys(u).filter(function(M){return M.match(/^scene\d*$/)});if(m.length){var l={};for("thumbnail"===t.tileClass&&(l={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),a=0;a<m.length;a++){var w=u[m[a]];w.xaxis||(w.xaxis={}),w.yaxis||(w.yaxis={}),w.zaxis||(w.zaxis={}),T(w.xaxis,l),T(w.yaxis,l),T(w.zaxis,l),w._scene=null}}var v=document.createElement("div");t.tileClass&&(v.className=t.tileClass);var A={gd:v,td:v,layout:u,data:i,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:f.mapboxAccessToken}};return"transparent"!==t.setBackground&&(A.config.setBackground=t.setBackground||"opaque"),A.gd.defaultLayout=e(t.tileClass),A}},{"../lib":503,"../registry":638}],640:[function(_,ae,ie){"use strict";var g=_("../lib"),x=_("../plot_api/to_image"),T=_("./filesaver"),b=_("./helpers");ae.exports=function(e,r){var t;return g.isPlainObject(e)||(t=g.getGraphDiv(e)),(r=r||{}).format=r.format||"png",r.width=r.width||null,r.height=r.height||null,r.imageDataOnly=!0,new Promise(function(a,n){t&&t._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),g.isIE()&&"svg"!==r.format&&n(new Error(b.MSG_IE_BAD_FORMAT)),t&&(t._snapshotInProgress=!0);var d=x(e,r),s=r.filename||e.fn||"newplot";s+="."+r.format.replace("-","."),d.then(function(i){return t&&(t._snapshotInProgress=!1),T(i,s,r.format)}).then(function(i){a(i)}).catch(function(i){t&&(t._snapshotInProgress=!1),n(i)})})}},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(_,ae,ie){"use strict";var g=_("../lib"),x=_("./helpers");ae.exports=function(T,b,e){var r=document.createElement("a"),t="download"in r;return new Promise(function(a,n){var d,s;return g.isIE()?(d=x.createBlob(T,"svg"),window.navigator.msSaveBlob(d,b),d=null,a(b)):t?(d=x.createBlob(T,e),s=x.createObjectURL(d),r.href=s,r.download=b,document.body.appendChild(r),r.click(),document.body.removeChild(r),x.revokeObjectURL(s),d=null,a(b)):g.isSafari()?(x.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(T)),a(b)):void n(new Error("download error"))})}},{"../lib":503,"./helpers":642}],642:[function(_,ae,ie){"use strict";var g=_("../registry");ie.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},ie.getRedrawFunc=function(T){return function(){g.getComponentMethod("colorbar","draw")(T)}},ie.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},ie.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var x=window.URL||window.webkitURL;ie.createObjectURL=function(T){return x.createObjectURL(T)},ie.revokeObjectURL=function(T){return x.revokeObjectURL(T)},ie.createBlob=function(T,b){if("svg"===b)return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if("full-json"===b)return new window.Blob([T],{type:"application/json;charset=utf-8"});var e=function(r){for(var t=r.length,a=new ArrayBuffer(t),n=new Uint8Array(a),d=0;d<t;d++)n[d]=r.charCodeAt(d);return a}(window.atob(T));return new window.Blob([e],{type:"image/"+b})},ie.octetStream=function(T){document.location.href="data:application/octet-stream"+T},ie.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,ie.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(_,ae,ie){"use strict";var g=_("./helpers"),x={getDelay:g.getDelay,getRedrawFunc:g.getRedrawFunc,clone:_("./cloneplot"),toSVG:_("./tosvg"),svgToImg:_("./svgtoimg"),toImage:_("./toimage"),downloadImage:_("./download")};ae.exports=x},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(_,ae,ie){"use strict";var g=_("../lib"),x=_("events").EventEmitter,T=_("./helpers");ae.exports=function(b){var e=b.emitter||new x,r=new Promise(function(t,a){var n=window.Image,d=b.svg,s=b.format||"png";if(g.isIE()&&"svg"!==s){var i=new Error(T.MSG_IE_BAD_FORMAT);return a(i),b.promise?r:e.emit("error",i)}var u,f,p=b.canvas,y=b.scale||1,w=y*(b.width||300),v=y*(b.height||150),A=p.getContext("2d"),M=new n;"svg"===s||g.isSafari()?f=T.encodeSVG(d):(u=T.createBlob(d,"svg"),f=T.createObjectURL(u)),p.width=w,p.height=v,M.onload=function(){var k;switch(u=null,T.revokeObjectURL(f),"svg"!==s&&A.drawImage(M,0,0,w,v),s){case"jpeg":k=p.toDataURL("image/jpeg");break;case"png":k=p.toDataURL("image/png");break;case"webp":k=p.toDataURL("image/webp");break;case"svg":k=f;break;default:var E="Image format is not jpeg, png, svg or webp.";if(a(new Error(E)),!b.promise)return e.emit("error",E)}t(k),b.promise||e.emit("success",k)},M.onerror=function(k){if(u=null,T.revokeObjectURL(f),a(k),!b.promise)return e.emit("error",k)},M.src=f});return b.promise?r:e}},{"../lib":503,"./helpers":642,events:84}],645:[function(_,ae,ie){"use strict";var g=_("events").EventEmitter,x=_("../registry"),T=_("../lib"),b=_("./helpers"),e=_("./cloneplot"),r=_("./tosvg"),t=_("./svgtoimg");ae.exports=function(a,n){var d=new g,s=e(a,{format:"png"}),i=s.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var u=b.getRedrawFunc(i);return x.call("_doPlot",i,s.data,s.layout,s.config).then(u).then(function(){var f=b.getDelay(i._fullLayout);setTimeout(function(){var p=r(i),y=document.createElement("canvas");y.id=T.randstr(),(d=t({format:n.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:y,emitter:d,svg:p})).clean=function(){i&&document.body.removeChild(i)}},f)}).catch(function(f){d.emit("error",f)}),d}},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../lib"),T=_("../components/drawing"),b=_("../components/color"),e=_("../constants/xmlns_namespaces"),r=/"/g,t=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");ae.exports=function(a,n,d){var s,i,u=a._fullLayout,f=u._paper,p=u._toppaper,y=u.width,m=u.height;f.insert("rect",":first-child").call(T.setRect,0,0,y,m).call(b.fill,u.paper_bgcolor);var l=u._basePlotModules||[];for(s=0;s<l.length;s++){var w=l[s];w.toSVG&&w.toSVG(a)}if(p){var v=p.node().childNodes,A=Array.prototype.slice.call(v);for(s=0;s<A.length;s++){var M=A[s];M.childNodes.length&&f.node().appendChild(M)}}u._draggers&&u._draggers.remove(),f.node().style.background="",f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var P=g.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){P.style({visibility:null,display:null});var S=this.style.fontFamily;S&&-1!==S.indexOf('"')&&P.style("font-family",S.replace(r,"TOBESTRIPPED"))}else P.remove()});var k=[];if(u._gradientUrlQueryParts)for(i in u._gradientUrlQueryParts)k.push(i);if(u._patternUrlQueryParts)for(i in u._patternUrlQueryParts)k.push(i);k.length&&f.selectAll(k.join(",")).each(function(){var P=g.select(this),S=this.style.fill;S&&-1!==S.indexOf("url(")&&P.style("fill",S.replace(r,"TOBESTRIPPED"));var F=this.style.stroke;F&&-1!==F.indexOf("url(")&&P.style("stroke",F.replace(r,"TOBESTRIPPED"))}),"pdf"!==n&&"eps"!==n||f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),f.node().setAttributeNS(e.xmlns,"xmlns",e.svg),f.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===n&&d&&(f.attr("width",d*y),f.attr("height",d*m),f.attr("viewBox","0 0 "+y+" "+m));var P,S,F,E=(new window.XMLSerializer).serializeToString(f.node());return P=E,S=g.select("body").append("div").style({display:"none"}).html(""),F=P.replace(/(&[^;]*;)/gi,function(R){return"&lt;"===R?"&#60;":"&rt;"===R?"&#62;":-1!==R.indexOf("<")||-1!==R.indexOf(">")?"":S.html(R).text()}),S.remove(),E=(E=(E=F).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),x.isIE()&&(E=(E=(E=E.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),E}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x,T){for(var b=0;b<x.length;b++)x[b].i=b;g.mergeArray(T.text,x,"tx"),g.mergeArray(T.hovertext,x,"htx");var e=T.marker;if(e){g.mergeArray(e.opacity,x,"mo",!0),g.mergeArray(e.color,x,"mc");var r=e.line;r&&(g.mergeArray(r.color,x,"mlc"),g.mergeArrayCastPositive(r.width,x,"mlw"))}}},{"../../lib":503}],648:[function(_,ae,ie){"use strict";var g=_("../scatter/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/template_attributes").texttemplateAttrs,e=_("../../components/colorscale/attributes"),r=_("../../plots/font_attributes"),t=_("./constants"),a=_("../../components/drawing/attributes").pattern,n=_("../../lib/extend").extendFlat,d=r({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=n({},g.marker.line.width,{dflt:0}),i=n({width:s,editType:"calc"},e("marker.line")),u=n({line:i,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:a});ae.exports={x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),text:g.text,texttemplate:b({editType:"plot"},{keys:t.eventDataKeys}),hovertext:g.hovertext,hovertemplate:T({},{keys:t.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},d,{}),insidetextfont:n({},d,{}),outsidetextfont:n({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},g.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:u,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:g.selected.marker.opacity,color:g.selected.marker.color,editType:"style"},textfont:g.selected.textfont,editType:"style"},unselected:{marker:{opacity:g.unselected.marker.opacity,color:g.unselected.marker.color,editType:"style"},textfont:g.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926,"./constants":650}],649:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("../../plots/cartesian/align_period"),T=_("../../components/colorscale/helpers").hasColorscale,b=_("../../components/colorscale/calc"),e=_("./arrays_to_calcdata"),r=_("../scatter/calc_selection");ae.exports=function(t,a){var n,d,s,i,u,f,p=g.getFromId(t,a.xaxis||"x"),y=g.getFromId(t,a.yaxis||"y"),m={msUTC:!(!a.base&&0!==a.base)};"h"===a.orientation?(n=p.makeCalcdata(a,"x",m),s=y.makeCalcdata(a,"y"),i=x(a,y,"y",s),u=!!a.yperiodalignment,f="y"):(n=y.makeCalcdata(a,"y",m),s=p.makeCalcdata(a,"x"),i=x(a,p,"x",s),u=!!a.xperiodalignment,f="x"),d=i.vals;for(var l=Math.min(d.length,n.length),w=new Array(l),v=0;v<l;v++)w[v]={p:d[v],s:n[v]},u&&(w[v].orig_p=s[v],w[v][f+"End"]=i.ends[v],w[v][f+"Start"]=i.starts[v]),a.ids&&(w[v].id=String(a.ids[v]));return T(a,"marker")&&b(t,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),T(a,"marker.line")&&b(t,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(w,a),r(w,a),w}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":647}],650:[function(_,ae,ie){"use strict";ae.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib").isArrayOrTypedArray,T=_("../../constants/numerical").BADNUM,b=_("../../registry"),e=_("../../plots/cartesian/axes"),r=_("../../plots/cartesian/constraints").getAxisGroup,t=_("./sieve.js");function a(l,w,v,A,M){if(A.length){var k,E,P,S;switch(function(F,R){var D,L;for(D=0;D<R.length;D++){var B,V=R[D],Z=V[0].trace,Y="funnel"===Z.type?Z._base:Z.base,ee="h"===Z.orientation?Z.xcalendar:Z.ycalendar,Q="category"===F.type||"multicategory"===F.type?function(){return null}:F.d2c;if(x(Y)){for(L=0;L<Math.min(Y.length,V.length);L++)B=Q(Y[L],0,ee),g(B)?(V[L].b=+B,V[L].hasB=1):V[L].b=0;for(;L<V.length;L++)V[L].b=0}else{B=Q(Y,0,ee);var $=g(B);for(B=$?B:0,L=0;L<V.length;L++)V[L].b=B,$&&(V[L].hasB=1)}}}(v,A),M.mode){case"overlay":n(w,v,A,M);break;case"group":for(k=[],E=[],P=0;P<A.length;P++)void 0===(S=A[P])[0].trace.offset?E.push(S):k.push(S);E.length&&(F=l,D=v,V=new t(E,{posAxis:R=w,sepNegVal:!1,overlapNoMerge:!(B=M).norm}),function(Z,Y,ee,Q){for(var $=Z._fullLayout,j=ee.minDiff,H=ee.traces,G=H.length,re=ee.positions.length!==ee.distinctPositions.length,q=j*(1-Q.gap),te=r($,Y._id)+H[0][0].trace.orientation,ne=$._alignmentOpts[te]||{},le=0;le<G;le++){var ue,de,he=H[le],be=he[0].trace,we=Object.keys((ne[be.alignmentgroup]||{}).offsetGroups||{}).length,ke=(ue=we?q/we:re?q/G:q)*(1-(Q.groupgap||0));de=we?((2*be._offsetIndex+1-we)*ue-ke)/2:re?((2*le+1-G)*ue-ke)/2:-ke/2;var De=he[0].t;De.barwidth=ke,De.poffset=de,De.bargroupwidth=q,De.bardelta=j}ee.binWidth=H[0][0].t.barwidth/100,s(ee),i(Y,ee),u(Y,ee,re)}(F,R,V,B),function(Z,Y){for(var ee=Z.traces,Q=0;Q<ee.length;Q++){var $=ee[Q];if(void 0===$[0].trace.base)for(var K=new t([$],{posAxis:Y,sepNegVal:!0,overlapNoMerge:!0}),oe=0;oe<$.length;oe++){var j=$[oe];if(j.p!==T){var H=K.put(j.p,j.b+j.s);H&&(j.b=H)}}}}(V,R),B.norm?(p(V),y(D,V,B)):f(D,V)),k.length&&n(w,v,k,M);break;case"stack":case"relative":for(k=[],E=[],P=0;P<A.length;P++)void 0===(S=A[P])[0].trace.base?E.push(S):k.push(S);E.length&&function(F,R,D,L,B){var V=new t(L,{posAxis:R,sepNegVal:"relative"===B.mode,overlapNoMerge:!(B.norm||"stack"===B.mode||"relative"===B.mode)});d(R,V,B),function($,K,oe){var j,H,G,re,q,te,ne=m($),le=K.traces;for(re=0;re<le.length;re++)if("funnel"===(H=(j=le[re])[0].trace).type)for(q=0;q<j.length;q++)(te=j[q]).s!==T&&K.put(te.p,-.5*te.s);for(re=0;re<le.length;re++){G="funnel"===(H=(j=le[re])[0].trace).type;var ue=[];for(q=0;q<j.length;q++)if((te=j[q]).s!==T){var de,he=K.put(te.p,de=G?te.s:te.s+te.b),be=he+de;te.b=he,te[ne]=be,oe.norm||(ue.push(be),te.hasB&&ue.push(he))}oe.norm||(H._extremes[$._id]=e.findExtremes($,ue,{tozero:!0,padded:!0}))}}(D,V,B);for(var Z=0;Z<L.length;Z++)for(var Y=L[Z],ee=0;ee<Y.length;ee++){var Q=Y[ee];Q.s!==T&&Q.b+Q.s===V.get(Q.p,Q.s)&&(Q._outmost=!0)}B.norm&&y(D,V,B)}(0,w,v,E,M),k.length&&n(w,v,k,M)}!function(F,R){var D,L,B,V=m(R),Z={},Y=1/0,ee=-1/0;for(D=0;D<F.length;D++)for(B=F[D],L=0;L<B.length;L++){var Q=B[L].p;g(Q)&&(Y=Math.min(Y,Q),ee=Math.max(ee,Q))}var $=1e4/(ee-Y),K=Z.round=function(te){return String(Math.round($*(te-Y)))};for(D=0;D<F.length;D++){(B=F[D])[0].t.extents=Z;var oe=B[0].t.poffset,j=Array.isArray(oe);for(L=0;L<B.length;L++){var H=B[L],G=H[V]-H.w/2;if(g(G)){var re=H[V]+H.w/2,q=K(H.p);Z[q]=Z[q]?[Math.min(G,Z[q][0]),Math.max(re,Z[q][1])]:[G,re]}H.p0=H.p+(j?oe[L]:oe),H.p1=H.p0+H.w,H.s0=H.b,H.s1=H.s0+H.s}}}(A,w)}var F,R,D,B,V}function n(l,w,v,A){for(var M=0;M<v.length;M++){var E=new t([v[M]],{posAxis:l,sepNegVal:!1,overlapNoMerge:!A.norm});d(l,E,A),A.norm?(p(E),y(w,E,A)):f(w,E)}}function d(l,w,v){for(var A=w.minDiff,M=w.traces,k=A*(1-v.gap),E=k*(1-(v.groupgap||0)),P=-E/2,S=0;S<M.length;S++){var F=M[S][0].t;F.barwidth=E,F.poffset=P,F.bargroupwidth=k,F.bardelta=A}w.binWidth=M[0][0].t.barwidth/100,s(w),i(l,w),u(l,w)}function s(l){var w,v,A=l.traces;for(w=0;w<A.length;w++){var M,k=A[w],E=k[0],P=E.trace,S=E.t,F=P._offset||P.offset,R=S.poffset;if(x(F)){for(M=Array.prototype.slice.call(F,0,k.length),v=0;v<M.length;v++)g(M[v])||(M[v]=R);for(v=M.length;v<k.length;v++)M.push(R);S.poffset=M}else void 0!==F&&(S.poffset=F);var D=P._width||P.width,L=S.barwidth;if(x(D)){var B=Array.prototype.slice.call(D,0,k.length);for(v=0;v<B.length;v++)g(B[v])||(B[v]=L);for(v=B.length;v<k.length;v++)B.push(L);if(S.barwidth=B,void 0===F){for(M=[],v=0;v<k.length;v++)M.push(R+(L-B[v])/2);S.poffset=M}}else void 0!==D&&(S.barwidth=D,void 0===F&&(S.poffset=R+(L-D)/2))}}function i(l,w){for(var v=w.traces,A=m(l),M=0;M<v.length;M++)for(var k=v[M],E=k[0].t,P=E.poffset,S=Array.isArray(P),F=E.barwidth,R=Array.isArray(F),D=0;D<k.length;D++){var L=k[D],B=L.w=R?F[D]:F;L[A]=L.p+(S?P[D]:P)+B/2}}function u(l,w,v){var A=w.traces,M=w.minDiff/2;e.minDtick(l,w.minDiff,w.distinctPositions[0],v);for(var k=0;k<A.length;k++){var E,P,S,F,R=A[k],D=R[0],L=D.trace,B=[];for(F=0;F<R.length;F++)P=(E=R[F]).p-M,B.push(P,S=E.p+M);if(L.width||L.offset){var V=D.t,Z=V.poffset,Y=V.barwidth,ee=Array.isArray(Z),Q=Array.isArray(Y);for(F=0;F<R.length;F++)S=(P=(E=R[F]).p+(ee?Z[F]:Z))+(Q?Y[F]:Y),B.push(P,S)}L._extremes[l._id]=e.findExtremes(l,B,{padded:!1})}}function f(l,w){for(var v=w.traces,A=m(l),M=0;M<v.length;M++){for(var k=v[M],E=k[0].trace,P=[],S=!1,F=0;F<k.length;F++){var R=k[F],D=R.b,L=D+R.s;R[A]=L,P.push(L),R.hasB&&P.push(D),R.hasB&&R.b||(S=!0)}E._extremes[l._id]=e.findExtremes(l,P,{tozero:S,padded:!0})}}function p(l){for(var w=l.traces,v=0;v<w.length;v++)for(var A=w[v],M=0;M<A.length;M++){var k=A[M];k.s!==T&&l.put(k.p,k.b+k.s)}}function y(l,w,v){var A=w.traces,M=m(l),k="fraction"===v.norm?1:100,E=k/1e9,P=l.l2c(l.c2l(0)),S="stack"===v.mode?k:P;function F(oe){return g(l.c2l(oe))&&(oe<P-E||oe>S+E||!g(P))}for(var R=0;R<A.length;R++){for(var D=A[R],L=D[0].trace,B=[],V=!1,Z=!1,Y=0;Y<D.length;Y++){var ee=D[Y];if(ee.s!==T){var Q=Math.abs(k/w.get(ee.p,ee.s));ee.b*=Q,ee.s*=Q;var $=ee.b,K=$+ee.s;ee[M]=K,B.push(K),Z=Z||F(K),ee.hasB&&(B.push($),Z=Z||F($)),ee.hasB&&ee.b||(V=!0)}}L._extremes[l._id]=e.findExtremes(l,B,{tozero:V,padded:Z})}}function m(l){return l._id.charAt(0)}ae.exports={crossTraceCalc:function(l,w){for(var v=w.xaxis,A=w.yaxis,M=l._fullLayout,k=l._fullData,E=l.calcdata,P=[],S=[],F=0;F<k.length;F++){var R=k[F];if(!0===R.visible&&b.traceIs(R,"bar")&&R.xaxis===v._id&&R.yaxis===A._id&&("h"===R.orientation?P.push(E[F]):S.push(E[F]),R._computePh))for(var D=l.calcdata[F],L=0;L<D.length;L++)"function"==typeof D[L].ph0&&(D[L].ph0=D[L].ph0()),"function"==typeof D[L].ph1&&(D[L].ph1=D[L].ph1())}var B={xCat:"category"===v.type||"multicategory"===v.type,yCat:"category"===A.type||"multicategory"===A.type,mode:M.barmode,norm:M.barnorm,gap:M.bargap,groupgap:M.bargroupgap};a(l,v,A,S,B),a(l,A,v,P,B)},setGroupPositions:a}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/color"),T=_("../../registry"),b=_("../scatter/xy_defaults"),e=_("../scatter/period_defaults"),r=_("./style_defaults"),t=_("../../plots/cartesian/constraints").getAxisGroup,a=_("./attributes"),n=g.coerceFont;function d(i,u,f,p){var y=u.orientation,l=t(f,u[{v:"x",h:"y"}[y]+"axis"])+y,w=f._alignmentOpts||{},v=p("alignmentgroup"),A=w[l];A||(A=w[l]={});var M=A[v];M?M.traces.push(u):M=A[v]={traces:[u],alignmentIndex:Object.keys(A).length,offsetGroups:{}};var k=p("offsetgroup"),E=M.offsetGroups,P=E[k];k&&(P||(P=E[k]={offsetIndex:Object.keys(E).length}),u._offsetIndex=P.offsetIndex)}function s(i,u,f,p,y,m){var l=!1!==(m=m||{}).moduleHasSelected,w=!1!==m.moduleHasUnselected,v=!1!==m.moduleHasConstrain,A=!1!==m.moduleHasCliponaxis,M=!1!==m.moduleHasTextangle,k=!1!==m.moduleHasInsideanchor,E=!!m.hasPathbar,P=Array.isArray(y)||"auto"===y,S=P||"inside"===y,F=P||"outside"===y;if(S||F){var R=n(p,"textfont",f.font),D=g.extendFlat({},R),L=!(i.textfont&&i.textfont.color);if(L&&delete D.color,n(p,"insidetextfont",D),E){var B=g.extendFlat({},R);L&&delete B.color,n(p,"pathbar.textfont",B)}F&&n(p,"outsidetextfont",R),l&&p("selected.textfont.color"),w&&p("unselected.textfont.color"),v&&p("constraintext"),A&&p("cliponaxis"),M&&p("textangle"),p("texttemplate")}S&&k&&p("insidetextanchor")}ae.exports={supplyDefaults:function(i,u,f,p){function y(v,A){return g.coerce(i,u,a,v,A)}if(b(i,u,p,y)){e(i,u,p,y),y("xhoverformat"),y("yhoverformat"),y("orientation",u.x&&!u.y?"h":"v"),y("base"),y("offset"),y("width"),y("text"),y("hovertext"),y("hovertemplate");var m=y("textposition");s(i,0,p,y,m,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r(i,u,y,f,p);var l=(u.marker.line||{}).color,w=T.getComponentMethod("errorbars","supplyDefaults");w(i,u,l||x.defaultLine,{axis:"y"}),w(i,u,l||x.defaultLine,{axis:"x",inherit:"y"}),g.coerceSelectionMarkerOpacity(u,y)}else u.visible=!1},crossTraceDefaults:function(i,u){var f;function p(m){return g.coerce(f._input,f,a,m)}if("group"===u.barmode)for(var y=0;y<i.length;y++)"bar"===(f=i[y]).type&&d(0,f,u,p)},handleGroupingDefaults:d,handleText:s}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":648,"./style_defaults":663}],653:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T){return g.x="xVal"in x?x.xVal:x.x,g.y="yVal"in x?x.yVal:x.y,x.xa&&(g.xaxis=x.xa),x.ya&&(g.yaxis=x.ya),"h"===T.orientation?(g.label=g.y,g.value=g.x):(g.label=g.x,g.value=g.y),g}},{}],654:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("tinycolor2"),T=_("../../lib").isArrayOrTypedArray;ie.coerceString=function(b,e,r){if("string"==typeof e){if(e||!b.noBlank)return e}else if(("number"==typeof e||!0===e)&&!b.strict)return String(e);return void 0!==r?r:b.dflt},ie.coerceNumber=function(b,e,r){if(g(e)){e=+e;var t=b.min,a=b.max;if(!(void 0!==t&&e<t||void 0!==a&&e>a))return e}return void 0!==r?r:b.dflt},ie.coerceColor=function(b,e,r){return x(e).isValid()?e:void 0!==r?r:b.dflt},ie.coerceEnumerated=function(b,e,r){return b.coerceNumber&&(e=+e),-1!==b.values.indexOf(e)?e:void 0!==r?r:b.dflt},ie.getValue=function(b,e){var r;return Array.isArray(b)?e<b.length&&(r=b[e]):r=b,r},ie.getLineWidth=function(b,e){return 0<e.mlw?e.mlw:T(b.marker.line.width)?0:b.marker.line.width}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(_,ae,ie){"use strict";var g=_("../../components/fx"),x=_("../../registry"),T=_("../../components/color"),b=_("../../lib").fillText,e=_("./helpers").getLineWidth,r=_("../../plots/cartesian/axes").hoverLabelText,t=_("../../constants/numerical").BADNUM;function a(d,s,i,u,f){var p,y,m,l,w,v,A,M=d.cd,k=M[0].trace,E=M[0].t,P="closest"===u,S="waterfall"===k.type,F=d.maxHoverDistance,R=d.maxSpikeDistance;"h"===k.orientation?(p=i,y=s,m="y",l="x",w=j,v=K):(p=s,y=i,m="x",l="y",v=j,w=K);var D=k[m+"period"],L=P||D;function B(ue){return Z(ue,-1)}function V(ue){return Z(ue,1)}function Z(ue,de){return ue[m]+de*ue.w/2}function Y(ue){return ue[m+"End"]-ue[m+"Start"]}var ee=P?B:D?function(ue){return ue.p-Y(ue)/2}:function(ue){return Math.min(B(ue),ue.p-E.bardelta/2)},Q=P?V:D?function(ue){return ue.p+Y(ue)/2}:function(ue){return Math.max(V(ue),ue.p+E.bardelta/2)};function $(ue,de,he){return f.finiteRange&&(he=0),g.inbox(ue-p,de-p,he+Math.min(1,Math.abs(de-ue)/A)-1)}function K(ue){return $(ee(ue),Q(ue),F)}function oe(ue){var de=ue[l];if(S){var he=Math.abs(ue.rawS)||0;y>0?de+=he:y<0&&(de-=he)}return de}function j(ue){var de=y,he=ue.b,be=oe(ue);return g.inbox(he-de,be-de,F+(be-de)/(be-he)-1)}var H=d[m+"a"],G=d[l+"a"];A=Math.abs(H.r2c(H.range[1])-H.r2c(H.range[0]));var ue,de,he,be,re=g.getDistanceFunction(u,w,v,function(ue){return(w(ue)+v(ue))/2});if(g.getClosest(M,re,d),!1!==d.index&&M[d.index].p!==t){L||(ee=function(ue){return Math.min(B(ue),ue.p-E.bargroupwidth/2)},Q=function(ue){return Math.max(V(ue),ue.p+E.bargroupwidth/2)});var q=M[d.index],te=k.base?q.b+q.s:q.s;d[l+"0"]=d[l+"1"]=G.c2p(q[l],!0),d[l+"LabelVal"]=te;var ne=E.extents[E.extents.round(q.p)];return d[m+"0"]=H.c2p(P?ee(q):ne[0],!0),d[m+"1"]=H.c2p(P?Q(q):ne[1],!0),d[m+"LabelVal"]=void 0!==q.orig_p?q.orig_p:q.p,d.labelLabel=r(H,d[m+"LabelVal"],k[m+"hoverformat"]),d.valueLabel=r(G,d[l+"LabelVal"],k[l+"hoverformat"]),d.baseLabel=r(G,q.b,k[l+"hoverformat"]),d.spikeDistance=(de=y,he=(ue=q).b,be=oe(ue),(g.inbox(he-de,be-de,R+(be-de)/(be-he)-1)+function(ue){return $(B(ue),V(ue),R)}(q))/2),d[m+"Spike"]=H.c2p(q.p,!0),b(q,k,d),d.hovertemplate=k.hovertemplate,d}}function n(d,s){var i=s.mcc||d.marker.color,u=s.mlcc||d.marker.line.color,f=e(d,s);return T.opacity(i)?i:T.opacity(u)&&f?u:void 0}ae.exports={hoverPoints:function(d,s,i,u,f){var p=a(d,s,i,u,f);if(p){var y=p.cd,m=y[0].trace,l=y[p.index];return p.color=n(m,l),x.getComponentMethod("errorbars","hoverInfo")(l,m,p),[p]}},hoverOnBars:a,getTraceColor:n}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc").crossTraceCalc,colorbar:_("../scatter/marker_colorbar"),arraysToCalcdata:_("./arrays_to_calcdata"),plot:_("./plot").plot,style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"bar",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(_,ae,ie){"use strict";ae.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../plots/cartesian/axes"),T=_("../../lib"),b=_("./layout_attributes");ae.exports=function(e,r,t){function a(m,l){return T.coerce(e,r,b,m,l)}for(var n=!1,d=!1,s=!1,i={},u=a("barmode"),f=0;f<t.length;f++){var p=t[f];if(g.traceIs(p,"bar")&&p.visible){if(n=!0,"group"===u){var y=p.xaxis+p.yaxis;i[y]&&(s=!0),i[y]=!0}p.visible&&"histogram"===p.type&&"category"!==x.getFromId({_fullLayout:r},p["v"===p.orientation?"xaxis":"yaxis"]).type&&(d=!0)}}n?("overlay"!==u&&a("barnorm"),a("bargap",d&&!s?0:.2),a("bargroupgap")):delete r.barmode}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../lib/svg_text_utils"),e=_("../../components/color"),r=_("../../components/drawing"),t=_("../../registry"),a=_("../../plots/cartesian/axes").tickText,n=_("./uniform_text"),d=n.recordMinTextSize,s=n.clearMinTextSize,i=_("./style"),u=_("./helpers"),f=_("./constants"),p=_("./attributes"),y=p.text,m=p.textposition,l=_("../../components/fx/helpers").appendArrayPointValue,w=f.TEXTPAD;function v(R){return R.id}function M(R,D){return R<D?1:-1}function k(R,D,L,B){var V;return!D.uniformtext.mode&&E(L)?(B&&(V=B()),R.transition().duration(L.duration).ease(L.easing).each("end",function(){V&&V()}).each("interrupt",function(){V&&V()})):R}function E(R){return R&&R.duration>0}function P(R){return"auto"===R?0:R}function S(R,D){var L=Math.PI/180*D,B=Math.abs(Math.sin(L)),V=Math.abs(Math.cos(L));return{x:R.width*V+R.height*B,y:R.width*B+R.height*V}}function F(R,D,L,B,V,Z){var Y=!!Z.isHorizontal,ee=!!Z.constrained,Q=Z.angle||0,$=Z.anchor||"end",K="end"===$,oe="start"===$,j=((Z.leftToRight||0)+1)/2,H=1-j,G=V.width,re=V.height,q=Math.abs(D-R),te=Math.abs(B-L),ne=q>2*w&&te>2*w?w:0;q-=2*ne,te-=2*ne;var le=P(Q);"auto"!==Q||G<=q&&re<=te||!(G>q||re>te)||(G>te||re>q)&&G<re==q<te||(le+=90);var ue=S(V,le),de=1;ee&&(de=Math.min(1,q/ue.x,te/ue.y));var he=V.left*H+V.right*j,be=(V.top+V.bottom)/2,ge=(R+w)*H+(D-w)*j,we=(L+B)/2,ke=0,De=0;if(oe||K){var Ee=(Y?ue.x:ue.y)/2,Re=Y?M(R,D):M(L,B);Y?oe?(ge=R+Re*ne,ke=-Re*Ee):(ge=D-Re*ne,ke=Re*Ee):oe?(we=L+Re*ne,De=-Re*Ee):(we=B-Re*ne,De=Re*Ee)}return{textX:he,textY:be,targetX:ge,targetY:we,anchorX:ke,anchorY:De,scale:de,rotate:le}}ae.exports={plot:function(R,D,L,B,V,Z){var Y=D.xaxis,ee=D.yaxis,Q=R._fullLayout;V||(V={mode:Q.barmode,norm:Q.barmode,gap:Q.bargap,groupgap:Q.bargroupgap},s("bar",Q));var $=T.makeTraceGroups(B,L,"trace bars").each(function(K){var oe=g.select(this),j=K[0].trace,re="bar"===j.type||"funnel"===j.type,q=0;"waterfall"===j.type&&j.connector.visible&&"between"===j.connector.mode&&(q=j.connector.line.width/2);var te="h"===j.orientation,ne=E(V),le=T.ensureSingle(oe,"g","points"),ue=function(R){if(R.ids)return v}(j),de=le.selectAll("g.point").data(T.identity,ue);de.enter().append("g").classed("point",!0),de.exit().remove(),de.each(function(be,ge){var we,ke,He,$e,et,tt,ft,bt,Ct,Vt,De=g.select(this),Ee=($e=Y,et=ee,bt=[],Vt=(tt=te)?et:$e,(ft=[])[0]=(Ct=tt?$e:et).c2p((He=be).s0,!0),bt[0]=Vt.c2p(He.p0,!0),ft[1]=Ct.c2p(He.s1,!0),bt[1]=Vt.c2p(He.p1,!0),tt?[ft,bt]:[bt,ft]),Re=Ee[0][0],ve=Ee[0][1],Te=Ee[1][0],Ie=Ee[1][1],Ce=0==(te?ve-Re:Ie-Te);if(Ce&&re&&u.getLineWidth(j,be)&&(Ce=!1),Ce||(Ce=!(x(Re)&&x(ve)&&x(Te)&&x(Ie))),be.isBlank=Ce,Ce&&(te?ve=Re:Ie=Te),q&&!Ce&&(te?(Re-=M(Re,ve)*q,ve+=M(Re,ve)*q):(Te-=M(Te,Ie)*q,Ie+=M(Te,Ie)*q)),"waterfall"===j.type){if(!Ce){var Pe=j[be.dir].marker;we=Pe.line.width,ke=Pe.color}}else we=u.getLineWidth(j,be),ke=be.mc||j.marker.color;function Ve(He){var $e=g.round(we/2%1,2);return 0===V.gap&&0===V.groupgap?g.round(Math.round(He)-$e,2):He}if(!R._context.staticPlot){var qe=e.opacity(ke)<1||we>.01?Ve:function(He,$e,et){return et&&He===$e?He:Math.abs(He-$e)>=2?Ve(He):He>$e?Math.ceil(He):Math.floor(He)};Re=qe(Re,ve,te),ve=qe(ve,Re,te),Te=qe(Te,Ie,!te),Ie=qe(Ie,Te,!te)}var Je=k(T.ensureSingle(De,"path"),Q,V,Z);if(Je.style("vector-effect","non-scaling-stroke").attr("d",isNaN((ve-Re)*(Ie-Te))||Ce&&R._context.staticPlot?"M0,0Z":"M"+Re+","+Te+"V"+Ie+"H"+ve+"V"+Te+"Z").call(r.setClipUrl,D.layerClipId,R),!Q.uniformtext.mode&&ne){var lt=r.makePointStyleFns(j);r.singlePointStyle(be,Je,j,lt,R)}(function(He,$e,et,tt,ft,bt,Ct,Vt,Ft,ht,ut){var Rt,nn=$e.xaxis,cn=$e.yaxis,Ze=He._fullLayout;function Qe(Qt,sn,hn){return T.ensureSingle(Qt,"text").text(sn).attr({class:"bartext bartext-"+Rt,"text-anchor":"middle","data-notex":1}).call(r.font,hn).call(b.convertToTspans,He)}var sn,hn,Dn,_n,Tn,wn,Ge=tt[0].trace,rt="h"===Ge.orientation,Le=(hn=ft,Dn=nn,_n=cn,Tn=(wn=(sn=tt)[0].trace).texttemplate?function(kn,Fn,On,Qn,sr){var Mr=Fn[0].trace,Wr=T.castOption(Mr,On,"texttemplate");if(!Wr)return"";var mr,Or,vr,Xn,jn="waterfall"===Mr.type,nr="funnel"===Mr.type;function Ur(Ut){return a(Xn,Xn.c2l(Ut),!0).text}"h"===Mr.orientation?(mr="y",Or=sr,vr="x",Xn=Qn):(mr="x",Or=Qn,vr="y",Xn=sr);var Jn=Fn[On],_r={};_r.label=Jn.p,_r.labelLabel=_r[mr+"Label"]=a(Or,Or.c2l(Jn.p),!0).text;var Lr=T.castOption(Mr,Jn.i,"text");(0===Lr||Lr)&&(_r.text=Lr),_r.value=Jn.s,_r.valueLabel=_r[vr+"Label"]=Ur(Jn.s);var $r={};l($r,Mr,Jn.i),jn&&(_r.delta=+Jn.rawS||Jn.s,_r.deltaLabel=Ur(_r.delta),_r.final=Jn.v,_r.finalLabel=Ur(_r.final),_r.initial=_r.final-_r.delta,_r.initialLabel=Ur(_r.initial)),nr&&(_r.value=Jn.s,_r.valueLabel=Ur(_r.value),_r.percentInitial=Jn.begR,_r.percentInitialLabel=T.formatPercent(Jn.begR),_r.percentPrevious=Jn.difR,_r.percentPreviousLabel=T.formatPercent(Jn.difR),_r.percentTotal=Jn.sumR,_r.percenTotalLabel=T.formatPercent(Jn.sumR));var dn=T.castOption(Mr,Jn.i,"customdata");return dn&&(_r.customdata=dn),T.texttemplateString(Wr,_r,kn._d3locale,$r,_r,Mr._meta||{})}(Ze,sn,hn,Dn,_n):wn.textinfo?function(kn,Fn,On,Qn){var sr=kn[0].trace,Mr="h"===sr.orientation,Wr="waterfall"===sr.type,mr="funnel"===sr.type;function Or(Kt){return a(Mr?On:Qn,+Kt,!0).text}var vr,jn=kn[Fn],nr=sr.textinfo.split("+"),Ur=[],Jn=function(Kt){return-1!==nr.indexOf(Kt)};if(Jn("label")&&Ur.push(a(Mr?Qn:On,kn[Fn].p,!0).text),Jn("text")&&(0===(vr=T.castOption(sr,jn.i,"text"))||vr)&&Ur.push(vr),Wr){var Hr=+jn.rawS||jn.s,Lr=jn.v,$r=Lr-Hr;Jn("initial")&&Ur.push(Or($r)),Jn("delta")&&Ur.push(Or(Hr)),Jn("final")&&Ur.push(Or(Lr))}if(mr){Jn("value")&&Ur.push(Or(jn.s));var dn=0;Jn("percent initial")&&dn++,Jn("percent previous")&&dn++,Jn("percent total")&&dn++;var Ut=dn>1;Jn("percent initial")&&(vr=T.formatPercent(jn.begR),Ut&&(vr+=" of initial"),Ur.push(vr)),Jn("percent previous")&&(vr=T.formatPercent(jn.difR),Ut&&(vr+=" of previous"),Ur.push(vr)),Jn("percent total")&&(vr=T.formatPercent(jn.sumR),Ut&&(vr+=" of total"),Ur.push(vr))}return Ur.join("<br>")}(sn,hn,Dn,_n):u.getValue(wn.text,hn),u.coerceString(y,Tn));Rt=function(Qt,sn){var hn=u.getValue(Qt.textposition,sn);return u.coerceEnumerated(m,hn)}(Ge,ft);var je=tt[ft],Ne=!("stack"===ht.mode||"relative"===ht.mode)||je._outmost;if(Le&&"none"!==Rt&&(!je.isBlank&&bt!==Ct&&Vt!==Ft||"auto"!==Rt&&"inside"!==Rt)){var st=Ze.font,mt=i.getBarColor(tt[ft],Ge),Tt=i.getInsideTextFont(Ge,ft,st,mt),xt=i.getOutsideTextFont(Ge,ft,st),zt=et.datum();rt?"log"===nn.type&&zt.s0<=0&&(bt=nn.range[0]<nn.range[1]?0:nn._length):"log"===cn.type&&zt.s0<=0&&(Vt=cn.range[0]<cn.range[1]?cn._length:0);var gt,Bt,jt,it,Mt,qt=Math.abs(Ct-bt)-2*w,Wt=Math.abs(Ft-Vt)-2*w;if("outside"===Rt&&(Ne||je.hasB||(Rt="inside")),"auto"===Rt&&(Ne?(Rt="inside",gt=Qe(et,Le,Mt=T.ensureUniformFontSize(He,Tt)),it=(Bt=r.bBox(gt.node())).height,(jt=Bt.width)>0&&it>0&&(jt<=qt&&it<=Wt||jt<=Wt&&it<=qt||(rt?qt>=jt*(Wt/it):Wt>=it*(qt/jt)))?Rt="inside":(Rt="outside",gt.remove(),gt=null)):Rt="inside"),!gt){var Dt=(gt=Qe(et,Le,Mt=T.ensureUniformFontSize(He,"outside"===Rt?xt:Tt))).attr("transform");if(gt.attr("transform",""),jt=(Bt=r.bBox(gt.node())).width,it=Bt.height,gt.attr("transform",Dt),jt<=0||it<=0)return void gt.remove()}var Ht,gn=Ge.textangle;Ht="outside"===Rt?function(Qt,sn,hn,Dn,_n,Tn){var wn,kn=!!Tn.isHorizontal,Fn=!!Tn.constrained,On=Tn.angle||0,Qn=_n.width,sr=_n.height,Mr=Math.abs(sn-Qt),Wr=Math.abs(Dn-hn);wn=kn?Wr>2*w?w:0:Mr>2*w?w:0;var mr=1;Fn&&(mr=kn?Math.min(1,Wr/sr):Math.min(1,Mr/Qn));var Or=P(On),vr=S(_n,Or),Xn=(kn?vr.x:vr.y)/2,jn=(_n.left+_n.right)/2,nr=(_n.top+_n.bottom)/2,Ur=(Qt+sn)/2,Jn=(hn+Dn)/2,_r=0,Hr=0,Lr=kn?M(sn,Qt):M(hn,Dn);return kn?(Ur=sn-Lr*wn,_r=Lr*Xn):(Jn=Dn+Lr*wn,Hr=-Lr*Xn),{textX:jn,textY:nr,targetX:Ur,targetY:Jn,anchorX:_r,anchorY:Hr,scale:mr,rotate:Or}}(bt,Ct,Vt,Ft,Bt,{isHorizontal:rt,constrained:"both"===Ge.constraintext||"outside"===Ge.constraintext,angle:gn}):F(bt,Ct,Vt,Ft,Bt,{isHorizontal:rt,constrained:"both"===Ge.constraintext||"inside"===Ge.constraintext,angle:gn,anchor:Ge.insidetextanchor}),Ht.fontSize=Mt.size,d("histogram"===Ge.type?"bar":Ge.type,Ht,Ze),je.transform=Ht,k(gt,Ze,ht,ut).attr("transform",T.getTextTransform(Ht))}else et.select("text").remove()})(R,D,De,K,ge,Re,ve,Te,Ie,V,Z),D.layerClipId&&r.hideOutsideRangePoint(be,De.select("text"),Y,ee,j.xcalendar,j.ycalendar)}),r.setClipUrl(oe,!1===j.cliponaxis?null:D.layerClipId,R)});t.getComponentMethod("errorbars","plot")(R,$,D,V)},toMoveInsideBar:F}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(_,ae,ie){"use strict";function g(x,T,b,e,r){var t=T.c2p(e?x.s0:x.p0,!0),a=T.c2p(e?x.s1:x.p1,!0),n=b.c2p(e?x.p0:x.s0,!0),d=b.c2p(e?x.p1:x.s1,!0);return r?[(t+a)/2,(n+d)/2]:e?[a,(n+d)/2]:[(t+a)/2,d]}ae.exports=function(x,T){var b,e=x.cd,r=x.xaxis,t=x.yaxis,a=e[0].trace,n="funnel"===a.type,d="h"===a.orientation,s=[];if(!1===T)for(b=0;b<e.length;b++)e[b].selected=0;else for(b=0;b<e.length;b++){var i=e[b],u="ct"in i?i.ct:g(i,r,t,d,n);T.contains(u,!1,b,x)?(s.push({pointNumber:b,x:r.c2d(i.x),y:t.c2d(i.y)}),i.selected=1):i.selected=0}return s}},{}],661:[function(_,ae,ie){"use strict";ae.exports=T;var g=_("../../lib").distinctVals,x=_("../../constants/numerical").BADNUM;function T(b,e){this.traces=b,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var r=1/0,t=[],a=0;a<b.length;a++){for(var n=b[a],d=0;d<n.length;d++){var s=n[d];s.p!==x&&t.push(s.p)}n[0]&&n[0].width1&&(r=Math.min(n[0].width1,r))}this.positions=t;var i=g(t);this.distinctPositions=i.vals,this.minDiff=1===i.vals.length&&r!==1/0?r:Math.min(i.minDiff,r);var u=(e.posAxis||{}).type;"category"!==u&&"multicategory"!==u||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}T.prototype.put=function(b,e){var r=this.getLabel(b,e),t=this.bins[r]||0;return this.bins[r]=t+e,t},T.prototype.get=function(b,e){var r=this.getLabel(b,e);return this.bins[r]||0},T.prototype.getLabel=function(b,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?b:Math.round(b/this.binWidth))}},{"../../constants/numerical":479,"../../lib":503}],662:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/color"),T=_("../../components/drawing"),b=_("../../lib"),e=_("../../registry"),r=_("./uniform_text").resizeText,t=_("./attributes"),a=t.textfont,n=t.insidetextfont,d=t.outsidetextfont,s=_("./helpers");function i(v,A,M){T.pointStyle(v.selectAll("path"),A,M),u(v,A,M)}function u(v,A,M){v.selectAll("text").each(function(k){var E=g.select(this),P=b.ensureUniformFontSize(M,f(E,k,A,M));T.font(E,P)})}function f(v,A,M,k){var E=k._fullLayout.font,P=M.textfont;if(v.classed("bartext-inside")){var S=w(A,M);P=y(M,A.i,E,S)}else v.classed("bartext-outside")&&(P=m(M,A.i,E));return P}function p(v,A,M){return l(a,v.textfont,A,M)}function y(v,A,M,k){var E=p(v,A,M);return(void 0===v._input.textfont||void 0===v._input.textfont.color||Array.isArray(v.textfont.color)&&void 0===v.textfont.color[A])&&(E={color:x.contrast(k),family:E.family,size:E.size}),l(n,v.insidetextfont,A,E)}function m(v,A,M){var k=p(v,A,M);return l(d,v.outsidetextfont,A,k)}function l(v,A,M,k){var E=s.getValue((A=A||{}).family,M),P=s.getValue(A.size,M),S=s.getValue(A.color,M);return{family:s.coerceString(v.family,E,k.family),size:s.coerceNumber(v.size,P,k.size),color:s.coerceColor(v.color,S,k.color)}}function w(v,A){return"waterfall"===A.type?A[v.dir].marker.color:v.mcc||v.mc||A.marker.color}ae.exports={style:function(v){var A=g.select(v).selectAll("g.barlayer").selectAll("g.trace");r(v,A,"bar");var M=A.size(),k=v._fullLayout;A.style("opacity",function(E){return E[0].trace.opacity}).each(function(E){("stack"===k.barmode&&M>1||0===k.bargap&&0===k.bargroupgap&&!E[0].trace.marker.line.width)&&g.select(this).attr("shape-rendering","crispEdges")}),A.selectAll("g.points").each(function(E){i(g.select(this),E[0].trace,v)}),e.getComponentMethod("errorbars","style")(A)},styleTextPoints:u,styleOnSelect:function(v,A,M){var E,P,S,F,R,D,k=A[0].trace;k.selectedpoints?(P=k,S=v,T.selectedPointStyle((E=M).selectAll("path"),P),F=E.selectAll("text"),R=P,D=S,F.each(function(L){var B,V=g.select(this);if(L.selected){B=b.ensureUniformFontSize(D,f(V,L,R,D));var Z=R.selected.textfont&&R.selected.textfont.color;Z&&(B.color=Z),T.font(V,B)}else T.selectedTextStyle(V,R)})):(i(M,k,v),e.getComponentMethod("errorbars","style")(M))},getInsideTextFont:y,getOutsideTextFont:m,getBarColor:w,resizeText:r}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(_,ae,ie){"use strict";var g=_("../../components/color"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("../../lib").coercePattern;ae.exports=function(e,r,t,a,n){var d=t("marker.color",a),s=x(e,"marker");s&&T(e,r,n,t,{prefix:"marker.",cLetter:"c"}),t("marker.line.color",g.defaultLine),x(e,"marker.line")&&T(e,r,n,t,{prefix:"marker.line.",cLetter:"c"}),t("marker.line.width"),t("marker.opacity"),b(t,"marker.pattern",d,s),t("selected.marker.color"),t("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib");function T(b){return"_"+b+"Text_minsize"}ae.exports={recordMinTextSize:function(b,e,r){if(r.uniformtext.mode){var t=T(b),a=r.uniformtext.minsize,n=e.scale*e.fontSize;e.hide=n<a,r[t]=r[t]||1/0,e.hide||(r[t]=Math.min(r[t],Math.max(n,a)))}},clearMinTextSize:function(b,e){e[T(b)]=void 0},resizeText:function(b,e,r){var t=b._fullLayout,a=t["_"+r+"Text_minsize"];if(a){var n,d="hide"===t.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":n="g.slice";break;case"treemap":case"icicle":n="g.slice, g.pathbar";break;default:n="g.points > g.point"}e.selectAll(n).each(function(s){var i=s.transform;i&&(i.scale=d&&i.hide?0:a/i.fontSize,g.select(this).select("text").attr("transform",x.getTextTransform(i)))})}}}},{"../../lib":503,"@plotly/d3":58}],665:[function(_,ae,ie){"use strict";var g=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../lib/extend").extendFlat,T=_("../scatterpolar/attributes"),b=_("../bar/attributes");ae.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:x({},b.base,{}),offset:x({},b.offset,{}),width:x({},b.width,{}),text:x({},b.text,{}),hovertext:x({},b.hovertext,{}),marker:b.marker,hoverinfo:T.hoverinfo,hovertemplate:g(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1e3}],666:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/helpers").hasColorscale,x=_("../../components/colorscale/calc"),T=_("../bar/arrays_to_calcdata"),b=_("../bar/cross_trace_calc").setGroupPositions,e=_("../scatter/calc_selection"),r=_("../../registry").traceIs,t=_("../../lib").extendFlat;ae.exports={calc:function(a,n){for(var d=a._fullLayout,s=n.subplot,u=d[s].angularaxis,f=d[s].radialaxis.makeCalcdata(n,"r"),p=u.makeCalcdata(n,"theta"),y=n._length,m=new Array(y),l=f,w=p,v=0;v<y;v++)m[v]={p:w[v],s:l[v]};function A(M){var k=n[M];void 0!==k&&(n["_"+M]=Array.isArray(k)?u.makeCalcdata(n,M):u.d2c(k,n.thetaunit))}return"linear"===u.type&&(A("width"),A("offset")),g(n,"marker")&&x(a,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),g(n,"marker.line")&&x(a,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(m,n),e(m,n),m},crossTraceCalc:function(a,n,d){for(var s=a.calcdata,i=[],u=0;u<s.length;u++){var f=s[u],p=f[0].trace;!0===p.visible&&r(p,"bar")&&p.subplot===d&&i.push(f)}var y=t({},n.radialaxis,{_id:"x"});b(a,n.angularaxis,y,i,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":928}],667:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../scatterpolar/defaults").handleRThetaDefaults,T=_("../bar/style_defaults"),b=_("./attributes");ae.exports=function(e,r,t,a){function n(d,s){return g.coerce(e,r,b,d,s)}x(e,r,a,n)?(n("thetaunit"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate"),T(e,r,n,t,a),g.coerceSelectionMarkerOpacity(r,n)):r.visible=!1}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1002,"./attributes":665}],668:[function(_,ae,ie){"use strict";var g=_("../../components/fx"),x=_("../../lib"),T=_("../bar/hover").getTraceColor,b=x.fillText,e=_("../scatterpolar/hover").makeHoverPointText,r=_("../../plots/polar/helpers").isPtInsidePolygon;ae.exports=function(t,a,n){var d=t.cd,s=d[0].trace,i=t.subplot,u=i.radialAxis,p=i.vangles,y=p?r:x.isPtInsideSector,m=t.maxHoverDistance,l=i.angularAxis._period||2*Math.PI,w=Math.abs(u.g2p(Math.sqrt(a*a+n*n))),v=Math.atan2(n,a);if(u.range[0]>u.range[1]&&(v+=Math.PI),g.getClosest(d,function(k){return y(w,v,[k.rp0,k.rp1],[k.thetag0,k.thetag1],p)?m+Math.min(1,Math.abs(k.thetag1-k.thetag0)/l)-1+(k.rp1-w)/(k.rp1-k.rp0)-1:1/0},t),!1!==t.index){var A=d[t.index];t.x0=t.x1=A.ct[0],t.y0=t.y1=A.ct[1];var M=x.extendFlat({},A,{r:A.s,theta:A.p});return b(A,s,t),e(M,s,i,t),t.hovertemplate=s.hovertemplate,t.color=T(s,A),t.xLabelVal=t.yLabelVal=void 0,A.s<0&&(t.idealAlign="left"),[t]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1004}],669:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"barpolar",basePlotModule:_("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("../scatterpolar/format_labels"),style:_("../bar/style").style,styleOnSelect:_("../bar/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"../scatterpolar/format_labels":1003,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(_,ae,ie){"use strict";ae.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes");ae.exports=function(T,b,e){var r,t={};function a(s,i){return g.coerce(T[r]||{},b[r],x,s,i)}for(var n=0;n<e.length;n++){var d=e[n];"barpolar"===d.type&&!0===d.visible&&(t[r=d.subplot]||(a("barmode"),a("bargap"),t[r]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../components/drawing"),e=_("../../plots/polar/helpers");ae.exports=function(r,t,a){var p,y,m,n=t.xaxis,d=t.yaxis,s=t.radialAxis,i=t.angularAxis,u=(y=(p=t).cxx,m=p.cyy,p.vangles?function(l,w,v,A){var M,k;T.angleDelta(v,A)>0?(M=v,k=A):(M=A,k=v);var E=[e.findEnclosingVertexAngles(M,p.vangles)[0],(M+k)/2,e.findEnclosingVertexAngles(k,p.vangles)[1]];return e.pathPolygonAnnulus(l,w,M,k,E,y,m)}:function(l,w,v,A){return T.pathAnnulus(l,w,v,A,y,m)}),f=t.layers.frontplot.select("g.barlayer");T.makeTraceGroups(f,a,"trace bars").each(function(){var p=g.select(this),y=T.ensureSingle(p,"g","points").selectAll("g.point").data(T.identity);y.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),y.exit().remove(),y.each(function(m){var l,w=g.select(this),v=m.rp0=s.c2p(m.s0),A=m.rp1=s.c2p(m.s1),M=m.thetag0=i.c2g(m.p0),k=m.thetag1=i.c2g(m.p1);if(x(v)&&x(A)&&x(M)&&x(k)&&v!==A&&M!==k){var E=s.c2g(m.s1),P=(M+k)/2;m.ct=[n.c2p(E*Math.cos(P)),d.c2p(E*Math.sin(P))],l=u(v,A,M,k)}else l="M0,0Z";T.ensureSingle(w,"path").attr("d",l)}),b.setClipUrl(p,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,r)})}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(_,ae,ie){"use strict";var g=_("../scatter/attributes"),x=_("../bar/attributes"),T=_("../../components/color/attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../plots/template_attributes").hovertemplateAttrs,r=_("../../lib/extend").extendFlat,t=g.marker,a=t.line;ae.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:r({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:r({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:r({},t.size,{arrayOk:!1,editType:"calc"}),color:r({},t.color,{arrayOk:!1,editType:"style"}),line:{color:r({},a.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:r({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:g.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup,selected:{marker:g.selected.marker,editType:"style"},unselected:{marker:g.unselected.marker,editType:"style"},text:r({},g.text,{}),hovertext:r({},g.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926}],674:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../plots/cartesian/axes"),T=_("../../plots/cartesian/align_period"),b=_("../../lib"),e=_("../../constants/numerical").BADNUM,r=b._;ae.exports=function(y,m){var l,w,v,A,M,k,E,P=y._fullLayout,S=x.getFromId(y,m.xaxis||"x"),F=x.getFromId(y,m.yaxis||"y"),R=[],D="violin"===m.type?"_numViolins":"_numBoxes";"h"===m.orientation?(v=S,A="x",M=F,k="y",E=!!m.yperiodalignment):(v=F,A="y",M=S,k="x",E=!!m.xperiodalignment);var L,B,V,Z,Y,ee,Q=function(et,tt,ft,bt){var Ct,Vt=tt+"0"in et;if(tt in et||Vt&&"d"+tt in et){var ht=ft.makeCalcdata(et,tt);return[T(et,ft,tt,ht).vals,ht]}Ct=Vt?et[tt+"0"]:"name"in et&&("category"===ft.type||g(et.name)&&-1!==["linear","log"].indexOf(ft.type)||b.isDateTime(et.name)&&"date"===ft.type)?et.name:bt;for(var ut="multicategory"===ft.type?ft.r2c_just_indices(Ct):ft.d2c(Ct,0,et[tt+"calendar"]),Rt=et._length,nn=new Array(Rt),cn=0;cn<Rt;cn++)nn[cn]=ut;return[nn]}(m,k,M,P[D]),$=Q[0],K=Q[1],oe=b.distinctVals($,M),j=oe.vals,H=oe.minDiff/2,G="all"===(m.boxpoints||m.points)?b.identity:function(et){return et.v<L.lf||et.v>L.uf};if(m._hasPreCompStats){var re=m[A],q=function(et){return v.d2c((m[et]||[])[l])},te=1/0,ne=-1/0;for(l=0;l<m._length;l++){var le=$[l];if(g(le)){if((L={}).pos=L[k]=le,E&&K&&(L.orig_p=K[l]),L.q1=q("q1"),L.med=q("median"),L.q3=q("q3"),B=[],re&&b.isArrayOrTypedArray(re[l]))for(w=0;w<re[l].length;w++)(ee=v.d2c(re[l][w]))!==e&&(a(Y={v:ee,i:[l,w]},m,[l,w]),B.push(Y));if(L.pts=B.sort(n),Z=(V=L[A]=B.map(d)).length,L.med!==e&&L.q1!==e&&L.q3!==e&&L.med>=L.q1&&L.q3>=L.med){var ue=q("lowerfence");L.lf=ue!==e&&ue<=L.q1?ue:s(L,V,Z);var de=q("upperfence");L.uf=de!==e&&de>=L.q3?de:i(L,V,Z);var he=q("mean");L.mean=he!==e?he:Z?b.mean(V,Z):(L.q1+L.q3)/2;var be=q("sd");L.sd=he!==e&&be>=0?be:Z?b.stdev(V,Z,L.mean):L.q3-L.q1,L.lo=u(L),L.uo=f(L);var ge=q("notchspan");ge=ge!==e&&ge>0?ge:p(L,Z),L.ln=L.med-ge,L.un=L.med+ge;var we=L.lf,ke=L.uf;m.boxpoints&&V.length&&(we=Math.min(we,V[0]),ke=Math.max(ke,V[Z-1])),m.notched&&(we=Math.min(we,L.ln),ke=Math.max(ke,L.un)),L.min=we,L.max=ke}else{var De;b.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+L.q1,"median = "+L.med,"q3 = "+L.q3].join("\n")),L.med=De=L.med!==e?L.med:L.q1!==e?L.q3!==e?(L.q1+L.q3)/2:L.q1:L.q3!==e?L.q3:0,L.q1=L.q3=De,L.lf=L.uf=De,L.mean=L.sd=De,L.ln=L.un=De,L.min=L.max=De}te=Math.min(te,L.min),ne=Math.max(ne,L.max),L.pts2=B.filter(G),R.push(L)}}m._extremes[v._id]=x.findExtremes(v,[te,ne],{padded:!0})}else{var Ee=v.makeCalcdata(m,A),Re=function(et,tt){for(var ft=et.length,bt=new Array(ft+1),Ct=0;Ct<ft;Ct++)bt[Ct]=et[Ct]-tt;return bt[ft]=et[ft-1]+tt,bt}(j,H),ve=j.length,Te=function(et){for(var tt=new Array(et),ft=0;ft<et;ft++)tt[ft]=[];return tt}(ve);for(l=0;l<m._length;l++)if(g(ee=Ee[l])){var Ie=b.findBin($[l],Re);Ie>=0&&Ie<ve&&(a(Y={v:ee,i:l},m,l),Te[Ie].push(Y))}var Ce=1/0,Pe=-1/0,Ve=m.quartilemethod,qe="exclusive"===Ve,Je="inclusive"===Ve;for(l=0;l<ve;l++)if(Te[l].length>0){var lt,He;(L={}).pos=L[k]=j[l],B=L.pts=Te[l].sort(n),Z=(V=L[A]=B.map(d)).length,L.min=V[0],L.max=V[Z-1],L.mean=b.mean(V,Z),L.sd=b.stdev(V,Z,L.mean),L.med=b.interp(V,.5),Z%2&&(qe||Je)?(qe?(lt=V.slice(0,Z/2),He=V.slice(Z/2+1)):Je&&(lt=V.slice(0,Z/2+1),He=V.slice(Z/2)),L.q1=b.interp(lt,.5),L.q3=b.interp(He,.5)):(L.q1=b.interp(V,.25),L.q3=b.interp(V,.75)),L.lf=s(L,V,Z),L.uf=i(L,V,Z),L.lo=u(L),L.uo=f(L);var $e=p(L,Z);L.ln=L.med-$e,L.un=L.med+$e,Ce=Math.min(Ce,L.ln),Pe=Math.max(Pe,L.un),L.pts2=B.filter(G),R.push(L)}m._extremes[v._id]=x.findExtremes(v,m.notched?Ee.concat([Ce,Pe]):Ee,{padded:!0})}return function(et,tt){if(b.isArrayOrTypedArray(tt.selectedpoints))for(var ft=0;ft<et.length;ft++){for(var bt=et[ft].pts||[],Ct={},Vt=0;Vt<bt.length;Vt++)Ct[bt[Vt].i]=Vt;b.tagSelected(bt,tt,Ct)}}(R,m),R.length>0?(R[0].t={num:P[D],dPos:H,posLetter:k,valLetter:A,labels:{med:r(y,"median:"),min:r(y,"min:"),q1:r(y,"q1:"),q3:r(y,"q3:"),max:r(y,"max:"),mean:r(y,"sd"===m.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:r(y,"lower fence:"),uf:r(y,"upper fence:")}},P[D]++,R):[{t:{empty:!0}}]};var t={text:"tx",hovertext:"htx"};function a(y,m,l){for(var w in t)b.isArrayOrTypedArray(m[w])&&(Array.isArray(l)?b.isArrayOrTypedArray(m[w][l[0]])&&(y[t[w]]=m[w][l[0]][l[1]]):y[t[w]]=m[w][l])}function n(y,m){return y.v-m.v}function d(y){return y.v}function s(y,m,l){return 0===l?y.q1:Math.min(y.q1,m[Math.min(b.findBin(2.5*y.q1-1.5*y.q3,m,!0)+1,l-1)])}function i(y,m,l){return 0===l?y.q3:Math.max(y.q3,m[Math.max(b.findBin(2.5*y.q3-1.5*y.q1,m),0)])}function u(y){return 4*y.q1-3*y.q3}function f(y){return 4*y.q3-3*y.q1}function p(y,m){return 0===m?0:1.57*(y.q3-y.q1)/Math.sqrt(m)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("../../lib"),T=_("../../plots/cartesian/constraints").getAxisGroup,b=["v","h"];function e(r,t,a,n){var d,s,i,u=t.calcdata,f=t._fullLayout,p=n._id,y=p.charAt(0),m=[],l=0;for(d=0;d<a.length;d++)for(i=u[a[d]],s=0;s<i.length;s++)m.push(n.c2l(i[s].pos,!0)),l+=(i[s].pts2||[]).length;if(m.length){var w=x.distinctVals(m);"category"!==n.type&&"multicategory"!==n.type||(w.minDiff=1);var v=w.minDiff/2;g.minDtick(n,w.minDiff,w.vals[0],!0);var A=f["violin"===r?"_numViolins":"_numBoxes"],M="group"===f[r+"mode"]&&A>1,k=1-f[r+"gap"],E=1-f[r+"groupgap"];for(d=0;d<a.length;d++){var P,S,F,R,D,L,B=(i=u[a[d]])[0].trace,V=i[0].t,Z=B.width,Y=B.side;if(Z)P=S=R=Z/2,F=0;else if(P=v,M){var ee=T(f,n._id)+B.orientation,$=Object.keys(((f._alignmentOpts[ee]||{})[B.alignmentgroup]||{}).offsetGroups||{}).length,K=$||A;S=P*k*E/K,F=2*P*((($?B._offsetIndex:V.num)+.5)/K-.5)*k,R=P*k/K}else S=P*k*E,F=0,R=P;V.dPos=P,V.bPos=F,V.bdPos=S,V.wHover=R;var oe,j,H,G,re,q,te=F+S,ne=Boolean(Z);if("positive"===Y?(D=P*(Z?1:.5),oe=te,L=oe=F):"negative"===Y?(D=oe=F,L=P*(Z?1:.5),j=te):(D=L=P,oe=j=te),(B.boxpoints||B.points)&&l>0){var le=B.pointpos,ue=B.jitter,de=B.marker.size/2,he=0;le+ue>=0&&((he=te*(le+ue))>D?(ne=!0,re=de,H=he):he>oe&&(re=de,H=D)),he<=D&&(H=D);var be=0;le-ue<=0&&((be=-te*(le-ue))>L?(ne=!0,q=de,G=be):be>j&&(q=de,G=L)),be<=L&&(G=L)}else H=D,G=L;var ge=new Array(i.length);for(s=0;s<i.length;s++)ge[s]=i[s].pos;B._extremes[p]=g.findExtremes(n,ge,{padded:ne,vpadminus:G,vpadplus:H,vpadLinearized:!0,ppadminus:{x:q,y:re}[y],ppadplus:{x:re,y:q}[y]})}}}ae.exports={crossTraceCalc:function(r,t){for(var a=r.calcdata,n=t.xaxis,d=t.yaxis,s=0;s<b.length;s++){for(var i=b[s],u="h"===i?d:n,f=[],p=0;p<a.length;p++){var y=a[p],l=y[0].trace;!0!==l.visible||"box"!==l.type&&"candlestick"!==l.type||y[0].t.empty||(l.orientation||"v")!==i||l.xaxis!==n._id||l.yaxis!==d._id||f.push(p)}e("box",r,f,u)}},setPositionOffset:e}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../registry"),T=_("../../components/color"),b=_("../scatter/period_defaults"),e=_("../bar/defaults").handleGroupingDefaults,r=_("../../plots/cartesian/axis_autotype"),t=_("./attributes");function a(d,s,i,u){function f(Y){var ee=0;return Y&&Y.length&&(ee+=1,g.isArrayOrTypedArray(Y[0])&&Y[0].length&&(ee+=1)),ee}function p(Y){return g.validate(d[Y],t[Y])}var y,m=i("y"),l=i("x");if("box"===s.type){var w=i("q1"),v=i("median"),A=i("q3");s._hasPreCompStats=w&&w.length&&v&&v.length&&A&&A.length,y=Math.min(g.minRowLength(w),g.minRowLength(v),g.minRowLength(A))}var M,k,E=f(m),P=f(l),S=E&&g.minRowLength(m),F=P&&g.minRowLength(l),R=u.calendar,D={autotypenumbers:u.autotypenumbers};if(s._hasPreCompStats)switch(String(P)+String(E)){case"00":var L=p("x0")||p("dx");M=!p("y0")&&!p("dy")||L?"v":"h",k=y;break;case"10":M="v",k=Math.min(y,F);break;case"20":M="h",k=Math.min(y,l.length);break;case"01":M="h",k=Math.min(y,S);break;case"02":M="v",k=Math.min(y,m.length);break;case"12":M="v",k=Math.min(y,F,m.length);break;case"21":M="h",k=Math.min(y,l.length,S);break;case"11":k=0;break;case"22":var B,V=!1;for(B=0;B<l.length;B++)if("category"===r(l[B],R,D)){V=!0;break}if(V)M="v",k=Math.min(y,F,m.length);else{for(B=0;B<m.length;B++)if("category"===r(m[B],R,D)){V=!0;break}V?(M="h",k=Math.min(y,l.length,S)):(M="v",k=Math.min(y,F,m.length))}}else E>0?(M="v",k=P>0?Math.min(F,S):Math.min(S)):P>0?(M="h",k=Math.min(F)):k=0;if(k){s._length=k;var Z=i("orientation",M);s._hasPreCompStats?"v"===Z&&0===P?(i("x0",0),i("dx",1)):"h"===Z&&0===E&&(i("y0",0),i("dy",1)):"v"===Z&&0===P?i("x0"):"h"===Z&&0===E&&i("y0"),x.getComponentMethod("calendars","handleTraceDefaults")(d,s,["x","y"],u)}else s.visible=!1}function n(d,s,i,u){var f=u.prefix,p=g.coerce2(d,s,t,"marker.outliercolor"),y=i("marker.line.outliercolor"),m="outliers";s._hasPreCompStats?m="all":(p||y)&&(m="suspectedoutliers");var l=i(f+"points",m);l?(i("jitter","all"===l?.3:0),i("pointpos","all"===l?-1.5:0),i("marker.symbol"),i("marker.opacity"),i("marker.size"),i("marker.color",s.line.color),i("marker.line.color"),i("marker.line.width"),"suspectedoutliers"===l&&(i("marker.line.outliercolor",s.marker.color),i("marker.line.outlierwidth")),i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size"),i("text"),i("hovertext")):delete s.marker;var w=i("hoveron");"all"!==w&&-1===w.indexOf("points")||i("hovertemplate"),g.coerceSelectionMarkerOpacity(s,i)}ae.exports={supplyDefaults:function(d,s,i,u){function f(A,M){return g.coerce(d,s,t,A,M)}if(a(d,s,f,u),!1!==s.visible){b(d,s,u,f),f("xhoverformat"),f("yhoverformat");var p=s._hasPreCompStats;p&&(f("lowerfence"),f("upperfence")),f("line.color",(d.marker||{}).color||i),f("line.width"),f("fillcolor",T.addOpacity(s.line.color,.5));var y=!1;if(p){var m=f("mean"),l=f("sd");m&&m.length&&(y=!0,l&&l.length&&(y="sd"))}f("boxmean",y),f("whiskerwidth"),f("width"),f("quartilemethod");var w=!1;if(p){var v=f("notchspan");v&&v.length&&(w=!0)}else g.validate(d.notchwidth,t.notchwidth)&&(w=!0);f("notched",w)&&f("notchwidth"),n(d,s,f,{prefix:"box"})}},crossTraceDefaults:function(d,s){var u;function f(m){return g.coerce(u._input,u,t,m)}for(var p=0;p<d.length;p++){var y=(u=d[p]).type;"box"!==y&&"violin"!==y||"group"===s[y+"mode"]&&e(u._input,u,s,f)}},handleSampleDefaults:a,handlePointsDefaults:n}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":946,"./attributes":673}],677:[function(_,ae,ie){"use strict";ae.exports=function(g,x){return x.hoverOnBox&&(g.hoverOnBox=x.hoverOnBox),"xVal"in x&&(g.x=x.xVal),"yVal"in x&&(g.y=x.yVal),x.xa&&(g.xaxis=x.xa),x.ya&&(g.yaxis=x.ya),g}},{}],678:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("../../lib"),T=_("../../components/fx"),b=_("../../components/color"),e=x.fillText;function r(a,n,d,s){var i,u,f,p,y,m,l,w,v,A,M,k,E,P,S=a.cd,F=a.xa,R=a.ya,D=S[0].trace,L=S[0].t,B="violin"===D.type,V=[],Z=L.bdPos,Y=L.wHover,ee=function(he){return f.c2l(he.pos)+L.bPos-f.c2l(m)};B&&"both"!==D.side?("positive"===D.side&&(v=function(he){var be=ee(he);return T.inbox(be,be+Y,A)},k=Z,E=0),"negative"===D.side&&(v=function(he){var be=ee(he);return T.inbox(be-Y,be,A)},k=0,E=Z)):(v=function(he){var be=ee(he);return T.inbox(be-Y,be+Y,A)},k=E=Z),P=B?function(he){return T.inbox(he.span[0]-y,he.span[1]-y,A)}:function(he){return T.inbox(he.min-y,he.max-y,A)},"h"===D.orientation?(y=n,m=d,l=P,w=v,i="y",f=R,u="x",p=F):(y=d,m=n,l=v,w=P,i="x",f=F,u="y",p=R);var Q=Math.min(1,Z/Math.abs(f.r2c(f.range[1])-f.r2c(f.range[0])));function $(he){return(l(he)+w(he))/2}A=a.maxHoverDistance-Q,M=a.maxSpikeDistance-Q;var K=T.getDistanceFunction(s,l,w,$);if(T.getClosest(S,K,a),!1===a.index)return[];var oe=S[a.index],j=D.line.color,H=(D.marker||{}).color;a.color=b.opacity(j)&&D.line.width?j:b.opacity(H)&&D.boxpoints?H:D.fillcolor,a[i+"0"]=f.c2p(oe.pos+L.bPos-E,!0),a[i+"1"]=f.c2p(oe.pos+L.bPos+k,!0),a[i+"LabelVal"]=void 0!==oe.orig_p?oe.orig_p:oe.pos;var G=i+"Spike";a.spikeDistance=$(oe)*M/A,a[G]=f.c2p(oe.pos,!0);var re={},q=["med","q1","q3","min","max"];(D.boxmean||(D.meanline||{}).visible)&&q.push("mean"),(D.boxpoints||D.points)&&q.push("lf","uf");for(var te=0;te<q.length;te++){var ne=q[te];if(ne in oe&&!(oe[ne]in re)){re[oe[ne]]=!0;var le=oe[ne],ue=p.c2p(le,!0),de=x.extendFlat({},a);de.attr=ne,de[u+"0"]=de[u+"1"]=ue,de[u+"LabelVal"]=le,de[u+"Label"]=(L.labels?L.labels[ne]+" ":"")+g.hoverLabelText(p,le,D[u+"hoverformat"]),de.hoverOnBox=!0,"mean"===ne&&"sd"in oe&&"sd"===D.boxmean&&(de[u+"err"]=oe.sd),a.name="",a.spikeDistance=void 0,a[G]=void 0,de.hovertemplate=!1,V.push(de)}}return V}function t(a,n,d){for(var s,i,u,f=a.cd,p=a.xa,y=a.ya,m=f[0].trace,l=p.c2p(n),w=y.c2p(d),v=T.quadrature(function(B){var V=Math.max(3,B.mrc||0);return Math.max(Math.abs(p.c2p(B.x)-l)-V,1-3/V)},function(B){var V=Math.max(3,B.mrc||0);return Math.max(Math.abs(y.c2p(B.y)-w)-V,1-3/V)}),A=!1,M=0;M<f.length;M++){i=f[M];for(var k=0;k<(i.pts||[]).length;k++){var E=v(u=i.pts[k]);E<=a.distance&&(a.distance=E,A=[M,k])}}if(!A)return!1;u=(i=f[A[0]]).pts[A[1]];var P=p.c2p(u.x,!0),S=y.c2p(u.y,!0),F=u.mrc||1;s=x.extendFlat({},a,{index:u.i,color:(m.marker||{}).color,name:m.name,x0:P-F,x1:P+F,y0:S-F,y1:S+F,spikeDistance:a.distance,hovertemplate:m.hovertemplate});var R,D=i.orig_p,L=void 0!==D?D:i.pos;return"h"===m.orientation?(R=y,s.xLabelVal=u.x,s.yLabelVal=L):(R=p,s.xLabelVal=L,s.yLabelVal=u.y),s[R._id.charAt(0)+"Spike"]=R.c2p(i.pos,!0),e(u,m,s),s}ae.exports={hoverPoints:function(a,n,d,s){var i,u=a.cd[0].trace.hoveron,f=[];return-1!==u.indexOf("boxes")&&(f=f.concat(r(a,n,d,s))),-1!==u.indexOf("points")&&(i=t(a,n,d)),"closest"===s?i?[i]:f:(i&&f.push(i),f)},hoverOnBoxes:r,hoverOnPoints:t}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults").supplyLayoutDefaults,calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc").crossTraceCalc,plot:_("./plot").plot,style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"box",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(_,ae,ie){"use strict";ae.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib"),T=_("./layout_attributes");function b(e,r,t,a,n){for(var d=n+"Layout",s=!1,i=0;i<t.length;i++)if(g.traceIs(t[i],d)){s=!0;break}s&&(a(n+"mode"),a(n+"gap"),a(n+"groupgap"))}ae.exports={supplyLayoutDefaults:function(e,r,t){b(0,0,t,function(a,n){return x.coerce(e,r,T,a,n)},"box")},_supply:b}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing");function b(t,a,n,d){var s,i,u="h"===n.orientation,f=a.val,p=a.pos,y=!!p.rangebreaks,m=d.bPos,l=d.wdPos||0,w=d.bPosPxOffset||0,v=n.whiskerwidth||0,A=n.notched||!1,M=A?1-2*n.notchwidth:1;Array.isArray(d.bdPos)?(s=d.bdPos[0],i=d.bdPos[1]):(s=d.bdPos,i=d.bdPos);var k=t.selectAll("path.box").data("violin"!==n.type||n.box.visible?x.identity:[]);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),k.exit().remove(),k.each(function(E){if(E.empty)return"M0,0Z";var P=p.c2l(E.pos+m,!0),S=p.l2p(P-s)+w,F=p.l2p(P+i)+w,R=y?(S+F)/2:p.l2p(P)+w,D=n.whiskerwidth,L=y?S*D+(1-D)*R:p.l2p(P-l)+w,B=y?F*D+(1-D)*R:p.l2p(P+l)+w,V=p.l2p(P-s*M)+w,Z=p.l2p(P+i*M)+w,Y=f.c2p(E.q1,!0),ee=f.c2p(E.q3,!0),Q=x.constrain(f.c2p(E.med,!0),Math.min(Y,ee)+1,Math.max(Y,ee)-1),$=void 0===E.lf||!1===n.boxpoints,K=f.c2p($?E.min:E.lf,!0),oe=f.c2p($?E.max:E.uf,!0),j=f.c2p(E.ln,!0),H=f.c2p(E.un,!0);u?g.select(this).attr("d","M"+Q+","+V+"V"+Z+"M"+Y+","+S+"V"+F+(A?"H"+j+"L"+Q+","+Z+"L"+H+","+F:"")+"H"+ee+"V"+S+(A?"H"+H+"L"+Q+","+V+"L"+j+","+S:"")+"ZM"+Y+","+R+"H"+K+"M"+ee+","+R+"H"+oe+(0===v?"":"M"+K+","+L+"V"+B+"M"+oe+","+L+"V"+B)):g.select(this).attr("d","M"+V+","+Q+"H"+Z+"M"+S+","+Y+"H"+F+(A?"V"+j+"L"+Z+","+Q+"L"+F+","+H:"")+"V"+ee+"H"+S+(A?"V"+H+"L"+V+","+Q+"L"+S+","+j:"")+"ZM"+R+","+Y+"V"+K+"M"+R+","+ee+"V"+oe+(0===v?"":"M"+L+","+K+"H"+B+"M"+L+","+oe+"H"+B))})}function e(t,a,n,d){var s=a.x,i=a.y,u=d.bdPos,f=d.bPos,p=n.boxpoints||n.points;x.seedPseudoRandom();var y=t.selectAll("g.points").data(p?function(l){return l.forEach(function(w){w.t=d,w.trace=n}),l}:[]);y.enter().append("g").attr("class","points"),y.exit().remove();var m=y.selectAll("path").data(function(l){var w,v,A=l.pts2,M=Math.max((l.max-l.min)/10,l.q3-l.q1),k=1e-9*M,E=.01*M,P=[],S=0;if(n.jitter){if(0===M)for(S=1,P=new Array(A.length),w=0;w<A.length;w++)P[w]=1;else for(w=0;w<A.length;w++){var F=Math.max(0,w-5),R=A[F].v,D=Math.min(A.length-1,w+5),L=A[D].v;"all"!==p&&(A[w].v<l.lf?L=Math.min(L,l.lf):R=Math.max(R,l.uf));var B=Math.sqrt(E*(D-F)/(L-R+k))||0;B=x.constrain(Math.abs(B),0,1),P.push(B),S=Math.max(B,S)}v=2*n.jitter/(S||1)}for(w=0;w<A.length;w++){var V=A[w],Z=V.v,Y=n.jitter?v*P[w]*(x.pseudoRandom()-.5):0,ee=l.pos+f+u*(n.pointpos+Y);"h"===n.orientation?(V.y=ee,V.x=Z):(V.x=ee,V.y=Z),"suspectedoutliers"===p&&Z<l.uo&&Z>l.lo&&(V.so=!0)}return A});m.enter().append("path").classed("point",!0),m.exit().remove(),m.call(T.translatePoints,s,i)}function r(t,a,n,d){var s,i,u=a.val,f=a.pos,p=!!f.rangebreaks,y=d.bPos,m=d.bPosPxOffset||0,l=n.boxmean||(n.meanline||{}).visible;Array.isArray(d.bdPos)?(s=d.bdPos[0],i=d.bdPos[1]):(s=d.bdPos,i=d.bdPos);var w=t.selectAll("path.mean").data("box"===n.type&&n.boxmean||"violin"===n.type&&n.box.visible&&n.meanline.visible?x.identity:[]);w.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),w.exit().remove(),w.each(function(v){var A=f.c2l(v.pos+y,!0),M=f.l2p(A-s)+m,k=f.l2p(A+i)+m,E=p?(M+k)/2:f.l2p(A)+m,P=u.c2p(v.mean,!0),S=u.c2p(v.mean-v.sd,!0),F=u.c2p(v.mean+v.sd,!0);"h"===n.orientation?g.select(this).attr("d","M"+P+","+M+"V"+k+("sd"===l?"m0,0L"+S+","+E+"L"+P+","+M+"L"+F+","+E+"Z":"")):g.select(this).attr("d","M"+M+","+P+"H"+k+("sd"===l?"m0,0L"+E+","+S+"L"+M+","+P+"L"+E+","+F+"Z":""))})}ae.exports={plot:function(t,a,n,d){var s=a.xaxis,i=a.yaxis;x.makeTraceGroups(d,n,"trace boxes").each(function(u){var f,p,y=g.select(this),m=u[0],l=m.t,w=m.trace;l.wdPos=l.bdPos*w.whiskerwidth,!0!==w.visible||l.empty?y.remove():("h"===w.orientation?(f=i,p=s):(f=s,p=i),b(y,{pos:f,val:p},w,l),e(y,{x:s,y:i},w,l),r(y,{pos:f,val:p},w,l))})},plotBoxAndWhiskers:b,plotPoints:e,plotBoxMean:r}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(_,ae,ie){"use strict";ae.exports=function(g,x){var T,b,e=g.cd,r=g.xaxis,t=g.yaxis,a=[];if(!1===x)for(T=0;T<e.length;T++)for(b=0;b<(e[T].pts||[]).length;b++)e[T].pts[b].selected=0;else for(T=0;T<e.length;T++)for(b=0;b<(e[T].pts||[]).length;b++){var n=e[T].pts[b],d=r.c2p(n.x),s=t.c2p(n.y);x.contains([d,s],null,n.i,g)?(a.push({pointNumber:n.i,x:r.c2d(n.x),y:t.c2d(n.y)}),n.selected=1):n.selected=0}return a}},{}],684:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/color"),T=_("../../components/drawing");ae.exports={style:function(b,e,r){var t=r||g.select(b).selectAll("g.trace.boxes");t.style("opacity",function(a){return a[0].trace.opacity}),t.each(function(a){var n=g.select(this),d=a[0].trace,s=d.line.width;function i(p,y,m,l){p.style("stroke-width",y+"px").call(x.stroke,m).call(x.fill,l)}var u=n.selectAll("path.box");if("candlestick"===d.type)u.each(function(p){if(!p.empty){var y=g.select(this),m=d[p.dir];i(y,m.line.width,m.line.color,m.fillcolor),y.style("opacity",d.selectedpoints&&!p.selected?.3:1)}});else{i(u,s,d.line.color,d.fillcolor),n.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(x.stroke,d.line.color);var f=n.selectAll("path.point");T.pointStyle(f,d,b)}})},styleOnSelect:function(b,e,r){var t=e[0].trace,a=r.selectAll("path.point");t.selectedpoints?T.selectedPointStyle(a,t):T.pointStyle(a,t,b)}}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(_,ae,ie){"use strict";var g=_("../../lib").extendFlat,x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../ohlc/attributes"),b=_("../box/attributes");function e(r){return{line:{color:g({},b.line.color,{dflt:r}),width:b.line.width,editType:"style"},fillcolor:b.fillcolor,editType:"style"}}ae.exports={xperiod:T.xperiod,xperiod0:T.xperiod0,xperiodalignment:T.xperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),x:T.x,open:T.open,high:T.high,low:T.low,close:T.close,line:{width:g({},b.line.width,{}),editType:"style"},increasing:e(T.increasing.line.color.dflt),decreasing:e(T.decreasing.line.color.dflt),text:T.text,hovertext:T.hovertext,whiskerwidth:g({},b.whiskerwidth,{dflt:0}),hoverlabel:T.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/cartesian/align_period"),b=_("../ohlc/calc").calcCommon;function e(r,t,a,n){return{min:a,q1:Math.min(r,n),med:n,q3:Math.max(r,n),max:t}}ae.exports=function(r,t){var a=r._fullLayout,n=x.getFromId(r,t.xaxis),d=x.getFromId(r,t.yaxis),s=n.makeCalcdata(t,"x"),i=T(t,n,"x",s).vals,u=b(r,t,s,i,d,e);return u.length?(g.extendFlat(u[0].t,{num:a._numBoxes,dPos:g.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),a._numBoxes++,u):[{t:{empty:!0}}]}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/color"),T=_("../ohlc/ohlc_defaults"),b=_("../scatter/period_defaults"),e=_("./attributes");function r(t,a,n,d){var s=n(d+".line.color");n(d+".line.width",a.line.width),n(d+".fillcolor",x.addOpacity(s,.5))}ae.exports=function(t,a,n,d){function s(i,u){return g.coerce(t,a,e,i,u)}T(t,a,s,d)?(b(t,a,d,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),r(0,a,s,"increasing"),r(0,a,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),d._requestRangeslider[a.xaxis]=!0):a.visible=!1}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":946,"./attributes":685}],688:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"candlestick",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:_("./attributes"),layoutAttributes:_("../box/layout_attributes"),supplyLayoutDefaults:_("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:_("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("../box/plot").plot,layerName:"boxlayer",style:_("../box/style").style,hoverPoints:_("../ohlc/hover").hoverPoints,selectPoints:_("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(_,ae,ie){"use strict";var g=_("./axis_defaults"),x=_("../../plot_api/plot_template");ae.exports=function(T,b,e,r,t){var a,n,d,s;r("a")||(r("da"),r("a0")),r("b")||(r("db"),r("b0")),a=T,n=b,d=e,s=t,["aaxis","baxis"].forEach(function(i){var u=i.charAt(0),f=a[i]||{},p=x.newContainer(n,i);g(f,p,{tickfont:"x",id:u+"axis",letter:u,font:n.font,name:i,data:a[u],calendar:n.calendar,dfltColor:s,bgColor:d.paper_bgcolor,autotypenumbersDflt:d.autotypenumbers,fullLayout:d}),p._categories=p._categories||[],a[i]||"-"===f.type||(a[i]={type:f.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(_,ae,ie){"use strict";var g=_("../../lib").isArrayOrTypedArray;ae.exports=function(x){return function T(b,e){if(!g(b)||e>=10)return null;for(var r=1/0,t=-1/0,a=b.length,n=0;n<a;n++){var d=b[n];if(g(d)){var s=T(d,e+1);s&&(r=Math.min(s[0],r),t=Math.max(s[1],t))}else r=Math.min(d,r),t=Math.max(d,t)}return[r,t]}(x,0)}},{"../../lib":503}],691:[function(_,ae,ie){"use strict";var g=_("../../plots/font_attributes"),x=_("./axis_attributes"),T=_("../../components/color/attributes"),b=g({editType:"calc"});b.family.dflt='"Open Sans", verdana, arial, sans-serif',b.size.dflt=12,b.color.dflt=T.defaultLine,ae.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:x,baxis:x,font:b,color:{valType:"color",dflt:T.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(_,ae,ie){"use strict";var g=_("../../lib").isArrayOrTypedArray;ae.exports=function(x,T,b,e){var r,t,a,n,d,s,i,u,f,p,y,m,l,w=g(b)?"a":"b",v=("a"===w?x.aaxis:x.baxis).smoothing,A="a"===w?x.a2i:x.b2j,M="a"===w?b:e,k="a"===w?e:b,E="a"===w?T.a.length:T.b.length,P="a"===w?T.b.length:T.a.length,S=Math.floor("a"===w?x.b2j(k):x.a2i(k)),F="a"===w?function(oe){return x.evalxy([],oe,S)}:function(oe){return x.evalxy([],S,oe)};v&&(a=Math.max(0,Math.min(P-2,S)),n=S-a,t="a"===w?function(oe,j){return x.dxydi([],oe,a,j,n)}:function(oe,j){return x.dxydj([],a,oe,n,j)});var R=A(M[0]),D=A(M[1]),L=R<D?1:-1,B=1e-8*(D-R),V=L>0?Math.floor:Math.ceil,Z=L>0?Math.ceil:Math.floor,Y=L>0?Math.min:Math.max,ee=L>0?Math.max:Math.min,Q=V(R+B),$=Z(D-B),K=[[i=F(R)]];for(r=Q;r*L<$*L;r+=L)d=[],y=ee(R,r),l=(m=Y(D,r+L))-y,s=Math.max(0,Math.min(E-2,Math.floor(.5*(y+m)))),u=F(m),v&&(f=t(s,y-s),p=t(s,m-s),d.push([i[0]+f[0]/3*l,i[1]+f[1]/3*l]),d.push([u[0]-p[0]/3*l,u[1]-p[1]/3*l])),d.push(u),K.push(d),i=u;return K}},{"../../lib":503}],693:[function(_,ae,ie){"use strict";var g=_("../../plots/font_attributes"),x=_("../../components/color/attributes"),T=_("../../plots/cartesian/layout_attributes"),b=_("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=_("../../plot_api/edit_types").overrideAll;ae.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:g({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:T.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:g({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:b("tick label")},tickformatstops:e(T.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:x.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:x.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:g({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(_,ae,ie){"use strict";var g=_("./attributes"),x=_("../../components/color").addOpacity,T=_("../../registry"),b=_("../../lib"),e=_("../../plots/cartesian/tick_value_defaults"),r=_("../../plots/cartesian/tick_label_defaults"),t=_("../../plots/cartesian/prefix_suffix_defaults"),a=_("../../plots/cartesian/category_order_defaults"),n=_("../../plots/cartesian/set_convert"),d=_("../../plots/cartesian/axis_autotype");ae.exports=function(s,i,u){var f=u.letter,p=u.font||{},y=g[f+"axis"];function m(D,L){return b.coerce(s,i,y,D,L)}function l(D,L){return b.coerce2(s,i,y,D,L)}u.name&&(i._name=u.name,i._id=u.name),m("autotypenumbers",u.autotypenumbersDflt);var w=m("type");"-"===w&&(u.data&&function(D,L){if("-"===D.type){var B=D._id.charAt(0);D.type=d(L,D[B+"calendar"],{autotypenumbers:D.autotypenumbers})}}(i,u.data),"-"===i.type?i.type="linear":w=s.type=i.type),m("smoothing"),m("cheatertype"),m("showticklabels"),m("labelprefix",f+" = "),m("labelsuffix"),m("showtickprefix"),m("showticksuffix"),m("separatethousands"),m("tickformat"),m("exponentformat"),m("minexponent"),m("showexponent"),m("categoryorder"),m("tickmode"),m("tickvals"),m("ticktext"),m("tick0"),m("dtick"),"array"===i.tickmode&&(m("arraytick0"),m("arraydtick")),m("labelpadding"),i._hovertitle=f,"date"===w&&T.getComponentMethod("calendars","handleDefaults")(s,i,"calendar",u.calendar),n(i,u.fullLayout),i.c2p=b.identity;var v=m("color",u.dfltColor),A=v===s.color?v:p.color;m("title.text")&&(b.coerceFont(m,"title.font",{family:p.family,size:b.bigFont(p.size),color:A}),m("title.offset")),m("tickangle"),m("autorange",!i.isValidRange(s.range))&&m("rangemode"),m("range"),i.cleanRange(),m("fixedrange"),e(s,i,m,w),t(s,i,m,w,u),r(s,i,m,w,u),a(s,i,m,{data:u.data,dataAttr:f});var M=l("gridcolor",x(v,.3)),k=l("gridwidth"),E=m("showgrid");E||(delete i.gridcolor,delete i.gridwidth);var P=l("startlinecolor",v),S=l("startlinewidth",k);m("startline",i.showgrid||!!P||!!S)||(delete i.startlinecolor,delete i.startlinewidth);var F=l("endlinecolor",v),R=l("endlinewidth",k);return m("endline",i.showgrid||!!F||!!R)||(delete i.endlinecolor,delete i.endlinewidth),E?(m("minorgridcount"),m("minorgridwidth",k),m("minorgridcolor",x(M,.06)),i.minorgridcount||(delete i.minorgridwidth,delete i.minorgridcolor)):(delete i.gridcolor,delete i.gridWidth),"none"===i.showticklabels&&(delete i.tickfont,delete i.tickangle,delete i.showexponent,delete i.exponentformat,delete i.minexponent,delete i.tickformat,delete i.showticksuffix,delete i.showtickprefix),i.showticksuffix||delete i.ticksuffix,i.showtickprefix||delete i.tickprefix,m("tickmode"),i}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("../../lib").isArray1D,T=_("./cheater_basis"),b=_("./array_minmax"),e=_("./calc_gridlines"),r=_("./calc_labels"),t=_("./calc_clippath"),a=_("../heatmap/clean_2d_array"),n=_("./smooth_fill_2d_array"),d=_("../heatmap/convert_column_xyz"),s=_("./set_convert");ae.exports=function(i,u){var f=g.getFromId(i,u.xaxis),p=g.getFromId(i,u.yaxis),y=u.aaxis,m=u.baxis,l=u.x,w=u.y,v=[];l&&x(l)&&v.push("x"),w&&x(w)&&v.push("y"),v.length&&d(u,y,m,"a","b",v);var A=u._a=u._a||u.a,M=u._b=u._b||u.b;l=u._x||u.x,w=u._y||u.y;var k={};u._cheater&&(l=T("index"===y.cheatertype?A.length:A,"index"===m.cheatertype?M.length:M,u.cheaterslope)),u._x=l=a(l),u._y=w=a(w),n(l,A,M),n(w,A,M),s(u),u.setScale();var S=b(l),F=b(w),R=.5*(S[1]-S[0]),D=.5*(S[1]+S[0]),L=.5*(F[1]-F[0]),B=.5*(F[1]+F[0]);return F=[B-1.3*L,B+1.3*L],u._extremes[f._id]=g.findExtremes(f,S=[D-1.3*R,D+1.3*R],{padded:!0}),u._extremes[p._id]=g.findExtremes(p,F,{padded:!0}),e(u,"a","b"),e(u,"b","a"),r(u,y),r(u,m),k.clipsegments=t(u._xctrl,u._yctrl,y,m),k.x=l,k.y=w,k.a=A,k.b=M,[k]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b){var e,r,t,a=[],n=!!T.smoothing,d=!!b.smoothing,s=g[0].length-1,i=g.length-1;for(e=0,r=[],t=[];e<=s;e++)r[e]=g[0][e],t[e]=x[0][e];for(a.push({x:r,y:t,bicubic:n}),e=0,r=[],t=[];e<=i;e++)r[e]=g[e][s],t[e]=x[e][s];for(a.push({x:r,y:t,bicubic:d}),e=s,r=[],t=[];e>=0;e--)r[s-e]=g[i][e],t[s-e]=x[i][e];for(a.push({x:r,y:t,bicubic:n}),e=i,r=[],t=[];e>=0;e--)r[i-e]=g[e][0],t[i-e]=x[e][0];return a.push({x:r,y:t,bicubic:d}),a}},{}],697:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("../../lib/extend").extendFlat;ae.exports=function(T,b,e){var r,t,a,n,d,s,i,u,f,p,y,m,l,w,v=T["_"+b],A=T[b+"axis"],M=A._gridlines=[],k=A._minorgridlines=[],E=A._boundarylines=[],P=T["_"+e],S=T[e+"axis"];"array"===A.tickmode&&(A.tickvals=v.slice());var F=T._xctrl,R=T._yctrl,D=F[0].length,L=F.length,B=T._a.length,V=T._b.length;g.prepTicks(A),"array"===A.tickmode&&delete A.tickvals;var Z=A.smoothing?3:1;function Y(Q){var $,K,oe,j,H,G,re,q,te,ne,le,ue,de=[],he=[],be={};if("b"===b)for(K=T.b2j(Q),oe=Math.floor(Math.max(0,Math.min(V-2,K))),j=K-oe,be.length=V,be.crossLength=B,be.xy=function(ge){return T.evalxy([],ge,K)},be.dxy=function(ge,we){return T.dxydi([],ge,oe,we,j)},$=0;$<B;$++)G=Math.min(B-2,$),re=$-G,q=T.evalxy([],$,K),S.smoothing&&$>0&&(te=T.dxydi([],$-1,oe,0,j),de.push(H[0]+te[0]/3),he.push(H[1]+te[1]/3),ne=T.dxydi([],$-1,oe,1,j),de.push(q[0]-ne[0]/3),he.push(q[1]-ne[1]/3)),de.push(q[0]),he.push(q[1]),H=q;else for($=T.a2i(Q),G=Math.floor(Math.max(0,Math.min(B-2,$))),re=$-G,be.length=B,be.crossLength=V,be.xy=function(ge){return T.evalxy([],$,ge)},be.dxy=function(ge,we){return T.dxydj([],G,ge,re,we)},K=0;K<V;K++)oe=Math.min(V-2,K),j=K-oe,q=T.evalxy([],$,K),S.smoothing&&K>0&&(le=T.dxydj([],G,K-1,re,0),de.push(H[0]+le[0]/3),he.push(H[1]+le[1]/3),ue=T.dxydj([],G,K-1,re,1),de.push(q[0]-ue[0]/3),he.push(q[1]-ue[1]/3)),de.push(q[0]),he.push(q[1]),H=q;return be.axisLetter=b,be.axis=A,be.crossAxis=S,be.value=Q,be.constvar=e,be.index=u,be.x=de,be.y=he,be.smoothing=S.smoothing,be}function ee(Q){var $,K,oe,j,H,G=[],re=[],q={};if(q.length=v.length,q.crossLength=P.length,"b"===b)for(oe=Math.max(0,Math.min(V-2,Q)),H=Math.min(1,Math.max(0,Q-oe)),q.xy=function(te){return T.evalxy([],te,Q)},q.dxy=function(te,ne){return T.dxydi([],te,oe,ne,H)},$=0;$<D;$++)G[$]=F[Q*Z][$],re[$]=R[Q*Z][$];else for(K=Math.max(0,Math.min(B-2,Q)),j=Math.min(1,Math.max(0,Q-K)),q.xy=function(te){return T.evalxy([],Q,te)},q.dxy=function(te,ne){return T.dxydj([],K,te,j,ne)},$=0;$<L;$++)G[$]=F[$][Q*Z],re[$]=R[$][Q*Z];return q.axisLetter=b,q.axis=A,q.crossAxis=S,q.value=v[Q],q.constvar=e,q.index=Q,q.x=G,q.y=re,q.smoothing=S.smoothing,q}if("array"===A.tickmode){for(n=5e-15,s=(d=[Math.floor((v.length-1-A.arraytick0)/A.arraydtick*(1+n)),Math.ceil(-A.arraytick0/A.arraydtick/(1+n))].sort(function(Q,$){return Q-$}))[0]-1,i=d[1]+1,u=s;u<i;u++)(t=A.arraytick0+A.arraydtick*u)<0||t>v.length-1||M.push(x(ee(t),{color:A.gridcolor,width:A.gridwidth}));for(u=s;u<i;u++)if(a=A.arraytick0+A.arraydtick*u,y=Math.min(a+A.arraydtick,v.length-1),!(a<0||a>v.length-1||y<0||y>v.length-1))for(m=v[a],l=v[y],r=0;r<A.minorgridcount;r++)(w=y-a)<=0||(p=m+(l-m)*(r+1)/(A.minorgridcount+1)*(A.arraydtick/w))<v[0]||p>v[v.length-1]||k.push(x(Y(p),{color:A.minorgridcolor,width:A.minorgridwidth}));A.startline&&E.push(x(ee(0),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&E.push(x(ee(v.length-1),{color:A.endlinecolor,width:A.endlinewidth}))}else{for(n=5e-15,s=(d=[Math.floor((v[v.length-1]-A.tick0)/A.dtick*(1+n)),Math.ceil((v[0]-A.tick0)/A.dtick/(1+n))].sort(function(Q,$){return Q-$}))[0],i=d[1],u=s;u<=i;u++)M.push(x(Y(f=A.tick0+A.dtick*u),{color:A.gridcolor,width:A.gridwidth}));for(u=s-1;u<i+1;u++)for(f=A.tick0+A.dtick*u,r=0;r<A.minorgridcount;r++)(p=f+A.dtick*(r+1)/(A.minorgridcount+1))<v[0]||p>v[v.length-1]||k.push(x(Y(p),{color:A.minorgridcolor,width:A.minorgridwidth}));A.startline&&E.push(x(Y(v[0]),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&E.push(x(Y(v[v.length-1]),{color:A.endlinecolor,width:A.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("../../lib/extend").extendFlat;ae.exports=function(T,b){var e,r,t,a=b._labels=[],n=b._gridlines;for(e=0;e<n.length;e++)t=n[e],-1!==["start","both"].indexOf(b.showticklabels)&&(r=g.tickText(b,t.value),x(r,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:t.xy(0),dxy:t.dxy(0,0),axis:t.axis,length:t.crossAxis.length,font:t.axis.tickfont,isFirst:0===e,isLast:e===n.length-1}),a.push(r)),-1!==["end","both"].indexOf(b.showticklabels)&&(r=g.tickText(b,t.value),x(r,{endAnchor:!1,xy:t.xy(t.crossLength-1),dxy:t.dxy(t.crossLength-2,1),axis:t.axis,length:t.crossAxis.length,font:t.axis.tickfont,isFirst:0===e,isLast:e===n.length-1}),a.push(r))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b){var e=g[0]-x[0],r=g[1]-x[1],t=T[0]-x[0],a=T[1]-x[1],n=Math.pow(e*e+r*r,.25),d=Math.pow(t*t+a*a,.25),s=(d*d*e-n*n*t)*b,i=(d*d*r-n*n*a)*b,u=d*(n+d)*3,f=n*(n+d)*3;return[[x[0]+(u&&s/u),x[1]+(u&&i/u)],[x[0]-(f&&s/f),x[1]-(f&&i/f)]]}},{}],700:[function(_,ae,ie){"use strict";var g=_("../../lib").isArrayOrTypedArray;ae.exports=function(x,T,b){var e,r,t,a,n,d,s=[],i=g(x)?x.length:x,u=g(T)?T.length:T,f=g(x)?x:null,p=g(T)?T:null;f&&(t=(f.length-1)/(f[f.length-1]-f[0])/(i-1)),p&&(a=(p.length-1)/(p[p.length-1]-p[0])/(u-1));var y=1/0,m=-1/0;for(r=0;r<u;r++)for(s[r]=[],n=p?(p[r]-p[0])*a:r/(u-1),e=0;e<i;e++)d=(f?(f[e]-f[0])*t:e/(i-1))-n*b,y=Math.min(d,y),m=Math.max(d,m),s[r][e]=d;var l=1/(m-y),w=-y*l;for(r=0;r<u;r++)for(e=0;e<i;e++)s[r][e]=l*s[r][e]+w;return s}},{"../../lib":503}],701:[function(_,ae,ie){"use strict";var g=_("./catmull_rom"),x=_("../../lib").ensureArray;function T(b,e,r){return[(2*(-.5*r[0]+1.5*e[0])+b[0])/3,(2*(-.5*r[1]+1.5*e[1])+b[1])/3]}ae.exports=function(b,e,r,t,a,n){var d,s,i,u,f,p,y,m,l,w,v=r[0].length,A=r.length,M=a?3*v-2:v,k=n?3*A-2:A;for(b=x(b,k),e=x(e,k),i=0;i<k;i++)b[i]=x(b[i],M),e[i]=x(e[i],M);for(s=0,u=0;s<A;s++,u+=n?3:1)for(f=b[u],p=e[u],y=r[s],m=t[s],d=0,i=0;d<v;d++,i+=a?3:1)f[i]=y[d],p[i]=m[d];if(a)for(s=0,u=0;s<A;s++,u+=n?3:1){for(d=1,i=3;d<v-1;d++,i+=3)l=g([r[s][d-1],t[s][d-1]],[r[s][d],t[s][d]],[r[s][d+1],t[s][d+1]],a),b[u][i-1]=l[0][0],e[u][i-1]=l[0][1],b[u][i+1]=l[1][0],e[u][i+1]=l[1][1];w=T([b[u][0],e[u][0]],[b[u][2],e[u][2]],[b[u][3],e[u][3]]),b[u][1]=w[0],e[u][1]=w[1],w=T([b[u][M-1],e[u][M-1]],[b[u][M-3],e[u][M-3]],[b[u][M-4],e[u][M-4]]),b[u][M-2]=w[0],e[u][M-2]=w[1]}if(n)for(i=0;i<M;i++){for(u=3;u<k-3;u+=3)l=g([b[u-3][i],e[u-3][i]],[b[u][i],e[u][i]],[b[u+3][i],e[u+3][i]],n),b[u-1][i]=l[0][0],e[u-1][i]=l[0][1],b[u+1][i]=l[1][0],e[u+1][i]=l[1][1];w=T([b[0][i],e[0][i]],[b[2][i],e[2][i]],[b[3][i],e[3][i]]),b[1][i]=w[0],e[1][i]=w[1],w=T([b[k-1][i],e[k-1][i]],[b[k-3][i],e[k-3][i]],[b[k-4][i],e[k-4][i]]),b[k-2][i]=w[0],e[k-2][i]=w[1]}if(a&&n)for(u=1;u<k;u+=(u+1)%3==0?2:1){for(i=3;i<M-3;i+=3)l=g([b[u][i-3],e[u][i-3]],[b[u][i],e[u][i]],[b[u][i+3],e[u][i+3]],a),b[u][i-1]=.5*(b[u][i-1]+l[0][0]),e[u][i-1]=.5*(e[u][i-1]+l[0][1]),b[u][i+1]=.5*(b[u][i+1]+l[1][0]),e[u][i+1]=.5*(e[u][i+1]+l[1][1]);w=T([b[u][0],e[u][0]],[b[u][2],e[u][2]],[b[u][3],e[u][3]]),b[u][1]=.5*(b[u][1]+w[0]),e[u][1]=.5*(e[u][1]+w[1]),w=T([b[u][M-1],e[u][M-1]],[b[u][M-3],e[u][M-3]],[b[u][M-4],e[u][M-4]]),b[u][M-2]=.5*(b[u][M-2]+w[0]),e[u][M-2]=.5*(e[u][M-2]+w[1])}return[b,e]}},{"../../lib":503,"./catmull_rom":699}],702:[function(_,ae,ie){"use strict";ae.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T){return x&&T?function(b,e,r,t,a){var n,u,f;b||(b=[]),e*=3,r*=3;var p=t*t,y=1-t,m=y*y,l=y*t*2,w=-3*m,v=3*(m-l),A=3*(l-p),M=3*p,k=a*a,E=k*a,P=1-a,S=P*P,F=S*P;for(f=0;f<g.length;f++)n=w*(u=g[f])[r][e]+v*u[r][e+1]+A*u[r][e+2]+M*u[r][e+3],b[f]=F*n+3*(S*a*(w*u[r+1][e]+v*u[r+1][e+1]+A*u[r+1][e+2]+M*u[r+1][e+3])+P*k*(w*u[r+2][e]+v*u[r+2][e+1]+A*u[r+2][e+2]+M*u[r+2][e+3]))+E*(w*u[r+3][e]+v*u[r+3][e+1]+A*u[r+3][e+2]+M*u[r+3][e+3]);return b}:x?function(b,e,r,t,a){var n,s,i;b||(b=[]),e*=3;var u=t*t,f=1-t,p=f*f,y=f*t*2,m=-3*p,l=3*(p-y),w=3*(y-u),v=3*u,A=1-a;for(s=0;s<g.length;s++)n=m*(i=g[s])[r][e]+l*i[r][e+1]+w*i[r][e+2]+v*i[r][e+3],b[s]=A*n+a*(m*i[r+1][e]+l*i[r+1][e+1]+w*i[r+1][e+2]+v*i[r+1][e+3]);return b}:T?function(b,e,r,t,a){var n,u,f;b||(b=[]),r*=3;var p=a*a,y=p*a,m=1-a,l=m*m,w=l*m;for(u=0;u<g.length;u++)n=(f=g[u])[r][e+1]-f[r][e],b[u]=w*n+3*(l*a*(f[r+1][e+1]-f[r+1][e])+m*p*(f[r+2][e+1]-f[r+2][e]))+y*(f[r+3][e+1]-f[r+3][e]);return b}:function(b,e,r,t,a){var n,s,i;b||(b=[]);var u=1-a;for(s=0;s<g.length;s++)n=(i=g[s])[r][e+1]-i[r][e],b[s]=u*n+a*(i[r+1][e+1]-i[r+1][e]);return b}}},{}],704:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T){return x&&T?function(b,e,r,t,a){var n,u,f;b||(b=[]),e*=3,r*=3;var p=t*t,y=p*t,m=1-t,l=m*m,w=l*m,v=a*a,A=1-a,M=A*A,k=A*a*2,E=-3*M,P=3*(M-k),S=3*(k-v),F=3*v;for(f=0;f<g.length;f++)n=E*(u=g[f])[r][e]+P*u[r+1][e]+S*u[r+2][e]+F*u[r+3][e],b[f]=w*n+3*(l*t*(E*u[r][e+1]+P*u[r+1][e+1]+S*u[r+2][e+1]+F*u[r+3][e+1])+m*p*(E*u[r][e+2]+P*u[r+1][e+2]+S*u[r+2][e+2]+F*u[r+3][e+2]))+y*(E*u[r][e+3]+P*u[r+1][e+3]+S*u[r+2][e+3]+F*u[r+3][e+3]);return b}:x?function(b,e,r,t,a){var n,u,f;b||(b=[]),e*=3;var p=a*a,y=p*a,m=1-a,l=m*m,w=l*m;for(u=0;u<g.length;u++)n=(f=g[u])[r+1][e]-f[r][e],b[u]=w*n+3*(l*a*(f[r+1][e+1]-f[r][e+1])+m*p*(f[r+1][e+2]-f[r][e+2]))+y*(f[r+1][e+3]-f[r][e+3]);return b}:T?function(b,e,r,t,a){var n,s,i;b||(b=[]),r*=3;var u=1-t,f=a*a,p=1-a,y=p*p,m=p*a*2,l=-3*y,w=3*(y-m),v=3*(m-f),A=3*f;for(s=0;s<g.length;s++)n=l*(i=g[s])[r][e]+w*i[r+1][e]+v*i[r+2][e]+A*i[r+3][e],b[s]=u*n+t*(l*i[r][e+1]+w*i[r+1][e+1]+v*i[r+2][e+1]+A*i[r+3][e+1]);return b}:function(b,e,r,t,a){var n,s,i;b||(b=[]);var u=1-t;for(s=0;s<g.length;s++)n=(i=g[s])[r+1][e]-i[r][e],b[s]=u*n+t*(i[r+1][e+1]-i[r][e+1]);return b}}},{}],705:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b,e){var r=x-2,t=T-2;return b&&e?function(a,n,d){var s,p,y;a||(a=[]);var m=Math.max(0,Math.min(Math.floor(n),r)),l=Math.max(0,Math.min(Math.floor(d),t)),w=Math.max(0,Math.min(1,n-m)),v=Math.max(0,Math.min(1,d-l));m*=3,l*=3;var A=w*w,M=A*w,k=1-w,E=k*k,P=E*k,S=v*v,F=S*v,R=1-v,D=R*R,L=D*R;for(y=0;y<g.length;y++)s=P*(p=g[y])[l][m]+3*(E*w*p[l][m+1]+k*A*p[l][m+2])+M*p[l][m+3],a[y]=L*s+3*(D*v*(P*p[l+1][m]+3*(E*w*p[l+1][m+1]+k*A*p[l+1][m+2])+M*p[l+1][m+3])+R*S*(P*p[l+2][m]+3*(E*w*p[l+2][m+1]+k*A*p[l+2][m+2])+M*p[l+2][m+3]))+F*(P*p[l+3][m]+3*(E*w*p[l+3][m+1]+k*A*p[l+3][m+2])+M*p[l+3][m+3]);return a}:b?function(a,n,d){a||(a=[]);var s,p,y,m=Math.max(0,Math.min(Math.floor(n),r)),l=Math.max(0,Math.min(Math.floor(d),t)),w=Math.max(0,Math.min(1,n-m)),v=Math.max(0,Math.min(1,d-l));m*=3;var A=w*w,M=A*w,k=1-w,E=k*k,P=E*k,S=1-v;for(p=0;p<g.length;p++)s=S*(y=g[p])[l][m]+v*y[l+1][m],a[p]=P*s+3*(E*w*(S*y[l][m+1]+v*y[l+1][m+1])+k*A*(S*y[l][m+2]+v*y[l+1][m+1]))+M*(S*y[l][m+3]+v*y[l+1][m+1]);return a}:e?function(a,n,d){a||(a=[]);var s,p,y,m=Math.max(0,Math.min(Math.floor(n),r)),l=Math.max(0,Math.min(Math.floor(d),t)),w=Math.max(0,Math.min(1,n-m)),v=Math.max(0,Math.min(1,d-l));l*=3;var A=v*v,M=A*v,k=1-v,E=k*k,P=E*k,S=1-w;for(p=0;p<g.length;p++)s=S*(y=g[p])[l][m]+w*y[l][m+1],a[p]=P*s+3*(E*v*(S*y[l+1][m]+w*y[l+1][m+1])+k*A*(S*y[l+2][m]+w*y[l+2][m+1]))+M*(S*y[l+3][m]+w*y[l+3][m+1]);return a}:function(a,n,d){a||(a=[]);var s,u,f,p=Math.max(0,Math.min(Math.floor(n),r)),y=Math.max(0,Math.min(Math.floor(d),t)),m=Math.max(0,Math.min(1,n-p)),l=Math.max(0,Math.min(1,d-y)),w=1-l,v=1-m;for(u=0;u<g.length;u++)s=v*(f=g[u])[y][p]+m*f[y][p+1],a[u]=w*s+l*(v*f[y+1][p]+m*f[y+1][p+1]);return a}}},{}],706:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./xy_defaults"),T=_("./ab_defaults"),b=_("./attributes"),e=_("../../components/color/attributes");ae.exports=function(r,t,a,n){function d(i,u){return g.coerce(r,t,b,i,u)}t._clipPathId="clip"+t.uid+"carpet";var s=d("color",e.defaultLine);g.coerceFont(d,"font"),d("carpet"),T(r,t,n,d,s),t.a&&t.b?(t.a.length<3&&(t.aaxis.smoothing=0),t.b.length<3&&(t.baxis.smoothing=0),x(r,t,d)||(t.visible=!1),t._cheater&&d("cheaterslope")):t.visible=!1}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),plot:_("./plot"),calc:_("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(_,ae,ie){"use strict";ae.exports=function(g,x){for(var T,b=g._fullData.length,e=0;e<b;e++){var r=g._fullData[e];if(r.index!==x.index&&"carpet"===r.type&&(T||(T=r),r.carpet===x.carpet))return r}return T}},{}],709:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T){if(0===g.length)return"";var b,e=[],r=T?3:1;for(b=0;b<g.length;b+=r)e.push(g[b]+","+x[b]),T&&b<g.length-r&&(e.push("C"),e.push([g[b+1]+","+x[b+1],g[b+2]+","+x[b+2]+" "].join(" ")));return e.join(T?"":"L")}},{}],710:[function(_,ae,ie){"use strict";var g=_("../../lib").isArrayOrTypedArray;ae.exports=function(x,T,b){var e;for(g(x)?x.length>T.length&&(x=x.slice(0,T.length)):x=[],e=0;e<T.length;e++)x[e]=b(T[e]);return x}},{"../../lib":503}],711:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b,e,r){var t=e[0]*g.dpdx(x),a=e[1]*g.dpdy(T),n=1,d=1;if(r){var s=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=Math.sqrt(r[0]*r[0]+r[1]*r[1]);d=Math.max(0,(e[0]*r[0]+e[1]*r[1])/s/i)}var f=180*Math.atan2(a,t)/Math.PI;return f<-90?(f+=180,n=-n):f>90&&(f-=180,n=-n),{angle:f,flip:n,p:g.c2p(b,x,T),offsetMultplier:d}}},{}],712:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/drawing"),T=_("./map_1d_array"),b=_("./makepath"),e=_("./orient_text"),r=_("../../lib/svg_text_utils"),t=_("../../lib"),a=t.strRotate,n=t.strTranslate,d=_("../../constants/alignment");function s(y,m,l,w,v,A){var M="const-"+v+"-lines",k=l.selectAll("."+M).data(A);k.enter().append("path").classed(M,!0).style("vector-effect","non-scaling-stroke"),k.each(function(E){var P=E,F=P.y,R=T([],P.x,y.c2p),D=T([],F,m.c2p),L="M"+b(R,D,P.smoothing);g.select(this).attr("d",L).style("stroke-width",P.width).style("stroke",P.color).style("fill","none")}),k.exit().remove()}function i(y,m,l,w,v,A,M,k){var E=A.selectAll("text."+k).data(M);E.enter().append("text").classed(k,!0);var P=0,S={};return E.each(function(F,R){var D;if("auto"===F.axis.tickangle)D=e(w,m,l,F.xy,F.dxy);else{var L=(F.axis.tickangle+180)*Math.PI/180;D=e(w,m,l,F.xy,[Math.cos(L),Math.sin(L)])}R||(S={angle:D.angle,flip:D.flip});var B=(F.endAnchor?-1:1)*D.flip,V=g.select(this).attr({"text-anchor":B>0?"start":"end","data-notex":1}).call(x.font,F.font).text(F.text).call(r.convertToTspans,y),Z=x.bBox(this);V.attr("transform",n(D.p[0],D.p[1])+a(D.angle)+n(F.axis.labelpadding*B,.3*Z.height)),P=Math.max(P,Z.width+F.axis.labelpadding)}),E.exit().remove(),S.maxExtent=P,S}ae.exports=function(y,m,l,w){var v=m.xaxis,A=m.yaxis,M=y._fullLayout._clips;t.makeTraceGroups(w,l,"trace").each(function(k){var E=g.select(this),P=k[0],S=P.trace,F=S.aaxis,R=S.baxis,D=t.ensureSingle(E,"g","minorlayer"),L=t.ensureSingle(E,"g","majorlayer"),B=t.ensureSingle(E,"g","boundarylayer"),V=t.ensureSingle(E,"g","labellayer");E.style("opacity",S.opacity),s(v,A,L,0,"a",F._gridlines),s(v,A,L,0,"b",R._gridlines),s(v,A,D,0,"a",F._minorgridlines),s(v,A,D,0,"b",R._minorgridlines),s(v,A,B,0,"a-boundary",F._boundarylines),s(v,A,B,0,"b-boundary",R._boundarylines);var ee,Q,$,oe,j,H,G,re,q,te,ne,le,ue,de,he,Z=i(y,v,A,S,0,V,F._labels,"a-label"),Y=i(y,v,A,S,0,V,R._labels,"b-label");ee=y,Q=V,$=S,oe=v,j=A,H=Z,G=Y,le=t.aggNums(Math.min,null,$.a),ue=t.aggNums(Math.max,null,$.a),de=t.aggNums(Math.min,null,$.b),he=t.aggNums(Math.max,null,$.b),te=$.ab2xy(re=.5*(le+ue),q=de,!0),ne=$.dxyda_rough(re,q),void 0===H.angle&&t.extendFlat(H,e($,oe,j,te,$.dxydb_rough(re,q))),p(ee,Q,$,0,te,ne,$.aaxis,oe,j,H,"a-title"),te=$.ab2xy(re=le,q=.5*(de+he),!0),ne=$.dxydb_rough(re,q),void 0===G.angle&&t.extendFlat(G,e($,oe,j,te,$.dxyda_rough(re,q))),p(ee,Q,$,0,te,ne,$.baxis,oe,j,G,"b-title"),function(ee,Q,$,K,oe){var j,H,G,re,q=$.select("#"+ee._clipPathId);q.size()||(q=$.append("clipPath").classed("carpetclip",!0));var te=t.ensureSingle(q,"path","carpetboundary"),ne=Q.clipsegments,le=[];for(re=0;re<ne.length;re++)H=T([],(j=ne[re]).x,K.c2p),G=T([],j.y,oe.c2p),le.push(b(H,G,j.bicubic));var ue="M"+le.join("L")+"Z";q.attr("id",ee._clipPathId),te.attr("d",ue)}(S,P,M,v,A)})};var u=d.LINE_SPACING,f=(1-d.MID_SHIFT)/u+1;function p(y,m,l,w,v,A,M,k,E,P,S){var F=[];M.title.text&&F.push(M.title.text);var R=m.selectAll("text."+S).data(F),D=P.maxExtent;R.enter().append("text").classed(S,!0),R.each(function(){var L=e(l,k,E,v,A);-1===["start","both"].indexOf(M.showticklabels)&&(D=0);var B=M.title.font.size;D+=B+M.title.offset;var V=(P.angle+(P.flip<0?180:0)-L.angle+450)%360,Z=V>90&&V<270,Y=g.select(this);Y.text(M.title.text).call(r.convertToTspans,y),Z&&(D=(-r.lineCount(Y)+f)*u*B-D),Y.attr("transform",n(L.p[0],L.p[1])+a(L.angle)+n(0,D)).attr("text-anchor","middle").call(x.font,M.title.font)}),R.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(_,ae,ie){"use strict";var g=_("./constants"),x=_("../../lib/search").findBin,T=_("./compute_control_points"),b=_("./create_spline_evaluator"),e=_("./create_i_derivative_evaluator"),r=_("./create_j_derivative_evaluator");ae.exports=function(t){var a=t._a,n=t._b,d=a.length,s=n.length,i=t.aaxis,u=t.baxis,f=a[0],p=a[d-1],y=n[0],m=n[s-1],l=a[a.length-1]-a[0],w=n[n.length-1]-n[0],v=l*g.RELATIVE_CULL_TOLERANCE,A=w*g.RELATIVE_CULL_TOLERANCE;f-=v,p+=v,y-=A,m+=A,t.isVisible=function(M,k){return M>f&&M<p&&k>y&&k<m},t.isOccluded=function(M,k){return M<f||M>p||k<y||k>m},t.setScale=function(){var E=T(t._xctrl,t._yctrl,t._x,t._y,i.smoothing,u.smoothing);t._xctrl=E[0],t._yctrl=E[1],t.evalxy=b([t._xctrl,t._yctrl],d,s,i.smoothing,u.smoothing),t.dxydi=e([t._xctrl,t._yctrl],i.smoothing,u.smoothing),t.dxydj=r([t._xctrl,t._yctrl],i.smoothing,u.smoothing)},t.i2a=function(M){var k=Math.max(0,Math.floor(M[0]),d-2),E=M[0]-k;return(1-E)*a[k]+E*a[k+1]},t.j2b=function(M){var k=Math.max(0,Math.floor(M[1]),d-2),E=M[1]-k;return(1-E)*n[k]+E*n[k+1]},t.ij2ab=function(M){return[t.i2a(M[0]),t.j2b(M[1])]},t.a2i=function(M){var k=Math.max(0,Math.min(x(M,a),d-2)),E=a[k];return Math.max(0,Math.min(d-1,k+(M-E)/(a[k+1]-E)))},t.b2j=function(M){var k=Math.max(0,Math.min(x(M,n),s-2)),E=n[k];return Math.max(0,Math.min(s-1,k+(M-E)/(n[k+1]-E)))},t.ab2ij=function(M){return[t.a2i(M[0]),t.b2j(M[1])]},t.i2c=function(M,k){return t.evalxy([],M,k)},t.ab2xy=function(M,k,E){if(!E&&(M<a[0]||M>a[d-1]|k<n[0]||k>n[s-1]))return[!1,!1];var P=t.a2i(M),S=t.b2j(k),F=t.evalxy([],P,S);if(E){var R,D,L,B,V=0,Z=0,Y=[];M<a[0]?(R=0,D=0,V=(M-a[0])/(a[1]-a[0])):M>a[d-1]?(R=d-2,D=1,V=(M-a[d-1])/(a[d-1]-a[d-2])):D=P-(R=Math.max(0,Math.min(d-2,Math.floor(P)))),k<n[0]?(L=0,B=0,Z=(k-n[0])/(n[1]-n[0])):k>n[s-1]?(L=s-2,B=1,Z=(k-n[s-1])/(n[s-1]-n[s-2])):B=S-(L=Math.max(0,Math.min(s-2,Math.floor(S)))),V&&(t.dxydi(Y,R,L,D,B),F[0]+=Y[0]*V,F[1]+=Y[1]*V),Z&&(t.dxydj(Y,R,L,D,B),F[0]+=Y[0]*Z,F[1]+=Y[1]*Z)}return F},t.c2p=function(M,k,E){return[k.c2p(M[0]),E.c2p(M[1])]},t.p2x=function(M,k,E){return[k.p2c(M[0]),E.p2c(M[1])]},t.dadi=function(M){var k=Math.max(0,Math.min(a.length-2,M));return a[k+1]-a[k]},t.dbdj=function(M){var k=Math.max(0,Math.min(n.length-2,M));return n[k+1]-n[k]},t.dxyda=function(M,k,E,P){var S=t.dxydi(null,M,k,E,P),F=t.dadi(M,E);return[S[0]/F,S[1]/F]},t.dxydb=function(M,k,E,P){var S=t.dxydj(null,M,k,E,P),F=t.dbdj(k,P);return[S[0]/F,S[1]/F]},t.dxyda_rough=function(M,k,E){var P=l*(E||.1),S=t.ab2xy(M+P,k,!0),F=t.ab2xy(M-P,k,!0);return[.5*(S[0]-F[0])/P,.5*(S[1]-F[1])/P]},t.dxydb_rough=function(M,k,E){var P=w*(E||.1),S=t.ab2xy(M,k+P,!0),F=t.ab2xy(M,k-P,!0);return[.5*(S[0]-F[0])/P,.5*(S[1]-F[1])/P]},t.dpdx=function(M){return M._m},t.dpdy=function(M){return M._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x,T,b){var e,r,t,a=[],n=[],d=x[0].length,s=x.length;var u,f,p,y,m,l,w,v,A,M,Q,$,K,oe,j,E=0;for(e=0;e<d;e++)for(r=0;r<s;r++)void 0===x[r][e]&&(a.push(e),n.push(r),x[r][e]=($=r,K=void 0,oe=void 0,j=void 0,oe=0,j=0,(Q=e)>0&&void 0!==(K=x[$][Q-1])&&(j++,oe+=K),Q<d-1&&void 0!==(K=x[$][Q+1])&&(j++,oe+=K),$>0&&void 0!==(K=x[$-1][Q])&&(j++,oe+=K),$<s-1&&void 0!==(K=x[$+1][Q])&&(j++,oe+=K),oe/Math.max(1,j))),E=Math.max(E,Math.abs(x[r][e]));if(!a.length)return x;var P=0,S=0,F=a.length;do{for(P=0,t=0;t<F;t++){r=n[t];var D,L,B,V,Z,Y=0,ee=0;0===(e=a[t])?(L=T[V=Math.min(d-1,2)],ee+=(D=x[r][1])+(D-x[r][V])*(T[0]-(B=T[1]))/(B-L),Y++):e===d-1&&(L=T[V=Math.max(0,d-3)],ee+=(D=x[r][d-2])+(D-x[r][V])*(T[d-1]-(B=T[d-2]))/(B-L),Y++),(0===e||e===d-1)&&r>0&&r<s-1&&(ee+=((f=b[r]-b[r-1])*x[r+1][e]+(u=b[r+1]-b[r])*x[r-1][e])/(f+u),Y++),0===r?(L=b[Z=Math.min(s-1,2)],ee+=(D=x[1][e])+(D-x[Z][e])*(b[0]-(B=b[1]))/(B-L),Y++):r===s-1&&(L=b[Z=Math.max(0,s-3)],ee+=(D=x[s-2][e])+(D-x[Z][e])*(b[s-1]-(B=b[s-2]))/(B-L),Y++),(0===r||r===s-1)&&e>0&&e<d-1&&(ee+=((f=T[e]-T[e-1])*x[r][e+1]+(u=T[e+1]-T[e])*x[r][e-1])/(f+u),Y++),Y?ee/=Y:(v=(m=b[r+1]-b[r])*(l=b[r]-b[r-1])*(m+l),ee=((w=(p=T[e+1]-T[e])*(y=T[e]-T[e-1])*(p+y))*(l*x[r+1][e]+m*x[r-1][e])+v*(y*x[r][e+1]+p*x[r][e-1]))/(v*(y+p)+w*(l+m))),P+=(M=(A=ee-x[r][e])/E)*M,x[r][e]+=A*(1+(Y?0:.85))}P=Math.sqrt(P)}while(S++<100&&P>1e-5);return g.log("Smoother converged to",P,"after",S,"iterations"),x}},{"../../lib":503}],715:[function(_,ae,ie){"use strict";var g=_("../../lib").isArray1D;ae.exports=function(x,T,b){var e=b("x"),r=e&&e.length,t=b("y"),a=t&&t.length;if(!r&&!a)return!1;if(T._cheater=!e,r&&!g(e)||a&&!g(t))T._length=null;else{var n=r?e.length:1/0;a&&(n=Math.min(n,t.length)),T.a&&T.a.length&&(n=Math.min(n,T.a.length)),T.b&&T.b.length&&(n=Math.min(n,T.b.length)),T._length=n}return!0}},{"../../lib":503}],716:[function(_,ae,ie){"use strict";var g=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../scattergeo/attributes"),T=_("../../components/colorscale/attributes"),b=_("../../plots/attributes"),e=_("../../components/color/attributes").defaultLine,r=_("../../lib/extend").extendFlat,t=x.marker.line;ae.exports=r({locations:{valType:"data_array",editType:"calc"},locationmode:x.locationmode,z:{valType:"data_array",editType:"calc"},geojson:r({},x.geojson,{}),featureidkey:x.featureidkey,text:r({},x.text,{}),hovertext:r({},x.hovertext,{}),marker:{line:{color:r({},t.color,{dflt:e}),width:r({},t.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:x.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:x.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:r({},b.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:g(),showlegend:r({},b.showlegend,{dflt:!1})},T("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":968}],717:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../../components/colorscale/calc"),b=_("../scatter/arrays_to_calcdata"),e=_("../scatter/calc_selection");function r(t){return t&&"string"==typeof t}ae.exports=function(t,a){var n,d=a._length,s=new Array(d);n=a.geojson?function(y){return r(y)||g(y)}:r;for(var i=0;i<d;i++){var u=s[i]={},f=a.locations[i],p=a.z[i];n(f)&&g(p)?(u.loc=f,u.z=p):(u.loc=null,u.z=x),u.index=i}return b(s,a),T(t,a,{vals:a.z,containerStr:"",cLetter:"z"}),e(s,a),s}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"fast-isnumeric":190}],718:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");ae.exports=function(b,e,r,t){function a(u,f){return g.coerce(b,e,T,u,f)}var n=a("locations"),d=a("z");if(n&&n.length&&g.isArrayOrTypedArray(d)&&d.length){e._length=Math.min(n.length,d.length);var s,i=a("geojson");("string"==typeof i&&""!==i||g.isPlainObject(i))&&(s="geojson-id"),"geojson-id"===a("locationmode",s)&&a("featureidkey"),a("text"),a("hovertext"),a("hovertemplate"),a("marker.line.width")&&a("marker.line.color"),a("marker.opacity"),x(b,e,t,a,{prefix:"",cLetter:"z"}),g.coerceSelectionMarkerOpacity(e,a)}else e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b,e){g.location=x.location,g.z=x.z;var r=b[e];return r.fIn&&r.fIn.properties&&(g.properties=r.fIn.properties),g.ct=r.ct,g}},{}],720:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("./attributes"),T=_("../../lib").fillText;ae.exports=function(b,e,r){var t,a,n,d,s=b.cd,i=s[0].trace,u=b.subplot,f=[e,r],p=[e+360,r];for(a=0;a<s.length;a++)if(d=!1,(t=s[a])._polygons){for(n=0;n<t._polygons.length;n++)t._polygons[n].contains(f)&&(d=!d),t._polygons[n].contains(p)&&(d=!d);if(d)break}if(d&&t)return b.x0=b.x1=b.xa.c2p(t.ct),b.y0=b.y1=b.ya.c2p(t.ct),b.index=t.index,b.location=t.loc,b.z=t.z,b.zLabel=g.tickText(u.mockAxis,u.mockAxis.c2l(t.z),"hover").text,b.hovertemplate=t.hovertemplate,function(y,m,l){if(!m.hovertemplate){var w=l.hi||m.hoverinfo,v=String(l.loc),A="all"===w?x.hoverinfo.flags:w.split("+"),M=-1!==A.indexOf("name"),k=-1!==A.indexOf("location"),E=-1!==A.indexOf("z"),P=-1!==A.indexOf("text"),S=[];!M&&k?y.nameOverride=v:(M&&(y.nameOverride=m.name),k&&S.push(v)),E&&S.push(y.zLabel),P&&T(l,m,S),y.extraText=S.join("<br>")}}(b,i,t),[b]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),calc:_("./calc"),calcGeoJSON:_("./plot").calcGeoJSON,plot:_("./plot").plot,style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"choropleth",basePlotModule:_("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../lib/geo_location_utils"),b=_("../../lib/topojson_utils").getTopojsonFeatures,e=_("../../plots/cartesian/autorange").findExtremes,r=_("./style").style;ae.exports={calcGeoJSON:function(t,a){for(var n=t[0].trace,d=a[n.geo],s=d._subplot,i=n.locationmode,u=n._length,f="geojson-id"===i?T.extractTraceFeature(t):b(n,s.topojson),p=[],y=[],m=0;m<u;m++){var l=t[m],w="geojson-id"===i?l.fOut:T.locationToFeature(i,l.loc,f);if(w){l.geojson=w,l.ct=w.properties.ct,l._polygons=T.feature2polygons(w);var v=T.computeBbox(w);p.push(v[0],v[2]),y.push(v[1],v[3])}else l.geojson=null}if("geojson"===d.fitbounds&&"geojson-id"===i){var A=T.computeBbox(T.getTraceGeojson(n));p=[A[0],A[2]],y=[A[1],A[3]]}var M={padded:!0};n._extremes.lon=e(d.lonaxis._ax,p,M),n._extremes.lat=e(d.lataxis._ax,y,M)},plot:function(t,a,n){var d=a.layers.backplot.select(".choroplethlayer");x.makeTraceGroups(d,n,"trace choropleth").each(function(s){var i=g.select(this).selectAll("path.choroplethlocation").data(x.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),r(t,s)})}}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(_,ae,ie){"use strict";ae.exports=function(g,x){var T,b,e,r,t,a=g.cd,n=g.xaxis,d=g.yaxis,s=[];if(!1===x)for(T=0;T<a.length;T++)a[T].selected=0;else for(T=0;T<a.length;T++)(e=(b=a[T]).ct)&&(r=n.c2p(e),t=d.c2p(e),x.contains([r,t],null,T,g)?(s.push({pointNumber:T,lon:e[0],lat:e[1]}),b.selected=1):b.selected=0);return s}},{}],724:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/color"),T=_("../../components/drawing"),b=_("../../components/colorscale");function e(r,t){var a=t[0].trace,n=t[0].node3.selectAll(".choroplethlocation"),d=a.marker||{},s=d.line||{},i=b.makeColorScaleFuncFromTrace(a);n.each(function(u){g.select(this).attr("fill",i(u.z)).call(x.stroke,u.mlc||s.color).call(T.dashLine,"",u.mlw||s.width||0).style("opacity",d.opacity)}),T.selectedPointStyle(n,a,r)}ae.exports={style:function(r,t){t&&e(r,t)},styleOnSelect:function(r,t){var n=t[0].trace;n.selectedpoints?T.selectedPointStyle(t[0].node3.selectAll(".choroplethlocation"),n,r):e(r,t)}}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(_,ae,ie){"use strict";var g=_("../choropleth/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/attributes"),e=_("../../lib/extend").extendFlat;ae.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},g.featureidkey,{}),below:{valType:"string",editType:"plot"},text:g.text,hovertext:g.hovertext,marker:{line:{color:e({},g.marker.line.color,{editType:"plot"}),width:e({},g.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},g.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},g.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},g.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:g.hoverinfo,hovertemplate:T({},{keys:["properties"]}),showlegend:e({},b.showlegend,{dflt:!1})},x("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("../../components/colorscale"),b=_("../../components/drawing"),e=_("../../lib/geojson_utils").makeBlank,r=_("../../lib/geo_location_utils");function t(a){var n,d=a[0].trace,s=d._opts;if(d.selectedpoints){for(var i=b.makeSelectedPointStyleFns(d),u=0;u<a.length;u++){var f=a[u];f.fOut&&(f.fOut.properties.mo2=i.selectedOpacityFn(f))}n={type:"identity",property:"mo2"}}else n=x.isArrayOrTypedArray(d.marker.opacity)?{type:"identity",property:"mo"}:d.marker.opacity;return x.extendFlat(s.fill.paint,{"fill-opacity":n}),x.extendFlat(s.line.paint,{"line-opacity":n}),s}ae.exports={convert:function(a){var n=a[0].trace,d=!0===n.visible&&0!==n._length,s={layout:{visibility:"none"},paint:{}},i={layout:{visibility:"none"},paint:{}},u=n._opts={fill:s,line:i,geojson:e()};if(!d)return u;var f=r.extractTraceFeature(a);if(!f)return u;var p,y,m,l=T.makeColorScaleFuncFromTrace(n),w=n.marker,v=w.line||{};x.isArrayOrTypedArray(w.opacity)&&(p=function(S){var F=S.mo;return g(F)?+x.constrain(F,0,1):0}),x.isArrayOrTypedArray(v.color)&&(y=function(S){return S.mlc}),x.isArrayOrTypedArray(v.width)&&(m=function(S){return S.mlw});for(var A=0;A<a.length;A++){var M=a[A],k=M.fOut;if(k){var E=k.properties;E.fc=l(M.z),p&&(E.mo=p(M)),y&&(E.mlc=y(M)),m&&(E.mlw=m(M)),M.ct=E.ct,M._polygons=r.feature2polygons(k)}}var P=p?{type:"identity",property:"mo"}:w.opacity;return x.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":P}),x.extendFlat(i.paint,{"line-color":y?{type:"identity",property:"mlc"}:v.color,"line-width":m?{type:"identity",property:"mlw"}:v.width,"line-opacity":P}),s.layout.visibility="visible",i.layout.visibility="visible",u.geojson={type:"FeatureCollection",features:f},t(a),u},convertOnSelect:t}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");ae.exports=function(b,e,r,t){function a(i,u){return g.coerce(b,e,T,i,u)}var n=a("locations"),d=a("z"),s=a("geojson");g.isArrayOrTypedArray(n)&&n.length&&g.isArrayOrTypedArray(d)&&d.length&&("string"==typeof s&&""!==s||g.isPlainObject(s))?(a("featureidkey"),e._length=Math.min(n.length,d.length),a("below"),a("text"),a("hovertext"),a("hovertemplate"),a("marker.line.width")&&a("marker.line.color"),a("marker.opacity"),x(b,e,t,a,{prefix:"",cLetter:"z"}),g.coerceSelectionMarkerOpacity(e,a)):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),calc:_("../choropleth/calc"),plot:_("./plot"),hoverPoints:_("../choropleth/hover"),eventData:_("../choropleth/event_data"),selectPoints:_("../choropleth/select"),styleOnSelect:function(g,x){x&&x[0].trace._glTrace.updateOnSelect(x)},getBelow:function(g,x){for(var T=x.getMapLayers(),b=T.length-2;b>=0;b--){var e=T[b].id;if("string"==typeof e&&0===e.indexOf("water"))for(var r=b+1;r<T.length;r++)if("string"==typeof(e=T[r].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:_("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(_,ae,ie){"use strict";var g=_("./convert").convert,x=_("./convert").convertOnSelect,T=_("../../plots/mapbox/constants").traceLayerPrefix;function b(r,t){this.type="choroplethmapbox",this.subplot=r,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",T+t+"-fill"],["line",T+t+"-line"]],this.below=null}var e=b.prototype;e.update=function(r){this._update(g(r))},e.updateOnSelect=function(r){this._update(x(r))},e._update=function(r){var t=this.subplot,a=this.layerList,n=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(r.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(r,n),this.below=n);for(var d=0;d<a.length;d++){var s=a[d],u=s[1],f=r[s[0]];t.setOptions(u,"setLayoutProperty",f.layout),"visible"===f.layout.visibility&&t.setOptions(u,"setPaintProperty",f.paint)}},e._addLayers=function(r,t){for(var a=this.subplot,n=this.layerList,d=this.sourceId,s=0;s<n.length;s++){var i=n[s],u=i[0],f=r[u];a.addLayer({type:u,id:i[1],source:d,layout:f.layout,paint:f.paint},t)}},e._removeLayers=function(){for(var r=this.subplot.map,t=this.layerList,a=t.length-1;a>=0;a--)r.removeLayer(t[a][1])},e.dispose=function(){var r=this.subplot.map;this._removeLayers(),r.removeSource(this.sourceId)},ae.exports=function(r,t){var a=t[0].trace,n=new b(r,a.uid),d=n.sourceId,s=g(t),i=n.below=r.belowLookup["trace-"+a.uid];return r.map.addSource(d,{type:"geojson",data:s.geojson}),n._addLayers(s,i),t[0].trace._glTrace=n,n}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../mesh3d/attributes"),e=_("../../plots/attributes"),r=_("../../lib/extend").extendFlat,t={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:T({editType:"calc"},{keys:["norm"]}),uhoverformat:x("u",1),vhoverformat:x("v",1),whoverformat:x("w",1),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),showlegend:r({},e.showlegend,{dflt:!1})};r(t,g("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(a){t[a]=b[a]}),t.hoverinfo=r({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),t.transforms=void 0,ae.exports=t},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/calc");ae.exports=function(x,T){for(var b=T.u,e=T.v,r=T.w,t=Math.min(T.x.length,T.y.length,T.z.length,b.length,e.length,r.length),a=-1/0,n=1/0,d=0;d<t;d++){var s=b[d],i=e[d],u=r[d],f=Math.sqrt(s*s+i*i+u*u);a=Math.max(a,f),n=Math.min(n,f)}T._len=t,T._normMax=a,g(x,T,{vals:[n,a],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(_,ae,ie){"use strict";var g=_("../../../stackgl_modules").gl_cone3d,x=_("../../../stackgl_modules").gl_cone3d.createConeMesh,T=_("../../lib").simpleMap,b=_("../../lib/gl_format_color").parseColorScale,e=_("../../components/colorscale").extractOpts,r=_("../../plots/gl3d/zip3");function t(u,f){this.scene=u,this.uid=f,this.mesh=null,this.data=null}var a=t.prototype;a.handlePick=function(u){if(u.object===this.mesh){var f=u.index=u.data.index,l=this.data.u[f],w=this.data.v[f],v=this.data.w[f];u.traceCoordinate=[this.data.x[f],this.data.y[f],this.data.z[f],l,w,v,Math.sqrt(l*l+w*w+v*v)];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&void 0!==A[f]?u.textLabel=A[f]:A&&(u.textLabel=A),!0}};var n={xaxis:0,yaxis:1,zaxis:2},d={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function i(u,f){var p=u.fullSceneLayout,y=u.dataScale,m={};function l(M,k){var E=p[k],P=y[n[k]];return T(M,function(S){return E.d2l(S)*P})}m.vectors=r(l(f.u,"xaxis"),l(f.v,"yaxis"),l(f.w,"zaxis"),f._len),m.positions=r(l(f.x,"xaxis"),l(f.y,"yaxis"),l(f.z,"zaxis"),f._len);var w=e(f);m.colormap=b(f),m.vertexIntensityBounds=[w.min/f._normMax,w.max/f._normMax],m.coneOffset=d[f.anchor],m.coneSize="scaled"===f.sizemode?f.sizeref||.5:f.sizeref&&f._normMax?f.sizeref/f._normMax:.5;var v=g(m),A=f.lightposition;return v.lightPosition=[A.x,A.y,A.z],v.ambient=f.lighting.ambient,v.diffuse=f.lighting.diffuse,v.specular=f.lighting.specular,v.roughness=f.lighting.roughness,v.fresnel=f.lighting.fresnel,v.opacity=f.opacity,f._pad=s[f.anchor]*v.vectorScale*v.coneScale*f._normMax,v}a.update=function(u){this.data=u;var f=i(this.scene,u);this.mesh.update(f)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ae.exports=function(u,f){var p=u.glplot.gl,y=i(u,f),m=x(p,y),l=new t(u,f.uid);return l.mesh=m,l.data=f,m._trace=l,u.glplot.add(m),l}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");ae.exports=function(b,e,r,t){function a(p,y){return g.coerce(b,e,T,p,y)}var n=a("u"),d=a("v"),s=a("w"),i=a("x"),u=a("y"),f=a("z");n&&n.length&&d&&d.length&&s&&s.length&&i&&i.length&&u&&u.length&&f&&f.length?(a("sizeref"),a("sizemode"),a("anchor"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),x(b,e,t,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"cone",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:_("./calc"),plot:_("./convert"),eventData:function(g,x){return g.norm=x.traceCoordinate[6],g},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(_,ae,ie){"use strict";var g=_("../heatmap/attributes"),x=_("../scatter/attributes"),T=_("../../plots/cartesian/axis_format_attributes"),b=T.axisHoverFormat,e=T.descriptionOnlyNumbers,r=_("../../components/colorscale/attributes"),t=_("../../components/drawing/attributes").dash,a=_("../../plots/font_attributes"),n=_("../../lib/extend").extendFlat,d=_("../../constants/filter_ops"),s=d.COMPARISON_OPS2,i=d.INTERVAL_OPS,u=x.line;ae.exports=n({z:g.z,x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,text:g.text,hovertext:g.hovertext,transpose:g.transpose,xtype:g.xtype,ytype:g.ytype,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:g.hovertemplate,texttemplate:n({},g.texttemplate,{}),textfont:n({},g.textfont,{}),hoverongaps:g.hoverongaps,connectgaps:n({},g.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:a({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n({},u.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:t,smoothing:n({},u.smoothing,{}),editType:"plot"}},r("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":926}],736:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale"),x=_("../heatmap/calc"),T=_("./set_contours"),b=_("./end_plus");ae.exports=function(e,r){var t=x(e,r),a=t[0].z;T(r,a);var n,d=r.contours,s=g.extractOpts(r);if("heatmap"===d.coloring&&s.auto&&!1===r.autocontour){var i=d.start,u=b(d),f=d.size||1,p=Math.floor((u-i)/f)+1;isFinite(f)||(f=1,p=1);var y=i-f/2;n=[y,y+p*f]}else n=a;return g.calc(e,r,{vals:n,cLetter:"z"}),t}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(_,ae,ie){"use strict";ae.exports=function(g,x){var T,b=g[0],e=b.z;switch(x.type){case"levels":var r=Math.min(e[0][0],e[0][1]);for(T=0;T<g.length;T++){var t=g[T];t.prefixBoundary=!t.edgepaths.length&&(r>t.level||t.starts.length&&r===t.level)}break;case"constraint":if(b.prefixBoundary=!1,b.edgepaths.length)return;var a=b.x.length,n=b.y.length,d=-1/0,s=1/0;for(T=0;T<n;T++)s=Math.min(s,e[T][0]),s=Math.min(s,e[T][a-1]),d=Math.max(d,e[T][0]),d=Math.max(d,e[T][a-1]);for(T=1;T<a-1;T++)s=Math.min(s,e[0][T]),s=Math.min(s,e[n-1][T]),d=Math.max(d,e[0][T]),d=Math.max(d,e[n-1][T]);var i,u,f=x.value;switch(x._operation){case">":f>d&&(b.prefixBoundary=!0);break;case"<":(f<s||b.starts.length&&f===s)&&(b.prefixBoundary=!0);break;case"[]":i=Math.min(f[0],f[1]),((u=Math.max(f[0],f[1]))<s||i>d||b.starts.length&&u===s)&&(b.prefixBoundary=!0);break;case"][":i=Math.min(f[0],f[1]),u=Math.max(f[0],f[1]),i<s&&u>d&&(b.prefixBoundary=!0)}}}},{}],738:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale"),x=_("./make_color_map"),T=_("./end_plus");ae.exports={min:"zmin",max:"zmax",calc:function(b,e,r){var t=e.contours,a=e.line,n=t.size||1,d=t.coloring,s=x(e,{isColorbar:!0});if("heatmap"===d){var i=g.extractOpts(e);r._fillgradient=i.reversescale?g.flipScale(i.colorscale):i.colorscale,r._zrange=[i.min,i.max]}else"fill"===d&&(r._fillcolor=s);r._line={color:"lines"===d?s:a.color,width:!1!==t.showlines?a.width:0,dash:a.dash},r._levels={start:t.start,end:T(t),size:n}}}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(_,ae,ie){"use strict";ae.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("./label_defaults"),T=_("../../components/color"),b=T.addOpacity,e=T.opacity,r=_("../../constants/filter_ops"),t=r.CONSTRAINT_REDUCTION,a=r.COMPARISON_OPS2;ae.exports=function(n,d,s,i,u,f){var p,y,m,v,A,M,l=d.contours,w=s("contours.operation");l._operation=t[w],v=s,-1===a.indexOf((A=l).operation)?(v("contours.value",[0,1]),Array.isArray(A.value)?A.value.length>2?A.value=A.value.slice(2):0===A.length?A.value=[0,1]:A.length<2?(M=parseFloat(A.value[0]),A.value=[M,M+1]):A.value=[parseFloat(A.value[0]),parseFloat(A.value[1])]:g(A.value)&&(M=parseFloat(A.value),A.value=[M,M+1])):(v("contours.value",0),g(A.value)||(A.value=Array.isArray(A.value)?parseFloat(A.value[0]):0)),"="===w?p=l.showlines=!0:(p=s("contours.showlines"),m=s("fillcolor",b((n.line||{}).color||u,.5))),p&&(y=s("line.color",m&&e(m)?b(d.fillcolor,1):u),s("line.width",2),s("line.dash")),s("line.smoothing"),x(s,i,y,f)}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(_,ae,ie){"use strict";var g=_("../../constants/filter_ops"),x=_("fast-isnumeric");function T(r,t){var a,n=Array.isArray(t);function d(s){return x(s)?+s:null}return-1!==g.COMPARISON_OPS2.indexOf(r)?a=d(n?t[0]:t):-1!==g.INTERVAL_OPS.indexOf(r)?a=n?[d(t[0]),d(t[1])]:[d(t),d(t)]:-1!==g.SET_OPS.indexOf(r)&&(a=n?t.map(d):[d(t)]),a}function b(r){return function(t){t=T(r,t);var a=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return{start:a,end:n,size:n-a}}}function e(r){return function(t){return{start:t=T(r,t),end:1/0,size:1/0}}}ae.exports={"[]":b("[]"),"][":b("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b){var e=b("contours.start"),r=b("contours.end"),t=!1===e||!1===r,a=T("contours.size");!(t?x.autocontour=!0:T("autocontour",!1))&&a||T("ncontours")}},{}],743:[function(_,ae,ie){"use strict";var g=_("../../lib");function x(T){return g.extendFlat({},T,{edgepaths:g.extendDeep([],T.edgepaths),paths:g.extendDeep([],T.paths),starts:g.extendDeep([],T.starts)})}ae.exports=function(T,b){var e,r,t,a=function(s){return s.reverse()},n=function(s){return s};switch(b){case"=":case"<":return T;case">":for(1!==T.length&&g.warn("Contour data invalid for the specified inequality operation."),r=T[0],e=0;e<r.edgepaths.length;e++)r.edgepaths[e]=a(r.edgepaths[e]);for(e=0;e<r.paths.length;e++)r.paths[e]=a(r.paths[e]);for(e=0;e<r.starts.length;e++)r.starts[e]=a(r.starts[e]);return T;case"][":var d=a;a=n,n=d;case"[]":for(2!==T.length&&g.warn("Contour data invalid for the specified inequality range operation."),r=x(T[0]),t=x(T[1]),e=0;e<r.edgepaths.length;e++)r.edgepaths[e]=a(r.edgepaths[e]);for(e=0;e<r.paths.length;e++)r.paths[e]=a(r.paths[e]);for(e=0;e<r.starts.length;e++)r.starts[e]=a(r.starts[e]);for(;t.edgepaths.length;)r.edgepaths.push(n(t.edgepaths.shift()));for(;t.paths.length;)r.paths.push(n(t.paths.shift()));for(;t.starts.length;)r.starts.push(n(t.starts.shift()));return[r]}}},{"../../lib":503}],744:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../heatmap/xyz_defaults"),T=_("../scatter/period_defaults"),b=_("./constraint_defaults"),e=_("./contours_defaults"),r=_("./style_defaults"),t=_("../heatmap/label_defaults"),a=_("./attributes");ae.exports=function(n,d,s,i){function u(p,y){return g.coerce(n,d,a,p,y)}if(x(n,d,u,i)){T(n,d,i,u),u("xhoverformat"),u("yhoverformat"),u("text"),u("hovertext"),u("hoverongaps"),u("hovertemplate");var f="constraint"===u("contours.type");u("connectgaps",g.isArray1D(d.z)),f?b(n,d,u,i,s):(e(n,d,u,function(p){return g.coerce2(n,d,a,p)}),r(n,d,u,i)),d.contours&&"heatmap"===d.contours.coloring&&t(u,i)}else d.visible=!1}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":946,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./constraint_mapping"),T=_("./end_plus");ae.exports=function(b,e,r){for(var t="constraint"===b.type?x[b._operation](b.value):b,a=t.size,n=[],d=T(t),s=r.trace._carpetTrace,i=s?{xaxis:s.aaxis,yaxis:s.baxis,x:r.a,y:r.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:r.x,y:r.y},u=t.start;u<d;u+=a)if(n.push(g.extendFlat({level:u,crossings:{},starts:[],edgepaths:[],paths:[],z:r.z,smoothing:r.trace.line.smoothing},i)),n.length>1e3){g.warn("Too many contours, clipping at 1000",b);break}return n}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(_,ae,ie){"use strict";ae.exports=function(g){return g.end+g.size/1e6}},{}],747:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./constants");function T(r,t,a,n){return Math.abs(r[0]-t[0])<a&&Math.abs(r[1]-t[1])<n}function b(r,t,a,n,d){var s,te,le,ue,de,i=t.join(","),u=r.crossings[i],f=(le=t,ue=0,de=0,(te=u)>20&&a?208===te||1114===te?ue=0===le[0]?1:-1:de=0===le[1]?1:-1:-1!==x.BOTTOMSTART.indexOf(te)?de=1:-1!==x.LEFTSTART.indexOf(te)?ue=1:-1!==x.TOPSTART.indexOf(te)?de=-1:ue=-1,[ue,de]),p=[e(r,t,[-f[0],-f[1]])],y=r.z.length,m=r.z[0].length,l=t.slice(),w=f.slice();for(s=0;s<1e4;s++){if(u>20?r.crossings[i]=x.SADDLEREMAINDER[u=x.CHOOSESADDLE[u][(f[0]||f[1])<0?0:1]]:delete r.crossings[i],!(f=x.NEWDELTA[u])){g.log("Found bad marching index:",u,t,r.level);break}if(p.push(e(r,t,f)),t[0]+=f[0],t[1]+=f[1],i=t.join(","),T(p[p.length-1],p[p.length-2],n,d)&&p.pop(),t[0]===l[0]&&t[1]===l[1]&&f[0]===w[0]&&f[1]===w[1]||a&&(f[0]&&(t[0]<0||t[0]>m-2)||f[1]&&(t[1]<0||t[1]>y-2)))break;u=r.crossings[i]}1e4===s&&g.log("Infinite loop in contour?");var A,M,k,E,P,S,F,R,D,L,B,V,Z,Y,ee,Q=T(p[0],p[p.length-1],n,d),$=0,K=.2*r.smoothing,oe=[],j=0;for(s=1;s<p.length;s++)void 0,void 0,Y=(V=p[s])[2]-(Z=p[s-1])[2],ee=V[3]-Z[3],$+=F=Math.sqrt(Y*Y+ee*ee),oe.push(F);var H=$/oe.length*K;function G(te){return p[te%p.length]}for(s=p.length-2;s>=j;s--)if((A=oe[s])<H){for(k=0,M=s-1;M>=j&&A+oe[M]<H;M--)A+=oe[M];if(Q&&s===p.length-2)for(k=0;k<M&&A+oe[k]<H;k++)A+=oe[k];P=s-M+k+1,S=Math.floor((s+M+k+2)/2),E=Q||s!==p.length-2?Q||-1!==M?P%2?G(S):[(G(S)[0]+G(S+1)[0])/2,(G(S)[1]+G(S+1)[1])/2]:p[0]:p[p.length-1],p.splice(M+1,s-M+1,E),s=M+1,k&&(j=k),Q&&(s===p.length-2?p[k]=p[p.length-1]:0===s&&(p[p.length-1]=p[0]))}for(p.splice(0,j),s=0;s<p.length;s++)p[s].length=2;if(!(p.length<2))if(Q)p.pop(),r.paths.push(p);else{a||g.log("Unclosed interior contour?",r.level,l.join(","),p.join("L"));var re=!1;for(R=0;R<r.edgepaths.length;R++)if(L=r.edgepaths[R],!re&&T(L[0],p[p.length-1],n,d)){p.pop(),re=!0;var q=!1;for(D=0;D<r.edgepaths.length;D++)if(T((B=r.edgepaths[D])[B.length-1],p[0],n,d)){q=!0,p.shift(),r.edgepaths.splice(R,1),D===R?r.paths.push(p.concat(B)):(D>R&&D--,r.edgepaths[D]=B.concat(p,L));break}q||(r.edgepaths[R]=p.concat(L))}for(R=0;R<r.edgepaths.length&&!re;R++)T((L=r.edgepaths[R])[L.length-1],p[0],n,d)&&(p.shift(),r.edgepaths[R]=L.concat(p),re=!0);re||r.edgepaths.push(p)}}function e(r,t,a){var n=t[0]+Math.max(a[0],0),d=t[1]+Math.max(a[1],0),s=r.z[d][n],i=r.xaxis,u=r.yaxis;if(a[1]){var f=(r.level-s)/(r.z[d][n+1]-s),p=(1!==f?(1-f)*i.c2l(r.x[n]):0)+(0!==f?f*i.c2l(r.x[n+1]):0);return[i.c2p(i.l2c(p),!0),u.c2p(r.y[d],!0),n+f,d]}var y=(r.level-s)/(r.z[d+1][n]-s),m=(1!==y?(1-y)*u.c2l(r.y[d]):0)+(0!==y?y*u.c2l(r.y[d+1]):0);return[i.c2p(r.x[n],!0),u.c2p(u.l2c(m),!0),n,d+y]}ae.exports=function(r,t,a){var n,d,s,i;for(t=t||.01,a=a||.01,d=0;d<r.length;d++){for(s=r[d],i=0;i<s.starts.length;i++)b(s,s.starts[i],"edge",t,a);for(n=0;Object.keys(s.crossings).length&&n<1e4;)n++,b(s,Object.keys(s.crossings)[0].split(",").map(Number),void 0,t,a);1e4===n&&g.log("Infinite loop in contour?")}}},{"../../lib":503,"./constants":739}],748:[function(_,ae,ie){"use strict";var g=_("../../components/color"),x=_("../heatmap/hover");ae.exports=function(T,b,e,r,t){t||(t={}),t.isContour=!0;var a=x(T,b,e,r,t);return a&&a.forEach(function(n){var d=n.trace;"constraint"===d.contours.type&&(d.fillcolor&&g.opacity(d.fillcolor)?n.color=g.addOpacity(d.fillcolor,1):d.contours.showlines&&g.opacity(d.line.color)&&(n.color=g.addOpacity(d.line.color,1)))}),a}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot").plot,style:_("./style"),colorbar:_("./colorbar"),hoverPoints:_("./hover"),moduleType:"trace",name:"contour",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x,T,b,e){if(e||(e={}),x("contours.showlabels")){var r=T.font;g.coerceFont(x,"contours.labelfont",{family:r.family,size:r.size,color:b}),x("contours.labelformat")}!1!==e.hasHover&&x("zhoverformat")}},{"../../lib":503}],751:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/colorscale"),T=_("./end_plus");ae.exports=function(b){var e=b.contours,r=e.start,t=T(e),a=e.size||1,n=Math.floor((t-r)/a)+1,d="lines"===e.coloring?0:1,s=x.extractOpts(b);isFinite(a)||(a=1,n=1);var i,u,f=s.reversescale?x.flipScale(s.colorscale):s.colorscale,p=f.length,y=new Array(p),m=new Array(p);if("heatmap"===e.coloring){var l=s.min,w=s.max;for(u=0;u<p;u++)y[u]=(i=f[u])[0]*(w-l)+l,m[u]=i[1];var v=g.extent([l,w,e.start,e.start+a*(n-1)]),A=v[l<w?0:1],M=v[l<w?1:0];A!==l&&(y.splice(0,0,A),m.splice(0,0,m[0])),M!==w&&(y.push(M),m.push(m[m.length-1]))}else for(u=0;u<p;u++)y[u]=((i=f[u])[0]*(n+d-1)-d/2)*a+r,m[u]=i[1];return x.makeColorScaleFunc({domain:y,range:m},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(_,ae,ie){"use strict";var g=_("./constants");function x(T,b){var e=(b[0][0]>T?0:1)+(b[0][1]>T?0:2)+(b[1][1]>T?0:4)+(b[1][0]>T?0:8);return 5===e||10===e?T>(b[0][0]+b[0][1]+b[1][0]+b[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}ae.exports=function(T){var b,e,r,t,a,n,d,s,i,u=T[0].z,f=u.length,p=u[0].length,y=2===f||2===p;for(e=0;e<f-1;e++)for(t=[],0===e&&(t=t.concat(g.BOTTOMSTART)),e===f-2&&(t=t.concat(g.TOPSTART)),b=0;b<p-1;b++)for(r=t.slice(),0===b&&(r=r.concat(g.LEFTSTART)),b===p-2&&(r=r.concat(g.RIGHTSTART)),a=b+","+e,n=[[u[e][b],u[e][b+1]],[u[e+1][b],u[e+1][b+1]]],i=0;i<T.length;i++)(d=x((s=T[i]).level,n))&&(s.crossings[a]=d,-1!==r.indexOf(d)&&(s.starts.push([b,e]),y&&-1!==r.indexOf(d,r.indexOf(d)+1)&&s.starts.push([b,e])))}},{"./constants":739}],753:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../components/colorscale"),e=_("../../lib/svg_text_utils"),r=_("../../plots/cartesian/axes"),t=_("../../plots/cartesian/set_convert"),a=_("../heatmap/plot"),n=_("./make_crossings"),d=_("./find_all_paths"),s=_("./empty_pathinfo"),i=_("./convert_to_constraints"),u=_("./close_boundaries"),f=_("./constants"),p=f.LABELOPTIMIZER;function y(w,v){var A,M,k,E,P,S,R="",D=0,L=w.edgepaths.map(function(Q,$){return $}),B=!0;function V(Q){return Math.abs(Q[1]-v[2][1])<.01}function Y(Q){return Math.abs(Q[0]-v[2][0])<.01}for(;L.length;){for(S=T.smoothopen(w.edgepaths[D],w.smoothing),R+=B?S:S.replace(/^M/,"L"),L.splice(L.indexOf(D),1),A=w.edgepaths[D][w.edgepaths[D].length-1],E=-1,k=0;k<4;k++){if(!A){x.log("Missing end?",D,w);break}for(Math.abs(A[1]-v[0][1])<.01&&!Y(A)?M=v[1]:Math.abs(A[0]-v[0][0])<.01?M=v[0]:V(A)?M=v[3]:Y(A)&&(M=v[2]),P=0;P<w.edgepaths.length;P++){var ee=w.edgepaths[P][0];Math.abs(A[0]-M[0])<.01?Math.abs(A[0]-ee[0])<.01&&(ee[1]-A[1])*(M[1]-ee[1])>=0&&(M=ee,E=P):Math.abs(A[1]-M[1])<.01?Math.abs(A[1]-ee[1])<.01&&(ee[0]-A[0])*(M[0]-ee[0])>=0&&(M=ee,E=P):x.log("endpt to newendpt is not vert. or horz.",A,M,ee)}if(A=M,E>=0)break;R+="L"+M}if(E===w.edgepaths.length){x.log("unclosed perimeter path");break}(B=-1===L.indexOf(D=E))&&(D=L[0],R+="Z")}for(D=0;D<w.paths.length;D++)R+=T.smoothclosed(w.paths[D],w.smoothing);return R}function m(w,v,A,M){var k=v.width/2,E=v.height/2,P=w.x,S=w.y,F=w.theta,R=Math.cos(F)*k,D=Math.sin(F)*k,L=(P>M.center?M.right-P:P-M.left)/(R+Math.abs(Math.sin(F)*E)),B=(S>M.middle?M.bottom-S:S-M.top)/(Math.abs(D)+Math.cos(F)*E);if(L<1||B<1)return 1/0;var V=p.EDGECOST*(1/(L-1)+1/(B-1));V+=p.ANGLECOST*F*F;for(var Z=P-R,Y=S-D,ee=P+R,Q=S+D,$=0;$<A.length;$++){var K=A[$],oe=Math.cos(K.theta)*K.width/2,j=Math.sin(K.theta)*K.width/2,H=2*x.segmentDistance(Z,Y,ee,Q,K.x-oe,K.y-j,K.x+oe,K.y+j)/(v.height+K.height),G=K.level===v.level,re=G?p.SAMELEVELDISTANCE:1;if(H<=re)return 1/0;V+=p.NEIGHBORCOST*(G?p.SAMELEVELFACTOR:1)/(H-re)}return V}function l(w){var v,A,M=w.trace._emptypoints,k=[],E=w.z.length,P=w.z[0].length,S=[];for(v=0;v<P;v++)S.push(1);for(v=0;v<E;v++)k.push(S.slice());for(v=0;v<M.length;v++)k[(A=M[v])[0]][A[1]]=0;return w.zmask=k,k}ie.plot=function(w,v,A,M){var k=v.xaxis,E=v.yaxis;x.makeTraceGroups(M,A,"contour").each(function(P){var S=g.select(this),F=P[0],D=F.x,L=F.y,B=F.trace.contours,V=s(B,v,F),Z=x.ensureSingle(S,"g","heatmapcoloring"),Y=[];"heatmap"===B.coloring&&(Y=[P]),a(w,v,Y,Z),n(V),d(V);var G,re,q,ee=k.c2p(D[0],!0),Q=k.c2p(D[D.length-1],!0),$=E.c2p(L[0],!0),K=E.c2p(L[L.length-1],!0),oe=[[ee,K],[Q,K],[Q,$],[ee,$]],j=V;"constraint"===B.type&&(j=i(V,B._operation)),G=oe,re=B,(q=x.ensureSingle(S,"g","contourbg").selectAll("path").data("fill"===re.coloring?[0]:[])).enter().append("path"),q.exit().remove(),q.attr("d","M"+G.join("L")+"Z").style("stroke","none"),function(H,G,re,q){var te="fill"===q.coloring||"constraint"===q.type&&"="!==q._operation,ne="M"+re.join("L")+"Z";te&&u(G,q);var le=x.ensureSingle(H,"g","contourfill").selectAll("path").data(te?G:[]);le.enter().append("path"),le.exit().remove(),le.each(function(ue){var de=(ue.prefixBoundary?ne:"")+y(ue,re);de?g.select(this).attr("d",de).style("stroke","none"):g.select(this).remove()})}(S,j,oe,B),function(H,G,re,q,te){var ne=x.ensureSingle(H,"g","contourlines"),le=!1!==te.showlines,ue=te.showlabels,de=le&&ue,he=ie.createLines(ne,le||ue,G),be=ie.createLineClip(ne,de,re,q.trace.uid),ge=H.selectAll("g.contourlabels").data(ue?[0]:[]);if(ge.exit().remove(),ge.enter().append("g").classed("contourlabels",!0),ue){var we=[],ke=[];x.clearLocationCache();var De=ie.labelFormatter(re,q),Ee=T.tester.append("text").attr("data-notex",1).call(T.font,te.labelfont),Re=G[0].xaxis,ve=G[0].yaxis,Te=Re._length,Ie=ve._length,Ce=Re.range,Pe=ve.range,Ve=x.aggNums(Math.min,null,q.x),qe=x.aggNums(Math.max,null,q.x),Je=x.aggNums(Math.min,null,q.y),lt=x.aggNums(Math.max,null,q.y),He=Math.max(Re.c2p(Ve,!0),0),$e=Math.min(Re.c2p(qe,!0),Te),et=Math.max(ve.c2p(lt,!0),0),tt=Math.min(ve.c2p(Je,!0),Ie),ft={};Ce[0]<Ce[1]?(ft.left=He,ft.right=$e):(ft.left=$e,ft.right=He),Pe[0]<Pe[1]?(ft.top=et,ft.bottom=tt):(ft.top=tt,ft.bottom=et),ft.middle=(ft.top+ft.bottom)/2,ft.center=(ft.left+ft.right)/2,we.push([[ft.left,ft.top],[ft.right,ft.top],[ft.right,ft.bottom],[ft.left,ft.bottom]]);var bt=Math.sqrt(Te*Te+Ie*Ie),Ct=f.LABELDISTANCE*bt/Math.max(1,G.length/f.LABELINCREASE);he.each(function(Vt){var Ft=ie.calcTextOpts(Vt.level,De,Ee,re);g.select(this).selectAll("path").each(function(){var ht=x.getVisibleSegment(this,ft,Ft.height/2);if(ht&&!(ht.len<(Ft.width+Ft.height)*f.LABELMIN))for(var ut=Math.min(Math.ceil(ht.len/Ct),f.LABELMAX),Rt=0;Rt<ut;Rt++){var nn=ie.findBestTextLocation(this,ht,Ft,ke,ft);if(!nn)break;ie.addLabelData(nn,Ft,ke,we)}})}),Ee.remove(),ie.drawLabels(ge,ke,re,be,de?we:null)}ue&&!le&&he.remove()}(S,V,w,F,B),function(H,G,re,q,te){var ne=q.trace,ue="clip"+ne.uid,de=re._fullLayout._clips.selectAll("#"+ue).data(ne.connectgaps?[]:[0]);if(de.enter().append("clipPath").classed("contourclip",!0).attr("id",ue),de.exit().remove(),!1===ne.connectgaps){var he={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:G.xaxis,yaxis:G.yaxis,x:q.x,y:q.y,z:l(q),smoothing:0};n([he]),d([he]),u([he],{type:"levels"}),x.ensureSingle(de,"path","").attr("d",(he.prefixBoundary?"M"+te.join("L")+"Z":"")+y(he,te))}else ue=null;T.setClipUrl(H,ue,re)}(S,v,w,F,oe)})},ie.createLines=function(w,v,A){var M=A[0].smoothing,k=w.selectAll("g.contourlevel").data(v?A:[]);if(k.exit().remove(),k.enter().append("g").classed("contourlevel",!0),v){var E=k.selectAll("path.openline").data(function(S){return S.pedgepaths||S.edgepaths});E.exit().remove(),E.enter().append("path").classed("openline",!0),E.attr("d",function(S){return T.smoothopen(S,M)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=k.selectAll("path.closedline").data(function(S){return S.ppaths||S.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(S){return T.smoothclosed(S,M)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return k},ie.createLineClip=function(w,v,A,M){var k=v?"clipline"+M:null,E=A._fullLayout._clips.selectAll("#"+k).data(v?[0]:[]);return E.exit().remove(),E.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),T.setClipUrl(w,k,A),E},ie.labelFormatter=function(w,v){var A=w._fullLayout,M=v.trace,k=M.contours,E={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(k.labelformat)E.tickformat=k.labelformat,t(E,A);else{var P=b.extractOpts(M);if(P&&P.colorbar&&P.colorbar._axis)E=P.colorbar._axis;else{if("constraint"===k.type){var S=k.value;E.range=Array.isArray(S)?[S[0],S[S.length-1]]:[S,S]}else E.range=[k.start,k.end],E.nticks=(k.end-k.start)/k.size;E.range[0]===E.range[1]&&(E.range[1]+=E.range[0]||1),E.nticks||(E.nticks=1e3),t(E,A),r.prepTicks(E),E._tmin=null,E._tmax=null}}return function(F){return r.tickText(E,F).text}},ie.calcTextOpts=function(w,v,A,M){var k=v(w);A.text(k).call(e.convertToTspans,M);var E=A.node(),P=T.bBox(E,!0);return{text:k,width:P.width,height:P.height,fontSize:+E.style["font-size"].replace("px",""),level:w,dy:(P.top+P.bottom)/2}},ie.findBestTextLocation=function(w,v,A,M,k){var E,P,S,F,R,D=A.width;v.isClosed?(E=v.min+(P=v.len/p.INITIALSEARCHPOINTS)/2,S=v.max):(E=v.min+(P=(v.len-D)/(p.INITIALSEARCHPOINTS+1))+D/2,S=v.max-(P+D)/2);for(var L=1/0,B=0;B<p.ITERATIONS;B++){for(var V=E;V<S;V+=P){var Z=x.getTextLocation(w,v.total,V,D),Y=m(Z,A,M,k);Y<L&&(L=Y,R=Z,F=V)}if(L>2*p.MAXCOST)break;B&&(P/=2),S=(E=F-P/2)+1.5*P}if(L<=p.MAXCOST)return R},ie.addLabelData=function(w,v,A,M){var k=v.fontSize,E=v.width+k/3,P=Math.max(0,v.height-k/3),S=w.x,F=w.y,R=w.theta,D=Math.sin(R),L=Math.cos(R),B=function(Z,Y){return[S+Z*L-Y*D,F+Z*D+Y*L]},V=[B(-E/2,-P/2),B(-E/2,P/2),B(E/2,P/2),B(E/2,-P/2)];A.push({text:v.text,x:S,y:F,dy:v.dy,theta:R,level:v.level,width:E,height:P}),M.push(V)},ie.drawLabels=function(w,v,A,M,k){var E=w.selectAll("text").data(v,function(F){return F.text+","+F.x+","+F.y+","+F.theta});if(E.exit().remove(),E.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(F){var R=F.x+Math.sin(F.theta)*F.dy,D=F.y-Math.cos(F.theta)*F.dy;g.select(this).text(F.text).attr({x:R,y:D,transform:"rotate("+180*F.theta/Math.PI+" "+R+" "+D+")"}).call(e.convertToTspans,A)}),k){for(var P="",S=0;S<k.length;S++)P+="M"+k[S].join("L")+"Z";x.ensureSingle(M,"path","").attr("d",P)}}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("../../lib");function T(b,e,r){var t={type:"linear",range:[b,e]};return g.autoTicks(t,(e-b)/(r||15)),t}ae.exports=function(b,e){var r=b.contours;if(b.autocontour){var t=b.zmin,a=b.zmax;(b.zauto||void 0===t)&&(t=x.aggNums(Math.min,null,e)),(b.zauto||void 0===a)&&(a=x.aggNums(Math.max,null,e));var n=T(t,a,b.ncontours);r.size=n.dtick,r.start=g.tickFirst(n),n.range.reverse(),r.end=g.tickFirst(n),r.start===t&&(r.start+=r.size),r.end===a&&(r.end-=r.size),r.start>r.end&&(r.start=r.end=(r.start+r.end)/2),b._input.contours||(b._input.contours={}),x.extendFlat(b._input.contours,{start:r.start,end:r.end,size:r.size}),b._input.autocontour=!0}else if("constraint"!==r.type){var d,s=r.start,i=r.end,u=b._input.contours;s>i&&(r.start=u.start=i,i=r.end=u.end=s,s=r.start),!(r.size>0)&&(d=s===i?1:T(s,i,b.ncontours).dtick,u.size=r.size=d)}}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../heatmap/style"),b=_("./make_color_map");ae.exports=function(e){var r=g.select(e).selectAll("g.contour");r.style("opacity",function(t){return t[0].trace.opacity}),r.each(function(t){var a=g.select(this),n=t[0].trace,d=n.contours,s=n.line,i=d.size||1,u=d.start,f="constraint"===d.type,p=!f&&"lines"===d.coloring,y=!f&&"fill"===d.coloring,m=p||y?b(n):null;a.selectAll("g.contourlevel").each(function(v){g.select(this).selectAll("path").call(x.lineGroupStyle,s.width,p?m(v.level):s.color,s.dash)});var l=d.labelfont;if(a.selectAll("g.contourlabels text").each(function(v){x.font(g.select(this),{family:l.family,size:l.size,color:l.color||(p?m(v.level):s.color)})}),f)a.selectAll("g.contourfill path").style("fill",n.fillcolor);else if(y){var w;a.selectAll("g.contourfill path").style("fill",function(v){return void 0===w&&(w=v.level),m(v.level+.5*i)}),void 0===w&&(w=u),a.selectAll("g.contourbg path").style("fill",m(w-.5*i))}}),T(e)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/defaults"),x=_("./label_defaults");ae.exports=function(T,b,e,r,t){var a,n=e("contours.coloring"),d="";"fill"===n&&(a=e("contours.showlines")),!1!==a&&("lines"!==n&&(d=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==n&&(!0!==T.showlegend&&(b.showlegend=!1),b._dfltShowLegend=!1,g(T,b,r,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),x(e,r,d,t)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(_,ae,ie){"use strict";var g=_("../heatmap/attributes"),x=_("../contour/attributes"),T=_("../../components/colorscale/attributes"),b=_("../../lib/extend").extendFlat,e=x.contours;ae.exports=b({carpet:{valType:"string",editType:"calc"},z:g.z,a:g.x,a0:g.x0,da:g.dx,b:g.y,b0:g.y0,db:g.dy,text:g.text,hovertext:g.hovertext,transpose:g.transpose,atype:g.xtype,btype:g.ytype,fillcolor:x.fillcolor,autocontour:x.autocontour,ncontours:x.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:x.line.color,width:x.line.width,dash:x.line.dash,smoothing:x.line.smoothing,editType:"plot"},transforms:void 0},T("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/calc"),x=_("../../lib"),T=_("../heatmap/convert_column_xyz"),b=_("../heatmap/clean_2d_array"),e=_("../heatmap/interp2d"),r=_("../heatmap/find_empties"),t=_("../heatmap/make_bound_array"),a=_("./defaults"),n=_("../carpet/lookup_carpetid"),d=_("../contour/set_contours");ae.exports=function(s,i){var u=i._carpetTrace=n(s,i);if(u&&u.visible&&"legendonly"!==u.visible){if(!i.a||!i.b){var f=s.data[u.index],p=s.data[i.index];p.a||(p.a=f.a),p.b||(p.b=f.b),a(p,i,i._defaultColor,s._fullLayout)}var y=function(m,l){var w,v,A,M,k,E,P,S=l._carpetTrace,F=S.aaxis,R=S.baxis;F._minDtick=0,R._minDtick=0,x.isArray1D(l.z)&&T(l,F,R,"a","b",["z"]),w=l._a=l._a||l.a,M=l._b=l._b||l.b,w=w?F.makeCalcdata(l,"_a"):[],M=M?R.makeCalcdata(l,"_b"):[],v=l.a0||0,A=l.da||1,k=l.b0||0,E=l.db||1,P=l._z=b(l._z||l.z,l.transpose),l._emptypoints=r(P),e(P,l._emptypoints);var D=x.maxRowLength(P),Y={a:t(l,"scaled"===l.xtype?"":w,v,A,D,F),b:t(l,"scaled"===l.ytype?"":M,k,E,P.length,R),z:P};return"levels"===l.contours.type&&"none"!==l.contours.coloring&&g(m,l,{vals:P,containerStr:"",cLetter:"z"}),[Y]}(s,i);return d(i,i._z),y}}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../heatmap/xyz_defaults"),T=_("./attributes"),b=_("../contour/constraint_defaults"),e=_("../contour/contours_defaults"),r=_("../contour/style_defaults");ae.exports=function(t,a,n,d){function s(i,u){return g.coerce(t,a,T,i,u)}if(s("carpet"),t.a&&t.b){if(!x(t,a,s,d,"a","b"))return void(a.visible=!1);s("text"),"constraint"===s("contours.type")?b(t,a,s,d,n,{hasHover:!1}):(e(t,a,s,function(i){return g.coerce2(t,a,T,i)}),r(t,a,s,d,{hasHover:!1}))}else a._defaultColor=n,a._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../contour/colorbar"),calc:_("./calc"),plot:_("./plot"),style:_("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../carpet/map_1d_array"),T=_("../carpet/makepath"),b=_("../../components/drawing"),e=_("../../lib"),r=_("../contour/make_crossings"),t=_("../contour/find_all_paths"),a=_("../contour/plot"),n=_("../contour/constants"),d=_("../contour/convert_to_constraints"),s=_("../contour/empty_pathinfo"),i=_("../contour/close_boundaries"),u=_("../carpet/lookup_carpetid"),f=_("../carpet/axis_aligned_line");function p(l,w,v){var A=l.getPointAtLength(w),M=l.getPointAtLength(v),k=M.x-A.x,E=M.y-A.y,P=Math.sqrt(k*k+E*E);return[k/P,E/P]}function y(l){var w=Math.sqrt(l[0]*l[0]+l[1]*l[1]);return[l[0]/w,l[1]/w]}function m(l,w){var v=Math.abs(l[0]*w[0]+l[1]*w[1]);return Math.sqrt(1-v*v)/v}ae.exports=function(l,w,v,A){var M=w.xaxis,k=w.yaxis;e.makeTraceGroups(A,v,"contour").each(function(E){var P=g.select(this),S=E[0],F=S.trace,R=F._carpetTrace=u(l,F),D=l.calcdata[R.index][0];if(R.visible&&"legendonly"!==R.visible){var L=S.a,B=S.b,V=F.contours,Z=s(V,w,S),Y="constraint"===V.type,ee=V._operation,Q=Y?"="===ee?"lines":"fill":V.coloring,$=[[L[0],B[B.length-1]],[L[L.length-1],B[B.length-1]],[L[L.length-1],B[0]],[L[0],B[0]]];r(Z),t(Z,1e-8*(L[L.length-1]-L[0]),1e-8*(B[B.length-1]-B[0]));var j,H,G,re,q=Z;"constraint"===V.type&&(q=d(Z,ee)),function(ue,de){var he,be,ge,we,ke,De,Ee,Re,ve;for(he=0;he<ue.length;he++){for(ke=(we=ue[he]).pedgepaths=[],De=we.ppaths=[],be=0;be<we.edgepaths.length;be++){for(ve=we.edgepaths[be],Ee=[],ge=0;ge<ve.length;ge++)Ee[ge]=de(ve[ge]);ke.push(Ee)}for(be=0;be<we.paths.length;be++){for(ve=we.paths[be],Re=[],ge=0;ge<ve.length;ge++)Re[ge]=de(ve[ge]);De.push(Re)}}}(Z,le);var te=[];for(re=D.clipsegments.length-1;re>=0;re--)H=x([],(j=D.clipsegments[re]).x,M.c2p),G=x([],j.y,k.c2p),H.reverse(),G.reverse(),te.push(T(H,G,j.bicubic));var ne="M"+te.join("L")+"Z";(function(ue,de,he,be,ge,we){var ke,De,Ee,Re,ve=e.ensureSingle(ue,"g","contourbg").selectAll("path").data("fill"!==we||ge?[]:[0]);ve.enter().append("path"),ve.exit().remove();var Te=[];for(Re=0;Re<de.length;Re++)De=x([],(ke=de[Re]).x,he.c2p),Ee=x([],ke.y,be.c2p),Te.push(T(De,Ee,ke.bicubic));ve.attr("d","M"+Te.join("L")+"Z").style("stroke","none")})(P,D.clipsegments,M,k,Y,Q),function(ue,de,he,be,ge,we,ke,De,Ee,Re,ve){var Te="fill"===Re;Te&&i(ge,ue.contours);var Ie=e.ensureSingle(de,"g","contourfill").selectAll("path").data(Te?ge:[]);Ie.enter().append("path"),Ie.exit().remove(),Ie.each(function(Ce){var Pe=(Ce.prefixBoundary?ve:"")+function(Ve,qe,Je,lt,He,$e,et,tt){var ft,bt,Ct,Vt,Ft,ht,ut,Rt="",nn=qe.edgepaths.map(function(mt,Tt){return Tt}),cn=!0,Ze=1e-4*Math.abs(Je[0][0]-Je[2][0]),Qe=1e-4*Math.abs(Je[0][1]-Je[2][1]);function Ge(mt){return Math.abs(mt[1]-Je[0][1])<Qe}function rt(mt){return Math.abs(mt[1]-Je[2][1])<Qe}function Le(mt){return Math.abs(mt[0]-Je[0][0])<Ze}function ze(mt){return Math.abs(mt[0]-Je[2][0])<Ze}function je(mt,Tt){var xt,zt,gt,Bt,jt="";for(Ge(mt)&&!ze(mt)||rt(mt)&&!Le(mt)?(Bt=He.aaxis,gt=f(He,$e,[mt[0],Tt[0]],.5*(mt[1]+Tt[1]))):(Bt=He.baxis,gt=f(He,$e,.5*(mt[0]+Tt[0]),[mt[1],Tt[1]])),xt=1;xt<gt.length;xt++)for(jt+=Bt.smoothing?"C":"L",zt=0;zt<gt[xt].length;zt++){var it=gt[xt][zt];jt+=[et.c2p(it[0]),tt.c2p(it[1])]+" "}return jt}for(ft=0,bt=null;nn.length;){for(bt&&(Rt+=je(bt,qe.edgepaths[ft][0])),ut=b.smoothopen(qe.edgepaths[ft].map(lt),qe.smoothing),Rt+=cn?ut:ut.replace(/^M/,"L"),nn.splice(nn.indexOf(ft),1),bt=qe.edgepaths[ft][qe.edgepaths[ft].length-1],Ft=-1,Vt=0;Vt<4;Vt++){if(!bt){e.log("Missing end?",ft,qe);break}for(Ge(bt)&&!ze(bt)?Ct=Je[1]:Le(bt)?Ct=Je[0]:rt(bt)?Ct=Je[3]:ze(bt)&&(Ct=Je[2]),ht=0;ht<qe.edgepaths.length;ht++){var st=qe.edgepaths[ht][0];Math.abs(bt[0]-Ct[0])<Ze?Math.abs(bt[0]-st[0])<Ze&&(st[1]-bt[1])*(Ct[1]-st[1])>=0&&(Ct=st,Ft=ht):Math.abs(bt[1]-Ct[1])<Qe?Math.abs(bt[1]-st[1])<Qe&&(st[0]-bt[0])*(Ct[0]-st[0])>=0&&(Ct=st,Ft=ht):e.log("endpt to newendpt is not vert. or horz.",bt,Ct,st)}if(Ft>=0)break;Rt+=je(bt,Ct),bt=Ct}if(Ft===qe.edgepaths.length){e.log("unclosed perimeter path");break}(cn=-1===nn.indexOf(ft=Ft))&&(ft=nn[0],Rt+=je(bt,Ct)+"Z",bt=null)}for(ft=0;ft<qe.paths.length;ft++)Rt+=b.smoothclosed(qe.paths[ft].map(lt),qe.smoothing);return Rt}(0,Ce,we,ke,De,Ee,he,be);Pe?g.select(this).attr("d",Pe).style("stroke","none"):g.select(this).remove()})}(F,P,M,k,q,$,le,R,D,Q,ne),function(ue,de,he,be,ge,we,ke){var De=e.ensureSingle(ue,"g","contourlines"),Ee=!1!==ge.showlines,Re=ge.showlabels,ve=Ee&&Re,Te=a.createLines(De,Ee||Re,de),Ie=a.createLineClip(De,ve,he,be.trace.uid),Ce=ue.selectAll("g.contourlabels").data(Re?[0]:[]);if(Ce.exit().remove(),Ce.enter().append("g").classed("contourlabels",!0),Re){var qe=we.xaxis._length,Je=we.yaxis._length,lt=[[[0,0],[qe,0],[qe,Je],[0,Je]]],He=[];e.clearLocationCache();var $e=a.labelFormatter(he,be),et=b.tester.append("text").attr("data-notex",1).call(b.font,ge.labelfont),tt={left:0,right:qe,center:qe/2,top:0,bottom:Je,middle:Je/2},ft=Math.sqrt(qe*qe+Je*Je),bt=n.LABELDISTANCE*ft/Math.max(1,de.length/n.LABELINCREASE);Te.each(function(Ct){var Vt=a.calcTextOpts(Ct.level,$e,et,he);g.select(this).selectAll("path").each(function(Ft){var ht=e.getVisibleSegment(this,tt,Vt.height/2);if(ht&&(function(cn,Ze,Qe,Ge,rt,Le){for(var ze,je=0;je<Qe.pedgepaths.length;je++)Ze===Qe.pedgepaths[je]&&(ze=Qe.edgepaths[je]);if(ze){var Ne=rt.a[0],st=rt.a[rt.a.length-1],mt=rt.b[0],Tt=rt.b[rt.b.length-1],zt=p(cn,0,1),gt=p(cn,Ge.total,Ge.total-1),Bt=xt(ze[0],zt),jt=Ge.total-xt(ze[ze.length-1],gt);Ge.min<Bt&&(Ge.min=Bt),Ge.max>jt&&(Ge.max=jt),Ge.len=Ge.max-Ge.min}function xt(it,Mt){var qt,Wt=0;return(Math.abs(it[0]-Ne)<.1||Math.abs(it[0]-st)<.1)&&(qt=y(rt.dxydb_rough(it[0],it[1],.1)),Wt=Math.max(Wt,Le*m(Mt,qt)/2)),(Math.abs(it[1]-mt)<.1||Math.abs(it[1]-Tt)<.1)&&(qt=y(rt.dxyda_rough(it[0],it[1],.1)),Wt=Math.max(Wt,Le*m(Mt,qt)/2)),Wt}}(this,Ft,Ct,ht,ke,Vt.height),!(ht.len<(Vt.width+Vt.height)*n.LABELMIN)))for(var ut=Math.min(Math.ceil(ht.len/bt),n.LABELMAX),Rt=0;Rt<ut;Rt++){var nn=a.findBestTextLocation(this,ht,Vt,He,tt);if(!nn)break;a.addLabelData(nn,Vt,He,lt)}})}),et.remove(),a.drawLabels(Ce,He,he,Ie,ve?lt:null)}Re&&!Ee&&Te.remove()}(P,Z,l,S,V,w,R),b.setClipUrl(P,R._clipPathId,l)}function le(ue){var de=R.ab2xy(ue[0],ue[1],!0);return[M.c2p(de[0]),k.c2p(de[1])]}})}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/attributes"),x=_("../../plots/template_attributes").hovertemplateAttrs,T=_("../../plots/attributes"),b=_("../scattermapbox/attributes"),e=_("../../lib/extend").extendFlat;ae.exports=e({lon:b.lon,lat:b.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:b.text,hovertext:b.hovertext,hoverinfo:e({},T.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:x(),showlegend:e({},T.showlegend,{dflt:!1})},g("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":991}],763:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib").isArrayOrTypedArray,T=_("../../constants/numerical").BADNUM,b=_("../../components/colorscale/calc"),e=_("../../lib")._;ae.exports=function(r,t){for(var a=t._length,n=new Array(a),d=t.z,s=x(d)&&d.length,i=0;i<a;i++){var u=n[i]={},f=t.lon[i],p=t.lat[i];if(u.lonlat=g(f)&&g(p)?[+f,+p]:[T,T],s){var y=d[i];u.z=g(y)?y:T}}return b(r,t,{vals:s?d:[0,1],containerStr:"",cLetter:"z"}),a&&(n[0].t={labels:{lat:e(r,"lat:")+" ",lon:e(r,"lon:")+" "}}),n}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("../../components/color"),b=_("../../components/colorscale"),e=_("../../constants/numerical").BADNUM,r=_("../../lib/geojson_utils").makeBlank;ae.exports=function(t){var a=t[0].trace,n=!0===a.visible&&0!==a._length,d=a._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:r()};if(!n)return d;var s,i=[],u=a.z,f=a.radius,p=x.isArrayOrTypedArray(u)&&u.length,y=x.isArrayOrTypedArray(f);for(s=0;s<t.length;s++){var m=t[s],l=m.lonlat;if(l[0]!==e){var w={};if(p){var v=m.z;w.z=v!==e?v:0}y&&(w.r=g(f[s])&&f[s]>0?+f[s]:0),i.push({type:"Feature",geometry:{type:"Point",coordinates:l},properties:w})}}var A=b.extractOpts(a),M=A.reversescale?b.flipScale(A.colorscale):A.colorscale,k=M[0][1],E=["interpolate",["linear"],["heatmap-density"],0,T.opacity(k)<1?k:T.addOpacity(k,0)];for(s=1;s<M.length;s++)E.push(M[s][0],M[s][1]);return x.extendFlat(d.heatmap.paint,{"heatmap-weight":p?["interpolate",["linear"],["get","z"],A.min,0,A.max,1]:1/(A.max-A.min),"heatmap-color":E,"heatmap-radius":y?{type:"identity",property:"r"}:a.radius,"heatmap-opacity":a.opacity}),d.geojson={type:"FeatureCollection",features:i},d.heatmap.layout.visibility="visible",d}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");ae.exports=function(b,e,r,t){function a(i,u){return g.coerce(b,e,T,i,u)}var n=a("lon")||[],d=a("lat")||[],s=Math.min(n.length,d.length);s?(e._length=s,a("z"),a("radius"),a("below"),a("text"),a("hovertext"),a("hovertemplate"),x(b,e,t,a,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(_,ae,ie){"use strict";ae.exports=function(g,x){return g.lon=x.lon,g.lat=x.lat,g.z=x.z,g}},{}],767:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("../scattermapbox/hover").hoverPoints,T=_("../scattermapbox/hover").getExtraText;ae.exports=function(b,e,r){var t=x(b,e,r);if(t){var a=t[0],n=a.cd,d=n[0].trace,s=n[a.index];if(delete a.color,"z"in s){var i=a.subplot.mockAxis;a.z=s.z,a.zLabel=g.tickText(i,i.c2l(s.z),"hover").text}return a.extraText=T(d,s,n[0].t.labels),[a]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":996}],768:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),formatLabels:_("../scattermapbox/format_labels"),calc:_("./calc"),plot:_("./plot"),hoverPoints:_("./hover"),eventData:_("./event_data"),getBelow:function(g,x){for(var T=x.getMapLayers(),b=0;b<T.length;b++){var e=T[b],r=e.id;if("symbol"===e.type&&"string"==typeof r&&-1===r.indexOf("plotly-"))return r}},moduleType:"trace",name:"densitymapbox",basePlotModule:_("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":995,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(_,ae,ie){"use strict";var g=_("./convert"),x=_("../../plots/mapbox/constants").traceLayerPrefix;function T(e,r){this.type="densitymapbox",this.subplot=e,this.uid=r,this.sourceId="source-"+r,this.layerList=[["heatmap",x+r+"-heatmap"]],this.below=null}var b=T.prototype;b.update=function(e){var r=this.subplot,t=this.layerList,a=g(e),n=r.belowLookup["trace-"+this.uid];r.map.getSource(this.sourceId).setData(a.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(a,n),this.below=n);for(var d=0;d<t.length;d++){var s=t[d],u=s[1],f=a[s[0]];r.setOptions(u,"setLayoutProperty",f.layout),"visible"===f.layout.visibility&&r.setOptions(u,"setPaintProperty",f.paint)}},b._addLayers=function(e,r){for(var t=this.subplot,a=this.layerList,n=this.sourceId,d=0;d<a.length;d++){var s=a[d],i=s[0],u=e[i];t.addLayer({type:i,id:s[1],source:n,layout:u.layout,paint:u.paint},r)}},b._removeLayers=function(){for(var e=this.subplot.map,r=this.layerList,t=r.length-1;t>=0;t--)e.removeLayer(r[t][1])},b.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},ae.exports=function(e,r){var t=r[0].trace,a=new T(e,t.uid),n=a.sourceId,d=g(r),s=a.below=e.belowLookup["trace-"+t.uid];return e.map.addSource(n,{type:"geojson",data:d.geojson}),a._addLayers(d,s),a}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x,T){for(var b=0;b<x.length;b++)x[b].i=b;g.mergeArray(T.text,x,"tx"),g.mergeArray(T.hovertext,x,"htx");var e=T.marker;if(e){g.mergeArray(e.opacity,x,"mo"),g.mergeArray(e.color,x,"mc");var r=e.line;r&&(g.mergeArray(r.color,x,"mlc"),g.mergeArrayCastPositive(r.width,x,"mlw"))}}},{"../../lib":503}],771:[function(_,ae,ie){"use strict";var g,x=_("../bar/attributes"),T=_("../scatter/attributes").line,b=_("../../plots/attributes"),e=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=_("../../plots/template_attributes").hovertemplateAttrs,t=_("../../plots/template_attributes").texttemplateAttrs,a=_("./constants"),n=_("../../lib/extend").extendFlat,d=_("../../components/color");ae.exports={x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:x.hovertext,hovertemplate:r({},{keys:a.eventDataKeys}),hoverinfo:n({},b.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:x.text,textposition:x.textposition,insidetextanchor:n({},x.insidetextanchor,{dflt:"middle"}),textangle:n({},x.textangle,{dflt:0}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:x.outsidetextfont,constraintext:x.constraintext,cliponaxis:x.cliponaxis,orientation:n({},x.orientation,{}),offset:n({},x.offset,{arrayOk:!1}),width:n({},x.width,{arrayOk:!1}),marker:(g=n({},x.marker),delete g.pattern,g),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},T.color,{dflt:d.defaultLine}),width:n({},T.width,{dflt:0,editType:"plot"}),dash:T.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":773}],772:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("../../plots/cartesian/align_period"),T=_("./arrays_to_calcdata"),b=_("../scatter/calc_selection"),e=_("../../constants/numerical").BADNUM;function r(t){return t===e?0:t}ae.exports=function(t,a){var n,d,s,i,u,f,p,y,m=g.getFromId(t,a.xaxis||"x"),l=g.getFromId(t,a.yaxis||"y");"h"===a.orientation?(n=m.makeCalcdata(a,"x"),s=l.makeCalcdata(a,"y"),i=x(a,l,"y",s),u=!!a.yperiodalignment,f="y"):(n=l.makeCalcdata(a,"y"),s=m.makeCalcdata(a,"x"),i=x(a,m,"x",s),u=!!a.xperiodalignment,f="x"),d=i.vals;var w,v=Math.min(d.length,n.length),A=new Array(v);for(a._base=[],p=0;p<v;p++){n[p]<0&&(n[p]=e);var M=!1;n[p]!==e&&p+1<v&&n[p+1]!==e&&(M=!0),y=A[p]={p:d[p],s:n[p],cNext:M},a._base[p]=-.5*y.s,u&&(A[p].orig_p=s[p],A[p][f+"End"]=i.ends[p],A[p][f+"Start"]=i.starts[p]),a.ids&&(y.id=String(a.ids[p])),0===p&&(A[0].vTotal=0),A[0].vTotal+=r(y.s),y.begR=r(y.s)/r(A[0].s)}for(p=0;p<v;p++)(y=A[p]).s!==e&&(y.sumR=y.s/A[0].vTotal,y.difR=void 0!==w?y.s/w:1,w=y.s);return T(A,a),b(A,a),A}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":770}],773:[function(_,ae,ie){"use strict";ae.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(_,ae,ie){"use strict";var g=_("../bar/cross_trace_calc").setGroupPositions;ae.exports=function(x,T){var b,e,r=x._fullLayout,t=x._fullData,a=x.calcdata,n=T.xaxis,d=T.yaxis,s=[],i=[],u=[];for(e=0;e<t.length;e++){var f=t[e];!0===f.visible&&f.xaxis===n._id&&f.yaxis===d._id&&"funnel"===f.type&&(b=a[e],"h"===f.orientation?u.push(b):i.push(b),s.push(b))}var y={mode:r.funnelmode,norm:r.funnelnorm,gap:r.funnelgap,groupgap:r.funnelgroupgap};for(g(x,n,d,i,y),g(x,d,n,u,y),e=0;e<s.length;e++){b=s[e];for(var m=0;m<b.length;m++)m+1<b.length&&(b[m].nextP0=b[m+1].p0,b[m].nextS0=b[m+1].s0,b[m].nextP1=b[m+1].p1,b[m].nextS1=b[m+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../bar/defaults").handleGroupingDefaults,T=_("../bar/defaults").handleText,b=_("../scatter/xy_defaults"),e=_("../scatter/period_defaults"),r=_("./attributes"),t=_("../../components/color");ae.exports={supplyDefaults:function(a,n,d,s){function i(y,m){return g.coerce(a,n,r,y,m)}if(b(a,n,s,i)){e(a,n,s,i),i("xhoverformat"),i("yhoverformat"),i("orientation",n.y&&!n.x?"v":"h"),i("offset"),i("width");var u=i("text");i("hovertext"),i("hovertemplate");var f=i("textposition");T(a,n,s,i,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===n.textposition||n.texttemplate||i("textinfo",Array.isArray(u)?"text+value":"value");var p=i("marker.color",d);i("marker.line.color",t.defaultLine),i("marker.line.width"),i("connector.visible")&&(i("connector.fillcolor",(m=g.isArrayOrTypedArray(y=p)?"#000":y,t.addOpacity(m,.5*t.opacity(m)))),i("connector.line.width")&&(i("connector.line.color"),i("connector.line.dash")))}else n.visible=!1;var y,m},crossTraceDefaults:function(a,n){var d,s;function i(f){return g.coerce(s._input,s,r,f)}if("group"===n.funnelmode)for(var u=0;u<a.length;u++)d=(s=a[u])._input,x(d,s,n,i)}}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":771}],776:[function(_,ae,ie){"use strict";ae.exports=function(g,x){return g.x="xVal"in x?x.xVal:x.x,g.y="yVal"in x?x.yVal:x.y,"percentInitial"in x&&(g.percentInitial=x.percentInitial),"percentPrevious"in x&&(g.percentPrevious=x.percentPrevious),"percentTotal"in x&&(g.percentTotal=x.percentTotal),x.xa&&(g.xaxis=x.xa),x.ya&&(g.yaxis=x.ya),g}},{}],777:[function(_,ae,ie){"use strict";var g=_("../../components/color").opacity,x=_("../bar/hover").hoverOnBars,T=_("../../lib").formatPercent;ae.exports=function(b,e,r,t,a){var v,A,M,k,E,n=x(b,e,r,t,a);if(n){var d=n.cd,s=d[0].trace,u=d[n.index];n[("h"===s.orientation?"x":"y")+"LabelVal"]=u.s,n.percentInitial=u.begR,n.percentInitialLabel=T(u.begR,1),n.percentPrevious=u.difR,n.percentPreviousLabel=T(u.difR,1),n.percentTotal=u.sumR,n.percentTotalLabel=T(u.sumR,1);var f=u.hi||s.hoverinfo,p=[];if(f&&"none"!==f&&"skip"!==f){var y="all"===f,m=f.split("+"),l=function(w){return y||-1!==m.indexOf(w)};l("percent initial")&&p.push(n.percentInitialLabel+" of initial"),l("percent previous")&&p.push(n.percentPreviousLabel+" of previous"),l("percent total")&&p.push(n.percentTotalLabel+" of total")}return n.extraText=p.join("<br>"),n.color=(A=s.marker,k=(v=u).mlc||A.line.color,E=v.mlw||A.line.width,g(M=v.mc||A.color)?M:g(k)&&E?k:void 0),[n]}}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc"),plot:_("./plot"),style:_("./style").style,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(_,ae,ie){"use strict";ae.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes");ae.exports=function(T,b,e){var r=!1;function t(d,s){return g.coerce(T,b,x,d,s)}for(var a=0;a<e.length;a++){var n=e[a];if(n.visible&&"funnel"===n.type){r=!0;break}}r&&(t("funnelmode"),t("funnelgap",.2),t("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../constants/numerical").BADNUM,e=_("../bar/plot"),r=_("../bar/uniform_text").clearMinTextSize;function t(a,n,d,s){var i=[],u=[],f=s?n:d,p=s?d:n;return i[0]=f.c2p(a.s0,!0),u[0]=p.c2p(a.p0,!0),i[1]=f.c2p(a.s1,!0),u[1]=p.c2p(a.p1,!0),i[2]=f.c2p(a.nextS0,!0),u[2]=p.c2p(a.nextP0,!0),i[3]=f.c2p(a.nextS1,!0),u[3]=p.c2p(a.nextP1,!0),s?[i,u]:[u,i]}ae.exports=function(a,n,d,s){var u,f,m,l,i=a._fullLayout;r("funnel",i),u=a,m=(f=n).xaxis,l=f.yaxis,x.makeTraceGroups(s,d,"trace bars").each(function(w){var v=g.select(this),A=w[0].trace,M=x.ensureSingle(v,"g","regions");if(A.connector&&A.connector.visible){var k="h"===A.orientation,E=M.selectAll("g.region").data(x.identity);E.enter().append("g").classed("region",!0),E.exit().remove();var P=E.size();E.each(function(S,F){if(F===P-1||S.cNext){var R=t(S,m,l,k),D=R[0],L=R[1],B="";D[0]!==b&&L[0]!==b&&D[1]!==b&&L[1]!==b&&D[2]!==b&&L[2]!==b&&D[3]!==b&&L[3]!==b&&(B+=k?"M"+D[0]+","+L[1]+"L"+D[2]+","+L[2]+"H"+D[3]+"L"+D[1]+","+L[1]+"Z":"M"+D[1]+","+L[1]+"L"+D[2]+","+L[3]+"V"+L[2]+"L"+D[1]+","+L[0]+"Z"),""===B&&(B="M0,0Z"),x.ensureSingle(g.select(this),"path").attr("d",B).call(T.setClipUrl,f.layerClipId,u)}})}else M.remove()}),function(u,f,p,y){var m=f.xaxis,l=f.yaxis;x.makeTraceGroups(y,p,"trace bars").each(function(w){var v=g.select(this),A=w[0].trace,M=x.ensureSingle(v,"g","lines");if(A.connector&&A.connector.visible&&A.connector.line.width){var k="h"===A.orientation,E=M.selectAll("g.line").data(x.identity);E.enter().append("g").classed("line",!0),E.exit().remove();var P=E.size();E.each(function(S,F){if(F===P-1||S.cNext){var R=t(S,m,l,k),D=R[0],L=R[1],B="";void 0!==D[3]&&void 0!==L[3]&&(k?(B+="M"+D[0]+","+L[1]+"L"+D[2]+","+L[2],B+="M"+D[1]+","+L[1]+"L"+D[3]+","+L[2]):(B+="M"+D[1]+","+L[1]+"L"+D[2]+","+L[3],B+="M"+D[1]+","+L[0]+"L"+D[2]+","+L[2])),""===B&&(B="M0,0Z"),x.ensureSingle(g.select(this),"path").attr("d",B).call(T.setClipUrl,f.layerClipId,u)}})}else M.remove()})}(a,n,d,s),e.plot(a,n,d,s,{mode:i.funnelmode,norm:i.funnelmode,gap:i.funnelgap,groupgap:i.funnelgroupgap})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color"),b=_("../../constants/interactions").DESELECTDIM,e=_("../bar/style"),r=_("../bar/uniform_text").resizeText,t=e.styleTextPoints;ae.exports={style:function(a,n,d){var s=d||g.select(a).selectAll("g.funnellayer").selectAll("g.trace");r(a,s,"funnel"),s.style("opacity",function(i){return i[0].trace.opacity}),s.each(function(i){var u=g.select(this),f=i[0].trace;u.selectAll(".point > path").each(function(p){if(!p.isBlank){var y=f.marker;g.select(this).call(T.fill,p.mc||y.color).call(T.stroke,p.mlc||y.line.color).call(x.dashLine,y.line.dash,p.mlw||y.line.width).style("opacity",f.selectedpoints&&!p.selected?b:1)}}),t(u,f,a),u.selectAll(".regions").each(function(){g.select(this).selectAll("path").style("stroke-width",0).call(T.fill,f.connector.fillcolor)}),u.selectAll(".lines").each(function(){var p=f.connector.line;x.lineGroupStyle(g.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(_,ae,ie){"use strict";var g=_("../pie/attributes"),x=_("../../plots/attributes"),T=_("../../plots/domain").attributes,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../../plots/template_attributes").texttemplateAttrs,r=_("../../lib/extend").extendFlat;ae.exports={labels:g.labels,label0:g.label0,dlabel:g.dlabel,values:g.values,marker:{colors:g.marker.colors,line:{color:r({},g.marker.line.color,{dflt:null}),width:r({},g.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:g.text,hovertext:g.hovertext,scalegroup:r({},g.scalegroup,{}),textinfo:r({},g.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:r({},x.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","text","percent"]}),textposition:r({},g.textposition,{values:["inside","none"],dflt:"inside"}),textfont:g.textfont,insidetextfont:g.insidetextfont,title:{text:g.title.text,font:g.title.font,position:r({},g.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:T({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900}],784:[function(_,ae,ie){"use strict";var g=_("../../plots/plots");ie.name="funnelarea",ie.plot=function(x,T,b,e){g.plotBasePlot(ie.name,x,T,b,e)},ie.clean=function(x,T,b,e){g.cleanBasePlot(ie.name,x,T,b,e)}},{"../../plots/plots":619}],785:[function(_,ae,ie){"use strict";var g=_("../pie/calc");ae.exports={calc:function(x,T){return g.calc(x,T)},crossTraceCalc:function(x){g.crossTraceCalc(x,{type:"funnelarea"})}}},{"../pie/calc":902}],786:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults,b=_("../bar/defaults").handleText,e=_("../pie/defaults").handleLabelsAndValues;ae.exports=function(r,t,a,n){function d(w,v){return g.coerce(r,t,x,w,v)}var s=d("labels"),i=d("values"),u=e(s,i),f=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(d("label0"),d("dlabel")),f){t._length=f,d("marker.line.width")&&d("marker.line.color",n.paper_bgcolor),d("marker.colors"),d("scalegroup");var p,y=d("text"),m=d("texttemplate");if(m||(p=d("textinfo",Array.isArray(y)?"text+percent":"percent")),d("hovertext"),d("hovertemplate"),m||p&&"none"!==p){var l=d("textposition");b(r,t,n,d,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}T(t,n,d),d("title.text")&&(d("title.position"),g.coerceFont(d,"title.font",n.font)),d("aspectratio"),d("baseratio")}else t.visible=!1}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":903,"./attributes":783}],787:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"funnelarea",basePlotModule:_("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),style:_("./style"),styleOne:_("../pie/style_one"),meta:{}}},{"../pie/style_one":911,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(_,ae,ie){"use strict";var g=_("../pie/layout_attributes").hiddenlabels;ae.exports={hiddenlabels:g,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":907}],789:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes");ae.exports=function(T,b){function e(r,t){return g.coerce(T,b,x,r,t)}e("hiddenlabels"),e("funnelareacolorway",b.colorway),e("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../lib"),b=T.strScale,e=T.strTranslate,r=_("../../lib/svg_text_utils"),t=_("../bar/plot").toMoveInsideBar,a=_("../bar/uniform_text"),n=a.recordMinTextSize,d=a.clearMinTextSize,s=_("../pie/helpers"),i=_("../pie/plot"),u=i.attachFxHandlers,f=i.determineInsideTextFont,p=i.layoutAreas,y=i.prerenderTitles,m=i.positionTitleOutside,l=i.formatSliceLabel;function w(v,A){return"l"+(A[0]-v[0])+","+(A[1]-v[1])}ae.exports=function(v,A){var M=v._fullLayout;d("funnelarea",M),y(A,v),p(A,M._size),T.makeTraceGroups(M._funnelarealayer,A,"trace").each(function(k){var E=g.select(this),P=k[0],S=P.trace;(function(F){if(F.length){var R=F[0],D=R.trace,L=D.aspectratio,B=D.baseratio;B>.999&&(B=.999);var V,K,oe,Z=Math.pow(B,2),Y=R.vTotal,ee=Y,Q=Y*Z/(1-Z)/Y,j=[];for(j.push($()),K=F.length-1;K>-1;K--)(oe=F[K]).hidden||(Q+=oe.v/ee,j.push($()));var G=1/0,re=-1/0;for(K=0;K<j.length;K++)V=j[K],G=Math.min(G,V[1]),re=Math.max(re,V[1]);for(K=0;K<j.length;K++)j[K][1]-=(re+G)/2;var te=R.r,ne=(re-G)/2,le=te/j[j.length-1][0],ue=te/ne*L;for(R.r=ue*ne,K=0;K<j.length;K++)j[K][0]*=le,j[K][1]*=ue;var ke,De,de=[-(V=j[0])[0],V[1]],he=[V[0],V[1]],be=0;for(K=F.length-1;K>-1;K--)if(!(oe=F[K]).hidden){var ge=j[be+=1][0],we=j[be][1];oe.TL=[-ge,we],oe.TR=[ge,we],oe.BL=de,oe.BR=he,oe.pxmid=[.5*((ke=oe.TR)[0]+(De=oe.BR)[0]),.5*(ke[1]+De[1])],de=oe.TL,he=oe.TR}}function $(){var Ee,Re={x:Ee=Math.sqrt(Q),y:-Ee};return[Re.x,Re.y]}})(k),E.each(function(){var F=g.select(this).selectAll("g.slice").data(k);F.enter().append("g").classed("slice",!0),F.exit().remove(),F.each(function(D,L){if(D.hidden)g.select(this).selectAll("path,g").remove();else{D.pointNumber=D.i,D.curveNumber=S.index;var B=P.cx,V=P.cy,Z=g.select(this),Y=Z.selectAll("path.surface").data([D]);Y.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Z.call(u,v,k);var ee="M"+(B+D.TR[0])+","+(V+D.TR[1])+w(D.TR,D.BR)+w(D.BR,D.BL)+w(D.BL,D.TL)+"Z";Y.attr("d",ee),l(v,D,P);var Q=s.castOption(S.textposition,D.pts),$=Z.selectAll("g.slicetext").data(D.text&&"none"!==Q?[0]:[]);$.enter().append("g").classed("slicetext",!0),$.exit().remove(),$.each(function(){var K=T.ensureSingle(g.select(this),"text","",function(ne){ne.attr("data-notex",1)}),oe=T.ensureUniformFontSize(v,f(S,D,M.font));K.text(D.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(x.font,oe).call(r.convertToTspans,v);var j,H,G,re=x.bBox(K.node()),q=Math.min(D.BL[1],D.BR[1])+V,te=Math.max(D.TL[1],D.TR[1])+V;H=Math.max(D.TL[0],D.BL[0])+B,G=Math.min(D.TR[0],D.BR[0])+B,(j=t(H,G,q,te,re,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=oe.size,n(S.type,j,M),k[L].transform=j,K.attr("transform",T.getTextTransform(j))})}});var R=g.select(this).selectAll("g.titletext").data(S.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var D=T.ensureSingle(g.select(this),"text","",function(V){V.attr("data-notex",1)}),L=S.title.text;S._meta&&(L=T.templateString(L,S._meta)),D.text(L).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(x.font,S.title.font).call(r.convertToTspans,v);var B=m(P,M._size);D.attr("transform",e(B.x,B.y)+b(Math.min(1,B.scale))+e(B.tx,B.ty))})})})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"@plotly/d3":58}],791:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../pie/style_one"),T=_("../bar/uniform_text").resizeText;ae.exports=function(b){var e=b._fullLayout._funnelarealayer.selectAll(".trace");T(b,e,"funnelarea"),e.each(function(r){var t=r[0].trace,a=g.select(this);a.style({opacity:t.opacity}),a.selectAll("path.surface").each(function(n){g.select(this).call(x,n,t)})})}},{"../bar/uniform_text":664,"../pie/style_one":911,"@plotly/d3":58}],792:[function(_,ae,ie){"use strict";var g=_("../scatter/attributes"),x=_("../../plots/attributes"),T=_("../../plots/font_attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../plots/template_attributes").hovertemplateAttrs,r=_("../../plots/template_attributes").texttemplateAttrs,t=_("../../components/colorscale/attributes"),a=_("../../lib/extend").extendFlat;ae.exports=a({z:{valType:"data_array",editType:"calc"},x:a({},g.x,{impliedEdits:{xtype:"array"}}),x0:a({},g.x0,{impliedEdits:{xtype:"scaled"}}),dx:a({},g.dx,{impliedEdits:{xtype:"scaled"}}),y:a({},g.y,{impliedEdits:{ytype:"array"}}),y0:a({},g.y0,{impliedEdits:{ytype:"scaled"}}),dy:a({},g.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:a({},g.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:a({},g.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:a({},g.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:a({},g.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:a({},g.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:a({},g.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:e(),texttemplate:r({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:T({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:a({},x.showlegend,{dflt:!1})},{transforms:void 0},t("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926}],793:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/align_period"),e=_("../histogram2d/calc"),r=_("../../components/colorscale/calc"),t=_("./convert_column_xyz"),a=_("./clean_2d_array"),n=_("./interp2d"),d=_("./find_empties"),s=_("./make_bound_array"),i=_("../../constants/numerical").BADNUM;function u(f){for(var p=[],y=f.length,m=0;m<y;m++){var l=f[m];l!==i&&p.push(l)}return p}ae.exports=function(f,p){var y,m,l,w,v,A,M,k,E,P,S,F=T.getFromId(f,p.xaxis||"x"),R=T.getFromId(f,p.yaxis||"y"),D=g.traceIs(p,"contour"),L=g.traceIs(p,"histogram"),B=g.traceIs(p,"gl2d"),V=D?"best":p.zsmooth;if(F._minDtick=0,R._minDtick=0,L)w=(S=e(f,p)).orig_x,y=S.x,m=S.x0,l=S.dx,k=S.orig_y,v=S.y,A=S.y0,M=S.dy,E=S.z;else{var Z=p.z;x.isArray1D(Z)?(t(p,F,R,"x","y",["z"]),y=p._x,v=p._y,Z=p._z):(w=p.x?F.makeCalcdata(p,"x"):[],k=p.y?R.makeCalcdata(p,"y"):[],y=b(p,F,"x",w).vals,v=b(p,R,"y",k).vals,p._x=y,p._y=v),m=p.x0,l=p.dx,A=p.y0,M=p.dy,E=a(Z,p,F,R)}function Y(ne){V=p._input.zsmooth=p.zsmooth=!1,x.warn('cannot use zsmooth: "fast": '+ne)}if((F.rangebreaks||R.rangebreaks)&&(E=function(ne,le,ue){for(var de=[],he=-1,be=0;be<ue.length;be++)if(le[be]!==i){de[++he]=[];for(var ge=0;ge<ue[be].length;ge++)ne[ge]!==i&&de[he].push(ue[be][ge])}return de}(y,v,E),L||(y=u(y),v=u(v),p._x=y,p._y=v)),L||!D&&!p.connectgaps||(p._emptypoints=d(E),n(E,p._emptypoints)),"fast"===V)if("log"===F.type||"log"===R.type)Y("log axis found");else if(!L){if(y.length){var ee=(y[y.length-1]-y[0])/(y.length-1),Q=Math.abs(ee/100);for(P=0;P<y.length-1;P++)if(Math.abs(y[P+1]-y[P]-ee)>Q){Y("x scale is not linear");break}}if(v.length&&"fast"===V){var $=(v[v.length-1]-v[0])/(v.length-1),K=Math.abs($/100);for(P=0;P<v.length-1;P++)if(Math.abs(v[P+1]-v[P]-$)>K){Y("y scale is not linear");break}}}var oe=x.maxRowLength(E),j="scaled"===p.xtype?"":y,H=s(p,j,m,l,oe,F),G="scaled"===p.ytype?"":v,re=s(p,G,A,M,E.length,R);B||(p._extremes[F._id]=T.findExtremes(F,H),p._extremes[R._id]=T.findExtremes(R,re));var q={x:H,y:re,z:E,text:p._text||p.text,hovertext:p._hovertext||p.hovertext};if(p.xperiodalignment&&w&&(q.orig_x=w),p.yperiodalignment&&k&&(q.orig_y=k),j&&j.length===H.length-1&&(q.xCenter=j),G&&G.length===re.length-1&&(q.yCenter=G),L&&(q.xRanges=S.xRanges,q.yRanges=S.yRanges,q.pts=S.pts),D||r(f,p,{vals:E,cLetter:"z"}),D&&p.contours&&"heatmap"===p.contours.coloring){var te={type:"contour"===p.type?"heatmap":"histogram2d",xcalendar:p.xcalendar,ycalendar:p.ycalendar};q.xfill=s(te,j,m,l,oe,F),q.yfill=s(te,G,A,M,E.length,R)}return[q]}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical").BADNUM;ae.exports=function(b,e,r,t){var a,n,d,s,i,u;function f(v){if(g(v))return+v}if(e&&e.transpose){for(a=0,i=0;i<b.length;i++)a=Math.max(a,b[i].length);if(0===a)return!1;d=function(v){return v.length},s=function(v,A,M){return(v[M]||[])[A]}}else a=b.length,d=function(v,A){return v[A].length},s=function(v,A,M){return(v[A]||[])[M]};function y(v){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&v&&"category"===v.type&&e["_"+v._id.charAt(0)].length){var A=v._id.charAt(0),M={},k=e["_"+A+"CategoryMap"]||e[A];for(i=0;i<k.length;i++)M[k[i]]=i;return function(E){var P=M[v._categories[E]];return P+1?P:T}}return x.identity}var m=y(r),l=y(t);t&&"category"===t.type&&(a=t._categories.length);var v,A,M,w=new Array(a);for(i=0;i<a;i++)for(n=r&&"category"===r.type?r._categories.length:d(b,i),w[i]=new Array(n),u=0;u<n;u++)w[i][u]=f((v=b,A=l(i),M=m(u),A===T||M===T?T:s(v,A,M)));return w}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(_,ae,ie){"use strict";ae.exports={min:"zmin",max:"zmax"}},{}],796:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../constants/numerical").BADNUM,T=_("../../plots/cartesian/align_period");ae.exports=function(b,e,r,t,a,n){var d=b._length,s=e.makeCalcdata(b,t),i=r.makeCalcdata(b,a);s=T(b,e,t,s).vals,i=T(b,r,a,i).vals;var u,f,p,y,m=b.text,l=void 0!==m&&g.isArray1D(m),w=b.hovertext,v=void 0!==w&&g.isArray1D(w),A=g.distinctVals(s),M=A.vals,k=g.distinctVals(i),E=k.vals,P=[],S=E.length,F=M.length;for(u=0;u<n.length;u++)P[u]=g.init2dArray(S,F);l&&(p=g.init2dArray(S,F)),v&&(y=g.init2dArray(S,F));var R=g.init2dArray(S,F);for(u=0;u<d;u++)if(s[u]!==x&&i[u]!==x){var D=g.findBin(s[u]+A.minDiff/2,M),L=g.findBin(i[u]+k.minDiff/2,E);for(f=0;f<n.length;f++)P[f][L][D]=b[n[f]][u],R[L][D]=u;l&&(p[L][D]=m[u]),v&&(y[L][D]=w[u])}for(b["_"+t]=M,b["_"+a]=E,f=0;f<n.length;f++)b["_"+n[f]]=P[f];l&&(b._text=p),v&&(b._hovertext=y),e&&"category"===e.type&&(b["_"+t+"CategoryMap"]=M.map(function(V){return e._categories[V]})),r&&"category"===r.type&&(b["_"+a+"CategoryMap"]=E.map(function(V){return r._categories[V]})),b._after2before=R}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./xyz_defaults"),T=_("./label_defaults"),b=_("../scatter/period_defaults"),e=_("./style_defaults"),r=_("../../components/colorscale/defaults"),t=_("./attributes");ae.exports=function(a,n,d,s){function i(u,f){return g.coerce(a,n,t,u,f)}x(a,n,i,s)?(b(a,n,s,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hovertemplate"),T(i,s),e(a,n,i,s),i("hoverongaps"),i("connectgaps",g.isArray1D(n.z)&&!1!==n.zsmooth),r(a,n,s,i,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":946,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(_,ae,ie){"use strict";var g=_("../../lib").maxRowLength;ae.exports=function(x){var T,b,e,r,t,a,n,d,s=[],i={},u=[],f=x[0],p=[],y=[0,0,0],m=g(x);for(b=0;b<x.length;b++)for(T=p,p=f,f=x[b+1]||[],e=0;e<m;e++)void 0===p[e]&&((a=(void 0!==p[e-1]?1:0)+(void 0!==p[e+1]?1:0)+(void 0!==T[e]?1:0)+(void 0!==f[e]?1:0))?(0===b&&a++,0===e&&a++,b===x.length-1&&a++,e===p.length-1&&a++,a<4&&(i[[b,e]]=[b,e,a]),s.push([b,e,a])):u.push([b,e]));for(;u.length;){for(n={},d=!1,t=u.length-1;t>=0;t--)(a=((i[[(b=(r=u[t])[0])-1,e=r[1]]]||y)[2]+(i[[b+1,e]]||y)[2]+(i[[b,e-1]]||y)[2]+(i[[b,e+1]]||y)[2])/20)&&(n[r]=[b,e,a],u.splice(t,1),d=!0);if(!d)throw"findEmpties iterated with no new neighbors";for(r in n)i[r]=n[r],s.push(n[r])}return s.sort(function(l,w){return w[2]-l[2]})}},{"../../lib":503}],799:[function(_,ae,ie){"use strict";var g=_("../../components/fx"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("../../components/colorscale").extractOpts;ae.exports=function(e,r,t,a,n){n||(n={});var d,s,i,u,f=n.isContour,p=e.cd[0],y=p.trace,m=e.xa,l=e.ya,w=p.x,v=p.y,A=p.z,M=p.xCenter,k=p.yCenter,E=p.zmask,P=y.zhoverformat,S=w,F=v;if(!1!==e.index){try{i=Math.round(e.index[1]),u=Math.round(e.index[0])}catch(j){return void x.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(i<0||i>=A[0].length||u<0||u>A.length)return}else{if(g.inbox(r-w[0],r-w[w.length-1],0)>0||g.inbox(t-v[0],t-v[v.length-1],0)>0)return;if(f){var R;for(S=[2*w[0]-w[1]],R=1;R<w.length;R++)S.push((w[R]+w[R-1])/2);for(S.push([2*w[w.length-1]-w[w.length-2]]),F=[2*v[0]-v[1]],R=1;R<v.length;R++)F.push((v[R]+v[R-1])/2);F.push([2*v[v.length-1]-v[v.length-2]])}i=Math.max(0,Math.min(S.length-2,x.findBin(r,S))),u=Math.max(0,Math.min(F.length-2,x.findBin(t,F)))}var D,L,B=m.c2p(w[i]),V=m.c2p(w[i+1]),Z=l.c2p(v[u]),Y=l.c2p(v[u+1]);f?(V=B,d=(D=p.orig_x||w)[i],Y=Z,s=(L=p.orig_y||v)[u]):(D=p.orig_x||M||w,L=p.orig_y||k||v,d=M?D[i]:(D[i]+D[i+1])/2,s=k?L[u]:(L[u]+L[u+1])/2,m&&"category"===m.type&&(d=w[i]),l&&"category"===l.type&&(s=v[u]),y.zsmooth&&(B=V=m.c2p(d),Z=Y=l.c2p(s)));var ee=A[u][i];if(E&&!E[u][i]&&(ee=void 0),void 0!==ee||y.hoverongaps){var Q;Array.isArray(p.hovertext)&&Array.isArray(p.hovertext[u])?Q=p.hovertext[u][i]:Array.isArray(p.text)&&Array.isArray(p.text[u])&&(Q=p.text[u][i]);var $=b(y),oe=T.tickText({type:"linear",range:[$.min,$.max],hoverformat:P,_separators:m._separators,_numFormat:m._numFormat},ee,"hover").text;return[x.extendFlat(e,{index:y._after2before?y._after2before[u][i]:[u,i],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:B,x1:V,y0:Z,y1:Y,xLabelVal:d,yLabelVal:s,zLabelVal:ee,zLabel:oe,text:Q})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),colorbar:_("./colorbar"),style:_("./style"),hoverPoints:_("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=[[-1,0],[1,0],[0,-1],[0,1]];function T(e){return.5-.25*Math.min(1,.5*e)}function b(e,r,t){var a,n,d,s,i,u,f,p,y,m,l,w,v,A=0;for(s=0;s<r.length;s++){for(l=e[n=(a=r[s])[0]][d=a[1]],m=0,y=0,i=0;i<4;i++)(f=e[n+(u=x[i])[0]])&&void 0!==(p=f[d+u[1]])&&(0===m?w=v=p:(w=Math.min(w,p),v=Math.max(v,p)),y++,m+=p);if(0===y)throw"iterateInterp2d order is wrong: no defined neighbors";e[n][d]=m/y,void 0===l?y<4&&(A=1):(e[n][d]=(1+t)*e[n][d]-t*l,v>w&&(A=Math.max(A,Math.abs(e[n][d]-l)/(v-w))))}return A}ae.exports=function(e,r){var t,a=1;for(b(e,r),t=0;t<r.length&&!(r[t][2]<4);t++);for(r=r.slice(t),t=0;t<100&&a>.01;t++)a=b(e,r,T(a));return a>.01&&g.log("interp2d didn't converge quickly",a),e}},{"../../lib":503}],802:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x,T){x("texttemplate");var b=g.extendFlat({},T.font,{color:"auto",size:"auto"});g.coerceFont(x,"textfont",b)}},{"../../lib":503}],803:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib").isArrayOrTypedArray;ae.exports=function(T,b,e,r,t,a){var n,d,s,i=[],u=g.traceIs(T,"contour"),f=g.traceIs(T,"histogram"),p=g.traceIs(T,"gl2d");if(x(b)&&b.length>1&&!f&&"category"!==a.type){var y=b.length;if(!(y<=t))return b.slice(0,u?t:t+1);if(u||p)i=b.slice(0,t);else if(1===t)i=[b[0]-.5,b[0]+.5];else{for(i=[1.5*b[0]-.5*b[1]],s=1;s<y;s++)i.push(.5*(b[s-1]+b[s]));i.push(1.5*b[y-1]-.5*b[y-2])}if(y<t){var m=i[i.length-1],l=m-i[i.length-2];for(s=y;s<t;s++)i.push(m+=l)}}else{var w=T[a._id.charAt(0)+"calendar"];for(n=f?a.r2c(e,0,w):x(b)&&1===b.length?b[0]:void 0===e?0:("log"===a.type?a.d2c:a.r2c)(e,0,w),d=r||1,s=u||p?0:-.5;s<t;s++)i.push(n+d*s)}return i}},{"../../lib":503,"../../registry":638}],804:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../registry"),b=_("../../components/drawing"),e=_("../../plots/cartesian/axes"),r=_("../../lib"),t=_("../../lib/svg_text_utils"),a=_("../scatter/format_labels"),n=_("../../components/color"),d=_("../../components/colorscale").extractOpts,s=_("../../components/colorscale").makeColorScaleFuncFromTrace,i=_("../../constants/xmlns_namespaces"),u=_("../../constants/alignment").LINE_SPACING;function f(w){return w.selectAll("g.heatmap-label")}function p(w){f(w).remove()}function y(w,v){var A=v.length-2,M=r.constrain(r.findBin(w,v),0,A),k=v[M],P=r.constrain(M+(w-k)/(v[M+1]-k)-.5,0,A),S=Math.round(P),F=Math.abs(P-S);return P&&P!==A&&F?{bin0:S,frac:F,bin1:Math.round(S+F/(P-S))}:{bin0:S,bin1:S,frac:0}}function m(w,v){var A=v.length-1,M=r.constrain(r.findBin(w,v),0,A),k=v[M],E=(w-k)/(v[M+1]-k)||0;return E<=0?{bin0:M,bin1:M,frac:0}:E<.5?{bin0:M,bin1:M+1,frac:E}:{bin0:M+1,bin1:M,frac:1-E}}function l(w,v,A){w[v]=A[0],w[v+1]=A[1],w[v+2]=A[2],w[v+3]=Math.round(255*A[3])}ae.exports=function(w,v,A,M){var k=v.xaxis,E=v.yaxis;r.makeTraceGroups(M,A,"hm").each(function(P){var S,F,R,D,L,B,V,Z,Y=g.select(this),ee=P[0],Q=ee.trace,$=Q.xgap||0,K=Q.ygap||0,oe=ee.z,j=ee.x,H=ee.y,G=ee.xCenter,re=ee.yCenter,q=T.traceIs(Q,"contour"),te=q?"best":Q.zsmooth,ne=oe.length,le=r.maxRowLength(oe),ue=!1,de=!1;for(B=0;void 0===S&&B<j.length-1;)S=k.c2p(j[B]),B++;for(B=j.length-1;void 0===F&&B>0;)F=k.c2p(j[B]),B--;for(F<S&&(R=F,F=S,S=R,ue=!0),B=0;void 0===D&&B<H.length-1;)D=E.c2p(H[B]),B++;for(B=H.length-1;void 0===L&&B>0;)L=E.c2p(H[B]),B--;if(L<D&&(R=D,D=L,L=R,de=!0),q&&(G=j,re=H,j=ee.xfill,H=ee.yfill),"fast"!==te){var he="best"===te?0:.5;S=Math.max(-he*k._length,S),F=Math.min((1+he)*k._length,F),D=Math.max(-he*E._length,D),L=Math.min((1+he)*E._length,L)}var be,ge,we=Math.round(F-S),ke=Math.round(L-D);if(we<=0||ke<=0)return Y.selectAll("image").data([]).exit().remove(),void p(Y);"fast"===te?(be=le,ge=ne):(be=we,ge=ke);var De=document.createElement("canvas");De.width=be,De.height=ge;var Ee,Re,ve=De.getContext("2d"),Te=s(Q,{noNumericCheck:!0,returnArray:!0});"fast"===te?(Ee=ue?function(Xn){return le-1-Xn}:r.identity,Re=de?function(Xn){return ne-1-Xn}:r.identity):(Ee=function(Xn){return r.constrain(Math.round(k.c2p(j[Xn])-S),0,we)},Re=function(Xn){return r.constrain(Math.round(E.c2p(H[Xn])-D),0,ke)});var Ie,Ce,Pe,Ve,qe=Re(0),Je=[qe,qe],lt=ue?0:1,He=de?0:1,$e=0,et=0,tt=0,ft=0;function bt(Xn,jn){if(void 0!==Xn){var nr=Te(Xn);return nr[0]=Math.round(nr[0]),nr[1]=Math.round(nr[1]),nr[2]=Math.round(nr[2]),$e+=jn,et+=nr[0]*jn,tt+=nr[1]*jn,ft+=nr[2]*jn,nr}return[0,0,0,0]}function Ct(Xn,jn,nr,Ur){var Jn=Xn[nr.bin0];if(void 0===Jn)return bt(void 0,1);var Hr=Xn[nr.bin1],Lr=jn[nr.bin0],$r=jn[nr.bin1];return bt(Jn+nr.frac*(Hr-Jn||0)+Ur.frac*((Lr-Jn||0)+nr.frac*(void 0===Hr?void 0===$r?0:void 0===Lr?2*($r-Jn):2*(2*$r-Lr-Jn)/3:void 0===$r?void 0===Lr?0:2*(2*Jn-Hr-Lr)/3:void 0===Lr?2*(2*$r-Hr-Jn)/3:$r+Jn-Hr-Lr)))}if(te){var Vt,Ft=0;try{Vt=new Uint8Array(we*ke*4)}catch(Xn){Vt=new Array(we*ke*4)}if("best"===te){var ht,ut,Rt,nn=G||j,cn=re||H,Ze=new Array(nn.length),Qe=new Array(cn.length),Ge=new Array(we),rt=G?m:y,Le=re?m:y;for(B=0;B<nn.length;B++)Ze[B]=Math.round(k.c2p(nn[B])-S);for(B=0;B<cn.length;B++)Qe[B]=Math.round(E.c2p(cn[B])-D);for(B=0;B<we;B++)Ge[B]=rt(B,Ze);for(V=0;V<ke;V++)for(ut=oe[(ht=Le(V,Qe)).bin0],Rt=oe[ht.bin1],B=0;B<we;B++,Ft+=4)l(Vt,Ft,Ve=Ct(ut,Rt,Ge[B],ht))}else for(V=0;V<ne;V++)for(Pe=oe[V],Je=Re(V),B=0;B<we;B++)Ve=bt(Pe[B],1),l(Vt,Ft=4*(Je*we+Ee(B)),Ve);var ze=ve.createImageData(we,ke);try{ze.data.set(Vt)}catch(Xn){var je=ze.data,Ne=je.length;for(V=0;V<Ne;V++)je[V]=Vt[V]}ve.putImageData(ze,0,0)}else{var st=Math.floor($/2),mt=Math.floor(K/2);for(V=0;V<ne;V++)if(Pe=oe[V],Je.reverse(),Je[He]=Re(V+1),Je[0]!==Je[1]&&void 0!==Je[0]&&void 0!==Je[1])for(Ie=[Ce=Ee(0),Ce],B=0;B<le;B++)Ie.reverse(),Ie[lt]=Ee(B+1),Ie[0]!==Ie[1]&&void 0!==Ie[0]&&void 0!==Ie[1]&&(Ve=bt(Pe[B],(Ie[1]-Ie[0])*(Je[1]-Je[0])),ve.fillStyle="rgba("+Ve.join(",")+")",ve.fillRect(Ie[0]+st,Je[0]+mt,Ie[1]-Ie[0]-$,Je[1]-Je[0]-K))}et=Math.round(et/$e),tt=Math.round(tt/$e),ft=Math.round(ft/$e);var Tt=x("rgb("+et+","+tt+","+ft+")");w._hmpixcount=(w._hmpixcount||0)+$e,w._hmlumcount=(w._hmlumcount||0)+$e*Tt.getLuminance();var xt=Y.selectAll("image").data(P);xt.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),xt.attr({height:ke,width:we,x:S,y:D,"xlink:href":De.toDataURL("image/png")}),p(Y);var zt=Q.texttemplate;if(zt){var gt=d(Q),Bt={type:"linear",range:[gt.min,gt.max],_separators:k._separators,_numFormat:k._numFormat},jt="histogram2dcontour"===Q.type,it="contour"===Q.type,Mt=it?ne-1:ne,qt=it?1:0,Wt=it?le-1:le,an=[];for(B=it?1:0;B<Mt;B++){var Ue;if(it)Ue=ee.y[B];else if(jt){if(0===B||B===ne-1)continue;Ue=ee.y[B]}else if(ee.yCenter)Ue=ee.yCenter[B];else{if(B+1===ne&&void 0===ee.y[B+1])continue;Ue=(ee.y[B]+ee.y[B+1])/2}var yt=Math.round(E.c2p(Ue));if(!(0>yt||yt>E._length))for(V=qt;V<Wt;V++){var Dt;if(it)Dt=ee.x[V];else if(jt){if(0===V||V===le-1)continue;Dt=ee.x[V]}else if(ee.xCenter)Dt=ee.xCenter[V];else{if(V+1===le&&void 0===ee.x[V+1])continue;Dt=(ee.x[V]+ee.x[V+1])/2}var Ht=Math.round(k.c2p(Dt));if(!(0>Ht||Ht>k._length)){var Jt=a({x:Dt,y:Ue},Q,w._fullLayout);Jt.x=Dt,Jt.y=Ue;var gn=ee.z[B][V];void 0===gn?(Jt.z="",Jt.zLabel=""):(Jt.z=gn,Jt.zLabel=e.tickText(Bt,gn,"hover").text);var Qt=ee.text&&ee.text[B]&&ee.text[B][V];void 0!==Qt&&!1!==Qt||(Qt=""),Jt.text=Qt;var sn=r.texttemplateString(zt,Jt,w._fullLayout._d3locale,Jt,Q._meta||{});if(sn){var hn=sn.split("<br>"),Dn=hn.length,_n=0;for(Z=0;Z<Dn;Z++)_n=Math.max(_n,hn[Z].length);an.push({l:Dn,c:_n,t:sn,x:Ht,y:yt,z:gn})}}}}var Tn=Q.textfont,wn=Tn.family,kn=Tn.size,Fn=w._fullLayout.font.size;if(!kn||"auto"===kn){var On=1/0,Qn=1/0,sr=0,Mr=0;for(Z=0;Z<an.length;Z++){var Wr=an[Z];if(sr=Math.max(sr,Wr.l),Mr=Math.max(Mr,Wr.c),Z<an.length-1){var mr=an[Z+1],Or=Math.abs(mr.x-Wr.x),vr=Math.abs(mr.y-Wr.y);Or&&(On=Math.min(On,Or)),vr&&(Qn=Math.min(Qn,vr))}}isFinite(On)&&isFinite(Qn)?(On-=$,Qn-=K,On/=Mr,Qn/=sr,On/=u/2,Qn/=u,kn=Math.min(Math.floor(On),Math.floor(Qn),Fn)):kn=Fn}if(kn<=0||!isFinite(kn))return;f(Y).data(an).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(Xn){var Ur,jn=g.select(this),nr=Tn.color;nr&&"auto"!==nr||(nr=n.contrast("rgba("+Te(Xn.z).join()+")")),jn.attr("data-notex",1).call(t.positionText,(Ur=Xn,Ur.x),function(Ur){return Ur.y-kn*(Ur.l*u/2-1)}(Xn)).call(b.font,wn,kn,nr).text(Xn.t).call(t.convertToTspans,w)})}})}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":935,"@plotly/d3":58,tinycolor2:312}],805:[function(_,ae,ie){"use strict";var g=_("@plotly/d3");ae.exports=function(x){g.select(x).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},{"@plotly/d3":58}],806:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T){!1===T("zsmooth")&&(T("xgap"),T("ygap")),T("zhoverformat")}},{}],807:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("../../registry");function b(e,r){var t=r(e);return"scaled"===(t?r(e+"type","array"):"scaled")&&(r(e+"0"),r("d"+e)),t}ae.exports=function(e,r,t,a,n,d){var s,i,u=t("z");if(n=n||"x",d=d||"y",void 0===u||!u.length)return 0;if(x.isArray1D(e.z)){s=t(n),i=t(d);var f=x.minRowLength(s),p=x.minRowLength(i);if(0===f||0===p)return 0;r._length=Math.min(f,p,u.length)}else{if(s=b(n,t),i=b(d,t),!function(y){for(var m,l=!0,w=!1,v=!1,A=0;A<y.length;A++){if(!x.isArrayOrTypedArray(m=y[A])){l=!1;break}m.length>0&&(w=!0);for(var M=0;M<m.length;M++)if(g(m[M])){v=!0;break}}return l&&w&&v}(u))return 0;t("transpose"),r._length=null}return"heatmapgl"===e.type||T.getComponentMethod("calendars","handleTraceDefaults")(e,r,[n,d],a),!0}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(_,ae,ie){"use strict";for(var g=_("../heatmap/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../lib/extend").extendFlat,b=_("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],r={},t=0;t<e.length;t++){var a=e[t];r[a]=g[a]}r.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},T(r,x("",{cLetter:"z",autoColorDflt:!1})),ae.exports=b(r,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(_,ae,ie){"use strict";var g=_("../../../stackgl_modules").gl_heatmap2d,x=_("../../plots/cartesian/axes"),T=_("../../lib/str2rgbarray");function b(r,t){this.scene=r,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=g(r.glplot,this.options),this.heatmap._trace=this}var e=b.prototype;e.handlePick=function(r){var t=this.options,a=t.shape,n=r.pointId,d=n%a[0],s=Math.floor(n/a[0]);return{trace:this,dataCoord:r.dataCoord,traceCoord:[t.x[d],t.y[s],t.z[n]],textLabel:this.textLabels[n],name:this.name,pointIndex:[s,d],hoverinfo:this.hoverinfo}},e.update=function(r,t){var a=t[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var n=a.z;this.options.z=[].concat.apply([],n),this.options.shape=[n[0].length,n.length],this.options.x=a.x,this.options.y=a.y,this.options.zsmooth=r.zsmooth;var i=function(m){for(var l=m.colorscale,w=m.zmin,v=m.zmax,A=l.length,M=new Array(A),k=new Array(4*A),E=0;E<A;E++){var P=l[E],S=T(P[1]);M[E]=w+P[0]*(v-w);for(var F=0;F<4;F++)k[4*E+F]=S[F]}return{colorLevels:M,colorValues:k}}(r);this.options.colorLevels=i.colorLevels,this.options.colorValues=i.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var u,f,p=this.scene.xaxis,y=this.scene.yaxis;!1===r.zsmooth&&(u={ppad:a.x[1]-a.x[0]},f={ppad:a.y[1]-a.y[0]}),r._extremes[p._id]=x.findExtremes(p,a.x,u),r._extremes[y._id]=x.findExtremes(y,a.y,f)},e.dispose=function(){this.heatmap.dispose()},ae.exports=function(r,t,a){var n=new b(r,t.uid);return n.update(t,a),n}},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../heatmap/xyz_defaults"),T=_("../../components/colorscale/defaults"),b=_("./attributes");ae.exports=function(e,r,t,a){function n(d,s){return g.coerce(e,r,b,d,s)}x(e,r,n,a)?(n("text"),n("zsmooth"),T(e,r,a,n,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(_,ae,ie){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),calc:_("../heatmap/calc"),plot:_("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:_("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(_,ae,ie){"use strict";var g=_("../bar/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/template_attributes").texttemplateAttrs,e=_("../../plots/font_attributes"),r=_("./bin_attributes"),t=_("./constants"),a=_("../../lib/extend").extendFlat;ae.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:x("x"),yhoverformat:x("y"),text:a({},g.text,{}),hovertext:a({},g.hovertext,{}),orientation:g.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:r("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:r("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:T({},{keys:t.eventDataKeys}),texttemplate:b({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:a({},g.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:g.insidetextanchor,textangle:g.textangle,cliponaxis:g.cliponaxis,constraintext:g.constraintext,marker:g.marker,offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup,selected:g.selected,unselected:g.unselected,_deprecated:{bardir:g._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(_,ae,ie){"use strict";ae.exports=function(g,x){for(var T=g.length,b=0,e=0;e<T;e++)x[e]?(g[e]/=x[e],b+=g[e]):g[e]=null;return b}},{}],814:[function(_,ae,ie){"use strict";ae.exports=function(g,x){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric");ae.exports={count:function(x,T,b){return b[x]++,1},sum:function(x,T,b,e){var r=e[T];return g(r)?(r=Number(r),b[x]+=r,r):0},avg:function(x,T,b,e,r){var t=e[T];return g(t)&&(t=Number(t),b[x]+=t,r[x]++),0},min:function(x,T,b,e){var r=e[T];if(g(r)){if(r=Number(r),!g(b[x]))return b[x]=r,r;if(b[x]>r){var t=r-b[x];return b[x]=r,t}}return 0},max:function(x,T,b,e){var r=e[T];if(g(r)){if(r=Number(r),!g(b[x]))return b[x]=r,r;if(b[x]<r){var t=r-b[x];return b[x]=r,t}}return 0}}},{"fast-isnumeric":190}],816:[function(_,ae,ie){"use strict";var g=_("../../constants/numerical"),x=g.ONEAVGYEAR,T=g.ONEAVGMONTH,b=g.ONEDAY,e=g.ONEHOUR,r=g.ONEMIN,t=g.ONESEC,a=_("../../plots/cartesian/axes").tickIncrement;function n(u,f,p,y){if(u*f<=0)return 1/0;for(var m=Math.abs(f-u),l="date"===p.type,w=d(m,l),v=0;v<10;v++){var A=d(80*w,l);if(w===A||!s(A,u,f,l,p,y))break;w=A}return w}function d(u,f){return f&&u>t?u>b?u>1.1*x?x:u>1.1*T?T:b:u>e?e:u>r?r:t:Math.pow(10,Math.floor(Math.log(u)/Math.LN10))}function s(u,f,p,y,m,l){if(y&&u>b){var w=i(f,m,l),v=i(p,m,l),A=u===x?0:1;return w[A]!==v[A]}return Math.floor(p/u)-Math.floor(f/u)>.1}function i(u,f,p){var y=f.c2d(u,x,p).split("-");return""===y[0]&&(y.unshift(),y[0]="-"+y[0]),y}ae.exports=function(u,f,p,y,m){var l,w,v=-1.1*f,A=-.1*f,M=u-A,k=p[0],E=p[1],P=Math.min(n(k+A,k+M,y,m),n(E+A,E+M,y,m)),S=Math.min(n(k+v,k+A,y,m),n(E+v,E+A,y,m));if(P>S&&S<Math.abs(E-k)/4e3?(l=P,w=!1):(l=Math.min(P,S),w=!0),"date"===y.type&&l>b){var F=l===x?1:6,R=l===x?"M12":"M1";return function(D,L){var B=y.c2d(D,x,m),V=B.indexOf("-",F);V>0&&(B=B.substr(0,V));var Z=y.d2c(B,0,m);if(Z<D){var Y=a(Z,R,!1,m);(Z+Y)/2<D+u&&(Z=Y)}return L&&w?a(Z,R,!0,m):Z}}return function(D,L){var B=l*Math.round(D/l);return B+l/10<D&&B+.9*l<D+u&&(B+=l),L&&w&&(B-=l),B}}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("../../registry"),b=_("../../plots/cartesian/axes"),e=_("../bar/arrays_to_calcdata"),r=_("./bin_functions"),t=_("./norm_functions"),a=_("./average"),n=_("./bin_label_vals");function d(s,i,u,f,p){var y,m,l,w,v,A,M,k=f+"bins",E=s._fullLayout,S=E._histogramBinOpts[i["_"+f+"bingroup"]],F="overlay"===E.barmode,R=function(ge){return u.r2c(ge,0,w)},D=function(ge){return u.c2r(ge,0,w)},L="date"===u.type?function(ge){return ge||0===ge?x.cleanDate(ge,null,w):null}:function(ge){return g(ge)?Number(ge):null};function B(ge,we,ke){we[ge+"Found"]?(we[ge]=L(we[ge]),null===we[ge]&&(we[ge]=ke[ge])):(A[ge]=we[ge]=ke[ge],x.nestedProperty(m[0],k+"."+ge).set(ke[ge]))}if(i["_"+f+"autoBinFinished"])delete i["_"+f+"autoBinFinished"];else{m=S.traces;var V=[],Z=!0,Y=!1,ee=!1;for(y=0;y<m.length;y++)if((l=m[y]).visible){var Q=S.dirs[y];v=l["_"+Q+"pos0"]=u.makeCalcdata(l,Q),V=x.concat(V,v),delete l["_"+f+"autoBinFinished"],!0===i.visible&&(Z?Z=!1:(delete l._autoBin,l["_"+f+"autoBinFinished"]=1),T.traceIs(l,"2dMap")&&(Y=!0),"histogram2dcontour"===l.type&&(ee=!0))}var $=b.autoBin(V,u,S.nbins,Y,w=m[0][f+"calendar"],S.sizeFound&&S.size),K=m[0]._autoBin={};if(A=K[S.dirs[0]]={},ee&&(S.size||($.start=D(b.tickIncrement(R($.start),$.size,!0,w))),void 0===S.end&&($.end=D(b.tickIncrement(R($.end),$.size,!1,w)))),F&&!T.traceIs(i,"2dMap")&&0===$._dataSpan&&"category"!==u.type&&"multicategory"!==u.type){if(p)return[$,v,!0];$=function(ge,we,ke,De,Ee){var Re,ve,Te,Ie=ge._fullLayout,Ce=function(Ct,Vt){for(var Ft=Vt.xaxis,ht=Vt.yaxis,ut=Vt.orientation,Rt=[],nn=Ct._fullData,cn=0;cn<nn.length;cn++){var Ze=nn[cn];"histogram"===Ze.type&&!0===Ze.visible&&Ze.orientation===ut&&Ze.xaxis===Ft&&Ze.yaxis===ht&&Rt.push(Ze)}return Rt}(ge,we),Pe=!1,Ve=1/0,qe=[we];for(Re=0;Re<Ce.length;Re++)if((ve=Ce[Re])===we)Pe=!0;else if(Pe){var Je=d(ge,ve,ke,De,!0),lt=Je[0],He=Je[2];ve["_"+De+"autoBinFinished"]=1,ve["_"+De+"pos0"]=Je[1],He?qe.push(ve):Ve=Math.min(Ve,lt.size)}else Te=Ie._histogramBinOpts[ve["_"+De+"bingroup"]],Ve=Math.min(Ve,Te.size||ve[Ee].size);var $e=new Array(qe.length);for(Re=0;Re<qe.length;Re++)for(var et=qe[Re]["_"+De+"pos0"],tt=0;tt<et.length;tt++)if(void 0!==et[tt]){$e[Re]=et[tt];break}for(isFinite(Ve)||(Ve=x.distinctVals($e).minDiff),Re=0;Re<qe.length;Re++){var ft=(ve=qe[Re])[De+"calendar"],bt={start:ke.c2r($e[Re]-Ve/2,0,ft),end:ke.c2r($e[Re]+Ve/2,0,ft),size:Ve};ve._input[Ee]=ve[Ee]=bt,(Te=Ie._histogramBinOpts[ve["_"+De+"bingroup"]])&&x.extendFlat(Te,bt)}return we[Ee]}(s,i,u,f,k)}(M=l.cumulative||{}).enabled&&"include"!==M.currentbin&&("decreasing"===M.direction?$.start=D(b.tickIncrement(R($.start),$.size,!0,w)):$.end=D(b.tickIncrement(R($.end),$.size,!1,w))),S.size=$.size,S.sizeFound||(A.size=$.size,x.nestedProperty(m[0],k+".size").set($.size)),B("start",S,$),B("end",S,$)}v=i["_"+f+"pos0"],delete i["_"+f+"pos0"];var oe=i._input[k]||{},j=x.extendFlat({},S),H=S.start,G=u.r2l(oe.start),re=void 0!==G;if((S.startFound||re)&&G!==u.r2l(H)){var q=re?G:x.aggNums(Math.min,null,v),te={type:"category"===u.type||"multicategory"===u.type?"linear":u.type,r2l:u.r2l,dtick:S.size,tick0:H,calendar:w,range:[q,b.tickIncrement(q,S.size,!1,w)].map(u.l2r)},ne=b.tickFirst(te);ne>u.r2l(q)&&(ne=b.tickIncrement(ne,S.size,!0,w)),j.start=u.l2r(ne),re||x.nestedProperty(i,k+".start").set(j.start)}var le=S.end,ue=u.r2l(oe.end),de=void 0!==ue;if((S.endFound||de)&&ue!==u.r2l(le)){var he=de?ue:x.aggNums(Math.max,null,v);j.end=u.l2r(he),de||x.nestedProperty(i,k+".start").set(j.end)}var be="autobin"+f;return!1===i._input[be]&&(i._input[k]=x.extendFlat({},i[k]||{}),delete i._input[be],delete i[be]),[j,v]}ae.exports={calc:function(s,i){var u,f,p,y,m=[],l=[],w=b.getFromId(s,"h"===i.orientation?i.yaxis:i.xaxis),v="h"===i.orientation?"y":"x",A={x:"y",y:"x"}[v],M=i[v+"calendar"],k=i.cumulative,E=d(s,i,w,v),P=E[0],S=E[1],F="string"==typeof P.size,R=[],D=F?R:P,L=[],B=[],V=[],Z=0,Y=i.histnorm,ee=i.histfunc,Q=-1!==Y.indexOf("density");k.enabled&&Q&&(Y=Y.replace(/ ?density$/,""),Q=!1);var $,K="max"===ee||"min"===ee?null:0,oe=r.count,j=t[Y],H=!1,G=function(Re){return w.r2c(Re,0,M)};for(x.isArrayOrTypedArray(i[A])&&"count"!==ee&&($=i[A],H="avg"===ee,oe=r[ee]),u=G(P.start),p=G(P.end)+(u-b.tickIncrement(u,P.size,!1,M))/1e6;u<p&&m.length<1e6&&(f=b.tickIncrement(u,P.size,!1,M),m.push((u+f)/2),l.push(K),V.push([]),R.push(u),Q&&L.push(1/(f-u)),H&&B.push(0),!(f<=u));)u=f;R.push(u),F||"date"!==w.type||(D={start:G(D.start),end:G(D.end),size:D.size}),s._fullLayout._roundFnOpts||(s._fullLayout._roundFnOpts={});var re=i["_"+v+"bingroup"],q={leftGap:1/0,rightGap:1/0};re&&(s._fullLayout._roundFnOpts[re]||(s._fullLayout._roundFnOpts[re]=q),q=s._fullLayout._roundFnOpts[re]);var te,ne=l.length,le=!0,ue=q.leftGap,de=q.rightGap,he={};for(u=0;u<S.length;u++){var be=S[u];(y=x.findBin(be,D))>=0&&y<ne&&(Z+=oe(y,u,l,$,B),le&&V[y].length&&be!==S[V[y][0]]&&(le=!1),V[y].push(u),he[u]=y,ue=Math.min(ue,be-R[y]),de=Math.min(de,R[y+1]-be))}q.leftGap=ue,q.rightGap=de,le||(te=function(Re,ve){return function(){var Te=s._fullLayout._roundFnOpts[re];return n(Te.leftGap,Te.rightGap,R,w,M)(Re,ve)}}),H&&(Z=a(l,B)),j&&j(l,Z,L),k.enabled&&function(Re,ve,Te){var Ie,Ce,Pe;function Ve(Je){Pe=Re[Je],Re[Je]/=2}function qe(Je){Re[Je]=Pe+(Ce=Re[Je])/2,Pe+=Ce}if("half"===Te)if("increasing"===ve)for(Ve(0),Ie=1;Ie<Re.length;Ie++)qe(Ie);else for(Ve(Re.length-1),Ie=Re.length-2;Ie>=0;Ie--)qe(Ie);else if("increasing"===ve){for(Ie=1;Ie<Re.length;Ie++)Re[Ie]+=Re[Ie-1];"exclude"===Te&&(Re.unshift(0),Re.pop())}else{for(Ie=Re.length-2;Ie>=0;Ie--)Re[Ie]+=Re[Ie+1];"exclude"===Te&&(Re.push(0),Re.shift())}}(l,k.direction,k.currentbin);var ge=Math.min(m.length,l.length),we=[],ke=0,De=ge-1;for(u=0;u<ge;u++)if(l[u]){ke=u;break}for(u=ge-1;u>=ke;u--)if(l[u]){De=u;break}for(u=ke;u<=De;u++)if(g(m[u])&&g(l[u])){var Ee={p:m[u],s:l[u],b:0};k.enabled||(Ee.pts=V[u],le?Ee.ph0=Ee.ph1=V[u].length?S[V[u][0]]:m[u]:(i._computePh=!0,Ee.ph0=te(R[u]),Ee.ph1=te(R[u+1],!0))),we.push(Ee)}return 1===we.length&&(we[0].width1=b.tickIncrement(we[0].p,P.size,!1,M)-we[0].p),e(we,i),x.isArrayOrTypedArray(i.selectedpoints)&&x.tagSelected(we,i,he),we},calcAllAutoBins:d}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(_,ae,ie){"use strict";ae.exports={eventDataKeys:["binNumber"]}},{}],819:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axis_ids"),T=_("../../registry").traceIs,b=_("../bar/defaults").handleGroupingDefaults,e=g.nestedProperty,r=_("../../plots/cartesian/constraints").getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],a=["x","y"];ae.exports=function(n,d){var s,i,u,f,p,y,m,l=d._histogramBinOpts={},w=[],v={},A=[];function M($,K){return g.coerce(s._input,s,s._module.attributes,$,K)}function k($){return"v"===$.orientation?"x":"y"}function E($,K,oe){var j=$.uid+"__"+oe;K||(K=j);var H=x.getFromTrace({_fullLayout:d},$,oe).type,G=$[oe+"calendar"]||"",re=l[K],q=!0;re&&(H===re.axType&&G===re.calendar?(q=!1,re.traces.push($),re.dirs.push(oe)):(K=j,H!==re.axType&&g.warn(["Attempted to group the bins of trace",$.index,"set on a","type:"+H,"axis","with bins on","type:"+re.axType,"axis."].join(" ")),G!==re.calendar&&g.warn(["Attempted to group the bins of trace",$.index,"set with a",G,"calendar","with bins",re.calendar?"on a "+re.calendar+" calendar":"w/o a set calendar"].join(" ")))),q&&(l[K]={traces:[$],dirs:[oe],axType:H,calendar:$[oe+"calendar"]||""}),$["_"+oe+"bingroup"]=K}for(p=0;p<n.length;p++)T(s=n[p],"histogram")&&(w.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,T(s,"2dMap")||b(s._input,s,d,M));var P=d._alignmentOpts||{};for(p=0;p<w.length;p++){if(u="",!T(s=w[p],"2dMap")){if(f=k(s),"group"===d.barmode&&s.alignmentgroup){var F=r(d,s[f+"axis"])+s.orientation;(P[F]||{})[s.alignmentgroup]&&(u=F)}u||"overlay"===d.barmode||(u=r(d,s.xaxis)+r(d,s.yaxis)+k(s))}u?(v[u]||(v[u]=[]),v[u].push(s)):A.push(s)}for(u in v)if(1!==(i=v[u]).length){var R=!1;for(i.length&&(s=i[0],R=M("bingroup")),u=R||u,p=0;p<i.length;p++){var D=(s=i[p])._input.bingroup;D&&D!==u&&g.warn(["Trace",s.index,"must match","within bingroup",u+".","Ignoring its bingroup:",D,"setting."].join(" ")),s.bingroup=u,E(s,u,k(s))}}else A.push(i[0]);for(p=0;p<A.length;p++){s=A[p];var L=M("bingroup");if(T(s,"2dMap"))for(m=0;m<2;m++){var B=M((f=a[m])+"bingroup",L?L+"__"+f:null);E(s,B,f)}else E(s,L,k(s))}for(u in l){var V=l[u];for(i=V.traces,y=0;y<t.length;y++){var Z,Y,ee=t[y],Q=ee.name;if("nbins"!==Q||!V.sizeFound){for(p=0;p<i.length;p++){if(void 0!==e((s=i[p])._input,Z=ee.aStr[f=V.dirs[p]]).get()){V[Q]=M(Z),V[Q+"Found"]=!0;break}(Y=(s._autoBin||{})[f]||{})[Q]&&e(s,Z).set(Y[Q])}if("start"===Q||"end"===Q)for(;p<i.length;p++)(s=i[p])["_"+f+"bingroup"]&&M(Z,(Y=(s._autoBin||{})[f]||{})[Q]);"nbins"!==Q||V.sizeFound||V.nbinsFound||(s=i[0],V[Q]=M(Z))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib"),T=_("../../components/color"),b=_("../bar/defaults").handleText,e=_("../bar/style_defaults"),r=_("./attributes");ae.exports=function(t,a,n,d){function s(A,M){return x.coerce(t,a,r,A,M)}var i=s("x"),u=s("y");s("cumulative.enabled")&&(s("cumulative.direction"),s("cumulative.currentbin")),s("text");var f=s("textposition");b(t,a,d,s,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat");var p=s("orientation",u&&!i?"h":"v"),y="v"===p?"x":"y",m="v"===p?"y":"x",l=i&&u?Math.min(x.minRowLength(i)&&x.minRowLength(u)):x.minRowLength(a[y]||[]);if(l){a._length=l,g.getComponentMethod("calendars","handleTraceDefaults")(t,a,["x","y"],d),a[m]&&s("histfunc"),s("histnorm"),s("autobin"+y),e(t,a,s,n,d),x.coerceSelectionMarkerOpacity(a,s);var w=(a.marker.line||{}).color,v=g.getComponentMethod("errorbars","supplyDefaults");v(t,a,w||T.defaultLine,{axis:"y"}),v(t,a,w||T.defaultLine,{axis:"x",inherit:"y"})}else a.visible=!1}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b,e){if(g.x="xVal"in x?x.xVal:x.x,g.y="yVal"in x?x.yVal:x.y,"zLabelVal"in x&&(g.z=x.zLabelVal),x.xa&&(g.xaxis=x.xa),x.ya&&(g.yaxis=x.ya),!(T.cumulative||{}).enabled){var r,t=Array.isArray(e)?b[0].pts[e[0]][e[1]]:b[e].pts;if(g.pointNumbers=t,g.binNumber=g.pointNumber,delete g.pointNumber,delete g.pointIndex,T._indexToPoints){r=[];for(var a=0;a<t.length;a++)r=r.concat(T._indexToPoints[t[a]])}else r=t;g.pointIndices=r}return g}},{}],822:[function(_,ae,ie){"use strict";var g=_("../bar/hover").hoverPoints,x=_("../../plots/cartesian/axes").hoverLabelText;ae.exports=function(T,b,e,r,t){var a=g(T,b,e,r,t);if(a){var n=(T=a[0]).cd[T.index],d=T.cd[0].trace;if(!d.cumulative.enabled){var s="h"===d.orientation?"y":"x";T[s+"Label"]=x(T[s+"a"],[n.ph0,n.ph1],d[s+"hoverformat"])}return a}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),layoutAttributes:_("../bar/layout_attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("./cross_trace_defaults"),supplyLayoutDefaults:_("../bar/layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("../bar/cross_trace_calc").crossTraceCalc,plot:_("../bar/plot").plot,layerName:"barlayer",style:_("../bar/style").style,styleOnSelect:_("../bar/style").styleOnSelect,colorbar:_("../scatter/marker_colorbar"),hoverPoints:_("./hover"),selectPoints:_("../bar/select"),eventData:_("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(_,ae,ie){"use strict";ae.exports={percent:function(g,x){for(var T=g.length,b=100/x,e=0;e<T;e++)g[e]*=b},probability:function(g,x){for(var T=g.length,b=0;b<T;b++)g[b]/=x},density:function(g,x,T,b){var e=g.length;b=b||1;for(var r=0;r<e;r++)g[r]*=T[r]*b},"probability density":function(g,x,T,b){var e=g.length;b&&(x/=b);for(var r=0;r<e;r++)g[r]*=T[r]/x}}},{}],825:[function(_,ae,ie){"use strict";var g=_("../histogram/attributes"),x=_("../histogram/bin_attributes"),T=_("../heatmap/attributes"),b=_("../../plots/attributes"),e=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=_("../../plots/template_attributes").hovertemplateAttrs,t=_("../../plots/template_attributes").texttemplateAttrs,a=_("../../components/colorscale/attributes"),n=_("../../lib/extend").extendFlat;ae.exports=n({x:g.x,y:g.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:g.histnorm,histfunc:g.histfunc,nbinsx:g.nbinsx,xbins:x("x"),nbinsy:g.nbinsy,ybins:x("y"),autobinx:g.autobinx,autobiny:g.autobiny,bingroup:n({},g.bingroup,{}),xbingroup:n({},g.bingroup,{}),ybingroup:n({},g.bingroup,{}),xgap:T.xgap,ygap:T.ygap,zsmooth:T.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:r({},{keys:"z"}),texttemplate:t({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:T.textfont,showlegend:n({},b.showlegend,{dflt:!1})},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../histogram/bin_functions"),b=_("../histogram/norm_functions"),e=_("../histogram/average"),r=_("../histogram/bin_label_vals"),t=_("../histogram/calc").calcAllAutoBins;function a(s,i,u,f){var p,y=new Array(s);if(f)for(p=0;p<s;p++)y[p]=1/(i[p+1]-i[p]);else{var m=1/u;for(p=0;p<s;p++)y[p]=m}return y}function n(s,i){return{start:s(i.start),end:s(i.end),size:i.size}}function d(s,i,u,f,p,y){var m,l=s.length-1,w=new Array(l),v=r(u,f,s,p,y);for(m=0;m<l;m++){var A=(i||[])[m];w[m]=void 0===A?[v(s[m]),v(s[m+1],!0)]:[A,A]}return w}ae.exports=function(s,i){var u,f,p,y,m=x.getFromId(s,i.xaxis),l=x.getFromId(s,i.yaxis),w=i.xcalendar,v=i.ycalendar,A=function(ht){return m.r2c(ht,0,w)},M=function(ht){return l.r2c(ht,0,v)},k=t(s,i,m,"x"),E=k[0],P=k[1],S=t(s,i,l,"y"),F=S[0],R=S[1],D=i._length;P.length>D&&P.splice(D,P.length-D),R.length>D&&R.splice(D,R.length-D);var L=[],B=[],V=[],Z="string"==typeof E.size,Y="string"==typeof F.size,ee=[],Q=[],$=Z?ee:E,K=Y?Q:F,oe=0,j=[],H=[],G=i.histnorm,re=i.histfunc,q=-1!==G.indexOf("density"),te="max"===re||"min"===re?null:0,ne=T.count,le=b[G],ue=!1,de=[],he=[],be="z"in i?i.z:"marker"in i&&Array.isArray(i.marker.color)?i.marker.color:"";be&&"count"!==re&&(ue="avg"===re,ne=T[re]);var ge=E.size,we=A(E.start),ke=A(E.end)+(we-x.tickIncrement(we,ge,!1,w))/1e6;for(u=we;u<ke;u=x.tickIncrement(u,ge,!1,w))B.push(te),ee.push(u),ue&&V.push(0);ee.push(u);var Ee=B.length,Re=(u-we)/Ee,ve=m.c2r(we+Re/2,0,w),Te=F.size,Ie=M(F.start),Ce=M(F.end)+(Ie-x.tickIncrement(Ie,Te,!1,v))/1e6;for(u=Ie;u<Ce;u=x.tickIncrement(u,Te,!1,v)){L.push(B.slice()),Q.push(u);var Pe=new Array(Ee);for(f=0;f<Ee;f++)Pe[f]=[];H.push(Pe),ue&&j.push(V.slice())}Q.push(u);var Ve=L.length,qe=(u-Ie)/Ve,Je=l.c2r(Ie+qe/2,0,v);q&&(de=a(B.length,$,Re,Z),he=a(L.length,K,qe,Y)),Z||"date"!==m.type||($=n(A,$)),Y||"date"!==l.type||(K=n(M,K));var lt=!0,He=!0,$e=new Array(Ee),et=new Array(Ve),tt=1/0,ft=1/0,bt=1/0,Ct=1/0;for(u=0;u<D;u++){var Vt=P[u],Ft=R[u];p=g.findBin(Vt,$),y=g.findBin(Ft,K),p>=0&&p<Ee&&y>=0&&y<Ve&&(oe+=ne(p,u,L[y],be,j[y]),H[y][p].push(u),lt&&(void 0===$e[p]?$e[p]=Vt:$e[p]!==Vt&&(lt=!1)),He&&(void 0===et[y]?et[y]=Ft:et[y]!==Ft&&(He=!1)),tt=Math.min(tt,Vt-ee[p]),ft=Math.min(ft,ee[p+1]-Vt),bt=Math.min(bt,Ft-Q[y]),Ct=Math.min(Ct,Q[y+1]-Ft))}if(ue)for(y=0;y<Ve;y++)oe+=e(L[y],j[y]);if(le)for(y=0;y<Ve;y++)le(L[y],oe,de,he[y]);return{x:P,xRanges:d(ee,lt&&$e,tt,ft,m,w),x0:ve,dx:Re,y:R,yRanges:d(Q,He&&et,bt,Ct,l,v),y0:Je,dy:qe,z:L,pts:H}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./sample_defaults"),T=_("../heatmap/style_defaults"),b=_("../../components/colorscale/defaults"),e=_("../heatmap/label_defaults"),r=_("./attributes");ae.exports=function(t,a,n,d){function s(i,u){return g.coerce(t,a,r,i,u)}x(t,a,s,d),!1!==a.visible&&(T(t,a,s,d),b(t,a,d,s,{prefix:"",cLetter:"z"}),s("hovertemplate"),e(s,d),s("xhoverformat"),s("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(_,ae,ie){"use strict";var g=_("../heatmap/hover"),x=_("../../plots/cartesian/axes").hoverLabelText;ae.exports=function(T,b,e,r,t){var a=g(T,b,e,r,t);if(a){var n=(T=a[0]).index,i=T.cd[0],u=i.trace,f=i.xRanges[n[1]],p=i.yRanges[n[0]];return T.xLabel=x(T.xa,[f[0],f[1]],u.xhoverformat),T.yLabel=x(T.ya,[p[0],p[1]],u.yhoverformat),a}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../histogram/cross_trace_defaults"),calc:_("../heatmap/calc"),plot:_("../heatmap/plot"),layerName:"heatmaplayer",colorbar:_("../heatmap/colorbar"),style:_("../heatmap/style"),hoverPoints:_("./hover"),eventData:_("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib");ae.exports=function(T,b,e,r){var t=e("x"),a=e("y"),n=x.minRowLength(t),d=x.minRowLength(a);n&&d?(b._length=Math.min(n,d),g.getComponentMethod("calendars","handleTraceDefaults")(T,b,["x","y"],r),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):b.visible=!1}},{"../../lib":503,"../../registry":638}],831:[function(_,ae,ie){"use strict";var g=_("../histogram2d/attributes"),x=_("../contour/attributes"),T=_("../../components/colorscale/attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../lib/extend").extendFlat;ae.exports=e({x:g.x,y:g.y,z:g.z,marker:g.marker,histnorm:g.histnorm,histfunc:g.histfunc,nbinsx:g.nbinsx,xbins:g.xbins,nbinsy:g.nbinsy,ybins:g.ybins,autobinx:g.autobinx,autobiny:g.autobiny,bingroup:g.bingroup,xbingroup:g.xbingroup,ybingroup:g.ybingroup,autocontour:x.autocontour,ncontours:x.ncontours,contours:x.contours,line:{color:x.line.color,width:e({},x.line.width,{dflt:.5}),dash:x.line.dash,smoothing:x.line.smoothing,editType:"plot"},xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:g.hovertemplate,texttemplate:x.texttemplate,textfont:x.textfont},T("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../histogram2d/sample_defaults"),T=_("../contour/contours_defaults"),b=_("../contour/style_defaults"),e=_("../heatmap/label_defaults"),r=_("./attributes");ae.exports=function(t,a,n,d){function s(i,u){return g.coerce(t,a,r,i,u)}x(t,a,s,d),!1!==a.visible&&(T(t,a,s,function(i){return g.coerce2(t,a,r,i)}),b(t,a,s,d),s("xhoverformat"),s("yhoverformat"),s("hovertemplate"),a.contours&&"heatmap"===a.contours.coloring&&e(s,d))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../histogram/cross_trace_defaults"),calc:_("../contour/calc"),plot:_("../contour/plot").plot,layerName:"contourlayer",style:_("../contour/style"),colorbar:_("../contour/colorbar"),hoverPoints:_("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(_,ae,ie){"use strict";var g=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../components/colorscale/attributes"),b=_("../../plots/domain").attributes,e=_("../pie/attributes"),r=_("../sunburst/attributes"),t=_("../treemap/attributes"),a=_("../treemap/constants"),n=_("../../lib/extend").extendFlat;ae.exports={labels:r.labels,parents:r.parents,values:r.values,branchvalues:r.branchvalues,count:r.count,level:r.level,maxdepth:r.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:t.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:n({colors:r.marker.colors,line:r.marker.line,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:r.leaf,pathbar:t.pathbar,text:e.text,textinfo:r.textinfo,texttemplate:x({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:r.hoverinfo,hovertemplate:g({},{keys:a.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:t.outsidetextfont,textposition:t.textposition,sort:e.sort,root:r.root,domain:b({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"../treemap/attributes":1071,"../treemap/constants":1074}],835:[function(_,ae,ie){"use strict";var g=_("../../plots/plots");ie.name="icicle",ie.plot=function(x,T,b,e){g.plotBasePlot(ie.name,x,T,b,e)},ie.clean=function(x,T,b,e){g.cleanBasePlot(ie.name,x,T,b,e)}},{"../../plots/plots":619}],836:[function(_,ae,ie){"use strict";var g=_("../sunburst/calc");ie.calc=function(x,T){return g.calc(x,T)},ie.crossTraceCalc=function(x){return g._runCrossTraceCalc("icicle",x)}},{"../sunburst/calc":1047}],837:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes"),T=_("../../components/color"),b=_("../../plots/domain").defaults,e=_("../bar/defaults").handleText,r=_("../bar/constants").TEXTPAD,t=_("../../components/colorscale"),a=t.hasColorscale,n=t.handleDefaults;ae.exports=function(d,s,i,u){function f(A,M){return g.coerce(d,s,x,A,M)}var p=f("labels"),y=f("parents");if(p&&p.length&&y&&y.length){var m=f("values");f(m&&m.length?"branchvalues":"count"),f("level"),f("maxdepth"),f("tiling.orientation"),f("tiling.flip"),f("tiling.pad");var l=f("text");f("texttemplate"),s.texttemplate||f("textinfo",Array.isArray(l)?"text+label":"label"),f("hovertext"),f("hovertemplate");var w=f("pathbar.visible");e(d,s,u,f,"auto",{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition"),f("marker.line.width")&&f("marker.line.color",u.paper_bgcolor),f("marker.colors");var v=s._hasColorscale=a(d,"marker","colors")||(d.marker||{}).coloraxis;v&&n(d,s,u,f,{prefix:"marker.",cLetter:"c"}),f("leaf.opacity",v?1:.7),s._hovered={marker:{line:{width:2,color:T.contrast(u.paper_bgcolor)}}},w&&(f("pathbar.thickness",s.pathbar.textfont.size+2*r),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),b(s,u,f),s._length=null}else s.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../lib/svg_text_utils"),e=_("./partition"),r=_("./style").styleOne,t=_("../treemap/constants"),a=_("../sunburst/helpers"),n=_("../sunburst/fx"),d=_("../sunburst/plot").formatSliceLabel;ae.exports=function(s,i,u,f,p){var y=p.width,m=p.height,l=p.viewX,w=p.viewY,v=p.pathSlice,A=p.toMoveInsideSlice,M=p.strTransform,k=p.hasTransition,E=p.handleSlicesExit,P=p.makeUpdateSliceInterpolator,S=p.makeUpdateTextInterpolator,F=p.prevEntry,R=s._fullLayout,D=i[0].trace,L=-1!==D.textposition.indexOf("left"),B=-1!==D.textposition.indexOf("right"),V=-1!==D.textposition.indexOf("bottom"),Z=e(u,[y,m],{flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,orientation:D.tiling.orientation,pad:{inner:D.tiling.pad},maxDepth:D._maxDepth}).descendants(),Y=1/0,ee=-1/0;Z.forEach(function(j){var H=j.depth;H>=D._maxDepth?(j.x0=j.x1=(j.x0+j.x1)/2,j.y0=j.y1=(j.y0+j.y1)/2):(Y=Math.min(Y,H),ee=Math.max(ee,H))}),f=f.data(Z,a.getPtId),D._maxVisibleLayers=isFinite(ee)?ee-Y+1:0,f.enter().append("g").classed("slice",!0),E(f,!1,{},[y,m],v),f.order();var Q=null;if(k&&F){var $=a.getPtId(F);f.each(function(j){null===Q&&a.getPtId(j)===$&&(Q={x0:j.x0,x1:j.x1,y0:j.y0,y1:j.y1})})}var K=function(){return Q||{x0:0,x1:y,y0:0,y1:m}},oe=f;return k&&(oe=oe.transition().each("end",function(){var j=g.select(this);a.setSliceCursor(j,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),oe.each(function(j){j._x0=l(j.x0),j._x1=l(j.x1),j._y0=w(j.y0),j._y1=w(j.y1),j._hoverX=l(j.x1-D.tiling.pad),j._hoverY=w(V?j.y1-D.tiling.pad/2:j.y0+D.tiling.pad/2);var H=g.select(this),G=x.ensureSingle(H,"path","surface",function(ne){ne.style("pointer-events","all")});k?G.transition().attrTween("d",function(ne){var le=P(ne,!1,K(),[y,m],{orientation:D.tiling.orientation,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1});return function(ue){return v(le(ue))}}):G.attr("d",v),H.call(n,u,s,i,{styleOne:r,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,s,{isTransitioning:s._transitioning}),G.call(r,j,D,{hovered:!1}),j._text=j.x0===j.x1||j.y0===j.y1?"":d(j,u,D,i,R)||"";var re=x.ensureSingle(H,"g","slicetext"),q=x.ensureSingle(re,"text","",function(ne){ne.attr("data-notex",1)}),te=x.ensureUniformFontSize(s,a.determineTextFont(D,j,R.font));q.text(j._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":L?"start":"middle").call(T.font,te).call(b.convertToTspans,s),j.textBB=T.bBox(q.node()),j.transform=A(j,{fontSize:te.size}),j.transform.fontSize=te.size,k?q.transition().attrTween("transform",function(ne){var le=S(ne,!1,K(),[y,m]);return function(ue){return M(le(ue))}}):q.attr("transform",M(j))}),Q}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"../treemap/constants":1074,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"icicle",basePlotModule:_("./base_plot"),categories:[],animatable:!0,attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),style:_("./style").style,colorbar:_("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(_,ae,ie){"use strict";ae.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes");ae.exports=function(T,b){function e(r,t){return g.coerce(T,b,x,r,t)}e("iciclecolorway",b.colorway),e("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(_,ae,ie){"use strict";var g=_("d3-hierarchy"),x=_("../treemap/flip_tree");ae.exports=function(T,b,e){var r=e.flipX,t=e.flipY,a="h"===e.orientation,n=e.maxDepth,d=b[0],s=b[1];n&&(d=(T.height+1)*b[0]/Math.min(T.height+1,n),s=(T.height+1)*b[1]/Math.min(T.height+1,n));var i=g.partition().padding(e.pad.inner).size(a?[b[1],d]:[b[0],s])(T);return(a||r||t)&&x(i,b,{swapXY:a,flipX:r,flipY:t}),i}},{"../treemap/flip_tree":1079,"d3-hierarchy":115}],843:[function(_,ae,ie){"use strict";var g=_("../treemap/draw"),x=_("./draw_descendants");ae.exports=function(T,b,e,r){return g(T,b,e,r,{type:"icicle",drawDescendants:x})}},{"../treemap/draw":1076,"./draw_descendants":838}],844:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/color"),T=_("../../lib"),b=_("../bar/uniform_text").resizeText;function e(r,t,a){var n=t.data.data,d=!t.children,s=n.i,i=T.castOption(a,s,"marker.line.color")||x.defaultLine,u=T.castOption(a,s,"marker.line.width")||0;r.style("stroke-width",u).call(x.fill,n.color).call(x.stroke,i).style("opacity",d?a.leaf.opacity:null)}ae.exports={style:function(r){var t=r._fullLayout._iciclelayer.selectAll(".trace");b(r,t,"icicle"),t.each(function(a){var n=g.select(this),d=a[0].trace;n.style("opacity",d.opacity),n.selectAll("path.surface").each(function(s){g.select(this).call(e,s,d)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(_,ae,ie){"use strict";for(var g=_("../../plots/attributes"),x=_("../../plots/template_attributes").hovertemplateAttrs,T=_("../../lib/extend").extendFlat,b=_("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],r=[],t=[],a=0;a<e.length;a++){var n=b[e[a]];r.push("For the `"+e[a]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),t.push("For the `"+e[a]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}ae.exports=T({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:T({},g.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:x({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./constants"),T=_("fast-isnumeric"),b=_("../../plots/cartesian/axes"),e=_("../../lib").maxRowLength,r=_("./helpers").getImageSize;function t(n,d,s,i){return function(u){return g.constrain((u-n)*d,s,i)}}function a(n,d){return function(s){return g.constrain(s,n,d)}}ae.exports=function(n,d){var s,i;if(d._hasZ)s=d.z.length,i=e(d.z);else if(d._hasSource){var u=r(d.source);s=u.height,i=u.width}var f,p=b.getFromId(n,d.xaxis||"x"),y=b.getFromId(n,d.yaxis||"y"),m=p.d2c(d.x0)-d.dx/2,l=y.d2c(d.y0)-d.dy/2,w=[m,m+i*d.dx],v=[l,l+s*d.dy];if(p&&"log"===p.type)for(f=0;f<i;f++)w.push(m+f*d.dx);if(y&&"log"===y.type)for(f=0;f<s;f++)v.push(l+f*d.dy);return d._extremes[p._id]=b.findExtremes(p,w),d._extremes[y._id]=b.findExtremes(y,v),d._scaler=function(A){var M=x.colormodel[A.colormodel],k=(M.colormodel||A.colormodel).length;A._sArray=[];for(var E=0;E<k;E++)A._sArray.push(M.min[E]!==A.zmin[E]||M.max[E]!==A.zmax[E]?t(A.zmin[E],(M.max[E]-M.min[E])/(A.zmax[E]-A.zmin[E]),M.min[E],M.max[E]):a(M.min[E],M.max[E]));return function(P){for(var S=P.slice(0,k),F=0;F<k;F++){var R=S[F];if(!T(R))return!1;S[F]=A._sArray[F](R)}return S}}(d),[{x0:m,y0:l,z:d.z,w:i,h:s}]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(_,ae,ie){"use strict";ae.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(g){return g.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(g){return g.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(g){return g.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(g){var x=g.slice(0,3);return x[1]=x[1]+"%",x[2]=x[2]+"%",x},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(g){var x=g.slice(0,4);return x[1]=x[1]+"%",x[2]=x[2]+"%",x},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes"),T=_("./constants"),b=_("../../snapshot/helpers").IMAGE_URL_PREFIX;ae.exports=function(e,r){function t(d,s){return g.coerce(e,r,x,d,s)}t("source"),r.source&&!r.source.match(b)&&delete r.source,r._hasSource=!!r.source;var a,n=t("z");r._hasZ=!(void 0===n||!n.length||!n[0]||!n[0].length),r._hasZ||r._hasSource?(t("x0"),t("y0"),t("dx"),t("dy"),r._hasZ?(t("colormodel","rgb"),t("zmin",(a=T.colormodel[r.colormodel]).zminDflt||a.min),t("zmax",a.zmaxDflt||a.max)):r._hasSource&&(r.colormodel="rgba256",r.zmin=(a=T.colormodel[r.colormodel]).zminDflt,r.zmax=a.zmaxDflt),t("zsmooth"),t("text"),t("hovertext"),t("hovertemplate"),r._length=null):r.visible=!1}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(_,ae,ie){"use strict";ae.exports=function(g,x){return"xVal"in x&&(g.x=x.xVal),"yVal"in x&&(g.y=x.yVal),x.xa&&(g.xaxis=x.xa),x.ya&&(g.yaxis=x.ya),g.color=x.color,g.colormodel=x.trace.colormodel,g.z||(g.z=x.color),g}},{}],850:[function(_,ae,ie){"use strict";var g=_("probe-image-size/sync"),x=_("../../snapshot/helpers").IMAGE_URL_PREFIX,T=_("buffer/").Buffer;ie.getImageSize=function(b){var e=b.replace(x,""),r=new T(e,"base64");return g(r)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(_,ae,ie){"use strict";var g=_("../../components/fx"),x=_("../../lib"),T=_("./constants");ae.exports=function(b,e,r){var t=b.cd[0],a=t.trace,n=b.xa,d=b.ya;if(!(g.inbox(e-t.x0,e-(t.x0+t.w*a.dx),0)>0||g.inbox(r-t.y0,r-(t.y0+t.h*a.dy),0)>0)){var s,i=Math.floor((e-t.x0)/a.dx),u=Math.floor(Math.abs(r-t.y0)/a.dy);if(a._hasZ?s=t.z[u][i]:a._hasSource&&(s=a._canvas.el.getContext("2d").getImageData(i,u,1,1).data),s){var f,p=t.hi||a.hoverinfo;if(p){var y=p.split("+");-1!==y.indexOf("all")&&(y=["color"]),-1!==y.indexOf("color")&&(f=!0)}var m,l=T.colormodel[a.colormodel],w=l.colormodel||a.colormodel,v=w.length,A=a._scaler(s),M=l.suffix,k=[];(a.hovertemplate||f)&&(k.push("["+[A[0]+M[0],A[1]+M[1],A[2]+M[2]].join(", ")),4===v&&k.push(", "+A[3]+M[3]),k.push("]"),k=k.join(""),b.extraText=w.toUpperCase()+": "+k),Array.isArray(a.hovertext)&&Array.isArray(a.hovertext[u])?m=a.hovertext[u][i]:Array.isArray(a.text)&&Array.isArray(a.text[u])&&(m=a.text[u][i]);var E=d.c2p(t.y0+(u+.5)*a.dy),P=t.x0+(i+.5)*a.dx,S=t.y0+(u+.5)*a.dy,F="["+s.slice(0,a.colormodel.length).join(", ")+"]";return[x.extendFlat(b,{index:[u,i],x0:n.c2p(t.x0+i*a.dx),x1:n.c2p(t.x0+(i+1)*a.dx),y0:E,y1:E,color:A,xVal:P,xLabelVal:P,yVal:S,yLabelVal:S,zLabelVal:F,text:m,hovertemplateLabels:{zLabel:F,colorLabel:k,"color[0]Label":A[0]+M[0],"color[1]Label":A[1]+M[1],"color[2]Label":A[2]+M[2],"color[3]Label":A[3]+M[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),style:_("./style"),hoverPoints:_("./hover"),eventData:_("./event_data"),moduleType:"trace",name:"image",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=x.strTranslate,b=_("../../constants/xmlns_namespaces"),e=_("./constants"),r=x.isIOS()||x.isSafari()||x.isIE();ae.exports=function(t,a,n,d){var s=a.xaxis,i=a.yaxis,u=!(r||t._context._exportedPlot);x.makeTraceGroups(d,n,"im").each(function(f){var p=g.select(this),y=f[0],m=y.trace,l=("fast"===m.zsmooth||!1===m.zsmooth&&u)&&!m._hasZ&&m._hasSource&&"linear"===s.type&&"linear"===i.type;m._realImage=l;var w,v,A,M,k,E,P=y.z,S=y.x0,F=y.y0,R=y.w,D=y.h,L=m.dx,B=m.dy;for(E=0;void 0===w&&E<R;)w=s.c2p(S+E*L),E++;for(E=R;void 0===v&&E>0;)v=s.c2p(S+E*L),E--;for(E=0;void 0===M&&E<D;)M=i.c2p(F+E*B),E++;for(E=D;void 0===k&&E>0;)k=i.c2p(F+E*B),E--;v<w&&(A=v,v=w,w=A),k<M&&(A=M,M=k,k=A),!l&&(w=Math.max(-.5*s._length,w),v=Math.min(1.5*s._length,v),M=Math.max(-.5*i._length,M),k=Math.min(1.5*i._length,k));var V=Math.round(v-w),Z=Math.round(k-M);if(V<=0||Z<=0)p.selectAll("image").data([]).exit().remove();else{var Y=p.selectAll("image").data([f]);Y.enter().append("svg:image").attr({xmlns:b.svg,preserveAspectRatio:"none"}),Y.exit().remove();var ee=!1===m.zsmooth?e.pixelatedStyle:"";if(l){var Q=x.simpleMap(s.range,s.r2l),$=x.simpleMap(i.range,i.r2l),K=Q[1]<Q[0],oe=$[1]>$[0];if(K||oe){var j=w+V/2,H=M+Z/2;ee+="transform:"+T(j+"px",H+"px")+"scale("+(K?-1:1)+","+(oe?-1:1)+")"+T(-j+"px",-H+"px")+";"}}Y.attr("style",ee);var G=new Promise(function(q){if(m._hasZ)q();else if(m._hasSource)if(m._canvas&&m._canvas.el.width===R&&m._canvas.el.height===D&&m._canvas.source===m.source)q();else{var te=document.createElement("canvas");te.width=R,te.height=D;var ne=te.getContext("2d");m._image=m._image||new Image;var le=m._image;le.onload=function(){ne.drawImage(le,0,0),m._canvas={el:te,source:m.source},q()},le.setAttribute("src",m.source)}}).then(function(){var q;if(m._hasZ)q=re(function(ne,le){return P[le][ne]}).toDataURL("image/png");else if(m._hasSource)if(l)q=m.source;else{var te=m._canvas.el.getContext("2d").getImageData(0,0,R,D).data;q=re(function(ne,le){var ue=4*(le*R+ne);return[te[ue],te[ue+1],te[ue+2],te[ue+3]]}).toDataURL("image/png")}Y.attr({"xlink:href":q,height:Z,width:V,x:w,y:M})});t._promises.push(G)}function re(q){var te=document.createElement("canvas");te.width=V,te.height=Z;var ne,le=te.getContext("2d"),ue=function(ve){return x.constrain(Math.round(s.c2p(S+ve*L)-w),0,V)},de=function(ve){return x.constrain(Math.round(i.c2p(F+ve*B)-M),0,Z)},he=e.colormodel[m.colormodel],be=he.colormodel||m.colormodel,ge=he.fmt;for(E=0;E<y.w;E++){var we=ue(E),ke=ue(E+1);if(ke!==we&&!isNaN(ke)&&!isNaN(we))for(var De=0;De<y.h;De++){var Ee=de(De),Re=de(De+1);Re===Ee||isNaN(Re)||isNaN(Ee)||!q(E,De)||(ne=m._scaler(q(E,De)),le.fillStyle=ne?be+"("+ge(ne).join(",")+")":"rgba(0,0,0,0)",le.fillRect(we,Ee,ke-we,Re-Ee))}}return te}})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(_,ae,ie){"use strict";var g=_("@plotly/d3");ae.exports=function(x){g.select(x).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(_,ae,ie){"use strict";var g=_("../../lib/extend").extendFlat,x=_("../../lib/extend").extendDeep,T=_("../../plot_api/edit_types").overrideAll,b=_("../../plots/font_attributes"),e=_("../../components/color/attributes"),r=_("../../plots/domain").attributes,t=_("../../plots/cartesian/layout_attributes"),a=_("../../plot_api/plot_template").templatedArray,n=_("../../constants/delta.js"),d=_("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=b({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},u={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},f=a("step",x({},i,{range:u}));ae.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:r({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:g({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:d("value")},font:g({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:d("value")},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:g({},s,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:x({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:T({range:u,visible:g({},t.visible,{dflt:!0}),tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:g({},t.ticks,{dflt:"outside"}),ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,tickfont:b({}),tickangle:t.tickangle,tickformat:t.tickformat,tickformatstops:t.tickformatstops,tickprefix:t.tickprefix,showtickprefix:t.showtickprefix,ticksuffix:t.ticksuffix,showticksuffix:t.showticksuffix,separatethousands:t.separatethousands,exponentformat:t.exponentformat,minexponent:t.minexponent,showexponent:t.showexponent,editType:"plot"},"plot"),steps:f,threshold:{line:{color:g({},i.line.color,{}),width:g({},i.line.width,{dflt:1}),editType:"plot"},thickness:g({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(_,ae,ie){"use strict";var g=_("../../plots/plots");ie.name="indicator",ie.plot=function(x,T,b,e){g.plotBasePlot(ie.name,x,T,b,e)},ie.clean=function(x,T,b,e){g.cleanBasePlot(ie.name,x,T,b,e)}},{"../../plots/plots":619}],857:[function(_,ae,ie){"use strict";ae.exports={calc:function(g,x){var T=[],b=x.value;"number"!=typeof x._lastValue&&(x._lastValue=x.value);var e=x._lastValue,r=e;return x._hasDelta&&"number"==typeof x.delta.reference&&(r=x.delta.reference),T[0]={y:b,lastY:e,delta:b-r,relativeDelta:(b-r)/r},T}}},{}],858:[function(_,ae,ie){"use strict";ae.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults,b=_("../../plot_api/plot_template"),e=_("../../plots/array_container_defaults"),r=_("./constants.js"),t=_("../../plots/cartesian/tick_value_defaults"),a=_("../../plots/cartesian/tick_mark_defaults"),n=_("../../plots/cartesian/tick_label_defaults"),d=_("../../plots/cartesian/prefix_suffix_defaults");function s(i,u){function f(p,y){return g.coerce(i,u,x.gauge.steps,p,y)}f("color"),f("line.color"),f("line.width"),f("range"),f("thickness")}ae.exports={supplyDefaults:function(i,u,f,p){function y(R,D){return g.coerce(i,u,x,R,D)}T(u,p,y),y("mode"),u._hasNumber=-1!==u.mode.indexOf("number"),u._hasDelta=-1!==u.mode.indexOf("delta"),u._hasGauge=-1!==u.mode.indexOf("gauge");var m=y("value");u._range=[0,"number"==typeof m?1.5*m:1];var l,w,v,A,M,k,E=new Array(2);function P(R,D){return g.coerce(v,A,x.gauge,R,D)}function S(R,D){return g.coerce(M,k,x.gauge.axis,R,D)}if(u._hasNumber&&(y("number.valueformat"),y("number.font.color",p.font.color),y("number.font.family",p.font.family),y("number.font.size"),void 0===u.number.font.size&&(u.number.font.size=r.defaultNumberFontSize,E[0]=!0),y("number.prefix"),y("number.suffix"),l=u.number.font.size),u._hasDelta&&(y("delta.font.color",p.font.color),y("delta.font.family",p.font.family),y("delta.font.size"),void 0===u.delta.font.size&&(u.delta.font.size=(u._hasNumber?.5:1)*(l||r.defaultNumberFontSize),E[1]=!0),y("delta.reference",u.value),y("delta.relative"),y("delta.valueformat",u.delta.relative?"2%":""),y("delta.increasing.symbol"),y("delta.increasing.color"),y("delta.decreasing.symbol"),y("delta.decreasing.color"),y("delta.position"),w=u.delta.font.size),u._scaleNumbers=(!u._hasNumber||E[0])&&(!u._hasDelta||E[1])||!1,y("title.font.color",p.font.color),y("title.font.family",p.font.family),y("title.font.size",.25*(l||w||r.defaultNumberFontSize)),y("title.text"),u._hasGauge){(v=i.gauge)||(v={}),A=b.newContainer(u,"gauge"),P("shape"),(u._isBullet="bullet"===u.gauge.shape)||y("title.align","center"),(u._isAngular="angular"===u.gauge.shape)||y("align","center"),P("bgcolor",p.paper_bgcolor),P("borderwidth"),P("bordercolor"),P("bar.color"),P("bar.line.color"),P("bar.line.width"),P("bar.thickness",r.valueThickness*("bullet"===u.gauge.shape?.5:1)),e(v,A,{name:"steps",handleItemDefaults:s}),P("threshold.value"),P("threshold.thickness"),P("threshold.line.width"),P("threshold.line.color"),M={},v&&(M=v.axis||{}),k=b.newContainer(A,"axis"),S("visible"),u._range=S("range",u._range);var F={outerTicks:!0};t(M,k,S,"linear"),d(M,k,S,"linear",F),n(M,k,S,"linear",F),a(M,k,S,F)}else y("title.align","center"),y("align","center"),u._isAngular=u._isBullet=!1;u._length=null}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"indicator",basePlotModule:_("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,calc:_("./calc").calc,plot:_("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("d3-interpolate").interpolate,T=_("d3-interpolate").interpolateNumber,b=_("../../lib"),e=b.strScale,r=b.strTranslate,t=b.rad2deg,a=_("../../constants/alignment").MID_SHIFT,n=_("../../components/drawing"),d=_("./constants"),s=_("../../lib/svg_text_utils"),i=_("../../plots/cartesian/axes"),u=_("../../plots/cartesian/axis_defaults"),f=_("../../plots/cartesian/position_defaults"),p=_("../../plots/cartesian/layout_attributes"),y=_("../../components/color"),m={left:"start",center:"middle",right:"end"},l={left:0,center:.5,right:1},w=/[yzafpn\xb5mkMGTPEZY]/;function v(S){return S&&S.duration>0}function A(S){S.each(function(F){y.stroke(g.select(this),F.line.color)}).each(function(F){y.fill(g.select(this),F.color)}).style("stroke-width",function(F){return F.line.width})}function M(S,F,R){var D=S._fullLayout,L=b.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},F),B={type:"linear",_id:"x"+F._id},V={letter:"x",font:D.font,noHover:!0,noTickson:!0};function Z(Y,ee){return b.coerce(L,B,p,Y,ee)}return u(L,B,Z,V,D),f(L,B,Z,V),B}function k(S,F,R){return[Math.min(F/S.width,R/S.height),S,F+"x"+R]}function E(S,F,R,D){var L=document.createElementNS("http://www.w3.org/2000/svg","text"),B=g.select(L);return B.text(S).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",S).call(s.convertToTspans,D).call(n.font,F),n.bBox(B.node())}function P(S,F,R,D,L,B){var V="_cache"+F;S[V]&&S[V].key===L||(S[V]={key:L,value:R});var Z=b.aggNums(B,null,[S[V].value,D],2);return S[V].value=Z,Z}ae.exports=function(S,F,R,D){var L,B=S._fullLayout;v(R)&&D&&(L=D()),b.makeTraceGroups(B._indicatorlayer,F,"trace").each(function(V){var Z,Y,ee,Q,$,K=V[0].trace,oe=g.select(this),j=K._hasGauge,H=K._isAngular,G=K._isBullet,re=K.domain,q={w:B._size.w*(re.x[1]-re.x[0]),h:B._size.h*(re.y[1]-re.y[0]),l:B._size.l+B._size.w*re.x[0],r:B._size.r+B._size.w*(1-re.x[1]),t:B._size.t+B._size.h*(1-re.y[1]),b:B._size.b+B._size.h*re.y[0]},te=q.l+q.w/2,ne=q.t+q.h/2,le=Math.min(q.w/2,q.h),ue=d.innerRadius*le,de=K.align||"center";if(Y=ne,j){if(H&&(Z=te,Y=ne+le/2,ee=function(Re){return ve=Re,[(Te=.9*ue)/Math.sqrt(ve.width/2*(ve.width/2)+ve.height*ve.height),ve,Te];var ve,Te}),G){var he=d.bulletPadding,be=1-d.bulletNumberDomainSize+he;Z=q.l+(be+(1-be)*l[de])*q.w,ee=function(Re){return k(Re,(d.bulletNumberDomainSize-he)*q.w,q.h)}}}else Z=q.l+l[de]*q.w,ee=function(Re){return k(Re,q.w,q.h)};(function(Re,ve,Te,Ie){var Ce,Pe,Ve,qe=Te[0].trace,Je=Ie.numbersX,lt=Ie.numbersY,He=qe.align||"center",$e=m[He],et=Ie.transitionOpts,tt=Ie.onComplete,ft=b.ensureSingle(ve,"g","numbers"),bt=[];qe._hasNumber&&bt.push("number"),qe._hasDelta&&(bt.push("delta"),"left"===qe.delta.position&&bt.reverse());var Ct=ft.selectAll("text").data(bt);function Vt(Qe,Ge,rt,Le){if(!Qe.match("s")||rt>=0==Le>=0||Ge(rt).slice(-1).match(w)||Ge(Le).slice(-1).match(w))return Ge;var ze=Qe.slice().replace("s","f").replace(/\d+/,function(Ne){return parseInt(Ne)-1}),je=M(Re,{tickformat:ze});return function(Ne){return Math.abs(Ne)<1?i.tickText(je,Ne).text:Ge(Ne)}}Ct.enter().append("text"),Ct.attr("text-anchor",function(){return $e}).attr("class",function(Qe){return Qe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Ct.exit().remove();var Ft,ht=qe.mode+qe.align;if(qe._hasDelta&&(Ft=function(){var Qe=M(Re,{tickformat:qe.delta.valueformat},qe._range);Qe.setScale(),i.prepTicks(Qe);var Ge=function(st){return i.tickText(Qe,st).text},rt=function(st){return qe.delta.relative?st.relativeDelta:st.delta},Le=function(st,mt){return 0===st||"number"!=typeof st||isNaN(st)?"-":(st>0?qe.delta.increasing.symbol:qe.delta.decreasing.symbol)+mt(st)},ze=function(st){return st.delta>=0?qe.delta.increasing.color:qe.delta.decreasing.color};void 0===qe._deltaLastValue&&(qe._deltaLastValue=rt(Te[0]));var je=ft.select("text.delta");function Ne(){je.text(Le(rt(Te[0]),Ge)).call(y.fill,ze(Te[0])).call(s.convertToTspans,Re)}return je.call(n.font,qe.delta.font).call(y.fill,ze({delta:qe._deltaLastValue})),v(et)?je.transition().duration(et.duration).ease(et.easing).tween("text",function(){var st=g.select(this),mt=rt(Te[0]),Tt=qe._deltaLastValue,xt=Vt(qe.delta.valueformat,Ge,Tt,mt),zt=T(Tt,mt);return qe._deltaLastValue=mt,function(gt){st.text(Le(zt(gt),xt)),st.call(y.fill,ze({delta:zt(gt)}))}}).each("end",function(){Ne(),tt&&tt()}).each("interrupt",function(){Ne(),tt&&tt()}):Ne(),Pe=E(Le(rt(Te[0]),Ge),qe.delta.font,$e,Re),je}(),ht+=qe.delta.position+qe.delta.font.size+qe.delta.font.family+qe.delta.valueformat,ht+=qe.delta.increasing.symbol+qe.delta.decreasing.symbol,Ve=Pe),qe._hasNumber&&(function(){var Qe=M(Re,{tickformat:qe.number.valueformat},qe._range);Qe.setScale(),i.prepTicks(Qe);var Ge=function(Ne){return i.tickText(Qe,Ne).text},rt=qe.number.suffix,Le=qe.number.prefix,ze=ft.select("text.number");function je(){var Ne="number"==typeof Te[0].y?Le+Ge(Te[0].y)+rt:"-";ze.text(Ne).call(n.font,qe.number.font).call(s.convertToTspans,Re)}v(et)?ze.transition().duration(et.duration).ease(et.easing).each("end",function(){je(),tt&&tt()}).each("interrupt",function(){je(),tt&&tt()}).attrTween("text",function(){var Ne=g.select(this),st=T(Te[0].lastY,Te[0].y);qe._lastValue=Te[0].y;var mt=Vt(qe.number.valueformat,Ge,Te[0].lastY,Te[0].y);return function(Tt){Ne.text(Le+mt(st(Tt))+rt)}}):je(),Ce=E(Le+Ge(Te[0].y)+rt,qe.number.font,$e,Re)}(),ht+=qe.number.font.size+qe.number.font.family+qe.number.valueformat+qe.number.suffix+qe.number.prefix,Ve=Ce),qe._hasDelta&&qe._hasNumber){var ut,Rt,nn=[(Ce.left+Ce.right)/2,(Ce.top+Ce.bottom)/2],cn=[(Pe.left+Pe.right)/2,(Pe.top+Pe.bottom)/2],Ze=.75*qe.delta.font.size;"left"===qe.delta.position&&(ut=P(qe,"deltaPos",0,-1*(Ce.width*l[qe.align]+Pe.width*(1-l[qe.align])+Ze),ht,Math.min),Rt=nn[1]-cn[1],Ve={width:Ce.width+Pe.width+Ze,height:Math.max(Ce.height,Pe.height),left:Pe.left+ut,right:Ce.right,top:Math.min(Ce.top,Pe.top+Rt),bottom:Math.max(Ce.bottom,Pe.bottom+Rt)}),"right"===qe.delta.position&&(ut=P(qe,"deltaPos",0,Ce.width*(1-l[qe.align])+Pe.width*l[qe.align]+Ze,ht,Math.max),Rt=nn[1]-cn[1],Ve={width:Ce.width+Pe.width+Ze,height:Math.max(Ce.height,Pe.height),left:Ce.left,right:Pe.right+ut,top:Math.min(Ce.top,Pe.top+Rt),bottom:Math.max(Ce.bottom,Pe.bottom+Rt)}),"bottom"===qe.delta.position&&(ut=null,Rt=Pe.height,Ve={width:Math.max(Ce.width,Pe.width),height:Ce.height+Pe.height,left:Math.min(Ce.left,Pe.left),right:Math.max(Ce.right,Pe.right),top:Ce.bottom-Ce.height,bottom:Ce.bottom+Pe.height}),"top"===qe.delta.position&&(ut=null,Rt=Ce.top,Ve={width:Math.max(Ce.width,Pe.width),height:Ce.height+Pe.height,left:Math.min(Ce.left,Pe.left),right:Math.max(Ce.right,Pe.right),top:Ce.bottom-Ce.height-Pe.height,bottom:Ce.bottom}),Ft.attr({dx:ut,dy:Rt})}(qe._hasNumber||qe._hasDelta)&&ft.attr("transform",function(){var Ge,Qe=Ie.numbersScaler(Ve),rt=P(qe,"numbersScale",1,Qe[0],ht+=Qe[2],Math.min);qe._scaleNumbers||(rt=1),qe._numbersTop=rt*Ve.top+(Ge=qe._isAngular?lt-rt*Ve.bottom:lt-rt*(Ve.top+Ve.bottom)/2);var Le=Ve[He];"center"===He&&(Le=(Ve.left+Ve.right)/2);var ze=Je-rt*Le;return ze=P(qe,"numbersTranslate",0,ze,ht,Math.max),r(ze,Ge)+e(rt)})})(S,oe,V,{numbersX:Z,numbersY:Y,numbersScaler:ee,transitionOpts:R,onComplete:L}),j&&(Q={range:K.gauge.axis.range,color:K.gauge.bgcolor,line:{color:K.gauge.bordercolor,width:0},thickness:1},$={range:K.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:K.gauge.bordercolor,width:K.gauge.borderwidth},thickness:1});var ge=oe.selectAll("g.angular").data(H?V:[]);ge.exit().remove();var we=oe.selectAll("g.angularaxis").data(H?V:[]);we.exit().remove(),H&&function(Re,ve,Te,Ie){var Ce,Pe,Ve,qe,Je=Te[0].trace,lt=Ie.size,He=Ie.radius,$e=Ie.innerRadius,et=Ie.gaugeBg,tt=Ie.gaugeOutline,ft=[lt.l+lt.w/2,lt.t+lt.h/2+He/2],bt=Ie.gauge,Ct=Ie.layer,Vt=Ie.transitionOpts,Ft=Ie.onComplete,ht=Math.PI/2;function ut(jt){var it=Je.gauge.axis.range[0],Mt=(jt-it)/(Je.gauge.axis.range[1]-it)*Math.PI-ht;return Mt<-ht?-ht:Mt>ht?ht:Mt}function Rt(jt){return g.svg.arc().innerRadius(($e+He)/2-jt/2*(He-$e)).outerRadius(($e+He)/2+jt/2*(He-$e)).startAngle(-ht)}function nn(jt){jt.attr("d",function(it){return Rt(it.thickness).startAngle(ut(it.range[0])).endAngle(ut(it.range[1]))()})}bt.enter().append("g").classed("angular",!0),bt.attr("transform",r(ft[0],ft[1])),Ct.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Ct.selectAll("g.xangularaxistick,path,text").remove(),(Ce=M(Re,Je.gauge.axis)).type="linear",Ce.range=Je.gauge.axis.range,Ce._id="xangularaxis",Ce.ticklabeloverflow="allow",Ce.setScale();var cn=function(jt){return(Ce.range[0]-jt.x)/(Ce.range[1]-Ce.range[0])*Math.PI+Math.PI},Ze={},Qe=i.makeLabelFns(Ce,0).labelStandoff;Ze.xFn=function(jt){var it=cn(jt);return Math.cos(it)*Qe},Ze.yFn=function(jt){var it=cn(jt),Mt=Math.sin(it)>0?.2:1;return-Math.sin(it)*(Qe+jt.fontSize*Mt)+Math.abs(Math.cos(it))*(jt.fontSize*a)},Ze.anchorFn=function(jt){var it=cn(jt),Mt=Math.cos(it);return Math.abs(Mt)<.1?"middle":Mt>0?"start":"end"},Ze.heightFn=function(jt,it,Mt){var qt=cn(jt);return-.5*(1+Math.sin(qt))*Mt};var Ge=function(jt){return r(ft[0]+He*Math.cos(jt),ft[1]-He*Math.sin(jt))};Ve=function(jt){return Ge(cn(jt))},Pe=i.calcTicks(Ce),qe=i.getTickSigns(Ce)[2],Ce.visible&&(i.drawTicks(Re,Ce,{vals:Pe,layer:Ct,path:"M"+(qe="inside"===Ce.ticks?-1:1)*((Ce.linewidth||1)/2)+",0h"+qe*Ce.ticklen,transFn:function(jt){var it=cn(jt);return Ge(it)+"rotate("+-t(it)+")"}}),i.drawLabels(Re,Ce,{vals:Pe,layer:Ct,transFn:Ve,labelFns:Ze}));var Le=[et].concat(Je.gauge.steps),ze=bt.selectAll("g.bg-arc").data(Le);ze.enter().append("g").classed("bg-arc",!0).append("path"),ze.select("path").call(nn).call(A),ze.exit().remove();var je=Rt(Je.gauge.bar.thickness),Ne=bt.selectAll("g.value-arc").data([Je.gauge.bar]);Ne.enter().append("g").classed("value-arc",!0).append("path");var mt,Tt,xt,st=Ne.select("path");v(Vt)?(st.transition().duration(Vt.duration).ease(Vt.easing).each("end",function(){Ft&&Ft()}).each("interrupt",function(){Ft&&Ft()}).attrTween("d",(mt=je,Tt=ut(Te[0].lastY),xt=ut(Te[0].y),function(){var jt=x(Tt,xt);return function(it){return mt.endAngle(jt(it))()}})),Je._lastValue=Te[0].y):st.attr("d","number"==typeof Te[0].y?je.endAngle(ut(Te[0].y)):"M0,0Z"),st.call(A),Ne.exit().remove(),Le=[];var zt=Je.gauge.threshold.value;(zt||0===zt)&&Le.push({range:[zt,zt],color:Je.gauge.threshold.color,line:{color:Je.gauge.threshold.line.color,width:Je.gauge.threshold.line.width},thickness:Je.gauge.threshold.thickness});var gt=bt.selectAll("g.threshold-arc").data(Le);gt.enter().append("g").classed("threshold-arc",!0).append("path"),gt.select("path").call(nn).call(A),gt.exit().remove();var Bt=bt.selectAll("g.gauge-outline").data([tt]);Bt.enter().append("g").classed("gauge-outline",!0).append("path"),Bt.select("path").call(nn).call(A),Bt.exit().remove()}(S,0,V,{radius:le,innerRadius:ue,gauge:ge,layer:we,size:q,gaugeBg:Q,gaugeOutline:$,transitionOpts:R,onComplete:L});var ke=oe.selectAll("g.bullet").data(G?V:[]);ke.exit().remove();var De=oe.selectAll("g.bulletaxis").data(G?V:[]);De.exit().remove(),G&&function(Re,ve,Te,Ie){var Ce,Pe,Ve,qe,Je,lt=Te[0].trace,He=Ie.gauge,$e=Ie.layer,et=Ie.gaugeBg,tt=Ie.gaugeOutline,ft=Ie.size,bt=lt.domain,Ct=Ie.transitionOpts,Vt=Ie.onComplete;He.enter().append("g").classed("bullet",!0),He.attr("transform",r(ft.l,ft.t)),$e.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),$e.selectAll("g.xbulletaxistick,path,text").remove();var Ft=ft.h,ht=lt.gauge.bar.thickness*Ft,ut=bt.x[0],Rt=bt.x[0]+(bt.x[1]-bt.x[0])*(lt._hasNumber||lt._hasDelta?1-d.bulletNumberDomainSize:1);function nn(ze){ze.attr("width",function(je){return Math.max(0,Ce.c2p(je.range[1])-Ce.c2p(je.range[0]))}).attr("x",function(je){return Ce.c2p(je.range[0])}).attr("y",function(je){return.5*(1-je.thickness)*Ft}).attr("height",function(je){return je.thickness*Ft})}(Ce=M(Re,lt.gauge.axis))._id="xbulletaxis",Ce.domain=[ut,Rt],Ce.setScale(),Pe=i.calcTicks(Ce),Ve=i.makeTransTickFn(Ce),qe=i.getTickSigns(Ce)[2],Je=ft.t+ft.h,Ce.visible&&(i.drawTicks(Re,Ce,{vals:"inside"===Ce.ticks?i.clipEnds(Ce,Pe):Pe,layer:$e,path:i.makeTickPath(Ce,Je,qe),transFn:Ve}),i.drawLabels(Re,Ce,{vals:Pe,layer:$e,transFn:Ve,labelFns:i.makeLabelFns(Ce,Je)}));var cn=[et].concat(lt.gauge.steps),Ze=He.selectAll("g.bg-bullet").data(cn);Ze.enter().append("g").classed("bg-bullet",!0).append("rect"),Ze.select("rect").call(nn).call(A),Ze.exit().remove();var Qe=He.selectAll("g.value-bullet").data([lt.gauge.bar]);Qe.enter().append("g").classed("value-bullet",!0).append("rect"),Qe.select("rect").attr("height",ht).attr("y",(Ft-ht)/2).call(A),v(Ct)?Qe.select("rect").transition().duration(Ct.duration).ease(Ct.easing).each("end",function(){Vt&&Vt()}).each("interrupt",function(){Vt&&Vt()}).attr("width",Math.max(0,Ce.c2p(Math.min(lt.gauge.axis.range[1],Te[0].y)))):Qe.select("rect").attr("width","number"==typeof Te[0].y?Math.max(0,Ce.c2p(Math.min(lt.gauge.axis.range[1],Te[0].y))):0),Qe.exit().remove();var Ge=Te.filter(function(){return lt.gauge.threshold.value||0===lt.gauge.threshold.value}),rt=He.selectAll("g.threshold-bullet").data(Ge);rt.enter().append("g").classed("threshold-bullet",!0).append("line"),rt.select("line").attr("x1",Ce.c2p(lt.gauge.threshold.value)).attr("x2",Ce.c2p(lt.gauge.threshold.value)).attr("y1",(1-lt.gauge.threshold.thickness)/2*Ft).attr("y2",(1-(1-lt.gauge.threshold.thickness)/2)*Ft).call(y.stroke,lt.gauge.threshold.line.color).style("stroke-width",lt.gauge.threshold.line.width),rt.exit().remove();var Le=He.selectAll("g.gauge-outline").data([tt]);Le.enter().append("g").classed("gauge-outline",!0).append("rect"),Le.select("rect").call(nn).call(A),Le.exit().remove()}(S,0,V,{gauge:ke,layer:De,size:q,gaugeBg:Q,gaugeOutline:$,transitionOpts:R,onComplete:L});var Ee=oe.selectAll("text.title").data(V);Ee.exit().remove(),Ee.enter().append("text").classed("title",!0),Ee.attr("text-anchor",function(){return G?m.right:m[K.title.align]}).text(K.title.text).call(n.font,K.title.font).call(s.convertToTspans,S),Ee.attr("transform",function(){var Re,ve=q.l+q.w*l[K.title.align],Te=d.titlePadding,Ie=n.bBox(Ee.node());return j?(H&&(Re=K.gauge.axis.visible?n.bBox(we.node()).top-Te-Ie.bottom:q.t+q.h/2-le/2-Ie.bottom-Te),G&&(Re=Y-(Ie.top+Ie.bottom)/2,ve=q.l-d.bulletPadding*q.w)):Re=K._numbersTop-Te-Ie.bottom,r(ve,Re)})})}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../mesh3d/attributes"),e=_("../../plots/attributes"),r=_("../../lib/extend").extendFlat,t=_("../../plot_api/edit_types").overrideAll,a=ae.exports=t(r({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),valuehoverformat:x("value",1),showlegend:r({},e.showlegend,{dflt:!1})},g("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:b.opacity,lightposition:b.lightposition,lighting:b.lighting,flatshading:b.flatshading,contour:b.contour,hoverinfo:r({},e.hoverinfo)}),"calc","nested");a.flatshading.dflt=!0,a.lighting.facenormalsepsilon.dflt=0,a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/calc"),x=_("../streamtube/calc").processGrid,T=_("../streamtube/calc").filter;ae.exports=function(b,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=T(e.x,e._len),e._y=T(e.y,e._len),e._z=T(e.z,e._len),e._value=T(e.value,e._len);var r=x(e);e._gridFill=r.fill,e._Xs=r.Xs,e._Ys=r.Ys,e._Zs=r.Zs,e._len=r.len;for(var t=1/0,a=-1/0,n=0;n<e._len;n++){var d=e._value[n];t=Math.min(t,d),a=Math.max(a,d)}e._minValues=t,e._maxValues=a,e._vMin=null==e.isomin?t:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?a:e.isomax,g(b,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1041}],864:[function(_,ae,ie){"use strict";var g=_("../../../stackgl_modules").gl_mesh3d,x=_("../../lib/gl_format_color").parseColorScale,T=_("../../lib/str2rgbarray"),b=_("../../components/colorscale").extractOpts,e=_("../../plots/gl3d/zip3"),r=function(s,i){for(var u=i.length-1;u>0;u--){var f=Math.min(i[u],i[u-1]),p=Math.max(i[u],i[u-1]);if(p>f&&f<s&&s<=p)return{id:u,distRatio:(p-s)/(p-f)}}return{id:0,distRatio:0}};function t(s,i,u){this.scene=s,this.uid=u,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var a=t.prototype;a.handlePick=function(s){if(s.object===this.mesh){var i=s.data.index,f=this.data._meshY[i],p=this.data._meshZ[i],y=this.data._Ys.length,m=this.data._Zs.length,l=r(this.data._meshX[i],this.data._Xs).id,w=r(f,this.data._Ys).id,v=r(p,this.data._Zs).id,A=s.index=v+m*w+m*y*l;s.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&void 0!==M[A]?s.textLabel=M[A]:M&&(s.textLabel=M),!0}},a.update=function(s){var i=this.scene,u=i.fullSceneLayout;function f(m,l,w,v){return l.map(function(A){return m.d2l(A,0,v)*w})}this.data=d(s);var p={positions:e(f(u.xaxis,s._meshX,i.dataScale[0],s.xcalendar),f(u.yaxis,s._meshY,i.dataScale[1],s.ycalendar),f(u.zaxis,s._meshZ,i.dataScale[2],s.zcalendar)),cells:e(s._meshI,s._meshJ,s._meshK),lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:T(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},y=b(s);p.vertexIntensity=s._meshIntensity,p.vertexIntensityBounds=[y.min,y.max],p.colormap=x(s),this.mesh.update(p)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function d(s){s._meshI=[],s._meshJ=[],s._meshK=[];var i,u,f,p,y,m,l,w=s.surface.show,v=s.spaceframe.show,A=s.surface.fill,M=s.spaceframe.fill,k=!1,E=!1,P=0,S=s._Xs,F=s._Ys,R=s._Zs,D=S.length,L=F.length,B=R.length,V=n.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),Z=function(He,$e,et){switch(V){case 5:return et+B*$e+B*L*He;case 4:return et+B*He+B*D*$e;case 3:return $e+L*et+L*B*He;case 2:return $e+L*He+L*D*et;case 1:return He+D*et+D*B*$e;default:return He+D*$e+D*L*et}},Y=s._minValues,ee=s._maxValues,Q=s._vMin,$=s._vMax;function K(He,$e,et){for(var tt=m.length,ft=u;ft<tt;ft++)if(He===f[ft]&&$e===p[ft]&&et===y[ft])return ft;return-1}function oe(){u=i}function j(){f=[],p=[],y=[],m=[],i=0,oe()}function H(He,$e,et,tt){return f.push(He),p.push($e),y.push(et),m.push(tt),++i-1}function G(He,$e,et){for(var tt=[],ft=0;ft<He.length;ft++)tt[ft]=He[ft]*(1-et)+et*$e[ft];return tt}function re(He){l=He}function q(He,$e){return"all"===He||null===He||He.indexOf($e)>-1}function te(He,$e){return null===He?$e:He}function ne(He,$e,et){oe();var ft,bt,rt,Le,ze,je,Ne,st,mt,Tt,xt,zt,gt,Bt,jt,Ct=[$e],Vt=[et];if(l>=1)Ct=[$e],Vt=[et];else if(l>0){var Ft=(Le=et,Tt=G(st=function(it,Mt,qt){for(var Wt=[],an=0;an<it.length;an++)Wt[an]=(it[an]+Mt[an]+qt[an])/3;return Wt}(ze=(rt=$e)[0],je=rt[1],Ne=rt[2]),ze,mt=Math.sqrt(1-l)),{xyzv:[[ze,je,xt=G(st,je,mt)],[xt,Tt,ze],[je,Ne,zt=G(st,Ne,mt)],[zt,xt,je],[Ne,ze,Tt],[Tt,zt,Ne]],abc:[[gt=Le[0],Bt=Le[1],-1],[-1,-1,gt],[Bt,jt=Le[2],-1],[-1,-1,Bt],[jt,gt,-1],[-1,-1,jt]]});Ct=Ft.xyzv,Vt=Ft.abc}for(var ht=0;ht<Ct.length;ht++){$e=Ct[ht],et=Vt[ht];for(var ut=[],Rt=0;Rt<3;Rt++){var nn=$e[Rt][0],cn=$e[Rt][1],Ze=$e[Rt][2],Qe=$e[Rt][3],Ge=et[Rt]>-1?et[Rt]:K(nn,cn,Ze);ut[Rt]=Ge>-1?Ge:H(nn,cn,Ze,te(He,Qe))}ft=ut[1],bt=ut[2],s._meshI.push(ut[0]),s._meshJ.push(ft),s._meshK.push(bt),++P}}function le(He,$e,et,tt){var ft=He[3];ft<et&&(ft=et),ft>tt&&(ft=tt);for(var bt=(He[3]-ft)/(He[3]-$e[3]+1e-9),Ct=[],Vt=0;Vt<4;Vt++)Ct[Vt]=(1-bt)*He[Vt]+bt*$e[Vt];return Ct}function ue(He,$e,et){return He>=$e&&He<=et}function de(He){var $e=.001*($-Q);return He>=Q-$e&&He<=$+$e}function he(He){for(var $e=[],et=0;et<4;et++){var tt=He[et];$e.push([s._x[tt],s._y[tt],s._z[tt],s._value[tt]])}return $e}function be(He,$e,et,tt,ft,bt){bt||(bt=1),et=[-1,-1,-1];var Ct=!1,Vt=[ue($e[0][3],tt,ft),ue($e[1][3],tt,ft),ue($e[2][3],tt,ft)];if(!Vt[0]&&!Vt[1]&&!Vt[2])return!1;var Ft=function(ut,Rt,nn){return de(Rt[0][3])&&de(Rt[1][3])&&de(Rt[2][3])?(ne(ut,Rt,nn),!0):bt<3&&be(ut,Rt,nn,Q,$,++bt)};if(Vt[0]&&Vt[1]&&Vt[2])return Ft(He,$e,et)||Ct;var ht=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(ut){if(Vt[ut[0]]&&Vt[ut[1]]&&!Vt[ut[2]]){var Rt=$e[ut[0]],nn=$e[ut[1]],cn=$e[ut[2]],Ze=le(cn,Rt,tt,ft),Qe=le(cn,nn,tt,ft);Ct=Ft(He,[Qe,Ze,Rt],[-1,-1,et[ut[0]]])||Ct,Ct=Ft(He,[Rt,nn,Qe],[et[ut[0]],et[ut[1]],-1])||Ct,ht=!0}}),ht||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(ut){if(Vt[ut[0]]&&!Vt[ut[1]]&&!Vt[ut[2]]){var Rt=$e[ut[0]],cn=$e[ut[2]],Ze=le($e[ut[1]],Rt,tt,ft),Qe=le(cn,Rt,tt,ft);Ct=Ft(He,[Qe,Ze,Rt],[-1,-1,et[ut[0]]])||Ct,ht=!0}}),Ct}function ge(He,$e,et,tt){var Ft,ht,ut,Rt,ft=!1,bt=he($e),Ct=[ue(bt[0][3],et,tt),ue(bt[1][3],et,tt),ue(bt[2][3],et,tt),ue(bt[3][3],et,tt)];if(!(Ct[0]||Ct[1]||Ct[2]||Ct[3]))return ft;if(Ct[0]&&Ct[1]&&Ct[2]&&Ct[3])return E&&(Ft=He,ht=bt,ut=$e,(Rt=function(nn,cn,Ze){ne(Ft,[ht[nn],ht[cn],ht[Ze]],[ut[nn],ut[cn],ut[Ze]])})(0,1,2),Rt(3,0,1),Rt(2,3,0),ft=void Rt(1,2,3)||ft),ft;var Vt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ft){if(Ct[Ft[0]]&&Ct[Ft[1]]&&Ct[Ft[2]]&&!Ct[Ft[3]]){var ht=bt[Ft[0]],ut=bt[Ft[1]],Rt=bt[Ft[2]],nn=bt[Ft[3]];if(E)ft=ne(He,[ht,ut,Rt],[$e[Ft[0]],$e[Ft[1]],$e[Ft[2]]])||ft;else{var cn=le(nn,ht,et,tt),Ze=le(nn,ut,et,tt),Qe=le(nn,Rt,et,tt);ft=ne(null,[cn,Ze,Qe],[-1,-1,-1])||ft}Vt=!0}}),Vt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ft){if(Ct[Ft[0]]&&Ct[Ft[1]]&&!Ct[Ft[2]]&&!Ct[Ft[3]]){var ht=bt[Ft[0]],ut=bt[Ft[1]],Rt=bt[Ft[2]],nn=bt[Ft[3]],cn=le(Rt,ht,et,tt),Ze=le(Rt,ut,et,tt),Qe=le(nn,ut,et,tt),Ge=le(nn,ht,et,tt);E?(ft=ne(He,[ht,Ge,cn],[$e[Ft[0]],-1,-1])||ft,ft=ne(He,[ut,Ze,Qe],[$e[Ft[1]],-1,-1])||ft):(null,Le=[cn,Ze,Qe,Ge],ze=[-1,-1,-1,-1],(je=function(Ne,st,mt){ne(null,[Le[Ne],Le[st],Le[mt]],[ze[Ne],ze[st],ze[mt]])})(0,1,2),ft=void je(2,3,0)||ft),Vt=!0}var Le,ze,je}),Vt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ft){if(Ct[Ft[0]]&&!Ct[Ft[1]]&&!Ct[Ft[2]]&&!Ct[Ft[3]]){var ht=bt[Ft[0]],Rt=bt[Ft[2]],nn=bt[Ft[3]],cn=le(bt[Ft[1]],ht,et,tt),Ze=le(Rt,ht,et,tt),Qe=le(nn,ht,et,tt);E?(ft=ne(He,[ht,cn,Ze],[$e[Ft[0]],-1,-1])||ft,ft=ne(He,[ht,Ze,Qe],[$e[Ft[0]],-1,-1])||ft,ft=ne(He,[ht,Qe,cn],[$e[Ft[0]],-1,-1])||ft):ft=ne(null,[cn,Ze,Qe],[-1,-1,-1])||ft,Vt=!0}})),ft}function we(He,$e,et,tt,ft,bt,Ct,Vt,Ft,ht,ut){var Rt=!1;return k&&(q(He,"A")&&(Rt=ge(null,[$e,et,tt,bt],ht,ut)||Rt),q(He,"B")&&(Rt=ge(null,[et,tt,ft,Ft],ht,ut)||Rt),q(He,"C")&&(Rt=ge(null,[et,bt,Ct,Ft],ht,ut)||Rt),q(He,"D")&&(Rt=ge(null,[tt,bt,Vt,Ft],ht,ut)||Rt),q(He,"E")&&(Rt=ge(null,[et,tt,bt,Ft],ht,ut)||Rt)),E&&(Rt=ge(He,[et,tt,bt,Ft],ht,ut)||Rt),Rt}function ke(He,$e,et,tt,ft,bt,Ct,Vt){return[!0===Vt[0]||be(He,he([$e,et,tt]),[$e,et,tt],bt,Ct),!0===Vt[1]||be(He,he([tt,ft,$e]),[tt,ft,$e],bt,Ct)]}function De(He,$e,et,tt,ft,bt,Ct,Vt,Ft){return Vt?ke(He,$e,et,ft,tt,bt,Ct,Ft):ke(He,et,ft,tt,$e,bt,Ct,Ft)}function Ee(He,$e,et,tt,ft,bt,Ct){var Vt,Ft,ht,ut,Rt=!1,nn=function(){Rt=be(He,[Vt,Ft,ht],[-1,-1,-1],ft,bt)||Rt,Rt=be(He,[ht,ut,Vt],[-1,-1,-1],ft,bt)||Rt},cn=Ct[0],Ze=Ct[1],Qe=Ct[2];return cn&&(Vt=G(he([Z($e,et-0,tt-0)])[0],he([Z($e-1,et-0,tt-0)])[0],cn),Ft=G(he([Z($e,et-0,tt-1)])[0],he([Z($e-1,et-0,tt-1)])[0],cn),ht=G(he([Z($e,et-1,tt-1)])[0],he([Z($e-1,et-1,tt-1)])[0],cn),ut=G(he([Z($e,et-1,tt-0)])[0],he([Z($e-1,et-1,tt-0)])[0],cn),nn()),Ze&&(Vt=G(he([Z($e-0,et,tt-0)])[0],he([Z($e-0,et-1,tt-0)])[0],Ze),Ft=G(he([Z($e-0,et,tt-1)])[0],he([Z($e-0,et-1,tt-1)])[0],Ze),ht=G(he([Z($e-1,et,tt-1)])[0],he([Z($e-1,et-1,tt-1)])[0],Ze),ut=G(he([Z($e-1,et,tt-0)])[0],he([Z($e-1,et-1,tt-0)])[0],Ze),nn()),Qe&&(Vt=G(he([Z($e-0,et-0,tt)])[0],he([Z($e-0,et-0,tt-1)])[0],Qe),Ft=G(he([Z($e-0,et-1,tt)])[0],he([Z($e-0,et-1,tt-1)])[0],Qe),ht=G(he([Z($e-1,et-1,tt)])[0],he([Z($e-1,et-1,tt-1)])[0],Qe),ut=G(he([Z($e-1,et-0,tt)])[0],he([Z($e-1,et-0,tt-1)])[0],Qe),nn()),Rt}function Re(He,$e,et,tt,ft,bt,Ct,Vt,Ft,ht,ut,Rt){var nn=He;return Rt?(k&&"even"===He&&(nn=null),we(nn,$e,et,tt,ft,bt,Ct,Vt,Ft,ht,ut)):(k&&"odd"===He&&(nn=null),we(nn,Ft,Vt,Ct,bt,ft,tt,et,$e,ht,ut))}function ve(He,$e,et,tt,ft){for(var bt=[],Ct=0,Vt=0;Vt<$e.length;Vt++)for(var Ft=$e[Vt],ht=1;ht<B;ht++)for(var ut=1;ut<L;ut++)bt.push(De(He,Z(Ft,ut-1,ht-1),Z(Ft,ut-1,ht),Z(Ft,ut,ht-1),Z(Ft,ut,ht),et,tt,(Ft+ut+ht)%2,ft&&ft[Ct]?ft[Ct]:[])),Ct++;return bt}function Te(He,$e,et,tt,ft){for(var bt=[],Ct=0,Vt=0;Vt<$e.length;Vt++)for(var Ft=$e[Vt],ht=1;ht<D;ht++)for(var ut=1;ut<B;ut++)bt.push(De(He,Z(ht-1,Ft,ut-1),Z(ht,Ft,ut-1),Z(ht-1,Ft,ut),Z(ht,Ft,ut),et,tt,(ht+Ft+ut)%2,ft&&ft[Ct]?ft[Ct]:[])),Ct++;return bt}function Ie(He,$e,et,tt,ft){for(var bt=[],Ct=0,Vt=0;Vt<$e.length;Vt++)for(var Ft=$e[Vt],ht=1;ht<L;ht++)for(var ut=1;ut<D;ut++)bt.push(De(He,Z(ut-1,ht-1,Ft),Z(ut-1,ht,Ft),Z(ut,ht-1,Ft),Z(ut,ht,Ft),et,tt,(ut+ht+Ft)%2,ft&&ft[Ct]?ft[Ct]:[])),Ct++;return bt}function Ce(He,$e,et){for(var tt=1;tt<B;tt++)for(var ft=1;ft<L;ft++)for(var bt=1;bt<D;bt++)Re(He,Z(bt-1,ft-1,tt-1),Z(bt-1,ft-1,tt),Z(bt-1,ft,tt-1),Z(bt-1,ft,tt),Z(bt,ft-1,tt-1),Z(bt,ft-1,tt),Z(bt,ft,tt-1),Z(bt,ft,tt),$e,et,(bt+ft+tt)%2)}function Pe(He,$e,et){k=!0,Ce(He,$e,et),k=!1}function Ve(He,$e,et,tt,ft,bt){for(var Ct=[],Ft=0;Ft<$e.length;Ft++)for(var ht=$e[Ft],ut=1;ut<B;ut++)for(var Rt=1;Rt<L;Rt++)Ct.push(Ee(He,ht,Rt,ut,et,tt,ft[Ft]));return Ct}function qe(He,$e,et,tt,ft,bt){for(var Ct=[],Ft=0;Ft<$e.length;Ft++)for(var ht=$e[Ft],ut=1;ut<D;ut++)for(var Rt=1;Rt<B;Rt++)Ct.push(Ee(He,ut,ht,Rt,et,tt,ft[Ft]));return Ct}function Je(He,$e,et,tt,ft,bt){for(var Ct=[],Ft=0;Ft<$e.length;Ft++)for(var ht=$e[Ft],ut=1;ut<L;ut++)for(var Rt=1;Rt<D;Rt++)Ct.push(Ee(He,Rt,ut,ht,et,tt,ft[Ft]));return Ct}function lt(He,$e){for(var et=[],tt=He;tt<$e;tt++)et.push(tt);return et}return function(){if(j(),function(){for(var Vt=0;Vt<D;Vt++)for(var Ft=0;Ft<L;Ft++)for(var ht=0;ht<B;ht++){var ut=Z(Vt,Ft,ht);H(s._x[ut],s._y[ut],s._z[ut],s._value[ut])}}(),v&&M&&(re(M),E=!0,Ce(null,Q,$),E=!1),w&&A){re(A);for(var He=s.surface.pattern,$e=s.surface.count,et=0;et<$e;et++){var tt=1===$e?.5:et/($e-1),ft=(1-tt)*Q+tt*$,bt=Math.abs(ft-Y)>Math.abs(ft-ee)?[Y,ft]:[ft,ee];Pe(He,bt[0],bt[1])}}var Ct=[[Math.min(Q,ee),Math.max(Q,ee)],[Math.min(Y,$),Math.max(Y,$)]];["x","y","z"].forEach(function(Vt){for(var Ft=[],ht=0;ht<Ct.length;ht++){var ut=0,Rt=Ct[ht][0],nn=Ct[ht][1],cn=s.slices[Vt];if(cn.show&&cn.fill){re(cn.fill);var Ze=[],Qe=[],Ge=[];if(cn.locations.length)for(var rt=0;rt<cn.locations.length;rt++){var Le=r(cn.locations[rt],"x"===Vt?S:"y"===Vt?F:R);0===Le.distRatio?Ze.push(Le.id):Le.id>0&&(Qe.push(Le.id),Ge.push("x"===Vt?[Le.distRatio,0,0]:"y"===Vt?[0,Le.distRatio,0]:[0,0,Le.distRatio]))}else Ze=lt(1,"x"===Vt?D-1:"y"===Vt?L-1:B-1);Qe.length>0&&(Ft[ut]="x"===Vt?Ve(null,Qe,Rt,nn,Ge):"y"===Vt?qe(null,Qe,Rt,nn,Ge):Je(null,Qe,Rt,nn,Ge),ut++),Ze.length>0&&(Ft[ut]="x"===Vt?ve(null,Ze,Rt,nn,Ft[ut]):"y"===Vt?Te(null,Ze,Rt,nn,Ft[ut]):Ie(null,Ze,Rt,nn,Ft[ut]),ut++)}var ze=s.caps[Vt];ze.show&&ze.fill&&(re(ze.fill),Ft[ut]="x"===Vt?ve(null,[0,D-1],Rt,nn,Ft[ut]):"y"===Vt?Te(null,[0,L-1],Rt,nn,Ft[ut]):Ie(null,[0,B-1],Rt,nn,Ft[ut]),ut++)}}),0===P&&j(),s._meshX=f,s._meshY=p,s._meshZ=y,s._meshIntensity=m,s._Xs=S,s._Ys=F,s._Zs=R}(),s}ae.exports={findNearestOnAxis:r,generateIsoMeshes:d,createIsosurfaceTrace:function(s,i){var f=g({gl:s.glplot.gl}),p=new t(s,f,i.uid);return f._trace=p,p.update(i),s.glplot.add(f),p}}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../registry"),T=_("./attributes"),b=_("../../components/colorscale/defaults");function e(r,t,a,n,d){var s=d("isomin"),i=d("isomax");null!=i&&null!=s&&s>i&&(t.isomin=null,t.isomax=null);var u=d("x"),f=d("y"),p=d("z"),y=d("value");u&&u.length&&f&&f.length&&p&&p.length&&y&&y.length?(x.getComponentMethod("calendars","handleTraceDefaults")(r,t,["x","y","z"],n),d("valuehoverformat"),["x","y","z"].forEach(function(m){d(m+"hoverformat");var l="caps."+m;d(l+".show")&&d(l+".fill");var w="slices."+m;d(w+".show")&&(d(w+".fill"),d(w+".locations"))}),d("spaceframe.show")&&d("spaceframe.fill"),d("surface.show")&&(d("surface.count"),d("surface.fill"),d("surface.pattern")),d("contour.show")&&(d("contour.color"),d("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(m){d(m)}),b(r,t,n,d,{prefix:"",cLetter:"c"}),t._length=null):t.visible=!1}ae.exports={supplyDefaults:function(r,t,a,n){e(r,t,0,n,function(d,s){return g.coerce(r,t,T,d,s)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,calc:_("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:_("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../surface/attributes"),e=_("../../plots/attributes"),r=_("../../lib/extend").extendFlat;ae.exports=r({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:T({editType:"calc"}),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},g("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:b.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:r({},b.contours.x.show,{}),color:b.contours.x.color,width:b.contours.x.width,editType:"calc"},lightposition:{x:r({},b.lightposition.x,{dflt:1e5}),y:r({},b.lightposition.y,{dflt:1e5}),z:r({},b.lightposition.z,{dflt:0}),editType:"calc"},lighting:r({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},b.lighting),hoverinfo:r({},e.hoverinfo,{editType:"calc"}),showlegend:r({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1057}],868:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/calc");ae.exports=function(x,T){T.intensity&&g(x,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(_,ae,ie){"use strict";var g=_("../../../stackgl_modules").gl_mesh3d,x=_("../../../stackgl_modules").delaunay_triangulate,T=_("../../../stackgl_modules").alpha_shape,b=_("../../../stackgl_modules").convex_hull,e=_("../../lib/gl_format_color").parseColorScale,r=_("../../lib/str2rgbarray"),t=_("../../components/colorscale").extractOpts,a=_("../../plots/gl3d/zip3");function n(p,y,m){this.scene=p,this.uid=m,this.mesh=y,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var d=n.prototype;function s(p){for(var y=[],m=p.length,l=0;l<m;l++)y[l]=r(p[l]);return y}function i(p,y,m,l){for(var w=[],v=y.length,A=0;A<v;A++)w[A]=p.d2l(y[A],0,l)*m;return w}function u(p){for(var y=[],m=p.length,l=0;l<m;l++)y[l]=Math.round(p[l]);return y}function f(p,y){for(var m=p.length,l=0;l<m;l++)if(p[l]<=-.5||p[l]>=y-.5)return!1;return!0}d.handlePick=function(p){if(p.object===this.mesh){var y=p.index=p.data.index;p.traceCoordinate=p.data._cellCenter?p.data.dataCoordinate:[this.data.x[y],this.data.y[y],this.data.z[y]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&void 0!==m[y]?p.textLabel=m[y]:m&&(p.textLabel=m),!0}},d.update=function(p){var y=this.scene,m=y.fullSceneLayout;this.data=p;var l,w=p.x.length,v=a(i(m.xaxis,p.x,y.dataScale[0],p.xcalendar),i(m.yaxis,p.y,y.dataScale[1],p.ycalendar),i(m.zaxis,p.z,y.dataScale[2],p.zcalendar));if(p.i&&p.j&&p.k){if(p.i.length!==p.j.length||p.j.length!==p.k.length||!f(p.i,w)||!f(p.j,w)||!f(p.k,w))return;l=a(u(p.i),u(p.j),u(p.k))}else l=0===p.alphahull?b(v):p.alphahull>0?T(p.alphahull,v):function(E,P){for(var S=["x","y","z"].indexOf(E),F=[],R=P.length,D=0;D<R;D++)F[D]=[P[D][(S+1)%3],P[D][(S+2)%3]];return x(F)}(p.delaunayaxis,v);var A={positions:v,cells:l,lightPosition:[p.lightposition.x,p.lightposition.y,p.lightposition.z],ambient:p.lighting.ambient,diffuse:p.lighting.diffuse,specular:p.lighting.specular,roughness:p.lighting.roughness,fresnel:p.lighting.fresnel,vertexNormalsEpsilon:p.lighting.vertexnormalsepsilon,faceNormalsEpsilon:p.lighting.facenormalsepsilon,opacity:p.opacity,contourEnable:p.contour.show,contourColor:r(p.contour.color).slice(0,3),contourWidth:p.contour.width,useFacetNormals:p.flatshading};if(p.intensity){var M=t(p);this.color="#fff";var k=p.intensitymode;A[k+"Intensity"]=p.intensity,A[k+"IntensityBounds"]=[M.min,M.max],A.colormap=e(p)}else p.vertexcolor?(this.color=p.vertexcolor[0],A.vertexColors=s(p.vertexcolor)):p.facecolor?(this.color=p.facecolor[0],A.cellColors=s(p.facecolor)):(this.color=p.color,A.meshColor=r(p.color));this.mesh.update(A)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ae.exports=function(p,y){var l=g({gl:p.glplot.gl}),w=new n(p,l,y.uid);return l._trace=w,w.update(y),p.glplot.add(l),w}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib"),T=_("../../components/colorscale/defaults"),b=_("./attributes");ae.exports=function(e,r,t,a){function n(s,i){return x.coerce(e,r,b,s,i)}function d(s){var i=s.map(function(u){var f=n(u);return f&&x.isArrayOrTypedArray(f)?f:null});return i.every(function(u){return u&&u.length===i[0].length})&&i}d(["x","y","z"])?(d(["i","j","k"]),(!r.i||r.j&&r.k)&&(!r.j||r.k&&r.i)&&(!r.k||r.i&&r.j)?(g.getComponentMethod("calendars","handleTraceDefaults")(e,r,["x","y","z"],a),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(s){n(s)}),n("contour.show")&&(n("contour.color"),n("contour.width")),"intensity"in e?(n("intensity"),n("intensitymode"),T(e,r,a,n,{prefix:"",cLetter:"c"})):(r.showscale=!1,"facecolor"in e?n("facecolor"):"vertexcolor"in e?n("vertexcolor"):n("color",t)),n("text"),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),r._length=null):r.visible=!1):r.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:_("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(_,ae,ie){"use strict";var g=_("../../lib").extendFlat,x=_("../scatter/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../components/drawing/attributes").dash,e=_("../../components/fx/attributes"),r=_("../../constants/delta.js"),t=r.INCREASING.COLOR,a=r.DECREASING.COLOR,n=x.line;function d(s){return{line:{color:g({},n.color,{dflt:s}),width:n.width,dash:b,editType:"style"},editType:"style"}}ae.exports={xperiod:x.xperiod,xperiod0:x.xperiod0,xperiodalignment:x.xperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:g({},n.width,{}),dash:g({},b,{}),editType:"style"},increasing:d(t),decreasing:d(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:g({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926}],873:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=g._,T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/align_period"),e=_("../../constants/numerical").BADNUM;function r(a,n,d,s){return{o:a,h:n,l:d,c:s}}function t(a,n,d,s,i,u){for(var f=i.makeCalcdata(n,"open"),p=i.makeCalcdata(n,"high"),y=i.makeCalcdata(n,"low"),m=i.makeCalcdata(n,"close"),l=Array.isArray(n.text),w=Array.isArray(n.hovertext),v=!0,A=null,M=!!n.xperiodalignment,k=[],E=0;E<s.length;E++){var P=s[E],S=f[E],F=p[E],R=y[E],D=m[E];if(P!==e&&S!==e&&F!==e&&R!==e&&D!==e){D===S?null!==A&&D!==A&&(v=D>A):v=D>S,A=D;var L=u(S,F,R,D);L.pos=P,L.yc=(S+D)/2,L.i=E,L.dir=v?"increasing":"decreasing",L.x=L.pos,L.y=[R,F],M&&(L.orig_p=d[E]),l&&(L.tx=n.text[E]),w&&(L.htx=n.hovertext[E]),k.push(L)}else k.push({pos:P,empty:!0})}return n._extremes[i._id]=T.findExtremes(i,g.concat(y,p),{padded:!0}),k.length&&(k[0].t={labels:{open:x(a,"open:")+" ",high:x(a,"high:")+" ",low:x(a,"low:")+" ",close:x(a,"close:")+" "}}),k}ae.exports={calc:function(a,n){var d=T.getFromId(a,n.xaxis),s=T.getFromId(a,n.yaxis),i=function(m,l,w){var v=w._minDiff;if(!v){var A,M=m._fullData,k=[];for(v=1/0,A=0;A<M.length;A++){var E=M[A];if("ohlc"===E.type&&!0===E.visible&&E.xaxis===l._id){k.push(E);var P=l.makeCalcdata(E,"x");E._origX=P;var S=b(w,l,"x",P).vals;E._xcalc=S;var F=g.distinctVals(S).minDiff;F&&isFinite(F)&&(v=Math.min(v,F))}}for(v===1/0&&(v=1),A=0;A<k.length;A++)k[A]._minDiff=v}return v*w.tickwidth}(a,d,n),u=n._minDiff;n._minDiff=null;var f=n._origX;n._origX=null;var p=n._xcalc;n._xcalc=null;var y=t(a,n,f,p,s,r);return n._extremes[d._id]=T.findExtremes(d,p,{vpad:u/2}),y.length?(g.extendFlat(y[0].t,{wHover:u/2,tickLen:i}),y):[{t:{empty:!0}}]},calcCommon:t}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./ohlc_defaults"),T=_("../scatter/period_defaults"),b=_("./attributes");function e(r,t,a,n){a(n+".line.color"),a(n+".line.width",t.line.width),a(n+".line.dash",t.line.dash)}ae.exports=function(r,t,a,n){function d(s,i){return g.coerce(r,t,b,s,i)}x(r,t,d,n)?(T(r,t,n,d,{x:!0}),d("xhoverformat"),d("yhoverformat"),d("line.width"),d("line.dash"),e(0,t,d,"increasing"),e(0,t,d,"decreasing"),d("text"),d("hovertext"),d("tickwidth"),n._requestRangeslider[t.xaxis]=!0):t.visible=!1}},{"../../lib":503,"../scatter/period_defaults":946,"./attributes":872,"./ohlc_defaults":877}],875:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("../../lib"),T=_("../../components/fx"),b=_("../../components/color"),e=_("../../lib").fillText,r=_("../../constants/delta.js"),t={increasing:r.INCREASING.SYMBOL,decreasing:r.DECREASING.SYMBOL};function a(s,i,u,f){var p,y,m=s.cd,l=s.xa,w=m[0].trace,v=m[0].t,A=w.type,M="ohlc"===A?"l":"min",k="ohlc"===A?"h":"max",E=v.bPos||0,P=v.bdPos||v.tickLen,S=v.wHover,F=Math.min(1,P/Math.abs(l.r2c(l.range[1])-l.r2c(l.range[0])));function R(ee){var Q=ee.pos+E-i;return T.inbox(Q-S,Q+S,p)}function D(ee){var Q=ee[M],$=ee[k];return Q===$||T.inbox(Q-u,$-u,p)}function L(ee){return(R(ee)+D(ee))/2}p=s.maxHoverDistance-F,y=s.maxSpikeDistance-F;var B=T.getDistanceFunction(f,R,D,L);if(T.getClosest(m,B,s),!1===s.index)return null;var V=m[s.index];if(V.empty)return null;var Z=w[V.dir],Y=Z.line.color;return s.color=b.opacity(Y)&&Z.line.width?Y:Z.fillcolor,s.x0=l.c2p(V.pos+E-P,!0),s.x1=l.c2p(V.pos+E+P,!0),s.xLabelVal=void 0!==V.orig_p?V.orig_p:V.pos,s.spikeDistance=L(V)*y/p,s.xSpike=l.c2p(V.pos,!0),s}function n(s,i,u,f){var p=s.cd,y=s.ya,m=p[0].trace,l=p[0].t,w=[],v=a(s,i,u,f);if(!v)return[];var A=p[v.index].hi||m.hoverinfo,M=A.split("+");if("all"!==A&&-1===M.indexOf("y"))return[];for(var k=["high","open","close","low"],E={},P=0;P<k.length;P++){var S,F=k[P],R=m[F][v.index],D=y.c2p(R,!0);R in E?(S=E[R]).yLabel+="<br>"+l.labels[F]+g.hoverLabelText(y,R,m.yhoverformat):((S=x.extendFlat({},v)).y0=S.y1=D,S.yLabelVal=R,S.yLabel=l.labels[F]+g.hoverLabelText(y,R,m.yhoverformat),S.name="",w.push(S),E[R]=S)}return w}function d(s,i,u,f){var p=s.cd,y=s.ya,m=p[0].trace,l=p[0].t,w=a(s,i,u,f);if(!w)return[];var v=p[w.index],A=w.index=v.i,M=v.dir;function k(L){return l.labels[L]+g.hoverLabelText(y,m[L][A],m.yhoverformat)}var E=v.hi||m.hoverinfo,P=E.split("+"),S="all"===E,F=S||-1!==P.indexOf("y"),R=S||-1!==P.indexOf("text"),D=F?[k("open"),k("high"),k("low"),k("close")+"  "+t[M]]:[];return R&&e(v,m,D),w.extraText=D.join("<br>"),w.y0=w.y1=y.c2p(v.yc,!0),[w]}ae.exports={hoverPoints:function(s,i,u,f){return s.cd[0].trace.hoverlabel.split?n(s,i,u,f):d(s,i,u,f)},hoverSplit:n,hoverOnPoints:d}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"ohlc",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc").calc,plot:_("./plot"),style:_("./style"),hoverPoints:_("./hover").hoverPoints,selectPoints:_("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib");ae.exports=function(T,b,e,r){var t=e("x"),a=e("open"),n=e("high"),d=e("low"),s=e("close");if(e("hoverlabel.split"),g.getComponentMethod("calendars","handleTraceDefaults")(T,b,["x"],r),a&&n&&d&&s){var i=Math.min(a.length,n.length,d.length,s.length);return t&&(i=Math.min(i,x.minRowLength(t))),b._length=i,i}}},{"../../lib":503,"../../registry":638}],878:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib");ae.exports=function(T,b,e,r){var t=b.yaxis,a=b.xaxis,n=!!a.rangebreaks;x.makeTraceGroups(r,e,"trace ohlc").each(function(d){var s=g.select(this),i=d[0],u=i.t;if(!0!==i.trace.visible||u.empty)s.remove();else{var f=u.tickLen,p=s.selectAll("path").data(x.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",function(y){if(y.empty)return"M0,0Z";var m=a.c2p(y.pos-f,!0),l=a.c2p(y.pos+f,!0),w=n?(m+l)/2:a.c2p(y.pos,!0);return"M"+m+","+t.c2p(y.o,!0)+"H"+w+"M"+w+","+t.c2p(y.h,!0)+"V"+t.c2p(y.l,!0)+"M"+l+","+t.c2p(y.c,!0)+"H"+w})}})}},{"../../lib":503,"@plotly/d3":58}],879:[function(_,ae,ie){"use strict";ae.exports=function(g,x){var T,b=g.cd,e=g.xaxis,r=g.yaxis,t=[],a=b[0].t.bPos||0;if(!1===x)for(T=0;T<b.length;T++)b[T].selected=0;else for(T=0;T<b.length;T++){var n=b[T];x.contains([e.c2p(n.pos+a),r.c2p(n.yc)],null,n.i,g)?(t.push({pointNumber:n.i,x:e.c2d(n.pos),y:r.c2d(n.yc)}),n.selected=1):n.selected=0}return t}},{}],880:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color");ae.exports=function(b,e,r){var t=r||g.select(b).selectAll("g.ohlclayer").selectAll("g.trace");t.style("opacity",function(a){return a[0].trace.opacity}),t.each(function(a){var n=a[0].trace;g.select(this).selectAll("path").each(function(d){if(!d.empty){var s=n[d.dir].line;g.select(this).style("fill","none").call(T.stroke,s.color).call(x.dashLine,s.dash,s.width).style("opacity",n.selectedpoints&&!d.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(_,ae,ie){"use strict";var g=_("../../lib/extend").extendFlat,x=_("../../plots/attributes"),T=_("../../plots/font_attributes"),b=_("../../components/colorscale/attributes"),e=_("../../plots/template_attributes").hovertemplateAttrs,r=_("../../plots/domain").attributes,t=g({editType:"calc"},b("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ae.exports={domain:r({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:g({},x.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:T({editType:"calc"}),tickfont:T({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:t,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(_,ae,ie){"use strict";var g=_("../../plots/get_data").getModuleCalcData,x=_("./plot");ie.name="parcats",ie.plot=function(T,b,e,r){var t=g(T.calcdata,"parcats");t.length&&x(T,t[0],e,r)},ie.clean=function(T,b,e,r){var t=r._has&&r._has("parcats"),a=b._has&&b._has("parcats");t&&!a&&r._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(_,ae,ie){"use strict";var g=_("../../lib/gup").wrap,x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/calc"),b=_("../../lib/filter_unique.js"),e=_("../../components/drawing"),r=_("../../lib"),t=_("fast-isnumeric");function a(s,i,u){s.valueInds.push(i),s.count+=u}function n(s,i,u){return{categoryInds:s,color:i,rawColor:u,valueInds:[],count:0}}function d(s,i,u){s.valueInds.push(i),s.count+=u}ae.exports=function(s,i){var u=r.filterVisible(i.dimensions);if(0===u.length)return[];var f,p,y,m=u.map(function(K){var oe;if("trace"===K.categoryorder)oe=null;else if("array"===K.categoryorder)oe=K.categoryarray;else{oe=b(K.values);for(var j=!0,H=0;H<oe.length;H++)if(!t(oe[H])){j=!1;break}oe.sort(j?r.sorterAsc:void 0),"category descending"===K.categoryorder&&(oe=oe.reverse())}return function(G,re){re=null==re?[]:re.map(function(be){return be});var q={},te={},ne=[];re.forEach(function(be,ge){q[be]=0,te[be]=ge});for(var le=0;le<G.length;le++){var ue,de=G[le];void 0===q[de]?(q[de]=1,ue=re.push(de)-1,te[de]=ue):(q[de]++,ue=te[de]),ne.push(ue)}var he=re.map(function(be){return q[be]});return{uniqueValues:re,uniqueCounts:he,inds:ne}}(K.values,oe)});f=r.isArrayOrTypedArray(i.counts)?i.counts:[i.counts],function(K){var oe;if(function(j){for(var H=new Array(j.length),G=0;G<j.length;G++){if(j[G]<0||j[G]>=j.length||void 0!==H[j[G]])return!1;H[j[G]]=!0}return!0}(K.map(function(j){return j.displayindex})))for(oe=0;oe<K.length;oe++)K[oe]._displayindex=K[oe].displayindex;else for(oe=0;oe<K.length;oe++)K[oe]._displayindex=oe}(u),u.forEach(function(K,oe){!function(j,H){j._categoryarray=H.uniqueValues,j._ticktext=null==j.ticktext?[]:j.ticktext.slice();for(var G=j._ticktext.length;G<H.uniqueValues.length;G++)j._ticktext.push(H.uniqueValues[G])}(K,m[oe])});var l,w=i.line;w?(x(i,"line")&&T(s,i,{vals:i.line.color,containerStr:"line",cLetter:"c"}),l=e.tryColorscale(w)):l=r.identity;var v,A,M,k,E,P=u[0].values.length,S={},F=m.map(function(K){return K.inds});for(y=0,v=0;v<P;v++){var R=[];for(A=0;A<F.length;A++)R.push(F[A][v]);y+=p=f[v%f.length];var D=(M=v,k=void 0,E=void 0,r.isArrayOrTypedArray(w.color)?E=k=w.color[M%w.color.length]:k=w.color,{color:l(k),rawColor:E}),L=R+"-"+D.rawColor;void 0===S[L]&&(S[L]=n(R,D.color,D.rawColor)),d(S[L],v,p)}var B,K,oe,j,H,V=u.map(function(K,oe){return{dimensionInd:oe,containerInd:K._index,displayInd:K._displayindex,dimensionLabel:K.label,count:y,categories:[],dragX:null}});for(v=0;v<P;v++)for(p=f[v%f.length],A=0;A<V.length;A++){var Z=V[A].containerInd,Y=m[A].inds[v],ee=V[A].categories;void 0===ee[Y]&&(ee[Y]={dimensionInd:A,categoryInd:B=Y,categoryValue:i.dimensions[Z]._categoryarray[Y],displayInd:B,categoryLabel:i.dimensions[Z]._ticktext[Y],valueInds:[],count:0,dragY:null}),a(ee[Y],v,p)}return g((oe=S,j=y,H=(K=V).map(function(G){return G.categories.length}).reduce(function(G,re){return Math.max(G,re)}),{dimensions:K,paths:oe,trace:void 0,maxCats:H,count:j}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("../../plots/domain").defaults,e=_("../../plots/array_container_defaults"),r=_("./attributes"),t=_("../parcoords/merge_length");function a(n,d){function s(l,w){return g.coerce(n,d,r.dimensions,l,w)}var i=s("values"),u=s("visible");if(i&&i.length||(u=d.visible=!1),u){s("label"),s("displayindex",d._index);var f,p=n.categoryarray,y=Array.isArray(p)&&p.length>0;y&&(f="array");var m=s("categoryorder",f);"array"===m?(s("categoryarray"),s("ticktext")):(delete n.categoryarray,delete n.ticktext),y||"array"!==m||(d.categoryorder="trace")}}ae.exports=function(n,d,s,i){function u(l,w){return g.coerce(n,d,r,l,w)}var f=e(n,d,{name:"dimensions",handleItemDefaults:a}),p=function(l,w,v,A,M){M("line.shape"),M("line.hovertemplate");var k=M("line.color",A.colorway[0]);if(x(l,"line")&&g.isArrayOrTypedArray(k)){if(k.length)return M("line.colorscale"),T(l,w,A,M,{prefix:"line.",cLetter:"c"}),k.length;w.line.color=v}return 1/0}(n,d,s,i,u);b(d,i,u),Array.isArray(f)&&f.length||(d.visible=!1),t(d,f,"values",p),u("hoveron"),u("hovertemplate"),u("arrangement"),u("bundlecolors"),u("sortpaths"),u("counts");var y={family:i.font.family,size:Math.round(i.font.size),color:i.font.color};g.coerceFont(u,"labelfont",y);var m={family:i.font.family,size:Math.round(i.font.size/1.2),color:i.font.color};g.coerceFont(u,"tickfont",m)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":897,"./attributes":881}],885:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:_("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("d3-interpolate").interpolateNumber,T=_("../../plot_api/plot_api"),b=_("../../components/fx"),e=_("../../lib"),r=e.strTranslate,t=_("../../components/drawing"),a=_("tinycolor2"),n=_("../../lib/svg_text_utils");function d(j,H,G,re){var q=j.map(ee.bind(0,H,G)),te=re.selectAll("g.parcatslayer").data([null]);te.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var ne=te.selectAll("g.trace.parcats").data(q,s),le=ne.enter().append("g").attr("class","trace parcats");ne.attr("transform",function(Ee){return r(Ee.x,Ee.y)}),le.append("g").attr("class","paths");var ue=ne.select("g.paths").selectAll("path.path").data(function(Ee){return Ee.paths},s);ue.attr("fill",function(Ee){return Ee.model.color});var de=ue.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ee){return Ee.model.color}).attr("fill-opacity",0);w(de),ue.attr("d",function(Ee){return Ee.svgD}),de.empty()||ue.sort(u),ue.exit().remove(),ue.on("mouseover",f).on("mouseout",p).on("click",l),le.append("g").attr("class","dimensions");var he=ne.select("g.dimensions").selectAll("g.dimension").data(function(Ee){return Ee.dimensions},s);he.enter().append("g").attr("class","dimension"),he.attr("transform",function(Ee){return r(Ee.x,0)}),he.exit().remove();var be=he.selectAll("g.category").data(function(Ee){return Ee.categories},s),ge=be.enter().append("g").attr("class","category");be.attr("transform",function(Ee){return r(0,Ee.y)}),ge.append("rect").attr("class","catrect").attr("pointer-events","none"),be.select("rect.catrect").attr("fill","none").attr("width",function(Ee){return Ee.width}).attr("height",function(Ee){return Ee.height}),A(ge);var we=be.selectAll("rect.bandrect").data(function(Ee){return Ee.bands},s);we.each(function(){e.raiseToTop(this)}),we.attr("fill",function(Ee){return Ee.color});var ke=we.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ee){return Ee.color}).attr("fill-opacity",0);we.attr("fill",function(Ee){return Ee.color}).attr("width",function(Ee){return Ee.width}).attr("height",function(Ee){return Ee.height}).attr("y",function(Ee){return Ee.y}).attr("cursor",function(Ee){return"fixed"===Ee.parcatsViewModel.arrangement?"default":"perpendicular"===Ee.parcatsViewModel.arrangement?"ns-resize":"move"}),M(ke),we.exit().remove(),ge.append("text").attr("class","catlabel").attr("pointer-events","none");var De=H._fullLayout.paper_bgcolor;be.select("text.catlabel").attr("text-anchor",function(Ee){return i(Ee)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",n.makeTextShadow(De)).style("fill","rgb(0, 0, 0)").attr("x",function(Ee){return i(Ee)?Ee.width+5:-5}).attr("y",function(Ee){return Ee.height/2}).text(function(Ee){return Ee.model.categoryLabel}).each(function(Ee){t.font(g.select(this),Ee.parcatsViewModel.categorylabelfont),n.convertToTspans(g.select(this),H)}),ge.append("text").attr("class","dimlabel"),be.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ee){return"fixed"===Ee.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(Ee){return Ee.width/2}).attr("y",-5).text(function(Ee,Re){return 0===Re?Ee.parcatsViewModel.model.dimensions[Ee.model.dimensionInd].dimensionLabel:null}).each(function(Ee){t.font(g.select(this),Ee.parcatsViewModel.labelfont)}),be.selectAll("rect.bandrect").on("mouseover",F).on("mouseout",R),be.exit().remove(),he.call(g.behavior.drag().origin(function(Ee){return{x:Ee.x,y:0}}).on("dragstart",D).on("drag",L).on("dragend",B)),ne.each(function(Ee){Ee.traceSelection=g.select(this),Ee.pathSelection=g.select(this).selectAll("g.paths").selectAll("path.path"),Ee.dimensionSelection=g.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ne.exit().remove()}function s(j){return j.key}function i(j){return j.model.dimensionInd===j.parcatsViewModel.dimensions[j.parcatsViewModel.dimensions.length-1].model.dimensionInd}function u(j,H){return j.model.rawColor>H.model.rawColor?1:j.model.rawColor<H.model.rawColor?-1:0}function f(j){if(!j.parcatsViewModel.dragDimension&&-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),v(g.select(this));var H=y(j),G=m(j);if(j.parcatsViewModel.graphDiv.emit("plotly_hover",{points:H,event:g.event,constraints:G}),-1===j.parcatsViewModel.hoverinfoItems.indexOf("none")){var re,q,te,ne=g.mouse(this)[0],le=j.parcatsViewModel.graphDiv,ue=j.parcatsViewModel.trace,de=le._fullLayout,he=de._paperdiv.node().getBoundingClientRect(),be=j.parcatsViewModel.graphDiv.getBoundingClientRect();for(te=0;te<j.leftXs.length-1;te++)if(j.leftXs[te]+j.dimWidths[te]-2<=ne&&ne<=j.leftXs[te+1]+2){var ge=j.parcatsViewModel.dimensions[te];re=(ge.x+ge.width+j.parcatsViewModel.dimensions[te+1].x)/2,q=(j.topYs[te]+j.topYs[te+1]+j.height)/2;break}var ke=j.parcatsViewModel.x+re,De=j.parcatsViewModel.y+q,Ee=a.mostReadable(j.model.color,["black","white"]),Re=j.model.count,ve=Re/j.parcatsViewModel.model.count,Te={countLabel:Re,probabilityLabel:ve.toFixed(3)},Ie=[];-1!==j.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ie.push(["Count:",Te.countLabel].join(" ")),-1!==j.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ie.push(["P:",Te.probabilityLabel].join(" "));var Ce=Ie.join("<br>"),Pe=g.mouse(le)[0];b.loneHover({trace:ue,x:ke-he.left+be.left,y:De-he.top+be.top,text:Ce,color:j.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ee,idealAlign:Pe<ke?"right":"left",hovertemplate:(ue.line||{}).hovertemplate,hovertemplateLabels:Te,eventData:[{data:ue._input,fullData:ue,count:Re,probability:ve}]},{container:de._hoverlayer.node(),outerContainer:de._paper.node(),gd:le})}}}function p(j){if(!j.parcatsViewModel.dragDimension&&(w(g.select(this)),b.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),j.parcatsViewModel.pathSelection.sort(u),-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var H=y(j),G=m(j);j.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:H,event:g.event,constraints:G})}}function y(j){for(var H=[],G=V(j.parcatsViewModel),re=0;re<j.model.valueInds.length;re++)H.push({curveNumber:G,pointNumber:j.model.valueInds[re]});return H}function m(j){for(var H={},G=j.parcatsViewModel.model.dimensions,re=0;re<G.length;re++){var q=G[re];H[q.containerInd]=q.categories[j.model.categoryInds[re]].categoryValue}return void 0!==j.model.rawColor&&(H.color=j.model.rawColor),H}function l(j){if(-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){var H=y(j),G=m(j);j.parcatsViewModel.graphDiv.emit("plotly_click",{points:H,event:g.event,constraints:G})}}function w(j){j.attr("fill",function(H){return H.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function v(j){j.attr("fill-opacity",.8).attr("stroke",function(H){return a.mostReadable(H.model.color,["black","white"])}).attr("stroke-width",.3)}function A(j){j.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function M(j){j.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function k(j){var G=j.categoryViewModel.model.dimensionInd,re=j.categoryViewModel.model.categoryInd;return j.parcatsViewModel.pathSelection.filter(function(q){return q.model.categoryInds[G]===re&&q.model.color===j.color})}function E(j,H,G){var re=g.select(j).datum(),q=re.categoryViewModel.model,te=re.parcatsViewModel.graphDiv,ne=g.select(j.parentNode).selectAll("rect.bandrect"),le=[];ne.each(function(de){k(de).each(function(he){Array.prototype.push.apply(le,y(he))})});var ue={};ue[q.dimensionInd]=q.categoryValue,te.emit(H,{points:le,event:G,constraints:ue})}function P(j,H,G){var re=g.select(j).datum(),q=re.categoryViewModel.model,te=re.parcatsViewModel.graphDiv,ne=k(re),le=[];ne.each(function(de){Array.prototype.push.apply(le,y(de))});var ue={};ue[q.dimensionInd]=q.categoryValue,void 0!==re.rawColor&&(ue.color=re.rawColor),te.emit(H,{points:le,event:G,constraints:ue})}function S(j,H,G){j._fullLayout._calcInverseTransform(j);var re,q,te=j._fullLayout._invScaleX,ne=j._fullLayout._invScaleY,le=g.select(G.parentNode).select("rect.catrect"),ue=le.node().getBoundingClientRect(),de=le.datum(),he=de.parcatsViewModel,ge=he.trace,we=ue.top+ue.height/2;he.dimensions.length>1&&he.model.dimensions[de.model.dimensionInd].displayInd===he.dimensions.length-1?(re=ue.left,q="left"):(re=ue.left+ue.width,q="right");var ke=de.model.count,De=de.model.categoryLabel,Ee=ke/de.parcatsViewModel.model.count,Re={countLabel:ke,categoryLabel:De,probabilityLabel:Ee.toFixed(3)},ve=[];-1!==de.parcatsViewModel.hoverinfoItems.indexOf("count")&&ve.push(["Count:",Re.countLabel].join(" ")),-1!==de.parcatsViewModel.hoverinfoItems.indexOf("probability")&&ve.push(["P("+Re.categoryLabel+"):",Re.probabilityLabel].join(" "));var Te=ve.join("<br>");return{trace:ge,x:te*(re-H.left),y:ne*(we-H.top),text:Te,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:q,hovertemplate:ge.hovertemplate,hovertemplateLabels:Re,eventData:[{data:ge._input,fullData:ge,count:ke,category:De,probability:Ee}]}}function F(j){if(!j.parcatsViewModel.dragDimension&&-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(g.mouse(this)[1]<-1)return;var H,G=j.parcatsViewModel.graphDiv,re=G._fullLayout,q=re._paperdiv.node().getBoundingClientRect(),te=j.parcatsViewModel.hoveron;"color"===te?(v(ue=k(le=g.select(this).datum())),ue.each(function(){e.raiseToTop(this)}),g.select(this.parentNode).selectAll("rect.bandrect").filter(function(de){return de.color===le.color}).each(function(){e.raiseToTop(this),g.select(this).attr("stroke","black").attr("stroke-width",1.5)}),P(this,"plotly_hover",g.event)):(function(ne){g.select(ne.parentNode).selectAll("rect.bandrect").each(function(le){var ue=k(le);v(ue),ue.each(function(){e.raiseToTop(this)})}),g.select(ne.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),E(this,"plotly_hover",g.event)),-1===j.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===te?H=S(G,q,this):"color"===te?H=function(ne,le,ue){ne._fullLayout._calcInverseTransform(ne);var de,he,be=ne._fullLayout._invScaleX,ge=ne._fullLayout._invScaleY,we=ue.getBoundingClientRect(),ke=g.select(ue).datum(),De=ke.categoryViewModel,Ee=De.parcatsViewModel,ve=Ee.trace,Te=we.y+we.height/2;Ee.dimensions.length>1&&Ee.model.dimensions[De.model.dimensionInd].displayInd===Ee.dimensions.length-1?(de=we.left,he="left"):(de=we.left+we.width,he="right");var Ie=De.model.categoryLabel,Ce=ke.parcatsViewModel.model.count,Pe=0;ke.categoryViewModel.bands.forEach(function(bt){bt.color===ke.color&&(Pe+=bt.count)});var Ve=De.model.count,qe=0;Ee.pathSelection.each(function(bt){bt.model.color===ke.color&&(qe+=bt.model.count)});var Je=Pe/Ce,lt=Pe/qe,He=Pe/Ve,$e={countLabel:Ce,categoryLabel:Ie,probabilityLabel:Je.toFixed(3)},et=[];-1!==De.parcatsViewModel.hoverinfoItems.indexOf("count")&&et.push(["Count:",$e.countLabel].join(" ")),-1!==De.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(et.push("P(color \u2229 "+Ie+"): "+$e.probabilityLabel),et.push("P("+Ie+" | color): "+lt.toFixed(3)),et.push("P(color | "+Ie+"): "+He.toFixed(3)));var tt=et.join("<br>"),ft=a.mostReadable(ke.color,["black","white"]);return{trace:ve,x:be*(de-le.left),y:ge*(Te-le.top),text:tt,color:ke.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ft,fontSize:10,idealAlign:he,hovertemplate:ve.hovertemplate,hovertemplateLabels:$e,eventData:[{data:ve._input,fullData:ve,category:Ie,count:Ce,probability:Je,categorycount:Ve,colorcount:qe,bandcolorcount:Pe}]}}(G,q,this):"dimension"===te&&(H=function(ne,le,ue){var de=[];return g.select(ue.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){de.push(S(ne,le,this))}),de}(G,q,this)),H&&b.loneHover(H,{container:re._hoverlayer.node(),outerContainer:re._paper.node(),gd:G}))}var le,ue}function R(j){var H=j.parcatsViewModel;!H.dragDimension&&(w(H.pathSelection),A(H.dimensionSelection.selectAll("g.category")),M(H.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),b.loneUnhover(H.graphDiv._fullLayout._hoverlayer.node()),H.pathSelection.sort(u),-1===H.hoverinfoItems.indexOf("skip"))&&("color"===j.parcatsViewModel.hoveron?P(this,"plotly_unhover",g.event):E(this,"plotly_unhover",g.event))}function D(j){"fixed"!==j.parcatsViewModel.arrangement&&(j.dragDimensionDisplayInd=j.model.displayInd,j.initialDragDimensionDisplayInds=j.parcatsViewModel.model.dimensions.map(function(H){return H.displayInd}),j.dragHasMoved=!1,j.dragCategoryDisplayInd=null,g.select(this).selectAll("g.category").select("rect.catrect").each(function(H){var G=g.mouse(this)[0],re=g.mouse(this)[1];-2<=G&&G<=H.width+2&&-2<=re&&re<=H.height+2&&(j.dragCategoryDisplayInd=H.model.displayInd,j.initialDragCategoryDisplayInds=j.model.categories.map(function(q){return q.displayInd}),H.model.dragY=H.y,e.raiseToTop(this.parentNode),g.select(this.parentNode).selectAll("rect.bandrect").each(function(q){q.y<re&&re<=q.y+q.height&&(j.potentialClickBand=this)}))}),j.parcatsViewModel.dragDimension=j,b.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function L(j){if("fixed"!==j.parcatsViewModel.arrangement&&(j.dragHasMoved=!0,null!==j.dragDimensionDisplayInd)){var H=j.dragDimensionDisplayInd,G=H-1,re=H+1,q=j.parcatsViewModel.dimensions[H];if(null!==j.dragCategoryDisplayInd){var te=q.categories[j.dragCategoryDisplayInd];te.model.dragY+=g.event.dy;var ne=te.model.dragY,le=te.model.displayInd,ue=q.categories,de=ue[le-1],he=ue[le+1];void 0!==de&&ne<de.y+de.height/2&&(te.model.displayInd=de.model.displayInd,de.model.displayInd=le),void 0!==he&&ne+te.height>he.y+he.height/2&&(te.model.displayInd=he.model.displayInd,he.model.displayInd=le),j.dragCategoryDisplayInd=te.model.displayInd}if(null===j.dragCategoryDisplayInd||"freeform"===j.parcatsViewModel.arrangement){q.model.dragX=g.event.x;var be=j.parcatsViewModel.dimensions[G],ge=j.parcatsViewModel.dimensions[re];void 0!==be&&q.model.dragX<be.x+be.width&&(q.model.displayInd=be.model.displayInd,be.model.displayInd=H),void 0!==ge&&q.model.dragX+q.width>ge.x&&(q.model.displayInd=ge.model.displayInd,ge.model.displayInd=j.dragDimensionDisplayInd),j.dragDimensionDisplayInd=q.model.displayInd}K(j.parcatsViewModel),$(j.parcatsViewModel),Y(j.parcatsViewModel),Z(j.parcatsViewModel)}}function B(j){if("fixed"!==j.parcatsViewModel.arrangement&&null!==j.dragDimensionDisplayInd){g.select(this).selectAll("text").attr("font-weight","normal");var H={},G=V(j.parcatsViewModel),re=j.parcatsViewModel.model.dimensions.map(function(he){return he.displayInd}),q=j.initialDragDimensionDisplayInds.some(function(he,be){return he!==re[be]});q&&re.forEach(function(he,be){H["dimensions["+j.parcatsViewModel.model.dimensions[be].containerInd+"].displayindex"]=he});var te=!1;if(null!==j.dragCategoryDisplayInd){var ne=j.model.categories.map(function(he){return he.displayInd});if(te=j.initialDragCategoryDisplayInds.some(function(he,be){return he!==ne[be]})){var le=j.model.categories.slice().sort(function(he,be){return he.displayInd-be.displayInd}),ue=le.map(function(he){return he.categoryValue}),de=le.map(function(he){return he.categoryLabel});H["dimensions["+j.model.containerInd+"].categoryarray"]=[ue],H["dimensions["+j.model.containerInd+"].ticktext"]=[de],H["dimensions["+j.model.containerInd+"].categoryorder"]="array"}}-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!j.dragHasMoved&&j.potentialClickBand&&("color"===j.parcatsViewModel.hoveron?P(j.potentialClickBand,"plotly_click",g.event.sourceEvent):E(j.potentialClickBand,"plotly_click",g.event.sourceEvent)),j.model.dragX=null,null!==j.dragCategoryDisplayInd&&(j.parcatsViewModel.dimensions[j.dragDimensionDisplayInd].categories[j.dragCategoryDisplayInd].model.dragY=null,j.dragCategoryDisplayInd=null),j.dragDimensionDisplayInd=null,j.parcatsViewModel.dragDimension=null,j.dragHasMoved=null,j.potentialClickBand=null,K(j.parcatsViewModel),$(j.parcatsViewModel),g.transition().duration(300).ease("cubic-in-out").each(function(){Y(j.parcatsViewModel,!0),Z(j.parcatsViewModel,!0)}).each("end",function(){(q||te)&&T.restyle(j.parcatsViewModel.graphDiv,H,[G])})}}function V(j){for(var H,G=j.graphDiv._fullData,re=0;re<G.length;re++)if(j.key===G[re].uid){H=re;break}return H}function Z(j,H){var G;void 0===H&&(H=!1),j.pathSelection.data(function(re){return re.paths},s),(G=j.pathSelection,H?G.transition():G).attr("d",function(re){return re.svgD})}function Y(j,H){function G(ne){return H?ne.transition():ne}void 0===H&&(H=!1),j.dimensionSelection.data(function(ne){return ne.dimensions},s);var re=j.dimensionSelection.selectAll("g.category").data(function(ne){return ne.categories},s);G(j.dimensionSelection).attr("transform",function(ne){return r(ne.x,0)}),G(re).attr("transform",function(ne){return r(0,ne.y)}),re.select(".dimlabel").text(function(ne,le){return 0===le?ne.parcatsViewModel.model.dimensions[ne.model.dimensionInd].dimensionLabel:null}),re.select(".catlabel").attr("text-anchor",function(ne){return i(ne)?"start":"end"}).attr("x",function(ne){return i(ne)?ne.width+5:-5}).each(function(ne){var le,ue;i(ne)?(le=ne.width+5,ue="start"):(le=-5,ue="end"),g.select(this).selectAll("tspan").attr("x",le).attr("text-anchor",ue)});var q=re.selectAll("rect.bandrect").data(function(ne){return ne.bands},s),te=q.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ne){return ne.color}).attr("fill-opacity",0);q.attr("fill",function(ne){return ne.color}).attr("width",function(ne){return ne.width}).attr("height",function(ne){return ne.height}).attr("y",function(ne){return ne.y}),M(te),q.each(function(){e.raiseToTop(this)}),q.exit().remove()}function ee(j,H,G){var re,q=G[0],te=H.margin||{l:80,r:80,t:100,b:80},ne=q.trace,le=ne.domain,ue=H.width,de=H.height,he=Math.floor(ue*(le.x[1]-le.x[0])),be=Math.floor(de*(le.y[1]-le.y[0])),ge=le.x[0]*ue+te.l,we=H.height-le.y[1]*H.height+te.t,ke=ne.line.shape;re="all"===ne.hoverinfo?["count","probability"]:(ne.hoverinfo||"").split("+");var De={trace:ne,key:ne.uid,model:q,x:ge,y:we,width:he,height:be,hoveron:ne.hoveron,hoverinfoItems:re,arrangement:ne.arrangement,bundlecolors:ne.bundlecolors,sortpaths:ne.sortpaths,labelfont:ne.labelfont,categorylabelfont:ne.tickfont,pathShape:ke,dragDimension:null,margin:te,paths:[],dimensions:[],graphDiv:j,traceSelection:null,pathSelection:null,dimensionSelection:null};return q.dimensions&&(K(De),$(De)),De}function Q(j,H,G,re,q){var te,ne,le=[],ue=[];for(ne=0;ne<G.length-1;ne++)te=x(G[ne]+j[ne],j[ne+1]),le.push(te(q)),ue.push(te(1-q));var de="M "+j[0]+","+H[0];for(de+="l"+G[0]+",0 ",ne=1;ne<G.length;ne++)de+="C"+le[ne-1]+","+H[ne-1]+" "+ue[ne-1]+","+H[ne]+" "+j[ne]+","+H[ne],de+="l"+G[ne]+",0 ";for(de+="l0,"+re+" ",de+="l -"+G[G.length-1]+",0 ",ne=G.length-2;ne>=0;ne--)de+="C"+ue[ne]+","+(H[ne+1]+re)+" "+le[ne]+","+(H[ne]+re)+" "+(j[ne]+G[ne])+","+(H[ne]+re),de+="l-"+G[ne]+",0 ";return de+"Z"}function $(j){var H=j.dimensions,G=j.model,re=H.map(function(et){return et.categories.map(function(tt){return tt.y})}),q=j.model.dimensions.map(function(et){return et.categories.map(function(tt){return tt.displayInd})}),te=j.model.dimensions.map(function(et){return et.displayInd}),ne=j.dimensions.map(function(et){return et.model.dimensionInd}),le=H.map(function(et){return et.x}),ue=H.map(function(et){return et.width}),de=[];for(var he in G.paths)G.paths.hasOwnProperty(he)&&de.push(G.paths[he]);function be(et){var tt=et.categoryInds.map(function(ft,bt){return q[bt][ft]});return ne.map(function(ft){return tt[ft]})}de.sort(function(et,tt){var ft=be(et),bt=be(tt);return"backward"===j.sortpaths&&(ft.reverse(),bt.reverse()),ft.push(et.valueInds[0]),bt.push(tt.valueInds[0]),j.bundlecolors&&(ft.unshift(et.rawColor),bt.unshift(tt.rawColor)),ft<bt?-1:ft>bt?1:0});for(var ge=new Array(de.length),we=H[0].model.count,ke=H[0].categories.map(function(et){return et.height}).reduce(function(et,tt){return et+tt}),De=0;De<de.length;De++){var Ee,Re=de[De];Ee=we>0?ke*(Re.count/we):0;for(var ve,Te=new Array(re.length),Ie=0;Ie<Re.categoryInds.length;Ie++){var Pe=q[Ie][Re.categoryInds[Ie]],Ve=te[Ie];Te[Ve]=re[Ve][Pe],re[Ve][Pe]+=Ee;var qe=j.dimensions[Ve].categories[Pe],Je=qe.bands.length,lt=qe.bands[Je-1];if(void 0===lt||Re.rawColor!==lt.rawColor){var He=void 0===lt?0:lt.y+lt.height;qe.bands.push({key:He,color:Re.color,rawColor:Re.rawColor,height:Ee,width:qe.width,count:Re.count,y:He,categoryViewModel:qe,parcatsViewModel:j})}else{var $e=qe.bands[Je-1];$e.height+=Ee,$e.count+=Re.count}}ve=Q(le,Te,ue,Ee,"hspline"===j.pathShape?.5:0),ge[De]={key:Re.valueInds[0],model:Re,height:Ee,leftXs:le,topYs:Te,dimWidths:ue,svgD:ve,parcatsViewModel:j}}j.paths=ge}function K(j){var H=j.model.dimensions.map(function(ne){return{displayInd:ne.displayInd,dimensionInd:ne.dimensionInd}});H.sort(function(ne,le){return ne.displayInd-le.displayInd});var G=[];for(var re in H)G.push(oe(j,j.model.dimensions[H[re].dimensionInd]));j.dimensions=G}function oe(j,H){var G,re=j.model.dimensions.length;G=40+(re>1?(j.width-80-16)/(re-1):0)*H.displayInd;var te,ne,le,de,he=[],be=j.model.maxCats,ge=H.categories.length,we=H.count,ke=j.height-8*(be-1),De=8*(be-ge)/2,Ee=H.categories.map(function(Re){return{displayInd:Re.displayInd,categoryInd:Re.categoryInd}});for(Ee.sort(function(Re,ve){return Re.displayInd-ve.displayInd}),de=0;de<ge;de++)le={key:(ne=H.categories[Ee[de].categoryInd]).valueInds[0],model:ne,width:16,height:te=we>0?ne.count/we*ke:0,y:null!==ne.dragY?ne.dragY:De,bands:[],parcatsViewModel:j},De=De+te+8,he.push(le);return{key:H.dimensionInd,x:null!==H.dragX?H.dragX:G,y:0,width:16,model:H,categories:he,parcatsViewModel:j,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}ae.exports=function(j,H,G,re){d(G,j,re,H)}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(_,ae,ie){"use strict";var g=_("./parcats");ae.exports=function(x,T,b,e){var r=x._fullLayout,a=r._size;g(x,r._paper,T,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},b,e)}},{"./parcats":886}],888:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/layout_attributes"),T=_("../../plots/font_attributes"),b=_("../../plots/domain").attributes,e=_("../../lib/extend").extendFlat,r=_("../../plot_api/plot_template").templatedArray;ae.exports={domain:b({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:T({editType:"plot"}),tickfont:T({editType:"plot"}),rangefont:T({editType:"plot"}),dimensions:r("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},x.tickvals,{editType:"plot"}),ticktext:e({},x.ticktext,{editType:"plot"}),tickformat:e({},x.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},g("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(_,ae,ie){"use strict";var g=_("./constants"),x=_("@plotly/d3"),T=_("../../lib/gup").keyFun,b=_("../../lib/gup").repeat,e=_("../../lib").sorterAsc,r=_("../../lib").strTranslate,t=g.bar.snapRatio;function a(S,F){return S*(1-t)+F*t}var n=g.bar.snapClose;function d(S,F){return S*(1-n)+F*n}function s(S,F,R,D){if(function(oe,j){for(var H=0;H<j.length;H++)if(oe>=j[H][0]&&oe<=j[H][1])return!0;return!1}(R,D))return R;var L=S?-1:1,B=0,V=F.length-1;if(L<0){var Z=B;B=V,V=Z}for(var Y=F[B],ee=Y,Q=B;L*Q<L*V;Q+=L){var $=Q+L,K=F[$];if(L*R<L*d(Y,K))return a(Y,ee);if(L*R<L*K||$===V)return a(K,Y);ee=Y,Y=K}}function i(S){S.attr("x",-g.bar.captureWidth/2).attr("width",g.bar.captureWidth)}function u(S){S.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function f(S){if(!S.brush.filterSpecified)return"0,"+S.height;for(var F,R,D,L=p(S.brush.filter.getConsolidated(),S.height),B=[0],V=L.length?L[0][0]:null,Z=0;Z<L.length;Z++)R=(F=L[Z])[1]-F[0],B.push(V),B.push(R),(D=Z+1)<L.length&&(V=L[D][0]-F[1]);return B.push(S.height),B}function p(S,F){return S.map(function(R){return R.map(function(D){return Math.max(0,D*F)}).sort(e)})}function y(){x.select(document.body).style("cursor",null)}function m(S){S.attr("stroke-dasharray",f)}function l(S,F){var R=x.select(S).selectAll(".highlight, .highlight-shadow");m(F?R.transition().duration(g.bar.snapDuration).each("end",F):R)}function w(S,F){var R,D=S.brush,L=NaN,B={};if(D.filterSpecified){var V=S.height,Z=D.filter.getConsolidated(),Y=p(Z,V),ee=NaN,Q=NaN,$=NaN;for(R=0;R<=Y.length;R++){var K=Y[R];if(K&&K[0]<=F&&F<=K[1]){ee=R;break}if(Q=R?R-1:NaN,K&&K[0]>F){$=R;break}}if(L=ee,isNaN(L)&&(L=isNaN(Q)||isNaN($)?isNaN(Q)?$:Q:F-Y[Q][1]<Y[$][0]-F?Q:$),!isNaN(L)){var oe=Y[L],j=function(q,te){var ne=g.bar.handleHeight;if(!(te>q[1]+ne||te<q[0]-ne))return te>=.9*q[1]+.1*q[0]?"n":te<=.9*q[0]+.1*q[1]?"s":"ns"}(oe,F);j&&(B.interval=Z[L],B.intervalPix=oe,B.region=j)}}if(S.ordinal&&!B.region){var H=S.unitTickvals,G=S.unitToPaddedPx.invert(F);for(R=0;R<H.length;R++){var re=[.25*H[Math.max(R-1,0)]+.75*H[R],.25*H[Math.min(R+1,H.length-1)]+.75*H[R]];if(G>=re[0]&&G<=re[1]){B.clickableOrdinalRange=re;break}}}return B}function v(S,F){x.event.sourceEvent.stopPropagation();var R=F.height-x.mouse(S)[1]-2*g.verticalPadding,D=F.brush.svgBrush;D.wasDragged=!0,D._dragging=!0,D.newExtent=D.grabbingBar?[R-D.grabPoint,R+D.barLength-D.grabPoint].map(F.unitToPaddedPx.invert):[D.startExtent,F.unitToPaddedPx.invert(R)].sort(e),F.brush.filterSpecified=!0,D.extent=D.stayingIntervals.concat([D.newExtent]),D.brushCallback(F),l(S.parentNode)}function A(S,F){var R=w(F,F.height-x.mouse(S)[1]-2*g.verticalPadding),D="crosshair";R.clickableOrdinalRange?D="pointer":R.region&&(D=R.region+"-resize"),x.select(document.body).style("cursor",D)}function M(S){S.on("mousemove",function(F){x.event.preventDefault(),F.parent.inBrushDrag||A(this,F)}).on("mouseleave",function(F){F.parent.inBrushDrag||y()}).call(x.behavior.drag().on("dragstart",function(F){!function(R,D){x.event.sourceEvent.stopPropagation();var L=D.height-x.mouse(R)[1]-2*g.verticalPadding,B=D.unitToPaddedPx.invert(L),V=D.brush,Z=w(D,L),Y=Z.interval,ee=V.svgBrush;if(ee.wasDragged=!1,ee.grabbingBar="ns"===Z.region,ee.grabbingBar){var Q=Y.map(D.unitToPaddedPx);ee.grabPoint=L-Q[0]-g.verticalPadding,ee.barLength=Q[1]-Q[0]}ee.clickableOrdinalRange=Z.clickableOrdinalRange,ee.stayingIntervals=D.multiselect&&V.filterSpecified?V.filter.getConsolidated():[],Y&&(ee.stayingIntervals=ee.stayingIntervals.filter(function($){return $[0]!==Y[0]&&$[1]!==Y[1]})),ee.startExtent=Z.region?Y["s"===Z.region?1:0]:B,D.parent.inBrushDrag=!0,ee.brushStartCallback()}(this,F)}).on("drag",function(F){v(this,F)}).on("dragend",function(F){!function(R,D){var L=D.brush,B=L.filter,V=L.svgBrush;V._dragging||(A(R,D),v(R,D),D.brush.svgBrush.wasDragged=!1),V._dragging=!1,x.event.sourceEvent.stopPropagation();var Z=V.grabbingBar;if(V.grabbingBar=!1,V.grabLocation=void 0,D.parent.inBrushDrag=!1,y(),!V.wasDragged)return V.wasDragged=void 0,V.clickableOrdinalRange?L.filterSpecified&&D.multiselect?V.extent.push(V.clickableOrdinalRange):(V.extent=[V.clickableOrdinalRange],L.filterSpecified=!0):Z?(V.extent=V.stayingIntervals,0===V.extent.length&&E(L)):E(L),V.brushCallback(D),l(R.parentNode),void V.brushEndCallback(L.filterSpecified?B.getConsolidated():[]);var Y=function(){B.set(B.getConsolidated())};if(D.ordinal){var ee=D.unitTickvals;ee[ee.length-1]<ee[0]&&ee.reverse(),V.newExtent=[s(0,ee,V.newExtent[0],V.stayingIntervals),s(1,ee,V.newExtent[1],V.stayingIntervals)];var Q=V.newExtent[1]>V.newExtent[0];V.extent=V.stayingIntervals.concat(Q?[V.newExtent]:[]),V.extent.length||E(L),V.brushCallback(D),Q?l(R.parentNode,Y):(Y(),l(R.parentNode))}else Y();V.brushEndCallback(L.filterSpecified?B.getConsolidated():[])}(this,F)}))}function k(S,F){return S[0]-F[0]}function E(S){S.filterSpecified=!1,S.svgBrush.extent=[[-1/0,1/0]]}function P(S){for(var F,R=S.slice(),D=[],L=R.shift();L;){for(F=L.slice();(L=R.shift())&&L[0]<=F[1];)F[1]=Math.max(F[1],L[1]);D.push(F)}return 1===D.length&&D[0][0]>D[0][1]&&(D=[]),D}ae.exports={makeBrush:function(S,F,R,D,L,B){var V,Y,ee,Q,Z=(Q=[],{set:function($){1===(Q=$.map(function(K){return K.slice().sort(e)}).sort(k)).length&&Q[0][0]===-1/0&&Q[0][1]===1/0&&(Q=[[0,-1]]),Y=P(Q),ee=Q.reduce(function(K,oe){return[Math.min(K[0],oe[0]),Math.max(K[1],oe[1])]},[1/0,-1/0])},get:function(){return Q.slice()},getConsolidated:function(){return Y},getBounds:function(){return ee}});return Z.set(R),{filter:Z,filterSpecified:F,svgBrush:{extent:[],brushStartCallback:D,brushCallback:(V=L,function(Y){var $,ee=Y.brush,Q=($=ee,$.svgBrush.extent.map(function(K){return K.slice()})).slice();ee.filter.set(Q),V()}),brushEndCallback:B}}},ensureAxisBrush:function(S,F){var R=S.selectAll("."+g.cn.axisBrush).data(b,T);R.enter().append("g").classed(g.cn.axisBrush,!0),function(D,L){var B=D.selectAll(".background").data(b);B.enter().append("rect").classed("background",!0).call(i).call(u).style("pointer-events","auto").attr("transform",r(0,g.verticalPadding)),B.call(M).attr("height",function(Y){return Y.height-g.verticalPadding});var V=D.selectAll(".highlight-shadow").data(b);V.enter().append("line").classed("highlight-shadow",!0).attr("x",-g.bar.width/2).attr("stroke-width",g.bar.width+g.bar.strokeWidth).attr("stroke",L).attr("opacity",g.bar.strokeOpacity).attr("stroke-linecap","butt"),V.attr("y1",function(Y){return Y.height}).call(m);var Z=D.selectAll(".highlight").data(b);Z.enter().append("line").classed("highlight",!0).attr("x",-g.bar.width/2).attr("stroke-width",g.bar.width-g.bar.strokeWidth).attr("stroke",g.bar.fillColor).attr("opacity",g.bar.fillOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(Y){return Y.height}).call(m)}(R,F)},cleanRanges:function(S,F){if(Array.isArray(S[0])?(S=S.map(function(D){return D.sort(e)}),S=F.multiselect?P(S.sort(k)):[S[0]]):S=[S.sort(e)],F.tickvals){var R=F.tickvals.slice().sort(e);if(!(S=S.map(function(D){var L=[s(0,R,D[0],[]),s(1,R,D[1],[])];if(L[1]>L[0])return L}).filter(function(D){return D})).length)return}return S.length>1?S:S[0]}}},{"../../lib":503,"../../lib/gup":500,"./constants":892,"@plotly/d3":58}],890:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../plots/get_data").getModuleCalcData,T=_("./plot"),b=_("../../constants/xmlns_namespaces");ie.name="parcoords",ie.plot=function(e){var r=x(e.calcdata,"parcoords")[0];r.length&&T(e,r)},ie.clean=function(e,r,t,a){var n=a._has&&a._has("parcoords"),d=r._has&&r._has("parcoords");n&&!d&&(a._paperdiv.selectAll(".parcoords").remove(),a._glimages.selectAll("*").remove())},ie.toSVG=function(e){var r=e._fullLayout._glimages,t=g.select(e).selectAll(".svg-container");t.filter(function(a,n){return n===t.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var a=this.toDataURL("image/png");r.append("svg:image").attr({xmlns:b.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){g.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":899,"@plotly/d3":58}],891:[function(_,ae,ie){"use strict";var g=_("../../lib").isArrayOrTypedArray,x=_("../../components/colorscale"),T=_("../../lib/gup").wrap;ae.exports=function(b,e){var r,t;return x.hasColorscale(e,"line")&&g(e.line.color)?(r=e.line.color,t=x.extractOpts(e.line).colorscale,x.calc(b,e,{vals:r,containerStr:"line",cLetter:"c"})):(r=function(a){for(var n=new Array(a),d=0;d<a;d++)n[d]=.5;return n}(e._length),t=[[0,e.line.color],[1,e.line.color]]),T({lineColor:r,cscale:t})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],892:[function(_,ae,ie){"use strict";ae.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],893:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("../../plots/domain").defaults,e=_("../../plots/array_container_defaults"),r=_("../../plots/cartesian/axes"),t=_("./attributes"),a=_("./axisbrush"),n=_("./constants").maxDimensionCount,d=_("./merge_length");function s(i,u,f,p){function y(A,M){return g.coerce(i,u,t.dimensions,A,M)}var m=y("values"),l=y("visible");if(m&&m.length||(l=u.visible=!1),l){y("label"),y("tickvals"),y("ticktext"),y("tickformat");var w=y("range");u._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:w},r.setConvert(u._ax,p.layout),y("multiselect");var v=y("constraintrange");v&&(u.constraintrange=a.cleanRanges(v,u))}}ae.exports=function(i,u,f,p){function y(A,M){return g.coerce(i,u,t,A,M)}var m=i.dimensions;Array.isArray(m)&&m.length>n&&(g.log("parcoords traces support up to "+n+" dimensions at the moment"),m.splice(n));var l=e(i,u,{name:"dimensions",layout:p,handleItemDefaults:s}),w=function(A,M,k,E,P){var S=P("line.color",k);if(x(A,"line")&&g.isArrayOrTypedArray(S)){if(S.length)return P("line.colorscale"),T(A,M,E,P,{prefix:"line.",cLetter:"c"}),S.length;M.line.color=k}return 1/0}(i,u,f,p,y);b(u,p,y),Array.isArray(l)&&l.length||(u.visible=!1),d(u,l,"values",w);var v={family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color};g.coerceFont(y,"labelfont",v),g.coerceFont(y,"tickfont",v),g.coerceFont(y,"rangefont",v),y("labelangle"),y("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":892,"./merge_length":897}],894:[function(_,ae,ie){"use strict";var g=_("../../lib").isTypedArray;ie.convertTypedArray=function(x){return g(x)?Array.prototype.slice.call(x):x},ie.isOrdinal=function(x){return!!x.tickvals},ie.isVisible=function(x){return x.visible||!("visible"in x)}},{"../../lib":503}],895:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:_("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":890,"./calc":891,"./defaults":893,"./plot":899}],896:[function(_,ae,ie){"use strict";var g=_("glslify"),x=g(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),T=g(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),b=_("./constants").maxDimensionCount,e=_("../../lib"),r=new Uint8Array(4),t=new Uint8Array(4),a={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function n(l,w,v,A,M){var k=l._gl;k.enable(k.SCISSOR_TEST),k.scissor(w,v,A,M),l.clear({color:[0,0,0,0],depth:1})}function d(l,w,v,A,M,k){var E=k.key;v.drawCompleted||(l.read({x:0,y:0,width:1,height:1,data:r}),v.drawCompleted=!0),function P(S){var F=Math.min(A,M-S*A);0===S&&(window.cancelAnimationFrame(v.currentRafs[E]),delete v.currentRafs[E],n(l,k.scissorX,k.scissorY,k.scissorWidth,k.viewBoxSize[1])),v.clearOnly||(k.count=2*F,k.offset=2*S*A,w(k),S*A+F<M&&(v.currentRafs[E]=window.requestAnimationFrame(function(){P(S+1)})),v.drawCompleted=!1)}(0)}function s(l,w){for(var v=new Array(256),A=0;A<256;A++)v[A]=l(A/255).concat(w);return v}function i(l,w){return(l>>>8*w)%256/255}function u(l,w,v){for(var A=new Array(8*w),M=0,k=0;k<w;k++)for(var E=0;E<2;E++)for(var P=0;P<4;P++){var S=4*l+P,F=v[64*k+S];63===S&&0===E&&(F*=-1),A[M++]=F}return A}function f(l){var w="0"+l;return w.substr(w.length-2)}function p(l){return l<b?"p"+f(l+1)+"_"+f(l+4):"colors"}function y(l,w,v,A,M,k,E,P,S,F,R,D,L,B){for(var V=[[],[]],Z=0;Z<64;Z++)V[0][Z]=Z===M?1:0,V[1][Z]=Z===k?1:0;var Y=l.lines.canvasOverdrag*B,ee=l.domain,Q=l.canvasWidth*B,$=l.canvasHeight*B,K=l.pad.l*B,oe=l.pad.b*B,j=l.layoutHeight*B,H=l.layoutWidth*B,G=l.deselectedLines.color;return e.extendFlat({key:R,resolution:[Q,$],viewBoxPos:[(E*=B)+Y,P*=B],viewBoxSize:[S*=B,F*=B],i0:M,i1:k,dim0A:V[0].slice(0,16),dim0B:V[0].slice(16,32),dim0C:V[0].slice(32,48),dim0D:V[0].slice(48,64),dim1A:V[1].slice(0,16),dim1B:V[1].slice(16,32),dim1C:V[1].slice(32,48),dim1D:V[1].slice(48,64),drwLayer:D,contextColor:[G[0]/255,G[1]/255,G[2]/255,G[3]<1?G[3]:Math.max(1/255,Math.pow(1/l.lines.color.length,1/3))],scissorX:(A===w?0:E+Y)+(K-Y)+H*ee.x[0],scissorWidth:(A===v?Q-E+Y:S+.5)+(A===w?E+Y:0),scissorY:P+oe+j*ee.y[0],scissorHeight:F,viewportX:K-Y+H*ee.x[0],viewportY:oe+j*ee.y[0],viewportWidth:Q,viewportHeight:$},L)}function m(l){var w=Math.max(0,Math.floor(2047*l[0]),0),v=Math.min(2047,Math.ceil(2047*l[1]),2047);return[Math.min(w,v),Math.max(w,v)]}ae.exports=function(l,w){var v,M,k,E,P=w.context,S=w.pick,F=w.regl,R=F._gl,D=R.getParameter(R.ALIASED_LINE_WIDTH_RANGE),L=Math.max(D[0],Math.min(D[1],w.viewModel.plotGlPixelRatio)),B={currentRafs:{},drawCompleted:!0,clearOnly:!1},V=function($){for(var K={},oe=0;oe<=b;oe+=4)K[p(oe)]=$.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return K}(F),Z=F.texture(a),Y=[];Q(w);var ee=F({profile:!1,blend:{enable:P,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!P,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:F.prop("scissorX"),y:F.prop("scissorY"),width:F.prop("scissorWidth"),height:F.prop("scissorHeight")}},viewport:{x:F.prop("viewportX"),y:F.prop("viewportY"),width:F.prop("viewportWidth"),height:F.prop("viewportHeight")},dither:!1,vert:x,frag:T,primitive:"lines",lineWidth:L,attributes:V,uniforms:{resolution:F.prop("resolution"),viewBoxPos:F.prop("viewBoxPos"),viewBoxSize:F.prop("viewBoxSize"),dim0A:F.prop("dim0A"),dim1A:F.prop("dim1A"),dim0B:F.prop("dim0B"),dim1B:F.prop("dim1B"),dim0C:F.prop("dim0C"),dim1C:F.prop("dim1C"),dim0D:F.prop("dim0D"),dim1D:F.prop("dim1D"),loA:F.prop("loA"),hiA:F.prop("hiA"),loB:F.prop("loB"),hiB:F.prop("hiB"),loC:F.prop("loC"),hiC:F.prop("hiC"),loD:F.prop("loD"),hiD:F.prop("hiD"),palette:Z,contextColor:F.prop("contextColor"),maskTexture:F.prop("maskTexture"),drwLayer:F.prop("drwLayer"),maskHeight:F.prop("maskHeight")},offset:F.prop("offset"),count:F.prop("count")});function Q($){v=$.model,M=$.viewModel.dimensions.slice(),k=M[0]?M[0].values.length:0;var K=v.lines,oe=S?K.color.map(function(H,G){return G/K.color.length}):K.color,j=function(H,G,re){for(var te=new Array(H*(b+4)),ne=0,le=0;le<H;le++){for(var ue=0;ue<b;ue++)te[ne++]=ue<G.length?G[ue].paddedUnitValues[le]:.5;te[ne++]=i(le,2),te[ne++]=i(le,1),te[ne++]=i(le,0),te[ne++]=Math.max(1e-6,Math.min(.999999,re[le]))}return te}(k,M,oe);(function(H,G,re){for(var q=0;q<=b;q+=4)H[p(q)](u(q/4,G,re))})(V,k,j),P||S||(Z=F.texture(e.extendFlat({data:s(v.unitToColor,255)},a)))}return{render:function($,K,oe){var j,H,G,re=$.length,q=1/0,te=-1/0;for(j=0;j<re;j++)$[j].dim0.canvasX<q&&(q=$[j].dim0.canvasX,H=j),$[j].dim1.canvasX>te&&(te=$[j].dim1.canvasX,G=j);0===re&&n(F,0,0,v.canvasWidth,v.canvasHeight);var ne=function(Ee){var Re,ve,Te,Ie=[[],[]];for(Te=0;Te<64;Te++){var Ce=!Ee&&Te<M.length?M[Te].brush.filter.getBounds():[-1/0,1/0];Ie[0][Te]=Ce[0],Ie[1][Te]=Ce[1]}var Pe=new Array(16384);for(Re=0;Re<16384;Re++)Pe[Re]=255;if(!Ee)for(Re=0;Re<M.length;Re++){var Ve=Re%8,qe=(Re-Ve)/8,Je=Math.pow(2,Ve),lt=M[Re].brush.filter.get();if(!(lt.length<2)){var He=m(lt[0])[1];for(ve=1;ve<lt.length;ve++){var $e=m(lt[ve]);for(Te=He+1;Te<$e[0];Te++)Pe[8*Te+qe]&=~Je;He=Math.max(He,$e[1])}}}var et={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Pe};return E?E(et):E=F.texture(et),{maskTexture:E,maskHeight:2048,loA:Ie[0].slice(0,16),loB:Ie[0].slice(16,32),loC:Ie[0].slice(32,48),loD:Ie[0].slice(48,64),hiA:Ie[1].slice(0,16),hiB:Ie[1].slice(16,32),hiC:Ie[1].slice(32,48),hiD:Ie[1].slice(48,64)}}(P);for(j=0;j<re;j++){var le=$[j],ue=le.dim0.crossfilterDimensionIndex,de=le.dim1.crossfilterDimensionIndex,he=le.canvasX,be=le.canvasY,ge=he+le.panelSizeX,we=le.plotGlPixelRatio;if(K||!Y[ue]||Y[ue][0]!==he||Y[ue][1]!==ge){Y[ue]=[he,ge];var ke=y(v,H,G,j,ue,de,he,be,le.panelSizeX,le.panelSizeY,le.dim0.crossfilterDimensionIndex,P?0:S?2:1,ne,we);B.clearOnly=oe,d(F,ee,B,K?v.lines.blockLineCount:k,k,ke)}}},readPixel:function($,K){return F.read({x:$,y:K,width:1,height:1,data:t}),t},readPixels:function($,K,oe,j){var H=new Uint8Array(4*oe*j);return F.read({x:$,y:K,width:oe,height:j,data:H}),H},destroy:function(){for(var $ in l.style["pointer-events"]="none",Z.destroy(),E&&E.destroy(),V)V[$].destroy()},update:Q}}},{"../../lib":503,"./constants":892,glslify:227}],897:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b){var e,r;for(b||(b=1/0),e=0;e<x.length;e++)(r=x[e]).visible&&(b=Math.min(b,r[T].length));for(b===1/0&&(b=0),g._length=b,e=0;e<x.length;e++)(r=x[e]).visible&&(r._length=b);return b}},{}],898:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("color-rgba"),e=_("../../plots/cartesian/axes"),r=x.strRotate,t=x.strTranslate,a=_("../../lib/svg_text_utils"),n=_("../../components/drawing"),d=_("../../components/colorscale"),s=_("../../lib/gup"),i=s.keyFun,u=s.repeat,f=s.unwrap,p=_("./helpers"),y=_("./constants"),m=_("./axisbrush"),l=_("./lines");function w(Y,ee,Q){return x.aggNums(Y,null,ee,Q)}function v(Y,ee){return M(w(Math.min,Y,ee),w(Math.max,Y,ee))}function A(Y){var ee=Y.range;return ee?M(ee[0],ee[1]):v(Y.values,Y._length)}function M(Y,ee){return!isNaN(Y)&&isFinite(Y)||(Y=0),!isNaN(ee)&&isFinite(ee)||(ee=0),Y===ee&&(0===Y?(Y-=1,ee+=1):(Y*=.9,ee*=1.1)),[Y,ee]}function k(Y,ee,Q,$,K){var oe,j,H=A(Q);return $?g.scale.ordinal().domain($.map((oe=T(Q.tickformat),j=K,j?function(G,re){var q=j[re];return null==q?oe(G):q}:oe))).range($.map(function(G){return Y-ee+(G-H[0])/(H[1]-H[0])*(2*ee-Y)})):g.scale.linear().domain(H).range([Y-ee,ee])}function E(Y){if(Y.tickvals){var ee=A(Y);return g.scale.ordinal().domain(Y.tickvals).range(Y.tickvals.map(function(Q){return(Q-ee[0])/(ee[1]-ee[0])}))}}function P(Y){var ee=Y.map(function(K){return K[0]}),Q=Y.map(function(K){var oe=b(K[1]);return g.rgb("rgb("+oe[0]+","+oe[1]+","+oe[2]+")")}),$="rgb".split("").map(function(K){return g.scale.linear().clamp(!0).domain(ee).range(Q.map((oe=K,function(j){return j[oe]})));var oe});return function(K){return $.map(function(oe){return oe(K)})}}function S(Y){return Y.dimensions.some(function(ee){return ee.brush.filterSpecified})}function F(Y,ee,Q){var $=f(ee),K=$.trace,oe=p.convertTypedArray($.lineColor),j=K.line,H={color:b(y.deselectedLineColor)},G=d.extractOpts(j),re=G.reversescale?d.flipScale($.cscale):$.cscale,q=K.domain,te=K.dimensions,ne=Y.width,le=K.labelangle,ue=K.labelside,de=K.labelfont,he=K.tickfont,be=K.rangefont,ge=x.extendDeepNoArrays({},j,{color:oe.map(g.scale.linear().domain(A({values:oe,range:[G.min,G.max],_length:K._length}))),blockLineCount:y.blockLineCount,canvasOverdrag:y.overdrag*y.canvasPixelRatio}),we=Math.floor(ne*(q.x[1]-q.x[0])),ke=Math.floor(Y.height*(q.y[1]-q.y[0])),De=Y.margin||{l:80,r:80,t:100,b:80},Ee=we,Re=ke;return{key:Q,colCount:te.filter(p.isVisible).length,dimensions:te,tickDistance:y.tickDistance,unitToColor:P(re),lines:ge,deselectedLines:H,labelAngle:le,labelSide:ue,labelFont:de,tickFont:he,rangeFont:be,layoutWidth:ne,layoutHeight:Y.height,domain:q,translateX:q.x[0]*ne,translateY:Y.height-q.y[1]*Y.height,pad:De,canvasWidth:Ee*y.canvasPixelRatio+2*ge.canvasOverdrag,canvasHeight:Re*y.canvasPixelRatio,width:Ee,height:Re,canvasPixelRatio:y.canvasPixelRatio}}function R(Y,ee,Q){var ne,le,$=Q.width,K=Q.height,oe=Q.dimensions,j=Q.canvasPixelRatio,H=function(ne){return $*ne/Math.max(1,Q.colCount-1)},G=y.verticalPadding/K,re=(ne=K,le=y.verticalPadding,g.scale.linear().range([le,ne-le])),q={key:Q.key,xScale:H,model:Q,inBrushDrag:!1},te={};return q.dimensions=oe.filter(p.isVisible).map(function(ne,le){var Pe,Ve,ue=(Pe=ne,Ve=G,g.scale.linear().domain(A(Pe)).range([Ve,1-Ve])),de=te[ne.label];te[ne.label]=(de||0)+1;var he=ne.label+(de?"__"+de:""),be=ne.constraintrange,ge=be&&be.length;ge&&!Array.isArray(be[0])&&(be=[be]);var we=ge?be.map(function(Pe){return Pe.map(ue)}):[[-1/0,1/0]],ke=ne.values;ke.length>ne._length&&(ke=ke.slice(0,ne._length));var De,Ee=ne.tickvals;function Re(Pe,Ve){return{val:Pe,text:De[Ve]}}function ve(Pe,Ve){return Pe.val-Ve.val}if(Array.isArray(Ee)&&Ee.length){De=ne.ticktext,Array.isArray(De)&&De.length?De.length>Ee.length?De=De.slice(0,Ee.length):Ee.length>De.length&&(Ee=Ee.slice(0,De.length)):De=Ee.map(T(ne.tickformat));for(var Te=1;Te<Ee.length;Te++)if(Ee[Te]<Ee[Te-1]){for(var Ie=Ee.map(Re).sort(ve),Ce=0;Ce<Ee.length;Ce++)Ee[Ce]=Ie[Ce].val,De[Ce]=Ie[Ce].text;break}}else Ee=void 0;return ke=p.convertTypedArray(ke),{key:he,label:ne.label,tickFormat:ne.tickformat,tickvals:Ee,ticktext:De,ordinal:p.isOrdinal(ne),multiselect:ne.multiselect,xIndex:le,crossfilterDimensionIndex:le,visibleIndex:ne._index,height:K,values:ke,paddedUnitValues:ke.map(ue),unitTickvals:Ee&&Ee.map(ue),xScale:H,x:H(le),canvasX:H(le)*j,unitToPaddedPx:re,domainScale:k(K,y.verticalPadding,ne,Ee,De),ordinalScale:E(ne),parent:q,model:Q,brush:m.makeBrush(Y,ge,we,function(){Y.linePickActive(!1)},function(){var Pe=q;Pe.focusLayer&&Pe.focusLayer.render(Pe.panels,!0);var Ve=S(Pe);!Y.contextShown()&&Ve?(Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!0),Y.contextShown(!0)):Y.contextShown()&&!Ve&&(Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!0,!0),Y.contextShown(!1))},function(Pe){if(q.focusLayer.render(q.panels,!0),q.pickLayer&&q.pickLayer.render(q.panels,!0),Y.linePickActive(!0),ee&&ee.filterChanged){var Ve=ue.invert,qe=Pe.map(function(Je){return Je.map(Ve).sort(x.sorterAsc)}).sort(function(Je,lt){return Je[0]-lt[0]});ee.filterChanged(q.key,ne._index,qe)}})}}),q}function D(Y){Y.classed(y.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function L(Y,ee){var $=Y*Math.PI/180;return{dir:"top"===ee?1:-1,dx:Math.sin($),dy:Math.cos($),degrees:Y}}function B(Y,ee,Q){for(var $=ee.panels||(ee.panels=[]),K=Y.data(),oe=0;oe<K.length-1;oe++){var j=$[oe]||($[oe]={}),H=K[oe],G=K[oe+1];j.dim0=H,j.dim1=G,j.canvasX=H.canvasX,j.panelSizeX=G.canvasX-H.canvasX,j.panelSizeY=ee.model.canvasHeight,j.y=0,j.canvasY=0,j.plotGlPixelRatio=Q}}function V(Y,ee){return e.tickText(Y._ax,ee,!1).text}function Z(Y,ee){if(Y.ordinal)return"";var Q=Y.domainScale.domain();return V(Y.model.dimensions[Y.visibleIndex],Q[ee?Q.length-1:0])}ae.exports=function(Y,ee,Q,$){var K=Y._fullLayout,oe=K._toppaper,j=K._glcontainer,H=Y._context.plotGlPixelRatio,G=Y._fullLayout.paper_bgcolor;!function(Ce){for(var Pe=0;Pe<Ce.length;Pe++)for(var Ve=0;Ve<Ce[Pe].length;Ve++)for(var qe=Ce[Pe][Ve].trace,Je=qe.dimensions,lt=0;lt<Je.length;lt++){var He=Je[lt].values,$e=Je[lt]._ax;$e&&($e.range=$e.range?M($e.range[0],$e.range[1]):v(He,qe._length),$e.dtick||($e.dtick=.01*(Math.abs($e.range[1]-$e.range[0])||1)),$e.tickformat=Je[lt].tickformat,e.calcTicks($e),$e.cleanRange())}}(ee);var re,q,te=(re=!0,q=!1,{linePickActive:function(Ce){return arguments.length?re=!!Ce:re},contextShown:function(Ce){return arguments.length?q=!!Ce:q}}),ne=ee.filter(function(Ce){return f(Ce).trace.visible}).map(F.bind(0,Q)).map(R.bind(0,te,$));j.each(function(Ce,Pe){return x.extendFlat(Ce,ne[Pe])});var le=j.selectAll(".gl-canvas").each(function(Ce){Ce.viewModel=ne[0],Ce.viewModel.plotGlPixelRatio=H,Ce.viewModel.paperColor=G,Ce.model=Ce.viewModel?Ce.viewModel.model:null}),ue=null;le.filter(function(Ce){return Ce.pick}).style("pointer-events","auto").on("mousemove",function(Ce){if(te.linePickActive()&&Ce.lineLayer&&$&&$.hover){var Pe=g.event,Ve=this.width,qe=this.height,Je=g.mouse(this),lt=Je[0],He=Je[1];if(lt<0||He<0||lt>=Ve||He>=qe)return;var $e=Ce.lineLayer.readPixel(lt,qe-1-He),et=0!==$e[3],tt=et?$e[2]+256*($e[1]+256*$e[0]):null,ft={x:lt,y:He,clientX:Pe.clientX,clientY:Pe.clientY,dataIndex:Ce.model.key,curveNumber:tt};tt!==ue&&(et?$.hover(ft):$.unhover&&$.unhover(ft),ue=tt)}}),le.style("opacity",function(Ce){return Ce.pick?0:1}),oe.style("background","rgba(255, 255, 255, 0)");var de=oe.selectAll("."+y.cn.parcoords).data(ne,i);de.exit().remove(),de.enter().append("g").classed(y.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),de.attr("transform",function(Ce){return t(Ce.model.translateX,Ce.model.translateY)});var he=de.selectAll("."+y.cn.parcoordsControlView).data(u,i);he.enter().append("g").classed(y.cn.parcoordsControlView,!0),he.attr("transform",function(Ce){return t(Ce.model.pad.l,Ce.model.pad.t)});var be=he.selectAll("."+y.cn.yAxis).data(function(Ce){return Ce.dimensions},i);be.enter().append("g").classed(y.cn.yAxis,!0),he.each(function(Ce){B(be,Ce,H)}),le.each(function(Ce){Ce.viewModel&&(!Ce.lineLayer||$?Ce.lineLayer=l(this,Ce):Ce.lineLayer.update(Ce),(Ce.key||0===Ce.key)&&(Ce.viewModel[Ce.key]=Ce.lineLayer),Ce.lineLayer.render(Ce.viewModel.panels,!Ce.context||$))}),be.attr("transform",function(Ce){return t(Ce.xScale(Ce.xIndex),0)}),be.call(g.behavior.drag().origin(function(Ce){return Ce}).on("drag",function(Ce){var Pe=Ce.parent;te.linePickActive(!1),Ce.x=Math.max(-y.overdrag,Math.min(Ce.model.width+y.overdrag,g.event.x)),Ce.canvasX=Ce.x*Ce.model.canvasPixelRatio,be.sort(function(Ve,qe){return Ve.x-qe.x}).each(function(Ve,qe){Ve.xIndex=qe,Ve.x=Ce===Ve?Ve.x:Ve.xScale(Ve.xIndex),Ve.canvasX=Ve.x*Ve.model.canvasPixelRatio}),B(be,Pe,H),be.filter(function(Ve){return 0!==Math.abs(Ce.xIndex-Ve.xIndex)}).attr("transform",function(Ve){return t(Ve.xScale(Ve.xIndex),0)}),g.select(this).attr("transform",t(Ce.x,0)),be.each(function(Ve,qe,Je){Je===Ce.parent.key&&(Pe.dimensions[qe]=Ve)}),Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!1,!S(Pe)),Pe.focusLayer.render&&Pe.focusLayer.render(Pe.panels)}).on("dragend",function(Ce){var Pe=Ce.parent;Ce.x=Ce.xScale(Ce.xIndex),Ce.canvasX=Ce.x*Ce.model.canvasPixelRatio,B(be,Pe,H),g.select(this).attr("transform",function(Ve){return t(Ve.x,0)}),Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!1,!S(Pe)),Pe.focusLayer&&Pe.focusLayer.render(Pe.panels),Pe.pickLayer&&Pe.pickLayer.render(Pe.panels,!0),te.linePickActive(!0),$&&$.axesMoved&&$.axesMoved(Pe.key,Pe.dimensions.map(function(Ve){return Ve.crossfilterDimensionIndex}))})),be.exit().remove();var ge=be.selectAll("."+y.cn.axisOverlays).data(u,i);ge.enter().append("g").classed(y.cn.axisOverlays,!0),ge.selectAll("."+y.cn.axis).remove();var we=ge.selectAll("."+y.cn.axis).data(u,i);we.enter().append("g").classed(y.cn.axis,!0),we.each(function(Ce){var Pe=Ce.model.height/Ce.model.tickDistance,Ve=Ce.domainScale,qe=Ve.domain();g.select(this).call(g.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Pe,Ce.tickFormat).tickValues(Ce.ordinal?qe:null).tickFormat(function(Je){return p.isOrdinal(Ce)?Je:V(Ce.model.dimensions[Ce.visibleIndex],Je)}).scale(Ve)),n.font(we.selectAll("text"),Ce.model.tickFont)}),we.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),we.selectAll("text").style("text-shadow",a.makeTextShadow(G)).style("cursor","default");var ke=ge.selectAll("."+y.cn.axisHeading).data(u,i);ke.enter().append("g").classed(y.cn.axisHeading,!0);var De=ke.selectAll("."+y.cn.axisTitle).data(u,i);De.enter().append("text").classed(y.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),De.text(function(Ce){return Ce.label}).each(function(Ce){var Pe=g.select(this);n.font(Pe,Ce.model.labelFont),a.convertToTspans(Pe,Y)}).attr("transform",function(Ce){var Pe=L(Ce.model.labelAngle,Ce.model.labelSide),Ve=y.axisTitleOffset;return(Pe.dir>0?"":t(0,2*Ve+Ce.model.height))+r(Pe.degrees)+t(-Ve*Pe.dx,-Ve*Pe.dy)}).attr("text-anchor",function(Ce){var Pe=L(Ce.model.labelAngle,Ce.model.labelSide);return 2*Math.abs(Pe.dx)>Math.abs(Pe.dy)?Pe.dir*Pe.dx<0?"start":"end":"middle"});var Ee=ge.selectAll("."+y.cn.axisExtent).data(u,i);Ee.enter().append("g").classed(y.cn.axisExtent,!0);var Re=Ee.selectAll("."+y.cn.axisExtentTop).data(u,i);Re.enter().append("g").classed(y.cn.axisExtentTop,!0),Re.attr("transform",t(0,-y.axisExtentOffset));var ve=Re.selectAll("."+y.cn.axisExtentTopText).data(u,i);ve.enter().append("text").classed(y.cn.axisExtentTopText,!0).call(D),ve.text(function(Ce){return Z(Ce,!0)}).each(function(Ce){n.font(g.select(this),Ce.model.rangeFont)});var Te=Ee.selectAll("."+y.cn.axisExtentBottom).data(u,i);Te.enter().append("g").classed(y.cn.axisExtentBottom,!0),Te.attr("transform",function(Ce){return t(0,Ce.model.height+y.axisExtentOffset)});var Ie=Te.selectAll("."+y.cn.axisExtentBottomText).data(u,i);Ie.enter().append("text").classed(y.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),Ie.text(function(Ce){return Z(Ce,!1)}).each(function(Ce){n.font(g.select(this),Ce.model.rangeFont)}),m.ensureAxisBrush(ge,G)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":892,"./helpers":894,"./lines":896,"@plotly/d3":58,"color-rgba":91}],899:[function(_,ae,ie){"use strict";var g=_("./parcoords"),x=_("../../lib/prepare_regl"),T=_("./helpers").isVisible;function b(e,r,t){var a=r.indexOf(t),n=e.indexOf(a);return-1===n&&(n+=r.length),n}ae.exports=function(e,r){var t=e._fullLayout;if(x(e)){var a={},n={},d={},s={},i=t._size;r.forEach(function(u,f){var p=u[0].trace;d[f]=p.index;var y=s[f]=p._fullInput.index;a[f]=e.data[y].dimensions,n[f]=e.data[y].dimensions.slice()}),g(e,r,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},{filterChanged:function(u,f,p){var y=n[u][f],m=p.map(function(k){return k.slice()}),l="dimensions["+f+"].constraintrange",w=t._tracePreGUI[e._fullData[d[u]]._fullInput.uid];void 0===w[l]&&(w[l]=y.constraintrange||null);var A=e._fullData[d[u]].dimensions[f];m.length?(1===m.length&&(m=m[0]),y.constraintrange=m,A.constraintrange=m.slice(),m=[m]):(delete y.constraintrange,delete A.constraintrange,m=null);var M={};M[l]=m,e.emit("plotly_restyle",[M,[s[u]]])},hover:function(u){e.emit("plotly_hover",u)},unhover:function(u){e.emit("plotly_unhover",u)},axesMoved:function(u,f){var y,m,p=(y=f,m=n[u].filter(T),function(l,w){return b(y,m,l)-b(y,m,w)});a[u].sort(p),n[u].filter(function(y){return!T(y)}).sort(function(y){return n[u].indexOf(y)}).forEach(function(y){a[u].splice(a[u].indexOf(y),1),a[u].splice(n[u].indexOf(y),0,y)}),e.emit("plotly_restyle",[{dimensions:[a[u]]},[s[u]]])}})}}},{"../../lib/prepare_regl":516,"./helpers":894,"./parcoords":898}],900:[function(_,ae,ie){"use strict";var g=_("../../plots/attributes"),x=_("../../plots/domain").attributes,T=_("../../plots/font_attributes"),b=_("../../components/color/attributes"),e=_("../../plots/template_attributes").hovertemplateAttrs,r=_("../../plots/template_attributes").texttemplateAttrs,t=_("../../lib/extend").extendFlat,a=T({editType:"plot",arrayOk:!0,colorEditType:"plot"});ae.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:t({},g.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:r({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:t({},a,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:t({},a,{}),outsidetextfont:t({},a,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:t({},a,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:x({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:t({},a,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],901:[function(_,ae,ie){"use strict";var g=_("../../plots/plots");ie.name="pie",ie.plot=function(x,T,b,e){g.plotBasePlot(ie.name,x,T,b,e)},ie.clean=function(x,T,b,e){g.cleanBasePlot(ie.name,x,T,b,e)}},{"../../plots/plots":619}],902:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("tinycolor2"),T=_("../../components/color"),b={};function e(t){return function(a,n){return!!a&&!!(a=x(a)).isValid()&&(a=T.addOpacity(a,a.getAlpha()),t[n]||(t[n]=a),a)}}function r(t,a){var n,d=JSON.stringify(t),s=a[d];if(!s){for(s=t.slice(),n=0;n<t.length;n++)s.push(x(t[n]).lighten(20).toHexString());for(n=0;n<t.length;n++)s.push(x(t[n]).darken(20).toHexString());a[d]=s}return s}ae.exports={calc:function(t,a){var n,d,s=[],i=t._fullLayout,u=i.hiddenlabels||[],f=a.labels,p=a.marker.colors||[],y=a.values,m=a._length,l=a._hasValues&&m;if(a.dlabel)for(f=new Array(m),n=0;n<m;n++)f[n]=String(a.label0+n*a.dlabel);var w={},v=e(i["_"+a.type+"colormap"]),A=0,M=!1;for(n=0;n<m;n++){var k,E,P;if(l){if(!g(k=y[n]))continue;k=+k}else k=1;void 0!==(E=f[n])&&""!==E||(E=n);var S=w[E=String(E)];void 0===S?(w[E]=s.length,(P=-1!==u.indexOf(E))||(A+=k),s.push({v:k,label:E,color:v(p[n],E),i:n,pts:[n],hidden:P})):(M=!0,(d=s[S]).v+=k,d.pts.push(n),d.hidden||(A+=k),!1===d.color&&p[n]&&(d.color=v(p[n],E)))}return s=s.filter(function(F){return F.v>=0}),("funnelarea"===a.type?M:a.sort)&&s.sort(function(F,R){return R.v-F.v}),s[0]&&(s[0].vTotal=A),s},crossTraceCalc:function(t,a){var n=(a||{}).type;n||(n="pie");var d=t._fullLayout,s=t.calcdata,i=d[n+"colorway"],u=d["_"+n+"colormap"];d["extend"+n+"colors"]&&(i=r(i,b));for(var f=0,p=0;p<s.length;p++){var y=s[p];if(y[0].trace.type===n)for(var m=0;m<y.length;m++){var l=y[m];!1===l.color&&(u[l.label]?l.color=u[l.label]:(u[l.label]=l.color=i[f%i.length],f++))}}},makePullColorFn:e,generateExtendedColors:r}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],903:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("./attributes"),b=_("../../plots/domain").defaults,e=_("../bar/defaults").handleText;function r(t,a){var n=Array.isArray(t),d=x.isArrayOrTypedArray(a),s=Math.min(n?t.length:1/0,d?a.length:1/0);if(isFinite(s)||(s=0),s&&d){for(var i,u=0;u<s;u++){var f=a[u];if(g(f)&&f>0){i=!0;break}}i||(s=0)}return{hasLabels:n,hasValues:d,len:s}}ae.exports={handleLabelsAndValues:r,supplyDefaults:function(t,a,n,d){function s(v,A){return x.coerce(t,a,T,v,A)}var i=r(s("labels"),s("values")),u=i.len;if(a._hasLabels=i.hasLabels,a._hasValues=i.hasValues,!a._hasLabels&&a._hasValues&&(s("label0"),s("dlabel")),u){a._length=u,s("marker.line.width")&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var f,p=s("text"),y=s("texttemplate");if(y||(f=s("textinfo",Array.isArray(p)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),y||f&&"none"!==f){var m=s("textposition");e(t,a,d,s,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(m)||"auto"===m||"outside"===m)&&s("automargin"),("inside"===m||"auto"===m||Array.isArray(m))&&s("insidetextorientation")}b(a,d,s);var l=s("hole");if(s("title.text")){var w=s("title.position",l?"middle center":"top center");l||"middle center"!==w||(a.title.position="top center"),x.coerceFont(s,"title.font",d.font)}s("sort"),s("direction"),s("rotation"),s("pull")}else a.visible=!1}}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":900,"fast-isnumeric":190}],904:[function(_,ae,ie){"use strict";var g=_("../../components/fx/helpers").appendArrayMultiPointValues;ae.exports=function(x,T){var b={curveNumber:T.index,pointNumbers:x.pts,data:T._input,fullData:T,label:x.label,color:x.color,value:x.v,percent:x.percent,text:x.text,bbox:x.bbox,v:x.v};return 1===x.pts.length&&(b.pointNumber=b.i=x.pts[0]),g(b,T,x.pts),"funnelarea"===T.type&&(delete b.v,delete b.i),b}},{"../../components/fx/helpers":402}],905:[function(_,ae,ie){"use strict";var g=_("../../lib");function x(T){return-1!==T.indexOf("e")?T.replace(/[.]?0+e/,"e"):-1!==T.indexOf(".")?T.replace(/[.]?0+$/,""):T}ie.formatPiePercent=function(T,b){var e=x((100*T).toPrecision(3));return g.numSeparate(e,b)+"%"},ie.formatPieValue=function(T,b){var e=x(T.toPrecision(10));return g.numSeparate(e,b)},ie.getFirstFilled=function(T,b){if(Array.isArray(T))for(var e=0;e<b.length;e++){var r=T[b[e]];if(r||0===r||""===r)return r}},ie.castOption=function(T,b){return Array.isArray(T)?ie.getFirstFilled(T,b):T||void 0},ie.getRotationAngle=function(T){return("auto"===T?0:T)*Math.PI/180}},{"../../lib":503}],906:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,supplyLayoutDefaults:_("./layout_defaults"),layoutAttributes:_("./layout_attributes"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot").plot,style:_("./style"),styleOne:_("./style_one"),moduleType:"trace",name:"pie",basePlotModule:_("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":900,"./base_plot":901,"./calc":902,"./defaults":903,"./layout_attributes":907,"./layout_defaults":908,"./plot":909,"./style":910,"./style_one":911}],907:[function(_,ae,ie){"use strict";ae.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],908:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes");ae.exports=function(T,b){function e(r,t){return g.coerce(T,b,x,r,t)}e("hiddenlabels"),e("piecolorway",b.colorway),e("extendpiecolors")}},{"../../lib":503,"./layout_attributes":907}],909:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../plots/plots"),T=_("../../components/fx"),b=_("../../components/color"),e=_("../../components/drawing"),r=_("../../lib"),t=r.strScale,a=r.strTranslate,n=_("../../lib/svg_text_utils"),d=_("../bar/uniform_text"),s=d.recordMinTextSize,i=d.clearMinTextSize,u=_("../bar/constants").TEXTPAD,f=_("./helpers"),p=_("./event_data"),y=_("../../lib").isValidTextValue;function m(ee,Q,$){var K=$[0],oe=K.cx,j=K.cy,H=K.trace,G="funnelarea"===H.type;"_hasHoverLabel"in H||(H._hasHoverLabel=!1),"_hasHoverEvent"in H||(H._hasHoverEvent=!1),ee.on("mouseover",function(re){var q=Q._fullLayout,te=Q._fullData[H.index];if(!Q._dragging&&!1!==q.hovermode){var ne=te.hoverinfo;if(Array.isArray(ne)&&(ne=T.castHoverinfo({hoverinfo:[f.castOption(ne,re.pts)],_module:H._module},q,0)),"all"===ne&&(ne="label+text+value+percent+name"),te.hovertemplate||"none"!==ne&&"skip"!==ne&&ne){var le=re.rInscribed||0,ue=oe+re.pxmid[0]*(1-le),de=j+re.pxmid[1]*(1-le),he=q.separators,be=[];if(ne&&-1!==ne.indexOf("label")&&be.push(re.label),re.text=f.castOption(te.hovertext||te.text,re.pts),ne&&-1!==ne.indexOf("text")){var ge=re.text;r.isValidTextValue(ge)&&be.push(ge)}re.value=re.v,re.valueLabel=f.formatPieValue(re.v,he),ne&&-1!==ne.indexOf("value")&&be.push(re.valueLabel),re.percent=re.v/K.vTotal,re.percentLabel=f.formatPiePercent(re.percent,he),ne&&-1!==ne.indexOf("percent")&&be.push(re.percentLabel);var we=te.hoverlabel,ke=we.font,De=[];T.loneHover({trace:H,x0:ue-le*K.r,x1:ue+le*K.r,y:de,_x0:G?oe+re.TL[0]:ue-le*K.r,_x1:G?oe+re.TR[0]:ue+le*K.r,_y0:G?j+re.TL[1]:de-le*K.r,_y1:G?j+re.BL[1]:de+le*K.r,text:be.join("<br>"),name:te.hovertemplate||-1!==ne.indexOf("name")?te.name:void 0,idealAlign:re.pxmid[0]<0?"left":"right",color:f.castOption(we.bgcolor,re.pts)||re.color,borderColor:f.castOption(we.bordercolor,re.pts),fontFamily:f.castOption(ke.family,re.pts),fontSize:f.castOption(ke.size,re.pts),fontColor:f.castOption(ke.color,re.pts),nameLength:f.castOption(we.namelength,re.pts),textAlign:f.castOption(we.align,re.pts),hovertemplate:f.castOption(te.hovertemplate,re.pts),hovertemplateLabels:re,eventData:[p(re,te)]},{container:q._hoverlayer.node(),outerContainer:q._paper.node(),gd:Q,inOut_bbox:De}),re.bbox=De[0],H._hasHoverLabel=!0}H._hasHoverEvent=!0,Q.emit("plotly_hover",{points:[p(re,te)],event:g.event})}}),ee.on("mouseout",function(re){var q=Q._fullLayout,te=Q._fullData[H.index],ne=g.select(this).datum();H._hasHoverEvent&&(re.originalEvent=g.event,Q.emit("plotly_unhover",{points:[p(ne,te)],event:g.event}),H._hasHoverEvent=!1),H._hasHoverLabel&&(T.loneUnhover(q._hoverlayer.node()),H._hasHoverLabel=!1)}),ee.on("click",function(re){Q._dragging||!1===Q._fullLayout.hovermode||(Q._hoverdata=[p(re,Q._fullData[H.index])],T.click(Q,g.event))})}function l(ee,Q,$){var K=f.castOption(ee.insidetextfont.color,Q.pts);!K&&ee._input.textfont&&(K=f.castOption(ee._input.textfont.color,Q.pts));var oe=f.castOption(ee.insidetextfont.family,Q.pts)||f.castOption(ee.textfont.family,Q.pts)||$.family,j=f.castOption(ee.insidetextfont.size,Q.pts)||f.castOption(ee.textfont.size,Q.pts)||$.size;return{color:K||b.contrast(Q.color),family:oe,size:j}}function w(ee,Q){for(var $,K,oe=0;oe<ee.length;oe++)if((K=($=ee[oe][0]).trace).title.text){var j=K.title.text;K._meta&&(j=r.templateString(j,K._meta));var H=e.tester.append("text").attr("data-notex",1).text(j).call(e.font,K.title.font).call(n.convertToTspans,Q),G=e.bBox(H.node(),!0);$.titleBox={width:G.width,height:G.height},H.remove()}}function v(ee,Q,$){var K=$.r||Q.rpx1,oe=Q.rInscribed;if(Q.startangle===Q.stopangle)return{rCenter:1-oe,scale:0,rotate:0,textPosAngle:0};var j,H=Q.ring,G=1===H&&Math.abs(Q.startangle-Q.stopangle)===2*Math.PI,re=Q.halfangle,q=Q.midangle,te=$.trace.insidetextorientation,ne="horizontal"===te,le="tangential"===te,ue="radial"===te,de="auto"===te,he=[];if(!de){var be,ge=function(ve,Te){if(lt=(Ve=Q).stopangle,(Je=Ve.startangle)>(qe=ve)&&qe>lt||Je<qe&&qe<lt){var Ie=Math.abs(ve-Q.startangle),Ce=Math.abs(ve-Q.stopangle),Pe=Ie<Ce?Ie:Ce;(j="tan"===Te?M(ee,K,H,Pe,0):A(ee,K,H,Pe,Math.PI/2)).textPosAngle=ve,he.push(j)}var Ve,qe,Je,lt};if(ne||le){for(be=4;be>=-4;be-=2)ge(Math.PI*be,"tan");for(be=4;be>=-4;be-=2)ge(Math.PI*(be+1),"tan")}if(ne||ue){for(be=4;be>=-4;be-=2)ge(Math.PI*(be+1.5),"rad");for(be=4;be>=-4;be-=2)ge(Math.PI*(be+.5),"rad")}}if(G||de||ne){var we=Math.sqrt(ee.width*ee.width+ee.height*ee.height);if((j={scale:oe*K*2/we,rCenter:1-oe,rotate:0}).textPosAngle=(Q.startangle+Q.stopangle)/2,j.scale>=1)return j;he.push(j)}(de||ue)&&((j=A(ee,K,H,re,q)).textPosAngle=(Q.startangle+Q.stopangle)/2,he.push(j)),(de||le)&&((j=M(ee,K,H,re,q)).textPosAngle=(Q.startangle+Q.stopangle)/2,he.push(j));for(var ke=0,De=0,Ee=0;Ee<he.length;Ee++){var Re=he[Ee].scale;if(De<Re&&(De=Re,ke=Ee),!de&&De>=1)break}return he[ke]}function A(ee,Q,$,K,oe){Q=Math.max(0,Q-2*u);var j=ee.width/ee.height,H=P(j,K,Q,$);return{scale:2*H/ee.height,rCenter:k(j,H/Q),rotate:E(oe)}}function M(ee,Q,$,K,oe){Q=Math.max(0,Q-2*u);var j=ee.height/ee.width,H=P(j,K,Q,$);return{scale:2*H/ee.width,rCenter:k(j,H/Q),rotate:E(oe+Math.PI/2)}}function k(ee,Q){return Math.cos(Q)-ee*Q}function E(ee){return(180/Math.PI*ee+720)%180-90}function P(ee,Q,$,K){var oe=ee+1/(2*Math.tan(Q));return $*Math.min(1/(Math.sqrt(oe*oe+.5)+oe),K/(Math.sqrt(ee*ee+K/2)+ee))}function S(ee,Q){return ee.v!==Q.vTotal||Q.trace.hole?Math.min(1/(1+1/Math.sin(ee.halfangle)),ee.ring/2):1}function F(ee,Q){var $=Q.pxmid[0],K=Q.pxmid[1],oe=ee.width/2,j=ee.height/2;return $<0&&(oe*=-1),K<0&&(j*=-1),{scale:1,rCenter:1,rotate:0,x:oe+Math.abs(j)*(oe>0?1:-1)/2,y:j/(1+$*$/(K*K)),outside:!0}}function R(ee,Q){var $,K,oe,j=ee.trace,H={x:ee.cx,y:ee.cy},G={tx:0,ty:0};G.ty+=j.title.font.size,oe=L(j),-1!==j.title.position.indexOf("top")?(H.y-=(1+oe)*ee.r,G.ty-=ee.titleBox.height):-1!==j.title.position.indexOf("bottom")&&(H.y+=(1+oe)*ee.r);var q,te=ee.r/(void 0===(q=ee.trace.aspectratio)?1:q),ne=Q.w*(j.domain.x[1]-j.domain.x[0])/2;return-1!==j.title.position.indexOf("left")?(ne+=te,H.x-=(1+oe)*te,G.tx+=ee.titleBox.width/2):-1!==j.title.position.indexOf("center")?ne*=2:-1!==j.title.position.indexOf("right")&&(ne+=te,H.x+=(1+oe)*te,G.tx-=ee.titleBox.width/2),$=ne/ee.titleBox.width,K=D(ee,Q)/ee.titleBox.height,{x:H.x,y:H.y,scale:Math.min($,K),tx:G.tx,ty:G.ty}}function D(ee,Q){var $=ee.trace;return Math.min(ee.titleBox.height,Q.h*($.domain.y[1]-$.domain.y[0])/2)}function L(ee){var Q,$=ee.pull;if(!$)return 0;if(Array.isArray($))for($=0,Q=0;Q<ee.pull.length;Q++)ee.pull[Q]>$&&($=ee.pull[Q]);return $}function B(ee,Q){for(var $=[],K=0;K<ee.length;K++){var oe=ee[K][0],j=oe.trace,H=j.domain,G=Q.w*(H.x[1]-H.x[0]),re=Q.h*(H.y[1]-H.y[0]);j.title.text&&"middle center"!==j.title.position&&(re-=D(oe,Q));var te=re/2;"funnelarea"!==j.type||j.scalegroup||(te/=j.aspectratio),oe.r=Math.min(G/2,te)/(1+L(j)),oe.cx=Q.l+Q.w*(j.domain.x[1]+j.domain.x[0])/2,oe.cy=Q.t+Q.h*(1-j.domain.y[0])-re/2,j.title.text&&-1!==j.title.position.indexOf("bottom")&&(oe.cy-=D(oe,Q)),j.scalegroup&&-1===$.indexOf(j.scalegroup)&&$.push(j.scalegroup)}!function(ne,le){for(var ue,de,he,be=0;be<le.length;be++){var ge=1/0,we=le[be];for(de=0;de<ne.length;de++)if((he=(ue=ne[de][0]).trace).scalegroup===we){var ke;if("pie"===he.type)ke=ue.r*ue.r;else if("funnelarea"===he.type){var De,Ee;he.aspectratio>1?Ee=(De=ue.r)/he.aspectratio:De=(Ee=ue.r)*he.aspectratio,ke=(De*=(1+he.baseratio)/2)*Ee}ge=Math.min(ge,ke/ue.vTotal)}for(de=0;de<ne.length;de++)if((he=(ue=ne[de][0]).trace).scalegroup===we){var Re=ge*ue.vTotal;"funnelarea"===he.type&&(Re/=(1+he.baseratio)/2,Re/=he.aspectratio),ue.r=Math.sqrt(Re)}}}(ee,$)}function V(ee,Q){return[ee*Math.sin(Q),-ee*Math.cos(Q)]}function Z(ee,Q,$){var ke,K=ee._fullLayout,oe=$.trace,j=oe.texttemplate,H=oe.textinfo;if(!j&&H&&"none"!==H){var G,re=H.split("+"),q=function(ke){return-1!==re.indexOf(ke)},te=q("label"),ne=q("text"),le=q("value"),ue=q("percent"),de=K.separators;if(G=te?[Q.label]:[],ne){var he=f.getFirstFilled(oe.text,Q.pts);y(he)&&G.push(he)}le&&G.push(f.formatPieValue(Q.v,de)),ue&&G.push(f.formatPiePercent(Q.v/$.vTotal,de)),Q.text=G.join("<br>")}if(j){var be=r.castOption(oe,Q.i,"texttemplate");if(be){var ge={label:(ke=Q).label,value:ke.v,valueLabel:f.formatPieValue(ke.v,K.separators),percent:ke.v/$.vTotal,percentLabel:f.formatPiePercent(ke.v/$.vTotal,K.separators),color:ke.color,text:ke.text,customdata:r.castOption(oe,ke.i,"customdata")},we=f.getFirstFilled(oe.text,Q.pts);(y(we)||""===we)&&(ge.text=we),Q.text=r.texttemplateString(be,ge,ee._fullLayout._d3locale,ge,oe._meta||{})}else Q.text=""}}function Y(ee,Q){var $=ee.rotate*Math.PI/180,K=Math.cos($),oe=Math.sin($),j=(Q.left+Q.right)/2,H=(Q.top+Q.bottom)/2;ee.textX=j*K-H*oe,ee.textY=j*oe+H*K,ee.noCenter=!0}ae.exports={plot:function(ee,Q){var $=ee._fullLayout,K=$._size;i("pie",$),w(Q,ee),B(Q,K);var oe=r.makeTraceGroups($._pielayer,Q,"trace").each(function(j){var H=g.select(this),G=j[0],re=G.trace;(function(q){var te,ne,le,ue=q[0],de=ue.r,he=ue.trace,be=f.getRotationAngle(he.rotation),ge=2*Math.PI/ue.vTotal,we="px0",ke="px1";if("counterclockwise"===he.direction){for(te=0;te<q.length&&q[te].hidden;te++);if(te===q.length)return;be+=ge*q[te].v,ge*=-1,we="px1",ke="px0"}for(le=V(de,be),te=0;te<q.length;te++)(ne=q[te]).hidden||(ne[we]=le,ne.startangle=be,ne.pxmid=V(de,be+=ge*ne.v/2),ne.midangle=be,le=V(de,be+=ge*ne.v/2),ne.stopangle=be,ne[ke]=le,ne.largeArc=ne.v>ue.vTotal/2?1:0,ne.halfangle=Math.PI*Math.min(ne.v/ue.vTotal,.5),ne.ring=1-he.hole,ne.rInscribed=S(ne,ue))})(j),H.attr("stroke-linejoin","round"),H.each(function(){var q=g.select(this).selectAll("g.slice").data(j);q.enter().append("g").classed("slice",!0),q.exit().remove();var te=[[[],[]],[[],[]]],ne=!1;q.each(function(ke,De){if(ke.hidden)g.select(this).selectAll("path,g").remove();else{ke.pointNumber=ke.i,ke.curveNumber=re.index,te[ke.pxmid[1]<0?0:1][ke.pxmid[0]<0?0:1].push(ke);var Ee=G.cx,Re=G.cy,ve=g.select(this),Te=ve.selectAll("path.surface").data([ke]);if(Te.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),ve.call(m,ee,j),re.pull){var Ie=+f.castOption(re.pull,ke.pts)||0;Ie>0&&(Ee+=Ie*ke.pxmid[0],Re+=Ie*ke.pxmid[1])}ke.cxFinal=Ee,ke.cyFinal=Re;var Ce=re.hole;if(ke.v===G.vTotal){var Pe="M"+(Ee+ke.px0[0])+","+(Re+ke.px0[1])+He(ke.px0,ke.pxmid,!0,1)+He(ke.pxmid,ke.px0,!0,1)+"Z";Te.attr("d",Ce?"M"+(Ee+Ce*ke.px0[0])+","+(Re+Ce*ke.px0[1])+He(ke.px0,ke.pxmid,!1,Ce)+He(ke.pxmid,ke.px0,!1,Ce)+"Z"+Pe:Pe)}else{var Ve=He(ke.px0,ke.px1,!0,1);if(Ce){var qe=1-Ce;Te.attr("d","M"+(Ee+Ce*ke.px1[0])+","+(Re+Ce*ke.px1[1])+He(ke.px1,ke.px0,!1,Ce)+"l"+qe*ke.px0[0]+","+qe*ke.px0[1]+Ve+"Z")}else Te.attr("d","M"+Ee+","+Re+"l"+ke.px0[0]+","+ke.px0[1]+Ve+"Z")}Z(ee,ke,G);var Je=f.castOption(re.textposition,ke.pts),lt=ve.selectAll("g.slicetext").data(ke.text&&"none"!==Je?[0]:[]);lt.enter().append("g").classed("slicetext",!0),lt.exit().remove(),lt.each(function(){var ht,ut,Rt,$e=r.ensureSingle(g.select(this),"text","",function(ht){ht.attr("data-notex",1)}),et=r.ensureUniformFontSize(ee,"outside"===Je?(Rt=$.font,{color:f.castOption((ht=re).outsidetextfont.color,(ut=ke).pts)||f.castOption(ht.textfont.color,ut.pts)||Rt.color,family:f.castOption(ht.outsidetextfont.family,ut.pts)||f.castOption(ht.textfont.family,ut.pts)||Rt.family,size:f.castOption(ht.outsidetextfont.size,ut.pts)||f.castOption(ht.textfont.size,ut.pts)||Rt.size}):l(re,ke,$.font));$e.text(ke.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,et).call(n.convertToTspans,ee);var tt,ft=e.bBox($e.node());if("outside"===Je)tt=F(ft,ke);else if(tt=v(ft,ke,G),"auto"===Je&&tt.scale<1){var bt=r.ensureUniformFontSize(ee,re.outsidetextfont);$e.call(e.font,bt),tt=F(ft=e.bBox($e.node()),ke)}var Ct=tt.textPosAngle,Vt=void 0===Ct?ke.pxmid:V(G.r,Ct);if(tt.targetX=Ee+Vt[0]*tt.rCenter+(tt.x||0),tt.targetY=Re+Vt[1]*tt.rCenter+(tt.y||0),Y(tt,ft),tt.outside){var Ft=tt.targetY;ke.yLabelMin=Ft-ft.height/2,ke.yLabelMid=Ft,ke.yLabelMax=Ft+ft.height/2,ke.labelExtraX=0,ke.labelExtraY=0,ne=!0}tt.fontSize=et.size,s(re.type,tt,$),j[De].transform=tt,$e.attr("transform",r.getTextTransform(tt))})}function He($e,et,tt,ft){return"a"+ft*G.r+","+ft*G.r+" 0 "+ke.largeArc+(tt?" 1 ":" 0 ")+ft*(et[0]-$e[0])+","+ft*(et[1]-$e[1])}});var De,le=g.select(this).selectAll("g.titletext").data(re.title.text?[0]:[]);if(le.enter().append("g").classed("titletext",!0),le.exit().remove(),le.each(function(){var ke,Re,ve,De=r.ensureSingle(g.select(this),"text","",function(Re){Re.attr("data-notex",1)}),Ee=re.title.text;re._meta&&(Ee=r.templateString(Ee,re._meta)),De.text(Ee).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,re.title.font).call(n.convertToTspans,ee),ke="middle center"===re.title.position?(Re=G,ve=Math.sqrt(Re.titleBox.width*Re.titleBox.width+Re.titleBox.height*Re.titleBox.height),{x:Re.cx,y:Re.cy,scale:Re.trace.hole*Re.r*2/ve,tx:0,ty:-Re.titleBox.height/2+Re.trace.title.font.size}):R(G,K),De.attr("transform",a(ke.x,ke.y)+t(Math.min(1,ke.scale))+a(ke.tx,ke.ty))}),ne&&function(ke,De){var Ee,Re,ve,Te,Ie,Ce,Pe,Ve,qe,Je,lt,He,$e;function et(Ct,Vt){return Ct.pxmid[1]-Vt.pxmid[1]}function tt(Ct,Vt){return Vt.pxmid[1]-Ct.pxmid[1]}function ft(Ct,Vt){Vt||(Vt={});var Ft,ht,ut,Rt,nn=Vt.labelExtraY+(Re?Vt.yLabelMax:Vt.yLabelMin),cn=Re?Ct.yLabelMin:Ct.yLabelMax,Ze=Re?Ct.yLabelMax:Ct.yLabelMin,Qe=Ct.cyFinal+Ie(Ct.px0[1],Ct.px1[1]),Ge=nn-cn;if(Ge*Pe>0&&(Ct.labelExtraY=Ge),Array.isArray(De.pull))for(ht=0;ht<Je.length;ht++)(ut=Je[ht])===Ct||(f.castOption(De.pull,Ct.pts)||0)>=(f.castOption(De.pull,ut.pts)||0)||((Ct.pxmid[1]-ut.pxmid[1])*Pe>0?(Ge=ut.cyFinal+Ie(ut.px0[1],ut.px1[1])-cn-Ct.labelExtraY)*Pe>0&&(Ct.labelExtraY+=Ge):(Ze+Ct.labelExtraY-Qe)*Pe>0&&(Ft=3*Ce*Math.abs(ht-Je.indexOf(Ct)),(Rt=ut.cxFinal+Te(ut.px0[0],ut.px1[0])+Ft-(Ct.cxFinal+Ct.pxmid[0])-Ct.labelExtraX)*Ce>0&&(Ct.labelExtraX+=Rt)))}for(Re=0;Re<2;Re++)for(ve=Re?et:tt,Ie=Re?Math.max:Math.min,Pe=Re?1:-1,Ee=0;Ee<2;Ee++){for(Te=Ee?Math.max:Math.min,Ce=Ee?1:-1,(Ve=ke[Re][Ee]).sort(ve),Je=(qe=ke[1-Re][Ee]).concat(Ve),He=[],lt=0;lt<Ve.length;lt++)void 0!==Ve[lt].yLabelMid&&He.push(Ve[lt]);for($e=!1,lt=0;Re&&lt<qe.length;lt++)if(void 0!==qe[lt].yLabelMid){$e=qe[lt];break}for(lt=0;lt<He.length;lt++){var bt=lt&&He[lt-1];$e&&!lt&&(bt=$e),ft(He[lt],bt)}}}(te,re),De=re,q.each(function(Ee){var Re=g.select(this);if(Ee.labelExtraX||Ee.labelExtraY){var ve=Re.select("g.slicetext text");Ee.transform.targetX+=Ee.labelExtraX,Ee.transform.targetY+=Ee.labelExtraY,ve.attr("transform",r.getTextTransform(Ee.transform));var Te=Ee.cxFinal+Ee.pxmid[0],Ie="M"+Te+","+(Ee.cyFinal+Ee.pxmid[1]),Ce=(Ee.yLabelMax-Ee.yLabelMin)*(Ee.pxmid[0]<0?-1:1)/4;if(Ee.labelExtraX){var Pe=Ee.labelExtraX*Ee.pxmid[1]/Ee.pxmid[0],Ve=Ee.yLabelMid+Ee.labelExtraY-(Ee.cyFinal+Ee.pxmid[1]);Math.abs(Pe)>Math.abs(Ve)?Ie+="l"+Ve*Ee.pxmid[0]/Ee.pxmid[1]+","+Ve+"H"+(Te+Ee.labelExtraX+Ce):Ie+="l"+Ee.labelExtraX+","+Pe+"v"+(Ve-Pe)+"h"+Ce}else Ie+="V"+(Ee.yLabelMid+Ee.labelExtraY)+"h"+Ce;r.ensureSingle(Re,"path","textline").call(b.stroke,De.outsidetextfont.color).attr({"stroke-width":Math.min(2,De.outsidetextfont.size/8),d:Ie,fill:"none"})}else Re.select("path.textline").remove()}),ne&&re.automargin){var ue=e.bBox(H.node()),de=re.domain,ge=(K.w*(de.x[1]-de.x[0])*.5-G.r)/K.w,we=(K.h*(de.y[1]-de.y[0])*.5-G.r)/K.h;x.autoMargin(ee,"pie."+re.uid+".automargin",{xl:de.x[0]-ge,xr:de.x[1]+ge,yb:de.y[0]-we,yt:de.y[1]+we,l:Math.max(G.cx-G.r-ue.left,0),r:Math.max(ue.right-(G.cx+G.r),0),b:Math.max(ue.bottom-(G.cy+G.r),0),t:Math.max(G.cy-G.r-ue.top,0),pad:5})}})});setTimeout(function(){oe.selectAll("tspan").each(function(){var j=g.select(this);j.attr("dy")&&j.attr("dy",j.attr("dy"))})},0)},formatSliceLabel:Z,transformInsideText:v,determineInsideTextFont:l,positionTitleOutside:R,prerenderTitles:w,layoutAreas:B,attachFxHandlers:m,computeTransform:Y}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":904,"./helpers":905,"@plotly/d3":58}],910:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("./style_one"),T=_("../bar/uniform_text").resizeText;ae.exports=function(b){var e=b._fullLayout._pielayer.selectAll(".trace");T(b,e,"pie"),e.each(function(r){var t=r[0].trace,a=g.select(this);a.style({opacity:t.opacity}),a.selectAll("path.surface").each(function(n){g.select(this).call(x,n,t)})})}},{"../bar/uniform_text":664,"./style_one":911,"@plotly/d3":58}],911:[function(_,ae,ie){"use strict";var g=_("../../components/color"),x=_("./helpers").castOption;ae.exports=function(T,b,e){var r=e.marker.line,t=x(r.color,b.pts)||g.defaultLine,a=x(r.width,b.pts)||0;T.style("stroke-width",a).call(g.fill,b.color).call(g.stroke,t)}},{"../../components/color":366,"./helpers":905}],912:[function(_,ae,ie){"use strict";var g=_("../scatter/attributes");ae.exports={x:g.x,y:g.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:g.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":926}],913:[function(_,ae,ie){"use strict";var g=_("../../../stackgl_modules").gl_pointcloud2d,x=_("../../lib/str2rgbarray"),T=_("../../plots/cartesian/autorange").findExtremes,b=_("../scatter/get_trace_color");function e(t,a){this.scene=t,this.uid=a,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=g(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var r=e.prototype;r.handlePick=function(t){var a=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*a],this.pickXYData[2*a+1]]:[this.pickXData[a],this.pickYData[a]],textLabel:Array.isArray(this.textLabels)?this.textLabels[a]:this.textLabels,color:this.color,name:this.name,pointIndex:a,hoverinfo:this.hoverinfo}},r.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=b(t,{})},r.updateFast=function(t){var a,n,d,s,i,u,f=this.xData=this.pickXData=t.x,p=this.yData=this.pickYData=t.y,y=this.pickXYData=t.xy,l=t.indices,w=this.bounds;if(y){if(d=y,a=y.length>>>1,t.xbounds&&t.ybounds)w[0]=t.xbounds[0],w[2]=t.xbounds[1],w[1]=t.ybounds[0],w[3]=t.ybounds[1];else for(u=0;u<a;u++)i=d[2*u+1],(s=d[2*u])<w[0]&&(w[0]=s),s>w[2]&&(w[2]=s),i<w[1]&&(w[1]=i),i>w[3]&&(w[3]=i);if(l)n=l;else for(n=new Int32Array(a),u=0;u<a;u++)n[u]=u}else for(a=f.length,d=new Float32Array(2*a),n=new Int32Array(a),u=0;u<a;u++)s=f[u],i=p[u],n[u]=u,d[2*u]=s,d[2*u+1]=i,s<w[0]&&(w[0]=s),s>w[2]&&(w[2]=s),i<w[1]&&(w[1]=i),i>w[3]&&(w[3]=i);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=d;var v=x(t.marker.color),A=x(t.marker.border.color),M=t.opacity*t.marker.opacity;v[3]*=M,this.pointcloudOptions.color=v;var k=t.marker.blend;null===k&&(k=f.length<100||p.length<100),this.pointcloudOptions.blend=k,A[3]*=M,this.pointcloudOptions.borderColor=A;var E=t.marker.sizemin,P=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=E,this.pointcloudOptions.sizeMax=P,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var S=this.scene.xaxis,F=this.scene.yaxis,R=P/2||.5;t._extremes[S._id]=T(S,[w[0],w[2]],{ppad:R}),t._extremes[F._id]=T(F,[w[1],w[3]],{ppad:R})},r.dispose=function(){this.pointcloud.dispose()},ae.exports=function(t,a){var n=new e(t,a.uid);return n.update(a),n}},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":936}],914:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes");ae.exports=function(T,b,e){function r(t,a){return g.coerce(T,b,x,t,a)}r("x"),r("y"),r("xbounds"),r("ybounds"),T.xy&&T.xy instanceof Float32Array&&(b.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(b.indices=T.indices),r("text"),r("marker.color",e),r("marker.opacity"),r("marker.blend"),r("marker.sizemin"),r("marker.sizemax"),r("marker.border.color",e),r("marker.border.arearatio"),b._length=null}},{"../../lib":503,"./attributes":912}],915:[function(_,ae,ie){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("../scatter3d/calc"),plot:_("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:_("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":955,"./attributes":912,"./convert":913,"./defaults":914}],916:[function(_,ae,ie){"use strict";var g=_("../../plots/font_attributes"),x=_("../../plots/attributes"),T=_("../../components/color/attributes"),b=_("../../components/fx/attributes"),e=_("../../plots/domain").attributes,r=_("../../plots/template_attributes").hovertemplateAttrs,t=_("../../components/colorscale/attributes"),a=_("../../plot_api/plot_template").templatedArray,n=_("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,d=_("../../lib/extend").extendFlat,s=_("../../plot_api/edit_types").overrideAll;(ae.exports=s({hoverinfo:d({},x.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:b.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:n("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:g({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:b.hoverlabel,hovertemplate:r({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:b.hoverlabel,hovertemplate:r({},{keys:["value","label"]}),colorscales:a("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:d(t().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],917:[function(_,ae,ie){"use strict";var g=_("../../plot_api/edit_types").overrideAll,x=_("../../plots/get_data").getModuleCalcData,T=_("./plot"),b=_("../../components/fx/layout_attributes"),e=_("../../lib/setcursor"),r=_("../../components/dragelement"),t=_("../../plots/cartesian/select").prepSelect,a=_("../../lib"),n=_("../../registry");function d(s,i){var u=s._fullData[i],f=s._fullLayout,p=f.dragmode,m=u._bgRect;if("pan"!==p&&"zoom"!==p){e(m,"pan"===f.dragmode?"move":"crosshair");var l={_id:"x",c2p:a.identity,_offset:u._sankey.translateX,_length:u._sankey.width},w={_id:"y",c2p:a.identity,_offset:u._sankey.translateY,_length:u._sankey.height},v={gd:s,element:m.node(),plotinfo:{id:i,xaxis:l,yaxis:w,fillRangeItems:a.noop},subplot:i,xaxes:[l],yaxes:[w],doneFnCompleted:function(A){var M,k=s._fullData[i],E=k.node.groups.slice(),P=[];function S(L){for(var B=k._sankey.graph.nodes,V=0;V<B.length;V++)if(B[V].pointNumber===L)return B[V]}for(var F=0;F<A.length;F++){var R=S(A[F].pointNumber);if(R)if(R.group){for(var D=0;D<R.childrenNodes.length;D++)P.push(R.childrenNodes[D].pointNumber);E[R.pointNumber-k.node._count]=!1}else P.push(R.pointNumber)}M=E.filter(Boolean).concat([P]),n.call("_guiRestyle",s,{"node.groups":[M]},i)},prepFn:function(A,M,k){t(A,M,k,v,p)}};r.init(v)}}ie.name="sankey",ie.baseLayoutAttrOverrides=g({hoverlabel:b.hoverlabel},"plot","nested"),ie.plot=function(s){var i=x(s.calcdata,"sankey")[0];T(s,i),ie.updateFx(s)},ie.clean=function(s,i,u,f){var p=f._has&&f._has("sankey"),y=i._has&&i._has("sankey");p&&!y&&(f._paperdiv.selectAll(".sankey").remove(),f._paperdiv.selectAll(".bgsankey").remove())},ie.updateFx=function(s){for(var i=0;i<s._fullData.length;i++)d(s,i)}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":922}],918:[function(_,ae,ie){"use strict";var g=_("strongly-connected-components"),x=_("../../lib"),T=_("../../lib/gup").wrap,b=x.isArrayOrTypedArray,e=x.isIndex,r=_("../../components/colorscale");ae.exports=function(a,n){var d=function(a){var n,d=a.node,s=a.link,i=[],u=b(s.color),f=b(s.customdata),p={},y={},m=s.colorscales.length;for(n=0;n<m;n++){var l=s.colorscales[n],w=r.extractScale(l,{cLetter:"c"}),v=r.makeColorScaleFunc(w);y[l.label]=v}var A=0;for(n=0;n<s.value.length;n++)s.source[n]>A&&(A=s.source[n]),s.target[n]>A&&(A=s.target[n]);var M,k=A+1;a.node._count=k;var E=a.node.groups,P={};for(n=0;n<E.length;n++){var S=E[n];for(M=0;M<S.length;M++){var F=S[M],R=k+n;P.hasOwnProperty(F)?x.warn("Node "+F+" is already part of a group."):P[F]=R}}var D={source:[],target:[]};for(n=0;n<s.value.length;n++){var L=s.value[n],B=s.source[n],V=s.target[n];if(L>0&&e(B,k)&&e(V,k)&&(!P.hasOwnProperty(B)||!P.hasOwnProperty(V)||P[B]!==P[V])){P.hasOwnProperty(V)&&(V=P[V]),P.hasOwnProperty(B)&&(B=P[B]),p[B=+B]=p[V=+V]=!0;var Z="";s.label&&s.label[n]&&(Z=s.label[n]);var Y=null;Z&&y.hasOwnProperty(Z)&&(Y=y[Z]),i.push({pointNumber:n,label:Z,color:u?s.color[n]:s.color,customdata:f?s.customdata[n]:s.customdata,concentrationscale:Y,source:B,target:V,value:+L}),D.source.push(B),D.target.push(V)}}var ee=k+E.length,Q=b(d.color),$=b(d.customdata),K=[];for(n=0;n<ee;n++)p[n]&&K.push({group:n>k-1,childrenNodes:[],pointNumber:n,label:d.label[n],color:Q?d.color[n]:d.color,customdata:$?d.customdata[n]:d.customdata});var j=!1;return function(H,G,re){for(var q=x.init2dArray(H,0),te=0;te<Math.min(G.length,re.length);te++)if(x.isIndex(G[te],H)&&x.isIndex(re[te],H)){if(G[te]===re[te])return!0;q[G[te]].push(re[te])}return g(q).components.some(function(ne){return ne.length>1})}(ee,D.source,D.target)&&(j=!0),{circular:j,links:i,nodes:K,groups:E,groupLookup:P}}(n);return T({circular:d.circular,_nodes:d.nodes,_links:d.links,_groups:d.groups,_groupLookup:d.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],919:[function(_,ae,ie){"use strict";ae.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],920:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes"),T=_("../../components/color"),b=_("tinycolor2"),e=_("../../plots/domain").defaults,r=_("../../components/fx/hoverlabel_defaults"),t=_("../../plot_api/plot_template"),a=_("../../plots/array_container_defaults");function n(d,s){function i(u,f){return g.coerce(d,s,x.link.colorscales,u,f)}i("label"),i("cmin"),i("cmax"),i("colorscale")}ae.exports=function(d,s,i,u){function f(P,S){return g.coerce(d,s,x,P,S)}var p=g.extendDeep(u.hoverlabel,d.hoverlabel),y=d.node,m=t.newContainer(s,"node");function l(P,S){return g.coerce(y,m,x.node,P,S)}l("label"),l("groups"),l("x"),l("y"),l("pad"),l("thickness"),l("line.color"),l("line.width"),l("hoverinfo",d.hoverinfo),r(y,m,l,p),l("hovertemplate");var w=u.colorway;l("color",m.label.map(function(P,S){return T.addOpacity(w[S%w.length],.8)})),l("customdata");var v=d.link||{},A=t.newContainer(s,"link");function M(P,S){return g.coerce(v,A,x.link,P,S)}M("label"),M("source"),M("target"),M("value"),M("line.color"),M("line.width"),M("hoverinfo",d.hoverinfo),r(v,A,M,p),M("hovertemplate");var k,E=b(u.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";M("color",g.repeat(E,A.value.length)),M("customdata"),a(v,A,{name:"colorscales",handleItemDefaults:n}),e(s,u,f),f("orientation"),f("valueformat"),f("valuesuffix"),m.x.length&&m.y.length&&(k="freeform"),f("arrangement",k),g.coerceFont(f,"textfont",g.extendFlat({},u.font)),s._length=null}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":916,tinycolor2:312}],921:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),moduleType:"trace",name:"sankey",basePlotModule:_("./base_plot"),selectPoints:_("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":916,"./base_plot":917,"./calc":918,"./defaults":920,"./plot":922,"./select.js":924}],922:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("./render"),e=_("../../components/fx"),r=_("../../components/color"),t=_("./constants").cn,a=x._;function n(v){return""!==v}function d(v,A){return v.filter(function(M){return M.key===A.traceId})}function s(v,A){g.select(v).select("path").style("fill-opacity",A),g.select(v).select("rect").style("fill-opacity",A)}function i(v){g.select(v).select("text.name").style("fill","black")}function u(v){return function(A){return-1!==v.node.sourceLinks.indexOf(A.link)||-1!==v.node.targetLinks.indexOf(A.link)}}function f(v){return function(A){return-1!==A.node.sourceLinks.indexOf(v.link)||-1!==A.node.targetLinks.indexOf(v.link)}}function p(v,A,M){A&&M&&d(M,A).selectAll("."+t.sankeyLink).filter(u(A)).call(m.bind(0,A,M,!1))}function y(v,A,M){A&&M&&d(M,A).selectAll("."+t.sankeyLink).filter(u(A)).call(l.bind(0,A,M,!1))}function m(v,A,M,k){var E=k.datum().link.label;k.style("fill-opacity",function(P){if(!P.link.concentrationscale)return.4}),E&&d(A,v).selectAll("."+t.sankeyLink).filter(function(P){return P.link.label===E}).style("fill-opacity",function(P){if(!P.link.concentrationscale)return.4}),M&&d(A,v).selectAll("."+t.sankeyNode).filter(f(v)).call(p)}function l(v,A,M,k){var E=k.datum().link.label;k.style("fill-opacity",function(P){return P.tinyColorAlpha}),E&&d(A,v).selectAll("."+t.sankeyLink).filter(function(P){return P.link.label===E}).style("fill-opacity",function(P){return P.tinyColorAlpha}),M&&d(A,v).selectAll(t.sankeyNode).filter(f(v)).call(y)}function w(v,A){var k=x.nestedProperty(v.hoverlabel||{},A).get();return!Array.isArray(k)&&k}ae.exports=function(v,A){for(var M=v._fullLayout,k=M._paper,E=M._size,P=0;P<v._fullData.length;P++)if(v._fullData[P].visible&&v._fullData[P].type===t.sankey&&!v._fullData[P]._viewInitial){var S=v._fullData[P].node;v._fullData[P]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var F=a(v,"source:")+" ",R=a(v,"target:")+" ",D=a(v,"concentration:")+" ",L=a(v,"incoming flow count:")+" ",B=a(v,"outgoing flow count:")+" ";b(v,k,A,{width:E.w,height:E.h,margin:{t:E.t,r:E.r,b:E.b,l:E.l}},{linkEvents:{hover:function(V,Z,Y){!1!==v._fullLayout.hovermode&&(g.select(V).call(m.bind(0,Z,Y,!0)),"skip"!==Z.link.trace.link.hoverinfo&&(Z.link.fullData=Z.link.trace,v.emit("plotly_hover",{event:g.event,points:[Z.link]})))},follow:function(V,Z){if(!1!==v._fullLayout.hovermode){var Y=Z.link.trace.link;if("none"!==Y.hoverinfo&&"skip"!==Y.hoverinfo){for(var ee=[],Q=0,$=0;$<Z.flow.links.length;$++){var K=Z.flow.links[$];if("closest"!==v._fullLayout.hovermode||Z.link.pointNumber===K.pointNumber){Z.link.pointNumber===K.pointNumber&&(Q=$),K.fullData=K.trace,Y=Z.link.trace.link;var oe=H(K),j={valueLabel:T(Z.valueFormat)(K.value)+Z.valueSuffix};ee.push({x:oe[0],y:oe[1],name:j.valueLabel,text:[K.label||"",F+K.source.label,R+K.target.label,K.concentrationscale?D+T("%0.2f")(K.flow.labelConcentration):""].filter(n).join("<br>"),color:w(Y,"bgcolor")||r.addOpacity(K.color,1),borderColor:w(Y,"bordercolor"),fontFamily:w(Y,"font.family"),fontSize:w(Y,"font.size"),fontColor:w(Y,"font.color"),nameLength:w(Y,"namelength"),textAlign:w(Y,"align"),idealAlign:g.event.x<oe[0]?"right":"left",hovertemplate:Y.hovertemplate,hovertemplateLabels:j,eventData:[K]})}}e.loneHover(ee,{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:v,anchorIndex:Q}).each(function(){Z.link.concentrationscale||s(this,.65),i(this)})}}function H(G){var re,q;G.circular?(re=(G.circularPathData.leftInnerExtent+G.circularPathData.rightInnerExtent)/2,q=G.circularPathData.verticalFullExtent):(re=(G.source.x1+G.target.x0)/2,q=(G.y0+G.y1)/2);var te=[re,q];return"v"===G.trace.orientation&&te.reverse(),te[0]+=Z.parent.translateX,te[1]+=Z.parent.translateY,te}},unhover:function(V,Z,Y){!1!==v._fullLayout.hovermode&&(g.select(V).call(l.bind(0,Z,Y,!0)),"skip"!==Z.link.trace.link.hoverinfo&&(Z.link.fullData=Z.link.trace,v.emit("plotly_unhover",{event:g.event,points:[Z.link]})),e.loneUnhover(M._hoverlayer.node()))},select:function(V,Z){var Y=Z.link;Y.originalEvent=g.event,v._hoverdata=[Y],e.click(v,{target:!0})}},nodeEvents:{hover:function(V,Z,Y){!1!==v._fullLayout.hovermode&&(g.select(V).call(p,Z,Y),"skip"!==Z.node.trace.node.hoverinfo&&(Z.node.fullData=Z.node.trace,v.emit("plotly_hover",{event:g.event,points:[Z.node]})))},follow:function(V,Z){if(!1!==v._fullLayout.hovermode){var Y=Z.node.trace.node;if("none"!==Y.hoverinfo&&"skip"!==Y.hoverinfo){var ee=g.select(V).select("."+t.nodeRect),Q=v._fullLayout._paperdiv.node().getBoundingClientRect(),$=ee.node().getBoundingClientRect(),K=$.left-2-Q.left,oe=$.right+2-Q.left,j=$.top+$.height/4-Q.top,H={valueLabel:T(Z.valueFormat)(Z.node.value)+Z.valueSuffix};Z.node.fullData=Z.node.trace,v._fullLayout._calcInverseTransform(v);var G=v._fullLayout._invScaleX,q=e.loneHover({x0:G*K,x1:G*oe,y:v._fullLayout._invScaleY*j,name:T(Z.valueFormat)(Z.node.value)+Z.valueSuffix,text:[Z.node.label,L+Z.node.targetLinks.length,B+Z.node.sourceLinks.length].filter(n).join("<br>"),color:w(Y,"bgcolor")||Z.tinyColorHue,borderColor:w(Y,"bordercolor"),fontFamily:w(Y,"font.family"),fontSize:w(Y,"font.size"),fontColor:w(Y,"font.color"),nameLength:w(Y,"namelength"),textAlign:w(Y,"align"),idealAlign:"left",hovertemplate:Y.hovertemplate,hovertemplateLabels:H,eventData:[Z.node]},{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:v});s(q,.85),i(q)}}},unhover:function(V,Z,Y){!1!==v._fullLayout.hovermode&&(g.select(V).call(y,Z,Y),"skip"!==Z.node.trace.node.hoverinfo&&(Z.node.fullData=Z.node.trace,v.emit("plotly_unhover",{event:g.event,points:[Z.node]})),e.loneUnhover(M._hoverlayer.node()))},select:function(V,Z,Y){var ee=Z.node;ee.originalEvent=g.event,v._hoverdata=[ee],g.select(V).call(y,Z,Y),e.click(v,{target:!0})}}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":919,"./render":923,"@plotly/d3":58}],923:[function(_,ae,ie){"use strict";var g=_("d3-force"),x=_("d3-interpolate").interpolateNumber,T=_("@plotly/d3"),b=_("@plotly/d3-sankey"),e=_("@plotly/d3-sankey-circular"),r=_("./constants"),t=_("tinycolor2"),a=_("../../components/color"),n=_("../../components/drawing"),d=_("../../lib"),s=d.strTranslate,i=d.strRotate,u=_("../../lib/gup"),f=u.keyFun,p=u.repeat,y=u.unwrap,m=_("../../lib/svg_text_utils"),l=_("../../registry"),w=_("../../constants/alignment"),v=w.CAP_SHIFT,A=w.LINE_SPACING;function M($,K,oe){var j,H=y(K),G=H.trace,re=G.domain,q="h"===G.orientation,te=G.node.pad,ne=G.node.thickness,le=$.width*(re.x[1]-re.x[0]),ue=$.height*(re.y[1]-re.y[0]),de=H._nodes,he=H._links,be=H.circular;(j=be?e.sankeyCircular().circularLinkGap(0):b.sankey()).iterations(r.sankeyIterations).size(q?[le,ue]:[ue,le]).nodeWidth(ne).nodePadding(te).nodeId(function(Pe){return Pe.pointNumber}).nodes(de).links(he);var ge,we,ke,De=j();for(var Ee in j.nodePadding()<te&&d.warn("node.pad was reduced to ",j.nodePadding()," to fit within the figure."),H._groupLookup){var Re,ve=parseInt(H._groupLookup[Ee]);for(ge=0;ge<De.nodes.length;ge++)if(De.nodes[ge].pointNumber===ve){Re=De.nodes[ge];break}if(Re){var Te={pointNumber:parseInt(Ee),x0:Re.x0,x1:Re.x1,y0:Re.y0,y1:Re.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};De.nodes.unshift(Te),Re.childrenNodes.unshift(Te)}}if(function(){for(ge=0;ge<De.nodes.length;ge++){var Pe,Ve,qe=De.nodes[ge],Je={};for(we=0;we<qe.targetLinks.length;we++)Pe=(Ve=qe.targetLinks[we]).source.pointNumber+":"+Ve.target.pointNumber,Je.hasOwnProperty(Pe)||(Je[Pe]=[]),Je[Pe].push(Ve);var lt=Object.keys(Je);for(we=0;we<lt.length;we++){var He=Je[Pe=lt[we]],$e=0,et={};for(ke=0;ke<He.length;ke++)et[(Ve=He[ke]).label]||(et[Ve.label]=0),et[Ve.label]+=Ve.value,$e+=Ve.value;for(ke=0;ke<He.length;ke++)(Ve=He[ke]).flow={value:$e,labelConcentration:et[Ve.label]/$e,concentration:Ve.value/$e,links:He},Ve.concentrationscale&&(Ve.color=t(Ve.concentrationscale(Ve.flow.labelConcentration)))}var tt=0;for(we=0;we<qe.sourceLinks.length;we++)tt+=qe.sourceLinks[we].value;for(we=0;we<qe.sourceLinks.length;we++)(Ve=qe.sourceLinks[we]).concentrationOut=Ve.value/tt;var ft=0;for(we=0;we<qe.targetLinks.length;we++)ft+=qe.targetLinks[we].value;for(we=0;we<qe.targetLinks.length;we++)(Ve=qe.targetLinks[we]).concenrationIn=Ve.value/ft}}(),G.node.x.length&&G.node.y.length){for(ge=0;ge<Math.min(G.node.x.length,G.node.y.length,De.nodes.length);ge++)if(G.node.x[ge]&&G.node.y[ge]){var Ie=[G.node.x[ge]*le,G.node.y[ge]*ue];De.nodes[ge].x0=Ie[0]-ne/2,De.nodes[ge].x1=Ie[0]+ne/2;var Ce=De.nodes[ge].y1-De.nodes[ge].y0;De.nodes[ge].y0=Ie[1]-Ce/2,De.nodes[ge].y1=Ie[1]+Ce/2}"snap"===G.arrangement&&function(Pe){var Ve,qe,Je=Pe.map(function(tt,ft){return{x0:tt.x0,index:ft}}).sort(function(tt,ft){return tt.x0-ft.x0}),lt=[],He=-1,$e=-1/0;for(ge=0;ge<Je.length;ge++){var et=Pe[Je[ge].index];et.x0>$e+ne&&(He+=1,Ve=et.x0),$e=et.x0,lt[He]||(lt[He]=[]),lt[He].push(et),et.x0+=qe=Ve-et.x0,et.x1+=qe}return lt}(de=De.nodes).forEach(function(Ve){var qe,Je,lt,He=0,$e=Ve.length;for(Ve.sort(function(et,tt){return et.y0-tt.y0}),lt=0;lt<$e;++lt)(qe=Ve[lt]).y0>=He||(Je=He-qe.y0)>1e-6&&(qe.y0+=Je,qe.y1+=Je),He=qe.y1+te}),j.update(De)}return{circular:be,key:oe,trace:G,guid:d.randstr(),horizontal:q,width:le,height:ue,nodePad:G.node.pad,nodeLineColor:G.node.line.color,nodeLineWidth:G.node.line.width,linkLineColor:G.link.line.color,linkLineWidth:G.link.line.width,valueFormat:G.valueformat,valueSuffix:G.valuesuffix,textFont:G.textfont,translateX:re.x[0]*$.width+$.margin.l,translateY:$.height-re.y[1]*$.height+$.margin.t,dragParallel:q?ue:le,dragPerpendicular:q?le:ue,arrangement:G.arrangement,sankey:j,graph:De,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function k($,K,oe){var j=t(K.color),H=K.source.label+"|"+K.target.label+"__"+oe;return K.trace=$.trace,K.curveNumber=$.trace.index,{circular:$.circular,key:H,traceId:$.key,pointNumber:K.pointNumber,link:K,tinyColorHue:a.tinyRGB(j),tinyColorAlpha:j.getAlpha(),linkPath:E,linkLineColor:$.linkLineColor,linkLineWidth:$.linkLineWidth,valueFormat:$.valueFormat,valueSuffix:$.valueSuffix,sankey:$.sankey,parent:$,interactionState:$.interactionState,flow:K.flow}}function E(){return function($){if($.link.circular)return oe=(K=$.link).width/2,j=K.circularPathData,"top"===K.circularLinkType?"M "+j.targetX+" "+(j.targetY+oe)+" L"+j.rightInnerExtent+" "+(j.targetY+oe)+"A"+(j.rightLargeArcRadius+oe)+" "+(j.rightSmallArcRadius+oe)+" 0 0 1 "+(j.rightFullExtent-oe)+" "+(j.targetY-j.rightSmallArcRadius)+"L"+(j.rightFullExtent-oe)+" "+j.verticalRightInnerExtent+"A"+(j.rightLargeArcRadius+oe)+" "+(j.rightLargeArcRadius+oe)+" 0 0 1 "+j.rightInnerExtent+" "+(j.verticalFullExtent-oe)+"L"+j.leftInnerExtent+" "+(j.verticalFullExtent-oe)+"A"+(j.leftLargeArcRadius+oe)+" "+(j.leftLargeArcRadius+oe)+" 0 0 1 "+(j.leftFullExtent+oe)+" "+j.verticalLeftInnerExtent+"L"+(j.leftFullExtent+oe)+" "+(j.sourceY-j.leftSmallArcRadius)+"A"+(j.leftLargeArcRadius+oe)+" "+(j.leftSmallArcRadius+oe)+" 0 0 1 "+j.leftInnerExtent+" "+(j.sourceY+oe)+"L"+j.sourceX+" "+(j.sourceY+oe)+"L"+j.sourceX+" "+(j.sourceY-oe)+"L"+j.leftInnerExtent+" "+(j.sourceY-oe)+"A"+(j.leftLargeArcRadius-oe)+" "+(j.leftSmallArcRadius-oe)+" 0 0 0 "+(j.leftFullExtent-oe)+" "+(j.sourceY-j.leftSmallArcRadius)+"L"+(j.leftFullExtent-oe)+" "+j.verticalLeftInnerExtent+"A"+(j.leftLargeArcRadius-oe)+" "+(j.leftLargeArcRadius-oe)+" 0 0 0 "+j.leftInnerExtent+" "+(j.verticalFullExtent+oe)+"L"+j.rightInnerExtent+" "+(j.verticalFullExtent+oe)+"A"+(j.rightLargeArcRadius-oe)+" "+(j.rightLargeArcRadius-oe)+" 0 0 0 "+(j.rightFullExtent+oe)+" "+j.verticalRightInnerExtent+"L"+(j.rightFullExtent+oe)+" "+(j.targetY-j.rightSmallArcRadius)+"A"+(j.rightLargeArcRadius-oe)+" "+(j.rightSmallArcRadius-oe)+" 0 0 0 "+j.rightInnerExtent+" "+(j.targetY-oe)+"L"+j.targetX+" "+(j.targetY-oe)+"Z":"M "+j.targetX+" "+(j.targetY-oe)+" L"+j.rightInnerExtent+" "+(j.targetY-oe)+"A"+(j.rightLargeArcRadius+oe)+" "+(j.rightSmallArcRadius+oe)+" 0 0 0 "+(j.rightFullExtent-oe)+" "+(j.targetY+j.rightSmallArcRadius)+"L"+(j.rightFullExtent-oe)+" "+j.verticalRightInnerExtent+"A"+(j.rightLargeArcRadius+oe)+" "+(j.rightLargeArcRadius+oe)+" 0 0 0 "+j.rightInnerExtent+" "+(j.verticalFullExtent+oe)+"L"+j.leftInnerExtent+" "+(j.verticalFullExtent+oe)+"A"+(j.leftLargeArcRadius+oe)+" "+(j.leftLargeArcRadius+oe)+" 0 0 0 "+(j.leftFullExtent+oe)+" "+j.verticalLeftInnerExtent+"L"+(j.leftFullExtent+oe)+" "+(j.sourceY+j.leftSmallArcRadius)+"A"+(j.leftLargeArcRadius+oe)+" "+(j.leftSmallArcRadius+oe)+" 0 0 0 "+j.leftInnerExtent+" "+(j.sourceY-oe)+"L"+j.sourceX+" "+(j.sourceY-oe)+"L"+j.sourceX+" "+(j.sourceY+oe)+"L"+j.leftInnerExtent+" "+(j.sourceY+oe)+"A"+(j.leftLargeArcRadius-oe)+" "+(j.leftSmallArcRadius-oe)+" 0 0 1 "+(j.leftFullExtent-oe)+" "+(j.sourceY+j.leftSmallArcRadius)+"L"+(j.leftFullExtent-oe)+" "+j.verticalLeftInnerExtent+"A"+(j.leftLargeArcRadius-oe)+" "+(j.leftLargeArcRadius-oe)+" 0 0 1 "+j.leftInnerExtent+" "+(j.verticalFullExtent-oe)+"L"+j.rightInnerExtent+" "+(j.verticalFullExtent-oe)+"A"+(j.rightLargeArcRadius-oe)+" "+(j.rightLargeArcRadius-oe)+" 0 0 1 "+(j.rightFullExtent+oe)+" "+j.verticalRightInnerExtent+"L"+(j.rightFullExtent+oe)+" "+(j.targetY+j.rightSmallArcRadius)+"A"+(j.rightLargeArcRadius-oe)+" "+(j.rightSmallArcRadius-oe)+" 0 0 1 "+j.rightInnerExtent+" "+(j.targetY+oe)+"L"+j.targetX+" "+(j.targetY+oe)+"Z";var K,oe,j,H=$.link.source.x1,G=$.link.target.x0,re=x(H,G),q=re(.5),te=re(.5),ne=$.link.y0-$.link.width/2,le=$.link.y0+$.link.width/2,ue=$.link.y1-$.link.width/2,de=$.link.y1+$.link.width/2;return"M"+H+","+ne+"C"+q+","+ne+" "+te+","+ue+" "+G+","+ue+"L"+G+","+de+"C"+te+","+de+" "+q+","+le+" "+H+","+le+"Z"}}function P($,K){var oe=t(K.color),j=r.nodePadAcross,H=$.nodePad/2;K.dx=K.x1-K.x0,K.dy=K.y1-K.y0;var G=K.dx,re=Math.max(.5,K.dy),q="node_"+K.pointNumber;return K.group&&(q=d.randstr()),K.trace=$.trace,K.curveNumber=$.trace.index,{index:K.pointNumber,key:q,partOfGroup:K.partOfGroup||!1,group:K.group,traceId:$.key,trace:$.trace,node:K,nodePad:$.nodePad,nodeLineColor:$.nodeLineColor,nodeLineWidth:$.nodeLineWidth,textFont:$.textFont,size:$.horizontal?$.height:$.width,visibleWidth:Math.ceil(G),visibleHeight:re,zoneX:-j,zoneY:-H,zoneWidth:G+2*j,zoneHeight:re+2*H,labelY:$.horizontal?K.dy/2+1:K.dx/2+1,left:1===K.originalLayer,sizeAcross:$.width,forceLayouts:$.forceLayouts,horizontal:$.horizontal,darkBackground:oe.getBrightness()<=128,tinyColorHue:a.tinyRGB(oe),tinyColorAlpha:oe.getAlpha(),valueFormat:$.valueFormat,valueSuffix:$.valueSuffix,sankey:$.sankey,graph:$.graph,arrangement:$.arrangement,uniqueNodeLabelPathId:[$.guid,$.key,q].join("_"),interactionState:$.interactionState,figure:$}}function S($){$.attr("transform",function(K){return s(K.node.x0.toFixed(3),K.node.y0.toFixed(3))})}function F($){$.call(S)}function R($,K){$.call(F),K.attr("d",E())}function D($){$.attr("width",function(K){return K.node.x1-K.node.x0}).attr("height",function(K){return K.visibleHeight})}function L($){return $.link.width>1||$.linkLineWidth>0}function B($){return s($.translateX,$.translateY)+($.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function V($,K,oe){$.on(".basic",null).on("mouseover.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(oe.hover(this,j,K),j.interactionState.hovered=[this,j])}).on("mousemove.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(oe.follow(this,j),j.interactionState.hovered=[this,j])}).on("mouseout.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(oe.unhover(this,j,K),j.interactionState.hovered=!1)}).on("click.basic",function(j){j.interactionState.hovered&&(oe.unhover(this,j,K),j.interactionState.hovered=!1),j.interactionState.dragInProgress||j.partOfGroup||oe.select(this,j,K)})}function Z($,K,oe,j){var H=T.behavior.drag().origin(function(G){return{x:G.node.x0+G.visibleWidth/2,y:G.node.y0+G.visibleHeight/2}}).on("dragstart",function(G){if("fixed"!==G.arrangement&&(d.ensureSingle(j._fullLayout._infolayer,"g","dragcover",function(q){j._fullLayout._dragCover=q}),d.raiseToTop(this),G.interactionState.dragInProgress=G.node,ee(G.node),G.interactionState.hovered&&(oe.nodeEvents.unhover.apply(0,G.interactionState.hovered),G.interactionState.hovered=!1),"snap"===G.arrangement)){var re=G.traceId+"|"+G.key;G.forceLayouts[re]?G.forceLayouts[re].alpha(1):function(q,te,ne,le){!function(de){for(var he=0;he<de.length;he++)de[he].y=(de[he].y0+de[he].y1)/2,de[he].x=(de[he].x0+de[he].x1)/2}(ne.graph.nodes);var he,be,ge,ue=ne.graph.nodes.filter(function(de){return de.originalX===ne.node.originalX}).filter(function(de){return!de.partOfGroup});ne.forceLayouts[te]=g.forceSimulation(ue).alphaDecay(0).force("collide",g.forceCollide().radius(function(de){return de.dy/2+ne.nodePad/2}).strength(1).iterations(r.forceIterations)).force("constrain",(he=te,be=ue,ge=ne,function(){for(var we=0,ke=0;ke<be.length;ke++){var De=be[ke];De===ge.interactionState.dragInProgress?(De.x=De.lastDraggedX,De.y=De.lastDraggedY):(De.vx=(De.originalX-De.x)/r.forceTicksPerFrame,De.y=Math.min(ge.size-De.dy/2,Math.max(De.dy/2,De.y))),we=Math.max(we,Math.abs(De.vx),Math.abs(De.vy))}!ge.interactionState.dragInProgress&&we<.1&&ge.forceLayouts[he].alpha()>0&&ge.forceLayouts[he].alpha(0)})).stop()}(0,re,G),q=$,te=K,ne=G,le=re,ue=j,window.requestAnimationFrame(function de(){var he;for(he=0;he<r.forceTicksPerFrame;he++)ne.forceLayouts[le].tick();if(function(ge){for(var we=0;we<ge.length;we++)ge[we].y0=ge[we].y-ge[we].dy/2,ge[we].y1=ge[we].y0+ge[we].dy,ge[we].x0=ge[we].x-ge[we].dx/2,ge[we].x1=ge[we].x0+ge[we].dx}(ne.graph.nodes),ne.sankey.update(ne.graph),R(q.filter(Q(ne)),te),ne.forceLayouts[le].alpha()>0)window.requestAnimationFrame(de);else{var be=ne.node.originalX;ne.node.x0=be-ne.visibleWidth/2,ne.node.x1=be+ne.visibleWidth/2,Y(ne,ue)}})}var q,te,ne,le,ue}).on("drag",function(G){if("fixed"!==G.arrangement){var re=T.event.x,q=T.event.y;"snap"===G.arrangement?(G.node.x0=re-G.visibleWidth/2,G.node.x1=re+G.visibleWidth/2,G.node.y0=q-G.visibleHeight/2,G.node.y1=q+G.visibleHeight/2):("freeform"===G.arrangement&&(G.node.x0=re-G.visibleWidth/2,G.node.x1=re+G.visibleWidth/2),q=Math.max(0,Math.min(G.size-G.visibleHeight/2,q)),G.node.y0=q-G.visibleHeight/2,G.node.y1=q+G.visibleHeight/2),ee(G.node),"snap"!==G.arrangement&&(G.sankey.update(G.graph),R($.filter(Q(G)),K))}}).on("dragend",function(G){if("fixed"!==G.arrangement){G.interactionState.dragInProgress=!1;for(var re=0;re<G.node.childrenNodes.length;re++)G.node.childrenNodes[re].x=G.node.x,G.node.childrenNodes[re].y=G.node.y;"snap"!==G.arrangement&&Y(G,j)}});$.on(".drag",null).call(H)}function Y($,K){for(var oe=[],j=[],H=0;H<$.graph.nodes.length;H++){var re=($.graph.nodes[H].y0+$.graph.nodes[H].y1)/2;oe.push(($.graph.nodes[H].x0+$.graph.nodes[H].x1)/2/$.figure.width),j.push(re/$.figure.height)}l.call("_guiRestyle",K,{"node.x":[oe],"node.y":[j]},$.trace.index).then(function(){K._fullLayout._dragCover&&K._fullLayout._dragCover.remove()})}function ee($){$.lastDraggedX=$.x0+$.dx/2,$.lastDraggedY=$.y0+$.dy/2}function Q($){return function(K){return K.node.originalX===$.node.originalX}}ae.exports=function($,K,oe,j,H){var G=!1;d.ensureSingle($._fullLayout._infolayer,"g","first-render",function(){G=!0});var re=$._fullLayout._dragCover,q=oe.filter(function(ge){return y(ge).trace.visible}).map(M.bind(null,j)),te=K.selectAll("."+r.cn.sankey).data(q,f);te.exit().remove(),te.enter().append("g").classed(r.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",B),te.each(function(ge,we){$._fullData[we]._sankey=ge;var ke="bgsankey-"+ge.trace.uid+"-"+we;d.ensureSingle($._fullLayout._draggers,"rect",ke),$._fullData[we]._bgRect=T.select("."+ke),$._fullData[we]._bgRect.style("pointer-events","all").attr("width",ge.width).attr("height",ge.height).attr("x",ge.translateX).attr("y",ge.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),te.transition().ease(r.ease).duration(r.duration).attr("transform",B);var ne=te.selectAll("."+r.cn.sankeyLinks).data(p,f);ne.enter().append("g").classed(r.cn.sankeyLinks,!0).style("fill","none");var le=ne.selectAll("."+r.cn.sankeyLink).data(function(ge){return ge.graph.links.filter(function(we){return we.value}).map(k.bind(null,ge))},f);le.enter().append("path").classed(r.cn.sankeyLink,!0).call(V,te,H.linkEvents),le.style("stroke",function(ge){return L(ge)?a.tinyRGB(t(ge.linkLineColor)):ge.tinyColorHue}).style("stroke-opacity",function(ge){return L(ge)?a.opacity(ge.linkLineColor):ge.tinyColorAlpha}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}).style("stroke-width",function(ge){return L(ge)?ge.linkLineWidth:1}).attr("d",E()),le.style("opacity",function(){return $._context.staticPlot||G||re?1:0}).transition().ease(r.ease).duration(r.duration).style("opacity",1),le.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var ue=te.selectAll("."+r.cn.sankeyNodeSet).data(p,f);ue.enter().append("g").classed(r.cn.sankeyNodeSet,!0),ue.style("cursor",function(ge){switch(ge.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var de=ue.selectAll("."+r.cn.sankeyNode).data(function(ge){var we=ge.graph.nodes;return function(ke){var De,Ee=[];for(De=0;De<ke.length;De++)ke[De].originalX=(ke[De].x0+ke[De].x1)/2,ke[De].originalY=(ke[De].y0+ke[De].y1)/2,-1===Ee.indexOf(ke[De].originalX)&&Ee.push(ke[De].originalX);for(Ee.sort(function(Re,ve){return Re-ve}),De=0;De<ke.length;De++)ke[De].originalLayerIndex=Ee.indexOf(ke[De].originalX),ke[De].originalLayer=ke[De].originalLayerIndex/(Ee.length-1)}(we),we.map(P.bind(null,ge))},f);de.enter().append("g").classed(r.cn.sankeyNode,!0).call(S).style("opacity",function(ge){return!$._context.staticPlot&&!G||ge.partOfGroup?0:1}),de.call(V,te,H.nodeEvents).call(Z,le,H,$),de.transition().ease(r.ease).duration(r.duration).call(S).style("opacity",function(ge){return ge.partOfGroup?0:1}),de.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var he=de.selectAll("."+r.cn.nodeRect).data(p);he.enter().append("rect").classed(r.cn.nodeRect,!0).call(D),he.style("stroke-width",function(ge){return ge.nodeLineWidth}).style("stroke",function(ge){return a.tinyRGB(t(ge.nodeLineColor))}).style("stroke-opacity",function(ge){return a.opacity(ge.nodeLineColor)}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}),he.transition().ease(r.ease).duration(r.duration).call(D);var be=de.selectAll("."+r.cn.nodeLabel).data(p);be.enter().append("text").classed(r.cn.nodeLabel,!0).style("cursor","default"),be.attr("data-notex",1).text(function(ge){return ge.node.label}).each(function(ge){var we=T.select(this);n.font(we,ge.textFont),m.convertToTspans(we,$)}).style("text-shadow",m.makeTextShadow($._fullLayout.paper_bgcolor)).attr("text-anchor",function(ge){return ge.horizontal&&ge.left?"end":"start"}).attr("transform",function(ge){var we=T.select(this),ke=m.lineCount(we),Ee=ge.nodeLineWidth/2+3,Re=((ge.horizontal?ge.visibleHeight:ge.visibleWidth)-ge.textFont.size*((ke-1)*A-v))/2;ge.horizontal&&(ge.left?Ee=-Ee:Ee+=ge.visibleWidth);var ve=ge.horizontal?"":"scale(-1,1)"+i(90);return s(ge.horizontal?Ee:Re,ge.horizontal?Re:Ee)+ve}),be.transition().ease(r.ease).duration(r.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":919,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],924:[function(_,ae,ie){"use strict";ae.exports=function(g,x){for(var T=[],b=g.cd[0].trace,e=b._sankey.graph.nodes,r=0;r<e.length;r++){var t=e[r];if(!t.partOfGroup){var a=[(t.x0+t.x1)/2,(t.y0+t.y1)/2];"v"===b.orientation&&a.reverse(),x&&x.contains(a,!1,r,g)&&T.push({pointNumber:t.pointNumber})}}return T}},{}],925:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x,T){for(var b=0;b<x.length;b++)x[b].i=b;g.mergeArray(T.text,x,"tx"),g.mergeArray(T.texttemplate,x,"txt"),g.mergeArray(T.hovertext,x,"htx"),g.mergeArray(T.customdata,x,"data"),g.mergeArray(T.textposition,x,"tp"),T.textfont&&(g.mergeArrayCastPositive(T.textfont.size,x,"ts"),g.mergeArray(T.textfont.color,x,"tc"),g.mergeArray(T.textfont.family,x,"tf"));var e=T.marker;if(e){g.mergeArrayCastPositive(e.size,x,"ms"),g.mergeArrayCastPositive(e.opacity,x,"mo"),g.mergeArray(e.symbol,x,"mx"),g.mergeArray(e.color,x,"mc");var r=e.line;e.line&&(g.mergeArray(r.color,x,"mlc"),g.mergeArrayCastPositive(r.width,x,"mlw"));var t=e.gradient;t&&"none"!==t.type&&(g.mergeArray(t.type,x,"mgt"),g.mergeArray(t.color,x,"mgc"))}}},{"../../lib":503}],926:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../components/colorscale/attributes"),e=_("../../plots/font_attributes"),r=_("../../components/drawing/attributes").dash,t=_("../../components/drawing"),a=_("./constants"),n=_("../../lib/extend").extendFlat;ae.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:g("x"),yhoverformat:g("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:x({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:T({},{keys:a.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},r,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:n({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},b("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},b("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":930}],927:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/align_period"),e=_("../../constants/numerical").BADNUM,r=_("./subtypes"),t=_("./colorscale_calc"),a=_("./arrays_to_calcdata"),n=_("./calc_selection");function d(p,y,m,l,w,v,A){var M=y._length,k=p._fullLayout,E=m._id,P=l._id,S=k._firstScatter[u(y)]===y.uid,F=(f(y,k,m,l)||{}).orientation,R=y.fill;m._minDtick=0,l._minDtick=0;var D={padded:!0},L={padded:!0};A&&(D.ppad=L.ppad=A);var B=M<2||w[0]!==w[M-1]||v[0]!==v[M-1];B&&("tozerox"===R||"tonextx"===R&&(S||"h"===F))?D.tozero=!0:(y.error_y||{}).visible||"tonexty"!==R&&"tozeroy"!==R&&(r.hasMarkers(y)||r.hasText(y))||(D.padded=!1,D.ppad=0),B&&("tozeroy"===R||"tonexty"===R&&(S||"v"===F))?L.tozero=!0:"tonextx"!==R&&"tozerox"!==R||(L.padded=!1),E&&(y._extremes[E]=T.findExtremes(m,w,D)),P&&(y._extremes[P]=T.findExtremes(l,v,L))}function s(p,y){if(r.hasMarkers(p)){var m,l=p.marker,w=1.6*(p.marker.sizeref||1);if(m="area"===p.marker.sizemode?function(E){return Math.max(Math.sqrt((E||0)/w),3)}:function(E){return Math.max((E||0)/w,3)},x.isArrayOrTypedArray(l.size)){var v={type:"linear"};T.setConvert(v);for(var A=v.makeCalcdata(p.marker,"size"),M=new Array(y),k=0;k<y;k++)M[k]=m(A[k]);return M}return m(l.size)}}function i(p,y){var m=u(y),l=p._firstScatter;l[m]||(l[m]=y.uid)}function u(p){var y=p.stackgroup;return p.xaxis+p.yaxis+p.type+(y?"-"+y:"")}function f(p,y,m,l){var w=p.stackgroup;if(w){var v=y._scatterStackOpts[m._id+l._id][w],A="v"===v.orientation?l:m;return"linear"===A.type||"log"===A.type?v:void 0}}ae.exports={calc:function(p,y){var m,l,w,v,A,M,k=p._fullLayout,E=T.getFromId(p,y.xaxis||"x"),P=T.getFromId(p,y.yaxis||"y"),S=E.makeCalcdata(y,"x"),F=P.makeCalcdata(y,"y"),R=b(y,E,"x",S),D=b(y,P,"y",F),L=R.vals,B=D.vals,V=y._length,Z=new Array(V),Y=y.ids,ee=f(y,k,E,P),Q=!1;i(k,y);var $,K="x",oe="y";ee?(x.pushUnique(ee.traceIndices,y._expandedIndex),(m="v"===ee.orientation)?(oe="s",$="x"):(K="s",$="y"),A="interpolate"===ee.stackgaps):d(p,y,E,P,L,B,s(y,V));var j=!!y.xperiodalignment,H=!!y.yperiodalignment;for(l=0;l<V;l++){var G=Z[l]={},re=g(L[l]),q=g(B[l]);re&&q?(G[K]=L[l],G[oe]=B[l],j&&(G.orig_x=S[l],G.xEnd=R.ends[l],G.xStart=R.starts[l]),H&&(G.orig_y=F[l],G.yEnd=D.ends[l],G.yStart=D.starts[l])):ee&&(m?re:q)?(G[$]=m?L[l]:B[l],G.gap=!0,A?(G.s=e,Q=!0):G.s=0):G[K]=G[oe]=e,Y&&(G.id=String(Y[l]))}if(a(Z,y),t(p,y),n(Z,y),ee){for(l=0;l<Z.length;)Z[l][$]===e?Z.splice(l,1):l++;if(x.sort(Z,function(ue,de){return ue[$]-de[$]||ue.i-de.i}),Q){for(l=0;l<Z.length-1&&Z[l].gap;)l++;for((M=Z[l].s)||(M=Z[l].s=0),w=0;w<l;w++)Z[w].s=M;for(v=Z.length-1;v>l&&Z[v].gap;)v--;for(M=Z[v].s,w=Z.length-1;w>v;w--)Z[w].s=M;for(;l<v;)if(Z[++l].gap){for(w=l+1;Z[w].gap;)w++;for(var te=Z[l-1][$],ne=Z[l-1].s,le=(Z[w].s-ne)/(Z[w][$]-te);l<w;)Z[l].s=ne+(Z[l][$]-te)*le,l++}}}return Z},calcMarkerSize:s,calcAxisExpansion:d,setFirstScatter:i,getStackOpts:f}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":925,"./calc_selection":928,"./colorscale_calc":929,"./subtypes":951,"fast-isnumeric":190}],928:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x,T){g.isArrayOrTypedArray(T.selectedpoints)&&g.tagSelected(x,T)}},{"../../lib":503}],929:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/helpers").hasColorscale,x=_("../../components/colorscale/calc"),T=_("./subtypes");ae.exports=function(b,e){T.hasLines(e)&&g(e,"line")&&x(b,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),T.hasMarkers(e)&&(g(e,"marker")&&x(b,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),g(e,"marker.line")&&x(b,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":951}],930:[function(_,ae,ie){"use strict";ae.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],931:[function(_,ae,ie){"use strict";var g=_("./calc");function x(T,b,e,r,t,a,n){t[r]=!0;var i,u,p,y,m,d={i:null,gap:!0,s:0};if(d[n]=e,T.splice(b,0,d),b&&e===T[b-1][n]){var s=T[b-1];d.s=s.s,d.i=s.i,d.gap=s.gap}else a&&(d.s=(p=n,y=(i=T)[(u=b)-1],(m=i[u+1])?y?y.s+(m.s-y.s)*(e-y[p])/(m[p]-y[p]):m.s:y.s));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}ae.exports=function(T,b){var e=b.xaxis,r=b.yaxis,a=T._fullLayout._scatterStackOpts[e._id+r._id];if(a){var n,d,s,i,u,f,p,y,m,l,w,v,A,M,k,E=T.calcdata;for(var P in a){var S=(l=a[P]).traceIndices;if(S.length){for(w="interpolate"===l.stackgaps,v=l.groupnorm,"v"===l.orientation?(A="x",M="y"):(A="y",M="x"),k=new Array(S.length),n=0;n<k.length;n++)k[n]=!1;f=E[S[0]];var F=new Array(f.length);for(n=0;n<f.length;n++)F[n]=f[n][A];for(n=1;n<S.length;n++){for(u=E[S[n]],d=s=0;d<u.length;d++){for(p=u[d][A];p>F[s]&&s<F.length;s++)x(u,d,F[s],n,k,w,A),d++;if(p!==F[s]){for(i=0;i<n;i++)x(E[S[i]],s,p,i,k,w,A);F.splice(s,0,p)}s++}for(;s<F.length;s++)x(u,d,F[s],n,k,w,A),d++}var R=F.length;for(d=0;d<f.length;d++){for(y=f[d][M]=f[d].s,n=1;n<S.length;n++)(u=E[S[n]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=R,u[d][M]=y+=u[d].s;if(v)for(m=("fraction"===v?y:y/100)||1,n=0;n<S.length;n++){var D=E[S[n]][d];D[M]/=m,D.sNorm=D.s/m}}for(n=0;n<S.length;n++){var L=(u=E[S[n]])[0].trace,B=g.calcMarkerSize(L,L._rawLength),V=Array.isArray(B);if(B&&k[n]||V){var Z=B;for(B=new Array(R),d=0;d<R;d++)B[d]=u[d].gap?0:V?Z[u[d].i]:Z}var Y=new Array(R),ee=new Array(R);for(d=0;d<R;d++)Y[d]=u[d].x,ee[d]=u[d].y;g.calcAxisExpansion(T,L,e,r,Y,ee,B),u[0].t.orientation=l.orientation}}}}}},{"./calc":927}],932:[function(_,ae,ie){"use strict";ae.exports=function(g){for(var x=0;x<g.length;x++){var T=g[x];if("scatter"===T.type){var b=T.fill;if("none"!==b&&"toself"!==b&&(T.opacity=void 0,"tonexty"===b||"tonextx"===b))for(var e=x-1;e>=0;e--){var r=g[e];if("scatter"===r.type&&r.xaxis===T.xaxis&&r.yaxis===T.yaxis){r.opacity=void 0;break}}}}}},{}],933:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../registry"),T=_("./attributes"),b=_("./constants"),e=_("./subtypes"),r=_("./xy_defaults"),t=_("./period_defaults"),a=_("./stack_defaults"),n=_("./marker_defaults"),d=_("./line_defaults"),s=_("./line_shape_defaults"),i=_("./text_defaults"),u=_("./fillcolor_defaults");ae.exports=function(f,p,y,m){function l(S,F){return g.coerce(f,p,T,S,F)}var w=r(f,p,m,l);if(w||(p.visible=!1),p.visible){t(f,p,m,l),l("xhoverformat"),l("yhoverformat");var v=a(f,p,m,l),A=!v&&w<b.PTS_LINESONLY?"lines+markers":"lines";l("text"),l("hovertext"),l("mode",A),e.hasLines(p)&&(d(f,p,y,m,l),s(f,p,l),l("connectgaps"),l("line.simplify")),e.hasMarkers(p)&&n(f,p,y,m,l,{gradient:!0}),e.hasText(p)&&(l("texttemplate"),i(f,p,m,l));var M=[];(e.hasMarkers(p)||e.hasText(p))&&(l("cliponaxis"),l("marker.maxdisplayed"),M.push("points")),l("fill",v?v.fillDflt:"none"),"none"!==p.fill&&(u(f,p,y,l),e.hasLines(p)||s(f,p,l));var k=(p.line||{}).color,E=(p.marker||{}).color;"tonext"!==p.fill&&"toself"!==p.fill||M.push("fills"),l("hoveron",M.join("+")||"points"),"fills"!==p.hoveron&&l("hovertemplate");var P=x.getComponentMethod("errorbars","supplyDefaults");P(f,p,k||E||y,{axis:"y"}),P(f,p,k||E||y,{axis:"x",inherit:"y"}),g.coerceSelectionMarkerOpacity(p,l)}}},{"../../lib":503,"../../registry":638,"./attributes":926,"./constants":930,"./fillcolor_defaults":934,"./line_defaults":939,"./line_shape_defaults":941,"./marker_defaults":945,"./period_defaults":946,"./stack_defaults":949,"./subtypes":951,"./text_defaults":952,"./xy_defaults":953}],934:[function(_,ae,ie){"use strict";var g=_("../../components/color"),x=_("../../lib").isArrayOrTypedArray;ae.exports=function(T,b,e,r){var t=!1;if(b.marker){var a=b.marker.color,n=(b.marker.line||{}).color;a&&!x(a)?t=a:n&&!x(n)&&(t=n)}r("fillcolor",g.addOpacity((b.line||{}).color||t||e,.5))}},{"../../components/color":366,"../../lib":503}],935:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes");ae.exports=function(x,T,b){var e={},r={_fullLayout:b},t=g.getFromTrace(r,T,"x"),a=g.getFromTrace(r,T,"y");return e.xLabel=g.tickText(t,t.c2l(x.x),!0).text,e.yLabel=g.tickText(a,a.c2l(x.y),!0).text,e}},{"../../plots/cartesian/axes":554}],936:[function(_,ae,ie){"use strict";var g=_("../../components/color"),x=_("./subtypes");ae.exports=function(T,b){var e,r;if("lines"===T.mode)return(e=T.line.color)&&g.opacity(e)?e:T.fillcolor;if("none"===T.mode)return T.fill?T.fillcolor:"";var t=b.mcc||(T.marker||{}).color,a=b.mlcc||((T.marker||{}).line||{}).color;return(r=t&&g.opacity(t)?t:a&&g.opacity(a)&&(b.mlw||((T.marker||{}).line||{}).width)?a:"")?g.opacity(r)<.3?g.addOpacity(r,.3):r:(e=(T.line||{}).color)&&g.opacity(e)&&x.hasLines(T)&&T.line.width?e:T.fillcolor}},{"../../components/color":366,"./subtypes":951}],937:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/fx"),T=_("../../registry"),b=_("./get_trace_color"),e=_("../../components/color"),r=g.fillText;ae.exports=function(t,a,n,d){var s=t.cd,i=s[0].trace,u=t.xa,f=t.ya,p=u.c2p(a),y=f.c2p(n),m=[p,y],l=i.hoveron||"",w=-1!==i.mode.indexOf("markers")?3:.5,v=!!i.xperiodalignment,A=!!i.yperiodalignment;if(-1!==l.indexOf("points")){var M=function(he){var be=Math.max(w,he.mrc||0),ge=u.c2p(he.x)-p,we=f.c2p(he.y)-y;return Math.max(Math.sqrt(ge*ge+we*we)-be,1-w/be)},k=x.getDistanceFunction(d,function(he){if(v){var be=u.c2p(he.xStart),ge=u.c2p(he.xEnd);return p>=Math.min(be,ge)&&p<=Math.max(be,ge)?0:1/0}var we=Math.max(3,he.mrc||0),ke=1-1/we,De=Math.abs(u.c2p(he.x)-p);return De<we?ke*De/we:De-we+ke},function(he){if(A){var be=f.c2p(he.yStart),ge=f.c2p(he.yEnd);return y>=Math.min(be,ge)&&y<=Math.max(be,ge)?0:1/0}var we=Math.max(3,he.mrc||0),ke=1-1/we,De=Math.abs(f.c2p(he.y)-y);return De<we?ke*De/we:De-we+ke},M);if(x.getClosest(s,k,t),!1!==t.index){var E=s[t.index],P=u.c2p(E.x,!0),S=f.c2p(E.y,!0),F=E.mrc||1;t.index=E.i;var R=s[0].t.orientation,D=R&&(E.sNorm||E.s),L="h"===R?D:void 0!==E.orig_x?E.orig_x:E.x,B="v"===R?D:void 0!==E.orig_y?E.orig_y:E.y;return g.extendFlat(t,{color:b(i,E),x0:P-F,x1:P+F,xLabelVal:L,y0:S-F,y1:S+F,yLabelVal:B,spikeDistance:M(E),hovertemplate:i.hovertemplate}),r(E,i,t),T.getComponentMethod("errorbars","hoverInfo")(E,i,t),[t]}}if(-1!==l.indexOf("fills")&&i._polygons){var V,Z,Y,ee,Q,$,oe,j,H=i._polygons,G=[],re=!1,q=1/0,te=-1/0,ne=1/0,le=-1/0;for(V=0;V<H.length;V++)(Y=H[V]).contains(m)&&(re=!re,G.push(Y),ne=Math.min(ne,Y.ymin),le=Math.max(le,Y.ymax));if(re){var ue=((ne=Math.max(ne,0))+(le=Math.min(le,f._length)))/2;for(V=0;V<G.length;V++)for(ee=G[V].pts,Z=1;Z<ee.length;Z++)(oe=ee[Z-1][1])>ue!=(j=ee[Z][1])>=ue&&($=ee[Z-1][0],j-oe&&(Q=$+(ee[Z][0]-$)*(ue-oe)/(j-oe),q=Math.min(q,Q),te=Math.max(te,Q)));q=Math.max(q,0),te=Math.min(te,u._length);var de=e.defaultLine;return e.opacity(i.fillcolor)?de=i.fillcolor:e.opacity((i.line||{}).color)&&(de=i.line.color),g.extendFlat(t,{distance:t.maxHoverDistance,x0:q,x1:te,y0:ue,y1:ue,color:de,hovertemplate:!1}),delete t.index,t.text=i.text&&!Array.isArray(i.text)?String(i.text):i.name,[t]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":936}],938:[function(_,ae,ie){"use strict";var g=_("./subtypes");ae.exports={hasLines:g.hasLines,hasMarkers:g.hasMarkers,hasText:g.hasText,isBubble:g.isBubble,attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("./cross_trace_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./cross_trace_calc"),arraysToCalcdata:_("./arrays_to_calcdata"),plot:_("./plot"),colorbar:_("./marker_colorbar"),formatLabels:_("./format_labels"),style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":925,"./attributes":926,"./calc":927,"./cross_trace_calc":931,"./cross_trace_defaults":932,"./defaults":933,"./format_labels":935,"./hover":937,"./marker_colorbar":944,"./plot":947,"./select":948,"./style":950,"./subtypes":951}],939:[function(_,ae,ie){"use strict";var g=_("../../lib").isArrayOrTypedArray,x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults");ae.exports=function(b,e,r,t,a,n){var d=(b.marker||{}).color;a("line.color",r),x(b,"line")?T(b,e,t,a,{prefix:"line.",cLetter:"c"}):a("line.color",!g(d)&&d||r),a("line.width"),(n||{}).noDash||a("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],940:[function(_,ae,ie){"use strict";var g=_("../../constants/numerical"),x=g.BADNUM,T=g.LOG_CLIP,b=T+.5,e=T-.5,r=_("../../lib"),t=r.segmentsIntersect,a=r.constrain,n=_("./constants");ae.exports=function(d,s){var i,u,f,p,y,m,l,w,v,A,M,k,E,P,S,F,R,D,L=s.xaxis,B=s.yaxis,V="log"===L.type,Z="log"===B.type,Y=L._length,ee=B._length,Q=s.connectGaps,$=s.baseTolerance,K=s.shape,oe="linear"===K,j=s.fill&&"none"!==s.fill,H=[],G=n.minTolerance,re=d.length,q=new Array(re),te=0;function ne(tt){var ft=d[tt];if(!ft)return!1;var bt=s.linearized?L.l2p(ft.x):L.c2p(ft.x),Ct=s.linearized?B.l2p(ft.y):B.c2p(ft.y);if(bt===x){if(V&&(bt=L.c2p(ft.x,!0)),bt===x)return!1;Z&&Ct===x&&(bt*=Math.abs(L._m*ee*(L._m>0?b:e)/(B._m*Y*(B._m>0?b:e)))),bt*=1e3}if(Ct===x){if(Z&&(Ct=B.c2p(ft.y,!0)),Ct===x)return!1;Ct*=1e3}return[bt,Ct]}function le(tt,ft,bt,Ct){var Vt=bt-tt,Ft=Ct-ft,ht=.5-tt,ut=.5-ft,Rt=Vt*Vt+Ft*Ft,nn=Vt*ht+Ft*ut;if(nn>0&&nn<Rt){var cn=ht*Ft-ut*Vt;if(cn*cn<Rt)return!0}}function ue(tt,ft){var bt=tt[0]/Y,Ct=tt[1]/ee,Vt=Math.max(0,-bt,bt-1,-Ct,Ct-1);return Vt&&void 0!==R&&le(bt,Ct,R,D)&&(Vt=0),Vt&&ft&&le(bt,Ct,ft[0]/Y,ft[1]/ee)&&(Vt=0),(1+n.toleranceGrowth*Vt)*$}function de(tt,ft){var bt=tt[0]-ft[0],Ct=tt[1]-ft[1];return Math.sqrt(bt*bt+Ct*Ct)}var he,be,ge,we,ke,De,Ee,Re=n.maxScreensAway,ve=-Y*Re,Te=Y*(1+Re),Ie=-ee*Re,Ce=ee*(1+Re),Pe=[[ve,Ie,Te,Ie],[Te,Ie,Te,Ce],[Te,Ce,ve,Ce],[ve,Ce,ve,Ie]];function Ve(tt){if(tt[0]<ve||tt[0]>Te||tt[1]<Ie||tt[1]>Ce)return[a(tt[0],ve,Te),a(tt[1],Ie,Ce)]}function qe(tt,ft){return tt[0]===ft[0]&&(tt[0]===ve||tt[0]===Te)||tt[1]===ft[1]&&(tt[1]===Ie||tt[1]===Ce)||void 0}function Je(tt,ft,bt){return function(Ct,Vt){var Ft=Ve(Ct),ht=Ve(Vt),ut=[];if(Ft&&ht&&qe(Ft,ht))return ut;Ft&&ut.push(Ft),ht&&ut.push(ht);var Rt=2*r.constrain((Ct[tt]+Vt[tt])/2,ft,bt)-((Ft||Ct)[tt]+(ht||Vt)[tt]);return Rt&&((Ft&&ht?Rt>0==Ft[tt]>ht[tt]?Ft:ht:Ft||ht)[tt]+=Rt),ut}}function lt(tt){var ft=tt[0],bt=tt[1],Ct=ft===q[te-1][0],Vt=bt===q[te-1][1];if(!Ct||!Vt)if(te>1){var Ft=ft===q[te-2][0],ht=bt===q[te-2][1];Ct&&(ft===ve||ft===Te)&&Ft?ht?te--:q[te-1]=tt:Vt&&(bt===Ie||bt===Ce)&&ht?Ft?te--:q[te-1]=tt:q[te++]=tt}else q[te++]=tt}function He(tt){q[te-1][0]!==tt[0]&&q[te-1][1]!==tt[1]&&lt([ge,we]),lt(tt),ke=null,ge=we=0}function $e(tt){if(R=tt[0]/Y,D=tt[1]/ee,be=tt[1]<Ie?Ie:tt[1]>Ce?Ce:0,(he=tt[0]<ve?ve:tt[0]>Te?Te:0)||be){if(te)if(ke){var ft=Ee(ke,tt);ft.length>1&&(He(ft[0]),q[te++]=ft[1])}else De=Ee(q[te-1],tt)[0],q[te++]=De;else q[te++]=[he||tt[0],be||tt[1]];var bt=q[te-1];he&&be&&(bt[0]!==he||bt[1]!==be)?(ke&&(ge!==he&&we!==be?lt(ge&&we?(Ft=(Vt=tt)[0]-(Ct=ke)[0],ht=(Vt[1]-Ct[1])/Ft,(Ct[1]*Vt[0]-Vt[1]*Ct[0])/Ft>0?[ht>0?ve:Te,Ce]:[ht>0?Te:ve,Ie]):[ge||he,we||be]):ge&&we&&lt([ge,we])),lt([he,be])):ge-he&&we-be&&lt([he||ge,be||we]),ke=tt,ge=he,we=be}else ke&&He(Ee(ke,tt)[0]),q[te++]=tt;var Ct,Vt,Ft,ht}for("linear"===K||"spline"===K?Ee=function(tt,ft){for(var bt=[],Ct=0,Vt=0;Vt<4;Vt++){var Ft=Pe[Vt],ht=t(tt[0],tt[1],ft[0],ft[1],Ft[0],Ft[1],Ft[2],Ft[3]);ht&&(!Ct||Math.abs(ht.x-bt[0][0])>1||Math.abs(ht.y-bt[0][1])>1)&&(ht=[ht.x,ht.y],Ct&&de(ht,tt)<de(bt[0],tt)?bt.unshift(ht):bt.push(ht),Ct++)}return bt}:"hv"===K||"vh"===K?Ee=function(tt,ft){var bt=[],Ct=Ve(tt),Vt=Ve(ft);return Ct&&Vt&&qe(Ct,Vt)||(Ct&&bt.push(Ct),Vt&&bt.push(Vt)),bt}:"hvh"===K?Ee=Je(0,ve,Te):"vhv"===K&&(Ee=Je(1,Ie,Ce)),i=0;i<re;i++)if(u=ne(i)){for(te=0,ke=null,$e(u),i++;i<re;i++){if(!(p=ne(i))){if(Q)continue;break}if(oe&&s.simplify){var et=ne(i+1);if(A=de(p,u),j&&(0===te||te===re-1)||!(A<ue(p,et)*G)){for(w=[(p[0]-u[0])/A,(p[1]-u[1])/A],y=u,M=A,k=P=S=0,l=!1,f=p,i++;i<d.length;i++){if(m=et,et=ne(i+1),!m){if(Q)continue;break}if(F=(v=[m[0]-u[0],m[1]-u[1]])[0]*w[1]-v[1]*w[0],P=Math.min(P,F),(S=Math.max(S,F))-P>ue(m,et))break;f=m,(E=v[0]*w[0]+v[1]*w[1])>M?(M=E,p=m,l=!1):E<k&&(k=E,y=m,l=!0)}if(l?($e(p),f!==y&&$e(y)):(y!==u&&$e(y),f!==p&&$e(p)),$e(f),i>=d.length||!m)break;$e(m),u=m}}else $e(p)}ke&&lt([ge||ke[0],we||ke[1]]),H.push(q.slice(0,te))}return H}},{"../../constants/numerical":479,"../../lib":503,"./constants":930}],941:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T){"spline"===T("line.shape")&&T("line.smoothing")}},{}],942:[function(_,ae,ie){"use strict";var g={tonextx:1,tonexty:1,tonext:1};ae.exports=function(x,T,b){var e,r,t,a,n,d={},s=!1,i=-1,u=0,f=-1;for(r=0;r<b.length;r++)(t=(e=b[r][0].trace).stackgroup||"")?t in d?n=d[t]:(n=d[t]=u,u++):e.fill in g&&f>=0?n=f:(n=f=u,u++),n<i&&(s=!0),e._groupIndex=i=n;var p=b.slice();s&&p.sort(function(m,l){var w=m[0].trace,v=l[0].trace;return w._groupIndex-v._groupIndex||w.index-v.index});var y={};for(r=0;r<p.length;r++)t=(e=p[r][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in g&&(e._prevtrace=(a=y[t])||null,a&&(a._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),y[t]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return p}},{}],943:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric");ae.exports=function(x,T){T||(T=2);var b=x.marker,e=b.sizeref||1,r=b.sizemin||0,t="area"===b.sizemode?function(a){return Math.sqrt(a/e)}:function(a){return a/e};return function(a){var n=t(a/T);return g(n)&&n>0?Math.max(n,r):0}}},{"fast-isnumeric":190}],944:[function(_,ae,ie){"use strict";ae.exports={container:"marker",min:"cmin",max:"cmax"}},{}],945:[function(_,ae,ie){"use strict";var g=_("../../components/color"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("./subtypes");ae.exports=function(e,r,t,a,n,d){var s=b.isBubble(e),i=(e.line||{}).color;d=d||{},i&&(t=i),n("marker.symbol"),n("marker.opacity",s?.7:1),n("marker.size"),n("marker.color",t),x(e,"marker")&&T(e,r,a,n,{prefix:"marker.",cLetter:"c"}),d.noSelect||(n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size")),d.noLine||(n("marker.line.color",i&&!Array.isArray(i)&&r.marker.color!==i?i:s?g.background:g.defaultLine),x(e,"marker.line")&&T(e,r,a,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width",s?1:0)),s&&(n("marker.sizeref"),n("marker.sizemin"),n("marker.sizemode")),d.gradient&&"none"!==n("marker.gradient.type")&&n("marker.gradient.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":951}],946:[function(_,ae,ie){"use strict";var g=_("../../lib").dateTick0,x=_("../../constants/numerical").ONEWEEK;function T(b,e){return g(e,b%x==0?1:0)}ae.exports=function(b,e,r,t,a){if(a||(a={x:!0,y:!0}),a.x){var n=t("xperiod");n&&(t("xperiod0",T(n,e.xcalendar)),t("xperiodalignment"))}if(a.y){var d=t("yperiod");d&&(t("yperiod0",T(d,e.ycalendar)),t("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],947:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=T.ensureSingle,e=T.identity,r=_("../../components/drawing"),t=_("./subtypes"),a=_("./line_points"),n=_("./link_traces"),d=_("../../lib/polygon").tester;function s(i,u,f,p,y,m,l){var w;!function(Te,Ie,Ce,Pe,Ve){var qe=Ce.xaxis,Je=Ce.yaxis,lt=g.extent(T.simpleMap(qe.range,qe.r2c)),He=g.extent(T.simpleMap(Je.range,Je.r2c)),$e=Pe[0].trace;if(t.hasMarkers($e)){var et=$e.marker.maxdisplayed;if(0!==et){var tt=Pe.filter(function(Vt){return Vt.x>=lt[0]&&Vt.x<=lt[1]&&Vt.y>=He[0]&&Vt.y<=He[1]}),ft=Math.ceil(tt.length/et),bt=0;Ve.forEach(function(Vt,Ft){var ht=Vt[0].trace;t.hasMarkers(ht)&&ht.marker.maxdisplayed>0&&Ft<Ie&&bt++});var Ct=Math.round(bt*ft/3+Math.floor(bt/3)*ft/7.1);Pe.forEach(function(Vt){delete Vt.vis}),tt.forEach(function(Vt,Ft){0===Math.round((Ft+Ct)%ft)&&(Vt.vis=!0)})}}}(0,u,f,p,y);var v=!!l&&l.duration>0;function A(Te){return v?Te.transition():Te}var M=f.xaxis,k=f.yaxis,E=p[0].trace,P=E.line,S=g.select(m),F=b(S,"g","errorbars"),R=b(S,"g","lines"),D=b(S,"g","points"),L=b(S,"g","text");if(x.getComponentMethod("errorbars","plot")(i,F,f,l),!0===E.visible){var B,V;A(S).style("opacity",E.opacity);var Z=E.fill.charAt(E.fill.length-1);"x"!==Z&&"y"!==Z&&(Z=""),p[0][f.isRangePlot?"nodeRangePlot3":"node3"]=S;var Y,ee,Q="",$=[],K=E._prevtrace;K&&(Q=K._prevRevpath||"",V=K._nextFill,$=K._polygons);var oe,j,H,G,re,q,te,ne="",le="",ue=[],de=T.noop;if(B=E._ownFill,t.hasLines(E)||"none"!==E.fill){for(V&&V.datum(p),-1!==["hv","vh","hvh","vhv"].indexOf(P.shape)?(oe=r.steps(P.shape),j=r.steps(P.shape.split("").reverse().join(""))):oe=j="spline"===P.shape?function(Te){var Ie=Te[Te.length-1];return Te.length>1&&Te[0][0]===Ie[0]&&Te[0][1]===Ie[1]?r.smoothclosed(Te.slice(1),P.smoothing):r.smoothopen(Te,P.smoothing)}:function(Te){return"M"+Te.join("L")},H=function(Te){return j(Te.reverse())},ue=a(p,{xaxis:M,yaxis:k,connectGaps:E.connectgaps,baseTolerance:Math.max(P.width||1,3)/4,shape:P.shape,simplify:P.simplify,fill:E.fill}),te=E._polygons=new Array(ue.length),w=0;w<ue.length;w++)E._polygons[w]=d(ue[w]);ue.length&&(G=ue[0][0],q=(re=ue[ue.length-1])[re.length-1]),de=function(Te){return function(Ie){if(Y=oe(Ie),ee=H(Ie),ne?Z?(ne+="L"+Y.substr(1),le=ee+"L"+le.substr(1)):(ne+="Z"+Y,le=ee+"Z"+le):(ne=Y,le=ee),t.hasLines(E)&&Ie.length>1){var Ce=g.select(this);if(Ce.datum(p),Te)A(Ce.style("opacity",0).attr("d",Y).call(r.lineGroupStyle)).style("opacity",1);else{var Pe=A(Ce);Pe.attr("d",Y),r.singleLineStyle(p,Pe)}}}}}var he=R.selectAll(".js-line").data(ue);A(he.exit()).style("opacity",0).remove(),he.each(de(!1)),he.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(r.lineGroupStyle).each(de(!0)),r.setClipUrl(he,f.layerClipId,i),ue.length?(B?(B.datum(p),G&&q&&(Z?("y"===Z?G[1]=q[1]=k.c2p(0,!0):"x"===Z&&(G[0]=q[0]=M.c2p(0,!0)),A(B).attr("d","M"+q+"L"+G+"L"+ne.substr(1)).call(r.singleFillStyle)):A(B).attr("d",ne+"Z").call(r.singleFillStyle))):V&&("tonext"===E.fill.substr(0,6)&&ne&&Q?("tonext"===E.fill?A(V).attr("d",ne+"Z"+Q+"Z").call(r.singleFillStyle):A(V).attr("d",ne+"L"+Q.substr(1)+"Z").call(r.singleFillStyle),E._polygons=E._polygons.concat($)):(ge(V),E._polygons=null)),E._prevRevpath=le,E._prevPolygons=te):(B?ge(B):V&&ge(V),E._polygons=E._prevRevpath=E._prevPolygons=null),D.datum(p),L.datum(p),function(Te,Ie,Ce){var Pe,Ve=Ce[0].trace,qe=t.hasMarkers(Ve),Je=t.hasText(Ve),lt=function(Te){if(Te.ids)return Ee}(Ve),He=ve,$e=ve;if(qe||Je){var et=e,tt=Ve.stackgroup,ft=tt&&"infer zero"===i._fullLayout._scatterStackOpts[M._id+k._id][tt].stackgaps;Ve.marker.maxdisplayed||Ve._needsCull?et=ft?ke:we:tt&&!ft&&(et=De),qe&&(He=et),Je&&($e=et)}var bt,Ct=(Pe=Te.selectAll("path.point").data(He,lt)).enter().append("path").classed("point",!0);v&&Ct.call(r.pointStyle,Ve,i).call(r.translatePoints,M,k).style("opacity",0).transition().style("opacity",1),Pe.order(),qe&&(bt=r.makePointStyleFns(Ve)),Pe.each(function(Vt){var Ft=g.select(this),ht=A(Ft);r.translatePoint(Vt,ht,M,k)?(r.singlePointStyle(Vt,ht,Ve,bt,i),f.layerClipId&&r.hideOutsideRangePoint(Vt,ht,M,k,Ve.xcalendar,Ve.ycalendar),Ve.customdata&&Ft.classed("plotly-customdata",null!=Vt.data)):ht.remove()}),v?Pe.exit().transition().style("opacity",0).remove():Pe.exit().remove(),(Pe=Ie.selectAll("g").data($e,lt)).enter().append("g").classed("textpoint",!0).append("text"),Pe.order(),Pe.each(function(Vt){var Ft=g.select(this),ht=A(Ft.select("text"));r.translatePoint(Vt,ht,M,k)?f.layerClipId&&r.hideOutsideRangePoint(Vt,Ft,M,k,Ve.xcalendar,Ve.ycalendar):Ft.remove()}),Pe.selectAll("text").call(r.textPointStyle,Ve,i).each(function(Vt){var Ft=M.c2p(Vt.x),ht=k.c2p(Vt.y);g.select(this).selectAll("tspan.line").each(function(){A(g.select(this)).attr({x:Ft,y:ht})})}),Pe.exit().remove()}(D,L,p);var be=!1===E.cliponaxis?null:f.layerClipId;r.setClipUrl(D,be,i),r.setClipUrl(L,be,i)}function ge(Te){A(Te).attr("d","M0,0Z")}function we(Te){return Te.filter(function(Ie){return!Ie.gap&&Ie.vis})}function ke(Te){return Te.filter(function(Ie){return Ie.vis})}function De(Te){return Te.filter(function(Ie){return!Ie.gap})}function Ee(Te){return Te.id}function ve(){return!1}}ae.exports=function(i,u,f,p,y,m){var l,w,k,P,v=!y,A=!!y&&y.duration>0,M=n(i,u,f);(l=p.selectAll("g.trace").data(M,function(k){return k[0].trace.uid})).enter().append("g").attr("class",function(k){return"trace scatter trace"+k[0].trace.uid}).style("stroke-miterlimit",2),l.order(),k=i,P=u,l.each(function(S){var F=b(g.select(this),"g","fills");r.setClipUrl(F,P.layerClipId,k);var R=S[0].trace,D=[];R._ownfill&&D.push("_ownFill"),R._nexttrace&&D.push("_nextFill");var L=F.selectAll("g").data(D,e);L.enter().append("g"),L.exit().each(function(B){R[B]=null}).remove(),L.order().each(function(B){R[B]=b(g.select(this),"path","js-fill")})}),A?(m&&(w=m()),g.transition().duration(y.duration).ease(y.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){p.selectAll("g.trace").each(function(k,E){s(i,E,u,k,M,this,y)})})):l.each(function(k,E){s(i,E,u,k,M,this,y)}),v&&l.exit().remove(),p.selectAll("path:not([d])").remove()}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":940,"./link_traces":942,"./subtypes":951,"@plotly/d3":58}],948:[function(_,ae,ie){"use strict";var g=_("./subtypes");ae.exports=function(x,T){var b,e,r,t,a=x.cd,n=x.xaxis,d=x.yaxis,s=[],i=a[0].trace;if(!g.hasMarkers(i)&&!g.hasText(i))return[];if(!1===T)for(b=0;b<a.length;b++)a[b].selected=0;else for(b=0;b<a.length;b++)r=n.c2p((e=a[b]).x),t=d.c2p(e.y),null!==e.i&&T.contains([r,t],!1,b,x)?(s.push({pointNumber:e.i,x:n.c2d(e.x),y:d.c2d(e.y)}),e.selected=1):e.selected=0;return s}},{"./subtypes":951}],949:[function(_,ae,ie){"use strict";var g=["orientation","groupnorm","stackgaps"];ae.exports=function(x,T,b,e){var r=b._scatterStackOpts,t=e("stackgroup");if(t){var a=T.xaxis+T.yaxis,n=r[a];n||(n=r[a]={});var d=n[t],s=!1;d?d.traces.push(T):(d=n[t]={traceIndices:[],traces:[T]},s=!0);for(var i={orientation:T.x&&!T.y?"h":"v"},u=0;u<g.length;u++){var f=g[u],p=f+"Found";if(!d[p]){var y=void 0!==x[f],m="orientation"===f;if((y||s)&&(d[f]=e(f,i[f]),m&&(d.fillDflt="h"===d[f]?"tonextx":"tonexty"),y&&(d[p]=!0,!s&&(delete d.traces[0][f],m))))for(var l=0;l<d.traces.length-1;l++){var w=d.traces[l];w._input.fill!==w.fill&&(w.fill=d.fillDflt)}}}return d}}},{}],950:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../registry");function b(r,t,a){x.pointStyle(r.selectAll("path.point"),t,a)}function e(r,t,a){x.textPointStyle(r.selectAll("text"),t,a)}ae.exports={style:function(r){var t=g.select(r).selectAll("g.trace.scatter");t.style("opacity",function(a){return a[0].trace.opacity}),t.selectAll("g.points").each(function(a){b(g.select(this),a.trace||a[0].trace,r)}),t.selectAll("g.text").each(function(a){e(g.select(this),a.trace||a[0].trace,r)}),t.selectAll("g.trace path.js-line").call(x.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(x.fillGroupStyle),T.getComponentMethod("errorbars","style")(t)},stylePoints:b,styleText:e,styleOnSelect:function(r,t,a){var n=t[0].trace;n.selectedpoints?(x.selectedPointStyle(a.selectAll("path.point"),n),x.selectedTextStyle(a.selectAll("text"),n)):(b(a,n,r),e(a,n,r))}}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],951:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports={hasLines:function(x){return x.visible&&x.mode&&-1!==x.mode.indexOf("lines")},hasMarkers:function(x){return x.visible&&(x.mode&&-1!==x.mode.indexOf("markers")||"splom"===x.type)},hasText:function(x){return x.visible&&x.mode&&-1!==x.mode.indexOf("text")},isBubble:function(x){return g.isPlainObject(x.marker)&&g.isArrayOrTypedArray(x.marker.size)}}},{"../../lib":503}],952:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x,T,b,e,r){r=r||{},e("textposition"),g.coerceFont(e,"textfont",b.font),r.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],953:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../registry");ae.exports=function(T,b,e,r){var t,a=r("x"),n=r("y");if(x.getComponentMethod("calendars","handleTraceDefaults")(T,b,["x","y"],e),a){var d=g.minRowLength(a);n?t=Math.min(d,g.minRowLength(n)):(t=d,r("y0"),r("dy"))}else{if(!n)return 0;t=g.minRowLength(n),r("x0"),r("dx")}return b._length=t,t}},{"../../lib":503,"../../registry":638}],954:[function(_,ae,ie){"use strict";var g=_("../scatter/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../../plots/template_attributes").texttemplateAttrs,r=_("../../plots/attributes"),t=_("../../constants/gl3d_dashes"),a=_("../../constants/gl3d_markers"),n=_("../../lib/extend").extendFlat,d=_("../../plot_api/edit_types").overrideAll,s=_("../../lib/sort_object_keys"),u=g.marker,f=u.line,p=n({width:g.line.width,dash:{valType:"enumerated",values:s(t),dflt:"solid"}},x("line")),y=ae.exports=d({x:g.x,y:g.y,z:{valType:"data_array"},text:n({},g.text,{}),texttemplate:e({},{}),hovertext:n({},g.hovertext,{}),hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),mode:n({},g.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:g.connectgaps,line:p,marker:n({symbol:{valType:"enumerated",values:s(a),dflt:"circle",arrayOk:!0},size:n({},u.size,{dflt:8}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:n({},u.opacity,{arrayOk:!1}),colorbar:u.colorbar,line:n({width:n({},f.width,{arrayOk:!1})},x("marker.line"))},x("marker")),textposition:n({},g.textposition,{dflt:"top center"}),textfont:{color:g.textfont.color,size:g.textfont.size,family:n({},g.textfont.family,{arrayOk:!1})},opacity:r.opacity,hoverinfo:n({},r.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":926}],955:[function(_,ae,ie){"use strict";var g=_("../scatter/arrays_to_calcdata"),x=_("../scatter/colorscale_calc");ae.exports=function(T,b){var e=[{x:!1,y:!1,trace:b,t:{}}];return g(e,b),x(T,b),e}},{"../scatter/arrays_to_calcdata":925,"../scatter/colorscale_calc":929}],956:[function(_,ae,ie){"use strict";var g=_("../../registry");function x(T,b,e,r){if(!b||!b.visible)return null;for(var t=g.getComponentMethod("errorbars","makeComputeError")(b),a=new Array(T.length),n=0;n<T.length;n++){var d=t(+T[n],n);if("log"===r.type){var s=r.c2l(T[n]),i=T[n]-d[0],u=T[n]+d[1];if(a[n]=[(r.c2l(i,!0)-s)*e,(r.c2l(u,!0)-s)*e],i>0){var f=r.c2l(i);r._lowerLogErrorBound||(r._lowerLogErrorBound=f),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,f)}}else a[n]=[-d[0]*e,d[1]*e]}return a}ae.exports=function(T,b,e){var r=[x(T.x,T.error_x,b[0],e.xaxis),x(T.y,T.error_y,b[1],e.yaxis),x(T.z,T.error_z,b[2],e.zaxis)],t=function(u){for(var f=0;f<u.length;f++)if(u[f])return u[f].length;return 0}(r);if(0===t)return null;for(var a=new Array(t),n=0;n<t;n++){for(var d=[[0,0,0],[0,0,0]],s=0;s<3;s++)if(r[s])for(var i=0;i<2;i++)d[i][s]=r[s][n][i];a[n]=d}return a}},{"../../registry":638}],957:[function(_,ae,ie){"use strict";var g=_("../../../stackgl_modules").gl_line3d,x=_("../../../stackgl_modules").gl_scatter3d,T=_("../../../stackgl_modules").gl_error3d,b=_("../../../stackgl_modules").gl_mesh3d,e=_("../../../stackgl_modules").delaunay_triangulate,r=_("../../lib"),t=_("../../lib/str2rgbarray"),a=_("../../lib/gl_format_color").formatColor,n=_("../scatter/make_bubble_size_func"),d=_("../../constants/gl3d_dashes"),s=_("../../constants/gl3d_markers"),i=_("../../plots/cartesian/axes"),u=_("../../components/fx/helpers").appendArrayPointValue,f=_("./calc_errors");function p(P,S){this.scene=P,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var y=p.prototype;function m(P){return null==P?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function l(P){return null==P?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function w(P,S){return S(4*P)}function v(P){return s[P]}function A(P,S,F,R,D){var L=null;if(r.isArrayOrTypedArray(P)){L=[];for(var B=0;B<S;B++)L[B]=void 0===P[B]?R:F(P[B],D)}else L=F(P,r.identity);return L}function k(P){if(r.isArrayOrTypedArray(P)){var S=P[0];return r.isArrayOrTypedArray(S)&&(P=S),"rgb("+P.slice(0,3).map(function(F){return Math.round(255*F)})+")"}return null}function E(P){return r.isArrayOrTypedArray(P)?4===P.length&&"number"==typeof P[0]?k(P):P.map(k):null}y.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var S=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[S]||0===this.textLabels[S])&&(P.textLabel=this.textLabels[S]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},y.update=function(P){var S,F,R,D,L=this.scene.glplot.gl,B=d.solid;this.data=P;var V=function(P,S){var F,R,D,L,B,V,Z=[],Y=P.fullSceneLayout,ee=P.dataScale,Q=Y.xaxis,$=Y.yaxis,K=Y.zaxis,oe=S.marker,j=S.line,H=S.x||[],G=S.y||[],re=S.z||[],q=H.length,te=S.xcalendar,ne=S.ycalendar,le=S.zcalendar;for(B=0;B<q;B++)F=Q.d2l(H[B],0,te)*ee[0],R=$.d2l(G[B],0,ne)*ee[1],D=K.d2l(re[B],0,le)*ee[2],Z[B]=[F,R,D];if(Array.isArray(S.text))V=S.text;else if(void 0!==S.text)for(V=new Array(q),B=0;B<q;B++)V[B]=S.text;function ue(Pe,Ve){var qe=Y[Pe];return i.tickText(qe,qe.d2l(Ve),!0).text}var de=S.texttemplate;if(de){var he=P.fullLayout._d3locale,be=Array.isArray(de),ge=be?Math.min(de.length,q):q,we=be?function(Pe){return de[Pe]}:function(){return de};for(V=new Array(ge),B=0;B<ge;B++){var ke={x:H[B],y:G[B],z:re[B]},De={xLabel:ue("xaxis",H[B]),yLabel:ue("yaxis",G[B]),zLabel:ue("zaxis",re[B])},Ee={};u(Ee,S,B);var Re=S._meta||{};V[B]=r.texttemplateString(we(B),De,he,Ee,ke,Re)}}if(L={position:Z,mode:S.mode,text:V},"line"in S&&(L.lineColor=a(j,1,q),L.lineWidth=j.width,L.lineDashes=j.dash),"marker"in S){var ve=n(S);L.scatterColor=a(oe,1,q),L.scatterSize=A(oe.size,q,w,20,ve),L.scatterMarker=A(oe.symbol,q,v,"\u25cf"),L.scatterLineWidth=oe.line.width,L.scatterLineColor=a(oe.line,1,q),L.scatterAngle=0}"textposition"in S&&(L.textOffset=function(Pe){var Ve=[0,0];if(Array.isArray(Pe))for(var qe=0;qe<Pe.length;qe++)Ve[qe]=[0,0],Pe[qe]&&(Ve[qe][0]=m(Pe[qe]),Ve[qe][1]=l(Pe[qe]));else Ve[0]=m(Pe),Ve[1]=l(Pe);return Ve}(S.textposition),L.textColor=a(S.textfont,1,q),L.textSize=A(S.textfont.size,q,r.identity,12),L.textFont=S.textfont.family,L.textAngle=0);var Te=["x","y","z"];for(L.project=[!1,!1,!1],L.projectScale=[1,1,1],L.projectOpacity=[1,1,1],B=0;B<3;++B){var Ie=S.projection[Te[B]];(L.project[B]=Ie.show)&&(L.projectOpacity[B]=Ie.opacity,L.projectScale[B]=Ie.scale)}L.errorBounds=f(S,ee,Y);var Ce=function(Pe){for(var Ve=[0,0,0],qe=[[0,0,0],[0,0,0],[0,0,0]],Je=[1,1,1],lt=0;lt<3;lt++){var He=Pe[lt];He&&!1!==He.copy_zstyle&&!1!==Pe[2].visible&&(He=Pe[2]),He&&He.visible&&(Ve[lt]=He.width/2,qe[lt]=t(He.color),Je[lt]=He.thickness)}return{capSize:Ve,color:qe,lineWidth:Je}}([S.error_x,S.error_y,S.error_z]);return L.errorColor=Ce.color,L.errorLineWidth=Ce.lineWidth,L.errorCapSize=Ce.capSize,L.delaunayAxis=S.surfaceaxis,L.delaunayColor=t(S.surfacecolor),L}(this.scene,P);"mode"in V&&(this.mode=V.mode),"lineDashes"in V&&V.lineDashes in d&&(B=d[V.lineDashes]),this.color=E(V.scatterColor)||E(V.lineColor),this.dataPoints=V.position,S={gl:this.scene.glplot.gl,position:V.position,color:V.lineColor,lineWidth:V.lineWidth||1,dashes:B[0],dashScale:B[1],opacity:P.opacity,connectGaps:P.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(S):(this.linePlot=g(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Z=P.opacity;if(P.marker&&P.marker.opacity&&(Z*=P.marker.opacity),F={gl:this.scene.glplot.gl,position:V.position,color:V.scatterColor,size:V.scatterSize,glyph:V.scatterMarker,opacity:Z,orthographic:!0,lineWidth:V.scatterLineWidth,lineColor:V.scatterLineColor,project:V.project,projectScale:V.projectScale,projectOpacity:V.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(F):(this.scatterPlot=x(F),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),D={gl:this.scene.glplot.gl,position:V.position,glyph:V.text,color:V.textColor,size:V.textSize,angle:V.textAngle,alignment:V.textOffset,font:V.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(D):(this.textMarkers=x(D),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:V.position,color:V.errorColor,error:V.errorBounds,lineWidth:V.errorLineWidth,capSize:V.errorCapSize,opacity:P.opacity},this.errorBars?V.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):V.errorBounds&&(this.errorBars=T(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),V.delaunayAxis>=0){var Y=function(ee,Q,$){var K,oe=($+1)%3,j=($+2)%3,H=[],G=[];for(K=0;K<ee.length;++K){var re=ee[K];!isNaN(re[oe])&&isFinite(re[oe])&&!isNaN(re[j])&&isFinite(re[j])&&(H.push([re[oe],re[j]]),G.push(K))}var q=e(H);for(K=0;K<q.length;++K)for(var te=q[K],ne=0;ne<te.length;++ne)te[ne]=G[te[ne]];return{positions:ee,cells:q,meshColor:Q}}(V.position,V.delaunayColor,V.delaunayAxis);Y.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(Y):(Y.gl=L,this.delaunayMesh=b(Y),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},y.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},ae.exports=function(P,S){var F=new p(P,S.uid);return F.update(S),F}},{"../../../stackgl_modules":1120,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":943,"./calc_errors":956}],958:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib"),T=_("../scatter/subtypes"),b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),r=_("../scatter/text_defaults"),t=_("./attributes");ae.exports=function(a,n,d,s){function i(w,v){return x.coerce(a,n,t,w,v)}if(w=a,v=n,M=s,k=0,E=(A=i)("x"),P=A("y"),S=A("z"),g.getComponentMethod("calendars","handleTraceDefaults")(w,v,["x","y","z"],M),E&&P&&S&&(k=Math.min(E.length,P.length,S.length),v._length=v._xlength=v._ylength=v._zlength=k),k){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),T.hasLines(n)&&(i("connectgaps"),e(a,n,d,s,i)),T.hasMarkers(n)&&b(a,n,d,s,i,{noSelect:!0}),T.hasText(n)&&(i("texttemplate"),r(a,n,s,i,{noSelect:!0}));var u=(n.line||{}).color,f=(n.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",u||f);for(var p=["x","y","z"],y=0;y<3;++y){var m="projection."+p[y];i(m+".show")&&(i(m+".opacity"),i(m+".scale"))}var l=g.getComponentMethod("errorbars","supplyDefaults");l(a,n,u||f||d,{axis:"z"}),l(a,n,u||f||d,{axis:"y",inherit:"z"}),l(a,n,u||f||d,{axis:"x",inherit:"z"})}else n.visible=!1;var w,v,A,M,k,E,P,S}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":954}],959:[function(_,ae,ie){"use strict";ae.exports={plot:_("./convert"),attributes:_("./attributes"),markerSymbols:_("../../constants/gl3d_markers"),supplyDefaults:_("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:_("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":954,"./calc":955,"./convert":957,"./defaults":958}],960:[function(_,ae,ie){"use strict";var g=_("../scatter/attributes"),x=_("../../plots/attributes"),T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/template_attributes").texttemplateAttrs,e=_("../../components/colorscale/attributes"),r=_("../../lib/extend").extendFlat,t=g.marker,a=g.line,n=t.line;ae.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:r({},g.mode,{dflt:"markers"}),text:r({},g.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","text"]}),hovertext:r({},g.hovertext,{}),line:{color:a.color,width:a.width,dash:a.dash,shape:r({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:g.connectgaps,fill:r({},g.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:g.fillcolor,marker:r({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:r({width:n.width,editType:"calc"},e("marker.line")),gradient:t.gradient,editType:"calc"},e("marker")),textfont:g.textfont,textposition:g.textposition,selected:g.selected,unselected:g.unselected,hoverinfo:r({},x.hoverinfo,{flags:["a","b","text","name"]}),hoveron:g.hoveron,hovertemplate:T()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],961:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../scatter/colorscale_calc"),T=_("../scatter/arrays_to_calcdata"),b=_("../scatter/calc_selection"),e=_("../scatter/calc").calcMarkerSize,r=_("../carpet/lookup_carpetid");ae.exports=function(t,a){var n=a._carpetTrace=r(t,a);if(n&&n.visible&&"legendonly"!==n.visible){var d;a.xaxis=n.xaxis,a.yaxis=n.yaxis;var s,i,u=a._length,f=new Array(u),p=!1;for(d=0;d<u;d++)if(i=a.b[d],g(s=a.a[d])&&g(i)){var y=n.ab2xy(+s,+i,!0),m=n.isVisible(+s,+i);m||(p=!0),f[d]={x:y[0],y:y[1],a:s,b:i,vis:m}}else f[d]={x:!1,y:!1};return a._needsCull=p,f[0].carpet=n,f[0].trace=a,e(a,u),x(t,a),T(f,a),b(f,a),f}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],962:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../scatter/constants"),T=_("../scatter/subtypes"),b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),r=_("../scatter/line_shape_defaults"),t=_("../scatter/text_defaults"),a=_("../scatter/fillcolor_defaults"),n=_("./attributes");ae.exports=function(d,s,i,u){function f(w,v){return g.coerce(d,s,n,w,v)}f("carpet"),s.xaxis="x",s.yaxis="y";var p=f("a"),y=f("b"),m=Math.min(p.length,y.length);if(m){s._length=m,f("text"),f("texttemplate"),f("hovertext"),f("mode",m<x.PTS_LINESONLY?"lines+markers":"lines"),T.hasLines(s)&&(e(d,s,i,u,f),r(d,s,f),f("connectgaps")),T.hasMarkers(s)&&b(d,s,i,u,f,{gradient:!0}),T.hasText(s)&&t(d,s,u,f);var l=[];(T.hasMarkers(s)||T.hasText(s))&&(f("marker.maxdisplayed"),l.push("points")),f("fill"),"none"!==s.fill&&(a(d,s,i,f),T.hasLines(s)||r(d,s,f)),"tonext"!==s.fill&&"toself"!==s.fill||l.push("fills"),"fills"!==f("hoveron",l.join("+")||"points")&&f("hovertemplate"),g.coerceSelectionMarkerOpacity(s,f)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":960}],963:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b,e){var r=b[e];return g.a=r.a,g.b=r.b,g.y=r.y,g}},{}],964:[function(_,ae,ie){"use strict";ae.exports=function(g,x){var T={},b=x._carpet,e=b.ab2ij([g.a,g.b]),r=Math.floor(e[0]),t=e[0]-r,a=Math.floor(e[1]),d=b.evalxy([],r,a,t,e[1]-a);return T.yLabel=d[1].toFixed(3),T}},{}],965:[function(_,ae,ie){"use strict";var g=_("../scatter/hover"),x=_("../../lib").fillText;ae.exports=function(T,b,e,r){var t=g(T,b,e,r);if(t&&!1!==t[0].index){var a=t[0];if(void 0===a.index){var d=T.xa._length,s=d*(1-a.y0/T.ya._length)/2,i=d-s;return a.x0=Math.max(Math.min(a.x0,i),s),a.x1=Math.max(Math.min(a.x1,i),s),t}var u=a.cd[a.index];a.a=u.a,a.b=u.b,a.xLabelVal=void 0,a.yLabelVal=void 0;var f=a.trace,p=f._carpet,y=f._module.formatLabels(u,f);a.yLabel=y.yLabel,delete a.text;var m=[];if(!f.hovertemplate){var l=(u.hi||f.hoverinfo).split("+");-1!==l.indexOf("all")&&(l=["a","b","text"]),-1!==l.indexOf("a")&&w(p.aaxis,u.a),-1!==l.indexOf("b")&&w(p.baxis,u.b),m.push("y: "+a.yLabel),-1!==l.indexOf("text")&&x(u,f,m),a.extraText=m.join("<br>")}return t}function w(v,A){var M;M=v.labelprefix&&v.labelprefix.length>0?v.labelprefix.replace(/ = $/,""):v._hovertitle,m.push(M+": "+A.toFixed(3)+v.labelsuffix)}}},{"../../lib":503,"../scatter/hover":937}],966:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../scatter/select"),eventData:_("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:_("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":960,"./calc":961,"./defaults":962,"./event_data":963,"./format_labels":964,"./hover":965,"./plot":967}],967:[function(_,ae,ie){"use strict";var g=_("../scatter/plot"),x=_("../../plots/cartesian/axes"),T=_("../../components/drawing");ae.exports=function(b,e,r,t){var a,d,s=r[0][0].carpet,i={xaxis:x.getFromId(b,s.xaxis||"x"),yaxis:x.getFromId(b,s.yaxis||"y"),plot:e.plot};for(g(b,i,r,t),a=0;a<r.length;a++)d=t.selectAll("g.trace"+r[a][0].trace.uid+" .js-line"),T.setClipUrl(d,r[a][0].carpet._clipPathId,b)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":947}],968:[function(_,ae,ie){"use strict";var g=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../scatter/attributes"),b=_("../../plots/attributes"),e=_("../../components/colorscale/attributes"),r=_("../../components/drawing/attributes").dash,t=_("../../lib/extend").extendFlat,a=_("../../plot_api/edit_types").overrideAll,n=T.marker,d=T.line,s=n.line;ae.exports=a({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:x({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:d.color,width:d.width,dash:r},connectgaps:T.connectgaps,marker:t({symbol:n.symbol,opacity:n.opacity,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:t({width:s.width},e("marker.line")),gradient:n.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:T.fillcolor,selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:g()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],969:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../scatter/colorscale_calc"),b=_("../scatter/arrays_to_calcdata"),e=_("../scatter/calc_selection"),r=_("../../lib")._;function t(a){return a&&"string"==typeof a}ae.exports=function(a,n){var d,s=Array.isArray(n.locations),i=s?n.locations.length:n._length,u=new Array(i);d=n.geojson?function(w){return t(w)||g(w)}:t;for(var f=0;f<i;f++){var p=u[f]={};if(s){var y=n.locations[f];p.loc=d(y)?y:null}else{var m=n.lon[f],l=n.lat[f];p.lonlat=g(m)&&g(l)?[+m,+l]:[x,x]}}return b(u,n),T(a,n),e(u,n),i&&(u[0].t={labels:{lat:r(a,"lat:")+" ",lon:r(a,"lon:")+" "}}),u}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],970:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/text_defaults"),r=_("../scatter/fillcolor_defaults"),t=_("./attributes");ae.exports=function(a,n,d,s){function i(w,v){return g.coerce(a,n,t,w,v)}var u,f=i("locations");if(f&&f.length){var p,y=i("geojson");("string"==typeof y&&""!==y||g.isPlainObject(y))&&(p="geojson-id"),"geojson-id"===i("locationmode",p)&&i("featureidkey"),u=f.length}else{var m=i("lon")||[],l=i("lat")||[];u=Math.min(m.length,l.length)}u?(n._length=u,i("text"),i("hovertext"),i("hovertemplate"),i("mode"),x.hasLines(n)&&(b(a,n,d,s,i),i("connectgaps")),x.hasMarkers(n)&&T(a,n,d,s,i,{gradient:!0}),x.hasText(n)&&(i("texttemplate"),e(a,n,s,i)),i("fill"),"none"!==n.fill&&r(a,n,d,i),g.coerceSelectionMarkerOpacity(n,i)):n.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":968}],971:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b,e){g.lon=x.lon,g.lat=x.lat,g.location=x.loc?x.loc:null;var r=b[e];return r.fIn&&r.fIn.properties&&(g.properties=r.fIn.properties),g}},{}],972:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes");ae.exports=function(x,T,b){var e={},r=b[T.geo]._subplot.mockAxis,t=x.lonlat;return e.lonLabel=g.tickText(r,r.c2l(t[0]),!0).text,e.latLabel=g.tickText(r,r.c2l(t[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],973:[function(_,ae,ie){"use strict";var g=_("../../components/fx"),x=_("../../constants/numerical").BADNUM,T=_("../scatter/get_trace_color"),b=_("../../lib").fillText,e=_("./attributes");ae.exports=function(r,t,a){var n=r.cd,d=n[0].trace,s=r.xa,i=r.ya,u=r.subplot,f=u.projection.isLonLatOverEdges,p=u.project;if(g.getClosest(n,function(M){var k=M.lonlat;if(k[0]===x||f(k))return 1/0;var E=p(k),P=p([t,a]),S=Math.abs(E[0]-P[0]),F=Math.abs(E[1]-P[1]),R=Math.max(3,M.mrc||0);return Math.max(Math.sqrt(S*S+F*F)-R,1-3/R)},r),!1!==r.index){var y=n[r.index],m=y.lonlat,l=[s.c2p(m),i.c2p(m)],w=y.mrc||1;r.x0=l[0]-w,r.x1=l[0]+w,r.y0=l[1]-w,r.y1=l[1]+w,r.loc=y.loc,r.lon=m[0],r.lat=m[1];var v={};v[d.geo]={_subplot:u};var A=d._module.formatLabels(y,d,v);return r.lonLabel=A.lonLabel,r.latLabel=A.latLabel,r.color=T(d,y),r.extraText=function(M,k,E,P){if(!M.hovertemplate){var S=k.hi||M.hoverinfo,F="all"===S?e.hoverinfo.flags:S.split("+"),R=-1!==F.indexOf("location")&&Array.isArray(M.locations),D=-1!==F.indexOf("lon"),L=-1!==F.indexOf("lat"),B=-1!==F.indexOf("text"),V=[];return R?V.push(k.loc):D&&L?V.push("("+Z(E.latLabel)+", "+Z(E.lonLabel)+")"):D?V.push(P.lon+Z(E.lonLabel)):L&&V.push(P.lat+Z(E.latLabel)),B&&b(k,M,V),V.join("<br>")}function Z(Y){return Y+"\xb0"}}(d,y,r,n[0].t.labels),r.hovertemplate=d.hovertemplate,[r]}}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936,"./attributes":968}],974:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),calcGeoJSON:_("./plot").calcGeoJSON,plot:_("./plot").plot,style:_("./style"),styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:_("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":944,"../scatter/style":950,"./attributes":968,"./calc":969,"./defaults":970,"./event_data":971,"./format_labels":972,"./hover":973,"./plot":975,"./select":976,"./style":977}],975:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../lib/topojson_utils").getTopojsonFeatures,b=_("../../lib/geojson_utils"),e=_("../../lib/geo_location_utils"),r=_("../../plots/cartesian/autorange").findExtremes,t=_("../../constants/numerical").BADNUM,a=_("../scatter/calc").calcMarkerSize,n=_("../scatter/subtypes"),d=_("./style");ae.exports={calcGeoJSON:function(s,i){var u,f,p=s[0].trace,y=i[p.geo],m=y._subplot,l=p._length;if(Array.isArray(p.locations)){var w=p.locationmode,v="geojson-id"===w?e.extractTraceFeature(s):T(p,m.topojson);for(u=0;u<l;u++){f=s[u];var A="geojson-id"===w?f.fOut:e.locationToFeature(w,f.loc,v);f.lonlat=A?A.properties.ct:[t,t]}}var M,k,E={padded:!0};if("geojson"===y.fitbounds&&"geojson-id"===p.locationmode){var P=e.computeBbox(e.getTraceGeojson(p));M=[P[0],P[2]],k=[P[1],P[3]]}else{for(M=new Array(l),k=new Array(l),u=0;u<l;u++)M[u]=(f=s[u]).lonlat[0],k[u]=f.lonlat[1];E.ppad=a(p,l)}p._extremes.lon=r(y.lonaxis._ax,M,E),p._extremes.lat=r(y.lataxis._ax,k,E)},plot:function(s,i,u){var f=i.layers.frontplot.select(".scatterlayer"),p=x.makeTraceGroups(f,u,"trace scattergeo");function y(m,l){m.lonlat[0]===t&&g.select(l).remove()}p.selectAll("*").remove(),p.each(function(m){var l=g.select(this),w=m[0].trace;if(n.hasLines(w)||"none"!==w.fill){var v=b.calcTraceToLineCoords(m),A="none"!==w.fill?b.makePolygon(v):b.makeLine(v);l.selectAll("path.js-line").data([{geojson:A,trace:w}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}n.hasMarkers(w)&&l.selectAll("path.point").data(x.identity).enter().append("path").classed("point",!0).each(function(M){y(M,this)}),n.hasText(w)&&l.selectAll("g").data(x.identity).enter().append("g").append("text").each(function(M){y(M,this)}),d(s,m)})}}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":927,"../scatter/subtypes":951,"./style":977,"@plotly/d3":58}],976:[function(_,ae,ie){"use strict";var g=_("../scatter/subtypes"),x=_("../../constants/numerical").BADNUM;ae.exports=function(T,b){var e,r,t,a,n,d=T.cd,s=T.xaxis,i=T.yaxis,u=[],f=d[0].trace;if(!g.hasMarkers(f)&&!g.hasText(f))return[];if(!1===b)for(n=0;n<d.length;n++)d[n].selected=0;else for(n=0;n<d.length;n++)(r=(e=d[n]).lonlat)[0]!==x&&(t=s.c2p(r),a=i.c2p(r),b.contains([t,a],null,n,T)?(u.push({pointNumber:n,lon:r[0],lat:r[1]}),e.selected=1):e.selected=0);return u}},{"../../constants/numerical":479,"../scatter/subtypes":951}],977:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color"),b=_("../scatter/style"),e=b.stylePoints,r=b.styleText;ae.exports=function(t,a){var n,d,s,i;a&&(n=t,s=(d=a)[0].trace,(i=d[0].node3).style("opacity",d[0].trace.opacity),e(i,s,n),r(i,s,n),i.selectAll("path.js-line").style("fill","none").each(function(u){var f=g.select(this),p=u.trace,y=p.line||{};f.call(T.stroke,y.color).call(x.dashLine,y.dash||"",y.width||0),"none"!==p.fill&&f.call(T.fill,p.fillcolor)}))}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":950,"@plotly/d3":58}],978:[function(_,ae,ie){"use strict";var g=_("../../plots/attributes"),x=_("../scatter/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../components/colorscale/attributes"),e=_("../../lib/sort_object_keys"),r=_("../../lib/extend").extendFlat,t=_("../../plot_api/edit_types").overrideAll,a=_("./constants").DASHES,n=x.line,d=x.marker,s=d.line,i=ae.exports=t({x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),text:x.text,hovertext:x.hovertext,textposition:x.textposition,textfont:x.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(a),dflt:"solid"}},marker:r({},b("marker"),{symbol:d.symbol,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:d.opacity,colorbar:d.colorbar,line:r({},b("marker.line"),{width:s.width})}),connectgaps:x.connectgaps,fill:r({},x.fill,{dflt:"none"}),fillcolor:x.fillcolor,selected:{marker:x.selected.marker,textfont:x.selected.textfont},unselected:{marker:x.unselected.marker,textfont:x.unselected.textfont},opacity:g.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=x.hovertemplate,i.texttemplate=x.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926,"./constants":980}],979:[function(_,ae,ie){"use strict";var g=_("@plotly/point-cluster"),x=_("../../lib"),T=_("../../plots/cartesian/axis_ids"),b=_("../../plots/cartesian/autorange").findExtremes,e=_("../../plots/cartesian/align_period"),r=_("../scatter/calc"),t=r.calcMarkerSize,a=r.calcAxisExpansion,n=r.setFirstScatter,d=_("../scatter/colorscale_calc"),s=_("./convert"),i=_("./scene_update"),u=_("../../constants/numerical").BADNUM,f=_("./constants").TOO_MANY_POINTS;function p(y,m,l){var w=y._extremes[m._id],v=b(m,l._bnds,{padded:!0});w.min=w.min.concat(v.min),w.max=w.max.concat(v.max)}ae.exports=function(y,m){var l,w=y._fullLayout,v=T.getFromId(y,m.xaxis),A=T.getFromId(y,m.yaxis),M=w._plots[m.xaxis+m.yaxis],k=m._length,E=k>=f,P=2*k,S={},F=v.makeCalcdata(m,"x"),R=A.makeCalcdata(m,"y"),D=e(m,v,"x",F),L=e(m,A,"y",R),B=D.vals,V=L.vals;m._x=B,m._y=V,m.xperiodalignment&&(m._origX=F,m._xStarts=D.starts,m._xEnds=D.ends),m.yperiodalignment&&(m._origY=R,m._yStarts=L.starts,m._yEnds=L.ends);var Z=new Array(P),Y=new Array(k);for(l=0;l<k;l++)Z[2*l]=B[l]===u?NaN:B[l],Z[2*l+1]=V[l]===u?NaN:V[l],Y[l]=l;if("log"===v.type)for(l=0;l<P;l+=2)Z[l]=v.c2l(Z[l]);if("log"===A.type)for(l=1;l<P;l+=2)Z[l]=A.c2l(Z[l]);E&&"log"!==v.type&&"log"!==A.type?S.tree=g(Z):S.ids=Y,d(y,m);var ee,Q=function(K,oe,j,H,G,re){var q=s.style(K,j);if(q.marker&&(q.marker.positions=H),q.line&&H.length>1&&x.extendFlat(q.line,s.linePositions(K,j,H)),q.errorX||q.errorY){var te=s.errorBarPositions(K,j,H,G,re);q.errorX&&x.extendFlat(q.errorX,te.x),q.errorY&&x.extendFlat(q.errorY,te.y)}return q.text&&(x.extendFlat(q.text,{positions:H},s.textPosition(K,j,q.text,q.marker)),x.extendFlat(q.textSel,{positions:H},s.textPosition(K,j,q.text,q.markerSel)),x.extendFlat(q.textUnsel,{positions:H},s.textPosition(K,j,q.text,q.markerUnsel))),q}(y,0,m,Z,B,V),$=i(y,M);return n(w,m),E?Q.marker&&(ee=Q.marker.sizeAvg||Math.max(Q.marker.size,3)):ee=t(m,k),a(y,m,v,A,B,V,ee),Q.errorX&&p(m,v,Q.errorX),Q.errorY&&p(m,A,Q.errorY),Q.fill&&!$.fill2d&&($.fill2d=!0),Q.marker&&!$.scatter2d&&($.scatter2d=!0),Q.line&&!$.line2d&&($.line2d=!0),!Q.errorX&&!Q.errorY||$.error2d||($.error2d=!0),Q.text&&!$.glText&&($.glText=!0),Q.marker&&(Q.marker.snap=k),$.lineOptions.push(Q.line),$.errorXOptions.push(Q.errorX),$.errorYOptions.push(Q.errorY),$.fillOptions.push(Q.fill),$.markerOptions.push(Q.marker),$.markerSelectedOptions.push(Q.markerSel),$.markerUnselectedOptions.push(Q.markerUnsel),$.textOptions.push(Q.text),$.textSelectedOptions.push(Q.textSel),$.textUnselectedOptions.push(Q.textUnsel),$.selectBatch.push([]),$.unselectBatch.push([]),S._scene=$,S.index=$.count,S.x=B,S.y=V,S.positions=Z,$.count++,[{x:!1,y:!1,t:S,trace:m}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"./constants":980,"./convert":981,"./scene_update":989,"@plotly/point-cluster":59}],980:[function(_,ae,ie){"use strict";ae.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],981:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("svg-path-sdf"),T=_("color-normalize"),b=_("../../registry"),e=_("../../lib"),r=_("../../components/drawing"),t=_("../../plots/cartesian/axis_ids"),a=_("../../lib/gl_format_color").formatColor,n=_("../scatter/subtypes"),d=_("../scatter/make_bubble_size_func"),s=_("./helpers"),i=_("./constants"),u=_("../../constants/interactions").DESELECTDIM,f={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},p=_("../../components/fx/helpers").appendArrayPointValue;function y(F,R){var D,L=F._fullLayout,B=R._length,V=R.textfont,Z=R.textposition,Y=Array.isArray(Z)?Z:[Z],ee=V.color,Q=V.size,$=V.family,K={},oe=F._context.plotGlPixelRatio,j=R.texttemplate;if(j){K.text=[];var H=L._d3locale,G=Array.isArray(j),re=G?Math.min(j.length,B):B,q=G?function(be){return j[be]}:function(){return j};for(D=0;D<re;D++){var te={i:D},ne=R._module.formatLabels(te,R,L),le={};p(le,R,D);var ue=R._meta||{};K.text.push(e.texttemplateString(q(D),ne,H,le,te,ue))}}else K.text=Array.isArray(R.text)&&R.text.length<B?R.text.slice():R.text;if(Array.isArray(K.text))for(D=K.text.length;D<B;D++)K.text[D]="";for(K.opacity=R.opacity,K.font={},K.align=[],K.baseline=[],D=0;D<Y.length;D++){var de=Y[D].split(/\s+/);switch(de[1]){case"left":K.align.push("right");break;case"right":K.align.push("left");break;default:K.align.push(de[1])}switch(de[0]){case"top":K.baseline.push("bottom");break;case"bottom":K.baseline.push("top");break;default:K.baseline.push(de[0])}}if(Array.isArray(ee))for(K.color=new Array(B),D=0;D<B;D++)K.color[D]=ee[D];else K.color=ee;if(e.isArrayOrTypedArray(Q)||Array.isArray($))for(K.font=new Array(B),D=0;D<B;D++){var he=K.font[D]={};he.size=(e.isTypedArray(Q)?Q[D]:Array.isArray(Q)?g(Q[D])?Q[D]:0:Q)*oe,he.family=Array.isArray($)?$[D]:$}else K.font={size:Q*oe,family:$};return K}function m(F){var R,D,L=F._length,B=F.marker,V={},Z=e.isArrayOrTypedArray(B.symbol),Y=e.isArrayOrTypedArray(B.color),ee=e.isArrayOrTypedArray(B.line.color),Q=e.isArrayOrTypedArray(B.opacity),$=e.isArrayOrTypedArray(B.size),K=e.isArrayOrTypedArray(B.line.width);if(Z||(D=s.isOpenSymbol(B.symbol)),Z||Y||ee||Q){V.colors=new Array(L),V.borderColors=new Array(L);var oe=a(B,B.opacity,L),j=a(B.line,B.opacity,L);if(!Array.isArray(j[0])){var H=j;for(j=Array(L),R=0;R<L;R++)j[R]=H}if(!Array.isArray(oe[0])){var G=oe;for(oe=Array(L),R=0;R<L;R++)oe[R]=G}for(V.colors=oe,V.borderColors=j,R=0;R<L;R++)Z&&(D=s.isOpenSymbol(B.symbol[R])),D&&(j[R]=oe[R].slice(),oe[R]=oe[R].slice(),oe[R][3]=0);V.opacity=F.opacity}else D?(V.color=T(B.color,"uint8"),V.color[3]=0,V.borderColor=T(B.color,"uint8")):(V.color=T(B.color,"uint8"),V.borderColor=T(B.line.color,"uint8")),V.opacity=F.opacity*B.opacity;if(Z)for(V.markers=new Array(L),R=0;R<L;R++)V.markers[R]=S(B.symbol[R]);else V.marker=S(B.symbol);var q,te=d(F,1);if($||K){var ne,le=V.sizes=new Array(L),ue=V.borderSizes=new Array(L),de=0;if($){for(R=0;R<L;R++)le[R]=te(B.size[R]),de+=le[R];ne=de/L}else for(q=te(B.size),R=0;R<L;R++)le[R]=q;if(K)for(R=0;R<L;R++)ue[R]=B.line.width[R];else for(q=B.line.width,R=0;R<L;R++)ue[R]=q;V.sizeAvg=ne}else V.size=te(B&&B.size||10),V.borderSizes=te(B.line.width);return V}function l(F,R){var L={};return R&&(R.marker&&R.marker.symbol?L=m(e.extendFlat({},F.marker,R.marker)):R.marker&&(R.marker.size&&(L.size=R.marker.size),R.marker.color&&(L.colors=R.marker.color),void 0!==R.marker.opacity&&(L.opacity=R.marker.opacity))),L}function w(F,R,D){var L={};if(!D)return L;if(D.textfont){var B={opacity:1,text:R.text,texttemplate:R.texttemplate,textposition:R.textposition,textfont:e.extendFlat({},R.textfont)};D.textfont&&e.extendFlat(B.textfont,D.textfont),L=y(F,B)}return L}function v(F,R,D){var L={capSize:2*R.width*D,lineWidth:R.thickness*D,color:R.color};return R.copy_ystyle&&(L=F.error_y),L}var A=i.SYMBOL_SDF_SIZE,M=i.SYMBOL_SIZE,k=i.SYMBOL_STROKE,E={},P=r.symbolFuncs[0](.05*M);function S(F){if("circle"===F)return null;var R,D,L=r.symbolNumber(F),B=r.symbolFuncs[L%100],V=!!r.symbolNoDot[L%100],Z=!!r.symbolNoFill[L%100],Y=s.isDotSymbol(F);return E[F]?E[F]:(R=Y&&!V?B(1.1*M)+P:B(M),D=x(R,{w:A,h:A,viewBox:[-M,-M,M,M],stroke:Z?k:-k}),E[F]=D,D||null)}ae.exports={style:function(F,R){var D,L={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},B=F._context.plotGlPixelRatio;if(!0!==R.visible)return L;if(n.hasText(R)&&(L.text=y(F,R),L.textSel=w(F,R,R.selected),L.textUnsel=w(F,R,R.unselected)),n.hasMarkers(R)&&(L.marker=m(R),L.markerSel=l(R,R.selected),L.markerUnsel=l(R,R.unselected),!R.unselected&&e.isArrayOrTypedArray(R.marker.opacity))){var V=R.marker.opacity;for(L.markerUnsel.opacity=new Array(V.length),D=0;D<V.length;D++)L.markerUnsel.opacity[D]=u*V[D]}if(n.hasLines(R)){L.line={overlay:!0,thickness:R.line.width*B,color:R.line.color,opacity:R.opacity};var Z=(i.DASHES[R.line.dash]||[1]).slice();for(D=0;D<Z.length;++D)Z[D]*=R.line.width*B;L.line.dashes=Z}return R.error_x&&R.error_x.visible&&(L.errorX=v(R,R.error_x,B)),R.error_y&&R.error_y.visible&&(L.errorY=v(R,R.error_y,B)),R.fill&&"none"!==R.fill&&(L.fill={closed:!0,fill:R.fillcolor,thickness:0}),L},markerStyle:m,markerSelection:l,linePositions:function(F,R,D){var L,B,V=D.length,Z=V/2;if(n.hasLines(R)&&Z)if("hv"===R.line.shape){for(L=[],B=0;B<Z-1;B++)isNaN(D[2*B])||isNaN(D[2*B+1])?L.push(NaN,NaN,NaN,NaN):(L.push(D[2*B],D[2*B+1]),isNaN(D[2*B+2])||isNaN(D[2*B+3])?L.push(NaN,NaN):L.push(D[2*B+2],D[2*B+1]));L.push(D[V-2],D[V-1])}else if("hvh"===R.line.shape){for(L=[],B=0;B<Z-1;B++)if(isNaN(D[2*B])||isNaN(D[2*B+1])||isNaN(D[2*B+2])||isNaN(D[2*B+3]))isNaN(D[2*B])||isNaN(D[2*B+1])?L.push(NaN,NaN):L.push(D[2*B],D[2*B+1]),L.push(NaN,NaN);else{var Y=(D[2*B]+D[2*B+2])/2;L.push(D[2*B],D[2*B+1],Y,D[2*B+1],Y,D[2*B+3])}L.push(D[V-2],D[V-1])}else if("vhv"===R.line.shape){for(L=[],B=0;B<Z-1;B++)if(isNaN(D[2*B])||isNaN(D[2*B+1])||isNaN(D[2*B+2])||isNaN(D[2*B+3]))isNaN(D[2*B])||isNaN(D[2*B+1])?L.push(NaN,NaN):L.push(D[2*B],D[2*B+1]),L.push(NaN,NaN);else{var ee=(D[2*B+1]+D[2*B+3])/2;L.push(D[2*B],D[2*B+1],D[2*B],ee,D[2*B+2],ee)}L.push(D[V-2],D[V-1])}else if("vh"===R.line.shape){for(L=[],B=0;B<Z-1;B++)isNaN(D[2*B])||isNaN(D[2*B+1])?L.push(NaN,NaN,NaN,NaN):(L.push(D[2*B],D[2*B+1]),isNaN(D[2*B+2])||isNaN(D[2*B+3])?L.push(NaN,NaN):L.push(D[2*B],D[2*B+3]));L.push(D[V-2],D[V-1])}else L=D;var Q=!1;for(B=0;B<L.length;B++)if(isNaN(L[B])){Q=!0;break}var $=Q||L.length>i.TOO_MANY_POINTS||n.hasMarkers(R)?"rect":"round";if(Q&&R.connectgaps){var K=L[0],oe=L[1];for(B=0;B<L.length;B+=2)isNaN(L[B])||isNaN(L[B+1])?(L[B]=K,L[B+1]=oe):(K=L[B],oe=L[B+1])}return{join:$,positions:L}},errorBarPositions:function(F,R,D,L,B){var V=b.getComponentMethod("errorbars","makeComputeError"),Z=t.getFromId(F,R.xaxis),Y=t.getFromId(F,R.yaxis),ee=D.length/2,Q={};function $(K,oe){var j=oe._id.charAt(0),H=R["error_"+j];if(H&&H.visible&&("linear"===oe.type||"log"===oe.type)){for(var G=V(H),re={x:0,y:1}[j],q={x:[0,1,2,3],y:[2,3,0,1]}[j],te=new Float64Array(4*ee),ne=1/0,le=-1/0,ue=0,de=0;ue<ee;ue++,de+=4){var he=K[ue];if(g(he)){var be=D[2*ue+re],ge=G(he,ue),we=ge[0],ke=ge[1];if(g(we)&&g(ke)){var Ee=he+ke;te[de+q[0]]=be-oe.c2l(he-we),te[de+q[1]]=oe.c2l(Ee)-be,te[de+q[2]]=0,te[de+q[3]]=0,ne=Math.min(ne,he-we),le=Math.max(le,he+ke)}}}Q[j]={positions:D,errors:te,_bnds:[ne,le]}}}return $(L,Z),$(B,Y),Q},textPosition:function(F,R,D,L){var B,V=R._length,Z={};if(n.hasMarkers(R)){var Y=D.font,ee=D.align,Q=D.baseline;for(Z.offset=new Array(V),B=0;B<V;B++){var $=L.sizes?L.sizes[B]:L.size,K=Array.isArray(Y)?Y[B].size:Y.size,oe=Array.isArray(ee)?ee.length>1?ee[B]:ee[0]:ee,j=Array.isArray(Q)?Q.length>1?Q[B]:Q[0]:Q,G=f[j],re=$?$/.8+1:0;Z.offset[B]=[f[oe]*re/K,(-G*re-.5*G)/K]}}return Z}}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"./constants":980,"./helpers":985,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],982:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../registry"),T=_("./helpers"),b=_("./attributes"),e=_("../scatter/constants"),r=_("../scatter/subtypes"),t=_("../scatter/xy_defaults"),a=_("../scatter/period_defaults"),n=_("../scatter/marker_defaults"),d=_("../scatter/line_defaults"),s=_("../scatter/fillcolor_defaults"),i=_("../scatter/text_defaults");ae.exports=function(u,f,p,y){function m(P,S){return g.coerce(u,f,b,P,S)}var l=!!u.marker&&T.isOpenSymbol(u.marker.symbol),w=r.isBubble(u),v=t(u,f,y,m);if(v){a(u,f,y,m),m("xhoverformat"),m("yhoverformat");var A=v<e.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("hovertemplate"),m("mode",A),r.hasLines(f)&&(m("connectgaps"),d(u,f,p,y,m),m("line.shape")),r.hasMarkers(f)&&(n(u,f,p,y,m),m("marker.line.width",l||w?1:0)),r.hasText(f)&&(m("texttemplate"),i(u,f,y,m));var M=(f.line||{}).color,k=(f.marker||{}).color;m("fill"),"none"!==f.fill&&s(u,f,p,m);var E=x.getComponentMethod("errorbars","supplyDefaults");E(u,f,M||k||p,{axis:"y"}),E(u,f,M||k||p,{axis:"x",inherit:"y"}),g.coerceSelectionMarkerOpacity(f,m)}else f.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/period_defaults":946,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatter/xy_defaults":953,"./attributes":978,"./helpers":985}],983:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/color"),T=_("../../constants/interactions").DESELECTDIM;ae.exports={styleTextSelection:function(b){var e,r,t=b[0],a=t.trace,n=t.t,d=n._scene,s=n.index,i=d.selectBatch[s],u=d.unselectBatch[s],f=d.textOptions[s],p=d.textSelectedOptions[s]||{},y=d.textUnselectedOptions[s]||{},m=g.extendFlat({},f);if(i.length||u.length){var l=p.color,w=y.color,v=f.color,A=Array.isArray(v);for(m.color=new Array(a._length),e=0;e<i.length;e++)m.color[r=i[e]]=l||(A?v[r]:v);for(e=0;e<u.length;e++){r=u[e];var M=A?v[r]:v;m.color[r]=w||(l?M:x.addOpacity(M,T))}}d.glText[s].update(m)}}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],984:[function(_,ae,ie){"use strict";var g=_("../scatter/format_labels");ae.exports=function(x,T,b){var e=x.i;return"x"in x||(x.x=T._x[e]),"y"in x||(x.y=T._y[e]),g(x,T,b)}},{"../scatter/format_labels":935}],985:[function(_,ae,ie){"use strict";var g=_("./constants");ie.isOpenSymbol=function(x){return"string"==typeof x?g.OPEN_RE.test(x):x%200>100},ie.isDotSymbol=function(x){return"string"==typeof x?g.DOT_RE.test(x):x>200}},{"./constants":980}],986:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib"),T=_("../scatter/get_trace_color");function b(e,r,t,a){var n=e.xa,d=e.ya,s=e.distance,i=e.dxy,u=e.index,f={pointNumber:u,x:r[u],y:t[u]};f.tx=Array.isArray(a.text)?a.text[u]:a.text,f.htx=Array.isArray(a.hovertext)?a.hovertext[u]:a.hovertext,f.data=Array.isArray(a.customdata)?a.customdata[u]:a.customdata,f.tp=Array.isArray(a.textposition)?a.textposition[u]:a.textposition;var p=a.textfont;p&&(f.ts=x.isArrayOrTypedArray(p.size)?p.size[u]:p.size,f.tc=Array.isArray(p.color)?p.color[u]:p.color,f.tf=Array.isArray(p.family)?p.family[u]:p.family);var y=a.marker;y&&(f.ms=x.isArrayOrTypedArray(y.size)?y.size[u]:y.size,f.mo=x.isArrayOrTypedArray(y.opacity)?y.opacity[u]:y.opacity,f.mx=x.isArrayOrTypedArray(y.symbol)?y.symbol[u]:y.symbol,f.mc=x.isArrayOrTypedArray(y.color)?y.color[u]:y.color);var m=y&&y.line;m&&(f.mlc=Array.isArray(m.color)?m.color[u]:m.color,f.mlw=x.isArrayOrTypedArray(m.width)?m.width[u]:m.width);var l=y&&y.gradient;l&&"none"!==l.type&&(f.mgt=Array.isArray(l.type)?l.type[u]:l.type,f.mgc=Array.isArray(l.color)?l.color[u]:l.color);var w=n.c2p(f.x,!0),v=d.c2p(f.y,!0),A=f.mrc||1,M=a.hoverlabel;M&&(f.hbg=Array.isArray(M.bgcolor)?M.bgcolor[u]:M.bgcolor,f.hbc=Array.isArray(M.bordercolor)?M.bordercolor[u]:M.bordercolor,f.hts=x.isArrayOrTypedArray(M.font.size)?M.font.size[u]:M.font.size,f.htc=Array.isArray(M.font.color)?M.font.color[u]:M.font.color,f.htf=Array.isArray(M.font.family)?M.font.family[u]:M.font.family,f.hnl=x.isArrayOrTypedArray(M.namelength)?M.namelength[u]:M.namelength);var k=a.hoverinfo;k&&(f.hi=Array.isArray(k)?k[u]:k);var E=a.hovertemplate;E&&(f.ht=Array.isArray(E)?E[u]:E);var P={};P[e.index]=f;var S=a._origX,F=a._origY,R=x.extendFlat({},e,{color:T(a,f),x0:w-A,x1:w+A,xLabelVal:S?S[u]:f.x,y0:v-A,y1:v+A,yLabelVal:F?F[u]:f.y,cd:P,distance:s,spikeDistance:i,hovertemplate:f.ht});return f.htx?R.text=f.htx:f.tx?R.text=f.tx:a.text&&(R.text=a.text),x.fillText(f,a,R),g.getComponentMethod("errorbars","hoverInfo")(f,a,R),R}ae.exports={hoverPoints:function(e,r,t,a){var n,d,s,i,u,f,p,y,m,l,w=e.cd,v=w[0].t,A=w[0].trace,M=e.xa,k=e.ya,E=v.x,P=v.y,S=M.c2p(r),F=k.c2p(t),R=e.distance;if(v.tree){var D=M.p2c(S-R),L=M.p2c(S+R),B=k.p2c(F-R),V=k.p2c(F+R);n="x"===a?v.tree.range(Math.min(D,L),Math.min(k._rl[0],k._rl[1]),Math.max(D,L),Math.max(k._rl[0],k._rl[1])):v.tree.range(Math.min(D,L),Math.min(B,V),Math.max(D,L),Math.max(B,V))}else n=v.ids;var Z=R;if("x"===a){var Y=!!A.xperiodalignment,ee=!!A.yperiodalignment;for(f=0;f<n.length;f++){if(i=E[d=n[f]],p=Math.abs(M.c2p(i)-S),Y){var Q=M.c2p(A._xStarts[d]),$=M.c2p(A._xEnds[d]);p=S>=Math.min(Q,$)&&S<=Math.max(Q,$)?0:1/0}if(p<Z){if(Z=p,y=k.c2p(u=P[d])-F,ee){var K=k.c2p(A._yStarts[d]),oe=k.c2p(A._yEnds[d]);y=F>=Math.min(K,oe)&&F<=Math.max(K,oe)?0:1/0}l=Math.sqrt(p*p+y*y),s=n[f]}}}else for(f=n.length-1;f>-1;f--)i=E[d=n[f]],u=P[d],p=M.c2p(i)-S,y=k.c2p(u)-F,(m=Math.sqrt(p*p+y*y))<Z&&(Z=l=m,s=d);return e.index=s,e.distance=Z,e.dxy=l,void 0===s?[e]:[b(e,E,P,A)]},calcHover:b}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":936}],987:[function(_,ae,ie){"use strict";var g=_("./hover");ae.exports={moduleType:"trace",name:"scattergl",basePlotModule:_("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../scatter/cross_trace_defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),hoverPoints:g.hoverPoints,selectPoints:_("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":932,"../scatter/marker_colorbar":944,"./attributes":978,"./calc":979,"./defaults":982,"./format_labels":984,"./hover":986,"./plot":988,"./select":990}],988:[function(_,ae,ie){"use strict";var g=_("regl-scatter2d"),x=_("regl-line2d"),T=_("regl-error2d"),b=_("gl-text"),e=_("../../lib"),r=_("../../components/dragelement/helpers").selectMode,t=_("../../lib/prepare_regl"),a=_("../scatter/subtypes"),n=_("../scatter/link_traces"),d=_("./edit_style").styleTextSelection;function s(i,u,f,p){var y=i._size,k=y.w*p,E=y.h*p;return[y.l*p+u.domain[0]*k,y.b*p+f.domain[0]*E,i.width*p-y.r*p-(1-u.domain[1])*k,i.height*p-y.t*p-(1-f.domain[1])*E]}ae.exports=function(i,u,f){if(f.length){var p,y,m=i._fullLayout,l=u._scene,w=u.xaxis,v=u.yaxis;if(l)if(t(i,["ANGLE_instanced_arrays","OES_element_index_uint"])){var A=l.count,M=m._glcanvas.data()[0].regl;if(n(i,u,f),l.dirty){if(!0===l.error2d&&(l.error2d=T(M)),!0===l.line2d&&(l.line2d=x(M)),!0===l.scatter2d&&(l.scatter2d=g(M)),!0===l.fill2d&&(l.fill2d=x(M)),!0===l.glText)for(l.glText=new Array(A),p=0;p<A;p++)l.glText[p]=new b(M);if(l.glText){if(A>l.glText.length){var k=A-l.glText.length;for(p=0;p<k;p++)l.glText.push(new b(M))}else A<l.glText.length&&l.glText.splice(A,l.glText.length-A).forEach(function(q){q.destroy()});for(p=0;p<A;p++)l.glText[p].update(l.textOptions[p])}if(l.line2d&&(l.line2d.update(l.lineOptions),l.lineOptions=l.lineOptions.map(function(q){if(q&&q.positions){for(var te=q.positions,ne=0;ne<te.length&&(isNaN(te[ne])||isNaN(te[ne+1]));)ne+=2;for(var le=te.length-2;le>ne&&(isNaN(te[le])||isNaN(te[le+1]));)le-=2;q.positions=te.slice(ne,le+2)}return q}),l.line2d.update(l.lineOptions)),l.error2d){var P=(l.errorXOptions||[]).concat(l.errorYOptions||[]);l.error2d.update(P)}l.scatter2d&&l.scatter2d.update(l.markerOptions),l.fillOrder=e.repeat(null,A),l.fill2d&&(l.fillOptions=l.fillOptions.map(function(q,te){var ne=f[te];if(q&&ne&&ne[0]&&ne[0].trace){var le,ue,de=ne[0],he=de.trace,be=de.t,ge=l.lineOptions[te],we=[];he._ownfill&&we.push(te),he._nexttrace&&we.push(te+1),we.length&&(l.fillOrder[te]=we);var ke,De,Ee=[],Re=ge&&ge.positions||be.positions;if("tozeroy"===he.fill){for(ke=0;ke<Re.length&&isNaN(Re[ke+1]);)ke+=2;for(De=Re.length-2;De>ke&&isNaN(Re[De+1]);)De-=2;0!==Re[ke+1]&&(Ee=[Re[ke],0]),Ee=Ee.concat(Re.slice(ke,De+2)),0!==Re[De+1]&&(Ee=Ee.concat([Re[De],0]))}else if("tozerox"===he.fill){for(ke=0;ke<Re.length&&isNaN(Re[ke]);)ke+=2;for(De=Re.length-2;De>ke&&isNaN(Re[De]);)De-=2;0!==Re[ke]&&(Ee=[0,Re[ke+1]]),Ee=Ee.concat(Re.slice(ke,De+2)),0!==Re[De]&&(Ee=Ee.concat([0,Re[De+1]]))}else if("toself"===he.fill||"tonext"===he.fill){for(Ee=[],le=0,q.splitNull=!0,ue=0;ue<Re.length;ue+=2)(isNaN(Re[ue])||isNaN(Re[ue+1]))&&((Ee=Ee.concat(Re.slice(le,ue))).push(Re[le],Re[le+1]),Ee.push(null,null),le=ue+2);Ee=Ee.concat(Re.slice(le)),le&&Ee.push(Re[le],Re[le+1])}else{var ve=he._nexttrace;if(ve){var Te=l.lineOptions[te+1];if(Te){var Ie=Te.positions;if("tonexty"===he.fill){for(Ee=Re.slice(),te=Math.floor(Ie.length/2);te--;){var Ce=Ie[2*te],Pe=Ie[2*te+1];isNaN(Ce)||isNaN(Pe)||Ee.push(Ce,Pe)}q.fill=ve.fillcolor}}}}if(he._prevtrace&&"tonext"===he._prevtrace.fill){var Ve=l.lineOptions[te-1].positions,qe=Ee.length/2,Je=[le=qe];for(ue=0;ue<Ve.length;ue+=2)(isNaN(Ve[ue])||isNaN(Ve[ue+1]))&&(Je.push(ue/2+qe+1),le=ue+2);Ee=Ee.concat(Ve),q.hole=Je}return q.fillmode=he.fill,q.opacity=he.opacity,q.positions=Ee,q}}),l.fill2d.update(l.fillOptions))}var F=r(m.dragmode),R=m.clickmode.indexOf("select")>-1;for(p=0;p<A;p++){var D=f[p][0],L=D.trace,B=D.t,V=B.index,Z=L._length,Y=B.x,ee=B.y;if(L.selectedpoints||F||R){if(F||(F=!0),L.selectedpoints){var Q=l.selectBatch[V]=e.selIndices2selPoints(L),$={};for(y=0;y<Q.length;y++)$[Q[y]]=1;var K=[];for(y=0;y<Z;y++)$[y]||K.push(y);l.unselectBatch[V]=K}var oe=B.xpx=new Array(Z),j=B.ypx=new Array(Z);for(y=0;y<Z;y++)oe[y]=w.c2p(Y[y]),j[y]=v.c2p(ee[y])}else B.xpx=B.ypx=null}if(F){if(l.select2d||(l.select2d=g(m._glcanvas.data()[1].regl)),l.scatter2d){var H=new Array(A);for(p=0;p<A;p++)H[p]=l.selectBatch[p].length||l.unselectBatch[p].length?l.markerUnselectedOptions[p]:{};l.scatter2d.update(H)}l.select2d&&(l.select2d.update(l.markerOptions),l.select2d.update(l.markerSelectedOptions)),l.glText&&f.forEach(function(q){a.hasText(((q||[])[0]||{}).trace||{})&&d(q)})}else l.scatter2d&&l.scatter2d.update(l.markerOptions);var G={viewport:s(m,w,v,i._context.plotGlPixelRatio),range:[(w._rl||w.range)[0],(v._rl||v.range)[0],(w._rl||w.range)[1],(v._rl||v.range)[1]]},re=e.repeat(G,l.count);l.fill2d&&l.fill2d.update(re),l.line2d&&l.line2d.update(re),l.error2d&&l.error2d.update(re.concat(re)),l.scatter2d&&l.scatter2d.update(re),l.select2d&&l.select2d.update(re),l.glText&&l.glText.forEach(function(q){q.update(G)})}else l.init()}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":942,"../scatter/subtypes":951,"./edit_style":983,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],989:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x,T){var b=T._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},r={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||((b=T._scene={}).init=function(){g.extendFlat(b,r,e)},b.init(),b.update=function(t){var a=g.repeat(t,b.count);if(b.fill2d&&b.fill2d.update(a),b.scatter2d&&b.scatter2d.update(a),b.line2d&&b.line2d.update(a),b.error2d&&b.error2d.update(a.concat(a)),b.select2d&&b.select2d.update(a),b.glText)for(var n=0;n<b.count;n++)b.glText[n].update(t)},b.draw=function(){for(var t=b.count,a=b.fill2d,n=b.error2d,d=b.line2d,s=b.scatter2d,i=b.glText,u=b.select2d,f=b.selectBatch,p=b.unselectBatch,y=0;y<t;y++){if(a&&b.fillOrder[y]&&a.draw(b.fillOrder[y]),d&&b.lineOptions[y]&&d.draw(y),n&&(b.errorXOptions[y]&&n.draw(y),b.errorYOptions[y]&&n.draw(y+t)),s&&b.markerOptions[y])if(p[y].length){var m=g.repeat([],b.count);m[y]=p[y],s.draw(m)}else f[y].length||s.draw(y);i[y]&&b.textOptions[y]&&i[y].render()}u&&u.draw(f),b.dirty=!1},b.destroy=function(){b.fill2d&&b.fill2d.destroy&&b.fill2d.destroy(),b.scatter2d&&b.scatter2d.destroy&&b.scatter2d.destroy(),b.error2d&&b.error2d.destroy&&b.error2d.destroy(),b.line2d&&b.line2d.destroy&&b.line2d.destroy(),b.select2d&&b.select2d.destroy&&b.select2d.destroy(),b.glText&&b.glText.forEach(function(t){t.destroy&&t.destroy()}),b.lineOptions=null,b.fillOptions=null,b.markerOptions=null,b.markerSelectedOptions=null,b.markerUnselectedOptions=null,b.errorXOptions=null,b.errorYOptions=null,b.textOptions=null,b.textSelectedOptions=null,b.textUnselectedOptions=null,b.selectBatch=null,b.unselectBatch=null,T._scene=null}),b.dirty||g.extendFlat(b,e),b}},{"../../lib":503}],990:[function(_,ae,ie){"use strict";var g=_("../scatter/subtypes"),x=_("./edit_style").styleTextSelection;ae.exports=function(T,b){var e=T.cd,r=T.xaxis,t=T.yaxis,a=[],n=e[0].trace,d=e[0].t,s=n._length,i=d.x,u=d.y,f=d._scene,p=d.index;if(!f)return a;var y=g.hasText(n),m=g.hasMarkers(n);if(!0!==n.visible||!m&&!y)return a;var w=[],v=[];if(!1!==b&&!b.degenerate)for(var A=0;A<s;A++)b.contains([d.xpx[A],d.ypx[A]],!1,A,T)?(w.push(A),a.push({pointNumber:A,x:r.c2d(i[A]),y:t.c2d(u[A])})):v.push(A);if(m){var M=f.scatter2d;if(w.length||v.length){if(!f.selectBatch[p].length&&!f.unselectBatch[p].length){var k=new Array(f.count);k[p]=f.markerUnselectedOptions[p],M.update.apply(M,k)}}else{var E=new Array(f.count);E[p]=f.markerOptions[p],M.update.apply(M,E)}}return f.selectBatch[p]=w,f.unselectBatch[p]=v,y&&x(e),a}},{"../scatter/subtypes":951,"./edit_style":983}],991:[function(_,ae,ie){"use strict";var g=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../scattergeo/attributes"),b=_("../scatter/attributes"),e=_("../../plots/mapbox/layout_attributes"),r=_("../../plots/attributes"),t=_("../../components/colorscale/attributes"),a=_("../../lib/extend").extendFlat,n=_("../../plot_api/edit_types").overrideAll,d=T.line,s=T.marker;ae.exports=n({lon:T.lon,lat:T.lat,mode:a({},b.mode,{dflt:"markers"}),text:a({},b.text,{}),texttemplate:x({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:a({},b.hovertext,{}),line:{color:d.color,width:d.width},connectgaps:b.connectgaps,marker:a({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},t("marker")),fill:T.fill,fillcolor:b.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:b.selected.marker},unselected:{marker:b.unselected.marker},hoverinfo:a({},r.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:g()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergeo/attributes":968}],992:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical").BADNUM,b=_("../../lib/geojson_utils"),e=_("../../components/colorscale"),r=_("../../components/drawing"),t=_("../scatter/make_bubble_size_func"),a=_("../scatter/subtypes"),n=_("../../plots/mapbox/convert_text_opts"),d=_("../../components/fx/helpers").appendArrayPointValue,s=_("../../lib/svg_text_utils").NEWLINES,i=_("../../lib/svg_text_utils").BR_TAG_ALL;function u(){return{geojson:b.makeBlank(),layout:{visibility:"none"},paint:{}}}function f(m,l){return x.isArrayOrTypedArray(m)?l?function(w){return g(m[w])?+m[w]:0}:function(w){return m[w]}:m?function(){return m}:p}function p(){return""}function y(m){return m[0]===T}ae.exports=function(m,l){var w,v=l[0].trace,A=!0===v.visible&&0!==v._length,M="none"!==v.fill,k=a.hasLines(v),E=a.hasMarkers(v),P=a.hasText(v),S=E&&"circle"===v.marker.symbol,F=E&&"circle"!==v.marker.symbol,R=u(),D=u(),L=u(),B=u(),V={fill:R,line:D,circle:L,symbol:B};if(!A)return V;if((M||k)&&(w=b.calcTraceToLineCoords(l)),M&&(R.geojson=b.makePolygon(w),R.layout.visibility="visible",x.extendFlat(R.paint,{"fill-color":v.fillcolor})),k&&(D.geojson=b.makeLine(w),D.layout.visibility="visible",x.extendFlat(D.paint,{"line-width":v.line.width,"line-color":v.line.color,"line-opacity":v.opacity})),S){var Z=function(Q){var $,K,oe,j,H=Q[0].trace,G=H.marker,re=H.selectedpoints,q=x.isArrayOrTypedArray(G.color),te=x.isArrayOrTypedArray(G.size),ne=x.isArrayOrTypedArray(G.opacity);function le(De){return H.opacity*De}q&&(K=e.hasColorscale(H,"marker")?e.makeColorScaleFuncFromTrace(G):x.identity),te&&(oe=t(H)),ne&&(j=function(De){return le(g(De)?+x.constrain(De,0,1):0)});var ue,ke,de=[];for($=0;$<Q.length;$++){var he=Q[$],be=he.lonlat;if(!y(be)){var ge={};K&&(ge.mcc=he.mcc=K(he.mc)),oe&&(ge.mrc=he.mrc=oe(he.ms)),j&&(ge.mo=j(he.mo)),re&&(ge.selected=he.selected||0),de.push({type:"Feature",geometry:{type:"Point",coordinates:be},properties:ge})}}if(re)for(ue=r.makeSelectedPointStyleFns(H),$=0;$<de.length;$++){var we=de[$].properties;ue.selectedOpacityFn&&(we.mo=le(ue.selectedOpacityFn(we))),ue.selectedColorFn&&(we.mcc=ue.selectedColorFn(we)),ue.selectedSizeFn&&(we.mrc=ue.selectedSizeFn(we))}return{geojson:{type:"FeatureCollection",features:de},mcc:q||ue&&ue.selectedColorFn?{type:"identity",property:"mcc"}:G.color,mrc:te||ue&&ue.selectedSizeFn?{type:"identity",property:"mrc"}:(ke=G.size,ke/2),mo:ne||ue&&ue.selectedOpacityFn?{type:"identity",property:"mo"}:le(G.opacity)}}(l);L.geojson=Z.geojson,L.layout.visibility="visible",x.extendFlat(L.paint,{"circle-color":Z.mcc,"circle-radius":Z.mrc,"circle-opacity":Z.mo})}if((F||P)&&(B.geojson=function(Q,$){for(var K=$._fullLayout,oe=Q[0].trace,j=oe.marker||{},H=j.symbol,G=j.angle,re="circle"!==H?f(H):p,q="auto"!==G?f(G,!0):p,te=a.hasText(oe)?f(oe.text):p,ne=[],le=0;le<Q.length;le++){var ue=Q[le];if(!y(ue.lonlat)){var de,he=oe.texttemplate;if(he){var be=Array.isArray(he)?he[le]||"":he,ge=oe._module.formatLabels(ue,oe,K),we={};d(we,oe,ue.i),de=x.texttemplateString(be,ge,K._d3locale,we,ue,oe._meta||{})}else de=te(le);de&&(de=de.replace(s,"").replace(i,"\n")),ne.push({type:"Feature",geometry:{type:"Point",coordinates:ue.lonlat},properties:{symbol:re(le),angle:q(le),text:de}})}}return{type:"FeatureCollection",features:ne}}(l,m),x.extendFlat(B.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),F&&(x.extendFlat(B.layout,{"icon-size":v.marker.size/10}),"angle"in v.marker&&"auto"!==v.marker.angle&&x.extendFlat(B.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),B.layout["icon-allow-overlap"]=v.marker.allowoverlap,x.extendFlat(B.paint,{"icon-opacity":v.opacity*v.marker.opacity,"icon-color":v.marker.color})),P)){var ee=n(v.textposition,(v.marker||{}).size);x.extendFlat(B.layout,{"text-size":v.textfont.size,"text-anchor":ee.anchor,"text-offset":ee.offset}),x.extendFlat(B.paint,{"text-color":v.textfont.color,"text-opacity":v.opacity})}return V}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"fast-isnumeric":190}],993:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/text_defaults"),r=_("../scatter/fillcolor_defaults"),t=_("./attributes");ae.exports=function(a,n,d,s){function i(f,p){return g.coerce(a,n,t,f,p)}if(p=n,m=(y=i)("lon")||[],l=y("lat")||[],w=Math.min(m.length,l.length),p._length=w,w){if(i("text"),i("texttemplate"),i("hovertext"),i("hovertemplate"),i("mode"),i("below"),x.hasLines(n)&&(b(a,n,d,s,i,{noDash:!0}),i("connectgaps")),x.hasMarkers(n)){T(a,n,d,s,i,{noLine:!0}),i("marker.allowoverlap"),i("marker.angle");var u=n.marker;"circle"!==u.symbol&&(g.isArrayOrTypedArray(u.size)&&(u.size=u.size[0]),g.isArrayOrTypedArray(u.color)&&(u.color=u.color[0]))}x.hasText(n)&&e(a,n,s,i,{noSelect:!0}),i("fill"),"none"!==n.fill&&r(a,n,d,i),g.coerceSelectionMarkerOpacity(n,i)}else n.visible=!1;var p,y,m,l,w}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":991}],994:[function(_,ae,ie){"use strict";ae.exports=function(g,x){return g.lon=x.lon,g.lat=x.lat,g}},{}],995:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes");ae.exports=function(x,T,b){var e={},r=b[T.subplot]._subplot.mockAxis,t=x.lonlat;return e.lonLabel=g.tickText(r,r.c2l(t[0]),!0).text,e.latLabel=g.tickText(r,r.c2l(t[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],996:[function(_,ae,ie){"use strict";var g=_("../../components/fx"),x=_("../../lib"),T=_("../scatter/get_trace_color"),b=x.fillText,e=_("../../constants/numerical").BADNUM;function r(t,a,n){if(!t.hovertemplate){var d=(a.hi||t.hoverinfo).split("+"),s=-1!==d.indexOf("all"),i=-1!==d.indexOf("lon"),u=-1!==d.indexOf("lat"),f=a.lonlat,p=[];return s||i&&u?p.push("("+y(f[1])+", "+y(f[0])+")"):i?p.push(n.lon+y(f[0])):u&&p.push(n.lat+y(f[1])),(s||-1!==d.indexOf("text"))&&b(a,t,p),p.join("<br>")}function y(m){return m+"\xb0"}}ae.exports={hoverPoints:function(t,a,n){var d=t.cd,s=d[0].trace,i=t.xa,u=t.ya,f=t.subplot,p=360*(a>=0?Math.floor((a+180)/360):Math.ceil((a-180)/360)),y=a-p;if(g.getClosest(d,function(P){var S=P.lonlat;if(S[0]===e)return 1/0;var F=x.modHalf(S[0],360),R=S[1],D=f.project([F,R]),L=D.x-i.c2p([y,R]),B=D.y-u.c2p([F,n]),V=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(L*L+B*B)-V,1-3/V)},t),!1!==t.index){var m=d[t.index],l=m.lonlat,w=[x.modHalf(l[0],360)+p,l[1]],v=i.c2p(w),A=u.c2p(w),M=m.mrc||1;t.x0=v-M,t.x1=v+M,t.y0=A-M,t.y1=A+M;var k={};k[s.subplot]={_subplot:f};var E=s._module.formatLabels(m,s,k);return t.lonLabel=E.lonLabel,t.latLabel=E.latLabel,t.color=T(s,m),t.extraText=r(s,m,d[0].t.labels),t.hovertemplate=s.hovertemplate,[t]}},getExtraText:r}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936}],997:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("../scattergeo/calc"),plot:_("./plot"),hoverPoints:_("./hover").hoverPoints,eventData:_("./event_data"),selectPoints:_("./select"),styleOnSelect:function(g,x){x&&x[0].trace._glTrace.update(x)},moduleType:"trace",name:"scattermapbox",basePlotModule:_("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":944,"../scattergeo/calc":969,"./attributes":991,"./defaults":993,"./event_data":994,"./format_labels":995,"./hover":996,"./plot":998,"./select":999}],998:[function(_,ae,ie){"use strict";var g=_("./convert"),x=_("../../plots/mapbox/constants").traceLayerPrefix,T=["fill","line","circle","symbol"];function b(r,t){this.type="scattermapbox",this.subplot=r,this.uid=t,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol"},this.layerIds={fill:x+t+"-fill",line:x+t+"-line",circle:x+t+"-circle",symbol:x+t+"-symbol"},this.below=null}var e=b.prototype;e.addSource=function(r,t){this.subplot.map.addSource(this.sourceIds[r],{type:"geojson",data:t.geojson})},e.setSourceData=function(r,t){this.subplot.map.getSource(this.sourceIds[r]).setData(t.geojson)},e.addLayer=function(r,t,a){this.subplot.addLayer({type:r,id:this.layerIds[r],source:this.sourceIds[r],layout:t.layout,paint:t.paint},a)},e.update=function(r){var t,a,n,d=this.subplot,s=d.map,i=g(d.gd,r),u=d.belowLookup["trace-"+this.uid];if(u!==this.below){for(t=T.length-1;t>=0;t--)s.removeLayer(this.layerIds[a=T[t]]);for(t=0;t<T.length;t++)n=i[a=T[t]],this.addLayer(a,n,u);this.below=u}for(t=0;t<T.length;t++)n=i[a=T[t]],d.setOptions(this.layerIds[a],"setLayoutProperty",n.layout),"visible"===n.layout.visibility&&(this.setSourceData(a,n),d.setOptions(this.layerIds[a],"setPaintProperty",n.paint));r[0].trace._glTrace=this},e.dispose=function(){for(var r=this.subplot.map,t=T.length-1;t>=0;t--){var a=T[t];r.removeLayer(this.layerIds[a]),r.removeSource(this.sourceIds[a])}},ae.exports=function(r,t){for(var a=t[0].trace,n=new b(r,a.uid),d=g(r.gd,t),s=n.below=r.belowLookup["trace-"+a.uid],i=0;i<T.length;i++){var u=T[i],f=d[u];n.addSource(u,f),n.addLayer(u,f,s)}return t[0].trace._glTrace=n,n}},{"../../plots/mapbox/constants":611,"./convert":992}],999:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../scatter/subtypes"),T=_("../../constants/numerical").BADNUM;ae.exports=function(b,e){var r,t=b.cd,a=b.xaxis,n=b.yaxis,d=[];if(!x.hasMarkers(t[0].trace))return[];if(!1===e)for(r=0;r<t.length;r++)t[r].selected=0;else for(r=0;r<t.length;r++){var i=t[r],u=i.lonlat;if(u[0]!==T){var f=[g.modHalf(u[0],360),u[1]],p=[a.c2p(f),n.c2p(f)];e.contains(p,null,r,b)?(d.push({pointNumber:r,lon:u[0],lat:u[1]}),i.selected=1):i.selected=0}}return d}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":951}],1e3:[function(_,ae,ie){"use strict";var g=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../lib/extend").extendFlat,b=_("../scatter/attributes"),e=_("../../plots/attributes"),r=b.line;ae.exports={mode:b.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:x({editType:"plot"},{keys:["r","theta","text"]}),hovertext:b.hovertext,line:{color:r.color,width:r.width,dash:r.dash,shape:T({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:T({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:T({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,hoverinfo:T({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:b.hoveron,hovertemplate:g(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1001:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../../plots/cartesian/axes"),b=_("../scatter/colorscale_calc"),e=_("../scatter/arrays_to_calcdata"),r=_("../scatter/calc_selection"),t=_("../scatter/calc").calcMarkerSize;ae.exports=function(a,n){for(var d=a._fullLayout,s=n.subplot,i=d[s].radialaxis,u=d[s].angularaxis,f=i.makeCalcdata(n,"r"),p=u.makeCalcdata(n,"theta"),y=n._length,m=new Array(y),l=0;l<y;l++){var w=f[l],v=p[l],A=m[l]={};g(w)&&g(v)?(A.r=w,A.theta=v):A.r=x}var M=t(n,y);return n._extremes.x=T.findExtremes(i,f,{ppad:M}),b(a,n),e(m,n),r(m,n),m}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1002:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/line_shape_defaults"),r=_("../scatter/text_defaults"),t=_("../scatter/fillcolor_defaults"),a=_("../scatter/constants").PTS_LINESONLY,n=_("./attributes");function d(s,i,u,f){var p,y=f("r"),m=f("theta");if(y)m?p=Math.min(y.length,m.length):(p=y.length,f("theta0"),f("dtheta"));else{if(!m)return 0;p=i.theta.length,f("r0"),f("dr")}return i._length=p,p}ae.exports={handleRThetaDefaults:d,supplyDefaults:function(s,i,u,f){function p(l,w){return g.coerce(s,i,n,l,w)}var y=d(0,i,0,p);if(y){p("thetaunit"),p("mode",y<a?"lines+markers":"lines"),p("text"),p("hovertext"),"fills"!==i.hoveron&&p("hovertemplate"),x.hasLines(i)&&(b(s,i,u,f,p),e(s,i,p),p("connectgaps")),x.hasMarkers(i)&&T(s,i,u,f,p,{gradient:!0}),x.hasText(i)&&(p("texttemplate"),r(s,i,f,p));var m=[];(x.hasMarkers(i)||x.hasText(i))&&(p("cliponaxis"),p("marker.maxdisplayed"),m.push("points")),p("fill"),"none"!==i.fill&&(t(s,i,u,p),x.hasLines(i)||e(s,i,p)),"tonext"!==i.fill&&"toself"!==i.fill||m.push("fills"),p("hoveron",m.join("+")||"points"),g.coerceSelectionMarkerOpacity(i,p)}else i.visible=!1}}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1e3}],1003:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes");ae.exports=function(T,b,e){var r,t,a={},n=e[b.subplot]._subplot;n?(r=n.radialAxis,t=n.angularAxis):(r=(n=e[b.subplot]).radialaxis,t=n.angularaxis);var d=r.c2l(T.r);a.rLabel=x.tickText(r,d,!0).text;var s="degrees"===t.thetaunit?g.rad2deg(T.theta):T.theta;return a.thetaLabel=x.tickText(t,s,!0).text,a}},{"../../lib":503,"../../plots/cartesian/axes":554}],1004:[function(_,ae,ie){"use strict";var g=_("../scatter/hover");function x(T,b,e,r){var t=e.radialAxis,a=e.angularAxis;t._hovertitle="r",a._hovertitle="\u03b8";var n={};n[b.subplot]={_subplot:e};var d=b._module.formatLabels(T,b,n);r.rLabel=d.rLabel,r.thetaLabel=d.thetaLabel;var i=[];function u(p,y){i.push(p._hovertitle+": "+y)}if(!b.hovertemplate){var f=(T.hi||b.hoverinfo).split("+");-1!==f.indexOf("all")&&(f=["r","theta","text"]),-1!==f.indexOf("r")&&u(t,r.rLabel),-1!==f.indexOf("theta")&&u(a,r.thetaLabel),-1!==f.indexOf("text")&&r.text&&(i.push(r.text),delete r.text),r.extraText=i.join("<br>")}}ae.exports={hoverPoints:function(T,b,e,r){var t=g(T,b,e,r);if(t&&!1!==t[0].index){var a=t[0];if(void 0===a.index)return t;var n=T.subplot,d=a.cd[a.index],s=a.trace;if(n.isPtInside(d))return a.xLabelVal=void 0,a.yLabelVal=void 0,x(d,s,n,a),a.hovertemplate=s.hovertemplate,t}},makeHoverPointText:x}},{"../scatter/hover":937}],1005:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:_("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,selectPoints:_("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1e3,"./calc":1001,"./defaults":1002,"./format_labels":1003,"./hover":1004,"./plot":1006}],1006:[function(_,ae,ie){"use strict";var g=_("../scatter/plot"),x=_("../../constants/numerical").BADNUM;ae.exports=function(T,b,e){for(var r=b.layers.frontplot.select("g.scatterlayer"),t={xaxis:b.xaxis,yaxis:b.yaxis,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},a=b.radialAxis,n=b.angularAxis,d=0;d<e.length;d++)for(var s=e[d],i=0;i<s.length;i++){var u=s[i],f=u.r;if(f===x)u.x=u.y=x;else{var p=a.c2g(f),y=n.c2g(u.theta);u.x=p*Math.cos(y),u.y=p*Math.sin(y)}}g(T,t,e,r)}},{"../../constants/numerical":479,"../scatter/plot":947}],1007:[function(_,ae,ie){"use strict";var g=_("../scatterpolar/attributes"),x=_("../scattergl/attributes"),T=_("../../plots/template_attributes").texttemplateAttrs;ae.exports={mode:g.mode,r:g.r,theta:g.theta,r0:g.r0,dr:g.dr,theta0:g.theta0,dtheta:g.dtheta,thetaunit:g.thetaunit,text:g.text,texttemplate:T({editType:"plot"},{keys:["r","theta","text"]}),hovertext:g.hovertext,hovertemplate:g.hovertemplate,line:x.line,connectgaps:x.connectgaps,marker:x.marker,fill:x.fill,fillcolor:x.fillcolor,textposition:x.textposition,textfont:x.textfont,hoverinfo:g.hoverinfo,selected:g.selected,unselected:g.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":978,"../scatterpolar/attributes":1e3}],1008:[function(_,ae,ie){"use strict";var g=_("../scatter/colorscale_calc"),x=_("../scatter/calc").calcMarkerSize,T=_("../scattergl/convert"),b=_("../../plots/cartesian/axes"),e=_("../scattergl/constants").TOO_MANY_POINTS;ae.exports=function(r,t){var a=r._fullLayout,n=t.subplot,d=a[n].radialaxis,s=a[n].angularaxis,i=t._r=d.makeCalcdata(t,"r"),u=t._theta=s.makeCalcdata(t,"theta"),f=t._length,p={};f<i.length&&(i=i.slice(0,f)),f<u.length&&(u=u.slice(0,f)),p.r=i,p.theta=u,g(r,t);var y,m=p.opts=T.style(r,t);return f<e?y=x(t,f):m.marker&&(y=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),t._extremes.x=b.findExtremes(d,i,{ppad:y}),[{x:!1,y:!1,t:p,trace:t}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981}],1009:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatterpolar/defaults").handleRThetaDefaults,b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),r=_("../scatter/text_defaults"),t=_("../scatter/fillcolor_defaults"),a=_("../scatter/constants").PTS_LINESONLY,n=_("./attributes");ae.exports=function(d,s,i,u){function f(y,m){return g.coerce(d,s,n,y,m)}var p=T(d,s,u,f);p?(f("thetaunit"),f("mode",p<a?"lines+markers":"lines"),f("text"),f("hovertext"),"fills"!==s.hoveron&&f("hovertemplate"),x.hasLines(s)&&(e(d,s,i,u,f),f("connectgaps")),x.hasMarkers(s)&&b(d,s,i,u,f),x.hasText(s)&&(f("texttemplate"),r(d,s,u,f)),f("fill"),"none"!==s.fill&&t(d,s,i,f),g.coerceSelectionMarkerOpacity(s,f)):s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatterpolar/defaults":1002,"./attributes":1007}],1010:[function(_,ae,ie){"use strict";var g=_("../scatterpolar/format_labels");ae.exports=function(x,T,b){var e=x.i;return"r"in x||(x.r=T._r[e]),"theta"in x||(x.theta=T._theta[e]),g(x,T,b)}},{"../scatterpolar/format_labels":1003}],1011:[function(_,ae,ie){"use strict";var g=_("../scattergl/hover"),x=_("../scatterpolar/hover").makeHoverPointText;ae.exports={hoverPoints:function(T,b,e,r){var t=T.cd[0].t,a=t.r,n=t.theta,d=g.hoverPoints(T,b,e,r);if(d&&!1!==d[0].index){var s=d[0];if(void 0===s.index)return d;var i=T.subplot,u=s.cd[s.index],f=s.trace;if(u.r=a[s.index],u.theta=n[s.index],i.isPtInside(u))return s.xLabelVal=void 0,s.yLabelVal=void 0,x(u,f,i,s),d}}}},{"../scattergl/hover":986,"../scatterpolar/hover":1004}],1012:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:_("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),hoverPoints:_("./hover").hoverPoints,selectPoints:_("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scattergl/select":990,"./attributes":1007,"./calc":1008,"./defaults":1009,"./format_labels":1010,"./hover":1011,"./plot":1013}],1013:[function(_,ae,ie){"use strict";var g=_("@plotly/point-cluster"),x=_("fast-isnumeric"),T=_("../scattergl/plot"),b=_("../scattergl/scene_update"),e=_("../scattergl/convert"),r=_("../../lib"),t=_("../scattergl/constants").TOO_MANY_POINTS;ae.exports=function(a,n,d){if(d.length){var s=n.radialAxis,i=n.angularAxis,u=b(a,n);return d.forEach(function(f){if(f&&f[0]&&f[0].trace){var p,y=f[0],m=y.trace,l=y.t,w=m._length,v=l.r,A=l.theta,M=l.opts,k=v.slice(),E=A.slice();for(p=0;p<v.length;p++)n.isPtInside({r:v[p],theta:A[p]})||(k[p]=NaN,E[p]=NaN);var P=new Array(2*w),S=Array(w),F=Array(w);for(p=0;p<w;p++){var R,D,L=k[p];if(x(L)){var B=s.c2g(L),V=i.c2g(E[p],m.thetaunit);R=B*Math.cos(V),D=B*Math.sin(V)}else R=D=NaN;S[p]=P[2*p]=R,F[p]=P[2*p+1]=D}l.tree=g(P),M.marker&&w>=t&&(M.marker.cluster=l.tree),M.marker&&(M.markerSel.positions=M.markerUnsel.positions=M.marker.positions=P),M.line&&P.length>1&&r.extendFlat(M.line,e.linePositions(a,m,P)),M.text&&(r.extendFlat(M.text,{positions:P},e.textPosition(a,m,M.text,M.marker)),r.extendFlat(M.textSel,{positions:P},e.textPosition(a,m,M.text,M.markerSel)),r.extendFlat(M.textUnsel,{positions:P},e.textPosition(a,m,M.text,M.markerUnsel))),M.fill&&!u.fill2d&&(u.fill2d=!0),M.marker&&!u.scatter2d&&(u.scatter2d=!0),M.line&&!u.line2d&&(u.line2d=!0),M.text&&!u.glText&&(u.glText=!0),u.lineOptions.push(M.line),u.fillOptions.push(M.fill),u.markerOptions.push(M.marker),u.markerSelectedOptions.push(M.markerSel),u.markerUnselectedOptions.push(M.markerUnsel),u.textOptions.push(M.text),u.textSelectedOptions.push(M.textSel),u.textUnselectedOptions.push(M.textUnsel),u.selectBatch.push([]),u.unselectBatch.push([]),l.x=S,l.y=F,l.rawx=S,l.rawy=F,l.r=v,l.theta=A,l.positions=P,l._scene=u,l.index=u.count,u.count++}}),T(a,n,d)}}},{"../../lib":503,"../scattergl/constants":980,"../scattergl/convert":981,"../scattergl/plot":988,"../scattergl/scene_update":989,"@plotly/point-cluster":59,"fast-isnumeric":190}],1014:[function(_,ae,ie){"use strict";var g=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../lib/extend").extendFlat,b=_("../scatter/attributes"),e=_("../../plots/attributes"),r=b.line;ae.exports={mode:b.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:x({editType:"plot"},{keys:["real","imag","text"]}),hovertext:b.hovertext,line:{color:r.color,width:r.width,dash:r.dash,shape:T({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:T({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:T({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,hoverinfo:T({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:b.hoveron,hovertemplate:g(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1015:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../scatter/colorscale_calc"),b=_("../scatter/arrays_to_calcdata"),e=_("../scatter/calc_selection"),r=_("../scatter/calc").calcMarkerSize;ae.exports=function(t,a){for(var n=t._fullLayout,d=a.subplot,i=n[d].imaginaryaxis,u=n[d].realaxis.makeCalcdata(a,"real"),f=i.makeCalcdata(a,"imag"),p=a._length,y=new Array(p),m=0;m<p;m++){var l=u[m],w=f[m],v=y[m]={};g(l)&&g(w)?(v.real=l,v.imag=w):v.real=x}return r(a,p),T(t,a),b(y,a),e(y,a),y}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1016:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/line_shape_defaults"),r=_("../scatter/text_defaults"),t=_("../scatter/fillcolor_defaults"),a=_("../scatter/constants").PTS_LINESONLY,n=_("./attributes");ae.exports=function(d,s,i,u){function f(m,l){return g.coerce(d,s,n,m,l)}var l,v,A,M,k,p=(l=s,M=(v=f)("real"),k=v("imag"),M&&k&&(A=Math.min(M.length,k.length)),l._length=A,A);if(p){f("mode",p<a?"lines+markers":"lines"),f("text"),f("hovertext"),"fills"!==s.hoveron&&f("hovertemplate"),x.hasLines(s)&&(b(d,s,i,u,f),e(d,s,f),f("connectgaps")),x.hasMarkers(s)&&T(d,s,i,u,f,{gradient:!0}),x.hasText(s)&&(f("texttemplate"),r(d,s,u,f));var y=[];(x.hasMarkers(s)||x.hasText(s))&&(f("cliponaxis"),f("marker.maxdisplayed"),y.push("points")),f("fill"),"none"!==s.fill&&(t(d,s,i,f),x.hasLines(s)||e(d,s,f)),"tonext"!==s.fill&&"toself"!==s.fill||y.push("fills"),f("hoveron",y.join("+")||"points"),g.coerceSelectionMarkerOpacity(s,f)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1014}],1017:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes");ae.exports=function(x,T,b){var e={},r=b[T.subplot]._subplot;return e.realLabel=g.tickText(r.radialAxis,x.real,!0).text,e.imagLabel=g.tickText(r.angularAxis,x.imag,!0).text,e}},{"../../plots/cartesian/axes":554}],1018:[function(_,ae,ie){"use strict";var g=_("../scatter/hover");function x(T,b,e,r){var t=e.radialAxis,a=e.angularAxis;t._hovertitle="real",a._hovertitle="imag";var n={};n[b.subplot]={_subplot:e};var d=b._module.formatLabels(T,b,n);r.realLabel=d.realLabel,r.imagLabel=d.imagLabel;var i=[];function u(p,y){i.push(p._hovertitle+": "+y)}if(!b.hovertemplate){var f=(T.hi||b.hoverinfo).split("+");-1!==f.indexOf("all")&&(f=["real","imag","text"]),-1!==f.indexOf("real")&&u(t,r.realLabel),-1!==f.indexOf("imag")&&u(a,r.imagLabel),-1!==f.indexOf("text")&&r.text&&(i.push(r.text),delete r.text),r.extraText=i.join("<br>")}}ae.exports={hoverPoints:function(T,b,e,r){var t=g(T,b,e,r);if(t&&!1!==t[0].index){var a=t[0];if(void 0===a.index)return t;var n=T.subplot,d=a.cd[a.index],s=a.trace;if(n.isPtInside(d))return a.xLabelVal=void 0,a.yLabelVal=void 0,x(d,s,n,a),a.hovertemplate=s.hovertemplate,t}},makeHoverPointText:x}},{"../scatter/hover":937}],1019:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"scattersmith",basePlotModule:_("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,selectPoints:_("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1014,"./calc":1015,"./defaults":1016,"./format_labels":1017,"./hover":1018,"./plot":1020}],1020:[function(_,ae,ie){"use strict";var g=_("../scatter/plot"),x=_("../../constants/numerical").BADNUM,T=_("../../plots/smith/helpers").smith;ae.exports=function(b,e,r){for(var t=e.layers.frontplot.select("g.scatterlayer"),a={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},n=0;n<r.length;n++)for(var d=r[n],s=0;s<d.length;s++){var i=d[s],u=i.real;if(u===x)i.x=i.y=x;else{var f=T([u,i.imag]);i.x=f[0],i.y=f[1]}}g(b,a,r,t)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":947}],1021:[function(_,ae,ie){"use strict";var g=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../scatter/attributes"),b=_("../../plots/attributes"),e=_("../../components/colorscale/attributes"),r=_("../../components/drawing/attributes").dash,t=_("../../lib/extend").extendFlat,a=T.marker,n=T.line,d=a.line;ae.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:x({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},T.hovertext,{}),line:{color:n.color,width:n.width,dash:r,shape:t({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:t({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,marker:t({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:t({width:d.width,editType:"calc"},e("marker.line")),gradient:a.gradient,editType:"calc"},e("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:g()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1022:[function(_,ae,ie){"use strict";var g=_("fast-isnumeric"),x=_("../scatter/colorscale_calc"),T=_("../scatter/arrays_to_calcdata"),b=_("../scatter/calc_selection"),e=_("../scatter/calc").calcMarkerSize,r=["a","b","c"],t={a:["b","c"],b:["a","c"],c:["a","b"]};ae.exports=function(a,n){var d,s,i,u,f,p,y=a._fullLayout[n.subplot].sum,m=n.sum||y,l={a:n.a,b:n.b,c:n.c};for(d=0;d<r.length;d++)if(!l[i=r[d]]){for(f=l[t[i][0]],p=l[t[i][1]],u=new Array(f.length),s=0;s<f.length;s++)u[s]=m-f[s]-p[s];l[i]=u}var w,v,A,M,P=n._length,S=new Array(P);for(d=0;d<P;d++)v=l.b[d],A=l.c[d],g(w=l.a[d])&&g(v)&&g(A)?(1!=(M=y/((w=+w)+(v=+v)+(A=+A)))&&(w*=M,v*=M,A*=M),S[d]={x:A-v,y:w,a:w,b:v,c:A}):S[d]={x:!1,y:!1};return e(n,P),x(a,n),T(S,n),b(S,n),S}},{"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1023:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../scatter/constants"),T=_("../scatter/subtypes"),b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),r=_("../scatter/line_shape_defaults"),t=_("../scatter/text_defaults"),a=_("../scatter/fillcolor_defaults"),n=_("./attributes");ae.exports=function(d,s,i,u){function f(v,A){return g.coerce(d,s,n,v,A)}var p,y=f("a"),m=f("b"),l=f("c");if(y?(p=y.length,m?(p=Math.min(p,m.length),l&&(p=Math.min(p,l.length))):p=l?Math.min(p,l.length):0):m&&l&&(p=Math.min(m.length,l.length)),p){s._length=p,f("sum"),f("text"),f("hovertext"),"fills"!==s.hoveron&&f("hovertemplate"),f("mode",p<x.PTS_LINESONLY?"lines+markers":"lines"),T.hasLines(s)&&(e(d,s,i,u,f),r(d,s,f),f("connectgaps")),T.hasMarkers(s)&&b(d,s,i,u,f,{gradient:!0}),T.hasText(s)&&(f("texttemplate"),t(d,s,u,f));var w=[];(T.hasMarkers(s)||T.hasText(s))&&(f("cliponaxis"),f("marker.maxdisplayed"),w.push("points")),f("fill"),"none"!==s.fill&&(a(d,s,i,f),T.hasLines(s)||r(d,s,f)),"tonext"!==s.fill&&"toself"!==s.fill||w.push("fills"),f("hoveron",w.join("+")||"points"),g.coerceSelectionMarkerOpacity(s,f)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1021}],1024:[function(_,ae,ie){"use strict";ae.exports=function(g,x,T,b,e){if(x.xa&&(g.xaxis=x.xa),x.ya&&(g.yaxis=x.ya),b[e]){var r=b[e];g.a=r.a,g.b=r.b,g.c=r.c}else g.a=x.a,g.b=x.b,g.c=x.c;return g}},{}],1025:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes");ae.exports=function(x,T,b){var e={},r=b[T.subplot]._subplot;return e.aLabel=g.tickText(r.aaxis,x.a,!0).text,e.bLabel=g.tickText(r.baxis,x.b,!0).text,e.cLabel=g.tickText(r.caxis,x.c,!0).text,e}},{"../../plots/cartesian/axes":554}],1026:[function(_,ae,ie){"use strict";var g=_("../scatter/hover");ae.exports=function(x,T,b,e){var r=g(x,T,b,e);if(r&&!1!==r[0].index){var t=r[0];if(void 0===t.index){var n=x.xa._length,d=n*(1-t.y0/x.ya._length)/2,s=n-d;return t.x0=Math.max(Math.min(t.x0,s),d),t.x1=Math.max(Math.min(t.x1,s),d),r}var i=t.cd[t.index],u=t.trace,f=t.subplot;t.a=i.a,t.b=i.b,t.c=i.c,t.xLabelVal=void 0,t.yLabelVal=void 0;var p={};p[u.subplot]={_subplot:f};var y=u._module.formatLabels(i,u,p);t.aLabel=y.aLabel,t.bLabel=y.bLabel,t.cLabel=y.cLabel;var l=[];if(!u.hovertemplate){var w=(i.hi||u.hoverinfo).split("+");-1!==w.indexOf("all")&&(w=["a","b","c"]),-1!==w.indexOf("a")&&v(f.aaxis,t.aLabel),-1!==w.indexOf("b")&&v(f.baxis,t.bLabel),-1!==w.indexOf("c")&&v(f.caxis,t.cLabel)}return t.extraText=l.join("<br>"),t.hovertemplate=u.hovertemplate,r}function v(A,M){l.push(A._hovertitle+": "+M)}}},{"../scatter/hover":937}],1027:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../scatter/select"),eventData:_("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:_("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1021,"./calc":1022,"./defaults":1023,"./event_data":1024,"./format_labels":1025,"./hover":1026,"./plot":1028}],1028:[function(_,ae,ie){"use strict";var g=_("../scatter/plot");ae.exports=function(x,T,b){var e=T.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var r={xaxis:T.xaxis,yaxis:T.yaxis,plot:e,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},t=T.layers.frontplot.select("g.scatterlayer");g(x,r,b,t)}},{"../scatter/plot":947}],1029:[function(_,ae,ie){"use strict";var g=_("../scatter/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../scattergl/attributes"),r=_("../../plots/cartesian/constants").idRegex,t=_("../../plot_api/plot_template").templatedArray,a=_("../../lib/extend").extendFlat,n=g.marker,d=n.line,s=a(x("marker.line",{editTypeOverride:"calc"}),{width:a({},d.width,{editType:"calc"}),editType:"calc"}),i=a(x("marker"),{symbol:n.symbol,size:a({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:s,editType:"calc"});function u(f){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:r[f],editType:"plot"}}}i.color.editType=i.cmin.editType=i.cmax.editType="style",ae.exports={dimensions:t("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:a({},e.text,{}),hovertext:a({},e.hovertext,{}),hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),marker:i,xaxes:u("x"),yaxes:u("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergl/attributes":978}],1030:[function(_,ae,ie){"use strict";var g=_("regl-line2d"),x=_("../../registry"),T=_("../../lib/prepare_regl"),b=_("../../plots/get_data").getModuleCalcData,e=_("../../plots/cartesian"),r=_("../../plots/cartesian/axis_ids").getFromId,t=_("../../plots/cartesian/axes").shouldShowZeroLine;function a(d,s,i){for(var f=s._visibleDims,p=i.viewOpts.ranges=new Array(i.matrixOptions.data.length),y=0;y<f.length;y++){var m=f[y],l=p[y]=new Array(4),w=r(d,s._diag[m][0]);w&&(l[0]=w.r2l(w.range[0]),l[2]=w.r2l(w.range[1]));var v=r(d,s._diag[m][1]);v&&(l[1]=v.r2l(v.range[0]),l[3]=v.r2l(v.range[1]))}i.selectBatch.length||i.unselectBatch.length?i.matrix.update({ranges:p},{ranges:p}):i.matrix.update({ranges:p})}function n(d){var s=d._fullLayout,i=s._glcanvas.data()[0].regl,u=s._splomGrid;u||(u=s._splomGrid=g(i)),u.update(function(f){var p,y=f._context.plotGlPixelRatio,m=f._fullLayout,l=m._size,w=[0,0,m.width*y,m.height*y],v={};function A(Q,$,K,oe,j,H){K*=y,oe*=y,j*=y,H*=y;var G=$[Q+"color"],re=$[Q+"width"],q=String(G+re);q in v?v[q].data.push(NaN,NaN,K,oe,j,H):v[q]={data:[K,oe,j,H],join:"rect",thickness:re*y,color:G,viewport:w,range:w,overlay:!1}}for(p in m._splomSubplots){var M,k,E=m._plots[p],P=E.xaxis,S=E.yaxis,F=P._gridVals,R=S._gridVals,D=P._offset,L=P._length,B=S._length,V=l.b+S.domain[0]*l.h,Z=-S._m,Y=-Z*S.r2l(S.range[0],S.calendar);if(P.showgrid)for(p=0;p<F.length;p++)M=D+P.l2p(F[p].x),A("grid",P,M,V,M,V+B);if(S.showgrid)for(p=0;p<R.length;p++)A("grid",S,D,k=V+Y+Z*R[p].x,D+L,k);t(f,P,S)&&(M=D+P.l2p(0),A("zeroline",P,M,V,M,V+B)),t(f,S,P)&&A("zeroline",S,D,k=V+Y+0,D+L,k)}var ee=[];for(p in v)ee.push(v[p]);return ee}(d))}ae.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(d){var s=d._fullLayout,i=x.getModule("splom"),u=b(d.calcdata,i)[0];T(d,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(s._hasOnlyLargeSploms&&n(d),i.plot(d,{},u))},drag:function(d){var s=d.calcdata,i=d._fullLayout;i._hasOnlyLargeSploms&&n(d);for(var u=0;u<s.length;u++){var f=s[u][0].trace,p=i._splomScenes[f.uid];"splom"===f.type&&p&&p.matrix&&a(d,f,p)}},updateGrid:n,clean:function(d,s,i,u){var f,p={};if(u._splomScenes){for(f=0;f<d.length;f++){var y=d[f];"splom"===y.type&&(p[y.uid]=1)}for(f=0;f<i.length;f++){var m=i[f];if(!p[m.uid]){var l=u._splomScenes[m.uid];l&&l.destroy&&l.destroy(),u._splomScenes[m.uid]=null,delete u._splomScenes[m.uid]}}}0===Object.keys(u._splomScenes||{}).length&&delete u._splomScenes,u._splomGrid&&!s._hasOnlyLargeSploms&&u._hasOnlyLargeSploms&&(u._splomGrid.destroy(),u._splomGrid=null,delete u._splomGrid),e.clean(d,s,i,u)},updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1031:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axis_ids"),T=_("../scatter/calc").calcMarkerSize,b=_("../scatter/calc").calcAxisExpansion,e=_("../scatter/colorscale_calc"),r=_("../scattergl/convert").markerSelection,t=_("../scattergl/convert").markerStyle,a=_("./scene_update"),n=_("../../constants/numerical").BADNUM,d=_("../scattergl/constants").TOO_MANY_POINTS;ae.exports=function(s,i){var u,f,p,y,m,l,w=i.dimensions,v=i._length,A={},M=A.cdata=[],k=A.data=[],E=i._visibleDims=[];function P(F,R){for(var D=F.makeCalcdata({v:R.values,vcalendar:i.calendar},"v"),L=0;L<D.length;L++)D[L]=D[L]===n?NaN:D[L];M.push(D),k.push("log"===F.type?g.simpleMap(D,F.c2l):D)}for(u=0;u<w.length;u++)if((p=w[u]).visible){if(y=x.getFromId(s,i._diag[u][0]),m=x.getFromId(s,i._diag[u][1]),y&&m&&y.type!==m.type){g.log("Skipping splom dimension "+u+" with conflicting axis types");continue}y?(P(y,p),m&&"category"===m.type&&(m._categories=y._categories.slice())):P(m,p),E.push(u)}for(e(s,i),g.extendFlat(A,t(i)),l=M.length*v>d?A.sizeAvg||Math.max(A.size,3):T(i,v),f=0;f<E.length;f++)p=w[u=E[f]],y=x.getFromId(s,i._diag[u][0])||{},m=x.getFromId(s,i._diag[u][1])||{},b(s,i,y,m,M[f],M[f],l);var S=a(s,i);return S.matrix||(S.matrix=!0),S.matrixOptions=A,S.selectedOptions=r(i,i.selected),S.unselectedOptions=r(i,i.unselected),[{x:!1,y:!1,t:{},trace:i}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981,"./scene_update":1038}],1032:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/array_container_defaults"),T=_("./attributes"),b=_("../scatter/subtypes"),e=_("../scatter/marker_defaults"),r=_("../parcoords/merge_length"),t=_("../scattergl/helpers").isOpenSymbol;function a(n,d){function s(u,f){return g.coerce(n,d,T.dimensions,u,f)}s("label");var i=s("values");i&&i.length?s("visible"):d.visible=!1,s("axis.type"),s("axis.matches")}ae.exports=function(n,d,s,i){function u(v,A){return g.coerce(n,d,T,v,A)}var f=x(n,d,{name:"dimensions",handleItemDefaults:a}),p=u("diagonal.visible"),y=u("showupperhalf"),m=u("showlowerhalf");if(r(d,f,"values")&&(p||y||m)){u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),e(n,d,s,i,u);var l=t(d.marker.symbol),w=b.isBubble(d);u("marker.line.width",l||w?1:0),function(v,A,M,k){var E,P,S=A.dimensions,F=S.length,R=A.showupperhalf,D=A.showlowerhalf,L=A.diagonal.visible,B=new Array(F),V=new Array(F);for(E=0;E<F;E++){var Z=E?E+1:"";B[E]="x"+Z,V[E]="y"+Z}var Y=k("xaxes",B),ee=k("yaxes",V),Q=A._diag=new Array(F);A._xaxes={},A._yaxes={};var $=[],K=[];function oe(ue,de,he,be){if(ue){var ge=ue.charAt(0),we=M._splomAxes[ge];if(A["_"+ge+"axes"][ue]=1,be.push(ue),!(ue in we)){var ke=we[ue]={};he&&(ke.label=he.label||"",he.visible&&he.axis&&(he.axis.type&&(ke.type=he.axis.type),he.axis.matches&&(ke.matches=de)))}}}var j=!L&&!D,H=!L&&!R;for(A._axesDim={},E=0;E<F;E++){var G=S[E],re=0===E,q=E===F-1,te=re&&j||q&&H?void 0:Y[E],ne=re&&H||q&&j?void 0:ee[E];oe(te,ne,G,$),oe(ne,te,G,K),Q[E]=[te,ne],A._axesDim[te]=E,A._axesDim[ne]=E}for(E=0;E<$.length;E++)for(P=0;P<K.length;P++){var le=$[E]+K[P];E>P&&R||E<P&&D?M._splomSubplots[le]=1:E!==P||!L&&D&&R||(M._splomSubplots[le]=1)}(!D||!L&&R&&D)&&(M._splomGridDflt.xside="bottom",M._splomGridDflt.yside="left")}(0,d,i,u),g.coerceSelectionMarkerOpacity(d,u)}else d.visible=!1}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":897,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scattergl/helpers":985,"./attributes":1029}],1033:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../scatter/colorscale_calc"),T=_("../scattergl/convert").markerStyle;ae.exports=function(b,e){var r=e.trace,t=b._fullLayout._splomScenes[r.uid];if(t){x(b,r),g.extendFlat(t.matrixOptions,T(r));var a=g.extendFlat({},t.matrixOptions,t.viewOpts);t.matrix.update(a,null)}}},{"../../lib":503,"../scatter/colorscale_calc":929,"../scattergl/convert":981}],1034:[function(_,ae,ie){"use strict";ie.getDimIndex=function(g,x){for(var T=x._id,b={x:0,y:1}[T.charAt(0)],e=g._visibleDims,r=0;r<e.length;r++)if(g._diag[e[r]][b]===T)return r;return!1}},{}],1035:[function(_,ae,ie){"use strict";var g=_("./helpers"),x=_("../scattergl/hover").calcHover;ae.exports={hoverPoints:function(T,b,e){var r=T.cd[0].trace,t=T.scene.matrixOptions.cdata,a=T.xa,n=T.ya,d=a.c2p(b),s=n.c2p(e),i=T.distance,u=g.getDimIndex(r,a),f=g.getDimIndex(r,n);if(!1===u||!1===f)return[T];for(var p,y,m=t[u],l=t[f],w=i,v=0;v<m.length;v++){var M=l[v],k=a.c2p(m[v])-d,E=n.c2p(M)-s,P=Math.sqrt(k*k+E*E);P<w&&(w=y=P,p=v)}return T.index=p,T.distance=w,T.dxy=y,void 0===p?[T]:[x(T,m,l,r)]}}},{"../scattergl/hover":986,"./helpers":1034}],1036:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../components/grid");ae.exports={moduleType:"trace",name:"splom",basePlotModule:_("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),calc:_("./calc"),plot:_("./plot"),hoverPoints:_("./hover").hoverPoints,selectPoints:_("./select"),editStyle:_("./edit_style"),meta:{}},g.register(x)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":944,"./attributes":1029,"./base_plot":1030,"./calc":1031,"./defaults":1032,"./edit_style":1033,"./hover":1035,"./plot":1037,"./select":1039}],1037:[function(_,ae,ie){"use strict";var g=_("regl-splom"),x=_("../../lib"),T=_("../../plots/cartesian/axis_ids"),b=_("../../components/dragelement/helpers").selectMode;function e(r,t){var a,n,d,s,i,u=r._fullLayout,f=u._size,p=t.trace,y=t.t,m=u._splomScenes[p.uid],l=m.matrixOptions,w=l.cdata,v=u._glcanvas.data()[0].regl,A=u.dragmode;if(0!==w.length){l.lower=p.showupperhalf,l.upper=p.showlowerhalf,l.diagonal=p.diagonal.visible;var M=p._visibleDims,k=w.length,E=m.viewOpts={};for(E.ranges=new Array(k),E.domains=new Array(k),i=0;i<M.length;i++){d=M[i];var P=E.ranges[i]=new Array(4),S=E.domains[i]=new Array(4);(a=T.getFromId(r,p._diag[d][0]))&&(P[0]=a._rl[0],P[2]=a._rl[1],S[0]=a.domain[0],S[2]=a.domain[1]),(n=T.getFromId(r,p._diag[d][1]))&&(P[1]=n._rl[0],P[3]=n._rl[1],S[1]=n.domain[0],S[3]=n.domain[1])}var F=r._context.plotGlPixelRatio,R=f.l*F,D=f.b*F;E.viewport=[R,D,f.w*F+R,f.h*F+D],!0===m.matrix&&(m.matrix=g(v));var V=u.clickmode.indexOf("select")>-1,Z=!0;if(b(A)||p.selectedpoints||V){var Y=p._length;if(p.selectedpoints){m.selectBatch=p.selectedpoints;var ee=p.selectedpoints,Q={};for(d=0;d<ee.length;d++)Q[ee[d]]=!0;var $=[];for(d=0;d<Y;d++)Q[d]||$.push(d);m.unselectBatch=$}var K=y.xpx=new Array(k),oe=y.ypx=new Array(k);for(i=0;i<M.length;i++){if(a=T.getFromId(r,p._diag[d=M[i]][0]))for(K[i]=new Array(Y),s=0;s<Y;s++)K[i][s]=a.c2p(w[i][s]);if(n=T.getFromId(r,p._diag[d][1]))for(oe[i]=new Array(Y),s=0;s<Y;s++)oe[i][s]=n.c2p(w[i][s])}if(m.selectBatch.length||m.unselectBatch.length){var j=x.extendFlat({},l,m.unselectedOptions,E),H=x.extendFlat({},l,m.selectedOptions,E);m.matrix.update(j,H),Z=!1}}else y.xpx=y.ypx=null;if(Z){var G=x.extendFlat({},l,E);m.matrix.update(G,null)}}}ae.exports=function(r,t,a){if(a.length)for(var n=0;n<a.length;n++)e(r,a[n][0])}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1038:[function(_,ae,ie){"use strict";var g=_("../../lib");ae.exports=function(x,T){var b=x._fullLayout,e=T.uid,r=b._splomScenes;r||(r=b._splomScenes={});var t={dirty:!0,selectBatch:[],unselectBatch:[]},a=r[T.uid];return a||((a=r[e]=g.extendFlat({},t,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){a.matrix&&a.matrix.draw&&(a.selectBatch.length||a.unselectBatch.length?a.matrix.draw(a.unselectBatch,a.selectBatch):a.matrix.draw()),a.dirty=!1},a.destroy=function(){a.matrix&&a.matrix.destroy&&a.matrix.destroy(),a.matrixOptions=null,a.selectBatch=null,a.unselectBatch=null,a=null}),a.dirty||g.extendFlat(a,t),a}},{"../../lib":503}],1039:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../scatter/subtypes"),T=_("./helpers");ae.exports=function(b,e){var r=b.cd,t=r[0].trace,a=r[0].t,n=b.scene,d=n.matrixOptions.cdata,s=b.xaxis,i=b.yaxis,u=[];if(!n)return u;var f=!x.hasMarkers(t)&&!x.hasText(t);if(!0!==t.visible||f)return u;var p=T.getDimIndex(t,s),y=T.getDimIndex(t,i);if(!1===p||!1===y)return u;var m=a.xpx[p],l=a.ypx[y],w=d[p],v=d[y],A=[],M=[];if(!1!==e&&!e.degenerate)for(var k=0;k<w.length;k++)e.contains([m[k],l[k]],null,k,b)?(A.push(k),u.push({pointNumber:k,x:w[k],y:v[k]})):M.push(k);var E=n.matrixOptions;return A.length||M.length?n.selectBatch.length||n.unselectBatch.length||n.matrix.update(n.unselectedOptions,g.extendFlat({},E,n.selectedOptions,n.viewOpts)):n.matrix.update(E,null),n.selectBatch=A,n.unselectBatch=M,u}},{"../../lib":503,"../scatter/subtypes":951,"./helpers":1034}],1040:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../mesh3d/attributes"),e=_("../../plots/attributes"),r=_("../../lib/extend").extendFlat,t={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:T({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:x("u",1),vhoverformat:x("v",1),whoverformat:x("w",1),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),showlegend:r({},e.showlegend,{dflt:!1})};r(t,g("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(a){t[a]=b[a]}),t.hoverinfo=r({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),t.transforms=void 0,ae.exports=t},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1041:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/colorscale/calc");function T(r){var t,a,n,d,s,i,u,f,p,y,m,l,w=r._x,v=r._y,A=r._z,M=r._len,k=-1/0,E=1/0,P=-1/0,S=1/0,F=-1/0,R=1/0,D="";for(M&&(u=w[0],p=v[0],m=A[0]),M>1&&(f=w[M-1],y=v[M-1],l=A[M-1]),t=0;t<M;t++)k=Math.max(k,w[t]),E=Math.min(E,w[t]),P=Math.max(P,v[t]),S=Math.min(S,v[t]),F=Math.max(F,A[t]),R=Math.min(R,A[t]),d||w[t]===u||(d=!0,D+="x"),s||v[t]===p||(s=!0,D+="y"),i||A[t]===m||(i=!0,D+="z");d||(D+="x"),s||(D+="y"),i||(D+="z");var L=b(r._x),B=b(r._y),V=b(r._z);D=(D=(D=D.replace("x",(u>f?"-":"+")+"x")).replace("y",(p>y?"-":"+")+"y")).replace("z",(m>l?"-":"+")+"z");var Z=function(){M=0,L=[],B=[],V=[]};(!M||M<L.length*B.length*V.length)&&Z();var Y=function(ge){return"x"===ge?w:"y"===ge?v:A},ee=function(ge){return"x"===ge?L:"y"===ge?B:V},Q=function(ge){return ge[M-1]<ge[0]?-1:1},$=Y(D[1]),K=Y(D[3]),oe=Y(D[5]),j=ee(D[1]).length,H=ee(D[3]).length,G=ee(D[5]).length,re=!1,q=function(ge,we,ke){return j*(H*ge+we)+ke},te=Q(Y(D[1])),ne=Q(Y(D[3])),le=Q(Y(D[5]));for(t=0;t<G-1;t++){for(a=0;a<H-1;a++){for(n=0;n<j-1;n++){var ue=q(t,a,n),de=q(t,a,n+1),he=q(t,a+1,n),be=q(t+1,a,n);if($[ue]*te<$[de]*te&&K[ue]*ne<K[he]*ne&&oe[ue]*le<oe[be]*le||(re=!0),re)break}if(re)break}if(re)break}return re&&(g.warn("Encountered arbitrary coordinates! Unable to input data grid."),Z()),{xMin:E,yMin:S,zMin:R,xMax:k,yMax:P,zMax:F,Xs:L,Ys:B,Zs:V,len:M,fill:D}}function b(r){return g.distinctVals(r).vals}function e(r,t){if(void 0===t&&(t=r.length),g.isTypedArray(r))return r.subarray(0,t);for(var a=[],n=0;n<t;n++)a[n]=+r[n];return a}ae.exports={calc:function(r,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=e(t.u,t._len),t._v=e(t.v,t._len),t._w=e(t.w,t._len),t._x=e(t.x,t._len),t._y=e(t.y,t._len),t._z=e(t.z,t._len);var a=T(t);t._gridFill=a.fill,t._Xs=a.Xs,t._Ys=a.Ys,t._Zs=a.Zs,t._len=a.len;var n,d,s,i=0;t.starts&&(n=e(t.starts.x||[]),d=e(t.starts.y||[]),s=e(t.starts.z||[]),i=Math.min(n.length,d.length,s.length)),t._startsX=n||[],t._startsY=d||[],t._startsZ=s||[];var u,f=0,p=1/0;for(u=0;u<t._len;u++){var y=t._u[u],m=t._v[u],l=t._w[u],w=Math.sqrt(y*y+m*m+l*l);f=Math.max(f,w),p=Math.min(p,w)}for(x(r,t,{vals:[p,f],containerStr:"",cLetter:"c"}),u=0;u<i;u++){var v=n[u];a.xMax=Math.max(a.xMax,v),a.xMin=Math.min(a.xMin,v);var A=d[u];a.yMax=Math.max(a.yMax,A),a.yMin=Math.min(a.yMin,A);var M=s[u];a.zMax=Math.max(a.zMax,M),a.zMin=Math.min(a.zMin,M)}t._slen=i,t._normMax=f,t._xbnds=[a.xMin,a.xMax],t._ybnds=[a.yMin,a.yMax],t._zbnds=[a.zMin,a.zMax]},filter:e,processGrid:T}},{"../../components/colorscale/calc":374,"../../lib":503}],1042:[function(_,ae,ie){"use strict";var g=_("../../../stackgl_modules").gl_streamtube3d,x=g.createTubeMesh,T=_("../../lib"),b=_("../../lib/gl_format_color").parseColorScale,e=_("../../components/colorscale").extractOpts,r=_("../../plots/gl3d/zip3"),t={xaxis:0,yaxis:1,zaxis:2};function a(u,f){this.scene=u,this.uid=f,this.mesh=null,this.data=null}var n=a.prototype;function d(u){var f=u.length;return f>2?u.slice(1,f-1):2===f?[(u[0]+u[1])/2]:u}function s(u){var f=u.length;return 1===f?[.5,.5]:[u[1]-u[0],u[f-1]-u[f-2]]}function i(u,f){var p=u.fullSceneLayout,y=u.dataScale,m=f._len,l={};function w(j,H){var G=p[H],re=y[t[H]];return T.simpleMap(j,function(q){return G.d2l(q)*re})}if(l.vectors=r(w(f._u,"xaxis"),w(f._v,"yaxis"),w(f._w,"zaxis"),m),!m)return{positions:[],cells:[]};var v=w(f._Xs,"xaxis"),A=w(f._Ys,"yaxis"),M=w(f._Zs,"zaxis");if(l.meshgrid=[v,A,M],l.gridFill=f._gridFill,f._slen)l.startingPositions=r(w(f._startsX,"xaxis"),w(f._startsY,"yaxis"),w(f._startsZ,"zaxis"));else{for(var k=A[0],E=d(v),P=d(M),S=new Array(E.length*P.length),F=0,R=0;R<E.length;R++)for(var D=0;D<P.length;D++)S[F++]=[E[R],k,P[D]];l.startingPositions=S}l.colormap=b(f),l.tubeSize=f.sizeref,l.maxLength=f.maxdisplayed;var L=w(f._xbnds,"xaxis"),B=w(f._ybnds,"yaxis"),V=w(f._zbnds,"zaxis"),Z=s(v),Y=s(A),ee=s(M),$=g(l,[[L[0]-Z[0],B[0]-Y[0],V[0]-ee[0]],[L[1]+Z[1],B[1]+Y[1],V[1]+ee[1]]]),K=e(f);$.vertexIntensityBounds=[K.min/f._normMax,K.max/f._normMax];var oe=f.lightposition;return $.lightPosition=[oe.x,oe.y,oe.z],$.ambient=f.lighting.ambient,$.diffuse=f.lighting.diffuse,$.specular=f.lighting.specular,$.roughness=f.lighting.roughness,$.fresnel=f.lighting.fresnel,$.opacity=f.opacity,f._pad=$.tubeScale*f.sizeref*2,$}n.handlePick=function(u){var f=this.scene.fullSceneLayout,p=this.scene.dataScale;function y(w,v){var M=p[t[v]];return f[v].l2c(w)/M}if(u.object===this.mesh){var m=u.data.position,l=u.data.velocity;return u.traceCoordinate=[y(m[0],"xaxis"),y(m[1],"yaxis"),y(m[2],"zaxis"),y(l[0],"xaxis"),y(l[1],"yaxis"),y(l[2],"zaxis"),u.data.intensity*this.data._normMax,u.data.divergence],u.textLabel=this.data.hovertext||this.data.text,!0}},n.update=function(u){this.data=u;var f=i(this.scene,u);this.mesh.update(f)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ae.exports=function(u,f){var p=u.glplot.gl,y=i(u,f),m=x(p,y),l=new a(u,f.uid);return l.mesh=m,l.data=f,m._trace=l,u.glplot.add(m),l}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1043:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");ae.exports=function(b,e,r,t){function a(p,y){return g.coerce(b,e,T,p,y)}var n=a("u"),d=a("v"),s=a("w"),i=a("x"),u=a("y"),f=a("z");n&&n.length&&d&&d.length&&s&&s.length&&i&&i.length&&u&&u.length&&f&&f.length?(a("starts.x"),a("starts.y"),a("starts.z"),a("maxdisplayed"),a("sizeref"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),x(b,e,t,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1040}],1044:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"streamtube",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:_("./calc").calc,plot:_("./convert"),eventData:function(g,x){return g.tubex=g.x,g.tubey=g.y,g.tubez=g.z,g.tubeu=x.traceCoordinate[3],g.tubev=x.traceCoordinate[4],g.tubew=x.traceCoordinate[5],g.norm=x.traceCoordinate[6],g.divergence=x.traceCoordinate[7],delete g.x,delete g.y,delete g.z,g},meta:{}}},{"../../plots/gl3d":598,"./attributes":1040,"./calc":1041,"./convert":1042,"./defaults":1043}],1045:[function(_,ae,ie){"use strict";var g=_("../../plots/attributes"),x=_("../../plots/template_attributes").hovertemplateAttrs,T=_("../../plots/template_attributes").texttemplateAttrs,b=_("../../components/colorscale/attributes"),e=_("../../plots/domain").attributes,r=_("../pie/attributes"),t=_("./constants"),a=_("../../lib/extend").extendFlat;ae.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:a({colors:{valType:"data_array",editType:"calc"},line:{color:a({},r.marker.line.color,{dflt:null}),width:a({},r.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:r.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:T({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:r.hovertext,hoverinfo:a({},g.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:x({},{keys:t.eventDataKeys}),textfont:r.textfont,insidetextorientation:r.insidetextorientation,insidetextfont:r.insidetextfont,outsidetextfont:a({},r.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:r.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"./constants":1048}],1046:[function(_,ae,ie){"use strict";var g=_("../../plots/plots");ie.name="sunburst",ie.plot=function(x,T,b,e){g.plotBasePlot(ie.name,x,T,b,e)},ie.clean=function(x,T,b,e){g.cleanBasePlot(ie.name,x,T,b,e)}},{"../../plots/plots":619}],1047:[function(_,ae,ie){"use strict";var g=_("d3-hierarchy"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../components/colorscale").makeColorScaleFuncFromTrace,e=_("../pie/calc").makePullColorFn,r=_("../pie/calc").generateExtendedColors,t=_("../../components/colorscale").calc,a=_("../../constants/numerical").ALMOST_EQUAL,n={},d={},s={};ie.calc=function(i,u){var f,p,y,m,l,w,v=i._fullLayout,A=u.ids,M=T.isArrayOrTypedArray(A),k=u.labels,E=u.parents,P=u.values,S=T.isArrayOrTypedArray(P),F=[],R={},D={},L=function(ne){return ne||"number"==typeof ne},B=function(ne){return!S||x(P[ne])&&P[ne]>=0};M?(f=Math.min(A.length,E.length),p=function(ne){return L(A[ne])&&B(ne)},y=function(ne){return String(A[ne])}):(f=Math.min(k.length,E.length),p=function(ne){return L(k[ne])&&B(ne)},y=function(ne){return String(k[ne])}),S&&(f=Math.min(f,P.length));for(var V=0;V<f;V++)if(p(V)){var Z=y(V),Y=L(E[V])?String(E[V]):"",ee={i:V,id:Z,pid:Y,label:L(k[V])?String(k[V]):""};S&&(ee.v=+P[V]),F.push(ee),l=Z,R[m=Y]?R[m].push(l):R[m]=[l],D[l]=1}if(R[""]){if(R[""].length>1){for(var Q=T.randstr(),$=0;$<F.length;$++)""===F[$].pid&&(F[$].pid=Q);F.unshift({hasMultipleRoots:!0,id:Q,pid:"",label:""})}}else{var K,oe=[];for(K in R)D[K]||oe.push(K);if(1!==oe.length)return T.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",oe.join(", ")].join(" "));F.unshift({hasImpliedRoot:!0,id:K=oe[0],pid:"",label:K})}try{w=g.stratify().id(function(ne){return ne.id}).parentId(function(ne){return ne.pid})(F)}catch(ne){return T.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",ne.message].join(" "))}var j=g.hierarchy(w),H=!1;if(S)switch(u.branchvalues){case"remainder":j.sum(function(ne){return ne.data.v});break;case"total":j.each(function(ne){var le=ne.data.data,ue=le.v;if(ne.children){var de=ne.children.reduce(function(he,be){return he+be.data.data.v},0);if((le.hasImpliedRoot||le.hasMultipleRoots)&&(ue=de),ue<de*a)return H=!0,T.warn(["Total value for node",ne.data.data.id,"of",u.name,"is smaller than the sum of its children.","\nparent value =",ue,"\nchildren sum =",de].join(" "))}ne.value=ue})}else!function ne(le,ue,de){var he=0,be=le.children;if(be){for(var ge=be.length,we=0;we<ge;we++)he+=ne(be[we],ue,de);de.branches&&he++}else de.leaves&&he++;return le.value=le.data.data.value=he,ue._values||(ue._values=[]),ue._values[le.data.data.i]=he,he}(j,u,{branches:-1!==u.count.indexOf("branches"),leaves:-1!==u.count.indexOf("leaves")});if(!H){var G,re;u.sort&&j.sort(function(ne,le){return le.value-ne.value});var q=u.marker.colors||[];return u._hasColorscale?(!!q.length||(q=S?u.values:u._values),t(i,u,{vals:q,containerStr:"marker",cLetter:"c"}),re=b(u.marker)):G=e(v["_"+u.type+"colormap"]),j.each(function(ne){var le=ne.data.data;le.color=u._hasColorscale?re(q[le.i]):G(q[le.i],le.id)}),F[0].hierarchy=j,F}},ie._runCrossTraceCalc=function(i,u){var f=u._fullLayout,p=u.calcdata,y=f[i+"colorway"],m=f["_"+i+"colormap"];f["extend"+i+"colors"]&&(y=r(y,"icicle"===i?s:"treemap"===i?d:n));var l,w=0;function v(k){var E=k.data.data,P=E.id;!1===E.color&&(m[P]?E.color=m[P]:k.parent?k.parent.parent?E.color=k.parent.data.data.color:(m[P]=E.color=y[w%y.length],w++):E.color=l)}for(var A=0;A<p.length;A++){var M=p[A][0];M.trace.type===i&&M.hierarchy&&(l=M.trace.root.color,M.hierarchy.each(v))}},ie.crossTraceCalc=function(i){return ie._runCrossTraceCalc("sunburst",i)}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":902,"d3-hierarchy":115,"fast-isnumeric":190}],1048:[function(_,ae,ie){"use strict";ae.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1049:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults,b=_("../bar/defaults").handleText,e=_("../../components/colorscale"),r=e.hasColorscale,t=e.handleDefaults;ae.exports=function(a,n,d,s){function i(l,w){return g.coerce(a,n,x,l,w)}var u=i("labels"),f=i("parents");if(u&&u.length&&f&&f.length){var p=i("values");i(p&&p.length?"branchvalues":"count"),i("level"),i("maxdepth"),i("marker.line.width")&&i("marker.line.color",s.paper_bgcolor),i("marker.colors");var y=n._hasColorscale=r(a,"marker","colors")||(a.marker||{}).coloraxis;y&&t(a,n,s,i,{prefix:"marker.",cLetter:"c"}),i("leaf.opacity",y?1:.7);var m=i("text");i("texttemplate"),n.texttemplate||i("textinfo",Array.isArray(m)?"text+label":"label"),i("hovertext"),i("hovertemplate"),b(a,n,s,i,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),i("insidetextorientation"),i("sort"),i("rotation"),i("root.color"),T(n,s,i),n._length=null}else n.visible=!1}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1045}],1050:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../registry"),T=_("../../components/fx/helpers").appendArrayPointValue,b=_("../../components/fx"),e=_("../../lib"),r=_("../../lib/events"),t=_("./helpers"),a=_("../pie/helpers").formatPieValue;function n(d,s,i){for(var u=d.data.data,f={curveNumber:s.index,pointNumber:u.i,data:s._input,fullData:s},p=0;p<i.length;p++){var y=i[p];y in d&&(f[y]=d[y])}return"parentString"in d&&!t.isHierarchyRoot(d)&&(f.parent=d.parentString),T(f,s,u.i),f}ae.exports=function(d,s,i,u,f){var p=u[0],y=p.trace,m=p.hierarchy,l="sunburst"===y.type,w="treemap"===y.type||"icicle"===y.type;"_hasHoverLabel"in y||(y._hasHoverLabel=!1),"_hasHoverEvent"in y||(y._hasHoverEvent=!1),d.on("mouseover",function(v){var A=i._fullLayout;if(!i._dragging&&!1!==A.hovermode){var M,k=i._fullData[y.index],E=v.data.data,P=E.i,S=t.isHierarchyRoot(v),F=t.getParent(m,v),R=t.getValue(v),D=function(te){return e.castOption(k,P,te)},L=D("hovertemplate"),B=b.castHoverinfo(k,A,P),V=A.separators;if(L||B&&"none"!==B&&"skip"!==B){var Z,Y;l&&(Z=p.cx+v.pxmid[0]*(1-v.rInscribed),Y=p.cy+v.pxmid[1]*(1-v.rInscribed)),w&&(Z=v._hoverX,Y=v._hoverY);var ee,Q={},$=[],K=[],oe=function(te){return-1!==$.indexOf(te)};B&&($="all"===B?k._module.attributes.hoverinfo.flags:B.split("+")),Q.label=E.label,oe("label")&&Q.label&&K.push(Q.label),E.hasOwnProperty("v")&&(Q.value=E.v,Q.valueLabel=a(Q.value,V),oe("value")&&K.push(Q.valueLabel)),Q.currentPath=v.currentPath=t.getPath(v.data),oe("current path")&&!S&&K.push(Q.currentPath);var j=[],H=function(){-1===j.indexOf(ee)&&(K.push(ee),j.push(ee))};Q.percentParent=v.percentParent=R/t.getValue(F),Q.parent=v.parentString=t.getPtLabel(F),oe("percent parent")&&(ee=t.formatPercent(Q.percentParent,V)+" of "+Q.parent,H()),Q.percentEntry=v.percentEntry=R/t.getValue(s),Q.entry=v.entry=t.getPtLabel(s),!oe("percent entry")||S||v.onPathbar||(ee=t.formatPercent(Q.percentEntry,V)+" of "+Q.entry,H()),Q.percentRoot=v.percentRoot=R/t.getValue(m),Q.root=v.root=t.getPtLabel(m),oe("percent root")&&!S&&(ee=t.formatPercent(Q.percentRoot,V)+" of "+Q.root,H()),Q.text=D("hovertext")||D("text"),oe("text")&&e.isValidTextValue(ee=Q.text)&&K.push(ee),M=[n(v,k,f.eventDataKeys)];var G={trace:k,y:Y,_x0:v._x0,_x1:v._x1,_y0:v._y0,_y1:v._y1,text:K.join("<br>"),name:L||oe("name")?k.name:void 0,color:D("hoverlabel.bgcolor")||E.color,borderColor:D("hoverlabel.bordercolor"),fontFamily:D("hoverlabel.font.family"),fontSize:D("hoverlabel.font.size"),fontColor:D("hoverlabel.font.color"),nameLength:D("hoverlabel.namelength"),textAlign:D("hoverlabel.align"),hovertemplate:L,hovertemplateLabels:Q,eventData:M};l&&(G.x0=Z-v.rInscribed*v.rpx1,G.x1=Z+v.rInscribed*v.rpx1,G.idealAlign=v.pxmid[0]<0?"left":"right"),w&&(G.x=Z,G.idealAlign=Z<0?"left":"right");var re=[];b.loneHover(G,{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:i,inOut_bbox:re}),M[0].bbox=re[0],y._hasHoverLabel=!0}if(w){var q=d.select("path.surface");f.styleOne(q,v,k,{hovered:!0})}y._hasHoverEvent=!0,i.emit("plotly_hover",{points:M||[n(v,k,f.eventDataKeys)],event:g.event})}}),d.on("mouseout",function(v){var A=i._fullLayout,M=i._fullData[y.index],k=g.select(this).datum();if(y._hasHoverEvent&&(v.originalEvent=g.event,i.emit("plotly_unhover",{points:[n(k,M,f.eventDataKeys)],event:g.event}),y._hasHoverEvent=!1),y._hasHoverLabel&&(b.loneUnhover(A._hoverlayer.node()),y._hasHoverLabel=!1),w){var E=d.select("path.surface");f.styleOne(E,k,M,{hovered:!1})}}),d.on("click",function(v){var A=i._fullLayout,M=i._fullData[y.index],k=l&&(t.isHierarchyRoot(v)||t.isLeaf(v)),E=t.getPtId(v),P=t.isEntry(v)?t.findEntryWithChild(m,E):t.findEntryWithLevel(m,E),S=t.getPtId(P),F={points:[n(v,M,f.eventDataKeys)],event:g.event};k||(F.nextLevel=S);var R=r.triggerHandler(i,"plotly_"+y.type+"click",F);if(!1!==R&&A.hovermode&&(i._hoverdata=[n(v,M,f.eventDataKeys)],b.click(i,g.event)),!k&&!1!==R&&!i._dragging&&!i._transitioning){x.call("_storeDirectGUIEdit",M,A._tracePreGUI[M.uid],{level:M.level});var D={data:[{level:S}],traces:[y.index]},L={frame:{redraw:!1,duration:f.transitionTime},transition:{duration:f.transitionTime,easing:f.transitionEasing},mode:"immediate",fromcurrent:!0};b.loneUnhover(A._hoverlayer.node()),x.call("animate",i,D,L)}})}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":905,"./helpers":1051,"@plotly/d3":58}],1051:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/color"),T=_("../../lib/setcursor"),b=_("../pie/helpers");function e(r){return r.data.data.pid}ie.findEntryWithLevel=function(r,t){var a;return t&&r.eachAfter(function(n){if(ie.getPtId(n)===t)return a=n.copy()}),a||r},ie.findEntryWithChild=function(r,t){var a;return r.eachAfter(function(n){for(var d=n.children||[],s=0;s<d.length;s++)if(ie.getPtId(d[s])===t)return a=n.copy()}),a||r},ie.isEntry=function(r){return!r.parent},ie.isLeaf=function(r){return!r.children},ie.getPtId=function(r){return r.data.data.id},ie.getPtLabel=function(r){return r.data.data.label},ie.getValue=function(r){return r.value},ie.isHierarchyRoot=function(r){return""===e(r)},ie.setSliceCursor=function(r,t,a){var n=a.isTransitioning;if(!n){var d=r.datum();n=a.hideOnRoot&&ie.isHierarchyRoot(d)||a.hideOnLeaves&&ie.isLeaf(d)}T(r,n?null:"pointer")},ie.getInsideTextFontKey=function(r,t,a,n,d){var i=a.data.data.i;return g.castOption(t,i,((d||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+r)||g.castOption(t,i,"textfont."+r)||n.size},ie.getOutsideTextFontKey=function(r,t,a,n){var d=a.data.data.i;return g.castOption(t,d,"outsidetextfont."+r)||g.castOption(t,d,"textfont."+r)||n.size},ie.isOutsideText=function(r,t){return!r._hasColorscale&&ie.isHierarchyRoot(t)},ie.determineTextFont=function(r,t,a,n){return ie.isOutsideText(r,t)?{color:ie.getOutsideTextFontKey("color",d=r,s=t,i=a),family:ie.getOutsideTextFontKey("family",d,s,i),size:ie.getOutsideTextFontKey("size",d,s,i)}:function(d,s,i,u){var p=s.data.data,y=p.i,m=g.castOption(d,y,((u||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!m&&d._input.textfont&&(m=g.castOption(d._input,y,"textfont.color")),{color:m||x.contrast(p.color),family:ie.getInsideTextFontKey("family",d,s,i,u),size:ie.getInsideTextFontKey("size",d,s,i,u)}}(r,t,a,n);var d,s,i},ie.hasTransition=function(r){return!!(r&&r.duration>0)},ie.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},ie.isHeader=function(r,t){return!(ie.isLeaf(r)||r.depth===t._maxDepth-1)},ie.getParent=function(r,t){return ie.findEntryWithLevel(r,e(t))},ie.listPath=function(r,t){var a=r.parent;if(!a)return[];var n=t?[a.data[t]]:[a];return ie.listPath(a,t).concat(n)},ie.getPath=function(r){return ie.listPath(r,"label").join("/")+"/"},ie.formatValue=b.formatPieValue,ie.formatPercent=function(r,t){var a=g.formatPercent(r,0);return"0%"===a&&(a=b.formatPiePercent(r,t)),a}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":905}],1052:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"sunburst",basePlotModule:_("./base_plot"),categories:[],animatable:!0,attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot").plot,style:_("./style").style,colorbar:_("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1045,"./base_plot":1046,"./calc":1047,"./defaults":1049,"./layout_attributes":1053,"./layout_defaults":1054,"./plot":1055,"./style":1056}],1053:[function(_,ae,ie){"use strict";ae.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1054:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes");ae.exports=function(T,b){function e(r,t){return g.coerce(T,b,x,r,t)}e("sunburstcolorway",b.colorway),e("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1053}],1055:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("d3-hierarchy"),T=_("d3-interpolate").interpolate,b=_("../../components/drawing"),e=_("../../lib"),r=_("../../lib/svg_text_utils"),t=_("../bar/uniform_text"),a=t.recordMinTextSize,n=t.clearMinTextSize,d=_("../pie/plot"),s=_("../pie/helpers").getRotationAngle,i=d.computeTransform,u=d.transformInsideText,f=_("./style").styleOne,p=_("../bar/style").resizeText,y=_("./fx"),m=_("./constants"),l=_("./helpers");function w(A,M,k,E){var P=A._fullLayout,S=!P.uniformtext.mode&&l.hasTransition(E),F=g.select(k).selectAll("g.slice"),R=M[0],D=R.trace,B=l.findEntryWithLevel(R.hierarchy,D.level),V=l.getMaxDepth(D),Z=P._size,Y=D.domain,Q=Z.h*(Y.y[1]-Y.y[0]),$=.5*Math.min(Z.w*(Y.x[1]-Y.x[0]),Q),K=R.cx=Z.l+Z.w*(Y.x[1]+Y.x[0])/2,oe=R.cy=Z.t+Z.h*(1-Y.y[0])-Q/2;if(!B)return F.remove();var j=null,H={};S&&F.each(function(Re){H[l.getPtId(Re)]={rpx0:Re.rpx0,rpx1:Re.rpx1,x0:Re.x0,x1:Re.x1,transform:Re.transform},!j&&l.isEntry(Re)&&(j=Re)});var Re,G=(Re=B,x.partition().size([2*Math.PI,Re.height+1])(Re)).descendants(),re=B.height+1,q=0,te=V;R.hasMultipleRoots&&l.isHierarchyRoot(B)&&(G=G.slice(1),re-=1,q=1,te+=1),G=G.filter(function(Re){return Re.y1<=te});var ne=s(D.rotation);ne&&G.forEach(function(Re){Re.x0+=ne,Re.x1+=ne});var le=Math.min(re,V),ue=function(Re){return(Re-q)/le*$},de=function(Re,ve){return[Re*Math.cos(ve),-Re*Math.sin(ve)]},he=function(Re){return e.pathAnnulus(Re.rpx0,Re.rpx1,Re.x0,Re.x1,K,oe)},be=function(Re){return K+v(Re)[0]*(Re.transform.rCenter||0)+(Re.transform.x||0)},ge=function(Re){return oe+v(Re)[1]*(Re.transform.rCenter||0)+(Re.transform.y||0)};(F=F.data(G,l.getPtId)).enter().append("g").classed("slice",!0),S?F.exit().transition().each(function(){var Re=g.select(this);Re.select("path.surface").transition().attrTween("d",function(ve){var Te=function(Ie){var Ce,Pe=l.getPtId(Ie),Ve=H[Pe],qe=H[l.getPtId(B)];if(qe){var Je=(Ie.x1>qe.x1?2*Math.PI:0)+ne;Ce=Ie.rpx1<qe.rpx1?{x0:Ie.x0,x1:Ie.x1,rpx0:0,rpx1:0}:{x0:Je,x1:Je,rpx0:Ie.rpx0,rpx1:Ie.rpx1}}else{var lt,He=l.getPtId(Ie.parent);F.each(function(bt){if(l.getPtId(bt)===He)return lt=bt});var $e,et=lt.children;et.forEach(function(bt,Ct){if(l.getPtId(bt)===Pe)return $e=Ct});var tt=et.length,ft=T(lt.x0,lt.x1);Ce={rpx0:$,rpx1:$,x0:ft($e/tt),x1:ft(($e+1)/tt)}}return T(Ve,Ce)}(ve);return function(Ie){return he(Te(Ie))}}),Re.select("g.slicetext").attr("opacity",0)}).remove():F.exit().remove(),F.order();var we=null;if(S&&j){var ke=l.getPtId(j);F.each(function(Re){null===we&&l.getPtId(Re)===ke&&(we=Re.x1)})}var De=F;function Ee(Re){var ve=Re.parent,Te=H[l.getPtId(ve)],Ie={};if(Te){var Ce=ve.children,Pe=Ce.indexOf(Re),Ve=Ce.length,qe=T(Te.x0,Te.x1);Ie.x0=qe(Pe/Ve),Ie.x1=qe(Pe/Ve)}else Ie.x0=Ie.x1=0;return Ie}S&&(De=De.transition().each("end",function(){var Re=g.select(this);l.setSliceCursor(Re,A,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),De.each(function(Re){var Je,ve=g.select(this),Te=e.ensureSingle(ve,"path","surface",function(Je){Je.style("pointer-events","all")});Re.rpx0=ue(Re.y0),Re.rpx1=ue(Re.y1),Re.xmid=(Re.x0+Re.x1)/2,Re.pxmid=de(Re.rpx1,Re.xmid),Re.midangle=-(Re.xmid-Math.PI/2),Re.startangle=-(Re.x0-Math.PI/2),Re.stopangle=-(Re.x1-Math.PI/2),Re.halfangle=.5*Math.min(e.angleDelta(Re.x0,Re.x1)||Math.PI,Math.PI),Re.ring=1-Re.rpx0/Re.rpx1,Re.rInscribed=0===(Je=Re).rpx0&&e.isFullCircle([Je.x0,Je.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Je.halfangle)),Je.ring/2)),S?Te.transition().attrTween("d",function(Je){var lt=function(He){var $e,et=H[l.getPtId(He)],tt={x0:He.x0,x1:He.x1,rpx0:He.rpx0,rpx1:He.rpx1};if(et)$e=et;else if(j)if(He.parent)if(we){var ft=(He.x1>we?2*Math.PI:0)+ne;$e={x0:ft,x1:ft}}else e.extendFlat($e={rpx0:$,rpx1:$},Ee(He));else $e={rpx0:0,rpx1:0};else $e={x0:ne,x1:ne};return T($e,tt)}(Je);return function(He){return he(lt(He))}}):Te.attr("d",he),ve.call(y,B,A,M,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,A,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:A._transitioning}),Te.call(f,Re,D);var Ie=e.ensureSingle(ve,"g","slicetext"),Ce=e.ensureSingle(Ie,"text","",function(Je){Je.attr("data-notex",1)}),Pe=e.ensureUniformFontSize(A,l.determineTextFont(D,Re,P.font));Ce.text(ie.formatSliceLabel(Re,B,D,M,P)).classed("slicetext",!0).attr("text-anchor","middle").call(b.font,Pe).call(r.convertToTspans,A);var Ve=b.bBox(Ce.node());Re.transform=u(Ve,Re,R),Re.transform.targetX=be(Re),Re.transform.targetY=ge(Re);var qe=function(Je,lt){var He=Je.transform;return i(He,lt),He.fontSize=Pe.size,a(D.type,He,P),e.getTextTransform(He)};S?Ce.transition().attrTween("transform",function(Je){var lt=function(He){var $e,et=H[l.getPtId(He)],tt=He.transform;if(et)$e=et;else if($e={rpx1:He.rpx1,transform:{textPosAngle:tt.textPosAngle,scale:0,rotate:tt.rotate,rCenter:tt.rCenter,x:tt.x,y:tt.y}},j)if(He.parent)if(we){var ft=He.x1>we?2*Math.PI:0;$e.x0=$e.x1=ft}else e.extendFlat($e,Ee(He));else $e.x0=$e.x1=ne;else $e.x0=$e.x1=ne;var bt=T($e.transform.textPosAngle,He.transform.textPosAngle),Ct=T($e.rpx1,He.rpx1),Vt=T($e.x0,He.x0),Ft=T($e.x1,He.x1),ht=T($e.transform.scale,tt.scale),ut=T($e.transform.rotate,tt.rotate),Rt=0===tt.rCenter?3:0===$e.transform.rCenter?1/3:1,nn=T($e.transform.rCenter,tt.rCenter);return function(cn){var Ze=Ct(cn),Qe=Vt(cn),Ge=Ft(cn),rt=nn(Math.pow(cn,Rt)),Le={pxmid:de(Ze,(Qe+Ge)/2),rpx1:Ze,transform:{textPosAngle:bt(cn),rCenter:rt,x:tt.x,y:tt.y}};return a(D.type,tt,P),{transform:{targetX:be(Le),targetY:ge(Le),scale:ht(cn),rotate:ut(cn),rCenter:rt}}}}(Je);return function(He){return qe(lt(He),Ve)}}):Ce.attr("transform",qe(Re,Ve))})}function v(A){return k=A.transform.textPosAngle,[(M=A.rpx1)*Math.sin(k),-M*Math.cos(k)];var M,k}ie.plot=function(A,M,k,E){var P,S,F=A._fullLayout,R=F._sunburstlayer,D=!k,L=!F.uniformtext.mode&&l.hasTransition(k);n("sunburst",F),(P=R.selectAll("g.trace.sunburst").data(M,function(B){return B[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),P.order(),L?(E&&(S=E()),g.transition().duration(k.duration).ease(k.easing).each("end",function(){S&&S()}).each("interrupt",function(){S&&S()}).each(function(){R.selectAll("g.trace").each(function(B){w(A,B,this,k)})})):(P.each(function(B){w(A,B,this,k)}),F.uniformtext.mode&&p(A,F._sunburstlayer.selectAll(".trace"),"sunburst")),D&&P.exit().remove()},ie.formatSliceLabel=function(A,M,k,E,P){var S=k.texttemplate,F=k.textinfo;if(!(S||F&&"none"!==F))return"";var R=P.separators,L=A.data.data,B=E[0].hierarchy,V=l.isHierarchyRoot(A),Z=l.getParent(B,A),Y=l.getValue(A);if(!S){var ee,Q=F.split("+"),$=function(ne){return-1!==Q.indexOf(ne)},K=[];if($("label")&&L.label&&K.push(L.label),L.hasOwnProperty("v")&&$("value")&&K.push(l.formatValue(L.v,R)),!V){$("current path")&&K.push(l.getPath(A.data));var oe=0;$("percent parent")&&oe++,$("percent entry")&&oe++,$("percent root")&&oe++;var j=oe>1;if(oe){var H,G=function(ne){ee=l.formatPercent(H,R),j&&(ee+=" of "+ne),K.push(ee)};$("percent parent")&&!V&&(H=Y/l.getValue(Z),G("parent")),$("percent entry")&&(H=Y/l.getValue(M),G("entry")),$("percent root")&&(H=Y/l.getValue(B),G("root"))}}return $("text")&&(ee=e.castOption(k,L.i,"text"),e.isValidTextValue(ee)&&K.push(ee)),K.join("<br>")}var re=e.castOption(k,L.i,"texttemplate");if(!re)return"";var q={};L.label&&(q.label=L.label),L.hasOwnProperty("v")&&(q.value=L.v,q.valueLabel=l.formatValue(L.v,R)),q.currentPath=l.getPath(A.data),V||(q.percentParent=Y/l.getValue(Z),q.percentParentLabel=l.formatPercent(q.percentParent,R),q.parent=l.getPtLabel(Z)),q.percentEntry=Y/l.getValue(M),q.percentEntryLabel=l.formatPercent(q.percentEntry,R),q.entry=l.getPtLabel(M),q.percentRoot=Y/l.getValue(B),q.percentRootLabel=l.formatPercent(q.percentRoot,R),q.root=l.getPtLabel(B),L.hasOwnProperty("color")&&(q.color=L.color);var te=e.castOption(k,L.i,"text");return(e.isValidTextValue(te)||""===te)&&(q.text=te),q.customdata=e.castOption(k,L.i,"customdata"),e.texttemplateString(re,q,P._d3locale,q,k._meta||{})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"./constants":1048,"./fx":1050,"./helpers":1051,"./style":1056,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1056:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/color"),T=_("../../lib"),b=_("../bar/uniform_text").resizeText;function e(r,t,a){var n=t.data.data,d=!t.children,s=n.i,i=T.castOption(a,s,"marker.line.color")||x.defaultLine,u=T.castOption(a,s,"marker.line.width")||0;r.style("stroke-width",u).call(x.fill,n.color).call(x.stroke,i).style("opacity",d?a.leaf.opacity:null)}ae.exports={style:function(r){var t=r._fullLayout._sunburstlayer.selectAll(".trace");b(r,t,"sunburst"),t.each(function(a){var n=g.select(this),d=a[0].trace;n.style("opacity",d.opacity),n.selectAll("path.surface").each(function(s){g.select(this).call(e,s,d)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1057:[function(_,ae,ie){"use strict";var g=_("../../components/color"),x=_("../../components/colorscale/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../../plots/attributes"),r=_("../../lib/extend").extendFlat,t=_("../../plot_api/edit_types").overrideAll;function a(d){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:g.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:g.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var n=ae.exports=t(r({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},x("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:a(),y:a(),z:a()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:r({},x.zauto,{}),zmin:r({},x.zmin,{}),zmax:r({},x.zmax,{})},hoverinfo:r({},e.hoverinfo),showlegend:r({},e.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1058:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/calc");ae.exports=function(x,T){g(x,T,T.surfacecolor?{vals:T.surfacecolor,containerStr:"",cLetter:"c"}:{vals:T.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1059:[function(_,ae,ie){"use strict";var g=_("../../../stackgl_modules").gl_surface3d,x=_("../../../stackgl_modules").ndarray,T=_("../../../stackgl_modules").ndarray_linear_interpolate.d2,b=_("../heatmap/interp2d"),e=_("../heatmap/find_empties"),r=_("../../lib").isArrayOrTypedArray,t=_("../../lib/gl_format_color").parseColorScale,a=_("../../lib/str2rgbarray"),n=_("../../components/colorscale").extractOpts;function d(k,E,P){this.scene=k,this.uid=P,this.surface=E,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=d.prototype;s.getXat=function(k,E,P,S){var F=r(this.data.x)?r(this.data.x[0])?this.data.x[E][k]:this.data.x[k]:k;return void 0===P?F:S.d2l(F,0,P)},s.getYat=function(k,E,P,S){var F=r(this.data.y)?r(this.data.y[0])?this.data.y[E][k]:this.data.y[E]:E;return void 0===P?F:S.d2l(F,0,P)},s.getZat=function(k,E,P,S){var F=this.data.z[E][k];return null===F&&this.data.connectgaps&&this.data._interpolatedZ&&(F=this.data._interpolatedZ[E][k]),void 0===P?F:S.d2l(F,0,P)},s.handlePick=function(k){if(k.object===this.surface){var P=(k.data.index[1]-1)/this.dataScaleY-1,S=Math.max(Math.min(Math.round((k.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),F=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);k.index=[S,F],k.traceCoordinate=[this.getXat(S,F),this.getYat(S,F),this.getZat(S,F)],k.dataCoordinate=[this.getXat(S,F,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(S,F,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(S,F,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var R=0;R<3;R++)null!=k.dataCoordinate[R]&&(k.dataCoordinate[R]*=this.scene.dataScale[R]);var L=this.data.hovertext||this.data.text;return k.textLabel=Array.isArray(L)&&L[F]&&void 0!==L[F][S]?L[F][S]:L||"",k.data.dataCoordinate=k.dataCoordinate.slice(),this.surface.highlight(k.data),this.scene.glplot.spikes.position=k.dataCoordinate,!0}};var i=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function u(k,E){if(k<E)return 0;for(var P=0;0===Math.floor(k%E);)k/=E,P++;return P}function f(k){for(var E=[],P=0;P<i.length;P++)E.push(u(k,i[P]));return E}function p(k){for(var E=f(k),P=k,S=0;S<i.length;S++)if(E[S]>0){P=i[S];break}return P}function y(k,E){if(!(k<1||E<1)){for(var P=f(k),S=f(E),F=1,R=0;R<i.length;R++)F*=Math.pow(i[R],Math.max(P[R],S[R]));return F}}s.calcXnums=function(k){var E,P=[];for(E=1;E<k;E++){var S=this.getXat(E-1,0),F=this.getXat(E,0);P[E-1]=F!==S&&null!=S&&null!=F?Math.abs(F-S):0}var R=0;for(E=1;E<k;E++)R+=P[E-1];for(E=1;E<k;E++)P[E-1]=0===P[E-1]?1:Math.round(R/P[E-1]);return P},s.calcYnums=function(k){var E,P=[];for(E=1;E<k;E++){var S=this.getYat(0,E-1),F=this.getYat(0,E);P[E-1]=F!==S&&null!=S&&null!=F?Math.abs(F-S):0}var R=0;for(E=1;E<k;E++)R+=P[E-1];for(E=1;E<k;E++)P[E-1]=0===P[E-1]?1:Math.round(R/P[E-1]);return P};var m=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],l=m[9],w=m[13];function v(k,E,P){var S=P[8]+P[2]*E[0]+P[5]*E[1];return k[0]=(P[6]+P[0]*E[0]+P[3]*E[1])/S,k[1]=(P[7]+P[1]*E[0]+P[4]*E[1])/S,k}function A(k,E,P){return function(S,F,R,D){for(var L=[0,0],B=S.shape[0],V=S.shape[1],Z=0;Z<B;Z++)for(var Y=0;Y<V;Y++)R(L,[Z,Y],D),S.set(Z,Y,T(F,L[0],L[1]))}(k,E,v,P),k}function M(k,E){for(var P=!1,S=0;S<k.length;S++)if(E===k[S]){P=!0;break}!1===P&&k.push(E)}s.estimateScale=function(k,E){for(var P=1+function(F){if(0!==F.length){for(var R=1,D=0;D<F.length;D++)R=y(R,F[D]);return R}}(0===E?this.calcXnums(k):this.calcYnums(k));P<l;)P*=2;for(;P>w;)P--,P/=p(P),++P<l&&(P=w);var S=Math.round(P/k);return S>1?S:1},s.refineCoords=function(k){for(var E=this.dataScaleX,P=this.dataScaleY,S=k[0].shape[0],F=k[0].shape[1],R=0|Math.floor(k[0].shape[0]*E+1),D=0|Math.floor(k[0].shape[1]*P+1),L=1+S+1,B=1+F+1,V=x(new Float32Array(L*B),[L,B]),Z=[1/E,0,0,0,1/P,0,0,0,1],Y=0;Y<k.length;++Y){this.surface.padField(V,k[Y]);var ee=x(new Float32Array(R*D),[R,D]);A(ee,V,Z),k[Y]=ee}},s.setContourLevels=function(){var k,E,S=[[],[],[]],F=[!1,!1,!1],R=!1;for(k=0;k<3;++k)if(this.showContour[k]&&(R=!0,this.contourSize[k]>0&&null!==this.contourStart[k]&&null!==this.contourEnd[k]&&this.contourEnd[k]>this.contourStart[k]))for(F[k]=!0,E=this.contourStart[k];E<this.contourEnd[k];E+=this.contourSize[k])M(S[k],E*this.scene.dataScale[k]);if(R){var D=[[],[],[]];for(k=0;k<3;++k)this.showContour[k]&&(D[k]=F[k]?S[k]:this.scene.contourLevels[k]);this.surface.update({levels:D})}},s.update=function(k){var E,P,S,F,R=this.scene,D=R.fullSceneLayout,L=this.surface,B=t(k),V=R.dataScale,Z=k.z[0].length,Y=k._ylength,ee=R.contourLevels;this.data=k;var Q=[];for(E=0;E<3;E++)for(Q[E]=[],P=0;P<Z;P++)Q[E][P]=[];for(P=0;P<Z;P++)for(S=0;S<Y;S++)Q[0][P][S]=this.getXat(P,S,k.xcalendar,D.xaxis),Q[1][P][S]=this.getYat(P,S,k.ycalendar,D.yaxis),Q[2][P][S]=this.getZat(P,S,k.zcalendar,D.zaxis);if(k.connectgaps)for(k._emptypoints=e(Q[2]),b(Q[2],k._emptypoints),k._interpolatedZ=[],P=0;P<Z;P++)for(k._interpolatedZ[P]=[],S=0;S<Y;S++)k._interpolatedZ[P][S]=Q[2][P][S];for(E=0;E<3;E++)for(P=0;P<Z;P++)for(S=0;S<Y;S++)null==(F=Q[E][P][S])?Q[E][P][S]=NaN:F=Q[E][P][S]*=V[E];for(E=0;E<3;E++)for(P=0;P<Z;P++)for(S=0;S<Y;S++)null!=(F=Q[E][P][S])&&(this.minValues[E]>F&&(this.minValues[E]=F),this.maxValues[E]<F&&(this.maxValues[E]=F));for(E=0;E<3;E++)this.objectOffset[E]=.5*(this.minValues[E]+this.maxValues[E]);for(E=0;E<3;E++)for(P=0;P<Z;P++)for(S=0;S<Y;S++)null!=(F=Q[E][P][S])&&(Q[E][P][S]-=this.objectOffset[E]);var $=[x(new Float32Array(Z*Y),[Z,Y]),x(new Float32Array(Z*Y),[Z,Y]),x(new Float32Array(Z*Y),[Z,Y])];for(E=0;E<3;E++)for(P=0;P<Z;P++)for(S=0;S<Y;S++)$[E].set(P,S,Q[E][P][S]);Q=[];var K={colormap:B,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!k.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:k.opacityscale,opacity:k.opacity},oe=n(k);if(K.intensityBounds=[oe.min,oe.max],k.surfacecolor){var j=x(new Float32Array(Z*Y),[Z,Y]);for(P=0;P<Z;P++)for(S=0;S<Y;S++)j.set(P,S,k.surfacecolor[S][P]);$.push(j)}else K.intensityBounds[0]*=V[2],K.intensityBounds[1]*=V[2];(w<$[0].shape[0]||w<$[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale($[0].shape[0],0),this.dataScaleY=this.estimateScale($[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords($)),k.surfacecolor&&(K.intensity=$.pop());var q,te,ne,H=[!0,!0,!0],G=["x","y","z"];for(E=0;E<3;++E){var re=k.contours[G[E]];H[E]=re.highlight,K.showContour[E]=re.show||re.highlight,K.showContour[E]&&(K.contourProject[E]=[re.project.x,re.project.y,re.project.z],re.show?(this.showContour[E]=!0,K.levels[E]=ee[E],L.highlightColor[E]=K.contourColor[E]=a(re.color),L.highlightTint[E]=K.contourTint[E]=re.usecolormap?0:1,K.contourWidth[E]=re.width,this.contourStart[E]=re.start,this.contourEnd[E]=re.end,this.contourSize[E]=re.size):(this.showContour[E]=!1,this.contourStart[E]=null,this.contourEnd[E]=null,this.contourSize[E]=0),re.highlight&&(K.dynamicColor[E]=a(re.highlightcolor),K.dynamicWidth[E]=re.highlightwidth))}(te=(q=B)[0].rgb)[0]===(ne=q[q.length-1].rgb)[0]&&te[1]===ne[1]&&te[2]===ne[2]&&te[3]===ne[3]&&(K.vertexColor=!0),K.objectOffset=this.objectOffset,K.coords=$,L.update(K),L.visible=k.visible,L.enableDynamic=H,L.enableHighlight=H,L.snapToData=!0,"lighting"in k&&(L.ambientLight=k.lighting.ambient,L.diffuseLight=k.lighting.diffuse,L.specularLight=k.lighting.specular,L.roughness=k.lighting.roughness,L.fresnel=k.lighting.fresnel),"lightposition"in k&&(L.lightPosition=[k.lightposition.x,k.lightposition.y,k.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},ae.exports=function(k,E){var S=g({gl:k.glplot.gl}),F=new d(k,S,E.uid);return S._trace=F,F.update(E),k.glplot.add(S),F}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1060:[function(_,ae,ie){"use strict";var g=_("../../registry"),x=_("../../lib"),T=_("../../components/colorscale/defaults"),b=_("./attributes");function e(t,a,n,d){var s=d("opacityscale");"max"===s?a.opacityscale=[[0,.1],[1,1]]:"min"===s?a.opacityscale=[[0,1],[1,.1]]:"extremes"===s?a.opacityscale=function(i,u){for(var f=[],p=0;p<32;p++){var y=p/31,m=.1+.9*(1-Math.pow(Math.sin(1*y*Math.PI),2));f.push([y,Math.max(0,Math.min(1,m))])}return f}():function(i){var u=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||0!=+i[0][0]||1!=+i[i.length-1][0])return!1;for(var f=0;f<i.length;f++){var p=i[f];if(2!==p.length||+p[0]<u)return!1;u=+p[0]}return!0}(s)||(a.opacityscale=void 0)}function r(t,a,n){a in t&&!(n in t)&&(t[n]=t[a])}ae.exports={supplyDefaults:function(t,a,n,d){var s,i;function u(M,k){return x.coerce(t,a,b,M,k)}var f=u("x"),p=u("y"),y=u("z");if(!y||!y.length||f&&f.length<1||p&&p.length<1)a.visible=!1;else{a._xlength=Array.isArray(f)&&x.isArrayOrTypedArray(f[0])?y.length:y[0].length,a._ylength=y.length,g.getComponentMethod("calendars","handleTraceDefaults")(t,a,["x","y","z"],d),u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(M){u(M)});var m=u("surfacecolor"),l=["x","y","z"];for(s=0;s<3;++s){var w="contours."+l[s],v=u(w+".show"),A=u(w+".highlight");if(v||A)for(i=0;i<3;++i)u(w+".project."+l[i]);v&&(u(w+".color"),u(w+".width"),u(w+".usecolormap")),A&&(u(w+".highlightcolor"),u(w+".highlightwidth")),u(w+".start"),u(w+".end"),u(w+".size")}m||(r(t,"zmin","cmin"),r(t,"zmax","cmax"),r(t,"zauto","cauto")),T(t,a,d,u,{prefix:"",cLetter:"c"}),e(0,a,0,u),a._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1057}],1061:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:_("./calc"),plot:_("./convert"),moduleType:"trace",name:"surface",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1057,"./calc":1058,"./convert":1059,"./defaults":1060}],1062:[function(_,ae,ie){"use strict";var g=_("../../components/annotations/attributes"),x=_("../../lib/extend").extendFlat,T=_("../../plot_api/edit_types").overrideAll,b=_("../../plots/font_attributes"),e=_("../../plots/domain").attributes,r=_("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(ae.exports=T({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:r("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:x({},g.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:x({},b({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:r("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:x({},g.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:x({},b({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1063:[function(_,ae,ie){"use strict";var g=_("../../plots/get_data").getModuleCalcData,x=_("./plot");ie.name="table",ie.plot=function(T){var b=g(T.calcdata,"table")[0];b.length&&x(T,b)},ie.clean=function(T,b,e,r){var t=r._has&&r._has("table"),a=b._has&&b._has("table");t&&!a&&r._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1070}],1064:[function(_,ae,ie){"use strict";var g=_("../../lib/gup").wrap;ae.exports=function(){return g({})}},{"../../lib/gup":500}],1065:[function(_,ae,ie){"use strict";ae.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1066:[function(_,ae,ie){"use strict";var g=_("./constants"),x=_("../../lib/extend").extendFlat,T=_("fast-isnumeric");function b(s){if(Array.isArray(s)){for(var i=0,u=0;u<s.length;u++)i=Math.max(i,b(s[u]));return i}return s}function e(s,i){return s+i}function r(s){var i,u=s.slice(),f=1/0,p=0;for(i=0;i<u.length;i++)Array.isArray(u[i])||(u[i]=[u[i]]),f=Math.min(f,u[i].length),p=Math.max(p,u[i].length);if(f!==p)for(i=0;i<u.length;i++){var y=p-u[i].length;y&&(u[i]=u[i].concat(t(y)))}return u}function t(s){for(var i=new Array(s),u=0;u<s;u++)i[u]="";return i}function a(s){return s.calcdata.columns.reduce(function(i,u){return u.xIndex<s.xIndex?i+u.columnWidth:i},0)}function n(s,i){return Object.keys(s).map(function(u){return x({},s[u],{auxiliaryBlocks:i})})}function d(s,i){for(var u,f={},p=0,y=0,m={firstRowIndex:null,lastRowIndex:null,rows:[]},l=0,w=0,v=0;v<s.length;v++)m.rows.push({rowIndex:v,rowHeight:u=s[v]}),((y+=u)>=i||v===s.length-1)&&(f[p]=m,m.key=w++,m.firstRowIndex=l,m.lastRowIndex=v,m={firstRowIndex:null,lastRowIndex:null,rows:[]},p+=y,l=v+1,y=0);return f}ae.exports=function(s,i){var u=r(i.cells.values),f=function(V){return V.slice(i.header.values.length,V.length)},p=r(i.header.values);p.length&&!p[0].length&&(p[0]=[""],p=r(p));var y=p.concat(f(u).map(function(){return t((p[0]||[""]).length)})),m=i.domain,l=Math.floor(s._fullLayout._size.w*(m.x[1]-m.x[0])),w=Math.floor(s._fullLayout._size.h*(m.y[1]-m.y[0])),v=i.header.values.length?y[0].map(function(){return i.header.height}):[g.emptyHeaderHeight],A=u.length?u[0].map(function(){return i.cells.height}):[],M=v.reduce(e,0),k=d(A,w-M+g.uplift),E=n(d(v,M),[]),P=n(k,E),S={},F=i._fullInput.columnorder.concat(f(u.map(function(V,Z){return Z}))),R=y.map(function(V,Z){var Y=Array.isArray(i.columnwidth)?i.columnwidth[Math.min(Z,i.columnwidth.length-1)]:i.columnwidth;return T(Y)?Number(Y):1}),D=R.reduce(e,0);R=R.map(function(V){return V/D*l});var L=Math.max(b(i.header.line.width),b(i.cells.line.width)),B={key:i.uid+s._context.staticPlot,translateX:m.x[0]*s._fullLayout._size.w,translateY:s._fullLayout._size.h*(1-m.y[1]),size:s._fullLayout._size,width:l,maxLineWidth:L,height:w,columnOrder:F,groupHeight:w,rowBlocks:P,headerRowBlocks:E,scrollY:0,cells:x({},i.cells,{values:u}),headerCells:x({},i.header,{values:y}),gdColumns:y.map(function(V){return V[0]}),gdColumnsOriginalOrder:y.map(function(V){return V[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:y.map(function(V,Z){return S[V]=(S[V]||0)+1,{key:V+"__"+S[V],label:V,specIndex:Z,xIndex:F[Z],xScale:a,x:void 0,calcdata:void 0,columnWidth:R[Z]}})};return B.columns.forEach(function(V){V.calcdata=B,V.x=a(V)}),B}},{"../../lib/extend":493,"./constants":1065,"fast-isnumeric":190}],1067:[function(_,ae,ie){"use strict";var g=_("../../lib/extend").extendFlat;ie.splitToPanels=function(x){var T=[0,0],b=g({},x,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:x.calcdata.headerCells.values[x.specIndex],rowBlocks:x.calcdata.headerRowBlocks,calcdata:g({},x.calcdata,{cells:x.calcdata.headerCells})});return[g({},x,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:x.calcdata.cells.values[x.specIndex],rowBlocks:x.calcdata.rowBlocks}),g({},x,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:x.calcdata.cells.values[x.specIndex],rowBlocks:x.calcdata.rowBlocks}),b]},ie.splitToCells=function(x){var b,e,r,T=[r=(e=(b=x).rowBlocks[b.page])?e.rows[0].rowIndex:0,e?r+e.rows.length:0];return(x.values||[]).slice(T[0],T[1]).map(function(b,e){return{keyWithinBlock:e+("string"==typeof b&&b.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:T[0]+e,column:x,calcdata:x.calcdata,page:x.page,rowBlocks:x.rowBlocks,value:b}})}},{"../../lib/extend":493}],1068:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults;ae.exports=function(b,e,r,t){function a(n,d){return g.coerce(b,e,x,n,d)}T(e,t,a),a("columnwidth"),a("header.values"),a("header.format"),a("header.align"),a("header.prefix"),a("header.suffix"),a("header.height"),a("header.line.width"),a("header.line.color"),a("header.fill.color"),g.coerceFont(a,"header.font",g.extendFlat({},t.font)),function(n,d){for(var i=n.header.values.length,u=(n.columnorder||[]).slice(0,i),f=u.slice().sort(function(m,l){return m-l}),p=u.map(function(m){return f.indexOf(m)}),y=p.length;y<i;y++)p.push(y);d("columnorder",p)}(e,a),a("cells.values"),a("cells.format"),a("cells.align"),a("cells.prefix"),a("cells.suffix"),a("cells.height"),a("cells.line.width"),a("cells.line.color"),a("cells.fill.color"),g.coerceFont(a,"cells.font",g.extendFlat({},t.font)),e._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1062}],1069:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),moduleType:"trace",name:"table",basePlotModule:_("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1062,"./base_plot":1063,"./calc":1064,"./defaults":1068,"./plot":1070}],1070:[function(_,ae,ie){"use strict";var g=_("./constants"),x=_("@plotly/d3"),T=_("../../lib").numberFormat,b=_("../../lib/gup"),e=_("../../components/drawing"),r=_("../../lib/svg_text_utils"),t=_("../../lib").raiseToTop,a=_("../../lib").strTranslate,n=_("../../lib").cancelTransition,d=_("./data_preparation_helper"),s=_("./data_split_helpers"),i=_("../../components/color");function u($){return Math.ceil($.calcdata.maxLineWidth/2)}function f($,K){return"clip"+$._fullLayout._uid+"_scrollAreaBottomClip_"+K.key}function p($,K){return"clip"+$._fullLayout._uid+"_columnBoundaryClippath_"+K.calcdata.key+"_"+K.specIndex}function y($){return[].concat.apply([],$.map(function(K){return K})).map(function(K){return K.__data__})}function m($,K,oe){var j=$.selectAll("."+g.cn.scrollbarKit).data(b.repeat,b.keyFun);j.enter().append("g").classed(g.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),j.each(function(te){var ue,ne=te.scrollbarState;ne.totalHeight=Z(ue=te.rowBlocks,ue.length-1)+(ue.length?Y(ue[ue.length-1],1/0):1),ne.scrollableAreaHeight=te.groupHeight-P(te),ne.currentlyVisibleHeight=Math.min(ne.totalHeight,ne.scrollableAreaHeight),ne.ratio=ne.currentlyVisibleHeight/ne.totalHeight,ne.barLength=Math.max(ne.ratio*ne.currentlyVisibleHeight,g.goldenRatio*g.scrollbarWidth),ne.barWiggleRoom=ne.currentlyVisibleHeight-ne.barLength,ne.wiggleRoom=Math.max(0,ne.totalHeight-ne.scrollableAreaHeight),ne.topY=0===ne.barWiggleRoom?0:te.scrollY/ne.wiggleRoom*ne.barWiggleRoom,ne.bottomY=ne.topY+ne.barLength,ne.dragMultiplier=ne.wiggleRoom/ne.barWiggleRoom}).attr("transform",function(te){return a(te.width+g.scrollbarWidth/2+g.scrollbarOffset,P(te))});var H=j.selectAll("."+g.cn.scrollbar).data(b.repeat,b.keyFun);H.enter().append("g").classed(g.cn.scrollbar,!0);var G=H.selectAll("."+g.cn.scrollbarSlider).data(b.repeat,b.keyFun);G.enter().append("g").classed(g.cn.scrollbarSlider,!0),G.attr("transform",function(te){return a(0,te.scrollbarState.topY||0)});var re=G.selectAll("."+g.cn.scrollbarGlyph).data(b.repeat,b.keyFun);re.enter().append("line").classed(g.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",g.scrollbarWidth).attr("stroke-linecap","round").attr("y1",g.scrollbarWidth/2),re.attr("y2",function(te){return te.scrollbarState.barLength-g.scrollbarWidth/2}).attr("stroke-opacity",function(te){return te.columnDragInProgress||!te.scrollbarState.barWiggleRoom||oe?0:.4}),re.transition().delay(0).duration(0),re.transition().delay(g.scrollbarHideDelay).duration(g.scrollbarHideDuration).attr("stroke-opacity",0);var q=H.selectAll("."+g.cn.scrollbarCaptureZone).data(b.repeat,b.keyFun);q.enter().append("line").classed(g.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",g.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(te){var ne=x.event.y,le=this.getBoundingClientRect(),ue=te.scrollbarState,de=ne-le.top,he=x.scale.linear().domain([0,ue.scrollableAreaHeight]).range([0,ue.totalHeight]).clamp(!0);ue.topY<=de&&de<=ue.bottomY||F(K,$,null,he(de-ue.barLength/2))(te)}).call(x.behavior.drag().origin(function(te){return x.event.stopPropagation(),te.scrollbarState.scrollbarScrollInProgress=!0,te}).on("drag",F(K,$)).on("dragend",function(){})),q.attr("y2",function(te){return te.scrollbarState.scrollableAreaHeight}),K._context.staticPlot&&(re.remove(),q.remove())}function l($,K,oe,j){var q,H=function(re){var q=re.selectAll("."+g.cn.columnCell).data(s.splitToCells,function(te){return te.keyWithinBlock});return q.enter().append("g").classed(g.cn.columnCell,!0),q.exit().remove(),q}(((q=oe.selectAll("."+g.cn.columnCells).data(b.repeat,b.keyFun)).enter().append("g").classed(g.cn.columnCells,!0),q.exit().remove(),q));H.each(function(q,te){var ne=q.calcdata.cells.font,le=q.column.specIndex,ue={size:A(ne.size,le,te),color:A(ne.color,le,te),family:A(ne.family,le,te)};q.rowNumber=q.key,q.align=A(q.calcdata.cells.align,le,te),q.cellBorderWidth=A(q.calcdata.cells.line.width,le,te),q.font=ue}),function(re){re.attr("width",function(q){return q.column.columnWidth}).attr("stroke-width",function(q){return q.cellBorderWidth}).each(function(q){var te=x.select(this);i.stroke(te,A(q.calcdata.cells.line.color,q.column.specIndex,q.rowNumber)),i.fill(te,A(q.calcdata.cells.fill.color,q.column.specIndex,q.rowNumber))})}(function(re){var q=re.selectAll("."+g.cn.cellRect).data(b.repeat,function(te){return te.keyWithinBlock});return q.enter().append("rect").classed(g.cn.cellRect,!0),q}(H));var G=function(re){var q=re.selectAll("."+g.cn.cellText).data(b.repeat,function(te){return te.keyWithinBlock});return q.enter().append("text").classed(g.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){x.event.stopPropagation()}),q}(function(re){var q=re.selectAll("."+g.cn.cellTextHolder).data(b.repeat,function(te){return te.keyWithinBlock});return q.enter().append("g").classed(g.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),q}(H));(function(re){re.each(function(q){e.font(x.select(this),q.font)})})(G),w(G,K,j,$),V(H)}function w($,K,oe,j){$.text(function(H){var G=H.column.specIndex,re=H.rowNumber,q=H.value,te="string"==typeof q,ne=te&&q.match(/<br>/i),le=!te||ne;H.mayHaveMarkup=te&&q.match(/[<&>]/);var ue,de="string"==typeof(ue=q)&&ue.match(g.latexCheck);H.latex=de;var he,be,ge=de?"":A(H.calcdata.cells.prefix,G,re)||"",we=de?"":A(H.calcdata.cells.suffix,G,re)||"",ke=de?null:A(H.calcdata.cells.format,G,re)||null,De=ge+(ke?T(ke)(H.value):H.value)+we;if(H.wrappingNeeded=!H.wrapped&&!le&&!de&&(he=v(De)),H.cellHeightMayIncrease=ne||de||H.mayHaveMarkup||(void 0===he?v(De):he),H.needsConvertToTspans=H.mayHaveMarkup||H.wrappingNeeded||H.latex,H.wrappingNeeded){var Ee=(" "===g.wrapSplitCharacter?De.replace(/<a href=/gi,"<a_href="):De).split(g.wrapSplitCharacter),Re=" "===g.wrapSplitCharacter?Ee.map(function(ve){return ve.replace(/<a_href=/gi,"<a href=")}):Ee;H.fragments=Re.map(function(ve){return{text:ve,width:null}}),H.fragments.push({fragment:g.wrapSpacer,width:null}),be=Re.join(g.lineBreaker)+g.lineBreaker+g.wrapSpacer}else delete H.fragments,be=De;return be}).attr("dy",function(H){return H.needsConvertToTspans?0:"0.75em"}).each(function(H){var G=x.select(this);H.needsConvertToTspans?r.convertToTspans(G,j,(H.wrappingNeeded?D:L)(oe,this,K,j,H)):x.select(this.parentNode).attr("transform",function(q){return a(B(q),g.cellPad)}).attr("text-anchor",function(q){return{left:"start",center:"middle",right:"end"}[q.align]})})}function v($){return-1!==$.indexOf(g.wrapSplitCharacter)}function A($,K,oe){if(Array.isArray($)){var j=$[Math.min(K,$.length-1)];return Array.isArray(j)?j[Math.min(oe,j.length-1)]:j}return $}function M($,K,oe){$.transition().ease(g.releaseTransitionEase).duration(g.releaseTransitionDuration).attr("transform",a(K.x,oe))}function k($){return"cells"===$.type}function E($){return"header"===$.type}function P($){return($.rowBlocks.length?$.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(K,oe){return K+Y(oe,1/0)},0)}function S($,K,oe){var j=y(K)[0];if(void 0!==j){var H=j.rowBlocks,G=j.calcdata,re=Z(H,H.length),q=j.calcdata.groupHeight-P(j),te=G.scrollY=Math.max(0,Math.min(re-q,G.scrollY)),ne=function(le,ue,de){for(var he=[],be=0,ge=0;ge<le.length;ge++){for(var we=le[ge],ke=we.rows,De=0,Ee=0;Ee<ke.length;Ee++)De+=ke[Ee].rowHeight;we.allRowsHeight=De,ue<be+De&&ue+de>be&&he.push(ge),be+=De}return he}(H,te,q);1===ne.length&&(ne[0]===H.length-1?ne.unshift(ne[0]-1):ne.push(ne[0]+1)),ne[0]%2&&ne.reverse(),K.each(function(le,ue){le.page=ne[ue],le.scrollY=te}),K.attr("transform",function(le){var ue=Z(le.rowBlocks,le.page)-le.scrollY;return a(0,ue)}),$&&(R($,oe,K,ne,j.prevPages,j,0),R($,oe,K,ne,j.prevPages,j,1),m(oe,$))}}function F($,K,oe,j){return function(H){var G=H.calcdata?H.calcdata:H,re=K.filter(function(le){return G.key===le.key}),te=G.scrollY;G.scrollY=void 0===j?G.scrollY+(oe||G.scrollbarState.dragMultiplier)*x.event.dy:j;var ne=re.selectAll("."+g.cn.yColumn).selectAll("."+g.cn.columnBlock).filter(k);return S($,ne,re),G.scrollY===te}}function R($,K,oe,j,H,G,re){j[re]!==H[re]&&(clearTimeout(G.currentRepaint[re]),G.currentRepaint[re]=setTimeout(function(){var q=oe.filter(function(te,ne){return ne===re&&j[ne]!==H[ne]});l($,K,q,oe),H[re]=j[re]}))}function D($,K,oe,j){return function(){var H=x.select(K.parentNode);H.each(function(G){var re=G.fragments;H.selectAll("tspan.line").each(function(be,ge){re[ge].width=this.getComputedTextLength()});var q,te,ne=re[re.length-1].width,le=re.slice(0,-1),ue=[],de=0,he=G.column.columnWidth-2*g.cellPad;for(G.value="";le.length;)de+(te=(q=le.shift()).width+ne)>he&&(G.value+=ue.join(g.wrapSpacer)+g.lineBreaker,ue=[],de=0),ue.push(q.text),de+=te;de&&(G.value+=ue.join(g.wrapSpacer)),G.wrapped=!0}),H.selectAll("tspan.line").remove(),w(H.select("."+g.cn.cellText),oe,$,j),x.select(K.parentNode.parentNode).call(V)}}function L($,K,oe,j,H){return function(){if(!H.settledY){var G=x.select(K.parentNode),re=Q(H),q=H.key-re.firstRowIndex,te=re.rows[q].rowHeight,ne=H.cellHeightMayIncrease?K.parentNode.getBoundingClientRect().height+2*g.cellPad:te,le=Math.max(ne,te);le-re.rows[q].rowHeight&&(re.rows[q].rowHeight=le,$.selectAll("."+g.cn.columnCell).call(V),S(null,$.filter(k),0),m(oe,j,!0)),G.attr("transform",function(){var ue=this.parentNode.getBoundingClientRect(),de=x.select(this.parentNode).select("."+g.cn.cellRect).node().getBoundingClientRect(),he=this.transform.baseVal.consolidate(),be=de.top-ue.top+(he?he.matrix.f:g.cellPad);return a(B(H,x.select(this.parentNode).select("."+g.cn.cellTextHolder).node().getBoundingClientRect().width),be)}),H.settledY=!0}}}function B($,K){switch($.align){default:return g.cellPad;case"right":return $.column.columnWidth-(K||0)-g.cellPad;case"center":return($.column.columnWidth-(K||0))/2}}function V($){$.attr("transform",function(K){var oe=K.rowBlocks[0].auxiliaryBlocks.reduce(function(H,G){return H+Y(G,1/0)},0),j=Y(Q(K),K.key);return a(0,j+oe)}).selectAll("."+g.cn.cellRect).attr("height",function(K){return(oe=Q(K),j=K.key,oe.rows[j-oe.firstRowIndex]).rowHeight;var oe,j})}function Z($,K){for(var oe=0,j=K-1;j>=0;j--)oe+=ee($[j]);return oe}function Y($,K){for(var oe=0,j=0;j<$.rows.length&&$.rows[j].rowIndex<K;j++)oe+=$.rows[j].rowHeight;return oe}function ee($){var K=$.allRowsHeight;if(void 0!==K)return K;for(var oe=0,j=0;j<$.rows.length;j++)oe+=$.rows[j].rowHeight;return $.allRowsHeight=oe,oe}function Q($){return $.rowBlocks[$.page]}ae.exports=function($,K){var oe=!$._context.staticPlot,j=$._fullLayout._paper.selectAll("."+g.cn.table).data(K.map(function(we){var ke=b.unwrap(we).trace;return d($,ke)}),b.keyFun);j.exit().remove(),j.enter().append("g").classed(g.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),j.attr("width",function(we){return we.width+we.size.l+we.size.r}).attr("height",function(we){return we.height+we.size.t+we.size.b}).attr("transform",function(we){return a(we.translateX,we.translateY)});var H=j.selectAll("."+g.cn.tableControlView).data(b.repeat,b.keyFun),G=H.enter().append("g").classed(g.cn.tableControlView,!0).style("box-sizing","content-box");if(oe){var re="onwheel"in document?"wheel":"mousewheel";G.on("mousemove",function(we){H.filter(function(ke){return we===ke}).call(m,$)}).on(re,function(we){we.scrollbarState.wheeling||(we.scrollbarState.wheeling=!0,F($,H,null,we.scrollY+x.event.deltaY)(we)||(x.event.stopPropagation(),x.event.preventDefault()),we.scrollbarState.wheeling=!1)}).call(m,$,!0)}H.attr("transform",function(we){return a(we.size.l,we.size.t)});var q=H.selectAll("."+g.cn.scrollBackground).data(b.repeat,b.keyFun);q.enter().append("rect").classed(g.cn.scrollBackground,!0).attr("fill","none"),q.attr("width",function(we){return we.width}).attr("height",function(we){return we.height}),H.each(function(we){e.setClipUrl(x.select(this),f($,we),$)});var te=H.selectAll("."+g.cn.yColumn).data(function(we){return we.columns},b.keyFun);te.enter().append("g").classed(g.cn.yColumn,!0),te.exit().remove(),te.attr("transform",function(we){return a(we.x,0)}),oe&&te.call(x.behavior.drag().origin(function(we){return M(x.select(this),we,-g.uplift),t(this),we.calcdata.columnDragInProgress=!0,m(H.filter(function(ke){return we.calcdata.key===ke.key}),$),we}).on("drag",function(we){var ke=x.select(this),De=function(Ee){return(we===Ee?x.event.x:Ee.x)+Ee.columnWidth/2};we.x=Math.max(-g.overdrag,Math.min(we.calcdata.width+g.overdrag-we.columnWidth,x.event.x)),y(te).filter(function(Ee){return Ee.calcdata.key===we.calcdata.key}).sort(function(Ee,Re){return De(Ee)-De(Re)}).forEach(function(Ee,Re){Ee.xIndex=Re,Ee.x=we===Ee?Ee.x:Ee.xScale(Ee)}),te.filter(function(Ee){return we!==Ee}).transition().ease(g.transitionEase).duration(g.transitionDuration).attr("transform",function(Ee){return a(Ee.x,0)}),ke.call(n).attr("transform",a(we.x,-g.uplift))}).on("dragend",function(we){var Ee,Re,ve,Te,ke=x.select(this),De=we.calcdata;we.x=we.xScale(we),we.calcdata.columnDragInProgress=!1,M(ke,we,0),Ee=$,Re=De,ve=De.columns.map(function(Ee){return Ee.xIndex}),Te=Re.gdColumnsOriginalOrder,Re.gdColumns.sort(function(Ie,Ce){return ve[Te.indexOf(Ie)]-ve[Te.indexOf(Ce)]}),Re.columnorder=ve,Ee.emit("plotly_restyle")})),te.each(function(we){e.setClipUrl(x.select(this),p($,we),$)});var ne=te.selectAll("."+g.cn.columnBlock).data(s.splitToPanels,b.keyFun);ne.enter().append("g").classed(g.cn.columnBlock,!0).attr("id",function(we){return we.key}),ne.style("cursor",function(we){return we.dragHandle?"ew-resize":we.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var le=ne.filter(E),ue=ne.filter(k);oe&&ue.call(x.behavior.drag().origin(function(we){return x.event.stopPropagation(),we}).on("drag",F($,H,-1)).on("dragend",function(){})),l($,H,le,ne),l($,H,ue,ne);var de=H.selectAll("."+g.cn.scrollAreaClip).data(b.repeat,b.keyFun);de.enter().append("clipPath").classed(g.cn.scrollAreaClip,!0).attr("id",function(we){return f($,we)});var he=de.selectAll("."+g.cn.scrollAreaClipRect).data(b.repeat,b.keyFun);he.enter().append("rect").classed(g.cn.scrollAreaClipRect,!0).attr("x",-g.overdrag).attr("y",-g.uplift).attr("fill","none"),he.attr("width",function(we){return we.width+2*g.overdrag}).attr("height",function(we){return we.height+g.uplift}),te.selectAll("."+g.cn.columnBoundary).data(b.repeat,b.keyFun).enter().append("g").classed(g.cn.columnBoundary,!0);var be=te.selectAll("."+g.cn.columnBoundaryClippath).data(b.repeat,b.keyFun);be.enter().append("clipPath").classed(g.cn.columnBoundaryClippath,!0),be.attr("id",function(we){return p($,we)});var ge=be.selectAll("."+g.cn.columnBoundaryRect).data(b.repeat,b.keyFun);ge.enter().append("rect").classed(g.cn.columnBoundaryRect,!0).attr("fill","none"),ge.attr("width",function(we){return we.columnWidth+2*u(we)}).attr("height",function(we){return we.calcdata.height+2*u(we)+g.uplift}).attr("x",function(we){return-u(we)}).attr("y",function(we){return-u(we)}),S(null,ue,H)}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1065,"./data_preparation_helper":1066,"./data_split_helpers":1067,"@plotly/d3":58}],1071:[function(_,ae,ie){"use strict";var g=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../components/colorscale/attributes"),b=_("../../plots/domain").attributes,e=_("../pie/attributes"),r=_("../sunburst/attributes"),t=_("./constants"),a=_("../../lib/extend").extendFlat;ae.exports={labels:r.labels,parents:r.parents,values:r.values,branchvalues:r.branchvalues,count:r.count,level:r.level,maxdepth:r.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:a({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:r.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:r.marker.line,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:a({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:r.textinfo,texttemplate:x({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:r.hoverinfo,hovertemplate:g({},{keys:t.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:a({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:r.root,domain:b({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"./constants":1074}],1072:[function(_,ae,ie){"use strict";var g=_("../../plots/plots");ie.name="treemap",ie.plot=function(x,T,b,e){g.plotBasePlot(ie.name,x,T,b,e)},ie.clean=function(x,T,b,e){g.cleanBasePlot(ie.name,x,T,b,e)}},{"../../plots/plots":619}],1073:[function(_,ae,ie){"use strict";var g=_("../sunburst/calc");ie.calc=function(x,T){return g.calc(x,T)},ie.crossTraceCalc=function(x){return g._runCrossTraceCalc("treemap",x)}},{"../sunburst/calc":1047}],1074:[function(_,ae,ie){"use strict";ae.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1075:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes"),T=_("../../components/color"),b=_("../../plots/domain").defaults,e=_("../bar/defaults").handleText,r=_("../bar/constants").TEXTPAD,t=_("../../components/colorscale"),a=t.hasColorscale,n=t.handleDefaults;ae.exports=function(d,s,i,u){function f(k,E){return g.coerce(d,s,x,k,E)}var p=f("labels"),y=f("parents");if(p&&p.length&&y&&y.length){var m=f("values");f(m&&m.length?"branchvalues":"count"),f("level"),f("maxdepth"),"squarify"===f("tiling.packing")&&f("tiling.squarifyratio"),f("tiling.flip"),f("tiling.pad");var l=f("text");f("texttemplate"),s.texttemplate||f("textinfo",Array.isArray(l)?"text+label":"label"),f("hovertext"),f("hovertemplate");var w=f("pathbar.visible");e(d,s,u,f,"auto",{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition");var v=-1!==s.textposition.indexOf("bottom");f("marker.line.width")&&f("marker.line.color",u.paper_bgcolor);var A=f("marker.colors");(s._hasColorscale=a(d,"marker","colors")||(d.marker||{}).coloraxis)?n(d,s,u,f,{prefix:"marker.",cLetter:"c"}):f("marker.depthfade",!(A||[]).length);var M=2*s.textfont.size;f("marker.pad.t",v?M/4:M),f("marker.pad.l",M/4),f("marker.pad.r",M/4),f("marker.pad.b",v?M:M/4),s._hovered={marker:{line:{width:2,color:T.contrast(u.paper_bgcolor)}}},w&&(f("pathbar.thickness",s.pathbar.textfont.size+2*r),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),b(s,u,f),s._length=null}else s.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1071}],1076:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../sunburst/helpers"),T=_("../bar/uniform_text").clearMinTextSize,b=_("../bar/style").resizeText,e=_("./plot_one");ae.exports=function(r,t,a,n,d){var s,i,u=d.type,f=d.drawDescendants,p=r._fullLayout,y=p["_"+u+"layer"],m=!a;T(u,p),(s=y.selectAll("g.trace."+u).data(t,function(l){return l[0].trace.uid})).enter().append("g").classed("trace",!0).classed(u,!0),s.order(),!p.uniformtext.mode&&x.hasTransition(a)?(n&&(i=n()),g.transition().duration(a.duration).ease(a.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}).each(function(){y.selectAll("g.trace").each(function(l){e(r,l,this,a,f)})})):(s.each(function(l){e(r,l,this,a,f)}),p.uniformtext.mode&&b(r,y.selectAll(".trace"),u)),m&&s.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./plot_one":1085,"@plotly/d3":58}],1077:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../lib/svg_text_utils"),e=_("./partition"),r=_("./style").styleOne,t=_("./constants"),a=_("../sunburst/helpers"),n=_("../sunburst/fx");ae.exports=function(d,s,i,u,f){var p=f.barDifY,y=f.width,m=f.height,l=f.viewX,w=f.viewY,v=f.pathSlice,A=f.toMoveInsideSlice,M=f.strTransform,k=f.hasTransition,E=f.handleSlicesExit,P=f.makeUpdateSliceInterpolator,S=f.makeUpdateTextInterpolator,F={},R=d._fullLayout,D=s[0],L=D.trace,B=D.hierarchy,V=y/L._entryDepth,Z=a.listPath(i.data,"id"),Y=e(B.copy(),[y,m],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(Y=Y.filter(function(Q){var $=Z.indexOf(Q.data.id);return-1!==$&&(Q.x0=V*$,Q.x1=V*($+1),Q.y0=p,Q.y1=p+m,Q.onPathbar=!0,!0)})).reverse(),(u=u.data(Y,a.getPtId)).enter().append("g").classed("pathbar",!0),E(u,!0,F,[y,m],v),u.order();var ee=u;k&&(ee=ee.transition().each("end",function(){var Q=g.select(this);a.setSliceCursor(Q,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),ee.each(function(Q){Q._x0=l(Q.x0),Q._x1=l(Q.x1),Q._y0=w(Q.y0),Q._y1=w(Q.y1),Q._hoverX=l(Q.x1-Math.min(y,m)/2),Q._hoverY=w(Q.y1-m/2);var $=g.select(this),K=x.ensureSingle($,"path","surface",function(G){G.style("pointer-events","all")});k?K.transition().attrTween("d",function(G){var re=P(G,!0,F,[y,m]);return function(q){return v(re(q))}}):K.attr("d",v),$.call(n,i,d,s,{styleOne:r,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:d._transitioning}),K.call(r,Q,L,{hovered:!1}),Q._text=(a.getPtLabel(Q)||"").split("<br>").join(" ")||"";var oe=x.ensureSingle($,"g","slicetext"),j=x.ensureSingle(oe,"text","",function(G){G.attr("data-notex",1)}),H=x.ensureUniformFontSize(d,a.determineTextFont(L,Q,R.font,{onPathbar:!0}));j.text(Q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(T.font,H).call(b.convertToTspans,d),Q.textBB=T.bBox(j.node()),Q.transform=A(Q,{fontSize:H.size,onPathbar:!0}),Q.transform.fontSize=H.size,k?j.transition().attrTween("transform",function(G){var re=S(G,!0,F,[y,m]);return function(q){return M(re(q))}}):j.attr("transform",M(Q))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1078:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../lib/svg_text_utils"),e=_("./partition"),r=_("./style").styleOne,t=_("./constants"),a=_("../sunburst/helpers"),n=_("../sunburst/fx"),d=_("../sunburst/plot").formatSliceLabel;ae.exports=function(s,i,u,f,p){var y=p.width,m=p.height,l=p.viewX,w=p.viewY,v=p.pathSlice,A=p.toMoveInsideSlice,M=p.strTransform,k=p.hasTransition,E=p.handleSlicesExit,P=p.makeUpdateSliceInterpolator,S=p.makeUpdateTextInterpolator,F=p.prevEntry,R=s._fullLayout,D=i[0].trace,L=-1!==D.textposition.indexOf("left"),B=-1!==D.textposition.indexOf("right"),V=-1!==D.textposition.indexOf("bottom"),Z=!V&&!D.marker.pad.t||V&&!D.marker.pad.b,Y=e(u,[y,m],{packing:D.tiling.packing,squarifyratio:D.tiling.squarifyratio,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,pad:{inner:D.tiling.pad,top:D.marker.pad.t,left:D.marker.pad.l,right:D.marker.pad.r,bottom:D.marker.pad.b}}).descendants(),ee=1/0,Q=-1/0;Y.forEach(function(H){var G=H.depth;G>=D._maxDepth?(H.x0=H.x1=(H.x0+H.x1)/2,H.y0=H.y1=(H.y0+H.y1)/2):(ee=Math.min(ee,G),Q=Math.max(Q,G))}),f=f.data(Y,a.getPtId),D._maxVisibleLayers=isFinite(Q)?Q-ee+1:0,f.enter().append("g").classed("slice",!0),E(f,!1,{},[y,m],v),f.order();var $=null;if(k&&F){var K=a.getPtId(F);f.each(function(H){null===$&&a.getPtId(H)===K&&($={x0:H.x0,x1:H.x1,y0:H.y0,y1:H.y1})})}var oe=function(){return $||{x0:0,x1:y,y0:0,y1:m}},j=f;return k&&(j=j.transition().each("end",function(){var H=g.select(this);a.setSliceCursor(H,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(H){var G=a.isHeader(H,D);H._x0=l(H.x0),H._x1=l(H.x1),H._y0=w(H.y0),H._y1=w(H.y1),H._hoverX=l(H.x1-D.marker.pad.r),H._hoverY=w(V?H.y1-D.marker.pad.b/2:H.y0+D.marker.pad.t/2);var re=g.select(this),q=x.ensureSingle(re,"path","surface",function(ue){ue.style("pointer-events","all")});k?q.transition().attrTween("d",function(ue){var de=P(ue,!1,oe(),[y,m]);return function(he){return v(de(he))}}):q.attr("d",v),re.call(n,u,s,i,{styleOne:r,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,s,{isTransitioning:s._transitioning}),q.call(r,H,D,{hovered:!1}),H._text=H.x0===H.x1||H.y0===H.y1?"":G?Z?"":a.getPtLabel(H)||"":d(H,u,D,i,R)||"";var te=x.ensureSingle(re,"g","slicetext"),ne=x.ensureSingle(te,"text","",function(ue){ue.attr("data-notex",1)}),le=x.ensureUniformFontSize(s,a.determineTextFont(D,H,R.font));ne.text(H._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":L||G?"start":"middle").call(T.font,le).call(b.convertToTspans,s),H.textBB=T.bBox(ne.node()),H.transform=A(H,{fontSize:le.size,isHeader:G}),H.transform.fontSize=le.size,k?ne.transition().attrTween("transform",function(ue){var de=S(ue,!1,oe(),[y,m]);return function(he){return M(de(he))}}):ne.attr("transform",M(H))}),$}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1079:[function(_,ae,ie){"use strict";ae.exports=function g(x,T,b){var e;b.swapXY&&(e=x.x0,x.x0=x.y0,x.y0=e,e=x.x1,x.x1=x.y1,x.y1=e),b.flipX&&(e=x.x0,x.x0=T[0]-x.x1,x.x1=T[0]-e),b.flipY&&(e=x.y0,x.y0=T[1]-x.y1,x.y1=T[1]-e);var r=x.children;if(r)for(var t=0;t<r.length;t++)g(r[t],T,b)}},{}],1080:[function(_,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"treemap",basePlotModule:_("./base_plot"),categories:[],animatable:!0,attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),style:_("./style").style,colorbar:_("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1071,"./base_plot":1072,"./calc":1073,"./defaults":1075,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1084,"./style":1086}],1081:[function(_,ae,ie){"use strict";ae.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1082:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes");ae.exports=function(T,b){function e(r,t){return g.coerce(T,b,x,r,t)}e("treemapcolorway",b.colorway),e("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1081}],1083:[function(_,ae,ie){"use strict";var g=_("d3-hierarchy"),x=_("./flip_tree");ae.exports=function(T,b,e){var r,t=e.flipX,a=e.flipY,n="dice-slice"===e.packing,d=e.pad[a?"bottom":"top"],s=e.pad[t?"right":"left"],i=e.pad[t?"left":"right"],u=e.pad[a?"top":"bottom"];n&&(r=s,s=d,d=r,r=i,i=u,u=r);var f=g.treemap().tile(function(p,y){switch(p){case"squarify":return g.treemapSquarify.ratio(y);case"binary":return g.treemapBinary;case"dice":return g.treemapDice;case"slice":return g.treemapSlice;default:return g.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(s).paddingRight(i).paddingTop(d).paddingBottom(u).size(n?[b[1],b[0]]:b)(T);return(n||t||a)&&x(f,b,{swapXY:n,flipX:t,flipY:a}),f}},{"./flip_tree":1079,"d3-hierarchy":115}],1084:[function(_,ae,ie){"use strict";var g=_("./draw"),x=_("./draw_descendants");ae.exports=function(T,b,e,r){return g(T,b,e,r,{type:"treemap",drawDescendants:x})}},{"./draw":1076,"./draw_descendants":1078}],1085:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("d3-interpolate").interpolate,T=_("../sunburst/helpers"),b=_("../../lib"),e=_("../bar/constants").TEXTPAD,r=_("../bar/plot").toMoveInsideBar,t=_("../bar/uniform_text").recordMinTextSize,a=_("./constants"),n=_("./draw_ancestors");function d(s){return T.isHierarchyRoot(s)?"":T.getPtId(s)}ae.exports=function(s,i,u,f,p){var y=s._fullLayout,m=i[0],l=m.trace,w="icicle"===l.type,v=m.hierarchy,A=T.findEntryWithLevel(v,l.level),M=g.select(u),k=M.selectAll("g.pathbar"),E=M.selectAll("g.slice");if(!A)return k.remove(),void E.remove();var P=T.isHierarchyRoot(A),S=!y.uniformtext.mode&&T.hasTransition(f),F=T.getMaxDepth(l),R=y._size,D=l.domain,L=R.w*(D.x[1]-D.x[0]),B=R.h*(D.y[1]-D.y[0]),V=L,Z=l.pathbar.thickness,Y=l.marker.line.width+a.gapWithPathbar,ee=l.pathbar.visible?l.pathbar.side.indexOf("bottom")>-1?B+Y:-(Z+Y):0,Q={x0:V,x1:V,y0:ee,y1:ee+Z},$=function(Pe,Ve,qe){var Je=l.tiling.pad,lt=function(tt){return tt-Je<=Ve.x0},He=function(tt){return tt+Je>=Ve.x1},$e=function(tt){return tt-Je<=Ve.y0},et=function(tt){return tt+Je>=Ve.y1};return Pe.x0===Ve.x0&&Pe.x1===Ve.x1&&Pe.y0===Ve.y0&&Pe.y1===Ve.y1?{x0:Pe.x0,x1:Pe.x1,y0:Pe.y0,y1:Pe.y1}:{x0:lt(Pe.x0-Je)?0:He(Pe.x0-Je)?qe[0]:Pe.x0,x1:lt(Pe.x1+Je)?0:He(Pe.x1+Je)?qe[0]:Pe.x1,y0:$e(Pe.y0-Je)?0:et(Pe.y0-Je)?qe[1]:Pe.y0,y1:$e(Pe.y1+Je)?0:et(Pe.y1+Je)?qe[1]:Pe.y1}},K=null,oe={},j={},H=null,G=function(Pe,Ve){return Ve?oe[d(Pe)]:j[d(Pe)]};m.hasMultipleRoots&&P&&F++,l._maxDepth=F,l._backgroundColor=y.paper_bgcolor,l._entryDepth=A.data.depth,l._atRootLevel=P;var q=-L/2+R.l+R.w*(D.x[1]+D.x[0])/2,te=-B/2+R.t+R.h*(1-(D.y[1]+D.y[0])/2),ne=function(Pe){return q+Pe},le=function(Pe){return te+Pe},ue=le(0),de=ne(0),he=function(Pe){return de+Pe},be=function(Pe){return ue+Pe};function ge(Pe,Ve){return Pe+","+Ve}var we=he(0),ke=function(Pe){Pe.x=Math.max(we,Pe.x)},De=l.pathbar.edgeshape,Ee=function(Pe,Ve){var qe=Pe.x0,Je=Pe.x1,lt=Pe.y0,He=Pe.y1,$e=Pe.textBB,et=function(Rt){return-1!==l.textposition.indexOf(Rt)},tt=et("bottom"),ft=et("top")||Ve.isHeader&&!tt?"start":tt?"end":"middle",bt=et("right"),Ct=et("left")||Ve.onPathbar?-1:bt?1:0,Vt=l[w?"tiling":"marker"].pad;if(Ve.isHeader){if((qe+=(w?Vt:Vt.l)-e)>=(Je-=(w?Vt:Vt.r)-e)){var Ft=(qe+Je)/2;qe=Ft,Je=Ft}var ht;tt?lt<(ht=He-(w?Vt:Vt.b))&&ht<He&&(lt=ht):lt<(ht=lt+(w?Vt:Vt.t))&&ht<He&&(He=ht)}var ut=r(qe,Je,lt,He,$e,{isHorizontal:!1,constrained:!0,angle:0,anchor:ft,leftToRight:Ct});return ut.fontSize=Ve.fontSize,ut.targetX=ne(ut.targetX),ut.targetY=le(ut.targetY),isNaN(ut.targetX)||isNaN(ut.targetY)?{}:(qe!==Je&&lt!==He&&t(l.type,ut,y),{scale:ut.scale,rotate:ut.rotate,textX:ut.textX,textY:ut.textY,anchorX:ut.anchorX,anchorY:ut.anchorY,targetX:ut.targetX,targetY:ut.targetY})},Re=function(Pe,Ve){for(var qe,Je=0,lt=Pe;!qe&&Je<F;)Je++,(lt=lt.parent)?qe=G(lt,Ve):Je=F;return qe||{}},ve=function(Pe,Ve,qe,Je,lt){var He,$e=G(Pe,Ve);if($e)He=$e;else if(Ve)He=Q;else if(K)if(Pe.parent){var et=H||qe;et&&!Ve?He=$(Pe,et,Je):b.extendFlat(He={},Re(Pe,Ve))}else He=b.extendFlat({},Pe),w&&("h"===lt.orientation?lt.flipX?He.x0=Pe.x1:He.x1=0:lt.flipY?He.y0=Pe.y1:He.y1=0);else He={};return x(He,{x0:Pe.x0,x1:Pe.x1,y0:Pe.y0,y1:Pe.y1})},Te=function(Pe,Ve,qe,Je){var lt=G(Pe,Ve),He={},$e=function(Pe,Ve,qe,Je){return Ve?oe[d(v)]||Q:Pe.data.depth-A.data.depth<F?$(Pe,j[l.level]||qe,Je):{}}(Pe,Ve,qe,Je);b.extendFlat(He,{transform:Ee({x0:$e.x0,x1:$e.x1,y0:$e.y0,y1:$e.y1,textBB:Pe.textBB,_text:Pe._text},{isHeader:T.isHeader(Pe,l)})}),lt?He=lt:Pe.parent&&b.extendFlat(He,Re(Pe,Ve));var et=Pe.transform;return Pe.x0!==Pe.x1&&Pe.y0!==Pe.y1&&t(l.type,et,y),x(He,{transform:{scale:et.scale,rotate:et.rotate,textX:et.textX,textY:et.textY,anchorX:et.anchorX,anchorY:et.anchorY,targetX:et.targetX,targetY:et.targetY}})},Ie=function(Pe,Ve,qe,Je,lt){var He=Je[0],$e=Je[1];S?Pe.exit().transition().each(function(){var et=g.select(this);et.select("path.surface").transition().attrTween("d",function(tt){var ft=function(bt,Ct,Vt,Ft){var ht,ut=G(bt,Ct);if(Ct)ht=Q;else{var Rt=G(A,Ct);ht=Rt?$(bt,Rt,Ft):{}}return x(ut,ht)}(tt,Ve,0,[He,$e]);return function(bt){return lt(ft(bt))}}),et.select("g.slicetext").attr("opacity",0)}).remove():Pe.exit().remove()},Ce=function(Pe){var Ve=Pe.transform;return Pe.x0!==Pe.x1&&Pe.y0!==Pe.y1&&t(l.type,Ve,y),b.getTextTransform({textX:Ve.textX,textY:Ve.textY,anchorX:Ve.anchorX,anchorY:Ve.anchorY,targetX:Ve.targetX,targetY:Ve.targetY,scale:Ve.scale,rotate:Ve.rotate})};S&&(k.each(function(Pe){oe[d(Pe)]={x0:Pe.x0,x1:Pe.x1,y0:Pe.y0,y1:Pe.y1},Pe.transform&&(oe[d(Pe)].transform={textX:Pe.transform.textX,textY:Pe.transform.textY,anchorX:Pe.transform.anchorX,anchorY:Pe.transform.anchorY,targetX:Pe.transform.targetX,targetY:Pe.transform.targetY,scale:Pe.transform.scale,rotate:Pe.transform.rotate})}),E.each(function(Pe){j[d(Pe)]={x0:Pe.x0,x1:Pe.x1,y0:Pe.y0,y1:Pe.y1},Pe.transform&&(j[d(Pe)].transform={textX:Pe.transform.textX,textY:Pe.transform.textY,anchorX:Pe.transform.anchorX,anchorY:Pe.transform.anchorY,targetX:Pe.transform.targetX,targetY:Pe.transform.targetY,scale:Pe.transform.scale,rotate:Pe.transform.rotate}),!K&&T.isEntry(Pe)&&(K=Pe)})),H=p(s,i,A,E,{width:L,height:B,viewX:ne,viewY:le,pathSlice:function(Pe){var Ve=ne(Pe.x0),qe=ne(Pe.x1),Je=le(Pe.y0),lt=le(Pe.y1);return qe-Ve&&lt-Je?"M"+ge(Ve,Je+0)+"L"+ge(qe-0,Je)+"L"+ge(qe,lt-0)+"L"+ge(Ve+0,lt)+"Z":""},toMoveInsideSlice:Ee,prevEntry:K,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Ie,hasTransition:S,strTransform:Ce}),l.pathbar.visible?n(s,i,A,k,{barDifY:ee,width:V,height:Z,viewX:he,viewY:be,pathSlice:function(Pe){var Ve=he(Math.max(Math.min(Pe.x0,Pe.x0),0)),qe=he(Math.min(Math.max(Pe.x1,Pe.x1),V)),Je=be(Pe.y0),lt=be(Pe.y1),He=Z/2,$e={},et={};$e.x=Ve,et.x=qe,$e.y=et.y=(Je+lt)/2;var tt={x:Ve,y:Je},ft={x:qe,y:Je},bt={x:qe,y:lt},Ct={x:Ve,y:lt};return">"===De?(tt.x-=He,ft.x-=He,bt.x-=He,Ct.x-=He):"/"===De?(bt.x-=He,Ct.x-=He,$e.x-=He/2,et.x-=He/2):"\\"===De?(tt.x-=He,ft.x-=He,$e.x-=He/2,et.x-=He/2):"<"===De&&($e.x-=He,et.x-=He),ke(tt),ke(Ct),ke($e),ke(ft),ke(bt),ke(et),"M"+ge(tt.x,tt.y)+"L"+ge(ft.x,ft.y)+"L"+ge(et.x,et.y)+"L"+ge(bt.x,bt.y)+"L"+ge(Ct.x,Ct.y)+"L"+ge($e.x,$e.y)+"Z"},toMoveInsideSlice:Ee,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Ie,hasTransition:S,strTransform:Ce}):k.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./constants":1074,"./draw_ancestors":1077,"@plotly/d3":58,"d3-interpolate":116}],1086:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/color"),T=_("../../lib"),b=_("../sunburst/helpers"),e=_("../bar/uniform_text").resizeText;function r(t,a,n,d){var s,i,u=(d||{}).hovered,f=a.data.data,p=f.i,y=f.color,m=b.isHierarchyRoot(a),l=1;if(u)s=n._hovered.marker.line.color,i=n._hovered.marker.line.width;else if(m&&y===n.root.color)l=100,s="rgba(0,0,0,0)",i=0;else if(s=T.castOption(n,p,"marker.line.color")||x.defaultLine,i=T.castOption(n,p,"marker.line.width")||0,!n._hasColorscale&&!a.onPathbar){var w=n.marker.depthfade;if(w){var v,A=x.combine(x.addOpacity(n._backgroundColor,.75),y);if(!0===w){var M=b.getMaxDepth(n);v=isFinite(M)?b.isLeaf(a)?0:n._maxVisibleLayers-(a.data.depth-n._entryDepth):a.data.height+1}else v=a.data.depth-n._entryDepth,n._atRootLevel||v++;if(v>0)for(var k=0;k<v;k++)y=x.combine(x.addOpacity(A,.5*k/v),y)}}t.style("stroke-width",i).call(x.fill,y).call(x.stroke,s).style("opacity",l)}ae.exports={style:function(t){var a=t._fullLayout._treemaplayer.selectAll(".trace");e(t,a,"treemap"),a.each(function(n){var d=g.select(this),s=n[0].trace;d.style("opacity",s.opacity),d.selectAll("path.surface").each(function(i){g.select(this).call(r,i,s,{hovered:!1})})})},styleOne:r}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1051,"@plotly/d3":58}],1087:[function(_,ae,ie){"use strict";var g=_("../box/attributes"),x=_("../../lib/extend").extendFlat,T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat;ae.exports={y:g.y,x:g.x,x0:g.x0,y0:g.y0,xhoverformat:T("x"),yhoverformat:T("y"),name:x({},g.name,{}),orientation:x({},g.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:g.fillcolor,points:x({},g.boxpoints,{}),jitter:x({},g.jitter,{}),pointpos:x({},g.pointpos,{}),width:x({},g.width,{}),marker:g.marker,text:g.text,hovertext:g.hovertext,hovertemplate:g.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup,selected:g.selected,unselected:g.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1088:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../box/calc"),b=_("./helpers"),e=_("../../constants/numerical").BADNUM;function r(a,n,d){var s=n.max-n.min;if(!s)return a.bandwidth?a.bandwidth:0;if(a.bandwidth)return Math.max(a.bandwidth,s/1e4);var f,i=d.length,u=g.stdev(d,i-1,n.mean);return Math.max((f=i,1.059*Math.min(u,(n.q3-n.q1)/1.349)*Math.pow(f,-.2)),s/100)}function t(a,n,d,s){var i,u=a.spanmode,f=a.span||[],y=[n.min-2*s,n.max+2*s];function m(w){var v=f[w],A="multicategory"===d.type?d.r2c(v):d.d2c(v,0,a[n.valLetter+"calendar"]);return A===e?y[w]:A}var l={type:"linear",range:i="soft"===u?y:"hard"===u?[n.min,n.max]:[m(0),m(1)]};return x.setConvert(l),l.cleanRange(),i}ae.exports=function(a,n){var d=T(a,n);if(d[0].t.empty)return d;for(var s=a._fullLayout,i=x.getFromId(a,n["h"===n.orientation?"xaxis":"yaxis"]),u=1/0,f=-1/0,p=0,y=0,m=0;m<d.length;m++){var l=d[m],w=l.pts.map(b.extractVal),v=l.bandwidth=r(n,l,w),A=l.span=t(n,l,i,v);if(l.min===l.max&&0===v)A=l.span=[l.min,l.max],l.density=[{v:1,t:A[0]}],l.bandwidth=v,p=Math.max(p,1);else{var M=A[1]-A[0],k=Math.ceil(M/(v/3)),E=M/k;if(!isFinite(E)||!isFinite(k))return g.error("Something went wrong with computing the violin span"),d[0].t.empty=!0,d;var P=b.makeKDE(l,n,w);l.density=new Array(k);for(var S=0,F=A[0];F<A[1]+E/2;S++,F+=E){var R=P(F);l.density[S]={v:R,t:F},p=Math.max(p,R)}}y=Math.max(y,w.length),u=Math.min(u,A[0]),f=Math.max(f,A[1])}var D=x.findExtremes(i,[u,f],{padded:!0});if(n._extremes[i._id]=D,n.width)d[0].t.maxKDE=p;else{var L=s._violinScaleGroupStats,B=n.scalegroup,V=L[B];V?(V.maxKDE=Math.max(V.maxKDE,p),V.maxCount=Math.max(V.maxCount,y)):L[B]={maxKDE:p,maxCount:y}}return d[0].t.labels.kde=g._(a,"kde:"),d}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1091}],1089:[function(_,ae,ie){"use strict";var g=_("../box/cross_trace_calc").setPositionOffset,x=["v","h"];ae.exports=function(T,b){for(var e=T.calcdata,r=b.xaxis,t=b.yaxis,a=0;a<x.length;a++){for(var n=x[a],d="h"===n?t:r,s=[],i=0;i<e.length;i++){var u=e[i],p=u[0].trace;!0!==p.visible||"violin"!==p.type||u[0].t.empty||p.orientation!==n||p.xaxis!==r._id||p.yaxis!==t._id||s.push(i)}g("violin",T,s,d)}}},{"../box/cross_trace_calc":675}],1090:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../components/color"),T=_("../box/defaults"),b=_("./attributes");ae.exports=function(e,r,t,a){function n(M,k){return g.coerce(e,r,b,M,k)}function d(M,k){return g.coerce2(e,r,b,M,k)}if(T.handleSampleDefaults(e,r,n,a),!1!==r.visible){n("bandwidth"),n("side"),n("width")||(n("scalegroup",r.name),n("scalemode"));var s,i=n("span");Array.isArray(i)&&(s="manual"),n("spanmode",s);var u=n("line.color",(e.marker||{}).color||t),f=n("line.width"),p=n("fillcolor",x.addOpacity(r.line.color,.5));T.handlePointsDefaults(e,r,n,{prefix:""});var y=d("box.width"),m=d("box.fillcolor",p),l=d("box.line.color",u),w=d("box.line.width",f);n("box.visible",Boolean(y||m||l||w))||(r.box={visible:!1});var v=d("meanline.color",u),A=d("meanline.width",f);n("meanline.visible",Boolean(v||A))||(r.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1087}],1091:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=function(T){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*T*T)};ie.makeKDE=function(T,b,e){var r=e.length,t=x,a=T.bandwidth,n=1/(r*a);return function(d){for(var s=0,i=0;i<r;i++)s+=t((d-e[i])/a);return n*s}},ie.getPositionOnKdePath=function(T,b,e){var r,t;"h"===b.orientation?(r="y",t="x"):(r="x",t="y");var a=g.findPointOnPath(T.path,e,t,{pathLength:T.pathLength}),n=T.posCenterPx,d=a[r];return[d,"both"===b.side?2*n-d:n]},ie.getKdeValue=function(T,b,e){var r=T.pts.map(ie.extractVal);return ie.makeKDE(T,b,r)(e)/T.posDensityScale},ie.extractVal=function(T){return T.v}},{"../../lib":503}],1092:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../box/hover"),b=_("./helpers");ae.exports=function(e,r,t,a,n){n||(n={});var d,s,i=n.hoverLayer,u=e.cd,f=u[0].trace,p=f.hoveron,y=-1!==p.indexOf("violins"),m=-1!==p.indexOf("kde"),l=[];if(y||m){var w=T.hoverOnBoxes(e,r,t,a);if(m&&w.length>0){var v,A,M,k,E,P=e.xa,S=e.ya;"h"===f.orientation?(E=r,v="y",M=S,A="x",k=P):(E=t,v="x",M=P,A="y",k=S);var F=u[e.index];if(E>=F.span[0]&&E<=F.span[1]){var R=g.extendFlat({},e),D=k.c2p(E,!0),L=b.getKdeValue(F,f,E),B=b.getPositionOnKdePath(F,f,D),V=M._offset,Z=M._length;R[v+"0"]=B[0],R[v+"1"]=B[1],R[A+"0"]=R[A+"1"]=D,R[A+"Label"]=A+": "+x.hoverLabelText(k,E,f[A+"hoverformat"])+", "+u[0].t.labels.kde+" "+L.toFixed(3),R.spikeDistance=w[0].spikeDistance;var Y=v+"Spike";R[Y]=w[0][Y],w[0].spikeDistance=void 0,w[0][Y]=void 0,R.hovertemplate=!1,l.push(R),(s={stroke:e.color})[v+"1"]=g.constrain(V+B[0],V,V+Z),s[v+"2"]=g.constrain(V+B[1],V,V+Z),s[A+"1"]=s[A+"2"]=k._offset+D}}y&&(l=l.concat(w))}-1!==p.indexOf("points")&&(d=T.hoverOnPoints(e,r,t));var ee=i.selectAll(".violinline-"+f.uid).data(s?[0]:[]);return ee.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5),ee.exit().remove(),ee.attr(s),"closest"===a?d?[d]:l:(d&&l.push(d),l)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1091}],1093:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc"),plot:_("./plot"),style:_("./style"),styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../box/select"),moduleType:"trace",name:"violin",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":950,"./attributes":1087,"./calc":1088,"./cross_trace_calc":1089,"./defaults":1090,"./hover":1092,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1096,"./style":1097}],1094:[function(_,ae,ie){"use strict";var g=_("../box/layout_attributes"),x=_("../../lib").extendFlat;ae.exports={violinmode:x({},g.boxmode,{}),violingap:x({},g.boxgap,{}),violingroupgap:x({},g.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1095:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes"),T=_("../box/layout_defaults");ae.exports=function(b,e,r){T._supply(b,e,r,function(t,a){return g.coerce(b,e,x,t,a)},"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1094}],1096:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../box/plot"),e=_("../scatter/line_points"),r=_("./helpers");ae.exports=function(t,a,n,d){var s=t._fullLayout,i=a.xaxis,u=a.yaxis;function f(p){var y=e(p,{xaxis:i,yaxis:u,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return T.smoothopen(y[0],1)}x.makeTraceGroups(d,n,"trace violins").each(function(p){var y=g.select(this),m=p[0],l=m.t,w=m.trace;if(!0!==w.visible||l.empty)y.remove();else{var v=l.bPos,A=l.bdPos,M=a[l.valLetter+"axis"],k=a[l.posLetter+"axis"],E="both"===w.side,P=E||"positive"===w.side,S=E||"negative"===w.side,F=y.selectAll("path.violin").data(x.identity);F.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),F.exit().remove(),F.each(function(ee){var Q,$,K,oe,j,H,G,re,q=g.select(this),te=ee.density,ne=te.length,le=k.c2l(ee.pos+v,!0),ue=k.l2p(le);if(w.width)Q=l.maxKDE/A;else{var de=s._violinScaleGroupStats[w.scalegroup];Q="count"===w.scalemode?de.maxKDE/A*(de.maxCount/ee.pts.length):de.maxKDE/A}if(P){for(G=new Array(ne),j=0;j<ne;j++)(re=G[j]={})[l.posLetter]=le+te[j].v/Q,re[l.valLetter]=M.c2l(te[j].t,!0);$=f(G)}if(S){for(G=new Array(ne),H=0,j=ne-1;H<ne;H++,j--)(re=G[H]={})[l.posLetter]=le-te[j].v/Q,re[l.valLetter]=M.c2l(te[j].t,!0);K=f(G)}if(E)oe=$+"L"+K.substr(1)+"Z";else{var he=[ue,M.c2p(te[0].t)],be=[ue,M.c2p(te[ne-1].t)];"h"===w.orientation&&(he.reverse(),be.reverse()),oe=P?"M"+he+"L"+$.substr(1)+"L"+be:"M"+be+"L"+K.substr(1)+"L"+he}q.attr("d",oe),ee.posCenterPx=ue,ee.posDensityScale=Q*A,ee.path=q.node(),ee.pathLength=ee.path.getTotalLength()/(E?2:1)});var R,D,L,B=w.box,V=B.width,Z=(B.line||{}).width;E?(R=A*V,D=0):P?(R=[0,A*V/2],D=Z*{x:1,y:-1}[l.posLetter]):(R=[A*V/2,0],D=Z*{x:-1,y:1}[l.posLetter]),b.plotBoxAndWhiskers(y,{pos:k,val:M},w,{bPos:v,bdPos:R,bPosPxOffset:D}),b.plotBoxMean(y,{pos:k,val:M},w,{bPos:v,bdPos:R,bPosPxOffset:D}),!w.box.visible&&w.meanline.visible&&(L=x.identity);var Y=y.selectAll("path.meanline").data(L||[]);Y.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),Y.exit().remove(),Y.each(function(ee){var Q=M.c2p(ee.mean,!0),$=r.getPositionOnKdePath(ee,w,Q);g.select(this).attr("d","h"===w.orientation?"M"+Q+","+$[0]+"V"+$[1]:"M"+$[0]+","+Q+"H"+$[1])}),b.plotPoints(y,{x:i,y:u},w,l)}})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":940,"./helpers":1091,"@plotly/d3":58}],1097:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/color"),T=_("../scatter/style").stylePoints;ae.exports=function(b){var e=g.select(b).selectAll("g.trace.violins");e.style("opacity",function(r){return r[0].trace.opacity}),e.each(function(r){var t=r[0].trace,a=g.select(this),n=t.box||{},d=n.line||{},s=t.meanline||{},i=s.width;a.selectAll("path.violin").style("stroke-width",t.line.width+"px").call(x.stroke,t.line.color).call(x.fill,t.fillcolor),a.selectAll("path.box").style("stroke-width",d.width+"px").call(x.stroke,d.color).call(x.fill,n.fillcolor);var u={"stroke-width":i+"px","stroke-dasharray":2*i+"px,"+i+"px"};a.selectAll("path.mean").style(u).call(x.stroke,s.color),a.selectAll("path.meanline").style(u).call(x.stroke,s.color),T(a,t,b)})}},{"../../components/color":366,"../scatter/style":950,"@plotly/d3":58}],1098:[function(_,ae,ie){"use strict";var g=_("../../components/colorscale/attributes"),x=_("../isosurface/attributes"),T=_("../surface/attributes"),b=_("../../plots/attributes"),e=_("../../lib/extend").extendFlat,r=_("../../plot_api/edit_types").overrideAll,t=ae.exports=r(e({x:x.x,y:x.y,z:x.z,value:x.value,isomin:x.isomin,isomax:x.isomax,surface:x.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:x.slices,caps:x.caps,text:x.text,hovertext:x.hovertext,xhoverformat:x.xhoverformat,yhoverformat:x.yhoverformat,zhoverformat:x.zhoverformat,valuehoverformat:x.valuehoverformat,hovertemplate:x.hovertemplate},g("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:x.colorbar,opacity:x.opacity,opacityscale:T.opacityscale,lightposition:x.lightposition,lighting:x.lighting,flatshading:x.flatshading,contour:x.contour,hoverinfo:e({},b.hoverinfo),showlegend:e({},b.showlegend,{dflt:!1})}),"calc","nested");t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1057}],1099:[function(_,ae,ie){"use strict";var g=_("../../../stackgl_modules").gl_mesh3d,x=_("../../lib/gl_format_color").parseColorScale,T=_("../../lib/str2rgbarray"),b=_("../../components/colorscale").extractOpts,e=_("../../plots/gl3d/zip3"),r=_("../isosurface/convert").findNearestOnAxis,t=_("../isosurface/convert").generateIsoMeshes;function a(d,s,i){this.scene=d,this.uid=i,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var n=a.prototype;n.handlePick=function(d){if(d.object===this.mesh){var s=d.data.index,u=this.data._meshY[s],f=this.data._meshZ[s],p=this.data._Ys.length,y=this.data._Zs.length,m=r(this.data._meshX[s],this.data._Xs).id,l=r(u,this.data._Ys).id,w=r(f,this.data._Zs).id,v=d.index=w+y*l+y*p*m;d.traceCoordinate=[this.data._meshX[v],this.data._meshY[v],this.data._meshZ[v],this.data._value[v]];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&void 0!==A[v]?d.textLabel=A[v]:A&&(d.textLabel=A),!0}},n.update=function(d){var s=this.scene,i=s.fullSceneLayout;function u(y,m,l,w){return m.map(function(v){return y.d2l(v,0,w)*l})}this.data=t(d);var f={positions:e(u(i.xaxis,d._meshX,s.dataScale[0],d.xcalendar),u(i.yaxis,d._meshY,s.dataScale[1],d.ycalendar),u(i.zaxis,d._meshZ,s.dataScale[2],d.zcalendar)),cells:e(d._meshI,d._meshJ,d._meshK),lightPosition:[d.lightposition.x,d.lightposition.y,d.lightposition.z],ambient:d.lighting.ambient,diffuse:d.lighting.diffuse,specular:d.lighting.specular,roughness:d.lighting.roughness,fresnel:d.lighting.fresnel,vertexNormalsEpsilon:d.lighting.vertexnormalsepsilon,faceNormalsEpsilon:d.lighting.facenormalsepsilon,opacity:d.opacity,opacityscale:d.opacityscale,contourEnable:d.contour.show,contourColor:T(d.contour.color).slice(0,3),contourWidth:d.contour.width,useFacetNormals:d.flatshading},p=b(d);f.vertexIntensity=d._meshIntensity,f.vertexIntensityBounds=[p.min,p.max],f.colormap=x(d),this.mesh.update(f)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ae.exports=function(d,s){var u=g({gl:d.glplot.gl}),f=new a(d,u,s.uid);return u._trace=f,f.update(s),d.glplot.add(u),f}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1100:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./attributes"),T=_("../isosurface/defaults").supplyIsoDefaults,b=_("../surface/defaults").opacityscaleDefaults;ae.exports=function(e,r,t,a){function n(d,s){return g.coerce(e,r,x,d,s)}T(e,r,t,a,n),b(e,r,a,n)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1060,"./attributes":1098}],1101:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:_("./convert"),moduleType:"trace",name:"volume",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1098,"./convert":1099,"./defaults":1100}],1102:[function(_,ae,ie){"use strict";var g=_("../bar/attributes"),x=_("../scatter/attributes").line,T=_("../../plots/attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../plots/template_attributes").hovertemplateAttrs,r=_("../../plots/template_attributes").texttemplateAttrs,t=_("./constants"),a=_("../../lib/extend").extendFlat,n=_("../../components/color");function d(s){return{marker:{color:a({},g.marker.color,{arrayOk:!1,editType:"style"}),line:{color:a({},g.marker.line.color,{arrayOk:!1,editType:"style"}),width:a({},g.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ae.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:g.hovertext,hovertemplate:e({},{keys:t.eventDataKeys}),hoverinfo:a({},T.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:r({editType:"plot"},{keys:t.eventDataKeys.concat(["label"])}),text:g.text,textposition:g.textposition,insidetextanchor:g.insidetextanchor,textangle:g.textangle,textfont:g.textfont,insidetextfont:g.insidetextfont,outsidetextfont:g.outsidetextfont,constraintext:g.constraintext,cliponaxis:g.cliponaxis,orientation:g.orientation,offset:g.offset,width:g.width,increasing:d(),decreasing:d(),totals:d(),connector:{line:{color:a({},x.color,{dflt:n.defaultLine}),width:a({},x.width,{editType:"plot"}),dash:x.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":1104}],1103:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes"),x=_("../../plots/cartesian/align_period"),T=_("../../lib").mergeArray,b=_("../scatter/calc_selection"),e=_("../../constants/numerical").BADNUM;function r(a){return"a"===a||"absolute"===a}function t(a){return"t"===a||"total"===a}ae.exports=function(a,n){var d,s,i,u,f,p,y=g.getFromId(a,n.xaxis||"x"),m=g.getFromId(a,n.yaxis||"y");"h"===n.orientation?(d=y.makeCalcdata(n,"x"),i=m.makeCalcdata(n,"y"),u=x(n,m,"y",i),f=!!n.yperiodalignment,p="y"):(d=m.makeCalcdata(n,"y"),i=y.makeCalcdata(n,"x"),u=x(n,y,"x",i),f=!!n.xperiodalignment,p="x"),s=u.vals;for(var l,w=Math.min(s.length,d.length),v=new Array(w),A=0,M=!1,k=0;k<w;k++){var E=d[k]||0,P=!1;(d[k]!==e||t(n.measure[k])||r(n.measure[k]))&&k+1<w&&(d[k+1]!==e||t(n.measure[k+1])||r(n.measure[k+1]))&&(P=!0);var S=v[k]={i:k,p:s[k],s:E,rawS:E,cNext:P};r(n.measure[k])?(A=S.s,S.isSum=!0,S.dir="totals",S.s=A):t(n.measure[k])?(S.isSum=!0,S.dir="totals",S.s=A):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",S.s=A+(l=S.s),A+=l),"totals"===S.dir&&(M=!0),f&&(v[k].orig_p=i[k],v[k][p+"End"]=u.ends[k],v[k][p+"Start"]=u.starts[k]),n.ids&&(S.id=String(n.ids[k])),S.v=(n.base||0)+A}return v.length&&(v[0].hasTotals=M),T(n.text,v,"tx"),T(n.hovertext,v,"htx"),b(v,n),v}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928}],1104:[function(_,ae,ie){"use strict";ae.exports={eventDataKeys:["initial","delta","final"]}},{}],1105:[function(_,ae,ie){"use strict";var g=_("../bar/cross_trace_calc").setGroupPositions;ae.exports=function(x,T){var b,e,r=x._fullLayout,t=x._fullData,a=x.calcdata,n=T.xaxis,d=T.yaxis,s=[],i=[],u=[];for(e=0;e<t.length;e++){var f=t[e];!0===f.visible&&f.xaxis===n._id&&f.yaxis===d._id&&"waterfall"===f.type&&(b=a[e],"h"===f.orientation?u.push(b):i.push(b),s.push(b))}var p={mode:r.waterfallmode,norm:r.waterfallnorm,gap:r.waterfallgap,groupgap:r.waterfallgroupgap};for(g(x,n,d,i,p),g(x,d,n,u,p),e=0;e<s.length;e++){b=s[e];for(var y=0;y<b.length;y++){var m=b[y];!1===m.isSum&&(m.s0+=0===y?0:b[y-1].s),y+1<b.length&&(b[y].nextP0=b[y+1].p0,b[y].nextS0=b[y+1].s0)}}}},{"../bar/cross_trace_calc":651}],1106:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("../bar/defaults").handleGroupingDefaults,T=_("../bar/defaults").handleText,b=_("../scatter/xy_defaults"),e=_("../scatter/period_defaults"),r=_("./attributes"),t=_("../../components/color"),a=_("../../constants/delta.js"),n=a.INCREASING.COLOR,d=a.DECREASING.COLOR;function s(i,u,f){i(u+".marker.color",f),i(u+".marker.line.color",t.defaultLine),i(u+".marker.line.width")}ae.exports={supplyDefaults:function(i,u,f,p){function y(l,w){return g.coerce(i,u,r,l,w)}if(b(i,u,p,y)){e(i,u,p,y),y("xhoverformat"),y("yhoverformat"),y("measure"),y("orientation",u.x&&!u.y?"h":"v"),y("base"),y("offset"),y("width"),y("text"),y("hovertext"),y("hovertemplate");var m=y("textposition");T(i,u,p,y,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==u.textposition&&(y("texttemplate"),u.texttemplate||y("textinfo")),s(y,"increasing",n),s(y,"decreasing",d),s(y,"totals","#4499FF"),y("connector.visible")&&(y("connector.mode"),y("connector.line.width")&&(y("connector.line.color"),y("connector.line.dash")))}else u.visible=!1},crossTraceDefaults:function(i,u){var f,p;function y(l){return g.coerce(p._input,p,r,l)}if("group"===u.waterfallmode)for(var m=0;m<i.length;m++)f=(p=i[m])._input,x(f,p,u,y)}}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":1102}],1107:[function(_,ae,ie){"use strict";ae.exports=function(g,x){return g.x="xVal"in x?x.xVal:x.x,g.y="yVal"in x?x.yVal:x.y,"initial"in x&&(g.initial=x.initial),"delta"in x&&(g.delta=x.delta),"final"in x&&(g.final=x.final),x.xa&&(g.xaxis=x.xa),x.ya&&(g.yaxis=x.ya),g}},{}],1108:[function(_,ae,ie){"use strict";var g=_("../../plots/cartesian/axes").hoverLabelText,x=_("../../components/color").opacity,T=_("../bar/hover").hoverOnBars,b=_("../../constants/delta.js"),e=b.INCREASING.SYMBOL,r=b.DECREASING.SYMBOL;ae.exports=function(t,a,n,d,s){var D,L,B,V,i=T(t,a,n,d,s);if(i){var u=i.cd,f=u[0].trace,p="h"===f.orientation,y=p?"x":"y",m=p?t.xa:t.ya,l=u[i.index],w=l.isSum?l.b+l.s:l.rawS;if(!l.isSum){i.initial=l.b+l.s-w,i.delta=w,i.final=i.initial+i.delta;var v=S(Math.abs(i.delta));i.deltaLabel=w<0?"("+v+")":v,i.finalLabel=S(i.final),i.initialLabel=S(i.initial)}var A=l.hi||f.hoverinfo,M=[];if(A&&"none"!==A&&"skip"!==A){var k="all"===A,E=A.split("+"),P=function(F){return k||-1!==E.indexOf(F)};l.isSum||(!P("final")||P(p?"x":"y")||M.push(i.finalLabel),P("delta")&&M.push(w<0?i.deltaLabel+" "+r:i.deltaLabel+" "+e),P("initial")&&M.push("Initial: "+i.initialLabel))}return M.length&&(i.extraText=M.join("<br>")),i.color=(B=(D=f[l.dir].marker).line.color,V=D.line.width,x(L=D.color)?L:x(B)&&V?B:void 0),[i]}function S(F){return g(m,F,f[y+"hoverformat"])}}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1109:[function(_,ae,ie){"use strict";ae.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc"),plot:_("./plot"),style:_("./style").style,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1102,"./calc":1103,"./cross_trace_calc":1105,"./defaults":1106,"./event_data":1107,"./hover":1108,"./layout_attributes":1110,"./layout_defaults":1111,"./plot":1112,"./style":1113}],1110:[function(_,ae,ie){"use strict";ae.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1111:[function(_,ae,ie){"use strict";var g=_("../../lib"),x=_("./layout_attributes");ae.exports=function(T,b,e){var r=!1;function t(d,s){return g.coerce(T,b,x,d,s)}for(var a=0;a<e.length;a++){var n=e[a];if(n.visible&&"waterfall"===n.type){r=!0;break}}r&&(t("waterfallmode"),t("waterfallgap",.2),t("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1110}],1112:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../constants/numerical").BADNUM,e=_("../bar/plot"),r=_("../bar/uniform_text").clearMinTextSize;ae.exports=function(t,a,n,d){var i,u,y,m,s=t._fullLayout;r("waterfall",s),e.plot(t,a,n,d,{mode:s.waterfallmode,norm:s.waterfallmode,gap:s.waterfallgap,groupgap:s.waterfallgroupgap}),i=t,y=(u=a).xaxis,m=u.yaxis,x.makeTraceGroups(d,n,"trace bars").each(function(l){var w=g.select(this),v=l[0].trace,A=x.ensureSingle(w,"g","lines");if(v.connector&&v.connector.visible){var M="h"===v.orientation,k=v.connector.mode,E=A.selectAll("g.line").data(x.identity);E.enter().append("g").classed("line",!0),E.exit().remove();var P=E.size();E.each(function(S,F){if(F===P-1||S.cNext){var R=(Z=y,Y=m,$=[],oe=(ee=M)?Y:Z,(Q=[])[0]=(K=ee?Z:Y).c2p((V=S).s0,!0),$[0]=oe.c2p(V.p0,!0),Q[1]=K.c2p(V.s1,!0),$[1]=oe.c2p(V.p1,!0),Q[2]=K.c2p(V.nextS0,!0),$[2]=oe.c2p(V.nextP0,!0),ee?[Q,$]:[$,Q]),D=R[0],L=R[1],B="";D[0]!==b&&L[0]!==b&&D[1]!==b&&L[1]!==b&&("spanning"===k&&!S.isSum&&F>0&&(B+=M?"M"+D[0]+","+L[1]+"V"+L[0]:"M"+D[1]+","+L[0]+"H"+D[0]),"between"!==k&&(S.isSum||F<P-1)&&(B+=M?"M"+D[1]+","+L[0]+"V"+L[1]:"M"+D[0]+","+L[1]+"H"+D[1]),D[2]!==b&&L[2]!==b&&(B+=M?"M"+D[1]+","+L[1]+"V"+L[2]:"M"+D[1]+","+L[1]+"H"+D[2])),""===B&&(B="M0,0Z"),x.ensureSingle(g.select(this),"path").attr("d",B).call(T.setClipUrl,u.layerClipId,i)}var V,Z,Y,ee,Q,$,K,oe})}else A.remove()})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1113:[function(_,ae,ie){"use strict";var g=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color"),b=_("../../constants/interactions").DESELECTDIM,e=_("../bar/style"),r=_("../bar/uniform_text").resizeText,t=e.styleTextPoints;ae.exports={style:function(a,n,d){var s=d||g.select(a).selectAll("g.waterfalllayer").selectAll("g.trace");r(a,s,"waterfall"),s.style("opacity",function(i){return i[0].trace.opacity}),s.each(function(i){var u=g.select(this),f=i[0].trace;u.selectAll(".point > path").each(function(p){if(!p.isBlank){var y=f[p.dir].marker;g.select(this).call(T.fill,y.color).call(T.stroke,y.line.color).call(x.dashLine,y.line.dash,y.line.width).style("opacity",f.selectedpoints&&!p.selected?b:1)}}),t(u,f,a),u.selectAll(".lines").each(function(){var p=f.connector.line;x.lineGroupStyle(g.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1114:[function(_,ae,ie){"use strict";var g=_("../plots/cartesian/axes"),x=_("../lib"),T=_("../plot_api/plot_schema"),b=_("./helpers").pointsAccessorFunction,e=_("../constants/numerical").BADNUM;ie.moduleType="transform",ie.name="aggregate";var r=ie.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},t=r.aggregations;function a(i,u,f,p){if(p.enabled){for(var y=p.target,m=x.nestedProperty(u,y),l=m.get(),w=function(M,k){var P=k.d2c,S=k.c2d;switch(M.func){case"count":return n;case"first":return d;case"last":return s;case"sum":return function(F,R){for(var D=0,L=0;L<R.length;L++){var B=P(F[R[L]]);B!==e&&(D+=B)}return S(D)};case"avg":return function(F,R){for(var D=0,L=0,B=0;B<R.length;B++){var V=P(F[R[B]]);V!==e&&(D+=V,L++)}return L?S(D/L):e};case"min":return function(F,R){for(var D=1/0,L=0;L<R.length;L++){var B=P(F[R[L]]);B!==e&&(D=Math.min(D,B))}return D===1/0?e:S(D)};case"max":return function(F,R){for(var D=-1/0,L=0;L<R.length;L++){var B=P(F[R[L]]);B!==e&&(D=Math.max(D,B))}return D===-1/0?e:S(D)};case"range":return function(F,R){for(var D=1/0,L=-1/0,B=0;B<R.length;B++){var V=P(F[R[B]]);V!==e&&(D=Math.min(D,V),L=Math.max(L,V))}return L===-1/0||D===1/0?e:S(L-D)};case"change":return function(F,R){var D=P(F[R[0]]),L=P(F[R[R.length-1]]);return D===e||L===e?e:S(L-D)};case"median":return function(F,R){for(var D=[],L=0;L<R.length;L++){var B=P(F[R[L]]);B!==e&&D.push(B)}if(!D.length)return e;D.sort(x.sorterAsc);var V=(D.length-1)/2;return S((D[Math.floor(V)]+D[Math.ceil(V)])/2)};case"mode":return function(F,R){for(var D={},L=0,B=e,V=0;V<R.length;V++){var Z=P(F[R[V]]);if(Z!==e){var Y=D[Z]=(D[Z]||0)+1;Y>L&&(L=Y,B=Z)}}return L?S(B):e};case"rms":return function(F,R){for(var D=0,L=0,B=0;B<R.length;B++){var V=P(F[R[B]]);V!==e&&(D+=V*V,L++)}return L?S(Math.sqrt(D/L)):e};case"stddev":return function(F,R){var D,L=0,B=0,V=1,Z=e;for(D=0;D<R.length&&Z===e;D++)Z=P(F[R[D]]);if(Z===e)return e;for(;D<R.length;D++){var Y=P(F[R[D]]);if(Y!==e){var ee=Y-Z;L+=ee,B+=ee*ee,V++}}var Q="sample"===M.funcmode?V-1:V;return Q?Math.sqrt((B-L*L/V)/Q):0}}}(p,g.getDataConversions(i,u,y,l)),v=new Array(f.length),A=0;A<f.length;A++)v[A]=w(l,f[A]);m.set(v),"count"===p.func&&x.pushUnique(u._arrayAttrs,y)}}function n(i,u){return u.length}function d(i,u){return i[u[0]]}function s(i,u){return i[u[u.length-1]]}ie.supplyDefaults=function(i,u){var f,p={};function y(S,F){return x.coerce(i,p,r,S,F)}if(!y("enabled"))return p;var m=T.findArrayAttributes(u),l={};for(f=0;f<m.length;f++)l[m[f]]=1;var w=y("groups");if(!Array.isArray(w)){if(!l[w])return p.enabled=!1,p;l[w]=0}var v,A=i.aggregations||[],M=p.aggregations=new Array(A.length);function k(S,F){return x.coerce(A[f],v,t,S,F)}for(f=0;f<A.length;f++){v={_index:f};var E=k("target"),P=k("func");k("enabled")&&E&&(l[E]||"count"===P&&void 0===l[E])?("stddev"===P&&k("funcmode"),l[E]=0,M[f]=v):M[f]={enabled:!1,_index:f}}for(f=0;f<m.length;f++)l[m[f]]&&M.push({target:m[f],func:t.func.dflt,enabled:!0,_index:-1});return p},ie.calcTransform=function(i,u,f){if(f.enabled){var p=f.groups,y=x.getTargetArray(u,{target:p});if(y){var m,l,w,A={},M={},k=[],E=b(u.transforms,f),P=y.length;for(u._length&&(P=Math.min(P,u._length)),m=0;m<P;m++)void 0===(w=A[l=y[m]])?(A[l]=k.length,k.push([m]),M[A[l]]=E(m)):(k[w].push(m),M[A[l]]=(M[A[l]]||[]).concat(E(m)));f._indexToPoints=M;var S=f.aggregations;for(m=0;m<S.length;m++)a(i,u,k,S[m]);"string"==typeof p&&a(i,u,k,{target:p,func:"first",enabled:!0}),u._length=k.length}}}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1117}],1115:[function(_,ae,ie){"use strict";var g=_("../lib"),x=_("../registry"),T=_("../plots/cartesian/axes"),b=_("./helpers").pointsAccessorFunction,e=_("../constants/filter_ops"),r=e.COMPARISON_OPS,t=e.INTERVAL_OPS,a=e.SET_OPS;ie.moduleType="transform",ie.name="filter",ie.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(r).concat(t).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},ie.supplyDefaults=function(n){var d={};function s(f,p){return g.coerce(n,d,ie.attributes,f,p)}if(s("enabled")){var i=s("target");if(g.isArrayOrTypedArray(i)&&0===i.length)return d.enabled=!1,d;s("preservegaps"),s("operation"),s("value");var u=x.getComponentMethod("calendars","handleDefaults");u(n,d,"valuecalendar",null),u(n,d,"targetcalendar",null)}return d},ie.calcTransform=function(n,d,s){if(s.enabled){var i=g.getTargetArray(d,s);if(i){var u=s.target,f=i.length;d._length&&(f=Math.min(f,d._length));var p=s.targetcalendar,y=d._arrayAttrs,m=s.preservegaps;if("string"==typeof u){var l=g.nestedProperty(d,u+"calendar").get();l&&(p=l)}var w,v,A=function(R,D,L){var B=R.operation,V=R.value,Z=Array.isArray(V);function Y(K){return-1!==K.indexOf(B)}var ee,Q=function(K){return D(K,0,R.valuecalendar)},$=function(K){return D(K,0,L)};switch(Y(r)?ee=Q(Z?V[0]:V):Y(t)?ee=Z?[Q(V[0]),Q(V[1])]:[Q(V),Q(V)]:Y(a)&&(ee=Z?V.map(Q):[Q(V)]),B){case"=":return function(K){return $(K)===ee};case"!=":return function(K){return $(K)!==ee};case"<":return function(K){return $(K)<ee};case"<=":return function(K){return $(K)<=ee};case">":return function(K){return $(K)>ee};case">=":return function(K){return $(K)>=ee};case"[]":return function(K){var oe=$(K);return oe>=ee[0]&&oe<=ee[1]};case"()":return function(K){var oe=$(K);return oe>ee[0]&&oe<ee[1]};case"[)":return function(K){var oe=$(K);return oe>=ee[0]&&oe<ee[1]};case"(]":return function(K){var oe=$(K);return oe>ee[0]&&oe<=ee[1]};case"][":return function(K){var oe=$(K);return oe<=ee[0]||oe>=ee[1]};case")(":return function(K){var oe=$(K);return oe<ee[0]||oe>ee[1]};case"](":return function(K){var oe=$(K);return oe<=ee[0]||oe>ee[1]};case")[":return function(K){var oe=$(K);return oe<ee[0]||oe>=ee[1]};case"{}":return function(K){return-1!==ee.indexOf($(K))};case"}{":return function(K){return-1===ee.indexOf($(K))}}}(s,T.getDataToCoordFunc(n,d,u,i),p),M={},k={},E=0;m?(w=function(R){M[R.astr]=g.extendDeep([],R.get()),R.set(new Array(f))},v=function(R,D){var L=M[R.astr][D];R.get()[D]=L}):(w=function(R){M[R.astr]=g.extendDeep([],R.get()),R.set([])},v=function(R,D){var L=M[R.astr][D];R.get().push(L)}),F(w);for(var P=b(d.transforms,s),S=0;S<f;S++)A(i[S])?(F(v,S),k[E++]=P(S)):m&&E++;s._indexToPoints=k,d._length=E}}function F(R,D){for(var L=0;L<y.length;L++)R(g.nestedProperty(d,y[L]),D)}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1117}],1116:[function(_,ae,ie){"use strict";var g=_("../lib"),x=_("../plot_api/plot_schema"),T=_("../plots/plots"),b=_("./helpers").pointsAccessorFunction;function e(r,t){var a,n,d,s,i,u,f,p,y,m,l=t.transform,w=t.transformIndex,v=r.transforms[w].groups,A=b(r.transforms,l);if(!g.isArrayOrTypedArray(v)||0===v.length)return[r];var M=g.filterUnique(v),k=new Array(M.length),E=v.length,P=x.findArrayAttributes(r),S=l.styles||[],F={};for(a=0;a<S.length;a++)F[S[a].target]=S[a].value;l.styles&&(m=g.keyedContainer(l,"styles","target","value.name"));var R={},D={};for(a=0;a<M.length;a++){R[u=M[a]]=a,D[u]=0,(f=k[a]=g.extendDeepNoArrays({},r))._group=u,f.transforms[w]._indexToPoints={};var L=null;for(m&&(L=m.get(u)),f.name=L||""===L?L:g.templateString(l.nameformat,{trace:r.name,group:u}),p=f.transforms,f.transforms=[],n=0;n<p.length;n++)f.transforms[n]=g.extendDeepNoArrays({},p[n]);for(n=0;n<P.length;n++)g.nestedProperty(f,P[n]).set([])}for(d=0;d<P.length;d++){for(s=P[d],n=0,y=[];n<M.length;n++)y[n]=g.nestedProperty(k[n],s).get();for(i=g.nestedProperty(r,s).get(),n=0;n<E;n++)y[R[v[n]]].push(i[n])}for(n=0;n<E;n++)(f=k[R[v[n]]]).transforms[w]._indexToPoints[D[v[n]]]=A(n),D[v[n]]++;for(a=0;a<M.length;a++)u=M[a],T.clearExpandedTraceDefaultColors(f=k[a]),f=g.extendDeepNoArrays(f,F[u]||{});return k}ie.moduleType="transform",ie.name="groupby",ie.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},ie.supplyDefaults=function(r,t,a){var n,d={};function s(y,m){return g.coerce(r,d,ie.attributes,y,m)}if(!s("enabled"))return d;s("groups"),s("nameformat",a._dataLength>1?"%{group} (%{trace})":"%{group}");var i=r.styles,u=d.styles=[];if(i)for(n=0;n<i.length;n++){var f=u[n]={};g.coerce(i[n],u[n],ie.attributes.styles,"target");var p=g.coerce(i[n],u[n],ie.attributes.styles,"value");g.isPlainObject(p)?f.value=g.extendDeep({},p):p&&delete f.value}return d},ie.transform=function(r,t){var a,n,d,s=[];for(n=0;n<r.length;n++)for(a=e(r[n],t),d=0;d<a.length;d++)s.push(a[d]);return s}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1117}],1117:[function(_,ae,ie){"use strict";ie.pointsAccessorFunction=function(g,x){for(var T,b,e=0;e<g.length&&(T=g[e])!==x;e++)T._indexToPoints&&!1!==T.enabled&&(b=T._indexToPoints);return b?function(r){return b[r]}:function(r){return[r]}}},{}],1118:[function(_,ae,ie){"use strict";var g=_("../lib"),x=_("../plots/cartesian/axes"),T=_("./helpers").pointsAccessorFunction,b=_("../constants/numerical").BADNUM;ie.moduleType="transform",ie.name="sort",ie.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},ie.supplyDefaults=function(e){var r={};function t(a,n){return g.coerce(e,r,ie.attributes,a,n)}return t("enabled")&&(t("target"),t("order")),r},ie.calcTransform=function(e,r,t){if(t.enabled){var a=g.getTargetArray(r,t);if(a){var n=t.target,d=a.length;r._length&&(d=Math.min(d,r._length));var s,i,u=r._arrayAttrs,f=function(v,A,M,k){var E,P=new Array(k),S=new Array(k);for(E=0;E<k;E++)P[E]={v:A[E],i:E};for(P.sort(function(F,R){switch(F.order){case"ascending":return function(D,L){var B=R(D.v),V=R(L.v);return B===b?1:V===b?-1:B-V};case"descending":return function(D,L){var B=R(D.v),V=R(L.v);return B===b?1:V===b?-1:V-B}}}(v,M)),E=0;E<k;E++)S[E]=P[E].i;return S}(t,a,x.getDataToCoordFunc(e,r,n,a),d),p=T(r.transforms,t),y={};for(s=0;s<u.length;s++){var m=g.nestedProperty(r,u[s]),l=m.get(),w=new Array(d);for(i=0;i<d;i++)w[i]=l[f[i]];m.set(w)}for(i=0;i<d;i++)y[i]=p(f[i]);t._indexToPoints=y,r._length=d}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1117}],1119:[function(_,ae,ie){"use strict";ie.version="2.8.1"},{}],1120:[function(_,ae,ie){(function(g){(function(){!function(x){"object"==typeof ie&&void 0!==ae?ae.exports=x():("undefined"!=typeof window?window:void 0!==g?g:"undefined"!=typeof self?self:this).stackgl=x()}(function(){return function x(T,b,e){function r(n,d){if(!b[n]){if(!T[n]){var s="function"==typeof _&&_;if(!d&&s)return s(n,!0);if(t)return t(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var u=b[n]={exports:{}};T[n][0].call(u.exports,function(f){return r(T[n][1][f]||f)},u,u.exports,x,T,b,e)}return b[n].exports}for(var t="function"==typeof _&&_,a=0;a<e.length;a++)r(e[a]);return r}({1:[function(x,T,b){"use strict";b.byteLength=function(u){var f=s(u),y=f[1];return 3*(f[0]+y)/4-y},b.toByteArray=function(u){var f,p,E,y=s(u),m=y[0],l=y[1],w=new t(3*(m+(E=l))/4-E),v=0,A=l>0?m-4:m;for(p=0;p<A;p+=4)f=r[u.charCodeAt(p)]<<18|r[u.charCodeAt(p+1)]<<12|r[u.charCodeAt(p+2)]<<6|r[u.charCodeAt(p+3)],w[v++]=f>>16&255,w[v++]=f>>8&255,w[v++]=255&f;return 2===l&&(f=r[u.charCodeAt(p)]<<2|r[u.charCodeAt(p+1)]>>4,w[v++]=255&f),1===l&&(f=r[u.charCodeAt(p)]<<10|r[u.charCodeAt(p+1)]<<4|r[u.charCodeAt(p+2)]>>2,w[v++]=f>>8&255,w[v++]=255&f),w},b.fromByteArray=function(u){for(var f,p=u.length,y=p%3,m=[],l=0,w=p-y;l<w;l+=16383)m.push(i(u,l,l+16383>w?w:l+16383));return 1===y?m.push(e[(f=u[p-1])>>2]+e[f<<4&63]+"=="):2===y&&m.push(e[(f=(u[p-2]<<8)+u[p-1])>>10]+e[f>>4&63]+e[f<<2&63]+"="),m.join("")};for(var e=[],r=[],t="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,d=a.length;n<d;++n)e[n]=a[n],r[a.charCodeAt(n)]=n;function s(u){var f=u.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=u.indexOf("=");return-1===p&&(p=f),[p,p===f?0:4-p%4]}function i(u,f,p){for(var m,l=[],w=f;w<p;w+=3)l.push(e[(m=(u[w]<<16&16711680)+(u[w+1]<<8&65280)+(255&u[w+2]))>>18&63]+e[m>>12&63]+e[m>>6&63]+e[63&m]);return l.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],2:[function(x,T,b){},{}],3:[function(x,T,b){(function(e){(function(){"use strict";var r=x("base64-js"),t=x("ieee754");function a(q){if(q>2147483647)throw new RangeError('The value "'+q+'" is invalid for option "size"');var te=new Uint8Array(q);return te.__proto__=n.prototype,te}function n(q,te,ne){if("number"==typeof q){if("string"==typeof te)throw new TypeError('The "string" argument must be of type string. Received type number');return i(q)}return d(q,te,ne)}function d(q,te,ne){if("string"==typeof q)return function(de,he){if("string"==typeof he&&""!==he||(he="utf8"),!n.isEncoding(he))throw new TypeError("Unknown encoding: "+he);var be=0|p(de,he),ge=a(be),we=ge.write(de,he);return we!==be&&(ge=ge.slice(0,we)),ge}(q,te);if(ArrayBuffer.isView(q))return u(q);if(null==q)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(G(q,ArrayBuffer)||q&&G(q.buffer,ArrayBuffer))return function(de,he,be){if(he<0||de.byteLength<he)throw new RangeError('"offset" is outside of buffer bounds');if(de.byteLength<he+(be||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return(ge=void 0===he&&void 0===be?new Uint8Array(de):void 0===be?new Uint8Array(de,he):new Uint8Array(de,he,be)).__proto__=n.prototype,ge}(q,te,ne);if("number"==typeof q)throw new TypeError('The "value" argument must not be of type number. Received type number');var le=q.valueOf&&q.valueOf();if(null!=le&&le!==q)return n.from(le,te,ne);var ue=function(de){if(n.isBuffer(de)){var he=0|f(de.length),be=a(he);return 0===be.length||de.copy(be,0,0,he),be}return void 0!==de.length?"number"!=typeof de.length||re(de.length)?a(0):u(de):"Buffer"===de.type&&Array.isArray(de.data)?u(de.data):void 0}(q);if(ue)return ue;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof q[Symbol.toPrimitive])return n.from(q[Symbol.toPrimitive]("string"),te,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}function s(q){if("number"!=typeof q)throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function i(q){return s(q),a(q<0?0:0|f(q))}function u(q){for(var te=q.length<0?0:0|f(q.length),ne=a(te),le=0;le<te;le+=1)ne[le]=255&q[le];return ne}function f(q){if(q>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|q}function p(q,te){if(n.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||G(q,ArrayBuffer))return q.byteLength;if("string"!=typeof q)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);var ne=q.length,le=arguments.length>2&&!0===arguments[2];if(!le&&0===ne)return 0;for(var ue=!1;;)switch(te){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return oe(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return j(q).length;default:if(ue)return le?-1:oe(q).length;te=(""+te).toLowerCase(),ue=!0}}function y(q,te,ne){var le=!1;if((void 0===te||te<0)&&(te=0),te>this.length||((void 0===ne||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(te>>>=0))return"";for(q||(q="utf8");;)switch(q){case"hex":return L(this,te,ne);case"utf8":case"utf-8":return F(this,te,ne);case"ascii":return R(this,te,ne);case"latin1":case"binary":return D(this,te,ne);case"base64":return S(this,te,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,te,ne);default:if(le)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),le=!0}}function m(q,te,ne){var le=q[te];q[te]=q[ne],q[ne]=le}function l(q,te,ne,le,ue){if(0===q.length)return-1;if("string"==typeof ne?(le=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),re(ne=+ne)&&(ne=ue?0:q.length-1),ne<0&&(ne=q.length+ne),ne>=q.length){if(ue)return-1;ne=q.length-1}else if(ne<0){if(!ue)return-1;ne=0}if("string"==typeof te&&(te=n.from(te,le)),n.isBuffer(te))return 0===te.length?-1:w(q,te,ne,le,ue);if("number"==typeof te)return te&=255,"function"==typeof Uint8Array.prototype.indexOf?ue?Uint8Array.prototype.indexOf.call(q,te,ne):Uint8Array.prototype.lastIndexOf.call(q,te,ne):w(q,[te],ne,le,ue);throw new TypeError("val must be string, number or Buffer")}function w(q,te,ne,le,ue){var de,he=1,be=q.length,ge=te.length;if(void 0!==le&&("ucs2"===(le=String(le).toLowerCase())||"ucs-2"===le||"utf16le"===le||"utf-16le"===le)){if(q.length<2||te.length<2)return-1;he=2,be/=2,ge/=2,ne/=2}function we(Re,ve){return 1===he?Re[ve]:Re.readUInt16BE(ve*he)}if(ue){var ke=-1;for(de=ne;de<be;de++)if(we(q,de)===we(te,-1===ke?0:de-ke)){if(-1===ke&&(ke=de),de-ke+1===ge)return ke*he}else-1!==ke&&(de-=de-ke),ke=-1}else for(ne+ge>be&&(ne=be-ge),de=ne;de>=0;de--){for(var De=!0,Ee=0;Ee<ge;Ee++)if(we(q,de+Ee)!==we(te,Ee)){De=!1;break}if(De)return de}return-1}function v(q,te,ne,le){ne=Number(ne)||0;var ue=q.length-ne;le?(le=Number(le))>ue&&(le=ue):le=ue;var de=te.length;le>de/2&&(le=de/2);for(var he=0;he<le;++he){var be=parseInt(te.substr(2*he,2),16);if(re(be))return he;q[ne+he]=be}return he}function A(q,te,ne,le){return H(oe(te,q.length-ne),q,ne,le)}function M(q,te,ne,le){return H(function(ue){for(var de=[],he=0;he<ue.length;++he)de.push(255&ue.charCodeAt(he));return de}(te),q,ne,le)}function k(q,te,ne,le){return M(q,te,ne,le)}function E(q,te,ne,le){return H(j(te),q,ne,le)}function P(q,te,ne,le){return H(function(ue,de){for(var he,be,we=[],ke=0;ke<ue.length&&!((de-=2)<0);++ke)be=(he=ue.charCodeAt(ke))>>8,we.push(he%256),we.push(be);return we}(te,q.length-ne),q,ne,le)}function S(q,te,ne){return r.fromByteArray(0===te&&ne===q.length?q:q.slice(te,ne))}function F(q,te,ne){ne=Math.min(q.length,ne);for(var le=[],ue=te;ue<ne;){var de,he,be,ge,we=q[ue],ke=null,De=we>239?4:we>223?3:we>191?2:1;if(ue+De<=ne)switch(De){case 1:we<128&&(ke=we);break;case 2:128==(192&(de=q[ue+1]))&&(ge=(31&we)<<6|63&de)>127&&(ke=ge);break;case 3:he=q[ue+2],128==(192&(de=q[ue+1]))&&128==(192&he)&&(ge=(15&we)<<12|(63&de)<<6|63&he)>2047&&(ge<55296||ge>57343)&&(ke=ge);break;case 4:he=q[ue+2],be=q[ue+3],128==(192&(de=q[ue+1]))&&128==(192&he)&&128==(192&be)&&(ge=(15&we)<<18|(63&de)<<12|(63&he)<<6|63&be)>65535&&ge<1114112&&(ke=ge)}null===ke?(ke=65533,De=1):ke>65535&&(le.push((ke-=65536)>>>10&1023|55296),ke=56320|1023&ke),le.push(ke),ue+=De}return function(Ee){var Re=Ee.length;if(Re<=4096)return String.fromCharCode.apply(String,Ee);for(var ve="",Te=0;Te<Re;)ve+=String.fromCharCode.apply(String,Ee.slice(Te,Te+=4096));return ve}(le)}function R(q,te,ne){var le="";ne=Math.min(q.length,ne);for(var ue=te;ue<ne;++ue)le+=String.fromCharCode(127&q[ue]);return le}function D(q,te,ne){var le="";ne=Math.min(q.length,ne);for(var ue=te;ue<ne;++ue)le+=String.fromCharCode(q[ue]);return le}function L(q,te,ne){var le=q.length;(!te||te<0)&&(te=0),(!ne||ne<0||ne>le)&&(ne=le);for(var ue="",de=te;de<ne;++de)ue+=K(q[de]);return ue}function B(q,te,ne){for(var le=q.slice(te,ne),ue="",de=0;de<le.length;de+=2)ue+=String.fromCharCode(le[de]+256*le[de+1]);return ue}function V(q,te,ne){if(q%1!=0||q<0)throw new RangeError("offset is not uint");if(q+te>ne)throw new RangeError("Trying to access beyond buffer length")}function Z(q,te,ne,le,ue,de){if(!n.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(te>ue||te<de)throw new RangeError('"value" argument is out of bounds');if(ne+le>q.length)throw new RangeError("Index out of range")}function Y(q,te,ne,le,ue,de){if(ne+le>q.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function ee(q,te,ne,le,ue){return te=+te,ne>>>=0,ue||Y(q,0,ne,4),t.write(q,te,ne,le,23,4),ne+4}function Q(q,te,ne,le,ue){return te=+te,ne>>>=0,ue||Y(q,0,ne,8),t.write(q,te,ne,le,52,8),ne+8}b.Buffer=n,b.SlowBuffer=function(q){return+q!=q&&(q=0),n.alloc(+q)},b.INSPECT_MAX_BYTES=50,b.kMaxLength=2147483647,(n.TYPED_ARRAY_SUPPORT=function(){try{var q=new Uint8Array(1);return q.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===q.foo()}catch(te){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(q,te,ne){return d(q,te,ne)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(q,te,ne){return ue=te,de=ne,s(le=q),le<=0?a(le):void 0!==ue?"string"==typeof de?a(le).fill(ue,de):a(le).fill(ue):a(le);var le,ue,de},n.allocUnsafe=function(q){return i(q)},n.allocUnsafeSlow=function(q){return i(q)},n.isBuffer=function(q){return null!=q&&!0===q._isBuffer&&q!==n.prototype},n.compare=function(q,te){if(G(q,Uint8Array)&&(q=n.from(q,q.offset,q.byteLength)),G(te,Uint8Array)&&(te=n.from(te,te.offset,te.byteLength)),!n.isBuffer(q)||!n.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===te)return 0;for(var ne=q.length,le=te.length,ue=0,de=Math.min(ne,le);ue<de;++ue)if(q[ue]!==te[ue]){ne=q[ue],le=te[ue];break}return ne<le?-1:le<ne?1:0},n.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(q,te){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(0===q.length)return n.alloc(0);var ne;if(void 0===te)for(te=0,ne=0;ne<q.length;++ne)te+=q[ne].length;var le=n.allocUnsafe(te),ue=0;for(ne=0;ne<q.length;++ne){var de=q[ne];if(G(de,Uint8Array)&&(de=n.from(de)),!n.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(le,ue),ue+=de.length}return le},n.byteLength=p,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var q=this.length;if(q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var te=0;te<q;te+=2)m(this,te,te+1);return this},n.prototype.swap32=function(){var q=this.length;if(q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var te=0;te<q;te+=4)m(this,te,te+3),m(this,te+1,te+2);return this},n.prototype.swap64=function(){var q=this.length;if(q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var te=0;te<q;te+=8)m(this,te,te+7),m(this,te+1,te+6),m(this,te+2,te+5),m(this,te+3,te+4);return this},n.prototype.toLocaleString=n.prototype.toString=function(){var q=this.length;return 0===q?"":0===arguments.length?F(this,0,q):y.apply(this,arguments)},n.prototype.equals=function(q){if(!n.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q||0===n.compare(this,q)},n.prototype.inspect=function(){var q="",te=b.INSPECT_MAX_BYTES;return q=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(q+=" ... "),"<Buffer "+q+">"},n.prototype.compare=function(q,te,ne,le,ue){if(G(q,Uint8Array)&&(q=n.from(q,q.offset,q.byteLength)),!n.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(void 0===te&&(te=0),void 0===ne&&(ne=q?q.length:0),void 0===le&&(le=0),void 0===ue&&(ue=this.length),te<0||ne>q.length||le<0||ue>this.length)throw new RangeError("out of range index");if(le>=ue&&te>=ne)return 0;if(le>=ue)return-1;if(te>=ne)return 1;if(this===q)return 0;for(var de=(ue>>>=0)-(le>>>=0),he=(ne>>>=0)-(te>>>=0),be=Math.min(de,he),ge=this.slice(le,ue),we=q.slice(te,ne),ke=0;ke<be;++ke)if(ge[ke]!==we[ke]){de=ge[ke],he=we[ke];break}return de<he?-1:he<de?1:0},n.prototype.includes=function(q,te,ne){return-1!==this.indexOf(q,te,ne)},n.prototype.indexOf=function(q,te,ne){return l(this,q,te,ne,!0)},n.prototype.lastIndexOf=function(q,te,ne){return l(this,q,te,ne,!1)},n.prototype.write=function(q,te,ne,le){if(void 0===te)le="utf8",ne=this.length,te=0;else if(void 0===ne&&"string"==typeof te)le=te,ne=this.length,te=0;else{if(!isFinite(te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");te>>>=0,isFinite(ne)?(ne>>>=0,void 0===le&&(le="utf8")):(le=ne,ne=void 0)}var ue=this.length-te;if((void 0===ne||ne>ue)&&(ne=ue),q.length>0&&(ne<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");le||(le="utf8");for(var de=!1;;)switch(le){case"hex":return v(this,q,te,ne);case"utf8":case"utf-8":return A(this,q,te,ne);case"ascii":return M(this,q,te,ne);case"latin1":case"binary":return k(this,q,te,ne);case"base64":return E(this,q,te,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,q,te,ne);default:if(de)throw new TypeError("Unknown encoding: "+le);le=(""+le).toLowerCase(),de=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(q,te){var ne=this.length;(q=~~q)<0?(q+=ne)<0&&(q=0):q>ne&&(q=ne),(te=void 0===te?ne:~~te)<0?(te+=ne)<0&&(te=0):te>ne&&(te=ne),te<q&&(te=q);var le=this.subarray(q,te);return le.__proto__=n.prototype,le},n.prototype.readUIntLE=function(q,te,ne){q>>>=0,te>>>=0,ne||V(q,te,this.length);for(var le=this[q],ue=1,de=0;++de<te&&(ue*=256);)le+=this[q+de]*ue;return le},n.prototype.readUIntBE=function(q,te,ne){q>>>=0,te>>>=0,ne||V(q,te,this.length);for(var le=this[q+--te],ue=1;te>0&&(ue*=256);)le+=this[q+--te]*ue;return le},n.prototype.readUInt8=function(q,te){return q>>>=0,te||V(q,1,this.length),this[q]},n.prototype.readUInt16LE=function(q,te){return q>>>=0,te||V(q,2,this.length),this[q]|this[q+1]<<8},n.prototype.readUInt16BE=function(q,te){return q>>>=0,te||V(q,2,this.length),this[q]<<8|this[q+1]},n.prototype.readUInt32LE=function(q,te){return q>>>=0,te||V(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+16777216*this[q+3]},n.prototype.readUInt32BE=function(q,te){return q>>>=0,te||V(q,4,this.length),16777216*this[q]+(this[q+1]<<16|this[q+2]<<8|this[q+3])},n.prototype.readIntLE=function(q,te,ne){q>>>=0,te>>>=0,ne||V(q,te,this.length);for(var le=this[q],ue=1,de=0;++de<te&&(ue*=256);)le+=this[q+de]*ue;return le>=(ue*=128)&&(le-=Math.pow(2,8*te)),le},n.prototype.readIntBE=function(q,te,ne){q>>>=0,te>>>=0,ne||V(q,te,this.length);for(var le=te,ue=1,de=this[q+--le];le>0&&(ue*=256);)de+=this[q+--le]*ue;return de>=(ue*=128)&&(de-=Math.pow(2,8*te)),de},n.prototype.readInt8=function(q,te){return q>>>=0,te||V(q,1,this.length),128&this[q]?-1*(255-this[q]+1):this[q]},n.prototype.readInt16LE=function(q,te){q>>>=0,te||V(q,2,this.length);var ne=this[q]|this[q+1]<<8;return 32768&ne?4294901760|ne:ne},n.prototype.readInt16BE=function(q,te){q>>>=0,te||V(q,2,this.length);var ne=this[q+1]|this[q]<<8;return 32768&ne?4294901760|ne:ne},n.prototype.readInt32LE=function(q,te){return q>>>=0,te||V(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},n.prototype.readInt32BE=function(q,te){return q>>>=0,te||V(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},n.prototype.readFloatLE=function(q,te){return q>>>=0,te||V(q,4,this.length),t.read(this,q,!0,23,4)},n.prototype.readFloatBE=function(q,te){return q>>>=0,te||V(q,4,this.length),t.read(this,q,!1,23,4)},n.prototype.readDoubleLE=function(q,te){return q>>>=0,te||V(q,8,this.length),t.read(this,q,!0,52,8)},n.prototype.readDoubleBE=function(q,te){return q>>>=0,te||V(q,8,this.length),t.read(this,q,!1,52,8)},n.prototype.writeUIntLE=function(q,te,ne,le){q=+q,te>>>=0,ne>>>=0,le||Z(this,q,te,ne,Math.pow(2,8*ne)-1,0);var ue=1,de=0;for(this[te]=255&q;++de<ne&&(ue*=256);)this[te+de]=q/ue&255;return te+ne},n.prototype.writeUIntBE=function(q,te,ne,le){q=+q,te>>>=0,ne>>>=0,le||Z(this,q,te,ne,Math.pow(2,8*ne)-1,0);var ue=ne-1,de=1;for(this[te+ue]=255&q;--ue>=0&&(de*=256);)this[te+ue]=q/de&255;return te+ne},n.prototype.writeUInt8=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,1,255,0),this[te]=255&q,te+1},n.prototype.writeUInt16LE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,2,65535,0),this[te]=255&q,this[te+1]=q>>>8,te+2},n.prototype.writeUInt16BE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,2,65535,0),this[te]=q>>>8,this[te+1]=255&q,te+2},n.prototype.writeUInt32LE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,4,4294967295,0),this[te+3]=q>>>24,this[te+2]=q>>>16,this[te+1]=q>>>8,this[te]=255&q,te+4},n.prototype.writeUInt32BE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,4,4294967295,0),this[te]=q>>>24,this[te+1]=q>>>16,this[te+2]=q>>>8,this[te+3]=255&q,te+4},n.prototype.writeIntLE=function(q,te,ne,le){if(q=+q,te>>>=0,!le){var ue=Math.pow(2,8*ne-1);Z(this,q,te,ne,ue-1,-ue)}var de=0,he=1,be=0;for(this[te]=255&q;++de<ne&&(he*=256);)q<0&&0===be&&0!==this[te+de-1]&&(be=1),this[te+de]=(q/he>>0)-be&255;return te+ne},n.prototype.writeIntBE=function(q,te,ne,le){if(q=+q,te>>>=0,!le){var ue=Math.pow(2,8*ne-1);Z(this,q,te,ne,ue-1,-ue)}var de=ne-1,he=1,be=0;for(this[te+de]=255&q;--de>=0&&(he*=256);)q<0&&0===be&&0!==this[te+de+1]&&(be=1),this[te+de]=(q/he>>0)-be&255;return te+ne},n.prototype.writeInt8=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,1,127,-128),q<0&&(q=255+q+1),this[te]=255&q,te+1},n.prototype.writeInt16LE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,2,32767,-32768),this[te]=255&q,this[te+1]=q>>>8,te+2},n.prototype.writeInt16BE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,2,32767,-32768),this[te]=q>>>8,this[te+1]=255&q,te+2},n.prototype.writeInt32LE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,4,2147483647,-2147483648),this[te]=255&q,this[te+1]=q>>>8,this[te+2]=q>>>16,this[te+3]=q>>>24,te+4},n.prototype.writeInt32BE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[te]=q>>>24,this[te+1]=q>>>16,this[te+2]=q>>>8,this[te+3]=255&q,te+4},n.prototype.writeFloatLE=function(q,te,ne){return ee(this,q,te,!0,ne)},n.prototype.writeFloatBE=function(q,te,ne){return ee(this,q,te,!1,ne)},n.prototype.writeDoubleLE=function(q,te,ne){return Q(this,q,te,!0,ne)},n.prototype.writeDoubleBE=function(q,te,ne){return Q(this,q,te,!1,ne)},n.prototype.copy=function(q,te,ne,le){if(!n.isBuffer(q))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),le||0===le||(le=this.length),te>=q.length&&(te=q.length),te||(te=0),le>0&&le<ne&&(le=ne),le===ne||0===q.length||0===this.length)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("sourceEnd out of bounds");le>this.length&&(le=this.length),q.length-te<le-ne&&(le=q.length-te+ne);var ue=le-ne;if(this===q&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(te,ne,le);else if(this===q&&ne<te&&te<le)for(var de=ue-1;de>=0;--de)q[de+te]=this[de+ne];else Uint8Array.prototype.set.call(q,this.subarray(ne,le),te);return ue},n.prototype.fill=function(q,te,ne,le){if("string"==typeof q){if("string"==typeof te?(le=te,te=0,ne=this.length):"string"==typeof ne&&(le=ne,ne=this.length),void 0!==le&&"string"!=typeof le)throw new TypeError("encoding must be a string");if("string"==typeof le&&!n.isEncoding(le))throw new TypeError("Unknown encoding: "+le);if(1===q.length){var ue=q.charCodeAt(0);("utf8"===le&&ue<128||"latin1"===le)&&(q=ue)}}else"number"==typeof q&&(q&=255);if(te<0||this.length<te||this.length<ne)throw new RangeError("Out of range index");if(ne<=te)return this;var de;if(te>>>=0,ne=void 0===ne?this.length:ne>>>0,q||(q=0),"number"==typeof q)for(de=te;de<ne;++de)this[de]=q;else{var he=n.isBuffer(q)?q:n.from(q,le),be=he.length;if(0===be)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(de=0;de<ne-te;++de)this[de+te]=he[de%be]}return this};var $=/[^+/0-9A-Za-z-_]/g;function K(q){return q<16?"0"+q.toString(16):q.toString(16)}function oe(q,te){var ne;te=te||1/0;for(var le=q.length,ue=null,de=[],he=0;he<le;++he){if((ne=q.charCodeAt(he))>55295&&ne<57344){if(!ue){if(ne>56319){(te-=3)>-1&&de.push(239,191,189);continue}if(he+1===le){(te-=3)>-1&&de.push(239,191,189);continue}ue=ne;continue}if(ne<56320){(te-=3)>-1&&de.push(239,191,189),ue=ne;continue}ne=65536+(ue-55296<<10|ne-56320)}else ue&&(te-=3)>-1&&de.push(239,191,189);if(ue=null,ne<128){if((te-=1)<0)break;de.push(ne)}else if(ne<2048){if((te-=2)<0)break;de.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((te-=3)<0)break;de.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((te-=4)<0)break;de.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return de}function j(q){return r.toByteArray(function(te){if((te=(te=te.split("=")[0]).trim().replace($,"")).length<2)return"";for(;te.length%4!=0;)te+="=";return te}(q))}function H(q,te,ne,le){for(var ue=0;ue<le&&!(ue+ne>=te.length||ue>=q.length);++ue)te[ue+ne]=q[ue];return ue}function G(q,te){return q instanceof te||null!=q&&null!=q.constructor&&null!=q.constructor.name&&q.constructor.name===te.name}function re(q){return q!=q}}).call(this)}).call(this,x("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(x,T,b){b.read=function(e,r,t,a,n){var d,s,i=8*n-a-1,u=(1<<i)-1,f=u>>1,p=-7,y=t?n-1:0,m=t?-1:1,l=e[r+y];for(y+=m,d=l&(1<<-p)-1,l>>=-p,p+=i;p>0;d=256*d+e[r+y],y+=m,p-=8);for(s=d&(1<<-p)-1,d>>=-p,p+=a;p>0;s=256*s+e[r+y],y+=m,p-=8);if(0===d)d=1-f;else{if(d===u)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,a),d-=f}return(l?-1:1)*s*Math.pow(2,d-a)},b.write=function(e,r,t,a,n,d){var s,i,u,f=8*d-n-1,p=(1<<f)-1,y=p>>1,m=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,l=a?0:d-1,w=a?1:-1,v=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(i=isNaN(r)?1:0,s=p):(s=Math.floor(Math.log(r)/Math.LN2),r*(u=Math.pow(2,-s))<1&&(s--,u*=2),(r+=s+y>=1?m/u:m*Math.pow(2,1-y))*u>=2&&(s++,u/=2),s+y>=p?(i=0,s=p):s+y>=1?(i=(r*u-1)*Math.pow(2,n),s+=y):(i=r*Math.pow(2,y-1)*Math.pow(2,n),s=0));n>=8;e[t+l]=255&i,l+=w,i/=256,n-=8);for(s=s<<n|i,f+=n;f>0;e[t+l]=255&s,l+=w,s/=256,f-=8);e[t+l-w]|=128*v}},{}],5:[function(x,T,b){var e,r,t=T.exports={};function a(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function d(w){if(e===setTimeout)return setTimeout(w,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(w,0);try{return e(w,0)}catch(v){try{return e.call(null,w,0)}catch(A){return e.call(this,w,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:a}catch(w){e=a}try{r="function"==typeof clearTimeout?clearTimeout:n}catch(w){r=n}}();var s,i=[],u=!1,f=-1;function p(){u&&s&&(u=!1,s.length?i=s.concat(i):f=-1,i.length&&y())}function y(){if(!u){var w=d(p);u=!0;for(var v=i.length;v;){for(s=i,i=[];++f<v;)s&&s[f].run();f=-1,v=i.length}s=null,u=!1,function(A){if(r===clearTimeout)return clearTimeout(A);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(A);try{r(A)}catch(M){try{return r.call(null,A)}catch(k){return r.call(this,A)}}}(w)}}function m(w,v){this.fun=w,this.array=v}function l(){}t.nextTick=function(w){var v=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)v[A-1]=arguments[A];i.push(new m(w,v)),1!==i.length||u||d(y)},m.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=l,t.addListener=l,t.once=l,t.off=l,t.removeListener=l,t.removeAllListeners=l,t.emit=l,t.prependListener=l,t.prependOnceListener=l,t.listeners=function(w){return[]},t.binding=function(w){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(w){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(x,T,b){T.exports={alpha_shape:x("alpha-shape"),convex_hull:x("convex-hull"),delaunay_triangulate:x("delaunay-triangulate"),gl_cone3d:x("gl-cone3d"),gl_error3d:x("gl-error3d"),gl_heatmap2d:x("gl-heatmap2d"),gl_line3d:x("gl-line3d"),gl_mesh3d:x("gl-mesh3d"),gl_plot2d:x("gl-plot2d"),gl_plot3d:x("gl-plot3d"),gl_pointcloud2d:x("gl-pointcloud2d"),gl_scatter3d:x("gl-scatter3d"),gl_select_box:x("gl-select-box"),gl_spikes2d:x("gl-spikes2d"),gl_streamtube3d:x("gl-streamtube3d"),gl_surface3d:x("gl-surface3d"),ndarray:x("ndarray"),ndarray_linear_interpolate:x("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(x,T,b){"use strict";T.exports=function(d){var s=(d=d||{}).eye||[0,0,1],i=d.center||[0,0,0],u=d.up||[0,1,0],f=d.distanceLimits||[0,1/0],p=d.mode||"turntable",y=e(),m=r(),l=t();return y.setDistanceLimits(f[0],f[1]),y.lookAt(0,s,i,u),m.setDistanceLimits(f[0],f[1]),m.lookAt(0,s,i,u),l.setDistanceLimits(f[0],f[1]),l.lookAt(0,s,i,u),new a({turntable:y,orbit:m,matrix:l},p)};var e=x("turntable-camera-controller"),r=x("orbit-camera-controller"),t=x("matrix-camera-controller");function a(d,s){this._controllerNames=Object.keys(d),this._controllerList=this._controllerNames.map(function(i){return d[i]}),this._mode=s,this._active=d[s],this._active||(this._mode="turntable",this._active=d.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var n=a.prototype;n.flush=function(d){for(var s=this._controllerList,i=0;i<s.length;++i)s[i].flush(d)},n.idle=function(d){for(var s=this._controllerList,i=0;i<s.length;++i)s[i].idle(d)},n.lookAt=function(d,s,i,u){for(var f=this._controllerList,p=0;p<f.length;++p)f[p].lookAt(d,s,i,u)},n.rotate=function(d,s,i,u){for(var f=this._controllerList,p=0;p<f.length;++p)f[p].rotate(d,s,i,u)},n.pan=function(d,s,i,u){for(var f=this._controllerList,p=0;p<f.length;++p)f[p].pan(d,s,i,u)},n.translate=function(d,s,i,u){for(var f=this._controllerList,p=0;p<f.length;++p)f[p].translate(d,s,i,u)},n.setMatrix=function(d,s){for(var i=this._controllerList,u=0;u<i.length;++u)i[u].setMatrix(d,s)},n.setDistanceLimits=function(d,s){for(var i=this._controllerList,u=0;u<i.length;++u)i[u].setDistanceLimits(d,s)},n.setDistance=function(d,s){for(var i=this._controllerList,u=0;u<i.length;++u)i[u].setDistance(d,s)},n.recalcMatrix=function(d){this._active.recalcMatrix(d)},n.getDistance=function(d){return this._active.getDistance(d)},n.getDistanceLimits=function(d){return this._active.getDistanceLimits(d)},n.lastT=function(){return this._active.lastT()},n.setMode=function(d){if(d!==this._mode){var s=this._controllerNames.indexOf(d);if(!(s<0)){var i=this._active,u=this._controllerList[s],f=Math.max(i.lastT(),u.lastT());i.recalcMatrix(f),u.setMatrix(f,i.computedMatrix),this._active=u,this._mode=d,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},n.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(x,T,b){"use strict";var e="undefined"==typeof WeakMap?x("weak-map"):WeakMap,r=x("gl-buffer"),t=x("gl-vao"),a=new e;T.exports=function(n){var d=a.get(n),s=d&&(d._triangleBuffer.handle||d._triangleBuffer.buffer);if(!s||!n.isBuffer(s)){var i=r(n,new Float32Array([-1,-1,-1,4,4,-1]));(d=t(n,[{buffer:i,type:n.FLOAT,size:2}]))._triangleBuffer=i,a.set(n,d)}d.bind(),n.drawArrays(n.TRIANGLES,0,3),d.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(x,T,b){var e=x("pad-left");T.exports=function(r,t,a){t="number"==typeof t?t:1,a=a||": ";var n=r.split(/\r?\n/),d=String(n.length+t-1).length;return n.map(function(s,i){var u=i+t,f=String(u).length;return e(u,d-f)+a+s}).join("\n")}},{"pad-left":264}],10:[function(x,T,b){"use strict";T.exports=function(t){var a=t.length;if(0===a)return[];if(1===a)return[0];for(var n=t[0].length,d=[t[0]],s=[0],i=1;i<a;++i)if(d.push(t[i]),r(d,n)){if(s.push(i),s.length===n+1)return s}else d.pop();return s};var e=x("robust-orientation");function r(t,a){for(var n=new Array(a+1),d=0;d<t.length;++d)n[d]=t[d];for(d=0;d<=t.length;++d){for(var s=t.length;s<=a;++s){for(var i=new Array(a),u=0;u<a;++u)i[u]=Math.pow(s+1-d,u);n[s]=i}if(e.apply(void 0,n))return!0}return!1}},{"robust-orientation":284}],11:[function(x,T,b){"use strict";T.exports=function(t,a){return e(a).filter(function(n){for(var d=new Array(n.length),s=0;s<n.length;++s)d[s]=a[n[s]];return r(d)*t<1})};var e=x("delaunay-triangulate"),r=x("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(x,T,b){T.exports=function(t,a){return r(e(t,a))};var e=x("alpha-complex"),r=x("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(x,T,b){T.exports=function(e){return atob(e)}},{}],14:[function(x,T,b){"use strict";T.exports=function(t,a){for(var n=a.length,d=new Array(n+1),s=0;s<n;++s){for(var i=new Array(n+1),u=0;u<=n;++u)i[u]=t[u][s];d[s]=i}for(d[n]=new Array(n+1),s=0;s<=n;++s)d[n][s]=1;var f=new Array(n+1);for(s=0;s<n;++s)f[s]=a[s];f[n]=1;var p=e(d,f),y=r(p[n+1]);0===y&&(y=1);var m=new Array(n+1);for(s=0;s<=n;++s)m[s]=r(p[s])/y;return m};var e=x("robust-linear-solve");function r(t){for(var a=0,n=0;n<t.length;++n)a+=t[n];return a}},{"robust-linear-solve":283}],15:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(r,t){return e(r[0].mul(t[1]).add(t[0].mul(r[1])),r[1].mul(t[1]))}},{"./lib/rationalize":25}],16:[function(x,T,b){"use strict";T.exports=function(e,r){return e[0].mul(r[1]).cmp(r[0].mul(e[1]))}},{}],17:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(r,t){return e(r[0].mul(t[1]),r[1].mul(t[0]))}},{"./lib/rationalize":25}],18:[function(x,T,b){"use strict";var e=x("./is-rat"),r=x("./lib/is-bn"),t=x("./lib/num-to-bn"),a=x("./lib/str-to-bn"),n=x("./lib/rationalize"),d=x("./div");T.exports=function s(i,u){if(e(i))return u?d(i,s(u)):[i[0].clone(),i[1].clone()];var f,p,y=0;if(r(i))f=i.clone();else if("string"==typeof i)f=a(i);else{if(0===i)return[t(0),t(1)];if(i===Math.floor(i))f=t(i);else{for(;i!==Math.floor(i);)i*=Math.pow(2,256),y-=256;f=t(i)}}if(e(u))f.mul(u[1]),p=u[0].clone();else if(r(u))p=u.clone();else if("string"==typeof u)p=a(u);else if(u)if(u===Math.floor(u))p=t(u);else{for(;u!==Math.floor(u);)u*=Math.pow(2,256),y+=256;p=t(u)}else p=t(1);return y>0?f=f.ushln(y):y<0&&(p=p.ushln(-y)),n(f,p)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(x,T,b){"use strict";var e=x("./lib/is-bn");T.exports=function(r){return Array.isArray(r)&&2===r.length&&e(r[0])&&e(r[1])}},{"./lib/is-bn":23}],20:[function(x,T,b){"use strict";var e=x("bn.js");T.exports=function(r){return r.cmp(new e(0))}},{"bn.js":33}],21:[function(x,T,b){"use strict";var e=x("./bn-sign");T.exports=function(r){var t=r.length,a=r.words,n=0;if(1===t)n=a[0];else if(2===t)n=a[0]+67108864*a[1];else for(var d=0;d<t;d++)n+=a[d]*Math.pow(67108864,d);return e(r)*n}},{"./bn-sign":20}],22:[function(x,T,b){"use strict";var e=x("double-bits"),r=x("bit-twiddle").countTrailingZeros;T.exports=function(t){var a=r(e.lo(t));if(a<32)return a;var n=r(e.hi(t));return n>20?52:n+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(x,T,b){"use strict";x("bn.js"),T.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(x,T,b){"use strict";var e=x("bn.js"),r=x("double-bits");T.exports=function(t){var a=r.exponent(t);return a<52?new e(t):new e(t*Math.pow(2,52-a)).ushln(a-52)}},{"bn.js":33,"double-bits":64}],25:[function(x,T,b){"use strict";var e=x("./num-to-bn"),r=x("./bn-sign");T.exports=function(t,a){var n=r(t),d=r(a);if(0===n)return[e(0),e(1)];if(0===d)return[e(0),e(0)];d<0&&(t=t.neg(),a=a.neg());var s=t.gcd(a);return s.cmpn(1)?[t.div(s),a.div(s)]:[t,a]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(x,T,b){"use strict";var e=x("bn.js");T.exports=function(r){return new e(r)}},{"bn.js":33}],27:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(r,t){return e(r[0].mul(t[0]),r[1].mul(t[1]))}},{"./lib/rationalize":25}],28:[function(x,T,b){"use strict";var e=x("./lib/bn-sign");T.exports=function(r){return e(r[0])*e(r[1])}},{"./lib/bn-sign":20}],29:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(r,t){return e(r[0].mul(t[1]).sub(r[1].mul(t[0])),r[1].mul(t[1]))}},{"./lib/rationalize":25}],30:[function(x,T,b){"use strict";var e=x("./lib/bn-to-num"),r=x("./lib/ctz");T.exports=function(t){var a=t[0],n=t[1];if(0===a.cmpn(0))return 0;var d=a.abs().divmod(n.abs()),i=e(d.div),u=d.mod,f=a.negative!==n.negative?-1:1;if(0===u.cmpn(0))return f*i;if(i){var p=r(i)+4,y=e(u.ushln(p).divRound(n));return f*(i+y*Math.pow(2,-p))}var m=n.bitLength()-u.bitLength()+53;return y=e(u.ushln(m).divRound(n)),m<1023?f*y*Math.pow(2,-m):f*(y*=Math.pow(2,-1023))*Math.pow(2,1023-m)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(x,T,b){"use strict";function e(s,i,u,f,p){for(var y=p+1;f<=p;){var m=f+p>>>1,l=s[m];(void 0!==u?u(l,i):l-i)>=0?(y=m,p=m-1):f=m+1}return y}function r(s,i,u,f,p){for(var y=p+1;f<=p;){var m=f+p>>>1,l=s[m];(void 0!==u?u(l,i):l-i)>0?(y=m,p=m-1):f=m+1}return y}function t(s,i,u,f,p){for(var y=f-1;f<=p;){var m=f+p>>>1,l=s[m];(void 0!==u?u(l,i):l-i)<0?(y=m,f=m+1):p=m-1}return y}function a(s,i,u,f,p){for(var y=f-1;f<=p;){var m=f+p>>>1,l=s[m];(void 0!==u?u(l,i):l-i)<=0?(y=m,f=m+1):p=m-1}return y}function n(s,i,u,f,p){for(;f<=p;){var y=f+p>>>1,m=s[y],l=void 0!==u?u(m,i):m-i;if(0===l)return y;l<=0?f=y+1:p=y-1}return-1}function d(s,i,u,f,p,y){return"function"==typeof u?y(s,i,u,void 0===f?0:0|f,void 0===p?s.length-1:0|p):y(s,i,void 0,void 0===u?0:0|u,void 0===f?s.length-1:0|f)}T.exports={ge:function(s,i,u,f,p){return d(s,i,u,f,p,e)},gt:function(s,i,u,f,p){return d(s,i,u,f,p,r)},lt:function(s,i,u,f,p){return d(s,i,u,f,p,t)},le:function(s,i,u,f,p){return d(s,i,u,f,p,a)},eq:function(s,i,u,f,p){return d(s,i,u,f,p,n)}}},{}],32:[function(x,T,b){"use strict";function e(t){var a=32;return(t&=-t)&&a--,65535&t&&(a-=16),16711935&t&&(a-=8),252645135&t&&(a-=4),858993459&t&&(a-=2),1431655765&t&&(a-=1),a}b.INT_BITS=32,b.INT_MAX=2147483647,b.INT_MIN=-1<<31,b.sign=function(t){return(t>0)-(t<0)},b.abs=function(t){var a=t>>31;return(t^a)-a},b.min=function(t,a){return a^(t^a)&-(t<a)},b.max=function(t,a){return t^(t^a)&-(t<a)},b.isPow2=function(t){return!(t&t-1||!t)},b.log2=function(t){var a,n;return a=(t>65535)<<4,a|=n=((t>>>=a)>255)<<3,a|=n=((t>>>=n)>15)<<2,(a|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},b.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},b.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},b.countTrailingZeros=e,b.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,1+((t|=t>>>8)|t>>>16)},b.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},b.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);(function(t){for(var a=0;a<256;++a){var n=a,d=a,s=7;for(n>>>=1;n;n>>>=1)d<<=1,d|=1&n,--s;t[a]=d<<s&255}})(r),b.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},b.interleave2=function(t,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))<<1},b.deinterleave2=function(t,a){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>a&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},b.interleave3=function(t,a,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},b.deinterleave3=function(t,a){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>a&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},b.nextCombination=function(t){var a=t|t-1;return a+1|(~a&-~a)-1>>>e(t)+1}},{}],33:[function(x,T,b){!function(e,r){"use strict";function t(D,L){if(!D)throw new Error(L||"Assertion failed")}function a(D,L){D.super_=L;var B=function(){};B.prototype=L.prototype,D.prototype=new B,D.prototype.constructor=D}function n(D,L,B){if(n.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,null!==D&&("le"!==L&&"be"!==L||(B=L,L=10),this._init(D||0,L||10,B||"be"))}var d;"object"==typeof e?e.exports=n:r.BN=n,n.BN=n,n.wordSize=26;try{d="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:x("buffer").Buffer}catch(D){}function s(D,L){var B=D.charCodeAt(L);return B>=65&&B<=70?B-55:B>=97&&B<=102?B-87:B-48&15}function i(D,L,B){var V=s(D,B);return B-1>=L&&(V|=s(D,B-1)<<4),V}function u(D,L,B,V){for(var Z=0,Y=Math.min(D.length,B),ee=L;ee<Y;ee++){var Q=D.charCodeAt(ee)-48;Z*=V,Z+=Q>=49?Q-49+10:Q>=17?Q-17+10:Q}return Z}n.isBN=function(D){return D instanceof n||null!==D&&"object"==typeof D&&D.constructor.wordSize===n.wordSize&&Array.isArray(D.words)},n.max=function(D,L){return D.cmp(L)>0?D:L},n.min=function(D,L){return D.cmp(L)<0?D:L},n.prototype._init=function(D,L,B){if("number"==typeof D)return this._initNumber(D,L,B);if("object"==typeof D)return this._initArray(D,L,B);"hex"===L&&(L=16),t(L===(0|L)&&L>=2&&L<=36);var V=0;"-"===(D=D.toString().replace(/\s+/g,""))[0]&&(V++,this.negative=1),V<D.length&&(16===L?this._parseHex(D,V,B):(this._parseBase(D,L,V),"le"===B&&this._initArray(this.toArray(),L,B)))},n.prototype._initNumber=function(D,L,B){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[67108863&D],this.length=1):D<4503599627370496?(this.words=[67108863&D,D/67108864&67108863],this.length=2):(t(D<9007199254740992),this.words=[67108863&D,D/67108864&67108863,1],this.length=3),"le"===B&&this._initArray(this.toArray(),L,B)},n.prototype._initArray=function(D,L,B){if(t("number"==typeof D.length),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var Z,Y,ee=0;if("be"===B)for(V=D.length-1,Z=0;V>=0;V-=3)this.words[Z]|=(Y=D[V]|D[V-1]<<8|D[V-2]<<16)<<ee&67108863,this.words[Z+1]=Y>>>26-ee&67108863,(ee+=24)>=26&&(ee-=26,Z++);else if("le"===B)for(V=0,Z=0;V<D.length;V+=3)this.words[Z]|=(Y=D[V]|D[V+1]<<8|D[V+2]<<16)<<ee&67108863,this.words[Z+1]=Y>>>26-ee&67108863,(ee+=24)>=26&&(ee-=26,Z++);return this.strip()},n.prototype._parseHex=function(D,L,B){this.length=Math.ceil((D.length-L)/6),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var Z,Y=0,ee=0;if("be"===B)for(V=D.length-1;V>=L;V-=2)Z=i(D,L,V)<<Y,this.words[ee]|=67108863&Z,Y>=18?(Y-=18,this.words[ee+=1]|=Z>>>26):Y+=8;else for(V=(D.length-L)%2==0?L+1:L;V<D.length;V+=2)Z=i(D,L,V)<<Y,this.words[ee]|=67108863&Z,Y>=18?(Y-=18,this.words[ee+=1]|=Z>>>26):Y+=8;this.strip()},n.prototype._parseBase=function(D,L,B){this.words=[0],this.length=1;for(var V=0,Z=1;Z<=67108863;Z*=L)V++;V--,Z=Z/L|0;for(var Y=D.length-B,ee=Y%V,Q=Math.min(Y,Y-ee)+B,$=0,K=B;K<Q;K+=V)$=u(D,K,K+V,L),this.imuln(Z),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($);if(0!==ee){var oe=1;for($=u(D,K,D.length,L),K=0;K<ee;K++)oe*=L;this.imuln(oe),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($)}this.strip()},n.prototype.copy=function(D){D.words=new Array(this.length);for(var L=0;L<this.length;L++)D.words[L]=this.words[L];D.length=this.length,D.negative=this.negative,D.red=this.red},n.prototype.clone=function(){var D=new n(null);return this.copy(D),D},n.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(D,L,B){B.negative=L.negative^D.negative;var V=D.length+L.length|0;B.length=V,V=V-1|0;var Z=0|D.words[0],Y=0|L.words[0],ee=Z*Y,$=ee/67108864|0;B.words[0]=67108863&ee;for(var K=1;K<V;K++){for(var oe=$>>>26,j=67108863&$,H=Math.min(K,L.length-1),G=Math.max(0,K-D.length+1);G<=H;G++)oe+=(ee=(Z=0|D.words[K-G|0])*(Y=0|L.words[G])+j)/67108864|0,j=67108863&ee;B.words[K]=0|j,$=0|oe}return 0!==$?B.words[K]=0|$:B.length--,B.strip()}n.prototype.toString=function(D,L){var B;if(L=0|L||1,16===(D=D||10)||"hex"===D){B="";for(var V=0,Z=0,Y=0;Y<this.length;Y++){var ee=this.words[Y],Q=(16777215&(ee<<V|Z)).toString(16);B=0!=(Z=ee>>>24-V&16777215)||Y!==this.length-1?f[6-Q.length]+Q+B:Q+B,(V+=2)>=26&&(V-=26,Y--)}for(0!==Z&&(B=Z.toString(16)+B);B.length%L!=0;)B="0"+B;return 0!==this.negative&&(B="-"+B),B}if(D===(0|D)&&D>=2&&D<=36){var $=p[D],K=y[D];B="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var j=oe.modn(K).toString(D);B=(oe=oe.idivn(K)).isZero()?j+B:f[$-j.length]+j+B}for(this.isZero()&&(B="0"+B);B.length%L!=0;)B="0"+B;return 0!==this.negative&&(B="-"+B),B}t(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var D=this.words[0];return 2===this.length?D+=67108864*this.words[1]:3===this.length&&1===this.words[2]?D+=4503599627370496+67108864*this.words[1]:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-D:D},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(D,L){return t(void 0!==d),this.toArrayLike(d,D,L)},n.prototype.toArray=function(D,L){return this.toArrayLike(Array,D,L)},n.prototype.toArrayLike=function(D,L,B){var V=this.byteLength(),Z=B||Math.max(1,V);t(V<=Z,"byte array longer than desired length"),t(Z>0,"Requested array length <= 0"),this.strip();var Y,ee,Q="le"===L,$=new D(Z),K=this.clone();if(Q){for(ee=0;!K.isZero();ee++)Y=K.andln(255),K.iushrn(8),$[ee]=Y;for(;ee<Z;ee++)$[ee]=0}else{for(ee=0;ee<Z-V;ee++)$[ee]=0;for(ee=0;!K.isZero();ee++)Y=K.andln(255),K.iushrn(8),$[Z-ee-1]=Y}return $},n.prototype._countBits=Math.clz32?function(D){return 32-Math.clz32(D)}:function(D){var L=D,B=0;return L>=4096&&(B+=13,L>>>=13),L>=64&&(B+=7,L>>>=7),L>=8&&(B+=4,L>>>=4),L>=2&&(B+=2,L>>>=2),B+L},n.prototype._zeroBits=function(D){if(0===D)return 26;var L=D,B=0;return 0==(8191&L)&&(B+=13,L>>>=13),0==(127&L)&&(B+=7,L>>>=7),0==(15&L)&&(B+=4,L>>>=4),0==(3&L)&&(B+=2,L>>>=2),0==(1&L)&&B++,B},n.prototype.bitLength=function(){var L=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+L},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,L=0;L<this.length;L++){var B=this._zeroBits(this.words[L]);if(D+=B,26!==B)break}return D},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(D){return 0!==this.negative?this.abs().inotn(D).iaddn(1):this.clone()},n.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var L=0;L<D.length;L++)this.words[L]=this.words[L]|D.words[L];return this.strip()},n.prototype.ior=function(D){return t(0==(this.negative|D.negative)),this.iuor(D)},n.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},n.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},n.prototype.iuand=function(D){var L;L=this.length>D.length?D:this;for(var B=0;B<L.length;B++)this.words[B]=this.words[B]&D.words[B];return this.length=L.length,this.strip()},n.prototype.iand=function(D){return t(0==(this.negative|D.negative)),this.iuand(D)},n.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},n.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},n.prototype.iuxor=function(D){var L,B;this.length>D.length?(L=this,B=D):(L=D,B=this);for(var V=0;V<B.length;V++)this.words[V]=L.words[V]^B.words[V];if(this!==L)for(;V<L.length;V++)this.words[V]=L.words[V];return this.length=L.length,this.strip()},n.prototype.ixor=function(D){return t(0==(this.negative|D.negative)),this.iuxor(D)},n.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},n.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},n.prototype.inotn=function(D){t("number"==typeof D&&D>=0);var L=0|Math.ceil(D/26),B=D%26;this._expand(L),B>0&&L--;for(var V=0;V<L;V++)this.words[V]=67108863&~this.words[V];return B>0&&(this.words[V]=~this.words[V]&67108863>>26-B),this.strip()},n.prototype.notn=function(D){return this.clone().inotn(D)},n.prototype.setn=function(D,L){t("number"==typeof D&&D>=0);var B=D/26|0,V=D%26;return this._expand(B+1),this.words[B]=L?this.words[B]|1<<V:this.words[B]&~(1<<V),this.strip()},n.prototype.iadd=function(D){var L,B,V;if(0!==this.negative&&0===D.negative)return this.negative=0,L=this.isub(D),this.negative^=1,this._normSign();if(0===this.negative&&0!==D.negative)return D.negative=0,L=this.isub(D),D.negative=1,L._normSign();this.length>D.length?(B=this,V=D):(B=D,V=this);for(var Z=0,Y=0;Y<V.length;Y++)this.words[Y]=67108863&(L=(0|B.words[Y])+(0|V.words[Y])+Z),Z=L>>>26;for(;0!==Z&&Y<B.length;Y++)this.words[Y]=67108863&(L=(0|B.words[Y])+Z),Z=L>>>26;if(this.length=B.length,0!==Z)this.words[this.length]=Z,this.length++;else if(B!==this)for(;Y<B.length;Y++)this.words[Y]=B.words[Y];return this},n.prototype.add=function(D){var L;return 0!==D.negative&&0===this.negative?(D.negative=0,L=this.sub(D),D.negative^=1,L):0===D.negative&&0!==this.negative?(this.negative=0,L=D.sub(this),this.negative=1,L):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},n.prototype.isub=function(D){if(0!==D.negative){D.negative=0;var L=this.iadd(D);return D.negative=1,L._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var B,V,Z=this.cmp(D);if(0===Z)return this.negative=0,this.length=1,this.words[0]=0,this;Z>0?(B=this,V=D):(B=D,V=this);for(var Y=0,ee=0;ee<V.length;ee++)Y=(L=(0|B.words[ee])-(0|V.words[ee])+Y)>>26,this.words[ee]=67108863&L;for(;0!==Y&&ee<B.length;ee++)Y=(L=(0|B.words[ee])+Y)>>26,this.words[ee]=67108863&L;if(0===Y&&ee<B.length&&B!==this)for(;ee<B.length;ee++)this.words[ee]=B.words[ee];return this.length=Math.max(this.length,ee),B!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(D){return this.clone().isub(D)};var l=function(D,L,B){var V,Z,Y,ee=D.words,Q=L.words,$=B.words,K=0,oe=0|ee[0],j=8191&oe,H=oe>>>13,G=0|ee[1],re=8191&G,q=G>>>13,te=0|ee[2],ne=8191&te,le=te>>>13,ue=0|ee[3],de=8191&ue,he=ue>>>13,be=0|ee[4],ge=8191&be,we=be>>>13,ke=0|ee[5],De=8191&ke,Ee=ke>>>13,Re=0|ee[6],ve=8191&Re,Te=Re>>>13,Ie=0|ee[7],Ce=8191&Ie,Pe=Ie>>>13,Ve=0|ee[8],qe=8191&Ve,Je=Ve>>>13,lt=0|ee[9],He=8191&lt,$e=lt>>>13,et=0|Q[0],tt=8191&et,ft=et>>>13,bt=0|Q[1],Ct=8191&bt,Vt=bt>>>13,Ft=0|Q[2],ht=8191&Ft,ut=Ft>>>13,Rt=0|Q[3],nn=8191&Rt,cn=Rt>>>13,Ze=0|Q[4],Qe=8191&Ze,Ge=Ze>>>13,rt=0|Q[5],Le=8191&rt,ze=rt>>>13,je=0|Q[6],Ne=8191&je,st=je>>>13,mt=0|Q[7],Tt=8191&mt,xt=mt>>>13,zt=0|Q[8],gt=8191&zt,Bt=zt>>>13,jt=0|Q[9],it=8191&jt,Mt=jt>>>13;B.negative=D.negative^L.negative,B.length=19;var qt=(K+(V=Math.imul(j,tt))|0)+((8191&(Z=(Z=Math.imul(j,ft))+Math.imul(H,tt)|0))<<13)|0;K=((Y=Math.imul(H,ft))+(Z>>>13)|0)+(qt>>>26)|0,qt&=67108863,V=Math.imul(re,tt),Z=(Z=Math.imul(re,ft))+Math.imul(q,tt)|0,Y=Math.imul(q,ft);var Wt=(K+(V=V+Math.imul(j,Ct)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Vt)|0)+Math.imul(H,Ct)|0))<<13)|0;K=((Y=Y+Math.imul(H,Vt)|0)+(Z>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,V=Math.imul(ne,tt),Z=(Z=Math.imul(ne,ft))+Math.imul(le,tt)|0,Y=Math.imul(le,ft),V=V+Math.imul(re,Ct)|0,Z=(Z=Z+Math.imul(re,Vt)|0)+Math.imul(q,Ct)|0,Y=Y+Math.imul(q,Vt)|0;var an=(K+(V=V+Math.imul(j,ht)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,ut)|0)+Math.imul(H,ht)|0))<<13)|0;K=((Y=Y+Math.imul(H,ut)|0)+(Z>>>13)|0)+(an>>>26)|0,an&=67108863,V=Math.imul(de,tt),Z=(Z=Math.imul(de,ft))+Math.imul(he,tt)|0,Y=Math.imul(he,ft),V=V+Math.imul(ne,Ct)|0,Z=(Z=Z+Math.imul(ne,Vt)|0)+Math.imul(le,Ct)|0,Y=Y+Math.imul(le,Vt)|0,V=V+Math.imul(re,ht)|0,Z=(Z=Z+Math.imul(re,ut)|0)+Math.imul(q,ht)|0,Y=Y+Math.imul(q,ut)|0;var Ue=(K+(V=V+Math.imul(j,nn)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,cn)|0)+Math.imul(H,nn)|0))<<13)|0;K=((Y=Y+Math.imul(H,cn)|0)+(Z>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,V=Math.imul(ge,tt),Z=(Z=Math.imul(ge,ft))+Math.imul(we,tt)|0,Y=Math.imul(we,ft),V=V+Math.imul(de,Ct)|0,Z=(Z=Z+Math.imul(de,Vt)|0)+Math.imul(he,Ct)|0,Y=Y+Math.imul(he,Vt)|0,V=V+Math.imul(ne,ht)|0,Z=(Z=Z+Math.imul(ne,ut)|0)+Math.imul(le,ht)|0,Y=Y+Math.imul(le,ut)|0,V=V+Math.imul(re,nn)|0,Z=(Z=Z+Math.imul(re,cn)|0)+Math.imul(q,nn)|0,Y=Y+Math.imul(q,cn)|0;var yt=(K+(V=V+Math.imul(j,Qe)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Ge)|0)+Math.imul(H,Qe)|0))<<13)|0;K=((Y=Y+Math.imul(H,Ge)|0)+(Z>>>13)|0)+(yt>>>26)|0,yt&=67108863,V=Math.imul(De,tt),Z=(Z=Math.imul(De,ft))+Math.imul(Ee,tt)|0,Y=Math.imul(Ee,ft),V=V+Math.imul(ge,Ct)|0,Z=(Z=Z+Math.imul(ge,Vt)|0)+Math.imul(we,Ct)|0,Y=Y+Math.imul(we,Vt)|0,V=V+Math.imul(de,ht)|0,Z=(Z=Z+Math.imul(de,ut)|0)+Math.imul(he,ht)|0,Y=Y+Math.imul(he,ut)|0,V=V+Math.imul(ne,nn)|0,Z=(Z=Z+Math.imul(ne,cn)|0)+Math.imul(le,nn)|0,Y=Y+Math.imul(le,cn)|0,V=V+Math.imul(re,Qe)|0,Z=(Z=Z+Math.imul(re,Ge)|0)+Math.imul(q,Qe)|0,Y=Y+Math.imul(q,Ge)|0;var Dt=(K+(V=V+Math.imul(j,Le)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,ze)|0)+Math.imul(H,Le)|0))<<13)|0;K=((Y=Y+Math.imul(H,ze)|0)+(Z>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,V=Math.imul(ve,tt),Z=(Z=Math.imul(ve,ft))+Math.imul(Te,tt)|0,Y=Math.imul(Te,ft),V=V+Math.imul(De,Ct)|0,Z=(Z=Z+Math.imul(De,Vt)|0)+Math.imul(Ee,Ct)|0,Y=Y+Math.imul(Ee,Vt)|0,V=V+Math.imul(ge,ht)|0,Z=(Z=Z+Math.imul(ge,ut)|0)+Math.imul(we,ht)|0,Y=Y+Math.imul(we,ut)|0,V=V+Math.imul(de,nn)|0,Z=(Z=Z+Math.imul(de,cn)|0)+Math.imul(he,nn)|0,Y=Y+Math.imul(he,cn)|0,V=V+Math.imul(ne,Qe)|0,Z=(Z=Z+Math.imul(ne,Ge)|0)+Math.imul(le,Qe)|0,Y=Y+Math.imul(le,Ge)|0,V=V+Math.imul(re,Le)|0,Z=(Z=Z+Math.imul(re,ze)|0)+Math.imul(q,Le)|0,Y=Y+Math.imul(q,ze)|0;var Ht=(K+(V=V+Math.imul(j,Ne)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,st)|0)+Math.imul(H,Ne)|0))<<13)|0;K=((Y=Y+Math.imul(H,st)|0)+(Z>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,V=Math.imul(Ce,tt),Z=(Z=Math.imul(Ce,ft))+Math.imul(Pe,tt)|0,Y=Math.imul(Pe,ft),V=V+Math.imul(ve,Ct)|0,Z=(Z=Z+Math.imul(ve,Vt)|0)+Math.imul(Te,Ct)|0,Y=Y+Math.imul(Te,Vt)|0,V=V+Math.imul(De,ht)|0,Z=(Z=Z+Math.imul(De,ut)|0)+Math.imul(Ee,ht)|0,Y=Y+Math.imul(Ee,ut)|0,V=V+Math.imul(ge,nn)|0,Z=(Z=Z+Math.imul(ge,cn)|0)+Math.imul(we,nn)|0,Y=Y+Math.imul(we,cn)|0,V=V+Math.imul(de,Qe)|0,Z=(Z=Z+Math.imul(de,Ge)|0)+Math.imul(he,Qe)|0,Y=Y+Math.imul(he,Ge)|0,V=V+Math.imul(ne,Le)|0,Z=(Z=Z+Math.imul(ne,ze)|0)+Math.imul(le,Le)|0,Y=Y+Math.imul(le,ze)|0,V=V+Math.imul(re,Ne)|0,Z=(Z=Z+Math.imul(re,st)|0)+Math.imul(q,Ne)|0,Y=Y+Math.imul(q,st)|0;var Jt=(K+(V=V+Math.imul(j,Tt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,xt)|0)+Math.imul(H,Tt)|0))<<13)|0;K=((Y=Y+Math.imul(H,xt)|0)+(Z>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,V=Math.imul(qe,tt),Z=(Z=Math.imul(qe,ft))+Math.imul(Je,tt)|0,Y=Math.imul(Je,ft),V=V+Math.imul(Ce,Ct)|0,Z=(Z=Z+Math.imul(Ce,Vt)|0)+Math.imul(Pe,Ct)|0,Y=Y+Math.imul(Pe,Vt)|0,V=V+Math.imul(ve,ht)|0,Z=(Z=Z+Math.imul(ve,ut)|0)+Math.imul(Te,ht)|0,Y=Y+Math.imul(Te,ut)|0,V=V+Math.imul(De,nn)|0,Z=(Z=Z+Math.imul(De,cn)|0)+Math.imul(Ee,nn)|0,Y=Y+Math.imul(Ee,cn)|0,V=V+Math.imul(ge,Qe)|0,Z=(Z=Z+Math.imul(ge,Ge)|0)+Math.imul(we,Qe)|0,Y=Y+Math.imul(we,Ge)|0,V=V+Math.imul(de,Le)|0,Z=(Z=Z+Math.imul(de,ze)|0)+Math.imul(he,Le)|0,Y=Y+Math.imul(he,ze)|0,V=V+Math.imul(ne,Ne)|0,Z=(Z=Z+Math.imul(ne,st)|0)+Math.imul(le,Ne)|0,Y=Y+Math.imul(le,st)|0,V=V+Math.imul(re,Tt)|0,Z=(Z=Z+Math.imul(re,xt)|0)+Math.imul(q,Tt)|0,Y=Y+Math.imul(q,xt)|0;var gn=(K+(V=V+Math.imul(j,gt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Bt)|0)+Math.imul(H,gt)|0))<<13)|0;K=((Y=Y+Math.imul(H,Bt)|0)+(Z>>>13)|0)+(gn>>>26)|0,gn&=67108863,V=Math.imul(He,tt),Z=(Z=Math.imul(He,ft))+Math.imul($e,tt)|0,Y=Math.imul($e,ft),V=V+Math.imul(qe,Ct)|0,Z=(Z=Z+Math.imul(qe,Vt)|0)+Math.imul(Je,Ct)|0,Y=Y+Math.imul(Je,Vt)|0,V=V+Math.imul(Ce,ht)|0,Z=(Z=Z+Math.imul(Ce,ut)|0)+Math.imul(Pe,ht)|0,Y=Y+Math.imul(Pe,ut)|0,V=V+Math.imul(ve,nn)|0,Z=(Z=Z+Math.imul(ve,cn)|0)+Math.imul(Te,nn)|0,Y=Y+Math.imul(Te,cn)|0,V=V+Math.imul(De,Qe)|0,Z=(Z=Z+Math.imul(De,Ge)|0)+Math.imul(Ee,Qe)|0,Y=Y+Math.imul(Ee,Ge)|0,V=V+Math.imul(ge,Le)|0,Z=(Z=Z+Math.imul(ge,ze)|0)+Math.imul(we,Le)|0,Y=Y+Math.imul(we,ze)|0,V=V+Math.imul(de,Ne)|0,Z=(Z=Z+Math.imul(de,st)|0)+Math.imul(he,Ne)|0,Y=Y+Math.imul(he,st)|0,V=V+Math.imul(ne,Tt)|0,Z=(Z=Z+Math.imul(ne,xt)|0)+Math.imul(le,Tt)|0,Y=Y+Math.imul(le,xt)|0,V=V+Math.imul(re,gt)|0,Z=(Z=Z+Math.imul(re,Bt)|0)+Math.imul(q,gt)|0,Y=Y+Math.imul(q,Bt)|0;var Qt=(K+(V=V+Math.imul(j,it)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Mt)|0)+Math.imul(H,it)|0))<<13)|0;K=((Y=Y+Math.imul(H,Mt)|0)+(Z>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,V=Math.imul(He,Ct),Z=(Z=Math.imul(He,Vt))+Math.imul($e,Ct)|0,Y=Math.imul($e,Vt),V=V+Math.imul(qe,ht)|0,Z=(Z=Z+Math.imul(qe,ut)|0)+Math.imul(Je,ht)|0,Y=Y+Math.imul(Je,ut)|0,V=V+Math.imul(Ce,nn)|0,Z=(Z=Z+Math.imul(Ce,cn)|0)+Math.imul(Pe,nn)|0,Y=Y+Math.imul(Pe,cn)|0,V=V+Math.imul(ve,Qe)|0,Z=(Z=Z+Math.imul(ve,Ge)|0)+Math.imul(Te,Qe)|0,Y=Y+Math.imul(Te,Ge)|0,V=V+Math.imul(De,Le)|0,Z=(Z=Z+Math.imul(De,ze)|0)+Math.imul(Ee,Le)|0,Y=Y+Math.imul(Ee,ze)|0,V=V+Math.imul(ge,Ne)|0,Z=(Z=Z+Math.imul(ge,st)|0)+Math.imul(we,Ne)|0,Y=Y+Math.imul(we,st)|0,V=V+Math.imul(de,Tt)|0,Z=(Z=Z+Math.imul(de,xt)|0)+Math.imul(he,Tt)|0,Y=Y+Math.imul(he,xt)|0,V=V+Math.imul(ne,gt)|0,Z=(Z=Z+Math.imul(ne,Bt)|0)+Math.imul(le,gt)|0,Y=Y+Math.imul(le,Bt)|0;var sn=(K+(V=V+Math.imul(re,it)|0)|0)+((8191&(Z=(Z=Z+Math.imul(re,Mt)|0)+Math.imul(q,it)|0))<<13)|0;K=((Y=Y+Math.imul(q,Mt)|0)+(Z>>>13)|0)+(sn>>>26)|0,sn&=67108863,V=Math.imul(He,ht),Z=(Z=Math.imul(He,ut))+Math.imul($e,ht)|0,Y=Math.imul($e,ut),V=V+Math.imul(qe,nn)|0,Z=(Z=Z+Math.imul(qe,cn)|0)+Math.imul(Je,nn)|0,Y=Y+Math.imul(Je,cn)|0,V=V+Math.imul(Ce,Qe)|0,Z=(Z=Z+Math.imul(Ce,Ge)|0)+Math.imul(Pe,Qe)|0,Y=Y+Math.imul(Pe,Ge)|0,V=V+Math.imul(ve,Le)|0,Z=(Z=Z+Math.imul(ve,ze)|0)+Math.imul(Te,Le)|0,Y=Y+Math.imul(Te,ze)|0,V=V+Math.imul(De,Ne)|0,Z=(Z=Z+Math.imul(De,st)|0)+Math.imul(Ee,Ne)|0,Y=Y+Math.imul(Ee,st)|0,V=V+Math.imul(ge,Tt)|0,Z=(Z=Z+Math.imul(ge,xt)|0)+Math.imul(we,Tt)|0,Y=Y+Math.imul(we,xt)|0,V=V+Math.imul(de,gt)|0,Z=(Z=Z+Math.imul(de,Bt)|0)+Math.imul(he,gt)|0,Y=Y+Math.imul(he,Bt)|0;var hn=(K+(V=V+Math.imul(ne,it)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ne,Mt)|0)+Math.imul(le,it)|0))<<13)|0;K=((Y=Y+Math.imul(le,Mt)|0)+(Z>>>13)|0)+(hn>>>26)|0,hn&=67108863,V=Math.imul(He,nn),Z=(Z=Math.imul(He,cn))+Math.imul($e,nn)|0,Y=Math.imul($e,cn),V=V+Math.imul(qe,Qe)|0,Z=(Z=Z+Math.imul(qe,Ge)|0)+Math.imul(Je,Qe)|0,Y=Y+Math.imul(Je,Ge)|0,V=V+Math.imul(Ce,Le)|0,Z=(Z=Z+Math.imul(Ce,ze)|0)+Math.imul(Pe,Le)|0,Y=Y+Math.imul(Pe,ze)|0,V=V+Math.imul(ve,Ne)|0,Z=(Z=Z+Math.imul(ve,st)|0)+Math.imul(Te,Ne)|0,Y=Y+Math.imul(Te,st)|0,V=V+Math.imul(De,Tt)|0,Z=(Z=Z+Math.imul(De,xt)|0)+Math.imul(Ee,Tt)|0,Y=Y+Math.imul(Ee,xt)|0,V=V+Math.imul(ge,gt)|0,Z=(Z=Z+Math.imul(ge,Bt)|0)+Math.imul(we,gt)|0,Y=Y+Math.imul(we,Bt)|0;var Dn=(K+(V=V+Math.imul(de,it)|0)|0)+((8191&(Z=(Z=Z+Math.imul(de,Mt)|0)+Math.imul(he,it)|0))<<13)|0;K=((Y=Y+Math.imul(he,Mt)|0)+(Z>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,V=Math.imul(He,Qe),Z=(Z=Math.imul(He,Ge))+Math.imul($e,Qe)|0,Y=Math.imul($e,Ge),V=V+Math.imul(qe,Le)|0,Z=(Z=Z+Math.imul(qe,ze)|0)+Math.imul(Je,Le)|0,Y=Y+Math.imul(Je,ze)|0,V=V+Math.imul(Ce,Ne)|0,Z=(Z=Z+Math.imul(Ce,st)|0)+Math.imul(Pe,Ne)|0,Y=Y+Math.imul(Pe,st)|0,V=V+Math.imul(ve,Tt)|0,Z=(Z=Z+Math.imul(ve,xt)|0)+Math.imul(Te,Tt)|0,Y=Y+Math.imul(Te,xt)|0,V=V+Math.imul(De,gt)|0,Z=(Z=Z+Math.imul(De,Bt)|0)+Math.imul(Ee,gt)|0,Y=Y+Math.imul(Ee,Bt)|0;var _n=(K+(V=V+Math.imul(ge,it)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ge,Mt)|0)+Math.imul(we,it)|0))<<13)|0;K=((Y=Y+Math.imul(we,Mt)|0)+(Z>>>13)|0)+(_n>>>26)|0,_n&=67108863,V=Math.imul(He,Le),Z=(Z=Math.imul(He,ze))+Math.imul($e,Le)|0,Y=Math.imul($e,ze),V=V+Math.imul(qe,Ne)|0,Z=(Z=Z+Math.imul(qe,st)|0)+Math.imul(Je,Ne)|0,Y=Y+Math.imul(Je,st)|0,V=V+Math.imul(Ce,Tt)|0,Z=(Z=Z+Math.imul(Ce,xt)|0)+Math.imul(Pe,Tt)|0,Y=Y+Math.imul(Pe,xt)|0,V=V+Math.imul(ve,gt)|0,Z=(Z=Z+Math.imul(ve,Bt)|0)+Math.imul(Te,gt)|0,Y=Y+Math.imul(Te,Bt)|0;var Tn=(K+(V=V+Math.imul(De,it)|0)|0)+((8191&(Z=(Z=Z+Math.imul(De,Mt)|0)+Math.imul(Ee,it)|0))<<13)|0;K=((Y=Y+Math.imul(Ee,Mt)|0)+(Z>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,V=Math.imul(He,Ne),Z=(Z=Math.imul(He,st))+Math.imul($e,Ne)|0,Y=Math.imul($e,st),V=V+Math.imul(qe,Tt)|0,Z=(Z=Z+Math.imul(qe,xt)|0)+Math.imul(Je,Tt)|0,Y=Y+Math.imul(Je,xt)|0,V=V+Math.imul(Ce,gt)|0,Z=(Z=Z+Math.imul(Ce,Bt)|0)+Math.imul(Pe,gt)|0,Y=Y+Math.imul(Pe,Bt)|0;var wn=(K+(V=V+Math.imul(ve,it)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ve,Mt)|0)+Math.imul(Te,it)|0))<<13)|0;K=((Y=Y+Math.imul(Te,Mt)|0)+(Z>>>13)|0)+(wn>>>26)|0,wn&=67108863,V=Math.imul(He,Tt),Z=(Z=Math.imul(He,xt))+Math.imul($e,Tt)|0,Y=Math.imul($e,xt),V=V+Math.imul(qe,gt)|0,Z=(Z=Z+Math.imul(qe,Bt)|0)+Math.imul(Je,gt)|0,Y=Y+Math.imul(Je,Bt)|0;var kn=(K+(V=V+Math.imul(Ce,it)|0)|0)+((8191&(Z=(Z=Z+Math.imul(Ce,Mt)|0)+Math.imul(Pe,it)|0))<<13)|0;K=((Y=Y+Math.imul(Pe,Mt)|0)+(Z>>>13)|0)+(kn>>>26)|0,kn&=67108863,V=Math.imul(He,gt),Z=(Z=Math.imul(He,Bt))+Math.imul($e,gt)|0,Y=Math.imul($e,Bt);var Fn=(K+(V=V+Math.imul(qe,it)|0)|0)+((8191&(Z=(Z=Z+Math.imul(qe,Mt)|0)+Math.imul(Je,it)|0))<<13)|0;K=((Y=Y+Math.imul(Je,Mt)|0)+(Z>>>13)|0)+(Fn>>>26)|0,Fn&=67108863;var On=(K+(V=Math.imul(He,it))|0)+((8191&(Z=(Z=Math.imul(He,Mt))+Math.imul($e,it)|0))<<13)|0;return K=((Y=Math.imul($e,Mt))+(Z>>>13)|0)+(On>>>26)|0,On&=67108863,$[0]=qt,$[1]=Wt,$[2]=an,$[3]=Ue,$[4]=yt,$[5]=Dt,$[6]=Ht,$[7]=Jt,$[8]=gn,$[9]=Qt,$[10]=sn,$[11]=hn,$[12]=Dn,$[13]=_n,$[14]=Tn,$[15]=wn,$[16]=kn,$[17]=Fn,$[18]=On,0!==K&&($[19]=K,B.length++),B};function w(D,L,B){return(new v).mulp(D,L,B)}function v(D,L){this.x=D,this.y=L}Math.imul||(l=m),n.prototype.mulTo=function(D,L){var B=this.length+D.length;return 10===this.length&&10===D.length?l(this,D,L):B<63?m(this,D,L):B<1024?function(V,Z,Y){Y.negative=Z.negative^V.negative,Y.length=V.length+Z.length;for(var ee=0,Q=0,$=0;$<Y.length-1;$++){var K=Q;Q=0;for(var oe=67108863&ee,j=Math.min($,Z.length-1),H=Math.max(0,$-V.length+1);H<=j;H++){var re=(0|V.words[$-H])*(0|Z.words[H]),q=67108863&re;oe=67108863&(q=q+oe|0),Q+=(K=(K=K+(re/67108864|0)|0)+(q>>>26)|0)>>>26,K&=67108863}Y.words[$]=oe,ee=K,K=Q}return 0!==ee?Y.words[$]=ee:Y.length--,Y.strip()}(this,D,L):w(this,D,L)},v.prototype.makeRBT=function(D){for(var L=new Array(D),B=n.prototype._countBits(D)-1,V=0;V<D;V++)L[V]=this.revBin(V,B,D);return L},v.prototype.revBin=function(D,L,B){if(0===D||D===B-1)return D;for(var V=0,Z=0;Z<L;Z++)V|=(1&D)<<L-Z-1,D>>=1;return V},v.prototype.permute=function(D,L,B,V,Z,Y){for(var ee=0;ee<Y;ee++)V[ee]=L[D[ee]],Z[ee]=B[D[ee]]},v.prototype.transform=function(D,L,B,V,Z,Y){this.permute(Y,D,L,B,V,Z);for(var ee=1;ee<Z;ee<<=1)for(var Q=ee<<1,$=Math.cos(2*Math.PI/Q),K=Math.sin(2*Math.PI/Q),oe=0;oe<Z;oe+=Q)for(var j=$,H=K,G=0;G<ee;G++){var re=B[oe+G],q=V[oe+G],te=B[oe+G+ee],ne=V[oe+G+ee],le=j*te-H*ne;ne=j*ne+H*te,B[oe+G]=re+(te=le),V[oe+G]=q+ne,B[oe+G+ee]=re-te,V[oe+G+ee]=q-ne,G!==Q&&(le=$*j-K*H,H=$*H+K*j,j=le)}},v.prototype.guessLen13b=function(D,L){var B=1|Math.max(L,D),V=1&B,Z=0;for(B=B/2|0;B;B>>>=1)Z++;return 1<<Z+1+V},v.prototype.conjugate=function(D,L,B){if(!(B<=1))for(var V=0;V<B/2;V++){var Z=D[V];D[V]=D[B-V-1],D[B-V-1]=Z,Z=L[V],L[V]=-L[B-V-1],L[B-V-1]=-Z}},v.prototype.normalize13b=function(D,L){for(var B=0,V=0;V<L/2;V++){var Z=8192*Math.round(D[2*V+1]/L)+Math.round(D[2*V]/L)+B;D[V]=67108863&Z,B=Z<67108864?0:Z/67108864|0}return D},v.prototype.convert13b=function(D,L,B,V){for(var Z=0,Y=0;Y<L;Y++)B[2*Y]=8191&(Z+=0|D[Y]),B[2*Y+1]=8191&(Z>>>=13),Z>>>=13;for(Y=2*L;Y<V;++Y)B[Y]=0;t(0===Z),t(0==(-8192&Z))},v.prototype.stub=function(D){for(var L=new Array(D),B=0;B<D;B++)L[B]=0;return L},v.prototype.mulp=function(D,L,B){var V=2*this.guessLen13b(D.length,L.length),Z=this.makeRBT(V),Y=this.stub(V),ee=new Array(V),Q=new Array(V),$=new Array(V),K=new Array(V),oe=new Array(V),j=new Array(V),H=B.words;H.length=V,this.convert13b(D.words,D.length,ee,V),this.convert13b(L.words,L.length,K,V),this.transform(ee,Y,Q,$,V,Z),this.transform(K,Y,oe,j,V,Z);for(var G=0;G<V;G++){var re=Q[G]*oe[G]-$[G]*j[G];$[G]=Q[G]*j[G]+$[G]*oe[G],Q[G]=re}return this.conjugate(Q,$,V),this.transform(Q,$,H,Y,V,Z),this.conjugate(H,Y,V),this.normalize13b(H,V),B.negative=D.negative^L.negative,B.length=D.length+L.length,B.strip()},n.prototype.mul=function(D){var L=new n(null);return L.words=new Array(this.length+D.length),this.mulTo(D,L)},n.prototype.mulf=function(D){var L=new n(null);return L.words=new Array(this.length+D.length),w(this,D,L)},n.prototype.imul=function(D){return this.clone().mulTo(D,this)},n.prototype.imuln=function(D){t("number"==typeof D),t(D<67108864);for(var L=0,B=0;B<this.length;B++){var V=(0|this.words[B])*D,Z=(67108863&V)+(67108863&L);L>>=26,L+=V/67108864|0,L+=Z>>>26,this.words[B]=67108863&Z}return 0!==L&&(this.words[B]=L,this.length++),this},n.prototype.muln=function(D){return this.clone().imuln(D)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(D){var L=function(Y){for(var ee=new Array(Y.bitLength()),Q=0;Q<ee.length;Q++){var K=Q%26;ee[Q]=(Y.words[Q/26|0]&1<<K)>>>K}return ee}(D);if(0===L.length)return new n(1);for(var B=this,V=0;V<L.length&&0===L[V];V++,B=B.sqr());if(++V<L.length)for(var Z=B.sqr();V<L.length;V++,Z=Z.sqr())0!==L[V]&&(B=B.mul(Z));return B},n.prototype.iushln=function(D){t("number"==typeof D&&D>=0);var L,B=D%26,V=(D-B)/26,Z=67108863>>>26-B<<26-B;if(0!==B){var Y=0;for(L=0;L<this.length;L++){var ee=this.words[L]&Z;this.words[L]=(0|this.words[L])-ee<<B|Y,Y=ee>>>26-B}Y&&(this.words[L]=Y,this.length++)}if(0!==V){for(L=this.length-1;L>=0;L--)this.words[L+V]=this.words[L];for(L=0;L<V;L++)this.words[L]=0;this.length+=V}return this.strip()},n.prototype.ishln=function(D){return t(0===this.negative),this.iushln(D)},n.prototype.iushrn=function(D,L,B){var V;t("number"==typeof D&&D>=0),V=L?(L-L%26)/26:0;var Z=D%26,Y=Math.min((D-Z)/26,this.length),ee=67108863^67108863>>>Z<<Z,Q=B;if(V-=Y,V=Math.max(0,V),Q){for(var $=0;$<Y;$++)Q.words[$]=this.words[$];Q.length=Y}if(0!==Y)if(this.length>Y)for(this.length-=Y,$=0;$<this.length;$++)this.words[$]=this.words[$+Y];else this.words[0]=0,this.length=1;var K=0;for($=this.length-1;$>=0&&(0!==K||$>=V);$--){var oe=0|this.words[$];this.words[$]=K<<26-Z|oe>>>Z,K=oe&ee}return Q&&0!==K&&(Q.words[Q.length++]=K),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(D,L,B){return t(0===this.negative),this.iushrn(D,L,B)},n.prototype.shln=function(D){return this.clone().ishln(D)},n.prototype.ushln=function(D){return this.clone().iushln(D)},n.prototype.shrn=function(D){return this.clone().ishrn(D)},n.prototype.ushrn=function(D){return this.clone().iushrn(D)},n.prototype.testn=function(D){t("number"==typeof D&&D>=0);var L=D%26,B=(D-L)/26;return!(this.length<=B||!(this.words[B]&1<<L))},n.prototype.imaskn=function(D){t("number"==typeof D&&D>=0);var L=D%26,B=(D-L)/26;return t(0===this.negative,"imaskn works only with positive numbers"),this.length<=B?this:(0!==L&&B++,this.length=Math.min(B,this.length),0!==L&&(this.words[this.length-1]&=67108863^67108863>>>L<<L),this.strip())},n.prototype.maskn=function(D){return this.clone().imaskn(D)},n.prototype.iaddn=function(D){return t("number"==typeof D),t(D<67108864),D<0?this.isubn(-D):0!==this.negative?1===this.length&&(0|this.words[0])<D?(this.words[0]=D-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},n.prototype._iaddn=function(D){this.words[0]+=D;for(var L=0;L<this.length&&this.words[L]>=67108864;L++)this.words[L]-=67108864,L===this.length-1?this.words[L+1]=1:this.words[L+1]++;return this.length=Math.max(this.length,L+1),this},n.prototype.isubn=function(D){if(t("number"==typeof D),t(D<67108864),D<0)return this.iaddn(-D);if(0!==this.negative)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var L=0;L<this.length&&this.words[L]<0;L++)this.words[L]+=67108864,this.words[L+1]-=1;return this.strip()},n.prototype.addn=function(D){return this.clone().iaddn(D)},n.prototype.subn=function(D){return this.clone().isubn(D)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(D,L,B){var V,Z;this._expand(D.length+B);var ee=0;for(V=0;V<D.length;V++){Z=(0|this.words[V+B])+ee;var Q=(0|D.words[V])*L;ee=((Z-=67108863&Q)>>26)-(Q/67108864|0),this.words[V+B]=67108863&Z}for(;V<this.length-B;V++)ee=(Z=(0|this.words[V+B])+ee)>>26,this.words[V+B]=67108863&Z;if(0===ee)return this.strip();for(t(-1===ee),ee=0,V=0;V<this.length;V++)ee=(Z=-(0|this.words[V])+ee)>>26,this.words[V]=67108863&Z;return this.negative=1,this.strip()},n.prototype._wordDiv=function(D,L){var B,V=this.clone(),Z=D,Y=0|Z.words[Z.length-1];0!=(B=26-this._countBits(Y))&&(Z=Z.ushln(B),V.iushln(B),Y=0|Z.words[Z.length-1]);var ee,Q=V.length-Z.length;if("mod"!==L){(ee=new n(null)).length=Q+1,ee.words=new Array(ee.length);for(var $=0;$<ee.length;$++)ee.words[$]=0}var K=V.clone()._ishlnsubmul(Z,1,Q);0===K.negative&&(V=K,ee&&(ee.words[Q]=1));for(var oe=Q-1;oe>=0;oe--){var j=67108864*(0|V.words[Z.length+oe])+(0|V.words[Z.length+oe-1]);for(j=Math.min(j/Y|0,67108863),V._ishlnsubmul(Z,j,oe);0!==V.negative;)j--,V.negative=0,V._ishlnsubmul(Z,1,oe),V.isZero()||(V.negative^=1);ee&&(ee.words[oe]=j)}return ee&&ee.strip(),V.strip(),"div"!==L&&0!==B&&V.iushrn(B),{div:ee||null,mod:V}},n.prototype.divmod=function(D,L,B){return t(!D.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===D.negative?(Y=this.neg().divmod(D,L),"mod"!==L&&(V=Y.div.neg()),"div"!==L&&(Z=Y.mod.neg(),B&&0!==Z.negative&&Z.iadd(D)),{div:V,mod:Z}):0===this.negative&&0!==D.negative?(Y=this.divmod(D.neg(),L),"mod"!==L&&(V=Y.div.neg()),{div:V,mod:Y.mod}):0!=(this.negative&D.negative)?(Y=this.neg().divmod(D.neg(),L),"div"!==L&&(Z=Y.mod.neg(),B&&0!==Z.negative&&Z.isub(D)),{div:Y.div,mod:Z}):D.length>this.length||this.cmp(D)<0?{div:new n(0),mod:this}:1===D.length?"div"===L?{div:this.divn(D.words[0]),mod:null}:"mod"===L?{div:null,mod:new n(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new n(this.modn(D.words[0]))}:this._wordDiv(D,L);var V,Z,Y},n.prototype.div=function(D){return this.divmod(D,"div",!1).div},n.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},n.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},n.prototype.divRound=function(D){var L=this.divmod(D);if(L.mod.isZero())return L.div;var B=0!==L.div.negative?L.mod.isub(D):L.mod,V=D.ushrn(1),Z=D.andln(1),Y=B.cmp(V);return Y<0||1===Z&&0===Y?L.div:0!==L.div.negative?L.div.isubn(1):L.div.iaddn(1)},n.prototype.modn=function(D){t(D<=67108863);for(var L=(1<<26)%D,B=0,V=this.length-1;V>=0;V--)B=(L*B+(0|this.words[V]))%D;return B},n.prototype.idivn=function(D){t(D<=67108863);for(var L=0,B=this.length-1;B>=0;B--){var V=(0|this.words[B])+67108864*L;this.words[B]=V/D|0,L=V%D}return this.strip()},n.prototype.divn=function(D){return this.clone().idivn(D)},n.prototype.egcd=function(D){t(0===D.negative),t(!D.isZero());var L=this,B=D.clone();L=0!==L.negative?L.umod(D):L.clone();for(var V=new n(1),Z=new n(0),Y=new n(0),ee=new n(1),Q=0;L.isEven()&&B.isEven();)L.iushrn(1),B.iushrn(1),++Q;for(var $=B.clone(),K=L.clone();!L.isZero();){for(var oe=0,j=1;0==(L.words[0]&j)&&oe<26;++oe,j<<=1);if(oe>0)for(L.iushrn(oe);oe-- >0;)(V.isOdd()||Z.isOdd())&&(V.iadd($),Z.isub(K)),V.iushrn(1),Z.iushrn(1);for(var H=0,G=1;0==(B.words[0]&G)&&H<26;++H,G<<=1);if(H>0)for(B.iushrn(H);H-- >0;)(Y.isOdd()||ee.isOdd())&&(Y.iadd($),ee.isub(K)),Y.iushrn(1),ee.iushrn(1);L.cmp(B)>=0?(L.isub(B),V.isub(Y),Z.isub(ee)):(B.isub(L),Y.isub(V),ee.isub(Z))}return{a:Y,b:ee,gcd:B.iushln(Q)}},n.prototype._invmp=function(D){t(0===D.negative),t(!D.isZero());var L=this,B=D.clone();L=0!==L.negative?L.umod(D):L.clone();for(var V,Z=new n(1),Y=new n(0),ee=B.clone();L.cmpn(1)>0&&B.cmpn(1)>0;){for(var Q=0,$=1;0==(L.words[0]&$)&&Q<26;++Q,$<<=1);if(Q>0)for(L.iushrn(Q);Q-- >0;)Z.isOdd()&&Z.iadd(ee),Z.iushrn(1);for(var K=0,oe=1;0==(B.words[0]&oe)&&K<26;++K,oe<<=1);if(K>0)for(B.iushrn(K);K-- >0;)Y.isOdd()&&Y.iadd(ee),Y.iushrn(1);L.cmp(B)>=0?(L.isub(B),Z.isub(Y)):(B.isub(L),Y.isub(Z))}return(V=0===L.cmpn(1)?Z:Y).cmpn(0)<0&&V.iadd(D),V},n.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var L=this.clone(),B=D.clone();L.negative=0,B.negative=0;for(var V=0;L.isEven()&&B.isEven();V++)L.iushrn(1),B.iushrn(1);for(;;){for(;L.isEven();)L.iushrn(1);for(;B.isEven();)B.iushrn(1);var Z=L.cmp(B);if(Z<0){var Y=L;L=B,B=Y}else if(0===Z||0===B.cmpn(1))break;L.isub(B)}return B.iushln(V)},n.prototype.invm=function(D){return this.egcd(D).a.umod(D)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(D){return this.words[0]&D},n.prototype.bincn=function(D){t("number"==typeof D);var L=D%26,B=(D-L)/26,V=1<<L;if(this.length<=B)return this._expand(B+1),this.words[B]|=V,this;for(var Z=V,Y=B;0!==Z&&Y<this.length;Y++){var ee=0|this.words[Y];Z=(ee+=Z)>>>26,this.words[Y]=ee&=67108863}return 0!==Z&&(this.words[Y]=Z,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(D){var L,B=D<0;if(0!==this.negative&&!B)return-1;if(0===this.negative&&B)return 1;if(this.strip(),this.length>1)L=1;else{B&&(D=-D),t(D<=67108863,"Number is too big");var V=0|this.words[0];L=V===D?0:V<D?-1:1}return 0!==this.negative?0|-L:L},n.prototype.cmp=function(D){if(0!==this.negative&&0===D.negative)return-1;if(0===this.negative&&0!==D.negative)return 1;var L=this.ucmp(D);return 0!==this.negative?0|-L:L},n.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var L=0,B=this.length-1;B>=0;B--){var V=0|this.words[B],Z=0|D.words[B];if(V!==Z){V<Z?L=-1:V>Z&&(L=1);break}}return L},n.prototype.gtn=function(D){return 1===this.cmpn(D)},n.prototype.gt=function(D){return 1===this.cmp(D)},n.prototype.gten=function(D){return this.cmpn(D)>=0},n.prototype.gte=function(D){return this.cmp(D)>=0},n.prototype.ltn=function(D){return-1===this.cmpn(D)},n.prototype.lt=function(D){return-1===this.cmp(D)},n.prototype.lten=function(D){return this.cmpn(D)<=0},n.prototype.lte=function(D){return this.cmp(D)<=0},n.prototype.eqn=function(D){return 0===this.cmpn(D)},n.prototype.eq=function(D){return 0===this.cmp(D)},n.red=function(D){return new F(D)},n.prototype.toRed=function(D){return t(!this.red,"Already a number in reduction context"),t(0===this.negative,"red works only with positives"),D.convertTo(this)._forceRed(D)},n.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(D){return this.red=D,this},n.prototype.forceRed=function(D){return t(!this.red,"Already a number in reduction context"),this._forceRed(D)},n.prototype.redAdd=function(D){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},n.prototype.redIAdd=function(D){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},n.prototype.redSub=function(D){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},n.prototype.redISub=function(D){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},n.prototype.redShl=function(D){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},n.prototype.redMul=function(D){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},n.prototype.redIMul=function(D){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},n.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(D){return t(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var A={k256:null,p224:null,p192:null,p25519:null};function M(D,L){this.name=D,this.p=new n(L,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function F(D){if("string"==typeof D){var L=n._prime(D);this.m=L.p,this.prime=L}else t(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}function R(D){F.call(this,D),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var D=new n(null);return D.words=new Array(Math.ceil(this.n/13)),D},M.prototype.ireduce=function(D){var L,B=D;do{this.split(B,this.tmp),L=(B=(B=this.imulK(B)).iadd(this.tmp)).bitLength()}while(L>this.n);var V=L<this.n?-1:B.ucmp(this.p);return 0===V?(B.words[0]=0,B.length=1):V>0?B.isub(this.p):void 0!==B.strip?B.strip():B._strip(),B},M.prototype.split=function(D,L){D.iushrn(this.n,0,L)},M.prototype.imulK=function(D){return D.imul(this.k)},a(k,M),k.prototype.split=function(D,L){for(var B=Math.min(D.length,9),V=0;V<B;V++)L.words[V]=D.words[V];if(L.length=B,D.length<=9)return D.words[0]=0,void(D.length=1);var Z=D.words[9];for(L.words[L.length++]=4194303&Z,V=10;V<D.length;V++){var Y=0|D.words[V];D.words[V-10]=(4194303&Y)<<4|Z>>>22,Z=Y}D.words[V-10]=Z>>>=22,D.length-=0===Z&&D.length>10?10:9},k.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var L=0,B=0;B<D.length;B++){var V=0|D.words[B];D.words[B]=67108863&(L+=977*V),L=64*V+(L/67108864|0)}return 0===D.words[D.length-1]&&(D.length--,0===D.words[D.length-1]&&D.length--),D},a(E,M),a(P,M),a(S,M),S.prototype.imulK=function(D){for(var L=0,B=0;B<D.length;B++){var V=19*(0|D.words[B])+L,Z=67108863&V;V>>>=26,D.words[B]=Z,L=V}return 0!==L&&(D.words[D.length++]=L),D},n._prime=function(D){if(A[D])return A[D];var L;if("k256"===D)L=new k;else if("p224"===D)L=new E;else if("p192"===D)L=new P;else{if("p25519"!==D)throw new Error("Unknown prime "+D);L=new S}return A[D]=L,L},F.prototype._verify1=function(D){t(0===D.negative,"red works only with positives"),t(D.red,"red works only with red numbers")},F.prototype._verify2=function(D,L){t(0==(D.negative|L.negative),"red works only with positives"),t(D.red&&D.red===L.red,"red works only with red numbers")},F.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},F.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},F.prototype.add=function(D,L){this._verify2(D,L);var B=D.add(L);return B.cmp(this.m)>=0&&B.isub(this.m),B._forceRed(this)},F.prototype.iadd=function(D,L){this._verify2(D,L);var B=D.iadd(L);return B.cmp(this.m)>=0&&B.isub(this.m),B},F.prototype.sub=function(D,L){this._verify2(D,L);var B=D.sub(L);return B.cmpn(0)<0&&B.iadd(this.m),B._forceRed(this)},F.prototype.isub=function(D,L){this._verify2(D,L);var B=D.isub(L);return B.cmpn(0)<0&&B.iadd(this.m),B},F.prototype.shl=function(D,L){return this._verify1(D),this.imod(D.ushln(L))},F.prototype.imul=function(D,L){return this._verify2(D,L),this.imod(D.imul(L))},F.prototype.mul=function(D,L){return this._verify2(D,L),this.imod(D.mul(L))},F.prototype.isqr=function(D){return this.imul(D,D.clone())},F.prototype.sqr=function(D){return this.mul(D,D)},F.prototype.sqrt=function(D){if(D.isZero())return D.clone();var L=this.m.andln(3);if(t(L%2==1),3===L){var B=this.m.add(new n(1)).iushrn(2);return this.pow(D,B)}for(var V=this.m.subn(1),Z=0;!V.isZero()&&0===V.andln(1);)Z++,V.iushrn(1);t(!V.isZero());var Y=new n(1).toRed(this),ee=Y.redNeg(),Q=this.m.subn(1).iushrn(1),$=this.m.bitLength();for($=new n(2*$*$).toRed(this);0!==this.pow($,Q).cmp(ee);)$.redIAdd(ee);for(var K=this.pow($,V),oe=this.pow(D,V.addn(1).iushrn(1)),j=this.pow(D,V),H=Z;0!==j.cmp(Y);){for(var G=j,re=0;0!==G.cmp(Y);re++)G=G.redSqr();t(re<H);var q=this.pow(K,new n(1).iushln(H-re-1));oe=oe.redMul(q),K=q.redSqr(),j=j.redMul(K),H=re}return oe},F.prototype.invm=function(D){var L=D._invmp(this.m);return 0!==L.negative?(L.negative=0,this.imod(L).redNeg()):this.imod(L)},F.prototype.pow=function(D,L){if(L.isZero())return new n(1).toRed(this);if(0===L.cmpn(1))return D.clone();var B=new Array(16);B[0]=new n(1).toRed(this),B[1]=D;for(var V=2;V<B.length;V++)B[V]=this.mul(B[V-1],D);var Z=B[0],Y=0,ee=0,Q=L.bitLength()%26;for(0===Q&&(Q=26),V=L.length-1;V>=0;V--){for(var $=L.words[V],K=Q-1;K>=0;K--){var oe=$>>K&1;Z!==B[0]&&(Z=this.sqr(Z)),0!==oe||0!==Y?(Y<<=1,Y|=oe,(4==++ee||0===V&&0===K)&&(Z=this.mul(Z,B[Y]),ee=0,Y=0)):ee=0}Q=26}return Z},F.prototype.convertTo=function(D){var L=D.umod(this.m);return L===D?L.clone():L},F.prototype.convertFrom=function(D){var L=D.clone();return L.red=null,L},n.mont=function(D){return new R(D)},a(R,F),R.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},R.prototype.convertFrom=function(D){var L=this.imod(D.mul(this.rinv));return L.red=null,L},R.prototype.imul=function(D,L){if(D.isZero()||L.isZero())return D.words[0]=0,D.length=1,D;var B=D.imul(L),V=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Z=B.isub(V).iushrn(this.shift),Y=Z;return Z.cmp(this.m)>=0?Y=Z.isub(this.m):Z.cmpn(0)<0&&(Y=Z.iadd(this.m)),Y._forceRed(this)},R.prototype.mul=function(D,L){if(D.isZero()||L.isZero())return new n(0)._forceRed(this);var B=D.mul(L),V=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Z=B.isub(V).iushrn(this.shift),Y=Z;return Z.cmp(this.m)>=0?Y=Z.isub(this.m):Z.cmpn(0)<0&&(Y=Z.iadd(this.m)),Y._forceRed(this)},R.prototype.invm=function(D){return this.imod(D._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===T||T,this)},{buffer:2}],34:[function(x,T,b){"use strict";T.exports=function(e){var r,t,a,n=e.length,d=0;for(r=0;r<n;++r)d+=e[r].length;var s=new Array(d),i=0;for(r=0;r<n;++r){var u=e[r],f=u.length;for(t=0;t<f;++t){var p=s[i++]=new Array(f-1),y=0;for(a=0;a<f;++a)a!==t&&(p[y++]=u[a]);if(1&t){var m=p[1];p[1]=p[0],p[0]=m}}}return s}},{}],35:[function(x,T,b){"use strict";T.exports=function(p,y,m){switch(arguments.length){case 1:return u(p);case 2:return"function"==typeof y?s(p,p,y,!0):f(p,y);case 3:return s(p,y,m,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,r=x("typedarray-pool"),t=x("./lib/sweep"),a=x("./lib/intersect");function n(p,y){for(var m=0;m<p;++m)if(!(y[m]<=y[m+p]))return!0;return!1}function d(p,y,m,l){for(var w=0,v=0,A=0,M=p.length;A<M;++A){var k=p[A];if(!n(y,k)){for(var E=0;E<2*y;++E)m[w++]=k[E];l[v++]=A}}return v}function s(p,y,m,l){var w=p.length,v=y.length;if(!(w<=0||v<=0)){var A=p[0].length>>>1;if(!(A<=0)){var M,k=r.mallocDouble(2*A*w),E=r.mallocInt32(w);if((w=d(p,A,k,E))>0){if(1===A&&l)t.init(w),M=t.sweepComplete(A,m,0,w,k,E,0,w,k,E);else{var P=r.mallocDouble(2*A*v),S=r.mallocInt32(v);(v=d(y,A,P,S))>0&&(t.init(w+v),M=1===A?t.sweepBipartite(A,m,0,w,k,E,0,v,P,S):a(A,m,l,w,k,E,v,P,S),r.free(P),r.free(S))}r.free(k),r.free(E)}return M}}}function i(p,y){e.push([p,y])}function u(p){return e=[],s(p,p,i,!0),e}function f(p,y){return e=[],s(p,y,i,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(x,T,b){"use strict";function e(r){return r?function(t,a,n,d,s,i,u,f,p,y,m){return s-d>p-f?function(l,w,v,A,M,k,E,P,S,F,R){for(var D=2*l,L=A,B=D*A;L<M;++L,B+=D){var V=k[w+B],Z=k[w+B+l],Y=E[L];e:for(var ee=P,Q=D*P;ee<S;++ee,Q+=D){var oe=R[ee];if(!(F[w+Q+l]<V||Z<F[w+Q])){for(var j=w+1;j<l;++j)if(k[j+l+B]<F[j+Q]||F[j+l+Q]<k[j+B])continue e;var te=v(Y,oe);if(void 0!==te)return te}}}}(t,a,n,d,s,i,u,f,p,y,m):function(l,w,v,A,M,k,E,P,S,F,R){for(var D=2*l,L=P,B=D*P;L<S;++L,B+=D){var V=F[w+B],Z=F[w+B+l],Y=R[L];e:for(var ee=A,Q=D*A;ee<M;++ee,Q+=D){var oe=E[ee];if(!(Z<k[w+Q]||k[w+Q+l]<V)){for(var j=w+1;j<l;++j)if(k[j+l+Q]<F[j+B]||F[j+l+B]<k[j+Q])continue e;var te=v(oe,Y);if(void 0!==te)return te}}}}(t,a,n,d,s,i,u,f,p,y,m)}:function(t,a,n,d,s,i,u,f,p,y,m,l){return i-s>y-p?d?function(w,v,A,M,k,E,P,S,F,R,D){for(var L=2*w,B=M,V=L*M;B<k;++B,V+=L){var Z=E[v+V],Y=E[v+V+w],ee=P[B];e:for(var Q=S,$=L*S;Q<F;++Q,$+=L){var K=R[v+$],oe=D[Q];if(!(K<=Z||Y<K)){for(var j=v+1;j<w;++j)if(E[j+w+V]<R[j+$]||R[j+w+$]<E[j+V])continue e;var te=A(oe,ee);if(void 0!==te)return te}}}}(t,a,n,s,i,u,f,p,y,m,l):function(w,v,A,M,k,E,P,S,F,R,D){for(var L=2*w,B=M,V=L*M;B<k;++B,V+=L){var Z=E[v+V],Y=E[v+V+w],ee=P[B];e:for(var Q=S,$=L*S;Q<F;++Q,$+=L){var K=R[v+$],oe=D[Q];if(!(K<Z||Y<K)){for(var j=v+1;j<w;++j)if(E[j+w+V]<R[j+$]||R[j+w+$]<E[j+V])continue e;var te=A(ee,oe);if(void 0!==te)return te}}}}(t,a,n,s,i,u,f,p,y,m,l):d?function(w,v,A,M,k,E,P,S,F,R,D){for(var L=2*w,B=S,V=L*S;B<F;++B,V+=L){var Z=R[v+V],Y=D[B];e:for(var ee=M,Q=L*M;ee<k;++ee,Q+=L){var oe=P[ee];if(!(Z<=E[v+Q]||E[v+Q+w]<Z)){for(var j=v+1;j<w;++j)if(E[j+w+Q]<R[j+V]||R[j+w+V]<E[j+Q])continue e;var te=A(Y,oe);if(void 0!==te)return te}}}}(t,a,n,s,i,u,f,p,y,m,l):function(w,v,A,M,k,E,P,S,F,R,D){for(var L=2*w,B=S,V=L*S;B<F;++B,V+=L){var Z=R[v+V],Y=D[B];e:for(var ee=M,Q=L*M;ee<k;++ee,Q+=L){var oe=P[ee];if(!(Z<E[v+Q]||E[v+Q+w]<Z)){for(var j=v+1;j<w;++j)if(E[j+w+Q]<R[j+V]||R[j+w+V]<E[j+Q])continue e;var te=A(oe,Y);if(void 0!==te)return te}}}}(t,a,n,s,i,u,f,p,y,m,l)}}b.partial=e(!1),b.full=e(!0)},{}],37:[function(x,T,b){"use strict";T.exports=function(E,P,S,F,R,D,L,B,V){!function(Ie,Ce){var Pe=8*r.log2(Ce+1)*(Ie+1)|0,Ve=r.nextPow2(6*Pe);w.length<Ve&&(e.free(w),w=e.mallocInt32(Ve));var qe=r.nextPow2(2*Pe);v.length<qe&&(e.free(v),v=e.mallocDouble(qe))}(E,F+L);var Z,Y=0,ee=2*E;for(A(Y++,0,0,F,0,L,S?16:0,-1/0,1/0),S||A(Y++,0,0,L,0,F,1,-1/0,1/0);Y>0;){var Q=6*(Y-=1),$=w[Q],K=w[Q+1],oe=w[Q+2],j=w[Q+3],H=w[Q+4],G=w[Q+5],re=2*Y,q=v[re],te=v[re+1],ne=1&G,le=!!(16&G),ue=R,de=D,he=B,be=V;if(ne&&(ue=B,de=V,he=R,be=D),!(2&G&&(oe=p(E,$,K,oe,ue,de,te),K>=oe)||4&G&&(K=y(E,$,K,oe,ue,de,q))>=oe)){var ge=oe-K,we=H-j;if(le){if(E*ge*(ge+we)<1<<22){if(void 0!==(Z=d.scanComplete(E,$,P,K,oe,ue,de,j,H,he,be)))return Z;continue}}else{if(E*Math.min(ge,we)<128){if(void 0!==(Z=a(E,$,P,ne,K,oe,ue,de,j,H,he,be)))return Z;continue}if(E*ge*we<1<<22){if(void 0!==(Z=d.scanBipartite(E,$,P,ne,K,oe,ue,de,j,H,he,be)))return Z;continue}}var ke=u(E,$,K,oe,ue,de,q,te);if(K<ke)if(E*(ke-K)<128){if(void 0!==(Z=n(E,$+1,P,K,ke,ue,de,j,H,he,be)))return Z}else if($===E-2){if(void 0!==(Z=ne?d.sweepBipartite(E,P,j,H,he,be,K,ke,ue,de):d.sweepBipartite(E,P,K,ke,ue,de,j,H,he,be)))return Z}else A(Y++,$+1,K,ke,j,H,ne,-1/0,1/0),A(Y++,$+1,j,H,K,ke,1^ne,-1/0,1/0);if(ke<oe){var De=s(E,$,j,H,he,be),Ee=he[ee*De+$],Re=f(E,$,De,H,he,be,Ee);if(Re<H&&A(Y++,$,ke,oe,Re,H,(4|ne)+(le?16:0),Ee,te),j<De&&A(Y++,$,ke,oe,j,De,(2|ne)+(le?16:0),q,Ee),De+1===Re){if(void 0!==(Z=le?k(E,$,P,ke,oe,ue,de,De,he,be[De]):M(E,$,P,ne,ke,oe,ue,de,De,he,be[De])))return Z}else if(De<Re){var ve;if(le){if(ke<(ve=m(E,$,ke,oe,ue,de,Ee))){var Te=f(E,$,ke,ve,ue,de,Ee);if($===E-2){if(ke<Te&&void 0!==(Z=d.sweepComplete(E,P,ke,Te,ue,de,De,Re,he,be))||Te<ve&&void 0!==(Z=d.sweepBipartite(E,P,Te,ve,ue,de,De,Re,he,be)))return Z}else ke<Te&&A(Y++,$+1,ke,Te,De,Re,16,-1/0,1/0),Te<ve&&(A(Y++,$+1,Te,ve,De,Re,0,-1/0,1/0),A(Y++,$+1,De,Re,Te,ve,1,-1/0,1/0))}}else ke<(ve=ne?l(E,$,ke,oe,ue,de,Ee):m(E,$,ke,oe,ue,de,Ee))&&($===E-2?Z=ne?d.sweepBipartite(E,P,De,Re,he,be,ke,ve,ue,de):d.sweepBipartite(E,P,ke,ve,ue,de,De,Re,he,be):(A(Y++,$+1,ke,ve,De,Re,ne,-1/0,1/0),A(Y++,$+1,De,Re,ke,ve,1^ne,-1/0,1/0)))}}}}};var e=x("typedarray-pool"),r=x("bit-twiddle"),t=x("./brute"),a=t.partial,n=t.full,d=x("./sweep"),s=x("./median"),i=x("./partition"),u=i("!(lo>=p0)&&!(p1>=hi)"),f=i("lo===p0"),p=i("lo<p0"),y=i("hi<=p0"),m=i("lo<=p0&&p0<=hi"),l=i("lo<p0&&p0<=hi"),w=e.mallocInt32(1024),v=e.mallocDouble(1024);function A(E,P,S,F,R,D,L,B,V){var Z=6*E;w[Z]=P,w[Z+1]=S,w[Z+2]=F,w[Z+3]=R,w[Z+4]=D,w[Z+5]=L;var Y=2*E;v[Y]=B,v[Y+1]=V}function M(E,P,S,F,R,D,L,B,V,Z,Y){var ee=2*E,Q=V*ee,$=Z[Q+P];e:for(var K=R,oe=R*ee;K<D;++K,oe+=ee){var j=L[oe+P],H=L[oe+P+E];if(!($<j||H<$||F&&$===j)){for(var G,re=B[K],q=P+1;q<E;++q)if(j=L[oe+q],(H=L[oe+q+E])<Z[Q+q]||Z[Q+q+E]<j)continue e;if(void 0!==(G=F?S(Y,re):S(re,Y)))return G}}}function k(E,P,S,F,R,D,L,B,V,Z){var Y=2*E,ee=B*Y,Q=V[ee+P];e:for(var $=F,K=F*Y;$<R;++$,K+=Y){var oe=L[$];if(oe!==Z){var j=D[K+P],H=D[K+P+E];if(!(Q<j||H<Q)){for(var G=P+1;G<E;++G)if(j=D[K+G],(H=D[K+G+E])<V[ee+G]||V[ee+G+E]<j)continue e;var te=S(oe,Z);if(void 0!==te)return te}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(x,T,b){"use strict";T.exports=function(t,a,n,d,s,i){if(d<=n+1)return n;for(var u=n,f=d,p=d+n>>>1,y=2*t,m=p,l=s[y*p+a];u<f;){if(f-u<8){r(t,a,u,f,s,i),l=s[y*p+a];break}var w=f-u,v=Math.random()*w+u|0,A=s[y*v+a],M=Math.random()*w+u|0,k=s[y*M+a],E=Math.random()*w+u|0,P=s[y*E+a];A<=k?P>=k?(m=M,l=k):A>=P?(m=v,l=A):(m=E,l=P):k>=P?(m=M,l=k):P>=A?(m=v,l=A):(m=E,l=P);for(var S=y*(f-1),F=y*m,R=0;R<y;++R,++S,++F){var D=s[S];s[S]=s[F],s[F]=D}var L=i[f-1];for(i[f-1]=i[m],i[m]=L,S=y*(f-1),F=y*(m=e(t,a,u,f-1,s,i,l)),R=0;R<y;++R,++S,++F)D=s[S],s[S]=s[F],s[F]=D;if(L=i[f-1],i[f-1]=i[m],i[m]=L,p<m){for(f=m-1;u<f&&s[y*(f-1)+a]===l;)f-=1;f+=1}else{if(!(m<p))break;for(u=m+1;u<f&&s[y*u+a]===l;)u+=1}}return e(t,a,n,p,s,i,s[y*p+a])};var e=x("./partition")("lo<p0");function r(t,a,n,d,s,i){for(var u=2*t,f=u*(n+1)+a,p=n+1;p<d;++p,f+=u)for(var y=s[f],m=p,l=u*(p-1);m>n&&s[l+a]>y;--m,l-=u){for(var w=l,v=l+u,A=0;A<u;++A,++w,++v){var M=s[w];s[w]=s[v],s[v]=M}var k=i[m];i[m]=i[m-1],i[m-1]=k}}},{"./partition":39}],39:[function(x,T,b){"use strict";T.exports=function(r){return e[r]};var e={"lo===p0":function(r,t,a,n,d,s,i){for(var u=2*r,f=u*a,p=f,y=a,m=t,l=a;n>l;++l,f+=u)if(d[f+m]===i)if(y===l)y+=1,p+=u;else{for(var w=0;u>w;++w){var v=d[f+w];d[f+w]=d[p],d[p++]=v}var A=s[l];s[l]=s[y],s[y++]=A}return y},"lo<p0":function(r,t,a,n,d,s,i){for(var u=2*r,f=u*a,p=f,y=a,m=t,l=a;n>l;++l,f+=u)if(d[f+m]<i)if(y===l)y+=1,p+=u;else{for(var w=0;u>w;++w){var v=d[f+w];d[f+w]=d[p],d[p++]=v}var A=s[l];s[l]=s[y],s[y++]=A}return y},"lo<=p0":function(r,t,a,n,d,s,i){for(var u=2*r,f=u*a,p=f,y=a,m=r+t,l=a;n>l;++l,f+=u)if(d[f+m]<=i)if(y===l)y+=1,p+=u;else{for(var w=0;u>w;++w){var v=d[f+w];d[f+w]=d[p],d[p++]=v}var A=s[l];s[l]=s[y],s[y++]=A}return y},"hi<=p0":function(r,t,a,n,d,s,i){for(var u=2*r,f=u*a,p=f,y=a,m=r+t,l=a;n>l;++l,f+=u)if(d[f+m]<=i)if(y===l)y+=1,p+=u;else{for(var w=0;u>w;++w){var v=d[f+w];d[f+w]=d[p],d[p++]=v}var A=s[l];s[l]=s[y],s[y++]=A}return y},"lo<p0&&p0<=hi":function(r,t,a,n,d,s,i){for(var u=2*r,f=u*a,p=f,y=a,m=t,l=r+t,w=a;n>w;++w,f+=u)if(d[f+m]<i&&i<=d[f+l])if(y===w)y+=1,p+=u;else{for(var M=0;u>M;++M){var k=d[f+M];d[f+M]=d[p],d[p++]=k}var E=s[w];s[w]=s[y],s[y++]=E}return y},"lo<=p0&&p0<=hi":function(r,t,a,n,d,s,i){for(var u=2*r,f=u*a,p=f,y=a,m=t,l=r+t,w=a;n>w;++w,f+=u)if(d[f+m]<=i&&i<=d[f+l])if(y===w)y+=1,p+=u;else{for(var M=0;u>M;++M){var k=d[f+M];d[f+M]=d[p],d[p++]=k}var E=s[w];s[w]=s[y],s[y++]=E}return y},"!(lo>=p0)&&!(p1>=hi)":function(r,t,a,n,d,s,i,u){for(var f=2*r,p=f*a,y=p,m=a,l=t,w=r+t,v=a;n>v;++v,p+=f)if(!(d[p+l]>=i||u>=d[p+w]))if(m===v)m+=1,y+=f;else{for(var k=0;f>k;++k){var E=d[p+k];d[p+k]=d[y],d[y++]=E}var P=s[v];s[v]=s[m],s[m++]=P}return m}}},{}],40:[function(x,T,b){"use strict";function e(i,u,f){for(var p=2*(i+1),y=i+1;y<=u;++y){for(var m=f[p++],l=f[p++],w=y,v=p-2;w-- >i;){var A=f[v-2],M=f[v-1];if(A<m||A===m&&M<l)break;f[v]=A,f[v+1]=M,v-=2}f[v]=m,f[v+1]=l}}function r(i,u,f){var p=f[i*=2],y=f[i+1];f[i]=f[u*=2],f[i+1]=f[u+1],f[u]=p,f[u+1]=y}function t(i,u,f){f[i*=2]=f[u*=2],f[i+1]=f[u+1]}function a(i,u,f,p){f*=2;var y=p[i*=2],m=p[i+1];p[i]=p[u*=2],p[i+1]=p[u+1],p[u]=p[f],p[u+1]=p[f+1],p[f]=y,p[f+1]=m}function n(i,u,f,p,y){y[i*=2]=y[u*=2],y[u]=f,y[i+1]=y[u+1],y[u+1]=p}function d(i,u,f){var p=f[i*=2],y=f[u*=2];return!(p<y)&&(p!==y||f[i+1]>f[u+1])}function s(i,u,f,p){var y=p[i*=2];return y<u||y===u&&p[i+1]<f}T.exports=function(i,u){u<=128?e(0,u-1,i):function f(p,y,m){var l=(y-p+1)/6|0,w=p+l,v=y-l,A=p+y>>1,M=A-l,k=A+l,E=w,P=M,S=A,F=k,R=v,D=p+1,L=y-1,B=0;d(E,P,m)&&(B=E,E=P,P=B),d(F,R,m)&&(B=F,F=R,R=B),d(E,S,m)&&(B=E,E=S,S=B),d(P,S,m)&&(B=P,P=S,S=B),d(E,F,m)&&(B=E,E=F,F=B),d(S,F,m)&&(B=S,S=F,F=B),d(P,R,m)&&(B=P,P=R,R=B),d(P,S,m)&&(B=P,P=S,S=B),d(F,R,m)&&(B=F,F=R,R=B);for(var V=m[2*P],Z=m[2*P+1],Y=m[2*F],ee=m[2*F+1],Q=2*E,$=2*S,K=2*R,oe=2*w,j=2*A,H=2*v,G=0;G<2;++G){var q=m[$+G],te=m[K+G];m[oe+G]=m[Q+G],m[j+G]=q,m[H+G]=te}t(M,p,m),t(k,y,m);for(var ne=D;ne<=L;++ne)if(s(ne,V,Z,m))ne!==D&&r(ne,D,m),++D;else if(!s(ne,Y,ee,m))for(;;){if(s(L,Y,ee,m)){s(L,V,Z,m)?(a(ne,D,L,m),++D,--L):(r(ne,L,m),--L);break}if(--L<ne)break}n(p,D-1,V,Z,m),n(y,L+1,Y,ee,m),D-2-p<=32?e(p,D-2,m):f(p,D-2,m),y-(L+2)<=32?e(L+2,y,m):f(L+2,y,m),L-D<=32?e(D,L,m):f(D,L,m)}(0,u-1,i)}},{}],41:[function(x,T,b){"use strict";T.exports={init:function(m){var l=r.nextPow2(m);a.length<l&&(e.free(a),a=e.mallocInt32(l)),n.length<l&&(e.free(n),n=e.mallocInt32(l)),d.length<l&&(e.free(d),d=e.mallocInt32(l)),s.length<l&&(e.free(s),s=e.mallocInt32(l)),i.length<l&&(e.free(i),i=e.mallocInt32(l)),u.length<l&&(e.free(u),u=e.mallocInt32(l));var w=8*l;f.length<w&&(e.free(f),f=e.mallocDouble(w))},sweepBipartite:function(m,l,w,v,A,M,k,E,P,S){for(var F=0,R=2*m,D=m-1,L=R-1,B=w;B<v;++B){var V=M[B],Z=R*B;f[F++]=A[Z+D],f[F++]=-(V+1),f[F++]=A[Z+L],f[F++]=V}for(B=k;B<E;++B){V=S[B]+(1<<28);var Y=R*B;f[F++]=P[Y+D],f[F++]=-V,f[F++]=P[Y+L],f[F++]=V}var ee=F>>>1;t(f,ee);var Q=0,$=0;for(B=0;B<ee;++B){var K=0|f[2*B+1];if(K>=1<<28)p(d,s,$--,K=K-(1<<28)|0);else if(K>=0)p(a,n,Q--,K);else if(K<=-(1<<28)){K=-K-(1<<28)|0;for(var oe=0;oe<Q;++oe)if(void 0!==(j=l(a[oe],K)))return j;y(d,s,$++,K)}else{for(K=-K-1|0,oe=0;oe<$;++oe){var j;if(void 0!==(j=l(K,d[oe])))return j}y(a,n,Q++,K)}}},sweepComplete:function(m,l,w,v,A,M,k,E,P,S){for(var F=0,R=2*m,D=m-1,L=R-1,B=w;B<v;++B){var V=M[B]+1<<1,Z=R*B;f[F++]=A[Z+D],f[F++]=-V,f[F++]=A[Z+L],f[F++]=V}for(B=k;B<E;++B){V=S[B]+1<<1;var Y=R*B;f[F++]=P[Y+D],f[F++]=1|-V,f[F++]=P[Y+L],f[F++]=1|V}var ee=F>>>1;t(f,ee);var Q=0,$=0,K=0;for(B=0;B<ee;++B){var oe=0|f[2*B+1],j=1&oe;if(B<ee-1&&oe>>1==f[2*B+3]>>1&&(j=2,B+=1),oe<0){for(var H=-(oe>>1)-1,G=0;G<K;++G)if(void 0!==(re=l(i[G],H)))return re;if(0!==j)for(G=0;G<Q;++G)if(void 0!==(re=l(a[G],H)))return re;if(1!==j)for(G=0;G<$;++G){var re;if(void 0!==(re=l(d[G],H)))return re}0===j?y(a,n,Q++,H):1===j?y(d,s,$++,H):2===j&&y(i,u,K++,H)}else H=(oe>>1)-1,0===j?p(a,n,Q--,H):1===j?p(d,s,$--,H):2===j&&p(i,u,K--,H)}},scanBipartite:function(m,l,w,v,A,M,k,E,P,S,F,R){var D=0,L=2*m,B=l,V=l+m,Z=1,Y=1;v?Y=1<<28:Z=1<<28;for(var ee=A;ee<M;++ee){var Q=ee+Z,$=L*ee;f[D++]=k[$+B],f[D++]=-Q,f[D++]=k[$+V],f[D++]=Q}for(ee=P;ee<S;++ee)Q=ee+Y,f[D++]=F[L*ee+B],f[D++]=-Q;var oe=D>>>1;t(f,oe);var j=0;for(ee=0;ee<oe;++ee){var H=0|f[2*ee+1];if(H<0){var G=!1;if((Q=-H)>=1<<28?(G=!v,Q-=1<<28):(G=!!v,Q-=1),G)y(a,n,j++,Q);else{var re=R[Q],q=L*Q,te=F[q+l+1],ne=F[q+l+1+m];e:for(var le=0;le<j;++le){var ue=a[le],de=L*ue;if(!(ne<k[de+l+1]||k[de+l+1+m]<te)){for(var he=l+2;he<m;++he)if(F[q+he+m]<k[de+he]||k[de+he+m]<F[q+he])continue e;var be,ge=E[ue];if(void 0!==(be=v?w(re,ge):w(ge,re)))return be}}}}else p(a,n,j--,H-Z)}},scanComplete:function(m,l,w,v,A,M,k,E,P,S,F){for(var R=0,D=2*m,L=l,B=l+m,V=v;V<A;++V){var Z=V+(1<<28),Y=D*V;f[R++]=M[Y+L],f[R++]=-Z,f[R++]=M[Y+B],f[R++]=Z}for(V=E;V<P;++V)Z=V+1,f[R++]=S[D*V+L],f[R++]=-Z;var Q=R>>>1;t(f,Q);var $=0;for(V=0;V<Q;++V){var K=0|f[2*V+1];if(K<0)if((Z=-K)>=1<<28)a[$++]=Z-(1<<28);else{var oe=F[Z-=1],j=D*Z,H=S[j+l+1],G=S[j+l+1+m];e:for(var re=0;re<$;++re){var q=a[re],te=k[q];if(te===oe)break;var ne=D*q;if(!(G<M[ne+l+1]||M[ne+l+1+m]<H)){for(var le=l+2;le<m;++le)if(S[j+le+m]<M[ne+le]||M[ne+le+m]<S[j+le])continue e;var ue=w(te,oe);if(void 0!==ue)return ue}}}else{for(Z=K-(1<<28),re=$-1;re>=0;--re)if(a[re]===Z){for(le=re+1;le<$;++le)a[le-1]=a[le];break}--$}}}};var e=x("typedarray-pool"),r=x("bit-twiddle"),t=x("./sort"),a=e.mallocInt32(1024),n=e.mallocInt32(1024),d=e.mallocInt32(1024),s=e.mallocInt32(1024),i=e.mallocInt32(1024),u=e.mallocInt32(1024),f=e.mallocDouble(8192);function p(m,l,w,v){var A=l[v],M=m[w-1];m[A]=M,l[M]=A}function y(m,l,w,v){m[w]=v,l[v]=w}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(x,T,b){"use strict";var e=x("./lib/monotone"),r=x("./lib/triangulation"),t=x("./lib/delaunay"),a=x("./lib/filter");function n(i){return[Math.min(i[0],i[1]),Math.max(i[0],i[1])]}function d(i,u){return i[0]-u[0]||i[1]-u[1]}function s(i,u,f){return u in i?i[u]:f}T.exports=function(i,u,f){Array.isArray(u)?(f=f||{},u=u||[]):(f=u||{},u=[]);var p=!!s(f,"delaunay",!0),y=!!s(f,"interior",!0),m=!!s(f,"exterior",!0),l=!!s(f,"infinity",!1);if(!y&&!m||0===i.length)return[];var w=e(i,u);if(p||y!==m||l){for(var v=r(i.length,u.map(n).sort(d)),A=0;A<w.length;++A){var M=w[A];v.addTriangle(M[0],M[1],M[2])}return p&&t(i,v),m?y?l?a(v,0,l):v.cells():a(v,1,l):a(v,-1)}return w}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(x,T,b){"use strict";var e=x("robust-in-sphere")[4];function r(t,a,n,d,s,i){var u=a.opposite(d,s);if(!(u<0)){if(s<d){var f=d;d=s,s=f,f=i,i=u,u=f}a.isConstraint(d,s)||e(t[d],t[s],t[i],t[u])<0&&n.push(d,s)}}x("binary-search-bounds"),T.exports=function(t,a){for(var n=[],d=t.length,s=a.stars,i=0;i<d;++i)for(var u=s[i],f=1;f<u.length;f+=2)if(!((l=u[f])<i||a.isConstraint(i,l))){for(var p=u[f-1],y=-1,m=1;m<u.length;m+=2)if(u[m-1]===l){y=u[m];break}y<0||e(t[i],t[l],t[p],t[y])<0&&n.push(i,l)}for(;n.length>0;){for(var l=n.pop(),w=(p=-1,y=-1,u=s[i=n.pop()],1);w<u.length;w+=2){var v=u[w-1],A=u[w];v===l?y=A:A===l&&(p=v)}p<0||y<0||e(t[i],t[l],t[p],t[y])>=0||(a.flip(i,l),r(t,a,n,p,i,y),r(t,a,n,i,y,p),r(t,a,n,y,l,p),r(t,a,n,l,p,y))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(x,T,b){"use strict";var e,r=x("binary-search-bounds");function t(n,d,s,i,u,f,p){this.cells=n,this.neighbor=d,this.flags=i,this.constraint=s,this.active=u,this.next=f,this.boundary=p}function a(n,d){return n[0]-d[0]||n[1]-d[1]||n[2]-d[2]}T.exports=function(n,d,s){var i=function(P,S){for(var F=P.cells(),R=F.length,D=0;D<R;++D){var L=(j=F[D])[0],B=j[1],V=j[2];B<V?B<L&&(j[0]=B,j[1]=V,j[2]=L):V<L&&(j[0]=V,j[1]=L,j[2]=B)}F.sort(a);var Z=new Array(R);for(D=0;D<Z.length;++D)Z[D]=0;var Y=[],ee=[],Q=new Array(3*R),$=new Array(3*R),K=null;S&&(K=[]);var oe=new t(F,Q,$,Z,Y,ee,K);for(D=0;D<R;++D)for(var j=F[D],H=0;H<3;++H){var G=Q[3*D+H]=oe.locate(B=j[(H+1)%3],L=j[H],P.opposite(B,L)),re=$[3*D+H]=P.isConstraint(L,B);G<0&&(re?ee.push(D):(Y.push(D),Z[D]=1),S&&K.push([B,L,-1]))}return oe}(n,s);if(0===d)return s?i.cells.concat(i.boundary):i.cells;for(var u=1,f=i.active,p=i.next,y=i.flags,m=i.cells,l=i.constraint,w=i.neighbor;f.length>0||p.length>0;){for(;f.length>0;){var v=f.pop();if(y[v]!==-u){y[v]=u;for(var A=0;A<3;++A){var M=w[3*v+A];M>=0&&0===y[M]&&(l[3*v+A]?p.push(M):(f.push(M),y[M]=u))}}}var k=p;p=f,f=k,p.length=0,u=-u}var E=function(P,S,F){for(var R=0,D=0;D<P.length;++D)S[D]===F&&(P[R++]=P[D]);return P.length=R,P}(m,y,d);return s?E.concat(i.boundary):E},t.prototype.locate=(e=[0,0,0],function(n,d,s){var i=n,u=d,f=s;return d<s?d<n&&(i=d,u=s,f=n):s<n&&(i=s,u=n,f=d),i<0?-1:(e[0]=i,e[1]=u,e[2]=f,r.eq(this.cells,e,a))})},{"binary-search-bounds":31}],45:[function(x,T,b){"use strict";var e=x("binary-search-bounds"),r=x("robust-orientation")[3];function t(p,y,m,l,w){this.a=p,this.b=y,this.idx=m,this.lowerIds=l,this.upperIds=w}function a(p,y,m,l){this.a=p,this.b=y,this.type=m,this.idx=l}function n(p,y){var m=p.a[0]-y.a[0]||p.a[1]-y.a[1]||p.type-y.type;return m||(0!==p.type&&(m=r(p.a,p.b,y.b))?m:p.idx-y.idx)}function d(p,y){return r(p.a,p.b,y)}function s(p,y,m,l,w){for(var v=e.lt(y,l,d),A=e.gt(y,l,d),M=v;M<A;++M){for(var k=y[M],E=k.lowerIds,P=E.length;P>1&&r(m[E[P-2]],m[E[P-1]],l)>0;)p.push([E[P-1],E[P-2],w]),P-=1;E.length=P,E.push(w);var S=k.upperIds;for(P=S.length;P>1&&r(m[S[P-2]],m[S[P-1]],l)<0;)p.push([S[P-2],S[P-1],w]),P-=1;S.length=P,S.push(w)}}function i(p,y){var m;return(m=p.a[0]<y.a[0]?r(p.a,p.b,y.a):r(y.b,y.a,p.a))?m:(m=y.b[0]<p.b[0]?r(p.a,p.b,y.b):r(y.b,y.a,p.b))||p.idx-y.idx}function u(p,y,m){var l=e.le(p,m,i),w=p[l],v=w.upperIds,A=v[v.length-1];w.upperIds=[A],p.splice(l+1,0,new t(m.a,m.b,m.idx,[A],v))}function f(p,y,m){var l=m.a;m.a=m.b,m.b=l;var w=e.eq(p,m,i);p[w-1].upperIds=p[w].upperIds,p.splice(w,1)}T.exports=function(p,y){for(var m=p.length,l=y.length,w=[],v=0;v<m;++v)w.push(new a(p[v],null,0,v));for(v=0;v<l;++v){var A=y[v],M=p[A[0]],k=p[A[1]];M[0]<k[0]?w.push(new a(M,k,2,v),new a(k,M,1,v)):M[0]>k[0]&&w.push(new a(k,M,2,v),new a(M,k,1,v))}w.sort(n);for(var E=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),P=[new t([E,1],[E,0],-1,[],[],[],[])],S=[],F=(v=0,w.length);v<F;++v){var R=w[v],D=R.type;0===D?s(S,P,p,R.a,R.idx):2===D?u(P,0,R):f(P,0,R)}return S}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(x,T,b){"use strict";var e=x("binary-search-bounds");function r(n,d){this.stars=n,this.edges=d}T.exports=function(n,d){for(var s=new Array(n),i=0;i<n;++i)s[i]=[];return new r(s,d)};var t=r.prototype;function a(n,d,s){for(var i=1,u=n.length;i<u;i+=2)if(n[i-1]===d&&n[i]===s)return n[i-1]=n[u-2],n[i]=n[u-1],void(n.length=u-2)}t.isConstraint=function(){var n=[0,0];function d(s,i){return s[0]-i[0]||s[1]-i[1]}return function(s,i){return n[0]=Math.min(s,i),n[1]=Math.max(s,i),e.eq(this.edges,n,d)>=0}}(),t.removeTriangle=function(n,d,s){var i=this.stars;a(i[n],d,s),a(i[d],s,n),a(i[s],n,d)},t.addTriangle=function(n,d,s){var i=this.stars;i[n].push(d,s),i[d].push(s,n),i[s].push(n,d)},t.opposite=function(n,d){for(var s=this.stars[d],i=1,u=s.length;i<u;i+=2)if(s[i]===n)return s[i-1];return-1},t.flip=function(n,d){var s=this.opposite(n,d),i=this.opposite(d,n);this.removeTriangle(n,d,s),this.removeTriangle(d,n,i),this.addTriangle(n,i,s),this.addTriangle(d,s,i)},t.edges=function(){for(var n=this.stars,d=[],s=0,i=n.length;s<i;++s)for(var u=n[s],f=0,p=u.length;f<p;f+=2)d.push([u[f],u[f+1]]);return d},t.cells=function(){for(var n=this.stars,d=[],s=0,i=n.length;s<i;++s)for(var u=n[s],f=0,p=u.length;f<p;f+=2){var y=u[f],m=u[f+1];s<Math.min(y,m)&&d.push([s,y,m])}return d}},{"binary-search-bounds":31}],47:[function(x,T,b){"use strict";T.exports=function(e){for(var r=1,t=1;t<e.length;++t)for(var a=0;a<t;++a)if(e[t]<e[a])r=-r;else if(e[a]===e[t])return 0;return r}},{}],48:[function(x,T,b){"use strict";var e=x("dup"),r=x("robust-linear-solve");function t(d,s){for(var i=0,u=d.length,f=0;f<u;++f)i+=d[f]*s[f];return i}function a(d){var s=d.length;if(0===s)return[];var i=e([d.length+1,d.length+1],1),u=e([d.length+1],1);i[s][s]=0;for(var f=0;f<s;++f){for(var p=0;p<=f;++p)i[p][f]=i[f][p]=2*t(d[f],d[p]);u[f]=t(d[f],d[f])}var y=r(i,u),m=0,l=y[s+1];for(f=0;f<l.length;++f)m+=l[f];var w=new Array(s);for(f=0;f<s;++f){l=y[f];var v=0;for(p=0;p<l.length;++p)v+=l[p];w[f]=v/m}return w}function n(d){if(0===d.length)return[];for(var s=d[0].length,i=e([s]),u=a(d),f=0;f<d.length;++f)for(var p=0;p<s;++p)i[p]+=d[f][p]*u[f];return i}n.barycenetric=a,T.exports=n},{dup:65,"robust-linear-solve":283}],49:[function(x,T,b){T.exports=function(r){for(var t=e(r),a=0,n=0;n<r.length;++n)for(var d=r[n],s=0;s<t.length;++s)a+=Math.pow(d[s]-t[s],2);return Math.sqrt(a/r.length)};var e=x("circumcenter")},{circumcenter:48}],50:[function(x,T,b){"use strict";T.exports=function(A,M,k){var E,D,B,V;if(k){E=M;for(var P=new Array(M.length),S=0;S<M.length;++S){var F=M[S];P[S]=[F[0],F[1],k[S]]}M=P}for(var R=(B=!!k,void 0,w(M,V=y(D=A,[],p(D)),B),!!V);v(A,M,!!k);)R=!0;if(k&&R)for(E.length=0,k.length=0,S=0;S<M.length;++S)E.push([(F=M[S])[0],F[1]]),k.push(F[2]);return R};var e=x("union-find"),r=x("box-intersect"),t=x("robust-segment-intersect"),a=x("big-rat"),n=x("big-rat/cmp"),d=x("big-rat/to-float"),s=x("rat-vec"),i=x("nextafter"),u=x("./lib/rat-seg-intersect");function f(A){var M=d(A);return[i(M,-1/0),i(M,1/0)]}function p(A){for(var M=new Array(A.length),k=0;k<A.length;++k){var E=A[k];M[k]=[i(E[0],-1/0),i(E[1],-1/0),i(E[0],1/0),i(E[1],1/0)]}return M}function y(A,M,k){for(var E=M.length,P=new e(E),S=[],F=0;F<M.length;++F){var R=M[F],D=f(R[0]),L=f(R[1]);S.push([i(D[0],-1/0),i(L[0],-1/0),i(D[1],1/0),i(L[1],1/0)])}r(S,function(ee,Q){P.link(ee,Q)});var B=!0,V=new Array(E);for(F=0;F<E;++F)(Y=P.find(F))!==F&&(B=!1,A[Y]=[Math.min(A[F][0],A[Y][0]),Math.min(A[F][1],A[Y][1])]);if(B)return null;var Z=0;for(F=0;F<E;++F){var Y;(Y=P.find(F))===F?(V[F]=Z,A[Z++]=A[F]):V[F]=-1}for(A.length=Z,F=0;F<E;++F)V[F]<0&&(V[F]=V[P.find(F)]);return V}function m(A,M){return A[0]-M[0]||A[1]-M[1]}function l(A,M){return A[0]-M[0]||A[1]-M[1]||(A[2]<M[2]?-1:A[2]>M[2]?1:0)}function w(A,M,k){if(0!==A.length){if(M)for(var E=0;E<A.length;++E){var P=M[(F=A[E])[0]],S=M[F[1]];F[0]=Math.min(P,S),F[1]=Math.max(P,S)}else for(E=0;E<A.length;++E){var F;P=(F=A[E])[0],S=F[1],F[0]=Math.min(P,S),F[1]=Math.max(P,S)}A.sort(k?l:m);var R=1;for(E=1;E<A.length;++E){var D=A[E-1],L=A[E];(L[0]!==D[0]||L[1]!==D[1]||k&&L[2]!==D[2])&&(A[R++]=L)}A.length=R}}function v(A,M,k){var D,L,V,E=function(D,L){for(var B=new Array(L.length),V=0;V<L.length;++V){var Z=L[V],Y=D[Z[0]],ee=D[Z[1]];B[V]=[i(Math.min(Y[0],ee[0]),-1/0),i(Math.min(Y[1],ee[1]),-1/0),i(Math.max(Y[0],ee[0]),1/0),i(Math.max(Y[1],ee[1]),1/0)]}return B}(A,M),P=(D=A,L=M,V=[],r(E,function(Z,Y){var ee=L[Z],Q=L[Y];ee[0]!==Q[0]&&ee[0]!==Q[1]&&ee[1]!==Q[0]&&ee[1]!==Q[1]&&t(D[ee[0]],D[ee[1]],D[Q[0]],D[Q[1]])&&V.push([Z,Y])}),V),F=function(D,L,B,V){var Z=[];return r(B,V,function(Y,ee){var Q=L[Y];if(Q[0]!==ee&&Q[1]!==ee){var $=D[ee];t(D[Q[0]],D[Q[1]],$,$)&&Z.push([Y,ee])}}),Z}(A,M,E,p(A)),R=y(A,function(D,L,B,V,Z){var Y,ee,Q=D.map(function(we){return[a(we[0]),a(we[1])]});for(Y=0;Y<B.length;++Y){var $=B[Y],K=$[1],oe=L[ee=$[0]],j=L[K],H=u(s(D[oe[0]]),s(D[oe[1]]),s(D[j[0]]),s(D[j[1]]));if(H){var G=D.length;D.push([d(H[0]),d(H[1])]),Q.push(H),V.push([ee,G],[K,G])}}for(V.sort(function(we,ke){if(we[0]!==ke[0])return we[0]-ke[0];var De=Q[we[1]],Ee=Q[ke[1]];return n(De[0],Ee[0])||n(De[1],Ee[1])}),Y=V.length-1;Y>=0;--Y){var re=L[ee=(be=V[Y])[0]],q=re[0],te=re[1],ne=D[q],le=D[te];if((ne[0]-le[0]||ne[1]-le[1])<0){var ue=q;q=te,te=ue}re[0]=q;var de,he=re[1]=be[1];for(Z&&(de=re[2]);Y>0&&V[Y-1][0]===ee;){var be,ge=(be=V[--Y])[1];L.push(Z?[he,ge,de]:[he,ge]),he=ge}L.push(Z?[he,te,de]:[he,te])}return Q}(A,M,P,F,k));return w(M,R,k),!!R||P.length>0||F.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(x,T,b){"use strict";T.exports=function(u,f,p,y){var m=n(f,u),l=n(y,p),w=i(m,l);if(0===a(w))return null;var A=i(l,n(u,p)),M=r(A,w),k=s(m,M);return d(u,k)};var e=x("big-rat/mul"),r=x("big-rat/div"),t=x("big-rat/sub"),a=x("big-rat/sign"),n=x("rat-vec/sub"),d=x("rat-vec/add"),s=x("rat-vec/muls");function i(u,f){return t(e(u[0],f[1]),e(u[1],f[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(x,T,b){T.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(x,T,b){"use strict";var e=x("./colorScale"),r=x("lerp");function t(d){return[d[0]/255,d[1]/255,d[2]/255,d[3]]}function a(d){for(var s,i="#",u=0;u<3;++u)i+=("00"+(s=(s=d[u]).toString(16))).substr(s.length);return i}function n(d){return"rgba("+d.join(",")+")"}T.exports=function(d){var s,i,u,f,p,y,m,l,w,v;if(d||(d={}),l=(d.nshades||72)-1,m=d.format||"hex",(y=d.colormap)||(y="jet"),"string"==typeof y){if(y=y.toLowerCase(),!e[y])throw Error(y+" not a supported colorscale");p=e[y]}else{if(!Array.isArray(y))throw Error("unsupported colormap option",y);p=y.slice()}if(p.length>l+1)throw new Error(y+" map requires nshades to be at least size "+p.length);w=Array.isArray(d.alpha)?2!==d.alpha.length?[1,1]:d.alpha.slice():"number"==typeof d.alpha?[d.alpha,d.alpha]:[1,1],s=p.map(function(P){return Math.round(P.index*l)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var A=p.map(function(P,S){var F=p[S].index,R=p[S].rgb.slice();return 4===R.length&&R[3]>=0&&R[3]<=1||(R[3]=w[0]+(w[1]-w[0])*F),R}),M=[];for(v=0;v<s.length-1;++v){f=s[v+1]-s[v],i=A[v],u=A[v+1];for(var k=0;k<f;k++){var E=k/f;M.push([Math.round(r(i[0],u[0],E)),Math.round(r(i[1],u[1],E)),Math.round(r(i[2],u[2],E)),r(i[3],u[3],E)])}}return M.push(p[p.length-1].rgb.concat(w[1])),"hex"===m?M=M.map(a):"rgbaString"===m?M=M.map(n):"float"===m&&(M=M.map(t)),M}},{"./colorScale":52,lerp:240}],54:[function(x,T,b){"use strict";T.exports=function(s,i,u,f){var p=e(i,u,f);if(0===p){var y=r(e(s,i,u)),m=r(e(s,i,f));if(y===m){if(0===y){var l=d(s,i,u);return l===d(s,i,f)?0:l?1:-1}return 0}return 0===m?y>0||d(s,i,f)?-1:1:0===y?m>0||d(s,i,u)?1:-1:r(m-y)}var v=e(s,i,u);return v>0?p>0&&e(s,i,f)>0?1:-1:v<0?p>0||e(s,i,f)>0?1:-1:e(s,i,f)>0||d(s,i,u)?1:-1};var e=x("robust-orientation"),r=x("signum"),t=x("two-sum"),a=x("robust-product"),n=x("robust-sum");function d(s,i,u){var f=t(s[0],-i[0]),p=t(s[1],-i[1]),y=t(u[0],-i[0]),m=t(u[1],-i[1]),l=n(a(f,y),a(p,m));return l[l.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(x,T,b){"use strict";T.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(x,T,b){T.exports=function(t,a){var n=t.length,d=t.length-a.length;if(d)return d;switch(n){case 0:return 0;case 1:return t[0]-a[0];case 2:return t[0]+t[1]-a[0]-a[1]||e(t[0],t[1])-e(a[0],a[1]);case 3:var s=t[0]+t[1],i=a[0]+a[1];if(d=s+t[2]-(i+a[2]))return d;var u=e(t[0],t[1]),f=e(a[0],a[1]);return e(u,t[2])-e(f,a[2])||e(u+t[2],s)-e(f+a[2],i);case 4:var p=t[0],y=t[1],m=t[2],l=t[3],w=a[0],v=a[1],A=a[2],M=a[3];return p+y+m+l-(w+v+A+M)||e(p,y,m,l)-e(w,v,A,M,w)||e(p+y,p+m,p+l,y+m,y+l,m+l)-e(w+v,w+A,w+M,v+A,v+M,A+M)||e(p+y+m,p+y+l,p+m+l,y+m+l)-e(w+v+A,w+v+M,w+A+M,v+A+M);default:for(var k=t.slice().sort(r),E=a.slice().sort(r),P=0;P<n;++P)if(d=k[P]-E[P])return d;return 0}};var e=Math.min;function r(t,a){return t-a}},{}],57:[function(x,T,b){"use strict";var e=x("compare-cell"),r=x("cell-orientation");T.exports=function(t,a){return e(t,a)||r(t)-r(a)}},{"cell-orientation":47,"compare-cell":56}],58:[function(x,T,b){"use strict";var e=x("./lib/ch1d"),r=x("./lib/ch2d"),t=x("./lib/chnd");T.exports=function(a){var n=a.length;if(0===n)return[];if(1===n)return[[0]];var d=a[0].length;return 0===d?[]:1===d?e(a):2===d?r(a):t(a,d)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(x,T,b){"use strict";T.exports=function(e){for(var r=0,t=0,a=1;a<e.length;++a)e[a][0]<e[r][0]&&(r=a),e[a][0]>e[t][0]&&(t=a);return r<t?[[r],[t]]:r>t?[[t],[r]]:[[r]]}},{}],60:[function(x,T,b){"use strict";T.exports=function(r){var t=e(r),a=t.length;if(a<=2)return[];for(var n=new Array(a),d=t[a-1],s=0;s<a;++s){var i=t[s];n[s]=[d,i],d=i}return n};var e=x("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(x,T,b){"use strict";T.exports=function(t,a){try{return e(t,!0)}catch(s){var n=r(t);if(n.length<=a)return[];var d=function(i,u){for(var f=i.length,p=new Array(f),y=0;y<u.length;++y)p[y]=i[u[y]];var m=u.length;for(y=0;y<f;++y)u.indexOf(y)<0&&(p[m++]=i[y]);return p}(t,n);return function(i,u){for(var f=i.length,p=u.length,y=0;y<f;++y)for(var m=i[y],l=0;l<m.length;++l){var w=m[l];if(w<p)m[l]=u[w];else{w-=p;for(var v=0;v<p;++v)w>=u[v]&&(w+=1);m[l]=w}}return i}(e(d,!0),n)}};var e=x("incremental-convex-hull"),r=x("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(x,T,b){"use strict";T.exports=function(e,r,t,a,n,d){var s=n-1,i=n*n,u=s*s,f=(1+2*n)*u,p=n*u,y=i*(3-2*n),m=i*s;if(e.length){d||(d=new Array(e.length));for(var l=e.length-1;l>=0;--l)d[l]=f*e[l]+p*r[l]+y*t[l]+m*a[l];return d}return f*e+p*r+y*t+m*a},T.exports.derivative=function(e,r,t,a,n,d){var s=6*n*n-6*n,i=3*n*n-4*n+1,u=-6*n*n+6*n,f=3*n*n-2*n;if(e.length){d||(d=new Array(e.length));for(var p=e.length-1;p>=0;--p)d[p]=s*e[p]+i*r[p]+u*t[p]+f*a[p];return d}return s*e+i*r+u*t[p]+f*a}},{}],63:[function(x,T,b){"use strict";var e=x("incremental-convex-hull"),r=x("uniq");function t(n,d){this.point=n,this.index=d}function a(n,d){for(var s=n.point,i=d.point,u=s.length,f=0;f<u;++f){var p=i[f]-s[f];if(p)return p}return 0}T.exports=function(n,d){var s=n.length;if(0===s)return[];var i=n[0].length;if(i<1)return[];if(1===i)return function(F,R,D){if(1===F)return D?[[-1,0]]:[];var L=R.map(function(ee,Q){return[ee[0],Q]});L.sort(function(ee,Q){return ee[0]-Q[0]});for(var B=new Array(F-1),V=1;V<F;++V)B[V-1]=[L[V-1][1],L[V][1]];return D&&B.push([-1,B[0][1]],[B[F-1][1],-1]),B}(s,n,d);for(var u=new Array(s),f=1,p=0;p<s;++p){for(var y=n[p],m=new Array(i+1),l=0,w=0;w<i;++w){var v=y[w];m[w]=v,l+=v*v}m[i]=l,u[p]=new t(m,p),f=Math.max(l,f)}r(u,a),s=u.length;var A=new Array(s+i+1),M=new Array(s+i+1),k=(i+1)*(i+1)*f,E=new Array(i+1);for(p=0;p<=i;++p)E[p]=0;for(E[i]=k,A[0]=E.slice(),M[0]=-1,p=0;p<=i;++p)(m=E.slice())[p]=1,A[p+1]=m,M[p+1]=-1;for(p=0;p<s;++p){var P=u[p];A[p+i+1]=P.point,M[p+i+1]=P.index}var S=e(A,!1);if(S=S.filter(d?function(F){for(var R=0,D=0;D<=i;++D){var L=M[F[D]];if(L<0&&++R>=2)return!1;F[D]=L}return!0}:function(F){for(var R=0;R<=i;++R){var D=M[F[R]];if(D<0)return!1;F[R]=D}return!0}),1&i)for(p=0;p<S.length;++p)m=(P=S[p])[0],P[0]=P[1],P[1]=m;return S}},{"incremental-convex-hull":233,uniq:310}],64:[function(x,T,b){(function(e){(function(){var r=!1;if("undefined"!=typeof Float64Array){var t=new Float64Array(1),a=new Uint32Array(t.buffer);t[0]=1,r=!0,1072693248===a[1]?(T.exports=function(d){return t[0]=d,[a[0],a[1]]},T.exports.pack=function(d,s){return a[0]=d,a[1]=s,t[0]},T.exports.lo=function(d){return t[0]=d,a[0]},T.exports.hi=function(d){return t[0]=d,a[1]}):1072693248===a[0]?(T.exports=function(d){return t[0]=d,[a[1],a[0]]},T.exports.pack=function(d,s){return a[1]=d,a[0]=s,t[0]},T.exports.lo=function(d){return t[0]=d,a[1]},T.exports.hi=function(d){return t[0]=d,a[0]}):r=!1}if(!r){var n=new e(8);T.exports=function(d){return n.writeDoubleLE(d,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},T.exports.pack=function(d,s){return n.writeUInt32LE(d,0,!0),n.writeUInt32LE(s,4,!0),n.readDoubleLE(0,!0)},T.exports.lo=function(d){return n.writeDoubleLE(d,0,!0),n.readUInt32LE(0,!0)},T.exports.hi=function(d){return n.writeDoubleLE(d,0,!0),n.readUInt32LE(4,!0)}}T.exports.sign=function(d){return T.exports.hi(d)>>>31},T.exports.exponent=function(d){return(T.exports.hi(d)<<1>>>21)-1023},T.exports.fraction=function(d){var s=T.exports.lo(d),i=T.exports.hi(d),u=1048575&i;return 2146435072&i&&(u+=1<<20),[s,u]},T.exports.denormalized=function(d){return!(2146435072&T.exports.hi(d))}}).call(this)}).call(this,x("buffer").Buffer)},{buffer:3}],65:[function(x,T,b){"use strict";T.exports=function(e,r){switch(void 0===r&&(r=0),typeof e){case"number":if(e>0)return function(t,a){var n,d;for(n=new Array(t),d=0;d<t;++d)n[d]=a;return n}(0|e,r);break;case"object":if("number"==typeof e.length)return function t(a,n,d){var s=0|a[d];if(s<=0)return[];var i,u=new Array(s);if(d===a.length-1)for(i=0;i<s;++i)u[i]=n;else for(i=0;i<s;++i)u[i]=t(a,n,d+1);return u}(e,r,0)}return[]}},{}],66:[function(x,T,b){"use strict";T.exports=function(r,t){var a=r.length;if("number"!=typeof t){t=0;for(var n=0;n<a;++n){var d=r[n];t=Math.max(t,d[0],d[1])}t=1+(0|t)}t|=0;var s=new Array(t);for(n=0;n<t;++n)s[n]=[];for(n=0;n<a;++n)s[(d=r[n])[0]].push(d[1]),s[d[1]].push(d[0]);for(var i=0;i<t;++i)e(s[i],function(u,f){return u-f});return s};var e=x("uniq")},{uniq:310}],67:[function(x,T,b){"use strict";T.exports=function(e,r,t){var a=r||0,n=t||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[a*e[12]+e[8],a*e[13]+e[9],a*e[14]+e[10],a*e[15]+e[11]],[n*e[12]-e[8],n*e[13]-e[9],n*e[14]-e[10],n*e[15]-e[11]]]}},{}],68:[function(x,T,b){"use strict";T.exports=function(s,i,u){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return"number"==typeof s?new a(f=d(s),f,0):new a(s,d(s.length),0);case 2:if("number"==typeof i){var f=d(s.length);return new a(s,f,+i)}u=0;case 3:if(s.length!==i.length)throw new Error("state and velocity lengths must match");return new a(s,i,u)}};var e=x("cubic-hermite"),r=x("binary-search-bounds");function t(s,i,u){return Math.min(i,Math.max(s,u))}function a(s,i,u){this.dimension=s.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var f=0;f<this.dimension;++f)this.bounds[0][f]=-1/0,this.bounds[1][f]=1/0;this._state=s.slice().reverse(),this._velocity=i.slice().reverse(),this._time=[u],this._scratch=[s.slice(),s.slice(),s.slice(),s.slice(),s.slice()]}var n=a.prototype;function d(s){for(var i=new Array(s),u=0;u<s;++u)i[u]=0;return i}n.flush=function(s){var i=r.gt(this._time,s)-1;i<=0||(this._time.splice(0,i),this._state.splice(0,i*this.dimension),this._velocity.splice(0,i*this.dimension))},n.curve=function(s){var i=this._time,u=i.length,f=r.le(i,s),p=this._scratch[0],y=this._state,m=this._velocity,l=this.dimension,w=this.bounds;if(f<0)for(var v=l-1,A=0;A<l;++A,--v)p[A]=y[v];else if(f>=u-1){v=y.length-1;var M=s-i[u-1];for(A=0;A<l;++A,--v)p[A]=y[v]+M*m[v]}else{v=l*(f+1)-1;var k=i[f],E=i[f+1]-k||1,P=this._scratch[1],S=this._scratch[2],F=this._scratch[3],R=this._scratch[4],D=!0;for(A=0;A<l;++A,--v)P[A]=y[v],F[A]=m[v]*E,S[A]=y[v+l],R[A]=m[v+l]*E,D=D&&P[A]===S[A]&&F[A]===R[A]&&0===F[A];if(D)for(A=0;A<l;++A)p[A]=P[A];else e(P,F,S,R,(s-k)/E,p)}var L=w[0],B=w[1];for(A=0;A<l;++A)p[A]=t(L[A],B[A],p[A]);return p},n.dcurve=function(s){var i=this._time,u=i.length,f=r.le(i,s),p=this._scratch[0],y=this._state,m=this._velocity,l=this.dimension;if(f>=u-1)for(var w=y.length-1,v=0;v<l;++v,--w)p[v]=m[w];else{w=l*(f+1)-1;var A=i[f],M=i[f+1]-A||1,k=this._scratch[1],E=this._scratch[2],P=this._scratch[3],S=this._scratch[4],F=!0;for(v=0;v<l;++v,--w)k[v]=y[w],P[v]=m[w]*M,E[v]=y[w+l],S[v]=m[w+l]*M,F=F&&k[v]===E[v]&&P[v]===S[v]&&0===P[v];if(F)for(v=0;v<l;++v)p[v]=0;else for(e.derivative(k,P,E,S,(s-A)/M,p),v=0;v<l;++v)p[v]/=M}return p},n.lastT=function(){var s=this._time;return s[s.length-1]},n.stable=function(){for(var s=this._velocity,i=s.length,u=this.dimension-1;u>=0;--u)if(s[--i])return!1;return!0},n.jump=function(s){var i=this.lastT(),u=this.dimension;if(!(s<i||arguments.length!==u+1)){var f=this._state,p=this._velocity,y=f.length-this.dimension,m=this.bounds,l=m[0],w=m[1];this._time.push(i,s);for(var v=0;v<2;++v)for(var A=0;A<u;++A)f.push(f[y++]),p.push(0);for(this._time.push(s),A=u;A>0;--A)f.push(t(l[A-1],w[A-1],arguments[A])),p.push(0)}},n.push=function(s){var i=this.lastT(),u=this.dimension;if(!(s<i||arguments.length!==u+1)){var f=this._state,p=this._velocity,y=f.length-this.dimension,m=s-i,l=this.bounds,w=l[0],v=l[1],A=m>1e-6?1/m:0;this._time.push(s);for(var M=u;M>0;--M){var k=t(w[M-1],v[M-1],arguments[M]);f.push(k),p.push((k-f[y++])*A)}}},n.set=function(s){var i=this.dimension;if(!(s<this.lastT()||arguments.length!==i+1)){var u=this._state,f=this._velocity,p=this.bounds,y=p[0],m=p[1];this._time.push(s);for(var l=i;l>0;--l)u.push(t(y[l-1],m[l-1],arguments[l])),f.push(0)}},n.move=function(s){var i=this.lastT(),u=this.dimension;if(!(s<=i||arguments.length!==u+1)){var f=this._state,p=this._velocity,y=f.length-this.dimension,m=this.bounds,l=m[0],w=m[1],v=s-i,A=v>1e-6?1/v:0;this._time.push(s);for(var M=u;M>0;--M){var k=arguments[M];f.push(t(l[M-1],w[M-1],f[y++]+k)),p.push(k*A)}}},n.idle=function(s){var i=this.lastT();if(!(s<i)){var u=this.dimension,f=this._state,p=this._velocity,y=f.length-u,m=this.bounds,l=m[0],w=m[1],v=s-i;this._time.push(s);for(var A=u-1;A>=0;--A)f.push(t(l[A],w[A],f[y]+v*p[y])),p.push(0),y+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(x,T,b){"use strict";function e(l,w,v,A,M,k){this._color=l,this.key=w,this.value=v,this.left=A,this.right=M,this._count=k}function r(l){return new e(l._color,l.key,l.value,l.left,l.right,l._count)}function t(l,w){return new e(l,w.key,w.value,w.left,w.right,w._count)}function a(l){l._count=1+(l.left?l.left._count:0)+(l.right?l.right._count:0)}function n(l,w){this._compare=l,this.root=w}T.exports=function(l){return new n(l||m,null)};var d=n.prototype;function s(l,w){var v;return w.left&&(v=s(l,w.left))?v:(v=l(w.key,w.value))||(w.right?s(l,w.right):void 0)}function i(l,w,v,A){var M;return w(l,A.key)<=0&&(A.left&&(M=i(l,w,v,A.left))||(M=v(A.key,A.value)))?M:A.right?i(l,w,v,A.right):void 0}function u(l,w,v,A,M){var k,E=v(l,M.key),P=v(w,M.key);return E<=0&&(M.left&&(k=u(l,w,v,A,M.left))||P>0&&(k=A(M.key,M.value)))?k:P>0&&M.right?u(l,w,v,A,M.right):void 0}function f(l,w){this.tree=l,this._stack=w}Object.defineProperty(d,"keys",{get:function(){var l=[];return this.forEach(function(w,v){l.push(w)}),l}}),Object.defineProperty(d,"values",{get:function(){var l=[];return this.forEach(function(w,v){l.push(v)}),l}}),Object.defineProperty(d,"length",{get:function(){return this.root?this.root._count:0}}),d.insert=function(l,w){for(var v=this._compare,A=this.root,M=[],k=[];A;){var E=v(l,A.key);M.push(A),k.push(E),A=E<=0?A.left:A.right}M.push(new e(0,l,w,null,null,1));for(var P=M.length-2;P>=0;--P)A=M[P],M[P]=k[P]<=0?new e(A._color,A.key,A.value,M[P+1],A.right,A._count+1):new e(A._color,A.key,A.value,A.left,M[P+1],A._count+1);for(P=M.length-1;P>1;--P){var S=M[P-1];if(A=M[P],1===S._color||1===A._color)break;var F=M[P-2];if(F.left===S)if(S.left===A){if(!(R=F.right)||0!==R._color){F._color=0,F.left=S.right,S._color=1,S.right=F,M[P-2]=S,M[P-1]=A,a(F),a(S),P>=3&&((D=M[P-3]).left===F?D.left=S:D.right=S);break}S._color=1,F.right=t(1,R),F._color=0,P-=1}else{if(!(R=F.right)||0!==R._color){S.right=A.left,F._color=0,F.left=A.right,A._color=1,A.left=S,A.right=F,M[P-2]=A,M[P-1]=S,a(F),a(S),a(A),P>=3&&((D=M[P-3]).left===F?D.left=A:D.right=A);break}S._color=1,F.right=t(1,R),F._color=0,P-=1}else if(S.right===A){if(!(R=F.left)||0!==R._color){F._color=0,F.right=S.left,S._color=1,S.left=F,M[P-2]=S,M[P-1]=A,a(F),a(S),P>=3&&((D=M[P-3]).right===F?D.right=S:D.left=S);break}S._color=1,F.left=t(1,R),F._color=0,P-=1}else{var R;if(!(R=F.left)||0!==R._color){var D;S.left=A.right,F._color=0,F.right=A.left,A._color=1,A.right=S,A.left=F,M[P-2]=A,M[P-1]=S,a(F),a(S),a(A),P>=3&&((D=M[P-3]).right===F?D.right=A:D.left=A);break}S._color=1,F.left=t(1,R),F._color=0,P-=1}}return M[0]._color=1,new n(v,M[0])},d.forEach=function(l,w,v){if(this.root)switch(arguments.length){case 1:return s(l,this.root);case 2:return i(w,this._compare,l,this.root);case 3:return this._compare(w,v)>=0?void 0:u(w,v,this._compare,l,this.root)}},Object.defineProperty(d,"begin",{get:function(){for(var l=[],w=this.root;w;)l.push(w),w=w.left;return new f(this,l)}}),Object.defineProperty(d,"end",{get:function(){for(var l=[],w=this.root;w;)l.push(w),w=w.right;return new f(this,l)}}),d.at=function(l){if(l<0)return new f(this,[]);for(var w=this.root,v=[];;){if(v.push(w),w.left){if(l<w.left._count){w=w.left;continue}l-=w.left._count}if(!l)return new f(this,v);if(l-=1,!w.right||l>=w.right._count)break;w=w.right}return new f(this,[])},d.ge=function(l){for(var w=this._compare,v=this.root,A=[],M=0;v;){var k=w(l,v.key);A.push(v),k<=0&&(M=A.length),v=k<=0?v.left:v.right}return A.length=M,new f(this,A)},d.gt=function(l){for(var w=this._compare,v=this.root,A=[],M=0;v;){var k=w(l,v.key);A.push(v),k<0&&(M=A.length),v=k<0?v.left:v.right}return A.length=M,new f(this,A)},d.lt=function(l){for(var w=this._compare,v=this.root,A=[],M=0;v;){var k=w(l,v.key);A.push(v),k>0&&(M=A.length),v=k<=0?v.left:v.right}return A.length=M,new f(this,A)},d.le=function(l){for(var w=this._compare,v=this.root,A=[],M=0;v;){var k=w(l,v.key);A.push(v),k>=0&&(M=A.length),v=k<0?v.left:v.right}return A.length=M,new f(this,A)},d.find=function(l){for(var w=this._compare,v=this.root,A=[];v;){var M=w(l,v.key);if(A.push(v),0===M)return new f(this,A);v=M<=0?v.left:v.right}return new f(this,[])},d.remove=function(l){var w=this.find(l);return w?w.remove():this},d.get=function(l){for(var w=this._compare,v=this.root;v;){var A=w(l,v.key);if(0===A)return v.value;v=A<=0?v.left:v.right}};var p=f.prototype;function y(l,w){l.key=w.key,l.value=w.value,l.left=w.left,l.right=w.right,l._color=w._color,l._count=w._count}function m(l,w){return l<w?-1:l>w?1:0}Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(p,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),p.clone=function(){return new f(this.tree,this._stack.slice())},p.remove=function(){var l=this._stack;if(0===l.length)return this.tree;var w=new Array(l.length),v=l[l.length-1];w[w.length-1]=new e(v._color,v.key,v.value,v.left,v.right,v._count);for(var A=l.length-2;A>=0;--A)w[A]=(v=l[A]).left===l[A+1]?new e(v._color,v.key,v.value,w[A+1],v.right,v._count):new e(v._color,v.key,v.value,v.left,w[A+1],v._count);if((v=w[w.length-1]).left&&v.right){var M=w.length;for(v=v.left;v.right;)w.push(v),v=v.right;var k=w[M-1];for(w.push(new e(v._color,k.key,k.value,v.left,v.right,v._count)),w[M-1].key=v.key,w[M-1].value=v.value,A=w.length-2;A>=M;--A)w[A]=new e((v=w[A])._color,v.key,v.value,v.left,w[A+1],v._count);w[M-1].left=w[M]}if(0===(v=w[w.length-1])._color){var E=w[w.length-2];for(E.left===v?E.left=null:E.right===v&&(E.right=null),w.pop(),A=0;A<w.length;++A)w[A]._count--;return new n(this.tree._compare,w[0])}if(v.left||v.right){for(v.left?y(v,v.left):v.right&&y(v,v.right),v._color=1,A=0;A<w.length-1;++A)w[A]._count--;return new n(this.tree._compare,w[0])}if(1===w.length)return new n(this.tree._compare,null);for(A=0;A<w.length;++A)w[A]._count--;var P=w[w.length-2];return function(S){for(var F,R,D,L,B=S.length-1;B>=0;--B){if(F=S[B],0===B)return void(F._color=1);if((R=S[B-1]).left===F){if((D=R.right).right&&0===D.right._color)return L=(D=R.right=r(D)).right=r(D.right),R.right=D.left,D.left=R,D.right=L,D._color=R._color,F._color=1,R._color=1,L._color=1,a(R),a(D),B>1&&((V=S[B-2]).left===R?V.left=D:V.right=D),void(S[B-1]=D);if(D.left&&0===D.left._color)return L=(D=R.right=r(D)).left=r(D.left),R.right=L.left,D.left=L.right,L.left=R,L.right=D,L._color=R._color,R._color=1,D._color=1,F._color=1,a(R),a(D),a(L),B>1&&((V=S[B-2]).left===R?V.left=L:V.right=L),void(S[B-1]=L);if(1===D._color){if(0===R._color)return R._color=1,void(R.right=t(0,D));R.right=t(0,D);continue}D=r(D),R.right=D.left,D.left=R,D._color=R._color,R._color=0,a(R),a(D),B>1&&((V=S[B-2]).left===R?V.left=D:V.right=D),S[B-1]=D,S[B]=R,B+1<S.length?S[B+1]=F:S.push(F),B+=2}else{if((D=R.left).left&&0===D.left._color)return L=(D=R.left=r(D)).left=r(D.left),R.left=D.right,D.right=R,D.left=L,D._color=R._color,F._color=1,R._color=1,L._color=1,a(R),a(D),B>1&&((V=S[B-2]).right===R?V.right=D:V.left=D),void(S[B-1]=D);if(D.right&&0===D.right._color)return L=(D=R.left=r(D)).right=r(D.right),R.left=L.right,D.right=L.left,L.right=R,L.left=D,L._color=R._color,R._color=1,D._color=1,F._color=1,a(R),a(D),a(L),B>1&&((V=S[B-2]).right===R?V.right=L:V.left=L),void(S[B-1]=L);if(1===D._color){if(0===R._color)return R._color=1,void(R.left=t(0,D));R.left=t(0,D);continue}var V;D=r(D),R.left=D.right,D.right=R,D._color=R._color,R._color=0,a(R),a(D),B>1&&((V=S[B-2]).right===R?V.right=D:V.left=D),S[B-1]=D,S[B]=R,B+1<S.length?S[B+1]=F:S.push(F),B+=2}}}(w),P.left===v?P.left=null:P.right=null,new n(this.tree._compare,w[0])},Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(p,"index",{get:function(){var l=0,w=this._stack;if(0===w.length){var v=this.tree.root;return v?v._count:0}w[w.length-1].left&&(l=w[w.length-1].left._count);for(var A=w.length-2;A>=0;--A)w[A+1]===w[A].right&&(++l,w[A].left&&(l+=w[A].left._count));return l},enumerable:!0}),p.next=function(){var l=this._stack;if(0!==l.length){var w=l[l.length-1];if(w.right)for(w=w.right;w;)l.push(w),w=w.left;else for(l.pop();l.length>0&&l[l.length-1].right===w;)w=l[l.length-1],l.pop()}},Object.defineProperty(p,"hasNext",{get:function(){var l=this._stack;if(0===l.length)return!1;if(l[l.length-1].right)return!0;for(var w=l.length-1;w>0;--w)if(l[w-1].left===l[w])return!0;return!1}}),p.update=function(l){var w=this._stack;if(0===w.length)throw new Error("Can't update empty node!");var v=new Array(w.length),A=w[w.length-1];v[v.length-1]=new e(A._color,A.key,l,A.left,A.right,A._count);for(var M=w.length-2;M>=0;--M)v[M]=(A=w[M]).left===w[M+1]?new e(A._color,A.key,A.value,v[M+1],A.right,A._count):new e(A._color,A.key,A.value,A.left,v[M+1],A._count);return new n(this.tree._compare,v[0])},p.prev=function(){var l=this._stack;if(0!==l.length){var w=l[l.length-1];if(w.left)for(w=w.left;w;)l.push(w),w=w.right;else for(l.pop();l.length>0&&l[l.length-1].left===w;)w=l[l.length-1],l.pop()}},Object.defineProperty(p,"hasPrev",{get:function(){var l=this._stack;if(0===l.length)return!1;if(l[l.length-1].left)return!0;for(var w=l.length-1;w>0;--w)if(l[w-1].right===l[w])return!0;return!1}})},{}],70:[function(x,T,b){"use strict";T.exports=function(M,k){var E=new i(M);return E.update(k),E};var e=x("./lib/text.js"),r=x("./lib/lines.js"),t=x("./lib/background.js"),a=x("./lib/cube.js"),n=x("./lib/ticks.js"),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(M,k){return M[0]=k[0],M[1]=k[1],M[2]=k[2],M}function i(M){this.gl=M,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=t(M)}var u=i.prototype;function f(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}u.update=function(M){function k(ee,Q,$){if($ in M){var K,oe=M[$],j=this[$];this[$]=K=(ee?Array.isArray(oe)&&Array.isArray(oe[0]):Array.isArray(oe))?[Q(oe[0]),Q(oe[1]),Q(oe[2])]:[Q(oe),Q(oe),Q(oe)];for(var H=0;H<3;++H)if(K[H]!==j[H])return!0}return!1}M=M||{};var E,P=k.bind(this,!1,Number),S=k.bind(this,!1,Boolean),F=k.bind(this,!1,String),R=k.bind(this,!0,function(ee){if(Array.isArray(ee)){if(3===ee.length)return[+ee[0],+ee[1],+ee[2],1];if(4===ee.length)return[+ee[0],+ee[1],+ee[2],+ee[3]]}return[0,0,0,1]}),D=!1,L=!1;if("bounds"in M)for(var B=M.bounds,V=0;V<2;++V)for(var Z=0;Z<3;++Z)B[V][Z]!==this.bounds[V][Z]&&(L=!0),this.bounds[V][Z]=B[V][Z];if("ticks"in M)for(E=M.ticks,D=!0,this.autoTicks=!1,V=0;V<3;++V)this.tickSpacing[V]=0;else P("tickSpacing")&&(this.autoTicks=!0,L=!0);if(this._firstInit&&("ticks"in M||"tickSpacing"in M||(this.autoTicks=!0),L=!0,D=!0,this._firstInit=!1),L&&this.autoTicks&&(E=n.create(this.bounds,this.tickSpacing),D=!0),D){for(V=0;V<3;++V)E[V].sort(function(ee,Q){return ee.x-Q.x});n.equal(E,this.ticks)?D=!1:this.ticks=E}S("tickEnable"),F("tickFont")&&(D=!0),P("tickSize"),P("tickAngle"),P("tickPad"),R("tickColor");var Y=F("labels");F("labelFont")&&(Y=!0),S("labelEnable"),P("labelSize"),P("labelPad"),R("labelColor"),S("lineEnable"),S("lineMirror"),P("lineWidth"),R("lineColor"),S("lineTickEnable"),S("lineTickMirror"),P("lineTickLength"),P("lineTickWidth"),R("lineTickColor"),S("gridEnable"),P("gridWidth"),R("gridColor"),S("zeroEnable"),R("zeroLineColor"),P("zeroLineWidth"),S("backgroundEnable"),R("backgroundColor"),this._text?this._text&&(Y||D)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&D&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var p=[new f,new f,new f];function y(M,k,E,P,S){for(var F=M.primalOffset,R=M.primalMinor,D=M.mirrorOffset,L=M.mirrorMinor,B=P[k],V=0;V<3;++V)if(k!==V){var Z=F,Y=D,ee=R,Q=L;B&1<<V&&(Z=D,Y=F,ee=L,Q=R),Z[V]=E[0][V],Y[V]=E[1][V],S[V]>0?(ee[V]=-1,Q[V]=0):(ee[V]=0,Q[V]=1)}}var m=[0,0,0],l={model:d,view:d,projection:d,_ortho:!1};u.isOpaque=function(){return!0},u.isTransparent=function(){return!1},u.drawTransparent=function(M){};var w=[0,0,0],v=[0,0,0],A=[0,0,0];u.draw=function(M){for(var k=this.gl,E=(M=M||l).model||d,P=M.view||d,S=M.projection||d,F=this.bounds,R=M._ortho||!1,D=a(E,P,S,F,R),L=D.cubeEdges,B=D.axis,Q=(R?2:1)*this.pixelRatio*(S[3]*P[12]+S[7]*P[13]+S[11]*P[14]+S[15]*P[15])/k.drawingBufferHeight,$=0;$<3;++$)this.lastCubeProps.cubeEdges[$]=L[$],this.lastCubeProps.axis[$]=B[$];var K=p;for($=0;$<3;++$)y(p[$],$,this.bounds,L,B);k=this.gl;var oe,de,he,Re,ve,Te,Ie,Ce,Pe,Ve,qe,Je,j=m;for($=0;$<3;++$)j[$]=this.backgroundEnable[$]?B[$]:0;for(this._background.draw(E,P,S,F,j,this.backgroundColor),this._lines.bind(E,P,S,this),$=0;$<3;++$){var H=[0,0,0];H[$]=B[$]>0?F[1][$]:F[0][$];for(var G=0;G<2;++G){var re=($+1+G)%3,q=($+1+(1^G))%3;this.gridEnable[re]&&this._lines.drawGrid(re,q,this.bounds,H,this.gridColor[re],this.gridWidth[re]*this.pixelRatio)}for(G=0;G<2;++G)re=($+1+G)%3,this.zeroEnable[q=($+1+(1^G))%3]&&Math.min(F[0][q],F[1][q])<=0&&Math.max(F[0][q],F[1][q])>=0&&this._lines.drawZero(re,q,this.bounds,H,this.zeroLineColor[q],this.zeroLineWidth[q]*this.pixelRatio)}for($=0;$<3;++$){this.lineEnable[$]&&this._lines.drawAxisLine($,this.bounds,K[$].primalOffset,this.lineColor[$],this.lineWidth[$]*this.pixelRatio),this.lineMirror[$]&&this._lines.drawAxisLine($,this.bounds,K[$].mirrorOffset,this.lineColor[$],this.lineWidth[$]*this.pixelRatio);var te=s(w,K[$].primalMinor),ne=s(v,K[$].mirrorMinor),le=this.lineTickLength;for(G=0;G<3;++G){var ue=Q/E[5*G];te[G]*=le[G]*ue,ne[G]*=le[G]*ue}this.lineTickEnable[$]&&this._lines.drawAxisTicks($,K[$].primalOffset,te,this.lineTickColor[$],this.lineTickWidth[$]*this.pixelRatio),this.lineTickMirror[$]&&this._lines.drawAxisTicks($,K[$].mirrorOffset,ne,this.lineTickColor[$],this.lineTickWidth[$]*this.pixelRatio)}function be(Re){(he=[0,0,0])[Re]=1}for(this._lines.unbind(),this._text.bind(E,P,S,this.pixelRatio),$=0;$<3;++$){var we=K[$].primalMinor,ke=K[$].mirrorMinor,De=s(A,K[$].primalOffset);for(G=0;G<3;++G)this.lineTickEnable[$]&&(De[G]+=Q*we[G]*Math.max(this.lineTickLength[G],0)/E[5*G]);var Ee=[0,0,0];if(Ee[$]=1,this.tickEnable[$]){for(-3600===this.tickAngle[$]?(this.tickAngle[$]=0,this.tickAlign[$]="auto"):this.tickAlign[$]=-1,oe[0]="auto"===(oe=[this.tickAlign[$],.5,de=1])[0]?0:parseInt(""+oe[0]),he=[0,0,0],Ie=void 0,Ce=void 0,Pe=void 0,Ve=void 0,qe=void 0,Je=void 0,Ve=(ve=we)[Ce=((Re=$)+2)%3],qe=(Te=ke)[Ie=(Re+1)%3],Je=Te[Ce],(Pe=ve[Ie])>0&&Je>0||Pe>0&&Je<0||Pe<0&&Je>0||Pe<0&&Je<0?be(Ie):(Ve>0&&qe>0||Ve>0&&qe<0||Ve<0&&qe>0||Ve<0&&qe<0)&&be(Ce),G=0;G<3;++G)De[G]+=Q*we[G]*this.tickPad[G]/E[5*G];this._text.drawTicks($,this.tickSize[$],this.tickAngle[$],De,this.tickColor[$],Ee,he,oe)}if(this.labelEnable[$]){for(de=0,he=[0,0,0],this.labels[$].length>4&&(be($),de=1),oe[0]="auto"===(oe=[this.labelAlign[$],.5,de])[0]?0:parseInt(""+oe[0]),G=0;G<3;++G)De[G]+=Q*we[G]*this.labelPad[G]/E[5*G];De[$]+=.5*(F[0][$]+F[1][$]),this._text.drawLabel($,this.labelSize[$],this.labelAngle[$],De,this.labelColor[$],[0,0,0],he,oe)}}this._text.unbind()},u.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(x,T,b){"use strict";T.exports=function(d){for(var s=[],i=[],u=0,f=0;f<3;++f)for(var p=(f+1)%3,y=(f+2)%3,m=[0,0,0],l=[0,0,0],w=-1;w<=1;w+=2){i.push(u,u+2,u+1,u+1,u+2,u+3),m[f]=w,l[f]=w;for(var v=-1;v<=1;v+=2){m[p]=v;for(var A=-1;A<=1;A+=2)m[y]=A,s.push(m[0],m[1],m[2],l[0],l[1],l[2]),u+=1}var M=p;p=y,y=M}var k=e(d,new Float32Array(s)),E=e(d,new Uint16Array(i),d.ELEMENT_ARRAY_BUFFER),P=r(d,[{buffer:k,type:d.FLOAT,size:3,offset:0,stride:24},{buffer:k,type:d.FLOAT,size:3,offset:12,stride:24}],E),S=t(d);return S.attributes.position.location=0,S.attributes.normal.location=1,new a(d,k,P,S)};var e=x("gl-buffer"),r=x("gl-vao"),t=x("./shaders").bg;function a(d,s,i,u){this.gl=d,this.buffer=s,this.vao=i,this.shader=u}var n=a.prototype;n.draw=function(d,s,i,u,f,p){for(var y=!1,m=0;m<3;++m)y=y||f[m];if(y){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:d,view:s,projection:i,bounds:u,enable:f,colors:p},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},n.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(x,T,b){"use strict";T.exports=function(v,A,M,k,E){r(n,A,v),r(n,M,n);for(var P=0,S=0;S<2;++S){i[2]=k[S][2];for(var F=0;F<2;++F){i[1]=k[F][1];for(var R=0;R<2;++R)i[0]=k[R][0],f(d[P],i,n),P+=1}}var D=-1;for(S=0;S<8;++S){for(var L=d[S][3],B=0;B<3;++B)s[S][B]=d[S][B]/L;E&&(s[S][2]*=-1),L<0&&(D<0||s[S][2]<s[D][2])&&(D=S)}if(D<0){D=0;for(var V=0;V<3;++V){for(var Z=(V+2)%3,Y=(V+1)%3,ee=-1,Q=-1,$=0;$<2;++$){var K=(j=$<<V)+($<<Z)+(1-$<<Y),oe=j+(1-$<<Z)+($<<Y);a(s[j],s[K],s[oe],u)<0||($?ee=1:Q=1)}if(ee<0||Q<0)Q>ee&&(D|=1<<V);else{for($=0;$<2;++$){K=(j=$<<V)+($<<Z)+(1-$<<Y);var j,H=y([d[j],d[K],d[oe=j+(1-$<<Z)+($<<Y)],d[j+(1<<Z)+(1<<Y)]]);$?ee=H:Q=H}Q>ee&&(D|=1<<V)}}}var G=7^D,re=-1;for(S=0;S<8;++S)S!==D&&S!==G&&(re<0||s[re][1]>s[S][1])&&(re=S);var q=-1;for(S=0;S<3;++S)(ne=re^1<<S)!==D&&ne!==G&&(q<0&&(q=ne),(Y=s[ne])[0]<s[q][0]&&(q=ne));var te=-1;for(S=0;S<3;++S){var ne;(ne=re^1<<S)!==D&&ne!==G&&ne!==q&&(te<0&&(te=ne),(Y=s[ne])[0]>s[te][0]&&(te=ne))}var le=m;le[0]=le[1]=le[2]=0,le[e.log2(q^re)]=re&q,le[e.log2(re^te)]=re&te;var ue=7^te;ue===D||ue===G?le[e.log2(te^(ue=7^q))]=ue&te:le[e.log2(q^ue)]=ue&q;var de=l,he=D;for(V=0;V<3;++V)de[V]=he&1<<V?-1:1;return w};var e=x("bit-twiddle"),r=x("gl-mat4/multiply"),t=x("split-polygon"),a=x("robust-orientation"),n=new Array(16),d=new Array(8),s=new Array(8),i=new Array(3),u=[0,0,0];function f(v,A,M){for(var k=0;k<4;++k){v[k]=M[12+k];for(var E=0;E<3;++E)v[k]+=A[E]*M[4*E+k]}}!function(){for(var v=0;v<8;++v)d[v]=[1,1,1,1],s[v]=[1,1,1]}();var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function y(v){for(var A=0;A<p.length;++A)if((v=t.positive(v,p[A])).length<3)return 0;var M=v[0],k=M[0]/M[3],E=M[1]/M[3],P=0;for(A=1;A+1<v.length;++A){var S=v[A],F=v[A+1];P+=Math.abs((S[0]/S[3]-k)*(F[1]/F[3]-E)-(S[1]/S[3]-E)*(F[0]/F[3]-k))}return P}var m=[1,1,1],l=[0,0,0],w={cubeEdges:m,axis:l}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(x,T,b){"use strict";T.exports=function(m,l,w){var v=[],A=[0,0,0],M=[0,0,0],k=[0,0,0],E=[0,0,0];v.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var P=0;P<3;++P){for(var S=v.length/3|0,F=0;F<w[P].length;++F){var R=+w[P][F].x;v.push(R,0,1,R,1,1,R,0,-1,R,0,-1,R,1,1,R,1,-1)}var D=v.length/3|0;A[P]=S,M[P]=D-S,S=v.length/3|0;for(var L=0;L<w[P].length;++L)v.push(R=+w[P][L].x,0,1,R,1,1,R,0,-1,R,0,-1,R,1,1,R,1,-1);D=v.length/3|0,k[P]=S,E[P]=D-S}var B=e(m,new Float32Array(v)),V=r(m,[{buffer:B,type:m.FLOAT,size:3,stride:0,offset:0}]),Z=t(m);return Z.attributes.position.location=0,new p(m,B,V,Z,M,A,E,k)};var e=x("gl-buffer"),r=x("gl-vao"),t=x("./shaders").line,a=[0,0,0],n=[0,0,0],d=[0,0,0],s=[0,0,0],i=[1,1];function u(m){return m[0]=m[1]=m[2]=0,m}function f(m,l){return m[0]=l[0],m[1]=l[1],m[2]=l[2],m}function p(m,l,w,v,A,M,k,E){this.gl=m,this.vertBuffer=l,this.vao=w,this.shader=v,this.tickCount=A,this.tickOffset=M,this.gridCount=k,this.gridOffset=E}var y=p.prototype;y.bind=function(m,l,w){this.shader.bind(),this.shader.uniforms.model=m,this.shader.uniforms.view=l,this.shader.uniforms.projection=w,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=i,this.vao.bind()},y.unbind=function(){this.vao.unbind()},y.drawAxisLine=function(m,l,w,v,A){var M=u(n);this.shader.uniforms.majorAxis=n,M[m]=l[1][m]-l[0][m],this.shader.uniforms.minorAxis=M;var k,E=f(s,w);E[m]+=l[0][m],this.shader.uniforms.offset=E,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=v,(k=u(d))[(m+2)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6),(k=u(d))[(m+1)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6)},y.drawAxisTicks=function(m,l,w,v,A){if(this.tickCount[m]){var M=u(a);M[m]=1,this.shader.uniforms.majorAxis=M,this.shader.uniforms.offset=l,this.shader.uniforms.minorAxis=w,this.shader.uniforms.color=v,this.shader.uniforms.lineWidth=A;var k=u(d);k[m]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,this.tickCount[m],this.tickOffset[m])}},y.drawGrid=function(m,l,w,v,A,M){if(this.gridCount[m]){var k=u(n);k[l]=w[1][l]-w[0][l],this.shader.uniforms.minorAxis=k;var E=f(s,v);E[l]+=w[0][l],this.shader.uniforms.offset=E;var P=u(a);P[m]=1,this.shader.uniforms.majorAxis=P;var S=u(d);S[m]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=A,this.vao.draw(this.gl.TRIANGLES,this.gridCount[m],this.gridOffset[m])}},y.drawZero=function(m,l,w,v,A,M){var k=u(n);this.shader.uniforms.majorAxis=k,k[m]=w[1][m]-w[0][m],this.shader.uniforms.minorAxis=k;var E=f(s,v);E[m]+=w[0][m],this.shader.uniforms.offset=E;var P=u(d);P[l]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=A,this.vao.draw(this.gl.TRIANGLES,6)},y.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(x,T,b){"use strict";var e=x("glslify"),r=x("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);b.line=function(u){return r(u,t,a,null,[{name:"position",type:"vec3"}])};var n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);b.text=function(u){return r(u,n,d,null,[{name:"position",type:"vec3"}])};var s=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);b.bg=function(u){return r(u,s,i,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(x,T,b){(function(e){(function(){"use strict";T.exports=function(p,y,m,l,w,v){var A=r(p),M=t(p,[{buffer:A,size:3}]),k=n(p);k.attributes.position.location=0;var E=new i(p,k,A,M);return E.update(y,m,l,w,v),E};var r=x("gl-buffer"),t=x("gl-vao"),a=x("vectorize-text"),n=x("./shaders").text,d=window||e.global||{},s=d.__TEXT_CACHE||{};function i(p,y,m,l){this.gl=p,this.shader=y,this.buffer=m,this.vao=l,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}d.__TEXT_CACHE={};var u=i.prototype,f=[0,0];u.bind=function(p,y,m,l){this.vao.bind(),this.shader.bind();var w=this.shader.uniforms;w.model=p,w.view=y,w.projection=m,w.pixelScale=l,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=f},u.unbind=function(){this.vao.unbind()},u.update=function(p,y,m,l,w){var v=[];function A(D,L,B,V,Z,Y){var ee=s[B];ee||(ee=s[B]={});var Q=ee[L];Q||(Q=ee[L]=function(te,ne){try{return a(te,ne)}catch(le){return console.warn('error vectorizing text:"'+te+'" error:',le),{cells:[],positions:[]}}}(L,{triangles:!0,font:B,textAlign:"center",textBaseline:"middle",lineSpacing:Z,styletags:Y}));for(var $=(V||12)/12,K=Q.positions,oe=Q.cells,j=0,H=oe.length;j<H;++j)for(var G=oe[j],re=2;re>=0;--re){var q=K[G[re]];v.push($*q[0],-$*q[1],D)}}for(var M=[0,0,0],k=[0,0,0],E=[0,0,0],P=[0,0,0],S={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},F=0;F<3;++F){E[F]=v.length/3|0,A(.5*(p[0][F]+p[1][F]),y[F],m[F],12,1.25,S),P[F]=(v.length/3|0)-E[F],M[F]=v.length/3|0;for(var R=0;R<l[F].length;++R)l[F][R].text&&A(l[F][R].x,l[F][R].text,l[F][R].font||w,l[F][R].fontSize||12,1.25,S);k[F]=(v.length/3|0)-M[F]}this.buffer.update(v),this.tickOffset=M,this.tickCount=k,this.labelOffset=E,this.labelCount=P},u.drawTicks=function(p,y,m,l,w,v,A,M){this.tickCount[p]&&(this.shader.uniforms.axis=v,this.shader.uniforms.color=w,this.shader.uniforms.angle=m,this.shader.uniforms.scale=y,this.shader.uniforms.offset=l,this.shader.uniforms.alignDir=A,this.shader.uniforms.alignOpt=M,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p]))},u.drawLabel=function(p,y,m,l,w,v,A,M){this.labelCount[p]&&(this.shader.uniforms.axis=v,this.shader.uniforms.color=w,this.shader.uniforms.angle=m,this.shader.uniforms.scale=y,this.shader.uniforms.offset=l,this.shader.uniforms.alignDir=A,this.shader.uniforms.alignOpt=M,this.vao.draw(this.gl.TRIANGLES,this.labelCount[p],this.labelOffset[p]))},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,x("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(x,T,b){"use strict";function e(r,t){var a=r+"",n=a.indexOf("."),d=0;n>=0&&(d=a.length-n-1);var s=Math.pow(10,d),i=Math.round(r*t*s),u=i+"";if(u.indexOf("e")>=0)return u;var f=i/s,p=i%s;i<0?(f=0|-Math.ceil(f),p=0|-p):(f=0|Math.floor(f),p|=0);var y=""+f;if(i<0&&(y="-"+y),d){for(var m=""+p;m.length<d;)m="0"+m;return y+"."+m}return y}b.create=function(r,t){for(var a=[],n=0;n<3;++n){for(var d=[],s=0;s*t[n]<=r[1][n];++s)d.push({x:s*t[n],text:e(t[n],s)});for(s=-1;s*t[n]>=r[0][n];--s)d.push({x:s*t[n],text:e(t[n],s)});a.push(d)}return a},b.equal=function(r,t){for(var a=0;a<3;++a){if(r[a].length!==t[a].length)return!1;for(var n=0;n<r[a].length;++n){var d=r[a][n],s=t[a][n];if(d.x!==s.x||d.text!==s.text||d.font!==s.font||d.fontColor!==s.fontColor||d.fontSize!==s.fontSize||d.dx!==s.dx||d.dy!==s.dy)return!1}}return!0}},{}],77:[function(x,T,b){"use strict";T.exports=function(w,v,A,M,k){var E=v.model||s,P=v.view||s,S=v.projection||s,F=v._ortho||!1,R=w.bounds,D=(k=k||t(E,P,S,R,F)).axis;a(i,P,E),a(i,S,i);for(var L=m,B=0;B<3;++B)L[B].lo=1/0,L[B].hi=-1/0,L[B].pixelsPerDataUnit=1/0;var V=e(n(i,i));n(i,i);for(var Z=0;Z<3;++Z){var Y=(Z+1)%3,ee=(Z+2)%3,Q=l;e:for(B=0;B<2;++B){var $=[];if(D[Z]<0!=!!B){Q[Z]=R[B][Z];for(var K=0;K<2;++K){Q[Y]=R[K^B][Y];for(var oe=0;oe<2;++oe)Q[ee]=R[oe^K^B][ee],$.push(Q.slice())}var j=F?5:4;for(K=j;K===j;++K){if(0===$.length)continue e;$=r.positive($,V[K])}for(K=0;K<$.length;++K){var H=y(l,i,ee=$[K],A,M);for(oe=0;oe<3;++oe)L[oe].lo=Math.min(L[oe].lo,ee[oe]),L[oe].hi=Math.max(L[oe].hi,ee[oe]),oe!==Z&&(L[oe].pixelsPerDataUnit=Math.min(L[oe].pixelsPerDataUnit,Math.abs(H[oe])))}}}}return L};var e=x("extract-frustum-planes"),r=x("split-polygon"),t=x("./lib/cube.js"),a=x("gl-mat4/multiply"),n=x("gl-mat4/transpose"),d=x("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array(16);function u(w,v,A){this.lo=w,this.hi=v,this.pixelsPerDataUnit=A}var f=[0,0,0,1],p=[0,0,0,1];function y(w,v,A,M,k){for(var E=0;E<3;++E){for(var P=f,S=p,F=0;F<3;++F)S[F]=P[F]=A[F];S[3]=P[3]=1,S[E]+=1,d(S,S,v),S[3]<0&&(w[E]=1/0),P[E]-=1,d(P,P,v),P[3]<0&&(w[E]=1/0);var R=(P[0]/P[3]-S[0]/S[3])*M,D=(P[1]/P[3]-S[1]/S[3])*k;w[E]=.25*Math.sqrt(R*R+D*D)}return w}var m=[new u(1/0,-1/0,1/0),new u(1/0,-1/0,1/0),new u(1/0,-1/0,1/0)],l=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(x,T,b){"use strict";var e=x("typedarray-pool"),r=x("ndarray-ops"),t=x("ndarray"),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function n(u,f,p,y,m){this.gl=u,this.type=f,this.handle=p,this.length=y,this.usage=m}var d=n.prototype;function s(u,f,p,y,m,l){var w=m.length*m.BYTES_PER_ELEMENT;if(l<0)return u.bufferData(f,m,y),w;if(w+l>p)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return u.bufferSubData(f,l,m),p}d.bind=function(){this.gl.bindBuffer(this.type,this.handle)},d.unbind=function(){this.gl.bindBuffer(this.type,null)},d.dispose=function(){this.gl.deleteBuffer(this.handle)},d.update=function(u,f){if("number"!=typeof f&&(f=-1),this.bind(),"object"==typeof u&&void 0!==u.shape){var p=u.dtype;if(a.indexOf(p)<0&&(p="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(p=gl.getExtension("OES_element_index_uint")&&"uint16"!==p?"uint32":"uint16"),p===u.dtype&&function(w,v){for(var A=1,M=v.length-1;M>=0;--M){if(v[M]!==A)return!1;A*=w[M]}return!0}(u.shape,u.stride))this.length=s(this.gl,this.type,this.length,this.usage,0===u.offset&&u.data.length===u.shape[0]?u.data:u.data.subarray(u.offset,u.shape[0]),f);else{var y=e.malloc(u.size,p),m=t(y,u.shape);r.assign(m,u),this.length=s(this.gl,this.type,this.length,this.usage,f<0?y:y.subarray(0,u.size),f),e.free(y)}}else if(Array.isArray(u)){var l;l=function(u,f){for(var p=e.malloc(u.length,f),y=u.length,m=0;m<y;++m)p[m]=u[m];return p}(u,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=s(this.gl,this.type,this.length,this.usage,f<0?l:l.subarray(0,u.length),f),e.free(l)}else if("object"==typeof u&&"number"==typeof u.length)this.length=s(this.gl,this.type,this.length,this.usage,u,f);else{if("number"!=typeof u&&void 0!==u)throw new Error("gl-buffer: Invalid data type");if(f>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(u|=0)<=0&&(u=1),this.gl.bufferData(this.type,0|u,this.usage),this.length=u}},T.exports=function(u,f,p,y){if(y=y||u.DYNAMIC_DRAW,(p=p||u.ARRAY_BUFFER)!==u.ARRAY_BUFFER&&p!==u.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==u.DYNAMIC_DRAW&&y!==u.STATIC_DRAW&&y!==u.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var m=u.createBuffer(),l=new n(u,p,m,0,y);return l.update(f),l}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(x,T,b){"use strict";var e=x("gl-vec3");T.exports=function(t,a){var n=t.positions,d=t.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(0===t.positions.length)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),s;for(var i=0,u=1/0,f=-1/0,p=1/0,y=-1/0,m=1/0,l=-1/0,w=null,v=null,A=[],M=1/0,k=!1,E=0;E<n.length;E++){var P=n[E];u=Math.min(P[0],u),f=Math.max(P[0],f),p=Math.min(P[1],p),y=Math.max(P[1],y),m=Math.min(P[2],m),l=Math.max(P[2],l);var S=d[E];if(e.length(S)>i&&(i=e.length(S)),E){var F=2*e.distance(w,P)/(e.length(v)+e.length(S));F?(M=Math.min(M,F),k=!1):k=!0}k||(w=P,v=S),A.push(S)}var D=[f,y,l];a&&(a[0]=[u,p,m],a[1]=D),0===i&&(i=1);var L=1/i;isFinite(M)||(M=1),s.vectorScale=M;var B=t.coneSize||.5;t.absoluteConeSize&&(B=t.absoluteConeSize*L),s.coneScale=B,E=0;for(var V=0;E<n.length;E++)for(var Z=(P=n[E])[0],Y=P[1],ee=P[2],Q=A[E],$=e.length(Q)*L,K=0;K<8;K++){s.positions.push([Z,Y,ee,V++]),s.positions.push([Z,Y,ee,V++]),s.positions.push([Z,Y,ee,V++]),s.positions.push([Z,Y,ee,V++]),s.positions.push([Z,Y,ee,V++]),s.positions.push([Z,Y,ee,V++]),s.vectors.push(Q),s.vectors.push(Q),s.vectors.push(Q),s.vectors.push(Q),s.vectors.push(Q),s.vectors.push(Q),s.vertexIntensity.push($,$,$),s.vertexIntensity.push($,$,$);var oe=s.positions.length;s.cells.push([oe-6,oe-5,oe-4],[oe-3,oe-2,oe-1])}return s};var r=x("./lib/shaders");T.exports.createMesh=x("./create_mesh"),T.exports.createConeMesh=function(t,a){return T.exports.createMesh(t,a,{shaders:r,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(x,T,b){"use strict";var e=x("gl-shader"),r=x("gl-buffer"),t=x("gl-vao"),a=x("gl-texture2d"),n=x("gl-mat4/multiply"),d=x("gl-mat4/invert"),s=x("ndarray"),i=x("colormap"),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(l,w,v,A,M,k,E,P,S,F,R){this.gl=l,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=v,this.pickShader=A,this.trianglePositions=M,this.triangleVectors=k,this.triangleColors=P,this.triangleUVs=S,this.triangleIds=E,this.triangleVAO=F,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=R,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=u,this._view=u,this._projection=u,this._resolution=[1,1]}var p=f.prototype;function y(l,w){var v=e(l,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return v.attributes.position.location=0,v.attributes.color.location=2,v.attributes.uv.location=3,v.attributes.vector.location=4,v}function m(l,w){var v=e(l,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return v.attributes.position.location=0,v.attributes.id.location=1,v.attributes.vector.location=4,v}p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(l){this.pickId=l},p.update=function(l){l=l||{};var w=this.gl;this.dirty=!0,"lightPosition"in l&&(this.lightPosition=l.lightPosition),"opacity"in l&&(this.opacity=l.opacity),"ambient"in l&&(this.ambientLight=l.ambient),"diffuse"in l&&(this.diffuseLight=l.diffuse),"specular"in l&&(this.specularLight=l.specular),"roughness"in l&&(this.roughness=l.roughness),"fresnel"in l&&(this.fresnel=l.fresnel),void 0!==l.tubeScale&&(this.tubeScale=l.tubeScale),void 0!==l.vectorScale&&(this.vectorScale=l.vectorScale),void 0!==l.coneScale&&(this.coneScale=l.coneScale),void 0!==l.coneOffset&&(this.coneOffset=l.coneOffset),l.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(function(re){for(var q=i({colormap:re,nshades:256,format:"rgba"}),te=new Uint8Array(1024),ne=0;ne<256;++ne){for(var le=q[ne],ue=0;ue<3;++ue)te[4*ne+ue]=le[ue];te[4*ne+3]=255*le[3]}return s(te,[256,256,4],[4,0,1])}(l.colormap)),this.texture.generateMipmap());var v=l.cells,A=l.positions,M=l.vectors;if(A&&v&&M){var k=[],E=[],P=[],S=[],F=[];this.cells=v,this.positions=A,this.vectors=M;var R=l.meshColor||[1,1,1,1],D=l.vertexIntensity,L=1/0,B=-1/0;if(D)if(l.vertexIntensityBounds)L=+l.vertexIntensityBounds[0],B=+l.vertexIntensityBounds[1];else for(var V=0;V<D.length;++V){var Z=D[V];L=Math.min(L,Z),B=Math.max(B,Z)}else for(V=0;V<A.length;++V)Z=A[V][2],L=Math.min(L,Z),B=Math.max(B,Z);for(this.intensity=D||function(re){for(var q=re.length,te=new Array(q),ne=0;ne<q;++ne)te[ne]=re[ne][2];return te}(A),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],V=0;V<A.length;++V)for(var Y=A[V],ee=0;ee<3;++ee)!isNaN(Y[ee])&&isFinite(Y[ee])&&(this.bounds[0][ee]=Math.min(this.bounds[0][ee],Y[ee]),this.bounds[1][ee]=Math.max(this.bounds[1][ee],Y[ee]));var Q=0;e:for(V=0;V<v.length;++V){var $=v[V];if(3===$.length){for(ee=0;ee<3;++ee){Y=A[oe=$[ee]];for(var K=0;K<3;++K)if(isNaN(Y[K])||!isFinite(Y[K]))continue e}for(ee=0;ee<3;++ee){var oe;Y=A[oe=$[2-ee]],k.push(Y[0],Y[1],Y[2],Y[3]);var j=M[oe];E.push(j[0],j[1],j[2],j[3]||0);var H;P.push(R[0],R[1],R[2],3===R.length?1:R[3]),S.push((H=D?[(D[oe]-L)/(B-L),0]:[(Y[2]-L)/(B-L),0])[0],H[1]),F.push(V)}Q+=1}}this.triangleCount=Q,this.trianglePositions.update(k),this.triangleVectors.update(E),this.triangleColors.update(P),this.triangleUVs.update(S),this.triangleIds.update(new Uint32Array(F))}},p.drawTransparent=p.draw=function(l){for(var w=this.gl,v=(l=l||{}).model||u,A=l.view||u,M=l.projection||u,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)k[0][E]=Math.max(k[0][E],this.clipBounds[0][E]),k[1][E]=Math.min(k[1][E],this.clipBounds[1][E]);var P={model:v,view:A,projection:M,inverseModel:u.slice(),clipBounds:k,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};P.inverseModel=d(P.inverseModel,P.model),w.disable(w.CULL_FACE),this.texture.bind(0);var S=new Array(16);for(n(S,P.view,P.model),n(S,P.projection,S),d(S,S),E=0;E<3;++E)P.eyePosition[E]=S[12+E]/S[15];var F=S[15];for(E=0;E<3;++E)F+=this.lightPosition[E]*S[4*E+3];for(E=0;E<3;++E){for(var R=S[12+E],D=0;D<3;++D)R+=S[4*D+E]*this.lightPosition[D];P.lightPosition[E]=R/F}if(this.triangleCount>0){var L=this.triShader;L.bind(),L.uniforms=P,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},p.drawPick=function(l){for(var w=this.gl,v=(l=l||{}).model||u,A=l.view||u,M=l.projection||u,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)k[0][E]=Math.max(k[0][E],this.clipBounds[0][E]),k[1][E]=Math.min(k[1][E],this.clipBounds[1][E]);this._model=[].slice.call(v),this._view=[].slice.call(A),this._projection=[].slice.call(M),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var P={model:v,view:A,projection:M,clipBounds:k,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},S=this.pickShader;S.bind(),S.uniforms=P,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},p.pick=function(l){if(!l||l.id!==this.pickId)return null;var w=l.value[0]+256*l.value[1]+65536*l.value[2],v=this.cells[w],A=this.positions[v[1]].slice(0,3),M={position:A,dataCoordinate:A,index:Math.floor(v[1]/48)};return"cone"===this.traceType?M.index=Math.floor(v[1]/48):"streamtube"===this.traceType&&(M.intensity=this.intensity[v[1]],M.velocity=this.vectors[v[1]].slice(0,3),M.divergence=this.vectors[v[1]][3],M.index=w),M},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},T.exports=function(l,w,v){var A=v.shaders;1===arguments.length&&(l=(w=l).gl);var M=y(l,A),k=m(l,A),E=a(l,s(new Uint8Array([255,255,255,255]),[1,1,4]));E.generateMipmap(),E.minFilter=l.LINEAR_MIPMAP_LINEAR,E.magFilter=l.LINEAR;var P=r(l),S=r(l),F=r(l),R=r(l),D=r(l),B=new f(l,E,M,k,P,S,D,F,R,t(l,[{buffer:P,type:l.FLOAT,size:4},{buffer:D,type:l.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:l.FLOAT,size:4},{buffer:R,type:l.FLOAT,size:2},{buffer:S,type:l.FLOAT,size:4}]),v.traceType||"cone");return B.update(w),B}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(x,T,b){var e=x("glslify"),r=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);b.meshShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},b.pickShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(x,T,b){T.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(x,T,b){var e=x("./1.0/numbers");T.exports=function(r){return e[r]}},{"./1.0/numbers":82}],84:[function(x,T,b){"use strict";T.exports=function(f){var p=f.gl,y=e(p),m=r(p,[{buffer:y,type:p.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:p.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:p.FLOAT,size:3,offset:28,stride:40}]),l=t(p);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.offset.location=2;var w=new n(p,y,m,l);return w.update(f),w};var e=x("gl-buffer"),r=x("gl-vao"),t=x("./shaders/index"),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(f,p,y,m){this.gl=f,this.shader=m,this.buffer=p,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var d=n.prototype;function s(f,p){for(var y=0;y<3;++y)f[0][y]=Math.min(f[0][y],p[y]),f[1][y]=Math.max(f[1][y],p[y])}d.isOpaque=function(){return!this.hasAlpha},d.isTransparent=function(){return this.hasAlpha},d.drawTransparent=d.draw=function(f){var p=this.gl,y=this.shader.uniforms;this.shader.bind();var m=y.view=f.view||a,l=y.projection=f.projection||a;y.model=f.model||a,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var k=(f._ortho?2:1)*this.pixelRatio*(l[3]*m[12]+l[7]*m[13]+l[11]*m[14]+l[15]*m[15])/p.drawingBufferHeight;this.vao.bind();for(var E=0;E<3;++E)p.lineWidth(this.lineWidth[E]*this.pixelRatio),y.capSize=this.capSize[E]*k,this.lineCount[E]&&p.drawArrays(p.LINES,this.lineOffset[E],this.lineCount[E]);this.vao.unbind()};var i=function(){for(var f=new Array(3),p=0;p<3;++p){for(var y=[],m=1;m<=2;++m)for(var l=-1;l<=1;l+=2){var w=[0,0,0];w[(m+p)%3]=l,y.push(w)}f[p]=y}return f}();function u(f,p,y,m){for(var l=i[m],w=0;w<l.length;++w){var v=l[w];f.push(p[0],p[1],p[2],y[0],y[1],y[2],y[3],v[0],v[1],v[2])}return l.length}d.update=function(f){"lineWidth"in(f=f||{})&&(this.lineWidth=f.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in f&&(this.capSize=f.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in f&&(this.opacity=+f.opacity,this.opacity<1&&(this.hasAlpha=!0));var p=f.color||[[0,0,0],[0,0,0],[0,0,0]],y=f.position,m=f.error;if(Array.isArray(p[0])||(p=[p,p,p]),y&&m){var l=[],w=y.length,v=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var A=0;A<3;++A){this.lineOffset[A]=v;e:for(var M=0;M<w;++M){for(var k=y[M],E=0;E<3;++E)if(isNaN(k[E])||!isFinite(k[E]))continue e;var F,P=m[M],S=p[A];Array.isArray(S[0])&&(S=p[M]),3===S.length?S=[S[0],S[1],S[2],1]:4===S.length&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),isNaN(P[0][A])||isNaN(P[1][A])||(P[0][A]<0&&((F=k.slice())[A]+=P[0][A],l.push(k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0,F[0],F[1],F[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,F),v+=2+u(l,F,S,A)),P[1][A]>0&&((F=k.slice())[A]+=P[1][A],l.push(k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0,F[0],F[1],F[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,F),v+=2+u(l,F,S,A)))}this.lineCount[A]=v-this.lineOffset[A]}this.buffer.update(l)}},d.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(x,T,b){"use strict";var e=x("glslify"),r=x("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);T.exports=function(n){return r(n,t,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(x,T,b){"use strict";var e=x("gl-texture2d");T.exports=function(w,v,A,M){r||(r=w.FRAMEBUFFER_UNSUPPORTED,t=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,n=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var k=w.getExtension("WEBGL_draw_buffers");if(!d&&k&&function(L,B){var V=L.getParameter(B.MAX_COLOR_ATTACHMENTS_WEBGL);d=new Array(V+1);for(var Z=0;Z<=V;++Z){for(var Y=new Array(V),ee=0;ee<Z;++ee)Y[ee]=L.COLOR_ATTACHMENT0+ee;for(ee=Z;ee<V;++ee)Y[ee]=L.NONE;d[Z]=Y}}(w,k),Array.isArray(v)&&(M=A,A=0|v[1],v=0|v[0]),"number"!=typeof v)throw new Error("gl-fbo: Missing shape parameter");var E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(v<0||v>E||A<0||A>E)throw new Error("gl-fbo: Parameters are too large for FBO");var P=1;if("color"in(M=M||{})){if((P=Math.max(0|M.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(P>1){if(!k)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(P>w.getParameter(k.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+P+" draw buffers")}}var S=w.UNSIGNED_BYTE,F=w.getExtension("OES_texture_float");if(M.float&&P>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");S=w.FLOAT}else M.preferFloat&&P>0&&F&&(S=w.FLOAT);var R=!0;"depth"in M&&(R=!!M.depth);var D=!1;return"stencil"in M&&(D=!!M.stencil),new y(w,v,A,S,P,R,D,k)};var r,t,a,n,d=null;function s(w){return[w.getParameter(w.FRAMEBUFFER_BINDING),w.getParameter(w.RENDERBUFFER_BINDING),w.getParameter(w.TEXTURE_BINDING_2D)]}function i(w,v){w.bindFramebuffer(w.FRAMEBUFFER,v[0]),w.bindRenderbuffer(w.RENDERBUFFER,v[1]),w.bindTexture(w.TEXTURE_2D,v[2])}function u(w){switch(w){case r:throw new Error("gl-fbo: Framebuffer unsupported");case t:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case n:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function f(w,v,A,M,k,E){if(!M)return null;var P=e(w,v,A,k,M);return P.magFilter=w.NEAREST,P.minFilter=w.NEAREST,P.mipSamples=1,P.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,E,w.TEXTURE_2D,P.handle,0),P}function p(w,v,A,M,k){var E=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,E),w.renderbufferStorage(w.RENDERBUFFER,M,v,A),w.framebufferRenderbuffer(w.FRAMEBUFFER,k,w.RENDERBUFFER,E),E}function y(w,v,A,M,k,E,P,S){this.gl=w,this._shape=[0|v,0|A],this._destroyed=!1,this._ext=S,this.color=new Array(k);for(var F=0;F<k;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=M,this._useDepth=E,this._useStencil=P;var R=this,D=[0|v,0|A];Object.defineProperties(D,{0:{get:function(){return R._shape[0]},set:function(L){return R.width=L}},1:{get:function(){return R._shape[1]},set:function(L){return R.height=L}}}),this._shapeVector=D,function(L){var B=s(L.gl),V=L.gl,Z=L.handle=V.createFramebuffer(),Y=L._shape[0],ee=L._shape[1],Q=L.color.length,$=L._ext,K=L._useStencil,oe=L._useDepth,j=L._colorType;V.bindFramebuffer(V.FRAMEBUFFER,Z);for(var H=0;H<Q;++H)L.color[H]=f(V,Y,ee,j,V.RGBA,V.COLOR_ATTACHMENT0+H);0===Q?(L._color_rb=p(V,Y,ee,V.RGBA4,V.COLOR_ATTACHMENT0),$&&$.drawBuffersWEBGL(d[0])):Q>1&&$.drawBuffersWEBGL(d[Q]);var G=V.getExtension("WEBGL_depth_texture");G?K?L.depth=f(V,Y,ee,G.UNSIGNED_INT_24_8_WEBGL,V.DEPTH_STENCIL,V.DEPTH_STENCIL_ATTACHMENT):oe&&(L.depth=f(V,Y,ee,V.UNSIGNED_SHORT,V.DEPTH_COMPONENT,V.DEPTH_ATTACHMENT)):oe&&K?L._depth_rb=p(V,Y,ee,V.DEPTH_STENCIL,V.DEPTH_STENCIL_ATTACHMENT):oe?L._depth_rb=p(V,Y,ee,V.DEPTH_COMPONENT16,V.DEPTH_ATTACHMENT):K&&(L._depth_rb=p(V,Y,ee,V.STENCIL_INDEX,V.STENCIL_ATTACHMENT));var re=V.checkFramebufferStatus(V.FRAMEBUFFER);if(re!==V.FRAMEBUFFER_COMPLETE){for(L._destroyed=!0,V.bindFramebuffer(V.FRAMEBUFFER,null),V.deleteFramebuffer(L.handle),L.handle=null,L.depth&&(L.depth.dispose(),L.depth=null),L._depth_rb&&(V.deleteRenderbuffer(L._depth_rb),L._depth_rb=null),H=0;H<L.color.length;++H)L.color[H].dispose(),L.color[H]=null;L._color_rb&&(V.deleteRenderbuffer(L._color_rb),L._color_rb=null),i(V,B),u(re)}i(V,B)}(this)}var m=y.prototype;function l(w,v,A){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(w._shape[0]!==v||w._shape[1]!==A){var M=w.gl,k=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(v<0||v>k||A<0||A>k)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=v,w._shape[1]=A;for(var E=s(M),P=0;P<w.color.length;++P)w.color[P].shape=w._shape;w._color_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,w._color_rb),M.renderbufferStorage(M.RENDERBUFFER,M.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&M.renderbufferStorage(M.RENDERBUFFER,M.STENCIL_INDEX,w._shape[0],w._shape[1])),M.bindFramebuffer(M.FRAMEBUFFER,w.handle);var S=M.checkFramebufferStatus(M.FRAMEBUFFER);S!==M.FRAMEBUFFER_COMPLETE&&(w.dispose(),i(M,E),u(S)),i(M,E)}}Object.defineProperties(m,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[0|w,0|w]),2!==w.length)throw new Error("gl-fbo: Shape vector must be length 2");var v=0|w[0],A=0|w[1];return l(this,v,A),[v,A]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return l(this,w|=0,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return l(this,this._shape[0],w|=0),w},enumerable:!1}}),m.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},m.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var v=0;v<this.color.length;++v)this.color[v].dispose(),this.color[v]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(x,T,b){var e=x("sprintf-js").sprintf,r=x("gl-constants/lookup"),t=x("glsl-shader-name"),a=x("add-line-numbers");T.exports=function(n,d,s){"use strict";var i=t(d)||"of unknown name (see npm glsl-shader-name)",u="unknown type";void 0!==s&&(u=s===r.FRAGMENT_SHADER?"fragment":"vertex");for(var f=e("Error compiling %s shader %s:\n",u,i),p=e("%s%s",f,n),y=n.split("\n"),m={},l=0;l<y.length;l++){var w=y[l];if(""!==w&&"\0"!==w){var v=parseInt(w.split(":")[2]);if(isNaN(v))throw new Error(e("Could not parse error: %s",w));m[v]=w}}var A=a(d).split("\n");for(l=0;l<A.length;l++)if((m[l+3]||m[l+2]||m[l+1])&&(f+=A[l]+"\n",m[l+1])){var k=m[l+1];k=k.substr(k.split(":",3).join(":").length+1).trim(),f+=e("^^^ %s\n\n",k)}return{long:f.trim(),short:p.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(x,T,b){"use strict";T.exports=function(p,y){var m=p.gl,E=new s(p,a(m,d.vertex,d.fragment),a(m,d.pickVertex,d.pickFragment),n(m),n(m),n(m),n(m));return E.update(y),p.addObject(E),E};var e=x("binary-search-bounds"),r=x("iota-array"),t=x("typedarray-pool"),a=x("gl-shader"),n=x("gl-buffer"),d=x("./lib/shaders");function s(p,y,m,l,w,v,A){this.plot=p,this.shader=y,this.pickShader=m,this.positionBuffer=l,this.weightBuffer=w,this.colorBuffer=v,this.idBuffer=A,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var i,p,y,u=s.prototype,f=[0,0,1,0,0,1,1,0,1,1,0,1];u.draw=(i=[1,0,0,0,1,0,0,0,1],function(){var p=this.plot,y=this.shader,m=this.bounds,l=this.numVertices;if(!(l<=0)){var w=p.gl,v=p.dataBox,M=m[3]-m[1],k=v[2]-v[0],E=v[3]-v[1];i[0]=2*(m[2]-m[0])/k,i[4]=2*M/E,i[6]=2*(m[0]-v[0])/k-1,i[7]=2*(m[1]-v[1])/E-1,y.bind();var P=y.uniforms;P.viewTransform=i,P.shape=this.shape;var S=y.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(w.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(w.UNSIGNED_BYTE,!0),w.drawArrays(w.TRIANGLES,0,l)}}),u.drawPick=(p=[1,0,0,0,1,0,0,0,1],y=[0,0,0,0],function(m){var l=this.plot,w=this.pickShader,v=this.bounds,A=this.numVertices;if(!(A<=0)){var M=l.gl,k=l.dataBox,P=v[3]-v[1],S=k[2]-k[0],F=k[3]-k[1];p[0]=2*(v[2]-v[0])/S,p[4]=2*P/F,p[6]=2*(v[0]-k[0])/S-1,p[7]=2*(v[1]-k[1])/F-1;for(var R=0;R<4;++R)y[R]=m>>8*R&255;this.pickOffset=m,w.bind();var D=w.uniforms;D.viewTransform=p,D.pickOffset=y,D.shape=this.shape;var L=w.attributes;return this.positionBuffer.bind(),L.position.pointer(),this.weightBuffer.bind(),L.weight.pointer(M.UNSIGNED_BYTE,!1),this.idBuffer.bind(),L.pickId.pointer(M.UNSIGNED_BYTE,!1),M.drawArrays(M.TRIANGLES,0,A),m+this.shape[0]*this.shape[1]}}),u.pick=function(p,y,m){var l=this.pickOffset;if(m<l||m>=l+this.shape[0]*this.shape[1])return null;var v=m-l;return{object:this,pointId:v,dataCoord:[this.xData[v%this.shape[0]],this.yData[v/this.shape[0]|0]]}},u.update=function(p){var y=(p=p||{}).shape||[0,0],m=p.x||r(y[0]),l=p.y||r(y[1]),w=p.z||new Float32Array(y[0]*y[1]),v=!1!==p.zsmooth;this.xData=m,this.yData=l;var A,M,k,E,P=p.colorLevels||[0],S=p.colorValues||[0,0,0,1],F=P.length,R=this.bounds;v?(A=R[0]=m[0],M=R[1]=l[0],k=R[2]=m[m.length-1],E=R[3]=l[l.length-1]):(A=R[0]=m[0]+(m[1]-m[0])/2,M=R[1]=l[0]+(l[1]-l[0])/2,k=R[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,E=R[3]=l[l.length-1]+(l[l.length-1]-l[l.length-2])/2);var D=1/(k-A),L=1/(E-M),B=y[0],V=y[1];this.shape=[B,V];var Z=(v?(B-1)*(V-1):B*V)*(f.length>>>1);this.numVertices=Z;for(var Y=t.mallocUint8(4*Z),ee=t.mallocFloat32(2*Z),Q=t.mallocUint8(2*Z),$=t.mallocUint32(Z),K=0,oe=v?B-1:B,j=v?V-1:V,H=0;H<j;++H){var G,re;v?(G=L*(l[H]-M),re=L*(l[H+1]-M)):(G=H<V-1?L*(l[H]-(l[H+1]-l[H])/2-M):L*(l[H]-(l[H]-l[H-1])/2-M),re=H<V-1?L*(l[H]+(l[H+1]-l[H])/2-M):L*(l[H]+(l[H]-l[H-1])/2-M));for(var q=0;q<oe;++q){var te,ne;v?(te=D*(m[q]-A),ne=D*(m[q+1]-A)):(te=q<B-1?D*(m[q]-(m[q+1]-m[q])/2-A):D*(m[q]-(m[q]-m[q-1])/2-A),ne=q<B-1?D*(m[q]+(m[q+1]-m[q])/2-A):D*(m[q]+(m[q]-m[q-1])/2-A));for(var le=0;le<f.length;le+=2){var ue,de,he,be,ge=f[le],we=f[le+1],ke=w[v?(H+we)*B+(q+ge):H*B+q],De=e.le(P,ke);if(De<0)ue=S[0],de=S[1],he=S[2],be=S[3];else if(De===F-1)ue=S[4*F-4],de=S[4*F-3],he=S[4*F-2],be=S[4*F-1];else{var Ee=(ke-P[De])/(P[De+1]-P[De]),Re=1-Ee,ve=4*De,Te=4*(De+1);ue=Re*S[ve]+Ee*S[Te],de=Re*S[ve+1]+Ee*S[Te+1],he=Re*S[ve+2]+Ee*S[Te+2],be=Re*S[ve+3]+Ee*S[Te+3]}Y[4*K]=255*ue,Y[4*K+1]=255*de,Y[4*K+2]=255*he,Y[4*K+3]=255*be,ee[2*K]=.5*te+.5*ne,ee[2*K+1]=.5*G+.5*re,Q[2*K]=ge,Q[2*K+1]=we,$[K]=H*B+q,K+=1}}}this.positionBuffer.update(ee),this.weightBuffer.update(Q),this.colorBuffer.update(Y),this.idBuffer.update($),t.free(ee),t.free(Y),t.free(Q),t.free($)},u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(x,T,b){"use strict";var e=x("glslify");T.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(x,T,b){var e=x("glslify"),r=x("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),d=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];b.createShader=function(s){return r(s,t,a,null,d)},b.createPickShader=function(s){return r(s,t,n,null,d)}},{"gl-shader":132,glslify:231}],91:[function(x,T,b){"use strict";T.exports=function(A){var M=A.gl||A.scene&&A.scene.gl,k=u(M);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;var E=f(M);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;for(var P=e(M),S=r(M,[{buffer:P,size:3,offset:0,stride:48},{buffer:P,size:3,offset:12,stride:48},{buffer:P,size:1,offset:24,stride:48},{buffer:P,size:1,offset:28,stride:48},{buffer:P,size:4,offset:32,stride:48}]),F=s(new Array(1024),[256,1,4]),R=0;R<1024;++R)F.data[R]=255;var D=t(M,F);D.wrap=M.REPEAT;var L=new w(M,k,E,P,S,D);return L.update(A),L};var e=x("gl-buffer"),r=x("gl-vao"),t=x("gl-texture2d"),a=new Uint8Array(4),n=new Float32Array(a.buffer),d=x("binary-search-bounds"),s=x("ndarray"),i=x("./lib/shaders"),u=i.createShader,f=i.createPickShader,p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(A,M){for(var k=0,E=0;E<3;++E){var P=A[E]-M[E];k+=P*P}return Math.sqrt(k)}function m(A){for(var M=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)M[0][k]=Math.max(A[0][k],M[0][k]),M[1][k]=Math.min(A[1][k],M[1][k]);return M}function l(A,M,k,E){this.arcLength=A,this.position=M,this.index=k,this.dataCoordinate=E}function w(A,M,k,E,P,S){this.gl=A,this.shader=M,this.pickShader=k,this.buffer=E,this.vao=P,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=S,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var v=w.prototype;v.isTransparent=function(){return this.hasAlpha},v.isOpaque=function(){return!this.hasAlpha},v.pickSlots=1,v.setPickBase=function(A){this.pickId=A},v.drawTransparent=v.draw=function(A){if(this.vertexCount){var M=this.gl,k=this.shader,E=this.vao;k.bind(),k.uniforms={model:A.model||p,view:A.view||p,projection:A.projection||p,clipBounds:m(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(M.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},v.drawPick=function(A){if(this.vertexCount){var M=this.gl,k=this.pickShader,E=this.vao;k.bind(),k.uniforms={model:A.model||p,view:A.view||p,projection:A.projection||p,pickId:this.pickId,clipBounds:m(this.clipBounds),screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(M.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},v.update=function(A){var M,k;this.dirty=!0;var E=!!A.connectGaps;"dashScale"in A&&(this.dashScale=A.dashScale),this.hasAlpha=!1,"opacity"in A&&(this.opacity=+A.opacity,this.opacity<1&&(this.hasAlpha=!0));var P=[],S=[],F=[],R=0,D=0,L=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],B=A.position||A.positions;if(B){var V=A.color||A.colors||[0,0,0,1],Z=A.lineWidth||1,Y=!1;e:for(M=1;M<B.length;++M){var ee,Q,$,K=B[M-1],oe=B[M];for(S.push(R),F.push(K.slice()),k=0;k<3;++k){if(isNaN(K[k])||isNaN(oe[k])||!isFinite(K[k])||!isFinite(oe[k])){if(!E&&P.length>0){for(var j=0;j<24;++j)P.push(P[P.length-12]);D+=2,Y=!0}continue e}L[0][k]=Math.min(L[0][k],K[k],oe[k]),L[1][k]=Math.max(L[1][k],K[k],oe[k])}Array.isArray(V[0])?(ee=V.length>M-1?V[M-1]:V.length>0?V[V.length-1]:[0,0,0,1],Q=V.length>M?V[M]:V.length>0?V[V.length-1]:[0,0,0,1]):ee=Q=V,3===ee.length&&(ee=[ee[0],ee[1],ee[2],1]),3===Q.length&&(Q=[Q[0],Q[1],Q[2],1]),!this.hasAlpha&&ee[3]<1&&(this.hasAlpha=!0),$=Array.isArray(Z)?Z.length>M-1?Z[M-1]:Z.length>0?Z[Z.length-1]:[0,0,0,1]:Z;var H=R;if(R+=y(K,oe),Y){for(k=0;k<2;++k)P.push(K[0],K[1],K[2],oe[0],oe[1],oe[2],H,$,ee[0],ee[1],ee[2],ee[3]);D+=2,Y=!1}P.push(K[0],K[1],K[2],oe[0],oe[1],oe[2],H,$,ee[0],ee[1],ee[2],ee[3],K[0],K[1],K[2],oe[0],oe[1],oe[2],H,-$,ee[0],ee[1],ee[2],ee[3],oe[0],oe[1],oe[2],K[0],K[1],K[2],R,-$,Q[0],Q[1],Q[2],Q[3],oe[0],oe[1],oe[2],K[0],K[1],K[2],R,$,Q[0],Q[1],Q[2],Q[3]),D+=4}}if(this.buffer.update(P),S.push(R),F.push(B[B.length-1].slice()),this.bounds=L,this.vertexCount=D,this.points=F,this.arcLength=S,"dashes"in A){var G=A.dashes.slice();for(G.unshift(0),M=1;M<G.length;++M)G[M]=G[M-1]+G[M];var re=s(new Array(1024),[256,1,4]);for(M=0;M<256;++M){for(k=0;k<4;++k)re.set(M,0,k,0);1&d.le(G,G[G.length-1]*M/255)?re.set(M,0,0,0):re.set(M,0,0,255)}this.texture.setPixels(re)}},v.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},v.pick=function(A){if(!A||A.id!==this.pickId)return null;var B,V,Z,M=(B=A.value[0],V=A.value[1],Z=A.value[2],a[0]=0,a[1]=Z,a[2]=V,a[3]=B,n[0]),k=d.le(this.arcLength,M);if(k<0)return null;if(k===this.arcLength.length-1)return new l(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),k);for(var E=this.points[k],P=this.points[Math.min(k+1,this.points.length-1)],S=(M-this.arcLength[k])/(this.arcLength[k+1]-this.arcLength[k]),F=1-S,R=[0,0,0],D=0;D<3;++D)R[D]=F*E[D]+S*P[D];var L=Math.min(S<.5?k:k+1,this.points.length-1);return new l(M,R,L,this.points[L])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(x,T,b){T.exports=function(e){var r=new Float32Array(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}},{}],93:[function(x,T,b){T.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(x,T,b){T.exports=function(e){var r=e[0],t=e[1],a=e[2],n=e[3],d=e[4],s=e[5],i=e[6],u=e[7],f=e[8],p=e[9],y=e[10],m=e[11],l=e[12],w=e[13],v=e[14],A=e[15];return(r*s-t*d)*(y*A-m*v)-(r*i-a*d)*(p*A-m*w)+(r*u-n*d)*(p*v-y*w)+(t*i-a*s)*(f*A-m*l)-(t*u-n*s)*(f*v-y*l)+(a*u-n*i)*(f*w-p*l)}},{}],95:[function(x,T,b){T.exports=function(e,r){var t=r[0],a=r[1],n=r[2],d=r[3],s=t+t,i=a+a,u=n+n,f=t*s,p=a*s,y=a*i,m=n*s,l=n*i,w=n*u,v=d*s,A=d*i,M=d*u;return e[0]=1-y-w,e[1]=p+M,e[2]=m-A,e[3]=0,e[4]=p-M,e[5]=1-f-w,e[6]=l+v,e[7]=0,e[8]=m+A,e[9]=l-v,e[10]=1-f-y,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(x,T,b){T.exports=function(e,r,t){var a=r[0],n=r[1],d=r[2],s=r[3],i=a+a,u=n+n,f=d+d,p=a*i,y=a*u,m=a*f,l=n*u,w=n*f,v=d*f,A=s*i,M=s*u,k=s*f;return e[0]=1-(l+v),e[1]=y+k,e[2]=m-M,e[3]=0,e[4]=y-k,e[5]=1-(p+v),e[6]=w+A,e[7]=0,e[8]=m+M,e[9]=w-A,e[10]=1-(p+l),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],97:[function(x,T,b){T.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(x,T,b){T.exports=function(e,r){var t=r[0],a=r[1],n=r[2],d=r[3],s=r[4],i=r[5],u=r[6],f=r[7],p=r[8],y=r[9],m=r[10],l=r[11],w=r[12],v=r[13],A=r[14],M=r[15],k=t*i-a*s,E=t*u-n*s,P=t*f-d*s,S=a*u-n*i,F=a*f-d*i,R=n*f-d*u,D=p*v-y*w,L=p*A-m*w,B=p*M-l*w,V=y*A-m*v,Z=y*M-l*v,Y=m*M-l*A,ee=k*Y-E*Z+P*V+S*B-F*L+R*D;return ee?(e[0]=(i*Y-u*Z+f*V)*(ee=1/ee),e[1]=(n*Z-a*Y-d*V)*ee,e[2]=(v*R-A*F+M*S)*ee,e[3]=(m*F-y*R-l*S)*ee,e[4]=(u*B-s*Y-f*L)*ee,e[5]=(t*Y-n*B+d*L)*ee,e[6]=(A*P-w*R-M*E)*ee,e[7]=(p*R-m*P+l*E)*ee,e[8]=(s*Z-i*B+f*D)*ee,e[9]=(a*B-t*Z-d*D)*ee,e[10]=(w*F-v*P+M*k)*ee,e[11]=(y*P-p*F-l*k)*ee,e[12]=(i*L-s*V-u*D)*ee,e[13]=(t*V-a*L+n*D)*ee,e[14]=(v*E-w*S-A*k)*ee,e[15]=(p*S-y*E+m*k)*ee,e):null}},{}],99:[function(x,T,b){var e=x("./identity");T.exports=function(r,t,a,n){var d,s,i,u,f,p,y,m,l,w,v=t[0],A=t[1],M=t[2],k=n[0],E=n[1],P=n[2],S=a[0],F=a[1],R=a[2];return Math.abs(v-S)<1e-6&&Math.abs(A-F)<1e-6&&Math.abs(M-R)<1e-6?e(r):(y=v-S,m=A-F,l=M-R,d=E*(l*=w=1/Math.sqrt(y*y+m*m+l*l))-P*(m*=w),s=P*(y*=w)-k*l,i=k*m-E*y,(w=Math.sqrt(d*d+s*s+i*i))?(d*=w=1/w,s*=w,i*=w):(d=0,s=0,i=0),u=m*i-l*s,f=l*d-y*i,p=y*s-m*d,(w=Math.sqrt(u*u+f*f+p*p))?(u*=w=1/w,f*=w,p*=w):(u=0,f=0,p=0),r[0]=d,r[1]=u,r[2]=y,r[3]=0,r[4]=s,r[5]=f,r[6]=m,r[7]=0,r[8]=i,r[9]=p,r[10]=l,r[11]=0,r[12]=-(d*v+s*A+i*M),r[13]=-(u*v+f*A+p*M),r[14]=-(y*v+m*A+l*M),r[15]=1,r)}},{"./identity":97}],100:[function(x,T,b){T.exports=function(e,r,t){var a=r[0],n=r[1],d=r[2],s=r[3],i=r[4],u=r[5],f=r[6],p=r[7],y=r[8],m=r[9],l=r[10],w=r[11],v=r[12],A=r[13],M=r[14],k=r[15],E=t[0],P=t[1],S=t[2],F=t[3];return e[0]=E*a+P*i+S*y+F*v,e[1]=E*n+P*u+S*m+F*A,e[2]=E*d+P*f+S*l+F*M,e[3]=E*s+P*p+S*w+F*k,e[4]=(E=t[4])*a+(P=t[5])*i+(S=t[6])*y+(F=t[7])*v,e[5]=E*n+P*u+S*m+F*A,e[6]=E*d+P*f+S*l+F*M,e[7]=E*s+P*p+S*w+F*k,e[8]=(E=t[8])*a+(P=t[9])*i+(S=t[10])*y+(F=t[11])*v,e[9]=E*n+P*u+S*m+F*A,e[10]=E*d+P*f+S*l+F*M,e[11]=E*s+P*p+S*w+F*k,e[12]=(E=t[12])*a+(P=t[13])*i+(S=t[14])*y+(F=t[15])*v,e[13]=E*n+P*u+S*m+F*A,e[14]=E*d+P*f+S*l+F*M,e[15]=E*s+P*p+S*w+F*k,e}},{}],101:[function(x,T,b){T.exports=function(e,r,t,a,n,d,s){var i=1/(r-t),u=1/(a-n),f=1/(d-s);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(r+t)*i,e[13]=(n+a)*u,e[14]=(s+d)*f,e[15]=1,e}},{}],102:[function(x,T,b){T.exports=function(e,r,t,a,n){var d=1/Math.tan(r/2),s=1/(a-n);return e[0]=d/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+a)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*a*s,e[15]=0,e}},{}],103:[function(x,T,b){T.exports=function(e,r,t,a){var n,d,s,i,u,f,p,y,m,l,w,v,A,M,k,E,P,S,F,R,D,L,B,V,Z=a[0],Y=a[1],ee=a[2],Q=Math.sqrt(Z*Z+Y*Y+ee*ee);return Math.abs(Q)<1e-6?null:(Z*=Q=1/Q,Y*=Q,ee*=Q,n=Math.sin(t),d=Math.cos(t),u=r[1],f=r[2],p=r[3],m=r[5],l=r[6],w=r[7],A=r[9],M=r[10],k=r[11],F=Z*Y*(s=1-d)-ee*n,R=Y*Y*s+d,D=ee*Y*s+Z*n,L=Z*ee*s+Y*n,B=Y*ee*s-Z*n,V=ee*ee*s+d,e[0]=(i=r[0])*(E=Z*Z*s+d)+(y=r[4])*(P=Y*Z*s+ee*n)+(v=r[8])*(S=ee*Z*s-Y*n),e[1]=u*E+m*P+A*S,e[2]=f*E+l*P+M*S,e[3]=p*E+w*P+k*S,e[4]=i*F+y*R+v*D,e[5]=u*F+m*R+A*D,e[6]=f*F+l*R+M*D,e[7]=p*F+w*R+k*D,e[8]=i*L+y*B+v*V,e[9]=u*L+m*B+A*V,e[10]=f*L+l*B+M*V,e[11]=p*L+w*B+k*V,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}},{}],104:[function(x,T,b){T.exports=function(e,r,t){var a=Math.sin(t),n=Math.cos(t),d=r[4],s=r[5],i=r[6],u=r[7],f=r[8],p=r[9],y=r[10],m=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=d*n+f*a,e[5]=s*n+p*a,e[6]=i*n+y*a,e[7]=u*n+m*a,e[8]=f*n-d*a,e[9]=p*n-s*a,e[10]=y*n-i*a,e[11]=m*n-u*a,e}},{}],105:[function(x,T,b){T.exports=function(e,r,t){var a=Math.sin(t),n=Math.cos(t),d=r[0],s=r[1],i=r[2],u=r[3],f=r[8],p=r[9],y=r[10],m=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=d*n-f*a,e[1]=s*n-p*a,e[2]=i*n-y*a,e[3]=u*n-m*a,e[8]=d*a+f*n,e[9]=s*a+p*n,e[10]=i*a+y*n,e[11]=u*a+m*n,e}},{}],106:[function(x,T,b){T.exports=function(e,r,t){var a=Math.sin(t),n=Math.cos(t),d=r[0],s=r[1],i=r[2],u=r[3],f=r[4],p=r[5],y=r[6],m=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=d*n+f*a,e[1]=s*n+p*a,e[2]=i*n+y*a,e[3]=u*n+m*a,e[4]=f*n-d*a,e[5]=p*n-s*a,e[6]=y*n-i*a,e[7]=m*n-u*a,e}},{}],107:[function(x,T,b){T.exports=function(e,r,t){var a=t[0],n=t[1],d=t[2];return e[0]=r[0]*a,e[1]=r[1]*a,e[2]=r[2]*a,e[3]=r[3]*a,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=r[7]*n,e[8]=r[8]*d,e[9]=r[9]*d,e[10]=r[10]*d,e[11]=r[11]*d,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}},{}],108:[function(x,T,b){T.exports=function(e,r,t){var a,n,d,s,i,u,f,p,y,m,l,w,v=t[0],A=t[1],M=t[2];return r===e?(e[12]=r[0]*v+r[4]*A+r[8]*M+r[12],e[13]=r[1]*v+r[5]*A+r[9]*M+r[13],e[14]=r[2]*v+r[6]*A+r[10]*M+r[14],e[15]=r[3]*v+r[7]*A+r[11]*M+r[15]):(n=r[1],d=r[2],s=r[3],i=r[4],u=r[5],f=r[6],p=r[7],y=r[8],m=r[9],l=r[10],w=r[11],e[0]=a=r[0],e[1]=n,e[2]=d,e[3]=s,e[4]=i,e[5]=u,e[6]=f,e[7]=p,e[8]=y,e[9]=m,e[10]=l,e[11]=w,e[12]=a*v+i*A+y*M+r[12],e[13]=n*v+u*A+m*M+r[13],e[14]=d*v+f*A+l*M+r[14],e[15]=s*v+p*A+w*M+r[15]),e}},{}],109:[function(x,T,b){T.exports=function(e,r){if(e===r){var t=r[1],a=r[2],n=r[3],d=r[6],s=r[7],i=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=t,e[6]=r[9],e[7]=r[13],e[8]=a,e[9]=d,e[11]=r[14],e[12]=n,e[13]=s,e[14]=i}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}},{}],110:[function(x,T,b){"use strict";var e=x("barycentric"),r=x("polytope-closest-point/lib/closest_point_2d.js");function t(d,s){for(var i=[0,0,0,0],u=0;u<4;++u)for(var f=0;f<4;++f)i[f]+=d[4*u+f]*s[u];return i}function a(d,s,i,u,f){for(var p=t(u,t(i,t(s,[d[0],d[1],d[2],1]))),y=0;y<3;++y)p[y]/=p[3];return[.5*f[0]*(1+p[0]),.5*f[1]*(1-p[1])]}function n(d,s){for(var i=[0,0,0],u=0;u<d.length;++u)for(var f=d[u],p=s[u],y=0;y<3;++y)i[y]+=p*f[y];return i}T.exports=function(d,s,i,u,f,p){if(1===d.length)return[0,d[0].slice()];for(var y=new Array(d.length),m=0;m<d.length;++m)y[m]=a(d[m],i,u,f,p);var l=0,w=1/0;for(m=0;m<y.length;++m){for(var v=0,A=0;A<2;++A)v+=Math.pow(y[m][A]-s[A],2);v<w&&(w=v,l=m)}var M=function(E,P){if(2===E.length){for(var S=0,F=0,R=0;R<2;++R)S+=Math.pow(P[R]-E[0][R],2),F+=Math.pow(P[R]-E[1][R],2);return(S=Math.sqrt(S))+(F=Math.sqrt(F))<1e-6?[1,0]:[F/(S+F),S/(F+S)]}if(3===E.length){var D=[0,0];return r(E[0],E[1],E[2],P,D),e(E,D)}return[]}(y,s),k=0;for(m=0;m<3;++m){if(M[m]<-.001||M[m]>1.0001)return null;k+=M[m]}return Math.abs(k-1)>.001?null:[l,n(d,M),M]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(x,T,b){var e=x("glslify"),r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),u=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),f=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),y=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);b.meshShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},b.wireShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},b.pointShader={vertex:d,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},b.pickShader={vertex:i,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},b.pointPickShader={vertex:f,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},b.contourShader={vertex:p,fragment:y,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(x,T,b){"use strict";var e=x("gl-shader"),r=x("gl-buffer"),t=x("gl-vao"),a=x("gl-texture2d"),n=x("normals"),d=x("gl-mat4/multiply"),s=x("gl-mat4/invert"),i=x("ndarray"),u=x("colormap"),f=x("simplicial-complex-contour"),p=x("typedarray-pool"),y=x("./lib/shaders"),m=x("./lib/closest-point"),l=y.meshShader,w=y.wireShader,v=y.pointShader,A=y.pickShader,M=y.pointPickShader,k=y.contourShader,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function P(Y,ee,Q,$,K,oe,j,H,G,re,q,te,ne,le,ue,de,he,be,ge,we,ke,De,Ee,Re,ve,Te,Ie){this.gl=Y,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=ee,this.dirty=!0,this.triShader=Q,this.lineShader=$,this.pointShader=K,this.pickShader=oe,this.pointPickShader=j,this.contourShader=H,this.trianglePositions=G,this.triangleColors=q,this.triangleNormals=ne,this.triangleUVs=te,this.triangleIds=re,this.triangleVAO=le,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ue,this.edgeColors=he,this.edgeUVs=be,this.edgeIds=de,this.edgeVAO=ge,this.edgeCount=0,this.pointPositions=we,this.pointColors=De,this.pointUVs=Ee,this.pointSizes=Re,this.pointIds=ke,this.pointVAO=ve,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Te,this.contourVAO=Ie,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=E,this._view=E,this._projection=E,this._resolution=[1,1]}var S=P.prototype;function F(Y,ee){if(!ee||!ee.length)return 1;for(var Q=0;Q<ee.length;++Q){if(ee.length<2)return 1;if(ee[Q][0]===Y)return ee[Q][1];if(ee[Q][0]>Y&&Q>0){var $=(ee[Q][0]-Y)/(ee[Q][0]-ee[Q-1][0]);return ee[Q][1]*(1-$)+$*ee[Q-1][1]}}return 1}function R(Y){var ee=e(Y,l.vertex,l.fragment);return ee.attributes.position.location=0,ee.attributes.color.location=2,ee.attributes.uv.location=3,ee.attributes.normal.location=4,ee}function D(Y){var ee=e(Y,w.vertex,w.fragment);return ee.attributes.position.location=0,ee.attributes.color.location=2,ee.attributes.uv.location=3,ee}function L(Y){var ee=e(Y,v.vertex,v.fragment);return ee.attributes.position.location=0,ee.attributes.color.location=2,ee.attributes.uv.location=3,ee.attributes.pointSize.location=4,ee}function B(Y){var ee=e(Y,A.vertex,A.fragment);return ee.attributes.position.location=0,ee.attributes.id.location=1,ee}function V(Y){var ee=e(Y,M.vertex,M.fragment);return ee.attributes.position.location=0,ee.attributes.id.location=1,ee.attributes.pointSize.location=4,ee}function Z(Y){var ee=e(Y,k.vertex,k.fragment);return ee.attributes.position.location=0,ee}S.isOpaque=function(){return!this.hasAlpha},S.isTransparent=function(){return this.hasAlpha},S.pickSlots=1,S.setPickBase=function(Y){this.pickId=Y},S.highlight=function(Y){if(Y&&this.contourEnable){for(var ee=f(this.cells,this.intensity,Y.intensity),Q=ee.cells,$=ee.vertexIds,K=ee.vertexWeights,oe=Q.length,j=p.mallocFloat32(6*oe),H=0,G=0;G<oe;++G)for(var re=Q[G],q=0;q<2;++q){var te=re[0];2===re.length&&(te=re[q]);for(var ue=K[te],de=1-ue,he=this.positions[$[te][0]],be=this.positions[$[te][1]],ge=0;ge<3;++ge)j[H++]=ue*he[ge]+de*be[ge]}this.contourCount=H/3|0,this.contourPositions.update(j.subarray(0,H)),p.free(j)}else this.contourCount=0},S.update=function(Y){Y=Y||{};var ee=this.gl;this.dirty=!0,"contourEnable"in Y&&(this.contourEnable=Y.contourEnable),"contourColor"in Y&&(this.contourColor=Y.contourColor),"lineWidth"in Y&&(this.lineWidth=Y.lineWidth),"lightPosition"in Y&&(this.lightPosition=Y.lightPosition),this.hasAlpha=!1,"opacity"in Y&&(this.opacity=Y.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in Y&&(this.opacityscale=Y.opacityscale,this.hasAlpha=!0),"ambient"in Y&&(this.ambientLight=Y.ambient),"diffuse"in Y&&(this.diffuseLight=Y.diffuse),"specular"in Y&&(this.specularLight=Y.specular),"roughness"in Y&&(this.roughness=Y.roughness),"fresnel"in Y&&(this.fresnel=Y.fresnel),Y.texture?(this.texture.dispose(),this.texture=a(ee,Y.texture)):Y.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=ee.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=ee.LINEAR,this.texture.setPixels(function(cn,Ze){for(var Qe=u({colormap:cn,nshades:256,format:"rgba"}),Ge=new Uint8Array(1024),rt=0;rt<256;++rt){for(var Le=Qe[rt],ze=0;ze<3;++ze)Ge[4*rt+ze]=Le[ze];Ge[4*rt+3]=Ze?255*F(rt/255,Ze):255*Le[3]}return i(Ge,[256,256,4],[4,0,1])}(Y.colormap,this.opacityscale)),this.texture.generateMipmap());var Q=Y.cells,$=Y.positions;if($&&Q){var K=[],oe=[],j=[],H=[],G=[],re=[],q=[],te=[],ne=[],le=[],ue=[],de=[],he=[],be=[];this.cells=Q,this.positions=$;var ge=Y.vertexNormals,we=Y.cellNormals,ke=void 0===Y.vertexNormalsEpsilon?1e-6:Y.vertexNormalsEpsilon;Y.useFacetNormals&&!we&&(we=n.faceNormals(Q,$,void 0===Y.faceNormalsEpsilon?1e-6:Y.faceNormalsEpsilon)),we||ge||(ge=n.vertexNormals(Q,$,ke));var Ee=Y.vertexColors,Re=Y.cellColors,ve=Y.meshColor||[1,1,1,1],Te=Y.vertexUVs,Ie=Y.vertexIntensity,Ce=Y.cellUVs,Pe=Y.cellIntensity,Ve=1/0,qe=-1/0;if(!Te&&!Ce)if(Ie)if(Y.vertexIntensityBounds)Ve=+Y.vertexIntensityBounds[0],qe=+Y.vertexIntensityBounds[1];else for(var Je=0;Je<Ie.length;++Je){var lt=Ie[Je];Ve=Math.min(Ve,lt),qe=Math.max(qe,lt)}else if(Pe)if(Y.cellIntensityBounds)Ve=+Y.cellIntensityBounds[0],qe=+Y.cellIntensityBounds[1];else for(Je=0;Je<Pe.length;++Je)lt=Pe[Je],Ve=Math.min(Ve,lt),qe=Math.max(qe,lt);else for(Je=0;Je<$.length;++Je)lt=$[Je][2],Ve=Math.min(Ve,lt),qe=Math.max(qe,lt);this.intensity=Ie||Pe||function(cn){for(var Ze=cn.length,Qe=new Array(Ze),Ge=0;Ge<Ze;++Ge)Qe[Ge]=cn[Ge][2];return Qe}($),this.pickVertex=!(Pe||Re);var He=Y.pointSizes,$e=Y.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Je=0;Je<$.length;++Je)for(var et=$[Je],tt=0;tt<3;++tt)!isNaN(et[tt])&&isFinite(et[tt])&&(this.bounds[0][tt]=Math.min(this.bounds[0][tt],et[tt]),this.bounds[1][tt]=Math.max(this.bounds[1][tt],et[tt]));var ft=0,bt=0,Ct=0;e:for(Je=0;Je<Q.length;++Je){var Vt=Q[Je];switch(Vt.length){case 1:for(et=$[ht=Vt[0]],tt=0;tt<3;++tt)if(isNaN(et[tt])||!isFinite(et[tt]))continue e;le.push(et[0],et[1],et[2]),ut=Ee?Ee[ht]:Re?Re[Je]:ve,this.opacityscale&&Ie?oe.push(ut[0],ut[1],ut[2],this.opacity*F((Ie[ht]-Ve)/(qe-Ve),this.opacityscale)):3===ut.length?ue.push(ut[0],ut[1],ut[2],this.opacity):(ue.push(ut[0],ut[1],ut[2],ut[3]*this.opacity),ut[3]<1&&(this.hasAlpha=!0)),de.push((Rt=Te?Te[ht]:Ie?[(Ie[ht]-Ve)/(qe-Ve),0]:Ce?Ce[Je]:Pe?[(Pe[Je]-Ve)/(qe-Ve),0]:[(et[2]-Ve)/(qe-Ve),0])[0],Rt[1]),he.push(He?He[ht]:$e),be.push(Je),Ct+=1;break;case 2:for(tt=0;tt<2;++tt){et=$[ht=Vt[tt]];for(var Ft=0;Ft<3;++Ft)if(isNaN(et[Ft])||!isFinite(et[Ft]))continue e}for(tt=0;tt<2;++tt)et=$[ht=Vt[tt]],re.push(et[0],et[1],et[2]),ut=Ee?Ee[ht]:Re?Re[Je]:ve,this.opacityscale&&Ie?oe.push(ut[0],ut[1],ut[2],this.opacity*F((Ie[ht]-Ve)/(qe-Ve),this.opacityscale)):3===ut.length?q.push(ut[0],ut[1],ut[2],this.opacity):(q.push(ut[0],ut[1],ut[2],ut[3]*this.opacity),ut[3]<1&&(this.hasAlpha=!0)),te.push((Rt=Te?Te[ht]:Ie?[(Ie[ht]-Ve)/(qe-Ve),0]:Ce?Ce[Je]:Pe?[(Pe[Je]-Ve)/(qe-Ve),0]:[(et[2]-Ve)/(qe-Ve),0])[0],Rt[1]),ne.push(Je);bt+=1;break;case 3:for(tt=0;tt<3;++tt)for(et=$[ht=Vt[tt]],Ft=0;Ft<3;++Ft)if(isNaN(et[Ft])||!isFinite(et[Ft]))continue e;for(tt=0;tt<3;++tt){var ht,ut,Rt,nn;et=$[ht=Vt[2-tt]],K.push(et[0],et[1],et[2]),(ut=Ee?Ee[ht]:Re?Re[Je]:ve)?this.opacityscale&&Ie?oe.push(ut[0],ut[1],ut[2],this.opacity*F((Ie[ht]-Ve)/(qe-Ve),this.opacityscale)):3===ut.length?oe.push(ut[0],ut[1],ut[2],this.opacity):(oe.push(ut[0],ut[1],ut[2],ut[3]*this.opacity),ut[3]<1&&(this.hasAlpha=!0)):oe.push(.5,.5,.5,1),H.push((Rt=Te?Te[ht]:Ie?[(Ie[ht]-Ve)/(qe-Ve),0]:Ce?Ce[Je]:Pe?[(Pe[Je]-Ve)/(qe-Ve),0]:[(et[2]-Ve)/(qe-Ve),0])[0],Rt[1]),j.push((nn=ge?ge[ht]:we[Je])[0],nn[1],nn[2]),G.push(Je)}ft+=1}}this.pointCount=Ct,this.edgeCount=bt,this.triangleCount=ft,this.pointPositions.update(le),this.pointColors.update(ue),this.pointUVs.update(de),this.pointSizes.update(he),this.pointIds.update(new Uint32Array(be)),this.edgePositions.update(re),this.edgeColors.update(q),this.edgeUVs.update(te),this.edgeIds.update(new Uint32Array(ne)),this.trianglePositions.update(K),this.triangleColors.update(oe),this.triangleUVs.update(H),this.triangleNormals.update(j),this.triangleIds.update(new Uint32Array(G))}},S.drawTransparent=S.draw=function(Y){for(var ee=this.gl,Q=(Y=Y||{}).model||E,$=Y.view||E,K=Y.projection||E,oe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)oe[0][j]=Math.max(oe[0][j],this.clipBounds[0][j]),oe[1][j]=Math.min(oe[1][j],this.clipBounds[1][j]);var H={model:Q,view:$,projection:K,inverseModel:E.slice(),clipBounds:oe,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};H.inverseModel=s(H.inverseModel,H.model),ee.disable(ee.CULL_FACE),this.texture.bind(0);var G=new Array(16);for(d(G,H.view,H.model),d(G,H.projection,G),s(G,G),j=0;j<3;++j)H.eyePosition[j]=G[12+j]/G[15];var re,q=G[15];for(j=0;j<3;++j)q+=this.lightPosition[j]*G[4*j+3];for(j=0;j<3;++j){for(var te=G[12+j],ne=0;ne<3;++ne)te+=G[4*ne+j]*this.lightPosition[ne];H.lightPosition[j]=te/q}this.triangleCount>0&&((re=this.triShader).bind(),re.uniforms=H,this.triangleVAO.bind(),ee.drawArrays(ee.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((re=this.lineShader).bind(),re.uniforms=H,this.edgeVAO.bind(),ee.lineWidth(this.lineWidth*this.pixelRatio),ee.drawArrays(ee.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((re=this.pointShader).bind(),re.uniforms=H,this.pointVAO.bind(),ee.drawArrays(ee.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((re=this.contourShader).bind(),re.uniforms=H,this.contourVAO.bind(),ee.drawArrays(ee.LINES,0,this.contourCount),this.contourVAO.unbind())},S.drawPick=function(Y){for(var ee=this.gl,Q=(Y=Y||{}).model||E,$=Y.view||E,K=Y.projection||E,oe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)oe[0][j]=Math.max(oe[0][j],this.clipBounds[0][j]),oe[1][j]=Math.min(oe[1][j],this.clipBounds[1][j]);this._model=[].slice.call(Q),this._view=[].slice.call($),this._projection=[].slice.call(K),this._resolution=[ee.drawingBufferWidth,ee.drawingBufferHeight];var H,G={model:Q,view:$,projection:K,clipBounds:oe,pickId:this.pickId/255};(H=this.pickShader).bind(),H.uniforms=G,this.triangleCount>0&&(this.triangleVAO.bind(),ee.drawArrays(ee.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),ee.lineWidth(this.lineWidth*this.pixelRatio),ee.drawArrays(ee.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((H=this.pointPickShader).bind(),H.uniforms=G,this.pointVAO.bind(),ee.drawArrays(ee.POINTS,0,this.pointCount),this.pointVAO.unbind())},S.pick=function(Y){if(!Y||Y.id!==this.pickId)return null;for(var ee=Y.value[0]+256*Y.value[1]+65536*Y.value[2],Q=this.cells[ee],$=this.positions,K=new Array(Q.length),oe=0;oe<Q.length;++oe)K[oe]=$[Q[oe]];var j=Y.coord[0],H=Y.coord[1];if(!this.pickVertex){var G=this.positions[Q[0]],re=this.positions[Q[1]],q=this.positions[Q[2]];return{_cellCenter:!0,position:[j,H],index:ee,cell:Q,cellId:ee,intensity:this.intensity[ee],dataCoordinate:[(G[0]+re[0]+q[0])/3,(G[1]+re[1]+q[1])/3,(G[2]+re[2]+q[2])/3]}}var ne=m(K,[j*this.pixelRatio,this._resolution[1]-H*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ne)return null;var le=ne[2],ue=0;for(oe=0;oe<Q.length;++oe)ue+=le[oe]*this.intensity[Q[oe]];return{position:ne[1],index:Q[ne[0]],cell:Q,cellId:ee,intensity:ue,dataCoordinate:this.positions[Q[ne[0]]]}},S.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},T.exports=function(Y,ee){if(1===arguments.length&&(Y=(ee=Y).gl),!(Y.getExtension("OES_standard_derivatives")||Y.getExtension("MOZ_OES_standard_derivatives")||Y.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var $=R(Y),K=D(Y),oe=L(Y),j=B(Y),H=V(Y),G=Z(Y),re=a(Y,i(new Uint8Array([255,255,255,255]),[1,1,4]));re.generateMipmap(),re.minFilter=Y.LINEAR_MIPMAP_LINEAR,re.magFilter=Y.LINEAR;var q=r(Y),te=r(Y),ne=r(Y),le=r(Y),ue=r(Y),de=t(Y,[{buffer:q,type:Y.FLOAT,size:3},{buffer:ue,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:te,type:Y.FLOAT,size:4},{buffer:ne,type:Y.FLOAT,size:2},{buffer:le,type:Y.FLOAT,size:3}]),he=r(Y),be=r(Y),ge=r(Y),we=r(Y),ke=t(Y,[{buffer:he,type:Y.FLOAT,size:3},{buffer:we,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:Y.FLOAT,size:4},{buffer:ge,type:Y.FLOAT,size:2}]),De=r(Y),Ee=r(Y),Re=r(Y),ve=r(Y),Te=r(Y),Ie=t(Y,[{buffer:De,type:Y.FLOAT,size:3},{buffer:Te,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Ee,type:Y.FLOAT,size:4},{buffer:Re,type:Y.FLOAT,size:2},{buffer:ve,type:Y.FLOAT,size:1}]),Ce=r(Y),Ve=new P(Y,re,$,K,oe,j,H,G,q,ue,te,ne,le,de,he,we,be,ge,ke,De,Te,Ee,Re,ve,Ie,Ce,t(Y,[{buffer:Ce,type:Y.FLOAT,size:3}]));return Ve.update(ee),Ve}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(x,T,b){"use strict";T.exports=function(i){var u=i.gl;return new a(i,e(u,[0,0,0,1,1,0,1,1]),r(u,t.boxVert,t.lineFrag))};var e=x("gl-buffer"),r=x("gl-shader"),t=x("./shaders");function a(i,u,f){this.plot=i,this.vbo=u,this.shader=f}var n,d,s=a.prototype;s.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},s.drawBox=(n=[0,0],d=[0,0],function(i,u,f,p,y){var l=this.shader,w=this.plot.gl;n[0]=i,n[1]=u,d[0]=f,d[1]=p,l.uniforms.lo=n,l.uniforms.hi=d,l.uniforms.color=y,w.drawArrays(w.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(x,T,b){"use strict";T.exports=function(m){var l=m.gl;return new n(m,e(l),r(l,a.gridVert,a.gridFrag),r(l,a.tickVert,a.gridFrag))};var e=x("gl-buffer"),r=x("gl-shader"),t=x("binary-search-bounds"),a=x("./shaders");function n(m,l,w,v){this.plot=m,this.vbo=l,this.shader=w,this.tickShader=v,this.ticks=[[],[]]}function d(m,l){return m-l}var s,i,u,f,p,m,l,w,v,A,M,y=n.prototype;y.draw=(s=[0,0],i=[0,0],u=[0,0],function(){for(var m=this.plot,l=this.vbo,w=this.shader,v=this.ticks,A=m.gl,M=m._tickBounds,k=m.dataBox,E=m.viewBox,P=m.gridLineWidth,S=m.gridLineColor,F=m.gridLineEnable,R=m.pixelRatio,D=0;D<2;++D){var L=M[D],V=.5*(k[D+2]+k[D]),Z=k[D+2]-k[D];i[D]=2*(M[D+2]-L)/Z,s[D]=2*(L-V)/Z}w.bind(),l.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=s,w.uniforms.dataScale=i;var Y=0;for(D=0;D<2;++D){u[0]=u[1]=0,u[D]=1,w.uniforms.dataAxis=u,w.uniforms.lineWidth=P[D]/(E[D+2]-E[D])*R,w.uniforms.color=S[D];var ee=6*v[D].length;F[D]&&ee&&A.drawArrays(A.TRIANGLES,Y,ee),Y+=ee}}),y.drawTickMarks=(m=[0,0],l=[0,0],w=[1,0],v=[0,1],A=[0,0],M=[0,0],function(){for(var k=this.plot,E=this.vbo,P=this.tickShader,S=this.ticks,F=k.gl,R=k._tickBounds,D=k.dataBox,L=k.viewBox,B=k.pixelRatio,V=k.screenBox,Z=V[2]-V[0],Y=V[3]-V[1],ee=L[2]-L[0],Q=L[3]-L[1],$=0;$<2;++$){var K=R[$],j=.5*(D[$+2]+D[$]),H=D[$+2]-D[$];l[$]=2*(R[$+2]-K)/H,m[$]=2*(K-j)/H}l[0]*=ee/Z,m[0]*=ee/Z,l[1]*=Q/Y,m[1]*=Q/Y,P.bind(),E.bind(),P.attributes.dataCoord.pointer();var G=P.uniforms;G.dataShift=m,G.dataScale=l;var re=k.tickMarkLength,q=k.tickMarkWidth,te=k.tickMarkColor,ne=6*S[0].length,le=Math.min(t.ge(S[0],(D[0]-R[0])/(R[2]-R[0]),d),S[0].length),ue=Math.min(t.gt(S[0],(D[2]-R[0])/(R[2]-R[0]),d),S[0].length),de=0+6*le,he=6*Math.max(0,ue-le),be=Math.min(t.ge(S[1],(D[1]-R[1])/(R[3]-R[1]),d),S[1].length),ge=Math.min(t.gt(S[1],(D[3]-R[1])/(R[3]-R[1]),d),S[1].length),we=ne+6*be,ke=6*Math.max(0,ge-be);A[0]=2*(L[0]-re[1])/Z-1,A[1]=(L[3]+L[1])/Y-1,M[0]=re[1]*B/Z,M[1]=q[1]*B/Y,ke&&(G.color=te[1],G.tickScale=M,G.dataAxis=v,G.screenOffset=A,F.drawArrays(F.TRIANGLES,we,ke)),A[0]=(L[2]+L[0])/Z-1,A[1]=2*(L[1]-re[0])/Y-1,M[0]=q[0]*B/Z,M[1]=re[0]*B/Y,he&&(G.color=te[0],G.tickScale=M,G.dataAxis=w,G.screenOffset=A,F.drawArrays(F.TRIANGLES,de,he)),A[0]=2*(L[2]+re[3])/Z-1,A[1]=(L[3]+L[1])/Y-1,M[0]=re[3]*B/Z,M[1]=q[3]*B/Y,ke&&(G.color=te[3],G.tickScale=M,G.dataAxis=v,G.screenOffset=A,F.drawArrays(F.TRIANGLES,we,ke)),A[0]=(L[2]+L[0])/Z-1,A[1]=2*(L[3]+re[2])/Y-1,M[0]=q[2]*B/Z,M[1]=re[2]*B/Y,he&&(G.color=te[2],G.tickScale=M,G.dataAxis=w,G.screenOffset=A,F.drawArrays(F.TRIANGLES,de,he))}),y.update=(f=[1,1,-1,-1,1,-1],p=[1,-1,1,1,-1,-1],function(m){for(var l=m.ticks,w=m.bounds,v=new Float32Array(18*(l[0].length+l[1].length)),A=0,M=[[],[]],k=0;k<2;++k)for(var E=M[k],P=l[k],S=w[k],F=w[k+2],R=0;R<P.length;++R){var D=(P[R].x-S)/(F-S);E.push(D);for(var L=0;L<6;++L)v[A++]=D,v[A++]=f[L],v[A++]=p[L]}this.ticks=M,this.vbo.update(v)}),y.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(x,T,b){"use strict";T.exports=function(i){var u=i.gl;return new a(i,e(u,[-1,-1,-1,1,1,-1,1,1]),r(u,t.lineVert,t.lineFrag))};var e=x("gl-buffer"),r=x("gl-shader"),t=x("./shaders");function a(i,u,f){this.plot=i,this.vbo=u,this.shader=f}var n,d,s=a.prototype;s.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},s.drawLine=(n=[0,0],d=[0,0],function(i,u,f,p,y,m){var l=this.plot,w=this.shader,v=l.gl;n[0]=i,n[1]=u,d[0]=f,d[1]=p,w.uniforms.start=n,w.uniforms.end=d,w.uniforms.width=y*l.pixelRatio,w.uniforms.color=m,v.drawArrays(v.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(x,T,b){"use strict";var e=x("glslify"),r=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);T.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:r,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:r,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:r,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(x,T,b){"use strict";T.exports=function(l){var w=l.gl;return new d(l,e(w),r(w,n.textVert,n.textFrag))};var e=x("gl-buffer"),r=x("gl-shader"),t=x("text-cache"),a=x("binary-search-bounds"),n=x("./shaders");function d(l,w,v){this.plot=l,this.vbo=w,this.shader=v,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s,i,u,f,p,y,l,w,m=d.prototype;m.drawTicks=(s=[0,0],i=[0,0],u=[0,0],function(l){var w=this.plot,v=this.shader,A=this.tickX[l],M=this.tickOffset[l],k=w.gl,E=w.viewBox,P=w.dataBox,S=w.screenBox,F=w.pixelRatio,R=w.tickEnable,D=w.tickPad,L=w.tickColor,B=w.tickAngle,V=w.labelEnable,Z=w.labelPad,Y=w.labelColor,ee=w.labelAngle,Q=this.labelOffset[l],$=this.labelCount[l],K=a.lt(A,P[l]),oe=a.le(A,P[l+2]);s[0]=s[1]=0,s[l]=1,i[l]=(E[2+l]+E[l])/(S[2+l]-S[l])-1;var j=2/S[2+(1^l)]-S[1^l];i[1^l]=j*E[1^l]-1,R[l]&&(i[1^l]-=j*F*D[l],K<oe&&M[oe]>M[K]&&(v.uniforms.dataAxis=s,v.uniforms.screenOffset=i,v.uniforms.color=L[l],v.uniforms.angle=B[l],k.drawArrays(k.TRIANGLES,M[K],M[oe]-M[K]))),V[l]&&$&&(i[1^l]-=j*F*Z[l],v.uniforms.dataAxis=u,v.uniforms.screenOffset=i,v.uniforms.color=Y[l],v.uniforms.angle=ee[l],k.drawArrays(k.TRIANGLES,Q,$)),i[1^l]=j*E[2+(1^l)]-1,R[l+2]&&(i[1^l]+=j*F*D[l+2],K<oe&&M[oe]>M[K]&&(v.uniforms.dataAxis=s,v.uniforms.screenOffset=i,v.uniforms.color=L[l+2],v.uniforms.angle=B[l+2],k.drawArrays(k.TRIANGLES,M[K],M[oe]-M[K]))),V[l+2]&&$&&(i[1^l]+=j*F*Z[l+2],v.uniforms.dataAxis=u,v.uniforms.screenOffset=i,v.uniforms.color=Y[l+2],v.uniforms.angle=ee[l+2],k.drawArrays(k.TRIANGLES,Q,$))}),m.drawTitle=(l=[0,0],w=[0,0],function(){var v=this.plot,A=this.shader,M=v.gl,k=v.screenBox,E=v.titleCenter,P=v.titleAngle,S=v.titleColor,F=v.pixelRatio;if(this.titleCount){for(var R=0;R<2;++R)w[R]=2*(E[R]*F-k[R])/(k[2+R]-k[R])-1;A.bind(),A.uniforms.dataAxis=l,A.uniforms.screenOffset=w,A.uniforms.angle=P,A.uniforms.color=S,M.drawArrays(M.TRIANGLES,this.titleOffset,this.titleCount)}}),m.bind=(f=[0,0],p=[0,0],y=[0,0],function(){var l=this.plot,w=this.shader,v=l._tickBounds,A=l.dataBox,M=l.screenBox,k=l.viewBox;w.bind();for(var E=0;E<2;++E){var P=v[E],F=.5*(A[E+2]+A[E]),R=A[E+2]-A[E],L=k[E+2]-k[E],V=M[E+2]-M[E];p[E]=2*(v[E+2]-P)/R*L/V,f[E]=2*(P-F)/R*L/V}y[1]=2*l.pixelRatio/(M[3]-M[1]),y[0]=y[1]*(M[3]-M[1])/(M[2]-M[0]),w.uniforms.dataScale=p,w.uniforms.dataShift=f,w.uniforms.textScale=y,this.vbo.bind(),w.attributes.textCoordinate.pointer()}),m.update=function(l){var w,v,A,M,k,E=[],P=l.ticks,S=l.bounds;for(k=0;k<2;++k){var F=[Math.floor(E.length/3)],R=[-1/0],D=P[k];for(w=0;w<D.length;++w){var L=D[w],B=L.x,Z=L.font||"sans-serif";M=L.fontSize||12;for(var Y=1/(S[k+2]-S[k]),ee=S[k],Q=L.text.split("\n"),$=0;$<Q.length;$++)for(A=t(Z,Q[$]).data,v=0;v<A.length;v+=2)E.push(A[v]*M,-A[v+1]*M-$*M*1.2,(B-ee)*Y);F.push(Math.floor(E.length/3)),R.push(B)}this.tickOffset[k]=F,this.tickX[k]=R}for(k=0;k<2;++k){for(this.labelOffset[k]=Math.floor(E.length/3),A=t(l.labelFont[k],l.labels[k],{textAlign:"center"}).data,M=l.labelSize[k],w=0;w<A.length;w+=2)E.push(A[w]*M,-A[w+1]*M,0);this.labelCount[k]=Math.floor(E.length/3)-this.labelOffset[k]}for(this.titleOffset=Math.floor(E.length/3),A=t(l.titleFont,l.title).data,M=l.titleSize,w=0;w<A.length;w+=2)E.push(A[w]*M,-A[w+1]*M,0);this.titleCount=Math.floor(E.length/3)-this.titleOffset,this.vbo.update(E)},m.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(x,T,b){"use strict";T.exports=function(f){var p=f.gl,m=new d(p,e(p,[p.drawingBufferWidth,p.drawingBufferHeight]));return m.grid=r(m),m.text=t(m),m.line=a(m),m.box=n(m),m.update(f),m};var e=x("gl-select-static"),r=x("./lib/grid"),t=x("./lib/text"),a=x("./lib/line"),n=x("./lib/box");function d(f,p){this.gl=f,this.pickBuffer=p,this.screenBox=[0,0,f.drawingBufferWidth,f.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=d.prototype;function i(f){for(var p=f.slice(),y=0;y<p.length;++y)p[y]=p[y].slice();return p}function u(f,p){return f.x-p.x}s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){var f=this.gl,p=this.screenBox,y=this.viewBox,m=this.dataBox,l=this.pixelRatio,w=this.grid,v=this.line,A=this.text,M=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,f.bindFramebuffer(f.FRAMEBUFFER,null),f.enable(f.SCISSOR_TEST),f.disable(f.DEPTH_TEST),f.depthFunc(f.LESS),f.depthMask(!1),f.enable(f.BLEND),f.blendEquation(f.FUNC_ADD,f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA),this.borderColor){f.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]);var k=this.borderColor;f.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT)}f.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),f.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var E=this.backgroundColor;f.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),f.clear(f.COLOR_BUFFER_BIT),w.draw();var P=this.zeroLineEnable,S=this.zeroLineColor,F=this.zeroLineWidth;if(P[0]||P[1]){v.bind();for(var R=0;R<2;++R)if(P[R]&&m[R]<=0&&m[R+2]>=0){var D=p[R]-m[R]*(p[R+2]-p[R])/(m[R+2]-m[R]);0===R?v.drawLine(D,p[1],D,p[3],F[R],S[R]):v.drawLine(p[0],D,p[2],D,F[R],S[R])}}for(R=0;R<M.length;++R)M[R].draw();f.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]),f.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),this.grid.drawTickMarks(),v.bind();var L=this.borderLineEnable,B=this.borderLineWidth,V=this.borderLineColor;for(L[1]&&v.drawLine(y[0],y[1]-.5*B[1]*l,y[0],y[3]+.5*B[3]*l,B[1],V[1]),L[0]&&v.drawLine(y[0]-.5*B[0]*l,y[1],y[2]+.5*B[2]*l,y[1],B[0],V[0]),L[3]&&v.drawLine(y[2],y[1]-.5*B[1]*l,y[2],y[3]+.5*B[3]*l,B[3],V[3]),L[2]&&v.drawLine(y[0]-.5*B[0]*l,y[3],y[2]+.5*B[2]*l,y[3],B[2],V[2]),A.bind(),R=0;R<2;++R)A.drawTicks(R);this.titleEnable&&A.drawTitle();var Z=this.overlays;for(R=0;R<Z.length;++R)Z[R].draw();f.disable(f.SCISSOR_TEST),f.disable(f.BLEND),f.depthMask(!0)}},s.drawPick=function(){if(!this.static){var f=this.pickBuffer;this._pickTimeout=null,f.begin();for(var p=1,y=this.objects,m=0;m<y.length;++m)p=y[m].drawPick(p);f.end()}},s.pick=function(f,p){if(!this.static){var y=this.pixelRatio,m=this.pickPixelRatio,l=this.viewBox,w=0|Math.round((f-l[0]/y)*m),v=0|Math.round((p-l[1]/y)*m),A=this.pickBuffer.query(w,v,this.pickRadius);if(!A)return null;for(var M=A.id+(A.value[0]<<8)+(A.value[1]<<16)+(A.value[2]<<24),k=this.objects,E=0;E<k.length;++E){var P=k[E].pick(w,v,M);if(P)return P}return null}},s.setScreenBox=function(f){var p=this.screenBox,y=this.pixelRatio;p[0]=0|Math.round(f[0]*y),p[1]=0|Math.round(f[1]*y),p[2]=0|Math.round(f[2]*y),p[3]=0|Math.round(f[3]*y),this.setDirty()},s.setDataBox=function(f){var p=this.dataBox;(p[0]!==f[0]||p[1]!==f[1]||p[2]!==f[2]||p[3]!==f[3])&&(p[0]=f[0],p[1]=f[1],p[2]=f[2],p[3]=f[3],this.setDirty())},s.setViewBox=function(f){var p=this.pixelRatio,y=this.viewBox;y[0]=0|Math.round(f[0]*p),y[1]=0|Math.round(f[1]*p),y[2]=0|Math.round(f[2]*p),y[3]=0|Math.round(f[3]*p);var m=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((f[2]-f[0])*m),0|Math.round((f[3]-f[1])*m)],this.setDirty()},s.update=function(f){var p=this.gl;this.pixelRatio=(f=f||{}).pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(f.screenBox||[0,0,p.drawingBufferWidth/y,p.drawingBufferHeight/y]),this.setViewBox(f.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var m=this.viewBox,l=(m[2]-m[0])/(m[3]-m[1]);this.setDataBox(f.dataBox||[-10,-10/l,10,10/l]),this.borderColor=!1!==f.borderColor&&(f.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(f.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(f.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(f.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(f.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(f.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(f.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(f.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(f.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(f.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(f.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(f.titleCenter||[.5*(m[0]+m[2])/y,(m[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in f)||!!f.titleEnable,this.titleAngle=f.titleAngle||0,this.titleColor=(f.titleColor||[0,0,0,1]).slice(),this.labelPad=(f.labelPad||[15,15,15,15]).slice(),this.labelAngle=(f.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(f.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(f.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(f.tickPad||[15,15,15,15]).slice(),this.tickAngle=(f.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(f.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(f.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(f.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(f.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(f.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var w=f.ticks||[[],[]],v=this._tickBounds;v[0]=v[1]=1/0,v[2]=v[3]=-1/0;for(var A=0;A<2;++A){var M=w[A].slice(0);0!==M.length&&(M.sort(u),v[A]=Math.min(v[A],M[0].x),v[A+2]=Math.max(v[A+2],M[M.length-1].x))}this.grid.update({bounds:v,ticks:w}),this.text.update({bounds:v,ticks:w,labels:f.labels||["x","y"],labelSize:f.labelSize||[12,12],labelFont:f.labelFont||["sans-serif","sans-serif"],title:f.title||"",titleSize:f.titleSize||18,titleFont:f.titleFont||"sans-serif"}),this.static=!!f.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var f=this.objects.length-1;f>=0;--f)this.objects[f].dispose();for(this.objects.length=0,f=this.overlays.length-1;f>=0;--f)this.overlays[f].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(f){this.objects.indexOf(f)<0&&(this.objects.push(f),this.setDirty())},s.removeObject=function(f){for(var p=this.objects,y=0;y<p.length;++y)if(p[y]===f){p.splice(y,1),this.setDirty();break}},s.addOverlay=function(f){this.overlays.indexOf(f)<0&&(this.overlays.push(f),this.setOverlayDirty())},s.removeOverlay=function(f){for(var p=this.overlays,y=0;y<p.length;++y)if(p[y]===f){p.splice(y,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(x,T,b){"use strict";T.exports=function(s,i){s=s||document.body;var u=[.01,1/0];"distanceLimits"in(i=i||{})&&(u[0]=i.distanceLimits[0],u[1]=i.distanceLimits[1]),"zoomMin"in i&&(u[0]=i.zoomMin),"zoomMax"in i&&(u[1]=i.zoomMax);var f=r({center:i.center||[0,0,0],up:i.up||[0,1,0],eye:i.eye||[0,0,10],mode:i.mode||"orbit",distanceLimits:u}),p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,m=s.clientWidth,l=s.clientHeight,w={keyBindingMode:"rotate",enableWheel:!0,view:f,element:s,delay:i.delay||16,rotateSpeed:i.rotateSpeed||1,zoomSpeed:i.zoomSpeed||1,translateSpeed:i.translateSpeed||1,flipX:!!i.flipX,flipY:!!i.flipY,modes:f.modes,_ortho:i._ortho||i.projection&&"orthographic"===i.projection.type||!1,tick:function(){var v=e(),A=this.delay,M=v-2*A;f.idle(v-A),f.recalcMatrix(M),f.flush(v-(100+2*A));for(var k=!0,E=f.computedMatrix,P=0;P<16;++P)k=k&&p[P]===E[P],p[P]=E[P];var S=s.clientWidth===m&&s.clientHeight===l;return m=s.clientWidth,l=s.clientHeight,k?!S:(y=Math.exp(f.computedRadius[0]),!0)},lookAt:function(v,A,M){f.lookAt(f.lastT(),v,A,M)},rotate:function(v,A,M){f.rotate(f.lastT(),v,A,M)},pan:function(v,A,M){f.pan(f.lastT(),v,A,M)},translate:function(v,A,M){f.translate(f.lastT(),v,A,M)}};return Object.defineProperties(w,{matrix:{get:function(){return f.computedMatrix},set:function(v){return f.setMatrix(f.lastT(),v),f.computedMatrix},enumerable:!0},mode:{get:function(){return f.getMode()},set:function(v){var A=f.computedUp.slice(),M=f.computedEye.slice(),k=f.computedCenter.slice();if(f.setMode(v),"turntable"===v){var E=e();f._active.lookAt(E,M,k,A),f._active.lookAt(E+500,M,k,[0,0,1]),f._active.flush(E)}return f.getMode()},enumerable:!0},center:{get:function(){return f.computedCenter},set:function(v){return f.lookAt(f.lastT(),null,v),f.computedCenter},enumerable:!0},eye:{get:function(){return f.computedEye},set:function(v){return f.lookAt(f.lastT(),v),f.computedEye},enumerable:!0},up:{get:function(){return f.computedUp},set:function(v){return f.lookAt(f.lastT(),null,null,v),f.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(v){return f.setDistance(f.lastT(),v),v},enumerable:!0},distanceLimits:{get:function(){return f.getDistanceLimits(u)},set:function(v){return f.setDistanceLimits(v),v},enumerable:!0}}),s.addEventListener("contextmenu",function(v){return v.preventDefault(),!1}),w._lastX=-1,w._lastY=-1,w._lastMods={shift:!1,control:!1,alt:!1,meta:!1},w.enableMouseListeners=function(){function v(A,M,k,E){var P=w.keyBindingMode;if(!1!==P){var S="rotate"===P,F="pan"===P,R="zoom"===P,D=!!E.control,L=!!E.alt,B=!!E.shift,V=!!(1&A),Z=!!(2&A),Y=!!(4&A),ee=1/s.clientHeight,Q=ee*(M-w._lastX),$=ee*(k-w._lastY),K=w.flipX?1:-1,oe=w.flipY?1:-1,j=Math.PI*w.rotateSpeed,H=e();if(-1!==w._lastX&&-1!==w._lastY&&((S&&V&&!D&&!L&&!B||V&&!D&&!L&&B)&&f.rotate(H,K*j*Q,-oe*j*$,0),(F&&V&&!D&&!L&&!B||Z||V&&D&&!L&&!B)&&f.pan(H,-w.translateSpeed*Q*y,w.translateSpeed*$*y,0),R&&V&&!D&&!L&&!B||Y||V&&!D&&L&&!B)){var G=-w.zoomSpeed*$/window.innerHeight*(H-f.lastT())*100;f.pan(H,0,0,y*(Math.exp(G)-1))}return w._lastX=M,w._lastY=k,w._lastMods=E,!0}}w.mouseListener=t(s,v),s.addEventListener("touchstart",function(A){var M=n(A.changedTouches[0],s);v(0,M[0],M[1],w._lastMods),v(1,M[0],M[1],w._lastMods)},!!d&&{passive:!0}),s.addEventListener("touchmove",function(A){var M=n(A.changedTouches[0],s);v(1,M[0],M[1],w._lastMods),A.preventDefault()},!!d&&{passive:!1}),s.addEventListener("touchend",function(A){v(0,w._lastX,w._lastY,w._lastMods)},!!d&&{passive:!0}),w.wheelListener=a(s,function(A,M){if(!1!==w.keyBindingMode&&w.enableWheel){var k=w.flipX?1:-1,E=w.flipY?1:-1,P=e();if(Math.abs(A)>Math.abs(M))f.rotate(P,0,0,-A*k*Math.PI*w.rotateSpeed/window.innerWidth);else if(!w._ortho){var S=-w.zoomSpeed*E*M/window.innerHeight*(P-f.lastT())/20;f.pan(P,0,0,y*(Math.exp(S)-1))}}},!0)},w.enableMouseListeners(),w};var e=x("right-now"),r=x("3d-view"),t=x("mouse-change"),a=x("mouse-wheel"),n=x("mouse-event-offset"),d=x("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(x,T,b){var e=x("glslify"),r=x("gl-shader"),t=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);T.exports=function(n){return r(n,t,a,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(x,T,b){"use strict";var e=x("./camera.js"),r=x("gl-axes3d"),t=x("gl-axes3d/properties"),a=x("gl-spikes3d"),n=x("gl-select-static"),d=x("gl-fbo"),s=x("a-big-triangle"),i=x("mouse-change"),u=x("gl-mat4/perspective"),f=x("gl-mat4/ortho"),p=x("./lib/shader"),y=x("is-mobile")({tablet:!0,featureDetect:!0});function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function l(v){var A=Math.round(Math.log(Math.abs(v))/Math.log(10));if(A<0){var M=Math.round(Math.pow(10,-A));return Math.ceil(v*M)/M}return A>0?(M=Math.round(Math.pow(10,A)),Math.ceil(v/M)*M):Math.ceil(v)}function w(v){return"boolean"!=typeof v||v}T.exports={createScene:function(v){(v=v||{}).camera=v.camera||{};var A=v.canvas;A||(A=document.createElement("canvas"),v.container?v.container.appendChild(A):document.body.appendChild(A));var M=v.gl;if(M||(v.glOptions&&(y=!!v.glOptions.preserveDrawingBuffer),M=function(ge,we){var ke=null;try{(ke=ge.getContext("webgl",we))||(ke=ge.getContext("experimental-webgl",we))}catch(De){return null}return ke}(A,v.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:y})),!M)throw new Error("webgl not supported");var k=v.bounds||[[-10,-10,-10],[10,10,10]],E=new m,P=d(M,M.drawingBufferWidth,M.drawingBufferHeight,{preferFloat:!y}),S=p(M),F=v.cameraObject&&!0===v.cameraObject._ortho||v.camera.projection&&"orthographic"===v.camera.projection.type||!1,R={eye:v.camera.eye||[2,0,0],center:v.camera.center||[0,0,0],up:v.camera.up||[0,1,0],zoomMin:v.camera.zoomMax||.1,zoomMax:v.camera.zoomMin||100,mode:v.camera.mode||"turntable",_ortho:F},D=v.axes||{},L=r(M,D);L.enable=!D.disable;var V=a(M,v.spikes||{}),Z=[],Y=[],ee=[],Q=[],$=!0,K=!0,H={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},G=(K=!0,[M.drawingBufferWidth,M.drawingBufferHeight]),re=v.cameraObject||e(A,R),q={gl:M,contextLost:!1,pixelRatio:v.pixelRatio||1,canvas:A,selection:E,camera:re,axes:L,axesPixels:null,spikes:V,bounds:k,objects:Z,shape:G,aspect:v.aspectRatio||[1,1,1],pickRadius:v.pickRadius||10,zNear:v.zNear||.01,zFar:v.zFar||1e3,fovy:v.fovy||Math.PI/4,clearColor:v.clearColor||[0,0,0,0],autoResize:w(v.autoResize),autoBounds:w(v.autoBounds),autoScale:!!v.autoScale,autoCenter:w(v.autoCenter),clipToBounds:w(v.clipToBounds),snapToData:!!v.snapToData,onselect:v.onselect||null,onrender:v.onrender||null,onclick:v.onclick||null,cameraParams:H,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ge){this.aspect[0]=ge.x,this.aspect[1]=ge.y,this.aspect[2]=ge.z,K=!0},setBounds:function(ge,we){this.bounds[0][ge]=we.min,this.bounds[1][ge]=we.max},setClearColor:function(ge){this.clearColor=ge},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},te=[M.drawingBufferWidth/q.pixelRatio|0,M.drawingBufferHeight/q.pixelRatio|0];function ne(){if(!q._stopped&&q.autoResize){var ge=A.parentNode,we=1,ke=1;ge&&ge!==document.body?(we=ge.clientWidth,ke=ge.clientHeight):(we=window.innerWidth,ke=window.innerHeight);var De=0|Math.ceil(we*q.pixelRatio),Ee=0|Math.ceil(ke*q.pixelRatio);if(De!==A.width||Ee!==A.height){A.width=De,A.height=Ee;var Re=A.style;Re.position=Re.position||"absolute",Re.left="0px",Re.top="0px",Re.width=we+"px",Re.height=ke+"px",$=!0}}}function le(){for(var ge=Z.length,we=Q.length,ke=0;ke<we;++ke)ee[ke]=0;e:for(ke=0;ke<ge;++ke){var De=Z[ke],Ee=De.pickSlots;if(Ee){for(var Re=0;Re<we;++Re)if(ee[Re]+Ee<255){Y[ke]=Re,De.setPickBase(ee[Re]+1),ee[Re]+=Ee;continue e}var ve=n(M,G);Y[ke]=we,Q.push(ve),ee.push(Ee),De.setPickBase(1),we+=1}else Y[ke]=-1}for(;we>0&&0===ee[we-1];)ee.pop(),Q.pop().dispose()}function ue(){if(q.contextLost)return!0;M.isContextLost()&&(q.contextLost=!0,q.mouseListener.enabled=!1,q.selection.object=null,q.oncontextloss&&q.oncontextloss())}q.autoResize&&ne(),window.addEventListener("resize",ne),q.update=function(ge){q._stopped||(ge=ge||{},$=!0,K=!0)},q.add=function(ge){q._stopped||(ge.axes=L,Z.push(ge),Y.push(-1),$=!0,K=!0,le())},q.remove=function(ge){if(!q._stopped){var we=Z.indexOf(ge);we<0||(Z.splice(we,1),Y.pop(),$=!0,K=!0,le())}},q.dispose=function(){if(!q._stopped&&(q._stopped=!0,window.removeEventListener("resize",ne),A.removeEventListener("webglcontextlost",ue),q.mouseListener.enabled=!1,!q.contextLost)){L.dispose(),V.dispose();for(var ge=0;ge<Z.length;++ge)Z[ge].dispose();for(P.dispose(),ge=0;ge<Q.length;++ge)Q[ge].dispose();S.dispose(),M=null,L=null,V=null,Z=[]}},q._mouseRotating=!1,q._prevButtons=0,q.enableMouseListeners=function(){q.mouseListener=i(A,function(ge,we,ke){if(!q._stopped){var De=Q.length,Ee=Z.length,Re=E.object;E.distance=1/0,E.mouse[0]=we,E.mouse[1]=ke,E.object=null,E.screen=null,E.dataCoordinate=E.dataPosition=null;var ve=!1;if(ge&&q._prevButtons)q._mouseRotating=!0;else{q._mouseRotating&&(K=!0),q._mouseRotating=!1;for(var Te=0;Te<De;++Te){var Ie=Q[Te].query(we,te[1]-ke-1,q.pickRadius);if(Ie){if(Ie.distance>E.distance)continue;for(var Ce=0;Ce<Ee;++Ce){var Pe=Z[Ce];if(Y[Ce]===Te){var Ve=Pe.pick(Ie);Ve&&(E.buttons=ge,E.screen=Ie.coord,E.distance=Ie.distance,E.object=Pe,E.index=Ve.distance,E.dataPosition=Ve.position,E.dataCoordinate=Ve.dataCoordinate,E.data=Ve,ve=!0)}}}}}Re&&Re!==E.object&&(Re.highlight&&Re.highlight(null),$=!0),E.object&&(E.object.highlight&&E.object.highlight(E.data),$=!0),(ve=ve||E.object!==Re)&&q.onselect&&q.onselect(E),1&ge&&!(1&q._prevButtons)&&q.onclick&&q.onclick(E),q._prevButtons=ge}})},A.addEventListener("webglcontextlost",ue);var de=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],he=[de[0].slice(),de[1].slice()];function be(){if(!ue()){ne();var ge=q.camera.tick();H.view=q.camera.matrix,$=$||ge,K=K||ge,L.pixelRatio=q.pixelRatio,V.pixelRatio=q.pixelRatio;var we=Z.length,ke=de[0],De=de[1];ke[0]=ke[1]=ke[2]=1/0,De[0]=De[1]=De[2]=-1/0;for(var Ee=0;Ee<we;++Ee){($e=Z[Ee]).pixelRatio=q.pixelRatio,$e.axes=q.axes,$=$||!!$e.dirty,K=K||!!$e.dirty;var Re=$e.bounds;if(Re)for(var ve=Re[0],Te=Re[1],Ie=0;Ie<3;++Ie)ke[Ie]=Math.min(ke[Ie],ve[Ie]),De[Ie]=Math.max(De[Ie],Te[Ie])}var Ce=q.bounds;if(q.autoBounds)for(Ie=0;Ie<3;++Ie){if(De[Ie]<ke[Ie])ke[Ie]=-1,De[Ie]=1;else{ke[Ie]===De[Ie]&&(ke[Ie]-=1,De[Ie]+=1);var Pe=.05*(De[Ie]-ke[Ie]);ke[Ie]=ke[Ie]-Pe,De[Ie]=De[Ie]+Pe}Ce[0][Ie]=ke[Ie],Ce[1][Ie]=De[Ie]}var Ve=!1;for(Ie=0;Ie<3;++Ie)Ve=Ve||he[0][Ie]!==Ce[0][Ie]||he[1][Ie]!==Ce[1][Ie],he[0][Ie]=Ce[0][Ie],he[1][Ie]=Ce[1][Ie];if(K=K||Ve,$=$||Ve){if(Ve){var qe=[0,0,0];for(Ee=0;Ee<3;++Ee)qe[Ee]=l((Ce[1][Ee]-Ce[0][Ee])/10);L.update(L.autoTicks?{bounds:Ce,tickSpacing:qe}:{bounds:Ce})}var Je=M.drawingBufferWidth,lt=M.drawingBufferHeight;for(G[0]=Je,G[1]=lt,te[0]=0|Math.max(Je/q.pixelRatio,1),te[1]=0|Math.max(lt/q.pixelRatio,1),function(et,tt){var ft=et.bounds,bt=et.cameraParams,Ct=bt.projection,Vt=bt.model,ut=et.zNear,Rt=et.zFar,nn=et.fovy,cn=et.gl.drawingBufferWidth/et.gl.drawingBufferHeight;tt?(f(Ct,-cn,cn,-1,1,ut,Rt),bt._ortho=!0):(u(Ct,nn,cn,ut,Rt),bt._ortho=!1);for(var Ze=0;Ze<16;++Ze)Vt[Ze]=0;Vt[15]=1;var Qe=0;for(Ze=0;Ze<3;++Ze)Qe=Math.max(Qe,ft[1][Ze]-ft[0][Ze]);for(Ze=0;Ze<3;++Ze)Vt[5*Ze]=et.autoScale?et.aspect[Ze]/(ft[1][Ze]-ft[0][Ze]):1/Qe,et.autoCenter&&(Vt[12+Ze]=.5*-Vt[5*Ze]*(ft[0][Ze]+ft[1][Ze]))}(q,F),Ee=0;Ee<we;++Ee)($e=Z[Ee]).axesBounds=Ce,q.clipToBounds&&($e.clipBounds=Ce);E.object&&(V.position=q.snapToData?E.dataCoordinate:E.dataPosition,V.bounds=Ce),K&&(K=!1,function(){if(!ue()){M.colorMask(!0,!0,!0,!0),M.depthMask(!0),M.disable(M.BLEND),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL);for(var et=Z.length,tt=Q.length,ft=0;ft<tt;++ft){var bt=Q[ft];bt.shape=te,bt.begin();for(var Ct=0;Ct<et;++Ct)if(Y[Ct]===ft){var Vt=Z[Ct];Vt.drawPick&&(Vt.pixelRatio=1,Vt.drawPick(H))}bt.end()}}}()),q.axesPixels=t(q.axes,H,Je,lt),q.onrender&&q.onrender(),M.bindFramebuffer(M.FRAMEBUFFER,null),M.viewport(0,0,Je,lt),q.clearRGBA(),M.depthMask(!0),M.colorMask(!0,!0,!0,!0),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.disable(M.BLEND),M.disable(M.CULL_FACE);var He=!1;for(L.enable&&(He=He||L.isTransparent(),L.draw(H)),V.axes=L,E.object&&V.draw(H),M.disable(M.CULL_FACE),Ee=0;Ee<we;++Ee)($e=Z[Ee]).axes=L,$e.pixelRatio=q.pixelRatio,$e.isOpaque&&$e.isOpaque()&&$e.draw(H),$e.isTransparent&&$e.isTransparent()&&(He=!0);if(He){for(P.shape=G,P.bind(),M.clear(M.DEPTH_BUFFER_BIT),M.colorMask(!1,!1,!1,!1),M.depthMask(!0),M.depthFunc(M.LESS),L.enable&&L.isTransparent()&&L.drawTransparent(H),Ee=0;Ee<we;++Ee)($e=Z[Ee]).isOpaque&&$e.isOpaque()&&$e.draw(H);for(M.enable(M.BLEND),M.blendEquation(M.FUNC_ADD),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.colorMask(!0,!0,!0,!0),M.depthMask(!1),M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),L.isTransparent()&&L.drawTransparent(H),Ee=0;Ee<we;++Ee){var $e;($e=Z[Ee]).isTransparent&&$e.isTransparent()&&$e.drawTransparent(H)}M.bindFramebuffer(M.FRAMEBUFFER,null),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.disable(M.DEPTH_TEST),S.bind(),P.color[0].bind(0),S.uniforms.accumBuffer=0,s(M),M.disable(M.BLEND)}for($=!1,Ee=0;Ee<we;++Ee)Z[Ee].dirty=!1}}}return q.enableMouseListeners(),function ge(){q._stopped||q.contextLost||(be(),requestAnimationFrame(ge))}(),q.redraw=function(){q._stopped||($=!0,be())},q},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(x,T,b){var e=x("glslify");b.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),b.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),b.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),b.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(x,T,b){"use strict";var e=x("gl-shader"),r=x("gl-buffer"),t=x("typedarray-pool"),a=x("./lib/shader");function n(u,f,p,y,m){this.plot=u,this.offsetBuffer=f,this.pickBuffer=p,this.shader=y,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}T.exports=function(u,f){var p=u.gl,v=new n(u,r(p),r(p),e(p,a.pointVertex,a.pointFragment),e(p,a.pickVertex,a.pickFragment));return v.update(f),u.addObject(v),v};var d,s,i=n.prototype;i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},i.update=function(u){var f;function p(M,k){return M in u?u[M]:k}u=u||{},this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var y=u.positions.length>>>1,m=u.positions instanceof Float32Array,l=u.idToIndex instanceof Int32Array&&u.idToIndex.length>=y,w=u.positions,v=m?w:t.mallocFloat32(w.length),A=l?u.idToIndex:t.mallocInt32(y);if(m||v.set(w),!l)for(v.set(w),f=0;f<y;f++)A[f]=f;this.points=w,this.offsetBuffer.update(v),this.pickBuffer.update(A),m||t.free(v),l||t.free(A),this.pointCount=y,this.pickOffset=0},i.unifiedDraw=(d=[1,0,0,0,1,0,0,0,1],s=[0,0,0,0],function(u){var f=void 0!==u,p=f?this.pickShader:this.shader,y=this.plot.gl,m=this.plot.dataBox;if(0===this.pointCount)return u;var l=m[2]-m[0],w=m[3]-m[1],v=function(E,P){var S,F=0,R=E.length>>>1;for(S=0;S<R;S++){var D=E[2*S],L=E[2*S+1];D>=P[0]&&D<=P[2]&&L>=P[1]&&L<=P[3]&&F++}return F}(this.points,m),A=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(v,.33333)));d[0]=2/l,d[4]=2/w,d[6]=-2*m[0]/l-1,d[7]=-2*m[1]/w-1,this.offsetBuffer.bind(),p.bind(),p.attributes.position.pointer(),p.uniforms.matrix=d,p.uniforms.color=this.color,p.uniforms.borderColor=this.borderColor,p.uniforms.pointCloud=A<5,p.uniforms.pointSize=A,p.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),f&&(s[0]=255&u,s[1]=u>>8&255,s[2]=u>>16&255,s[3]=u>>24&255,this.pickBuffer.bind(),p.attributes.pickId.pointer(y.UNSIGNED_BYTE),p.uniforms.pickOffset=s,this.pickOffset=u);var M=y.getParameter(y.BLEND),k=y.getParameter(y.DITHER);return M&&!this.blend&&y.disable(y.BLEND),k&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),M&&!this.blend&&y.enable(y.BLEND),k&&y.enable(y.DITHER),u+this.pointCount}),i.draw=i.unifiedDraw,i.drawPick=i.unifiedDraw,i.pick=function(u,f,p){var y=this.pickOffset;if(p<y||p>=y+this.pointCount)return null;var l=p-y,w=this.points;return{object:this,pointId:l,dataCoord:[w[2*l],w[2*l+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(x,T,b){T.exports=function(e,r,t,a){var n,d,s,i,u,f=r[0],p=r[1],y=r[2],m=r[3],l=t[0],w=t[1],v=t[2],A=t[3];return(d=f*l+p*w+y*v+m*A)<0&&(d=-d,l=-l,w=-w,v=-v,A=-A),1-d>1e-6?(n=Math.acos(d),s=Math.sin(n),i=Math.sin((1-a)*n)/s,u=Math.sin(a*n)/s):(i=1-a,u=a),e[0]=i*f+u*l,e[1]=i*p+u*w,e[2]=i*y+u*v,e[3]=i*m+u*A,e}},{}],125:[function(x,T,b){"use strict";T.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(x,T,b){"use strict";var e=x("vectorize-text");T.exports=function(t,a,n){var d=r[a];if(d||(d=r[a]={}),t in d)return d[t];var s={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},i=e(t,s);s.triangles=!1;var u,f,p=e(t,s);if(n&&1!==n){for(u=0;u<i.positions.length;++u)for(f=0;f<i.positions[u].length;++f)i.positions[u][f]/=n;for(u=0;u<p.positions.length;++u)for(f=0;f<p.positions[u].length;++f)p.positions[u][f]/=n}var y=[[1/0,1/0],[-1/0,-1/0]],m=p.positions.length;for(u=0;u<m;++u){var l=p.positions[u];for(f=0;f<2;++f)y[0][f]=Math.min(y[0][f],l[f]),y[1][f]=Math.max(y[1][f],l[f])}return d[t]=[i,p,y]};var r={}},{"vectorize-text":311}],127:[function(x,T,b){var e=x("gl-shader"),r=x("glslify"),t=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),n=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),d=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],u={vertex:t,fragment:d,attributes:i},f={vertex:a,fragment:d,attributes:i},p={vertex:n,fragment:d,attributes:i},y={vertex:t,fragment:s,attributes:i},m={vertex:a,fragment:s,attributes:i},l={vertex:n,fragment:s,attributes:i};function w(v,A){var M=e(v,A),k=M.attributes;return k.position.location=0,k.color.location=1,k.glyph.location=2,k.id.location=3,M}b.createPerspective=function(v){return w(v,u)},b.createOrtho=function(v){return w(v,f)},b.createProject=function(v){return w(v,p)},b.createPickPerspective=function(v){return w(v,y)},b.createPickOrtho=function(v){return w(v,m)},b.createPickProject=function(v){return w(v,l)}},{"gl-shader":132,glslify:231}],128:[function(x,T,b){"use strict";var e=x("is-string-blank"),r=x("gl-buffer"),t=x("gl-vao"),a=x("typedarray-pool"),n=x("gl-mat4/multiply"),d=x("./lib/shaders"),s=x("./lib/glyphs"),i=x("./lib/get-simple-string"),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(ee,Q){var $=ee[0],K=ee[1],oe=ee[2],j=ee[3];return ee[0]=Q[0]*$+Q[4]*K+Q[8]*oe+Q[12]*j,ee[1]=Q[1]*$+Q[5]*K+Q[9]*oe+Q[13]*j,ee[2]=Q[2]*$+Q[6]*K+Q[10]*oe+Q[14]*j,ee[3]=Q[3]*$+Q[7]*K+Q[11]*oe+Q[15]*j,ee}function p(ee,Q,$,K){return f(K,K),f(K,K),f(K,K)}function y(ee,Q){this.index=ee,this.dataCoordinate=this.position=Q}function m(ee){return!0===ee||ee>1?1:ee}function l(ee,Q,$,K,oe,j,H,G,re,q,te,ne){this.gl=ee,this.pixelRatio=1,this.shader=Q,this.orthoShader=$,this.projectShader=K,this.pointBuffer=oe,this.colorBuffer=j,this.glyphBuffer=H,this.idBuffer=G,this.vao=re,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=q,this.pickOrthoShader=te,this.pickProjectShader=ne,this.points=[],this._selectResult=new y(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}T.exports=function(ee){var Q=ee.gl,$=d.createPerspective(Q),K=d.createOrtho(Q),oe=d.createProject(Q),j=d.createPickPerspective(Q),H=d.createPickOrtho(Q),G=d.createPickProject(Q),re=r(Q),q=r(Q),te=r(Q),ne=r(Q),ue=new l(Q,$,K,oe,re,q,te,ne,t(Q,[{buffer:re,size:3,type:Q.FLOAT},{buffer:q,size:4,type:Q.FLOAT},{buffer:te,size:2,type:Q.FLOAT},{buffer:ne,size:4,type:Q.UNSIGNED_BYTE,normalized:!0}]),j,H,G);return ue.update(ee),ue};var w=l.prototype;w.pickSlots=1,w.setPickBase=function(ee){this.pickId=ee},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var ee=0;ee<3;++ee)if(this.axesProject[ee]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var ee=0;ee<3;++ee)if(this.axesProject[ee]&&!this.projectHasAlpha)return!0;return!1};var v=[0,0],A=[0,0,0],M=[0,0,0],k=[0,0,0,1],E=[0,0,0,1],P=u.slice(),S=[0,0,0],F=[[0,0,0],[0,0,0]];function R(ee){return ee[0]=ee[1]=ee[2]=0,ee}function D(ee,Q){return ee[0]=Q[0],ee[1]=Q[1],ee[2]=Q[2],ee[3]=1,ee}function L(ee,Q,$,K){return ee[0]=Q[0],ee[1]=Q[1],ee[2]=Q[2],ee[$]=K,ee}var V=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function Z(ee,Q,$,K,oe,j,H){var G=$.gl;if((j===$.projectHasAlpha||H)&&function(ee,Q,$,K){var oe,j=Q.axesProject,H=Q.gl,G=ee.uniforms,re=$.model||u,q=$.view||u,te=$.projection||u,ne=Q.axesBounds,le=function(Ce){for(var Pe=F,Ve=0;Ve<2;++Ve)for(var qe=0;qe<3;++qe)Pe[Ve][qe]=Math.max(Math.min(Ce[Ve][qe],1e8),-1e8);return Pe}(Q.clipBounds);oe=Q.axes&&Q.axes.lastCubeProps?Q.axes.lastCubeProps.axis:[1,1,1],v[0]=2/H.drawingBufferWidth,v[1]=2/H.drawingBufferHeight,ee.bind(),G.view=q,G.projection=te,G.screenSize=v,G.highlightId=Q.highlightId,G.highlightScale=Q.highlightScale,G.clipBounds=le,G.pickGroup=Q.pickId/255,G.pixelRatio=K;for(var ue=0;ue<3;++ue)if(j[ue]){G.scale=Q.projectScale[ue],G.opacity=Q.projectOpacity[ue];for(var de=P,he=0;he<16;++he)de[he]=0;for(he=0;he<4;++he)de[5*he]=1;de[5*ue]=0,de[12+ue]=oe[ue]<0?ne[0][ue]:ne[1][ue],n(de,re,de),G.model=de;var be=(ue+1)%3,ge=(ue+2)%3,we=R(A),ke=R(M);we[be]=1,ke[ge]=1;var De=p(0,0,0,D(k,we)),Ee=p(0,0,0,D(E,ke));if(Math.abs(De[1])>Math.abs(Ee[1])){var Re=De;De=Ee,Ee=Re,Re=we,we=ke,ke=Re;var ve=be;be=ge,ge=ve}De[0]<0&&(we[be]=-1),Ee[1]>0&&(ke[ge]=-1);var Te=0,Ie=0;for(he=0;he<4;++he)Te+=Math.pow(re[4*be+he],2),Ie+=Math.pow(re[4*ge+he],2);we[be]/=Math.sqrt(Te),ke[ge]/=Math.sqrt(Ie),G.axes[0]=we,G.axes[1]=ke,G.fragClipBounds[0]=L(S,le[0],ue,-1e8),G.fragClipBounds[1]=L(S,le[1],ue,1e8),Q.vao.bind(),Q.vao.draw(H.TRIANGLES,Q.vertexCount),Q.lineWidth>0&&(H.lineWidth(Q.lineWidth*K),Q.vao.draw(H.LINES,Q.lineVertexCount,Q.vertexCount)),Q.vao.unbind()}}(Q,$,K,oe),j===$.hasAlpha||H){ee.bind();var re=ee.uniforms;re.model=K.model||u,re.view=K.view||u,re.projection=K.projection||u,v[0]=2/G.drawingBufferWidth,v[1]=2/G.drawingBufferHeight,re.screenSize=v,re.highlightId=$.highlightId,re.highlightScale=$.highlightScale,re.fragClipBounds=V,re.clipBounds=$.axes.bounds,re.opacity=$.opacity,re.pickGroup=$.pickId/255,re.pixelRatio=oe,$.vao.bind(),$.vao.draw(G.TRIANGLES,$.vertexCount),$.lineWidth>0&&(G.lineWidth($.lineWidth*oe),$.vao.draw(G.LINES,$.lineVertexCount,$.vertexCount)),$.vao.unbind()}}function Y(ee,Q,$,K){var oe;oe=Array.isArray(ee)?Q<ee.length?ee[Q]:void 0:ee,oe=i(oe);var j=!0;e(oe)&&(oe="\u25bc",j=!1);var H=s(oe,$,K);return{mesh:H[0],lines:H[1],bounds:H[2],visible:j}}w.draw=function(ee){Z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,ee,this.pixelRatio,!1,!1)},w.drawTransparent=function(ee){Z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,ee,this.pixelRatio,!0,!1)},w.drawPick=function(ee){Z(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,ee,1,!0,!0)},w.pick=function(ee){if(!ee||ee.id!==this.pickId)return null;var Q=ee.value[2]+(ee.value[1]<<8)+(ee.value[0]<<16);if(Q>=this.pointCount||Q<0)return null;var $=this.points[Q],K=this._selectResult;K.index=Q;for(var oe=0;oe<3;++oe)K.position[oe]=K.dataCoordinate[oe]=$[oe];return K},w.highlight=function(ee){if(ee){var Q=ee.index;this.highlightId=[(255&Q)/255,(Q>>8&255)/255,(Q>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(ee){if("perspective"in(ee=ee||{})&&(this.useOrtho=!ee.perspective),"orthographic"in ee&&(this.useOrtho=!!ee.orthographic),"lineWidth"in ee&&(this.lineWidth=ee.lineWidth),"project"in ee)if(Array.isArray(ee.project))this.axesProject=ee.project;else{var Q=!!ee.project;this.axesProject=[Q,Q,Q]}if("projectScale"in ee)if(Array.isArray(ee.projectScale))this.projectScale=ee.projectScale.slice();else{var $=+ee.projectScale;this.projectScale=[$,$,$]}if(this.projectHasAlpha=!1,"projectOpacity"in ee){this.projectOpacity=Array.isArray(ee.projectOpacity)?ee.projectOpacity.slice():[$=+ee.projectOpacity,$,$];for(var K=0;K<3;++K)this.projectOpacity[K]=m(this.projectOpacity[K]),this.projectOpacity[K]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in ee&&(this.opacity=m(ee.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var oe,j,H=ee.position,G=ee.font||"normal",re=ee.alignment||[0,0];if(2===re.length)oe=re[0],j=re[1];else for(oe=[],j=[],K=0;K<re.length;++K)oe[K]=re[K][0],j[K]=re[K][1];var q=[1/0,1/0,1/0],te=[-1/0,-1/0,-1/0],ne=ee.glyph,le=ee.color,ue=ee.size,de=ee.angle,he=ee.lineColor,be=-1,ge=0,we=0,ke=0;if(H.length){ke=H.length;e:for(K=0;K<ke;++K){for(var De=H[K],Ee=0;Ee<3;++Ee)if(isNaN(De[Ee])||!isFinite(De[Ee]))continue e;var Re=(ft=Y(ne,K,G,this.pixelRatio)).mesh,ve=ft.lines,Te=ft.bounds;ge+=3*Re.cells.length,we+=2*ve.edges.length}}var Ie=ge+we,Ce=a.mallocFloat(3*Ie),Pe=a.mallocFloat(4*Ie),Ve=a.mallocFloat(2*Ie),qe=a.mallocUint32(Ie);if(Ie>0){var Je=0,lt=ge,He=[0,0,0,1],$e=[0,0,0,1],et=Array.isArray(le)&&Array.isArray(le[0]),tt=Array.isArray(he)&&Array.isArray(he[0]);e:for(K=0;K<ke;++K){for(be+=1,De=H[K],Ee=0;Ee<3;++Ee){if(isNaN(De[Ee])||!isFinite(De[Ee]))continue e;te[Ee]=Math.max(te[Ee],De[Ee]),q[Ee]=Math.min(q[Ee],De[Ee])}Re=(ft=Y(ne,K,G,this.pixelRatio)).mesh,ve=ft.lines,Te=ft.bounds;var ft,bt=ft.visible;if(bt)if(Array.isArray(le)){if(3===(Ct=et?K<le.length?le[K]:[0,0,0,0]:le).length){for(Ee=0;Ee<3;++Ee)He[Ee]=Ct[Ee];He[3]=1}else if(4===Ct.length){for(Ee=0;Ee<4;++Ee)He[Ee]=Ct[Ee];!this.hasAlpha&&Ct[3]<1&&(this.hasAlpha=!0)}}else He[0]=He[1]=He[2]=0,He[3]=1;else He=[1,1,1,0];if(bt)if(Array.isArray(he)){var Ct;if(3===(Ct=tt?K<he.length?he[K]:[0,0,0,0]:he).length){for(Ee=0;Ee<3;++Ee)$e[Ee]=Ct[Ee];$e[Ee]=1}else if(4===Ct.length){for(Ee=0;Ee<4;++Ee)$e[Ee]=Ct[Ee];!this.hasAlpha&&Ct[3]<1&&(this.hasAlpha=!0)}}else $e[0]=$e[1]=$e[2]=0,$e[3]=1;else $e=[1,1,1,0];var Vt=.5;bt?Array.isArray(ue)?Vt=K<ue.length?+ue[K]:12:ue?Vt=+ue:this.useOrtho&&(Vt=12):Vt=0;var Ft=0;Array.isArray(de)?Ft=K<de.length?+de[K]:0:de&&(Ft=+de);var ht=Math.cos(Ft),ut=Math.sin(Ft);for(De=H[K],Ee=0;Ee<3;++Ee)te[Ee]=Math.max(te[Ee],De[Ee]),q[Ee]=Math.min(q[Ee],De[Ee]);var Rt=oe,nn=j;Rt=0,Array.isArray(oe)?Rt=K<oe.length?oe[K]:0:oe&&(Rt=oe),nn=0,Array.isArray(j)?nn=K<j.length?j[K]:0:j&&(nn=j);var cn=[Rt*=Rt>0?1-Te[0][0]:Rt<0?1+Te[1][0]:1,nn*=nn>0?1-Te[0][1]:nn<0?1+Te[1][1]:1],Ze=Re.cells||[],Qe=Re.positions||[];for(Ee=0;Ee<Ze.length;++Ee)for(var Ge=Ze[Ee],rt=0;rt<3;++rt){for(var Le=0;Le<3;++Le)Ce[3*Je+Le]=De[Le];for(Le=0;Le<4;++Le)Pe[4*Je+Le]=He[Le];qe[Je]=be;var ze=Qe[Ge[rt]];Ve[2*Je]=Vt*(ht*ze[0]-ut*ze[1]+cn[0]),Ve[2*Je+1]=Vt*(ut*ze[0]+ht*ze[1]+cn[1]),Je+=1}for(Ze=ve.edges,Qe=ve.positions,Ee=0;Ee<Ze.length;++Ee)for(Ge=Ze[Ee],rt=0;rt<2;++rt){for(Le=0;Le<3;++Le)Ce[3*lt+Le]=De[Le];for(Le=0;Le<4;++Le)Pe[4*lt+Le]=$e[Le];qe[lt]=be,Ve[2*lt]=Vt*(ht*(ze=Qe[Ge[rt]])[0]-ut*ze[1]+cn[0]),Ve[2*lt+1]=Vt*(ut*ze[0]+ht*ze[1]+cn[1]),lt+=1}}}this.bounds=[q,te],this.points=H,this.pointCount=H.length,this.vertexCount=ge,this.lineVertexCount=we,this.pointBuffer.update(Ce),this.colorBuffer.update(Pe),this.glyphBuffer.update(Ve),this.idBuffer.update(qe),a.free(Ce),a.free(Pe),a.free(Ve),a.free(qe)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(x,T,b){"use strict";var e=x("glslify");b.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),b.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(x,T,b){"use strict";var e=x("gl-shader"),r=x("gl-buffer"),t=x("./lib/shaders");function a(d,s,i){this.plot=d,this.boxBuffer=s,this.boxShader=i,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}T.exports=function(d,s){var i=d.gl,p=new a(d,r(i,[0,0,0,1,1,0,1,1]),e(i,t.boxVertex,t.boxFragment));return p.update(s),d.addOverlay(p),p};var n=a.prototype;n.draw=function(){if(this.enabled){var d=this.plot,s=this.selectBox,i=this.borderWidth,u=this.innerColor,f=this.outerColor,p=this.borderColor,y=d.box,m=d.screenBox,l=d.dataBox,w=d.viewBox,v=d.pixelRatio,A=(s[0]-l[0])*(w[2]-w[0])/(l[2]-l[0])+w[0],M=(s[1]-l[1])*(w[3]-w[1])/(l[3]-l[1])+w[1],k=(s[2]-l[0])*(w[2]-w[0])/(l[2]-l[0])+w[0],E=(s[3]-l[1])*(w[3]-w[1])/(l[3]-l[1])+w[1];if(A=Math.max(A,w[0]),M=Math.max(M,w[1]),k=Math.min(k,w[2]),E=Math.min(E,w[3]),!(k<A||E<M)){y.bind();var P=m[2]-m[0],S=m[3]-m[1];if(this.outerFill&&(y.drawBox(0,0,P,M,f),y.drawBox(0,M,A,E,f),y.drawBox(0,E,P,S,f),y.drawBox(k,M,P,E,f)),this.innerFill&&y.drawBox(A,M,k,E,u),i>0){var F=i*v;y.drawBox(A-F,M-F,k+F,M+F,p),y.drawBox(A-F,E-F,k+F,E+F,p),y.drawBox(A-F,M-F,A+F,E+F,p),y.drawBox(k-F,M-F,k+F,E+F,p)}}}},n.update=function(d){this.innerFill=!!(d=d||{}).innerFill,this.outerFill=!!d.outerFill,this.innerColor=(d.innerColor||[0,0,0,.5]).slice(),this.outerColor=(d.outerColor||[0,0,0,.5]).slice(),this.borderColor=(d.borderColor||[0,0,0,1]).slice(),this.borderWidth=d.borderWidth||0,this.selectBox=(d.selectBox||this.selectBox).slice()},n.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(x,T,b){"use strict";T.exports=function(i,u){var f=u[0],p=u[1];return new d(i,e(i,f,p,{}),r.mallocUint8(f*p*4))};var e=x("gl-fbo"),r=x("typedarray-pool"),t=x("ndarray"),a=x("bit-twiddle").nextPow2;function n(i,u,f,p,y){this.coord=[i,u],this.id=f,this.value=p,this.distance=y}function d(i,u,f){this.gl=i,this.fbo=u,this.buffer=f,this._readTimeout=null;var p=this;this._readCallback=function(){p.gl&&(u.bind(),i.readPixels(0,0,u.shape[0],u.shape[1],i.RGBA,i.UNSIGNED_BYTE,p.buffer),p._readTimeout=null)}}var s=d.prototype;Object.defineProperty(s,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(i){if(this.gl){this.fbo.shape=i;var u=this.fbo.shape[0],f=this.fbo.shape[1];if(f*u*4>this.buffer.length){r.free(this.buffer);for(var p=this.buffer=r.mallocUint8(a(f*u*4)),y=0;y<f*u*4;++y)p[y]=255}return i}}}),s.begin=function(){var i=this.gl;i&&(this.fbo.bind(),i.clearColor(1,1,1,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT))},s.end=function(){var i=this.gl;i&&(i.bindFramebuffer(i.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},s.query=function(i,u,f){if(!this.gl)return null;var p=this.fbo.shape.slice();i|=0,u|=0,"number"!=typeof f&&(f=1);var y=0|Math.min(Math.max(i-f,0),p[0]),m=0|Math.min(Math.max(i+f,0),p[0]),l=0|Math.min(Math.max(u-f,0),p[1]),w=0|Math.min(Math.max(u+f,0),p[1]);if(m<=y||w<=l)return null;var v=[m-y,w-l],A=t(this.buffer,[v[0],v[1],4],[4,4*p[0],1],4*(y+p[0]*l)),M=function(P,S,F){for(var R=1e8,D=-1,L=-1,B=P.shape[0],V=P.shape[1],Z=0;Z<B;Z++)for(var Y=0;Y<V;Y++){var ee=P.get(Z,Y,0),Q=P.get(Z,Y,1),$=P.get(Z,Y,2),K=P.get(Z,Y,3);if(ee<255||Q<255||$<255||K<255){var oe=S-Z,j=F-Y,H=oe*oe+j*j;H<R&&(R=H,D=Z,L=Y)}}return[D,L,R]}(A.hi(v[0],v[1],1),f,f),k=M[0],E=M[1];return k<0||Math.pow(this.radius,2)<M[2]?null:new n(k+y|0,E+l|0,A.get(k,E,0),[A.get(k,E,1),A.get(k,E,2),A.get(k,E,3)],Math.sqrt(M[2]))},s.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(x,T,b){"use strict";var e=x("./lib/create-uniforms"),r=x("./lib/create-attributes"),t=x("./lib/reflect"),a=x("./lib/shader-cache"),n=x("./lib/runtime-reflect"),d=x("./lib/GLError");function s(f){this.gl=f,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var i=s.prototype;function u(f,p){return f.name<p.name?-1:1}i.bind=function(){var f;this.program||this._relink();var p=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(p>y)for(f=y;f<p;f++)this.gl.enableVertexAttribArray(f);else if(y>p)for(f=p;f<y;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=p,this.gl.useProgram(this.program)},i.dispose=function(){for(var f=this.gl.lastAttribCount,p=0;p<f;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},i.update=function(f,p,y,m){if(!p||1===arguments.length){var l=f;f=l.vertex,p=l.fragment,y=l.uniforms,m=l.attributes}var w=this,v=w.gl,A=w._vref;w._vref=a.shader(v,v.VERTEX_SHADER,f),A&&A.dispose(),w.vertShader=w._vref.shader;var M=this._fref;if(w._fref=a.shader(v,v.FRAGMENT_SHADER,p),M&&M.dispose(),w.fragShader=w._fref.shader,!y||!m){var k=v.createProgram();if(v.attachShader(k,w.fragShader),v.attachShader(k,w.vertShader),v.linkProgram(k),!v.getProgramParameter(k,v.LINK_STATUS)){var E=v.getProgramInfoLog(k);throw new d(E,"Error linking program:"+E)}y=y||n.uniforms(v,k),m=m||n.attributes(v,k),v.deleteProgram(k)}(m=m.slice()).sort(u);var P,S=[],F=[],R=[];for(P=0;P<m.length;++P){var D=m[P];if(D.type.indexOf("mat")>=0){for(var L=0|D.type.charAt(D.type.length-1),B=new Array(L),V=0;V<L;++V)B[V]=R.length,F.push(D.name+"["+V+"]"),"number"==typeof D.location?R.push(D.location+V):Array.isArray(D.location)&&D.location.length===L&&"number"==typeof D.location[V]?R.push(0|D.location[V]):R.push(-1);S.push({name:D.name,type:D.type,locations:B})}else S.push({name:D.name,type:D.type,locations:[R.length]}),F.push(D.name),R.push("number"==typeof D.location?0|D.location:-1)}var Z=0;for(P=0;P<R.length;++P)if(R[P]<0){for(;R.indexOf(Z)>=0;)Z+=1;R[P]=Z}var Y=new Array(y.length);function ee(){w.program=a.program(v,w._vref,w._fref,F,R);for(var Q=0;Q<y.length;++Q)Y[Q]=v.getUniformLocation(w.program,y[Q].name)}ee(),w._relink=ee,w.types={uniforms:t(y),attributes:t(m)},w.attributes=r(v,w,S,R),Object.defineProperty(w,"uniforms",e(v,w,y,Y))},T.exports=function(f,p,y,m,l){var w=new s(f);return w.update(p,y,m,l),w}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(x,T,b){function e(r,t,a){this.shortMessage=t||"",this.longMessage=a||"",this.rawError=r||"",this.message="gl-shader: "+(t||r||"")+(a?"\n"+a:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,T.exports=e},{}],134:[function(x,T,b){"use strict";T.exports=function(s,i,u,f){for(var p={},y=0,m=u.length;y<m;++y){var l=u[y],w=l.name,v=l.type,A=l.locations;switch(v){case"bool":case"int":case"float":n(s,i,A[0],f,1,p,w);break;default:if(v.indexOf("vec")>=0){if((M=v.charCodeAt(v.length-1)-48)<2||M>4)throw new e("","Invalid data type for attribute "+w+": "+v);n(s,i,A[0],f,M,p,w)}else{if(!(v.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+w+": "+v);var M;if((M=v.charCodeAt(v.length-1)-48)<2||M>4)throw new e("","Invalid data type for attribute "+w+": "+v);d(s,i,A,f,M,p,w)}}}return p};var e=x("./GLError");function r(s,i,u,f,p,y){this._gl=s,this._wrapper=i,this._index=u,this._locations=f,this._dimension=p,this._constFunc=y}var t=r.prototype;t.pointer=function(s,i,u,f){var p=this._gl,y=this._locations[this._index];p.vertexAttribPointer(y,this._dimension,s||p.FLOAT,!!i,u||0,f||0),p.enableVertexAttribArray(y)},t.set=function(s,i,u,f){return this._constFunc(this._locations[this._index],s,i,u,f)},Object.defineProperty(t,"location",{get:function(){return this._locations[this._index]},set:function(s){return s!==this._locations[this._index]&&(this._locations[this._index]=0|s,this._wrapper.program=null),0|s}});var a=[function(s,i,u){return void 0===u.length?s.vertexAttrib1f(i,u):s.vertexAttrib1fv(i,u)},function(s,i,u,f){return void 0===u.length?s.vertexAttrib2f(i,u,f):s.vertexAttrib2fv(i,u)},function(s,i,u,f,p){return void 0===u.length?s.vertexAttrib3f(i,u,f,p):s.vertexAttrib3fv(i,u)},function(s,i,u,f,p,y){return void 0===u.length?s.vertexAttrib4f(i,u,f,p,y):s.vertexAttrib4fv(i,u)}];function n(s,i,u,f,p,y,m){var l=a[p],w=new r(s,i,u,f,p,l);Object.defineProperty(y,m,{set:function(v){return s.disableVertexAttribArray(f[u]),l(s,f[u],v),v},get:function(){return w},enumerable:!0})}function d(s,i,u,f,p,y,m){for(var l=new Array(p),w=new Array(p),v=0;v<p;++v)n(s,i,u[v],f,p,l,v),w[v]=l[v];Object.defineProperty(l,"location",{set:function(k){if(Array.isArray(k))for(var E=0;E<p;++E)w[E].location=k[E];else for(E=0;E<p;++E)w[E].location=k+E;return k},get:function(){for(var k=new Array(p),E=0;E<p;++E)k[E]=f[u[E]];return k},enumerable:!0}),l.pointer=function(k,E,P,S){k=k||s.FLOAT,E=!!E,P=P||p*p,S=S||0;for(var F=0;F<p;++F){var R=f[u[F]];s.vertexAttribPointer(R,p,k,E,P,S+F*p),s.enableVertexAttribArray(R)}};var A=new Array(p),M=s["vertexAttrib"+p+"fv"];Object.defineProperty(y,m,{set:function(k){for(var E=0;E<p;++E){var P=f[u[E]];if(s.disableVertexAttribArray(P),Array.isArray(k[0]))M.call(s,P,k[E]);else{for(var S=0;S<p;++S)A[S]=k[p*E+S];M.call(s,P,A)}}return k},get:function(){return l},enumerable:!0})}},{"./GLError":133}],135:[function(x,T,b){"use strict";var e=x("./reflect"),r=x("./GLError");function t(n){return function(){return n}}function a(n,d){for(var s=new Array(n),i=0;i<n;++i)s[i]=d;return s}T.exports=function(n,d,s,i){function u(m){return function(l){for(var w=function V(Z,Y){if("object"!=typeof Y)return[[Z,Y]];var ee=[];for(var Q in Y){var $=Y[Q],K=Z;parseInt(Q)+""===Q?K+="["+Q+"]":K+="."+Q,"object"==typeof $?ee.push.apply(ee,V(K,$)):ee.push([K,$])}return ee}("",m),v=0;v<w.length;++v){var A=w[v],M=A[0],k=A[1];if(i[k]){var E=l;if("string"==typeof M&&(0===M.indexOf(".")||0===M.indexOf("["))){var P=M;if(0===M.indexOf(".")&&(P=M.slice(1)),P.indexOf("]")===P.length-1){var S=P.indexOf("["),F=P.slice(0,S),R=P.slice(S+1,P.length-1);E=F?l[F][R]:l[R]}else E=l[P]}var D,L=s[k].type;switch(L){case"bool":case"int":case"sampler2D":case"samplerCube":n.uniform1i(i[k],E);break;case"float":n.uniform1f(i[k],E);break;default:var B=L.indexOf("vec");if(!(0<=B&&B<=1&&L.length===4+B)){if(0===L.indexOf("mat")&&4===L.length){if((D=L.charCodeAt(L.length-1)-48)<2||D>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+L);n["uniformMatrix"+D+"fv"](i[k],!1,E);break}throw new r("","Unknown uniform data type for "+name+": "+L)}if((D=L.charCodeAt(L.length-1)-48)<2||D>4)throw new r("","Invalid data type");switch(L.charAt(0)){case"b":case"i":n["uniform"+D+"iv"](i[k],E);break;case"v":n["uniform"+D+"fv"](i[k],E);break;default:throw new r("","Unrecognized data type for vector "+name+": "+L)}}}}}}function f(m,l,w){if("object"==typeof w){var v=p(w);Object.defineProperty(m,l,{get:t(v),set:u(w),enumerable:!0,configurable:!1})}else i[w]?Object.defineProperty(m,l,{get:(A=w,function(M,k,E){return M.getUniform(k.program,E[A])}),set:u(w),enumerable:!0,configurable:!1}):m[l]=function(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var k=M.indexOf("vec");if(0<=k&&k<=1&&M.length===4+k){if((E=M.charCodeAt(M.length-1)-48)<2||E>4)throw new r("","Invalid data type");return"b"===M.charAt(0)?a(E,!1):a(E,0)}if(0===M.indexOf("mat")&&4===M.length){var E;if((E=M.charCodeAt(M.length-1)-48)<2||E>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+M);return a(E*E,0)}throw new r("","Unknown uniform data type for "+name+": "+M)}}(s[w].type);var A}function p(m){var l;if(Array.isArray(m)){l=new Array(m.length);for(var w=0;w<m.length;++w)f(l,w,m[w])}else for(var v in l={},m)f(l,v,m[v]);return l}var y=e(s,!0);return{get:t(p(y)),set:u(y),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(x,T,b){"use strict";T.exports=function(e,r){for(var t={},a=0;a<e.length;++a)for(var n=e[a].name.split("."),d=t,s=0;s<n.length;++s){var i=n[s].split("[");if(i.length>1){i[0]in d||(d[i[0]]=[]),d=d[i[0]];for(var u=1;u<i.length;++u){var f=parseInt(i[u]);u<i.length-1||s<n.length-1?(f in d||(d[f]=u<i.length-1?[]:{}),d=d[f]):d[f]=r?a:e[a].type}}else s<n.length-1?(i[0]in d||(d[i[0]]={}),d=d[i[0]]):d[i[0]]=r?a:e[a].type}return t}},{}],137:[function(x,T,b){"use strict";b.uniforms=function(a,n){for(var d=a.getProgramParameter(n,a.ACTIVE_UNIFORMS),s=[],i=0;i<d;++i){var u=a.getActiveUniform(n,i);if(u){var f=t(a,u.type);if(u.size>1)for(var p=0;p<u.size;++p)s.push({name:u.name.replace("[0]","["+p+"]"),type:f});else s.push({name:u.name,type:f})}}return s},b.attributes=function(a,n){for(var d=a.getProgramParameter(n,a.ACTIVE_ATTRIBUTES),s=[],i=0;i<d;++i){var u=a.getActiveAttrib(n,i);u&&s.push({name:u.name,type:t(a,u.type)})}return s};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},r=null;function t(a,n){if(!r){var d=Object.keys(e);r={};for(var s=0;s<d.length;++s){var i=d[s];r[a[i]]=e[i]}}return r[n]}},{}],138:[function(x,T,b){"use strict";b.shader=function(u,f,p){return i(u).getShaderReference(f,p)},b.program=function(u,f,p,y,m){return i(u).getProgram(f,p,y,m)};var e=x("./GLError"),r=x("gl-format-compiler-error"),t=new("undefined"==typeof WeakMap?x("weakmap-shim"):WeakMap),a=0;function n(u,f,p,y,m,l,w){this.id=u,this.src=f,this.type=p,this.shader=y,this.count=l,this.programs=[],this.cache=w}function d(u){this.gl=u,this.shaders=[{},{}],this.programs={}}n.prototype.dispose=function(){if(0==--this.count){for(var u=this.cache,f=u.gl,p=this.programs,y=0,m=p.length;y<m;++y){var l=u.programs[p[y]];l&&(delete u.programs[y],f.deleteProgram(l))}f.deleteShader(this.shader),delete u.shaders[this.type===f.FRAGMENT_SHADER|0][this.src]}};var s=d.prototype;function i(u){var f=t.get(u);return f||(f=new d(u),t.set(u,f)),f}s.getShaderReference=function(u,f){var p=this.gl,y=this.shaders[u===p.FRAGMENT_SHADER|0],m=y[f];if(m&&p.isShader(m.shader))m.count+=1;else{var l=function(w,v,A){var M=w.createShader(v);if(w.shaderSource(M,A),w.compileShader(M),!w.getShaderParameter(M,w.COMPILE_STATUS)){var k=w.getShaderInfoLog(M);try{var E=r(k,A,v)}catch(P){throw console.warn("Failed to format compiler error: "+P),new e(k,"Error compiling shader:\n"+k)}throw new e(k,E.short,E.long)}return M}(p,u,f);m=y[f]=new n(a++,f,u,l,[],1,this)}return m},s.getProgram=function(u,f,p,y){var m=[u.id,f.id,p.join(":"),y.join(":")].join("@"),l=this.programs[m];return l&&this.gl.isProgram(l)||(this.programs[m]=l=function(w,v,A,M,k){var E=w.createProgram();w.attachShader(E,v),w.attachShader(E,A);for(var P=0;P<M.length;++P)w.bindAttribLocation(E,k[P],M[P]);if(w.linkProgram(E),!w.getProgramParameter(E,w.LINK_STATUS)){var S=w.getProgramInfoLog(E);throw new e(S,"Error linking program: "+S)}return E}(this.gl,u.shader,f.shader,p,y),u.programs.push(m),f.programs.push(m)),l}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(x,T,b){"use strict";function e(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}T.exports=function(t,a){var n=new e(t);return n.update(a),t.addOverlay(n),n};var r=e.prototype;r.update=function(t){this.enable=((t=t||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var t=this.enable,a=this.width,n=this.color,d=this.center,s=this.plot,i=s.line,u=s.dataBox,f=s.viewBox;if(i.bind(),u[0]<=d[0]&&d[0]<=u[2]&&u[1]<=d[1]&&d[1]<=u[3]){var p=f[0]+(d[0]-u[0])/(u[2]-u[0])*(f[2]-f[0]),y=f[1]+(d[1]-u[1])/(u[3]-u[1])*(f[3]-f[1]);t[0]&&i.drawLine(p,y,f[0],y,a[0],n[0]),t[1]&&i.drawLine(p,y,p,f[1],a[1],n[1]),t[2]&&i.drawLine(p,y,f[2],y,a[2],n[2]),t[3]&&i.drawLine(p,y,p,f[3],a[3],n[3])}},r.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(x,T,b){"use strict";var e=x("glslify"),r=x("gl-shader"),t=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);T.exports=function(n){return r(n,t,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(x,T,b){"use strict";var e=x("gl-buffer"),r=x("gl-vao"),t=x("./shaders/index");T.exports=function(f,p){var y=[];function m(M,k,E,P,S,F){var R=[M,k,E,0,0,0,1];R[P+3]=1,R[P]=S,y.push.apply(y,R),R[6]=-1,y.push.apply(y,R),R[P]=F,y.push.apply(y,R),y.push.apply(y,R),R[6]=1,y.push.apply(y,R),R[P]=S,y.push.apply(y,R)}m(0,0,0,0,0,1),m(0,0,0,1,0,1),m(0,0,0,2,0,1),m(1,0,0,1,-1,1),m(1,0,0,2,-1,1),m(0,1,0,0,-1,1),m(0,1,0,2,-1,1),m(0,0,1,0,-1,1),m(0,0,1,1,-1,1);var l=e(f,y),w=r(f,[{type:f.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:f.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:f.FLOAT,buffer:l,size:1,offset:24,stride:28}]),v=t(f);v.attributes.position.location=0,v.attributes.color.location=1,v.attributes.weight.location=2;var A=new n(f,l,w,v);return A.update(p),A};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(f,p,y,m){this.gl=f,this.buffer=p,this.vao=y,this.shader=m,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var d=n.prototype,s=[0,0,0],i=[0,0,0],u=[0,0];d.isTransparent=function(){return!1},d.drawTransparent=function(f){},d.draw=function(f){var p=this.gl,y=this.vao,m=this.shader;y.bind(),m.bind();var l,w=f.model||a,v=f.view||a,A=f.projection||a;this.axes&&(l=this.axes.lastCubeProps.axis);for(var M=s,k=i,E=0;E<3;++E)l&&l[E]<0?(M[E]=this.bounds[0][E],k[E]=this.bounds[1][E]):(M[E]=this.bounds[1][E],k[E]=this.bounds[0][E]);for(u[0]=p.drawingBufferWidth,u[1]=p.drawingBufferHeight,m.uniforms.model=w,m.uniforms.view=v,m.uniforms.projection=A,m.uniforms.coordinates=[this.position,M,k],m.uniforms.colors=this.colors,m.uniforms.screenShape=u,E=0;E<3;++E)m.uniforms.lineWidth=this.lineWidth[E]*this.pixelRatio,this.enabled[E]&&(y.draw(p.TRIANGLES,6,6*E),this.drawSides[E]&&y.draw(p.TRIANGLES,12,18+12*E));y.unbind()},d.update=function(f){f&&("bounds"in f&&(this.bounds=f.bounds),"position"in f&&(this.position=f.position),"lineWidth"in f&&(this.lineWidth=f.lineWidth),"colors"in f&&(this.colors=f.colors),"enabled"in f&&(this.enabled=f.enabled),"drawSides"in f&&(this.drawSides=f.drawSides))},d.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(x,T,b){var e=x("glslify"),r=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);b.meshShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},b.pickShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(x,T,b){"use strict";var e=x("gl-vec3"),r=x("gl-vec4"),t=["xyz","xzy","yxz","yzx","zxy","zyx"],n=function(f,p){var y,m=f.length;for(y=0;y<m;y++){var l=f[y];if(l===p)return y;if(l>p)return y-1}return y},d=function(f,p,y){return f<p?p:f>y?y:f},s=function(f){var p=1/0;f.sort(function(w,v){return w-v});for(var y=f.length,m=1;m<y;m++){var l=Math.abs(f[m]-f[m-1]);l<p&&(p=l)}return p};T.exports=function(f,p){var y=f.startingPositions,m=f.maxLength||1e3,l=f.tubeSize||1,w=f.absoluteTubeSize,v=f.gridFill||"+x+y+z",A={};-1!==v.indexOf("-x")&&(A.reversedX=!0),-1!==v.indexOf("-y")&&(A.reversedY=!0),-1!==v.indexOf("-z")&&(A.reversedZ=!0),A.filled=t.indexOf(v.replace(/-/g,"").replace(/\+/g,""));var he,be,ge,we,M=f.getVelocity||function(he){return function(be,ge,we){var ke=ge.vectors,De=ge.meshgrid,Ee=be[0],Re=be[1],ve=be[2],Te=De[0].length,Ie=De[1].length,Ce=De[2].length,Pe=n(De[0],Ee),Ve=n(De[1],Re),qe=n(De[2],ve),Je=Pe+1,lt=Ve+1,He=qe+1;if(Pe=d(Pe,0,Te-1),Je=d(Je,0,Te-1),Ve=d(Ve,0,Ie-1),lt=d(lt,0,Ie-1),qe=d(qe,0,Ce-1),He=d(He,0,Ce-1),Pe<0||Ve<0||qe<0||Je>Te-1||lt>Ie-1||He>Ce-1)return e.create();var $e,et,tt,ft,bt,Ct,Vt=De[0][Pe],ht=De[1][Ve],Rt=De[2][qe],nn=(Ee-Vt)/(De[0][Je]-Vt),cn=(Re-ht)/(De[1][lt]-ht),Ze=(ve-Rt)/(De[2][He]-Rt);switch(isFinite(nn)||(nn=.5),isFinite(cn)||(cn=.5),isFinite(Ze)||(Ze=.5),we.reversedX&&(Pe=Te-1-Pe,Je=Te-1-Je),we.reversedY&&(Ve=Ie-1-Ve,lt=Ie-1-lt),we.reversedZ&&(qe=Ce-1-qe,He=Ce-1-He),we.filled){case 5:bt=qe,Ct=He,tt=Ve*Ce,ft=lt*Ce,$e=Pe*Ce*Ie,et=Je*Ce*Ie;break;case 4:bt=qe,Ct=He,$e=Pe*Ce,et=Je*Ce,tt=Ve*Ce*Te,ft=lt*Ce*Te;break;case 3:tt=Ve,ft=lt,bt=qe*Ie,Ct=He*Ie,$e=Pe*Ie*Ce,et=Je*Ie*Ce;break;case 2:tt=Ve,ft=lt,$e=Pe*Ie,et=Je*Ie,bt=qe*Ie*Te,Ct=He*Ie*Te;break;case 1:$e=Pe,et=Je,bt=qe*Te,Ct=He*Te,tt=Ve*Te*Ce,ft=lt*Te*Ce;break;default:$e=Pe,et=Je,tt=Ve*Te,ft=lt*Te,bt=qe*Te*Ie,Ct=He*Te*Ie}var Qe=ke[$e+tt+bt],Ge=ke[$e+tt+Ct],rt=ke[$e+ft+bt],Le=ke[$e+ft+Ct],ze=ke[et+tt+bt],je=ke[et+tt+Ct],Ne=ke[et+ft+bt],st=ke[et+ft+Ct],mt=e.create(),Tt=e.create(),xt=e.create(),zt=e.create();e.lerp(mt,Qe,ze,nn),e.lerp(Tt,Ge,je,nn),e.lerp(xt,rt,Ne,nn),e.lerp(zt,Le,st,nn);var gt=e.create(),Bt=e.create();e.lerp(gt,mt,xt,cn),e.lerp(Bt,Tt,zt,cn);var jt=e.create();return e.lerp(jt,gt,Bt,Ze),jt}(he,f,A)},k=f.getDivergence||function(he,be){var ge=e.create(),we=1e-4;e.add(ge,he,[we,0,0]);var ke=M(ge);e.subtract(ke,ke,be),e.scale(ke,ke,1/we),e.add(ge,he,[0,we,0]);var De=M(ge);e.subtract(De,De,be),e.scale(De,De,1/we),e.add(ge,he,[0,0,we]);var Ee=M(ge);return e.subtract(Ee,Ee,be),e.scale(Ee,Ee,1/we),e.add(ge,ke,De),e.add(ge,ge,Ee),ge},E=[],P=p[0][0],S=p[0][1],F=p[0][2],R=p[1][0],D=p[1][1],L=p[1][2],V=10*e.distance(p[0],p[1])/m,Z=V*V,Y=1,ee=0,Q=y.length;Q>1&&(Y=function(he){for(var be=[],ge=[],we=[],ke={},De={},Ee={},Re=he.length,ve=0;ve<Re;ve++){var Te=he[ve],Ie=Te[0],Ce=Te[1],Pe=Te[2];ke[Ie]||(be.push(Ie),ke[Ie]=!0),De[Ce]||(ge.push(Ce),De[Ce]=!0),Ee[Pe]||(we.push(Pe),Ee[Pe]=!0)}var Ve=s(be),qe=s(ge),Je=s(we),lt=Math.min(Ve,qe,Je);return isFinite(lt)?lt:1}(y));for(var $=0;$<Q;$++){var K=e.create();e.copy(K,y[$]);var oe=[K],j=[],H=M(K),G=K;j.push(H);var re=[],q=k(K,H),te=e.length(q);isFinite(te)&&te>ee&&(ee=te),re.push(te),E.push({points:oe,velocities:j,divergences:re});for(var ne=0;ne<100*m&&oe.length<m&&(be=void 0,ge=void 0,we=void 0,ge=(he=K)[1],we=he[2],!((be=he[0])<P||be>R||ge<S||ge>D||we<F||we>L));){ne++;var le=e.clone(H),ue=e.squaredLength(le);if(0===ue)break;ue>Z&&e.scale(le,le,V/Math.sqrt(ue)),e.add(le,le,K),H=M(le),e.squaredDistance(G,le)-Z>-1e-4*Z&&(oe.push(le),G=le,j.push(H),q=k(le,H),te=e.length(q),isFinite(te)&&te>ee&&(ee=te),re.push(te)),K=le}}var de=function(f,p,y,m){for(var l=0,w=0;w<f.length;w++)for(var v=f[w].velocities,A=0;A<v.length;A++)l=Math.max(l,e.length(v[A]));var M=f.map(function(V){return function(Z,Y,ee,Q){for(var $=Z.points,K=Z.velocities,oe=Z.divergences,j=[],H=[],G=[],re=[],q=[],te=[],ne=0,le=0,ue=r.create(),de=r.create(),he=0;he<$.length;he++){var be=$[he],ge=K[he],we=oe[he];0===Y&&(we=.05*ee),le=e.length(ge)/Q,ue=r.create(),e.copy(ue,ge),ue[3]=we;for(var ke=0;ke<8;ke++)q[ke]=[be[0],be[1],be[2],ke];if(re.length>0)for(ke=0;ke<8;ke++){var De=(ke+1)%8;j.push(re[ke],q[ke],q[De],q[De],re[De],re[ke]),G.push(de,ue,ue,ue,de,de),te.push(ne,le,le,le,ne,ne);var Ee=j.length;H.push([Ee-6,Ee-5,Ee-4],[Ee-3,Ee-2,Ee-1])}var Re=re;re=q,q=Re;var ve=de;de=ue,ue=ve;var Te=ne;ne=le,le=Te}return{positions:j,cells:H,vectors:G,vertexIntensity:te}}(V,y,m,l)}),k=[],E=[],P=[],S=[];for(w=0;w<M.length;w++){var F=M[w],R=k.length;for(k=k.concat(F.positions),P=P.concat(F.vectors),S=S.concat(F.vertexIntensity),A=0;A<F.cells.length;A++){var D=F.cells[A],L=[];E.push(L);for(var B=0;B<D.length;B++)L.push(D[B]+R)}}return{positions:k,cells:E,vectors:P,vertexIntensity:S,colormap:p}}(E,f.colormap,ee,Y);return w?de.tubeScale=w:(0===ee&&(ee=1),de.tubeScale=.5*l*Y/ee),de};var i=x("./lib/shaders"),u=x("gl-cone3d").createMesh;T.exports.createTubeMesh=function(f,p){return u(f,p,{shaders:i,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(x,T,b){var e=x("gl-shader"),r=x("glslify"),t=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),n=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),d=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);b.createShader=function(s){var i=e(s,t,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},b.createPickShader=function(s){var i=e(s,t,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},b.createContourShader=function(s){var i=e(s,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i},b.createPickContourShader=function(s){var i=e(s,n,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i}},{"gl-shader":132,glslify:231}],145:[function(x,T,b){"use strict";T.exports=function(H){var G=H.gl,re=v(G),q=M(G),te=A(G),ne=k(G),le=r(G),ue=t(G,[{buffer:le,size:4,stride:40,offset:0},{buffer:le,size:3,stride:40,offset:16},{buffer:le,size:3,stride:40,offset:28}]),de=r(G),he=t(G,[{buffer:de,size:4,stride:20,offset:0},{buffer:de,size:1,stride:20,offset:16}]),be=r(G),ge=t(G,[{buffer:be,size:2,type:G.FLOAT}]),we=a(G,1,256,G.RGBA,G.UNSIGNED_BYTE);we.minFilter=G.LINEAR,we.magFilter=G.LINEAR;var ke=new R(G,[0,0],[[0,0,0],[0,0,0]],re,q,le,ue,we,te,ne,de,he,be,ge,[0,0,0]),De={levels:[[],[],[]]};for(var Ee in H)De[Ee]=H[Ee];return De.colormap=De.colormap||"jet",ke.update(De),ke};var e=x("bit-twiddle"),r=x("gl-buffer"),t=x("gl-vao"),a=x("gl-texture2d"),n=x("typedarray-pool"),d=x("colormap"),s=x("ndarray-ops"),i=x("ndarray-pack"),u=x("ndarray"),f=x("surface-nets"),p=x("gl-mat4/multiply"),y=x("gl-mat4/invert"),m=x("binary-search-bounds"),l=x("ndarray-gradient"),w=x("./lib/shaders"),v=w.createShader,A=w.createContourShader,M=w.createPickShader,k=w.createPickContourShader,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function F(H,G,re,q,te){this.position=H,this.index=G,this.uv=re,this.level=q,this.dataCoordinate=te}function R(H,G,re,q,te,ne,le,ue,de,he,be,ge,we,ke,De){this.gl=H,this.shape=G,this.bounds=re,this.objectOffset=De,this.intensityBounds=[],this._shader=q,this._pickShader=te,this._coordinateBuffer=ne,this._vao=le,this._colorMap=ue,this._contourShader=de,this._contourPickShader=he,this._contourBuffer=be,this._contourVAO=ge,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new F([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=we,this._dynamicVAO=ke,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[u(n.mallocFloat(1024),[0,0]),u(n.mallocFloat(1024),[0,0]),u(n.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var H=0;H<3;++H){var G=S[H],re=(H+2)%3;G[(H+1)%3+0]=1,G[re+3]=1,G[H+6]=1}}();var D=R.prototype;D.genColormap=function(H,G){var re=!1,q=i([d({colormap:H,nshades:256,format:"rgba"}).map(function(te,ne){var le=G?function(ue,de){if(!de||!de.length)return 1;for(var he=0;he<de.length;++he){if(de.length<2)return 1;if(de[he][0]===ue)return de[he][1];if(de[he][0]>ue&&he>0){var be=(de[he][0]-ue)/(de[he][0]-de[he-1][0]);return de[he][1]*(1-be)+be*de[he-1][1]}}return 1}(ne/255,G):te[3];return le<1&&(re=!0),[te[0],te[1],te[2],255*le]})]);return s.divseq(q,255),this.hasAlphaScale=re,q},D.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},D.isOpaque=function(){return!this.isTransparent()},D.pickSlots=1,D.setPickBase=function(H){this.pickId=H};var L=[0,0,0],B={showSurface:!1,showContour:!1,projections:[E.slice(),E.slice(),E.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function V(H,G){var re,q,te,ne=G.axes&&G.axes.lastCubeProps.axis||L,le=G.showSurface,ue=G.showContour;for(re=0;re<3;++re)for(le=le||G.surfaceProject[re],q=0;q<3;++q)ue=ue||G.contourProject[re][q];for(re=0;re<3;++re){var de=B.projections[re];for(q=0;q<16;++q)de[q]=0;for(q=0;q<4;++q)de[5*q]=1;de[5*re]=0,de[12+re]=G.axesBounds[+(ne[re]>0)][re],p(de,H.model,de);var he=B.clipBounds[re];for(te=0;te<2;++te)for(q=0;q<3;++q)he[te][q]=H.clipBounds[te][q];he[0][re]=-1e8,he[1][re]=1e8}return B.showSurface=le,B.showContour=ue,B}var Z={model:E,view:E,projection:E,inverseModel:E.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=E.slice(),ee=[1,0,0,0,1,0,0,0,1];function Q(H,G){H=H||{};var re=this.gl;re.disable(re.CULL_FACE),this._colorMap.bind(0);var q=Z;q.model=H.model||E,q.view=H.view||E,q.projection=H.projection||E,q.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],q.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],q.objectOffset=this.objectOffset,q.contourColor=this.contourColor[0],q.inverseModel=y(q.inverseModel,q.model);for(var te=0;te<2;++te)for(var ne=q.clipBounds[te],le=0;le<3;++le)ne[le]=Math.min(Math.max(this.clipBounds[te][le],-1e8),1e8);q.kambient=this.ambientLight,q.kdiffuse=this.diffuseLight,q.kspecular=this.specularLight,q.roughness=this.roughness,q.fresnel=this.fresnel,q.opacity=this.opacity,q.height=0,q.permutation=ee,q.vertexColor=this.vertexColor;var ue=Y;for(p(ue,q.view,q.model),p(ue,q.projection,ue),y(ue,ue),te=0;te<3;++te)q.eyePosition[te]=ue[12+te]/ue[15];var de=ue[15];for(te=0;te<3;++te)de+=this.lightPosition[te]*ue[4*te+3];for(te=0;te<3;++te){var he=ue[12+te];for(le=0;le<3;++le)he+=ue[4*le+te]*this.lightPosition[le];q.lightPosition[te]=he/de}var be=V(q,this);if(be.showSurface){for(this._shader.bind(),this._shader.uniforms=q,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(re.TRIANGLES,this._vertexCount),te=0;te<3;++te)this.surfaceProject[te]&&this.vertexCount&&(this._shader.uniforms.model=be.projections[te],this._shader.uniforms.clipBounds=be.clipBounds[te],this._vao.draw(re.TRIANGLES,this._vertexCount));this._vao.unbind()}if(be.showContour){var ge=this._contourShader;q.kambient=1,q.kdiffuse=0,q.kspecular=0,q.opacity=1,ge.bind(),ge.uniforms=q;var we=this._contourVAO;for(we.bind(),te=0;te<3;++te)for(ge.uniforms.permutation=S[te],re.lineWidth(this.contourWidth[te]*this.pixelRatio),le=0;le<this.contourLevels[te].length;++le)le===this.highlightLevel[te]?(ge.uniforms.contourColor=this.highlightColor[te],ge.uniforms.contourTint=this.highlightTint[te]):0!==le&&le-1!==this.highlightLevel[te]||(ge.uniforms.contourColor=this.contourColor[te],ge.uniforms.contourTint=this.contourTint[te]),this._contourCounts[te][le]&&(ge.uniforms.height=this.contourLevels[te][le],we.draw(re.LINES,this._contourCounts[te][le],this._contourOffsets[te][le]));for(te=0;te<3;++te)for(ge.uniforms.model=be.projections[te],ge.uniforms.clipBounds=be.clipBounds[te],le=0;le<3;++le)if(this.contourProject[te][le]){ge.uniforms.permutation=S[le],re.lineWidth(this.contourWidth[le]*this.pixelRatio);for(var ke=0;ke<this.contourLevels[le].length;++ke)ke===this.highlightLevel[le]?(ge.uniforms.contourColor=this.highlightColor[le],ge.uniforms.contourTint=this.highlightTint[le]):0!==ke&&ke-1!==this.highlightLevel[le]||(ge.uniforms.contourColor=this.contourColor[le],ge.uniforms.contourTint=this.contourTint[le]),this._contourCounts[le][ke]&&(ge.uniforms.height=this.contourLevels[le][ke],we.draw(re.LINES,this._contourCounts[le][ke],this._contourOffsets[le][ke]))}for(we.unbind(),(we=this._dynamicVAO).bind(),te=0;te<3;++te)if(0!==this._dynamicCounts[te])for(ge.uniforms.model=q.model,ge.uniforms.clipBounds=q.clipBounds,ge.uniforms.permutation=S[te],re.lineWidth(this.dynamicWidth[te]*this.pixelRatio),ge.uniforms.contourColor=this.dynamicColor[te],ge.uniforms.contourTint=this.dynamicTint[te],ge.uniforms.height=this.dynamicLevel[te],we.draw(re.LINES,this._dynamicCounts[te],this._dynamicOffsets[te]),le=0;le<3;++le)this.contourProject[le][te]&&(ge.uniforms.model=be.projections[le],ge.uniforms.clipBounds=be.clipBounds[le],we.draw(re.LINES,this._dynamicCounts[te],this._dynamicOffsets[te]));we.unbind()}}D.draw=function(H){return Q.call(this,H,!1)},D.drawTransparent=function(H){return Q.call(this,H,!0)};var $={model:E,view:E,projection:E,inverseModel:E,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function K(H,G){return Array.isArray(H)?[G(H[0]),G(H[1]),G(H[2])]:[G(H),G(H),G(H)]}function oe(H){return Array.isArray(H)?3===H.length?[H[0],H[1],H[2],1]:[H[0],H[1],H[2],H[3]]:[0,0,0,1]}function j(H){if(Array.isArray(H)){if(Array.isArray(H))return[oe(H[0]),oe(H[1]),oe(H[2])];var G=oe(H);return[G.slice(),G.slice(),G.slice()]}}D.drawPick=function(H){H=H||{};var G=this.gl;G.disable(G.CULL_FACE);var re=$;re.model=H.model||E,re.view=H.view||E,re.projection=H.projection||E,re.shape=this._field[2].shape,re.pickId=this.pickId/255,re.lowerBound=this.bounds[0],re.upperBound=this.bounds[1],re.objectOffset=this.objectOffset,re.permutation=ee;for(var q=0;q<2;++q)for(var te=re.clipBounds[q],ne=0;ne<3;++ne)te[ne]=Math.min(Math.max(this.clipBounds[q][ne],-1e8),1e8);var le=V(re,this);if(le.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=re,this._vao.bind(),this._vao.draw(G.TRIANGLES,this._vertexCount),q=0;q<3;++q)this.surfaceProject[q]&&(this._pickShader.uniforms.model=le.projections[q],this._pickShader.uniforms.clipBounds=le.clipBounds[q],this._vao.draw(G.TRIANGLES,this._vertexCount));this._vao.unbind()}if(le.showContour){var ue=this._contourPickShader;ue.bind(),ue.uniforms=re;var de=this._contourVAO;for(de.bind(),ne=0;ne<3;++ne)for(G.lineWidth(this.contourWidth[ne]*this.pixelRatio),ue.uniforms.permutation=S[ne],q=0;q<this.contourLevels[ne].length;++q)this._contourCounts[ne][q]&&(ue.uniforms.height=this.contourLevels[ne][q],de.draw(G.LINES,this._contourCounts[ne][q],this._contourOffsets[ne][q]));for(q=0;q<3;++q)for(ue.uniforms.model=le.projections[q],ue.uniforms.clipBounds=le.clipBounds[q],ne=0;ne<3;++ne)if(this.contourProject[q][ne]){ue.uniforms.permutation=S[ne],G.lineWidth(this.contourWidth[ne]*this.pixelRatio);for(var he=0;he<this.contourLevels[ne].length;++he)this._contourCounts[ne][he]&&(ue.uniforms.height=this.contourLevels[ne][he],de.draw(G.LINES,this._contourCounts[ne][he],this._contourOffsets[ne][he]))}de.unbind()}},D.pick=function(H){if(!H||H.id!==this.pickId)return null;var G=this._field[2].shape,re=this._pickResult,q=G[0]*(H.value[0]+(H.value[2]>>4)/16)/255,te=Math.floor(q),ne=q-te,le=G[1]*(H.value[1]+(15&H.value[2])/16)/255,ue=Math.floor(le),de=le-ue;te+=1,ue+=1;var he=re.position;he[0]=he[1]=he[2]=0;for(var be=0;be<2;++be)for(var ge=be?ne:1-ne,we=0;we<2;++we)for(var ke=te+be,De=ue+we,Ee=ge*(we?de:1-de),Re=0;Re<3;++Re)he[Re]+=this._field[Re].get(ke,De)*Ee;for(var ve=this._pickResult.level,Te=0;Te<3;++Te)if(ve[Te]=m.le(this.contourLevels[Te],he[Te]),ve[Te]<0)this.contourLevels[Te].length>0&&(ve[Te]=0);else if(ve[Te]<this.contourLevels[Te].length-1){var Ce=this.contourLevels[Te][ve[Te]+1];Math.abs(this.contourLevels[Te][ve[Te]]-he[Te])>Math.abs(Ce-he[Te])&&(ve[Te]+=1)}for(re.index[0]=ne<.5?te:te+1,re.index[1]=de<.5?ue:ue+1,re.uv[0]=q/G[0],re.uv[1]=le/G[1],Re=0;Re<3;++Re)re.dataCoordinate[Re]=this._field[Re].get(re.index[0],re.index[1]);return re},D.padField=function(H,G){var re=G.shape.slice(),q=H.shape.slice();s.assign(H.lo(1,1).hi(re[0],re[1]),G),s.assign(H.lo(1).hi(re[0],1),G.hi(re[0],1)),s.assign(H.lo(1,q[1]-1).hi(re[0],1),G.lo(0,re[1]-1).hi(re[0],1)),s.assign(H.lo(0,1).hi(1,re[1]),G.hi(1)),s.assign(H.lo(q[0]-1,1).hi(1,re[1]),G.lo(re[0]-1)),H.set(0,0,G.get(0,0)),H.set(0,q[1]-1,G.get(0,re[1]-1)),H.set(q[0]-1,0,G.get(re[0]-1,0)),H.set(q[0]-1,q[1]-1,G.get(re[0]-1,re[1]-1))},D.update=function(H){this.objectOffset=(H=H||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in H&&(this.contourWidth=K(H.contourWidth,Number)),"showContour"in H&&(this.showContour=K(H.showContour,Boolean)),"showSurface"in H&&(this.showSurface=!!H.showSurface),"contourTint"in H&&(this.contourTint=K(H.contourTint,Boolean)),"contourColor"in H&&(this.contourColor=j(H.contourColor)),"contourProject"in H&&(this.contourProject=K(H.contourProject,function(Qt){return K(Qt,Boolean)})),"surfaceProject"in H&&(this.surfaceProject=H.surfaceProject),"dynamicColor"in H&&(this.dynamicColor=j(H.dynamicColor)),"dynamicTint"in H&&(this.dynamicTint=K(H.dynamicTint,Number)),"dynamicWidth"in H&&(this.dynamicWidth=K(H.dynamicWidth,Number)),"opacity"in H&&(this.opacity=H.opacity),"opacityscale"in H&&(this.opacityscale=H.opacityscale),"colorBounds"in H&&(this.colorBounds=H.colorBounds),"vertexColor"in H&&(this.vertexColor=H.vertexColor?1:0),"colormap"in H&&this._colorMap.setPixels(this.genColormap(H.colormap,this.opacityscale));var G=H.field||H.coords&&H.coords[2]||null,re=!1;if(G||(G=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in H||"coords"in H){var q=(G.shape[0]+2)*(G.shape[1]+2);q>this._field[2].data.length&&(n.freeFloat(this._field[2].data),this._field[2].data=n.mallocFloat(e.nextPow2(q))),this._field[2]=u(this._field[2].data,[G.shape[0]+2,G.shape[1]+2]),this.padField(this._field[2],G),this.shape=G.shape.slice();for(var te=this.shape,ne=0;ne<2;++ne)this._field[2].size>this._field[ne].data.length&&(n.freeFloat(this._field[ne].data),this._field[ne].data=n.mallocFloat(this._field[2].size)),this._field[ne]=u(this._field[ne].data,[te[0]+2,te[1]+2]);if(H.coords){var le=H.coords;if(!Array.isArray(le)||3!==le.length)throw new Error("gl-surface: invalid coordinates for x/y");for(ne=0;ne<2;++ne){var ue=le[ne];for(we=0;we<2;++we)if(ue.shape[we]!==te[we])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ne],ue)}}else if(H.ticks){var de=H.ticks;if(!Array.isArray(de)||2!==de.length)throw new Error("gl-surface: invalid ticks");for(ne=0;ne<2;++ne){var he=de[ne];if((Array.isArray(he)||he.length)&&(he=u(he)),he.shape[0]!==te[ne])throw new Error("gl-surface: invalid tick length");var be=u(he.data,te);be.stride[ne]=he.stride[0],be.stride[1^ne]=0,this.padField(this._field[ne],be)}}else{for(ne=0;ne<2;++ne){var ge=[0,0];ge[ne]=1,this._field[ne]=u(this._field[ne].data,[te[0]+2,te[1]+2],ge,0)}this._field[0].set(0,0,0);for(var we=0;we<te[0];++we)this._field[0].set(we+1,0,we);for(this._field[0].set(te[0]+1,0,te[0]-1),this._field[1].set(0,0,0),we=0;we<te[1];++we)this._field[1].set(0,we+1,we);this._field[1].set(0,te[1]+1,te[1]-1)}var ke=this._field,De=u(n.mallocFloat(3*ke[2].size*2),[3,te[0]+2,te[1]+2,2]);for(ne=0;ne<3;++ne)l(De.pick(ne),ke[ne],"mirror");var Ee=u(n.mallocFloat(3*ke[2].size),[te[0]+2,te[1]+2,3]);for(ne=0;ne<te[0]+2;++ne)for(we=0;we<te[1]+2;++we){var Re=De.get(0,ne,we,0),ve=De.get(0,ne,we,1),Te=De.get(1,ne,we,0),Ie=De.get(1,ne,we,1),Ce=De.get(2,ne,we,0),Pe=De.get(2,ne,we,1),Ve=Te*Pe-Ie*Ce,qe=Ce*ve-Pe*Re,Je=Re*Ie-ve*Te,lt=Math.sqrt(Ve*Ve+qe*qe+Je*Je);lt<1e-8?(lt=Math.max(Math.abs(Ve),Math.abs(qe),Math.abs(Je)))<1e-8?(Je=1,qe=Ve=0,lt=1):lt=1/lt:lt=1/Math.sqrt(lt),Ee.set(ne,we,0,Ve*lt),Ee.set(ne,we,1,qe*lt),Ee.set(ne,we,2,Je*lt)}n.free(De.data);var He=[1/0,1/0,1/0],$e=[-1/0,-1/0,-1/0],et=1/0,tt=-1/0,bt=n.mallocFloat(e.nextPow2((te[0]-1)*(te[1]-1)*6*10)),Ct=0,Vt=0;for(ne=0;ne<te[0]-1;++ne)e:for(we=0;we<te[1]-1;++we){for(var Ft=0;Ft<2;++Ft)for(var ht=0;ht<2;++ht)for(var ut=0;ut<3;++ut){var Rt=this._field[ut].get(1+ne+Ft,1+we+ht);if(isNaN(Rt)||!isFinite(Rt))continue e}for(ut=0;ut<6;++ut){var nn=ne+P[ut][0],cn=we+P[ut][1],Ze=this._field[0].get(nn+1,cn+1),Qe=this._field[1].get(nn+1,cn+1);Rt=this._field[2].get(nn+1,cn+1),Ve=Ee.get(nn+1,cn+1,0),qe=Ee.get(nn+1,cn+1,1),Je=Ee.get(nn+1,cn+1,2),H.intensity&&(Ge=H.intensity.get(nn,cn));var Ge=H.intensity?H.intensity.get(nn,cn):Rt+this.objectOffset[2];bt[Ct++]=nn,bt[Ct++]=cn,bt[Ct++]=Ze,bt[Ct++]=Qe,bt[Ct++]=Rt,bt[Ct++]=0,bt[Ct++]=Ge,bt[Ct++]=Ve,bt[Ct++]=qe,bt[Ct++]=Je,He[0]=Math.min(He[0],Ze+this.objectOffset[0]),He[1]=Math.min(He[1],Qe+this.objectOffset[1]),He[2]=Math.min(He[2],Rt+this.objectOffset[2]),et=Math.min(et,Ge),$e[0]=Math.max($e[0],Ze+this.objectOffset[0]),$e[1]=Math.max($e[1],Qe+this.objectOffset[1]),$e[2]=Math.max($e[2],Rt+this.objectOffset[2]),tt=Math.max(tt,Ge),Vt+=1}}for(H.intensityBounds&&(et=+H.intensityBounds[0],tt=+H.intensityBounds[1]),ne=6;ne<Ct;ne+=10)bt[ne]=(bt[ne]-et)/(tt-et);this._vertexCount=Vt,this._coordinateBuffer.update(bt.subarray(0,Ct)),n.freeFloat(bt),n.free(Ee.data),this.bounds=[He,$e],this.intensity=H.intensity||this._field[2],this.intensityBounds[0]===et&&this.intensityBounds[1]===tt||(re=!0),this.intensityBounds=[et,tt]}if("levels"in H){var rt=H.levels;for(rt=Array.isArray(rt[0])?rt.slice():[[],[],rt],ne=0;ne<3;++ne)rt[ne]=rt[ne].slice(),rt[ne].sort(function(Qt,sn){return Qt-sn});for(ne=0;ne<3;++ne)for(we=0;we<rt[ne].length;++we)rt[ne][we]-=this.objectOffset[ne];e:for(ne=0;ne<3;++ne){if(rt[ne].length!==this.contourLevels[ne].length){re=!0;break}for(we=0;we<rt[ne].length;++we)if(rt[ne][we]!==this.contourLevels[ne][we]){re=!0;break e}}this.contourLevels=rt}if(re){ke=this._field,te=this.shape;for(var Le=[],ze=0;ze<3;++ze){var je=this.contourLevels[ze],Ne=[],st=[],mt=[0,0,0];for(ne=0;ne<je.length;++ne){var Tt=f(this._field[ze],je[ne]);Ne.push(Le.length/5|0),Vt=0;e:for(we=0;we<Tt.cells.length;++we){var xt=Tt.cells[we];for(ut=0;ut<2;++ut){var zt=Tt.positions[xt[ut]],gt=zt[0],Bt=0|Math.floor(gt),jt=gt-Bt,it=zt[1],Mt=0|Math.floor(it),qt=it-Mt,Wt=!1;t:for(var an=0;an<3;++an){mt[an]=0;var Ue=(ze+an+1)%3;for(Ft=0;Ft<2;++Ft){var yt=Ft?jt:1-jt;for(nn=0|Math.min(Math.max(Bt+Ft,0),te[0]),ht=0;ht<2;++ht){var Dt=ht?qt:1-qt;if(cn=0|Math.min(Math.max(Mt+ht,0),te[1]),Rt=an<2?this._field[Ue].get(nn,cn):(this.intensity.get(nn,cn)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Rt)||isNaN(Rt)){Wt=!0;break t}mt[an]+=yt*Dt*Rt}}}if(Wt){if(ut>0){for(var Jt=0;Jt<5;++Jt)Le.pop();Vt-=1}continue e}Le.push(mt[0],mt[1],zt[0],zt[1],mt[2]),Vt+=1}}st.push(Vt)}this._contourOffsets[ze]=Ne,this._contourCounts[ze]=st}var gn=n.mallocFloat(Le.length);for(ne=0;ne<Le.length;++ne)gn[ne]=Le[ne];this._contourBuffer.update(gn),n.freeFloat(gn)}},D.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var H=0;H<3;++H)n.freeFloat(this._field[H].data)},D.highlight=function(H){var G,re;if(!H)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(G=0;G<3;++G)this.highlightLevel[G]=this.enableHighlight[G]?H.level[G]:-1;for(re=this.snapToData?H.dataCoordinate:H.position,G=0;G<3;++G)re[G]-=this.objectOffset[G];if(this.enableDynamic[0]&&re[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&re[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&re[2]!==this.dynamicLevel[2]){for(var q=0,te=this.shape,ne=n.mallocFloat(12*te[0]*te[1]),le=0;le<3;++le)if(this.enableDynamic[le]){this.dynamicLevel[le]=re[le];var be=this._field[(le+1)%3],ge=this._field[(le+2)%3],we=f(this._field[le],re[le]),ke=we.cells,De=we.positions;for(this._dynamicOffsets[le]=q,G=0;G<ke.length;++G)for(var Ee=ke[G],Re=0;Re<2;++Re){var ve=De[Ee[Re]],Te=+ve[0],Ie=0|Te,Ce=0|Math.min(Ie+1,te[0]),Pe=Te-Ie,Ve=1-Pe,qe=+ve[1],Je=0|qe,lt=0|Math.min(Je+1,te[1]),He=qe-Je,$e=1-He,et=Ve*$e,tt=Ve*He,ft=Pe*$e,bt=Pe*He,Ct=et*be.get(Ie,Je)+tt*be.get(Ie,lt)+ft*be.get(Ce,Je)+bt*be.get(Ce,lt),Vt=et*ge.get(Ie,Je)+tt*ge.get(Ie,lt)+ft*ge.get(Ce,Je)+bt*ge.get(Ce,lt);if(isNaN(Ct)||isNaN(Vt)){Re&&(q-=1);break}ne[2*q+0]=Ct,ne[2*q+1]=Vt,q+=1}this._dynamicCounts[le]=q-this._dynamicOffsets[le]}else this.dynamicLevel[le]=NaN,this._dynamicCounts[le]=0;this._dynamicBuffer.update(ne.subarray(0,2*q)),n.freeFloat(ne)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(x,T,b){"use strict";var e=x("ndarray"),r=x("ndarray-ops"),t=x("typedarray-pool");T.exports=function(M){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||s(M),"number"==typeof arguments[1])return w(M,arguments[1],arguments[2],arguments[3]||M.RGBA,arguments[4]||M.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return w(M,0|arguments[1][0],0|arguments[1][1],arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var k=arguments[1],E=i(k)?k:k.raw;if(E)return v(M,E,0|k.width,0|k.height,arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if(k.shape&&k.data&&k.stride)return A(M,k)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,n=null,d=null;function s(M){a=[M.LINEAR,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_NEAREST],n=[M.NEAREST,M.LINEAR,M.NEAREST_MIPMAP_NEAREST,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_LINEAR],d=[M.REPEAT,M.CLAMP_TO_EDGE,M.MIRRORED_REPEAT]}function i(M){return"undefined"!=typeof HTMLCanvasElement&&M instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&M instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&M instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&M instanceof ImageData}var u=function(M,k){r.muls(M,k,255)};function f(M,k,E){var P=M.gl,S=P.getParameter(P.MAX_TEXTURE_SIZE);if(k<0||k>S||E<0||E>S)throw new Error("gl-texture2d: Invalid texture size");return M._shape=[k,E],M.bind(),P.texImage2D(P.TEXTURE_2D,0,M.format,k,E,0,M.format,M.type,null),M._mipLevels=[0],M}function p(M,k,E,P,S,F){this.gl=M,this.handle=k,this.format=S,this.type=F,this._shape=[E,P],this._mipLevels=[0],this._magFilter=M.NEAREST,this._minFilter=M.NEAREST,this._wrapS=M.CLAMP_TO_EDGE,this._wrapT=M.CLAMP_TO_EDGE,this._anisoSamples=1;var R=this,D=[this._wrapS,this._wrapT];Object.defineProperties(D,[{get:function(){return R._wrapS},set:function(B){return R.wrapS=B}},{get:function(){return R._wrapT},set:function(B){return R.wrapT=B}}]),this._wrapVector=D;var L=[this._shape[0],this._shape[1]];Object.defineProperties(L,[{get:function(){return R._shape[0]},set:function(B){return R.width=B}},{get:function(){return R._shape[1]},set:function(B){return R.height=B}}]),this._shapeVector=L}var y=p.prototype;function m(M,k){return 3===M.length?1===k[2]&&k[1]===M[0]*M[2]&&k[0]===M[2]:1===k[0]&&k[1]===M[0]}function l(M){var k=M.createTexture();return M.bindTexture(M.TEXTURE_2D,k),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),k}function w(M,k,E,P,S){var F=M.getParameter(M.MAX_TEXTURE_SIZE);if(k<0||k>F||E<0||E>F)throw new Error("gl-texture2d: Invalid texture shape");if(S===M.FLOAT&&!M.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var R=l(M);return M.texImage2D(M.TEXTURE_2D,0,P,k,E,0,P,S,null),new p(M,R,k,E,P,S)}function v(M,k,E,P,S,F){var R=l(M);return M.texImage2D(M.TEXTURE_2D,0,S,S,F,k),new p(M,R,E,P,S,F)}function A(M,k){var E=k.dtype,P=k.shape.slice(),S=M.getParameter(M.MAX_TEXTURE_SIZE);if(P[0]<0||P[0]>S||P[1]<0||P[1]>S)throw new Error("gl-texture2d: Invalid texture size");var F=m(P,k.stride.slice()),R=0;"float32"===E?R=M.FLOAT:"float64"===E?(R=M.FLOAT,F=!1,E="float32"):"uint8"===E?R=M.UNSIGNED_BYTE:(R=M.UNSIGNED_BYTE,F=!1,E="uint8");var D,L,B=0;if(2===P.length)B=M.LUMINANCE,k=e(k.data,P=[P[0],P[1],1],[k.stride[0],k.stride[1],1],k.offset);else{if(3!==P.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===P[2])B=M.ALPHA;else if(2===P[2])B=M.LUMINANCE_ALPHA;else if(3===P[2])B=M.RGB;else{if(4!==P[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");B=M.RGBA}}R!==M.FLOAT||M.getExtension("OES_texture_float")||(R=M.UNSIGNED_BYTE,F=!1);var V=k.size;if(F)D=0===k.offset&&k.data.length===V?k.data:k.data.subarray(k.offset,k.offset+V);else{var Z=[P[2],P[2]*P[0],1];L=t.malloc(V,E);var Y=e(L,P,Z,0);"float32"!==E&&"float64"!==E||R!==M.UNSIGNED_BYTE?r.assign(Y,k):u(Y,k),D=L.subarray(0,V)}var ee=l(M);return M.texImage2D(M.TEXTURE_2D,0,B,P[0],P[1],0,B,R,D),F||t.free(L),new p(M,ee,P[0],P[1],B,R)}Object.defineProperties(y,{minFilter:{get:function(){return this._minFilter},set:function(M){this.bind();var k=this.gl;if(this.type===k.FLOAT&&a.indexOf(M)>=0&&(k.getExtension("OES_texture_float_linear")||(M=k.NEAREST)),n.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,M),this._minFilter=M}},magFilter:{get:function(){return this._magFilter},set:function(M){this.bind();var k=this.gl;if(this.type===k.FLOAT&&a.indexOf(M)>=0&&(k.getExtension("OES_texture_float_linear")||(M=k.NEAREST)),n.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,M),this._magFilter=M}},mipSamples:{get:function(){return this._anisoSamples},set:function(M){var k=this._anisoSamples;if(this._anisoSamples=0|Math.max(M,1),k!==this._anisoSamples){var E=this.gl.getExtension("EXT_texture_filter_anisotropic");E&&this.gl.texParameterf(this.gl.TEXTURE_2D,E.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(M){if(this.bind(),d.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,M),this._wrapS=M}},wrapT:{get:function(){return this._wrapT},set:function(M){if(this.bind(),d.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,M),this._wrapT=M}},wrap:{get:function(){return this._wrapVector},set:function(M){if(Array.isArray(M)||(M=[M,M]),2!==M.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var k=0;k<2;++k)if(d.indexOf(M[k])<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);this._wrapS=M[0],this._wrapT=M[1];var E=this.gl;return this.bind(),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,this._wrapS),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,this._wrapT),M}},shape:{get:function(){return this._shapeVector},set:function(M){if(Array.isArray(M)){if(2!==M.length)throw new Error("gl-texture2d: Invalid texture shape")}else M=[0|M,0|M];return f(this,0|M[0],0|M[1]),[0|M[0],0|M[1]]}},width:{get:function(){return this._shape[0]},set:function(M){return f(this,M|=0,this._shape[1]),M}},height:{get:function(){return this._shape[1]},set:function(M){return f(this,this._shape[0],M|=0),M}}}),y.bind=function(M){var k=this.gl;return void 0!==M&&k.activeTexture(k.TEXTURE0+(0|M)),k.bindTexture(k.TEXTURE_2D,this.handle),void 0!==M?0|M:k.getParameter(k.ACTIVE_TEXTURE)-k.TEXTURE0},y.dispose=function(){this.gl.deleteTexture(this.handle)},y.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var M=Math.min(this._shape[0],this._shape[1]),k=0;M>0;++k,M>>>=1)this._mipLevels.indexOf(k)<0&&this._mipLevels.push(k)},y.setPixels=function(M,k,E,P){var S=this.gl;this.bind(),Array.isArray(k)?(P=E,E=0|k[1],k=0|k[0]):(k=k||0,E=E||0),P=P||0;var F=i(M)?M:M.raw;if(F)this._mipLevels.indexOf(P)<0?(S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,this.type,F),this._mipLevels.push(P)):S.texSubImage2D(S.TEXTURE_2D,P,k,E,this.format,this.type,F);else{if(!(M.shape&&M.stride&&M.data))throw new Error("gl-texture2d: Unsupported data type");if(M.shape.length<2||k+M.shape[1]>this._shape[1]>>>P||E+M.shape[0]>this._shape[0]>>>P||k<0||E<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(R,D,L,B,V,Z,Y,ee){var Q=ee.dtype,$=ee.shape.slice();if($.length<2||$.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var K=0,oe=0,j=m($,ee.stride.slice());if("float32"===Q?K=R.FLOAT:"float64"===Q?(K=R.FLOAT,j=!1,Q="float32"):"uint8"===Q?K=R.UNSIGNED_BYTE:(K=R.UNSIGNED_BYTE,j=!1,Q="uint8"),2===$.length)oe=R.LUMINANCE,ee=e(ee.data,$=[$[0],$[1],1],[ee.stride[0],ee.stride[1],1],ee.offset);else{if(3!==$.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===$[2])oe=R.ALPHA;else if(2===$[2])oe=R.LUMINANCE_ALPHA;else if(3===$[2])oe=R.RGB;else{if(4!==$[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");oe=R.RGBA}}if(oe!==R.LUMINANCE&&oe!==R.ALPHA||V!==R.LUMINANCE&&V!==R.ALPHA||(oe=V),oe!==V)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var H=ee.size,G=Y.indexOf(B)<0;if(G&&Y.push(B),K===Z&&j)0===ee.offset&&ee.data.length===H?G?R.texImage2D(R.TEXTURE_2D,B,V,$[0],$[1],0,V,Z,ee.data):R.texSubImage2D(R.TEXTURE_2D,B,D,L,$[0],$[1],V,Z,ee.data):G?R.texImage2D(R.TEXTURE_2D,B,V,$[0],$[1],0,V,Z,ee.data.subarray(ee.offset,ee.offset+H)):R.texSubImage2D(R.TEXTURE_2D,B,D,L,$[0],$[1],V,Z,ee.data.subarray(ee.offset,ee.offset+H));else{var re;re=Z===R.FLOAT?t.mallocFloat32(H):t.mallocUint8(H);var q=e(re,$,[$[2],$[2]*$[0],1]);K===R.FLOAT&&Z===R.UNSIGNED_BYTE?u(q,ee):r.assign(q,ee),G?R.texImage2D(R.TEXTURE_2D,B,V,$[0],$[1],0,V,Z,re.subarray(0,H)):R.texSubImage2D(R.TEXTURE_2D,B,D,L,$[0],$[1],V,Z,re.subarray(0,H)),Z===R.FLOAT?t.freeFloat32(re):t.freeUint8(re)}}(S,k,E,P,this.format,this.type,this._mipLevels,M)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(x,T,b){"use strict";T.exports=function(e,r,t){r?r.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var a=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(t){if(t.length>a)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<t.length;++n){var d=t[n];if(d.buffer){var i=d.size||4,u=d.type||e.FLOAT,f=!!d.normalized,p=d.stride||0,y=d.offset||0;d.buffer.bind(),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,i,u,f,p,y)}else{if("number"==typeof d)e.vertexAttrib1f(n,d);else if(1===d.length)e.vertexAttrib1f(n,d[0]);else if(2===d.length)e.vertexAttrib2f(n,d[0],d[1]);else if(3===d.length)e.vertexAttrib3f(n,d[0],d[1],d[2]);else{if(4!==d.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(n,d[0],d[1],d[2],d[3])}e.disableVertexAttribArray(n)}}for(;n<a;++n)e.disableVertexAttribArray(n)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),n=0;n<a;++n)e.disableVertexAttribArray(n)}},{}],148:[function(x,T,b){"use strict";var e=x("./do-bind.js");function r(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}r.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},r.prototype.update=function(t,a,n){this._elements=a,this._attributes=t,this._elementsType=n||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(t,a,n){n=n||0;var d=this.gl;this._elements?d.drawElements(t,a,this._elementsType,n):d.drawArrays(t,n,a)},T.exports=function(t){return new r(t)}},{"./do-bind.js":147}],149:[function(x,T,b){"use strict";var e=x("./do-bind.js");function r(a,n,d,s,i,u){this.location=a,this.dimension=n,this.a=d,this.b=s,this.c=i,this.d=u}function t(a,n,d){this.gl=a,this._ext=n,this.handle=d,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},t.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},t.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},t.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},t.prototype.update=function(a,n,d){if(this.bind(),e(this.gl,n,a),this.unbind(),this._attribs.length=0,a)for(var s=0;s<a.length;++s){var i=a[s];"number"==typeof i?this._attribs.push(new r(s,1,i)):Array.isArray(i)&&this._attribs.push(new r(s,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!n,this._elementsType=d||this.gl.UNSIGNED_SHORT},t.prototype.draw=function(a,n,d){d=d||0;var s=this.gl;this._useElements?s.drawElements(a,n,this._elementsType,d):s.drawArrays(a,d,n)},T.exports=function(a,n){return new t(a,n,n.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(x,T,b){"use strict";var e=x("./lib/vao-native.js"),r=x("./lib/vao-emulated.js");function t(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}T.exports=function(a,n,d,s){var i,u=a.createVertexArray?new t(a):a.getExtension("OES_vertex_array_object");return(i=u?e(a,u):r(a)).update(n,d,s),i}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(x,T,b){T.exports=function(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e}},{}],152:[function(x,T,b){T.exports=function(a,n){var d=e(a[0],a[1],a[2]),s=e(n[0],n[1],n[2]);r(d,d),r(s,s);var i=t(d,s);return i>1?0:Math.acos(i)};var e=x("./fromValues"),r=x("./normalize"),t=x("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(x,T,b){T.exports=function(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e}},{}],154:[function(x,T,b){T.exports=function(e){var r=new Float32Array(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}},{}],155:[function(x,T,b){T.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}},{}],156:[function(x,T,b){T.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(x,T,b){T.exports=function(e,r,t){var a=r[0],n=r[1],d=r[2],s=t[0],i=t[1],u=t[2];return e[0]=n*u-d*i,e[1]=d*s-a*u,e[2]=a*i-n*s,e}},{}],158:[function(x,T,b){T.exports=x("./distance")},{"./distance":159}],159:[function(x,T,b){T.exports=function(e,r){var t=r[0]-e[0],a=r[1]-e[1],n=r[2]-e[2];return Math.sqrt(t*t+a*a+n*n)}},{}],160:[function(x,T,b){T.exports=x("./divide")},{"./divide":161}],161:[function(x,T,b){T.exports=function(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e[2]=r[2]/t[2],e}},{}],162:[function(x,T,b){T.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}},{}],163:[function(x,T,b){T.exports=1e-6},{}],164:[function(x,T,b){T.exports=function(r,t){var a=r[0],n=r[1],d=r[2],s=t[0],i=t[1],u=t[2];return Math.abs(a-s)<=e*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(n-i)<=e*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(d-u)<=e*Math.max(1,Math.abs(d),Math.abs(u))};var e=x("./epsilon")},{"./epsilon":163}],165:[function(x,T,b){T.exports=function(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}},{}],166:[function(x,T,b){T.exports=function(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e}},{}],167:[function(x,T,b){T.exports=function(r,t,a,n,d,s){var i,u;for(t||(t=3),a||(a=0),u=n?Math.min(n*t+a,r.length):r.length,i=a;i<u;i+=t)e[0]=r[i],e[1]=r[i+1],e[2]=r[i+2],d(e,e,s),r[i]=e[0],r[i+1]=e[1],r[i+2]=e[2];return r};var e=x("./create")()},{"./create":156}],168:[function(x,T,b){T.exports=function(e,r,t){var a=new Float32Array(3);return a[0]=e,a[1]=r,a[2]=t,a}},{}],169:[function(x,T,b){T.exports={EPSILON:x("./epsilon"),create:x("./create"),clone:x("./clone"),angle:x("./angle"),fromValues:x("./fromValues"),copy:x("./copy"),set:x("./set"),equals:x("./equals"),exactEquals:x("./exactEquals"),add:x("./add"),subtract:x("./subtract"),sub:x("./sub"),multiply:x("./multiply"),mul:x("./mul"),divide:x("./divide"),div:x("./div"),min:x("./min"),max:x("./max"),floor:x("./floor"),ceil:x("./ceil"),round:x("./round"),scale:x("./scale"),scaleAndAdd:x("./scaleAndAdd"),distance:x("./distance"),dist:x("./dist"),squaredDistance:x("./squaredDistance"),sqrDist:x("./sqrDist"),length:x("./length"),len:x("./len"),squaredLength:x("./squaredLength"),sqrLen:x("./sqrLen"),negate:x("./negate"),inverse:x("./inverse"),normalize:x("./normalize"),dot:x("./dot"),cross:x("./cross"),lerp:x("./lerp"),random:x("./random"),transformMat4:x("./transformMat4"),transformMat3:x("./transformMat3"),transformQuat:x("./transformQuat"),rotateX:x("./rotateX"),rotateY:x("./rotateY"),rotateZ:x("./rotateZ"),forEach:x("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(x,T,b){T.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}},{}],171:[function(x,T,b){T.exports=x("./length")},{"./length":172}],172:[function(x,T,b){T.exports=function(e){var r=e[0],t=e[1],a=e[2];return Math.sqrt(r*r+t*t+a*a)}},{}],173:[function(x,T,b){T.exports=function(e,r,t,a){var n=r[0],d=r[1],s=r[2];return e[0]=n+a*(t[0]-n),e[1]=d+a*(t[1]-d),e[2]=s+a*(t[2]-s),e}},{}],174:[function(x,T,b){T.exports=function(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e[2]=Math.max(r[2],t[2]),e}},{}],175:[function(x,T,b){T.exports=function(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e[2]=Math.min(r[2],t[2]),e}},{}],176:[function(x,T,b){T.exports=x("./multiply")},{"./multiply":177}],177:[function(x,T,b){T.exports=function(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e}},{}],178:[function(x,T,b){T.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}},{}],179:[function(x,T,b){T.exports=function(e,r){var t=r[0],a=r[1],n=r[2],d=t*t+a*a+n*n;return d>0&&(d=1/Math.sqrt(d),e[0]=r[0]*d,e[1]=r[1]*d,e[2]=r[2]*d),e}},{}],180:[function(x,T,b){T.exports=function(e,r){r=r||1;var t=2*Math.random()*Math.PI,a=2*Math.random()-1,n=Math.sqrt(1-a*a)*r;return e[0]=Math.cos(t)*n,e[1]=Math.sin(t)*n,e[2]=a*r,e}},{}],181:[function(x,T,b){T.exports=function(e,r,t,a){var n=t[1],d=t[2],s=r[1]-n,i=r[2]-d,u=Math.sin(a),f=Math.cos(a);return e[0]=r[0],e[1]=n+s*f-i*u,e[2]=d+s*u+i*f,e}},{}],182:[function(x,T,b){T.exports=function(e,r,t,a){var n=t[0],d=t[2],s=r[0]-n,i=r[2]-d,u=Math.sin(a),f=Math.cos(a);return e[0]=n+i*u+s*f,e[1]=r[1],e[2]=d+i*f-s*u,e}},{}],183:[function(x,T,b){T.exports=function(e,r,t,a){var n=t[0],d=t[1],s=r[0]-n,i=r[1]-d,u=Math.sin(a),f=Math.cos(a);return e[0]=n+s*f-i*u,e[1]=d+s*u+i*f,e[2]=r[2],e}},{}],184:[function(x,T,b){T.exports=function(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e}},{}],185:[function(x,T,b){T.exports=function(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e}},{}],186:[function(x,T,b){T.exports=function(e,r,t,a){return e[0]=r[0]+t[0]*a,e[1]=r[1]+t[1]*a,e[2]=r[2]+t[2]*a,e}},{}],187:[function(x,T,b){T.exports=function(e,r,t,a){return e[0]=r,e[1]=t,e[2]=a,e}},{}],188:[function(x,T,b){T.exports=x("./squaredDistance")},{"./squaredDistance":190}],189:[function(x,T,b){T.exports=x("./squaredLength")},{"./squaredLength":191}],190:[function(x,T,b){T.exports=function(e,r){var t=r[0]-e[0],a=r[1]-e[1],n=r[2]-e[2];return t*t+a*a+n*n}},{}],191:[function(x,T,b){T.exports=function(e){var r=e[0],t=e[1],a=e[2];return r*r+t*t+a*a}},{}],192:[function(x,T,b){T.exports=x("./subtract")},{"./subtract":193}],193:[function(x,T,b){T.exports=function(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e}},{}],194:[function(x,T,b){T.exports=function(e,r,t){var a=r[0],n=r[1],d=r[2];return e[0]=a*t[0]+n*t[3]+d*t[6],e[1]=a*t[1]+n*t[4]+d*t[7],e[2]=a*t[2]+n*t[5]+d*t[8],e}},{}],195:[function(x,T,b){T.exports=function(e,r,t){var a=r[0],n=r[1],d=r[2],s=t[3]*a+t[7]*n+t[11]*d+t[15];return e[0]=(t[0]*a+t[4]*n+t[8]*d+t[12])/(s=s||1),e[1]=(t[1]*a+t[5]*n+t[9]*d+t[13])/s,e[2]=(t[2]*a+t[6]*n+t[10]*d+t[14])/s,e}},{}],196:[function(x,T,b){T.exports=function(e,r,t){var a=r[0],n=r[1],d=r[2],s=t[0],i=t[1],u=t[2],f=t[3],p=f*a+i*d-u*n,y=f*n+u*a-s*d,m=f*d+s*n-i*a,l=-s*a-i*n-u*d;return e[0]=p*f+l*-s+y*-u-m*-i,e[1]=y*f+l*-i+m*-s-p*-u,e[2]=m*f+l*-u+p*-i-y*-s,e}},{}],197:[function(x,T,b){T.exports=function(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e}},{}],198:[function(x,T,b){T.exports=function(e){var r=new Float32Array(4);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}},{}],199:[function(x,T,b){T.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}},{}],200:[function(x,T,b){T.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(x,T,b){T.exports=function(e,r){var t=r[0]-e[0],a=r[1]-e[1],n=r[2]-e[2],d=r[3]-e[3];return Math.sqrt(t*t+a*a+n*n+d*d)}},{}],202:[function(x,T,b){T.exports=function(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e[2]=r[2]/t[2],e[3]=r[3]/t[3],e}},{}],203:[function(x,T,b){T.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}},{}],204:[function(x,T,b){T.exports=function(e,r,t,a){var n=new Float32Array(4);return n[0]=e,n[1]=r,n[2]=t,n[3]=a,n}},{}],205:[function(x,T,b){T.exports={create:x("./create"),clone:x("./clone"),fromValues:x("./fromValues"),copy:x("./copy"),set:x("./set"),add:x("./add"),subtract:x("./subtract"),multiply:x("./multiply"),divide:x("./divide"),min:x("./min"),max:x("./max"),scale:x("./scale"),scaleAndAdd:x("./scaleAndAdd"),distance:x("./distance"),squaredDistance:x("./squaredDistance"),length:x("./length"),squaredLength:x("./squaredLength"),negate:x("./negate"),inverse:x("./inverse"),normalize:x("./normalize"),dot:x("./dot"),lerp:x("./lerp"),random:x("./random"),transformMat4:x("./transformMat4"),transformQuat:x("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(x,T,b){T.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e}},{}],207:[function(x,T,b){T.exports=function(e){var r=e[0],t=e[1],a=e[2],n=e[3];return Math.sqrt(r*r+t*t+a*a+n*n)}},{}],208:[function(x,T,b){T.exports=function(e,r,t,a){var n=r[0],d=r[1],s=r[2],i=r[3];return e[0]=n+a*(t[0]-n),e[1]=d+a*(t[1]-d),e[2]=s+a*(t[2]-s),e[3]=i+a*(t[3]-i),e}},{}],209:[function(x,T,b){T.exports=function(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e[2]=Math.max(r[2],t[2]),e[3]=Math.max(r[3],t[3]),e}},{}],210:[function(x,T,b){T.exports=function(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e[2]=Math.min(r[2],t[2]),e[3]=Math.min(r[3],t[3]),e}},{}],211:[function(x,T,b){T.exports=function(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e[3]=r[3]*t[3],e}},{}],212:[function(x,T,b){T.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e}},{}],213:[function(x,T,b){T.exports=function(e,r){var t=r[0],a=r[1],n=r[2],d=r[3],s=t*t+a*a+n*n+d*d;return s>0&&(s=1/Math.sqrt(s),e[0]=t*s,e[1]=a*s,e[2]=n*s,e[3]=d*s),e}},{}],214:[function(x,T,b){var e=x("./normalize"),r=x("./scale");T.exports=function(t,a){return a=a||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),e(t,t),r(t,t,a),t}},{"./normalize":213,"./scale":215}],215:[function(x,T,b){T.exports=function(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e}},{}],216:[function(x,T,b){T.exports=function(e,r,t,a){return e[0]=r[0]+t[0]*a,e[1]=r[1]+t[1]*a,e[2]=r[2]+t[2]*a,e[3]=r[3]+t[3]*a,e}},{}],217:[function(x,T,b){T.exports=function(e,r,t,a,n){return e[0]=r,e[1]=t,e[2]=a,e[3]=n,e}},{}],218:[function(x,T,b){T.exports=function(e,r){var t=r[0]-e[0],a=r[1]-e[1],n=r[2]-e[2],d=r[3]-e[3];return t*t+a*a+n*n+d*d}},{}],219:[function(x,T,b){T.exports=function(e){var r=e[0],t=e[1],a=e[2],n=e[3];return r*r+t*t+a*a+n*n}},{}],220:[function(x,T,b){T.exports=function(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e[3]=r[3]-t[3],e}},{}],221:[function(x,T,b){T.exports=function(e,r,t){var a=r[0],n=r[1],d=r[2],s=r[3];return e[0]=t[0]*a+t[4]*n+t[8]*d+t[12]*s,e[1]=t[1]*a+t[5]*n+t[9]*d+t[13]*s,e[2]=t[2]*a+t[6]*n+t[10]*d+t[14]*s,e[3]=t[3]*a+t[7]*n+t[11]*d+t[15]*s,e}},{}],222:[function(x,T,b){T.exports=function(e,r,t){var a=r[0],n=r[1],d=r[2],s=t[0],i=t[1],u=t[2],f=t[3],p=f*a+i*d-u*n,y=f*n+u*a-s*d,m=f*d+s*n-i*a,l=-s*a-i*n-u*d;return e[0]=p*f+l*-s+y*-u-m*-i,e[1]=y*f+l*-i+m*-s-p*-u,e[2]=m*f+l*-u+p*-i-y*-s,e[3]=r[3],e}},{}],223:[function(x,T,b){var e=x("glsl-tokenizer"),r=x("atob-lite");T.exports=function(t){for(var a=Array.isArray(t)?t:e(t),n=0;n<a.length;n++){var d=a[n];if("preprocessor"===d.type){var s=d.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(s&&s[2]){var u=s[2];return(s[1]?r(u):u).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(x,T,b){T.exports=function(s){var i,u,f,p=0,y=0,m=999,l=[],w=[],v=1,A=0,M=0,k=!1,E=!1,P="",S=t,F=e;"300 es"===(s=s||{}).version&&(S=n,F=a);var R={},D={};for(p=0;p<S.length;p++)R[S[p]]=!0;for(p=0;p<F.length;p++)D[F[p]]=!0;return function(H){return w=[],null!==H?function(G){var re;for(p=0,G.toString&&(G=G.toString()),P+=G.replace(/\r\n/g,"\n"),f=P.length;i=P[p],p<f;){switch(re=p,m){case 0:p="/"===i&&"*"===u?(l.push(i),L(l.join("")),m=999,p+1):(l.push(i),u=i,p+1);break;case 1:case 2:p="\r"!==i&&"\n"!==i||"\\"===u?(l.push(i),u=i,p+1):(L(l.join("")),m=999,p);break;case 3:p=ee();break;case 4:p="."===i||/[eE]/.test(i)?(l.push(i),m=5,u=i,p+1):"x"===i&&1===l.length&&"0"===l[0]?(m=11,l.push(i),u=i,p+1):/[^\d]/.test(i)?(L(l.join("")),m=999,p):(l.push(i),u=i,p+1);break;case 11:p=/[^a-fA-F0-9]/.test(i)?(L(l.join("")),m=999,p):(l.push(i),u=i,p+1);break;case 5:"f"===i&&(l.push(i),u=i,p+=1),p=/[eE]/.test(i)?(l.push(i),u=i,p+1):("-"!==i&&"+"!==i||!/[eE]/.test(u))&&/[^\d]/.test(i)?(L(l.join("")),m=999,p):(l.push(i),u=i,p+1);break;case 9999:p=j();break;case 9:p=/[^\s]/g.test(i)?(L(l.join("")),m=999,p):(l.push(i),u=i,p+1);break;case 999:l=l.length?[]:l,p="/"===u&&"*"===i?(M=y+p-1,m=0,u=i,p+1):"/"===u&&"/"===i?(M=y+p-1,m=1,u=i,p+1):"#"===i?(m=2,M=y+p,p):/\s/.test(i)?(m=9,M=y+p,p):(k=/\d/.test(i),E=/[^\w_]/.test(i),M=y+p,m=k?4:E?3:9999,p)}re!==p&&("\n"===P[re]?(A=0,++v):++A)}return y+=p,P=P.slice(p),w}(H):(l.length&&L(l.join("")),m=10,L("(eof)"),w)};function L(H){H.length&&w.push({type:d[m],data:H,position:M,line:v,column:A})}function ee(){if("."===u&&/\d/.test(i))return m=5,p;if("/"===u&&"*"===i)return m=0,p;if("/"===u&&"/"===i)return m=1,p;if("."===i&&l.length){for(;Q(l););return m=5,p}if(";"===i||")"===i||"("===i){if(l.length)for(;Q(l););return L(i),m=999,p+1}var H=2===l.length&&"="!==i;if(/[\w_\d\s]/.test(i)||H){for(;Q(l););return m=999,p}return l.push(i),u=i,p+1}function Q(H){for(var G,re,q=0;;){if(G=r.indexOf(H.slice(0,H.length+q).join("")),re=r[G],-1===G){if(q--+H.length>0)continue;re=H.slice(0,1).join("")}return L(re),M+=re.length,(l=l.slice(re.length)).length}}function j(){if(/[^\d\w_]/.test(i)){var H=l.join("");return m=D[H]?8:R[H]?7:6,L(l.join("")),m=999,p}return l.push(i),u=i,p+1}};var e=x("./lib/literals"),r=x("./lib/operators"),t=x("./lib/builtins"),a=x("./lib/literals-300es"),n=x("./lib/builtins-300es"),d=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(x,T,b){var e=x("./builtins");e=e.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),T.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(x,T,b){T.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(x,T,b){var e=x("./literals");T.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(x,T,b){T.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(x,T,b){T.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(x,T,b){var e=x("./index");T.exports=function(r,t){var a=e(t),n=[];return(n=n.concat(a(r))).concat(a(null))}},{"./index":224}],231:[function(x,T,b){T.exports=function(e){"string"==typeof e&&(e=[e]);for(var r=[].slice.call(arguments,1),t=[],a=0;a<e.length-1;a++)t.push(e[a],r[a]||"");return t.push(e[a]),t.join("")}},{}],232:[function(x,T,b){"use strict";var e=x("is-browser");T.exports=e&&function(){var r=!1;try{var t=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(a){r=!1}return r}()},{"is-browser":236}],233:[function(x,T,b){"use strict";T.exports=function(u,f){var p=u.length;if(0===p)throw new Error("Must have at least d+1 points");var y=u[0].length;if(p<=y)throw new Error("Must input at least d+1 points");var m=u.slice(0,y+1),l=e.apply(void 0,m);if(0===l)throw new Error("Input not in general position");for(var w=new Array(y+1),v=0;v<=y;++v)w[v]=v;l<0&&(w[0]=1,w[1]=0);var A=new t(w,new Array(y+1),!1),M=A.adjacent,k=new Array(y+2);for(v=0;v<=y;++v){for(var E=w.slice(),P=0;P<=y;++P)P===v&&(E[P]=-1);var S=E[0];E[0]=E[1],E[1]=S;var F=new t(E,new Array(y+1),!0);M[v]=F,k[v]=F}for(k[y+1]=A,v=0;v<=y;++v){E=M[v].vertices;var R=M[v].adjacent;for(P=0;P<=y;++P){var D=E[P];if(D<0)R[P]=A;else for(var L=0;L<=y;++L)M[L].vertices.indexOf(D)<0&&(R[P]=M[L])}}var B=new s(y,m,k),V=!!f;for(v=y+1;v<p;++v)B.insert(u[v],V);return B.boundary()};var e=x("robust-orientation"),r=x("simplicial-complex").compareCells;function t(u,f,p){this.vertices=u,this.adjacent=f,this.boundary=p,this.lastVisited=-1}function a(u,f,p){this.vertices=u,this.cell=f,this.index=p}function n(u,f){return r(u.vertices,f.vertices)}t.prototype.flip=function(){var u=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=u;var f=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=f};var d=[];function s(u,f,p){this.dimension=u,this.vertices=f,this.simplices=p,this.interior=p.filter(function(w){return!w.boundary}),this.tuple=new Array(u+1);for(var y=0;y<=u;++y)this.tuple[y]=this.vertices[y];var m,w,l=d[u];l||(l=d[u]=((m=e[u+1])||(m=e),w=m,function(){return w.apply(this,this.tuple)})),this.orient=l}var i=s.prototype;i.handleBoundaryDegeneracy=function(u,f){var p=this.dimension,y=this.vertices.length-1,m=this.tuple,l=this.vertices,w=[u];for(u.lastVisited=-y;w.length>0;)for(var v=(u=w.pop()).adjacent,A=0;A<=p;++A){var M=v[A];if(M.boundary&&!(M.lastVisited<=-y)){for(var k=M.vertices,E=0;E<=p;++E){var P=k[E];m[E]=P<0?f:l[P]}var S=this.orient();if(S>0)return M;M.lastVisited=-y,0===S&&w.push(M)}}return null},i.walk=function(u,f){var p=this.vertices.length-1,y=this.dimension,m=this.vertices,l=this.tuple,w=f?this.interior.length*Math.random()|0:this.interior.length-1,v=this.interior[w];e:for(;!v.boundary;){for(var A=v.vertices,M=v.adjacent,k=0;k<=y;++k)l[k]=m[A[k]];for(v.lastVisited=p,k=0;k<=y;++k){var E=M[k];if(!(E.lastVisited>=p)){var P=l[k];l[k]=u;var S=this.orient();if(l[k]=P,S<0){v=E;continue e}E.lastVisited=E.boundary?-p:p}}return}return v},i.addPeaks=function(u,f){var p=this.vertices.length-1,y=this.dimension,m=this.vertices,l=this.tuple,w=this.interior,v=this.simplices,A=[f];f.lastVisited=p,f.vertices[f.vertices.indexOf(-1)]=p,f.boundary=!1,w.push(f);for(var M=[];A.length>0;){var k=(f=A.pop()).vertices,E=f.adjacent,P=k.indexOf(p);if(!(P<0))for(var S=0;S<=y;++S)if(S!==P){var F=E[S];if(F.boundary&&!(F.lastVisited>=p)){var R=F.vertices;if(F.lastVisited!==-p){for(var D=0,L=0;L<=y;++L)R[L]<0?(D=L,l[L]=u):l[L]=m[R[L]];if(this.orient()>0){R[D]=p,F.boundary=!1,w.push(F),A.push(F),F.lastVisited=p;continue}F.lastVisited=-p}var B=F.adjacent,V=k.slice(),Z=E.slice(),Y=new t(V,Z,!0);v.push(Y);var ee=B.indexOf(f);if(!(ee<0))for(B[ee]=Y,Z[P]=F,V[S]=-1,Z[S]=f,E[S]=Y,Y.flip(),L=0;L<=y;++L){var Q=V[L];if(!(Q<0||Q===p)){for(var $=new Array(y-1),K=0,oe=0;oe<=y;++oe){var j=V[oe];j<0||oe===L||($[K++]=j)}M.push(new a($,Y,L))}}}}}for(M.sort(n),S=0;S+1<M.length;S+=2){var H=M[S],G=M[S+1];H.index<0||G.index<0||(H.cell.adjacent[H.index]=G.cell,G.cell.adjacent[G.index]=H.cell)}},i.insert=function(u,f){var p=this.vertices;p.push(u);var y=this.walk(u,f);if(y){for(var m=this.dimension,l=this.tuple,w=0;w<=m;++w){var v=y.vertices[w];l[w]=v<0?u:p[v]}var A=this.orient(l);A<0||(0!==A||(y=this.handleBoundaryDegeneracy(y,u)))&&this.addPeaks(u,y)}},i.boundary=function(){for(var u=this.dimension,f=[],p=this.simplices,y=p.length,m=0;m<y;++m){var l=p[m];if(l.boundary){for(var w=new Array(u),v=l.vertices,A=0,M=0,k=0;k<=u;++k)v[k]>=0?w[A++]=v[k]:M=1&k;if(M===(1&u)){var E=w[0];w[0]=w[1],w[1]=E}f.push(w)}}return f}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(x,T,b){"use strict";var e=x("binary-search-bounds");function r(A,M,k,E,P){this.mid=A,this.left=M,this.right=k,this.leftPoints=E,this.rightPoints=P,this.count=(M?M.count:0)+(k?k.count:0)+E.length}T.exports=function(A){return new w(A&&0!==A.length?l(A):null)};var t=r.prototype;function a(A,M){A.mid=M.mid,A.left=M.left,A.right=M.right,A.leftPoints=M.leftPoints,A.rightPoints=M.rightPoints,A.count=M.count}function n(A,M){var k=l(M);A.mid=k.mid,A.left=k.left,A.right=k.right,A.leftPoints=k.leftPoints,A.rightPoints=k.rightPoints,A.count=k.count}function d(A,M){var k=A.intervals([]);k.push(M),n(A,k)}function s(A,M){var k=A.intervals([]),E=k.indexOf(M);return E<0?0:(k.splice(E,1),n(A,k),1)}function i(A,M,k){for(var E=0;E<A.length&&A[E][0]<=M;++E){var P=k(A[E]);if(P)return P}}function u(A,M,k){for(var E=A.length-1;E>=0&&A[E][1]>=M;--E){var P=k(A[E]);if(P)return P}}function f(A,M){for(var k=0;k<A.length;++k){var E=M(A[k]);if(E)return E}}function p(A,M){return A-M}function y(A,M){return A[0]-M[0]||A[1]-M[1]}function m(A,M){return A[1]-M[1]||A[0]-M[0]}function l(A){if(0===A.length)return null;for(var M=[],k=0;k<A.length;++k)M.push(A[k][0],A[k][1]);M.sort(p);var E=M[M.length>>1],P=[],S=[],F=[];for(k=0;k<A.length;++k){var R=A[k];R[1]<E?P.push(R):E<R[0]?S.push(R):F.push(R)}var D=F,L=F.slice();return D.sort(y),L.sort(m),new r(E,l(P),l(S),D,L)}function w(A){this.root=A}t.intervals=function(A){return A.push.apply(A,this.leftPoints),this.left&&this.left.intervals(A),this.right&&this.right.intervals(A),A},t.insert=function(A){var M=this.count-this.leftPoints.length;if(this.count+=1,A[1]<this.mid)this.left?4*(this.left.count+1)>3*(M+1)?d(this,A):this.left.insert(A):this.left=l([A]);else if(A[0]>this.mid)this.right?4*(this.right.count+1)>3*(M+1)?d(this,A):this.right.insert(A):this.right=l([A]);else{var k=e.ge(this.leftPoints,A,y),E=e.ge(this.rightPoints,A,m);this.leftPoints.splice(k,0,A),this.rightPoints.splice(E,0,A)}},t.remove=function(A){var M=this.count-this.leftPoints;if(A[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(M-1)?s(this,A):2===(S=this.left.remove(A))?(this.left=null,this.count-=1,1):(1===S&&(this.count-=1),S):0;if(A[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(M-1)?s(this,A):2===(S=this.right.remove(A))?(this.right=null,this.count-=1,1):(1===S&&(this.count-=1),S):0;if(1===this.count)return this.leftPoints[0]===A?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===A){if(this.left&&this.right){for(var k=this,E=this.left;E.right;)k=E,E=E.right;if(k===this)E.right=this.right;else{var P=this.left,S=this.right;k.count-=E.count,k.right=E.left,E.left=P,E.right=S}a(this,E),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else a(this,this.left?this.left:this.right);return 1}for(P=e.ge(this.leftPoints,A,y);P<this.leftPoints.length&&this.leftPoints[P][0]===A[0];++P)if(this.leftPoints[P]===A)for(this.count-=1,this.leftPoints.splice(P,1),S=e.ge(this.rightPoints,A,m);S<this.rightPoints.length&&this.rightPoints[S][1]===A[1];++S)if(this.rightPoints[S]===A)return this.rightPoints.splice(S,1),1;return 0},t.queryPoint=function(A,M){return A<this.mid?this.left&&(k=this.left.queryPoint(A,M))?k:i(this.leftPoints,A,M):A>this.mid?this.right&&(k=this.right.queryPoint(A,M))?k:u(this.rightPoints,A,M):f(this.leftPoints,M);var k},t.queryInterval=function(A,M,k){var E;return A<this.mid&&this.left&&(E=this.left.queryInterval(A,M,k))||M>this.mid&&this.right&&(E=this.right.queryInterval(A,M,k))?E:M<this.mid?i(this.leftPoints,M,k):A>this.mid?u(this.rightPoints,A,k):f(this.leftPoints,k)};var v=w.prototype;v.insert=function(A){this.root?this.root.insert(A):this.root=new r(A[0],null,null,[A],[A])},v.remove=function(A){if(this.root){var M=this.root.remove(A);return 2===M&&(this.root=null),0!==M}return!1},v.queryPoint=function(A,M){if(this.root)return this.root.queryPoint(A,M)},v.queryInterval=function(A,M,k){if(A<=M&&this.root)return this.root.queryInterval(A,M,k)},Object.defineProperty(v,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(v,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(x,T,b){"use strict";T.exports=function(e){for(var r=new Array(e),t=0;t<e;++t)r[t]=t;return r}},{}],236:[function(x,T,b){T.exports=!0},{}],237:[function(x,T,b){function e(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}T.exports=function(r){return null!=r&&(e(r)||"function"==typeof(t=r).readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))||!!r._isBuffer);var t}},{}],238:[function(x,T,b){"use strict";T.exports=t,T.exports.isMobile=t,T.exports.default=t;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function t(a){a||(a={});var n=a.ua;if(n||"undefined"==typeof navigator||(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),"string"!=typeof n)return!1;var d=a.tablet?r.test(n):e.test(n);return!d&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==n.indexOf("Macintosh")&&-1!==n.indexOf("Safari")&&(d=!0),d}},{}],239:[function(x,T,b){"use strict";T.exports=function(e){for(var r,t=e.length,a=0;a<t;a++)if(((r=e.charCodeAt(a))<9||r>13)&&32!==r&&133!==r&&160!==r&&5760!==r&&6158!==r&&(r<8192||r>8205)&&8232!==r&&8233!==r&&8239!==r&&8287!==r&&8288!==r&&12288!==r&&65279!==r)return!1;return!0}},{}],240:[function(x,T,b){T.exports=function(e,r,t){return e*(1-t)+r*t}},{}],241:[function(x,T,b){var e=x("./normalize"),r=x("gl-mat4/create"),t=x("gl-mat4/clone"),a=x("gl-mat4/determinant"),n=x("gl-mat4/invert"),d=x("gl-mat4/transpose"),s={length:x("gl-vec3/length"),normalize:x("gl-vec3/normalize"),dot:x("gl-vec3/dot"),cross:x("gl-vec3/cross")},i=r(),u=r(),f=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],y=[0,0,0];function m(l,w,v,A,M){l[0]=w[0]*A+v[0]*M,l[1]=w[1]*A+v[1]*M,l[2]=w[2]*A+v[2]*M}T.exports=function(l,w,v,A,M,k){if(w||(w=[0,0,0]),v||(v=[0,0,0]),A||(A=[0,0,0]),M||(M=[0,0,0,1]),k||(k=[0,0,0,1]),!e(i,l)||(t(u,i),u[3]=0,u[7]=0,u[11]=0,u[15]=1,Math.abs(a(u)<1e-8)))return!1;var E,P,S,F,R,D,L,oe,j,B=i[3],V=i[7],Z=i[11],Y=i[12],ee=i[13],Q=i[14],$=i[15];if(0!==B||0!==V||0!==Z){if(f[0]=B,f[1]=V,f[2]=Z,f[3]=$,!n(u,u))return!1;d(u,u),F=(P=f)[0],(E=M)[0]=(S=u)[0]*F+S[4]*(R=P[1])+S[8]*(D=P[2])+S[12]*(L=P[3]),E[1]=S[1]*F+S[5]*R+S[9]*D+S[13]*L,E[2]=S[2]*F+S[6]*R+S[10]*D+S[14]*L,E[3]=S[3]*F+S[7]*R+S[11]*D+S[15]*L}else M[0]=M[1]=M[2]=0,M[3]=1;if(w[0]=Y,w[1]=ee,w[2]=Q,(oe=p)[0][0]=(j=i)[0],oe[0][1]=j[1],oe[0][2]=j[2],oe[1][0]=j[4],oe[1][1]=j[5],oe[1][2]=j[6],oe[2][0]=j[8],oe[2][1]=j[9],oe[2][2]=j[10],v[0]=s.length(p[0]),s.normalize(p[0],p[0]),A[0]=s.dot(p[0],p[1]),m(p[1],p[1],p[0],1,-A[0]),v[1]=s.length(p[1]),s.normalize(p[1],p[1]),A[0]/=v[1],A[1]=s.dot(p[0],p[2]),m(p[2],p[2],p[0],1,-A[1]),A[2]=s.dot(p[1],p[2]),m(p[2],p[2],p[1],1,-A[2]),v[2]=s.length(p[2]),s.normalize(p[2],p[2]),A[1]/=v[2],A[2]/=v[2],s.cross(y,p[1],p[2]),s.dot(p[0],y)<0)for(var K=0;K<3;K++)v[K]*=-1,p[K][0]*=-1,p[K][1]*=-1,p[K][2]*=-1;return k[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),k[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),k[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),k[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(k[0]=-k[0]),p[0][2]>p[2][0]&&(k[1]=-k[1]),p[1][0]>p[0][1]&&(k[2]=-k[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(x,T,b){T.exports=function(e,r){var t=r[15];if(0===t)return!1;for(var a=1/t,n=0;n<16;n++)e[n]=r[n]*a;return!0}},{}],243:[function(x,T,b){var e=x("gl-vec3/lerp"),r=x("mat4-recompose"),t=x("mat4-decompose"),a=x("gl-mat4/determinant"),n=x("quat-slerp"),d=u(),s=u(),i=u();function u(){return{translate:f(),scale:f(1),skew:f(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function f(p){return[p||0,p||0,p||0]}T.exports=function(p,y,m,l){if(0===a(y)||0===a(m))return!1;var w=t(y,d.translate,d.scale,d.skew,d.perspective,d.quaternion),v=t(m,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!(!w||!v||(e(i.translate,d.translate,s.translate,l),e(i.skew,d.skew,s.skew,l),e(i.scale,d.scale,s.scale,l),e(i.perspective,d.perspective,s.perspective,l),n(i.quaternion,d.quaternion,s.quaternion,l),r(p,i.translate,i.scale,i.skew,i.perspective,i.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(x,T,b){var e={identity:x("gl-mat4/identity"),translate:x("gl-mat4/translate"),multiply:x("gl-mat4/multiply"),create:x("gl-mat4/create"),scale:x("gl-mat4/scale"),fromRotationTranslation:x("gl-mat4/fromRotationTranslation")},r=(e.create(),e.create());T.exports=function(t,a,n,d,s,i){return e.identity(t),e.fromRotationTranslation(t,i,a),t[3]=s[0],t[7]=s[1],t[11]=s[2],t[15]=s[3],e.identity(r),0!==d[2]&&(r[9]=d[2],e.multiply(t,t,r)),0!==d[1]&&(r[9]=0,r[8]=d[1],e.multiply(t,t,r)),0!==d[0]&&(r[8]=0,r[4]=d[0],e.multiply(t,t,r)),e.scale(t,t,n),t}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(x,T,b){"use strict";var e=x("binary-search-bounds"),r=x("mat4-interpolate"),t=x("gl-mat4/invert"),a=x("gl-mat4/rotateX"),n=x("gl-mat4/rotateY"),d=x("gl-mat4/rotateZ"),s=x("gl-mat4/lookAt"),i=x("gl-mat4/translate"),u=(x("gl-mat4/scale"),x("gl-vec3/normalize")),f=[0,0,0];function p(l){this._components=l.slice(),this._time=[0],this.prevMatrix=l.slice(),this.nextMatrix=l.slice(),this.computedMatrix=l.slice(),this.computedInverse=l.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}T.exports=function(l){return new p((l=l||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var y=p.prototype;y.recalcMatrix=function(l){var w=this._time,v=e.le(w,l),A=this.computedMatrix;if(!(v<0)){var M=this._components;if(v===w.length-1)for(var k=16*v,E=0;E<16;++E)A[E]=M[k++];else{var P=w[v+1]-w[v],S=(k=16*v,this.prevMatrix),F=!0;for(E=0;E<16;++E)S[E]=M[k++];var R=this.nextMatrix;for(E=0;E<16;++E)R[E]=M[k++],F=F&&S[E]===R[E];if(P<1e-6||F)for(E=0;E<16;++E)A[E]=S[E];else r(A,S,R,(l-w[v])/P)}var D=this.computedUp;D[0]=A[1],D[1]=A[5],D[2]=A[9],u(D,D);var L=this.computedInverse;t(L,A);var B=this.computedEye,V=L[15];B[0]=L[12]/V,B[1]=L[13]/V,B[2]=L[14]/V;var Z=this.computedCenter,Y=Math.exp(this.computedRadius[0]);for(E=0;E<3;++E)Z[E]=B[E]-A[2+4*E]*Y}},y.idle=function(l){if(!(l<this.lastT())){for(var w=this._components,v=w.length-16,A=0;A<16;++A)w.push(w[v++]);this._time.push(l)}},y.flush=function(l){var w=e.gt(this._time,l)-2;w<0||(this._time.splice(0,w),this._components.splice(0,16*w))},y.lastT=function(){return this._time[this._time.length-1]},y.lookAt=function(l,w,v,A){this.recalcMatrix(l),this.setMatrix(l,s(this.computedMatrix,w=w||this.computedEye,v=v||f,A=A||this.computedUp));for(var M=0,k=0;k<3;++k)M+=Math.pow(v[k]-w[k],2);M=Math.log(Math.sqrt(M)),this.computedRadius[0]=M},y.rotate=function(l,w,v,A){this.recalcMatrix(l);var M=this.computedInverse;w&&n(M,M,w),v&&a(M,M,v),A&&d(M,M,A),this.setMatrix(l,t(this.computedMatrix,M))};var m=[0,0,0];y.pan=function(l,w,v,A){m[0]=-(w||0),m[1]=-(v||0),m[2]=-(A||0),this.recalcMatrix(l);var M=this.computedInverse;i(M,M,m),this.setMatrix(l,t(M,M))},y.translate=function(l,w,v,A){m[0]=w||0,m[1]=v||0,m[2]=A||0,this.recalcMatrix(l);var M=this.computedMatrix;i(M,M,m),this.setMatrix(l,M)},y.setMatrix=function(l,w){if(!(l<this.lastT())){this._time.push(l);for(var v=0;v<16;++v)this._components.push(w[v])}},y.setDistance=function(l,w){this.computedRadius[0]=w},y.setDistanceLimits=function(l,w){var v=this._limits;v[0]=l,v[1]=w},y.getDistanceLimits=function(l){var w=this._limits;return l?(l[0]=w[0],l[1]=w[1],l):w}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(x,T,b){"use strict";T.exports=function(r){var t=r.length;if(t<3){for(var a=new Array(t),n=0;n<t;++n)a[n]=n;return 2===t&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var d=new Array(t);for(n=0;n<t;++n)d[n]=n;d.sort(function(w,v){return r[w][0]-r[v][0]||r[w][1]-r[v][1]});var s=[d[0],d[1]],i=[d[0],d[1]];for(n=2;n<t;++n){for(var u=d[n],f=r[u],p=s.length;p>1&&e(r[s[p-2]],r[s[p-1]],f)<=0;)p-=1,s.pop();for(s.push(u),p=i.length;p>1&&e(r[i[p-2]],r[i[p-1]],f)>=0;)p-=1,i.pop();i.push(u)}a=new Array(i.length+s.length-2);for(var y=0,m=(n=0,s.length);n<m;++n)a[y++]=s[n];for(var l=i.length-2;l>0;--l)a[y++]=i[l];return a};var e=x("robust-orientation")[3]},{"robust-orientation":284}],247:[function(x,T,b){"use strict";T.exports=function(r,t){t||(t=r,r=window);var a=0,n=0,d=0,s={shift:!1,alt:!1,control:!1,meta:!1},i=!1;function u(k){var E=!1;return"altKey"in k&&(E=E||k.altKey!==s.alt,s.alt=!!k.altKey),"shiftKey"in k&&(E=E||k.shiftKey!==s.shift,s.shift=!!k.shiftKey),"ctrlKey"in k&&(E=E||k.ctrlKey!==s.control,s.control=!!k.ctrlKey),"metaKey"in k&&(E=E||k.metaKey!==s.meta,s.meta=!!k.metaKey),E}function f(k,E){var P=e.x(E),S=e.y(E);"buttons"in E&&(k=0|E.buttons),(k!==a||P!==n||S!==d||u(E))&&(a=0|k,n=P||0,d=S||0,t&&t(a,n,d,s))}function p(k){f(0,k)}function y(){(a||n||d||s.shift||s.alt||s.meta||s.control)&&(n=d=0,a=0,s.shift=s.alt=s.control=s.meta=!1,t&&t(0,0,0,s))}function m(k){u(k)&&t&&t(a,n,d,s)}function l(k){0===e.buttons(k)?f(0,k):f(a,k)}function w(k){f(a|e.buttons(k),k)}function v(k){f(a&~e.buttons(k),k)}function A(){i||(i=!0,r.addEventListener("mousemove",l),r.addEventListener("mousedown",w),r.addEventListener("mouseup",v),r.addEventListener("mouseleave",p),r.addEventListener("mouseenter",p),r.addEventListener("mouseout",p),r.addEventListener("mouseover",p),r.addEventListener("blur",y),r.addEventListener("keyup",m),r.addEventListener("keydown",m),r.addEventListener("keypress",m),r!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",m),window.addEventListener("keydown",m),window.addEventListener("keypress",m)))}A();var M={element:r};return Object.defineProperties(M,{enabled:{get:function(){return i},set:function(k){k?A():!i||(i=!1,r.removeEventListener("mousemove",l),r.removeEventListener("mousedown",w),r.removeEventListener("mouseup",v),r.removeEventListener("mouseleave",p),r.removeEventListener("mouseenter",p),r.removeEventListener("mouseout",p),r.removeEventListener("mouseover",p),r.removeEventListener("blur",y),r.removeEventListener("keyup",m),r.removeEventListener("keydown",m),r.removeEventListener("keypress",m),r!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",m),window.removeEventListener("keydown",m),window.removeEventListener("keypress",m)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),M};var e=x("mouse-event")},{"mouse-event":249}],248:[function(x,T,b){var e={left:0,top:0};T.exports=function(r,t,a){t=t||r.currentTarget||r.srcElement,Array.isArray(a)||(a=[0,0]);var i,n=r.clientX||0,d=r.clientY||0,s=(i=t)===window||i===document||i===document.body?e:i.getBoundingClientRect();return a[0]=n-s.left,a[1]=d-s.top,a}},{}],249:[function(x,T,b){"use strict";function e(r){return r.target||r.srcElement||window}b.buttons=function(r){if("object"==typeof r){if("buttons"in r)return r.buttons;if("which"in r){if(2===(t=r.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in r){var t;if(1===(t=r.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},b.element=e,b.x=function(r){if("object"==typeof r){if("offsetX"in r)return r.offsetX;var t=e(r).getBoundingClientRect();return r.clientX-t.left}return 0},b.y=function(r){if("object"==typeof r){if("offsetY"in r)return r.offsetY;var t=e(r).getBoundingClientRect();return r.clientY-t.top}return 0}},{}],250:[function(x,T,b){"use strict";var e=x("to-px");T.exports=function(r,t,a){"function"==typeof r&&(a=!!t,t=r,r=window);var n=e("ex",r),d=function(s){a&&s.preventDefault();var i=s.deltaX||0,u=s.deltaY||0,f=s.deltaZ||0,p=1;switch(s.deltaMode){case 1:p=n;break;case 2:p=window.innerHeight}if(u*=p,f*=p,(i*=p)||u||f)return t(i,u,f,s)};return r.addEventListener("wheel",d),d}},{"to-px":304}],251:[function(x,T,b){"use strict";var e=x("typedarray-pool");T.exports=function(t){function a(p){throw new Error("ndarray-extract-contour: "+p)}"object"!=typeof t&&a("Must specify arguments");var n=t.order;Array.isArray(n)||a("Must specify order");var p,y,m,A,d=t.arrayArguments||1;d<1&&a("Must have at least one array argument"),(t.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),"function"!=typeof t.vertex&&a("Must specify vertex creation function"),"function"!=typeof t.cell&&a("Must specify cell creation function"),"function"!=typeof t.phase&&a("Must specify phase function");for(var i=t.getters||[],u=new Array(d),f=0;f<d;++f)u[f]=i.indexOf(f)>=0;return p=t.vertex,y=t.cell,m=t.phase,A=[u,n].join(","),(0,r[A])(p,y,m,e.mallocUint32,e.freeUint32)};var r={"false,0,1":function(t,a,n,d,s){return function(i,u,f,p){var y,m=0|i.shape[0],l=0|i.shape[1],w=i.data,A=0|i.stride[0],M=0|i.stride[1],k=0|i.offset,E=0|-A,P=0,S=0|-M,F=0,R=-A-M|0,D=0,L=0|A,B=M-A*m|0,V=0,Z=0,Y=0,ee=2*m|0,Q=d(ee),$=d(ee),K=0,oe=0,j=-1,H=-1,G=0,re=0|-m,q=0|m,te=0,ne=-m-1|0,le=m-1|0,ue=0,de=0,he=0;for(V=0;V<m;++V)Q[K++]=n(w[k],u,f,p),k+=L;if(k+=B,l>0){if(Z=1,Q[K++]=n(w[k],u,f,p),k+=L,m>0)for(V=1,oe=Q[K]=n(y=w[k],u,f,p),te=Q[K+re],ue=Q[K+ne],oe===(G=Q[K+j])&&oe===te&&oe===ue||(t(V,Z,y,P=w[k+E],F=w[k+S],D=w[k+R],oe,G,te,ue,u,f,p),de=$[K]=Y++),K+=1,k+=L,V=2;V<m;++V)oe=Q[K]=n(y=w[k],u,f,p),te=Q[K+re],ue=Q[K+ne],oe===(G=Q[K+j])&&oe===te&&oe===ue||(t(V,Z,y,P=w[k+E],F=w[k+S],D=w[k+R],oe,G,te,ue,u,f,p),de=$[K]=Y++,ue!==G&&a($[K+j],de,D,P,ue,G,u,f,p)),K+=1,k+=L;for(k+=B,K=0,he=j,j=H,H=he,he=re,re=q,q=he,he=ne,ne=le,le=he,Z=2;Z<l;++Z){if(Q[K++]=n(w[k],u,f,p),k+=L,m>0)for(V=1,oe=Q[K]=n(y=w[k],u,f,p),te=Q[K+re],ue=Q[K+ne],oe===(G=Q[K+j])&&oe===te&&oe===ue||(t(V,Z,y,P=w[k+E],F=w[k+S],D=w[k+R],oe,G,te,ue,u,f,p),de=$[K]=Y++,ue!==te&&a($[K+re],de,F,D,te,ue,u,f,p)),K+=1,k+=L,V=2;V<m;++V)oe=Q[K]=n(y=w[k],u,f,p),te=Q[K+re],ue=Q[K+ne],oe===(G=Q[K+j])&&oe===te&&oe===ue||(t(V,Z,y,P=w[k+E],F=w[k+S],D=w[k+R],oe,G,te,ue,u,f,p),de=$[K]=Y++,ue!==te&&a($[K+re],de,F,D,te,ue,u,f,p),ue!==G&&a($[K+j],de,D,P,ue,G,u,f,p)),K+=1,k+=L;1&Z&&(K=0),he=j,j=H,H=he,he=re,re=q,q=he,he=ne,ne=le,le=he,k+=B}}s($),s(Q)}},"false,1,0":function(t,a,n,d,s){return function(i,u,f,p){var y,m=0|i.shape[0],l=0|i.shape[1],w=i.data,A=0|i.stride[0],M=0|i.stride[1],k=0|i.offset,E=0|-A,P=0,S=0|-M,F=0,R=-A-M|0,D=0,L=0|M,B=A-M*l|0,V=0,Z=0,Y=0,ee=2*l|0,Q=d(ee),$=d(ee),K=0,oe=0,j=-1,H=-1,G=0,re=0|-l,q=0|l,te=0,ne=-l-1|0,le=l-1|0,ue=0,de=0,he=0;for(Z=0;Z<l;++Z)Q[K++]=n(w[k],u,f,p),k+=L;if(k+=B,m>0){if(V=1,Q[K++]=n(w[k],u,f,p),k+=L,l>0)for(Z=1,oe=Q[K]=n(y=w[k],u,f,p),G=Q[K+j],ue=Q[K+ne],oe===(te=Q[K+re])&&oe===G&&oe===ue||(t(V,Z,y,P=w[k+E],F=w[k+S],D=w[k+R],oe,te,G,ue,u,f,p),de=$[K]=Y++),K+=1,k+=L,Z=2;Z<l;++Z)oe=Q[K]=n(y=w[k],u,f,p),G=Q[K+j],ue=Q[K+ne],oe===(te=Q[K+re])&&oe===G&&oe===ue||(t(V,Z,y,P=w[k+E],F=w[k+S],D=w[k+R],oe,te,G,ue,u,f,p),de=$[K]=Y++,ue!==G&&a($[K+j],de,F,D,G,ue,u,f,p)),K+=1,k+=L;for(k+=B,K=0,he=re,re=q,q=he,he=j,j=H,H=he,he=ne,ne=le,le=he,V=2;V<m;++V){if(Q[K++]=n(w[k],u,f,p),k+=L,l>0)for(Z=1,oe=Q[K]=n(y=w[k],u,f,p),G=Q[K+j],ue=Q[K+ne],oe===(te=Q[K+re])&&oe===G&&oe===ue||(t(V,Z,y,P=w[k+E],F=w[k+S],D=w[k+R],oe,te,G,ue,u,f,p),de=$[K]=Y++,ue!==te&&a($[K+re],de,D,P,ue,te,u,f,p)),K+=1,k+=L,Z=2;Z<l;++Z)oe=Q[K]=n(y=w[k],u,f,p),G=Q[K+j],ue=Q[K+ne],oe===(te=Q[K+re])&&oe===G&&oe===ue||(t(V,Z,y,P=w[k+E],F=w[k+S],D=w[k+R],oe,te,G,ue,u,f,p),de=$[K]=Y++,ue!==G&&a($[K+j],de,F,D,G,ue,u,f,p),ue!==te&&a($[K+re],de,D,P,ue,te,u,f,p)),K+=1,k+=L;1&V&&(K=0),he=re,re=q,q=he,he=j,j=H,H=he,he=ne,ne=le,le=he,k+=B}}s($),s(Q)}}}},{"typedarray-pool":308}],252:[function(x,T,b){"use strict";var e=x("dup"),r={zero:function(m,l,w,v){var A=m[0];v|=0;var M=0,k=w[0];for(M=0;M<A;++M)l[v]=0,v+=k},fdTemplate1:function(m,l,w,v,A,M,k){var E=m[0],P=w[0],S=-1*P,F=P;v|=0,k|=0;var R=0,D=P,L=M[0];for(R=0;R<E;++R)A[k]=.5*(l[v+S]-l[v+F]),v+=D,k+=L},fdTemplate2:function(m,l,w,v,A,M,k,E,P,S){var F=m[0],R=m[1],D=w[0],L=w[1],V=M[1],Y=P[1],ee=-1*D,Q=D,$=-1*L,K=L;v|=0,k|=0,S|=0;var oe=0,j=0,H=L,G=D-R*L,re=V,q=M[0]-R*V,te=Y,ne=P[0]-R*Y;for(j=0;j<F;++j){for(oe=0;oe<R;++oe)A[k]=.5*(l[v+ee]-l[v+Q]),E[S]=.5*(l[v+$]-l[v+K]),v+=H,k+=re,S+=te;v+=G,k+=q,S+=ne}}},t={cdiff:function(m){var l={};return function(w,v,A){var M=w.dtype,k=w.order,E=v.dtype,P=v.order,S=A.dtype,F=A.order,R=[M,k.join(),E,P.join(),S,F.join()].join(),D=l[R];return D||(l[R]=D=m([M,k,E,P,S,F])),D(w.shape.slice(0),w.data,w.stride,0|w.offset,v.data,v.stride,0|v.offset,A.data,A.stride,0|A.offset)}},zero:function(m){var l={};return function(w){var v=w.dtype,A=w.order,M=[v,A.join()].join(),k=l[M];return k||(l[M]=k=m([v,A])),k(w.shape.slice(0),w.data,w.stride,0|w.offset)}},fdTemplate1:function(m){var l={};return function(w,v){var A=w.dtype,M=w.order,k=v.dtype,E=v.order,P=[A,M.join(),k,E.join()].join(),S=l[P];return S||(l[P]=S=m([A,M,k,E])),S(w.shape.slice(0),w.data,w.stride,0|w.offset,v.data,v.stride,0|v.offset)}},fdTemplate2:function(m){var l={};return function(w,v,A){var M=w.dtype,k=w.order,E=v.dtype,P=v.order,S=A.dtype,F=A.order,R=[M,k.join(),E,P.join(),S,F.join()].join(),D=l[R];return D||(l[R]=D=m([M,k,E,P,S,F])),D(w.shape.slice(0),w.data,w.stride,0|w.offset,v.data,v.stride,0|v.offset,A.data,A.stride,0|A.offset)}}};function a(m){return(0,t[m.funcName])(n.bind(void 0,m))}function n(m){return r[m.funcName]}function d(m){return a({funcName:m.funcName})}var s={},i={},u=d({funcName:"cdiff"}),f=d({funcName:"zero"});function p(m){return m in s?s[m]:s[m]=d({funcName:"fdTemplate"+m})}function y(m,l,w,v){return function(A,M){var k=M.shape.slice();return k[0]>2&&k[1]>2&&v(M.pick(-1,-1).lo(1,1).hi(k[0]-2,k[1]-2),A.pick(-1,-1,0).lo(1,1).hi(k[0]-2,k[1]-2),A.pick(-1,-1,1).lo(1,1).hi(k[0]-2,k[1]-2)),k[1]>2&&(w(M.pick(0,-1).lo(1).hi(k[1]-2),A.pick(0,-1,1).lo(1).hi(k[1]-2)),l(A.pick(0,-1,0).lo(1).hi(k[1]-2))),k[1]>2&&(w(M.pick(k[0]-1,-1).lo(1).hi(k[1]-2),A.pick(k[0]-1,-1,1).lo(1).hi(k[1]-2)),l(A.pick(k[0]-1,-1,0).lo(1).hi(k[1]-2))),k[0]>2&&(w(M.pick(-1,0).lo(1).hi(k[0]-2),A.pick(-1,0,0).lo(1).hi(k[0]-2)),l(A.pick(-1,0,1).lo(1).hi(k[0]-2))),k[0]>2&&(w(M.pick(-1,k[1]-1).lo(1).hi(k[0]-2),A.pick(-1,k[1]-1,0).lo(1).hi(k[0]-2)),l(A.pick(-1,k[1]-1,1).lo(1).hi(k[0]-2))),A.set(0,0,0,0),A.set(0,0,1,0),A.set(k[0]-1,0,0,0),A.set(k[0]-1,0,1,0),A.set(0,k[1]-1,0,0),A.set(0,k[1]-1,1,0),A.set(k[0]-1,k[1]-1,0,0),A.set(k[0]-1,k[1]-1,1,0),A}}T.exports=function(m,l,w){return Array.isArray(w)||(w=e(l.dimension,"string"==typeof w?w:"clamp")),0===l.size?m:0===l.dimension?(m.set(0),m):function(v){var A=v.join();if(P=i[A])return P;for(var M=v.length,k=[u,f],E=1;E<=M;++E)k.push(p(E));var P=y.apply(void 0,k);return i[A]=P,P}(w)(m,l)}},{dup:65}],253:[function(x,T,b){"use strict";function e(n,d){var s=Math.floor(d),i=d-s,f=0<=s+1&&s+1<n.shape[0];return(1-i)*(0<=s&&s<n.shape[0]?+n.get(s):0)+i*(f?+n.get(s+1):0)}function r(n,d,s){var i=Math.floor(d),u=d-i,f=0<=i&&i<n.shape[0],p=0<=i+1&&i+1<n.shape[0],y=Math.floor(s),m=s-y,l=0<=y&&y<n.shape[1],w=0<=y+1&&y+1<n.shape[1],v=f&&l?n.get(i,y):0,A=f&&w?n.get(i,y+1):0;return(1-m)*((1-u)*v+u*(p&&l?n.get(i+1,y):0))+m*((1-u)*A+u*(p&&w?n.get(i+1,y+1):0))}function t(n,d,s,i){var u=Math.floor(d),f=d-u,p=0<=u&&u<n.shape[0],y=0<=u+1&&u+1<n.shape[0],m=Math.floor(s),l=s-m,w=0<=m&&m<n.shape[1],v=0<=m+1&&m+1<n.shape[1],A=Math.floor(i),M=i-A,k=0<=A&&A<n.shape[2],E=0<=A+1&&A+1<n.shape[2],P=p&&w&&k?n.get(u,m,A):0,S=p&&v&&k?n.get(u,m+1,A):0,F=y&&w&&k?n.get(u+1,m,A):0,R=y&&v&&k?n.get(u+1,m+1,A):0,D=p&&w&&E?n.get(u,m,A+1):0,L=p&&v&&E?n.get(u,m+1,A+1):0;return(1-M)*((1-l)*((1-f)*P+f*F)+l*((1-f)*S+f*R))+M*((1-l)*((1-f)*D+f*(y&&w&&E?n.get(u+1,m,A+1):0))+l*((1-f)*L+f*(y&&v&&E?n.get(u+1,m+1,A+1):0)))}function a(n){var d,s,i=0|n.shape.length,u=new Array(i),f=new Array(i),p=new Array(i),y=new Array(i);for(d=0;d<i;++d)s=+arguments[d+1],u[d]=Math.floor(s),f[d]=s-u[d],p[d]=0<=u[d]&&u[d]<n.shape[d],y[d]=0<=u[d]+1&&u[d]+1<n.shape[d];var m,l,w,v=0;e:for(d=0;d<1<<i;++d){for(l=1,w=n.offset,m=0;m<i;++m)if(d&1<<m){if(!y[m])continue e;l*=f[m],w+=n.stride[m]*(u[m]+1)}else{if(!p[m])continue e;l*=1-f[m],w+=n.stride[m]*u[m]}v+=l*n.data[w]}return v}T.exports=function(n,d,s,i){switch(n.shape.length){case 0:return 0;case 1:return e(n,d);case 2:return r(n,d,s);case 3:return t(n,d,s,i);default:return a.apply(void 0,arguments)}},T.exports.d1=e,T.exports.d2=r,T.exports.d3=t},{}],254:[function(x,T,b){"use strict";var e={"float64,2,1,0":function(){return function(d,s,i,u,f){var p=d[0],y=d[1],m=d[2],w=i[1],v=i[2];u|=0;var A=0,M=0,k=0,E=v,P=w-m*v,S=i[0]-y*w;for(k=0;k<p;++k){for(M=0;M<y;++M){for(A=0;A<m;++A)s[u]/=f,u+=E;u+=P}u+=S}}},"uint8,2,0,1,float64,2,1,0":function(){return function(d,s,i,u,f,p,y,m){for(var l=d[0],w=d[1],v=d[2],A=i[0],M=i[1],k=i[2],E=p[0],P=p[1],S=p[2],F=u|=0,R=y|=0,D=0|d[0];D>0;){D<64?(l=D,D=0):(l=64,D-=64);for(var L=0|d[1];L>0;){L<64?(w=L,L=0):(w=64,L-=64),u=F+D*A+L*M,y=R+D*E+L*P;var B=0,V=0,Z=0,Y=k,ee=A-v*k,Q=M-l*A,$=S,K=E-v*S,oe=P-l*E;for(Z=0;Z<w;++Z){for(V=0;V<l;++V){for(B=0;B<v;++B)s[u]=f[y]*m,u+=Y,y+=$;u+=ee,y+=K}u+=Q,y+=oe}}}}},"float32,1,0,float32,1,0":function(){return function(d,s,i,u,f,p,y){var m=d[0],l=d[1],v=i[1],M=p[1];u|=0,y|=0;var k=0,E=0,P=v,S=i[0]-l*v,F=M,R=p[0]-l*M;for(E=0;E<m;++E){for(k=0;k<l;++k)s[u]=f[y],u+=P,y+=F;u+=S,y+=R}}},"float32,1,0,float32,0,1":function(){return function(d,s,i,u,f,p,y){for(var m=d[0],l=d[1],w=i[0],v=i[1],A=p[0],M=p[1],k=u|=0,E=y|=0,P=0|d[1];P>0;){P<64?(l=P,P=0):(l=64,P-=64);for(var S=0|d[0];S>0;){S<64?(m=S,S=0):(m=64,S-=64),u=k+P*v+S*w,y=E+P*M+S*A;var F=0,R=0,D=v,L=w-l*v,B=M,V=A-l*M;for(R=0;R<m;++R){for(F=0;F<l;++F)s[u]=f[y],u+=D,y+=B;u+=L,y+=V}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(d,s,i,u,f,p,y){for(var m=d[0],l=d[1],w=d[2],v=i[0],A=i[1],M=i[2],k=p[0],E=p[1],P=p[2],S=u|=0,F=y|=0,R=0|d[2];R>0;){R<64?(w=R,R=0):(w=64,R-=64);for(var D=0|d[0];D>0;){D<64?(m=D,D=0):(m=64,D-=64);for(var L=0|d[1];L>0;){L<64?(l=L,L=0):(l=64,L-=64),u=S+R*M+D*v+L*A,y=F+R*P+D*k+L*E;var B=0,V=0,Z=0,Y=M,ee=v-w*M,Q=A-m*v,$=P,K=k-w*P,oe=E-m*k;for(Z=0;Z<l;++Z){for(V=0;V<m;++V){for(B=0;B<w;++B)s[u]=f[y],u+=Y,y+=$;u+=ee,y+=K}u+=Q,y+=oe}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(d,s,i,u,f,p,y){var m=d[0],l=d[1],w=d[2],v=i[0],M=i[2],k=p[0],P=p[2];u|=0,y|=0;var S=0,F=0,R=0,D=M,L=v-w*M,B=i[1]-m*v,V=P,Z=k-w*P,Y=p[1]-m*k;for(R=0;R<l;++R){for(F=0;F<m;++F){for(S=0;S<w;++S)s[u]=f[y],u+=D,y+=V;u+=L,y+=Z}u+=B,y+=Y}}}},r=function(d,s){var i=s.join(",");return(0,e[i])()},t={mul:function(d){var s={};return function(i,u,f){var p=i.dtype,y=i.order,m=u.dtype,l=u.order,w=f.dtype,v=f.order,A=[p,y.join(),m,l.join(),w,v.join()].join(),M=s[A];return M||(s[A]=M=d([p,y,m,l,w,v])),M(i.shape.slice(0),i.data,i.stride,0|i.offset,u.data,u.stride,0|u.offset,f.data,f.stride,0|f.offset)}},muls:function(d){var s={};return function(i,u,f){var p=i.dtype,y=i.order,m=u.dtype,l=u.order,w=[p,y.join(),m,l.join()].join(),v=s[w];return v||(s[w]=v=d([p,y,m,l])),v(i.shape.slice(0),i.data,i.stride,0|i.offset,u.data,u.stride,0|u.offset,f)}},mulseq:function(d){var s={};return function(i,u){var f=i.dtype,p=i.order,y=[f,p.join()].join(),m=s[y];return m||(s[y]=m=d([f,p])),m(i.shape.slice(0),i.data,i.stride,0|i.offset,u)}},div:function(d){var s={};return function(i,u,f){var p=i.dtype,y=i.order,m=u.dtype,l=u.order,w=f.dtype,v=f.order,A=[p,y.join(),m,l.join(),w,v.join()].join(),M=s[A];return M||(s[A]=M=d([p,y,m,l,w,v])),M(i.shape.slice(0),i.data,i.stride,0|i.offset,u.data,u.stride,0|u.offset,f.data,f.stride,0|f.offset)}},divs:function(d){var s={};return function(i,u,f){var p=i.dtype,y=i.order,m=u.dtype,l=u.order,w=[p,y.join(),m,l.join()].join(),v=s[w];return v||(s[w]=v=d([p,y,m,l])),v(i.shape.slice(0),i.data,i.stride,0|i.offset,u.data,u.stride,0|u.offset,f)}},divseq:function(d){var s={};return function(i,u){var f=i.dtype,p=i.order,y=[f,p.join()].join(),m=s[y];return m||(s[y]=m=d([f,p])),m(i.shape.slice(0),i.data,i.stride,0|i.offset,u)}},assign:function(d){var s={};return function(i,u){var f=i.dtype,p=i.order,y=u.dtype,m=u.order,l=[f,p.join(),y,m.join()].join(),w=s[l];return w||(s[l]=w=d([f,p,y,m])),w(i.shape.slice(0),i.data,i.stride,0|i.offset,u.data,u.stride,0|u.offset)}}};function a(d){return(0,t[(s={funcName:d.funcName}).funcName])(r.bind(void 0,s));var s}var n={mul:"*",div:"/"};(function(){for(var d in n)b[d]=a({funcName:d}),b[d+"s"]=a({funcName:d+"s"}),b[d+"seq"]=a({funcName:d+"seq"})})(),b.assign=a({funcName:"assign"})},{}],255:[function(x,T,b){"use strict";var e=x("ndarray"),r=x("./doConvert.js");T.exports=function(t,a){for(var n=[],d=t,s=1;Array.isArray(d);)n.push(d.length),s*=d.length,d=d[0];return 0===n.length?e():(a||(a=e(new Float64Array(s),n)),r(a,t),a)}},{"./doConvert.js":256,ndarray:259}],256:[function(x,T,b){"use strict";var t,a;T.exports=(t=function(){return function(t,a,n,d,s){var i=t[0],u=t[1],f=t[2],y=n[1],m=n[2],l=[0,0,0];d|=0;var w=0,v=0,A=0,M=m,k=y-f*m,E=n[0]-u*y;for(A=0;A<i;++A){for(v=0;v<u;++v){for(w=0;w<f;++w){var P,S=s;for(P=0;P<l.length-1;++P)S=S[l[P]];a[d]=S[l[l.length-1]],d+=M,++l[2]}d+=k,l[2]-=f,++l[1]}d+=E,l[1]-=u,++l[0]}}}.bind(void 0,{funcName:"convert"}),a={},function(n,d){var s=n.dtype,i=n.order,u=[s,i.join()].join(),f=a[u];return f||(a[u]=f=t([s,i])),f(n.shape.slice(0),n.data,n.stride,0|n.offset,d)})},{}],257:[function(x,T,b){"use strict";var e=x("typedarray-pool");function r(d){return"uint32"===d?[e.mallocUint32,e.freeUint32]:null}var t={"uint32,1,0":function(d,s){return function(i,u,f,p,y,m,l,w,v,A,M){var k,E,P,S,F,R,D,L,B=i*y+p,V=d(w);for(k=i+1;k<=u;++k){for(E=k,P=B+=y,F=0,R=B,S=0;S<w;++S)V[F++]=f[R],R+=v;e:for(;E-- >i;){F=0,R=P-y;t:for(S=0;S<w;++S){if((D=f[R])<(L=V[F]))break e;if(D>L)break t;R+=A,F+=M}for(F=P,R=P-y,S=0;S<w;++S)f[F]=f[R],F+=v,R+=v;P-=y}for(F=P,R=0,S=0;S<w;++S)f[F]=V[R++],F+=v}s(V)}}},a={"uint32,1,0":function(d,s,i){return function u(f,p,y,m,l,w,v,A,M,k,E){var P,S,R,D,L,B,V,Z,Y,ee,Q,$,K,oe,j,H,G,re,q,te,ne,le,ue,de,he=(p-f+1)/6|0,be=f+he,ge=p-he,we=f+p>>1,ke=we-he,De=we+he,Ee=be,Re=ke,ve=we,Te=De,Ie=ge,Ce=f+1,Pe=p-1,Ve=!0,qe=0,Je=0,lt=0,He=A,$e=s(He),et=s(He);ee=l*Ee,Q=l*Re,de=m;e:for(Y=0;Y<A;++Y){if((lt=y[B=ee+de]-y[V=Q+de])>0){S=Ee,Ee=Re,Re=S;break e}if(lt<0)break e;de+=k}ee=l*Te,Q=l*Ie,de=m;e:for(Y=0;Y<A;++Y){if((lt=y[B=ee+de]-y[V=Q+de])>0){S=Te,Te=Ie,Ie=S;break e}if(lt<0)break e;de+=k}ee=l*Ee,Q=l*ve,de=m;e:for(Y=0;Y<A;++Y){if((lt=y[B=ee+de]-y[V=Q+de])>0){S=Ee,Ee=ve,ve=S;break e}if(lt<0)break e;de+=k}ee=l*Re,Q=l*ve,de=m;e:for(Y=0;Y<A;++Y){if((lt=y[B=ee+de]-y[V=Q+de])>0){S=Re,Re=ve,ve=S;break e}if(lt<0)break e;de+=k}ee=l*Ee,Q=l*Te,de=m;e:for(Y=0;Y<A;++Y){if((lt=y[B=ee+de]-y[V=Q+de])>0){S=Ee,Ee=Te,Te=S;break e}if(lt<0)break e;de+=k}ee=l*ve,Q=l*Te,de=m;e:for(Y=0;Y<A;++Y){if((lt=y[B=ee+de]-y[V=Q+de])>0){S=ve,ve=Te,Te=S;break e}if(lt<0)break e;de+=k}ee=l*Re,Q=l*Ie,de=m;e:for(Y=0;Y<A;++Y){if((lt=y[B=ee+de]-y[V=Q+de])>0){S=Re,Re=Ie,Ie=S;break e}if(lt<0)break e;de+=k}ee=l*Re,Q=l*ve,de=m;e:for(Y=0;Y<A;++Y){if((lt=y[B=ee+de]-y[V=Q+de])>0){S=Re,Re=ve,ve=S;break e}if(lt<0)break e;de+=k}ee=l*Te,Q=l*Ie,de=m;e:for(Y=0;Y<A;++Y){if((lt=y[B=ee+de]-y[V=Q+de])>0){S=Te,Te=Ie,Ie=S;break e}if(lt<0)break e;de+=k}for(ee=l*Ee,Q=l*Re,$=l*ve,K=l*Te,oe=l*Ie,j=l*be,H=l*we,G=l*ge,ue=0,de=m,Y=0;Y<A;++Y)B=ee+de,Z=$+de,re=K+de,q=oe+de,te=j+de,ne=H+de,le=G+de,$e[ue]=y[V=Q+de],et[ue]=y[re],Ve=Ve&&$e[ue]===et[ue],R=y[Z],D=y[q],y[te]=y[B],y[ne]=R,y[le]=D,++ue,de+=M;for(ee=l*ke,Q=l*f,de=m,Y=0;Y<A;++Y)y[B=ee+de]=y[V=Q+de],de+=M;for(ee=l*De,Q=l*p,de=m,Y=0;Y<A;++Y)y[B=ee+de]=y[V=Q+de],de+=M;if(Ve)for(L=Ce;L<=Pe;++L){for(B=m+L*l,ue=0,Y=0;Y<A&&0==(lt=y[B]-$e[ue]);++Y)ue+=E,B+=k;if(0!==lt)if(lt<0){if(L!==Ce)for(ee=l*L,Q=l*Ce,de=m,Y=0;Y<A;++Y)P=y[B=ee+de],y[B]=y[V=Q+de],y[V]=P,de+=M;++Ce}else for(;;){for(B=m+Pe*l,ue=0,Y=0;Y<A&&0==(lt=y[B]-$e[ue]);++Y)ue+=E,B+=k;if(!(lt>0)){if(lt<0){for(ee=l*L,Q=l*Ce,$=l*Pe,de=m,Y=0;Y<A;++Y)Z=$+de,P=y[B=ee+de],y[B]=y[V=Q+de],y[V]=y[Z],y[Z]=P,de+=M;++Ce,--Pe;break}for(ee=l*L,Q=l*Pe,de=m,Y=0;Y<A;++Y)P=y[B=ee+de],y[B]=y[V=Q+de],y[V]=P,de+=M;--Pe;break}Pe--}}else for(L=Ce;L<=Pe;++L){for(B=m+L*l,ue=0,Y=0;Y<A&&0==(qe=y[B]-$e[ue]);++Y)ue+=E,B+=k;if(qe<0){if(L!==Ce)for(ee=l*L,Q=l*Ce,de=m,Y=0;Y<A;++Y)P=y[B=ee+de],y[B]=y[V=Q+de],y[V]=P,de+=M;++Ce}else{for(B=m+L*l,ue=0,Y=0;Y<A&&0==(Je=y[B]-et[ue]);++Y)ue+=E,B+=k;if(Je>0)for(;;){for(B=m+Pe*l,ue=0,Y=0;Y<A&&0==(lt=y[B]-et[ue]);++Y)ue+=E,B+=k;if(!(lt>0)){for(B=m+Pe*l,ue=0,Y=0;Y<A&&0==(lt=y[B]-$e[ue]);++Y)ue+=E,B+=k;if(lt<0){for(ee=l*L,Q=l*Ce,$=l*Pe,de=m,Y=0;Y<A;++Y)Z=$+de,P=y[B=ee+de],y[B]=y[V=Q+de],y[V]=y[Z],y[Z]=P,de+=M;++Ce,--Pe}else{for(ee=l*L,Q=l*Pe,de=m,Y=0;Y<A;++Y)P=y[B=ee+de],y[B]=y[V=Q+de],y[V]=P,de+=M;--Pe}break}if(--Pe<L)break}}}for(ee=l*f,Q=l*(Ce-1),ue=0,de=m,Y=0;Y<A;++Y)y[B=ee+de]=y[V=Q+de],y[V]=$e[ue],++ue,de+=M;for(ee=l*p,Q=l*(Pe+1),ue=0,de=m,Y=0;Y<A;++Y)y[B=ee+de]=y[V=Q+de],y[V]=et[ue],++ue,de+=M;if(Ce-2-f<=32?d(f,Ce-2,y,m,l,w,v,A,M,k,E):u(f,Ce-2,y,m,l,w,v,A,M,k,E),p-(Pe+2)<=32?d(Pe+2,p,y,m,l,w,v,A,M,k,E):u(Pe+2,p,y,m,l,w,v,A,M,k,E),Ve)return i($e),void i(et);if(Ce<be&&Pe>ge){e:for(;;){for(B=m+Ce*l,ue=0,de=m,Y=0;Y<A;++Y){if(y[B]!==$e[ue])break e;++ue,B+=M}++Ce}e:for(;;){for(B=m+Pe*l,ue=0,de=m,Y=0;Y<A;++Y){if(y[B]!==et[ue])break e;++ue,B+=M}--Pe}for(L=Ce;L<=Pe;++L){for(B=m+L*l,ue=0,Y=0;Y<A&&0==(qe=y[B]-$e[ue]);++Y)ue+=E,B+=k;if(0===qe){if(L!==Ce)for(ee=l*L,Q=l*Ce,de=m,Y=0;Y<A;++Y)P=y[B=ee+de],y[B]=y[V=Q+de],y[V]=P,de+=M;++Ce}else{for(B=m+L*l,ue=0,Y=0;Y<A&&0==(Je=y[B]-et[ue]);++Y)ue+=E,B+=k;if(0===Je)for(;;){for(B=m+Pe*l,ue=0,Y=0;Y<A&&0==(lt=y[B]-et[ue]);++Y)ue+=E,B+=k;if(0!==lt){for(B=m+Pe*l,ue=0,Y=0;Y<A&&0==(lt=y[B]-$e[ue]);++Y)ue+=E,B+=k;if(lt<0){for(ee=l*L,Q=l*Ce,$=l*Pe,de=m,Y=0;Y<A;++Y)Z=$+de,P=y[B=ee+de],y[B]=y[V=Q+de],y[V]=y[Z],y[Z]=P,de+=M;++Ce,--Pe}else{for(ee=l*L,Q=l*Pe,de=m,Y=0;Y<A;++Y)P=y[B=ee+de],y[B]=y[V=Q+de],y[V]=P,de+=M;--Pe}break}if(--Pe<L)break}}}}i($e),i(et),Pe-Ce<=32?d(Ce,Pe,y,m,l,w,v,A,M,k,E):u(Ce,Pe,y,m,l,w,v,A,M,k,E)}}},n={"uint32,1,0":function(d,s){return function(i){var u=i.data,f=0|i.offset,p=i.shape,y=i.stride,m=0|y[0],l=0|p[0],w=0|y[1],v=0|p[1],A=w,M=w;l<=32?d(0,l-1,u,f,m,w,l,v,A,M,1):s(0,l-1,u,f,m,w,l,v,A,M,1)}}};T.exports=function(d,s){var y,m,l,w,v,i=[s,d].join(","),u=n[i],f=(y=d,l=r(m=s),w=[m,y].join(","),v=t[w],l?v(l[0],l[1]):v()),p=function(y,m,l){var w=r(m),v=[m,y].join(","),A=a[v];return y.length>1&&w?A(l,w[0],w[1]):A(l)}(d,s,f);return u(f,p)}},{"typedarray-pool":308}],258:[function(x,T,b){"use strict";var e=x("./lib/compile_sort.js"),r={};T.exports=function(t){var a=t.order,n=t.dtype,d=[a,n].join(":"),s=r[d];return s||(r[d]=s=e(a,n)),s(t),t}},{"./lib/compile_sort.js":257}],259:[function(x,T,b){var e=x("is-buffer"),r="undefined"!=typeof Float64Array;function t(i,u){return i[0]-u[0]}function a(){var i,u=this.stride,f=new Array(u.length);for(i=0;i<f.length;++i)f[i]=[Math.abs(u[i]),i];f.sort(t);var p=new Array(f.length);for(i=0;i<p.length;++i)p[i]=f[i][1];return p}var n={T:function(i){function u(p){this.data=p}var f=u.prototype;return f.dtype=i,f.index=function(){return-1},f.size=0,f.dimension=-1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new u(this.data)},f.get=f.set=function(){},f.pick=function(){return null},function(p){return new u(p)}},0:function(i,u){function f(y,m){this.data=y,this.offset=m}var p=f.prototype;return p.dtype=i,p.index=function(){return this.offset},p.dimension=0,p.size=1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new f(this.data,this.offset)},p.pick=function(){return u(this.data)},p.valueOf=p.get=function(){return"generic"===i?this.data.get(this.offset):this.data[this.offset]},p.set=function(y){return"generic"===i?this.data.set(this.offset,y):this.data[this.offset]=y},function(y,m,l,w){return new f(y,w)}},1:function(i,u,f){function p(m,l,w,v){this.data=m,this.shape=[l],this.stride=[w],this.offset=0|v}var y=p.prototype;return y.dtype=i,y.dimension=1,Object.defineProperty(y,"size",{get:function(){return this.shape[0]}}),y.order=[0],y.set=function(m,l){return"generic"===i?this.data.set(this.offset+this.stride[0]*m,l):this.data[this.offset+this.stride[0]*m]=l},y.get=function(m){return"generic"===i?this.data.get(this.offset+this.stride[0]*m):this.data[this.offset+this.stride[0]*m]},y.index=function(m){return this.offset+this.stride[0]*m},y.hi=function(m){return new p(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,this.stride[0],this.offset)},y.lo=function(m){var l=this.offset,w=0,v=this.shape[0],A=this.stride[0];return"number"==typeof m&&m>=0&&(l+=A*(w=0|m),v-=w),new p(this.data,v,A,l)},y.step=function(m){var l=this.shape[0],w=this.stride[0],v=this.offset,A=0,M=Math.ceil;return"number"==typeof m&&((A=0|m)<0?(v+=w*(l-1),l=M(-l/A)):l=M(l/A),w*=A),new p(this.data,l,w,v)},y.transpose=function(m){return new p(this.data,this.shape[m=void 0===m?0:0|m],this.stride[m],this.offset)},y.pick=function(m){var l=[],w=[],v=this.offset;return"number"==typeof m&&m>=0?v=v+this.stride[0]*m|0:(l.push(this.shape[0]),w.push(this.stride[0])),(0,u[l.length+1])(this.data,l,w,v)},function(m,l,w,v){return new p(m,l[0],w[0],v)}},2:function(i,u,f){function p(m,l,w,v,A,M){this.data=m,this.shape=[l,w],this.stride=[v,A],this.offset=0|M}var y=p.prototype;return y.dtype=i,y.dimension=2,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(y,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),y.set=function(m,l,w){return"generic"===i?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*l,w):this.data[this.offset+this.stride[0]*m+this.stride[1]*l]=w},y.get=function(m,l){return"generic"===i?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*l):this.data[this.offset+this.stride[0]*m+this.stride[1]*l]},y.index=function(m,l){return this.offset+this.stride[0]*m+this.stride[1]*l},y.hi=function(m,l){return new p(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof l||l<0?this.shape[1]:0|l,this.stride[0],this.stride[1],this.offset)},y.lo=function(m,l){var w=this.offset,v=0,A=this.shape[0],M=this.shape[1],k=this.stride[0],E=this.stride[1];return"number"==typeof m&&m>=0&&(w+=k*(v=0|m),A-=v),"number"==typeof l&&l>=0&&(w+=E*(v=0|l),M-=v),new p(this.data,A,M,k,E,w)},y.step=function(m,l){var w=this.shape[0],v=this.shape[1],A=this.stride[0],M=this.stride[1],k=this.offset,E=0,P=Math.ceil;return"number"==typeof m&&((E=0|m)<0?(k+=A*(w-1),w=P(-w/E)):w=P(w/E),A*=E),"number"==typeof l&&((E=0|l)<0?(k+=M*(v-1),v=P(-v/E)):v=P(v/E),M*=E),new p(this.data,w,v,A,M,k)},y.transpose=function(m,l){var w=this.shape,v=this.stride;return new p(this.data,w[m=void 0===m?0:0|m],w[l=void 0===l?1:0|l],v[m],v[l],this.offset)},y.pick=function(m,l){var w=[],v=[],A=this.offset;return"number"==typeof m&&m>=0?A=A+this.stride[0]*m|0:(w.push(this.shape[0]),v.push(this.stride[0])),"number"==typeof l&&l>=0?A=A+this.stride[1]*l|0:(w.push(this.shape[1]),v.push(this.stride[1])),(0,u[w.length+1])(this.data,w,v,A)},function(m,l,w,v){return new p(m,l[0],l[1],w[0],w[1],v)}},3:function(i,u,f){function p(m,l,w,v,A,M,k,E){this.data=m,this.shape=[l,w,v],this.stride=[A,M,k],this.offset=0|E}var y=p.prototype;return y.dtype=i,y.dimension=3,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(y,"order",{get:function(){var m=Math.abs(this.stride[0]),l=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return m>l?l>w?[2,1,0]:m>w?[1,2,0]:[1,0,2]:m>w?[2,0,1]:w>l?[0,1,2]:[0,2,1]}}),y.set=function(m,l,w,v){return"generic"===i?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w,v):this.data[this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w]=v},y.get=function(m,l,w){return"generic"===i?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w):this.data[this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w]},y.index=function(m,l,w){return this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w},y.hi=function(m,l,w){return new p(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof l||l<0?this.shape[1]:0|l,"number"!=typeof w||w<0?this.shape[2]:0|w,this.stride[0],this.stride[1],this.stride[2],this.offset)},y.lo=function(m,l,w){var v=this.offset,A=0,M=this.shape[0],k=this.shape[1],E=this.shape[2],P=this.stride[0],S=this.stride[1],F=this.stride[2];return"number"==typeof m&&m>=0&&(v+=P*(A=0|m),M-=A),"number"==typeof l&&l>=0&&(v+=S*(A=0|l),k-=A),"number"==typeof w&&w>=0&&(v+=F*(A=0|w),E-=A),new p(this.data,M,k,E,P,S,F,v)},y.step=function(m,l,w){var v=this.shape[0],A=this.shape[1],M=this.shape[2],k=this.stride[0],E=this.stride[1],P=this.stride[2],S=this.offset,F=0,R=Math.ceil;return"number"==typeof m&&((F=0|m)<0?(S+=k*(v-1),v=R(-v/F)):v=R(v/F),k*=F),"number"==typeof l&&((F=0|l)<0?(S+=E*(A-1),A=R(-A/F)):A=R(A/F),E*=F),"number"==typeof w&&((F=0|w)<0?(S+=P*(M-1),M=R(-M/F)):M=R(M/F),P*=F),new p(this.data,v,A,M,k,E,P,S)},y.transpose=function(m,l,w){var v=this.shape,A=this.stride;return new p(this.data,v[m=void 0===m?0:0|m],v[l=void 0===l?1:0|l],v[w=void 0===w?2:0|w],A[m],A[l],A[w],this.offset)},y.pick=function(m,l,w){var v=[],A=[],M=this.offset;return"number"==typeof m&&m>=0?M=M+this.stride[0]*m|0:(v.push(this.shape[0]),A.push(this.stride[0])),"number"==typeof l&&l>=0?M=M+this.stride[1]*l|0:(v.push(this.shape[1]),A.push(this.stride[1])),"number"==typeof w&&w>=0?M=M+this.stride[2]*w|0:(v.push(this.shape[2]),A.push(this.stride[2])),(0,u[v.length+1])(this.data,v,A,M)},function(m,l,w,v){return new p(m,l[0],l[1],l[2],w[0],w[1],w[2],v)}},4:function(i,u,f){function p(m,l,w,v,A,M,k,E,P,S){this.data=m,this.shape=[l,w,v,A],this.stride=[M,k,E,P],this.offset=0|S}var y=p.prototype;return y.dtype=i,y.dimension=4,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(y,"order",{get:f}),y.set=function(m,l,w,v,A){return"generic"===i?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w+this.stride[3]*v,A):this.data[this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w+this.stride[3]*v]=A},y.get=function(m,l,w,v){return"generic"===i?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w+this.stride[3]*v):this.data[this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w+this.stride[3]*v]},y.index=function(m,l,w,v){return this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w+this.stride[3]*v},y.hi=function(m,l,w,v){return new p(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof l||l<0?this.shape[1]:0|l,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof v||v<0?this.shape[3]:0|v,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},y.lo=function(m,l,w,v){var A=this.offset,M=0,k=this.shape[0],E=this.shape[1],P=this.shape[2],S=this.shape[3],F=this.stride[0],R=this.stride[1],D=this.stride[2],L=this.stride[3];return"number"==typeof m&&m>=0&&(A+=F*(M=0|m),k-=M),"number"==typeof l&&l>=0&&(A+=R*(M=0|l),E-=M),"number"==typeof w&&w>=0&&(A+=D*(M=0|w),P-=M),"number"==typeof v&&v>=0&&(A+=L*(M=0|v),S-=M),new p(this.data,k,E,P,S,F,R,D,L,A)},y.step=function(m,l,w,v){var A=this.shape[0],M=this.shape[1],k=this.shape[2],E=this.shape[3],P=this.stride[0],S=this.stride[1],F=this.stride[2],R=this.stride[3],D=this.offset,L=0,B=Math.ceil;return"number"==typeof m&&((L=0|m)<0?(D+=P*(A-1),A=B(-A/L)):A=B(A/L),P*=L),"number"==typeof l&&((L=0|l)<0?(D+=S*(M-1),M=B(-M/L)):M=B(M/L),S*=L),"number"==typeof w&&((L=0|w)<0?(D+=F*(k-1),k=B(-k/L)):k=B(k/L),F*=L),"number"==typeof v&&((L=0|v)<0?(D+=R*(E-1),E=B(-E/L)):E=B(E/L),R*=L),new p(this.data,A,M,k,E,P,S,F,R,D)},y.transpose=function(m,l,w,v){var A=this.shape,M=this.stride;return new p(this.data,A[m=void 0===m?0:0|m],A[l=void 0===l?1:0|l],A[w=void 0===w?2:0|w],A[v=void 0===v?3:0|v],M[m],M[l],M[w],M[v],this.offset)},y.pick=function(m,l,w,v){var A=[],M=[],k=this.offset;return"number"==typeof m&&m>=0?k=k+this.stride[0]*m|0:(A.push(this.shape[0]),M.push(this.stride[0])),"number"==typeof l&&l>=0?k=k+this.stride[1]*l|0:(A.push(this.shape[1]),M.push(this.stride[1])),"number"==typeof w&&w>=0?k=k+this.stride[2]*w|0:(A.push(this.shape[2]),M.push(this.stride[2])),"number"==typeof v&&v>=0?k=k+this.stride[3]*v|0:(A.push(this.shape[3]),M.push(this.stride[3])),(0,u[A.length+1])(this.data,A,M,k)},function(m,l,w,v){return new p(m,l[0],l[1],l[2],l[3],w[0],w[1],w[2],w[3],v)}},5:function(i,u,f){function p(m,l,w,v,A,M,k,E,P,S,F,R){this.data=m,this.shape=[l,w,v,A,M],this.stride=[k,E,P,S,F],this.offset=0|R}var y=p.prototype;return y.dtype=i,y.dimension=5,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(y,"order",{get:f}),y.set=function(m,l,w,v,A,M){return"generic"===i?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w+this.stride[3]*v+this.stride[4]*A,M):this.data[this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w+this.stride[3]*v+this.stride[4]*A]=M},y.get=function(m,l,w,v,A){return"generic"===i?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w+this.stride[3]*v+this.stride[4]*A):this.data[this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w+this.stride[3]*v+this.stride[4]*A]},y.index=function(m,l,w,v,A){return this.offset+this.stride[0]*m+this.stride[1]*l+this.stride[2]*w+this.stride[3]*v+this.stride[4]*A},y.hi=function(m,l,w,v,A){return new p(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof l||l<0?this.shape[1]:0|l,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof v||v<0?this.shape[3]:0|v,"number"!=typeof A||A<0?this.shape[4]:0|A,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},y.lo=function(m,l,w,v,A){var M=this.offset,k=0,E=this.shape[0],P=this.shape[1],S=this.shape[2],F=this.shape[3],R=this.shape[4],D=this.stride[0],L=this.stride[1],B=this.stride[2],V=this.stride[3],Z=this.stride[4];return"number"==typeof m&&m>=0&&(M+=D*(k=0|m),E-=k),"number"==typeof l&&l>=0&&(M+=L*(k=0|l),P-=k),"number"==typeof w&&w>=0&&(M+=B*(k=0|w),S-=k),"number"==typeof v&&v>=0&&(M+=V*(k=0|v),F-=k),"number"==typeof A&&A>=0&&(M+=Z*(k=0|A),R-=k),new p(this.data,E,P,S,F,R,D,L,B,V,Z,M)},y.step=function(m,l,w,v,A){var M=this.shape[0],k=this.shape[1],E=this.shape[2],P=this.shape[3],S=this.shape[4],F=this.stride[0],R=this.stride[1],D=this.stride[2],L=this.stride[3],B=this.stride[4],V=this.offset,Z=0,Y=Math.ceil;return"number"==typeof m&&((Z=0|m)<0?(V+=F*(M-1),M=Y(-M/Z)):M=Y(M/Z),F*=Z),"number"==typeof l&&((Z=0|l)<0?(V+=R*(k-1),k=Y(-k/Z)):k=Y(k/Z),R*=Z),"number"==typeof w&&((Z=0|w)<0?(V+=D*(E-1),E=Y(-E/Z)):E=Y(E/Z),D*=Z),"number"==typeof v&&((Z=0|v)<0?(V+=L*(P-1),P=Y(-P/Z)):P=Y(P/Z),L*=Z),"number"==typeof A&&((Z=0|A)<0?(V+=B*(S-1),S=Y(-S/Z)):S=Y(S/Z),B*=Z),new p(this.data,M,k,E,P,S,F,R,D,L,B,V)},y.transpose=function(m,l,w,v,A){var M=this.shape,k=this.stride;return new p(this.data,M[m=void 0===m?0:0|m],M[l=void 0===l?1:0|l],M[w=void 0===w?2:0|w],M[v=void 0===v?3:0|v],M[A=void 0===A?4:0|A],k[m],k[l],k[w],k[v],k[A],this.offset)},y.pick=function(m,l,w,v,A){var M=[],k=[],E=this.offset;return"number"==typeof m&&m>=0?E=E+this.stride[0]*m|0:(M.push(this.shape[0]),k.push(this.stride[0])),"number"==typeof l&&l>=0?E=E+this.stride[1]*l|0:(M.push(this.shape[1]),k.push(this.stride[1])),"number"==typeof w&&w>=0?E=E+this.stride[2]*w|0:(M.push(this.shape[2]),k.push(this.stride[2])),"number"==typeof v&&v>=0?E=E+this.stride[3]*v|0:(M.push(this.shape[3]),k.push(this.stride[3])),"number"==typeof A&&A>=0?E=E+this.stride[4]*A|0:(M.push(this.shape[4]),k.push(this.stride[4])),(0,u[M.length+1])(this.data,M,k,E)},function(m,l,w,v){return new p(m,l[0],l[1],l[2],l[3],l[4],w[0],w[1],w[2],w[3],w[4],v)}}};function d(i,u){var f=-1===u?"T":String(u),p=n[f];return-1===u?p(i):0===u?p(i,s[i][0]):p(i,s[i],a)}var s={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};T.exports=function(i,u,f,p){if(void 0===i)return(0,s.array[0])([]);"number"==typeof i&&(i=[i]),void 0===u&&(u=[i.length]);var y=u.length;if(void 0===f){f=new Array(y);for(var m=y-1,l=1;m>=0;--m)f[m]=l,l*=u[m]}if(void 0===p)for(p=0,m=0;m<y;++m)f[m]<0&&(p-=(u[m]-1)*f[m]);for(var w=function(A){if(e(A))return"buffer";if(r)switch(Object.prototype.toString.call(A)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(A)?"array":"generic"}(i),v=s[w];v.length<=y+1;)v.push(d(w,v.length-1));return(0,v[y+1])(i,u,f,p)}},{"is-buffer":237}],260:[function(x,T,b){"use strict";var e=x("double-bits"),r=Math.pow(2,-1074);T.exports=function(t,a){if(isNaN(t)||isNaN(a))return NaN;if(t===a)return t;if(0===t)return a<0?-r:r;var n=e.hi(t),d=e.lo(t);return a>t==t>0?d===-1>>>0?(n+=1,d=0):d+=1:0===d?(d=-1>>>0,n-=1):d-=1,e.pack(d,n)}},{"double-bits":64}],261:[function(x,T,b){b.vertexNormals=function(e,r,t){for(var a=r.length,n=new Array(a),d=void 0===t?1e-6:t,s=0;s<a;++s)n[s]=[0,0,0];for(s=0;s<e.length;++s)for(var i=e[s],f=i[i.length-1],p=i[0],y=0;y<i.length;++y){for(var m=r[f],l=r[f=p],w=r[p=i[(y+1)%i.length]],v=new Array(3),A=0,M=new Array(3),k=0,E=0;E<3;++E)v[E]=m[E]-l[E],A+=v[E]*v[E],M[E]=w[E]-l[E],k+=M[E]*M[E];if(A*k>d){var P=n[f],S=1/Math.sqrt(A*k);for(E=0;E<3;++E){var F=(E+1)%3,R=(E+2)%3;P[E]+=S*(M[F]*v[R]-M[R]*v[F])}}}for(s=0;s<a;++s){P=n[s];var D=0;for(E=0;E<3;++E)D+=P[E]*P[E];if(D>d)for(S=1/Math.sqrt(D),E=0;E<3;++E)P[E]*=S;else for(E=0;E<3;++E)P[E]=0}return n},b.faceNormals=function(e,r,t){for(var a=e.length,n=new Array(a),d=void 0===t?1e-6:t,s=0;s<a;++s){for(var i=e[s],u=new Array(3),f=0;f<3;++f)u[f]=r[i[f]];var p=new Array(3),y=new Array(3);for(f=0;f<3;++f)p[f]=u[1][f]-u[0][f],y[f]=u[2][f]-u[0][f];var m=new Array(3),l=0;for(f=0;f<3;++f){var w=(f+1)%3,v=(f+2)%3;m[f]=p[w]*y[v]-p[v]*y[w],l+=m[f]*m[f]}for(l=l>d?1/Math.sqrt(l):0,f=0;f<3;++f)m[f]*=l;n[s]=m}return n}},{}],262:[function(x,T,b){"use strict";T.exports=function(e,r,t,a,n,d,s,i,u,f){var p=r+d+f;if(y>0){var y=Math.sqrt(p+1);e[0]=.5*(s-u)/y,e[1]=.5*(i-a)/y,e[2]=.5*(t-d)/y,e[3]=.5*y}else{var m=Math.max(r,d,f);y=Math.sqrt(2*m-p+1),r>=m?(e[0]=.5*y,e[1]=.5*(n+t)/y,e[2]=.5*(i+a)/y,e[3]=.5*(s-u)/y):d>=m?(e[0]=.5*(t+n)/y,e[1]=.5*y,e[2]=.5*(u+s)/y,e[3]=.5*(i-a)/y):(e[0]=.5*(a+i)/y,e[1]=.5*(s+u)/y,e[2]=.5*y,e[3]=.5*(t-n)/y)}return e}},{}],263:[function(x,T,b){"use strict";T.exports=function(p){var y=(p=p||{}).center||[0,0,0],m=p.rotation||[0,0,0,1],l=p.radius||1;y=[].slice.call(y,0,3),i(m=[].slice.call(m,0,4),m);var w=new u(m,y,Math.log(l));return w.setDistanceLimits(p.zoomMin,p.zoomMax),("eye"in p||"up"in p)&&w.lookAt(0,p.eye,p.center,p.up),w};var e=x("filtered-vector"),r=x("gl-mat4/lookAt"),t=x("gl-mat4/fromQuat"),a=x("gl-mat4/invert"),n=x("./lib/quatFromFrame");function d(p,y,m){return Math.sqrt(Math.pow(p,2)+Math.pow(y,2)+Math.pow(m,2))}function s(p,y,m,l){return Math.sqrt(Math.pow(p,2)+Math.pow(y,2)+Math.pow(m,2)+Math.pow(l,2))}function i(p,y){var m=y[0],l=y[1],w=y[2],v=y[3],A=s(m,l,w,v);A>1e-6?(p[0]=m/A,p[1]=l/A,p[2]=w/A,p[3]=v/A):(p[0]=p[1]=p[2]=0,p[3]=1)}function u(p,y,m){this.radius=e([m]),this.center=e(y),this.rotation=e(p),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var f=u.prototype;f.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},f.recalcMatrix=function(p){this.radius.curve(p),this.center.curve(p),this.rotation.curve(p);var y=this.computedRotation;i(y,y);var m=this.computedMatrix;t(m,y);var l=this.computedCenter,w=this.computedEye,v=this.computedUp,A=Math.exp(this.computedRadius[0]);w[0]=l[0]+A*m[2],w[1]=l[1]+A*m[6],w[2]=l[2]+A*m[10],v[0]=m[1],v[1]=m[5],v[2]=m[9];for(var M=0;M<3;++M){for(var k=0,E=0;E<3;++E)k+=m[M+4*E]*w[E];m[12+M]=-k}},f.getMatrix=function(p,y){this.recalcMatrix(p);var m=this.computedMatrix;if(y){for(var l=0;l<16;++l)y[l]=m[l];return y}return m},f.idle=function(p){this.center.idle(p),this.radius.idle(p),this.rotation.idle(p)},f.flush=function(p){this.center.flush(p),this.radius.flush(p),this.rotation.flush(p)},f.pan=function(p,y,m,l){y=y||0,m=m||0,l=l||0,this.recalcMatrix(p);var w=this.computedMatrix,v=w[1],A=w[5],M=w[9],k=d(v,A,M),E=w[0],P=w[4],S=w[8],F=E*(v/=k)+P*(A/=k)+S*(M/=k),R=d(E-=v*F,P-=A*F,S-=M*F),D=w[2],L=w[6],B=w[10],V=D*v+L*A+B*M,Z=D*(E/=R)+L*(P/=R)+B*(S/=R),Y=d(D-=V*v+Z*E,L-=V*A+Z*P,B-=V*M+Z*S);D/=Y,L/=Y,B/=Y,this.center.move(p,E*y+v*m,P*y+A*m,S*y+M*m);var K=Math.exp(this.computedRadius[0]);K=Math.max(1e-4,K+l),this.radius.set(p,Math.log(K))},f.rotate=function(p,y,m,l){this.recalcMatrix(p);var w=this.computedMatrix,S=w[2],F=w[6],R=w[10],D=(y=y||0)*w[0]+(m=m||0)*w[1],L=y*w[4]+m*w[5],B=y*w[8]+m*w[9],V=-(F*B-R*L),Z=-(R*D-S*B),Y=-(S*L-F*D),ee=Math.sqrt(Math.max(0,1-Math.pow(V,2)-Math.pow(Z,2)-Math.pow(Y,2))),Q=s(V,Z,Y,ee);Q>1e-6?(V/=Q,Z/=Q,Y/=Q,ee/=Q):(V=Z=Y=0,ee=1);var $=this.computedRotation,K=$[0],oe=$[1],j=$[2],H=$[3],G=K*ee+H*V+oe*Y-j*Z,re=oe*ee+H*Z+j*V-K*Y,q=j*ee+H*Y+K*Z-oe*V,te=H*ee-K*V-oe*Z-j*Y;if(l){V=S,Z=F,Y=R;var ne=Math.sin(l)/d(V,Z,Y);V*=ne,Z*=ne,Y*=ne,te=te*(ee=Math.cos(y))-(G=G*ee+te*V+re*Y-q*Z)*V-(re=re*ee+te*Z+q*V-G*Y)*Z-(q=q*ee+te*Y+G*Z-re*V)*Y}var le=s(G,re,q,te);le>1e-6?(G/=le,re/=le,q/=le,te/=le):(G=re=q=0,te=1),this.rotation.set(p,G,re,q,te)},f.lookAt=function(p,y,m,l){this.recalcMatrix(p);var w=this.computedMatrix;r(w,y=y||this.computedEye,m=m||this.computedCenter,l=l||this.computedUp);var v=this.computedRotation;n(v,w[0],w[1],w[2],w[4],w[5],w[6],w[8],w[9],w[10]),i(v,v),this.rotation.set(p,v[0],v[1],v[2],v[3]);for(var A=0,M=0;M<3;++M)A+=Math.pow(m[M]-y[M],2);this.radius.set(p,.5*Math.log(Math.max(A,1e-6))),this.center.set(p,m[0],m[1],m[2])},f.translate=function(p,y,m,l){this.center.move(p,y||0,m||0,l||0)},f.setMatrix=function(p,y){var m=this.computedRotation;n(m,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),i(m,m),this.rotation.set(p,m[0],m[1],m[2],m[3]);var l=this.computedMatrix;a(l,y);var w=l[15];if(Math.abs(w)>1e-6){var v=l[12]/w,A=l[13]/w,M=l[14]/w;this.recalcMatrix(p);var k=Math.exp(this.computedRadius[0]);this.center.set(p,v-l[2]*k,A-l[6]*k,M-l[10]*k),this.radius.idle(p)}else this.center.idle(p),this.radius.idle(p)},f.setDistance=function(p,y){y>0&&this.radius.set(p,Math.log(y))},f.setDistanceLimits=function(p,y){p=p>0?Math.log(p):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=y},f.getDistanceLimits=function(p){var y=this.radius.bounds;return p?(p[0]=Math.exp(y[0][0]),p[1]=Math.exp(y[1][0]),p):[Math.exp(y[0][0]),Math.exp(y[1][0])]},f.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},f.fromJSON=function(p){var y=this.lastT(),m=p.center;m&&this.center.set(y,m[0],m[1],m[2]);var l=p.rotation;l&&this.rotation.set(y,l[0],l[1],l[2],l[3]);var w=p.distance;w&&w>0&&this.radius.set(y,Math.log(w)),this.setDistanceLimits(p.zoomMin,p.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(x,T,b){"use strict";var e=x("repeat-string");T.exports=function(r,t,a){return e(a=void 0!==a?a+"":" ",t)+r}},{"repeat-string":277}],265:[function(x,T,b){T.exports=function(e,r){r||(r=[0,""]),e=String(e);var t=parseFloat(e,10);return r[0]=t,r[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r}},{}],266:[function(x,T,b){"use strict";T.exports=function(r,t){for(var a=0|t.length,n=r.length,d=[new Array(a),new Array(a)],s=0;s<a;++s)d[0][s]=[],d[1][s]=[];for(s=0;s<n;++s){var i=r[s];d[0][i[0]].push(i),d[1][i[1]].push(i)}var M,u=[];for(s=0;s<a;++s)d[0][s].length+d[1][s].length===0&&u.push([s]);function f(A,M){var k=d[M][A[M]];k.splice(k.indexOf(A),1)}function p(A,M,k){for(var E,P,S,F=0;F<2;++F)if(d[F][M].length>0){E=d[F][M][0],S=F;break}P=E[1^S];for(var R=0;R<2;++R)for(var D=d[R][M],L=0;L<D.length;++L){var B=D[L],V=B[1^R];e(t[A],t[M],t[P],t[V])>0&&(E=B,P=V,S=R)}return k||E&&f(E,S),P}function y(A,M){var k=d[M][A][0],E=[A];f(k,M);for(var P=k[1^M];;){for(;P!==A;)E.push(P),P=p(E[E.length-2],P,!1);if(d[0][A].length+d[1][A].length===0)break;var S=E[E.length-1],F=A,R=E[1],D=p(S,F,!0);if(e(t[S],t[F],t[R],t[D])<0)break;E.push(A),P=p(S,F)}return E}for(s=0;s<a;++s)for(var l=0;l<2;++l){for(var w=[];d[l][s].length>0;){var v=y(s,l);(M=v)[1]===M[M.length-1]?w.push.apply(w,v):(w.length>0&&u.push(w),w=v)}w.length>0&&u.push(w)}return u};var e=x("compare-angle")},{"compare-angle":54}],267:[function(x,T,b){"use strict";T.exports=function(r,t){for(var a=e(r,t.length),n=new Array(t.length),d=new Array(t.length),s=[],i=0;i<t.length;++i){var u=a[i].length;d[i]=u,n[i]=!0,u<=1&&s.push(i)}for(;s.length>0;){var f=s.pop();n[f]=!1;var p=a[f];for(i=0;i<p.length;++i){var y=p[i];0==--d[y]&&s.push(y)}}var m=new Array(t.length),l=[];for(i=0;i<t.length;++i)n[i]?(m[i]=f=l.length,l.push(t[i])):m[i]=-1;var w=[];for(i=0;i<r.length;++i){var v=r[i];n[v[0]]&&n[v[1]]&&w.push([m[v[0]],m[v[1]]])}return[w,l]};var e=x("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(x,T,b){"use strict";T.exports=function(u,f){for(var p=s(u,f),y=(f=p[1]).length,m=e(u=p[0],f.length),l=0;l<y;++l)if(m[l].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=r(u,f),v=(w=w.filter(function(he){for(var be=he.length,ge=[0],we=0;we<be;++we){var ke=f[he[we]],De=f[he[(we+1)%be]],Ee=a(-ke[0],ke[1]),Re=a(-ke[0],De[1]),ve=a(De[0],ke[1]),Te=a(De[0],De[1]);ge=n(ge,n(n(Ee,Re),n(ve,Te)))}return ge[ge.length-1]>0})).length,A=new Array(v),M=new Array(v);for(l=0;l<v;++l){A[l]=l;var k=new Array(v),E=w[l].map(function(he){return f[he]}),P=t([E]),S=0;e:for(var F=0;F<v;++F)if(k[F]=0,l!==F){for(var R=(ue=w[F]).length,D=0;D<R;++D){var L=P(f[ue[D]]);if(0!==L){L<0&&(k[F]=1,S+=1);continue e}}k[F]=1,S+=1}M[l]=[S,l,k]}for(M.sort(function(he,be){return be[0]-he[0]}),l=0;l<v;++l){var B=(k=M[l])[1],V=k[2];for(F=0;F<v;++F)V[F]&&(A[F]=B)}var Z=function(he){for(var be=new Array(he),ge=0;ge<he;++ge)be[ge]=[];return be}(v);for(l=0;l<v;++l)Z[l].push(A[l]),Z[A[l]].push(l);var Y={},ee=i(y,!1);for(l=0;l<v;++l)for(R=(ue=w[l]).length,F=0;F<R;++F){var Q=ue[F],$=ue[(F+1)%R],K=Math.min(Q,$)+":"+Math.max(Q,$);if(K in Y){var oe=Y[K];Z[oe].push(l),Z[l].push(oe),ee[Q]=ee[$]=!0}else Y[K]=l}function j(he){for(var be=he.length,ge=0;ge<be;++ge)if(!ee[he[ge]])return!1;return!0}var H=[],G=i(v,-1);for(l=0;l<v;++l)A[l]!==l||j(w[l])?G[l]=-1:(H.push(l),G[l]=0);for(p=[];H.length>0;){var re=H.pop(),q=Z[re];d(q,function(he,be){return he-be});var te,ne=q.length,le=G[re];if(0===le){var ue=w[re];te=[ue]}for(l=0;l<ne;++l){var de=q[l];G[de]>=0||(G[de]=1^le,H.push(de),0===le&&(j(ue=w[de])||(ue.reverse(),te.push(ue))))}0===le&&p.push(te)}return p};var e=x("edges-to-adjacency-list"),r=x("planar-dual"),t=x("point-in-big-polygon"),a=x("two-product"),n=x("robust-sum"),d=x("uniq"),s=x("./lib/trim-leaves");function i(u,f){for(var p=new Array(u),y=0;y<u;++y)p[y]=f;return p}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(x,T,b){T.exports=function(i){for(var u=i.length,f=[],p=[],y=0;y<u;++y)for(var m=i[y],l=m.length,w=l-1,v=0;v<l;w=v++){var A=m[w],M=m[v];A[0]===M[0]?p.push([A,M]):f.push([A,M])}if(0===f.length)return 0===p.length?s:(k=d(p),function(S){return k(S[0],S[1])?0:1});var k,S,F,E=r(f),P=(S=E.slabs,F=E.coordinates,function(R){var D=a.le(F,R[0]);if(D<0)return 1;var L=S[D];if(!L){if(!(D>0&&F[D]===R[0]))return 1;L=S[D-1]}for(var B=1;L;){var V=L.key,Z=e(R,V[0],V[1]);if(V[0][0]<V[1][0])if(Z<0)L=L.left;else{if(!(Z>0))return 0;B=-1,L=L.right}else if(Z>0)L=L.left;else{if(!(Z<0))return 0;B=1,L=L.right}}return B});return 0===p.length?P:function(S,F){return function(R){return S(R[0],R[1])?0:F(R)}}(d(p),P)};var e=x("robust-orientation")[3],r=x("slab-decomposition"),t=x("interval-tree-1d"),a=x("binary-search-bounds");function n(){return!0}function d(i){for(var u={},f=0;f<i.length;++f){var p=i[f],y=p[0][0],m=p[0][1],l=p[1][1],w=[Math.min(m,l),Math.max(m,l)];y in u?u[y].push(w):u[y]=[w]}var k,v={},A=Object.keys(u);for(f=0;f<A.length;++f)v[A[f]]=t(u[A[f]]);return k=v,function(E,P){var S=k[E];return!!S&&!!S.queryPoint(P,n)}}function s(i){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(x,T,b){"use strict";var e=new Float64Array(4),r=new Float64Array(4),t=new Float64Array(4);T.exports=function(a,n,d,s,i){e.length<s.length&&(e=new Float64Array(s.length),r=new Float64Array(s.length),t=new Float64Array(s.length));for(var u=0;u<s.length;++u)e[u]=a[u]-s[u],r[u]=n[u]-a[u],t[u]=d[u]-a[u];var f=0,p=0,y=0,m=0,l=0,w=0;for(u=0;u<s.length;++u){var v=r[u],A=t[u],M=e[u];f+=v*v,p+=v*A,y+=A*A,m+=M*v,l+=M*A,w+=M*M}var k,E,P,S,F,R=Math.abs(f*y-p*p),D=p*l-y*m,L=p*m-f*l;if(D+L<=R)if(D<0)L<0&&m<0?(L=0,-m>=f?(D=1,k=f+2*m+w):k=m*(D=-m/f)+w):(D=0,l>=0?(L=0,k=w):-l>=y?(L=1,k=y+2*l+w):k=l*(L=-l/y)+w);else if(L<0)L=0,m>=0?(D=0,k=w):-m>=f?(D=1,k=f+2*m+w):k=m*(D=-m/f)+w;else{var B=1/R;k=(D*=B)*(f*D+p*(L*=B)+2*m)+L*(p*D+y*L+2*l)+w}else D<0?(P=y+l)>(E=p+m)?(S=P-E)>=(F=f-2*p+y)?(D=1,L=0,k=f+2*m+w):k=(D=S/F)*(f*D+p*(L=1-D)+2*m)+L*(p*D+y*L+2*l)+w:(D=0,P<=0?(L=1,k=y+2*l+w):l>=0?(L=0,k=w):k=l*(L=-l/y)+w):L<0?(P=f+m)>(E=p+l)?(S=P-E)>=(F=f-2*p+y)?(L=1,D=0,k=y+2*l+w):k=(D=1-(L=S/F))*(f*D+p*L+2*m)+L*(p*D+y*L+2*l)+w:(L=0,P<=0?(D=1,k=f+2*m+w):m>=0?(D=0,k=w):k=m*(D=-m/f)+w):(S=y+l-p-m)<=0?(D=0,L=1,k=y+2*l+w):S>=(F=f-2*p+y)?(D=1,L=0,k=f+2*m+w):k=(D=S/F)*(f*D+p*(L=1-D)+2*m)+L*(p*D+y*L+2*l)+w;var V=1-D-L;for(u=0;u<s.length;++u)i[u]=V*a[u]+D*n[u]+L*d[u];return k<0?0:k}},{}],271:[function(x,T,b){T.exports=x("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(x,T,b){"use strict";var e=x("big-rat/add");T.exports=function(r,t){for(var a=r.length,n=new Array(a),d=0;d<a;++d)n[d]=e(r[d],t[d]);return n}},{"big-rat/add":15}],273:[function(x,T,b){"use strict";T.exports=function(r){for(var t=new Array(r.length),a=0;a<r.length;++a)t[a]=e(r[a]);return t};var e=x("big-rat")},{"big-rat":18}],274:[function(x,T,b){"use strict";var e=x("big-rat"),r=x("big-rat/mul");T.exports=function(t,a){for(var n=e(a),d=t.length,s=new Array(d),i=0;i<d;++i)s[i]=r(t[i],n);return s}},{"big-rat":18,"big-rat/mul":27}],275:[function(x,T,b){"use strict";var e=x("big-rat/sub");T.exports=function(r,t){for(var a=r.length,n=new Array(a),d=0;d<a;++d)n[d]=e(r[d],t[d]);return n}},{"big-rat/sub":29}],276:[function(x,T,b){"use strict";var e=x("compare-cell"),r=x("compare-oriented-cell"),t=x("cell-orientation");T.exports=function(a){a.sort(r);for(var n=a.length,d=0,s=0;s<n;++s){var i=a[s],u=t(i);if(0!==u){if(d>0){var f=a[d-1];if(0===e(i,f)&&t(f)!==u){d-=1;continue}}a[d++]=i}}return a.length=d,a}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(x,T,b){"use strict";var e,r="";T.exports=function(t,a){if("string"!=typeof t)throw new TypeError("expected a string");if(1===a)return t;if(2===a)return t+t;var n=t.length*a;if(e!==t||void 0===e)e=t,r="";else if(r.length>=n)return r.substr(0,n);for(;n>r.length&&a>1;)1&a&&(r+=t),a>>=1,t+=t;return r=(r+=t).substr(0,n)}},{}],278:[function(x,T,b){(function(e){(function(){T.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==g?g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(x,T,b){"use strict";T.exports=function(e){for(var r=e.length,t=e[e.length-1],a=r,n=r-2;n>=0;--n){var d=t,s=e[n];(u=s-((t=d+s)-d))&&(e[--a]=t,t=u)}var i=0;for(n=a;n<r;++n){var u;(u=(s=t)-((t=(d=e[n])+s)-d))&&(e[i++]=u)}return e[i++]=t,e.length=i,e}},{}],280:[function(x,T,b){"use strict";var e=x("two-product"),r=x("robust-sum"),t=x("robust-scale"),a=x("robust-compress");function n(f,p,y,m){return function(l){return m(f(y(l[0][0],l[1][1]),y(-l[0][1],l[1][0])))}}function d(f,p,y,m){return function(l){return m(f(p(f(y(l[1][1],l[2][2]),y(-l[1][2],l[2][1])),l[0][0]),f(p(f(y(l[1][0],l[2][2]),y(-l[1][2],l[2][0])),-l[0][1]),p(f(y(l[1][0],l[2][1]),y(-l[1][1],l[2][0])),l[0][2]))))}}function s(f){return(2===f?n:3===f?d:void 0)(r,t,e,a)}var i=[function(){return[0]},function(f){return[f[0][0]]}];function u(f,p,y,m,l,w){return function(v){switch(v.length){case 0:return f(v);case 1:return p(v);case 2:return y(v);case 3:return m(v)}var A=l[v.length];return A||(A=l[v.length]=w(v.length)),A(v)}}!function(){for(;i.length<4;)i.push(s(i.length));T.exports=u.apply(void 0,i.concat([i,s]));for(var f=0;f<i.length;++f)T.exports[f]=i[f]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(x,T,b){"use strict";var e=x("two-product"),r=x("robust-sum");T.exports=function(t,a){for(var n=e(t[0],a[0]),d=1;d<t.length;++d)n=r(n,e(t[d],a[d]));return n}},{"robust-sum":289,"two-product":306}],282:[function(x,T,b){"use strict";var e=x("two-product"),r=x("robust-sum"),t=x("robust-subtract"),a=x("robust-scale");function n(m){return(3===m?d:4===m?s:5===m?i:u)(r,t,e,a)}function d(m,l,w,v){return function(A,M,k){var E=w(A[0],A[0]),P=v(E,M[0]),S=v(E,k[0]),F=w(M[0],M[0]),R=v(F,A[0]),D=v(F,k[0]),L=w(k[0],k[0]),B=v(L,A[0]),V=v(L,M[0]),Z=m(l(V,D),l(R,P)),Y=l(B,S),ee=l(Z,Y);return ee[ee.length-1]}}function s(m,l,w,v){return function(A,M,k,E){var P=m(w(A[0],A[0]),w(A[1],A[1])),S=v(P,M[0]),F=v(P,k[0]),R=v(P,E[0]),D=m(w(M[0],M[0]),w(M[1],M[1])),L=v(D,A[0]),B=v(D,k[0]),V=v(D,E[0]),Z=m(w(k[0],k[0]),w(k[1],k[1])),Y=v(Z,A[0]),ee=v(Z,M[0]),Q=v(Z,E[0]),$=m(w(E[0],E[0]),w(E[1],E[1])),K=v($,A[0]),oe=v($,M[0]),j=v($,k[0]),H=m(m(v(l(j,Q),M[1]),m(v(l(oe,V),-k[1]),v(l(ee,B),E[1]))),m(v(l(oe,V),A[1]),m(v(l(K,R),-M[1]),v(l(L,S),E[1])))),G=m(m(v(l(j,Q),A[1]),m(v(l(K,R),-k[1]),v(l(Y,F),E[1]))),m(v(l(ee,B),A[1]),m(v(l(Y,F),-M[1]),v(l(L,S),k[1])))),re=l(H,G);return re[re.length-1]}}function i(m,l,w,v){return function(A,M,k,E,P){var S=m(w(A[0],A[0]),m(w(A[1],A[1]),w(A[2],A[2]))),F=v(S,M[0]),R=v(S,k[0]),D=v(S,E[0]),L=v(S,P[0]),B=m(w(M[0],M[0]),m(w(M[1],M[1]),w(M[2],M[2]))),V=v(B,A[0]),Z=v(B,k[0]),Y=v(B,E[0]),ee=v(B,P[0]),Q=m(w(k[0],k[0]),m(w(k[1],k[1]),w(k[2],k[2]))),$=v(Q,A[0]),K=v(Q,M[0]),oe=v(Q,E[0]),j=v(Q,P[0]),H=m(w(E[0],E[0]),m(w(E[1],E[1]),w(E[2],E[2]))),G=v(H,A[0]),re=v(H,M[0]),q=v(H,k[0]),te=v(H,P[0]),ne=m(w(P[0],P[0]),m(w(P[1],P[1]),w(P[2],P[2]))),le=v(ne,A[0]),ue=v(ne,M[0]),de=v(ne,k[0]),he=v(ne,E[0]),be=m(m(m(v(m(v(l(he,te),k[1]),m(v(l(de,j),-E[1]),v(l(q,oe),P[1]))),M[2]),m(v(m(v(l(he,te),M[1]),m(v(l(ue,ee),-E[1]),v(l(re,Y),P[1]))),-k[2]),v(m(v(l(de,j),M[1]),m(v(l(ue,ee),-k[1]),v(l(K,Z),P[1]))),E[2]))),m(v(m(v(l(q,oe),M[1]),m(v(l(re,Y),-k[1]),v(l(K,Z),E[1]))),-P[2]),m(v(m(v(l(he,te),M[1]),m(v(l(ue,ee),-E[1]),v(l(re,Y),P[1]))),A[2]),v(m(v(l(he,te),A[1]),m(v(l(le,L),-E[1]),v(l(G,D),P[1]))),-M[2])))),m(m(v(m(v(l(ue,ee),A[1]),m(v(l(le,L),-M[1]),v(l(V,F),P[1]))),E[2]),m(v(m(v(l(re,Y),A[1]),m(v(l(G,D),-M[1]),v(l(V,F),E[1]))),-P[2]),v(m(v(l(q,oe),M[1]),m(v(l(re,Y),-k[1]),v(l(K,Z),E[1]))),A[2]))),m(v(m(v(l(q,oe),A[1]),m(v(l(G,D),-k[1]),v(l($,R),E[1]))),-M[2]),m(v(m(v(l(re,Y),A[1]),m(v(l(G,D),-M[1]),v(l(V,F),E[1]))),k[2]),v(m(v(l(K,Z),A[1]),m(v(l($,R),-M[1]),v(l(V,F),k[1]))),-E[2]))))),ge=m(m(m(v(m(v(l(he,te),k[1]),m(v(l(de,j),-E[1]),v(l(q,oe),P[1]))),A[2]),v(m(v(l(he,te),A[1]),m(v(l(le,L),-E[1]),v(l(G,D),P[1]))),-k[2])),m(v(m(v(l(de,j),A[1]),m(v(l(le,L),-k[1]),v(l($,R),P[1]))),E[2]),v(m(v(l(q,oe),A[1]),m(v(l(G,D),-k[1]),v(l($,R),E[1]))),-P[2]))),m(m(v(m(v(l(de,j),M[1]),m(v(l(ue,ee),-k[1]),v(l(K,Z),P[1]))),A[2]),v(m(v(l(de,j),A[1]),m(v(l(le,L),-k[1]),v(l($,R),P[1]))),-M[2])),m(v(m(v(l(ue,ee),A[1]),m(v(l(le,L),-M[1]),v(l(V,F),P[1]))),k[2]),v(m(v(l(K,Z),A[1]),m(v(l($,R),-M[1]),v(l(V,F),k[1]))),-P[2])))),we=l(be,ge);return we[we.length-1]}}function u(m,l,w,v){return function(A,M,k,E,P,S){var F=m(m(w(A[0],A[0]),w(A[1],A[1])),m(w(A[2],A[2]),w(A[3],A[3]))),R=v(F,M[0]),D=v(F,k[0]),L=v(F,E[0]),B=v(F,P[0]),V=v(F,S[0]),Z=m(m(w(M[0],M[0]),w(M[1],M[1])),m(w(M[2],M[2]),w(M[3],M[3]))),Y=v(Z,A[0]),ee=v(Z,k[0]),Q=v(Z,E[0]),$=v(Z,P[0]),K=v(Z,S[0]),oe=m(m(w(k[0],k[0]),w(k[1],k[1])),m(w(k[2],k[2]),w(k[3],k[3]))),j=v(oe,A[0]),H=v(oe,M[0]),G=v(oe,E[0]),re=v(oe,P[0]),q=v(oe,S[0]),te=m(m(w(E[0],E[0]),w(E[1],E[1])),m(w(E[2],E[2]),w(E[3],E[3]))),ne=v(te,A[0]),le=v(te,M[0]),ue=v(te,k[0]),de=v(te,P[0]),he=v(te,S[0]),be=m(m(w(P[0],P[0]),w(P[1],P[1])),m(w(P[2],P[2]),w(P[3],P[3]))),ge=v(be,A[0]),we=v(be,M[0]),ke=v(be,k[0]),De=v(be,E[0]),Ee=v(be,S[0]),Re=m(m(w(S[0],S[0]),w(S[1],S[1])),m(w(S[2],S[2]),w(S[3],S[3]))),ve=v(Re,A[0]),Te=v(Re,M[0]),Ie=v(Re,k[0]),Ce=v(Re,E[0]),Pe=v(Re,P[0]),Ve=m(m(m(v(m(m(v(m(v(l(Pe,Ee),E[1]),m(v(l(Ce,he),-P[1]),v(l(De,de),S[1]))),k[2]),v(m(v(l(Pe,Ee),k[1]),m(v(l(Ie,q),-P[1]),v(l(ke,re),S[1]))),-E[2])),m(v(m(v(l(Ce,he),k[1]),m(v(l(Ie,q),-E[1]),v(l(ue,G),S[1]))),P[2]),v(m(v(l(De,de),k[1]),m(v(l(ke,re),-E[1]),v(l(ue,G),P[1]))),-S[2]))),M[3]),m(v(m(m(v(m(v(l(Pe,Ee),E[1]),m(v(l(Ce,he),-P[1]),v(l(De,de),S[1]))),M[2]),v(m(v(l(Pe,Ee),M[1]),m(v(l(Te,K),-P[1]),v(l(we,$),S[1]))),-E[2])),m(v(m(v(l(Ce,he),M[1]),m(v(l(Te,K),-E[1]),v(l(le,Q),S[1]))),P[2]),v(m(v(l(De,de),M[1]),m(v(l(we,$),-E[1]),v(l(le,Q),P[1]))),-S[2]))),-k[3]),v(m(m(v(m(v(l(Pe,Ee),k[1]),m(v(l(Ie,q),-P[1]),v(l(ke,re),S[1]))),M[2]),v(m(v(l(Pe,Ee),M[1]),m(v(l(Te,K),-P[1]),v(l(we,$),S[1]))),-k[2])),m(v(m(v(l(Ie,q),M[1]),m(v(l(Te,K),-k[1]),v(l(H,ee),S[1]))),P[2]),v(m(v(l(ke,re),M[1]),m(v(l(we,$),-k[1]),v(l(H,ee),P[1]))),-S[2]))),E[3]))),m(m(v(m(m(v(m(v(l(Ce,he),k[1]),m(v(l(Ie,q),-E[1]),v(l(ue,G),S[1]))),M[2]),v(m(v(l(Ce,he),M[1]),m(v(l(Te,K),-E[1]),v(l(le,Q),S[1]))),-k[2])),m(v(m(v(l(Ie,q),M[1]),m(v(l(Te,K),-k[1]),v(l(H,ee),S[1]))),E[2]),v(m(v(l(ue,G),M[1]),m(v(l(le,Q),-k[1]),v(l(H,ee),E[1]))),-S[2]))),-P[3]),v(m(m(v(m(v(l(De,de),k[1]),m(v(l(ke,re),-E[1]),v(l(ue,G),P[1]))),M[2]),v(m(v(l(De,de),M[1]),m(v(l(we,$),-E[1]),v(l(le,Q),P[1]))),-k[2])),m(v(m(v(l(ke,re),M[1]),m(v(l(we,$),-k[1]),v(l(H,ee),P[1]))),E[2]),v(m(v(l(ue,G),M[1]),m(v(l(le,Q),-k[1]),v(l(H,ee),E[1]))),-P[2]))),S[3])),m(v(m(m(v(m(v(l(Pe,Ee),E[1]),m(v(l(Ce,he),-P[1]),v(l(De,de),S[1]))),M[2]),v(m(v(l(Pe,Ee),M[1]),m(v(l(Te,K),-P[1]),v(l(we,$),S[1]))),-E[2])),m(v(m(v(l(Ce,he),M[1]),m(v(l(Te,K),-E[1]),v(l(le,Q),S[1]))),P[2]),v(m(v(l(De,de),M[1]),m(v(l(we,$),-E[1]),v(l(le,Q),P[1]))),-S[2]))),A[3]),v(m(m(v(m(v(l(Pe,Ee),E[1]),m(v(l(Ce,he),-P[1]),v(l(De,de),S[1]))),A[2]),v(m(v(l(Pe,Ee),A[1]),m(v(l(ve,V),-P[1]),v(l(ge,B),S[1]))),-E[2])),m(v(m(v(l(Ce,he),A[1]),m(v(l(ve,V),-E[1]),v(l(ne,L),S[1]))),P[2]),v(m(v(l(De,de),A[1]),m(v(l(ge,B),-E[1]),v(l(ne,L),P[1]))),-S[2]))),-M[3])))),m(m(m(v(m(m(v(m(v(l(Pe,Ee),M[1]),m(v(l(Te,K),-P[1]),v(l(we,$),S[1]))),A[2]),v(m(v(l(Pe,Ee),A[1]),m(v(l(ve,V),-P[1]),v(l(ge,B),S[1]))),-M[2])),m(v(m(v(l(Te,K),A[1]),m(v(l(ve,V),-M[1]),v(l(Y,R),S[1]))),P[2]),v(m(v(l(we,$),A[1]),m(v(l(ge,B),-M[1]),v(l(Y,R),P[1]))),-S[2]))),E[3]),v(m(m(v(m(v(l(Ce,he),M[1]),m(v(l(Te,K),-E[1]),v(l(le,Q),S[1]))),A[2]),v(m(v(l(Ce,he),A[1]),m(v(l(ve,V),-E[1]),v(l(ne,L),S[1]))),-M[2])),m(v(m(v(l(Te,K),A[1]),m(v(l(ve,V),-M[1]),v(l(Y,R),S[1]))),E[2]),v(m(v(l(le,Q),A[1]),m(v(l(ne,L),-M[1]),v(l(Y,R),E[1]))),-S[2]))),-P[3])),m(v(m(m(v(m(v(l(De,de),M[1]),m(v(l(we,$),-E[1]),v(l(le,Q),P[1]))),A[2]),v(m(v(l(De,de),A[1]),m(v(l(ge,B),-E[1]),v(l(ne,L),P[1]))),-M[2])),m(v(m(v(l(we,$),A[1]),m(v(l(ge,B),-M[1]),v(l(Y,R),P[1]))),E[2]),v(m(v(l(le,Q),A[1]),m(v(l(ne,L),-M[1]),v(l(Y,R),E[1]))),-P[2]))),S[3]),v(m(m(v(m(v(l(Ce,he),k[1]),m(v(l(Ie,q),-E[1]),v(l(ue,G),S[1]))),M[2]),v(m(v(l(Ce,he),M[1]),m(v(l(Te,K),-E[1]),v(l(le,Q),S[1]))),-k[2])),m(v(m(v(l(Ie,q),M[1]),m(v(l(Te,K),-k[1]),v(l(H,ee),S[1]))),E[2]),v(m(v(l(ue,G),M[1]),m(v(l(le,Q),-k[1]),v(l(H,ee),E[1]))),-S[2]))),A[3]))),m(m(v(m(m(v(m(v(l(Ce,he),k[1]),m(v(l(Ie,q),-E[1]),v(l(ue,G),S[1]))),A[2]),v(m(v(l(Ce,he),A[1]),m(v(l(ve,V),-E[1]),v(l(ne,L),S[1]))),-k[2])),m(v(m(v(l(Ie,q),A[1]),m(v(l(ve,V),-k[1]),v(l(j,D),S[1]))),E[2]),v(m(v(l(ue,G),A[1]),m(v(l(ne,L),-k[1]),v(l(j,D),E[1]))),-S[2]))),-M[3]),v(m(m(v(m(v(l(Ce,he),M[1]),m(v(l(Te,K),-E[1]),v(l(le,Q),S[1]))),A[2]),v(m(v(l(Ce,he),A[1]),m(v(l(ve,V),-E[1]),v(l(ne,L),S[1]))),-M[2])),m(v(m(v(l(Te,K),A[1]),m(v(l(ve,V),-M[1]),v(l(Y,R),S[1]))),E[2]),v(m(v(l(le,Q),A[1]),m(v(l(ne,L),-M[1]),v(l(Y,R),E[1]))),-S[2]))),k[3])),m(v(m(m(v(m(v(l(Ie,q),M[1]),m(v(l(Te,K),-k[1]),v(l(H,ee),S[1]))),A[2]),v(m(v(l(Ie,q),A[1]),m(v(l(ve,V),-k[1]),v(l(j,D),S[1]))),-M[2])),m(v(m(v(l(Te,K),A[1]),m(v(l(ve,V),-M[1]),v(l(Y,R),S[1]))),k[2]),v(m(v(l(H,ee),A[1]),m(v(l(j,D),-M[1]),v(l(Y,R),k[1]))),-S[2]))),-E[3]),v(m(m(v(m(v(l(ue,G),M[1]),m(v(l(le,Q),-k[1]),v(l(H,ee),E[1]))),A[2]),v(m(v(l(ue,G),A[1]),m(v(l(ne,L),-k[1]),v(l(j,D),E[1]))),-M[2])),m(v(m(v(l(le,Q),A[1]),m(v(l(ne,L),-M[1]),v(l(Y,R),E[1]))),k[2]),v(m(v(l(H,ee),A[1]),m(v(l(j,D),-M[1]),v(l(Y,R),k[1]))),-E[2]))),S[3]))))),qe=m(m(m(v(m(m(v(m(v(l(Pe,Ee),E[1]),m(v(l(Ce,he),-P[1]),v(l(De,de),S[1]))),k[2]),v(m(v(l(Pe,Ee),k[1]),m(v(l(Ie,q),-P[1]),v(l(ke,re),S[1]))),-E[2])),m(v(m(v(l(Ce,he),k[1]),m(v(l(Ie,q),-E[1]),v(l(ue,G),S[1]))),P[2]),v(m(v(l(De,de),k[1]),m(v(l(ke,re),-E[1]),v(l(ue,G),P[1]))),-S[2]))),A[3]),m(v(m(m(v(m(v(l(Pe,Ee),E[1]),m(v(l(Ce,he),-P[1]),v(l(De,de),S[1]))),A[2]),v(m(v(l(Pe,Ee),A[1]),m(v(l(ve,V),-P[1]),v(l(ge,B),S[1]))),-E[2])),m(v(m(v(l(Ce,he),A[1]),m(v(l(ve,V),-E[1]),v(l(ne,L),S[1]))),P[2]),v(m(v(l(De,de),A[1]),m(v(l(ge,B),-E[1]),v(l(ne,L),P[1]))),-S[2]))),-k[3]),v(m(m(v(m(v(l(Pe,Ee),k[1]),m(v(l(Ie,q),-P[1]),v(l(ke,re),S[1]))),A[2]),v(m(v(l(Pe,Ee),A[1]),m(v(l(ve,V),-P[1]),v(l(ge,B),S[1]))),-k[2])),m(v(m(v(l(Ie,q),A[1]),m(v(l(ve,V),-k[1]),v(l(j,D),S[1]))),P[2]),v(m(v(l(ke,re),A[1]),m(v(l(ge,B),-k[1]),v(l(j,D),P[1]))),-S[2]))),E[3]))),m(m(v(m(m(v(m(v(l(Ce,he),k[1]),m(v(l(Ie,q),-E[1]),v(l(ue,G),S[1]))),A[2]),v(m(v(l(Ce,he),A[1]),m(v(l(ve,V),-E[1]),v(l(ne,L),S[1]))),-k[2])),m(v(m(v(l(Ie,q),A[1]),m(v(l(ve,V),-k[1]),v(l(j,D),S[1]))),E[2]),v(m(v(l(ue,G),A[1]),m(v(l(ne,L),-k[1]),v(l(j,D),E[1]))),-S[2]))),-P[3]),v(m(m(v(m(v(l(De,de),k[1]),m(v(l(ke,re),-E[1]),v(l(ue,G),P[1]))),A[2]),v(m(v(l(De,de),A[1]),m(v(l(ge,B),-E[1]),v(l(ne,L),P[1]))),-k[2])),m(v(m(v(l(ke,re),A[1]),m(v(l(ge,B),-k[1]),v(l(j,D),P[1]))),E[2]),v(m(v(l(ue,G),A[1]),m(v(l(ne,L),-k[1]),v(l(j,D),E[1]))),-P[2]))),S[3])),m(v(m(m(v(m(v(l(Pe,Ee),k[1]),m(v(l(Ie,q),-P[1]),v(l(ke,re),S[1]))),M[2]),v(m(v(l(Pe,Ee),M[1]),m(v(l(Te,K),-P[1]),v(l(we,$),S[1]))),-k[2])),m(v(m(v(l(Ie,q),M[1]),m(v(l(Te,K),-k[1]),v(l(H,ee),S[1]))),P[2]),v(m(v(l(ke,re),M[1]),m(v(l(we,$),-k[1]),v(l(H,ee),P[1]))),-S[2]))),A[3]),v(m(m(v(m(v(l(Pe,Ee),k[1]),m(v(l(Ie,q),-P[1]),v(l(ke,re),S[1]))),A[2]),v(m(v(l(Pe,Ee),A[1]),m(v(l(ve,V),-P[1]),v(l(ge,B),S[1]))),-k[2])),m(v(m(v(l(Ie,q),A[1]),m(v(l(ve,V),-k[1]),v(l(j,D),S[1]))),P[2]),v(m(v(l(ke,re),A[1]),m(v(l(ge,B),-k[1]),v(l(j,D),P[1]))),-S[2]))),-M[3])))),m(m(m(v(m(m(v(m(v(l(Pe,Ee),M[1]),m(v(l(Te,K),-P[1]),v(l(we,$),S[1]))),A[2]),v(m(v(l(Pe,Ee),A[1]),m(v(l(ve,V),-P[1]),v(l(ge,B),S[1]))),-M[2])),m(v(m(v(l(Te,K),A[1]),m(v(l(ve,V),-M[1]),v(l(Y,R),S[1]))),P[2]),v(m(v(l(we,$),A[1]),m(v(l(ge,B),-M[1]),v(l(Y,R),P[1]))),-S[2]))),k[3]),v(m(m(v(m(v(l(Ie,q),M[1]),m(v(l(Te,K),-k[1]),v(l(H,ee),S[1]))),A[2]),v(m(v(l(Ie,q),A[1]),m(v(l(ve,V),-k[1]),v(l(j,D),S[1]))),-M[2])),m(v(m(v(l(Te,K),A[1]),m(v(l(ve,V),-M[1]),v(l(Y,R),S[1]))),k[2]),v(m(v(l(H,ee),A[1]),m(v(l(j,D),-M[1]),v(l(Y,R),k[1]))),-S[2]))),-P[3])),m(v(m(m(v(m(v(l(ke,re),M[1]),m(v(l(we,$),-k[1]),v(l(H,ee),P[1]))),A[2]),v(m(v(l(ke,re),A[1]),m(v(l(ge,B),-k[1]),v(l(j,D),P[1]))),-M[2])),m(v(m(v(l(we,$),A[1]),m(v(l(ge,B),-M[1]),v(l(Y,R),P[1]))),k[2]),v(m(v(l(H,ee),A[1]),m(v(l(j,D),-M[1]),v(l(Y,R),k[1]))),-P[2]))),S[3]),v(m(m(v(m(v(l(De,de),k[1]),m(v(l(ke,re),-E[1]),v(l(ue,G),P[1]))),M[2]),v(m(v(l(De,de),M[1]),m(v(l(we,$),-E[1]),v(l(le,Q),P[1]))),-k[2])),m(v(m(v(l(ke,re),M[1]),m(v(l(we,$),-k[1]),v(l(H,ee),P[1]))),E[2]),v(m(v(l(ue,G),M[1]),m(v(l(le,Q),-k[1]),v(l(H,ee),E[1]))),-P[2]))),A[3]))),m(m(v(m(m(v(m(v(l(De,de),k[1]),m(v(l(ke,re),-E[1]),v(l(ue,G),P[1]))),A[2]),v(m(v(l(De,de),A[1]),m(v(l(ge,B),-E[1]),v(l(ne,L),P[1]))),-k[2])),m(v(m(v(l(ke,re),A[1]),m(v(l(ge,B),-k[1]),v(l(j,D),P[1]))),E[2]),v(m(v(l(ue,G),A[1]),m(v(l(ne,L),-k[1]),v(l(j,D),E[1]))),-P[2]))),-M[3]),v(m(m(v(m(v(l(De,de),M[1]),m(v(l(we,$),-E[1]),v(l(le,Q),P[1]))),A[2]),v(m(v(l(De,de),A[1]),m(v(l(ge,B),-E[1]),v(l(ne,L),P[1]))),-M[2])),m(v(m(v(l(we,$),A[1]),m(v(l(ge,B),-M[1]),v(l(Y,R),P[1]))),E[2]),v(m(v(l(le,Q),A[1]),m(v(l(ne,L),-M[1]),v(l(Y,R),E[1]))),-P[2]))),k[3])),m(v(m(m(v(m(v(l(ke,re),M[1]),m(v(l(we,$),-k[1]),v(l(H,ee),P[1]))),A[2]),v(m(v(l(ke,re),A[1]),m(v(l(ge,B),-k[1]),v(l(j,D),P[1]))),-M[2])),m(v(m(v(l(we,$),A[1]),m(v(l(ge,B),-M[1]),v(l(Y,R),P[1]))),k[2]),v(m(v(l(H,ee),A[1]),m(v(l(j,D),-M[1]),v(l(Y,R),k[1]))),-P[2]))),-E[3]),v(m(m(v(m(v(l(ue,G),M[1]),m(v(l(le,Q),-k[1]),v(l(H,ee),E[1]))),A[2]),v(m(v(l(ue,G),A[1]),m(v(l(ne,L),-k[1]),v(l(j,D),E[1]))),-M[2])),m(v(m(v(l(le,Q),A[1]),m(v(l(ne,L),-M[1]),v(l(Y,R),E[1]))),k[2]),v(m(v(l(H,ee),A[1]),m(v(l(j,D),-M[1]),v(l(Y,R),k[1]))),-E[2]))),P[3]))))),Je=l(Ve,qe);return Je[Je.length-1]}}var f=[function(){return 0},function(){return 0},function(){return 0}];function p(m){var l=f[m.length];return l||(l=f[m.length]=n(m.length)),l.apply(void 0,m)}function y(m,l,w,v,A,M,k,E){return function(P,S,F,R,D,L){switch(arguments.length){case 0:case 1:return 0;case 2:return v(P,S);case 3:return A(P,S,F);case 4:return M(P,S,F,R);case 5:return k(P,S,F,R,D);case 6:return E(P,S,F,R,D,L)}for(var B=new Array(arguments.length),V=0;V<arguments.length;++V)B[V]=arguments[V];return m(B)}}!function(){for(;f.length<=6;)f.push(n(f.length));T.exports=y.apply(void 0,[p].concat(f));for(var m=0;m<=6;++m)T.exports[m]=f[m]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(x,T,b){"use strict";var e=x("robust-determinant");function r(s){return(2===s?t:a)(s<3?e[s]:e)}function t(s){return function(i,u){return[s([[+u[0],+i[0][1]],[+u[1],+i[1][1]]]),s([[+i[0][0],+u[0]],[+i[1][0],+u[1]]]),s(i)]}}function a(s){return function(i,u){return[s([[+u[0],+i[0][1],+i[0][2]],[+u[1],+i[1][1],+i[1][2]],[+u[2],+i[2][1],+i[2][2]]]),s([[+i[0][0],+u[0],+i[0][2]],[+i[1][0],+u[1],+i[1][2]],[+i[2][0],+u[2],+i[2][2]]]),s([[+i[0][0],+i[0][1],+u[0]],[+i[1][0],+i[1][1],+u[1]],[+i[2][0],+i[2][1],+u[2]]]),s(i)]}}var n=[function(){return[[0]]},function(s,i){return[[i[0]],[s[0][0]]]}];function d(s,i,u,f,p,y){return function(m,l){switch(m.length){case 0:return s(m,l);case 1:return i(m,l);case 2:return u(m,l);case 3:return f(m,l)}var w=p[m.length];return w||(w=p[m.length]=y(m.length)),w(m,l)}}!function(){for(;n.length<=3;)n.push(r(n.length));T.exports=d.apply(void 0,n.concat([n,r]));for(var s=0;s<3;++s)T.exports[s]=n[s]}()},{"robust-determinant":280}],284:[function(x,T,b){"use strict";var e=x("two-product"),r=x("robust-sum"),t=x("robust-scale"),a=x("robust-subtract");function n(l,w,v,A){return function(M,k,E){var P=l(l(w(k[1],E[0]),w(-E[1],k[0])),l(w(M[1],k[0]),w(-k[1],M[0]))),S=l(w(M[1],E[0]),w(-E[1],M[0])),F=A(P,S);return F[F.length-1]}}function d(l,w,v,A){return function(M,k,E,P){var S=l(l(v(l(w(E[1],P[0]),w(-P[1],E[0])),k[2]),l(v(l(w(k[1],P[0]),w(-P[1],k[0])),-E[2]),v(l(w(k[1],E[0]),w(-E[1],k[0])),P[2]))),l(v(l(w(k[1],P[0]),w(-P[1],k[0])),M[2]),l(v(l(w(M[1],P[0]),w(-P[1],M[0])),-k[2]),v(l(w(M[1],k[0]),w(-k[1],M[0])),P[2])))),F=l(l(v(l(w(E[1],P[0]),w(-P[1],E[0])),M[2]),l(v(l(w(M[1],P[0]),w(-P[1],M[0])),-E[2]),v(l(w(M[1],E[0]),w(-E[1],M[0])),P[2]))),l(v(l(w(k[1],E[0]),w(-E[1],k[0])),M[2]),l(v(l(w(M[1],E[0]),w(-E[1],M[0])),-k[2]),v(l(w(M[1],k[0]),w(-k[1],M[0])),E[2])))),R=A(S,F);return R[R.length-1]}}function s(l,w,v,A){return function(M,k,E,P,S){var F=l(l(l(v(l(v(l(w(P[1],S[0]),w(-S[1],P[0])),E[2]),l(v(l(w(E[1],S[0]),w(-S[1],E[0])),-P[2]),v(l(w(E[1],P[0]),w(-P[1],E[0])),S[2]))),k[3]),l(v(l(v(l(w(P[1],S[0]),w(-S[1],P[0])),k[2]),l(v(l(w(k[1],S[0]),w(-S[1],k[0])),-P[2]),v(l(w(k[1],P[0]),w(-P[1],k[0])),S[2]))),-E[3]),v(l(v(l(w(E[1],S[0]),w(-S[1],E[0])),k[2]),l(v(l(w(k[1],S[0]),w(-S[1],k[0])),-E[2]),v(l(w(k[1],E[0]),w(-E[1],k[0])),S[2]))),P[3]))),l(v(l(v(l(w(E[1],P[0]),w(-P[1],E[0])),k[2]),l(v(l(w(k[1],P[0]),w(-P[1],k[0])),-E[2]),v(l(w(k[1],E[0]),w(-E[1],k[0])),P[2]))),-S[3]),l(v(l(v(l(w(P[1],S[0]),w(-S[1],P[0])),k[2]),l(v(l(w(k[1],S[0]),w(-S[1],k[0])),-P[2]),v(l(w(k[1],P[0]),w(-P[1],k[0])),S[2]))),M[3]),v(l(v(l(w(P[1],S[0]),w(-S[1],P[0])),M[2]),l(v(l(w(M[1],S[0]),w(-S[1],M[0])),-P[2]),v(l(w(M[1],P[0]),w(-P[1],M[0])),S[2]))),-k[3])))),l(l(v(l(v(l(w(k[1],S[0]),w(-S[1],k[0])),M[2]),l(v(l(w(M[1],S[0]),w(-S[1],M[0])),-k[2]),v(l(w(M[1],k[0]),w(-k[1],M[0])),S[2]))),P[3]),l(v(l(v(l(w(k[1],P[0]),w(-P[1],k[0])),M[2]),l(v(l(w(M[1],P[0]),w(-P[1],M[0])),-k[2]),v(l(w(M[1],k[0]),w(-k[1],M[0])),P[2]))),-S[3]),v(l(v(l(w(E[1],P[0]),w(-P[1],E[0])),k[2]),l(v(l(w(k[1],P[0]),w(-P[1],k[0])),-E[2]),v(l(w(k[1],E[0]),w(-E[1],k[0])),P[2]))),M[3]))),l(v(l(v(l(w(E[1],P[0]),w(-P[1],E[0])),M[2]),l(v(l(w(M[1],P[0]),w(-P[1],M[0])),-E[2]),v(l(w(M[1],E[0]),w(-E[1],M[0])),P[2]))),-k[3]),l(v(l(v(l(w(k[1],P[0]),w(-P[1],k[0])),M[2]),l(v(l(w(M[1],P[0]),w(-P[1],M[0])),-k[2]),v(l(w(M[1],k[0]),w(-k[1],M[0])),P[2]))),E[3]),v(l(v(l(w(k[1],E[0]),w(-E[1],k[0])),M[2]),l(v(l(w(M[1],E[0]),w(-E[1],M[0])),-k[2]),v(l(w(M[1],k[0]),w(-k[1],M[0])),E[2]))),-P[3]))))),R=l(l(l(v(l(v(l(w(P[1],S[0]),w(-S[1],P[0])),E[2]),l(v(l(w(E[1],S[0]),w(-S[1],E[0])),-P[2]),v(l(w(E[1],P[0]),w(-P[1],E[0])),S[2]))),M[3]),v(l(v(l(w(P[1],S[0]),w(-S[1],P[0])),M[2]),l(v(l(w(M[1],S[0]),w(-S[1],M[0])),-P[2]),v(l(w(M[1],P[0]),w(-P[1],M[0])),S[2]))),-E[3])),l(v(l(v(l(w(E[1],S[0]),w(-S[1],E[0])),M[2]),l(v(l(w(M[1],S[0]),w(-S[1],M[0])),-E[2]),v(l(w(M[1],E[0]),w(-E[1],M[0])),S[2]))),P[3]),v(l(v(l(w(E[1],P[0]),w(-P[1],E[0])),M[2]),l(v(l(w(M[1],P[0]),w(-P[1],M[0])),-E[2]),v(l(w(M[1],E[0]),w(-E[1],M[0])),P[2]))),-S[3]))),l(l(v(l(v(l(w(E[1],S[0]),w(-S[1],E[0])),k[2]),l(v(l(w(k[1],S[0]),w(-S[1],k[0])),-E[2]),v(l(w(k[1],E[0]),w(-E[1],k[0])),S[2]))),M[3]),v(l(v(l(w(E[1],S[0]),w(-S[1],E[0])),M[2]),l(v(l(w(M[1],S[0]),w(-S[1],M[0])),-E[2]),v(l(w(M[1],E[0]),w(-E[1],M[0])),S[2]))),-k[3])),l(v(l(v(l(w(k[1],S[0]),w(-S[1],k[0])),M[2]),l(v(l(w(M[1],S[0]),w(-S[1],M[0])),-k[2]),v(l(w(M[1],k[0]),w(-k[1],M[0])),S[2]))),E[3]),v(l(v(l(w(k[1],E[0]),w(-E[1],k[0])),M[2]),l(v(l(w(M[1],E[0]),w(-E[1],M[0])),-k[2]),v(l(w(M[1],k[0]),w(-k[1],M[0])),E[2]))),-S[3])))),D=A(F,R);return D[D.length-1]}}function i(l){return(3===l?n:4===l?d:s)(r,e,t,a)}var u=i(3),f=i(4),p=[function(){return 0},function(){return 0},function(l,w){return w[0]-l[0]},function(l,w,v){var A,M=(l[1]-v[1])*(w[0]-v[0]),k=(l[0]-v[0])*(w[1]-v[1]),E=M-k;if(M>0){if(k<=0)return E;A=M+k}else{if(!(M<0)||k>=0)return E;A=-(M+k)}var P=33306690738754716e-32*A;return E>=P||E<=-P?E:u(l,w,v)},function(l,w,v,A){var M=l[0]-A[0],k=w[0]-A[0],E=v[0]-A[0],P=l[1]-A[1],S=w[1]-A[1],F=v[1]-A[1],R=l[2]-A[2],D=w[2]-A[2],L=v[2]-A[2],B=k*F,V=E*S,Z=E*P,Y=M*F,ee=M*S,Q=k*P,$=R*(B-V)+D*(Z-Y)+L*(ee-Q),K=7771561172376103e-31*((Math.abs(B)+Math.abs(V))*Math.abs(R)+(Math.abs(Z)+Math.abs(Y))*Math.abs(D)+(Math.abs(ee)+Math.abs(Q))*Math.abs(L));return $>K||-$>K?$:f(l,w,v,A)}];function y(l){var w=p[l.length];return w||(w=p[l.length]=i(l.length)),w.apply(void 0,l)}function m(l,w,v,A,M,k,E){return function(P,S,F,R,D){switch(arguments.length){case 0:case 1:return 0;case 2:return A(P,S);case 3:return M(P,S,F);case 4:return k(P,S,F,R);case 5:return E(P,S,F,R,D)}for(var L=new Array(arguments.length),B=0;B<arguments.length;++B)L[B]=arguments[B];return l(L)}}!function(){for(;p.length<=5;)p.push(i(p.length));T.exports=m.apply(void 0,[y].concat(p));for(var l=0;l<=5;++l)T.exports[l]=p[l]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(x,T,b){"use strict";var e=x("robust-sum"),r=x("robust-scale");T.exports=function(t,a){if(1===t.length)return r(a,t[0]);if(1===a.length)return r(t,a[0]);if(0===t.length||0===a.length)return[0];var n=[0];if(t.length<a.length)for(var d=0;d<t.length;++d)n=e(n,r(a,t[d]));else for(d=0;d<a.length;++d)n=e(n,r(t,a[d]));return n}},{"robust-scale":286,"robust-sum":289}],286:[function(x,T,b){"use strict";var e=x("two-product"),r=x("two-sum");T.exports=function(t,a){var n=t.length;if(1===n){var d=e(t[0],a);return d[0]?d:[d[1]]}var s=new Array(2*n),i=[.1,.1],u=[.1,.1],f=0;e(t[0],a,i),i[0]&&(s[f++]=i[0]);for(var p=1;p<n;++p){e(t[p],a,u),r(i[1],u[0],i),i[0]&&(s[f++]=i[0]);var m=u[1],l=i[1],w=m+l,v=l-(w-m);i[1]=w,v&&(s[f++]=v)}return i[1]&&(s[f++]=i[1]),0===f&&(s[f++]=0),s.length=f,s}},{"two-product":306,"two-sum":307}],287:[function(x,T,b){"use strict";T.exports=function(r,t,a,n){var d=e(r,a,n),s=e(t,a,n);if(d>0&&s>0||d<0&&s<0)return!1;var i=e(a,r,t),u=e(n,r,t);return!(i>0&&u>0||i<0&&u<0)&&(0!==d||0!==s||0!==i||0!==u||function(f,p,y,m){for(var l=0;l<2;++l){var w=f[l],v=p[l],A=Math.min(w,v),M=Math.max(w,v),k=y[l],E=m[l],P=Math.min(k,E);if(Math.max(k,E)<A||M<P)return!1}return!0}(r,t,a,n))};var e=x("robust-orientation")[3]},{"robust-orientation":284}],288:[function(x,T,b){"use strict";T.exports=function(e,r){var F,R,D,L,B,t=0|e.length,a=0|r.length;if(1===t&&1===a)return(B=(F=e[0])-((D=F+(R=-r[0]))-(L=D-F))+(R-L))?[B,D]:[D];var n,d,s=new Array(t+a),i=0,u=0,f=0,p=Math.abs,y=e[u],m=p(y),l=-r[f],w=p(l);m<w?(d=y,(u+=1)<t&&(m=p(y=e[u]))):(d=l,(f+=1)<a&&(w=p(l=-r[f]))),u<t&&m<w||f>=a?(n=y,(u+=1)<t&&(m=p(y=e[u]))):(n=l,(f+=1)<a&&(w=p(l=-r[f])));for(var v,A,M=n+d,k=M-n,E=d-k,P=E,S=M;u<t&&f<a;)m<w?(n=y,(u+=1)<t&&(m=p(y=e[u]))):(n=l,(f+=1)<a&&(w=p(l=-r[f]))),(E=(d=P)-(k=(M=n+d)-n))&&(s[i++]=E),P=S-((v=S+M)-(A=v-S))+(M-A),S=v;for(;u<t;)(E=(d=P)-(k=(M=(n=y)+d)-n))&&(s[i++]=E),P=S-((v=S+M)-(A=v-S))+(M-A),S=v,(u+=1)<t&&(y=e[u]);for(;f<a;)(E=(d=P)-(k=(M=(n=l)+d)-n))&&(s[i++]=E),P=S-((v=S+M)-(A=v-S))+(M-A),S=v,(f+=1)<a&&(l=-r[f]);return P&&(s[i++]=P),S&&(s[i++]=S),i||(s[i++]=0),s.length=i,s}},{}],289:[function(x,T,b){"use strict";T.exports=function(e,r){var F,R,D,L,B,t=0|e.length,a=0|r.length;if(1===t&&1===a)return(B=(F=e[0])-((D=F+(R=r[0]))-(L=D-F))+(R-L))?[B,D]:[D];var n,d,s=new Array(t+a),i=0,u=0,f=0,p=Math.abs,y=e[u],m=p(y),l=r[f],w=p(l);m<w?(d=y,(u+=1)<t&&(m=p(y=e[u]))):(d=l,(f+=1)<a&&(w=p(l=r[f]))),u<t&&m<w||f>=a?(n=y,(u+=1)<t&&(m=p(y=e[u]))):(n=l,(f+=1)<a&&(w=p(l=r[f])));for(var v,A,M=n+d,k=M-n,E=d-k,P=E,S=M;u<t&&f<a;)m<w?(n=y,(u+=1)<t&&(m=p(y=e[u]))):(n=l,(f+=1)<a&&(w=p(l=r[f]))),(E=(d=P)-(k=(M=n+d)-n))&&(s[i++]=E),P=S-((v=S+M)-(A=v-S))+(M-A),S=v;for(;u<t;)(E=(d=P)-(k=(M=(n=y)+d)-n))&&(s[i++]=E),P=S-((v=S+M)-(A=v-S))+(M-A),S=v,(u+=1)<t&&(y=e[u]);for(;f<a;)(E=(d=P)-(k=(M=(n=l)+d)-n))&&(s[i++]=E),P=S-((v=S+M)-(A=v-S))+(M-A),S=v,(f+=1)<a&&(l=r[f]);return P&&(s[i++]=P),S&&(s[i++]=S),i||(s[i++]=0),s.length=i,s}},{}],290:[function(x,T,b){"use strict";T.exports=function(t){return r(e(t))};var e=x("boundary-cells"),r=x("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(x,T,b){"use strict";T.exports=function(n,d,s,i){if(s=s||0,void 0===i&&(i=function(v){for(var A=v.length,M=0,k=0;k<A;++k)M=0|Math.max(M,v[k].length);return M-1}(n)),0===n.length||i<1)return{cells:[],vertexIds:[],vertexWeights:[]};var u=function(v,A){for(var M=v.length,k=r.mallocUint8(M),E=0;E<M;++E)k[E]=v[E]<A|0;return k}(d,+s),f=function(v,A){for(var M=v.length,E=r.mallocUint32(2*(A*(A+1)/2*M|0)),P=0,S=0;S<M;++S)for(var F=v[S],R=(A=F.length,0);R<A;++R)for(var D=0;D<R;++D){var L=F[D],B=F[R];E[P++]=0|Math.min(L,B),E[P++]=0|Math.max(L,B)}t(e(E,[P/2|0,2]));var V=2;for(S=2;S<P;S+=2)E[S-2]===E[S]&&E[S-1]===E[S+1]||(E[V++]=E[S],E[V++]=E[S+1]);return e(E,[V/2|0,2])}(n,i),p=function(v,A,M,k){for(var E=v.data,P=v.shape[0],S=r.mallocDouble(P),F=0,R=0;R<P;++R){var D=E[2*R],L=E[2*R+1];if(M[D]!==M[L]){var B=A[D],V=A[L];E[2*F]=D,E[2*F+1]=L,S[F++]=(V-k)/(V-B)}}return v.shape[0]=F,e(S,[F])}(f,d,u,+s),y=function(v,A){var M=r.mallocInt32(2*A),k=v.shape[0],E=v.data;M[0]=0;for(var P=0,S=0;S<k;++S){var F=E[2*S];if(F!==P){for(M[2*P+1]=S;++P<F;)M[2*P]=S,M[2*P+1]=S;M[2*P]=S}}for(M[2*P+1]=k;++P<A;)M[2*P]=M[2*P+1]=k;return M}(f,0|d.length),m=a(i)(n,f.data,y,u),l=function(v){for(var A=0|v.shape[0],M=v.data,k=new Array(A),E=0;E<A;++E)k[E]=[M[2*E],M[2*E+1]];return k}(f),w=[].slice.call(p.data,0,p.shape[0]);return r.free(u),r.free(f.data),r.free(p.data),r.free(y),{cells:m,vertexIds:l,vertexWeights:w}};var e=x("ndarray"),r=x("typedarray-pool"),t=x("ndarray-sort"),a=x("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(x,T,b){"use strict";T.exports=function(r){return e[r]()};var e=[function(){return function(r,t,a,n){for(var d=r.length,s=0;s<d;++s);return[]}},function(){function r(t,a,n,d){for(var s=0|Math.min(n,d),i=0|Math.max(n,d),u=t[2*s],f=t[2*s+1];u<f;){var p=u+f>>1,y=a[2*p+1];if(y===i)return p;i<y?f=p:u=p+1}return u}return function(t,a,n,d){for(var s=t.length,i=[],u=0;u<s;++u){var f=t[u];if(2===f.length){var p=(d[f[0]]<<0)+(d[f[1]]<<1);if(0===p||3===p)continue;switch(p){case 0:break;case 1:i.push([r(n,a,f[0],f[1])]);break;case 2:i.push([r(n,a,f[1],f[0])])}}}return i}},function(){function r(t,a,n,d){for(var s=0|Math.min(n,d),i=0|Math.max(n,d),u=t[2*s],f=t[2*s+1];u<f;){var p=u+f>>1,y=a[2*p+1];if(y===i)return p;i<y?f=p:u=p+1}return u}return function(t,a,n,d){for(var s=t.length,i=[],u=0;u<s;++u){var f=t[u],p=f.length;if(3===p){if(0==(y=(d[f[0]]<<0)+(d[f[1]]<<1)+(d[f[2]]<<2))||7===y)continue;switch(y){case 0:break;case 1:i.push([r(n,a,f[0],f[2]),r(n,a,f[0],f[1])]);break;case 2:i.push([r(n,a,f[1],f[0]),r(n,a,f[1],f[2])]);break;case 3:i.push([r(n,a,f[0],f[2]),r(n,a,f[1],f[2])]);break;case 4:i.push([r(n,a,f[2],f[1]),r(n,a,f[2],f[0])]);break;case 5:i.push([r(n,a,f[2],f[1]),r(n,a,f[0],f[1])]);break;case 6:i.push([r(n,a,f[1],f[0]),r(n,a,f[2],f[0])])}}else if(2===p){var y;if(0==(y=(d[f[0]]<<0)+(d[f[1]]<<1))||3===y)continue;switch(y){case 0:break;case 1:i.push([r(n,a,f[0],f[1])]);break;case 2:i.push([r(n,a,f[1],f[0])])}}}return i}},function(){function r(t,a,n,d){for(var s=0|Math.min(n,d),i=0|Math.max(n,d),u=t[2*s],f=t[2*s+1];u<f;){var p=u+f>>1,y=a[2*p+1];if(y===i)return p;i<y?f=p:u=p+1}return u}return function(t,a,n,d){for(var s=t.length,i=[],u=0;u<s;++u){var f=t[u],p=f.length;if(4===p){if(0==(y=(d[f[0]]<<0)+(d[f[1]]<<1)+(d[f[2]]<<2)+(d[f[3]]<<3))||15===y)continue;switch(y){case 0:break;case 1:i.push([r(n,a,f[0],f[1]),r(n,a,f[0],f[2]),r(n,a,f[0],f[3])]);break;case 2:i.push([r(n,a,f[1],f[2]),r(n,a,f[1],f[0]),r(n,a,f[1],f[3])]);break;case 3:i.push([r(n,a,f[1],f[2]),r(n,a,f[0],f[2]),r(n,a,f[0],f[3])],[r(n,a,f[1],f[3]),r(n,a,f[1],f[2]),r(n,a,f[0],f[3])]);break;case 4:i.push([r(n,a,f[2],f[0]),r(n,a,f[2],f[1]),r(n,a,f[2],f[3])]);break;case 5:i.push([r(n,a,f[0],f[1]),r(n,a,f[2],f[1]),r(n,a,f[0],f[3])],[r(n,a,f[2],f[1]),r(n,a,f[2],f[3]),r(n,a,f[0],f[3])]);break;case 6:i.push([r(n,a,f[2],f[0]),r(n,a,f[1],f[0]),r(n,a,f[1],f[3])],[r(n,a,f[2],f[3]),r(n,a,f[2],f[0]),r(n,a,f[1],f[3])]);break;case 7:i.push([r(n,a,f[0],f[3]),r(n,a,f[1],f[3]),r(n,a,f[2],f[3])]);break;case 8:i.push([r(n,a,f[3],f[1]),r(n,a,f[3],f[0]),r(n,a,f[3],f[2])]);break;case 9:i.push([r(n,a,f[3],f[1]),r(n,a,f[0],f[1]),r(n,a,f[0],f[2])],[r(n,a,f[3],f[2]),r(n,a,f[3],f[1]),r(n,a,f[0],f[2])]);break;case 10:i.push([r(n,a,f[1],f[0]),r(n,a,f[3],f[0]),r(n,a,f[1],f[2])],[r(n,a,f[3],f[0]),r(n,a,f[3],f[2]),r(n,a,f[1],f[2])]);break;case 11:i.push([r(n,a,f[1],f[2]),r(n,a,f[0],f[2]),r(n,a,f[3],f[2])]);break;case 12:i.push([r(n,a,f[3],f[0]),r(n,a,f[2],f[0]),r(n,a,f[2],f[1])],[r(n,a,f[3],f[1]),r(n,a,f[3],f[0]),r(n,a,f[2],f[1])]);break;case 13:i.push([r(n,a,f[0],f[1]),r(n,a,f[2],f[1]),r(n,a,f[3],f[1])]);break;case 14:i.push([r(n,a,f[2],f[0]),r(n,a,f[1],f[0]),r(n,a,f[3],f[0])])}}else if(3===p){if(0==(y=(d[f[0]]<<0)+(d[f[1]]<<1)+(d[f[2]]<<2))||7===y)continue;switch(y){case 0:break;case 1:i.push([r(n,a,f[0],f[2]),r(n,a,f[0],f[1])]);break;case 2:i.push([r(n,a,f[1],f[0]),r(n,a,f[1],f[2])]);break;case 3:i.push([r(n,a,f[0],f[2]),r(n,a,f[1],f[2])]);break;case 4:i.push([r(n,a,f[2],f[1]),r(n,a,f[2],f[0])]);break;case 5:i.push([r(n,a,f[2],f[1]),r(n,a,f[0],f[1])]);break;case 6:i.push([r(n,a,f[1],f[0]),r(n,a,f[2],f[0])])}}else if(2===p){var y;if(0==(y=(d[f[0]]<<0)+(d[f[1]]<<1))||3===y)continue;switch(y){case 0:break;case 1:i.push([r(n,a,f[0],f[1])]);break;case 2:i.push([r(n,a,f[1],f[0])])}}}return i}}]},{}],293:[function(x,T,b){"use strict";var e=x("bit-twiddle"),r=x("union-find");function t(f,p){var y=f.length,m=f.length-p.length,l=Math.min;if(m)return m;switch(y){case 0:return 0;case 1:return f[0]-p[0];case 2:return(A=f[0]+f[1]-p[0]-p[1])||l(f[0],f[1])-l(p[0],p[1]);case 3:var w=f[0]+f[1],v=p[0]+p[1];if(A=w+f[2]-(v+p[2]))return A;var A,M=l(f[0],f[1]),k=l(p[0],p[1]);return(A=l(M,f[2])-l(k,p[2]))||l(M+f[2],w)-l(k+p[2],v);default:var E=f.slice(0);E.sort();var P=p.slice(0);P.sort();for(var S=0;S<y;++S)if(m=E[S]-P[S])return m;return 0}}function a(f,p){return t(f[0],p[0])}function n(f,p){if(p){for(var y=f.length,m=new Array(y),l=0;l<y;++l)m[l]=[f[l],p[l]];for(m.sort(a),l=0;l<y;++l)f[l]=m[l][0],p[l]=m[l][1];return f}return f.sort(t),f}function d(f){if(0===f.length)return[];for(var p=1,y=f.length,m=1;m<y;++m){var l=f[m];if(t(l,f[m-1])){if(m===p){p++;continue}f[p++]=l}}return f.length=p,f}function s(f,p){for(var y=0,m=f.length-1,l=-1;y<=m;){var w=y+m>>1,v=t(f[w],p);v<=0?(0===v&&(l=w),y=w+1):v>0&&(m=w-1)}return l}function i(f,p){for(var y=new Array(f.length),m=0,l=y.length;m<l;++m)y[m]=[];for(var w=[],v=(m=0,p.length);m<v;++m)for(var A=p[m],M=A.length,k=1,E=1<<M;k<E;++k){w.length=e.popCount(k);for(var P=0,S=0;S<M;++S)k&1<<S&&(w[P++]=A[S]);var F=s(f,w);if(!(F<0))for(;y[F++].push(m),!(F>=f.length||0!==t(f[F],w)););}return y}function u(f,p){if(p<0)return[];for(var y=[],m=(1<<p+1)-1,l=0;l<f.length;++l)for(var w=f[l],v=m;v<1<<w.length;v=e.nextCombination(v)){for(var A=new Array(p+1),M=0,k=0;k<w.length;++k)v&1<<k&&(A[M++]=w[k]);y.push(A)}return n(y)}b.dimension=function(f){for(var p=0,y=Math.max,m=0,l=f.length;m<l;++m)p=y(p,f[m].length);return p-1},b.countVertices=function(f){for(var p=-1,y=Math.max,m=0,l=f.length;m<l;++m)for(var w=f[m],v=0,A=w.length;v<A;++v)p=y(p,w[v]);return p+1},b.cloneCells=function(f){for(var p=new Array(f.length),y=0,m=f.length;y<m;++y)p[y]=f[y].slice(0);return p},b.compareCells=t,b.normalize=n,b.unique=d,b.findCell=s,b.incidence=i,b.dual=function(f,p){if(!p)return i(d(u(f,0)),f);for(var y=new Array(p),m=0;m<p;++m)y[m]=[];m=0;for(var l=f.length;m<l;++m)for(var w=f[m],v=0,A=w.length;v<A;++v)y[w[v]].push(m);return y},b.explode=function(f){for(var p=[],y=0,m=f.length;y<m;++y)for(var l=f[y],w=0|l.length,v=1,A=1<<w;v<A;++v){for(var M=[],k=0;k<w;++k)v>>>k&1&&M.push(l[k]);p.push(M)}return n(p)},b.skeleton=u,b.boundary=function(f){for(var p=[],y=0,m=f.length;y<m;++y)for(var l=f[y],w=0,v=l.length;w<v;++w){for(var A=new Array(l.length-1),M=0,k=0;M<v;++M)M!==w&&(A[k++]=l[M]);p.push(A)}return n(p)},b.connectedComponents=function(f,p){return p?function(y,m){for(var l=new r(m),w=0;w<y.length;++w)for(var v=y[w],A=0;A<v.length;++A)for(var M=A+1;M<v.length;++M)l.link(v[A],v[M]);var k=[],E=l.ranks;for(w=0;w<E.length;++w)E[w]=-1;for(w=0;w<y.length;++w){var P=l.find(y[w][0]);E[P]<0?(E[P]=k.length,k.push([y[w].slice(0)])):k[E[P]].push(y[w].slice(0))}return k}(f,p):function(y){for(var m=d(n(u(y,0))),l=new r(m.length),w=0;w<y.length;++w)for(var v=y[w],A=0;A<v.length;++A)for(var M=s(m,[v[A]]),k=A+1;k<v.length;++k)l.link(M,s(m,[v[k]]));var E=[],P=l.ranks;for(w=0;w<P.length;++w)P[w]=-1;for(w=0;w<y.length;++w){var S=l.find(s(m,[y[w][0]]));P[S]<0?(P[S]=E.length,E.push([y[w].slice(0)])):E[P[S]].push(y[w].slice(0))}return E}(f)}},{"bit-twiddle":32,"union-find":309}],294:[function(x,T,b){arguments[4][32][0].apply(b,arguments)},{dup:32}],295:[function(x,T,b){arguments[4][293][0].apply(b,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(x,T,b){"use strict";function e(r){this.roots=new Array(r),this.ranks=new Array(r);for(var t=0;t<r;++t)this.roots[t]=t,this.ranks[t]=0}T.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},e.prototype.find=function(r){for(var t=this.roots;t[r]!==r;){var a=t[r];t[r]=t[a],r=a}return r},e.prototype.link=function(r,t){var a=this.find(r),n=this.find(t);if(a!==n){var d=this.ranks,s=this.roots,i=d[a],u=d[n];i<u?s[a]=n:u<i?s[n]=a:(s[n]=a,++d[a])}}},{}],297:[function(x,T,b){"use strict";T.exports=function(t,a,n){for(var d=a.length,s=t.length,i=new Array(d),u=new Array(d),f=new Array(d),p=new Array(d),y=0;y<d;++y)i[y]=u[y]=-1,f[y]=1/0,p[y]=!1;for(y=0;y<s;++y){var m=t[y];if(2!==m.length)throw new Error("Input must be a graph");var l=m[1],w=m[0];u[w]=-1!==u[w]?-2:l,i[l]=-1!==i[l]?-2:w}function v(Q){if(p[Q])return 1/0;var K,oe,G=i[Q],re=u[Q];return G<0||re<0?1/0:(K=a[G],oe=a[re],Math.abs(e(a[Q],K,oe))/Math.sqrt(Math.pow(K[0]-oe[0],2)+Math.pow(K[1]-oe[1],2)))}function A(Q,$){var K=D[Q],oe=D[$];D[Q]=oe,D[$]=K,L[K]=$,L[oe]=Q}function M(Q){return f[D[Q]]}function k(Q){return 1&Q?Q-1>>1:(Q>>1)-1}function E(Q){for(var $=M(Q);;){var K=$,oe=2*Q+1,j=2*(Q+1),H=Q;if(oe<B){var G=M(oe);G<K&&(H=oe,K=G)}if(j<B&&M(j)<K&&(H=j),H===Q)return Q;A(Q,H),Q=H}}function P(Q){for(var $=M(Q);Q>0;){var K=k(Q);if(!(K>=0&&$<M(K)))return Q;A(Q,K),Q=K}}function S(){if(B>0){var Q=D[0];return A(0,B-1),B-=1,E(0),Q}return-1}function F(Q,$){var K=D[Q];return f[K]===$?Q:(f[K]=-1/0,P(Q),S(),f[K]=$,P((B+=1)-1))}function R(Q){if(!p[Q]){p[Q]=!0;var $=i[Q],K=u[Q];i[K]>=0&&(i[K]=$),u[$]>=0&&(u[$]=K),L[$]>=0&&F(L[$],v($)),L[K]>=0&&F(L[K],v(K))}}var D=[],L=new Array(d);for(y=0;y<d;++y)(f[y]=v(y))<1/0?(L[y]=D.length,D.push(y)):L[y]=-1;var B=D.length;for(y=B>>1;y>=0;--y)E(y);for(;;){var V=S();if(V<0||f[V]>n)break;R(V)}var Z=[];for(y=0;y<d;++y)p[y]||(L[y]=Z.length,Z.push(a[y].slice()));function Y(Q,$){if(Q[$]<0)return $;var K=$,oe=$;do{var j=Q[oe];if(!p[oe]||j<0||j===oe||(j=Q[oe=j],!p[oe]||j<0||j===oe))break;oe=j,K=Q[K]}while(K!==oe);for(var H=$;H!==oe;H=Q[H])Q[H]=oe;return oe}var ee=[];return t.forEach(function(Q){var $=Y(i,Q[0]),K=Y(u,Q[1]);if($>=0&&K>=0&&$!==K){var oe=L[$],j=L[K];oe!==j&&ee.push([oe,j])}}),r.unique(r.normalize(ee)),{positions:Z,edges:ee}};var e=x("robust-orientation"),r=x("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(x,T,b){"use strict";T.exports=function(t,a){var n,d,s,i;if(a[0][0]<a[1][0])n=a[0],d=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,t);n=a[1],d=a[0]}if(t[0][0]<t[1][0])s=t[0],i=t[1];else{if(!(t[0][0]>t[1][0]))return-r(t,a);s=t[1],i=t[0]}var u=e(n,d,i),f=e(n,d,s);if(u<0){if(f<=0)return u}else if(u>0){if(f>=0)return u}else if(f)return f;if(u=e(i,s,d),f=e(i,s,n),u<0){if(f<=0)return u}else if(u>0){if(f>=0)return u}else if(f)return f;return d[0]-i[0]};var e=x("robust-orientation");function r(t,a){var n,d,s,i;if(a[0][0]<a[1][0])n=a[0],d=a[1];else{if(!(a[0][0]>a[1][0])){var u=Math.min(t[0][1],t[1][1]),f=Math.max(t[0][1],t[1][1]),p=Math.min(a[0][1],a[1][1]),y=Math.max(a[0][1],a[1][1]);return f<p?f-p:u>y?u-y:f-y}n=a[1],d=a[0]}t[0][1]<t[1][1]?(s=t[0],i=t[1]):(s=t[1],i=t[0]);var m=e(d,n,s);return m||(m=e(d,n,i))||i-d}},{"robust-orientation":284}],299:[function(x,T,b){"use strict";T.exports=function(f){for(var p=f.length,y=2*p,m=new Array(y),l=0;l<p;++l){var w=f[l],v=w[0][0]<w[1][0];m[2*l]=new u(w[0][0],w,v,l),m[2*l+1]=new u(w[1][0],w,!v,l)}m.sort(function(R,D){var L=R.x-D.x;return L||(L=R.create-D.create)||Math.min(R.segment[0][1],R.segment[1][1])-Math.min(D.segment[0][1],D.segment[1][1])});var A=r(a),M=[],k=[],E=[];for(l=0;l<y;){for(var P=m[l].x,S=[];l<y;){var F=m[l];if(F.x!==P)break;l+=1,F.segment[0][0]===F.x&&F.segment[1][0]===F.x?F.create&&(F.segment[0][1]<F.segment[1][1]?(S.push(new i(F.segment[0][1],F.index,!0,!0)),S.push(new i(F.segment[1][1],F.index,!1,!1))):(S.push(new i(F.segment[1][1],F.index,!0,!1)),S.push(new i(F.segment[0][1],F.index,!1,!0)))):A=F.create?A.insert(F.segment,F.index):A.remove(F.segment)}M.push(A.root),k.push(P),E.push(S)}return new n(M,k,E)};var e=x("binary-search-bounds"),r=x("functional-red-black-tree"),t=x("robust-orientation"),a=x("./lib/order-segments");function n(f,p,y){this.slabs=f,this.coordinates=p,this.horizontal=y}function d(f,p){return f.y-p}function s(f,p){for(var y=null;f;){var m,l,w=f.key;w[0][0]<w[1][0]?(m=w[0],l=w[1]):(m=w[1],l=w[0]);var v=t(m,l,p);if(v<0)f=f.left;else if(v>0)if(p[0]!==w[1][0])y=f,f=f.right;else{if(A=s(f.right,p))return A;f=f.left}else{if(p[0]!==w[1][0])return f;var A;if(A=s(f.right,p))return A;f=f.left}}return y}function i(f,p,y,m){this.y=f,this.index=p,this.start=y,this.closed=m}function u(f,p,y,m){this.x=f,this.segment=p,this.create=y,this.index=m}n.prototype.castUp=function(f){var p=e.le(this.coordinates,f[0]);if(p<0)return-1;var y=s(this.slabs[p],f),m=-1;if(y&&(m=y.value),this.coordinates[p]===f[0]){var l=null;if(y&&(l=y.key),p>0){var w=s(this.slabs[p-1],f);w&&(l?a(w.key,l)>0&&(l=w.key,m=w.value):(m=w.value,l=w.key))}var v=this.horizontal[p];if(v.length>0){var A=e.ge(v,f[1],d);if(A<v.length){var M=v[A];if(f[1]===M.y){if(M.closed)return M.index;for(;A<v.length-1&&v[A+1].y===f[1];)if((M=v[A+=1]).closed)return M.index;if(M.y===f[1]&&!M.start){if((A+=1)>=v.length)return m;M=v[A]}}if(M.start)if(l){var k=t(l[0],l[1],[f[0],M.y]);l[0][0]>l[1][0]&&(k=-k),k>0&&(m=M.index)}else m=M.index;else M.y!==f[1]&&(m=M.index)}}}return m}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(x,T,b){"use strict";var e=x("robust-dot-product"),r=x("robust-sum");function t(n,d){var s=r(e(n,d),[d[d.length-1]]);return s[s.length-1]}function a(n,d,s,i){var u=-d/(i-d);u<0?u=0:u>1&&(u=1);for(var f=1-u,p=n.length,y=new Array(p),m=0;m<p;++m)y[m]=u*n[m]+f*s[m];return y}T.exports=function(n,d){for(var s=[],i=[],u=t(n[n.length-1],d),f=n[n.length-1],p=n[0],y=0;y<n.length;++y,f=p){var m=t(p=n[y],d);if(u<0&&m>0||u>0&&m<0){var l=a(f,m,p,u);s.push(l),i.push(l.slice())}m<0?i.push(p.slice()):m>0?s.push(p.slice()):(s.push(p.slice()),i.push(p.slice())),u=m}return{positive:s,negative:i}},T.exports.positive=function(n,d){for(var s=[],i=t(n[n.length-1],d),u=n[n.length-1],f=n[0],p=0;p<n.length;++p,u=f){var y=t(f=n[p],d);(i<0&&y>0||i>0&&y<0)&&s.push(a(u,y,f,i)),y>=0&&s.push(f.slice()),i=y}return s},T.exports.negative=function(n,d){for(var s=[],i=t(n[n.length-1],d),u=n[n.length-1],f=n[0],p=0;p<n.length;++p,u=f){var y=t(f=n[p],d);(i<0&&y>0||i>0&&y<0)&&s.push(a(u,y,f,i)),y<=0&&s.push(f.slice()),i=y}return s}},{"robust-dot-product":281,"robust-sum":289}],301:[function(x,T,b){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(s){return a(d(s),arguments)}function t(s,i){return r.apply(null,[s].concat(i||[]))}function a(s,i){var u,f,p,y,m,l,w,v,A,M=1,k=s.length,E="";for(f=0;f<k;f++)if("string"==typeof s[f])E+=s[f];else if("object"==typeof s[f]){if((y=s[f]).keys)for(u=i[M],p=0;p<y.keys.length;p++){if(null==u)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[p],y.keys[p-1]));u=u[y.keys[p]]}else u=y.param_no?i[y.param_no]:i[M++];if(e.not_type.test(y.type)&&e.not_primitive.test(y.type)&&u instanceof Function&&(u=u()),e.numeric_arg.test(y.type)&&"number"!=typeof u&&isNaN(u))throw new TypeError(r("[sprintf] expecting number but found %T",u));switch(e.number.test(y.type)&&(v=u>=0),y.type){case"b":u=parseInt(u,10).toString(2);break;case"c":u=String.fromCharCode(parseInt(u,10));break;case"d":case"i":u=parseInt(u,10);break;case"j":u=JSON.stringify(u,null,y.width?parseInt(y.width):0);break;case"e":u=y.precision?parseFloat(u).toExponential(y.precision):parseFloat(u).toExponential();break;case"f":u=y.precision?parseFloat(u).toFixed(y.precision):parseFloat(u);break;case"g":u=y.precision?String(Number(u.toPrecision(y.precision))):parseFloat(u);break;case"o":u=(parseInt(u,10)>>>0).toString(8);break;case"s":u=String(u),u=y.precision?u.substring(0,y.precision):u;break;case"t":u=String(!!u),u=y.precision?u.substring(0,y.precision):u;break;case"T":u=Object.prototype.toString.call(u).slice(8,-1).toLowerCase(),u=y.precision?u.substring(0,y.precision):u;break;case"u":u=parseInt(u,10)>>>0;break;case"v":u=u.valueOf(),u=y.precision?u.substring(0,y.precision):u;break;case"x":u=(parseInt(u,10)>>>0).toString(16);break;case"X":u=(parseInt(u,10)>>>0).toString(16).toUpperCase()}e.json.test(y.type)?E+=u:(!e.number.test(y.type)||v&&!y.sign?A="":(A=v?"+":"-",u=u.toString().replace(e.sign,"")),l=y.pad_char?"0"===y.pad_char?"0":y.pad_char.charAt(1):" ",w=y.width-(A+u).length,m=y.width&&w>0?l.repeat(w):"",E+=y.align?A+u+m:"0"===l?A+m+u:m+A+u)}return E}var n=Object.create(null);function d(s){if(n[s])return n[s];for(var i,u=s,f=[],p=0;u;){if(null!==(i=e.text.exec(u)))f.push(i[0]);else if(null!==(i=e.modulo.exec(u)))f.push("%");else{if(null===(i=e.placeholder.exec(u)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){p|=1;var y=[],m=i[2],l=[];if(null===(l=e.key.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(y.push(l[1]);""!==(m=m.substring(l[0].length));)if(null!==(l=e.key_access.exec(m)))y.push(l[1]);else{if(null===(l=e.index_access.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");y.push(l[1])}i[2]=y}else p|=2;if(3===p)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");f.push({placeholder:i[0],param_no:i[1],keys:i[2],sign:i[3],pad_char:i[4],align:i[5],width:i[6],precision:i[7],type:i[8]})}u=u.substring(i[0].length)}return n[s]=f}void 0!==b&&(b.sprintf=r,b.vsprintf=t),"undefined"!=typeof window&&(window.sprintf=r,window.vsprintf=t)}()},{}],302:[function(x,T,b){"use strict";T.exports=function(n,d){if(n.dimension<=0)return{positions:[],cells:[]};if(1===n.dimension)return function(u,f){for(var p=r(u,f),y=p.length,m=new Array(y),l=new Array(y),w=0;w<y;++w)m[w]=[p[w]],l[w]=[w];return{positions:m,cells:l}}(n,d);var s=n.order.join()+"-"+n.dtype,i=a[s];return d=+d||0,i||(i=a[s]=function(u,f){var y=t[u.length+"d"];if(y)return y(e,u,f)}(n.order,n.dtype)),i(n,d)};var e=x("ndarray-extract-contour"),r=x("zero-crossings"),t={"2d":function(n,d,s){var i=n({order:d,scalarArguments:3,getters:"generic"===s?[0]:void 0,phase:function(u,f,p,y){return u>y|0},vertex:function(u,f,p,y,m,l,w,v,A,M,k,E,P){var S=(w<<0)+(v<<1)+(A<<2)+(M<<3)|0;if(0!==S&&15!==S)switch(S){case 0:case 15:k.push([u-.5,f-.5]);break;case 1:k.push([u-.25-.25*(y+p-2*P)/(p-y),f-.25-.25*(m+p-2*P)/(p-m)]);break;case 2:k.push([u-.75-.25*(-y-p+2*P)/(y-p),f-.25-.25*(l+y-2*P)/(y-l)]);break;case 3:k.push([u-.5,f-.5-.5*(m+p+l+y-4*P)/(p-m+y-l)]);break;case 4:k.push([u-.25-.25*(l+m-2*P)/(m-l),f-.75-.25*(-m-p+2*P)/(m-p)]);break;case 5:k.push([u-.5-.5*(y+p+l+m-4*P)/(p-y+m-l),f-.5]);break;case 6:k.push([u-.5-.25*(-y-p+l+m)/(y-p+m-l),f-.5-.25*(-m-p+l+y)/(m-p+y-l)]);break;case 7:k.push([u-.75-.25*(l+m-2*P)/(m-l),f-.75-.25*(l+y-2*P)/(y-l)]);break;case 8:k.push([u-.75-.25*(-l-m+2*P)/(l-m),f-.75-.25*(-l-y+2*P)/(l-y)]);break;case 9:k.push([u-.5-.25*(y+p+-l-m)/(p-y+l-m),f-.5-.25*(m+p+-l-y)/(p-m+l-y)]);break;case 10:k.push([u-.5-.5*(-y-p-l-m+4*P)/(y-p+l-m),f-.5]);break;case 11:k.push([u-.25-.25*(-l-m+2*P)/(l-m),f-.75-.25*(m+p-2*P)/(p-m)]);break;case 12:k.push([u-.5,f-.5-.5*(-m-p-l-y+4*P)/(m-p+l-y)]);break;case 13:k.push([u-.75-.25*(y+p-2*P)/(p-y),f-.25-.25*(-l-y+2*P)/(l-y)]);break;case 14:k.push([u-.25-.25*(-y-p+2*P)/(y-p),f-.25-.25*(-m-p+2*P)/(m-p)])}},cell:function(u,f,p,y,m,l,w,v,A){v.push(m?[u,f]:[f,u])}});return function(u,f){var p=[],y=[];return i(u,p,y,f),{positions:p,cells:y}}}},a={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(x,T,b){(function(e){(function(){"use strict";T.exports=function n(d,s,i){i=i||{};var u=a[d];u||(u=a[d]={" ":{data:new Float32Array(0),shape:.2}});var f=u[s];if(!f)if(s.length<=1||!/\d/.test(s))f=u[s]=function(P){for(var S=P.cells,F=P.positions,R=new Float32Array(6*S.length),D=0,L=0,B=0;B<S.length;++B)for(var V=S[B],Z=0;Z<3;++Z){var Y=F[V[Z]];R[D++]=Y[0],R[D++]=Y[1]+1.4,L=Math.max(Y[0],L)}return{data:R,shape:L}}(r(s,{triangles:!0,font:d,textAlign:i.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var p=s.split(/(\d|\s)/),y=new Array(p.length),m=0,l=0,w=0;w<p.length;++w)y[w]=n(d,p[w]),m+=y[w].data.length,l+=y[w].shape,w>0&&(l+=.02);var v=new Float32Array(m),A=0,M=-.5*l;for(w=0;w<y.length;++w){for(var k=y[w].data,E=0;E<k.length;E+=2)v[A++]=k[E]+M,v[A++]=k[E+1];M+=y[w].shape+.02}f=u[s]={data:v,shape:l}}return f};var r=x("vectorize-text"),t=window||e.global||{},a=t.__TEXT_CACHE||{};t.__TEXT_CACHE={}}).call(this)}).call(this,x("_process"))},{_process:5,"vectorize-text":311}],304:[function(x,T,b){"use strict";var e=x("parse-unit");function r(a,n){var d=e(getComputedStyle(a).getPropertyValue(n));return d[0]*t(d[1],a)}function t(a,n){switch(n=n||document.body,a=(a||"px").trim().toLowerCase(),n!==window&&n!==document||(n=document.body),a){case"%":return n.clientHeight/100;case"ch":case"ex":return function(d,s){var i=document.createElement("div");i.style["font-size"]="128"+d,s.appendChild(i);var u=r(i,"font-size")/128;return s.removeChild(i),u}(a,n);case"em":return r(n,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}T.exports=t},{"parse-unit":265}],305:[function(x,T,b){"use strict";T.exports=function(m){var l=(m=m||{}).center||[0,0,0],w=m.up||[0,1,0],v=m.right||u(w),A=m.radius||1,M=m.theta||0,k=m.phi||0;if(l=[].slice.call(l,0,3),w=[].slice.call(w,0,3),n(w,w),v=[].slice.call(v,0,3),n(v,v),"eye"in m){var E=m.eye,P=[E[0]-l[0],E[1]-l[1],E[2]-l[2]];a(v,P,w),s(v[0],v[1],v[2])<1e-6?v=u(w):n(v,v),A=s(P[0],P[1],P[2]);var S=d(w,P)/A,F=d(v,P)/A;k=Math.acos(S),M=Math.acos(F)}return A=Math.log(A),new f(m.zoomMin,m.zoomMax,l,w,v,A,M,k)};var e=x("filtered-vector"),r=x("gl-mat4/invert"),t=x("gl-mat4/rotate"),a=x("gl-vec3/cross"),n=x("gl-vec3/normalize"),d=x("gl-vec3/dot");function s(m,l,w){return Math.sqrt(Math.pow(m,2)+Math.pow(l,2)+Math.pow(w,2))}function i(m){return Math.min(1,Math.max(-1,m))}function u(m){var l=Math.abs(m[0]),w=Math.abs(m[1]),v=Math.abs(m[2]),A=[0,0,0];l>Math.max(w,v)?A[2]=1:w>Math.max(l,v)?A[0]=1:A[1]=1;for(var M=0,k=0,E=0;E<3;++E)M+=m[E]*m[E],k+=A[E]*m[E];for(E=0;E<3;++E)A[E]-=k/M*m[E];return n(A,A),A}function f(m,l,w,v,A,M,k,E){this.center=e(w),this.up=e(v),this.right=e(A),this.radius=e([M]),this.angle=e([k,E]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(m,l),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var P=0;P<16;++P)this.computedMatrix[P]=.5;this.recalcMatrix(0)}var p=f.prototype;p.setDistanceLimits=function(m,l){m=m>0?Math.log(m):-1/0,l=l>0?Math.log(l):1/0,l=Math.max(l,m),this.radius.bounds[0][0]=m,this.radius.bounds[1][0]=l},p.getDistanceLimits=function(m){var l=this.radius.bounds[0];return m?(m[0]=Math.exp(l[0][0]),m[1]=Math.exp(l[1][0]),m):[Math.exp(l[0][0]),Math.exp(l[1][0])]},p.recalcMatrix=function(m){this.center.curve(m),this.up.curve(m),this.right.curve(m),this.radius.curve(m),this.angle.curve(m);for(var l=this.computedUp,w=this.computedRight,v=0,A=0,M=0;M<3;++M)A+=l[M]*w[M],v+=l[M]*l[M];var k=Math.sqrt(v),E=0;for(M=0;M<3;++M)w[M]-=l[M]*A/v,E+=w[M]*w[M],l[M]/=k;var P=Math.sqrt(E);for(M=0;M<3;++M)w[M]/=P;var S=this.computedToward;a(S,l,w),n(S,S);var F=Math.exp(this.computedRadius[0]),R=this.computedAngle[0],D=this.computedAngle[1],L=Math.cos(R),B=Math.sin(R),V=Math.cos(D),Z=Math.sin(D),Y=this.computedCenter,ee=L*V,Q=B*V,$=Z,K=-L*Z,oe=-B*Z,j=V,H=this.computedEye,G=this.computedMatrix;for(M=0;M<3;++M){var re=ee*w[M]+Q*S[M]+$*l[M];G[4*M+1]=K*w[M]+oe*S[M]+j*l[M],G[4*M+2]=re,G[4*M+3]=0}var q=G[1],te=G[5],ne=G[9],le=G[2],ue=G[6],de=G[10],he=te*de-ne*ue,be=ne*le-q*de,ge=q*ue-te*le,we=s(he,be,ge);for(be/=we,ge/=we,G[0]=he/=we,G[4]=be,G[8]=ge,M=0;M<3;++M)H[M]=Y[M]+G[2+4*M]*F;for(M=0;M<3;++M){E=0;for(var ke=0;ke<3;++ke)E+=G[M+4*ke]*H[ke];G[12+M]=-E}G[15]=1},p.getMatrix=function(m,l){this.recalcMatrix(m);var w=this.computedMatrix;if(l){for(var v=0;v<16;++v)l[v]=w[v];return l}return w};var y=[0,0,0];p.rotate=function(m,l,w,v){if(this.angle.move(m,l,w),v){this.recalcMatrix(m);var A=this.computedMatrix;y[0]=A[2],y[1]=A[6],y[2]=A[10];for(var M=this.computedUp,k=this.computedRight,E=this.computedToward,P=0;P<3;++P)A[4*P]=M[P],A[4*P+1]=k[P],A[4*P+2]=E[P];for(t(A,A,v,y),P=0;P<3;++P)M[P]=A[4*P],k[P]=A[4*P+1];this.up.set(m,M[0],M[1],M[2]),this.right.set(m,k[0],k[1],k[2])}},p.pan=function(m,l,w,v){l=l||0,w=w||0,v=v||0,this.recalcMatrix(m);var A=this.computedMatrix,M=(Math.exp(this.computedRadius[0]),A[1]),k=A[5],E=A[9],P=s(M,k,E),S=A[0],F=A[4],R=A[8],D=S*(M/=P)+F*(k/=P)+R*(E/=P),L=s(S-=M*D,F-=k*D,R-=E*D),B=(S/=L)*l+M*w,V=(F/=L)*l+k*w,Z=(R/=L)*l+E*w;this.center.move(m,B,V,Z);var Y=Math.exp(this.computedRadius[0]);Y=Math.max(1e-4,Y+v),this.radius.set(m,Math.log(Y))},p.translate=function(m,l,w,v){this.center.move(m,l||0,w||0,v||0)},p.setMatrix=function(m,l,w,v){var A=1;"number"==typeof w&&(A=0|w),(A<0||A>3)&&(A=1);var M=(A+2)%3;l||(this.recalcMatrix(m),l=this.computedMatrix);var k=l[A],E=l[A+4],P=l[A+8];if(v){var S=Math.abs(k),F=Math.abs(E),R=Math.abs(P),D=Math.max(S,F,R);S===D?(k=k<0?-1:1,E=P=0):R===D?(P=P<0?-1:1,k=E=0):(E=E<0?-1:1,k=P=0)}else{var L=s(k,E,P);k/=L,E/=L,P/=L}var B,V,Z=l[M],Y=l[M+4],ee=l[M+8],Q=Z*k+Y*E+ee*P,$=s(Z-=k*Q,Y-=E*Q,ee-=P*Q),K=E*(ee/=$)-P*(Y/=$),oe=P*(Z/=$)-k*ee,j=k*Y-E*Z,H=s(K,oe,j);if(K/=H,oe/=H,j/=H,this.center.jump(m,ve,Te,Ie),this.radius.idle(m),this.up.jump(m,k,E,P),this.right.jump(m,Z,Y,ee),2===A){var G=l[1],re=l[5],q=l[9];B=he<0?-Math.PI/2:Math.PI/2,V=Math.atan2(G*K+re*oe+q*j,G*Z+re*Y+q*ee)}else{var le=l[2],ue=l[6],de=l[10],he=le*k+ue*E+de*P,be=le*Z+ue*Y+de*ee,ge=le*K+ue*oe+de*j;B=Math.asin(i(he)),V=Math.atan2(ge,be)}this.angle.jump(m,V,B),this.recalcMatrix(m);var we=l[2],ke=l[6],De=l[10],Ee=this.computedMatrix;r(Ee,l);var Re=Ee[15],ve=Ee[12]/Re,Te=Ee[13]/Re,Ie=Ee[14]/Re,Ce=Math.exp(this.computedRadius[0]);this.center.jump(m,ve-we*Ce,Te-ke*Ce,Ie-De*Ce)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(m){this.center.idle(m),this.up.idle(m),this.right.idle(m),this.radius.idle(m),this.angle.idle(m)},p.flush=function(m){this.center.flush(m),this.up.flush(m),this.right.flush(m),this.radius.flush(m),this.angle.flush(m)},p.setDistance=function(m,l){l>0&&this.radius.set(m,Math.log(l))},p.lookAt=function(m,l,w,v){this.recalcMatrix(m),l=l||this.computedEye,w=w||this.computedCenter;var A=(v=v||this.computedUp)[0],M=v[1],k=v[2],E=s(A,M,k);if(!(E<1e-6)){A/=E,M/=E,k/=E;var P=l[0]-w[0],S=l[1]-w[1],F=l[2]-w[2],R=s(P,S,F);if(!(R<1e-6)){P/=R,S/=R,F/=R;var D=this.computedRight,L=D[0],B=D[1],V=D[2],Z=A*L+M*B+k*V,Y=s(L-=Z*A,B-=Z*M,V-=Z*k);if(!(Y<.01&&(Y=s(L=M*F-k*S,B=k*P-A*F,V=A*S-M*P))<1e-6)){L/=Y,B/=Y,V/=Y,this.up.set(m,A,M,k),this.right.set(m,L,B,V),this.center.set(m,w[0],w[1],w[2]),this.radius.set(m,Math.log(R));var ee=M*V-k*B,Q=k*L-A*V,$=A*B-M*L,K=s(ee,Q,$),j=L*P+B*S+V*F,H=(ee/=K)*P+(Q/=K)*S+($/=K)*F,G=Math.asin(i(A*P+M*S+k*F)),re=Math.atan2(H,j),q=this.angle._state,te=q[q.length-1],ne=q[q.length-2];te%=2*Math.PI;var le=Math.abs(te+2*Math.PI-re),ue=Math.abs(te-re),de=Math.abs(te-2*Math.PI-re);le<ue&&(te+=2*Math.PI),de<ue&&(te-=2*Math.PI),this.angle.jump(this.angle.lastT(),te,ne),this.angle.set(m,re,G)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(x,T,b){"use strict";T.exports=function(r,t,a){var n=r*t,d=e*r,s=d-(d-r),i=r-s,u=e*t,f=u-(u-t),p=t-f,y=i*p-(n-s*f-i*f-s*p);return a?(a[0]=y,a[1]=n,a):[y,n]};var e=+(Math.pow(2,27)+1)},{}],307:[function(x,T,b){"use strict";T.exports=function(e,r,t){var a=e+r,n=a-e,d=r-n,s=e-(a-n);return t?(t[0]=s+d,t[1]=a,t):[s+d,a]}},{}],308:[function(x,T,b){(function(e){(function(){"use strict";var r=x("bit-twiddle"),t=x("dup"),a=x("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),BIGUINT64:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),BIGINT64:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var n="undefined"!=typeof Uint8ClampedArray,d="undefined"!=typeof BigUint64Array,s="undefined"!=typeof BigInt64Array,i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=t([32,0])),i.BIGUINT64||(i.BIGUINT64=t([32,0])),i.BIGINT64||(i.BIGINT64=t([32,0])),i.BUFFER||(i.BUFFER=t([32,0]));var u=i.DATA,f=i.BUFFER;function p(L){if(L){var V=r.log2(L.length||L.byteLength);u[V].push(L)}}function y(L){L=r.nextPow2(L);var B=r.log2(L),V=u[B];return V.length>0?V.pop():new ArrayBuffer(L)}function m(L){return new Uint8Array(y(L),0,L)}function l(L){return new Uint16Array(y(2*L),0,L)}function w(L){return new Uint32Array(y(4*L),0,L)}function v(L){return new Int8Array(y(L),0,L)}function A(L){return new Int16Array(y(2*L),0,L)}function M(L){return new Int32Array(y(4*L),0,L)}function k(L){return new Float32Array(y(4*L),0,L)}function E(L){return new Float64Array(y(8*L),0,L)}function P(L){return n?new Uint8ClampedArray(y(L),0,L):m(L)}function S(L){return d?new BigUint64Array(y(8*L),0,L):null}function F(L){return s?new BigInt64Array(y(8*L),0,L):null}function R(L){return new DataView(y(L),0,L)}function D(L){L=r.nextPow2(L);var B=r.log2(L),V=f[B];return V.length>0?V.pop():new a(L)}b.free=function(L){if(a.isBuffer(L))f[r.log2(L.length)].push(L);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(L)&&(L=L.buffer),!L)return;var V=0|r.log2(L.length||L.byteLength);u[V].push(L)}},b.freeUint8=b.freeUint16=b.freeUint32=b.freeBigUint64=b.freeInt8=b.freeInt16=b.freeInt32=b.freeBigInt64=b.freeFloat32=b.freeFloat=b.freeFloat64=b.freeDouble=b.freeUint8Clamped=b.freeDataView=function(L){p(L.buffer)},b.freeArrayBuffer=p,b.freeBuffer=function(L){f[r.log2(L.length)].push(L)},b.malloc=function(L,B){if(void 0===B||"arraybuffer"===B)return y(L);switch(B){case"uint8":return m(L);case"uint16":return l(L);case"uint32":return w(L);case"int8":return v(L);case"int16":return A(L);case"int32":return M(L);case"float":case"float32":return k(L);case"double":case"float64":return E(L);case"uint8_clamped":return P(L);case"bigint64":return F(L);case"biguint64":return S(L);case"buffer":return D(L);case"data":case"dataview":return R(L);default:return null}return null},b.mallocArrayBuffer=y,b.mallocUint8=m,b.mallocUint16=l,b.mallocUint32=w,b.mallocInt8=v,b.mallocInt16=A,b.mallocInt32=M,b.mallocFloat32=b.mallocFloat=k,b.mallocFloat64=b.mallocDouble=E,b.mallocUint8Clamped=P,b.mallocBigUint64=S,b.mallocBigInt64=F,b.mallocDataView=R,b.mallocBuffer=D,b.clearCache=function(){for(var L=0;L<32;++L)i.UINT8[L].length=0,i.UINT16[L].length=0,i.UINT32[L].length=0,i.INT8[L].length=0,i.INT16[L].length=0,i.INT32[L].length=0,i.FLOAT[L].length=0,i.DOUBLE[L].length=0,i.BIGUINT64[L].length=0,i.BIGINT64[L].length=0,i.UINT8C[L].length=0,u[L].length=0,f[L].length=0}}).call(this)}).call(this,void 0!==g?g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(x,T,b){"use strict";function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var a=0;a<t;++a)this.roots[a]=a,this.ranks[a]=0}T.exports=e;var r=e.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},r.find=function(t){for(var a=t,n=this.roots;n[t]!==t;)t=n[t];for(;n[a]!==t;){var d=n[a];n[a]=t,a=d}return t},r.link=function(t,a){var n=this.find(t),d=this.find(a);if(n!==d){var s=this.ranks,i=this.roots,u=s[n],f=s[d];u<f?i[n]=d:f<u?i[d]=n:(i[d]=n,++s[n])}}},{}],310:[function(x,T,b){"use strict";T.exports=function(e,r,t){return 0===e.length?e:r?(t||e.sort(r),function(a,n){for(var d=1,s=a.length,i=a[0],u=a[0],f=1;f<s;++f)if(u=i,n(i=a[f],u)){if(f===d){d++;continue}a[d++]=i}return a.length=d,a}(e,r)):(t||e.sort(),function(a){for(var n=1,d=a.length,s=a[0],i=a[0],u=1;u<d;++u,i=s)if(i=s,(s=a[u])!==i){if(u===n){n++;continue}a[n++]=s}return a.length=n,a}(e))}},{}],311:[function(x,T,b){"use strict";T.exports=function(a,n){return"object"==typeof n&&null!==n||(n={}),e(a,n.canvas||r,n.context||t,n)};var e=x("./lib/vtext"),r=null,t=null;"undefined"!=typeof document&&((r=document.createElement("canvas")).width=8192,r.height=1024,t=r.getContext("2d"))},{"./lib/vtext":312}],312:[function(x,T,b){T.exports=function(p,y,m,l){var w=64,v=1.25,A={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return l&&(l.size&&l.size>0&&(w=l.size),l.lineSpacing&&l.lineSpacing>0&&(v=l.lineSpacing),l.styletags&&l.styletags.breaklines&&(A.breaklines=!!l.styletags.breaklines),l.styletags&&l.styletags.bolds&&(A.bolds=!!l.styletags.bolds),l.styletags&&l.styletags.italics&&(A.italics=!!l.styletags.italics),l.styletags&&l.styletags.subscripts&&(A.subscripts=!!l.styletags.subscripts),l.styletags&&l.styletags.superscripts&&(A.superscripts=!!l.styletags.superscripts)),m.font=[l.fontStyle,l.fontVariant,l.fontWeight,w+"px",l.font].filter(function(M){return M}).join(" "),m.textAlign="start",m.textBaseline="alphabetic",m.direction="ltr",f(function(M,k,E,P,S,F){E=(E=E.replace(/\n/g,"")).replace(/\<br\>/g,!0===F.breaklines?"\n":" ");var R="",D=[];for(Z=0;Z<E.length;++Z)D[Z]=R;!0===F.bolds&&(D=s("b","b|",E,D)),!0===F.italics&&(D=s("i","i|",E,D)),!0===F.superscripts&&(D=s("sup","+1",E,D)),!0===F.subscripts&&(D=s("sub","-1",E,D));var L=[],B="";for(Z=0;Z<E.length;++Z)null!==D[Z]&&(B+=E[Z],L.push(D[Z]));var V,Z,Y,ee,Q,$=B.split("\n"),K=$.length,oe=Math.round(S*P),j=P,H=2*P,G=0,re=K*oe+H;M.height<re&&(M.height=re),k.fillStyle="#000",k.fillRect(0,0,M.width,M.height),k.fillStyle="#fff";var q=0,te="";function ne(){if(""!==te){var ke=k.measureText(te).width;k.fillText(te,j+Y,H+ee),Y+=ke}}function le(){return Math.round(Q)+"px "}function ue(ke,De){var Ee=""+k.font;if(!0===F.subscripts){var Re=ke.indexOf("-"),ve=De.indexOf("-"),Te=Re>-1?parseInt(ke[1+Re]):0,Ie=ve>-1?parseInt(De[1+ve]):0;Te!==Ie&&(Ee=Ee.replace(le(),"?px "),Q*=Math.pow(.75,Ie-Te),Ee=Ee.replace("?px ",le())),ee+=.25*oe*(Ie-Te)}if(!0===F.superscripts){var Ce=ke.indexOf("+"),Pe=De.indexOf("+"),Ve=Ce>-1?parseInt(ke[1+Ce]):0,qe=Pe>-1?parseInt(De[1+Pe]):0;Ve!==qe&&(Ee=Ee.replace(le(),"?px "),Q*=Math.pow(.75,qe-Ve),Ee=Ee.replace("?px ",le())),ee-=.25*oe*(qe-Ve)}if(!0===F.bolds){var Je=ke.indexOf("b|")>-1,lt=De.indexOf("b|")>-1;!Je&&lt&&(Ee=He?Ee.replace("italic ","italic bold "):"bold "+Ee),Je&&!lt&&(Ee=Ee.replace("bold ",""))}if(!0===F.italics){var He=ke.indexOf("i|")>-1,$e=De.indexOf("i|")>-1;!He&&$e&&(Ee="italic "+Ee),He&&!$e&&(Ee=Ee.replace("italic ",""))}k.font=Ee}for(V=0;V<K;++V){var de=$[V]+"\n";for(Y=0,ee=V*oe,Q=P,te="",Z=0;Z<de.length;++Z){var he=Z+q<L.length?L[Z+q]:L[L.length-1];R===he?te+=de[Z]:(ne(),te=de[Z],void 0!==he&&(ue(R,he),R=he))}ne(),q+=de.length;var be=0|Math.round(Y+2*j);G<be&&(G=be)}var ge=G,we=H+oe*K;return r(k.getImageData(0,0,ge,we).data,[we,ge,4]).pick(-1,-1,0).transpose(1,0)}(y,m,p,w,v,A),l,w)},T.exports.processPixels=f;var e=x("surface-nets"),r=x("ndarray"),t=x("simplify-planar-graph"),a=x("clean-pslg"),n=x("cdt2d"),d=x("planar-graph-to-polyline");function s(p,y,m,l){for(var w="<"+p+">",v="</"+p+">",A=w.length,M=v.length,k="+"===y[0]||"-"===y[0],E=0,P=-M;E>-1&&-1!==(E=m.indexOf(w,E))&&-1!==(P=m.indexOf(v,E+A))&&!(P<=E);){for(var S=E;S<P+M;++S)if(S<E+A||S>=P)l[S]=null,m=m.substr(0,S)+" "+m.substr(S+1);else if(null!==l[S]){var F=l[S].indexOf(y[0]);-1===F?l[S]+=y:k&&(l[S]=l[S].substr(0,F+1)+(1+parseInt(l[S][F+1]))+l[S].substr(F+2))}var R=E+A,D=m.substr(R,P-R).indexOf(w);E=-1!==D?D:P+M}return l}function u(p,y,m,l){var w=function(p,y){var m=e(p,128);return y?t(m.cells,m.positions,.25):{edges:m.cells,positions:m.positions}}(p,l),v=function(V,Z,Y){for(var ee=Z.textAlign||"start",Q=Z.textBaseline||"alphabetic",$=[1<<30,1<<30],K=[0,0],oe=V.length,j=0;j<oe;++j)for(var H=V[j],G=0;G<2;++G)$[G]=0|Math.min($[G],H[G]),K[G]=0|Math.max(K[G],H[G]);var re=0;switch(ee){case"center":re=-.5*($[0]+K[0]);break;case"right":case"end":re=-K[0];break;case"left":case"start":re=-$[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+ee+"'")}var q=0;switch(Q){case"hanging":case"top":q=-$[1];break;case"middle":q=-.5*($[1]+K[1]);break;case"alphabetic":case"ideographic":q=-3*Y;break;case"bottom":q=-K[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+Q+"'")}var te=1/Y;return"lineHeight"in Z?te*=+Z.lineHeight:"width"in Z?te=Z.width/(K[0]-$[0]):"height"in Z&&(te=Z.height/(K[1]-$[1])),V.map(function(ne){return[te*(ne[0]+re),te*(ne[1]+q)]})}(w.positions,y,m),A=w.edges,M="ccw"===y.orientation;if(a(v,A),y.polygons||y.polygon||y.polyline){for(var k=d(A,v),E=new Array(k.length),P=0;P<k.length;++P){for(var S=k[P],F=new Array(S.length),R=0;R<S.length;++R){for(var D=S[R],L=new Array(D.length),B=0;B<D.length;++B)L[B]=v[D[B]].slice();M&&L.reverse(),F[R]=L}E[P]=F}return E}return y.triangles||y.triangulate||y.triangle?{cells:n(v,A,{delaunay:!1,exterior:!1,interior:!0}),positions:v}:{edges:A,positions:v}}function f(p,y,m){try{return u(p,y,m,!0)}catch(l){}try{return u(p,y,m,!1)}catch(l){}return y.polygons||y.polyline||y.polygon?[]:y.triangles||y.triangulate||y.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(x,T,b){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=w);var e=!1;if("function"==typeof WeakMap){var r=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var t=new r,a=Object.freeze({});if(t.set(a,1),1===t.get(a))return void(T.exports=WeakMap);e=!0}}var n=Object.getOwnPropertyNames,d=Object.defineProperty,s=Object.isExtensible,i="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var u=new ArrayBuffer(25),f=new Uint8Array(u);crypto.getRandomValues(f),i="weakmap:rand:"+Array.prototype.map.call(f,function(E){return(E%36).toString(36)}).join("")+"___"}if(d(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(v)}}),"getPropertyNames"in Object){var p=Object.getPropertyNames;d(Object,"getPropertyNames",{value:function(E){return p(E).filter(v)}})}!function(){var E=Object.freeze;d(Object,"freeze",{value:function(F){return A(F),E(F)}});var P=Object.seal;d(Object,"seal",{value:function(F){return A(F),P(F)}});var S=Object.preventExtensions;d(Object,"preventExtensions",{value:function(F){return A(F),S(F)}})}();var y=!1,m=0,l=function(){this instanceof l||k();var E=[],P=[],S=m++;return Object.create(l.prototype,{get___:{value:M(function(F,R){var D,L=A(F);return L?S in L?L[S]:R:(D=E.indexOf(F))>=0?P[D]:R})},has___:{value:M(function(F){var R=A(F);return R?S in R:E.indexOf(F)>=0})},set___:{value:M(function(F,R){var D,L=A(F);return L?L[S]=R:(D=E.indexOf(F))>=0?P[D]=R:(P[D=E.length]=R,E[D]=F),this})},delete___:{value:M(function(F){var R,D,L=A(F);return L?S in L&&delete L[S]:!((R=E.indexOf(F))<0||(D=E.length-1,E[R]=void 0,P[R]=P[D],E[R]=E[D],E.length=D,P.length=D,0))})}})};l.prototype=Object.create(Object.prototype,{get:{value:function(E,P){return this.get___(E,P)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,P){return this.set___(E,P)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),"function"==typeof r?function(){function E(){this instanceof l||k();var P,S=new r,F=void 0,R=!1;return P=e?function(D,L){return S.set(D,L),S.has(D)||(F||(F=new l),F.set(D,L)),this}:function(D,L){if(R)try{S.set(D,L)}catch(B){F||(F=new l),F.set___(D,L)}else S.set(D,L);return this},Object.create(l.prototype,{get___:{value:M(function(D,L){return F?S.has(D)?S.get(D):F.get___(D,L):S.get(D,L)})},has___:{value:M(function(D){return S.has(D)||!!F&&F.has___(D)})},set___:{value:M(P)},delete___:{value:M(function(D){var L=!!S.delete(D);return F&&F.delete___(D)||L})},permitHostObjects___:{value:M(function(D){if(D!==w)throw new Error("bogus call to permitHostObjects___");R=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),E.prototype=l.prototype,T.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),T.exports=l)}function w(E){E.permitHostObjects___&&E.permitHostObjects___(w)}function v(E){return!("weakmap:"==E.substr(0,"weakmap:".length)&&"___"===E.substr(E.length-3))}function A(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var P=E[i];if(P&&P.key===E)return P;if(s(E)){P={key:E};try{return d(E,i,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch(S){return}}}function M(E){return E.prototype=null,Object.freeze(E)}function k(){y||"undefined"==typeof console||(y=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(x,T,b){var e=x("./hidden-store.js");T.exports=function(){var r={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var a=t.valueOf(r);return a&&a.identity===r?a:e(t,r)}}},{"./hidden-store.js":315}],315:[function(x,T,b){T.exports=function(e,r){var t={identity:r},a=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(n){return n!==r?a.apply(this,arguments):t},writable:!0}),t}},{}],316:[function(x,T,b){var e=x("./create-store.js");T.exports=function(){var r=e();return{get:function(t,a){var n=r(t);return n.hasOwnProperty("value")?n.value:a},set:function(t,a){return r(t).value=a,this},has:function(t){return"value"in r(t)},delete:function(t){return delete r(t).value}}}},{"./create-store.js":314}],317:[function(x,T,b){"use strict";var t,a;T.exports=(t=function(){return function(t,a,n,d,s,i){var u=t[0],f=n[0],p=[0],y=f;d|=0;var m=0,l=f;for(m=0;m<u;++m){var w=a[d]-i,v=a[d+y]-i;w>=0!=v>=0&&s.push(p[0]+.5+.5*(w+v)/(w-v)),d+=l,++p[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),a={},function(n,d,s){var i=n.dtype,u=n.order,f=[i,u.join()].join(),p=a[f];return p||(a[f]=p=t([i,u])),p(n.shape.slice(0),n.data,n.stride,0|n.offset,d,s)})},{}],318:[function(x,T,b){"use strict";T.exports=function(r,t){var a=[];return t=+t||0,e(r.hi(r.shape[0]-1),a,t),a};var e=x("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[27])(27)},923:(jl,_,ae)=>{"use strict";function ie(o){return"function"==typeof o}function g(o){const h=o(I=>{Error.call(I),I.stack=(new Error).stack});return h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h}const x=g(o=>function(h){o(this),this.message=h?`${h.length} errors occurred during unsubscription:\n${h.map((I,W)=>`${W+1}) ${I.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=h});function T(o,c){if(o){const h=o.indexOf(c);0<=h&&o.splice(h,1)}}class b{constructor(c){this.initialTeardown=c,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let c;if(!this.closed){this.closed=!0;const{_parentage:h}=this;if(h)if(this._parentage=null,Array.isArray(h))for(const se of h)se.remove(this);else h.remove(this);const{initialTeardown:I}=this;if(ie(I))try{I()}catch(se){c=se instanceof x?se.errors:[se]}const{_teardowns:W}=this;if(W){this._teardowns=null;for(const se of W)try{t(se)}catch(xe){c=null!=c?c:[],xe instanceof x?c=[...c,...xe.errors]:c.push(xe)}}if(c)throw new x(c)}}add(c){var h;if(c&&c!==this)if(this.closed)t(c);else{if(c instanceof b){if(c.closed||c._hasParent(this))return;c._addParent(this)}(this._teardowns=null!==(h=this._teardowns)&&void 0!==h?h:[]).push(c)}}_hasParent(c){const{_parentage:h}=this;return h===c||Array.isArray(h)&&h.includes(c)}_addParent(c){const{_parentage:h}=this;this._parentage=Array.isArray(h)?(h.push(c),h):h?[h,c]:c}_removeParent(c){const{_parentage:h}=this;h===c?this._parentage=null:Array.isArray(h)&&T(h,c)}remove(c){const{_teardowns:h}=this;h&&T(h,c),c instanceof b&&c._removeParent(this)}}b.EMPTY=(()=>{const o=new b;return o.closed=!0,o})();const e=b.EMPTY;function r(o){return o instanceof b||o&&"closed"in o&&ie(o.remove)&&ie(o.add)&&ie(o.unsubscribe)}function t(o){ie(o)?o():o.unsubscribe()}const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},n={setTimeout(...o){const{delegate:c}=n;return((null==c?void 0:c.setTimeout)||setTimeout)(...o)},clearTimeout(o){const{delegate:c}=n;return((null==c?void 0:c.clearTimeout)||clearTimeout)(o)},delegate:void 0};function d(o){n.setTimeout(()=>{const{onUnhandledError:c}=a;if(!c)throw o;c(o)})}function s(){}const i=p("C",void 0,void 0);function p(o,c,h){return{kind:o,value:c,error:h}}let y=null;function m(o){if(a.useDeprecatedSynchronousErrorHandling){const c=!y;if(c&&(y={errorThrown:!1,error:null}),o(),c){const{errorThrown:h,error:I}=y;if(y=null,h)throw I}}else o()}class w extends b{constructor(c){super(),this.isStopped=!1,c?(this.destination=c,r(c)&&c.add(this)):this.destination=E}static create(c,h,I){return new v(c,h,I)}next(c){this.isStopped?k(p("N",c,void 0),this):this._next(c)}error(c){this.isStopped?k(p("E",void 0,c),this):(this.isStopped=!0,this._error(c))}complete(){this.isStopped?k(i,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(c){this.destination.next(c)}_error(c){try{this.destination.error(c)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class v extends w{constructor(c,h,I){let W;if(super(),ie(c))W=c;else if(c){let se;({next:W,error:h,complete:I}=c),this&&a.useDeprecatedNextContext?(se=Object.create(c),se.unsubscribe=()=>this.unsubscribe()):se=c,W=null==W?void 0:W.bind(se),h=null==h?void 0:h.bind(se),I=null==I?void 0:I.bind(se)}this.destination={next:W?A(W):s,error:A(null!=h?h:M),complete:I?A(I):s}}}function A(o,c){return(...h)=>{try{o(...h)}catch(I){a.useDeprecatedSynchronousErrorHandling?function(o){a.useDeprecatedSynchronousErrorHandling&&y&&(y.errorThrown=!0,y.error=o)}(I):d(I)}}}function M(o){throw o}function k(o,c){const{onStoppedNotification:h}=a;h&&n.setTimeout(()=>h(o,c))}const E={closed:!0,next:s,error:M,complete:s},P="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(o){return o}let D=(()=>{class o{constructor(h){h&&(this._subscribe=h)}lift(h){const I=new o;return I.source=this,I.operator=h,I}subscribe(h,I,W){const se=function(o){return o&&o instanceof w||function(o){return o&&ie(o.next)&&ie(o.error)&&ie(o.complete)}(o)&&r(o)}(h)?h:new v(h,I,W);return m(()=>{const{operator:xe,source:Se}=this;se.add(xe?xe.call(se,Se):Se?this._subscribe(se):this._trySubscribe(se))}),se}_trySubscribe(h){try{return this._subscribe(h)}catch(I){h.error(I)}}forEach(h,I){return new(I=L(I))((W,se)=>{let xe;xe=this.subscribe(Se=>{try{h(Se)}catch(Be){se(Be),null==xe||xe.unsubscribe()}},se,W)})}_subscribe(h){var I;return null===(I=this.source)||void 0===I?void 0:I.subscribe(h)}[P](){return this}pipe(...h){return function(o){return 0===o.length?S:1===o.length?o[0]:function(h){return o.reduce((I,W)=>W(I),h)}}(h)(this)}toPromise(h){return new(h=L(h))((I,W)=>{let se;this.subscribe(xe=>se=xe,xe=>W(xe),()=>I(se))})}}return o.create=c=>new o(c),o})();function L(o){var c;return null!==(c=null!=o?o:a.Promise)&&void 0!==c?c:Promise}const Z=g(o=>function(){o(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Y=(()=>{class o extends D{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(h){const I=new ee(this,this);return I.operator=h,I}_throwIfClosed(){if(this.closed)throw new Z}next(h){m(()=>{if(this._throwIfClosed(),!this.isStopped){const I=this.observers.slice();for(const W of I)W.next(h)}})}error(h){m(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=h;const{observers:I}=this;for(;I.length;)I.shift().error(h)}})}complete(){m(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:h}=this;for(;h.length;)h.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var h;return(null===(h=this.observers)||void 0===h?void 0:h.length)>0}_trySubscribe(h){return this._throwIfClosed(),super._trySubscribe(h)}_subscribe(h){return this._throwIfClosed(),this._checkFinalizedStatuses(h),this._innerSubscribe(h)}_innerSubscribe(h){const{hasError:I,isStopped:W,observers:se}=this;return I||W?e:(se.push(h),new b(()=>T(se,h)))}_checkFinalizedStatuses(h){const{hasError:I,thrownError:W,isStopped:se}=this;I?h.error(W):se&&h.complete()}asObservable(){const h=new D;return h.source=this,h}}return o.create=(c,h)=>new ee(c,h),o})();class ee extends Y{constructor(c,h){super(),this.destination=c,this.source=h}next(c){var h,I;null===(I=null===(h=this.destination)||void 0===h?void 0:h.next)||void 0===I||I.call(h,c)}error(c){var h,I;null===(I=null===(h=this.destination)||void 0===h?void 0:h.error)||void 0===I||I.call(h,c)}complete(){var c,h;null===(h=null===(c=this.destination)||void 0===c?void 0:c.complete)||void 0===h||h.call(c)}_subscribe(c){var h,I;return null!==(I=null===(h=this.source)||void 0===h?void 0:h.subscribe(c))&&void 0!==I?I:e}}function Q(o){return ie(null==o?void 0:o.lift)}function $(o){return c=>{if(Q(c))return c.lift(function(h){try{return o(h,this)}catch(I){this.error(I)}});throw new TypeError("Unable to lift unknown Observable type")}}class K extends w{constructor(c,h,I,W,se){super(c),this.onFinalize=se,this._next=h?function(xe){try{h(xe)}catch(Se){c.error(Se)}}:super._next,this._error=W?function(xe){try{W(xe)}catch(Se){c.error(Se)}finally{this.unsubscribe()}}:super._error,this._complete=I?function(){try{I()}catch(xe){c.error(xe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var c;const{closed:h}=this;super.unsubscribe(),!h&&(null===(c=this.onFinalize)||void 0===c||c.call(this))}}function oe(o,c){return $((h,I)=>{let W=0;h.subscribe(new K(I,se=>{I.next(o.call(c,se,W++))}))})}function Ee(o){return this instanceof Ee?(this.v=o,this):new Ee(o)}function Re(o,c,h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W,I=h.apply(o,c||[]),se=[];return W={},xe("next"),xe("throw"),xe("return"),W[Symbol.asyncIterator]=function(){return this},W;function xe(bn){I[bn]&&(W[bn]=function(Sn){return new Promise(function(tr,qr){se.push([bn,Sn,tr,qr])>1||Se(bn,Sn)})})}function Se(bn,Sn){try{!function(bn){bn.value instanceof Ee?Promise.resolve(bn.value.v).then(ct,Ot):en(se[0][2],bn)}(I[bn](Sn))}catch(tr){en(se[0][3],tr)}}function ct(bn){Se("next",bn)}function Ot(bn){Se("throw",bn)}function en(bn,Sn){bn(Sn),se.shift(),se.length&&Se(se[0][0],se[0][1])}}function Te(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h,c=o[Symbol.asyncIterator];return c?c.call(o):(o=function(o){var c="function"==typeof Symbol&&Symbol.iterator,h=c&&o[c],I=0;if(h)return h.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&I>=o.length&&(o=void 0),{value:o&&o[I++],done:!o}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),h={},I("next"),I("throw"),I("return"),h[Symbol.asyncIterator]=function(){return this},h);function I(se){h[se]=o[se]&&function(xe){return new Promise(function(Se,Be){!function(se,xe,Se,Be){Promise.resolve(Be).then(function(ct){se({value:ct,done:Se})},xe)}(Se,Be,(xe=o[se](xe)).done,xe.value)})}}}const lt=o=>o&&"number"==typeof o.length&&"function"!=typeof o;function He(o){return ie(null==o?void 0:o.then)}function $e(o){return ie(o[P])}function et(o){return Symbol.asyncIterator&&ie(null==o?void 0:o[Symbol.asyncIterator])}function tt(o){return new TypeError(`You provided ${null!==o&&"object"==typeof o?"an invalid object":`'${o}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const bt="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Ct(o){return ie(null==o?void 0:o[bt])}function Vt(o){return Re(this,arguments,function*(){const h=o.getReader();try{for(;;){const{value:I,done:W}=yield Ee(h.read());if(W)return yield Ee(void 0);yield yield Ee(I)}}finally{h.releaseLock()}})}function Ft(o){return ie(null==o?void 0:o.getReader)}function ht(o){if(o instanceof D)return o;if(null!=o){if($e(o))return function(o){return new D(c=>{const h=o[P]();if(ie(h.subscribe))return h.subscribe(c);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(o);if(lt(o))return function(o){return new D(c=>{for(let h=0;h<o.length&&!c.closed;h++)c.next(o[h]);c.complete()})}(o);if(He(o))return function(o){return new D(c=>{o.then(h=>{c.closed||(c.next(h),c.complete())},h=>c.error(h)).then(null,d)})}(o);if(et(o))return Ze(o);if(Ct(o))return function(o){return new D(c=>{for(const h of o)if(c.next(h),c.closed)return;c.complete()})}(o);if(Ft(o))return function(o){return Ze(Vt(o))}(o)}throw tt(o)}function Ze(o){return new D(c=>{(function(o,c){var h,I,W,se;return function(o,c,h,I){return new(h||(h=Promise))(function(se,xe){function Se(Ot){try{ct(I.next(Ot))}catch(en){xe(en)}}function Be(Ot){try{ct(I.throw(Ot))}catch(en){xe(en)}}function ct(Ot){Ot.done?se(Ot.value):function(se){return se instanceof h?se:new h(function(xe){xe(se)})}(Ot.value).then(Se,Be)}ct((I=I.apply(o,c||[])).next())})}(this,void 0,void 0,function*(){try{for(h=Te(o);!(I=yield h.next()).done;)if(c.next(I.value),c.closed)return}catch(xe){W={error:xe}}finally{try{I&&!I.done&&(se=h.return)&&(yield se.call(h))}finally{if(W)throw W.error}}c.complete()})})(o,c).catch(h=>c.error(h))})}function rt(o,c,h,I=0,W=!1){const se=c.schedule(function(){h(),W?o.add(this.schedule(null,I)):this.unsubscribe()},I);if(o.add(se),!W)return se}function ze(o,c,h=1/0){return ie(c)?ze((I,W)=>oe((se,xe)=>c(I,se,W,xe))(ht(o(I,W))),h):("number"==typeof c&&(h=c),$((I,W)=>function(o,c,h,I,W,se,xe,Se){const Be=[];let ct=0,Ot=0,en=!1;const bn=()=>{en&&!Be.length&&!ct&&c.complete()},Sn=qr=>ct<I?tr(qr):Be.push(qr),tr=qr=>{ct++;let ei=!1;ht(h(qr,Ot++)).subscribe(new K(c,ri=>{c.next(ri)},()=>{ei=!0},void 0,()=>{if(ei)try{for(ct--;Be.length&&ct<I;){const ri=Be.shift();tr(ri)}bn()}catch(ri){c.error(ri)}}))};return o.subscribe(new K(c,Sn,()=>{en=!0,bn()})),()=>{}}(I,W,o,h)))}function je(o=1/0){return ze(S,o)}const Ne=new D(o=>o.complete());function xt(o){return o[o.length-1]}function zt(o){return ie(xt(o))?o.pop():void 0}function gt(o){return function(o){return o&&ie(o.schedule)}(xt(o))?o.pop():void 0}function jt(o,c=0){return $((h,I)=>{h.subscribe(new K(I,W=>rt(I,o,()=>I.next(W),c),()=>rt(I,o,()=>I.complete(),c),W=>rt(I,o,()=>I.error(W),c)))})}function it(o,c=0){return $((h,I)=>{I.add(o.schedule(()=>h.subscribe(I),c))})}function Ue(o,c){if(!o)throw new Error("Iterable cannot be null");return new D(h=>{rt(h,c,()=>{const I=o[Symbol.asyncIterator]();rt(h,c,()=>{I.next().then(W=>{W.done?h.complete():h.next(W.value)})},0,!0)})})}function Ht(o,c){return c?function(o,c){if(null!=o){if($e(o))return function(o,c){return ht(o).pipe(it(c),jt(c))}(o,c);if(lt(o))return function(o,c){return new D(h=>{let I=0;return c.schedule(function(){I===o.length?h.complete():(h.next(o[I++]),h.closed||this.schedule())})})}(o,c);if(He(o))return function(o,c){return ht(o).pipe(it(c),jt(c))}(o,c);if(et(o))return Ue(o,c);if(Ct(o))return function(o,c){return new D(h=>{let I;return rt(h,c,()=>{I=o[bt](),rt(h,c,()=>{let W,se;try{({value:W,done:se}=I.next())}catch(xe){return void h.error(xe)}se?h.complete():h.next(W)},0,!0)}),()=>ie(null==I?void 0:I.return)&&I.return()})}(o,c);if(Ft(o))return function(o,c){return Ue(Vt(o),c)}(o,c)}throw tt(o)}(o,c):ht(o)}function gn(o){return o<=0?()=>Ne:$((c,h)=>{let I=0;c.subscribe(new K(h,W=>{++I<=o&&(h.next(W),o<=I&&h.complete())}))})}function sn(o,c,...h){return!0===c?(o(),null):!1===c?null:c(...h).pipe(gn(1)).subscribe(()=>o())}function hn(o){for(let c in o)if(o[c]===hn)return c;throw Error("Could not find renamed property on target object.")}function Dn(o,c){for(const h in c)c.hasOwnProperty(h)&&!o.hasOwnProperty(h)&&(o[h]=c[h])}function _n(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(_n).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const c=o.toString();if(null==c)return""+c;const h=c.indexOf("\n");return-1===h?c:c.substring(0,h)}function Tn(o,c){return null==o||""===o?null===c?"":c:null==c||""===c?o:o+" "+c}const wn=hn({__forward_ref__:hn});function kn(o){return o.__forward_ref__=kn,o.toString=function(){return _n(this())},o}function Fn(o){return On(o)?o():o}function On(o){return"function"==typeof o&&o.hasOwnProperty(wn)&&o.__forward_ref__===kn}class sr extends Error{constructor(c,h){super(function(o,c){return`${o?`NG0${o}: `:""}${c}`}(c,h)),this.code=c}}function mr(o){return"string"==typeof o?o:null==o?"":String(o)}function Or(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():mr(o)}function nr(o,c){const h=c?` in ${c}`:"";throw new sr("201",`No provider for ${Or(o)} found${h}`)}function Rn(o,c){null==o&&function(o,c,h,I){throw new Error(`ASSERTION ERROR: ${o}`+(null==I?"":` [Expected=> ${h} ${I} ${c} <=Actual]`))}(c,o,null,"!=")}function Zn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Ar(o){return{providers:o.providers||[],imports:o.imports||[]}}function gr(o){return Rr(o,Ir)||Rr(o,Ci)}function Rr(o,c){return o.hasOwnProperty(c)?o[c]:null}function wr(o){return o&&(o.hasOwnProperty(Vr)||o.hasOwnProperty(pi))?o[Vr]:null}const Ir=hn({\u0275prov:hn}),Vr=hn({\u0275inj:hn}),Ci=hn({ngInjectableDef:hn}),pi=hn({ngInjectorDef:hn});var lr=(()=>((lr=lr||{})[lr.Default=0]="Default",lr[lr.Host=1]="Host",lr[lr.Self=2]="Self",lr[lr.SkipSelf=4]="SkipSelf",lr[lr.Optional=8]="Optional",lr))();let bi;function wa(o){const c=bi;return bi=o,c}function Io(o,c,h){const I=gr(o);return I&&"root"==I.providedIn?void 0===I.value?I.value=I.factory():I.value:h&lr.Optional?null:void 0!==c?c:void nr(_n(o),"Injector")}function Ya(o){return{toString:o}.toString()}var Xi=(()=>((Xi=Xi||{})[Xi.OnPush=0]="OnPush",Xi[Xi.Default=1]="Default",Xi))(),Bo=(()=>{return(o=Bo||(Bo={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Bo;var o})();const sl="undefined"!=typeof globalThis&&globalThis,Zo="undefined"!=typeof window&&window,as="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Bi=sl||"undefined"!=typeof global&&global||Zo||as,to={},fa=[],Xo=hn({\u0275cmp:hn}),ps=hn({\u0275dir:hn}),Lo=hn({\u0275pipe:hn}),lo=hn({\u0275mod:hn}),uo=hn({\u0275fac:hn}),ul=hn({__NG_ELEMENT_ID__:hn});let lu=0;function ga(o){return Ya(()=>{const h={},I={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Xi.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||fa,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Bo.Emulated,id:"c",styles:o.styles||fa,_:null,setInput:null,schemas:o.schemas||null,tView:null},W=o.directives,se=o.features,xe=o.pipes;return I.id+=lu++,I.inputs=Ls(o.inputs,h),I.outputs=Ls(o.outputs),se&&se.forEach(Se=>Se(I)),I.directiveDefs=W?()=>("function"==typeof W?W():W).map(cl):null,I.pipeDefs=xe?()=>("function"==typeof xe?xe():xe).map(Xl):null,I})}function cl(o){return co(o)||function(o){return o[ps]||null}(o)}function Xl(o){return function(o){return o[Lo]||null}(o)}const $l={};function Ro(o){return Ya(()=>{const c={type:o.type,bootstrap:o.bootstrap||fa,declarations:o.declarations||fa,imports:o.imports||fa,exports:o.exports||fa,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&($l[o.id]=o.type),c})}function Ls(o,c){if(null==o)return to;const h={};for(const I in o)if(o.hasOwnProperty(I)){let W=o[I],se=W;Array.isArray(W)&&(se=W[1],W=W[0]),h[W]=I,c&&(c[W]=se)}return h}const Ui=ga;function co(o){return o[Xo]||null}function fo(o,c){const h=o[lo]||null;if(!h&&!0===c)throw new Error(`Type ${_n(o)} does not have '\u0275mod' property.`);return h}function ra(o){return Array.isArray(o)&&"object"==typeof o[1]}function aa(o){return Array.isArray(o)&&!0===o[1]}function xo(o){return 0!=(8&o.flags)}function io(o){return 2==(2&o.flags)}function ja(o){return 1==(1&o.flags)}function Ta(o){return null!==o.template}function wo(o){return 0!=(512&o[2])}function vi(o,c){return o.hasOwnProperty(uo)?o[uo]:null}class dr{constructor(c,h,I){this.previousValue=c,this.currentValue=h,this.firstChange=I}isFirstChange(){return this.firstChange}}function hi(){return Xr}function Xr(o){return o.type.prototype.ngOnChanges&&(o.setInput=xi),ii}function ii(){const o=la(this),c=null==o?void 0:o.current;if(c){const h=o.previous;if(h===to)o.previous=c;else for(let I in c)h[I]=c[I];o.current=null,this.ngOnChanges(c)}}function xi(o,c,h,I){const W=la(o)||function(o,c){return o[Ji]=c}(o,{previous:to,current:null}),se=W.current||(W.current={}),xe=W.previous,Se=this.declaredInputs[h],Be=xe[Se];se[Se]=new dr(Be&&Be.currentValue,c,xe===to),o[I]=c}hi.ngInherit=!0;const Ji="__ngSimpleChanges__";function la(o){return o[Ji]||null}let Ra;function La(){return void 0!==Ra?Ra:"undefined"!=typeof document?document:void 0}function Ga(o){return!!o.listen}const Ns={createRenderer:(o,c)=>La()};function wi(o){for(;Array.isArray(o);)o=o[0];return o}function Ea(o,c){return wi(c[o])}function Fa(o,c){return wi(c[o.index])}function Va(o,c){return o.data[c]}function da(o,c){const h=c[o];return ra(h)?h:h[0]}function Ko(o){return 4==(4&o[2])}function fl(o){return 128==(128&o[2])}function Qs(o,c){return null==c?null:o[c]}function Po(o){o[18]=0}function Jl(o,c){o[5]+=c;let h=o,I=o[3];for(;null!==I&&(1===c&&1===h[5]||-1===c&&0===h[5]);)I[5]+=c,h=I,I=I[3]}const Oi={lFrame:Oe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function cu(){return Oi.bindingsEnabled}function Zr(){return Oi.lFrame.lView}function Pa(){return Oi.lFrame.tView}function hl(o){return Oi.lFrame.contextLView=o,o[8]}function Qi(){let o=Ha();for(;null!==o&&64===o.type;)o=o.parent;return o}function Ha(){return Oi.lFrame.currentTNode}function ls(o,c){const h=Oi.lFrame;h.currentTNode=o,h.isParent=c}function To(){return Oi.lFrame.isParent}function Al(){Oi.lFrame.isParent=!1}function Pl(){return Oi.isInCheckNoChangesMode}function tl(o){Oi.isInCheckNoChangesMode=o}function Ul(){return Oi.lFrame.bindingIndex++}function wc(o,c){const h=Oi.lFrame;h.bindingIndex=h.bindingRootIndex=o,O(c)}function O(o){Oi.lFrame.currentDirectiveIndex=o}function U(){return Oi.lFrame.currentQueryIndex}function X(o){Oi.lFrame.currentQueryIndex=o}function fe(o){const c=o[1];return 2===c.type?c.declTNode:1===c.type?o[6]:null}function me(o,c,h){if(h&lr.SkipSelf){let W=c,se=o;for(;!(W=W.parent,null!==W||h&lr.Host||(W=fe(se),null===W||(se=se[15],10&W.type))););if(null===W)return!1;c=W,o=se}const I=Oi.lFrame=Ae();return I.currentTNode=c,I.lView=o,!0}function _e(o){const c=Ae(),h=o[1];Oi.lFrame=c,c.currentTNode=h.firstChild,c.lView=o,c.tView=h,c.contextLView=o,c.bindingIndex=h.bindingStartIndex,c.inI18n=!1}function Ae(){const o=Oi.lFrame,c=null===o?null:o.child;return null===c?Oe(o):c}function Oe(o){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=c),c}function Xe(){const o=Oi.lFrame;return Oi.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const nt=Xe;function dt(){const o=Xe();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function It(){return Oi.lFrame.selectedIndex}function Lt(o){Oi.lFrame.selectedIndex=o}function At(){const o=Oi.lFrame;return Va(o.tView,o.selectedIndex)}function Nn(o,c){for(let h=c.directiveStart,I=c.directiveEnd;h<I;h++){const se=o.data[h].type.prototype,{ngAfterContentInit:xe,ngAfterContentChecked:Se,ngAfterViewInit:Be,ngAfterViewChecked:ct,ngOnDestroy:Ot}=se;xe&&(o.contentHooks||(o.contentHooks=[])).push(-h,xe),Se&&((o.contentHooks||(o.contentHooks=[])).push(h,Se),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(h,Se)),Be&&(o.viewHooks||(o.viewHooks=[])).push(-h,Be),ct&&((o.viewHooks||(o.viewHooks=[])).push(h,ct),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(h,ct)),null!=Ot&&(o.destroyHooks||(o.destroyHooks=[])).push(h,Ot)}}function pr(o,c,h){br(o,c,3,h)}function hr(o,c,h,I){(3&o[2])===h&&br(o,c,h,I)}function Er(o,c){let h=o[2];(3&h)===c&&(h&=2047,h+=1,o[2]=h)}function br(o,c,h,I){const se=null!=I?I:-1,xe=c.length-1;let Se=0;for(let Be=void 0!==I?65535&o[18]:0;Be<xe;Be++)if("number"==typeof c[Be+1]){if(Se=c[Be],null!=I&&Se>=I)break}else c[Be]<0&&(o[18]+=65536),(Se<se||-1==se)&&(oi(o,h,c,Be),o[18]=(4294901760&o[18])+Be+2),Be++}function oi(o,c,h,I){const W=h[I]<0,se=h[I+1],Se=o[W?-h[I]:h[I]];if(W){if(o[2]>>11<o[18]>>16&&(3&o[2])===c){o[2]+=2048;try{se.call(Se)}finally{}}}else try{se.call(Se)}finally{}}class Si{constructor(c,h,I){this.factory=c,this.resolving=!1,this.canSeeViewProviders=h,this.injectImpl=I}}function qi(o,c,h){const I=Ga(o);let W=0;for(;W<h.length;){const se=h[W];if("number"==typeof se){if(0!==se)break;W++;const xe=h[W++],Se=h[W++],Be=h[W++];I?o.setAttribute(c,Se,Be,xe):c.setAttributeNS(xe,Se,Be)}else{const xe=se,Se=h[++W];sa(xe)?I&&o.setProperty(c,xe,Se):I?o.setAttribute(c,xe,Se):c.setAttribute(xe,Se),W++}}return W}function Gi(o){return 3===o||4===o||6===o}function sa(o){return 64===o.charCodeAt(0)}function Wi(o,c){if(null!==c&&0!==c.length)if(null===o||0===o.length)o=c.slice();else{let h=-1;for(let I=0;I<c.length;I++){const W=c[I];"number"==typeof W?h=W:0===h||ua(o,h,W,null,-1===h||2===h?c[++I]:null)}}return o}function ua(o,c,h,I,W){let se=0,xe=o.length;if(-1===c)xe=-1;else for(;se<o.length;){const Se=o[se++];if("number"==typeof Se){if(Se===c){xe=-1;break}if(Se>c){xe=se-1;break}}}for(;se<o.length;){const Se=o[se];if("number"==typeof Se)break;if(Se===h){if(null===I)return void(null!==W&&(o[se+1]=W));if(I===o[se+1])return void(o[se+2]=W)}se++,null!==I&&se++,null!==W&&se++}-1!==xe&&(o.splice(xe,0,c),se=xe+1),o.splice(se++,0,h),null!==I&&o.splice(se++,0,I),null!==W&&o.splice(se++,0,W)}function ka(o){return-1!==o}function Wa(o){return 32767&o}function ao(o,c){let h=function(o){return o>>16}(o),I=c;for(;h>0;)I=I[15],h--;return I}let Ja=!0;function ho(o){const c=Ja;return Ja=o,c}let Ys=0;function Rl(o,c){const h=_u(o,c);if(-1!==h)return h;const I=c[1];I.firstCreatePass&&(o.injectorIndex=c.length,zu(I.data,o),zu(c,null),zu(I.blueprint,null));const W=fu(o,c),se=o.injectorIndex;if(ka(W)){const xe=Wa(W),Se=ao(W,c),Be=Se[1].data;for(let ct=0;ct<8;ct++)c[se+ct]=Se[xe+ct]|Be[xe+ct]}return c[se+8]=W,se}function zu(o,c){o.push(0,0,0,0,0,0,0,0,c)}function _u(o,c){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===c[o.injectorIndex+8]?-1:o.injectorIndex}function fu(o,c){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let h=0,I=null,W=c;for(;null!==W;){const se=W[1],xe=se.type;if(I=2===xe?se.declTNode:1===xe?W[6]:null,null===I)return-1;if(h++,W=W[15],-1!==I.injectorIndex)return I.injectorIndex|h<<16}return-1}function Qo(o,c,h){!function(o,c,h){let I;"string"==typeof h?I=h.charCodeAt(0)||0:h.hasOwnProperty(ul)&&(I=h[ul]),null==I&&(I=h[ul]=Ys++);const W=255&I;c.data[o+(W>>5)]|=1<<W}(o,c,h)}function ic(o,c,h){if(h&lr.Optional)return o;nr(c,"NodeInjector")}function dl(o,c,h,I){if(h&lr.Optional&&void 0===I&&(I=null),0==(h&(lr.Self|lr.Host))){const W=o[9],se=wa(void 0);try{return W?W.get(c,I,h&lr.Optional):Io(c,I,h&lr.Optional)}finally{wa(se)}}return ic(I,c,h)}function ac(o,c,h,I=lr.Default,W){if(null!==o){const se=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const c=o.hasOwnProperty(ul)?o[ul]:void 0;return"number"==typeof c?c>=0?255&c:Vs:c}(h);if("function"==typeof se){if(!me(c,o,I))return I&lr.Host?ic(W,h,I):dl(c,h,I,W);try{const xe=se(I);if(null!=xe||I&lr.Optional)return xe;nr(h)}finally{nt()}}else if("number"==typeof se){let xe=null,Se=_u(o,c),Be=-1,ct=I&lr.Host?c[16][6]:null;for((-1===Se||I&lr.SkipSelf)&&(Be=-1===Se?fu(o,c):c[Se+8],-1!==Be&&oc(I,!1)?(xe=c[1],Se=Wa(Be),c=ao(Be,c)):Se=-1);-1!==Se;){const Ot=c[1];if(nf(se,Se,Ot.data)){const en=Us(Se,c,h,xe,I,ct);if(en!==Ao)return en}Be=c[Se+8],-1!==Be&&oc(I,c[1].data[Se+8]===ct)&&nf(se,Se,c)?(xe=Ot,Se=Wa(Be),c=ao(Be,c)):Se=-1}}}return dl(c,h,I,W)}const Ao={};function Vs(){return new sc(Qi(),Zr())}function Us(o,c,h,I,W,se){const xe=c[1],Se=xe.data[o+8],Ot=Bu(Se,xe,h,null==I?io(Se)&&Ja:I!=xe&&0!=(3&Se.type),W&lr.Host&&se===Se);return null!==Ot?Tc(c,xe,Ot,Se):Ao}function Bu(o,c,h,I,W){const se=o.providerIndexes,xe=c.data,Se=1048575&se,Be=o.directiveStart,Ot=se>>20,bn=W?Se+Ot:o.directiveEnd;for(let Sn=I?Se:Se+Ot;Sn<bn;Sn++){const tr=xe[Sn];if(Sn<Be&&h===tr||Sn>=Be&&tr.type===h)return Sn}if(W){const Sn=xe[Be];if(Sn&&Ta(Sn)&&Sn.type===h)return Be}return null}function Tc(o,c,h,I){let W=o[h];const se=c.data;if(function(o){return o instanceof Si}(W)){const xe=W;xe.resolving&&function(o,c){throw new sr("200",`Circular dependency in DI detected for ${o}`)}(Or(se[h]));const Se=ho(xe.canSeeViewProviders);xe.resolving=!0;const Be=xe.injectImpl?wa(xe.injectImpl):null;me(o,I,lr.Default);try{W=o[h]=xe.factory(void 0,se,o,I),c.firstCreatePass&&h>=I.directiveStart&&function(o,c,h){const{ngOnChanges:I,ngOnInit:W,ngDoCheck:se}=c.type.prototype;if(I){const xe=Xr(c);(h.preOrderHooks||(h.preOrderHooks=[])).push(o,xe),(h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(o,xe)}W&&(h.preOrderHooks||(h.preOrderHooks=[])).push(0-o,W),se&&((h.preOrderHooks||(h.preOrderHooks=[])).push(o,se),(h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(o,se))}(h,se[h],c)}finally{null!==Be&&wa(Be),ho(Se),xe.resolving=!1,nt()}}return W}function nf(o,c,h){return!!(h[c+(o>>5)]&1<<o)}function oc(o,c){return!(o&lr.Self||o&lr.Host&&c)}class sc{constructor(c,h){this._tNode=c,this._lView=h}get(c,h,I){return ac(this._tNode,this._lView,c,I,h)}}function xs(o){return Ya(()=>{const c=o.prototype.constructor,h=c[uo]||jf(c),I=Object.prototype;let W=Object.getPrototypeOf(o.prototype).constructor;for(;W&&W!==I;){const se=W[uo]||jf(W);if(se&&se!==h)return se;W=Object.getPrototypeOf(W)}return se=>new se})}function jf(o){return On(o)?()=>{const c=jf(Fn(o));return c&&c()}:vi(o)}const rf="__parameters__";function lc(o,c,h){return Ya(()=>{const I=function(o){return function(...h){if(o){const I=o(...h);for(const W in I)this[W]=I[W]}}}(c);function W(...se){if(this instanceof W)return I.apply(this,se),this;const xe=new W(...se);return Se.annotation=xe,Se;function Se(Be,ct,Ot){const en=Be.hasOwnProperty(rf)?Be[rf]:Object.defineProperty(Be,rf,{value:[]})[rf];for(;en.length<=Ot;)en.push(null);return(en[Ot]=en[Ot]||[]).push(xe),Be}}return h&&(W.prototype=Object.create(h.prototype)),W.prototype.ngMetadataName=o,W.annotationCls=W,W})}class xa{constructor(c,h){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof h?this.__NG_ELEMENT_ID__=h:void 0!==h&&(this.\u0275prov=Zn({token:this,providedIn:h.providedIn||"root",factory:h.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ml=new xa("AnalyzeForEntryComponents");function tu(o,c){void 0===c&&(c=o);for(let h=0;h<o.length;h++){let I=o[h];Array.isArray(I)?(c===o&&(c=o.slice(0,h)),tu(I,c)):c!==o&&c.push(I)}return c}function wu(o,c){o.forEach(h=>Array.isArray(h)?wu(h,c):c(h))}function m0(o,c,h){c>=o.length?o.push(h):o.splice(c,0,h)}function Bh(o,c){return c>=o.length-1?o.pop():o.splice(c,1)[0]}function Vf(o,c){const h=[];for(let I=0;I<o;I++)h.push(c);return h}function vl(o,c,h){let I=ju(o,c);return I>=0?o[1|I]=h:(I=~I,function(o,c,h,I){let W=o.length;if(W==c)o.push(h,I);else if(1===W)o.push(I,o[0]),o[0]=h;else{for(W--,o.push(o[W-1],o[W]);W>c;)o[W]=o[W-2],W--;o[c]=h,o[c+1]=I}}(o,I,c,h)),I}function jh(o,c){const h=ju(o,c);if(h>=0)return o[1|h]}function ju(o,c){return function(o,c,h){let I=0,W=o.length>>h;for(;W!==I;){const se=I+(W-I>>1),xe=o[se<<h];if(c===xe)return se<<h;xe>c?W=se:I=se+1}return~(W<<h)}(o,c,1)}const qf={},Gf="__NG_DI_FLAG__",lf="ngTempTokenPath",Im=/\n/gm,w0="__source",T0=hn({provide:String,useValue:hn});let uf;function Ec(o){const c=uf;return uf=o,c}function Pm(o,c=lr.Default){if(void 0===uf)throw new Error("inject() must be called from an injection context");return null===uf?Io(o,void 0,c):uf.get(o,c&lr.Optional?null:void 0,c)}function Ki(o,c=lr.Default){return(bi||Pm)(Fn(o),c)}function Hd(o){const c=[];for(let h=0;h<o.length;h++){const I=Fn(o[h]);if(Array.isArray(I)){if(0===I.length)throw new Error("Arguments array must have arguments.");let W,se=lr.Default;for(let xe=0;xe<I.length;xe++){const Se=I[xe],Be=cf(Se);"number"==typeof Be?-1===Be?W=Se.token:se|=Be:W=Se}c.push(Ki(W,se))}else c.push(Ki(I))}return c}function Wf(o,c){return o[Gf]=c,o.prototype[Gf]=c,o}function cf(o){return o[Gf]}const Vu=Wf(lc("Inject",o=>({token:o})),-1),Os=Wf(lc("Optional"),8),ff=Wf(lc("SkipSelf"),4);let Zf,Dc;function hf(o){var c;return(null==(c=function(){if(void 0===Zf&&(Zf=null,Bi.trustedTypes))try{Zf=Bi.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Zf}())?void 0:c.createHTML(o))||o}function Xd(o){var c;return(null==(c=function(){if(void 0===Dc&&(Dc=null,Bi.trustedTypes))try{Dc=Bi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Dc}())?void 0:c.createHTML(o))||o}class $d{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function uc(o){return o instanceof $d?o.changingThisBreaksApplicationSecurity:o}class Qm{constructor(c){this.inertDocumentHelper=c}getInertBodyElement(c){c="<body><remove></remove>"+c;try{const h=(new window.DOMParser).parseFromString(hf(c),"text/html").body;return null===h?this.inertDocumentHelper.getInertBodyElement(c):(h.removeChild(h.firstChild),h)}catch(h){return null}}}class C0{constructor(c){if(this.defaultDoc=c,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const h=this.inertDocument.createElement("html");this.inertDocument.appendChild(h);const I=this.inertDocument.createElement("body");h.appendChild(I)}}getInertBodyElement(c){const h=this.inertDocument.createElement("template");if("content"in h)return h.innerHTML=hf(c),h;const I=this.inertDocument.createElement("body");return I.innerHTML=hf(c),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(I),I}stripCustomNsAttrs(c){const h=c.attributes;for(let W=h.length-1;0<W;W--){const xe=h.item(W).name;("xmlns:ns1"===xe||0===xe.indexOf("ns1:"))&&c.removeAttribute(xe)}let I=c.firstChild;for(;I;)I.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(I),I=I.nextSibling}}const Kf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Fl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Uu(o){return(o=String(o)).match(Kf)||o.match(Fl)?o:"unsafe:"+o}function ql(o){const c={};for(const h of o.split(","))c[h]=!0;return c}function cc(...o){const c={};for(const h of o)for(const I in h)h.hasOwnProperty(I)&&(c[I]=!0);return c}const yl=ql("area,br,col,hr,img,wbr"),Kd=ql("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Qd=ql("rp,rt"),Qf=cc(yl,cc(Kd,ql("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),cc(Qd,ql("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),cc(Qd,Kd)),ep=ql("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qh=ql("srcset"),tp=cc(ep,qh,ql("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ql("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),I0=ql("script,style,template");class tv{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(c){let h=c.firstChild,I=!0;for(;h;)if(h.nodeType===Node.ELEMENT_NODE?I=this.startElement(h):h.nodeType===Node.TEXT_NODE?this.chars(h.nodeValue):this.sanitizedSomething=!0,I&&h.firstChild)h=h.firstChild;else for(;h;){h.nodeType===Node.ELEMENT_NODE&&this.endElement(h);let W=this.checkClobberedElement(h,h.nextSibling);if(W){h=W;break}h=this.checkClobberedElement(h,h.parentNode)}return this.buf.join("")}startElement(c){const h=c.nodeName.toLowerCase();if(!Qf.hasOwnProperty(h))return this.sanitizedSomething=!0,!I0.hasOwnProperty(h);this.buf.push("<"),this.buf.push(h);const I=c.attributes;for(let W=0;W<I.length;W++){const se=I.item(W),xe=se.name,Se=xe.toLowerCase();if(!tp.hasOwnProperty(Se)){this.sanitizedSomething=!0;continue}let Be=se.value;ep[Se]&&(Be=Uu(Be)),qh[Se]&&(o=Be,Be=(o=String(o)).split(",").map(c=>Uu(c.trim())).join(", ")),this.buf.push(" ",xe,'="',np(Be),'"')}var o;return this.buf.push(">"),!0}endElement(c){const h=c.nodeName.toLowerCase();Qf.hasOwnProperty(h)&&!yl.hasOwnProperty(h)&&(this.buf.push("</"),this.buf.push(h),this.buf.push(">"))}chars(c){this.buf.push(np(c))}checkClobberedElement(c,h){if(h&&(c.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${c.outerHTML}`);return h}}const L0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P0=/([^\#-~ |!])/g;function np(o){return o.replace(/&/g,"&amp;").replace(L0,function(c){return"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";"}).replace(P0,function(c){return"&#"+c.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let th;function rp(o){return"content"in o&&function(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var ks=(()=>((ks=ks||{})[ks.NONE=0]="NONE",ks[ks.HTML=1]="HTML",ks[ks.STYLE=2]="STYLE",ks[ks.SCRIPT=3]="SCRIPT",ks[ks.URL=4]="URL",ks[ks.RESOURCE_URL=5]="RESOURCE_URL",ks))();function Lc(o){const c=function(){const o=Zr();return o&&o[12]}();return c?Xd(c.sanitize(ks.HTML,o)||""):function(o,c){const h=function(o){return o instanceof $d&&o.getTypeName()||null}(o);if(null!=h&&h!==c){if("ResourceURL"===h&&"URL"===c)return!0;throw new Error(`Required a safe ${c}, got a ${h} (see https://g.co/ng/security#xss)`)}return h===c}(o,"HTML")?Xd(uc(o)):function(o,c){let h=null;try{th=th||function(o){const c=new C0(o);return function(){try{return!!(new window.DOMParser).parseFromString(hf(""),"text/html")}catch(o){return!1}}()?new Qm(c):c}(o);let I=c?String(c):"";h=th.getInertBodyElement(I);let W=5,se=I;do{if(0===W)throw new Error("Failed to sanitize html because the input is unstable");W--,I=se,se=h.innerHTML,h=th.getInertBodyElement(I)}while(I!==se);return hf((new tv).sanitizeChildren(rp(h)||h))}finally{if(h){const I=rp(h)||h;for(;I.firstChild;)I.removeChild(I.firstChild)}}}(La(),mr(o))}const z0="__ngContext__";function xl(o,c){o[z0]=c}function mf(o){const c=function(o){return o[z0]||null}(o);return c?Array.isArray(c)?c:c.lView:null}function sp(o){return o.ngOriginalError}function B0(o,...c){o.error(...c)}class Oc{constructor(){this._console=console}handleError(c){const h=this._findOriginalError(c),I=(o=c)&&o.ngErrorLogger||B0;var o;I(this._console,"ERROR",c),h&&I(this._console,"ORIGINAL ERROR",h)}_findOriginalError(c){let h=c&&sp(c);for(;h&&sp(h);)h=sp(h);return h||null}}const cp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Bi))();function bl(o){return o instanceof Function?o():o}var _l=(()=>((_l=_l||{})[_l.Important=1]="Important",_l[_l.DashCase=2]="DashCase",_l))();function oh(o,c){return undefined(o,c)}function wf(o){const c=o[3];return aa(c)?c[3]:c}function fs(o){return dp(o[13])}function Au(o){return dp(o[4])}function dp(o){for(;null!==o&&!aa(o);)o=o[4];return o}function z(o,c,h,I,W){if(null!=I){let se,xe=!1;aa(I)?se=I:ra(I)&&(xe=!0,I=I[0]);const Se=wi(I);0===o&&null!==h?null==W?Cr(c,h,Se):or(c,h,Se,W||null,!0):1===o&&null!==h?or(c,h,Se,W||null,!0):2===o?function(o,c,h){const I=Qr(o,c);I&&function(o,c,h,I){Ga(o)?o.removeChild(c,h,I):c.removeChild(h)}(o,I,c,h)}(c,Se,xe):3===o&&c.destroyNode(Se),null!=se&&function(o,c,h,I,W){const se=h[7];se!==wi(h)&&z(c,o,I,se,W);for(let Se=10;Se<h.length;Se++){const Be=h[Se];Qa(Be[1],Be,o,c,I,se)}}(c,o,se,h,W)}}function Me(o,c,h){return Ga(o)?o.createElement(c,h):null===h?o.createElement(c):o.createElementNS(h,c)}function ln(o,c){const h=o[9],I=h.indexOf(c),W=c[3];1024&c[2]&&(c[2]&=-1025,Jl(W,-1)),h.splice(I,1)}function tn(o,c){if(o.length<=10)return;const h=10+c,I=o[h];if(I){const W=I[17];null!==W&&W!==o&&ln(W,I),c>0&&(o[h-1][4]=I[4]);const se=Bh(o,10+c);!function(o,c){Qa(o,c,c[11],2,null,null),c[0]=null,c[6]=null}(I[1],I);const xe=se[19];null!==xe&&xe.detachView(se[1]),I[3]=null,I[4]=null,I[2]&=-129}return I}function vn(o,c){if(!(256&c[2])){const h=c[11];Ga(h)&&h.destroyNode&&Qa(o,c,h,3,null,null),function(o){let c=o[13];if(!c)return In(o[1],o);for(;c;){let h=null;if(ra(c))h=c[13];else{const I=c[10];I&&(h=I)}if(!h){for(;c&&!c[4]&&c!==o;)ra(c)&&In(c[1],c),c=c[3];null===c&&(c=o),ra(c)&&In(c[1],c),h=c&&c[4]}c=h}}(c)}}function In(o,c){if(!(256&c[2])){c[2]&=-129,c[2]|=256,function(o,c){let h;if(null!=o&&null!=(h=o.destroyHooks))for(let I=0;I<h.length;I+=2){const W=c[h[I]];if(!(W instanceof Si)){const se=h[I+1];if(Array.isArray(se))for(let xe=0;xe<se.length;xe+=2){const Se=W[se[xe]],Be=se[xe+1];try{Be.call(Se)}finally{}}else try{se.call(W)}finally{}}}}(o,c),function(o,c){const h=o.cleanup,I=c[7];let W=-1;if(null!==h)for(let se=0;se<h.length-1;se+=2)if("string"==typeof h[se]){const xe=h[se+1],Se="function"==typeof xe?xe(c):wi(c[xe]),Be=I[W=h[se+2]],ct=h[se+3];"boolean"==typeof ct?Se.removeEventListener(h[se],Be,ct):ct>=0?I[W=ct]():I[W=-ct].unsubscribe(),se+=2}else{const xe=I[W=h[se+1]];h[se].call(xe)}if(null!==I){for(let se=W+1;se<I.length;se++)I[se]();c[7]=null}}(o,c),1===c[1].type&&Ga(c[11])&&c[11].destroy();const h=c[17];if(null!==h&&aa(c[3])){h!==c[3]&&ln(h,c);const I=c[19];null!==I&&I.detachView(o)}}}function Kn(o,c,h){return function(o,c,h){let I=c;for(;null!==I&&40&I.type;)I=(c=I).parent;if(null===I)return h[0];if(2&I.flags){const W=o.data[I.directiveStart].encapsulation;if(W===Bo.None||W===Bo.Emulated)return null}return Fa(I,h)}(o,c.parent,h)}function or(o,c,h,I,W){Ga(o)?o.insertBefore(c,h,I,W):c.insertBefore(h,I,W)}function Cr(o,c,h){Ga(o)?o.appendChild(c,h):c.appendChild(h)}function Fr(o,c,h,I,W){null!==I?or(o,c,h,I,W):Cr(o,c,h)}function Qr(o,c){return Ga(o)?o.parentNode(c):c.parentNode}function ki(o,c,h){return mi(o,c,h)}let mi=function(o,c,h){return 40&o.type?Fa(o,h):null};function Mi(o,c,h,I){const W=Kn(o,I,c),se=c[11],Se=ki(I.parent||c[6],I,c);if(null!=W)if(Array.isArray(h))for(let Be=0;Be<h.length;Be++)Fr(se,W,h[Be],Se,!1);else Fr(se,W,h,Se,!1)}function Ca(o,c){if(null!==c){const h=c.type;if(3&h)return Fa(c,o);if(4&h)return za(-1,o[c.index]);if(8&h){const I=c.child;if(null!==I)return Ca(o,I);{const W=o[c.index];return aa(W)?za(-1,W):wi(W)}}if(32&h)return oh(c,o)()||wi(o[c.index]);{const I=Sa(o,c);return null!==I?Array.isArray(I)?I[0]:Ca(wf(o[16]),I):Ca(o,c.next)}}return null}function Sa(o,c){return null!==c?o[16][6].projection[c.projection]:null}function za(o,c){const h=10+o+1;if(h<c.length){const I=c[h],W=I[1].firstChild;if(null!==W)return Ca(I,W)}return c[7]}function Da(o,c,h,I,W,se,xe){for(;null!=h;){const Se=I[h.index],Be=h.type;if(xe&&0===c&&(Se&&xl(wi(Se),I),h.flags|=4),64!=(64&h.flags))if(8&Be)Da(o,c,h.child,I,W,se,!1),z(c,o,W,Se,se);else if(32&Be){const ct=oh(h,I);let Ot;for(;Ot=ct();)z(c,o,W,Ot,se);z(c,o,W,Se,se)}else 16&Be?ko(o,c,I,h,W,se):z(c,o,W,Se,se);h=xe?h.projectionNext:h.next}}function Qa(o,c,h,I,W,se){Da(h,I,o.firstChild,c,W,se,!1)}function ko(o,c,h,I,W,se){const xe=h[16],Be=xe[6].projection[I.projection];if(Array.isArray(Be))for(let ct=0;ct<Be.length;ct++)z(c,o,W,Be[ct],se);else Da(o,c,Be,xe[3],W,se,!0)}function Eo(o,c,h){Ga(o)?o.setAttribute(c,"style",h):c.style.cssText=h}function Es(o,c,h){Ga(o)?""===h?o.removeAttribute(c,"class"):o.setAttribute(c,"class",h):c.className=h}function ws(o,c,h){let I=o.length;for(;;){const W=o.indexOf(c,h);if(-1===W)return W;if(0===W||o.charCodeAt(W-1)<=32){const se=c.length;if(W+se===I||o.charCodeAt(W+se)<=32)return W}h=W+1}}const Zs="ng-template";function Xs(o,c,h){let I=0;for(;I<o.length;){let W=o[I++];if(h&&"class"===W){if(W=o[I],-1!==ws(W.toLowerCase(),c,0))return!0}else if(1===W){for(;I<o.length&&"string"==typeof(W=o[I++]);)if(W.toLowerCase()===c)return!0;return!1}}return!1}function ts(o){return 4===o.type&&o.value!==Zs}function Fs(o,c,h){return c===(4!==o.type||h?o.value:Zs)}function ns(o,c,h){let I=4;const W=o.attrs||[],se=function(o){for(let c=0;c<o.length;c++)if(Gi(o[c]))return c;return o.length}(W);let xe=!1;for(let Se=0;Se<c.length;Se++){const Be=c[Se];if("number"!=typeof Be){if(!xe)if(4&I){if(I=2|1&I,""!==Be&&!Fs(o,Be,h)||""===Be&&1===c.length){if(mo(I))return!1;xe=!0}}else{const ct=8&I?Be:c[++Se];if(8&I&&null!==o.attrs){if(!Xs(o.attrs,ct,h)){if(mo(I))return!1;xe=!0}continue}const en=ba(8&I?"class":Be,W,ts(o),h);if(-1===en){if(mo(I))return!1;xe=!0;continue}if(""!==ct){let bn;bn=en>se?"":W[en+1].toLowerCase();const Sn=8&I?bn:null;if(Sn&&-1!==ws(Sn,ct,0)||2&I&&ct!==bn){if(mo(I))return!1;xe=!0}}}}else{if(!xe&&!mo(I)&&!mo(Be))return!1;if(xe&&mo(Be))continue;xe=!1,I=Be|1&I}}return mo(I)||xe}function mo(o){return 0==(1&o)}function ba(o,c,h,I){if(null===c)return-1;let W=0;if(I||!h){let se=!1;for(;W<c.length;){const xe=c[W];if(xe===o)return W;if(3===xe||6===xe)se=!0;else{if(1===xe||2===xe){let Se=c[++W];for(;"string"==typeof Se;)Se=c[++W];continue}if(4===xe)break;if(0===xe){W+=4;continue}}W+=se?1:2}return-1}return function(o,c){let h=o.indexOf(4);if(h>-1)for(h++;h<o.length;){const I=o[h];if("number"==typeof I)return-1;if(I===c)return h;h++}return-1}(c,o)}function Na(o,c,h=!1){for(let I=0;I<c.length;I++)if(ns(o,c[I],h))return!0;return!1}function Do(o,c){e:for(let h=0;h<c.length;h++){const I=c[h];if(o.length===I.length){for(let W=0;W<o.length;W++)if(o[W]!==I[W])continue e;return!0}}return!1}function qa(o,c){return o?":not("+c.trim()+")":c}function Ho(o){let c=o[0],h=1,I=2,W="",se=!1;for(;h<o.length;){let xe=o[h];if("string"==typeof xe)if(2&I){const Se=o[++h];W+="["+xe+(Se.length>0?'="'+Se+'"':"")+"]"}else 8&I?W+="."+xe:4&I&&(W+=" "+xe);else""!==W&&!mo(xe)&&(c+=qa(se,W),W=""),I=xe,se=se||!mo(I);h++}return""!==W&&(c+=qa(se,W)),c}const $i={};function Ia(o){ku(Pa(),Zr(),It()+o,Pl())}function ku(o,c,h,I){if(!I)if(3==(3&c[2])){const se=o.preOrderCheckHooks;null!==se&&pr(c,se,h)}else{const se=o.preOrderHooks;null!==se&&hr(c,se,0,h)}Lt(h)}function zl(o,c){return o<<17|c<<2}function Cs(o){return o>>17&32767}function hc(o){return 2|o}function iu(o){return(131068&o)>>2}function Hu(o,c){return-131069&o|c<<2}function Tf(o){return 1|o}function mh(o,c){const h=o.contentQueries;if(null!==h)for(let I=0;I<h.length;I+=2){const W=h[I],se=h[I+1];if(-1!==se){const xe=o.data[se];X(W),xe.contentQueries(2,c[se],se)}}}function Cf(o,c,h,I,W,se,xe,Se,Be,ct){const Ot=c.blueprint.slice();return Ot[0]=W,Ot[2]=140|I,Po(Ot),Ot[3]=Ot[15]=o,Ot[8]=h,Ot[10]=xe||o&&o[10],Ot[11]=Se||o&&o[11],Ot[12]=Be||o&&o[12]||null,Ot[9]=ct||o&&o[9]||null,Ot[6]=se,Ot[16]=2==c.type?o[16]:Ot,Ot}function Iu(o,c,h,I,W){let se=o.data[c];if(null===se)se=function(o,c,h,I,W){const se=Ha(),xe=To(),Be=o.data[c]=function(o,c,h,I,W,se){return{type:h,index:I,insertBeforeIndex:null,injectorIndex:c?c.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:W,attrs:se,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,xe?se:se&&se.parent,h,c,I,W);return null===o.firstChild&&(o.firstChild=Be),null!==se&&(xe?null==se.child&&null!==Be.parent&&(se.child=Be):null===se.next&&(se.next=Be)),Be}(o,c,h,I,W),Oi.lFrame.inI18n&&(se.flags|=64);else if(64&se.type){se.type=h,se.value=I,se.attrs=W;const xe=function(){const o=Oi.lFrame,c=o.currentTNode;return o.isParent?c:c.parent}();se.injectorIndex=null===xe?-1:xe.injectorIndex}return ls(se,!0),se}function Vc(o,c,h,I){if(0===h)return-1;const W=c.length;for(let se=0;se<h;se++)c.push(I),o.blueprint.push(I),o.data.push(null);return W}function Sf(o,c,h){_e(c);try{const I=o.viewQuery;null!==I&&kv(1,I,h);const W=o.template;null!==W&&Cl(o,c,W,1,h),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&mh(o,c),o.staticViewQueries&&kv(2,o.viewQuery,h);const se=o.components;null!==se&&function(o,c){for(let h=0;h<c.length;h++)$5(o,c[h])}(c,se)}catch(I){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),I}finally{c[2]&=-5,dt()}}function Uc(o,c,h,I){const W=c[2];if(256==(256&W))return;_e(c);const se=Pl();try{Po(c),function(o){Oi.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==h&&Cl(o,c,h,2,I);const xe=3==(3&W);if(!se)if(xe){const ct=o.preOrderCheckHooks;null!==ct&&pr(c,ct,null)}else{const ct=o.preOrderHooks;null!==ct&&hr(c,ct,0,null),Er(c,0)}if(function(o){for(let c=fs(o);null!==c;c=Au(c)){if(!c[2])continue;const h=c[9];for(let I=0;I<h.length;I++){const W=h[I],se=W[3];0==(1024&W[2])&&Jl(se,1),W[2]|=1024}}}(c),function(o){for(let c=fs(o);null!==c;c=Au(c))for(let h=10;h<c.length;h++){const I=c[h],W=I[1];fl(I)&&Uc(W,I,W.template,I[8])}}(c),null!==o.contentQueries&&mh(o,c),!se)if(xe){const ct=o.contentCheckHooks;null!==ct&&pr(c,ct)}else{const ct=o.contentHooks;null!==ct&&hr(c,ct,1),Er(c,1)}!function(o,c){const h=o.hostBindingOpCodes;if(null!==h)try{for(let I=0;I<h.length;I++){const W=h[I];if(W<0)Lt(~W);else{const se=W,xe=h[++I],Se=h[++I];wc(xe,se),Se(2,c[se])}}}finally{Lt(-1)}}(o,c);const Se=o.components;null!==Se&&function(o,c){for(let h=0;h<c.length;h++)_h(o,c[h])}(c,Se);const Be=o.viewQuery;if(null!==Be&&kv(2,Be,I),!se)if(xe){const ct=o.viewCheckHooks;null!==ct&&pr(c,ct)}else{const ct=o.viewHooks;null!==ct&&hr(c,ct,2),Er(c,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),se||(c[2]&=-73),1024&c[2]&&(c[2]&=-1025,Jl(c[3],-1))}finally{dt()}}function $0(o,c,h,I){const W=c[10],se=!Pl(),xe=Ko(c);try{se&&!xe&&W.begin&&W.begin(),xe&&Sf(o,c,I),Uc(o,c,h,I)}finally{se&&!xe&&W.end&&W.end()}}function Cl(o,c,h,I,W){const se=It(),xe=2&I;try{Lt(-1),xe&&c.length>20&&ku(o,c,20,Pl()),h(I,W)}finally{Lt(se)}}function td(o,c,h){!cu()||(function(o,c,h,I){const W=h.directiveStart,se=h.directiveEnd;o.firstCreatePass||Rl(h,c),xl(I,c);const xe=h.initialInputs;for(let Se=W;Se<se;Se++){const Be=o.data[Se],ct=Ta(Be);ct&&bv(c,h,Be);const Ot=Tc(c,o,Se,h);xl(Ot,c),null!==xe&&_v(0,Se-W,Ot,Be,0,xe),ct&&(da(h.index,c)[8]=Ot)}}(o,c,h,Fa(h,c)),128==(128&h.flags)&&function(o,c,h){const I=h.directiveStart,W=h.directiveEnd,xe=h.index,Se=Oi.lFrame.currentDirectiveIndex;try{Lt(xe);for(let Be=I;Be<W;Be++){const ct=o.data[Be],Ot=c[Be];O(Be),(null!==ct.hostBindings||0!==ct.hostVars||null!==ct.hostAttrs)&&If(ct,Ot)}}finally{Lt(-1),O(Se)}}(o,c,h))}function au(o,c,h=Fa){const I=c.localNames;if(null!==I){let W=c.index+1;for(let se=0;se<I.length;se+=2){const xe=I[se+1],Se=-1===xe?h(c,o):o[xe];o[W++]=Se}}}function J0(o){const c=o.tView;return null===c||c.incompleteFirstPass?o.tView=Df(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):c}function Df(o,c,h,I,W,se,xe,Se,Be,ct){const Ot=20+I,en=Ot+W,bn=function(o,c){const h=[];for(let I=0;I<c;I++)h.push(I<o?null:$i);return h}(Ot,en),Sn="function"==typeof ct?ct():ct;return bn[1]={type:o,blueprint:bn,template:h,queries:null,viewQuery:Se,declTNode:c,data:bn.slice().fill(null,Ot),bindingStartIndex:Ot,expandoStartIndex:en,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof se?se():se,pipeRegistry:"function"==typeof xe?xe():xe,firstChild:null,schemas:Be,consts:Sn,incompleteFirstPass:!1}}function Wc(o,c,h,I){const W=px(c);null===h?W.push(I):(W.push(h),o.firstCreatePass&&gx(o).push(I,W.length-1))}function wp(o,c,h){for(let I in o)if(o.hasOwnProperty(I)){const W=o[I];(h=null===h?{}:h).hasOwnProperty(I)?h[I].push(c,W):h[I]=[c,W]}return h}function xh(o,c,h,I){let W=!1;if(cu()){const se=function(o,c,h){const I=o.directiveRegistry;let W=null;if(I)for(let se=0;se<I.length;se++){const xe=I[se];Na(h,xe.selectors,!1)&&(W||(W=[]),Qo(Rl(h,c),o,xe.type),Ta(xe)?(bh(o,h),W.unshift(xe)):W.push(xe))}return W}(o,c,h),xe=null===I?null:{"":-1};if(null!==se){W=!0,og(h,o.data.length,se.length);for(let Ot=0;Ot<se.length;Ot++){const en=se[Ot];en.providersResolver&&en.providersResolver(en)}let Se=!1,Be=!1,ct=Vc(o,c,se.length,null);for(let Ot=0;Ot<se.length;Ot++){const en=se[Ot];h.mergedAttrs=Wi(h.mergedAttrs,en.hostAttrs),sg(o,h,c,ct,en),ag(ct,en,xe),null!==en.contentQueries&&(h.flags|=8),(null!==en.hostBindings||null!==en.hostAttrs||0!==en.hostVars)&&(h.flags|=128);const bn=en.type.prototype;!Se&&(bn.ngOnChanges||bn.ngOnInit||bn.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(h.index),Se=!0),!Be&&(bn.ngOnChanges||bn.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(h.index),Be=!0),ct++}!function(o,c){const I=c.directiveEnd,W=o.data,se=c.attrs,xe=[];let Se=null,Be=null;for(let ct=c.directiveStart;ct<I;ct++){const Ot=W[ct],en=Ot.inputs,bn=null===se||ts(c)?null:wv(en,se);xe.push(bn),Se=wp(en,ct,Se),Be=wp(Ot.outputs,ct,Be)}null!==Se&&(Se.hasOwnProperty("class")&&(c.flags|=16),Se.hasOwnProperty("style")&&(c.flags|=32)),c.initialInputs=xe,c.inputs=Se,c.outputs=Be}(o,h)}xe&&function(o,c,h){if(c){const I=o.localNames=[];for(let W=0;W<c.length;W+=2){const se=h[c[W+1]];if(null==se)throw new sr("301",`Export of name '${c[W+1]}' not found!`);I.push(c[W],se)}}}(h,I,xe)}return h.mergedAttrs=Wi(h.mergedAttrs,h.attrs),W}function Mp(o,c,h,I,W,se){const xe=se.hostBindings;if(xe){let Se=o.hostBindingOpCodes;null===Se&&(Se=o.hostBindingOpCodes=[]);const Be=~c.index;(function(o){let c=o.length;for(;c>0;){const h=o[--c];if("number"==typeof h&&h<0)return h}return 0})(Se)!=Be&&Se.push(Be),Se.push(I,W,xe)}}function If(o,c){null!==o.hostBindings&&o.hostBindings(1,c)}function bh(o,c){c.flags|=2,(o.components||(o.components=[])).push(c.index)}function ag(o,c,h){if(h){if(c.exportAs)for(let I=0;I<c.exportAs.length;I++)h[c.exportAs[I]]=o;Ta(c)&&(h[""]=o)}}function og(o,c,h){o.flags|=1,o.directiveStart=c,o.directiveEnd=c+h,o.providerIndexes=c}function sg(o,c,h,I,W){o.data[I]=W;const se=W.factory||(W.factory=vi(W.type)),xe=new Si(se,Ta(W),null);o.blueprint[I]=xe,h[I]=xe,Mp(o,c,0,I,Vc(o,h,W.hostVars,$i),W)}function bv(o,c,h){const I=Fa(c,o),W=J0(h),se=o[10],xe=ug(o,Cf(o,W,null,h.onPush?64:16,I,c,se,se.createRenderer(I,h),null,null));o[c.index]=xe}function Lu(o,c,h,I,W,se){const xe=Fa(o,c);!function(o,c,h,I,W,se,xe){if(null==se)Ga(o)?o.removeAttribute(c,W,h):c.removeAttribute(W);else{const Se=null==xe?mr(se):xe(se,I||"",W);Ga(o)?o.setAttribute(c,W,Se,h):h?c.setAttributeNS(h,W,Se):c.setAttribute(W,Se)}}(c[11],xe,se,o.value,h,I,W)}function _v(o,c,h,I,W,se){const xe=se[c];if(null!==xe){const Se=I.setInput;for(let Be=0;Be<xe.length;){const ct=xe[Be++],Ot=xe[Be++],en=xe[Be++];null!==Se?I.setInput(h,en,ct,Ot):h[Ot]=en}}}function wv(o,c){let h=null,I=0;for(;I<c.length;){const W=c[I];if(0!==W)if(5!==W){if("number"==typeof W)break;o.hasOwnProperty(W)&&(null===h&&(h=[]),h.push(W,o[W],c[I+1])),I+=2}else I+=2;else I+=4}return h}function du(o,c,h,I){return new Array(o,!0,!1,c,null,0,I,h,null,null)}function _h(o,c){const h=da(c,o);if(fl(h)){const I=h[1];80&h[2]?Uc(I,h,I.template,h[8]):h[5]>0&&id(h)}}function id(o){for(let I=fs(o);null!==I;I=Au(I))for(let W=10;W<I.length;W++){const se=I[W];if(1024&se[2]){const xe=se[1];Uc(xe,se,xe.template,se[8])}else se[5]>0&&id(se)}const h=o[1].components;if(null!==h)for(let I=0;I<h.length;I++){const W=da(h[I],o);fl(W)&&W[5]>0&&id(W)}}function $5(o,c){const h=da(c,o),I=h[1];(function(o,c){for(let h=c.length;h<o.blueprint.length;h++)c.push(o.blueprint[h])})(I,h),Sf(I,h,h[8])}function ug(o,c){return o[13]?o[14][4]=c:o[13]=c,o[14]=c,c}function Tv(o){for(;o;){o[2]|=64;const c=wf(o);if(wo(o)&&!c)return o;o=c}return null}function Av(o,c,h){const I=c[10];I.begin&&I.begin();try{Uc(o,c,o.template,h)}catch(W){throw vx(c,W),W}finally{I.end&&I.end()}}function dx(o){!function(o){for(let c=0;c<o.components.length;c++){const h=o.components[c],I=mf(h),W=I[1];$0(W,I,W.template,h)}}(o[8])}function kv(o,c,h){X(0),c(o,h)}const tT=(()=>Promise.resolve(null))();function px(o){return o[7]||(o[7]=[])}function gx(o){return o.cleanup||(o.cleanup=[])}function vx(o,c){const h=o[9],I=h?h.get(Oc,null):null;I&&I.handleError(c)}function yx(o,c,h,I,W){for(let se=0;se<h.length;){const xe=h[se++],Se=h[se++],Be=c[xe],ct=o.data[xe];null!==ct.setInput?ct.setInput(Be,W,I,Se):Be[Se]=W}}function Yc(o,c,h){const I=Ea(c,o);!function(o,c,h){Ga(o)?o.setValue(c,h):c.textContent=h}(o[11],I,h)}function cg(o,c,h){let I=h?o.styles:null,W=h?o.classes:null,se=0;if(null!==c)for(let xe=0;xe<c.length;xe++){const Se=c[xe];"number"==typeof Se?se=Se:1==se?W=Tn(W,Se):2==se&&(I=Tn(I,Se+": "+c[++xe]+";"))}h?o.styles=I:o.stylesWithoutHost=I,h?o.classes=W:o.classesWithoutHost=W}const Ev=new xa("INJECTOR",-1);class xx{get(c,h=qf){if(h===qf){const I=new Error(`NullInjectorError: No provider for ${_n(c)}!`);throw I.name="NullInjectorError",I}return h}}const Cv=new xa("Set Injector scope."),Ep={},iT={};let Sv;function bx(){return void 0===Sv&&(Sv=new xx),Sv}function _x(o,c=null,h=null,I){const W=wx(o,c,h,I);return W._resolveInjectorDefTypes(),W}function wx(o,c=null,h=null,I){return new aT(o,h,c||bx(),I)}class aT{constructor(c,h,I,W=null){this.parent=I,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const se=[];h&&wu(h,Se=>this.processProvider(Se,c,h)),wu([c],Se=>this.processInjectorType(Se,[],se)),this.records.set(Ev,ad(void 0,this));const xe=this.records.get(Cv);this.scope=null!=xe?xe.value:null,this.source=W||("object"==typeof c?null:_n(c))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(c=>c.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(c,h=qf,I=lr.Default){this.assertNotDestroyed();const W=Ec(this),se=wa(void 0);try{if(!(I&lr.SkipSelf)){let Se=this.records.get(c);if(void 0===Se){const Be=("function"==typeof(o=c)||"object"==typeof o&&o instanceof xa)&&gr(c);Se=Be&&this.injectableDefInScope(Be)?ad(Dv(c),Ep):null,this.records.set(c,Se)}if(null!=Se)return this.hydrate(c,Se)}return(I&lr.Self?bx():this.parent).get(c,h=I&lr.Optional&&h===qf?null:h)}catch(xe){if("NullInjectorError"===xe.name){if((xe[lf]=xe[lf]||[]).unshift(_n(c)),W)throw xe;return function(o,c,h,I){const W=o[lf];throw c[w0]&&W.unshift(c[w0]),o.message=function(o,c,h,I=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let W=_n(c);if(Array.isArray(c))W=c.map(_n).join(" -> ");else if("object"==typeof c){let se=[];for(let xe in c)if(c.hasOwnProperty(xe)){let Se=c[xe];se.push(xe+":"+("string"==typeof Se?JSON.stringify(Se):_n(Se)))}W=`{${se.join(", ")}}`}return`${h}${I?"("+I+")":""}[${W}]: ${o.replace(Im,"\n  ")}`}("\n"+o.message,W,h,I),o.ngTokenPath=W,o[lf]=null,o}(xe,c,"R3InjectorError",this.source)}throw xe}finally{wa(se),Ec(W)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(c=>this.get(c))}toString(){const c=[];return this.records.forEach((I,W)=>c.push(_n(W))),`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(c,h,I){if(!(c=Fn(c)))return!1;let W=wr(c);const se=null==W&&c.ngModule||void 0,xe=void 0===se?c:se,Se=-1!==I.indexOf(xe);if(void 0!==se&&(W=wr(se)),null==W)return!1;if(null!=W.imports&&!Se){let Ot;I.push(xe);try{wu(W.imports,en=>{this.processInjectorType(en,h,I)&&(void 0===Ot&&(Ot=[]),Ot.push(en))})}finally{}if(void 0!==Ot)for(let en=0;en<Ot.length;en++){const{ngModule:bn,providers:Sn}=Ot[en];wu(Sn,tr=>this.processProvider(tr,bn,Sn||fa))}}this.injectorDefTypes.add(xe);const Be=vi(xe)||(()=>new xe);this.records.set(xe,ad(Be,Ep));const ct=W.providers;if(null!=ct&&!Se){const Ot=c;wu(ct,en=>this.processProvider(en,Ot,ct))}return void 0!==se&&void 0!==c.providers}processProvider(c,h,I){let W=od(c=Fn(c))?c:Fn(c&&c.provide);const se=(o=c,Mx(o)?ad(void 0,o.useValue):ad(Tx(o),Ep));var o;if(od(c)||!0!==c.multi)this.records.get(W);else{let xe=this.records.get(W);xe||(xe=ad(void 0,Ep,!0),xe.factory=()=>Hd(xe.multi),this.records.set(W,xe)),W=c,xe.multi.push(c)}this.records.set(W,se)}hydrate(c,h){return h.value===Ep&&(h.value=iT,h.value=h.factory()),"object"==typeof h.value&&h.value&&null!==(o=h.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(h.value),h.value;var o}injectableDefInScope(c){if(!c.providedIn)return!1;const h=Fn(c.providedIn);return"string"==typeof h?"any"===h||h===this.scope:this.injectorDefTypes.has(h)}}function Dv(o){const c=gr(o),h=null!==c?c.factory:vi(o);if(null!==h)return h;if(o instanceof xa)throw new Error(`Token ${_n(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const c=o.length;if(c>0){const I=Vf(c,"?");throw new Error(`Can't resolve all parameters for ${_n(o)}: (${I.join(", ")}).`)}const h=function(o){const c=o&&(o[Ir]||o[Ci]);if(c){const h=function(o){if(o.hasOwnProperty("name"))return o.name;const c=(""+o).match(/^function\s*([^\s(]+)/);return null===c?"":c[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${h}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${h}" class.`),c}return null}(o);return null!==h?()=>h.factory(o):()=>new o}(o);throw new Error("unreachable")}function Tx(o,c,h){let I;if(od(o)){const W=Fn(o);return vi(W)||Dv(W)}if(Mx(o))I=()=>Fn(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))I=()=>o.useFactory(...Hd(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))I=()=>Ki(Fn(o.useExisting));else{const W=Fn(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return vi(W)||Dv(W);I=()=>new W(...Hd(o.deps))}return I}function ad(o,c,h=!1){return{factory:o,value:c,multi:h?[]:void 0}}function Mx(o){return null!==o&&"object"==typeof o&&T0 in o}function od(o){return"function"==typeof o}let Dl=(()=>{class o{static create(h,I){var W;if(Array.isArray(h))return _x({name:""},I,h,"");{const se=null!=(W=h.name)?W:"";return _x({name:se},h.parent,h.providers,se)}}}return o.THROW_IF_NOT_FOUND=qf,o.NULL=new xx,o.\u0275prov=Zn({token:o,providedIn:"any",factory:()=>Ki(Ev)}),o.__NG_ELEMENT_ID__=-1,o})();function _T(o,c){Nn(mf(o)[1],Qi())}function rs(o){let c=function(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),h=!0;const I=[o];for(;c;){let W;if(Ta(o))W=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new Error("Directives cannot inherit Components");W=c.\u0275dir}if(W){if(h){I.push(W);const xe=o;xe.inputs=Pv(o.inputs),xe.declaredInputs=Pv(o.declaredInputs),xe.outputs=Pv(o.outputs);const Se=W.hostBindings;Se&&AT(o,Se);const Be=W.viewQuery,ct=W.contentQueries;if(Be&&TT(o,Be),ct&&MT(o,ct),Dn(o.inputs,W.inputs),Dn(o.declaredInputs,W.declaredInputs),Dn(o.outputs,W.outputs),Ta(W)&&W.data.animation){const Ot=o.data;Ot.animation=(Ot.animation||[]).concat(W.data.animation)}}const se=W.features;if(se)for(let xe=0;xe<se.length;xe++){const Se=se[xe];Se&&Se.ngInherit&&Se(o),Se===rs&&(h=!1)}}c=Object.getPrototypeOf(c)}!function(o){let c=0,h=null;for(let I=o.length-1;I>=0;I--){const W=o[I];W.hostVars=c+=W.hostVars,W.hostAttrs=Wi(W.hostAttrs,h=Wi(h,W.hostAttrs))}}(I)}function Pv(o){return o===to?{}:o===fa?[]:o}function TT(o,c){const h=o.viewQuery;o.viewQuery=h?(I,W)=>{c(I,W),h(I,W)}:c}function MT(o,c){const h=o.contentQueries;o.contentQueries=h?(I,W,se)=>{c(I,W,se),h(I,W,se)}:c}function AT(o,c){const h=o.hostBindings;o.hostBindings=h?(I,W)=>{c(I,W),h(I,W)}:c}let fg=null;function sd(){if(!fg){const o=Bi.Symbol;if(o&&o.iterator)fg=o.iterator;else{const c=Object.getOwnPropertyNames(Map.prototype);for(let h=0;h<c.length;++h){const I=c[h];"entries"!==I&&"size"!==I&&Map.prototype[I]===Map.prototype.entries&&(fg=I)}}}return fg}function Cp(o){return!!Ov(o)&&(Array.isArray(o)||!(o instanceof Map)&&sd()in o)}function Ov(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Nl(o,c,h){return!Object.is(o[c],h)&&(o[c]=h,!0)}function Zu(o,c,h,I){const W=Zr();return Nl(W,Ul(),c)&&(Pa(),Lu(At(),W,o,c,h,I)),Zu}function Xu(o,c,h,I,W,se,xe,Se){const Be=Zr(),ct=Pa(),Ot=o+20,en=ct.firstCreatePass?function(o,c,h,I,W,se,xe,Se,Be){const ct=c.consts,Ot=Iu(c,o,4,xe||null,Qs(ct,Se));xh(c,h,Ot,Qs(ct,Be)),Nn(c,Ot);const en=Ot.tViews=Df(2,Ot,I,W,se,c.directiveRegistry,c.pipeRegistry,null,c.schemas,ct);return null!==c.queries&&(c.queries.template(c,Ot),en.queries=c.queries.embeddedTView(Ot)),Ot}(Ot,ct,Be,c,h,I,W,se,xe):ct.data[Ot];ls(en,!1);const bn=Be[11].createComment("");Mi(ct,Be,bn,en),xl(bn,Be),ug(Be,Be[Ot]=du(bn,Be,bn,en)),ja(en)&&td(ct,Be,en),null!=xe&&au(Be,en,Se)}function ai(o,c=lr.Default){const h=Zr();return null===h?Ki(o,c):ac(Qi(),h,Fn(o),c)}function Bv(){throw new Error("invalid")}function No(o,c,h){const I=Zr();return Nl(I,Ul(),c)&&function(o,c,h,I,W,se,xe,Se){const Be=Fa(c,h);let Ot,ct=c.inputs;!Se&&null!=ct&&(Ot=ct[I])?(yx(o,h,Ot,I,W),io(c)&&function(o,c){const h=da(c,o);16&h[2]||(h[2]|=64)}(h,c.index)):3&c.type&&(I=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(I),W=null!=xe?xe(W,c.value||"",I):W,Ga(se)?se.setProperty(Be,I,W):sa(I)||(Be.setProperty?Be.setProperty(I,W):Be[I]=W))}(Pa(),At(),I,o,c,I[11],h,!1),No}function jv(o,c,h,I,W){const xe=W?"class":"style";yx(o,h,c.inputs[xe],xe,I)}function ji(o,c,h,I){const W=Zr(),se=Pa(),xe=20+o,Se=W[11],Be=W[xe]=Me(Se,c,Oi.lFrame.currentNamespace),ct=se.firstCreatePass?function(o,c,h,I,W,se,xe){const Se=c.consts,ct=Iu(c,o,2,W,Qs(Se,se));return xh(c,h,ct,Qs(Se,xe)),null!==ct.attrs&&cg(ct,ct.attrs,!1),null!==ct.mergedAttrs&&cg(ct,ct.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,ct),ct}(xe,se,W,0,c,h,I):se.data[xe];ls(ct,!0);const Ot=ct.mergedAttrs;null!==Ot&&qi(Se,Be,Ot);const en=ct.classes;null!==en&&Es(Se,Be,en);const bn=ct.styles;null!==bn&&Eo(Se,Be,bn),64!=(64&ct.flags)&&Mi(se,W,Be,ct),0===Oi.lFrame.elementDepthCount&&xl(Be,W),Oi.lFrame.elementDepthCount++,ja(ct)&&(td(se,W,ct),function(o,c,h){if(xo(c)){const W=c.directiveEnd;for(let se=c.directiveStart;se<W;se++){const xe=o.data[se];xe.contentQueries&&xe.contentQueries(1,h[se],se)}}}(se,ct,W)),null!==I&&au(W,ct)}function Vi(){let o=Qi();To()?Al():(o=o.parent,ls(o,!1));const c=o;Oi.lFrame.elementDepthCount--;const h=Pa();h.firstCreatePass&&(Nn(h,o),xo(o)&&h.queries.elementEnd(o)),null!=c.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(c)&&jv(h,c,Zr(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(c)&&jv(h,c,Zr(),c.stylesWithoutHost,!1)}function gc(o,c,h,I){ji(o,c,h,I),Vi()}function yd(){return Zr()}function Dp(o){return!!o&&"function"==typeof o.then}const Vv=function(o){return!!o&&"function"==typeof o.subscribe};function Co(o,c,h,I){const W=Zr(),se=Pa(),xe=Qi();return function(o,c,h,I,W,se,xe,Se){const Be=ja(I),Ot=o.firstCreatePass&&gx(o),en=c[8],bn=px(c);let Sn=!0;if(3&I.type||Se){const ei=Fa(I,c),ri=Se?Se(ei):ei,Nr=bn.length,Hi=Se?va=>Se(wi(va[I.index])):I.index;if(Ga(h)){let va=null;if(!Se&&Be&&(va=function(o,c,h,I){const W=o.cleanup;if(null!=W)for(let se=0;se<W.length-1;se+=2){const xe=W[se];if(xe===h&&W[se+1]===I){const Se=c[7],Be=W[se+2];return Se.length>Be?Se[Be]:null}"string"==typeof xe&&(se+=2)}return null}(o,c,W,I.index)),null!==va)(va.__ngLastListenerFn__||va).__ngNextListenerFn__=se,va.__ngLastListenerFn__=se,Sn=!1;else{se=Uv(I,c,en,se,!1);const so=h.listen(ri,W,se);bn.push(se,so),Ot&&Ot.push(W,Hi,Nr,Nr+1)}}else se=Uv(I,c,en,se,!0),ri.addEventListener(W,se,xe),bn.push(se),Ot&&Ot.push(W,Hi,Nr,xe)}else se=Uv(I,c,en,se,!1);const tr=I.outputs;let qr;if(Sn&&null!==tr&&(qr=tr[W])){const ei=qr.length;if(ei)for(let ri=0;ri<ei;ri+=2){const yu=c[qr[ri]][qr[ri+1]].subscribe(se),Rh=bn.length;bn.push(se,yu),Ot&&Ot.push(W,I.index,Rh,-(Rh+1))}}}(se,W,W[11],xe,o,c,!!h,I),Co}function sb(o,c,h,I){try{return!1!==h(I)}catch(W){return vx(o,W),!1}}function Uv(o,c,h,I,W){return function se(xe){if(xe===Function)return I;const Se=2&o.flags?da(o.index,c):c;0==(32&c[2])&&Tv(Se);let Be=sb(c,0,I,xe),ct=se.__ngNextListenerFn__;for(;ct;)Be=sb(c,0,ct,xe)&&Be,ct=ct.__ngNextListenerFn__;return W&&!1===Be&&(xe.preventDefault(),xe.returnValue=!1),Be}}function ou(o=1){return function(o){return(Oi.lFrame.contextLView=function(o,c){for(;o>0;)c=c[15],o--;return c}(o,Oi.lFrame.contextLView))[8]}(o)}function iM(o,c){let h=null;const I=function(o){const c=o.attrs;if(null!=c){const h=c.indexOf(5);if(0==(1&h))return c[h+1]}return null}(o);for(let W=0;W<c.length;W++){const se=c[W];if("*"!==se){if(null===I?Na(o,se,!0):Do(I,se))return W}else h=W}return h}function xb(o,c,h,I,W){const se=o[h+1],xe=null===c;let Se=I?Cs(se):iu(se),Be=!1;for(;0!==Se&&(!1===Be||xe);){const Ot=o[Se+1];sM(o[Se],c)&&(Be=!0,o[Se+1]=I?Tf(Ot):hc(Ot)),Se=I?Cs(Ot):iu(Ot)}Be&&(o[h+1]=I?hc(se):Tf(se))}function sM(o,c){return null===o||null==c||(Array.isArray(o)?o[1]:o)===c||!(!Array.isArray(o)||"string"!=typeof c)&&ju(o,c)>=0}function Ip(o,c,h){return $u(o,c,h,!1),Ip}function pg(o,c){return $u(o,c,null,!0),pg}function $u(o,c,h,I){const W=Zr(),se=Pa(),xe=function(o){const c=Oi.lFrame,h=c.bindingIndex;return c.bindingIndex=c.bindingIndex+o,h}(2);se.firstUpdatePass&&function(o,c,h,I){const W=o.data;if(null===W[h+1]){const se=W[It()],xe=function(o,c){return c>=o.expandoStartIndex}(o,h);(function(o,c){return 0!=(o.flags&(c?16:32))})(se,I)&&null===c&&!xe&&(c=!1),c=function(o,c,h,I){const W=function(o){const c=Oi.lFrame.currentDirectiveIndex;return-1===c?null:o[c]}(o);let se=I?c.residualClasses:c.residualStyles;if(null===W)0===(I?c.classBindings:c.styleBindings)&&(h=Lp(h=qv(null,o,c,h,I),c.attrs,I),se=null);else{const xe=c.directiveStylingLast;if(-1===xe||o[xe]!==W)if(h=qv(W,o,c,h,I),null===se){let Be=function(o,c,h){const I=h?c.classBindings:c.styleBindings;if(0!==iu(I))return o[Cs(I)]}(o,c,I);void 0!==Be&&Array.isArray(Be)&&(Be=qv(null,o,c,Be[1],I),Be=Lp(Be,c.attrs,I),function(o,c,h,I){o[Cs(h?c.classBindings:c.styleBindings)]=I}(o,c,I,Be))}else se=function(o,c,h){let I;const W=c.directiveEnd;for(let se=1+c.directiveStylingLast;se<W;se++)I=Lp(I,o[se].hostAttrs,h);return Lp(I,c.attrs,h)}(o,c,I)}return void 0!==se&&(I?c.residualClasses=se:c.residualStyles=se),h}(W,se,c,I),function(o,c,h,I,W,se){let xe=se?c.classBindings:c.styleBindings,Se=Cs(xe),Be=iu(xe);o[I]=h;let Ot,ct=!1;if(Array.isArray(h)){const en=h;Ot=en[1],(null===Ot||ju(en,Ot)>0)&&(ct=!0)}else Ot=h;if(W)if(0!==Be){const bn=Cs(o[Se+1]);o[I+1]=zl(bn,Se),0!==bn&&(o[bn+1]=Hu(o[bn+1],I)),o[Se+1]=function(o,c){return 131071&o|c<<17}(o[Se+1],I)}else o[I+1]=zl(Se,0),0!==Se&&(o[Se+1]=Hu(o[Se+1],I)),Se=I;else o[I+1]=zl(Be,0),0===Se?Se=I:o[Be+1]=Hu(o[Be+1],I),Be=I;ct&&(o[I+1]=hc(o[I+1])),xb(o,Ot,I,!0),xb(o,Ot,I,!1),function(o,c,h,I,W){const se=W?o.residualClasses:o.residualStyles;null!=se&&"string"==typeof c&&ju(se,c)>=0&&(h[I+1]=Tf(h[I+1]))}(c,Ot,o,I,se),xe=zl(Se,Be),se?c.classBindings=xe:c.styleBindings=xe}(W,se,c,h,xe,I)}}(se,o,xe,I),c!==$i&&Nl(W,xe,c)&&function(o,c,h,I,W,se,xe,Se){if(!(3&c.type))return;const Be=o.data,ct=Be[Se+1];gg(function(o){return 1==(1&o)}(ct)?Db(Be,c,h,W,iu(ct),xe):void 0)||(gg(se)||function(o){return 2==(2&o)}(ct)&&(se=Db(Be,null,h,W,Se,xe)),function(o,c,h,I,W){const se=Ga(o);if(c)W?se?o.addClass(h,I):h.classList.add(I):se?o.removeClass(h,I):h.classList.remove(I);else{let xe=-1===I.indexOf("-")?void 0:_l.DashCase;if(null==W)se?o.removeStyle(h,I,xe):h.style.removeProperty(I);else{const Se="string"==typeof W&&W.endsWith("!important");Se&&(W=W.slice(0,-10),xe|=_l.Important),se?o.setStyle(h,I,W,xe):h.style.setProperty(I,W,Se?"important":"")}}}(I,xe,Ea(It(),h),W,se))}(se,se.data[It()],W,W[11],o,W[xe+1]=function(o,c){return null==o||("string"==typeof c?o+=c:"object"==typeof o&&(o=_n(uc(o)))),o}(c,h),I,xe)}function qv(o,c,h,I,W){let se=null;const xe=h.directiveEnd;let Se=h.directiveStylingLast;for(-1===Se?Se=h.directiveStart:Se++;Se<xe&&(se=c[Se],I=Lp(I,se.hostAttrs,W),se!==o);)Se++;return null!==o&&(h.directiveStylingLast=Se),I}function Lp(o,c,h){const I=h?1:2;let W=-1;if(null!==c)for(let se=0;se<c.length;se++){const xe=c[se];"number"==typeof xe?W=xe:W===I&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),vl(o,xe,!!h||c[++se]))}return void 0===o?null:o}function Db(o,c,h,I,W,se){const xe=null===c;let Se;for(;W>0;){const Be=o[W],ct=Array.isArray(Be),Ot=ct?Be[1]:Be,en=null===Ot;let bn=h[W+1];bn===$i&&(bn=en?fa:void 0);let Sn=en?jh(bn,I):Ot===I?bn:void 0;if(ct&&!gg(Sn)&&(Sn=jh(Be,I)),gg(Sn)&&(Se=Sn,xe))return Se;const tr=o[W+1];W=xe?Cs(tr):iu(tr)}if(null!==c){let Be=se?c.residualClasses:c.residualStyles;null!=Be&&(Se=jh(Be,I))}return Se}function gg(o){return void 0!==o}function vo(o,c=""){const h=Zr(),I=Pa(),W=o+20,se=I.firstCreatePass?Iu(I,W,1,c,null):I.data[W],xe=h[W]=function(o,c){return Ga(o)?o.createText(c):o.createTextNode(c)}(h[11],c);Mi(I,h,xe,se),ls(se,!1)}function Pp(o){return Th("",o,""),Pp}function Th(o,c,h){const I=Zr(),W=function(o,c,h,I){return Nl(o,Ul(),h)?c+mr(h)+I:$i}(I,o,c,h);return W!==$i&&Yc(I,It(),W),Th}const Mh=void 0;var UM=["en",[["a","p"],["AM","PM"],Mh],[["AM","PM"],Mh,Mh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Mh,"{1} 'at' {0}",Mh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const h=Math.floor(Math.abs(o)),I=o.toString().replace(/^[^.]*\.?/,"").length;return 1===h&&0===I?1:5}];let bd={};function Kb(o){return o in bd||(bd[o]=Bi.ng&&Bi.ng.common&&Bi.ng.common.locales&&Bi.ng.common.locales[o]),bd[o]}var zi=(()=>((zi=zi||{})[zi.LocaleId=0]="LocaleId",zi[zi.DayPeriodsFormat=1]="DayPeriodsFormat",zi[zi.DayPeriodsStandalone=2]="DayPeriodsStandalone",zi[zi.DaysFormat=3]="DaysFormat",zi[zi.DaysStandalone=4]="DaysStandalone",zi[zi.MonthsFormat=5]="MonthsFormat",zi[zi.MonthsStandalone=6]="MonthsStandalone",zi[zi.Eras=7]="Eras",zi[zi.FirstDayOfWeek=8]="FirstDayOfWeek",zi[zi.WeekendRange=9]="WeekendRange",zi[zi.DateFormat=10]="DateFormat",zi[zi.TimeFormat=11]="TimeFormat",zi[zi.DateTimeFormat=12]="DateTimeFormat",zi[zi.NumberSymbols=13]="NumberSymbols",zi[zi.NumberFormats=14]="NumberFormats",zi[zi.CurrencyCode=15]="CurrencyCode",zi[zi.CurrencySymbol=16]="CurrencySymbol",zi[zi.CurrencyName=17]="CurrencyName",zi[zi.Currencies=18]="Currencies",zi[zi.Directionality=19]="Directionality",zi[zi.PluralCase=20]="PluralCase",zi[zi.ExtraData=21]="ExtraData",zi))();const mg="en-US";let Qb=mg;function Yv(o,c,h,I,W){if(o=Fn(o),Array.isArray(o))for(let se=0;se<o.length;se++)Yv(o[se],c,h,I,W);else{const se=Pa(),xe=Zr();let Se=od(o)?o:Fn(o.provide),Be=Tx(o);const ct=Qi(),Ot=1048575&ct.providerIndexes,en=ct.directiveStart,bn=ct.providerIndexes>>20;if(od(o)||!o.multi){const Sn=new Si(Be,W,ai),tr=Xv(Se,c,W?Ot:Ot+bn,en);-1===tr?(Qo(Rl(ct,xe),se,Se),Zv(se,o,c.length),c.push(Se),ct.directiveStart++,ct.directiveEnd++,W&&(ct.providerIndexes+=1048576),h.push(Sn),xe.push(Sn)):(h[tr]=Sn,xe[tr]=Sn)}else{const Sn=Xv(Se,c,Ot+bn,en),tr=Xv(Se,c,Ot,Ot+bn),qr=Sn>=0&&h[Sn],ei=tr>=0&&h[tr];if(W&&!ei||!W&&!qr){Qo(Rl(ct,xe),se,Se);const ri=function(o,c,h,I,W){const se=new Si(o,h,ai);return se.multi=[],se.index=c,se.componentProviders=0,T_(se,W,I&&!h),se}(W?jA:BA,h.length,W,I,Be);!W&&ei&&(h[tr].providerFactory=ri),Zv(se,o,c.length,0),c.push(Se),ct.directiveStart++,ct.directiveEnd++,W&&(ct.providerIndexes+=1048576),h.push(ri),xe.push(ri)}else Zv(se,o,Sn>-1?Sn:tr,T_(h[W?tr:Sn],Be,!W&&I));!W&&I&&ei&&h[tr].componentProviders++}}}function Zv(o,c,h,I){const W=od(c),se=function(o){return!!o.useClass}(c);if(W||se){const Be=(se?Fn(c.useClass):c).prototype.ngOnDestroy;if(Be){const ct=o.destroyHooks||(o.destroyHooks=[]);if(!W&&c.multi){const Ot=ct.indexOf(h);-1===Ot?ct.push(h,[I,Be]):ct[Ot+1].push(I,Be)}else ct.push(h,Be)}}}function T_(o,c,h){return h&&o.componentProviders++,o.multi.push(c)-1}function Xv(o,c,h,I){for(let W=h;W<I;W++)if(c[W]===o)return W;return-1}function BA(o,c,h,I){return $v(this.multi,[])}function jA(o,c,h,I){const W=this.multi;let se;if(this.providerFactory){const xe=this.providerFactory.componentProviders,Se=Tc(h,h[1],this.providerFactory.index,I);se=Se.slice(0,xe),$v(W,se);for(let Be=xe;Be<Se.length;Be++)se.push(Se[Be])}else se=[],$v(W,se);return se}function $v(o,c){for(let h=0;h<o.length;h++)c.push((0,o[h])());return c}function ds(o,c=[]){return h=>{h.providersResolver=(I,W)=>function(o,c,h){const I=Pa();if(I.firstCreatePass){const W=Ta(o);Yv(h,I.data,I.blueprint,W,!0),Yv(c,I.data,I.blueprint,W,!1)}}(I,W?W(o):o,c)}}class M_{}class qA{resolveComponentFactory(c){throw function(o){const c=Error(`No component factory found for ${_n(o)}. Did you add it to @NgModule.entryComponents?`);return c.ngComponent=o,c}(c)}}let wd=(()=>{class o{}return o.NULL=new qA,o})();function GA(){return Td(Qi(),Zr())}function Td(o,c){return new pu(Fa(o,c))}let pu=(()=>{class o{constructor(h){this.nativeElement=h}}return o.__NG_ELEMENT_ID__=GA,o})();function WA(o){return o instanceof pu?o.nativeElement:o}class k_{}let Zc=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function(){const o=Zr(),h=da(Qi().index,o);return function(o){return o[11]}(ra(h)?h:o)}(),o})(),XA=(()=>{class o{}return o.\u0275prov=Zn({token:o,providedIn:"root",factory:()=>null}),o})();class Np{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const $A=new Np("13.0.3"),Jv={};function _g(o,c,h,I,W=!1){for(;null!==h;){const se=c[h.index];if(null!==se&&I.push(wi(se)),aa(se))for(let Se=10;Se<se.length;Se++){const Be=se[Se],ct=Be[1].firstChild;null!==ct&&_g(Be[1],Be,ct,I)}const xe=h.type;if(8&xe)_g(o,c,h.child,I);else if(32&xe){const Se=oh(h,c);let Be;for(;Be=Se();)I.push(Be)}else if(16&xe){const Se=Sa(c,h);if(Array.isArray(Se))I.push(...Se);else{const Be=wf(c[16]);_g(Be[1],Be,Se,I,!0)}}h=W?h.projectionNext:h.next}return I}class Bp{constructor(c,h){this._lView=c,this._cdRefInjectingView=h,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const c=this._lView,h=c[1];return _g(h,c,h.firstChild,[])}get context(){return this._lView[8]}set context(c){this._lView[8]=c}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[3];if(aa(c)){const h=c[8],I=h?h.indexOf(this):-1;I>-1&&(tn(c,I),Bh(h,I))}this._attachedToViewContainer=!1}vn(this._lView[1],this._lView)}onDestroy(c){Wc(this._lView[1],this._lView,null,c)}markForCheck(){Tv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Av(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,c,h){tl(!0);try{Av(o,c,h)}finally{tl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var c;this._appRef=null,Qa(this._lView[1],c=this._lView,c[11],2,null,null)}attachToAppRef(c){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=c}}class JA extends Bp{constructor(c){super(c),this._view=c}detectChanges(){dx(this._view)}checkNoChanges(){!function(o){tl(!0);try{dx(o)}finally{tl(!1)}}(this._view)}get context(){return null}}class E_ extends wd{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const h=co(c);return new Kv(h,this.ngModule)}}function C_(o){const c=[];for(let h in o)o.hasOwnProperty(h)&&c.push({propName:o[h],templateName:h});return c}const QA=new xa("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>cp});class Kv extends M_{constructor(c,h){super(),this.componentDef=c,this.ngModule=h,this.componentType=c.type,this.selector=c.selectors.map(Ho).join(","),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!h}get inputs(){return C_(this.componentDef.inputs)}get outputs(){return C_(this.componentDef.outputs)}create(c,h,I,W){const se=(W=W||this.ngModule)?function(o,c){return{get:(h,I,W)=>{const se=o.get(h,Jv,W);return se!==Jv||I===Jv?se:c.get(h,I,W)}}}(c,W.injector):c,xe=se.get(k_,Ns),Se=se.get(XA,null),Be=xe.createRenderer(null,this.componentDef),ct=this.componentDef.selectors[0][0]||"div",Ot=I?function(o,c,h){if(Ga(o))return o.selectRootElement(c,h===Bo.ShadowDom);let I="string"==typeof c?o.querySelector(c):c;return I.textContent="",I}(Be,I,this.componentDef.encapsulation):Me(xe.createRenderer(null,this.componentDef),ct,function(o){const c=o.toLowerCase();return"svg"===c?"http://www.w3.org/2000/svg":"math"===c?"http://www.w3.org/1998/MathML/":null}(ct)),en=this.componentDef.onPush?576:528,bn=function(o,c){return{components:[],scheduler:o||cp,clean:tT,playerHandler:c||null,flags:0}}(),Sn=Df(0,null,null,1,0,null,null,null,null,null),tr=Cf(null,Sn,bn,en,null,null,xe,Be,Se,se);let qr,ei;_e(tr);try{const ri=function(o,c,h,I,W,se){const xe=h[1];h[20]=o;const Be=Iu(xe,20,2,"#host",null),ct=Be.mergedAttrs=c.hostAttrs;null!==ct&&(cg(Be,ct,!0),null!==o&&(qi(W,o,ct),null!==Be.classes&&Es(W,o,Be.classes),null!==Be.styles&&Eo(W,o,Be.styles)));const Ot=I.createRenderer(o,c),en=Cf(h,J0(c),null,c.onPush?64:16,h[20],Be,I,Ot,se||null,null);return xe.firstCreatePass&&(Qo(Rl(Be,h),xe,c.type),bh(xe,Be),og(Be,h.length,1)),ug(h,en),h[20]=en}(Ot,this.componentDef,tr,xe,Be);if(Ot)if(I)qi(Be,Ot,["ng-version",$A.full]);else{const{attrs:Nr,classes:Hi}=function(o){const c=[],h=[];let I=1,W=2;for(;I<o.length;){let se=o[I];if("string"==typeof se)2===W?""!==se&&c.push(se,o[++I]):8===W&&h.push(se);else{if(!mo(W))break;W=se}I++}return{attrs:c,classes:h}}(this.componentDef.selectors[0]);Nr&&qi(Be,Ot,Nr),Hi&&Hi.length>0&&Es(Be,Ot,Hi.join(" "))}if(ei=Va(Sn,20),void 0!==h){const Nr=ei.projection=[];for(let Hi=0;Hi<this.ngContentSelectors.length;Hi++){const va=h[Hi];Nr.push(null!=va?Array.from(va):null)}}qr=function(o,c,h,I,W){const se=h[1],xe=function(o,c,h){const I=Qi();o.firstCreatePass&&(h.providersResolver&&h.providersResolver(h),sg(o,I,c,Vc(o,c,1,null),h));const W=Tc(c,o,I.directiveStart,I);xl(W,c);const se=Fa(I,c);return se&&xl(se,c),W}(se,h,c);if(I.components.push(xe),o[8]=xe,W&&W.forEach(Be=>Be(xe,c)),c.contentQueries){const Be=Qi();c.contentQueries(1,xe,Be.directiveStart)}const Se=Qi();return!se.firstCreatePass||null===c.hostBindings&&null===c.hostAttrs||(Lt(Se.index),Mp(h[1],Se,0,Se.directiveStart,Se.directiveEnd,c),If(c,xe)),xe}(ri,this.componentDef,tr,bn,[_T]),Sf(Sn,tr,null)}finally{dt()}return new nk(this.componentType,qr,Td(ei,tr),tr,ei)}}class nk extends class{}{constructor(c,h,I,W,se){super(),this.location=I,this._rootLView=W,this._tNode=se,this.instance=h,this.hostView=this.changeDetectorRef=new JA(W),this.componentType=c}get injector(){return new sc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}class Xc{}class S_{}const Md=new Map;class L_ extends Xc{constructor(c,h){super(),this._parent=h,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new E_(this);const I=fo(c);this._bootstrapComponents=bl(I.bootstrap),this._r3Injector=wx(c,h,[{provide:Xc,useValue:this},{provide:wd,useValue:this.componentFactoryResolver}],_n(c)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(c)}get(c,h=Dl.THROW_IF_NOT_FOUND,I=lr.Default){return c===Dl||c===Xc||c===Ev?this:this._r3Injector.get(c,h,I)}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(h=>h()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class Qv extends S_{constructor(c){super(),this.moduleType=c,null!==fo(c)&&function(o){const c=new Set;!function h(I){const W=fo(I,!0),se=W.id;null!==se&&(function(o,c,h){if(c&&c!==h)throw new Error(`Duplicate module registered for ${o} - ${_n(c)} vs ${_n(c.name)}`)}(se,Md.get(se),I),Md.set(se,I));const xe=bl(W.imports);for(const Se of xe)c.has(Se)||(c.add(Se),h(Se))}(o)}(c)}create(c){return new L_(this.moduleType,c)}}function ey(o){return c=>{setTimeout(o,void 0,c)}}const ea=class extends Y{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,h,I){var Be,ct,Ot;let W=c,se=h||(()=>null),xe=I;if(c&&"object"==typeof c){const en=c;W=null==(Be=en.next)?void 0:Be.bind(en),se=null==(ct=en.error)?void 0:ct.bind(en),xe=null==(Ot=en.complete)?void 0:Ot.bind(en)}this.__isAsync&&(se=ey(se),W&&(W=ey(W)),xe&&(xe=ey(xe)));const Se=super.subscribe({next:W,error:se,complete:xe});return c instanceof b&&c.add(Se),Se}};function Tk(){return this._results[sd()]()}class ty{constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const h=sd(),I=ty.prototype;I[h]||(I[h]=Tk)}get changes(){return this._changes||(this._changes=new ea)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,h){return this._results.reduce(c,h)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,h){const I=this;I.dirty=!1;const W=tu(c);(this._changesDetected=!function(o,c,h){if(o.length!==c.length)return!1;for(let I=0;I<o.length;I++){let W=o[I],se=c[I];if(h&&(W=h(W),se=h(se)),se!==W)return!1}return!0}(I._results,W,h))&&(I._results=W,I.length=W.length,I.last=W[this.length-1],I.first=W[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let $c=(()=>{class o{}return o.__NG_ELEMENT_ID__=kk,o})();const Mk=$c,Ak=class extends Mk{constructor(c,h,I){super(),this._declarationLView=c,this._declarationTContainer=h,this.elementRef=I}createEmbeddedView(c){const h=this._declarationTContainer.tViews,I=Cf(this._declarationLView,h,c,16,null,h.declTNode,null,null,null,null);I[17]=this._declarationLView[this._declarationTContainer.index];const se=this._declarationLView[19];return null!==se&&(I[19]=se.createEmbeddedView(h)),Sf(h,I,c),new Bp(I)}};function kk(){return wg(Qi(),Zr())}function wg(o,c){return 4&o.type?new Ak(c,o,Td(o,c)):null}let Ku=(()=>{class o{}return o.__NG_ELEMENT_ID__=Ek,o})();function Ek(){return j_(Qi(),Zr())}const Ck=Ku,N_=class extends Ck{constructor(c,h,I){super(),this._lContainer=c,this._hostTNode=h,this._hostLView=I}get element(){return Td(this._hostTNode,this._hostLView)}get injector(){return new sc(this._hostTNode,this._hostLView)}get parentInjector(){const c=fu(this._hostTNode,this._hostLView);if(ka(c)){const h=ao(c,this._hostLView),I=Wa(c);return new sc(h[1].data[I+8],h)}return new sc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const h=B_(this._lContainer);return null!==h&&h[c]||null}get length(){return this._lContainer.length-10}createEmbeddedView(c,h,I){const W=c.createEmbeddedView(h||{});return this.insert(W,I),W}createComponent(c,h,I,W,se){const xe=c&&!("function"==typeof c);let Se;if(xe)Se=h;else{const en=h||{};Se=en.index,I=en.injector,W=en.projectableNodes,se=en.ngModuleRef}const Be=xe?c:new Kv(co(c)),ct=I||this.parentInjector;if(!se&&null==Be.ngModule&&ct){const en=ct.get(Xc,null);en&&(se=en)}const Ot=Be.create(ct,W,void 0,se);return this.insert(Ot.hostView,Se),Ot}insert(c,h){const I=c._lView,W=I[1];if(aa(I[3])){const Ot=this.indexOf(c);if(-1!==Ot)this.detach(Ot);else{const en=I[3],bn=new N_(en,en[6],en[3]);bn.detach(bn.indexOf(c))}}const se=this._adjustIndex(h),xe=this._lContainer;!function(o,c,h,I){const W=10+I,se=h.length;I>0&&(h[W-1][4]=c),I<se-10?(c[4]=h[W],m0(h,10+I,c)):(h.push(c),c[4]=null),c[3]=h;const xe=c[17];null!==xe&&h!==xe&&function(o,c){const h=o[9];c[16]!==c[3][3][16]&&(o[2]=!0),null===h?o[9]=[c]:h.push(c)}(xe,c);const Se=c[19];null!==Se&&Se.insertView(o),c[2]|=128}(W,I,xe,se);const Se=za(se,xe),Be=I[11],ct=Qr(Be,xe[7]);return null!==ct&&function(o,c,h,I,W,se){I[0]=W,I[6]=c,Qa(o,I,h,1,W,se)}(W,xe[6],Be,I,ct,Se),c.attachToViewContainerRef(),m0(ny(xe),se,c),c}move(c,h){return this.insert(c,h)}indexOf(c){const h=B_(this._lContainer);return null!==h?h.indexOf(c):-1}remove(c){const h=this._adjustIndex(c,-1),I=tn(this._lContainer,h);I&&(Bh(ny(this._lContainer),h),vn(I[1],I))}detach(c){const h=this._adjustIndex(c,-1),I=tn(this._lContainer,h);return I&&null!=Bh(ny(this._lContainer),h)?new Bp(I):null}_adjustIndex(c,h=0){return null==c?this.length+h:c}};function B_(o){return o[8]}function ny(o){return o[8]||(o[8]=[])}function j_(o,c){let h;const I=c[o.index];if(aa(I))h=I;else{let W;if(8&o.type)W=wi(I);else{const se=c[11];W=se.createComment("");const xe=Fa(o,c);or(se,Qr(se,xe),W,function(o,c){return Ga(o)?o.nextSibling(c):c.nextSibling}(se,xe),!1)}c[o.index]=h=du(I,c,W,o),ug(c,h)}return new N_(h,o,c)}class ry{constructor(c){this.queryList=c,this.matches=null}clone(){return new ry(this.queryList)}setDirty(){this.queryList.setDirty()}}class iy{constructor(c=[]){this.queries=c}createEmbeddedView(c){const h=c.queries;if(null!==h){const I=null!==c.contentQueries?c.contentQueries[0]:h.length,W=[];for(let se=0;se<I;se++){const xe=h.getByIndex(se);W.push(this.queries[xe.indexInDeclarationView].clone())}return new iy(W)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let h=0;h<this.queries.length;h++)null!==W_(c,h).matches&&this.queries[h].setDirty()}}class V_{constructor(c,h,I=null){this.predicate=c,this.flags=h,this.read=I}}class ay{constructor(c=[]){this.queries=c}elementStart(c,h){for(let I=0;I<this.queries.length;I++)this.queries[I].elementStart(c,h)}elementEnd(c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementEnd(c)}embeddedTView(c){let h=null;for(let I=0;I<this.length;I++){const W=null!==h?h.length:0,se=this.getByIndex(I).embeddedTView(c,W);se&&(se.indexInDeclarationView=I,null!==h?h.push(se):h=[se])}return null!==h?new ay(h):null}template(c,h){for(let I=0;I<this.queries.length;I++)this.queries[I].template(c,h)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class oy{constructor(c,h=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=h}elementStart(c,h){this.isApplyingToNode(h)&&this.matchTNode(c,h)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,h){this.elementStart(c,h)}embeddedTView(c,h){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,h),new oy(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const h=this._declarationNodeIndex;let I=c.parent;for(;null!==I&&8&I.type&&I.index!==h;)I=I.parent;return h===(null!==I?I.index:-1)}return this._appliesToNextNode}matchTNode(c,h){const I=this.metadata.predicate;if(Array.isArray(I))for(let W=0;W<I.length;W++){const se=I[W];this.matchTNodeWithReadOption(c,h,Ik(h,se)),this.matchTNodeWithReadOption(c,h,Bu(h,c,se,!1,!1))}else I===$c?4&h.type&&this.matchTNodeWithReadOption(c,h,-1):this.matchTNodeWithReadOption(c,h,Bu(h,c,I,!1,!1))}matchTNodeWithReadOption(c,h,I){if(null!==I){const W=this.metadata.read;if(null!==W)if(W===pu||W===Ku||W===$c&&4&h.type)this.addMatch(h.index,-2);else{const se=Bu(h,c,W,!1,!1);null!==se&&this.addMatch(h.index,se)}else this.addMatch(h.index,I)}}addMatch(c,h){null===this.matches?this.matches=[c,h]:this.matches.push(c,h)}}function Ik(o,c){const h=o.localNames;if(null!==h)for(let I=0;I<h.length;I+=2)if(h[I]===c)return h[I+1];return null}function Pk(o,c,h,I){return-1===h?function(o,c){return 11&o.type?Td(o,c):4&o.type?wg(o,c):null}(c,o):-2===h?function(o,c,h){return h===pu?Td(c,o):h===$c?wg(c,o):h===Ku?j_(c,o):void 0}(o,c,I):Tc(o,o[1],h,c)}function U_(o,c,h,I){const W=c[19].queries[I];if(null===W.matches){const se=o.data,xe=h.matches,Se=[];for(let Be=0;Be<xe.length;Be+=2){const ct=xe[Be];Se.push(ct<0?null:Pk(c,se[ct],xe[Be+1],h.metadata.read))}W.matches=Se}return W.matches}function sy(o,c,h,I){const W=o.queries.getByIndex(h),se=W.matches;if(null!==se){const xe=U_(o,c,W,h);for(let Se=0;Se<se.length;Se+=2){const Be=se[Se];if(Be>0)I.push(xe[Se/2]);else{const ct=se[Se+1],Ot=c[-Be];for(let en=10;en<Ot.length;en++){const bn=Ot[en];bn[17]===bn[3]&&sy(bn[1],bn,ct,I)}if(null!==Ot[9]){const en=Ot[9];for(let bn=0;bn<en.length;bn++){const Sn=en[bn];sy(Sn[1],Sn,ct,I)}}}}}return I}function Tg(o){const c=Zr(),h=Pa(),I=U();X(I+1);const W=W_(h,I);if(o.dirty&&Ko(c)===(2==(2&W.metadata.flags))){if(null===W.matches)o.reset([]);else{const se=W.crossesNgTemplate?sy(h,c,I,[]):U_(h,c,W,I);o.reset(se,WA),o.notifyOnChanges()}return!0}return!1}function H_(o,c,h){const I=Pa();I.firstCreatePass&&(function(o,c,h){null===o.queries&&(o.queries=new ay),o.queries.track(new oy(c,h))}(I,new V_(o,c,h),-1),2==(2&c)&&(I.staticViewQueries=!0)),function(o,c,h){const I=new ty(4==(4&h));Wc(o,c,I,I.destroy),null===c[19]&&(c[19]=new iy),c[19].queries.push(new ry(I))}(I,Zr(),c)}function W_(o,c){return o.queries.getByIndex(c)}function Eg(...o){}const Cg=new xa("Application Initializer");let kd=(()=>{class o{constructor(h){this.appInits=h,this.resolve=Eg,this.reject=Eg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((I,W)=>{this.resolve=I,this.reject=W})}runInitializers(){if(this.initialized)return;const h=[],I=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let W=0;W<this.appInits.length;W++){const se=this.appInits[W]();if(Dp(se))h.push(se);else if(Vv(se)){const xe=new Promise((Se,Be)=>{se.subscribe({complete:Se,error:Be})});h.push(xe)}}Promise.all(h).then(()=>{I()}).catch(W=>{this.reject(W)}),0===h.length&&I(),this.initialized=!0}}return o.\u0275fac=function(h){return new(h||o)(Ki(Cg,8))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();const Hp=new xa("AppId"),n4={provide:Hp,useFactory:function(){return`${py()}${py()}${py()}`},deps:[]};function py(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const c2=new xa("Platform Initializer"),Sg=new xa("Platform ID"),f2=new xa("appBootstrapListener");let h2=(()=>{class o{log(h){console.log(h)}warn(h){console.warn(h)}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();const Lf=new xa("LocaleId"),d2=new xa("DefaultCurrencyCode");class r4{constructor(c,h){this.ngModuleFactory=c,this.componentFactories=h}}let Dg=(()=>{class o{compileModuleSync(h){return new Qv(h)}compileModuleAsync(h){return Promise.resolve(this.compileModuleSync(h))}compileModuleAndAllComponentsSync(h){const I=this.compileModuleSync(h),se=bl(fo(h).declarations).reduce((xe,Se)=>{const Be=co(Se);return Be&&xe.push(new Kv(Be)),xe},[]);return new r4(I,se)}compileModuleAndAllComponentsAsync(h){return Promise.resolve(this.compileModuleAndAllComponentsSync(h))}clearCache(){}clearCacheFor(h){}getModuleId(h){}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();const a4=(()=>Promise.resolve(0))();function gy(o){"undefined"==typeof Zone?a4.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class al{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:h=!1,shouldCoalesceRunChangeDetection:I=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ea(!1),this.onMicrotaskEmpty=new ea(!1),this.onStable=new ea(!1),this.onError=new ea(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const W=this;W._nesting=0,W._outer=W._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(W._inner=W._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(W._inner=W._inner.fork(Zone.longStackTraceZoneSpec)),W.shouldCoalesceEventChangeDetection=!I&&h,W.shouldCoalesceRunChangeDetection=I,W.lastRequestAnimationFrameId=-1,W.nativeRequestAnimationFrame=function(){let o=Bi.requestAnimationFrame,c=Bi.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&c){const h=o[Zone.__symbol__("OriginalDelegate")];h&&(o=h);const I=c[Zone.__symbol__("OriginalDelegate")];I&&(c=I)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function(o){const c=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Bi,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,vy(o),o.isCheckStableRunning=!0,my(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),vy(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(h,I,W,se,xe,Se)=>{try{return p2(o),h.invokeTask(W,se,xe,Se)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===se.type||o.shouldCoalesceRunChangeDetection)&&c(),g2(o)}},onInvoke:(h,I,W,se,xe,Se,Be)=>{try{return p2(o),h.invoke(W,se,xe,Se,Be)}finally{o.shouldCoalesceRunChangeDetection&&c(),g2(o)}},onHasTask:(h,I,W,se)=>{h.hasTask(W,se),I===W&&("microTask"==se.change?(o._hasPendingMicrotasks=se.microTask,vy(o),my(o)):"macroTask"==se.change&&(o.hasPendingMacrotasks=se.macroTask))},onHandleError:(h,I,W,se)=>(h.handleError(W,se),o.runOutsideAngular(()=>o.onError.emit(se)),!1)})}(W)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!al.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(al.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(c,h,I){return this._inner.run(c,h,I)}runTask(c,h,I,W){const se=this._inner,xe=se.scheduleEventTask("NgZoneEvent: "+W,c,s4,Eg,Eg);try{return se.runTask(xe,h,I)}finally{se.cancelTask(xe)}}runGuarded(c,h,I){return this._inner.runGuarded(c,h,I)}runOutsideAngular(c){return this._outer.run(c)}}const s4={};function my(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function vy(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function p2(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function g2(o){o._nesting--,my(o)}class c4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ea,this.onMicrotaskEmpty=new ea,this.onStable=new ea,this.onError=new ea}run(c,h,I){return c.apply(h,I)}runGuarded(c,h,I){return c.apply(h,I)}runOutsideAngular(c){return c()}runTask(c,h,I,W){return c.apply(h,I)}}let yy=(()=>{class o{constructor(h){this._ngZone=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),h.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{al.assertNotInAngularZone(),gy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gy(()=>{for(;0!==this._callbacks.length;){let h=this._callbacks.pop();clearTimeout(h.timeoutId),h.doneCb(this._didWork)}this._didWork=!1});else{let h=this.getPendingTasks();this._callbacks=this._callbacks.filter(I=>!I.updateCb||!I.updateCb(h)||(clearTimeout(I.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(h=>({source:h.source,creationLocation:h.creationLocation,data:h.data})):[]}addCallback(h,I,W){let se=-1;I&&I>0&&(se=setTimeout(()=>{this._callbacks=this._callbacks.filter(xe=>xe.timeoutId!==se),h(this._didWork,this.getPendingTasks())},I)),this._callbacks.push({doneCb:h,timeoutId:se,updateCb:W})}whenStable(h,I,W){if(W&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(h,I,W),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(h,I,W){return[]}}return o.\u0275fac=function(h){return new(h||o)(Ki(al))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})(),m2=(()=>{class o{constructor(){this._applications=new Map,xy.addToWindow(this)}registerApplication(h,I){this._applications.set(h,I)}unregisterApplication(h){this._applications.delete(h)}unregisterAllApplications(){this._applications.clear()}getTestability(h){return this._applications.get(h)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(h,I=!0){return xy.findTestabilityInTree(this,h,I)}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();class f4{addToWindow(c){}findTestabilityInTree(c,h,I){return null}}let Qu,xy=new f4;const v2=new xa("AllowMultipleToken");class y2{constructor(c,h){this.name=c,this.token=h}}function x2(o,c,h=[]){const I=`Platform: ${c}`,W=new xa(I);return(se=[])=>{let xe=b2();if(!xe||xe.injector.get(v2,!1))if(o)o(h.concat(se).concat({provide:W,useValue:!0}));else{const Se=h.concat(se).concat({provide:W,useValue:!0},{provide:Cv,useValue:"platform"});!function(o){if(Qu&&!Qu.destroyed&&!Qu.injector.get(v2,!1))throw new sr("400","");Qu=o.get(_2);const c=o.get(c2,null);c&&c.forEach(h=>h())}(Dl.create({providers:Se,name:I}))}return function(o){const c=b2();if(!c)throw new sr("401","");return c}()}}function b2(){return Qu&&!Qu.destroyed?Qu:null}let _2=(()=>{class o{constructor(h){this._injector=h,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(h,I){const Se=function(o,c){let h;return h="noop"===o?new c4:("zone.js"===o?void 0:o)||new al({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==c?void 0:c.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==c?void 0:c.ngZoneRunCoalescing)}),h}(I?I.ngZone:void 0,{ngZoneEventCoalescing:I&&I.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:I&&I.ngZoneRunCoalescing||!1}),Be=[{provide:al,useValue:Se}];return Se.run(()=>{const ct=Dl.create({providers:Be,parent:this.injector,name:h.moduleType.name}),Ot=h.create(ct),en=Ot.injector.get(Oc,null);if(!en)throw new sr("402","");return Se.runOutsideAngular(()=>{const bn=Se.onError.subscribe({next:Sn=>{en.handleError(Sn)}});Ot.onDestroy(()=>{by(this._modules,Ot),bn.unsubscribe()})}),function(o,c,h){try{const I=h();return Dp(I)?I.catch(W=>{throw c.runOutsideAngular(()=>o.handleError(W)),W}):I}catch(I){throw c.runOutsideAngular(()=>o.handleError(I)),I}}(en,Se,()=>{const bn=Ot.injector.get(kd);return bn.runInitializers(),bn.donePromise.then(()=>(function(o){Rn(o,"Expected localeId to be defined"),"string"==typeof o&&(Qb=o.toLowerCase().replace(/_/g,"-"))}(Ot.injector.get(Lf,mg)||mg),this._moduleDoBootstrap(Ot),Ot))})})}bootstrapModule(h,I=[]){const W=w2({},I);return function(o,c,h){const I=new Qv(h);return Promise.resolve(I)}(0,0,h).then(se=>this.bootstrapModuleFactory(se,W))}_moduleDoBootstrap(h){const I=h.injector.get(qp);if(h._bootstrapComponents.length>0)h._bootstrapComponents.forEach(W=>I.bootstrap(W));else{if(!h.instance.ngDoBootstrap)throw new sr("403","");h.instance.ngDoBootstrap(I)}this._modules.push(h)}onDestroy(h){this._destroyListeners.push(h)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new sr("404","");this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(h){return new(h||o)(Ki(Dl))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();function w2(o,c){return Array.isArray(c)?c.reduce(w2,o):ca(ca({},o),c)}let qp=(()=>{class o{constructor(h,I,W,se,xe){this._zone=h,this._injector=I,this._exceptionHandler=W,this._componentFactoryResolver=se,this._initStatus=xe,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const Se=new D(ct=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{ct.next(this._stable),ct.complete()})}),Be=new D(ct=>{let Ot;this._zone.runOutsideAngular(()=>{Ot=this._zone.onStable.subscribe(()=>{al.assertNotInAngularZone(),gy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,ct.next(!0))})})});const en=this._zone.onUnstable.subscribe(()=>{al.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{ct.next(!1)}))});return()=>{Ot.unsubscribe(),en.unsubscribe()}});this.isStable=function(...o){const c=gt(o),h=function(o,c){return"number"==typeof xt(o)?o.pop():1/0}(o),I=o;return I.length?1===I.length?ht(I[0]):je(h)(Ht(I,c)):Ne}(Se,Be.pipe(function(o={}){const{connector:c=(()=>new Y),resetOnError:h=!0,resetOnComplete:I=!0,resetOnRefCountZero:W=!0}=o;return se=>{let xe=null,Se=null,Be=null,ct=0,Ot=!1,en=!1;const bn=()=>{null==Se||Se.unsubscribe(),Se=null},Sn=()=>{bn(),xe=Be=null,Ot=en=!1},tr=()=>{const qr=xe;Sn(),null==qr||qr.unsubscribe()};return $((qr,ei)=>{ct++,!en&&!Ot&&bn();const ri=Be=null!=Be?Be:c();ei.add(()=>{ct--,0===ct&&!en&&!Ot&&(Se=sn(tr,W))}),ri.subscribe(ei),xe||(xe=new v({next:Nr=>ri.next(Nr),error:Nr=>{en=!0,bn(),Se=sn(Sn,h,Nr),ri.error(Nr)},complete:()=>{Ot=!0,bn(),Se=sn(Sn,I),ri.complete()}}),Ht(qr).subscribe(xe))})(se)}}()))}bootstrap(h,I){if(!this._initStatus.done)throw new sr("405","");let W;W=h instanceof M_?h:this._componentFactoryResolver.resolveComponentFactory(h),this.componentTypes.push(W.componentType);const se=function(o){return o.isBoundToModule}(W)?void 0:this._injector.get(Xc),Se=W.create(Dl.NULL,[],I||W.selector,se),Be=Se.location.nativeElement,ct=Se.injector.get(yy,null),Ot=ct&&Se.injector.get(m2);return ct&&Ot&&Ot.registerApplication(Be,ct),Se.onDestroy(()=>{this.detachView(Se.hostView),by(this.components,Se),Ot&&Ot.unregisterApplication(Be)}),this._loadComponent(Se),Se}tick(){if(this._runningTick)throw new sr("101","");try{this._runningTick=!0;for(let h of this._views)h.detectChanges()}catch(h){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(h))}finally{this._runningTick=!1}}attachView(h){const I=h;this._views.push(I),I.attachToAppRef(this)}detachView(h){const I=h;by(this._views,I),I.detachFromAppRef()}_loadComponent(h){this.attachView(h.hostView),this.tick(),this.components.push(h),this._injector.get(f2,[]).concat(this._bootstrapListeners).forEach(W=>W(h))}ngOnDestroy(){this._views.slice().forEach(h=>h.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(h){return new(h||o)(Ki(al),Ki(Dl),Ki(Oc),Ki(wd),Ki(kd))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();function by(o,c){const h=o.indexOf(c);h>-1&&o.splice(h,1)}let M2=!0,_y=(()=>{class o{}return o.__NG_ELEMENT_ID__=w4,o})();function w4(o){return function(o,c,h){if(io(o)&&!h){const I=da(o.index,c);return new Bp(I,I)}return 47&o.type?new Bp(c[16],c):null}(Qi(),Zr(),16==(16&o))}class I2{constructor(){}supports(c){return Cp(c)}create(c){return new S4(c)}}const C4=(o,c)=>c;class S4{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||C4}forEachItem(c){let h;for(h=this._itHead;null!==h;h=h._next)c(h)}forEachOperation(c){let h=this._itHead,I=this._removalsHead,W=0,se=null;for(;h||I;){const xe=!I||h&&h.currentIndex<P2(I,W,se)?h:I,Se=P2(xe,W,se),Be=xe.currentIndex;if(xe===I)W--,I=I._nextRemoved;else if(h=h._next,null==xe.previousIndex)W++;else{se||(se=[]);const ct=Se-W,Ot=Be-W;if(ct!=Ot){for(let bn=0;bn<ct;bn++){const Sn=bn<se.length?se[bn]:se[bn]=0,tr=Sn+bn;Ot<=tr&&tr<ct&&(se[bn]=Sn+1)}se[xe.previousIndex]=Ot-ct}}Se!==Be&&c(xe,Se,Be)}}forEachPreviousItem(c){let h;for(h=this._previousItHead;null!==h;h=h._nextPrevious)c(h)}forEachAddedItem(c){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)c(h)}forEachMovedItem(c){let h;for(h=this._movesHead;null!==h;h=h._nextMoved)c(h)}forEachRemovedItem(c){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)c(h)}forEachIdentityChange(c){let h;for(h=this._identityChangesHead;null!==h;h=h._nextIdentityChange)c(h)}diff(c){if(null==c&&(c=[]),!Cp(c))throw new Error(`Error trying to diff '${_n(c)}'. Only arrays and iterables are allowed`);return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let W,se,xe,h=this._itHead,I=!1;if(Array.isArray(c)){this.length=c.length;for(let Se=0;Se<this.length;Se++)se=c[Se],xe=this._trackByFn(Se,se),null!==h&&Object.is(h.trackById,xe)?(I&&(h=this._verifyReinsertion(h,se,xe,Se)),Object.is(h.item,se)||this._addIdentityChange(h,se)):(h=this._mismatch(h,se,xe,Se),I=!0),h=h._next}else W=0,function(o,c){if(Array.isArray(o))for(let h=0;h<o.length;h++)c(o[h]);else{const h=o[sd()]();let I;for(;!(I=h.next()).done;)c(I.value)}}(c,Se=>{xe=this._trackByFn(W,Se),null!==h&&Object.is(h.trackById,xe)?(I&&(h=this._verifyReinsertion(h,Se,xe,W)),Object.is(h.item,Se)||this._addIdentityChange(h,Se)):(h=this._mismatch(h,Se,xe,W),I=!0),h=h._next,W++}),this.length=W;return this._truncate(h),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,h,I,W){let se;return null===c?se=this._itTail:(se=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(I,null))?(Object.is(c.item,h)||this._addIdentityChange(c,h),this._reinsertAfter(c,se,W)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(I,W))?(Object.is(c.item,h)||this._addIdentityChange(c,h),this._moveAfter(c,se,W)):c=this._addAfter(new D4(h,I),se,W),c}_verifyReinsertion(c,h,I,W){let se=null===this._unlinkedRecords?null:this._unlinkedRecords.get(I,null);return null!==se?c=this._reinsertAfter(se,c._prev,W):c.currentIndex!=W&&(c.currentIndex=W,this._addToMoves(c,W)),c}_truncate(c){for(;null!==c;){const h=c._next;this._addToRemovals(this._unlink(c)),c=h}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,h,I){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const W=c._prevRemoved,se=c._nextRemoved;return null===W?this._removalsHead=se:W._nextRemoved=se,null===se?this._removalsTail=W:se._prevRemoved=W,this._insertAfter(c,h,I),this._addToMoves(c,I),c}_moveAfter(c,h,I){return this._unlink(c),this._insertAfter(c,h,I),this._addToMoves(c,I),c}_addAfter(c,h,I){return this._insertAfter(c,h,I),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,h,I){const W=null===h?this._itHead:h._next;return c._next=W,c._prev=h,null===W?this._itTail=c:W._prev=c,null===h?this._itHead=c:h._next=c,null===this._linkedRecords&&(this._linkedRecords=new L2),this._linkedRecords.put(c),c.currentIndex=I,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const h=c._prev,I=c._next;return null===h?this._itHead=I:h._next=I,null===I?this._itTail=h:I._prev=h,c}_addToMoves(c,h){return c.previousIndex===h||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new L2),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,h){return c.item=h,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class D4{constructor(c,h){this.item=c,this.trackById=h,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class I4{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,h){let I;for(I=this._head;null!==I;I=I._nextDup)if((null===h||h<=I.currentIndex)&&Object.is(I.trackById,c))return I;return null}remove(c){const h=c._prevDup,I=c._nextDup;return null===h?this._head=I:h._nextDup=I,null===I?this._tail=h:I._prevDup=h,null===this._head}}class L2{constructor(){this.map=new Map}put(c){const h=c.trackById;let I=this.map.get(h);I||(I=new I4,this.map.set(h,I)),I.add(c)}get(c,h){const W=this.map.get(c);return W?W.get(c,h):null}remove(c){const h=c.trackById;return this.map.get(h).remove(c)&&this.map.delete(h),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function P2(o,c,h){const I=o.previousIndex;if(null===I)return I;let W=0;return h&&I<h.length&&(W=h[I]),I+c+W}class O2{constructor(){}supports(c){return c instanceof Map||Ov(c)}create(){return new L4}}class L4{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let h;for(h=this._mapHead;null!==h;h=h._next)c(h)}forEachPreviousItem(c){let h;for(h=this._previousMapHead;null!==h;h=h._nextPrevious)c(h)}forEachChangedItem(c){let h;for(h=this._changesHead;null!==h;h=h._nextChanged)c(h)}forEachAddedItem(c){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)c(h)}forEachRemovedItem(c){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)c(h)}diff(c){if(c){if(!(c instanceof Map||Ov(c)))throw new Error(`Error trying to diff '${_n(c)}'. Only maps and objects are allowed`)}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let h=this._mapHead;if(this._appendAfter=null,this._forEach(c,(I,W)=>{if(h&&h.key===W)this._maybeAddToChanges(h,I),this._appendAfter=h,h=h._next;else{const se=this._getOrCreateRecordForKey(W,I);h=this._insertBeforeOrAppend(h,se)}}),h){h._prev&&(h._prev._next=null),this._removalsHead=h;for(let I=h;null!==I;I=I._nextRemoved)I===this._mapHead&&(this._mapHead=null),this._records.delete(I.key),I._nextRemoved=I._next,I.previousValue=I.currentValue,I.currentValue=null,I._prev=null,I._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,h){if(c){const I=c._prev;return h._next=c,h._prev=I,c._prev=h,I&&(I._next=h),c===this._mapHead&&(this._mapHead=h),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=h,h._prev=this._appendAfter):this._mapHead=h,this._appendAfter=h,null}_getOrCreateRecordForKey(c,h){if(this._records.has(c)){const W=this._records.get(c);this._maybeAddToChanges(W,h);const se=W._prev,xe=W._next;return se&&(se._next=xe),xe&&(xe._prev=se),W._next=null,W._prev=null,W}const I=new P4(c);return this._records.set(c,I),I.currentValue=h,this._addToAdditions(I),I}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,h){Object.is(h,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=h,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,h){c instanceof Map?c.forEach(h):Object.keys(c).forEach(I=>h(c[I],I))}}class P4{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function R2(){return new Ed([new I2])}let Ed=(()=>{class o{constructor(h){this.factories=h}static create(h,I){if(null!=I){const W=I.factories.slice();h=h.concat(W)}return new o(h)}static extend(h){return{provide:o,useFactory:I=>o.create(h,I||R2()),deps:[[o,new ff,new Os]]}}find(h){const I=this.factories.find(W=>W.supports(h));if(null!=I)return I;throw new Error(`Cannot find a differ supporting object '${h}' of type '${function(o){return o.name||typeof o}(h)}'`)}}return o.\u0275prov=Zn({token:o,providedIn:"root",factory:R2}),o})();function F2(){return new kh([new O2])}let kh=(()=>{class o{constructor(h){this.factories=h}static create(h,I){if(I){const W=I.factories.slice();h=h.concat(W)}return new o(h)}static extend(h){return{provide:o,useFactory:I=>o.create(h,I||F2()),deps:[[o,new ff,new Os]]}}find(h){const I=this.factories.find(W=>W.supports(h));if(I)return I;throw new Error(`Cannot find a differ supporting object '${h}'`)}}return o.\u0275prov=Zn({token:o,providedIn:"root",factory:F2}),o})();const R4=[new O2],z4=new Ed([new I2]),N4=new kh(R4),B4=x2(null,"core",[{provide:Sg,useValue:"unknown"},{provide:_2,deps:[Dl]},{provide:m2,deps:[]},{provide:h2,deps:[]}]),q4=[{provide:qp,useClass:qp,deps:[al,Dl,Oc,wd,kd]},{provide:QA,deps:[al],useFactory:function(o){let c=[];return o.onStable.subscribe(()=>{for(;c.length;)c.pop()()}),function(h){c.push(h)}}},{provide:kd,useClass:kd,deps:[[new Os,Cg]]},{provide:Dg,useClass:Dg,deps:[]},n4,{provide:Ed,useFactory:function(){return z4},deps:[]},{provide:kh,useFactory:function(){return N4},deps:[]},{provide:Lf,useFactory:function(o){return o||"undefined"!=typeof $localize&&$localize.locale||mg},deps:[[new Vu(Lf),new Os,new ff]]},{provide:d2,useValue:"USD"}];let W4=(()=>{class o{constructor(h){}}return o.\u0275fac=function(h){return new(h||o)(Ki(qp))},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({providers:q4}),o})(),Lg=null;function yc(){return Lg}const gu=new xa("DocumentToken");let Eh=(()=>{class o{historyGo(h){throw new Error("Not implemented")}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275prov=Zn({token:o,factory:function(){return Ki(z2)},providedIn:"platform"}),o})();const J4=new xa("Location Initialized");let z2=(()=>{class o extends Eh{constructor(h){super(),this._doc=h,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return yc().getBaseHref(this._doc)}onPopState(h){const I=yc().getGlobalEventTarget(this._doc,"window");return I.addEventListener("popstate",h,!1),()=>I.removeEventListener("popstate",h)}onHashChange(h){const I=yc().getGlobalEventTarget(this._doc,"window");return I.addEventListener("hashchange",h,!1),()=>I.removeEventListener("hashchange",h)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(h){this.location.pathname=h}pushState(h,I,W){N2()?this._history.pushState(h,I,W):this.location.hash=W}replaceState(h,I,W){N2()?this._history.replaceState(h,I,W):this.location.hash=W}forward(){this._history.forward()}back(){this._history.back()}historyGo(h=0){this._history.go(h)}getState(){return this._history.state}}return o.\u0275fac=function(h){return new(h||o)(Ki(gu))},o.\u0275prov=Zn({token:o,factory:function(){return new z2(Ki(gu))},providedIn:"platform"}),o})();function N2(){return!!window.history.pushState}function ky(o,c){if(0==o.length)return c;if(0==c.length)return o;let h=0;return o.endsWith("/")&&h++,c.startsWith("/")&&h++,2==h?o+c.substring(1):1==h?o+c:o+"/"+c}function B2(o){const c=o.match(/#|\?|$/),h=c&&c.index||o.length;return o.slice(0,h-("/"===o[h-1]?1:0))+o.slice(h)}function Jc(o){return o&&"?"!==o[0]?"?"+o:o}let Cd=(()=>{class o{historyGo(h){throw new Error("Not implemented")}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275prov=Zn({token:o,factory:function(){return function(o){const c=Ki(gu).location;return new j2(Ki(Eh),c&&c.origin||"")}()},providedIn:"root"}),o})();const Ey=new xa("appBaseHref");let j2=(()=>{class o extends Cd{constructor(h,I){if(super(),this._platformLocation=h,this._removeListenerFns=[],null==I&&(I=this._platformLocation.getBaseHrefFromDOM()),null==I)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=I}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(h){this._removeListenerFns.push(this._platformLocation.onPopState(h),this._platformLocation.onHashChange(h))}getBaseHref(){return this._baseHref}prepareExternalUrl(h){return ky(this._baseHref,h)}path(h=!1){const I=this._platformLocation.pathname+Jc(this._platformLocation.search),W=this._platformLocation.hash;return W&&h?`${I}${W}`:I}pushState(h,I,W,se){const xe=this.prepareExternalUrl(W+Jc(se));this._platformLocation.pushState(h,I,xe)}replaceState(h,I,W,se){const xe=this.prepareExternalUrl(W+Jc(se));this._platformLocation.replaceState(h,I,xe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(h=0){var I,W;null==(W=(I=this._platformLocation).historyGo)||W.call(I,h)}}return o.\u0275fac=function(h){return new(h||o)(Ki(Eh),Ki(Ey,8))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})(),e6=(()=>{class o extends Cd{constructor(h,I){super(),this._platformLocation=h,this._baseHref="",this._removeListenerFns=[],null!=I&&(this._baseHref=I)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(h){this._removeListenerFns.push(this._platformLocation.onPopState(h),this._platformLocation.onHashChange(h))}getBaseHref(){return this._baseHref}path(h=!1){let I=this._platformLocation.hash;return null==I&&(I="#"),I.length>0?I.substring(1):I}prepareExternalUrl(h){const I=ky(this._baseHref,h);return I.length>0?"#"+I:I}pushState(h,I,W,se){let xe=this.prepareExternalUrl(W+Jc(se));0==xe.length&&(xe=this._platformLocation.pathname),this._platformLocation.pushState(h,I,xe)}replaceState(h,I,W,se){let xe=this.prepareExternalUrl(W+Jc(se));0==xe.length&&(xe=this._platformLocation.pathname),this._platformLocation.replaceState(h,I,xe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(h=0){var I,W;null==(W=(I=this._platformLocation).historyGo)||W.call(I,h)}}return o.\u0275fac=function(h){return new(h||o)(Ki(Eh),Ki(Ey,8))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})(),Cy=(()=>{class o{constructor(h,I){this._subject=new ea,this._urlChangeListeners=[],this._platformStrategy=h;const W=this._platformStrategy.getBaseHref();this._platformLocation=I,this._baseHref=B2(V2(W)),this._platformStrategy.onPopState(se=>{this._subject.emit({url:this.path(!0),pop:!0,state:se.state,type:se.type})})}path(h=!1){return this.normalize(this._platformStrategy.path(h))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(h,I=""){return this.path()==this.normalize(h+Jc(I))}normalize(h){return o.stripTrailingSlash(function(o,c){return o&&c.startsWith(o)?c.substring(o.length):c}(this._baseHref,V2(h)))}prepareExternalUrl(h){return h&&"/"!==h[0]&&(h="/"+h),this._platformStrategy.prepareExternalUrl(h)}go(h,I="",W=null){this._platformStrategy.pushState(W,"",h,I),this._notifyUrlChangeListeners(this.prepareExternalUrl(h+Jc(I)),W)}replaceState(h,I="",W=null){this._platformStrategy.replaceState(W,"",h,I),this._notifyUrlChangeListeners(this.prepareExternalUrl(h+Jc(I)),W)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(h=0){var I,W;null==(W=(I=this._platformStrategy).historyGo)||W.call(I,h)}onUrlChange(h){this._urlChangeListeners.push(h),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(I=>{this._notifyUrlChangeListeners(I.url,I.state)}))}_notifyUrlChangeListeners(h="",I){this._urlChangeListeners.forEach(W=>W(h,I))}subscribe(h,I,W){return this._subject.subscribe({next:h,error:I,complete:W})}}return o.normalizeQueryParams=Jc,o.joinWithSlash=ky,o.stripTrailingSlash=B2,o.\u0275fac=function(h){return new(h||o)(Ki(Cd),Ki(Eh))},o.\u0275prov=Zn({token:o,factory:function(){return new Cy(Ki(Cd),Ki(Eh))},providedIn:"root"}),o})();function V2(o){return o.replace(/\/index.html$/,"")}var $s=(()=>(($s=$s||{})[$s.Zero=0]="Zero",$s[$s.One=1]="One",$s[$s.Two=2]="Two",$s[$s.Few=3]="Few",$s[$s.Many=4]="Many",$s[$s.Other=5]="Other",$s))();const u6=function(o){return function(o){const c=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let h=Kb(c);if(h)return h;const I=c.split("-")[0];if(h=Kb(I),h)return h;if("en"===I)return UM;throw new Error(`Missing locale data for the locale "${o}".`)}(o)[zi.PluralCase]};class Ug{}let N6=(()=>{class o extends Ug{constructor(h){super(),this.locale=h}getPluralCategory(h,I){switch(u6(I||this.locale)(h)){case $s.Zero:return"zero";case $s.One:return"one";case $s.Two:return"two";case $s.Few:return"few";case $s.Many:return"many";default:return"other"}}}return o.\u0275fac=function(h){return new(h||o)(Ki(Lf))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();function $2(o,c){c=encodeURIComponent(c);for(const h of o.split(";")){const I=h.indexOf("="),[W,se]=-1==I?[h,""]:[h.slice(0,I),h.slice(I+1)];if(W.trim()===c)return decodeURIComponent(se)}return null}let J2=(()=>{class o{constructor(h,I,W,se){this._iterableDiffers=h,this._keyValueDiffers=I,this._ngEl=W,this._renderer=se,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(h){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof h?h.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(h){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof h?h.split(/\s+/):h,this._rawClass&&(Cp(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const h=this._iterableDiffer.diff(this._rawClass);h&&this._applyIterableChanges(h)}else if(this._keyValueDiffer){const h=this._keyValueDiffer.diff(this._rawClass);h&&this._applyKeyValueChanges(h)}}_applyKeyValueChanges(h){h.forEachAddedItem(I=>this._toggleClass(I.key,I.currentValue)),h.forEachChangedItem(I=>this._toggleClass(I.key,I.currentValue)),h.forEachRemovedItem(I=>{I.previousValue&&this._toggleClass(I.key,!1)})}_applyIterableChanges(h){h.forEachAddedItem(I=>{if("string"!=typeof I.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${_n(I.item)}`);this._toggleClass(I.item,!0)}),h.forEachRemovedItem(I=>this._toggleClass(I.item,!1))}_applyClasses(h){h&&(Array.isArray(h)||h instanceof Set?h.forEach(I=>this._toggleClass(I,!0)):Object.keys(h).forEach(I=>this._toggleClass(I,!!h[I])))}_removeClasses(h){h&&(Array.isArray(h)||h instanceof Set?h.forEach(I=>this._toggleClass(I,!1)):Object.keys(h).forEach(I=>this._toggleClass(I,!1)))}_toggleClass(h,I){(h=h.trim())&&h.split(/\s+/g).forEach(W=>{I?this._renderer.addClass(this._ngEl.nativeElement,W):this._renderer.removeClass(this._ngEl.nativeElement,W)})}}return o.\u0275fac=function(h){return new(h||o)(ai(Ed),ai(kh),ai(pu),ai(Zc))},o.\u0275dir=Ui({type:o,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),o})();class j6{constructor(c,h,I,W){this.$implicit=c,this.ngForOf=h,this.index=I,this.count=W}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zy=(()=>{class o{constructor(h,I,W){this._viewContainer=h,this._template=I,this._differs=W,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(h){this._ngForOf=h,this._ngForOfDirty=!0}set ngForTrackBy(h){this._trackByFn=h}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(h){h&&(this._template=h)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const h=this._ngForOf;if(!this._differ&&h)try{this._differ=this._differs.find(h).create(this.ngForTrackBy)}catch(I){throw new Error(`Cannot find a differ supporting object '${h}' of type '${function(o){return o.name||typeof o}(h)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const h=this._differ.diff(this._ngForOf);h&&this._applyChanges(h)}}_applyChanges(h){const I=[];h.forEachOperation((W,se,xe)=>{if(null==W.previousIndex){const Se=this._viewContainer.createEmbeddedView(this._template,new j6(null,this._ngForOf,-1,-1),null===xe?void 0:xe),Be=new K2(W,Se);I.push(Be)}else if(null==xe)this._viewContainer.remove(null===se?void 0:se);else if(null!==se){const Se=this._viewContainer.get(se);this._viewContainer.move(Se,xe);const Be=new K2(W,Se);I.push(Be)}});for(let W=0;W<I.length;W++)this._perViewChange(I[W].view,I[W].record);for(let W=0,se=this._viewContainer.length;W<se;W++){const xe=this._viewContainer.get(W);xe.context.index=W,xe.context.count=se,xe.context.ngForOf=this._ngForOf}h.forEachIdentityChange(W=>{this._viewContainer.get(W.currentIndex).context.$implicit=W.item})}_perViewChange(h,I){h.context.$implicit=I.item}static ngTemplateContextGuard(h,I){return!0}}return o.\u0275fac=function(h){return new(h||o)(ai(Ku),ai($c),ai(Ed))},o.\u0275dir=Ui({type:o,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),o})();class K2{constructor(c,h){this.record=c,this.view=h}}let Hg=(()=>{class o{constructor(h,I){this._viewContainer=h,this._context=new U6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=I}set ngIf(h){this._context.$implicit=this._context.ngIf=h,this._updateView()}set ngIfThen(h){Q2("ngIfThen",h),this._thenTemplateRef=h,this._thenViewRef=null,this._updateView()}set ngIfElse(h){Q2("ngIfElse",h),this._elseTemplateRef=h,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(h,I){return!0}}return o.\u0275fac=function(h){return new(h||o)(ai(Ku),ai($c))},o.\u0275dir=Ui({type:o,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),o})();class U6{constructor(){this.$implicit=null,this.ngIf=null}}function Q2(o,c){if(c&&!c.createEmbeddedView)throw new Error(`${o} must be a TemplateRef, but received '${_n(c)}'.`)}let tw=(()=>{class o{constructor(h,I,W){this._ngEl=h,this._differs=I,this._renderer=W,this._ngStyle=null,this._differ=null}set ngStyle(h){this._ngStyle=h,!this._differ&&h&&(this._differ=this._differs.find(h).create())}ngDoCheck(){if(this._differ){const h=this._differ.diff(this._ngStyle);h&&this._applyChanges(h)}}_setStyle(h,I){const[W,se]=h.split(".");null!=(I=null!=I&&se?`${I}${se}`:I)?this._renderer.setStyle(this._ngEl.nativeElement,W,I):this._renderer.removeStyle(this._ngEl.nativeElement,W)}_applyChanges(h){h.forEachRemovedItem(I=>this._setStyle(I.key,null)),h.forEachAddedItem(I=>this._setStyle(I.key,I.currentValue)),h.forEachChangedItem(I=>this._setStyle(I.key,I.currentValue))}}return o.\u0275fac=function(h){return new(h||o)(ai(pu),ai(kh),ai(Zc))},o.\u0275dir=Ui({type:o,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),o})(),Yp=(()=>{class o{}return o.\u0275fac=function(h){return new(h||o)},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({providers:[{provide:Ug,useClass:N6}]}),o})();let vE=(()=>{class o{}return o.\u0275prov=Zn({token:o,providedIn:"root",factory:()=>new yE(Ki(gu),window)}),o})();class yE{constructor(c,h){this.document=c,this.window=h,this.offset=()=>[0,0]}setOffset(c){this.offset=Array.isArray(c)?()=>c:c}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(c){this.supportsScrolling()&&this.window.scrollTo(c[0],c[1])}scrollToAnchor(c){if(!this.supportsScrolling())return;const h=function(o,c){const h=o.getElementById(c)||o.getElementsByName(c)[0];if(h)return h;if("function"==typeof o.createTreeWalker&&o.body&&(o.body.createShadowRoot||o.body.attachShadow)){const I=o.createTreeWalker(o.body,NodeFilter.SHOW_ELEMENT);let W=I.currentNode;for(;W;){const se=W.shadowRoot;if(se){const xe=se.getElementById(c)||se.querySelector(`[name="${c}"]`);if(xe)return xe}W=I.nextNode()}}return null}(this.document,c);h&&(this.scrollToElement(h),this.attemptFocus(h))}setHistoryScrollRestoration(c){if(this.supportScrollRestoration()){const h=this.window.history;h&&h.scrollRestoration&&(h.scrollRestoration=c)}}scrollToElement(c){const h=c.getBoundingClientRect(),I=h.left+this.window.pageXOffset,W=h.top+this.window.pageYOffset,se=this.offset();this.window.scrollTo(I-se[0],W-se[1])}attemptFocus(c){return c.focus(),this.document.activeElement===c}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const c=iw(this.window.history)||iw(Object.getPrototypeOf(this.window.history));return!(!c||!c.writable&&!c.set)}catch(c){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(c){return!1}}}function iw(o){return Object.getOwnPropertyDescriptor(o,"scrollRestoration")}class aw{}class Uy extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var o;o=new Uy,Lg||(Lg=o)}onAndCancel(c,h,I){return c.addEventListener(h,I,!1),()=>{c.removeEventListener(h,I,!1)}}dispatchEvent(c,h){c.dispatchEvent(h)}remove(c){c.parentNode&&c.parentNode.removeChild(c)}createElement(c,h){return(h=h||this.getDefaultDocument()).createElement(c)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(c){return c.nodeType===Node.ELEMENT_NODE}isShadowRoot(c){return c instanceof DocumentFragment}getGlobalEventTarget(c,h){return"window"===h?window:"document"===h?c:"body"===h?c.body:null}getBaseHref(c){const h=(Zp=Zp||document.querySelector("base"),Zp?Zp.getAttribute("href"):null);return null==h?null:function(o){qg=qg||document.createElement("a"),qg.setAttribute("href",o);const c=qg.pathname;return"/"===c.charAt(0)?c:`/${c}`}(h)}resetBaseElement(){Zp=null}getUserAgent(){return window.navigator.userAgent}getCookie(c){return $2(document.cookie,c)}}let qg,Zp=null;const ow=new xa("TRANSITION_ID"),ME=[{provide:Cg,useFactory:function(o,c,h){return()=>{h.get(kd).donePromise.then(()=>{const I=yc(),W=c.querySelectorAll(`style[ng-transition="${o}"]`);for(let se=0;se<W.length;se++)I.remove(W[se])})}},deps:[ow,gu,Dl],multi:!0}];class Hy{static init(){var o;o=new Hy,xy=o}addToWindow(c){Bi.getAngularTestability=(I,W=!0)=>{const se=c.findTestabilityInTree(I,W);if(null==se)throw new Error("Could not find testability for element.");return se},Bi.getAllAngularTestabilities=()=>c.getAllTestabilities(),Bi.getAllAngularRootElements=()=>c.getAllRootElements(),Bi.frameworkStabilizers||(Bi.frameworkStabilizers=[]),Bi.frameworkStabilizers.push(I=>{const W=Bi.getAllAngularTestabilities();let se=W.length,xe=!1;const Se=function(Be){xe=xe||Be,se--,0==se&&I(xe)};W.forEach(function(Be){Be.whenStable(Se)})})}findTestabilityInTree(c,h,I){if(null==h)return null;const W=c.getTestability(h);return null!=W?W:I?yc().isShadowRoot(h)?this.findTestabilityInTree(c,h.host,!0):this.findTestabilityInTree(c,h.parentElement,!0):null}}let AE=(()=>{class o{build(){return new XMLHttpRequest}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();const Gg=new xa("EventManagerPlugins");let Wg=(()=>{class o{constructor(h,I){this._zone=I,this._eventNameToPlugin=new Map,h.forEach(W=>W.manager=this),this._plugins=h.slice().reverse()}addEventListener(h,I,W){return this._findPluginFor(I).addEventListener(h,I,W)}addGlobalEventListener(h,I,W){return this._findPluginFor(I).addGlobalEventListener(h,I,W)}getZone(){return this._zone}_findPluginFor(h){const I=this._eventNameToPlugin.get(h);if(I)return I;const W=this._plugins;for(let se=0;se<W.length;se++){const xe=W[se];if(xe.supports(h))return this._eventNameToPlugin.set(h,xe),xe}throw new Error(`No event manager plugin found for event ${h}`)}}return o.\u0275fac=function(h){return new(h||o)(Ki(Gg),Ki(al))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();class sw{constructor(c){this._doc=c}addGlobalEventListener(c,h,I){const W=yc().getGlobalEventTarget(this._doc,c);if(!W)throw new Error(`Unsupported event target ${W} for event ${h}`);return this.addEventListener(W,h,I)}}let lw=(()=>{class o{constructor(){this._stylesSet=new Set}addStyles(h){const I=new Set;h.forEach(W=>{this._stylesSet.has(W)||(this._stylesSet.add(W),I.add(W))}),this.onStylesAdded(I)}onStylesAdded(h){}getAllStyles(){return Array.from(this._stylesSet)}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})(),Xp=(()=>{class o extends lw{constructor(h){super(),this._doc=h,this._hostNodes=new Map,this._hostNodes.set(h.head,[])}_addStylesToHost(h,I,W){h.forEach(se=>{const xe=this._doc.createElement("style");xe.textContent=se,W.push(I.appendChild(xe))})}addHost(h){const I=[];this._addStylesToHost(this._stylesSet,h,I),this._hostNodes.set(h,I)}removeHost(h){const I=this._hostNodes.get(h);I&&I.forEach(uw),this._hostNodes.delete(h)}onStylesAdded(h){this._hostNodes.forEach((I,W)=>{this._addStylesToHost(h,W,I)})}ngOnDestroy(){this._hostNodes.forEach(h=>h.forEach(uw))}}return o.\u0275fac=function(h){return new(h||o)(Ki(gu))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();function uw(o){yc().remove(o)}const qy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Gy=/%COMP%/g;function Yg(o,c,h){for(let I=0;I<c.length;I++){let W=c[I];Array.isArray(W)?Yg(o,W,h):(W=W.replace(Gy,o),h.push(W))}return h}function hw(o){return c=>{if("__ngUnwrap__"===c)return o;!1===o(c)&&(c.preventDefault(),c.returnValue=!1)}}let Wy=(()=>{class o{constructor(h,I,W){this.eventManager=h,this.sharedStylesHost=I,this.appId=W,this.rendererByCompId=new Map,this.defaultRenderer=new Yy(h)}createRenderer(h,I){if(!h||!I)return this.defaultRenderer;switch(I.encapsulation){case Bo.Emulated:{let W=this.rendererByCompId.get(I.id);return W||(W=new IE(this.eventManager,this.sharedStylesHost,I,this.appId),this.rendererByCompId.set(I.id,W)),W.applyToHost(h),W}case 1:case Bo.ShadowDom:return new LE(this.eventManager,this.sharedStylesHost,h,I);default:if(!this.rendererByCompId.has(I.id)){const W=Yg(I.id,I.styles,[]);this.sharedStylesHost.addStyles(W),this.rendererByCompId.set(I.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return o.\u0275fac=function(h){return new(h||o)(Ki(Wg),Ki(Xp),Ki(Hp))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();class Yy{constructor(c){this.eventManager=c,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(c,h){return h?document.createElementNS(qy[h]||h,c):document.createElement(c)}createComment(c){return document.createComment(c)}createText(c){return document.createTextNode(c)}appendChild(c,h){c.appendChild(h)}insertBefore(c,h,I){c&&c.insertBefore(h,I)}removeChild(c,h){c&&c.removeChild(h)}selectRootElement(c,h){let I="string"==typeof c?document.querySelector(c):c;if(!I)throw new Error(`The selector "${c}" did not match any elements`);return h||(I.textContent=""),I}parentNode(c){return c.parentNode}nextSibling(c){return c.nextSibling}setAttribute(c,h,I,W){if(W){h=W+":"+h;const se=qy[W];se?c.setAttributeNS(se,h,I):c.setAttribute(h,I)}else c.setAttribute(h,I)}removeAttribute(c,h,I){if(I){const W=qy[I];W?c.removeAttributeNS(W,h):c.removeAttribute(`${I}:${h}`)}else c.removeAttribute(h)}addClass(c,h){c.classList.add(h)}removeClass(c,h){c.classList.remove(h)}setStyle(c,h,I,W){W&(_l.DashCase|_l.Important)?c.style.setProperty(h,I,W&_l.Important?"important":""):c.style[h]=I}removeStyle(c,h,I){I&_l.DashCase?c.style.removeProperty(h):c.style[h]=""}setProperty(c,h,I){c[h]=I}setValue(c,h){c.nodeValue=h}listen(c,h,I){return"string"==typeof c?this.eventManager.addGlobalEventListener(c,h,hw(I)):this.eventManager.addEventListener(c,h,hw(I))}}class IE extends Yy{constructor(c,h,I,W){super(c),this.component=I;const se=Yg(W+"-"+I.id,I.styles,[]);h.addStyles(se),this.contentAttr="_ngcontent-%COMP%".replace(Gy,W+"-"+I.id),this.hostAttr="_nghost-%COMP%".replace(Gy,W+"-"+I.id)}applyToHost(c){super.setAttribute(c,this.hostAttr,"")}createElement(c,h){const I=super.createElement(c,h);return super.setAttribute(I,this.contentAttr,""),I}}class LE extends Yy{constructor(c,h,I,W){super(c),this.sharedStylesHost=h,this.hostEl=I,this.shadowRoot=I.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const se=Yg(W.id,W.styles,[]);for(let xe=0;xe<se.length;xe++){const Se=document.createElement("style");Se.textContent=se[xe],this.shadowRoot.appendChild(Se)}}nodeOrShadowRoot(c){return c===this.hostEl?this.shadowRoot:c}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(c,h){return super.appendChild(this.nodeOrShadowRoot(c),h)}insertBefore(c,h,I){return super.insertBefore(this.nodeOrShadowRoot(c),h,I)}removeChild(c,h){return super.removeChild(this.nodeOrShadowRoot(c),h)}parentNode(c){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(c)))}}let PE=(()=>{class o extends sw{constructor(h){super(h)}supports(h){return!0}addEventListener(h,I,W){return h.addEventListener(I,W,!1),()=>this.removeEventListener(h,I,W)}removeEventListener(h,I,W){return h.removeEventListener(I,W)}}return o.\u0275fac=function(h){return new(h||o)(Ki(gu))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();const pw=["alt","control","meta","shift"],RE={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gw={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},FE={alt:o=>o.altKey,control:o=>o.ctrlKey,meta:o=>o.metaKey,shift:o=>o.shiftKey};let zE=(()=>{class o extends sw{constructor(h){super(h)}supports(h){return null!=o.parseEventName(h)}addEventListener(h,I,W){const se=o.parseEventName(I),xe=o.eventCallback(se.fullKey,W,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yc().onAndCancel(h,se.domEventName,xe))}static parseEventName(h){const I=h.toLowerCase().split("."),W=I.shift();if(0===I.length||"keydown"!==W&&"keyup"!==W)return null;const se=o._normalizeKey(I.pop());let xe="";if(pw.forEach(Be=>{const ct=I.indexOf(Be);ct>-1&&(I.splice(ct,1),xe+=Be+".")}),xe+=se,0!=I.length||0===se.length)return null;const Se={};return Se.domEventName=W,Se.fullKey=xe,Se}static getEventFullKey(h){let I="",W=function(o){let c=o.key;if(null==c){if(c=o.keyIdentifier,null==c)return"Unidentified";c.startsWith("U+")&&(c=String.fromCharCode(parseInt(c.substring(2),16)),3===o.location&&gw.hasOwnProperty(c)&&(c=gw[c]))}return RE[c]||c}(h);return W=W.toLowerCase()," "===W?W="space":"."===W&&(W="dot"),pw.forEach(se=>{se!=W&&FE[se](h)&&(I+=se+".")}),I+=W,I}static eventCallback(h,I,W){return se=>{o.getEventFullKey(se)===h&&W.runGuarded(()=>I(se))}}static _normalizeKey(h){return"esc"===h?"escape":h}}return o.\u0275fac=function(h){return new(h||o)(Ki(gu))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();const UE=x2(B4,"browser",[{provide:Sg,useValue:"browser"},{provide:c2,useValue:function(){Uy.makeCurrent(),Hy.init()},multi:!0},{provide:gu,useFactory:function(){return o=document,Ra=o,document;var o},deps:[]}]),HE=[{provide:Cv,useValue:"root"},{provide:Oc,useFactory:function(){return new Oc},deps:[]},{provide:Gg,useClass:PE,multi:!0,deps:[gu,al,Sg]},{provide:Gg,useClass:zE,multi:!0,deps:[gu]},{provide:Wy,useClass:Wy,deps:[Wg,Xp,Hp]},{provide:k_,useExisting:Wy},{provide:lw,useExisting:Xp},{provide:Xp,useClass:Xp,deps:[gu]},{provide:yy,useClass:yy,deps:[al]},{provide:Wg,useClass:Wg,deps:[Gg,al]},{provide:aw,useClass:AE,deps:[]}];let qE=(()=>{class o{constructor(h){if(h)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(h){return{ngModule:o,providers:[{provide:Hp,useValue:h.appId},{provide:ow,useExisting:Hp},ME]}}}return o.\u0275fac=function(h){return new(h||o)(Ki(o,12))},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({providers:HE,imports:[Yp,W4]}),o})();"undefined"!=typeof window&&window;const{isArray:tC}=Array,{getPrototypeOf:nC,prototype:rC,keys:iC}=Object;function yw(o){if(1===o.length){const c=o[0];if(tC(c))return{args:c,keys:null};if(function(o){return o&&"object"==typeof o&&nC(o)===rC}(c)){const h=iC(c);return{args:h.map(I=>c[I]),keys:h}}}return{args:o,keys:null}}const{isArray:oC}=Array;function xw(o){return oe(c=>function(o,c){return oC(c)?o(...c):o(c)}(o,c))}function bw(o,c){return o.reduce((h,I,W)=>(h[I]=c[W],h),{})}let _w=(()=>{class o{constructor(h,I){this._renderer=h,this._elementRef=I,this.onChange=W=>{},this.onTouched=()=>{}}setProperty(h,I){this._renderer.setProperty(this._elementRef.nativeElement,h,I)}registerOnTouched(h){this.onTouched=h}registerOnChange(h){this.onChange=h}setDisabledState(h){this.setProperty("disabled",h)}}return o.\u0275fac=function(h){return new(h||o)(ai(Zc),ai(pu))},o.\u0275dir=Ui({type:o}),o})(),Ch=(()=>{class o extends _w{}return o.\u0275fac=function(){let c;return function(I){return(c||(c=xs(o)))(I||o)}}(),o.\u0275dir=Ui({type:o,features:[rs]}),o})();const xc=new xa("NgValueAccessor"),cC={provide:xc,useExisting:kn(()=>$p),multi:!0},hC=new xa("CompositionEventMode");let $p=(()=>{class o extends _w{constructor(h,I,W){super(h,I),this._compositionMode=W,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const o=yc()?yc().getUserAgent():"";return/android (\d+)/.test(o.toLowerCase())}())}writeValue(h){this.setProperty("value",null==h?"":h)}_handleInput(h){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(h)}_compositionStart(){this._composing=!0}_compositionEnd(h){this._composing=!1,this._compositionMode&&this.onChange(h)}}return o.\u0275fac=function(h){return new(h||o)(ai(Zc),ai(pu),ai(hC,8))},o.\u0275dir=Ui({type:o,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(h,I){1&h&&Co("input",function(se){return I._handleInput(se.target.value)})("blur",function(){return I.onTouched()})("compositionstart",function(){return I._compositionStart()})("compositionend",function(se){return I._compositionEnd(se.target.value)})},features:[ds([cC]),rs]}),o})();const Bl=new xa("NgValidators"),Rf=new xa("NgAsyncValidators");function Lw(o){return null!=o}function Pw(o){const c=Dp(o)?Ht(o):o;return Vv(c),c}function Ow(o){let c={};return o.forEach(h=>{c=null!=h?ca(ca({},c),h):c}),0===Object.keys(c).length?null:c}function Rw(o,c){return c.map(h=>h(o))}function Fw(o){return o.map(c=>function(o){return!o.validate}(c)?c:h=>c.validate(h))}function Xy(o){return null!=o?function(o){if(!o)return null;const c=o.filter(Lw);return 0==c.length?null:function(h){return Ow(Rw(h,c))}}(Fw(o)):null}function $y(o){return null!=o?function(o){if(!o)return null;const c=o.filter(Lw);return 0==c.length?null:function(h){return function(...o){const c=zt(o),{args:h,keys:I}=yw(o),W=new D(se=>{const{length:xe}=h;if(!xe)return void se.complete();const Se=new Array(xe);let Be=xe,ct=xe;for(let Ot=0;Ot<xe;Ot++){let en=!1;ht(h[Ot]).subscribe(new K(se,bn=>{en||(en=!0,ct--),Se[Ot]=bn},()=>Be--,void 0,()=>{(!Be||!en)&&(ct||se.next(I?bw(I,Se):Se),se.complete())}))}});return c?W.pipe(xw(c)):W}(Rw(h,c).map(Pw)).pipe(oe(Ow))}}(Fw(o)):null}function Bw(o,c){return null===o?[c]:Array.isArray(o)?[...o,c]:[o,c]}function Jy(o){return o?Array.isArray(o)?o:[o]:[]}function Zg(o,c){return Array.isArray(o)?o.includes(c):o===c}function Uw(o,c){const h=Jy(c);return Jy(o).forEach(W=>{Zg(h,W)||h.push(W)}),h}function Hw(o,c){return Jy(c).filter(h=>!Zg(o,h))}class qw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(c){this._rawValidators=c||[],this._composedValidatorFn=Xy(this._rawValidators)}_setAsyncValidators(c){this._rawAsyncValidators=c||[],this._composedAsyncValidatorFn=$y(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(c){this._onDestroyCallbacks.push(c)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(c=>c()),this._onDestroyCallbacks=[]}reset(c){this.control&&this.control.reset(c)}hasError(c,h){return!!this.control&&this.control.hasError(c,h)}getError(c,h){return this.control?this.control.getError(c,h):null}}class Zl extends qw{get formDirective(){return null}get path(){return null}}class Ff extends qw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gw{constructor(c){this._cd=c}is(c){var h,I,W;return"submitted"===c?!!(null==(h=this._cd)?void 0:h.submitted):!!(null==(W=null==(I=this._cd)?void 0:I.control)?void 0:W[c])}}let Ky=(()=>{class o extends Gw{constructor(h){super(h)}}return o.\u0275fac=function(h){return new(h||o)(ai(Ff,2))},o.\u0275dir=Ui({type:o,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(h,I){2&h&&pg("ng-untouched",I.is("untouched"))("ng-touched",I.is("touched"))("ng-pristine",I.is("pristine"))("ng-dirty",I.is("dirty"))("ng-valid",I.is("valid"))("ng-invalid",I.is("invalid"))("ng-pending",I.is("pending"))},features:[rs]}),o})(),Ww=(()=>{class o extends Gw{constructor(h){super(h)}}return o.\u0275fac=function(h){return new(h||o)(ai(Zl,10))},o.\u0275dir=Ui({type:o,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(h,I){2&h&&pg("ng-untouched",I.is("untouched"))("ng-touched",I.is("touched"))("ng-pristine",I.is("pristine"))("ng-dirty",I.is("dirty"))("ng-valid",I.is("valid"))("ng-invalid",I.is("invalid"))("ng-pending",I.is("pending"))("ng-submitted",I.is("submitted"))},features:[rs]}),o})();function Kp(o,c){t1(o,c),c.valueAccessor.writeValue(o.value),function(o,c){c.valueAccessor.registerOnChange(h=>{o._pendingValue=h,o._pendingChange=!0,o._pendingDirty=!0,"change"===o.updateOn&&Yw(o,c)})}(o,c),function(o,c){const h=(I,W)=>{c.valueAccessor.writeValue(I),W&&c.viewToModelUpdate(I)};o.registerOnChange(h),c._registerOnDestroy(()=>{o._unregisterOnChange(h)})}(o,c),function(o,c){c.valueAccessor.registerOnTouched(()=>{o._pendingTouched=!0,"blur"===o.updateOn&&o._pendingChange&&Yw(o,c),"submit"!==o.updateOn&&o.markAsTouched()})}(o,c),function(o,c){if(c.valueAccessor.setDisabledState){const h=I=>{c.valueAccessor.setDisabledState(I)};o.registerOnDisabledChange(h),c._registerOnDestroy(()=>{o._unregisterOnDisabledChange(h)})}}(o,c)}function Kg(o,c){o.forEach(h=>{h.registerOnValidatorChange&&h.registerOnValidatorChange(c)})}function t1(o,c){const h=function(o){return o._rawValidators}(o);null!==c.validator?o.setValidators(Bw(h,c.validator)):"function"==typeof h&&o.setValidators([h]);const I=function(o){return o._rawAsyncValidators}(o);null!==c.asyncValidator?o.setAsyncValidators(Bw(I,c.asyncValidator)):"function"==typeof I&&o.setAsyncValidators([I]);const W=()=>o.updateValueAndValidity();Kg(c._rawValidators,W),Kg(c._rawAsyncValidators,W)}function Yw(o,c){o._pendingDirty&&o.markAsDirty(),o.setValue(o._pendingValue,{emitModelToViewChange:!1}),c.viewToModelUpdate(o._pendingValue),o._pendingChange=!1}function em(o,c){const h=o.indexOf(c);h>-1&&o.splice(h,1)}const Qp="VALID",tm="INVALID",Sd="PENDING",e0="DISABLED";function i1(o){return(o1(o)?o.validators:o)||null}function $w(o){return Array.isArray(o)?Xy(o):o||null}function a1(o,c){return(o1(c)?c.asyncValidators:o)||null}function Jw(o){return Array.isArray(o)?$y(o):o||null}function o1(o){return null!=o&&!Array.isArray(o)&&"object"==typeof o}class s1{constructor(c,h){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=c,this._rawAsyncValidators=h,this._composedValidatorFn=$w(this._rawValidators),this._composedAsyncValidatorFn=Jw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(c){this._rawValidators=this._composedValidatorFn=c}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(c){this._rawAsyncValidators=this._composedAsyncValidatorFn=c}get parent(){return this._parent}get valid(){return this.status===Qp}get invalid(){return this.status===tm}get pending(){return this.status==Sd}get disabled(){return this.status===e0}get enabled(){return this.status!==e0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(c){this._rawValidators=c,this._composedValidatorFn=$w(c)}setAsyncValidators(c){this._rawAsyncValidators=c,this._composedAsyncValidatorFn=Jw(c)}addValidators(c){this.setValidators(Uw(c,this._rawValidators))}addAsyncValidators(c){this.setAsyncValidators(Uw(c,this._rawAsyncValidators))}removeValidators(c){this.setValidators(Hw(c,this._rawValidators))}removeAsyncValidators(c){this.setAsyncValidators(Hw(c,this._rawAsyncValidators))}hasValidator(c){return Zg(this._rawValidators,c)}hasAsyncValidator(c){return Zg(this._rawAsyncValidators,c)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(c={}){this.touched=!0,this._parent&&!c.onlySelf&&this._parent.markAsTouched(c)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(c=>c.markAllAsTouched())}markAsUntouched(c={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(h=>{h.markAsUntouched({onlySelf:!0})}),this._parent&&!c.onlySelf&&this._parent._updateTouched(c)}markAsDirty(c={}){this.pristine=!1,this._parent&&!c.onlySelf&&this._parent.markAsDirty(c)}markAsPristine(c={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(h=>{h.markAsPristine({onlySelf:!0})}),this._parent&&!c.onlySelf&&this._parent._updatePristine(c)}markAsPending(c={}){this.status=Sd,!1!==c.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!c.onlySelf&&this._parent.markAsPending(c)}disable(c={}){const h=this._parentMarkedDirty(c.onlySelf);this.status=e0,this.errors=null,this._forEachChild(I=>{I.disable(wl(ca({},c),{onlySelf:!0}))}),this._updateValue(),!1!==c.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(wl(ca({},c),{skipPristineCheck:h})),this._onDisabledChange.forEach(I=>I(!0))}enable(c={}){const h=this._parentMarkedDirty(c.onlySelf);this.status=Qp,this._forEachChild(I=>{I.enable(wl(ca({},c),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:c.emitEvent}),this._updateAncestors(wl(ca({},c),{skipPristineCheck:h})),this._onDisabledChange.forEach(I=>I(!1))}_updateAncestors(c){this._parent&&!c.onlySelf&&(this._parent.updateValueAndValidity(c),c.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(c){this._parent=c}updateValueAndValidity(c={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qp||this.status===Sd)&&this._runAsyncValidator(c.emitEvent)),!1!==c.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!c.onlySelf&&this._parent.updateValueAndValidity(c)}_updateTreeValidity(c={emitEvent:!0}){this._forEachChild(h=>h._updateTreeValidity(c)),this.updateValueAndValidity({onlySelf:!0,emitEvent:c.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?e0:Qp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(c){if(this.asyncValidator){this.status=Sd,this._hasOwnPendingAsyncValidator=!0;const h=Pw(this.asyncValidator(this));this._asyncValidationSubscription=h.subscribe(I=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(I,{emitEvent:c})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(c,h={}){this.errors=c,this._updateControlsErrors(!1!==h.emitEvent)}get(c){return function(o,c,h){if(null==c||(Array.isArray(c)||(c=c.split(".")),Array.isArray(c)&&0===c.length))return null;let I=o;return c.forEach(W=>{I=I instanceof l1?I.controls.hasOwnProperty(W)?I.controls[W]:null:I instanceof kC&&I.at(W)||null}),I}(this,c)}getError(c,h){const I=h?this.get(h):this;return I&&I.errors?I.errors[c]:null}hasError(c,h){return!!this.getError(c,h)}get root(){let c=this;for(;c._parent;)c=c._parent;return c}_updateControlsErrors(c){this.status=this._calculateStatus(),c&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(c)}_initObservables(){this.valueChanges=new ea,this.statusChanges=new ea}_calculateStatus(){return this._allControlsDisabled()?e0:this.errors?tm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sd)?Sd:this._anyControlsHaveStatus(tm)?tm:Qp}_anyControlsHaveStatus(c){return this._anyControls(h=>h.status===c)}_anyControlsDirty(){return this._anyControls(c=>c.dirty)}_anyControlsTouched(){return this._anyControls(c=>c.touched)}_updatePristine(c={}){this.pristine=!this._anyControlsDirty(),this._parent&&!c.onlySelf&&this._parent._updatePristine(c)}_updateTouched(c={}){this.touched=this._anyControlsTouched(),this._parent&&!c.onlySelf&&this._parent._updateTouched(c)}_isBoxedValue(c){return"object"==typeof c&&null!==c&&2===Object.keys(c).length&&"value"in c&&"disabled"in c}_registerOnCollectionChange(c){this._onCollectionChange=c}_setUpdateStrategy(c){o1(c)&&null!=c.updateOn&&(this._updateOn=c.updateOn)}_parentMarkedDirty(c){return!c&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class nm extends s1{constructor(c=null,h,I){super(i1(h),a1(I,h)),this._onChange=[],this._applyFormState(c),this._setUpdateStrategy(h),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(c,h={}){this.value=this._pendingValue=c,this._onChange.length&&!1!==h.emitModelToViewChange&&this._onChange.forEach(I=>I(this.value,!1!==h.emitViewToModelChange)),this.updateValueAndValidity(h)}patchValue(c,h={}){this.setValue(c,h)}reset(c=null,h={}){this._applyFormState(c),this.markAsPristine(h),this.markAsUntouched(h),this.setValue(this.value,h),this._pendingChange=!1}_updateValue(){}_anyControls(c){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(c){this._onChange.push(c)}_unregisterOnChange(c){em(this._onChange,c)}registerOnDisabledChange(c){this._onDisabledChange.push(c)}_unregisterOnDisabledChange(c){em(this._onDisabledChange,c)}_forEachChild(c){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(c){this._isBoxedValue(c)?(this.value=this._pendingValue=c.value,c.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=c}}class l1 extends s1{constructor(c,h,I){super(i1(h),a1(I,h)),this.controls=c,this._initObservables(),this._setUpdateStrategy(h),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(c,h){return this.controls[c]?this.controls[c]:(this.controls[c]=h,h.setParent(this),h._registerOnCollectionChange(this._onCollectionChange),h)}addControl(c,h,I={}){this.registerControl(c,h),this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}removeControl(c,h={}){this.controls[c]&&this.controls[c]._registerOnCollectionChange(()=>{}),delete this.controls[c],this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}setControl(c,h,I={}){this.controls[c]&&this.controls[c]._registerOnCollectionChange(()=>{}),delete this.controls[c],h&&this.registerControl(c,h),this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}contains(c){return this.controls.hasOwnProperty(c)&&this.controls[c].enabled}setValue(c,h={}){this._checkAllValuesPresent(c),Object.keys(c).forEach(I=>{this._throwIfControlMissing(I),this.controls[I].setValue(c[I],{onlySelf:!0,emitEvent:h.emitEvent})}),this.updateValueAndValidity(h)}patchValue(c,h={}){null!=c&&(Object.keys(c).forEach(I=>{this.controls[I]&&this.controls[I].patchValue(c[I],{onlySelf:!0,emitEvent:h.emitEvent})}),this.updateValueAndValidity(h))}reset(c={},h={}){this._forEachChild((I,W)=>{I.reset(c[W],{onlySelf:!0,emitEvent:h.emitEvent})}),this._updatePristine(h),this._updateTouched(h),this.updateValueAndValidity(h)}getRawValue(){return this._reduceChildren({},(c,h,I)=>(c[I]=h instanceof nm?h.value:h.getRawValue(),c))}_syncPendingControls(){let c=this._reduceChildren(!1,(h,I)=>!!I._syncPendingControls()||h);return c&&this.updateValueAndValidity({onlySelf:!0}),c}_throwIfControlMissing(c){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[c])throw new Error(`Cannot find form control with name: ${c}.`)}_forEachChild(c){Object.keys(this.controls).forEach(h=>{const I=this.controls[h];I&&c(I,h)})}_setUpControls(){this._forEachChild(c=>{c.setParent(this),c._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(c){for(const h of Object.keys(this.controls)){const I=this.controls[h];if(this.contains(h)&&c(I))return!0}return!1}_reduceValue(){return this._reduceChildren({},(c,h,I)=>((h.enabled||this.disabled)&&(c[I]=h.value),c))}_reduceChildren(c,h){let I=c;return this._forEachChild((W,se)=>{I=h(I,W,se)}),I}_allControlsDisabled(){for(const c of Object.keys(this.controls))if(this.controls[c].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(c){this._forEachChild((h,I)=>{if(void 0===c[I])throw new Error(`Must supply a value for form control with name: '${I}'.`)})}}class kC extends s1{constructor(c,h,I){super(i1(h),a1(I,h)),this.controls=c,this._initObservables(),this._setUpdateStrategy(h),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(c){return this.controls[c]}push(c,h={}){this.controls.push(c),this._registerControl(c),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}insert(c,h,I={}){this.controls.splice(c,0,h),this._registerControl(h),this.updateValueAndValidity({emitEvent:I.emitEvent})}removeAt(c,h={}){this.controls[c]&&this.controls[c]._registerOnCollectionChange(()=>{}),this.controls.splice(c,1),this.updateValueAndValidity({emitEvent:h.emitEvent})}setControl(c,h,I={}){this.controls[c]&&this.controls[c]._registerOnCollectionChange(()=>{}),this.controls.splice(c,1),h&&(this.controls.splice(c,0,h),this._registerControl(h)),this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(c,h={}){this._checkAllValuesPresent(c),c.forEach((I,W)=>{this._throwIfControlMissing(W),this.at(W).setValue(I,{onlySelf:!0,emitEvent:h.emitEvent})}),this.updateValueAndValidity(h)}patchValue(c,h={}){null!=c&&(c.forEach((I,W)=>{this.at(W)&&this.at(W).patchValue(I,{onlySelf:!0,emitEvent:h.emitEvent})}),this.updateValueAndValidity(h))}reset(c=[],h={}){this._forEachChild((I,W)=>{I.reset(c[W],{onlySelf:!0,emitEvent:h.emitEvent})}),this._updatePristine(h),this._updateTouched(h),this.updateValueAndValidity(h)}getRawValue(){return this.controls.map(c=>c instanceof nm?c.value:c.getRawValue())}clear(c={}){this.controls.length<1||(this._forEachChild(h=>h._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:c.emitEvent}))}_syncPendingControls(){let c=this.controls.reduce((h,I)=>!!I._syncPendingControls()||h,!1);return c&&this.updateValueAndValidity({onlySelf:!0}),c}_throwIfControlMissing(c){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(c))throw new Error(`Cannot find form control at index ${c}`)}_forEachChild(c){this.controls.forEach((h,I)=>{c(h,I)})}_updateValue(){this.value=this.controls.filter(c=>c.enabled||this.disabled).map(c=>c.value)}_anyControls(c){return this.controls.some(h=>h.enabled&&c(h))}_setUpControls(){this._forEachChild(c=>this._registerControl(c))}_checkAllValuesPresent(c){this._forEachChild((h,I)=>{if(void 0===c[I])throw new Error(`Must supply a value for form control at index: ${I}.`)})}_allControlsDisabled(){for(const c of this.controls)if(c.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(c){c.setParent(this),c._registerOnCollectionChange(this._onCollectionChange)}}const EC={provide:Zl,useExisting:kn(()=>rm)},t0=(()=>Promise.resolve(null))();let rm=(()=>{class o extends Zl{constructor(h,I){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new ea,this.form=new l1({},Xy(h),$y(I))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(h){t0.then(()=>{const I=this._findContainer(h.path);h.control=I.registerControl(h.name,h.control),Kp(h.control,h),h.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(h)})}getControl(h){return this.form.get(h.path)}removeControl(h){t0.then(()=>{const I=this._findContainer(h.path);I&&I.removeControl(h.name),em(this._directives,h)})}addFormGroup(h){t0.then(()=>{const I=this._findContainer(h.path),W=new l1({});(function(o,c){t1(o,c)})(W,h),I.registerControl(h.name,W),W.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(h){t0.then(()=>{const I=this._findContainer(h.path);I&&I.removeControl(h.name)})}getFormGroup(h){return this.form.get(h.path)}updateModel(h,I){t0.then(()=>{this.form.get(h.path).setValue(I)})}setValue(h){this.control.setValue(h)}onSubmit(h){return this.submitted=!0,function(o,c){o._syncPendingControls(),c.forEach(h=>{const I=h.control;"submit"===I.updateOn&&I._pendingChange&&(h.viewToModelUpdate(I._pendingValue),I._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(h),!1}onReset(){this.resetForm()}resetForm(h){this.form.reset(h),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(h){return h.pop(),h.length?this.form.get(h):this.form}}return o.\u0275fac=function(h){return new(h||o)(ai(Bl,10),ai(Rf,10))},o.\u0275dir=Ui({type:o,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(h,I){1&h&&Co("submit",function(se){return I.onSubmit(se)})("reset",function(){return I.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ds([EC]),rs]}),o})();const SC={provide:Ff,useExisting:kn(()=>im)},e3=(()=>Promise.resolve(null))();let im=(()=>{class o extends Ff{constructor(h,I,W,se){super(),this.control=new nm,this._registered=!1,this.update=new ea,this._parent=h,this._setValidators(I),this._setAsyncValidators(W),this.valueAccessor=function(o,c){if(!c)return null;let h,I,W;return Array.isArray(c),c.forEach(se=>{se.constructor===$p?h=se:function(o){return Object.getPrototypeOf(o.constructor)===Ch}(se)?I=se:W=se}),W||I||h||null}(0,se)}ngOnChanges(h){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in h&&this._updateDisabled(h),function(o,c){if(!o.hasOwnProperty("model"))return!1;const h=o.model;return!!h.isFirstChange()||!Object.is(c,h.currentValue)}(h,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(o,c){return[...c.path,o]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(h){this.viewModel=h,this.update.emit(h)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Kp(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(h){e3.then(()=>{this.control.setValue(h,{emitViewToModelChange:!1})})}_updateDisabled(h){const I=h.isDisabled.currentValue,W=""===I||I&&"false"!==I;e3.then(()=>{W&&!this.control.disabled?this.control.disable():!W&&this.control.disabled&&this.control.enable()})}}return o.\u0275fac=function(h){return new(h||o)(ai(Zl,9),ai(Bl,10),ai(Rf,10),ai(xc,10))},o.\u0275dir=Ui({type:o,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ds([SC]),rs,hi]}),o})(),t3=(()=>{class o{}return o.\u0275fac=function(h){return new(h||o)},o.\u0275dir=Ui({type:o,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),o})();const IC={provide:xc,useExisting:kn(()=>u1),multi:!0};let r3=(()=>{class o{}return o.\u0275fac=function(h){return new(h||o)},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({}),o})(),LC=(()=>{class o{constructor(){this._accessors=[]}add(h,I){this._accessors.push([h,I])}remove(h){for(let I=this._accessors.length-1;I>=0;--I)if(this._accessors[I][1]===h)return void this._accessors.splice(I,1)}select(h){this._accessors.forEach(I=>{this._isSameGroup(I,h)&&I[1]!==h&&I[1].fireUncheck(h.value)})}_isSameGroup(h,I){return!!h[0].control&&h[0]._parent===I._control._parent&&h[1].name===I.name}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275prov=Zn({token:o,factory:o.\u0275fac,providedIn:r3}),o})(),u1=(()=>{class o extends Ch{constructor(h,I,W,se){super(h,I),this._registry=W,this._injector=se,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Ff),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(h){this._state=h===this.value,this.setProperty("checked",this._state)}registerOnChange(h){this._fn=h,this.onChange=()=>{h(this.value),this._registry.select(this)}}fireUncheck(h){this.writeValue(h)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return o.\u0275fac=function(h){return new(h||o)(ai(Zc),ai(pu),ai(LC),ai(Dl))},o.\u0275dir=Ui({type:o,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(h,I){1&h&&Co("change",function(){return I.onChange()})("blur",function(){return I.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ds([IC]),rs]}),o})();const BC={provide:xc,useExisting:kn(()=>am),multi:!0};function u3(o,c){return null==o?`${c}`:(c&&"object"==typeof c&&(c="Object"),`${o}: ${c}`.slice(0,50))}let am=(()=>{class o extends Ch{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(h){this._compareWith=h}writeValue(h){this.value=h;const I=this._getOptionId(h);null==I&&this.setProperty("selectedIndex",-1);const W=u3(I,h);this.setProperty("value",W)}registerOnChange(h){this.onChange=I=>{this.value=this._getOptionValue(I),h(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(h){for(const I of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(I),h))return I;return null}_getOptionValue(h){const I=function(o){return o.split(":")[0]}(h);return this._optionMap.has(I)?this._optionMap.get(I):h}}return o.\u0275fac=function(){let c;return function(I){return(c||(c=xs(o)))(I||o)}}(),o.\u0275dir=Ui({type:o,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(h,I){1&h&&Co("change",function(se){return I.onChange(se.target.value)})("blur",function(){return I.onTouched()})},inputs:{compareWith:"compareWith"},features:[ds([BC]),rs]}),o})(),c3=(()=>{class o{constructor(h,I,W){this._element=h,this._renderer=I,this._select=W,this._select&&(this.id=this._select._registerOption())}set ngValue(h){null!=this._select&&(this._select._optionMap.set(this.id,h),this._setElementValue(u3(this.id,h)),this._select.writeValue(this._select.value))}set value(h){this._setElementValue(h),this._select&&this._select.writeValue(this._select.value)}_setElementValue(h){this._renderer.setProperty(this._element.nativeElement,"value",h)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return o.\u0275fac=function(h){return new(h||o)(ai(pu),ai(Zc),ai(am,9))},o.\u0275dir=Ui({type:o,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),o})();const VC={provide:xc,useExisting:kn(()=>d1),multi:!0};function f3(o,c){return null==o?`${c}`:("string"==typeof c&&(c=`'${c}'`),c&&"object"==typeof c&&(c="Object"),`${o}: ${c}`.slice(0,50))}let d1=(()=>{class o extends Ch{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(h){this._compareWith=h}writeValue(h){let I;if(this.value=h,Array.isArray(h)){const W=h.map(se=>this._getOptionId(se));I=(se,xe)=>{se._setSelected(W.indexOf(xe.toString())>-1)}}else I=(W,se)=>{W._setSelected(!1)};this._optionMap.forEach(I)}registerOnChange(h){this.onChange=I=>{const W=[],se=I.selectedOptions;if(void 0!==se){const xe=se;for(let Se=0;Se<xe.length;Se++){const ct=this._getOptionValue(xe[Se].value);W.push(ct)}}else{const xe=I.options;for(let Se=0;Se<xe.length;Se++){const Be=xe[Se];if(Be.selected){const ct=this._getOptionValue(Be.value);W.push(ct)}}}this.value=W,h(W)}}_registerOption(h){const I=(this._idCounter++).toString();return this._optionMap.set(I,h),I}_getOptionId(h){for(const I of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(I)._value,h))return I;return null}_getOptionValue(h){const I=function(o){return o.split(":")[0]}(h);return this._optionMap.has(I)?this._optionMap.get(I)._value:h}}return o.\u0275fac=function(){let c;return function(I){return(c||(c=xs(o)))(I||o)}}(),o.\u0275dir=Ui({type:o,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(h,I){1&h&&Co("change",function(se){return I.onChange(se.target)})("blur",function(){return I.onTouched()})},inputs:{compareWith:"compareWith"},features:[ds([VC]),rs]}),o})(),h3=(()=>{class o{constructor(h,I,W){this._element=h,this._renderer=I,this._select=W,this._select&&(this.id=this._select._registerOption(this))}set ngValue(h){null!=this._select&&(this._value=h,this._setElementValue(f3(this.id,h)),this._select.writeValue(this._select.value))}set value(h){this._select?(this._value=h,this._setElementValue(f3(this.id,h)),this._select.writeValue(this._select.value)):this._setElementValue(h)}_setElementValue(h){this._renderer.setProperty(this._element.nativeElement,"value",h)}_setSelected(h){this._renderer.setProperty(this._element.nativeElement,"selected",h)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return o.\u0275fac=function(h){return new(h||o)(ai(pu),ai(Zc),ai(d1,9))},o.\u0275dir=Ui({type:o,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),o})();const GC={provide:Bl,useExisting:kn(()=>sm),multi:!0};let sm=(()=>{class o{constructor(){this._required=!1}get required(){return this._required}set required(h){this._required=null!=h&&!1!==h&&"false"!=`${h}`,this._onChange&&this._onChange()}validate(h){return this.required?function(o){return function(o){return null==o||0===o.length}(o.value)?{required:!0}:null}(h):null}registerOnValidatorChange(h){this._onChange=h}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275dir=Ui({type:o,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(h,I){2&h&&Zu("required",I.required?"":null)},inputs:{required:"required"},features:[ds([GC])]}),o})(),JC=(()=>{class o{}return o.\u0275fac=function(h){return new(h||o)},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({imports:[[r3]]}),o})(),KC=(()=>{class o{}return o.\u0275fac=function(h){return new(h||o)},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({imports:[JC]}),o})();function Ba(...o){return Ht(o,gt(o))}function Dd(o,c){return ie(c)?ze(o,c,1):ze(o,1)}function Sh(o,c){return $((h,I)=>{let W=0;h.subscribe(new K(I,se=>o.call(c,se,W++)&&I.next(se)))})}class w3{}class T3{}class Qc{constructor(c){this.normalizedNames=new Map,this.lazyUpdate=null,c?this.lazyInit="string"==typeof c?()=>{this.headers=new Map,c.split("\n").forEach(h=>{const I=h.indexOf(":");if(I>0){const W=h.slice(0,I),se=W.toLowerCase(),xe=h.slice(I+1).trim();this.maybeSetNormalizedName(W,se),this.headers.has(se)?this.headers.get(se).push(xe):this.headers.set(se,[xe])}})}:()=>{this.headers=new Map,Object.keys(c).forEach(h=>{let I=c[h];const W=h.toLowerCase();"string"==typeof I&&(I=[I]),I.length>0&&(this.headers.set(W,I),this.maybeSetNormalizedName(h,W))})}:this.headers=new Map}has(c){return this.init(),this.headers.has(c.toLowerCase())}get(c){this.init();const h=this.headers.get(c.toLowerCase());return h&&h.length>0?h[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(c){return this.init(),this.headers.get(c.toLowerCase())||null}append(c,h){return this.clone({name:c,value:h,op:"a"})}set(c,h){return this.clone({name:c,value:h,op:"s"})}delete(c,h){return this.clone({name:c,value:h,op:"d"})}maybeSetNormalizedName(c,h){this.normalizedNames.has(h)||this.normalizedNames.set(h,c)}init(){this.lazyInit&&(this.lazyInit instanceof Qc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(c=>this.applyUpdate(c)),this.lazyUpdate=null))}copyFrom(c){c.init(),Array.from(c.headers.keys()).forEach(h=>{this.headers.set(h,c.headers.get(h)),this.normalizedNames.set(h,c.normalizedNames.get(h))})}clone(c){const h=new Qc;return h.lazyInit=this.lazyInit&&this.lazyInit instanceof Qc?this.lazyInit:this,h.lazyUpdate=(this.lazyUpdate||[]).concat([c]),h}applyUpdate(c){const h=c.name.toLowerCase();switch(c.op){case"a":case"s":let I=c.value;if("string"==typeof I&&(I=[I]),0===I.length)return;this.maybeSetNormalizedName(c.name,h);const W=("a"===c.op?this.headers.get(h):void 0)||[];W.push(...I),this.headers.set(h,W);break;case"d":const se=c.value;if(se){let xe=this.headers.get(h);if(!xe)return;xe=xe.filter(Se=>-1===se.indexOf(Se)),0===xe.length?(this.headers.delete(h),this.normalizedNames.delete(h)):this.headers.set(h,xe)}else this.headers.delete(h),this.normalizedNames.delete(h)}}forEach(c){this.init(),Array.from(this.normalizedNames.keys()).forEach(h=>c(this.normalizedNames.get(h),this.headers.get(h)))}}class QC{encodeKey(c){return M3(c)}encodeValue(c){return M3(c)}decodeKey(c){return decodeURIComponent(c)}decodeValue(c){return decodeURIComponent(c)}}const tS=/%(\d[a-f0-9])/gi,nS={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function M3(o){return encodeURIComponent(o).replace(tS,(c,h)=>{var I;return null!=(I=nS[h])?I:c})}function A3(o){return`${o}`}class zf{constructor(c={}){if(this.updates=null,this.cloneFrom=null,this.encoder=c.encoder||new QC,c.fromString){if(c.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(o,c){const h=new Map;return o.length>0&&o.replace(/^\?/,"").split("&").forEach(W=>{const se=W.indexOf("="),[xe,Se]=-1==se?[c.decodeKey(W),""]:[c.decodeKey(W.slice(0,se)),c.decodeValue(W.slice(se+1))],Be=h.get(xe)||[];Be.push(Se),h.set(xe,Be)}),h}(c.fromString,this.encoder)}else c.fromObject?(this.map=new Map,Object.keys(c.fromObject).forEach(h=>{const I=c.fromObject[h];this.map.set(h,Array.isArray(I)?I:[I])})):this.map=null}has(c){return this.init(),this.map.has(c)}get(c){this.init();const h=this.map.get(c);return h?h[0]:null}getAll(c){return this.init(),this.map.get(c)||null}keys(){return this.init(),Array.from(this.map.keys())}append(c,h){return this.clone({param:c,value:h,op:"a"})}appendAll(c){const h=[];return Object.keys(c).forEach(I=>{const W=c[I];Array.isArray(W)?W.forEach(se=>{h.push({param:I,value:se,op:"a"})}):h.push({param:I,value:W,op:"a"})}),this.clone(h)}set(c,h){return this.clone({param:c,value:h,op:"s"})}delete(c,h){return this.clone({param:c,value:h,op:"d"})}toString(){return this.init(),this.keys().map(c=>{const h=this.encoder.encodeKey(c);return this.map.get(c).map(I=>h+"="+this.encoder.encodeValue(I)).join("&")}).filter(c=>""!==c).join("&")}clone(c){const h=new zf({encoder:this.encoder});return h.cloneFrom=this.cloneFrom||this,h.updates=(this.updates||[]).concat(c),h}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(c=>this.map.set(c,this.cloneFrom.map.get(c))),this.updates.forEach(c=>{switch(c.op){case"a":case"s":const h=("a"===c.op?this.map.get(c.param):void 0)||[];h.push(A3(c.value)),this.map.set(c.param,h);break;case"d":if(void 0===c.value){this.map.delete(c.param);break}{let I=this.map.get(c.param)||[];const W=I.indexOf(A3(c.value));-1!==W&&I.splice(W,1),I.length>0?this.map.set(c.param,I):this.map.delete(c.param)}}}),this.cloneFrom=this.updates=null)}}class rS{constructor(){this.map=new Map}set(c,h){return this.map.set(c,h),this}get(c){return this.map.has(c)||this.map.set(c,c.defaultValue()),this.map.get(c)}delete(c){return this.map.delete(c),this}keys(){return this.map.keys()}}function k3(o){return"undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer}function E3(o){return"undefined"!=typeof Blob&&o instanceof Blob}function C3(o){return"undefined"!=typeof FormData&&o instanceof FormData}class n0{constructor(c,h,I,W){let se;if(this.url=h,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=c.toUpperCase(),function(o){switch(o){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||W?(this.body=void 0!==I?I:null,se=W):se=I,se&&(this.reportProgress=!!se.reportProgress,this.withCredentials=!!se.withCredentials,se.responseType&&(this.responseType=se.responseType),se.headers&&(this.headers=se.headers),se.context&&(this.context=se.context),se.params&&(this.params=se.params)),this.headers||(this.headers=new Qc),this.context||(this.context=new rS),this.params){const xe=this.params.toString();if(0===xe.length)this.urlWithParams=h;else{const Se=h.indexOf("?");this.urlWithParams=h+(-1===Se?"?":Se<h.length-1?"&":"")+xe}}else this.params=new zf,this.urlWithParams=h}serializeBody(){return null===this.body?null:k3(this.body)||E3(this.body)||C3(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof zf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||C3(this.body)?null:E3(this.body)?this.body.type||null:k3(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(c={}){var en;const h=c.method||this.method,I=c.url||this.url,W=c.responseType||this.responseType,se=void 0!==c.body?c.body:this.body,xe=void 0!==c.withCredentials?c.withCredentials:this.withCredentials,Se=void 0!==c.reportProgress?c.reportProgress:this.reportProgress;let Be=c.headers||this.headers,ct=c.params||this.params;const Ot=null!=(en=c.context)?en:this.context;return void 0!==c.setHeaders&&(Be=Object.keys(c.setHeaders).reduce((bn,Sn)=>bn.set(Sn,c.setHeaders[Sn]),Be)),c.setParams&&(ct=Object.keys(c.setParams).reduce((bn,Sn)=>bn.set(Sn,c.setParams[Sn]),ct)),new n0(h,I,se,{params:ct,headers:Be,context:Ot,reportProgress:Se,responseType:W,withCredentials:xe})}}var Ks=(()=>((Ks=Ks||{})[Ks.Sent=0]="Sent",Ks[Ks.UploadProgress=1]="UploadProgress",Ks[Ks.ResponseHeader=2]="ResponseHeader",Ks[Ks.DownloadProgress=3]="DownloadProgress",Ks[Ks.Response=4]="Response",Ks[Ks.User=5]="User",Ks))();class p1{constructor(c,h=200,I="OK"){this.headers=c.headers||new Qc,this.status=void 0!==c.status?c.status:h,this.statusText=c.statusText||I,this.url=c.url||null,this.ok=this.status>=200&&this.status<300}}class g1 extends p1{constructor(c={}){super(c),this.type=Ks.ResponseHeader}clone(c={}){return new g1({headers:c.headers||this.headers,status:void 0!==c.status?c.status:this.status,statusText:c.statusText||this.statusText,url:c.url||this.url||void 0})}}class lm extends p1{constructor(c={}){super(c),this.type=Ks.Response,this.body=void 0!==c.body?c.body:null}clone(c={}){return new lm({body:void 0!==c.body?c.body:this.body,headers:c.headers||this.headers,status:void 0!==c.status?c.status:this.status,statusText:c.statusText||this.statusText,url:c.url||this.url||void 0})}}class S3 extends p1{constructor(c){super(c,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${c.url||"(unknown url)"}`:`Http failure response for ${c.url||"(unknown url)"}: ${c.status} ${c.statusText}`,this.error=c.error||null}}function m1(o,c){return{body:c,headers:o.headers,context:o.context,observe:o.observe,params:o.params,reportProgress:o.reportProgress,responseType:o.responseType,withCredentials:o.withCredentials}}let v1=(()=>{class o{constructor(h){this.handler=h}request(h,I,W={}){let se;if(h instanceof n0)se=h;else{let Be,ct;Be=W.headers instanceof Qc?W.headers:new Qc(W.headers),W.params&&(ct=W.params instanceof zf?W.params:new zf({fromObject:W.params})),se=new n0(h,I,void 0!==W.body?W.body:null,{headers:Be,context:W.context,params:ct,reportProgress:W.reportProgress,responseType:W.responseType||"json",withCredentials:W.withCredentials})}const xe=Ba(se).pipe(Dd(Be=>this.handler.handle(Be)));if(h instanceof n0||"events"===W.observe)return xe;const Se=xe.pipe(Sh(Be=>Be instanceof lm));switch(W.observe||"body"){case"body":switch(se.responseType){case"arraybuffer":return Se.pipe(oe(Be=>{if(null!==Be.body&&!(Be.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Be.body}));case"blob":return Se.pipe(oe(Be=>{if(null!==Be.body&&!(Be.body instanceof Blob))throw new Error("Response is not a Blob.");return Be.body}));case"text":return Se.pipe(oe(Be=>{if(null!==Be.body&&"string"!=typeof Be.body)throw new Error("Response is not a string.");return Be.body}));default:return Se.pipe(oe(Be=>Be.body))}case"response":return Se;default:throw new Error(`Unreachable: unhandled observe type ${W.observe}}`)}}delete(h,I={}){return this.request("DELETE",h,I)}get(h,I={}){return this.request("GET",h,I)}head(h,I={}){return this.request("HEAD",h,I)}jsonp(h,I){return this.request("JSONP",h,{params:(new zf).append(I,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(h,I={}){return this.request("OPTIONS",h,I)}patch(h,I,W={}){return this.request("PATCH",h,m1(W,I))}post(h,I,W={}){return this.request("POST",h,m1(W,I))}put(h,I,W={}){return this.request("PUT",h,m1(W,I))}}return o.\u0275fac=function(h){return new(h||o)(Ki(w3))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();class D3{constructor(c,h){this.next=c,this.interceptor=h}handle(c){return this.interceptor.intercept(c,this.next)}}const I3=new xa("HTTP_INTERCEPTORS");let oS=(()=>{class o{intercept(h,I){return I.handle(h)}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();const sS=/^\)\]\}',?\n/;let L3=(()=>{class o{constructor(h){this.xhrFactory=h}handle(h){if("JSONP"===h.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new D(I=>{const W=this.xhrFactory.build();if(W.open(h.method,h.urlWithParams),h.withCredentials&&(W.withCredentials=!0),h.headers.forEach((Sn,tr)=>W.setRequestHeader(Sn,tr.join(","))),h.headers.has("Accept")||W.setRequestHeader("Accept","application/json, text/plain, */*"),!h.headers.has("Content-Type")){const Sn=h.detectContentTypeHeader();null!==Sn&&W.setRequestHeader("Content-Type",Sn)}if(h.responseType){const Sn=h.responseType.toLowerCase();W.responseType="json"!==Sn?Sn:"text"}const se=h.serializeBody();let xe=null;const Se=()=>{if(null!==xe)return xe;const Sn=1223===W.status?204:W.status,tr=W.statusText||"OK",qr=new Qc(W.getAllResponseHeaders()),ei=function(o){return"responseURL"in o&&o.responseURL?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):null}(W)||h.url;return xe=new g1({headers:qr,status:Sn,statusText:tr,url:ei}),xe},Be=()=>{let{headers:Sn,status:tr,statusText:qr,url:ei}=Se(),ri=null;204!==tr&&(ri=void 0===W.response?W.responseText:W.response),0===tr&&(tr=ri?200:0);let Nr=tr>=200&&tr<300;if("json"===h.responseType&&"string"==typeof ri){const Hi=ri;ri=ri.replace(sS,"");try{ri=""!==ri?JSON.parse(ri):null}catch(va){ri=Hi,Nr&&(Nr=!1,ri={error:va,text:ri})}}Nr?(I.next(new lm({body:ri,headers:Sn,status:tr,statusText:qr,url:ei||void 0})),I.complete()):I.error(new S3({error:ri,headers:Sn,status:tr,statusText:qr,url:ei||void 0}))},ct=Sn=>{const{url:tr}=Se(),qr=new S3({error:Sn,status:W.status||0,statusText:W.statusText||"Unknown Error",url:tr||void 0});I.error(qr)};let Ot=!1;const en=Sn=>{Ot||(I.next(Se()),Ot=!0);let tr={type:Ks.DownloadProgress,loaded:Sn.loaded};Sn.lengthComputable&&(tr.total=Sn.total),"text"===h.responseType&&!!W.responseText&&(tr.partialText=W.responseText),I.next(tr)},bn=Sn=>{let tr={type:Ks.UploadProgress,loaded:Sn.loaded};Sn.lengthComputable&&(tr.total=Sn.total),I.next(tr)};return W.addEventListener("load",Be),W.addEventListener("error",ct),W.addEventListener("timeout",ct),W.addEventListener("abort",ct),h.reportProgress&&(W.addEventListener("progress",en),null!==se&&W.upload&&W.upload.addEventListener("progress",bn)),W.send(se),I.next({type:Ks.Sent}),()=>{W.removeEventListener("error",ct),W.removeEventListener("abort",ct),W.removeEventListener("load",Be),W.removeEventListener("timeout",ct),h.reportProgress&&(W.removeEventListener("progress",en),null!==se&&W.upload&&W.upload.removeEventListener("progress",bn)),W.readyState!==W.DONE&&W.abort()}})}}return o.\u0275fac=function(h){return new(h||o)(Ki(aw))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();const y1=new xa("XSRF_COOKIE_NAME"),x1=new xa("XSRF_HEADER_NAME");class P3{}let uS=(()=>{class o{constructor(h,I,W){this.doc=h,this.platform=I,this.cookieName=W,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const h=this.doc.cookie||"";return h!==this.lastCookieString&&(this.parseCount++,this.lastToken=$2(h,this.cookieName),this.lastCookieString=h),this.lastToken}}return o.\u0275fac=function(h){return new(h||o)(Ki(gu),Ki(Sg),Ki(y1))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})(),b1=(()=>{class o{constructor(h,I){this.tokenService=h,this.headerName=I}intercept(h,I){const W=h.url.toLowerCase();if("GET"===h.method||"HEAD"===h.method||W.startsWith("http://")||W.startsWith("https://"))return I.handle(h);const se=this.tokenService.getToken();return null!==se&&!h.headers.has(this.headerName)&&(h=h.clone({headers:h.headers.set(this.headerName,se)})),I.handle(h)}}return o.\u0275fac=function(h){return new(h||o)(Ki(P3),Ki(x1))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})(),cS=(()=>{class o{constructor(h,I){this.backend=h,this.injector=I,this.chain=null}handle(h){if(null===this.chain){const I=this.injector.get(I3,[]);this.chain=I.reduceRight((W,se)=>new D3(W,se),this.backend)}return this.chain.handle(h)}}return o.\u0275fac=function(h){return new(h||o)(Ki(T3),Ki(Dl))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})(),fS=(()=>{class o{static disable(){return{ngModule:o,providers:[{provide:b1,useClass:oS}]}}static withOptions(h={}){return{ngModule:o,providers:[h.cookieName?{provide:y1,useValue:h.cookieName}:[],h.headerName?{provide:x1,useValue:h.headerName}:[]]}}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({providers:[b1,{provide:I3,useExisting:b1,multi:!0},{provide:P3,useClass:uS},{provide:y1,useValue:"XSRF-TOKEN"},{provide:x1,useValue:"X-XSRF-TOKEN"}]}),o})(),hS=(()=>{class o{}return o.\u0275fac=function(h){return new(h||o)},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({providers:[v1,{provide:w3,useClass:cS},L3,{provide:T3,useExisting:L3}],imports:[[fS.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),o})();var dS=ae(724);function R3(o,c,h,I){return new(h||(h=Promise))(function(se,xe){function Se(Ot){try{ct(I.next(Ot))}catch(en){xe(en)}}function Be(Ot){try{ct(I.throw(Ot))}catch(en){xe(en)}}function ct(Ot){Ot.done?se(Ot.value):function(se){return se instanceof h?se:new h(function(xe){xe(se)})}(Ot.value).then(Se,Be)}ct((I=I.apply(o,c||[])).next())})}const mS=["plot"],vS=["*"];class no{static setModuleName(c){no.moduleName=c}static getModuleName(){return no.moduleName}static setPlotly(c){if("object"==typeof c&&"function"!=typeof c.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");no.plotly=c}static insert(c){return-1===no.instances.indexOf(c)&&no.instances.push(c),c}static remove(c){const h=no.instances.indexOf(c);h>=0&&(no.instances.splice(h,1),no.plotly.purge(c))}getInstanceByDivId(c){for(const h of no.instances)if(h&&h.id===c)return h}getPlotly(){return R3(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(void 0===no.plotly)throw new Error("ViaCDN"===no.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return no.plotly}waitFor(c){return new Promise(h=>{const I=()=>{c()?h():setTimeout(I,10)};I()})}newPlot(c,h,I,W,se){return R3(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),se){const xe={data:h,layout:I,config:W,frames:se};return this._getPlotly().newPlot(c,xe).then(()=>no.insert(c))}return this._getPlotly().newPlot(c,h,I,W).then(()=>no.insert(c))})}plot(c,h,I,W,se){if(se){const xe={data:h,layout:I,config:W,frames:se};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(c,xe):this._getPlotly().newPlot(c,xe)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(c,h,I,W):this._getPlotly().newPlot(c,h,I,W)}update(c,h,I,W,se){if(se){const xe={data:h,layout:I,config:W,frames:se};return this._getPlotly().react(c,xe)}return this._getPlotly().react(c,h,I,W)}resize(c){return this._getPlotly().Plots.resize(c)}}no.\u0275fac=function(c){return new(c||no)},no.instances=[],no.plotly=void 0,no.moduleName=void 0,no.\u0275prov=Zn({factory:function(){return new no},token:no,providedIn:"root"});let yS=(()=>{class o{constructor(h,I,W){this.plotly=h,this.iterableDiffers=I,this.keyValueDiffers=W,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new ea,this.update=new ea,this.purge=new ea,this.error=new ea,this.afterExport=new ea,this.afterPlot=new ea,this.animated=new ea,this.animatingFrame=new ea,this.animationInterrupted=new ea,this.autoSize=new ea,this.beforeExport=new ea,this.buttonClicked=new ea,this.click=new ea,this.plotlyClick=new ea,this.clickAnnotation=new ea,this.deselect=new ea,this.doubleClick=new ea,this.framework=new ea,this.hover=new ea,this.legendClick=new ea,this.legendDoubleClick=new ea,this.react=new ea,this.relayout=new ea,this.restyle=new ea,this.redraw=new ea,this.selected=new ea,this.selecting=new ea,this.sliderChange=new ea,this.sliderEnd=new ea,this.sliderStart=new ea,this.transitioning=new ea,this.transitionInterrupted=new ea,this.unhover=new ea,this.relayouting=new ea,this.treemapclick=new ea,this.sunburstclick=new ea,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const h=this.createFigure();this.initialized.emit(h)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const h=this.createFigure();this.purge.emit(h),no.remove(this.plotlyInstance)}ngOnChanges(h){let I=!1;const W=h.revision;W&&!W.isFirstChange()&&(I=!0);const se=h.debug;se&&!se.isFirstChange()&&(I=!0),I&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let h=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(h=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(h=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),h&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let h=[this.defaultClassName];return Array.isArray(this.className)?h=h.concat(this.className):this.className&&h.push(this.className),h.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(h=>{this.plotlyInstance=h,this.getWindow().gd=this.debug?h:void 0,this.eventNames.forEach(I=>{const W=`plotly_${I.toLowerCase()}`;h.on(W,se=>this[I].emit(se))}),h.on("plotly_click",I=>{this.click.emit(I),this.plotlyClick.emit(I)}),this.updateWindowResizeHandler()},h=>{console.error("Error while plotting:",h),this.error.emit(h)})}createFigure(){const h=this.plotlyInstance;return{data:h.data,layout:h.layout,frames:h._transitionData?h._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const I=new Error("Plotly component wasn't initialized");throw this.error.emit(I),I}const h=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,h,this.config,this.frames).then(()=>{const I=this.createFigure();this.update.emit(I)},I=>{console.error("Error while updating plot:",I),this.error.emit(I)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(h,I){const W=Object.assign({},I,{uid:""});return JSON.stringify(W)}}return o.\u0275fac=function(h){return new(h||o)(ai(no),ai(Ed),ai(kh))},o.\u0275cmp=ga({type:o,selectors:[["plotly-plot"]],viewQuery:function(h,I){if(1&h&&H_(mS,7),2&h){let W;Tg(W=function(){return o=Zr(),c=U(),o[19].queries[c].queryList;var o,c}())&&(I.plotEl=W.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[ds([no]),hi],ngContentSelectors:vS,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(h,I){1&h&&(function(o){const c=Zr()[16][6];if(!c.projection){const I=c.projection=Vf(o?o.length:1,null),W=I.slice();let se=c.child;for(;null!==se;){const xe=o?iM(se,o):0;null!==xe&&(W[xe]?W[xe].projectionNext=se:I[xe]=se,W[xe]=se),se=se.next}}}(),ji(0,"div",0,1),function(o,c=0,h){const I=Zr(),W=Pa(),se=Iu(W,20+o,16,null,h||null);null===se.projection&&(se.projection=c),Al(),64!=(64&se.flags)&&function(o,c,h){ko(c[11],0,c,h,Kn(o,h,c),ki(h.parent||c[6],h,c))}(W,I,se)}(2),Vi()),2&h&&(No("ngClass",I.getClassName())("ngStyle",I.style),Zu("id",I.divId))},directives:[J2,tw],encapsulation:2}),o})(),Id=(()=>{class o{constructor(){}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({providers:[no],imports:[[Yp]]}),o})(),N3=(()=>{class o{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");no.setPlotly(o.plotlyjs)}isValid(){return void 0!==o.plotlyjs&&("function"==typeof o.plotlyjs.plot||"function"==typeof o.plotlyjs.newPlot)}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({providers:[no],imports:[[Yp,Id],Id]}),o.plotlyjs={},o})();class nc extends Y{constructor(c){super(),this._value=c}get value(){return this.getValue()}_subscribe(c){const h=super._subscribe(c);return!h.closed&&c.next(this._value),h}getValue(){const{hasError:c,thrownError:h,_value:I}=this;if(c)throw h;return this._throwIfClosed(),I}next(c){super.next(this._value=c)}}function B3(o,c,h){o?rt(h,o,c):c()}const cm=g(o=>function(){o(this),this.name="EmptyError",this.message="no elements in sequence"});function w1(...o){return je(1)(Ht(o,gt(o)))}function j3(o){return new D(c=>{ht(o()).subscribe(c)})}function V3(){return $((o,c)=>{let h=null;o._refCount++;const I=new K(c,void 0,void 0,void 0,()=>{if(!o||o._refCount<=0||0<--o._refCount)return void(h=null);const W=o._connection,se=h;h=null,W&&(!se||W===se)&&W.unsubscribe(),c.unsubscribe()});o.subscribe(I),I.closed||(h=o.connect())})}class wS extends D{constructor(c,h){super(),this.source=c,this.subjectFactory=h,this._subject=null,this._refCount=0,this._connection=null,Q(c)&&(this.lift=c.lift)}_subscribe(c){return this.getSubject().subscribe(c)}getSubject(){const c=this._subject;return(!c||c.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:c}=this;this._subject=this._connection=null,null==c||c.unsubscribe()}connect(){let c=this._connection;if(!c){c=this._connection=new b;const h=this.getSubject();c.add(this.source.subscribe(new K(h,void 0,()=>{this._teardown(),h.complete()},I=>{this._teardown(),h.error(I)},()=>this._teardown()))),c.closed&&(this._connection=null,c=b.EMPTY)}return c}refCount(){return V3()(this)}}function Dh(o,c){return $((h,I)=>{let W=null,se=0,xe=!1;const Se=()=>xe&&!W&&I.complete();h.subscribe(new K(I,Be=>{null==W||W.unsubscribe();let ct=0;const Ot=se++;ht(o(Be,Ot)).subscribe(W=new K(I,en=>I.next(c?c(Be,en,Ot,ct++):en),()=>{W=null,Se()}))},()=>{xe=!0,Se()}))})}function MS(o,c,h,I,W){return(se,xe)=>{let Se=h,Be=c,ct=0;se.subscribe(new K(xe,Ot=>{const en=ct++;Be=Se?o(Be,Ot,en):(Se=!0,Ot),I&&xe.next(Be)},W&&(()=>{Se&&xe.next(Be),xe.complete()})))}}function U3(o,c){return $(MS(o,c,arguments.length>=2,!0))}function Nf(o){return $((c,h)=>{let se,I=null,W=!1;I=c.subscribe(new K(h,void 0,void 0,xe=>{se=ht(o(xe,Nf(o)(c))),I?(I.unsubscribe(),I=null,se.subscribe(h)):W=!0})),W&&(I.unsubscribe(),I=null,se.subscribe(h))})}function T1(o){return o<=0?()=>Ne:$((c,h)=>{let I=[];c.subscribe(new K(h,W=>{I.push(W),o<I.length&&I.shift()},()=>{for(const W of I)h.next(W);h.complete()},void 0,()=>{I=null}))})}function H3(o=AS){return $((c,h)=>{let I=!1;c.subscribe(new K(h,W=>{I=!0,h.next(W)},()=>I?h.complete():h.error(o())))})}function AS(){return new cm}function q3(o){return $((c,h)=>{let I=!1;c.subscribe(new K(h,W=>{I=!0,h.next(W)},()=>{I||h.next(o),h.complete()}))})}function Ld(o,c){const h=arguments.length>=2;return I=>I.pipe(o?Sh((W,se)=>o(W,se,I)):S,gn(1),h?q3(c):H3(()=>new cm))}function mu(o,c,h){const I=ie(o)||c||h?{next:o,error:c,complete:h}:o;return I?$((W,se)=>{var xe;null===(xe=I.subscribe)||void 0===xe||xe.call(I);let Se=!0;W.subscribe(new K(se,Be=>{var ct;null===(ct=I.next)||void 0===ct||ct.call(I,Be),se.next(Be)},()=>{var Be;Se=!1,null===(Be=I.complete)||void 0===Be||Be.call(I),se.complete()},Be=>{var ct;Se=!1,null===(ct=I.error)||void 0===ct||ct.call(I,Be),se.error(Be)},()=>{var Be,ct;Se&&(null===(Be=I.unsubscribe)||void 0===Be||Be.call(I)),null===(ct=I.finalize)||void 0===ct||ct.call(I)}))}):S}class ef{constructor(c,h){this.id=c,this.url=h}}class M1 extends ef{constructor(c,h,I="imperative",W=null){super(c,h),this.navigationTrigger=I,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class r0 extends ef{constructor(c,h,I){super(c,h),this.urlAfterRedirects=I}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class G3 extends ef{constructor(c,h,I){super(c,h),this.reason=I}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class CS extends ef{constructor(c,h,I){super(c,h),this.error=I}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class SS extends ef{constructor(c,h,I,W){super(c,h),this.urlAfterRedirects=I,this.state=W}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DS extends ef{constructor(c,h,I,W){super(c,h),this.urlAfterRedirects=I,this.state=W}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IS extends ef{constructor(c,h,I,W,se){super(c,h),this.urlAfterRedirects=I,this.state=W,this.shouldActivate=se}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class LS extends ef{constructor(c,h,I,W){super(c,h),this.urlAfterRedirects=I,this.state=W}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PS extends ef{constructor(c,h,I,W){super(c,h),this.urlAfterRedirects=I,this.state=W}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W3{constructor(c){this.route=c}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Y3{constructor(c){this.route=c}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class OS{constructor(c){this.snapshot=c}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RS{constructor(c){this.snapshot=c}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FS{constructor(c){this.snapshot=c}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zS{constructor(c){this.snapshot=c}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z3{constructor(c,h,I){this.routerEvent=c,this.position=h,this.anchor=I}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Xa="primary";class NS{constructor(c){this.params=c||{}}has(c){return Object.prototype.hasOwnProperty.call(this.params,c)}get(c){if(this.has(c)){const h=this.params[c];return Array.isArray(h)?h[0]:h}return null}getAll(c){if(this.has(c)){const h=this.params[c];return Array.isArray(h)?h:[h]}return[]}get keys(){return Object.keys(this.params)}}function Pd(o){return new NS(o)}const X3="ngNavigationCancelingError";function A1(o){const c=Error("NavigationCancelingError: "+o);return c[X3]=!0,c}function jS(o,c,h){const I=h.path.split("/");if(I.length>o.length||"full"===h.pathMatch&&(c.hasChildren()||I.length<o.length))return null;const W={};for(let se=0;se<I.length;se++){const xe=I[se],Se=o[se];if(xe.startsWith(":"))W[xe.substring(1)]=Se;else if(xe!==Se.path)return null}return{consumed:o.slice(0,I.length),posParams:W}}function bc(o,c){const h=o?Object.keys(o):void 0,I=c?Object.keys(c):void 0;if(!h||!I||h.length!=I.length)return!1;let W;for(let se=0;se<h.length;se++)if(W=h[se],!$3(o[W],c[W]))return!1;return!0}function $3(o,c){if(Array.isArray(o)&&Array.isArray(c)){if(o.length!==c.length)return!1;const h=[...o].sort(),I=[...c].sort();return h.every((W,se)=>I[se]===W)}return o===c}function J3(o){return Array.prototype.concat.apply([],o)}function K3(o){return o.length>0?o[o.length-1]:null}function Il(o,c){for(const h in o)o.hasOwnProperty(h)&&c(o[h],h)}function _c(o){return Vv(o)?o:Dp(o)?Ht(Promise.resolve(o)):Ba(o)}const HS={exact:function t5(o,c,h){if(!Lh(o.segments,c.segments)||!fm(o.segments,c.segments,h)||o.numberOfChildren!==c.numberOfChildren)return!1;for(const I in c.children)if(!o.children[I]||!t5(o.children[I],c.children[I],h))return!1;return!0},subset:n5},Q3={exact:function(o,c){return bc(o,c)},subset:function(o,c){return Object.keys(c).length<=Object.keys(o).length&&Object.keys(c).every(h=>$3(o[h],c[h]))},ignored:()=>!0};function e5(o,c,h){return HS[h.paths](o.root,c.root,h.matrixParams)&&Q3[h.queryParams](o.queryParams,c.queryParams)&&!("exact"===h.fragment&&o.fragment!==c.fragment)}function n5(o,c,h){return r5(o,c,c.segments,h)}function r5(o,c,h,I){if(o.segments.length>h.length){const W=o.segments.slice(0,h.length);return!(!Lh(W,h)||c.hasChildren()||!fm(W,h,I))}if(o.segments.length===h.length){if(!Lh(o.segments,h)||!fm(o.segments,h,I))return!1;for(const W in c.children)if(!o.children[W]||!n5(o.children[W],c.children[W],I))return!1;return!0}{const W=h.slice(0,o.segments.length),se=h.slice(o.segments.length);return!!(Lh(o.segments,W)&&fm(o.segments,W,I)&&o.children[Xa])&&r5(o.children[Xa],c,se,I)}}function fm(o,c,h){return c.every((I,W)=>Q3[h](o[W].parameters,I.parameters))}class Ih{constructor(c,h,I){this.root=c,this.queryParams=h,this.fragment=I}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pd(this.queryParams)),this._queryParamMap}toString(){return ZS.serialize(this)}}class ro{constructor(c,h){this.segments=c,this.children=h,this.parent=null,Il(h,(I,W)=>I.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hm(this)}}class a0{constructor(c,h){this.path=c,this.parameters=h}get parameterMap(){return this._parameterMap||(this._parameterMap=Pd(this.parameters)),this._parameterMap}toString(){return l5(this)}}function Lh(o,c){return o.length===c.length&&o.every((h,I)=>h.path===c[I].path)}class i5{}class a5{parse(c){const h=new rD(c);return new Ih(h.parseRootSegment(),h.parseQueryParams(),h.parseFragment())}serialize(c){const h=`/${o0(c.root,!0)}`,I=function(o){const c=Object.keys(o).map(h=>{const I=o[h];return Array.isArray(I)?I.map(W=>`${dm(h)}=${dm(W)}`).join("&"):`${dm(h)}=${dm(I)}`}).filter(h=>!!h);return c.length?`?${c.join("&")}`:""}(c.queryParams);var o;return`${h}${I}${"string"==typeof c.fragment?`#${o=c.fragment,encodeURI(o)}`:""}`}}const ZS=new a5;function hm(o){return o.segments.map(c=>l5(c)).join("/")}function o0(o,c){if(!o.hasChildren())return hm(o);if(c){const h=o.children[Xa]?o0(o.children[Xa],!1):"",I=[];return Il(o.children,(W,se)=>{se!==Xa&&I.push(`${se}:${o0(W,!1)}`)}),I.length>0?`${h}(${I.join("//")})`:h}{const h=function(o,c){let h=[];return Il(o.children,(I,W)=>{W===Xa&&(h=h.concat(c(I,W)))}),Il(o.children,(I,W)=>{W!==Xa&&(h=h.concat(c(I,W)))}),h}(o,(I,W)=>W===Xa?[o0(o.children[Xa],!1)]:[`${W}:${o0(I,!1)}`]);return 1===Object.keys(o.children).length&&null!=o.children[Xa]?`${hm(o)}/${h[0]}`:`${hm(o)}/(${h.join("//")})`}}function o5(o){return encodeURIComponent(o).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dm(o){return o5(o).replace(/%3B/gi,";")}function k1(o){return o5(o).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pm(o){return decodeURIComponent(o)}function s5(o){return pm(o.replace(/\+/g,"%20"))}function l5(o){return`${k1(o.path)}${function(o){return Object.keys(o).map(c=>`;${k1(c)}=${k1(o[c])}`).join("")}(o.parameters)}`}const KS=/^[^\/()?;=#]+/;function gm(o){const c=o.match(KS);return c?c[0]:""}const QS=/^[^=?&#]+/,tD=/^[^&#]+/;class rD{constructor(c){this.url=c,this.remaining=c}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ro([],{}):new ro([],this.parseChildren())}parseQueryParams(){const c={};if(this.consumeOptional("?"))do{this.parseQueryParam(c)}while(this.consumeOptional("&"));return c}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const c=[];for(this.peekStartsWith("(")||c.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),c.push(this.parseSegment());let h={};this.peekStartsWith("/(")&&(this.capture("/"),h=this.parseParens(!0));let I={};return this.peekStartsWith("(")&&(I=this.parseParens(!1)),(c.length>0||Object.keys(h).length>0)&&(I[Xa]=new ro(c,h)),I}parseSegment(){const c=gm(this.remaining);if(""===c&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(c),new a0(pm(c),this.parseMatrixParams())}parseMatrixParams(){const c={};for(;this.consumeOptional(";");)this.parseParam(c);return c}parseParam(c){const h=gm(this.remaining);if(!h)return;this.capture(h);let I="";if(this.consumeOptional("=")){const W=gm(this.remaining);W&&(I=W,this.capture(I))}c[pm(h)]=pm(I)}parseQueryParam(c){const h=function(o){const c=o.match(QS);return c?c[0]:""}(this.remaining);if(!h)return;this.capture(h);let I="";if(this.consumeOptional("=")){const xe=function(o){const c=o.match(tD);return c?c[0]:""}(this.remaining);xe&&(I=xe,this.capture(I))}const W=s5(h),se=s5(I);if(c.hasOwnProperty(W)){let xe=c[W];Array.isArray(xe)||(xe=[xe],c[W]=xe),xe.push(se)}else c[W]=se}parseParens(c){const h={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const I=gm(this.remaining),W=this.remaining[I.length];if("/"!==W&&")"!==W&&";"!==W)throw new Error(`Cannot parse url '${this.url}'`);let se;I.indexOf(":")>-1?(se=I.substr(0,I.indexOf(":")),this.capture(se),this.capture(":")):c&&(se=Xa);const xe=this.parseChildren();h[se]=1===Object.keys(xe).length?xe[Xa]:new ro([],xe),this.consumeOptional("//")}return h}peekStartsWith(c){return this.remaining.startsWith(c)}consumeOptional(c){return!!this.peekStartsWith(c)&&(this.remaining=this.remaining.substring(c.length),!0)}capture(c){if(!this.consumeOptional(c))throw new Error(`Expected "${c}".`)}}class u5{constructor(c){this._root=c}get root(){return this._root.value}parent(c){const h=this.pathFromRoot(c);return h.length>1?h[h.length-2]:null}children(c){const h=E1(c,this._root);return h?h.children.map(I=>I.value):[]}firstChild(c){const h=E1(c,this._root);return h&&h.children.length>0?h.children[0].value:null}siblings(c){const h=C1(c,this._root);return h.length<2?[]:h[h.length-2].children.map(W=>W.value).filter(W=>W!==c)}pathFromRoot(c){return C1(c,this._root).map(h=>h.value)}}function E1(o,c){if(o===c.value)return c;for(const h of c.children){const I=E1(o,h);if(I)return I}return null}function C1(o,c){if(o===c.value)return[c];for(const h of c.children){const I=C1(o,h);if(I.length)return I.unshift(c),I}return[]}class tf{constructor(c,h){this.value=c,this.children=h}toString(){return`TreeNode(${this.value})`}}function Od(o){const c={};return o&&o.children.forEach(h=>c[h.value.outlet]=h),c}class c5 extends u5{constructor(c,h){super(c),this.snapshot=h,S1(this,c)}toString(){return this.snapshot.toString()}}function f5(o,c){const h=function(o,c){const xe=new mm([],{},{},"",{},Xa,c,null,o.root,-1,{});return new d5("",new tf(xe,[]))}(o,c),I=new nc([new a0("",{})]),W=new nc({}),se=new nc({}),xe=new nc({}),Se=new nc(""),Be=new Rd(I,W,xe,Se,se,Xa,c,h.root);return Be.snapshot=h.root,new c5(new tf(Be,[]),h)}class Rd{constructor(c,h,I,W,se,xe,Se,Be){this.url=c,this.params=h,this.queryParams=I,this.fragment=W,this.data=se,this.outlet=xe,this.component=Se,this._futureSnapshot=Be}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(oe(c=>Pd(c)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(oe(c=>Pd(c)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function h5(o,c="emptyOnly"){const h=o.pathFromRoot;let I=0;if("always"!==c)for(I=h.length-1;I>=1;){const W=h[I],se=h[I-1];if(W.routeConfig&&""===W.routeConfig.path)I--;else{if(se.component)break;I--}}return function(o){return o.reduce((c,h)=>({params:ca(ca({},c.params),h.params),data:ca(ca({},c.data),h.data),resolve:ca(ca({},c.resolve),h._resolvedData)}),{params:{},data:{},resolve:{}})}(h.slice(I))}class mm{constructor(c,h,I,W,se,xe,Se,Be,ct,Ot,en){this.url=c,this.params=h,this.queryParams=I,this.fragment=W,this.data=se,this.outlet=xe,this.component=Se,this.routeConfig=Be,this._urlSegment=ct,this._lastPathIndex=Ot,this._resolve=en}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(I=>I.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class d5 extends u5{constructor(c,h){super(h),this.url=c,S1(this,h)}toString(){return p5(this._root)}}function S1(o,c){c.value._routerState=o,c.children.forEach(h=>S1(o,h))}function p5(o){const c=o.children.length>0?` { ${o.children.map(p5).join(", ")} } `:"";return`${o.value}${c}`}function D1(o){if(o.snapshot){const c=o.snapshot,h=o._futureSnapshot;o.snapshot=h,bc(c.queryParams,h.queryParams)||o.queryParams.next(h.queryParams),c.fragment!==h.fragment&&o.fragment.next(h.fragment),bc(c.params,h.params)||o.params.next(h.params),function(o,c){if(o.length!==c.length)return!1;for(let h=0;h<o.length;++h)if(!bc(o[h],c[h]))return!1;return!0}(c.url,h.url)||o.url.next(h.url),bc(c.data,h.data)||o.data.next(h.data)}else o.snapshot=o._futureSnapshot,o.data.next(o._futureSnapshot.data)}function I1(o,c){const h=bc(o.params,c.params)&&function(o,c){return Lh(o,c)&&o.every((h,I)=>bc(h.parameters,c[I].parameters))}(o.url,c.url);return h&&!(!o.parent!=!c.parent)&&(!o.parent||I1(o.parent,c.parent))}function s0(o,c,h){if(h&&o.shouldReuseRoute(c.value,h.value.snapshot)){const I=h.value;I._futureSnapshot=c.value;const W=function(o,c,h){return c.children.map(I=>{for(const W of h.children)if(o.shouldReuseRoute(I.value,W.value.snapshot))return s0(o,I,W);return s0(o,I)})}(o,c,h);return new tf(I,W)}{if(o.shouldAttach(c.value)){const se=o.retrieve(c.value);if(null!==se){const xe=se.route;return xe.value._futureSnapshot=c.value,xe.children=c.children.map(Se=>s0(o,Se)),xe}}const I=function(o){return new Rd(new nc(o.url),new nc(o.params),new nc(o.queryParams),new nc(o.fragment),new nc(o.data),o.outlet,o.component,o)}(c.value),W=c.children.map(se=>s0(o,se));return new tf(I,W)}}function vm(o){return"object"==typeof o&&null!=o&&!o.outlets&&!o.segmentPath}function l0(o){return"object"==typeof o&&null!=o&&o.outlets}function L1(o,c,h,I,W){let se={};return I&&Il(I,(xe,Se)=>{se[Se]=Array.isArray(xe)?xe.map(Be=>`${Be}`):`${xe}`}),new Ih(h.root===o?c:g5(h.root,o,c),se,W)}function g5(o,c,h){const I={};return Il(o.children,(W,se)=>{I[se]=W===c?h:g5(W,c,h)}),new ro(o.segments,I)}class m5{constructor(c,h,I){if(this.isAbsolute=c,this.numberOfDoubleDots=h,this.commands=I,c&&I.length>0&&vm(I[0]))throw new Error("Root segment cannot have matrix parameters");const W=I.find(l0);if(W&&W!==K3(I))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class P1{constructor(c,h,I){this.segmentGroup=c,this.processChildren=h,this.index=I}}function v5(o,c,h){if(o||(o=new ro([],{})),0===o.segments.length&&o.hasChildren())return ym(o,c,h);const I=function(o,c,h){let I=0,W=c;const se={match:!1,pathIndex:0,commandIndex:0};for(;W<o.segments.length;){if(I>=h.length)return se;const xe=o.segments[W],Se=h[I];if(l0(Se))break;const Be=`${Se}`,ct=I<h.length-1?h[I+1]:null;if(W>0&&void 0===Be)break;if(Be&&ct&&"object"==typeof ct&&void 0===ct.outlets){if(!x5(Be,ct,xe))return se;I+=2}else{if(!x5(Be,{},xe))return se;I++}W++}return{match:!0,pathIndex:W,commandIndex:I}}(o,c,h),W=h.slice(I.commandIndex);if(I.match&&I.pathIndex<o.segments.length){const se=new ro(o.segments.slice(0,I.pathIndex),{});return se.children[Xa]=new ro(o.segments.slice(I.pathIndex),o.children),ym(se,0,W)}return I.match&&0===W.length?new ro(o.segments,{}):I.match&&!o.hasChildren()?O1(o,c,h):I.match?ym(o,0,W):O1(o,c,h)}function ym(o,c,h){if(0===h.length)return new ro(o.segments,{});{const I=function(o){return l0(o[0])?o[0].outlets:{[Xa]:o}}(h),W={};return Il(I,(se,xe)=>{"string"==typeof se&&(se=[se]),null!==se&&(W[xe]=v5(o.children[xe],c,se))}),Il(o.children,(se,xe)=>{void 0===I[xe]&&(W[xe]=se)}),new ro(o.segments,W)}}function O1(o,c,h){const I=o.segments.slice(0,c);let W=0;for(;W<h.length;){const se=h[W];if(l0(se)){const Be=gD(se.outlets);return new ro(I,Be)}if(0===W&&vm(h[0])){I.push(new a0(o.segments[c].path,y5(h[0]))),W++;continue}const xe=l0(se)?se.outlets[Xa]:`${se}`,Se=W<h.length-1?h[W+1]:null;xe&&Se&&vm(Se)?(I.push(new a0(xe,y5(Se))),W+=2):(I.push(new a0(xe,{})),W++)}return new ro(I,{})}function gD(o){const c={};return Il(o,(h,I)=>{"string"==typeof h&&(h=[h]),null!==h&&(c[I]=O1(new ro([],{}),0,h))}),c}function y5(o){const c={};return Il(o,(h,I)=>c[I]=`${h}`),c}function x5(o,c,h){return o==h.path&&bc(c,h.parameters)}class vD{constructor(c,h,I,W){this.routeReuseStrategy=c,this.futureState=h,this.currState=I,this.forwardEvent=W}activate(c){const h=this.futureState._root,I=this.currState?this.currState._root:null;this.deactivateChildRoutes(h,I,c),D1(this.futureState.root),this.activateChildRoutes(h,I,c)}deactivateChildRoutes(c,h,I){const W=Od(h);c.children.forEach(se=>{const xe=se.value.outlet;this.deactivateRoutes(se,W[xe],I),delete W[xe]}),Il(W,(se,xe)=>{this.deactivateRouteAndItsChildren(se,I)})}deactivateRoutes(c,h,I){const W=c.value,se=h?h.value:null;if(W===se)if(W.component){const xe=I.getContext(W.outlet);xe&&this.deactivateChildRoutes(c,h,xe.children)}else this.deactivateChildRoutes(c,h,I);else se&&this.deactivateRouteAndItsChildren(h,I)}deactivateRouteAndItsChildren(c,h){c.value.component&&this.routeReuseStrategy.shouldDetach(c.value.snapshot)?this.detachAndStoreRouteSubtree(c,h):this.deactivateRouteAndOutlet(c,h)}detachAndStoreRouteSubtree(c,h){const I=h.getContext(c.value.outlet),W=I&&c.value.component?I.children:h,se=Od(c);for(const xe of Object.keys(se))this.deactivateRouteAndItsChildren(se[xe],W);if(I&&I.outlet){const xe=I.outlet.detach(),Se=I.children.onOutletDeactivated();this.routeReuseStrategy.store(c.value.snapshot,{componentRef:xe,route:c,contexts:Se})}}deactivateRouteAndOutlet(c,h){const I=h.getContext(c.value.outlet),W=I&&c.value.component?I.children:h,se=Od(c);for(const xe of Object.keys(se))this.deactivateRouteAndItsChildren(se[xe],W);I&&I.outlet&&(I.outlet.deactivate(),I.children.onOutletDeactivated(),I.attachRef=null,I.resolver=null,I.route=null)}activateChildRoutes(c,h,I){const W=Od(h);c.children.forEach(se=>{this.activateRoutes(se,W[se.value.outlet],I),this.forwardEvent(new zS(se.value.snapshot))}),c.children.length&&this.forwardEvent(new RS(c.value.snapshot))}activateRoutes(c,h,I){const W=c.value,se=h?h.value:null;if(D1(W),W===se)if(W.component){const xe=I.getOrCreateContext(W.outlet);this.activateChildRoutes(c,h,xe.children)}else this.activateChildRoutes(c,h,I);else if(W.component){const xe=I.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const Se=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),xe.children.onOutletReAttached(Se.contexts),xe.attachRef=Se.componentRef,xe.route=Se.route.value,xe.outlet&&xe.outlet.attach(Se.componentRef,Se.route.value),D1(Se.route.value),this.activateChildRoutes(c,null,xe.children)}else{const Se=function(o){for(let c=o.parent;c;c=c.parent){const h=c.routeConfig;if(h&&h._loadedConfig)return h._loadedConfig;if(h&&h.component)return null}return null}(W.snapshot),Be=Se?Se.module.componentFactoryResolver:null;xe.attachRef=null,xe.route=W,xe.resolver=Be,xe.outlet&&xe.outlet.activateWith(W,Be),this.activateChildRoutes(c,null,xe.children)}}else this.activateChildRoutes(c,null,I)}}class R1{constructor(c,h){this.routes=c,this.module=h}}function Bf(o){return"function"==typeof o}function Ph(o){return o instanceof Ih}const u0=Symbol("INITIAL_VALUE");function c0(){return Dh(o=>function(...o){const c=gt(o),h=zt(o),{args:I,keys:W}=yw(o);if(0===I.length)return Ht([],c);const se=new D(function(o,c,h=S){return I=>{B3(c,()=>{const{length:W}=o,se=new Array(W);let xe=W,Se=W;for(let Be=0;Be<W;Be++)B3(c,()=>{const ct=Ht(o[Be],c);let Ot=!1;ct.subscribe(new K(I,en=>{se[Be]=en,Ot||(Ot=!0,Se--),Se||I.next(h(se.slice()))},()=>{--xe||I.complete()}))},I)},I)}}(I,c,W?xe=>bw(W,xe):S));return h?se.pipe(xw(h)):se}(o.map(c=>c.pipe(gn(1),function(...o){const c=gt(o);return $((h,I)=>{(c?w1(o,h,c):w1(o,h)).subscribe(I)})}(u0)))).pipe(U3((c,h)=>{let I=!1;return h.reduce((W,se,xe)=>W!==u0?W:(se===u0&&(I=!0),I||!1!==se&&xe!==h.length-1&&!Ph(se)?W:se),c)},u0),Sh(c=>c!==u0),oe(c=>Ph(c)?c:!0===c),gn(1)))}class MD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new f0,this.attachRef=null}}class f0{constructor(){this.contexts=new Map}onChildOutletCreated(c,h){const I=this.getOrCreateContext(c);I.outlet=h,this.contexts.set(c,I)}onChildOutletDestroyed(c){const h=this.getContext(c);h&&(h.outlet=null,h.attachRef=null)}onOutletDeactivated(){const c=this.contexts;return this.contexts=new Map,c}onOutletReAttached(c){this.contexts=c}getOrCreateContext(c){let h=this.getContext(c);return h||(h=new MD,this.contexts.set(c,h)),h}getContext(c){return this.contexts.get(c)||null}}let b5=(()=>{class o{constructor(h,I,W,se,xe){this.parentContexts=h,this.location=I,this.resolver=W,this.changeDetector=xe,this.activated=null,this._activatedRoute=null,this.activateEvents=new ea,this.deactivateEvents=new ea,this.attachEvents=new ea,this.detachEvents=new ea,this.name=se||Xa,h.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const h=this.parentContexts.getContext(this.name);h&&h.route&&(h.attachRef?this.attach(h.attachRef,h.route):this.activateWith(h.route,h.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const h=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(h.instance),h}attach(h,I){this.activated=h,this._activatedRoute=I,this.location.insert(h.hostView),this.attachEvents.emit(h.instance)}deactivate(){if(this.activated){const h=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(h)}}activateWith(h,I){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=h;const xe=(I=I||this.resolver).resolveComponentFactory(h._futureSnapshot.routeConfig.component),Se=this.parentContexts.getOrCreateContext(this.name).children,Be=new AD(h,Se,this.location.injector);this.activated=this.location.createComponent(xe,this.location.length,Be),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return o.\u0275fac=function(h){return new(h||o)(ai(f0),ai(Ku),ai(wd),function(o){return function(o,c){if("class"===c)return o.classes;if("style"===c)return o.styles;const h=o.attrs;if(h){const I=h.length;let W=0;for(;W<I;){const se=h[W];if(Gi(se))break;if(0===se)W+=2;else if("number"==typeof se)for(W++;W<I&&"string"==typeof h[W];)W++;else{if(se===c)return h[W+1];W+=2}}}return null}(Qi(),o)}("name"),ai(_y))},o.\u0275dir=Ui({type:o,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),o})();class AD{constructor(c,h,I){this.route=c,this.childContexts=h,this.parent=I}get(c,h){return c===Rd?this.route:c===f0?this.childContexts:this.parent.get(c,h)}}let _5=(()=>{class o{}return o.\u0275fac=function(h){return new(h||o)},o.\u0275cmp=ga({type:o,selectors:[["ng-component"]],decls:1,vars:0,template:function(h,I){1&h&&gc(0,"router-outlet")},directives:[b5],encapsulation:2}),o})();function w5(o,c=""){for(let h=0;h<o.length;h++){const I=o[h];kD(I,ED(c,I))}}function kD(o,c){o.children&&w5(o.children,c)}function ED(o,c){return c?o||c.path?o&&!c.path?`${o}/`:!o&&c.path?c.path:`${o}/${c.path}`:"":o}function F1(o){const c=o.children&&o.children.map(F1),h=c?wl(ca({},o),{children:c}):ca({},o);return!h.component&&(c||h.loadChildren)&&h.outlet&&h.outlet!==Xa&&(h.component=_5),h}function Fu(o){return o.outlet||Xa}function T5(o,c){const h=o.filter(I=>Fu(I)===c);return h.push(...o.filter(I=>Fu(I)!==c)),h}const M5={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function xm(o,c,h){var Se;if(""===c.path)return"full"===c.pathMatch&&(o.hasChildren()||h.length>0)?ca({},M5):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const W=(c.matcher||jS)(h,o,c);if(!W)return ca({},M5);const se={};Il(W.posParams,(Be,ct)=>{se[ct]=Be.path});const xe=W.consumed.length>0?ca(ca({},se),W.consumed[W.consumed.length-1].parameters):se;return{matched:!0,consumedSegments:W.consumed,lastChild:W.consumed.length,parameters:xe,positionalParamSegments:null!=(Se=W.posParams)?Se:{}}}function bm(o,c,h,I,W="corrected"){if(h.length>0&&function(o,c,h){return h.some(I=>_m(o,c,I)&&Fu(I)!==Xa)}(o,h,I)){const xe=new ro(c,function(o,c,h,I){const W={};W[Xa]=I,I._sourceSegment=o,I._segmentIndexShift=c.length;for(const se of h)if(""===se.path&&Fu(se)!==Xa){const xe=new ro([],{});xe._sourceSegment=o,xe._segmentIndexShift=c.length,W[Fu(se)]=xe}return W}(o,c,I,new ro(h,o.children)));return xe._sourceSegment=o,xe._segmentIndexShift=c.length,{segmentGroup:xe,slicedSegments:[]}}if(0===h.length&&function(o,c,h){return h.some(I=>_m(o,c,I))}(o,h,I)){const xe=new ro(o.segments,function(o,c,h,I,W,se){const xe={};for(const Se of I)if(_m(o,h,Se)&&!W[Fu(Se)]){const Be=new ro([],{});Be._sourceSegment=o,Be._segmentIndexShift="legacy"===se?o.segments.length:c.length,xe[Fu(Se)]=Be}return ca(ca({},W),xe)}(o,c,h,I,o.children,W));return xe._sourceSegment=o,xe._segmentIndexShift=c.length,{segmentGroup:xe,slicedSegments:h}}const se=new ro(o.segments,o.children);return se._sourceSegment=o,se._segmentIndexShift=c.length,{segmentGroup:se,slicedSegments:h}}function _m(o,c,h){return(!(o.hasChildren()||c.length>0)||"full"!==h.pathMatch)&&""===h.path}function A5(o,c,h,I){return!!(Fu(o)===I||I!==Xa&&_m(c,h,o))&&("**"===o.path||xm(c,o,h).matched)}function k5(o,c,h){return 0===c.length&&!o.children[h]}class h0{constructor(c){this.segmentGroup=c||null}}class E5{constructor(c){this.urlTree=c}}function wm(o){return new D(c=>c.error(new h0(o)))}function C5(o){return new D(c=>c.error(new E5(o)))}function LD(o){return new D(c=>c.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${o}'`)))}class RD{constructor(c,h,I,W,se){this.configLoader=h,this.urlSerializer=I,this.urlTree=W,this.config=se,this.allowRedirects=!0,this.ngModule=c.get(Xc)}apply(){const c=bm(this.urlTree.root,[],[],this.config).segmentGroup,h=new ro(c.segments,c.children);return this.expandSegmentGroup(this.ngModule,this.config,h,Xa).pipe(oe(se=>this.createUrlTree(z1(se),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Nf(se=>{if(se instanceof E5)return this.allowRedirects=!1,this.match(se.urlTree);throw se instanceof h0?this.noMatchError(se):se}))}match(c){return this.expandSegmentGroup(this.ngModule,this.config,c.root,Xa).pipe(oe(W=>this.createUrlTree(z1(W),c.queryParams,c.fragment))).pipe(Nf(W=>{throw W instanceof h0?this.noMatchError(W):W}))}noMatchError(c){return new Error(`Cannot match any routes. URL Segment: '${c.segmentGroup}'`)}createUrlTree(c,h,I){const W=c.segments.length>0?new ro([],{[Xa]:c}):c;return new Ih(W,h,I)}expandSegmentGroup(c,h,I,W){return 0===I.segments.length&&I.hasChildren()?this.expandChildren(c,h,I).pipe(oe(se=>new ro([],se))):this.expandSegment(c,I,h,I.segments,W,!0)}expandChildren(c,h,I){const W=[];for(const se of Object.keys(I.children))"primary"===se?W.unshift(se):W.push(se);return Ht(W).pipe(Dd(se=>{const xe=I.children[se],Se=T5(h,se);return this.expandSegmentGroup(c,Se,xe,se).pipe(oe(Be=>({segment:Be,outlet:se})))}),U3((se,xe)=>(se[xe.outlet]=xe.segment,se),{}),function(o,c){const h=arguments.length>=2;return I=>I.pipe(o?Sh((W,se)=>o(W,se,I)):S,T1(1),h?q3(c):H3(()=>new cm))}())}expandSegment(c,h,I,W,se,xe){return Ht(I).pipe(Dd(Se=>this.expandSegmentAgainstRoute(c,h,I,Se,W,se,xe).pipe(Nf(ct=>{if(ct instanceof h0)return Ba(null);throw ct}))),Ld(Se=>!!Se),Nf((Se,Be)=>{if(Se instanceof cm||"EmptyError"===Se.name){if(k5(h,W,se))return Ba(new ro([],{}));throw new h0(h)}throw Se}))}expandSegmentAgainstRoute(c,h,I,W,se,xe,Se){return A5(W,h,se,xe)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(c,h,W,se,xe):Se&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(c,h,I,W,se,xe):wm(h):wm(h)}expandSegmentAgainstRouteUsingRedirect(c,h,I,W,se,xe){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(c,I,W,xe):this.expandRegularSegmentAgainstRouteUsingRedirect(c,h,I,W,se,xe)}expandWildCardWithParamsAgainstRouteUsingRedirect(c,h,I,W){const se=this.applyRedirectCommands([],I.redirectTo,{});return I.redirectTo.startsWith("/")?C5(se):this.lineralizeSegments(I,se).pipe(ze(xe=>{const Se=new ro(xe,{});return this.expandSegment(c,Se,h,xe,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(c,h,I,W,se,xe){const{matched:Se,consumedSegments:Be,lastChild:ct,positionalParamSegments:Ot}=xm(h,W,se);if(!Se)return wm(h);const en=this.applyRedirectCommands(Be,W.redirectTo,Ot);return W.redirectTo.startsWith("/")?C5(en):this.lineralizeSegments(W,en).pipe(ze(bn=>this.expandSegment(c,h,I,bn.concat(se.slice(ct)),xe,!1)))}matchSegmentAgainstRoute(c,h,I,W,se){if("**"===I.path)return I.loadChildren?(I._loadedConfig?Ba(I._loadedConfig):this.configLoader.load(c.injector,I)).pipe(oe(bn=>(I._loadedConfig=bn,new ro(W,{})))):Ba(new ro(W,{}));const{matched:xe,consumedSegments:Se,lastChild:Be}=xm(h,I,W);if(!xe)return wm(h);const ct=W.slice(Be);return this.getChildConfig(c,I,W).pipe(ze(en=>{const bn=en.module,Sn=en.routes,{segmentGroup:tr,slicedSegments:qr}=bm(h,Se,ct,Sn),ei=new ro(tr.segments,tr.children);if(0===qr.length&&ei.hasChildren())return this.expandChildren(bn,Sn,ei).pipe(oe(va=>new ro(Se,va)));if(0===Sn.length&&0===qr.length)return Ba(new ro(Se,{}));const ri=Fu(I)===se;return this.expandSegment(bn,ei,Sn,qr,ri?Xa:se,!0).pipe(oe(Hi=>new ro(Se.concat(Hi.segments),Hi.children)))}))}getChildConfig(c,h,I){return h.children?Ba(new R1(h.children,c)):h.loadChildren?void 0!==h._loadedConfig?Ba(h._loadedConfig):this.runCanLoadGuards(c.injector,h,I).pipe(ze(W=>{return W?this.configLoader.load(c.injector,h).pipe(oe(se=>(h._loadedConfig=se,se))):(o=h,new D(c=>c.error(A1(`Cannot load children because the guard of the route "path: '${o.path}'" returned false`))));var o})):Ba(new R1([],c))}runCanLoadGuards(c,h,I){const W=h.canLoad;return W&&0!==W.length?Ba(W.map(xe=>{const Se=c.get(xe);let Be;if((o=Se)&&Bf(o.canLoad))Be=Se.canLoad(h,I);else{if(!Bf(Se))throw new Error("Invalid CanLoad guard");Be=Se(h,I)}var o;return _c(Be)})).pipe(c0(),mu(xe=>{if(!Ph(xe))return;const Se=A1(`Redirecting to "${this.urlSerializer.serialize(xe)}"`);throw Se.url=xe,Se}),oe(xe=>!0===xe)):Ba(!0)}lineralizeSegments(c,h){let I=[],W=h.root;for(;;){if(I=I.concat(W.segments),0===W.numberOfChildren)return Ba(I);if(W.numberOfChildren>1||!W.children[Xa])return LD(c.redirectTo);W=W.children[Xa]}}applyRedirectCommands(c,h,I){return this.applyRedirectCreatreUrlTree(h,this.urlSerializer.parse(h),c,I)}applyRedirectCreatreUrlTree(c,h,I,W){const se=this.createSegmentGroup(c,h.root,I,W);return new Ih(se,this.createQueryParams(h.queryParams,this.urlTree.queryParams),h.fragment)}createQueryParams(c,h){const I={};return Il(c,(W,se)=>{if("string"==typeof W&&W.startsWith(":")){const Se=W.substring(1);I[se]=h[Se]}else I[se]=W}),I}createSegmentGroup(c,h,I,W){const se=this.createSegments(c,h.segments,I,W);let xe={};return Il(h.children,(Se,Be)=>{xe[Be]=this.createSegmentGroup(c,Se,I,W)}),new ro(se,xe)}createSegments(c,h,I,W){return h.map(se=>se.path.startsWith(":")?this.findPosParam(c,se,W):this.findOrReturn(se,I))}findPosParam(c,h,I){const W=I[h.path.substring(1)];if(!W)throw new Error(`Cannot redirect to '${c}'. Cannot find '${h.path}'.`);return W}findOrReturn(c,h){let I=0;for(const W of h){if(W.path===c.path)return h.splice(I),W;I++}return c}}function z1(o){const c={};for(const I of Object.keys(o.children)){const se=z1(o.children[I]);(se.segments.length>0||se.hasChildren())&&(c[I]=se)}return function(o){if(1===o.numberOfChildren&&o.children[Xa]){const c=o.children[Xa];return new ro(o.segments.concat(c.segments),c.children)}return o}(new ro(o.segments,c))}class S5{constructor(c){this.path=c,this.route=this.path[this.path.length-1]}}class Tm{constructor(c,h){this.component=c,this.route=h}}function ND(o,c,h){const I=o._root;return d0(I,c?c._root:null,h,[I.value])}function Mm(o,c,h){const I=function(o){if(!o)return null;for(let c=o.parent;c;c=c.parent){const h=c.routeConfig;if(h&&h._loadedConfig)return h._loadedConfig}return null}(c);return(I?I.module.injector:h).get(o)}function d0(o,c,h,I,W={canDeactivateChecks:[],canActivateChecks:[]}){const se=Od(c);return o.children.forEach(xe=>{(function(o,c,h,I,W={canDeactivateChecks:[],canActivateChecks:[]}){const se=o.value,xe=c?c.value:null,Se=h?h.getContext(o.value.outlet):null;if(xe&&se.routeConfig===xe.routeConfig){const Be=function(o,c,h){if("function"==typeof h)return h(o,c);switch(h){case"pathParamsChange":return!Lh(o.url,c.url);case"pathParamsOrQueryParamsChange":return!Lh(o.url,c.url)||!bc(o.queryParams,c.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!I1(o,c)||!bc(o.queryParams,c.queryParams);default:return!I1(o,c)}}(xe,se,se.routeConfig.runGuardsAndResolvers);Be?W.canActivateChecks.push(new S5(I)):(se.data=xe.data,se._resolvedData=xe._resolvedData),d0(o,c,se.component?Se?Se.children:null:h,I,W),Be&&Se&&Se.outlet&&Se.outlet.isActivated&&W.canDeactivateChecks.push(new Tm(Se.outlet.component,xe))}else xe&&p0(c,Se,W),W.canActivateChecks.push(new S5(I)),d0(o,null,se.component?Se?Se.children:null:h,I,W)})(xe,se[xe.value.outlet],h,I.concat([xe.value]),W),delete se[xe.value.outlet]}),Il(se,(xe,Se)=>p0(xe,h.getContext(Se),W)),W}function p0(o,c,h){const I=Od(o),W=o.value;Il(I,(se,xe)=>{p0(se,W.component?c?c.children.getContext(xe):null:c,h)}),h.canDeactivateChecks.push(new Tm(W.component&&c&&c.outlet&&c.outlet.isActivated?c.outlet.component:null,W))}class JD{}function D5(o){return new D(c=>c.error(o))}class QD{constructor(c,h,I,W,se,xe){this.rootComponentType=c,this.config=h,this.urlTree=I,this.url=W,this.paramsInheritanceStrategy=se,this.relativeLinkResolution=xe}recognize(){const c=bm(this.urlTree.root,[],[],this.config.filter(xe=>void 0===xe.redirectTo),this.relativeLinkResolution).segmentGroup,h=this.processSegmentGroup(this.config,c,Xa);if(null===h)return null;const I=new mm([],Object.freeze({}),Object.freeze(ca({},this.urlTree.queryParams)),this.urlTree.fragment,{},Xa,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new tf(I,h),se=new d5(this.url,W);return this.inheritParamsAndData(se._root),se}inheritParamsAndData(c){const h=c.value,I=h5(h,this.paramsInheritanceStrategy);h.params=Object.freeze(I.params),h.data=Object.freeze(I.data),c.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(c,h,I){return 0===h.segments.length&&h.hasChildren()?this.processChildren(c,h):this.processSegment(c,h,h.segments,I)}processChildren(c,h){const I=[];for(const se of Object.keys(h.children)){const xe=h.children[se],Se=T5(c,se),Be=this.processSegmentGroup(Se,xe,se);if(null===Be)return null;I.push(...Be)}const W=I5(I);return W.sort((c,h)=>c.value.outlet===Xa?-1:h.value.outlet===Xa?1:c.value.outlet.localeCompare(h.value.outlet)),W}processSegment(c,h,I,W){for(const se of c){const xe=this.processSegmentAgainstRoute(se,h,I,W);if(null!==xe)return xe}return k5(h,I,W)?[]:null}processSegmentAgainstRoute(c,h,I,W){if(c.redirectTo||!A5(c,h,I,W))return null;let se,xe=[],Se=[];if("**"===c.path){const Sn=I.length>0?K3(I).parameters:{};se=new mm(I,Sn,Object.freeze(ca({},this.urlTree.queryParams)),this.urlTree.fragment,O5(c),Fu(c),c.component,c,L5(h),P5(h)+I.length,R5(c))}else{const Sn=xm(h,c,I);if(!Sn.matched)return null;xe=Sn.consumedSegments,Se=I.slice(Sn.lastChild),se=new mm(xe,Sn.parameters,Object.freeze(ca({},this.urlTree.queryParams)),this.urlTree.fragment,O5(c),Fu(c),c.component,c,L5(h),P5(h)+xe.length,R5(c))}const Be=(o=c).children?o.children:o.loadChildren?o._loadedConfig.routes:[],{segmentGroup:ct,slicedSegments:Ot}=bm(h,xe,Se,Be.filter(Sn=>void 0===Sn.redirectTo),this.relativeLinkResolution);var o;if(0===Ot.length&&ct.hasChildren()){const Sn=this.processChildren(Be,ct);return null===Sn?null:[new tf(se,Sn)]}if(0===Be.length&&0===Ot.length)return[new tf(se,[])];const en=Fu(c)===W,bn=this.processSegment(Be,ct,Ot,en?Xa:W);return null===bn?null:[new tf(se,bn)]}}function n8(o){const c=o.value.routeConfig;return c&&""===c.path&&void 0===c.redirectTo}function I5(o){const c=[],h=new Set;for(const I of o){if(!n8(I)){c.push(I);continue}const W=c.find(se=>I.value.routeConfig===se.value.routeConfig);void 0!==W?(W.children.push(...I.children),h.add(W)):c.push(I)}for(const I of h){const W=I5(I.children);c.push(new tf(I.value,W))}return c.filter(I=>!h.has(I))}function L5(o){let c=o;for(;c._sourceSegment;)c=c._sourceSegment;return c}function P5(o){let c=o,h=c._segmentIndexShift?c._segmentIndexShift:0;for(;c._sourceSegment;)c=c._sourceSegment,h+=c._segmentIndexShift?c._segmentIndexShift:0;return h-1}function O5(o){return o.data||{}}function R5(o){return o.resolve||{}}function N1(o){return Dh(c=>{const h=o(c);return h?Ht(h).pipe(oe(()=>c)):Ba(c)})}class c8 extends class{shouldDetach(c){return!1}store(c,h){}shouldAttach(c){return!1}retrieve(c){return null}shouldReuseRoute(c,h){return c.routeConfig===h.routeConfig}}{}const B1=new xa("ROUTES");class F5{constructor(c,h,I,W){this.injector=c,this.compiler=h,this.onLoadStartListener=I,this.onLoadEndListener=W}load(c,h){if(h._loader$)return h._loader$;this.onLoadStartListener&&this.onLoadStartListener(h);const W=this.loadModuleFactory(h.loadChildren).pipe(oe(se=>{this.onLoadEndListener&&this.onLoadEndListener(h);const xe=se.create(c);return new R1(J3(xe.injector.get(B1,void 0,lr.Self|lr.Optional)).map(F1),xe)}),Nf(se=>{throw h._loader$=void 0,se}));return h._loader$=new wS(W,()=>new Y).pipe(V3()),h._loader$}loadModuleFactory(c){return _c(c()).pipe(ze(h=>h instanceof S_?Ba(h):Ht(this.compiler.compileModuleAsync(h))))}}class h8{shouldProcessUrl(c){return!0}extract(c){return c}merge(c,h){return c}}function d8(o){throw o}function p8(o,c,h){return c.parse("/")}function z5(o,c){return Ba(null)}const g8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},m8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vu=(()=>{class o{constructor(h,I,W,se,xe,Se,Be){this.rootComponentType=h,this.urlSerializer=I,this.rootContexts=W,this.location=se,this.config=Be,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Y,this.errorHandler=d8,this.malformedUriErrorHandler=p8,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:z5,afterPreactivation:z5},this.urlHandlingStrategy=new h8,this.routeReuseStrategy=new c8,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=xe.get(Xc),this.console=xe.get(h2);const en=xe.get(al);this.isNgZoneEnabled=en instanceof al&&al.isInAngularZone(),this.resetConfig(Be),this.currentUrlTree=new Ih(new ro([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new F5(xe,Se,bn=>this.triggerEvent(new W3(bn)),bn=>this.triggerEvent(new Y3(bn))),this.routerState=f5(this.currentUrlTree,this.rootComponentType),this.transitions=new nc({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var h;return null==(h=this.location.getState())?void 0:h.\u0275routerPageId}setupNavigations(h){const I=this.events;return h.pipe(Sh(W=>0!==W.id),oe(W=>wl(ca({},W),{extractedUrl:this.urlHandlingStrategy.extract(W.rawUrl)})),Dh(W=>{let se=!1,xe=!1;return Ba(W).pipe(mu(Se=>{this.currentNavigation={id:Se.id,initialUrl:Se.currentRawUrl,extractedUrl:Se.extractedUrl,trigger:Se.source,extras:Se.extras,previousNavigation:this.lastSuccessfulNavigation?wl(ca({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Dh(Se=>{const Be=this.browserUrlTree.toString(),ct=!this.navigated||Se.extractedUrl.toString()!==Be||Be!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ct)&&this.urlHandlingStrategy.shouldProcessUrl(Se.rawUrl))return Am(Se.source)&&(this.browserUrlTree=Se.extractedUrl),Ba(Se).pipe(Dh(en=>{const bn=this.transitions.getValue();return I.next(new M1(en.id,this.serializeUrl(en.extractedUrl),en.source,en.restoredState)),bn!==this.transitions.getValue()?Ne:Promise.resolve(en)}),function(o,c,h,I){return Dh(W=>function(o,c,h,I,W){return new RD(o,c,h,I,W).apply()}(o,c,h,W.extractedUrl,I).pipe(oe(se=>wl(ca({},W),{urlAfterRedirects:se}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),mu(en=>{this.currentNavigation=wl(ca({},this.currentNavigation),{finalUrl:en.urlAfterRedirects})}),function(o,c,h,I,W){return ze(se=>function(o,c,h,I,W="emptyOnly",se="legacy"){try{const xe=new QD(o,c,h,I,W,se).recognize();return null===xe?D5(new JD):Ba(xe)}catch(xe){return D5(xe)}}(o,c,se.urlAfterRedirects,h(se.urlAfterRedirects),I,W).pipe(oe(xe=>wl(ca({},se),{targetSnapshot:xe}))))}(this.rootComponentType,this.config,en=>this.serializeUrl(en),this.paramsInheritanceStrategy,this.relativeLinkResolution),mu(en=>{if("eager"===this.urlUpdateStrategy){if(!en.extras.skipLocationChange){const Sn=this.urlHandlingStrategy.merge(en.urlAfterRedirects,en.rawUrl);this.setBrowserUrl(Sn,en)}this.browserUrlTree=en.urlAfterRedirects}const bn=new SS(en.id,this.serializeUrl(en.extractedUrl),this.serializeUrl(en.urlAfterRedirects),en.targetSnapshot);I.next(bn)}));if(ct&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:bn,extractedUrl:Sn,source:tr,restoredState:qr,extras:ei}=Se,ri=new M1(bn,this.serializeUrl(Sn),tr,qr);I.next(ri);const Nr=f5(Sn,this.rootComponentType).snapshot;return Ba(wl(ca({},Se),{targetSnapshot:Nr,urlAfterRedirects:Sn,extras:wl(ca({},ei),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Se.rawUrl,Se.resolve(null),Ne}),N1(Se=>{const{targetSnapshot:Be,id:ct,extractedUrl:Ot,rawUrl:en,extras:{skipLocationChange:bn,replaceUrl:Sn}}=Se;return this.hooks.beforePreactivation(Be,{navigationId:ct,appliedUrlTree:Ot,rawUrlTree:en,skipLocationChange:!!bn,replaceUrl:!!Sn})}),mu(Se=>{const Be=new DS(Se.id,this.serializeUrl(Se.extractedUrl),this.serializeUrl(Se.urlAfterRedirects),Se.targetSnapshot);this.triggerEvent(Be)}),oe(Se=>wl(ca({},Se),{guards:ND(Se.targetSnapshot,Se.currentSnapshot,this.rootContexts)})),function(o,c){return ze(h=>{const{targetSnapshot:I,currentSnapshot:W,guards:{canActivateChecks:se,canDeactivateChecks:xe}}=h;return 0===xe.length&&0===se.length?Ba(wl(ca({},h),{guardsResult:!0})):function(o,c,h,I){return Ht(o).pipe(ze(W=>function(o,c,h,I,W){const se=c&&c.routeConfig?c.routeConfig.canDeactivate:null;return se&&0!==se.length?Ba(se.map(Se=>{const Be=Mm(Se,c,W);let ct;if(function(o){return o&&Bf(o.canDeactivate)}(Be))ct=_c(Be.canDeactivate(o,c,h,I));else{if(!Bf(Be))throw new Error("Invalid CanDeactivate guard");ct=_c(Be(o,c,h,I))}return ct.pipe(Ld())})).pipe(c0()):Ba(!0)}(W.component,W.route,h,c,I)),Ld(W=>!0!==W,!0))}(xe,I,W,o).pipe(ze(Se=>Se&&function(o){return"boolean"==typeof o}(Se)?function(o,c,h,I){return Ht(c).pipe(Dd(W=>w1(function(o,c){return null!==o&&c&&c(new OS(o)),Ba(!0)}(W.route.parent,I),function(o,c){return null!==o&&c&&c(new FS(o)),Ba(!0)}(W.route,I),function(o,c,h){const I=c[c.length-1],se=c.slice(0,c.length-1).reverse().map(xe=>function(o){const c=o.routeConfig?o.routeConfig.canActivateChild:null;return c&&0!==c.length?{node:o,guards:c}:null}(xe)).filter(xe=>null!==xe).map(xe=>j3(()=>Ba(xe.guards.map(Be=>{const ct=Mm(Be,xe.node,h);let Ot;if(function(o){return o&&Bf(o.canActivateChild)}(ct))Ot=_c(ct.canActivateChild(I,o));else{if(!Bf(ct))throw new Error("Invalid CanActivateChild guard");Ot=_c(ct(I,o))}return Ot.pipe(Ld())})).pipe(c0())));return Ba(se).pipe(c0())}(o,W.path,h),function(o,c,h){const I=c.routeConfig?c.routeConfig.canActivate:null;if(!I||0===I.length)return Ba(!0);const W=I.map(se=>j3(()=>{const xe=Mm(se,c,h);let Se;if(function(o){return o&&Bf(o.canActivate)}(xe))Se=_c(xe.canActivate(c,o));else{if(!Bf(xe))throw new Error("Invalid CanActivate guard");Se=_c(xe(c,o))}return Se.pipe(Ld())}));return Ba(W).pipe(c0())}(o,W.route,h))),Ld(W=>!0!==W,!0))}(I,se,o,c):Ba(Se)),oe(Se=>wl(ca({},h),{guardsResult:Se})))})}(this.ngModule.injector,Se=>this.triggerEvent(Se)),mu(Se=>{if(Ph(Se.guardsResult)){const ct=A1(`Redirecting to "${this.serializeUrl(Se.guardsResult)}"`);throw ct.url=Se.guardsResult,ct}const Be=new IS(Se.id,this.serializeUrl(Se.extractedUrl),this.serializeUrl(Se.urlAfterRedirects),Se.targetSnapshot,!!Se.guardsResult);this.triggerEvent(Be)}),Sh(Se=>!!Se.guardsResult||(this.restoreHistory(Se),this.cancelNavigationTransition(Se,""),!1)),N1(Se=>{if(Se.guards.canActivateChecks.length)return Ba(Se).pipe(mu(Be=>{const ct=new LS(Be.id,this.serializeUrl(Be.extractedUrl),this.serializeUrl(Be.urlAfterRedirects),Be.targetSnapshot);this.triggerEvent(ct)}),Dh(Be=>{let ct=!1;return Ba(Be).pipe(function(o,c){return ze(h=>{const{targetSnapshot:I,guards:{canActivateChecks:W}}=h;if(!W.length)return Ba(h);let se=0;return Ht(W).pipe(Dd(xe=>function(o,c,h,I){return function(o,c,h,I){const W=Object.keys(o);if(0===W.length)return Ba({});const se={};return Ht(W).pipe(ze(xe=>function(o,c,h,I){const W=Mm(o,c,I);return _c(W.resolve?W.resolve(c,h):W(c,h))}(o[xe],c,h,I).pipe(mu(Se=>{se[xe]=Se}))),T1(1),ze(()=>Object.keys(se).length===W.length?Ba(se):Ne))}(o._resolve,o,c,I).pipe(oe(se=>(o._resolvedData=se,o.data=ca(ca({},o.data),h5(o,h).resolve),null)))}(xe.route,I,o,c)),mu(()=>se++),T1(1),ze(xe=>se===W.length?Ba(h):Ne))})}(this.paramsInheritanceStrategy,this.ngModule.injector),mu({next:()=>ct=!0,complete:()=>{ct||(this.restoreHistory(Be),this.cancelNavigationTransition(Be,"At least one route resolver didn't emit any value."))}}))}),mu(Be=>{const ct=new PS(Be.id,this.serializeUrl(Be.extractedUrl),this.serializeUrl(Be.urlAfterRedirects),Be.targetSnapshot);this.triggerEvent(ct)}))}),N1(Se=>{const{targetSnapshot:Be,id:ct,extractedUrl:Ot,rawUrl:en,extras:{skipLocationChange:bn,replaceUrl:Sn}}=Se;return this.hooks.afterPreactivation(Be,{navigationId:ct,appliedUrlTree:Ot,rawUrlTree:en,skipLocationChange:!!bn,replaceUrl:!!Sn})}),oe(Se=>{const Be=function(o,c,h){const I=s0(o,c._root,h?h._root:void 0);return new c5(I,c)}(this.routeReuseStrategy,Se.targetSnapshot,Se.currentRouterState);return wl(ca({},Se),{targetRouterState:Be})}),mu(Se=>{this.currentUrlTree=Se.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Se.urlAfterRedirects,Se.rawUrl),this.routerState=Se.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Se.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Se),this.browserUrlTree=Se.urlAfterRedirects)}),((o,c,h)=>oe(I=>(new vD(c,I.targetRouterState,I.currentRouterState,h).activate(o),I)))(this.rootContexts,this.routeReuseStrategy,Se=>this.triggerEvent(Se)),mu({next(){se=!0},complete(){se=!0}}),function(o){return $((c,h)=>{try{c.subscribe(h)}finally{h.add(o)}})}(()=>{var Se;se||xe||this.cancelNavigationTransition(W,`Navigation ID ${W.id} is not equal to the current navigation id ${this.navigationId}`),(null==(Se=this.currentNavigation)?void 0:Se.id)===W.id&&(this.currentNavigation=null)}),Nf(Se=>{if(xe=!0,function(o){return o&&o[X3]}(Se)){const Be=Ph(Se.url);Be||(this.navigated=!0,this.restoreHistory(W,!0));const ct=new G3(W.id,this.serializeUrl(W.extractedUrl),Se.message);I.next(ct),Be?setTimeout(()=>{const Ot=this.urlHandlingStrategy.merge(Se.url,this.rawUrlTree),en={skipLocationChange:W.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Am(W.source)};this.scheduleNavigation(Ot,"imperative",null,en,{resolve:W.resolve,reject:W.reject,promise:W.promise})},0):W.resolve(!1)}else{this.restoreHistory(W,!0);const Be=new CS(W.id,this.serializeUrl(W.extractedUrl),Se);I.next(Be);try{W.resolve(this.errorHandler(Se))}catch(ct){W.reject(ct)}}return Ne}))}))}resetRootComponentType(h){this.rootComponentType=h,this.routerState.root.component=this.rootComponentType}setTransition(h){this.transitions.next(ca(ca({},this.transitions.value),h))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(h=>{const I="popstate"===h.type?"popstate":"hashchange";"popstate"===I&&setTimeout(()=>{var Se;const W={replaceUrl:!0},se=(null==(Se=h.state)?void 0:Se.navigationId)?h.state:null;if(se){const Be=ca({},se);delete Be.navigationId,delete Be.\u0275routerPageId,0!==Object.keys(Be).length&&(W.state=Be)}const xe=this.parseUrl(h.url);this.scheduleNavigation(xe,I,se,W)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(h){this.events.next(h)}resetConfig(h){w5(h),this.config=h.map(F1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(h,I={}){const{relativeTo:W,queryParams:se,fragment:xe,queryParamsHandling:Se,preserveFragment:Be}=I,ct=W||this.routerState.root,Ot=Be?this.currentUrlTree.fragment:xe;let en=null;switch(Se){case"merge":en=ca(ca({},this.currentUrlTree.queryParams),se);break;case"preserve":en=this.currentUrlTree.queryParams;break;default:en=se||null}return null!==en&&(en=this.removeEmptyProps(en)),function(o,c,h,I,W){if(0===h.length)return L1(c.root,c.root,c,I,W);const se=function(o){if("string"==typeof o[0]&&1===o.length&&"/"===o[0])return new m5(!0,0,o);let c=0,h=!1;const I=o.reduce((W,se,xe)=>{if("object"==typeof se&&null!=se){if(se.outlets){const Se={};return Il(se.outlets,(Be,ct)=>{Se[ct]="string"==typeof Be?Be.split("/"):Be}),[...W,{outlets:Se}]}if(se.segmentPath)return[...W,se.segmentPath]}return"string"!=typeof se?[...W,se]:0===xe?(se.split("/").forEach((Se,Be)=>{0==Be&&"."===Se||(0==Be&&""===Se?h=!0:".."===Se?c++:""!=Se&&W.push(Se))}),W):[...W,se]},[]);return new m5(h,c,I)}(h);if(se.toRoot())return L1(c.root,new ro([],{}),c,I,W);const xe=function(o,c,h){if(o.isAbsolute)return new P1(c.root,!0,0);if(-1===h.snapshot._lastPathIndex){const se=h.snapshot._urlSegment;return new P1(se,se===c.root,0)}const I=vm(o.commands[0])?0:1;return function(o,c,h){let I=o,W=c,se=h;for(;se>W;){if(se-=W,I=I.parent,!I)throw new Error("Invalid number of '../'");W=I.segments.length}return new P1(I,!1,W-se)}(h.snapshot._urlSegment,h.snapshot._lastPathIndex+I,o.numberOfDoubleDots)}(se,c,o),Se=xe.processChildren?ym(xe.segmentGroup,xe.index,se.commands):v5(xe.segmentGroup,xe.index,se.commands);return L1(xe.segmentGroup,Se,c,I,W)}(ct,this.currentUrlTree,h,en,null!=Ot?Ot:null)}navigateByUrl(h,I={skipLocationChange:!1}){const W=Ph(h)?h:this.parseUrl(h),se=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(se,"imperative",null,I)}navigate(h,I={skipLocationChange:!1}){return function(o){for(let c=0;c<o.length;c++){const h=o[c];if(null==h)throw new Error(`The requested path contains ${h} segment at index ${c}`)}}(h),this.navigateByUrl(this.createUrlTree(h,I),I)}serializeUrl(h){return this.urlSerializer.serialize(h)}parseUrl(h){let I;try{I=this.urlSerializer.parse(h)}catch(W){I=this.malformedUriErrorHandler(W,this.urlSerializer,h)}return I}isActive(h,I){let W;if(W=!0===I?ca({},g8):!1===I?ca({},m8):I,Ph(h))return e5(this.currentUrlTree,h,W);const se=this.parseUrl(h);return e5(this.currentUrlTree,se,W)}removeEmptyProps(h){return Object.keys(h).reduce((I,W)=>{const se=h[W];return null!=se&&(I[W]=se),I},{})}processNavigations(){this.navigations.subscribe(h=>{this.navigated=!0,this.lastSuccessfulId=h.id,this.currentPageId=h.targetPageId,this.events.next(new r0(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,h.resolve(!0)},h=>{this.console.warn(`Unhandled Navigation Error: ${h}`)})}scheduleNavigation(h,I,W,se,xe){var ri,Nr,Hi;if(this.disposed)return Promise.resolve(!1);const Se=this.transitions.value,Be=Am(I)&&Se&&!Am(Se.source),ct=Se.rawUrl.toString()===h.toString(),Ot=Se.id===(null==(ri=this.currentNavigation)?void 0:ri.id);if(Be&&ct&&Ot)return Promise.resolve(!0);let bn,Sn,tr;xe?(bn=xe.resolve,Sn=xe.reject,tr=xe.promise):tr=new Promise((va,so)=>{bn=va,Sn=so});const qr=++this.navigationId;let ei;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(W=this.location.getState()),ei=W&&W.\u0275routerPageId?W.\u0275routerPageId:se.replaceUrl||se.skipLocationChange?null!=(Nr=this.browserPageId)?Nr:0:(null!=(Hi=this.browserPageId)?Hi:0)+1):ei=0,this.setTransition({id:qr,targetPageId:ei,source:I,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:h,extras:se,resolve:bn,reject:Sn,promise:tr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),tr.catch(va=>Promise.reject(va))}setBrowserUrl(h,I){const W=this.urlSerializer.serialize(h),se=ca(ca({},I.extras.state),this.generateNgRouterState(I.id,I.targetPageId));this.location.isCurrentPathEqualTo(W)||I.extras.replaceUrl?this.location.replaceState(W,"",se):this.location.go(W,"",se)}restoreHistory(h,I=!1){var W,se;if("computed"===this.canceledNavigationResolution){const xe=this.currentPageId-h.targetPageId;"popstate"!==h.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(W=this.currentNavigation)?void 0:W.finalUrl)||0===xe?this.currentUrlTree===(null==(se=this.currentNavigation)?void 0:se.finalUrl)&&0===xe&&(this.resetState(h),this.browserUrlTree=h.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(xe)}else"replace"===this.canceledNavigationResolution&&(I&&this.resetState(h),this.resetUrlToCurrentUrlTree())}resetState(h){this.routerState=h.currentRouterState,this.currentUrlTree=h.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,h.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(h,I){const W=new G3(h.id,this.serializeUrl(h.extractedUrl),I);this.triggerEvent(W),h.resolve(!1)}generateNgRouterState(h,I){return"computed"===this.canceledNavigationResolution?{navigationId:h,\u0275routerPageId:I}:{navigationId:h}}}return o.\u0275fac=function(h){Bv()},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();function Am(o){return"imperative"!==o}class N5{}class B5{preload(c,h){return Ba(null)}}let j5=(()=>{class o{constructor(h,I,W,se){this.router=h,this.injector=W,this.preloadingStrategy=se,this.loader=new F5(W,I,Be=>h.triggerEvent(new W3(Be)),Be=>h.triggerEvent(new Y3(Be)))}setUpPreloading(){this.subscription=this.router.events.pipe(Sh(h=>h instanceof r0),Dd(()=>this.preload())).subscribe(()=>{})}preload(){const h=this.injector.get(Xc);return this.processRoutes(h,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(h,I){const W=[];for(const se of I)if(se.loadChildren&&!se.canLoad&&se._loadedConfig){const xe=se._loadedConfig;W.push(this.processRoutes(xe.module,xe.routes))}else se.loadChildren&&!se.canLoad?W.push(this.preloadConfig(h,se)):se.children&&W.push(this.processRoutes(h,se.children));return Ht(W).pipe(je(),oe(se=>{}))}preloadConfig(h,I){return this.preloadingStrategy.preload(I,()=>(I._loadedConfig?Ba(I._loadedConfig):this.loader.load(h.injector,I)).pipe(ze(se=>(I._loadedConfig=se,this.processRoutes(se.module,se.routes)))))}}return o.\u0275fac=function(h){return new(h||o)(Ki(vu),Ki(Dg),Ki(Dl),Ki(N5))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})(),U1=(()=>{class o{constructor(h,I,W={}){this.router=h,this.viewportScroller=I,this.options=W,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},W.scrollPositionRestoration=W.scrollPositionRestoration||"disabled",W.anchorScrolling=W.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(h=>{h instanceof M1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=h.navigationTrigger,this.restoredId=h.restoredState?h.restoredState.navigationId:0):h instanceof r0&&(this.lastId=h.id,this.scheduleScrollEvent(h,this.router.parseUrl(h.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(h=>{h instanceof Z3&&(h.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(h.position):h.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(h.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(h,I){this.router.triggerEvent(new Z3(h,"popstate"===this.lastSource?this.store[this.restoredId]:null,I))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return o.\u0275fac=function(h){Bv()},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();const Oh=new xa("ROUTER_CONFIGURATION"),V5=new xa("ROUTER_FORROOT_GUARD"),_8=[Cy,{provide:i5,useClass:a5},{provide:vu,useFactory:function(o,c,h,I,W,se,xe={},Se,Be){const ct=new vu(null,o,c,h,I,W,J3(se));return Se&&(ct.urlHandlingStrategy=Se),Be&&(ct.routeReuseStrategy=Be),function(o,c){o.errorHandler&&(c.errorHandler=o.errorHandler),o.malformedUriErrorHandler&&(c.malformedUriErrorHandler=o.malformedUriErrorHandler),o.onSameUrlNavigation&&(c.onSameUrlNavigation=o.onSameUrlNavigation),o.paramsInheritanceStrategy&&(c.paramsInheritanceStrategy=o.paramsInheritanceStrategy),o.relativeLinkResolution&&(c.relativeLinkResolution=o.relativeLinkResolution),o.urlUpdateStrategy&&(c.urlUpdateStrategy=o.urlUpdateStrategy),o.canceledNavigationResolution&&(c.canceledNavigationResolution=o.canceledNavigationResolution)}(xe,ct),xe.enableTracing&&ct.events.subscribe(Ot=>{var en,bn;null==(en=console.group)||en.call(console,`Router Event: ${Ot.constructor.name}`),console.log(Ot.toString()),console.log(Ot),null==(bn=console.groupEnd)||bn.call(console)}),ct},deps:[i5,f0,Cy,Dl,Dg,B1,Oh,[class{},new Os],[class{},new Os]]},f0,{provide:Rd,useFactory:function(o){return o.routerState.root},deps:[vu]},j5,B5,class{preload(c,h){return h().pipe(Nf(()=>Ba(null)))}},{provide:Oh,useValue:{enableTracing:!1}}];function w8(){return new y2("Router",vu)}let U5=(()=>{class o{constructor(h,I){}static forRoot(h,I){return{ngModule:o,providers:[_8,H5(h),{provide:V5,useFactory:A8,deps:[[vu,new Os,new ff]]},{provide:Oh,useValue:I||{}},{provide:Cd,useFactory:M8,deps:[Eh,[new Vu(Ey),new Os],Oh]},{provide:U1,useFactory:T8,deps:[vu,vE,Oh]},{provide:N5,useExisting:I&&I.preloadingStrategy?I.preloadingStrategy:B5},{provide:y2,multi:!0,useFactory:w8},[H1,{provide:Cg,multi:!0,useFactory:S8,deps:[H1]},{provide:q5,useFactory:D8,deps:[H1]},{provide:f2,multi:!0,useExisting:q5}]]}}static forChild(h){return{ngModule:o,providers:[H5(h)]}}}return o.\u0275fac=function(h){return new(h||o)(Ki(V5,8),Ki(vu,8))},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({}),o})();function T8(o,c,h){return h.scrollOffset&&c.setOffset(h.scrollOffset),new U1(o,c,h)}function M8(o,c,h={}){return h.useHash?new e6(o,c):new j2(o,c)}function A8(o){return"guarded"}function H5(o){return[{provide:ml,multi:!0,useValue:o},{provide:B1,multi:!0,useValue:o}]}let H1=(()=>{class o{constructor(h){this.injector=h,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Y}appInitializer(){return this.injector.get(J4,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let I=null;const W=new Promise(Se=>I=Se),se=this.injector.get(vu),xe=this.injector.get(Oh);return"disabled"===xe.initialNavigation?(se.setUpLocationChangeListener(),I(!0)):"enabled"===xe.initialNavigation||"enabledBlocking"===xe.initialNavigation?(se.hooks.afterPreactivation=()=>this.initNavigation?Ba(null):(this.initNavigation=!0,I(!0),this.resultOfPreactivationDone),se.initialNavigation()):I(!0),W})}bootstrapListener(h){const I=this.injector.get(Oh),W=this.injector.get(j5),se=this.injector.get(U1),xe=this.injector.get(vu),Se=this.injector.get(qp);h===Se.components[0]&&(("enabledNonBlocking"===I.initialNavigation||void 0===I.initialNavigation)&&xe.initialNavigation(),W.setUpPreloading(),se.init(),xe.resetRootComponentType(Se.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return o.\u0275fac=function(h){return new(h||o)(Ki(Dl))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac}),o})();function S8(o){return o.appInitializer.bind(o)}function D8(o){return o.bootstrapListener.bind(o)}const q5=new xa("Router Initializer");function G5(o,c,h,I,W,se,xe){try{var Se=o[se](xe),Be=Se.value}catch(ct){return void h(ct)}Se.done?c(Be):Promise.resolve(Be).then(I,W)}function g0(o){return function(){var c=this,h=arguments;return new Promise(function(I,W){var se=o.apply(c,h);function xe(Be){G5(se,I,W,xe,Se,"next",Be)}function Se(Be){G5(se,I,W,xe,Se,"throw",Be)}xe(void 0)})}}let q1=(()=>{class o{constructor(h){this.http=h}getTrivia(h){return new Promise((I,W)=>{this.http.get(`https://opentdb.com/api.php?amount=10&category=${h.category}&difficulty=${h.difficulty}&type=${h.choiceType}`).subscribe(se=>{I(se)},se=>{W(se)})})}}return o.\u0275fac=function(h){return new(h||o)(Ki(v1))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),G1=(()=>{class o{constructor(h){this.http=h,this.m3oKey="YmJiNmIwMzYtYzJlOC00YWMwLTk3NzctOWQxYzhmMDE4MmY5",this.headers={headers:{Authorization:`Bearer ${this.m3oKey}`,"Content-Type":"application/json"}}}accessDatabase(){const h={table:"test"};return new Promise((I,W)=>{this.http.post("https://api.m3o.com/v1/db/Read",h,this.headers).subscribe(se=>{I(se)},se=>{W(se)})})}getUsers(){var h=this;return g0(function*(){let I=[];try{I=(yield h.accessDatabase()).records}catch(W){console.log(W)}return I})()}getUser(h){let I=[];this.getUsers().then(W=>(I=W,I.find(se=>se.id===h)))}generateUser(h,I,W){var se=this;return g0(function*(){let Se={record:{id:h,password:I,name:W,score:{perfectWin:0,easyWin:0,easyLoss:0,medWin:0,medLoss:0,hardWin:0,hardLoss:0},genres:{filmWins:0,musicWins:0,tvWins:0,gamingWins:0}},table:"test"};return new Promise((Be,ct)=>{se.http.post("https://api.m3o.com/v1/db/Create",Se,se.headers).subscribe(Ot=>{console.log(Ot),Be(Ot)},Ot=>{ct(Ot)})})})()}addScore(h,I,W,se){var xe=this;return g0(function*(){console.log(h),console.log(I),console.log(W),console.log(se);let Se={table:"test",record:{id:h.id,score:{perfectWin:10===I?h.score.perfectWin+1:h.score.perfectWin,easyWin:("easy"===W||""===W)&&I>=7?h.score.easyWin+1:h.score.easyWin,easyLoss:("easy"===W||""===W)&&I<7?h.score.easyLoss+1:h.score.easyLoss,medWin:"medium"===W&&I>=7?h.score.medWin+1:h.score.medWin,medLoss:"medium"===W&&I<7?h.score.medLoss+1:h.score.medLoss,hardWin:"hard"===W&&I>=7?h.score.hardWin+1:h.score.hardWin,hardLoss:"hard"===W&&I<7?h.score.hardLoss+1:h.score.hardLoss},genres:{filmWins:"11"===se&&I>=7?h.genres.filmWins+1:h.genres.filmWins,musicWins:"12"===se&&I>=7?h.genres.musicWins+1:h.genres.musicWins,tvWins:"14"===se&&I>=7?h.genres.tvWins+1:h.genres.tvWins,gamingWins:"15"===se&&I>=7?h.genres.gamingWins+1:h.genres.gamingWins}}};return new Promise((Be,ct)=>{xe.http.post("https://api.m3o.com/v1/db/Update",Se,xe.headers).subscribe(Ot=>{console.log(Ot),Be(Ot)},Ot=>{ct(Ot)})})})()}calculateWins(h){return h.score.easyWin+h.score.medWin+h.score.hardWin}calculateLoss(h){return h.score.easyLoss+h.score.medLoss+h.score.hardLoss}genreWins(h){return[h.genres.filmWins,h.genres.musicWins,h.genres.tvWins,h.genres.gamingWins]}}return o.\u0275fac=function(h){return new(h||o)(Ki(v1))},o.\u0275prov=Zn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),W5=(()=>{class o{constructor(h,I){this.triviaService=h,this.userService=I,this.results=[],this.users=[],this.isGuest=!0,this.loginID="",this.loginPass="",this.badLogin=!1,this.signUp={id:"",name:"",password:""},this.badSignup=!1,this.showInfo=!1,this.gameOutput=new ea,this.triviaInfo={difficulty:"",category:"",choiceType:""},this.selectedUser={id:"",name:"",password:"",score:{perfectWin:0,easyWin:0,easyLoss:0,medWin:0,medLoss:0,hardWin:0,hardLoss:0},genres:{filmWins:0,musicWins:0,tvWins:0,gamingWins:0}}}ngOnInit(){this.getUsers()}getUsers(){this.userService.getUsers().then(h=>{this.users=h})}tryLogin(){if(this.users.some(h=>h.id===this.loginID)){this.badLogin=!1;let h=this.users.find(I=>I.id===this.loginID);this.loginPass===h.password?(this.selectedUser=h,this.isGuest=!1):this.badLogin=!0}else this.badLogin=!0}generateUser(){var h=this;return g0(function*(){h.users.some(I=>I.id===h.signUp.id)||""===h.signUp.id||""===h.signUp.password?h.badSignup=!0:(yield h.userService.generateUser(h.signUp.id,h.signUp.password,""===h.signUp.name?h.signUp.id:h.signUp.name),h.getUsers())})()}startGame(){this.gameOutput.emit({isStats:!1,guest:this.isGuest,id:this.isGuest?"Guest":this.selectedUser.id,info:this.triviaInfo})}viewStats(){this.gameOutput.emit({isStats:!0,guest:this.isGuest,id:this.isGuest?"Guest":this.selectedUser.id,info:this.triviaInfo})}}return o.\u0275fac=function(h){return new(h||o)(ai(q1),ai(G1))},o.\u0275cmp=ga({type:o,selectors:[["home"]],outputs:{gameOutput:"gameOutput"},decls:58,vars:16,consts:[[1,"main-body","row","justify-content-center","align-items-center"],[1,"btn","btn-secondary",3,"click"],[1,"login","row","align-items-end","justify-content-center"],[1,"col"],["type","text","name","username","id","username","placeholder","username",1,"form-control",3,"ngModel","ngModelChange"],["type","password","name","password","id","password","placeholder","password",1,"form-control",3,"ngModel","ngModelChange"],[1,"bad-login"],["type","button","value","Log In",1,"btn","btn-primary",3,"click"],["type","text","placeholder","username",1,"form-control","text",3,"ngModel","ngModelChange"],["type","text","placeholder","name (leave blank to go by your username)",1,"form-control","text",3,"ngModel","ngModelChange"],["type","text","placeholder","password","required","",1,"form-control","text",3,"ngModel","ngModelChange"],["type","button","value","Sign Up",1,"btn","btn-primary",3,"click"],[1,"settings","row","align-items-end","justify-content-center"],["id","setting-title"],["for","Difficulty",1,"form-label"],["name","difficulty","id","difficulty",1,"form-control",3,"ngModel","ngModelChange"],["value","easy"],["value","medium"],["value","hard"],["for","category",1,"form-label"],["name","category","id","category",1,"form-control",3,"ngModel","ngModelChange"],["value","11"],["value","12"],["value","14"],["value","15"],["for","choice",1,"form-label"],["name","choice","id","choice",1,"form-control",3,"ngModel","ngModelChange"],["value","multiple"],["value","boolean"],[1,"btn","btn-secondary",3,"innerHTML","click"]],template:function(h,I){1&h&&(ji(0,"div",0),ji(1,"button",1),Co("click",function(){return I.viewStats()}),vo(2,"Leaderboard and Statistics"),Vi(),ji(3,"div",2),ji(4,"h1"),vo(5),Vi(),ji(6,"div",3),ji(7,"h3"),vo(8,"Log In:"),Vi(),ji(9,"input",4),Co("ngModelChange",function(se){return I.loginID=se}),Vi(),ji(10,"input",5),Co("ngModelChange",function(se){return I.loginPass=se}),Vi(),ji(11,"div",6),vo(12,"Wrong Username/Password. Please try again!"),Vi(),ji(13,"input",7),Co("click",function(){return I.tryLogin(),I.loginID="",I.loginPass=""}),Vi(),Vi(),ji(14,"div",3),ji(15,"h3"),vo(16,"First Time? Sign Up Here:"),Vi(),ji(17,"input",8),Co("ngModelChange",function(se){return I.signUp.id=se}),Vi(),ji(18,"input",9),Co("ngModelChange",function(se){return I.signUp.name=se}),Vi(),ji(19,"input",10),Co("ngModelChange",function(se){return I.signUp.password=se}),Vi(),ji(20,"div",6),vo(21,"Username is taken. Try another one!"),Vi(),ji(22,"input",11),Co("click",function(){return I.generateUser(),I.signUp.id="",I.signUp.name="",I.signUp.password=""}),Vi(),Vi(),Vi(),ji(23,"div",12),ji(24,"h3",13),vo(25,"Pick Your Game Settings: (leave empty for a completely random trivia game!)"),Vi(),ji(26,"div",3),ji(27,"label",14),vo(28,"Game Difficulty:"),Vi(),ji(29,"select",15),Co("ngModelChange",function(se){return I.triviaInfo.difficulty=se}),ji(30,"option",16),vo(31,"Easy"),Vi(),ji(32,"option",17),vo(33,"Medium"),Vi(),ji(34,"option",18),vo(35,"Hard"),Vi(),Vi(),Vi(),ji(36,"div",3),ji(37,"label",19),vo(38,"Trivia Category:"),Vi(),ji(39,"select",20),Co("ngModelChange",function(se){return I.triviaInfo.category=se}),ji(40,"option",21),vo(41,"Film"),Vi(),ji(42,"option",22),vo(43,"Music"),Vi(),ji(44,"option",23),vo(45,"Television"),Vi(),ji(46,"option",24),vo(47,"Video Games"),Vi(),Vi(),Vi(),ji(48,"div",3),ji(49,"label",25),vo(50,"Multiple Choice or True/False:"),Vi(),ji(51,"select",26),Co("ngModelChange",function(se){return I.triviaInfo.choiceType=se}),ji(52,"option",27),vo(53,"Multiple Choice"),Vi(),ji(54,"option",28),vo(55,"True/False"),Vi(),Vi(),Vi(),Vi(),ji(56,"div"),ji(57,"button",29),Co("click",function(){return I.startGame()}),Vi(),Vi(),Vi()),2&h&&(Ia(4),Ip("visibility",I.selectedUser.name?"visible":"hidden"),Ia(1),Th("Welcome, ",I.selectedUser.name,""),Ia(4),No("ngModel",I.loginID),Ia(1),No("ngModel",I.loginPass),Ia(1),Ip("visibility",I.badLogin?"visible":"hidden"),Ia(6),No("ngModel",I.signUp.id),Ia(1),No("ngModel",I.signUp.name),Ia(1),No("ngModel",I.signUp.password),Ia(1),Ip("visibility",I.badSignup?"visible":"hidden"),Ia(9),No("ngModel",I.triviaInfo.difficulty),Ia(10),No("ngModel",I.triviaInfo.category),Ia(12),No("ngModel",I.triviaInfo.choiceType),Ia(6),No("innerHTML",I.isGuest?"Start as Guest":"Start Game",Lc))},directives:[$p,Ky,im,sm,am,c3,h3],styles:[".main-body[_ngcontent-%COMP%]{margin:50px auto;text-align:center;font-size:20px;background-color:#0000001a;width:75%;padding:15px 0}.main-body[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:10px 0}#new-user[_ngcontent-%COMP%]{width:250px}.main-body[_ngcontent-%COMP%]   div.generate-button[_ngcontent-%COMP%]{margin:5px auto}#setting-title[_ngcontent-%COMP%]{background-color:#0003;padding:5px 10px}label[_ngcontent-%COMP%]{background-color:#0003;padding:5px 10px;margin:5px}.active-user[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:350px;text-align:center}"]}),o})();function L8(o,c){if(1&o){const h=yd();ji(0,"div",6),ji(1,"input",7),Co("ngModelChange",function(W){return hl(h),ou(2).selected=W}),Vi(),gc(2,"label",8),Vi()}if(2&o){const h=c.$implicit,I=c.index,W=ou(2);Ia(1),No("id","choice"+I)("value",h)("ngModel",W.selected),Ia(1),No("for","choice"+I)("innerHTML",h.answer,Lc)}}function P8(o,c){if(1&o){const h=yd();ji(0,"div",1),ji(1,"h1"),vo(2),Vi(),gc(3,"h3",2),ji(4,"form",3),Xu(5,L8,3,5,"div",4),ji(6,"button",5),Co("click",function(){return hl(h),ou().nextQuestion()}),vo(7,"Submit"),Vi(),Vi(),Vi()}if(2&o){const h=ou();Ia(2),Th("Question ",h.activeQuestion+1," of 10"),Ia(1),No("innerHTML",h.results[h.activeQuestion].question,Lc),Ia(2),No("ngForOf",h.answers)}}let Y5=(()=>{class o{constructor(h){this.triviaService=h,this.results=[],this.activeQuestion=0,this.answers=[],this.selected={answer:"",isCorrect:!1},this.correctAnswers=0,this.endInfo=new ea,this.gameInfo={category:"",difficulty:"",choiceType:""}}ngOnInit(){console.log(this.gameInfo),this.getTrivia()}getTrivia(){this.triviaService.getTrivia({category:this.gameInfo.category,difficulty:this.gameInfo.difficulty,choiceType:this.gameInfo.choiceType}).then(h=>{this.results=h.results,this.createAnswers()}).catch(console.log)}createAnswers(){this.answers=[],this.answers.push({answer:this.results[this.activeQuestion].correct_answer,isCorrect:!0}),console.log(this.results[this.activeQuestion].correct_answer);for(let h of this.results[this.activeQuestion].incorrect_answers)this.answers.push({answer:h,isCorrect:!1});if(this.answers.length>2){let h=this.answers.length,I=0;for(;0!=h;)I=Math.floor(Math.random()*h),h--,[this.answers[h],this.answers[I]]=[this.answers[I],this.answers[h]]}else if(2===this.answers.length){let h=this.answers.find(W=>"True"===W.answer),I=this.answers.find(W=>"False"===W.answer);this.answers=[h,I]}}nextQuestion(){this.activeQuestion<9?(this.selected.isCorrect&&(this.correctAnswers++,this.selected={answer:"",isCorrect:!1}),console.log(`Correct answers: ${this.correctAnswers}`),this.activeQuestion++,this.createAnswers()):9===this.activeQuestion&&(this.selected.isCorrect&&this.correctAnswers++,this.endGame())}endGame(){this.endInfo.emit(this.correctAnswers)}}return o.\u0275fac=function(h){return new(h||o)(ai(q1))},o.\u0275cmp=ga({type:o,selectors:[["game"]],inputs:{gameInfo:"gameInfo"},outputs:{endInfo:"endInfo"},decls:1,vars:1,consts:[["class","main-body",4,"ngIf"],[1,"main-body"],[3,"innerHTML"],[1,"question-answer","form-check"],["class","choice",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","next",3,"click"],[1,"choice"],["type","radio","name","choice",1,"form-check-input",3,"id","value","ngModel","ngModelChange"],[1,"form-check-label",3,"for","innerHTML"]],template:function(h,I){1&h&&Xu(0,P8,8,3,"div",0),2&h&&No("ngIf",I.results.length>0)},directives:[Hg,t3,Ww,rm,zy,u1,$p,Ky,im],styles:['@import"https://fonts.googleapis.com/css?family=Teko&display=swap";h1[_ngcontent-%COMP%]{font-family:"Teko"}.question-answer[_ngcontent-%COMP%]{font-size:1.25em}.next[_ngcontent-%COMP%]{margin-top:15px}.main-body[_ngcontent-%COMP%]{width:500px;height:400px;text-align:center}.question-answer[_ngcontent-%COMP%]{height:100%}.question-answer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{bottom:0}input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{font-weight:bold}']}),o})();const O8=[{path:"home",component:W5},{path:"game",component:Y5}];let R8=(()=>{class o{}return o.\u0275fac=function(h){return new(h||o)},o.\u0275mod=Ro({type:o}),o.\u0275inj=Ar({imports:[[U5.forRoot(O8)],U5]}),o})();function F8(o,c){if(1&o&&(ji(0,"h1"),vo(1),Vi()),2&o){const h=ou();Ia(1),Th("You got a score of ",h.finalInfo.score," out of 10!")}}function z8(o,c){if(1&o&&(ji(0,"h2"),vo(1),Vi()),2&o){const h=ou();Ia(1),Th("Here are your stats, ",h.finalInfo.id,":")}}function N8(o,c){if(1&o&&(ji(0,"div",8),gc(1,"plotly-plot",9),gc(2,"plotly-plot",9),Vi()),2&o){const h=ou();Ia(1),No("data",h.gameData)("layout",h.gameLayout),Ia(1),No("data",h.genreData)("layout",h.genreLayout)}}function B8(o,c){if(1&o&&(ji(0,"div",10),ji(1,"div",5),vo(2),Vi(),ji(3,"div",5),vo(4),Vi(),ji(5,"div",5),vo(6),Vi(),Vi()),2&o){const h=c.$implicit,I=ou();Ia(2),Pp(h.id),Ia(2),Pp(I.returnScore(h)),Ia(2),Pp(h.score.perfectWin)}}let j8=(()=>{class o{constructor(h){this.userService=h,this.justStats=!0,this.users=[],this.sortedUsers=[],this.gameData=[],this.gameLayout={},this.genreData=[],this.genreLayout={},this.leaderboardData=[],this.leaderboardLayout={},this.finalInfo={endGame:!1,guest:!0,id:"Guest",score:0}}ngOnInit(){!0===this.finalInfo.endGame&&(this.justStats=!1),this.plot(this.finalInfo.guest)}plot(h){this.userService.getUsers().then(I=>{if(this.users=I,!1===h){let W=this.users.find(se=>se.id===this.finalInfo.id);this.gamePlot(W),this.genrePlot(W)}this.leaderboard("win")})}gamePlot(h){this.gameData=[{x:["Easy","Medium","Hard"],y:[h.score.easyWin,h.score.medWin,h.score.hardWin],name:"Wins",type:"bar"},{x:["Easy","Medium","Hard"],y:[h.score.easyLoss,h.score.medLoss,h.score.hardLoss],name:"Losses",type:"bar"},{x:["Perfect Wins"],y:[h.score.perfectWin],name:"Perfect Wins",type:"bar",marker:{color:["#f3c677"]}}],this.gameLayout={width:600,height:400,title:"Wins/Losses By Difficulty",paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"}}genrePlot(h){this.genreData=[{ids:["Film","Music","TV","Gaming"],values:this.userService.genreWins(h),labels:["Film","Music","TV","Gaming"],textinfo:"value",insidetextfont:{size:35},type:"pie"}],this.genreLayout={width:500,height:400,title:"Top Genre Wins",paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"}}leaderboard(h){this.sortedUsers=this.users,"win"===h?this.sortedUsers=this.sortedUsers.sort((I,W)=>this.userService.calculateWins(W)-this.userService.calculateWins(I)):"perfect"===h&&(this.sortedUsers=this.sortedUsers.sort((I,W)=>W.score.perfectWin-I.score.perfectWin))}returnScore(h){return this.userService.calculateWins(h)}}return o.\u0275fac=function(h){return new(h||o)(ai(G1))},o.\u0275cmp=ga({type:o,selectors:[["stats"]],inputs:{finalInfo:"finalInfo"},decls:15,vars:4,consts:[[4,"ngIf"],["class","row",4,"ngIf"],[1,"container"],[1,"leaderboard"],[1,"sorters","row","align-items-center","justify-content-center"],[1,"col-4"],[1,"col-4","sort",3,"click"],["class","user-display row align-items-center justify-content-center",4,"ngFor","ngForOf"],[1,"row"],[1,"col-6",3,"data","layout"],[1,"user-display","row","align-items-center","justify-content-center"]],template:function(h,I){1&h&&(Xu(0,F8,2,1,"h1",0),Xu(1,z8,2,1,"h2",0),Xu(2,N8,3,4,"div",1),ji(3,"div",2),ji(4,"h2"),vo(5,"Leaderboard"),Vi(),ji(6,"div",3),ji(7,"div",4),ji(8,"div",5),vo(9,"Username"),Vi(),ji(10,"div",6),Co("click",function(){return I.leaderboard("win")}),vo(11,"Wins"),Vi(),ji(12,"div",6),Co("click",function(){return I.leaderboard("perfect")}),vo(13,"Perfect Wins"),Vi(),Vi(),Xu(14,B8,7,3,"div",7),Vi(),Vi()),2&h&&(No("ngIf",!I.justStats),Ia(1),No("ngIf",!I.finalInfo.guest),Ia(1),No("ngIf",!I.finalInfo.guest),Ia(12),No("ngForOf",I.sortedUsers))},directives:[Hg,zy,yS],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.leaderboard[_ngcontent-%COMP%]{width:600px;text-align:center}.leaderboard[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border:1px solid black}.sort[_ngcontent-%COMP%]:hover{background-color:#0003}"]}),o})();function V8(o,c){if(1&o){const h=yd();ji(0,"home",8),Co("gameOutput",function(W){return hl(h),ou().handleOutput(W)}),Vi()}}function U8(o,c){if(1&o){const h=yd();ji(0,"game",9),Co("endInfo",function(W){return hl(h),ou().endGame(W)}),Vi()}2&o&&No("gameInfo",ou().apiInfo)}function H8(o,c){1&o&&gc(0,"stats",10),2&o&&No("finalInfo",ou().finalInfo)}function q8(o,c){if(1&o){const h=yd();ji(0,"button",11),Co("click",function(){return hl(h),ou().restartGame()}),vo(1,"Back to Home"),Vi()}}let G8=(()=>{class o{constructor(h,I){this.userService=h,this.triviaService=I,this.users=[],this.dbInfo={},this.setup=!1,this.game=!1,this.gameStats=!1,this.isGuest=!1,this.activeUser="",this.finalScore=0,this.apiInfo={category:"",difficulty:"",choiceType:""},this.finalInfo={endGame:!1,guest:!0,id:"Guest",score:0}}ngOnInit(){this.setup=!0,this.getUsers()}getUsers(){this.userService.getUsers().then(h=>{this.users=h})}handleOutput(h){!1===h.isStats?this.startGame(h):(this.finalInfo.endGame=!1,this.finalInfo.guest=h.guest,this.finalInfo.id=h.id,this.setup=!1,this.gameStats=!0)}showStats(h,I){}startGame(h){!0===h.guest?(this.isGuest=!0,this.activeUser="Guest"):(this.isGuest=!1,this.activeUser=h.id),this.apiInfo=h.info,this.setup=!1,this.game=!0}endGame(h){var I=this;return g0(function*(){I.finalInfo={endGame:!0,guest:I.isGuest,id:I.activeUser,score:h},!1===I.isGuest&&(yield I.userService.addScore(I.users.find(W=>W.id===I.activeUser),h,I.apiInfo.difficulty,I.apiInfo.category)),I.game=!1,I.gameStats=!0})()}restartGame(){this.getUsers(),this.game=!1,this.gameStats=!1,this.setup=!0}}return o.\u0275fac=function(h){return new(h||o)(ai(G1),ai(q1))},o.\u0275cmp=ga({type:o,selectors:[["handler"]],decls:12,vars:4,consts:[[1,"main-body"],[1,"row","banners"],["href","https://opentdb.com/",1,"trivia-banner","col"],["href","https://m3o.com/",1,"db-banner","col"],[3,"gameOutput",4,"ngIf"],[3,"gameInfo","endInfo",4,"ngIf"],[3,"finalInfo",4,"ngIf"],["class","btn btn-danger back",3,"click",4,"ngIf"],[3,"gameOutput"],[3,"gameInfo","endInfo"],[3,"finalInfo"],[1,"btn","btn-danger","back",3,"click"]],template:function(h,I){1&h&&(ji(0,"div",0),ji(1,"h1"),vo(2,"Pop Culture Trivia!"),Vi(),ji(3,"p"),vo(4,"Powered by:"),Vi(),ji(5,"div",1),gc(6,"a",2),gc(7,"a",3),Vi(),Xu(8,V8,1,0,"home",4),Xu(9,U8,1,1,"game",5),Xu(10,H8,1,1,"stats",6),Xu(11,q8,2,0,"button",7),Vi()),2&h&&(Ia(8),No("ngIf",I.setup),Ia(1),No("ngIf",I.game),Ia(1),No("ngIf",I.gameStats),Ia(1),No("ngIf",!I.setup))},directives:[Hg,W5,Y5,j8],styles:['@import"https://fonts.googleapis.com/css?family=Teko&display=swap";.main-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:8em;font-family:"Teko"}.main-body[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center;flex-direction:column}.main-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:10px}.banners[_ngcontent-%COMP%]{margin-bottom:30px}.trivia-banner[_ngcontent-%COMP%]{background-image:url(trivia-banner.8fac2c7e9d07ebc3.png);background-size:100% 100%;width:130px;height:55px;margin:0 10px}.db-banner[_ngcontent-%COMP%]{background-image:url(https://m3o.com/_next/image?url=%2Flogo.png&w=384&q=75);width:60px;height:55px;background-size:100% 100%;margin:0 10px}.back[_ngcontent-%COMP%]{margin-top:20px}.main-body[_ngcontent-%COMP%]{text-align:center}']}),o})(),W8=(()=>{class o{constructor(){this.title="AngularAPI"}}return o.\u0275fac=function(h){return new(h||o)},o.\u0275cmp=ga({type:o,selectors:[["app-root"]],decls:1,vars:0,template:function(h,I){1&h&&gc(0,"handler")},directives:[G8],styles:[""]}),o})();N3.plotlyjs=dS;let Y8=(()=>{class o{}return o.\u0275fac=function(h){return new(h||o)},o.\u0275mod=Ro({type:o,bootstrap:[W8]}),o.\u0275inj=Ar({providers:[],imports:[[qE,R8,KC,hS,N3]]}),o})();M2=!1,UE().bootstrapModule(Y8).catch(o=>console.error(o))}},jl=>{jl(jl.s=923)}]);